"use strict";(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[2156],{52156:(e,t,o)=>{o.r(t);o.d(t,{LogLevelSwitcher:()=>L,default:()=>b});var s=o(49655);var l=o(87447);var n=o(42123);var a=o(59238);var i=o(68299);var r=o(53825);var d=o(50724);var c=o(27425);var g=o(55172);var h=o(37900);var u=o.n(h);var m=o(19289);function _(e){const t=e.translator||d.nullTranslator;const o=t.load("jupyterlab");let s="";if(e.newMessages>0){s=o.__("%1 new messages, %2 log entries for %3",e.newMessages,e.logEntries,e.source)}else{s+=o.__("%1 log entries for %2",e.logEntries,e.source)}return u().createElement(r.GroupItem,{spacing:0,onClick:e.handleClick,title:s},u().createElement(c.listIcon.react,{top:"2px",stylesheet:"statusBar"}),e.newMessages>0?u().createElement(r.TextItem,{source:e.newMessages}):u().createElement(u().Fragment,null))}class v extends c.VDomRenderer{constructor(e){super(new v.Model(e.loggerRegistry));this.translator=e.translator||d.nullTranslator;this._handleClick=e.handleClick;this.addClass("jp-mod-highlighted");this.addClass("jp-LogConsoleStatusItem")}render(){if(this.model===null||this.model.version===0){return null}const{flashEnabled:e,messages:t,source:o,version:s,versionDisplayed:l,versionNotified:n}=this.model;if(o!==null&&e&&s>n){this._flashHighlight();this.model.sourceNotified(o,s)}else if(o!==null&&e&&s>l){this._showHighlighted()}else{this._clearHighlight()}return u().createElement(_,{handleClick:this._handleClick,logEntries:t,newMessages:s-l,source:this.model.source,translator:this.translator})}_flashHighlight(){this._showHighlighted();this.removeClass("jp-LogConsole-flash");requestAnimationFrame((()=>{this.addClass("jp-LogConsole-flash")}))}_showHighlighted(){this.addClass("jp-mod-selected")}_clearHighlight(){this.removeClass("jp-LogConsole-flash");this.removeClass("jp-mod-selected")}}(function(e){class t extends c.VDomModel{constructor(e){super();this.flashEnabledChanged=new m.Signal(this);this._flashEnabled=true;this._source=null;this._sourceVersion=new Map;this._loggerRegistry=e;this._loggerRegistry.registryChanged.connect(this._handleLogRegistryChange,this);this._handleLogRegistryChange()}get messages(){if(this._source===null){return 0}const e=this._loggerRegistry.getLogger(this._source);return e.length}get version(){if(this._source===null){return 0}const e=this._loggerRegistry.getLogger(this._source);return e.version}get source(){return this._source}set source(e){if(this._source===e){return}this._source=e;this.stateChanged.emit()}get versionDisplayed(){var e,t;if(this._source===null){return 0}return(t=(e=this._sourceVersion.get(this._source))===null||e===void 0?void 0:e.lastDisplayed)!==null&&t!==void 0?t:0}get versionNotified(){var e,t;if(this._source===null){return 0}return(t=(e=this._sourceVersion.get(this._source))===null||e===void 0?void 0:e.lastNotified)!==null&&t!==void 0?t:0}get flashEnabled(){return this._flashEnabled}set flashEnabled(e){if(this._flashEnabled===e){return}this._flashEnabled=e;this.flashEnabledChanged.emit();this.stateChanged.emit()}sourceDisplayed(e,t){if(e===null||t===null){return}const o=this._sourceVersion.get(e);let s=false;if(o.lastDisplayed<t){o.lastDisplayed=t;s=true}if(o.lastNotified<t){o.lastNotified=t;s=true}if(s&&e===this._source){this.stateChanged.emit()}}sourceNotified(e,t){if(e===null){return}const o=this._sourceVersion.get(e);if(o.lastNotified<t){o.lastNotified=t;if(e===this._source){this.stateChanged.emit()}}}_handleLogRegistryChange(){const e=this._loggerRegistry.getLoggers();for(const t of e){if(!this._sourceVersion.has(t.source)){t.contentChanged.connect(this._handleLogContentChange,this);this._sourceVersion.set(t.source,{lastDisplayed:0,lastNotified:0})}}}_handleLogContentChange({source:e},t){if(e===this._source){this.stateChanged.emit()}}}e.Model=t})(v||(v={}));const C="@jupyterlab/logconsole-extension:plugin";var f;(function(e){e.addCheckpoint="logconsole:add-checkpoint";e.clear="logconsole:clear";e.open="logconsole:open";e.setLevel="logconsole:set-level"})(f||(f={}));const p={activate:y,id:C,description:"Provides the logger registry.",provides:n.ILoggerRegistry,requires:[s.ILabShell,a.IRenderMimeRegistry,d.ITranslator],optional:[l.ICommandPalette,s.ILayoutRestorer,i.ISettingRegistry,r.IStatusBar],autoStart:true};function y(e,t,o,s,a,i,r,d){const g=s.load("jupyterlab");let h=null;let u=null;const m=new n.LoggerRegistry({defaultRendermime:o,maxLength:1e3});const _=new l.WidgetTracker({namespace:"logconsole"});if(i){void i.restore(_,{command:f.open,name:()=>"logconsole"})}const p=new v({loggerRegistry:m,handleClick:()=>{var t;if(!h){y({insertMode:"split-bottom",ref:(t=e.shell.currentWidget)===null||t===void 0?void 0:t.id})}else{e.shell.activateById(h.id)}},translator:s});const y=(o={})=>{var a,i;u=new n.LogConsolePanel(m,s);u.source=(i=(a=o.source)!==null&&a!==void 0?a:t.currentPath)!==null&&i!==void 0?i:null;h=new l.MainAreaWidget({content:u});h.addClass("jp-LogConsole");h.title.closable=true;h.title.icon=c.listIcon;h.title.label=g.__("Log Console");const r=new c.CommandToolbarButton({commands:e.commands,id:f.addCheckpoint});const d=new c.CommandToolbarButton({commands:e.commands,id:f.clear});const v=()=>{e.commands.notifyCommandChanged(f.addCheckpoint);e.commands.notifyCommandChanged(f.clear);e.commands.notifyCommandChanged(f.open);e.commands.notifyCommandChanged(f.setLevel)};h.toolbar.addItem("lab-log-console-add-checkpoint",r);h.toolbar.addItem("lab-log-console-clear",d);h.toolbar.addItem("level",new L(h.content,s));u.sourceChanged.connect((()=>{v()}));u.sourceDisplayed.connect(((e,{source:t,version:o})=>{p.model.sourceDisplayed(t,o)}));h.disposed.connect((()=>{h=null;u=null;v()}));e.shell.add(h,"down",{ref:o.ref,mode:o.insertMode,type:"Log Console"});void _.add(h);e.shell.activateById(h.id);h.update();v()};e.commands.addCommand(f.open,{label:g.__("Show Log Console"),execute:(e={})=>{if(h){h.dispose()}else{y(e)}},isToggled:()=>h!==null});e.commands.addCommand(f.addCheckpoint,{execute:()=>{var e;(e=u===null||u===void 0?void 0:u.logger)===null||e===void 0?void 0:e.checkpoint()},icon:c.addIcon,isEnabled:()=>!!u&&u.source!==null,label:g.__("Add Checkpoint")});e.commands.addCommand(f.clear,{execute:()=>{var e;(e=u===null||u===void 0?void 0:u.logger)===null||e===void 0?void 0:e.clear()},icon:c.clearIcon,isEnabled:()=>!!u&&u.source!==null,label:g.__("Clear Log")});function b(e){return e.length===0?e:e[0].toUpperCase()+e.slice(1)}e.commands.addCommand(f.setLevel,{execute:e=>{if(u===null||u===void 0?void 0:u.logger){u.logger.level=e.level}},isEnabled:()=>!!u&&u.source!==null,label:e=>e["level"]?g.__("Set Log Level to %1",b(e.level)):g.__("Set log level to `level`.")});if(a){a.addItem({command:f.open,category:g.__("Main Area")})}if(d){d.registerStatusItem("@jupyterlab/logconsole-extension:status",{item:p,align:"left",isActive:()=>{var e;return((e=p.model)===null||e===void 0?void 0:e.version)>0},activeStateChanged:p.model.stateChanged})}function w(e){if(u){u.source=e}p.model.source=e}void e.restored.then((()=>{var e;t.currentPathChanged.connect(((e,{newValue:t})=>w(t)));w((e=t.currentPath)!==null&&e!==void 0?e:null)}));if(r){const t=e=>{m.maxLength=e.get("maxLogEntries").composite;p.model.flashEnabled=e.get("flash").composite};Promise.all([r.load(C),e.restored]).then((([e])=>{t(e);e.changed.connect((e=>{t(e)}))})).catch((e=>{console.error(e.message)}))}return m}class L extends c.ReactWidget{constructor(e,t){super();this.handleChange=e=>{if(this._logConsole.logger){this._logConsole.logger.level=e.target.value}this.update()};this.handleKeyDown=e=>{if(e.keyCode===13){this._logConsole.activate()}};this._id=`level-${g.UUID.uuid4()}`;this.translator=t!==null&&t!==void 0?t:d.nullTranslator;this._trans=this.translator.load("jupyterlab");this.addClass("jp-LogConsole-toolbarLogLevel");this._logConsole=e;if(e.source){this.update()}e.sourceChanged.connect(this._updateSource,this)}_updateSource(e,{oldValue:t,newValue:o}){if(t!==null){const o=e.loggerRegistry.getLogger(t);o.stateChanged.disconnect(this.update,this)}if(o!==null){const t=e.loggerRegistry.getLogger(o);t.stateChanged.connect(this.update,this)}this.update()}render(){const e=this._logConsole.logger;return h.createElement(h.Fragment,null,h.createElement("label",{htmlFor:this._id,className:e===null?"jp-LogConsole-toolbarLogLevel-disabled":undefined},this._trans.__("Log Level:")),h.createElement(c.HTMLSelect,{id:this._id,className:"jp-LogConsole-toolbarLogLevelDropdown",onChange:this.handleChange,onKeyDown:this.handleKeyDown,value:e===null||e===void 0?void 0:e.level,"aria-label":this._trans.__("Log level"),disabled:e===null,options:e===null?[]:[[this._trans.__("Critical"),"Critical"],[this._trans.__("Error"),"Error"],[this._trans.__("Warning"),"Warning"],[this._trans.__("Info"),"Info"],[this._trans.__("Debug"),"Debug"]].map((e=>({label:e[0],value:e[1].toLowerCase()})))}))}}const b=p}}]);
//# sourceMappingURL=2156.53bba2da6e1c490add89.js.map?v=53bba2da6e1c490add89