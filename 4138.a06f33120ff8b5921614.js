"use strict";(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[4138],{44138:(e,t,a)=>{a.r(t);a.d(t,{default:()=>f});var n=a(3167);var s=a(37900);var l=a.n(s);var i=a(27425);var r=a(10535);var d=a(50724);const o="jp-CellTags";const c="jp-CellTags-Tag";const g="jp-CellTags-Applied";const p="jp-CellTags-Unapplied";const u="jp-CellTags-Holder";const h="jp-CellTags-Add";const m="jp-CellTags-Empty";class v{constructor(e,t){this._tracker=e;this._translator=t||d.nullTranslator;this._trans=this._translator.load("jupyterlab");this._editing=false}addTag(e,t){const a=e.formData;if(t&&!a.includes(t)){a.push(t);e.formContext.updateMetadata({[e.name]:a},true)}}pullTags(){var e,t;const a=(e=this._tracker)===null||e===void 0?void 0:e.currentWidget;const n=(t=a===null||a===void 0?void 0:a.model)===null||t===void 0?void 0:t.cells;if(n===undefined){return[]}const s=(0,r.reduce)(n,((e,t)=>{var a;const n=(a=t.getMetadata("tags"))!==null&&a!==void 0?a:[];return[...e,...n]}),[]);return[...new Set(s)].filter((e=>e!==""))}_emptyAddTag(e){e.value="";e.style.width="";e.classList.add(m)}_onAddTagKeyDown(e,t){const a=t.target;if(t.ctrlKey)return;if(t.key==="Enter"){this.addTag(e,a.value)}else if(t.key==="Escape"){this._emptyAddTag(a)}}_onAddTagFocus(e){if(!this._editing){e.target.blur()}}_onAddTagBlur(e){if(this._editing){this._editing=false;this._emptyAddTag(e)}}_onChange(e){if(!e.target.value){this._emptyAddTag(e.target)}else{e.target.classList.remove(m);const t=document.createElement("span");t.className=h;t.textContent=e.target.value;document.body.appendChild(t);e.target.style.setProperty("width",`calc(${t.getBoundingClientRect().width}px + var(--jp-add-tag-extra-width))`);document.body.removeChild(t)}}_onAddTagClick(e,t){const a=t.target.closest("div");const n=a===null||a===void 0?void 0:a.childNodes[0];if(!this._editing){this._editing=true;n.value="";n.focus()}else if(t.target!==n){this.addTag(e,n.value)}t.preventDefault()}_onTagClick(e,t){const a=e.formData;if(a.includes(t)){a.splice(a.indexOf(t),1)}else{a.push(t)}e.formContext.updateMetadata({[e.name]:a},true)}render(e){const t=this.pullTags();return l().createElement("div",{className:o},l().createElement("div",{className:"jp-FormGroup-fieldLabel jp-FormGroup-contentItem"},"Cell Tags"),t&&t.map(((t,a)=>l().createElement("div",{key:a,className:`${c} ${e.formData.includes(t)?g:p}`,onClick:()=>this._onTagClick(e,t)},l().createElement("div",{className:u},l().createElement("span",null,t),e.formData.includes(t)&&l().createElement(i.LabIcon.resolveReact,{icon:i.checkIcon,tag:"span",elementPosition:"center",height:"18px",width:"18px",marginLeft:"5px",marginRight:"-3px"}))))),l().createElement("div",{className:`${c} ${p}`},l().createElement("div",{className:u,onMouseDown:t=>this._onAddTagClick(e,t)},l().createElement("input",{className:`${h} ${m}`,type:"text",placeholder:this._trans.__("Add Tag"),onKeyDown:t=>this._onAddTagKeyDown(e,t),onFocus:e=>this._onAddTagFocus(e),onBlur:e=>this._onAddTagBlur(e.target),onChange:e=>{this._onChange(e)}}),l().createElement(i.LabIcon.resolveReact,{icon:i.addIcon,tag:"span",height:"18px",width:"18px",marginLeft:"5px",marginRight:"-3px"}))))}}const _={id:"@jupyterlab/celltags-extension:plugin",description:"Adds the cell tags editor.",autoStart:true,requires:[n.INotebookTracker],optional:[i.IFormRendererRegistry],activate:(e,t,a)=>{if(a){const e={fieldRenderer:e=>new v(t).render(e)};a.addRenderer("@jupyterlab/celltags-extension:plugin.renderer",e)}}};const f=[_]}}]);
//# sourceMappingURL=4138.a06f33120ff8b5921614.js.map?v=a06f33120ff8b5921614