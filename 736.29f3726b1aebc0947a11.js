"use strict";(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[736],{10736:(e,t,i)=>{i.r(t);i.d(t,{ConnectionLost:()=>r,IConnectionLost:()=>N,ILabShell:()=>R,ILabStatus:()=>$,ILayoutRestorer:()=>y,IMimeDocumentTracker:()=>P,IRouter:()=>q,ITreePathUpdater:()=>J,JupyterFrontEnd:()=>u,JupyterFrontEndContextMenu:()=>g,JupyterLab:()=>z,LabShell:()=>j,LayoutRestorer:()=>w,Router:()=>F,createRendermimePlugin:()=>C,createRendermimePlugins:()=>k,createSemanticCommand:()=>K});var n=i(87447);var s=i(50724);const r=async function(e,t,i){i=i||s.nullTranslator;const r=i.load("jupyterlab");const a=r.__("Server Connection Error");const o=r.__("A connection to the Jupyter server could not be established.\n"+"JupyterLab will continue trying to reconnect.\n"+"Check your network connection or Jupyter server configuration.\n");return(0,n.showErrorMessage)(a,{message:o})};var a=i(35627);var o=i(4702);var d=i(27425);var l=i(1706);var c=i(55172);var h=i(19289);class u extends l.Application{constructor(e){super(e);this._formatChanged=new h.Signal(this);this.contextMenu=new d.ContextMenuSvg({commands:this.commands,renderer:e.contextMenuRenderer,groupByTarget:false,sortBySelector:false});const t=new Promise((e=>{requestAnimationFrame((()=>{e()}))}));this.commandLinker=e.commandLinker||new n.CommandLinker({commands:this.commands});this.docRegistry=e.docRegistry||new a.DocumentRegistry;this.restored=e.restored||this.started.then((()=>t)).catch((()=>t));this.serviceManager=e.serviceManager||new o.ServiceManager}get format(){return this._format}set format(e){if(this._format!==e){this._format=e;document.body.dataset["format"]=e;this._formatChanged.emit(e)}}get formatChanged(){return this._formatChanged}contextMenuHitTest(e){if(!this._contextMenuEvent||!(this._contextMenuEvent.target instanceof Node)){return undefined}let t=this._contextMenuEvent.target;do{if(t instanceof HTMLElement&&e(t)){return t}t=t.parentNode}while(t&&t.parentNode&&t!==t.parentNode);return undefined}evtContextMenu(e){this._contextMenuEvent=e;if(e.shiftKey||p.suppressContextMenu(e.target)){return}const t=this.contextMenu.open(e);if(t){const t=this.contextMenu.menu.items;if(t.length===1&&t[0].command===g.contextMenu){this.contextMenu.menu.close();return}e.preventDefault();e.stopPropagation()}}}(function(e){function t(e,t){const i=new RegExp(`^${t.urls.doc}`);const n=e.match(i);if(n){return true}else{return false}}e.inDocMode=t;e.IPaths=new c.Token("@jupyterlab/application:IPaths",`A service providing information about various\n  URLs and server paths for the current application. Use this service if you want to\n  assemble URLs to use the JupyterLab REST API.`);e.ITreeResolver=new c.Token("@jupyterlab/application:ITreeResolver","A service to resolve the tree path.")})(u||(u={}));var p;(function(e){function t(e){return e.closest("[data-jp-suppress-context-menu]")!==null}e.suppressContextMenu=t})(p||(p={}));var g;(function(e){e.contextMenu="__internal:context-menu-info"})(g||(g={}));var f=i(78098);var _=i(59238);var m=i(60796);const y=new c.Token("@jupyterlab/application:ILayoutRestorer","A service providing application layout restoration functionality. Use this to have your activities restored across page loads.");const v="layout-restorer:data";class w{constructor(e){this._deferred=new Array;this._deferredMainArea=null;this._firstDone=false;this._promisesDone=false;this._promises=[];this._restored=new c.PromiseDelegate;this._trackers=new Set;this._widgets=new Map;this._mode="multiple-document";this._connector=e.connector;this._first=e.first;this._registry=e.registry;if(e.mode){this._mode=e.mode}void this._first.then((()=>{this._firstDone=true})).then((()=>Promise.all(this._promises))).then((()=>{this._promisesDone=true;this._trackers.clear()})).then((()=>{this._restored.resolve(void 0)}))}get isDeferred(){return this._deferred.length>0}get restored(){return this._restored.promise}add(e,t){b.nameProperty.set(e,t);this._widgets.set(t,e);e.disposed.connect(this._onWidgetDisposed,this)}async fetch(){var e;const t={fresh:true,mainArea:null,downArea:null,leftArea:null,rightArea:null,topArea:null,relativeSizes:null};const i=this._connector.fetch(v);try{const[n]=await Promise.all([i,this.restored]);if(!n){return t}const{main:s,down:r,left:a,right:o,relativeSizes:d,top:l}=n;const c=false;let h=null;if(this._mode==="multiple-document"){h=this._rehydrateMainArea(s)}else{this._deferredMainArea=s}const u=this._rehydrateDownArea(r);const p=this._rehydrateSideArea(a);const g=this._rehydrateSideArea(o);return{fresh:c,mainArea:h,downArea:u,leftArea:p,rightArea:g,relativeSizes:d||null,topArea:(e=l)!==null&&e!==void 0?e:null}}catch(n){return t}}async restore(e,t){if(this._firstDone){throw new Error("restore() must be called before `first` has resolved.")}const{namespace:i}=e;if(this._trackers.has(i)){throw new Error(`The tracker "${i}" is already restored.`)}const{args:n,command:s,name:r,when:a}=t;this._trackers.add(i);e.widgetAdded.connect(((e,t)=>{const n=r(t);if(n){this.add(t,`${i}:${n}`)}}),this);e.widgetUpdated.connect(((e,t)=>{const n=r(t);if(n){const e=`${i}:${n}`;b.nameProperty.set(t,e);this._widgets.set(e,t)}}));const o=this._first;if(this._mode=="multiple-document"){const t=e.restore({args:n||(()=>c.JSONExt.emptyObject),command:s,connector:this._connector,name:r,registry:this._registry,when:a?[o].concat(a):o}).catch((e=>{console.error(e)}));this._promises.push(t);return t}e.defer({args:n||(()=>c.JSONExt.emptyObject),command:s,connector:this._connector,name:r,registry:this._registry,when:a?[o].concat(a):o});this._deferred.push(e)}async restoreDeferred(){if(!this.isDeferred){return null}const e=Promise.resolve();const t=this._deferred.map((t=>e.then((()=>t.restore()))));this._deferred.length=0;await Promise.all(t);return this._rehydrateMainArea(this._deferredMainArea)}save(e){if(!this._promisesDone){const e="save() was called prematurely.";console.warn(e);return Promise.reject(e)}const t={};t.main=this.isDeferred?this._deferredMainArea:this._dehydrateMainArea(e.mainArea);t.down=this._dehydrateDownArea(e.downArea);t.left=this._dehydrateSideArea(e.leftArea);t.right=this._dehydrateSideArea(e.rightArea);t.relativeSizes=e.relativeSizes;t.top={...e.topArea};return this._connector.save(v,t)}_dehydrateMainArea(e){if(!e){return null}return b.serializeMain(e)}_rehydrateMainArea(e){if(!e){return null}return b.deserializeMain(e,this._widgets)}_dehydrateDownArea(e){if(!e){return null}const t={size:e.size};if(e.currentWidget){const i=b.nameProperty.get(e.currentWidget);if(i){t.current=i}}if(e.widgets){t.widgets=e.widgets.map((e=>b.nameProperty.get(e))).filter((e=>!!e))}return t}_rehydrateDownArea(e){var t;if(!e){return{currentWidget:null,size:0,widgets:null}}const i=this._widgets;const n=e.current&&i.has(`${e.current}`)?i.get(`${e.current}`):null;const s=!Array.isArray(e.widgets)?null:e.widgets.map((e=>i.has(`${e}`)?i.get(`${e}`):null)).filter((e=>!!e));return{currentWidget:n,size:(t=e.size)!==null&&t!==void 0?t:0,widgets:s}}_dehydrateSideArea(e){if(!e){return null}const t={collapsed:e.collapsed,visible:e.visible};if(e.currentWidget){const i=b.nameProperty.get(e.currentWidget);if(i){t.current=i}}if(e.widgets){t.widgets=e.widgets.map((e=>b.nameProperty.get(e))).filter((e=>!!e))}if(e.widgetStates){t.widgetStates=e.widgetStates}return t}_rehydrateSideArea(e){var t,i;if(!e){return{collapsed:true,currentWidget:null,visible:true,widgets:null,widgetStates:{["null"]:{sizes:null,expansionStates:null}}}}const n=this._widgets;const s=(t=e.collapsed)!==null&&t!==void 0?t:false;const r=e.current&&n.has(`${e.current}`)?n.get(`${e.current}`):null;const a=!Array.isArray(e.widgets)?null:e.widgets.map((e=>n.has(`${e}`)?n.get(`${e}`):null)).filter((e=>!!e));const o=e.widgetStates;return{collapsed:s,currentWidget:r,widgets:a,visible:(i=e.visible)!==null&&i!==void 0?i:true,widgetStates:o}}_onWidgetDisposed(e){const t=b.nameProperty.get(e);this._widgets.delete(t)}}var b;(function(e){e.nameProperty=new m.AttachedProperty({name:"name",create:e=>""});function t(i){if(!i||!i.type){return null}if(i.type==="tab-area"){return{type:"tab-area",currentIndex:i.currentIndex,widgets:i.widgets.map((t=>e.nameProperty.get(t))).filter((e=>!!e))}}return{type:"split-area",orientation:i.orientation,sizes:i.sizes,children:i.children.map(t).filter((e=>!!e))}}function i(i){const n={dock:i&&i.dock&&t(i.dock.main)||null};if(i){if(i.currentWidget){const t=e.nameProperty.get(i.currentWidget);if(t){n.current=t}}}return n}e.serializeMain=i;function n(e,t){if(!e){return null}const i=e.type||"unknown";if(i==="unknown"||i!=="tab-area"&&i!=="split-area"){console.warn(`Attempted to deserialize unknown type: ${i}`);return null}if(i==="tab-area"){const{currentIndex:i,widgets:n}=e;const s={type:"tab-area",currentIndex:i||0,widgets:n&&n.map((e=>t.get(e))).filter((e=>!!e))||[]};if(s.currentIndex>s.widgets.length-1){s.currentIndex=0}return s}const{orientation:s,sizes:r,children:a}=e;const o={type:"split-area",orientation:s,sizes:r||[],children:a&&a.map((e=>n(e,t))).filter((e=>!!e))||[]};return o}function s(e,t){if(!e){return null}const i=e.current||null;const s=e.dock||null;return{currentWidget:i&&t.has(i)&&t.get(i)||null,dock:s?{main:n(s,t)}:null}}e.deserializeMain=s})(b||(b={}));const P=new c.Token("@jupyterlab/application:IMimeDocumentTracker","A widget tracker for documents rendered using a mime renderer extension. Use this if you want to list and interact with documents rendered by such extensions.");function k(e){const t=[];const i="application-mimedocuments";const s=new n.WidgetTracker({namespace:i});e.forEach((e=>{let i=e.default;if(!e.hasOwnProperty("__esModule")){i=e}if(!Array.isArray(i)){i=[i]}i.forEach((e=>{t.push(C(s,e))}))}));t.push({id:"@jupyterlab/application:mimedocument",description:"Provides a mime document widget tracker.",optional:[y],provides:P,autoStart:true,activate:(e,t)=>{if(t){void t.restore(s,{command:"docmanager:open",args:e=>({path:e.context.path,factory:A.factoryNameProperty.get(e)}),name:e=>`${e.context.path}:${A.factoryNameProperty.get(e)}`})}return s}});return t}function C(e,t){return{id:t.id,description:t.description,requires:[_.IRenderMimeRegistry,s.ITranslator],autoStart:true,activate:(i,n,s)=>{if(t.rank!==undefined){n.addFactory(t.rendererFactory,t.rank)}else{n.addFactory(t.rendererFactory)}if(!t.documentWidgetFactoryOptions){return}const r=i.docRegistry;let o=[];if(Array.isArray(t.documentWidgetFactoryOptions)){o=t.documentWidgetFactoryOptions}else{o=[t.documentWidgetFactoryOptions]}if(t.fileTypes){t.fileTypes.forEach((e=>{if(e.icon){e={...e,icon:d.LabIcon.resolve({icon:e.icon})}}i.docRegistry.addFileType(e)}))}o.forEach((i=>{const o=i.toolbarFactory?e=>i.toolbarFactory(e.content.renderer):undefined;const d=new a.MimeDocumentFactory({renderTimeout:t.renderTimeout,dataType:t.dataType,rendermime:n,modelName:i.modelName,name:i.name,primaryFileType:r.getFileType(i.primaryFileType),fileTypes:i.fileTypes,defaultFor:i.defaultFor,defaultRendered:i.defaultRendered,toolbarFactory:o,translator:s,factory:t.rendererFactory});r.addWidgetFactory(d);d.widgetCreated.connect(((t,i)=>{A.factoryNameProperty.set(i,d.name);i.context.pathChanged.connect((()=>{void e.save(i)}));void e.add(i)}))}))}}}var A;(function(e){e.factoryNameProperty=new m.AttachedProperty({name:"factoryName",create:()=>undefined})})(A||(A={}));var T=i(97899);var M=i(10535);var B=i(37917);var S=i(65061);var x=i(65178);const H="jp-LabShell";const W="jp-SideBar";const L="jp-mod-current";const E="jp-mod-active";const I=900;const D="jp-Activity";const R=new c.Token("@jupyterlab/application:ILabShell","A service for interacting with the JupyterLab shell. The top-level ``application`` object also has a reference to the shell, but it has a restricted interface in order to be agnostic to different shell implementations on the application. Use this to get more detailed information about currently active widgets and layout state.");class j extends x.Widget{constructor(e){super();this._dockChildHook=(e,t)=>{switch(t.type){case"child-added":t.child.addClass(D);this._tracker.add(t.child);break;case"child-removed":t.child.removeClass(D);this._tracker.remove(t.child);break;default:break}return true};this._activeChanged=new h.Signal(this);this._cachedLayout=null;this._currentChanged=new h.Signal(this);this._currentPath="";this._currentPathChanged=new h.Signal(this);this._modeChanged=new h.Signal(this);this._isRestored=false;this._layoutModified=new h.Signal(this);this._layoutDebouncer=new S.Debouncer((()=>{this._layoutModified.emit(undefined)}),0);this._restored=new c.PromiseDelegate;this._tracker=new x.FocusTracker;this._topHandlerHiddenByUser=false;this._idTypeMap=new Map;this._mainOptionsCache=new Map;this._sideOptionsCache=new Map;this._delayedWidget=new Array;this.addClass(H);this.id="main";if((e===null||e===void 0?void 0:e.waitForRestore)===false){this._userLayout={"multiple-document":{},"single-document":{}}}const t=this._skipLinkWidget=new O.SkipLinkWidget(this);this._skipLinkWidget.show();const i=new x.Panel;i.addClass("jp-skiplink-wrapper");i.addWidget(t);const n=this._headerPanel=new x.BoxPanel;const r=this._menuHandler=new O.PanelHandler;r.panel.node.setAttribute("role","navigation");const o=this._topHandler=new O.PanelHandler;o.panel.node.setAttribute("role","banner");const l=this._bottomPanel=new x.BoxPanel;l.node.setAttribute("role","contentinfo");const u=new x.BoxPanel;const p=this._vsplitPanel=new O.RestorableSplitPanel;const g=this._dockPanel=new T.CollabDockPanel({hiddenMode:x.Widget.HiddenMode.Display});B.MessageLoop.installMessageHook(g,this._dockChildHook);const f=this._hsplitPanel=new O.RestorableSplitPanel;const _=this._downPanel=new d.TabPanelSvg({tabsMovable:true});const m=this._leftHandler=new O.SideBarHandler;const y=this._rightHandler=new O.SideBarHandler;const v=new x.BoxLayout;n.id="jp-header-panel";r.panel.id="jp-menu-panel";o.panel.id="jp-top-panel";l.id="jp-bottom-panel";u.id="jp-main-content-panel";p.id="jp-main-vsplit-panel";g.id="jp-main-dock-panel";f.id="jp-main-split-panel";_.id="jp-down-stack";m.sideBar.addClass(W);m.sideBar.addClass("jp-mod-left");m.sideBar.node.setAttribute("role","complementary");m.stackedPanel.id="jp-left-stack";y.sideBar.addClass(W);y.sideBar.addClass("jp-mod-right");y.sideBar.node.setAttribute("role","complementary");y.stackedPanel.id="jp-right-stack";g.node.setAttribute("role","main");u.spacing=0;p.spacing=1;g.spacing=5;f.spacing=1;n.direction="top-to-bottom";p.orientation="vertical";u.direction="left-to-right";f.orientation="horizontal";l.direction="bottom-to-top";x.SplitPanel.setStretch(m.stackedPanel,0);x.SplitPanel.setStretch(_,0);x.SplitPanel.setStretch(g,1);x.SplitPanel.setStretch(y.stackedPanel,0);x.BoxPanel.setStretch(m.sideBar,0);x.BoxPanel.setStretch(f,1);x.BoxPanel.setStretch(y.sideBar,0);x.SplitPanel.setStretch(p,1);f.addWidget(m.stackedPanel);f.addWidget(g);f.addWidget(y.stackedPanel);p.addWidget(f);p.addWidget(_);u.addWidget(m.sideBar);u.addWidget(p);u.addWidget(y.sideBar);v.direction="top-to-bottom";v.spacing=0;p.setRelativeSizes([3,1]);f.setRelativeSizes([1,2.5,1]);x.BoxLayout.setStretch(n,0);x.BoxLayout.setStretch(r.panel,0);x.BoxLayout.setStretch(o.panel,0);x.BoxLayout.setStretch(u,1);x.BoxLayout.setStretch(l,0);v.addWidget(i);v.addWidget(n);v.addWidget(o.panel);v.addWidget(u);v.addWidget(l);this._headerPanel.hide();this._bottomPanel.hide();this._downPanel.hide();this.layout=v;this._tracker.currentChanged.connect(this._onCurrentChanged,this);this._tracker.activeChanged.connect(this._onActiveChanged,this);this._dockPanel.layoutModified.connect(this._onLayoutModified,this);this._vsplitPanel.updated.connect(this._onLayoutModified,this);this._downPanel.currentChanged.connect(this._onLayoutModified,this);this._downPanel.tabBar.tabMoved.connect(this._onTabPanelChanged,this);this._downPanel.stackedPanel.widgetRemoved.connect(this._onTabPanelChanged,this);this._leftHandler.updated.connect(this._onLayoutModified,this);this._rightHandler.updated.connect(this._onLayoutModified,this);this._hsplitPanel.updated.connect(this._onLayoutModified,this);const w=this._titleHandler=new O.TitleHandler(this);this.add(w,"top",{rank:100});if(this._dockPanel.mode==="multiple-document"){this._topHandler.addWidget(this._menuHandler.panel,100);w.hide()}else{v.insertWidget(3,this._menuHandler.panel)}this.translator=s.nullTranslator;this.currentChanged.connect(((e,t)=>{let i=t.newValue;let n=t.oldValue;if(n){n.title.changed.disconnect(this._updateTitlePanelTitle,this);if(n instanceof a.DocumentWidget){n.context.pathChanged.disconnect(this._updateCurrentPath,this)}}if(i){i.title.changed.connect(this._updateTitlePanelTitle,this);this._updateTitlePanelTitle();if(i instanceof a.DocumentWidget){i.context.pathChanged.connect(this._updateCurrentPath,this)}}this._updateCurrentPath()}))}get activeChanged(){return this._activeChanged}get activeWidget(){return this._tracker.activeWidget}get addButtonEnabled(){return this._dockPanel.addButtonEnabled}set addButtonEnabled(e){this._dockPanel.addButtonEnabled=e}get addRequested(){return this._dockPanel.addRequested}get currentChanged(){return this._currentChanged}get currentPath(){return this._currentPath}get currentPathChanged(){return this._currentPathChanged}get currentWidget(){return this._tracker.currentWidget}get layoutModified(){return this._layoutModified}get leftCollapsed(){return!this._leftHandler.sideBar.currentTitle}get rightCollapsed(){return!this._rightHandler.sideBar.currentTitle}get presentationMode(){return this.hasClass("jp-mod-presentationMode")}set presentationMode(e){this.toggleClass("jp-mod-presentationMode",e)}get mode(){return this._dockPanel.mode}set mode(e){const t=this._dockPanel;if(e===t.mode){return}const i=this.currentWidget;if(e==="single-document"){this._cachedLayout=t.saveLayout();t.mode=e;if(this.currentWidget){t.activateWidget(this.currentWidget)}this.layout.insertWidget(3,this._menuHandler.panel);this._titleHandler.show();this._updateTitlePanelTitle();if(this._topHandlerHiddenByUser){this._topHandler.panel.hide()}}else{const n=Array.from(t.widgets());t.mode=e;if(this._cachedLayout){O.normalizeAreaConfig(t,this._cachedLayout.main);t.restoreLayout(this._cachedLayout);this._cachedLayout=null}if(this._layoutRestorer.isDeferred){this._layoutRestorer.restoreDeferred().then((e=>{if(e){const{currentWidget:t,dock:i}=e;if(i){this._dockPanel.restoreLayout(i)}if(t){this.activateById(t.id)}}})).catch((e=>{console.error("Failed to restore the deferred layout.");console.error(e)}))}n.forEach((e=>{if(!e.parent){this._addToMainArea(e,{...this._mainOptionsCache.get(e),activate:false})}}));this._mainOptionsCache.clear();if(i){t.activateWidget(i)}this.add(this._menuHandler.panel,"top",{rank:100});this._titleHandler.hide()}this.node.dataset.shellMode=e;this._downPanel.fit();this._modeChanged.emit(e)}get modeChanged(){return this._modeChanged}get restored(){return this._restored.promise}get translator(){var e;return(e=this._translator)!==null&&e!==void 0?e:s.nullTranslator}set translator(e){if(e!==this._translator){this._translator=e;d.TabBarSvg.translator=e;const t=e.load("jupyterlab");this._menuHandler.panel.node.setAttribute("aria-label",t.__("main menu"));this._leftHandler.sideBar.node.setAttribute("aria-label",t.__("main sidebar"));this._leftHandler.sideBar.contentNode.setAttribute("aria-label",t.__("main sidebar"));this._rightHandler.sideBar.node.setAttribute("aria-label",t.__("alternate sidebar"));this._rightHandler.sideBar.contentNode.setAttribute("aria-label",t.__("alternate sidebar"))}}get userLayout(){return c.JSONExt.deepCopy(this._userLayout)}activateById(e){if(this._leftHandler.has(e)){this._leftHandler.activate(e);return}if(this._rightHandler.has(e)){this._rightHandler.activate(e);return}const t=this._downPanel.tabBar.titles.findIndex((t=>t.owner.id===e));if(t>=0){this._downPanel.currentIndex=t;return}const i=this._dockPanel;const n=(0,M.find)(i.widgets(),(t=>t.id===e));if(n){i.activateWidget(n)}}activateArea(e="main"){switch(e){case"main":{const e=this._currentTabBar();if(!e){return}if(e.currentTitle){e.currentTitle.owner.activate()}}return;case"left":case"right":case"header":case"top":case"menu":case"bottom":console.debug(`Area: ${e} activation not yet implemented`);break;default:throw new Error(`Invalid area: ${e}`)}}activateNextTab(){const e=this._currentTabBar();if(!e){return}const t=e.currentIndex;if(t===-1){return}if(t<e.titles.length-1){e.currentIndex+=1;if(e.currentTitle){e.currentTitle.owner.activate()}return}if(t===e.titles.length-1){const e=this._adjacentBar("next");if(e){e.currentIndex=0;if(e.currentTitle){e.currentTitle.owner.activate()}}}}activatePreviousTab(){const e=this._currentTabBar();if(!e){return}const t=e.currentIndex;if(t===-1){return}if(t>0){e.currentIndex-=1;if(e.currentTitle){e.currentTitle.owner.activate()}return}if(t===0){const e=this._adjacentBar("previous");if(e){const t=e.titles.length;e.currentIndex=t-1;if(e.currentTitle){e.currentTitle.owner.activate()}}}}activateNextTabBar(){const e=this._adjacentBar("next");if(e){if(e.currentTitle){e.currentTitle.owner.activate()}}}activatePreviousTabBar(){const e=this._adjacentBar("previous");if(e){if(e.currentTitle){e.currentTitle.owner.activate()}}}add(e,t="main",i){var n;if(!this._userLayout){this._delayedWidget.push({widget:e,area:t,options:i});return}let s;if((i===null||i===void 0?void 0:i.type)&&this._userLayout[this.mode][i.type]){s=this._userLayout[this.mode][i.type];this._idTypeMap.set(e.id,i.type)}else{s=this._userLayout[this.mode][e.id]}if(i===null||i===void 0?void 0:i.type){this._idTypeMap.set(e.id,i.type);e.disposed.connect((()=>{this._idTypeMap.delete(e.id)}))}t=(n=s===null||s===void 0?void 0:s.area)!==null&&n!==void 0?n:t;i=i||(s===null||s===void 0?void 0:s.options)?{...i,...s===null||s===void 0?void 0:s.options}:undefined;switch(t||"main"){case"bottom":return this._addToBottomArea(e,i);case"down":return this._addToDownArea(e,i);case"header":return this._addToHeaderArea(e,i);case"left":return this._addToLeftArea(e,i);case"main":return this._addToMainArea(e,i);case"menu":return this._addToMenuArea(e,i);case"right":return this._addToRightArea(e,i);case"top":return this._addToTopArea(e,i);default:throw new Error(`Invalid area: ${t}`)}}move(e,t,i){var n;const s=(n=this._idTypeMap.get(e.id))!==null&&n!==void 0?n:e.id;for(const r of["single-document","multiple-document"].filter((e=>!i||e===i))){this._userLayout[r][s]={...this._userLayout[r][s],area:t}}this.add(e,t);return this._userLayout}collapseLeft(){this._leftHandler.collapse();this._onLayoutModified()}collapseRight(){this._rightHandler.collapse();this._onLayoutModified()}dispose(){if(this.isDisposed){return}this._layoutDebouncer.dispose();super.dispose()}expandLeft(){this._leftHandler.expand();this._onLayoutModified()}expandRight(){this._rightHandler.expand();this._onLayoutModified()}closeAll(){Array.from(this._dockPanel.widgets()).forEach((e=>e.close()));this._downPanel.stackedPanel.widgets.forEach((e=>e.close()))}isSideTabBarVisible(e){switch(e){case"left":return this._leftHandler.isVisible;case"right":return this._rightHandler.isVisible}}isTopInSimpleModeVisible(){return!this._topHandlerHiddenByUser}isEmpty(e){switch(e){case"bottom":return this._bottomPanel.widgets.length===0;case"down":return this._downPanel.stackedPanel.widgets.length===0;case"header":return this._headerPanel.widgets.length===0;case"left":return this._leftHandler.stackedPanel.widgets.length===0;case"main":return this._dockPanel.isEmpty;case"menu":return this._menuHandler.panel.widgets.length===0;case"right":return this._rightHandler.stackedPanel.widgets.length===0;case"top":return this._topHandler.panel.widgets.length===0;default:return true}}async restoreLayout(e,t,i={}){var n,s,r,a;this._userLayout={"single-document":(n=i["single-document"])!==null&&n!==void 0?n:{},"multiple-document":(s=i["multiple-document"])!==null&&s!==void 0?s:{}};this._delayedWidget.forEach((({widget:e,area:t,options:i})=>{this.add(e,t,i)}));this._delayedWidget.length=0;this._layoutRestorer=t;const o=await t.fetch();const{mainArea:d,downArea:l,leftArea:c,rightArea:h,topArea:u,relativeSizes:p}=o;if(d){const{currentWidget:t,dock:i}=d;if(i&&e==="multiple-document"){this._dockPanel.restoreLayout(i)}if(e){this.mode=e}if(t){this.activateById(t.id)}}else{if(e){this.mode=e}}if((u===null||u===void 0?void 0:u.simpleVisibility)!==undefined){this._topHandlerHiddenByUser=!u.simpleVisibility;if(this.mode==="single-document"){this._topHandler.panel.setHidden(this._topHandlerHiddenByUser)}}if(l){const{currentWidget:e,widgets:t,size:i}=l;const n=(r=t===null||t===void 0?void 0:t.map((e=>e.id)))!==null&&r!==void 0?r:[];this._downPanel.tabBar.titles.filter((e=>!n.includes(e.owner.id))).map((e=>e.owner.close()));const s=this._downPanel.tabBar.titles.map((e=>e.owner.id));t===null||t===void 0?void 0:t.filter((e=>!s.includes(e.id))).map((e=>this._downPanel.addWidget(e)));while(!M.ArrayExt.shallowEqual(n,this._downPanel.tabBar.titles.map((e=>e.owner.id)))){this._downPanel.tabBar.titles.forEach(((e,t)=>{const i=n.findIndex((t=>e.owner.id==t));if(i>=0&&i!=t){this._downPanel.tabBar.insertTab(i,e)}}))}if(e){const t=this._downPanel.stackedPanel.widgets.findIndex((t=>t.id===e.id));if(t){this._downPanel.currentIndex=t;(a=this._downPanel.currentWidget)===null||a===void 0?void 0:a.activate()}}if(i&&i>0){this._vsplitPanel.setRelativeSizes([1-i,i])}else{this._downPanel.stackedPanel.widgets.forEach((e=>e.close()));this._downPanel.hide()}}if(c){this._leftHandler.rehydrate(c)}else{if(e==="single-document"){this.collapseLeft()}}if(h){this._rightHandler.rehydrate(h)}else{if(e==="single-document"){this.collapseRight()}}if(p){this._hsplitPanel.setRelativeSizes(p)}if(!this._isRestored){B.MessageLoop.flush();this._restored.resolve(o)}}saveLayout(){const e={mainArea:{currentWidget:this._tracker.currentWidget,dock:this.mode==="single-document"?this._cachedLayout||this._dockPanel.saveLayout():this._dockPanel.saveLayout()},downArea:{currentWidget:this._downPanel.currentWidget,widgets:Array.from(this._downPanel.stackedPanel.widgets),size:this._vsplitPanel.relativeSizes()[1]},leftArea:this._leftHandler.dehydrate(),rightArea:this._rightHandler.dehydrate(),topArea:{simpleVisibility:!this._topHandlerHiddenByUser},relativeSizes:this._hsplitPanel.relativeSizes()};return e}toggleTopInSimpleModeVisibility(){if(this.mode==="single-document"){if(this._topHandler.panel.isVisible){this._topHandlerHiddenByUser=true;this._topHandler.panel.hide()}else{this._topHandlerHiddenByUser=false;this._topHandler.panel.show();this._updateTitlePanelTitle()}this._onLayoutModified()}}toggleSideTabBarVisibility(e){if(e==="right"){if(this._rightHandler.isVisible){this._rightHandler.hide()}else{this._rightHandler.show()}}else{if(this._leftHandler.isVisible){this._leftHandler.hide()}else{this._leftHandler.show()}}}updateConfig(e){if(e.hiddenMode){switch(e.hiddenMode){case"display":this._dockPanel.hiddenMode=x.Widget.HiddenMode.Display;break;case"scale":this._dockPanel.hiddenMode=x.Widget.HiddenMode.Scale;break;case"contentVisibility":this._dockPanel.hiddenMode=x.Widget.HiddenMode.ContentVisibility;break}}}widgets(e){switch(e!==null&&e!==void 0?e:"main"){case"main":return this._dockPanel.widgets();case"left":return(0,M.map)(this._leftHandler.sideBar.titles,(e=>e.owner));case"right":return(0,M.map)(this._rightHandler.sideBar.titles,(e=>e.owner));case"header":return this._headerPanel.children();case"top":return this._topHandler.panel.children();case"menu":return this._menuHandler.panel.children();case"bottom":return this._bottomPanel.children();default:throw new Error(`Invalid area: ${e}`)}}onAfterAttach(e){this.node.dataset.shellMode=this.mode}_updateTitlePanelTitle(){let e=this.currentWidget;const t=this._titleHandler.inputElement;t.value=e?e.title.label:"";t.title=e?e.title.caption:""}_updateCurrentPath(){let e=this.currentWidget;let t="";if(e&&e instanceof a.DocumentWidget){t=e.context.path}this._currentPathChanged.emit({newValue:t,oldValue:this._currentPath});this._currentPath=t}_addToLeftArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||this._sideOptionsCache.get(e)||{};this._sideOptionsCache.set(e,t);const i="rank"in t?t.rank:I;this._leftHandler.addWidget(e,i);this._onLayoutModified()}_addToMainArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||{};const i=this._dockPanel;const n=t.mode||"tab-after";let s=this.currentWidget;if(t.ref){s=(0,M.find)(i.widgets(),(e=>e.id===t.ref))||null}const{title:r}=e;r.dataset={...r.dataset,id:e.id};if(r.icon instanceof d.LabIcon){r.icon=r.icon.bindprops({stylesheet:"mainAreaTab"})}else if(typeof r.icon==="string"||!r.icon){r.iconClass=(0,d.classes)(r.iconClass,"jp-Icon")}i.addWidget(e,{mode:n,ref:s});if(i.mode==="single-document"){this._mainOptionsCache.set(e,t)}if(t.activate!==false){i.activateWidget(e)}}_addToRightArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||this._sideOptionsCache.get(e)||{};const i="rank"in t?t.rank:I;this._sideOptionsCache.set(e,t);this._rightHandler.addWidget(e,i);this._onLayoutModified()}_addToTopArea(e,t){var i;if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||{};const n=(i=t.rank)!==null&&i!==void 0?i:I;this._topHandler.addWidget(e,n);this._onLayoutModified();if(this._topHandler.panel.isHidden){this._topHandler.panel.show()}}_addToMenuArea(e,t){var i;if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||{};const n=(i=t.rank)!==null&&i!==void 0?i:I;this._menuHandler.addWidget(e,n);this._onLayoutModified();if(this._menuHandler.panel.isHidden){this._menuHandler.panel.show()}}_addToHeaderArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}this._headerPanel.addWidget(e);this._onLayoutModified();if(this._headerPanel.isHidden){this._headerPanel.show()}}_addToBottomArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}this._bottomPanel.addWidget(e);this._onLayoutModified();if(this._bottomPanel.isHidden){this._bottomPanel.show()}}_addToDownArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||{};const{title:i}=e;i.dataset={...i.dataset,id:e.id};if(i.icon instanceof d.LabIcon){i.icon=i.icon.bindprops({stylesheet:"mainAreaTab"})}else if(typeof i.icon==="string"||!i.icon){i.iconClass=(0,d.classes)(i.iconClass,"jp-Icon")}this._downPanel.addWidget(e);this._onLayoutModified();if(this._downPanel.isHidden){this._downPanel.show()}}_adjacentBar(e){const t=this._currentTabBar();if(!t){return null}const i=Array.from(this._dockPanel.tabBars());const n=i.length;const s=i.indexOf(t);if(e==="previous"){return s>0?i[s-1]:s===0?i[n-1]:null}return s<n-1?i[s+1]:s===n-1?i[0]:null}_currentTabBar(){const e=this._tracker.currentWidget;if(!e){return null}const t=e.title;const i=this._dockPanel.tabBars();return(0,M.find)(i,(e=>e.titles.indexOf(t)>-1))||null}_onActiveChanged(e,t){if(t.newValue){t.newValue.title.className+=` ${E}`}if(t.oldValue){t.oldValue.title.className=t.oldValue.title.className.replace(E,"")}this._activeChanged.emit(t)}_onCurrentChanged(e,t){if(t.newValue){t.newValue.title.className+=` ${L}`}if(t.oldValue){t.oldValue.title.className=t.oldValue.title.className.replace(L,"")}this._currentChanged.emit(t);this._onLayoutModified()}_onTabPanelChanged(){if(this._downPanel.stackedPanel.widgets.length===0){this._downPanel.hide()}this._onLayoutModified()}_onLayoutModified(){void this._layoutDebouncer.invoke()}}var O;(function(e){function t(e,t){return e.rank-t.rank}e.itemCmp=t;function i(e,t){if(!t){return}if(t.type==="tab-area"){t.widgets=t.widgets.filter((t=>!t.isDisposed&&t.parent===e));return}t.children.forEach((t=>{i(e,t)}))}e.normalizeAreaConfig=i;class n{constructor(){this._panelChildHook=(e,t)=>{switch(t.type){case"child-added":{const e=t.child;if(this._items.find((t=>t.widget===e))){break}const i=this._items[this._items.length-1].rank;this._items.push({widget:e,rank:i})}break;case"child-removed":{const e=t.child;M.ArrayExt.removeFirstWhere(this._items,(t=>t.widget===e))}break;default:break}return true};this._items=new Array;this._panel=new x.Panel;B.MessageLoop.installMessageHook(this._panel,this._panelChildHook)}get panel(){return this._panel}addWidget(t,i){t.parent=null;const n={widget:t,rank:i};const s=M.ArrayExt.upperBound(this._items,n,e.itemCmp);M.ArrayExt.insert(this._items,s,n);this._panel.insertWidget(s,t)}}e.PanelHandler=n;class s{constructor(){this._isHiddenByUser=false;this._items=new Array;this._updated=new h.Signal(this);this._sideBar=new x.TabBar({insertBehavior:"none",removeBehavior:"none",allowDeselect:true,orientation:"vertical"});this._stackedPanel=new x.StackedPanel;this._sideBar.hide();this._stackedPanel.hide();this._lastCurrent=null;this._sideBar.currentChanged.connect(this._onCurrentChanged,this);this._sideBar.tabActivateRequested.connect(this._onTabActivateRequested,this);this._stackedPanel.widgetRemoved.connect(this._onWidgetRemoved,this)}get isVisible(){return this._sideBar.isVisible}get sideBar(){return this._sideBar}get stackedPanel(){return this._stackedPanel}get updated(){return this._updated}_onHandleMoved(){return this._refreshVisibility()}_onExpansionToggle(e,t){return this._refreshVisibility()}expand(){const e=this._lastCurrent||this._items.length>0&&this._items[0].widget;if(e){this.activate(e.id)}}activate(e){const t=this._findWidgetByID(e);if(t){this._sideBar.currentTitle=t.title;t.activate()}}has(e){return this._findWidgetByID(e)!==null}collapse(){this._sideBar.currentTitle=null}addWidget(e,t){var i,n,s,r;e.parent=null;e.hide();const a={widget:e,rank:t};const o=this._findInsertIndex(a);M.ArrayExt.insert(this._items,o,a);this._stackedPanel.insertWidget(o,e);const l=this._sideBar.insertTab(o,e.title);l.dataset={id:e.id};if(l.icon instanceof d.LabIcon){l.icon=l.icon.bindprops({stylesheet:"sideBar"})}else if(typeof l.icon==="string"&&l.icon!=""){l.iconClass=(0,d.classes)(l.iconClass,"jp-Icon","jp-Icon-20")}else if(!l.icon&&!l.label){l.icon=d.tabIcon.bindprops({stylesheet:"sideBar"})}(n=(i=e.content)===null||i===void 0?void 0:i.expansionToggled)===null||n===void 0?void 0:n.connect(this._onExpansionToggle,this);(r=(s=e.content)===null||s===void 0?void 0:s.handleMoved)===null||r===void 0?void 0:r.connect(this._onHandleMoved,this);this._refreshVisibility()}dehydrate(){const e=this._sideBar.currentTitle===null;const t=Array.from(this._stackedPanel.widgets);const i=t[this._sideBar.currentIndex];const n={};this._stackedPanel.widgets.forEach((e=>{if(e.id&&e.content instanceof x.SplitPanel){n[e.id]={sizes:e.content.relativeSizes(),expansionStates:e.content.widgets.map((e=>e.isVisible))}}}));return{collapsed:e,currentWidget:i,visible:!this._isHiddenByUser,widgets:t,widgetStates:n}}rehydrate(e){if(e.currentWidget){this.activate(e.currentWidget.id)}if(e.collapsed){this.collapse()}if(!e.visible){this.hide()}if(e.widgetStates){this._stackedPanel.widgets.forEach((t=>{var i;if(t.id&&t.content instanceof x.SplitPanel){const n=(i=e.widgetStates[t.id])!==null&&i!==void 0?i:{};t.content.widgets.forEach(((e,i)=>{var s;const r=((s=n.expansionStates)!==null&&s!==void 0?s:[])[i];if(typeof r==="boolean"&&t.content instanceof x.AccordionPanel){r?t.content.expand(i):t.content.collapse(i)}}));if(n.sizes){t.content.setRelativeSizes(n.sizes)}}}))}}hide(){this._isHiddenByUser=true;this._refreshVisibility()}show(){this._isHiddenByUser=false;this._refreshVisibility()}_findInsertIndex(t){return M.ArrayExt.upperBound(this._items,t,e.itemCmp)}_findWidgetIndex(e){return M.ArrayExt.findFirstIndex(this._items,(t=>t.widget===e))}_findWidgetByTitle(e){const t=(0,M.find)(this._items,(t=>t.widget.title===e));return t?t.widget:null}_findWidgetByID(e){const t=(0,M.find)(this._items,(t=>t.widget.id===e));return t?t.widget:null}_refreshVisibility(){this._stackedPanel.setHidden(this._sideBar.currentTitle===null);this._sideBar.setHidden(this._isHiddenByUser||this._sideBar.titles.length===0);this._updated.emit()}_onCurrentChanged(e,t){const i=t.previousTitle?this._findWidgetByTitle(t.previousTitle):null;const n=t.currentTitle?this._findWidgetByTitle(t.currentTitle):null;if(i){i.hide()}if(n){n.show()}this._lastCurrent=n||i;this._refreshVisibility()}_onTabActivateRequested(e,t){t.title.owner.activate()}_onWidgetRemoved(e,t){if(t===this._lastCurrent){this._lastCurrent=null}M.ArrayExt.removeAt(this._items,this._findWidgetIndex(t));this._sideBar.removeTab(t.title);this._refreshVisibility()}}e.SideBarHandler=s;class r extends x.Widget{constructor(e){super();this.addClass("jp-skiplink");this.id="jp-skiplink";this._shell=e;this._createSkipLink("Skip to main panel","main")}handleEvent(e){var t,i;switch(e.type){case"click":if(e.target instanceof HTMLElement){this._shell.activateArea((i=(t=e.target)===null||t===void 0?void 0:t.dataset)===null||i===void 0?void 0:i.targetarea)}break}}onAfterAttach(e){super.onAfterAttach(e);this.node.addEventListener("click",this)}onBeforeDetach(e){this.node.removeEventListener("click",this);super.onBeforeDetach(e)}_createSkipLink(e,t){const i=document.createElement("a");i.href="#";i.tabIndex=0;i.text=e;i.className="skip-link";i.dataset["targetarea"]=t;this.node.appendChild(i)}}e.SkipLinkWidget=r;class a extends x.Widget{constructor(e){super();this._selected=false;const t=document.createElement("input");t.type="text";this.node.appendChild(t);this._shell=e;this.id="jp-title-panel-title"}onAfterAttach(e){super.onAfterAttach(e);this.inputElement.addEventListener("keyup",this);this.inputElement.addEventListener("click",this);this.inputElement.addEventListener("blur",this)}onBeforeDetach(e){super.onBeforeDetach(e);this.inputElement.removeEventListener("keyup",this);this.inputElement.removeEventListener("click",this);this.inputElement.removeEventListener("blur",this)}handleEvent(e){switch(e.type){case"keyup":void this._evtKeyUp(e);break;case"click":this._evtClick(e);break;case"blur":this._selected=false;break}}async _evtKeyUp(e){if(e.key=="Enter"){const e=this._shell.currentWidget;if(e==null){return}const t=e.title.label;const i=this.inputElement;const n=i.value;i.blur();if(n!==t){e.title.label=n}else{i.value=t}}}_evtClick(e){if(e.button!==0||this._selected){return}const t=this.inputElement;e.preventDefault();e.stopPropagation();this._selected=true;const i=t.value.indexOf(".");if(i===-1){t.select()}else{t.setSelectionRange(0,i)}}get inputElement(){return this.node.children[0]}}e.TitleHandler=a;class o extends x.SplitPanel{constructor(e={}){super(e);this.updated=new h.Signal(this)}onUpdateRequest(e){super.onUpdateRequest(e);this.updated.emit()}}e.RestorableSplitPanel=o})(O||(O={}));var U=i(82524);class V{constructor(e){this._busyCount=0;this._dirtyCount=0;this._busySignal=new h.Signal(e);this._dirtySignal=new h.Signal(e)}get busySignal(){return this._busySignal}get dirtySignal(){return this._dirtySignal}get isBusy(){return this._busyCount>0}get isDirty(){return this._dirtyCount>0}setDirty(){const e=this.isDirty;this._dirtyCount++;if(this.isDirty!==e){this._dirtySignal.emit(this.isDirty)}return new U.DisposableDelegate((()=>{const e=this.isDirty;this._dirtyCount=Math.max(0,this._dirtyCount-1);if(this.isDirty!==e){this._dirtySignal.emit(this.isDirty)}}))}setBusy(){const e=this.isBusy;this._busyCount++;if(this.isBusy!==e){this._busySignal.emit(this.isBusy)}return new U.DisposableDelegate((()=>{const e=this.isBusy;this._busyCount--;if(this.isBusy!==e){this._busySignal.emit(this.isBusy)}}))}}class z extends u{constructor(e={shell:new j}){super({...e,shell:e.shell||new j,serviceManager:e.serviceManager||new o.ServiceManager({standby:()=>!this._info.isConnected||"when-hidden"})});this.name=f.PageConfig.getOption("appName")||"JupyterLab";this.namespace=f.PageConfig.getOption("appNamespace")||this.name;this.registerPluginErrors=[];this.status=new V(this);this.version=f.PageConfig.getOption("appVersion")||"unknown";this._info=z.defaultInfo;this._allPluginsActivated=new c.PromiseDelegate;const t=Object.keys(z.defaultInfo).reduce(((t,i)=>{if(i in e){t[i]=JSON.parse(JSON.stringify(e[i]))}return t}),{});this._info={...z.defaultInfo,...t};this.restored=this.shell.restored.then((async()=>{const e=[];const t=this.activateDeferredPlugins().catch((e=>{console.error("Error when activating deferred plugins\n:",e)}));e.push(t);if(this._info.deferred){const t=Promise.all(this._info.deferred.matches.map((e=>this.activatePlugin(e)))).catch((e=>{console.error("Error when activating customized list of deferred plugins:\n",e)}));e.push(t)}Promise.all(e).then((()=>{this._allPluginsActivated.resolve()})).catch((()=>undefined))})).catch((()=>undefined));const i=z.defaultPaths.urls;const n=z.defaultPaths.directories;const s=e.paths&&e.paths.urls||{};const r=e.paths&&e.paths.directories||{};this._paths={urls:Object.keys(i).reduce(((e,t)=>{if(t in s){const i=s[t];e[t]=i}else{e[t]=i[t]}return e}),{}),directories:Object.keys(z.defaultPaths.directories).reduce(((e,t)=>{if(t in r){const i=r[t];e[t]=i}else{e[t]=n[t]}return e}),{})};if(this._info.devMode){this.shell.addClass("jp-mod-devMode")}this.docRegistry.addModelFactory(new a.Base64ModelFactory);if(e.mimeExtensions){for(const t of k(e.mimeExtensions)){this.registerPlugin(t)}}}get info(){return this._info}get paths(){return this._paths}get allPluginsActivated(){return this._allPluginsActivated.promise}registerPluginModule(e){let t=e.default;if(!e.hasOwnProperty("__esModule")){t=e}if(!Array.isArray(t)){t=[t]}t.forEach((e=>{try{this.registerPlugin(e)}catch(t){this.registerPluginErrors.push(t)}}))}registerPluginModules(e){e.forEach((e=>{this.registerPluginModule(e)}))}}(function(e){e.IInfo=new c.Token("@jupyterlab/application:IInfo","A service providing metadata about the current application, including disabled extensions and whether dev mode is enabled.");e.defaultInfo={devMode:f.PageConfig.getOption("devMode").toLowerCase()==="true",deferred:{patterns:[],matches:[]},disabled:{patterns:[],matches:[]},mimeExtensions:[],availablePlugins:[],filesCached:f.PageConfig.getOption("cacheFiles").toLowerCase()==="true",isConnected:true};e.defaultPaths={urls:{base:f.PageConfig.getOption("baseUrl"),notFound:f.PageConfig.getOption("notFoundUrl"),app:f.PageConfig.getOption("appUrl"),doc:f.PageConfig.getOption("docUrl"),static:f.PageConfig.getOption("staticUrl"),settings:f.PageConfig.getOption("settingsUrl"),themes:f.PageConfig.getOption("themesUrl"),translations:f.PageConfig.getOption("translationsApiUrl"),hubHost:f.PageConfig.getOption("hubHost")||undefined,hubPrefix:f.PageConfig.getOption("hubPrefix")||undefined,hubUser:f.PageConfig.getOption("hubUser")||undefined,hubServerName:f.PageConfig.getOption("hubServerName")||undefined},directories:{appSettings:f.PageConfig.getOption("appSettingsDir"),schemas:f.PageConfig.getOption("schemasDir"),static:f.PageConfig.getOption("staticDir"),templates:f.PageConfig.getOption("templatesDir"),themes:f.PageConfig.getOption("themesDir"),userSettings:f.PageConfig.getOption("userSettingsDir"),serverRoot:f.PageConfig.getOption("serverRoot"),workspaces:f.PageConfig.getOption("workspacesDir")}}})(z||(z={}));class F{constructor(e){this.stop=new c.Token("@jupyterlab/application:Router#stop");this._routed=new h.Signal(this);this._rules=new Map;this.base=e.base;this.commands=e.commands}get current(){var e,t;const{base:i}=this;const n=f.URLExt.parse(window.location.href);const{search:s,hash:r}=n;const a=(t=(e=n.pathname)===null||e===void 0?void 0:e.replace(i,"/"))!==null&&t!==void 0?t:"";const o=a+s+r;return{hash:r,path:a,request:o,search:s}}get routed(){return this._routed}navigate(e,t={}){const{base:i}=this;const{history:n}=window;const{hard:s}=t;const r=document.location.href;const a=e&&e.indexOf(i)===0?e:f.URLExt.join(i,e);if(a===r){return s?this.reload():undefined}n.pushState({},"",a);if(s){return this.reload()}if(!t.skipRouting){requestAnimationFrame((()=>{void this.route()}))}}register(e){var t;const{command:i,pattern:n}=e;const s=(t=e.rank)!==null&&t!==void 0?t:100;const r=this._rules;r.set(n,{command:i,rank:s});return new U.DisposableDelegate((()=>{r.delete(n)}))}reload(){window.location.reload()}route(){const{commands:e,current:t,stop:i}=this;const{request:n}=t;const s=this._routed;const r=this._rules;const a=[];r.forEach(((e,t)=>{if(n===null||n===void 0?void 0:n.match(t)){a.push(e)}}));const o=a.sort(((e,t)=>t.rank-e.rank));const d=new c.PromiseDelegate;const l=async()=>{if(!o.length){s.emit(t);d.resolve(undefined);return}const{command:r}=o.pop();try{const n=this.current.request;const s=await e.execute(r,t);if(s===i){o.length=0;console.debug(`Routing ${n} was short-circuited by ${r}`)}}catch(a){console.warn(`Routing ${n} to ${r} failed`,a)}void l()};void l();return d.promise}}const N=new c.Token("@jupyterlab/application:IConnectionLost",`A service for invoking the dialog shown\n  when JupyterLab has lost its connection to the server. Use this if, for some reason,\n  you want to bring up the "connection lost" dialog under new circumstances.`);const $=new c.Token("@jupyterlab/application:ILabStatus",`A service for interacting with the application busy/dirty\n  status. Use this if you want to set the application "busy" favicon, or to set\n  the application "dirty" status, which asks the user for confirmation before leaving the application page.`);const q=new c.Token("@jupyterlab/application:IRouter","The URL router used by the application. Use this to add custom URL-routing for your extension (e.g., to invoke a command if the user navigates to a sub-path).");const J=new c.Token("@jupyterlab/application:ITreePathUpdater","A service to update the tree path.");function K(e,t,i,n){const{commands:s,shell:r}=e;const a=Array.isArray(t)?t:[t];return{label:d("label"),caption:d("caption"),isEnabled:()=>{var e;const t=o("isEnabled");return t.length>0&&!t.some((e=>e===false))||((e=i.isEnabled)!==null&&e!==void 0?e:false)},isToggled:()=>{var e;const t=o("isToggled");return t.some((e=>e===true))||((e=i.isToggled)!==null&&e!==void 0?e:false)},isVisible:()=>{var e;const t=o("isVisible");return t.length>0&&!t.some((e=>e===false))||((e=i.isVisible)!==null&&e!==void 0?e:true)},execute:async()=>{const e=r.currentWidget;const t=a.map((t=>e!==null?t.getActiveCommandId(e):null));const n=t.filter((e=>e!==null&&s.isEnabled(e)));let o=null;if(n.length>0){for(const e of n){o=await s.execute(e);if(typeof o==="boolean"&&o===false){break}}}else if(i.execute){o=await s.execute(i.execute)}return o}};function o(e){const t=r.currentWidget;const i=a.map((e=>t!==null?e.getActiveCommandId(t):null));const n=i.filter((e=>e!==null)).map((t=>s[e](t)));return n}function d(e){return()=>{var t;const s=o(e).map(((t,i)=>e=="caption"&&i>0?t.toLocaleLowerCase():t));switch(s.length){case 0:return(t=i[e])!==null&&t!==void 0?t:"";case 1:return s[0];default:{const e=s.some((e=>/…$/.test(e)));const t=s.slice(undefined,-1).map((e=>e.replace(/…$/,""))).join(", ");const i=s.slice(-1)[0].replace(/…$/,"")+(e?"…":"");return n.__("%1 and %2",t,i)}}}}}}}]);
//# sourceMappingURL=736.29f3726b1aebc0947a11.js.map?v=29f3726b1aebc0947a11