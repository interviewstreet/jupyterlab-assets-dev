/*! For license information please see 5576.d6df3aa86a402699cb6e.js.LICENSE.txt */
(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[5576],{75576:e=>{(function t(r,n){if(true)e.exports=n();else{}})(self,(function(){return function(){var e={98847:function(e,t,r){"use strict";var n=r(71828);var a={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var i in a){var o=i.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");n.addStyleRule(o,a[i])}},98222:function(e,t,r){"use strict";e.exports=r(82887)},27206:function(e,t,r){"use strict";e.exports=r(60822)},59893:function(e,t,r){"use strict";e.exports=r(23381)},5224:function(e,t,r){"use strict";e.exports=r(83832)},59509:function(e,t,r){"use strict";e.exports=r(72201)},75557:function(e,t,r){"use strict";e.exports=r(91815)},40338:function(e,t,r){"use strict";e.exports=r(21462)},35080:function(e,t,r){"use strict";e.exports=r(51319)},61396:function(e,t,r){"use strict";e.exports=r(57516)},40549:function(e,t,r){"use strict";e.exports=r(98128)},49866:function(e,t,r){"use strict";e.exports=r(99442)},36089:function(e,t,r){"use strict";e.exports=r(93740)},19548:function(e,t,r){"use strict";e.exports=r(8729)},35831:function(e,t,r){"use strict";e.exports=r(93814)},61039:function(e,t,r){"use strict";e.exports=r(14382)},97040:function(e,t,r){"use strict";e.exports=r(51759)},77986:function(e,t,r){"use strict";e.exports=r(10421)},24296:function(e,t,r){"use strict";e.exports=r(43102)},58872:function(e,t,r){"use strict";e.exports=r(92165)},29626:function(e,t,r){"use strict";e.exports=r(3325)},65591:function(e,t,r){"use strict";e.exports=r(36071)},69738:function(e,t,r){"use strict";e.exports=r(43905)},92650:function(e,t,r){"use strict";e.exports=r(35902)},35630:function(e,t,r){"use strict";e.exports=r(69816)},73434:function(e,t,r){"use strict";e.exports=r(94507)},27909:function(e,t,r){"use strict";var n=r(19548);n.register([r(27206),r(5224),r(58872),r(65591),r(69738),r(92650),r(49866),r(25743),r(6197),r(97040),r(85461),r(73434),r(54201),r(81299),r(47645),r(35630),r(77986),r(83043),r(93005),r(96881),r(4534),r(50581),r(40549),r(77900),r(47582),r(35080),r(21641),r(17280),r(5861),r(29626),r(10021),r(65317),r(96268),r(61396),r(35831),r(16122),r(46163),r(40344),r(40338),r(48131),r(36089),r(55334),r(75557),r(19440),r(99488),r(59893),r(97393),r(98222),r(61039),r(24296),r(66398),r(59509)]);e.exports=n},46163:function(e,t,r){"use strict";e.exports=r(15154)},96881:function(e,t,r){"use strict";e.exports=r(64943)},50581:function(e,t,r){"use strict";e.exports=r(21164)},55334:function(e,t,r){"use strict";e.exports=r(54186)},65317:function(e,t,r){"use strict";e.exports=r(94873)},10021:function(e,t,r){"use strict";e.exports=r(67618)},54201:function(e,t,r){"use strict";e.exports=r(58810)},5861:function(e,t,r){"use strict";e.exports=r(20593)},16122:function(e,t,r){"use strict";e.exports=r(29396)},83043:function(e,t,r){"use strict";e.exports=r(13551)},48131:function(e,t,r){"use strict";e.exports=r(46858)},47582:function(e,t,r){"use strict";e.exports=r(17988)},21641:function(e,t,r){"use strict";e.exports=r(68868)},96268:function(e,t,r){"use strict";e.exports=r(20467)},19440:function(e,t,r){"use strict";e.exports=r(91271)},99488:function(e,t,r){"use strict";e.exports=r(21461)},97393:function(e,t,r){"use strict";e.exports=r(85956)},25743:function(e,t,r){"use strict";e.exports=r(52979)},66398:function(e,t,r){"use strict";e.exports=r(32275)},17280:function(e,t,r){"use strict";e.exports=r(6419)},77900:function(e,t,r){"use strict";e.exports=r(61510)},81299:function(e,t,r){"use strict";e.exports=r(87619)},93005:function(e,t,r){"use strict";e.exports=r(93601)},40344:function(e,t,r){"use strict";e.exports=r(96595)},47645:function(e,t,r){"use strict";e.exports=r(70954)},6197:function(e,t,r){"use strict";e.exports=r(47462)},4534:function(e,t,r){"use strict";e.exports=r(17659)},85461:function(e,t,r){"use strict";e.exports=r(19990)},82884:function(e){"use strict";e.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:true},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:true}]},50215:function(e,t,r){"use strict";var n=r(82884);var a=r(41940);var i=r(85555);var o=r(44467).templatedArray;var s=r(24695);function l(e){return["In order for absolute positioning of the arrow to work, *a"+e+"ref* must be exactly the same as *"+e+"ref*, otherwise *a"+e+"ref* will revert to *pixel* (explained next).","For relative positioning, *a"+e+"ref* can be set to *pixel*,","in which case the *a"+e+"* value is specified in pixels","relative to *"+e+"*.","Absolute positioning is useful","for trendline annotations which should continue to indicate","the correct trend when zoomed. Relative positioning is useful","for specifying the text offset for an annotated point."].join(" ")}function u(e,t,r){return["Sets the",e,"component of the arrow tail about the arrow head.","If `a"+e+"ref` is `pixel`, a positive (negative)","component corresponds to an arrow pointing","from",r,"to",t,"("+t,"to",r+").","If `a"+e+"ref` is not `pixel` and is exactly the same as `"+e+"ref`,","this is an absolute value on that axis,","like `"+e+"`, specified in the same coordinates as `"+e+"ref`."].join(" ")}e.exports=o("annotation",{visible:{valType:"boolean",dflt:true,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:a({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:true,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:n.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:n.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",i.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",i.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[false,"onoff","onout"],dflt:false,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:a({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},3749:function(e,t,r){"use strict";var n=r(71828);var a=r(89298);var i=r(92605).draw;e.exports=function e(t){var r=t._fullLayout;var a=n.filterVisible(r.annotations);if(a.length&&t._fullData.length){return n.syncOrAsync([i,o],t)}};function o(e){var t=e._fullLayout;n.filterVisible(t.annotations).forEach((function(t){var r=a.getFromId(e,t.xref);var n=a.getFromId(e,t.yref);var i=a.getRefType(t.xref);var o=a.getRefType(t.yref);t._extremes={};if(i==="range")s(t,r);if(o==="range")s(t,n)}))}function s(e,t){var r=t._id;var n=r.charAt(0);var i=e[n];var o=e["a"+n];var s=e[n+"ref"];var l=e["a"+n+"ref"];var u=e["_"+n+"padplus"];var f=e["_"+n+"padminus"];var c={x:1,y:-1}[n]*e[n+"shift"];var v=3*e.arrowsize*e.arrowwidth||0;var h=v+c;var p=v-c;var d=3*e.startarrowsize*e.arrowwidth||0;var g=d+c;var y=d-c;var m;if(l===s){var x=a.findExtremes(t,[t.r2c(i)],{ppadplus:h,ppadminus:p});var b=a.findExtremes(t,[t.r2c(o)],{ppadplus:Math.max(u,g),ppadminus:Math.max(f,y)});m={min:[x.min[0],b.min[0]],max:[x.max[0],b.max[0]]}}else{g=o?g+o:g;y=o?y-o:y;m=a.findExtremes(t,[t.r2c(i)],{ppadplus:Math.max(u,h,g),ppadminus:Math.max(f,p,y)})}e._extremes[r]=m}},44317:function(e,t,r){"use strict";var n=r(71828);var a=r(73972);var i=r(44467).arrayEditor;e.exports={hasClickToShow:o,onClick:s};function o(e,t){var r=l(e,t);return r.on.length>0||r.explicitOff.length>0}function s(e,t){var r=l(e,t);var o=r.on;var s=r.off.concat(r.explicitOff);var u={};var f=e._fullLayout.annotations;var c,v;if(!(o.length||s.length))return;for(c=0;c<o.length;c++){v=i(e.layout,"annotations",f[o[c]]);v.modifyItem("visible",true);n.extendFlat(u,v.getUpdateObj())}for(c=0;c<s.length;c++){v=i(e.layout,"annotations",f[s[c]]);v.modifyItem("visible",false);n.extendFlat(u,v.getUpdateObj())}return a.call("update",e,{},u)}function l(e,t){var r=e._fullLayout.annotations;var n=[];var a=[];var i=[];var o=(t||[]).length;var s,l,f,c,v,h,p,d;for(s=0;s<r.length;s++){f=r[s];c=f.clicktoshow;if(c){for(l=0;l<o;l++){v=t[l];h=v.xaxis;p=v.yaxis;if(h._id===f.xref&&p._id===f.yref&&h.d2r(v.x)===u(f._xclick,h)&&p.d2r(v.y)===u(f._yclick,p)){if(f.visible){if(c==="onout")d=a;else d=i}else{d=n}d.push(s);break}}if(l===o){if(f.visible&&c==="onout")a.push(s)}}}return{on:n,off:a,explicitOff:i}}function u(e,t){return t.type==="log"?t.l2r(e):t.d2r(e)}},25625:function(e,t,r){"use strict";var n=r(71828);var a=r(7901);e.exports=function e(t,r,i,o){o("opacity");var s=o("bgcolor");var l=o("bordercolor");var u=a.opacity(l);o("borderpad");var f=o("borderwidth");var c=o("showarrow");o("text",c?" ":i._dfltTitle.annotation);o("textangle");n.coerceFont(o,"font",i.font);o("width");o("align");var v=o("height");if(v)o("valign");if(c){var h=o("arrowside");var p;var d;if(h.indexOf("end")!==-1){p=o("arrowhead");d=o("arrowsize")}if(h.indexOf("start")!==-1){o("startarrowhead",p);o("startarrowsize",d)}o("arrowcolor",u?r.bordercolor:a.defaultLine);o("arrowwidth",(u&&f||1)*2);o("standoff");o("startstandoff")}var g=o("hovertext");var y=i.hoverlabel||{};if(g){var m=o("hoverlabel.bgcolor",y.bgcolor||(a.opacity(s)?a.rgb(s):a.defaultLine));var x=o("hoverlabel.bordercolor",y.bordercolor||a.contrast(m));n.coerceFont(o,"hoverlabel.font",{family:y.font.family,size:y.font.size,color:y.font.color||x})}o("captureevents",!!g)}},94128:function(e,t,r){"use strict";var n=r(92770);var a=r(58163);e.exports=function e(t,r,i,o){r=r||{};var s=i==="log"&&r.type==="linear";var l=i==="linear"&&r.type==="log";if(!(s||l))return;var u=t._fullLayout.annotations;var f=r._id.charAt(0);var c;var v;function h(e){var t=c[e];var i=null;if(s)i=a(t,r.range);else i=Math.pow(10,t);if(!n(i))i=null;o(v+e,i)}for(var p=0;p<u.length;p++){c=u[p];v="annotations["+p+"].";if(c[f+"ref"]===r._id)h(f);if(c["a"+f+"ref"]===r._id)h("a"+f)}}},84046:function(e,t,r){"use strict";var n=r(71828);var a=r(89298);var i=r(85501);var o=r(25625);var s=r(50215);e.exports=function e(t,r){i(t,r,{name:"annotations",handleItemDefaults:l})};function l(e,t,r){function i(r,a){return n.coerce(e,t,s,r,a)}var l=i("visible");var u=i("clicktoshow");if(!(l||u))return;o(e,t,r,i);var f=t.showarrow;var c=["x","y"];var v=[-10,-30];var h={_fullLayout:r};for(var p=0;p<2;p++){var d=c[p];var g=a.coerceRef(e,t,h,d,"","paper");if(g!=="paper"){var y=a.getFromId(h,g);y._annIndices.push(t._index)}a.coercePosition(t,h,i,g,d,.5);if(f){var m="a"+d;var x=a.coerceRef(e,t,h,m,"pixel",["pixel","paper"]);if(x!=="pixel"&&x!==g){x=t[m]="pixel"}var b=x==="pixel"?v[p]:.4;a.coercePosition(t,h,i,x,m,b)}i(d+"anchor");i(d+"shift")}n.noneOrAll(e,t,["x","y"]);if(f){n.noneOrAll(e,t,["ax","ay"])}if(u){var _=i("xclick");var w=i("yclick");t._xclick=_===undefined?t.x:a.cleanPosition(_,h,t.xref);t._yclick=w===undefined?t.y:a.cleanPosition(w,h,t.yref)}}},92605:function(e,t,r){"use strict";var n=r(39898);var a=r(73972);var i=r(74875);var o=r(71828);var s=o.strTranslate;var l=r(89298);var u=r(7901);var f=r(91424);var c=r(30211);var v=r(63893);var h=r(6964);var p=r(28569);var d=r(44467).arrayEditor;var g=r(13011);e.exports={draw:y,drawOne:m,drawRaw:b};function y(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var r=0;r<t.annotations.length;r++){if(t.annotations[r].visible){m(e,r)}}return i.previousPromises(e)}function m(e,t){var r=e._fullLayout;var n=r.annotations[t]||{};var a=l.getFromId(e,n.xref);var i=l.getFromId(e,n.yref);if(a)a.setScale();if(i)i.setScale();b(e,n,t,false,a,i)}function x(e,t,r,n,a){var i=a[r];var o=a[r+"ref"];var s=r.indexOf("y")!==-1;var u=l.getRefType(o)==="domain";var f=s?n.h:n.w;if(e){if(u){return i+(s?-t:t)/e._length}else{return e.p2r(e.r2p(i)+t)}}else{return i+(s?-t:t)/f}}function b(e,t,r,i,y,m){var b=e._fullLayout;var _=e._fullLayout._size;var w=e._context.edits;var T,k;if(i){T="annotation-"+i;k=i+".annotations"}else{T="annotation";k="annotations"}var A=d(e.layout,k,t);var M=A.modifyBase;var S=A.modifyItem;var E=A.getUpdateObj;b._infolayer.selectAll("."+T+'[data-index="'+r+'"]').remove();var L="clip"+b._uid+"_ann"+r;if(!t._input||t.visible===false){n.selectAll("#"+L).remove();return}var C={x:{},y:{}};var I=+t.textangle||0;var P=b._infolayer.append("g").classed(T,true).attr("data-index",String(r)).style("opacity",t.opacity);var O=P.append("g").classed("annotation-text-g",true);var D=w[t.showarrow?"annotationTail":"annotationPosition"];var z=t.captureevents||w.annotationText||D;function R(e){var n={index:r,annotation:t._input,fullAnnotation:t,event:e};if(i){n.subplotId=i}return n}var F=O.append("g").style("pointer-events",z?"all":null).call(h,"pointer").on("click",(function(){e._dragging=false;e.emit("plotly_clickannotation",R(n.event))}));if(t.hovertext){F.on("mouseover",(function(){var r=t.hoverlabel;var n=r.font;var a=this.getBoundingClientRect();var i=e.getBoundingClientRect();c.loneHover({x0:a.left-i.left,x1:a.right-i.left,y:(a.top+a.bottom)/2-i.top,text:t.hovertext,color:r.bgcolor,borderColor:r.bordercolor,fontFamily:n.family,fontSize:n.size,fontColor:n.color},{container:b._hoverlayer.node(),outerContainer:b._paper.node(),gd:e})})).on("mouseout",(function(){c.loneUnhover(b._hoverlayer.node())}))}var B=t.borderwidth;var N=t.borderpad;var j=B+N;var U=F.append("rect").attr("class","bg").style("stroke-width",B+"px").call(u.stroke,t.bordercolor).call(u.fill,t.bgcolor);var V=t.width||t.height;var H=b._topclips.selectAll("#"+L).data(V?[0]:[]);H.enter().append("clipPath").classed("annclip",true).attr("id",L).append("rect");H.exit().remove();var q=t.font;var G=b._meta?o.templateString(t.text,b._meta):t.text;var Z=F.append("text").classed("annotation-text",true).text(G);function Y(r){r.call(f.font,q).attr({"text-anchor":{left:"start",right:"end"}[t.align]||"middle"});v.convertToTspans(r,e,W);return r}function W(){var r=Z.selectAll("a");if(r.size()===1&&r.text()===Z.text()){var n=F.insert("a",":first-child").attr({"xlink:xlink:href":r.attr("xlink:href"),"xlink:xlink:show":r.attr("xlink:show")}).style({cursor:"pointer"});n.node().appendChild(U.node())}var c=F.select(".annotation-text-math-group");var d=!c.empty();var T=f.bBox((d?c:Z).node());var k=T.width;var A=T.height;var z=t.width||k;var N=t.height||A;var q=Math.round(z+2*j);var G=Math.round(N+2*j);function Y(e,t){if(t==="auto"){if(e<1/3)t="left";else if(e>2/3)t="right";else t="center"}return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t]}var W=false;var X=["x","y"];for(var J=0;J<X.length;J++){var K=X[J];var $=t[K+"ref"]||K;var Q=t["a"+K+"ref"];var ee={x:y,y:m}[K];var te=(I+(K==="x"?0:-90))*Math.PI/180;var re=q*Math.cos(te);var ne=G*Math.sin(te);var ae=Math.abs(re)+Math.abs(ne);var ie=t[K+"anchor"];var oe=t[K+"shift"]*(K==="x"?1:-1);var se=C[K];var le;var ue;var fe;var ce;var ve;var he=l.getRefType($);if(ee&&he!=="domain"){var pe=ee.r2fraction(t[K]);if(pe<0||pe>1){if(Q===$){pe=ee.r2fraction(t["a"+K]);if(pe<0||pe>1){W=true}}else{W=true}}le=ee._offset+ee.r2p(t[K]);ce=.5}else{var de=he==="domain";if(K==="x"){fe=t[K];le=de?ee._offset+ee._length*fe:le=_.l+_.w*fe}else{fe=1-t[K];le=de?ee._offset+ee._length*fe:le=_.t+_.h*fe}ce=t.showarrow?.5:fe}if(t.showarrow){se.head=le;var ge=t["a"+K];ve=re*Y(.5,t.xanchor)-ne*Y(.5,t.yanchor);if(Q===$){var ye=l.getRefType(Q);if(ye==="domain"){if(K==="y"){ge=1-ge}se.tail=ee._offset+ee._length*ge}else if(ye==="paper"){if(K==="y"){ge=1-ge;se.tail=_.t+_.h*ge}else{se.tail=_.l+_.w*ge}}else{se.tail=ee._offset+ee.r2p(ge)}ue=ve}else{se.tail=le+ge;ue=ve+ge}se.text=se.tail+ve;var me=b[K==="x"?"width":"height"];if($==="paper"){se.head=o.constrain(se.head,1,me-1)}if(Q==="pixel"){var xe=-Math.max(se.tail-3,se.text);var be=Math.min(se.tail+3,se.text)-me;if(xe>0){se.tail+=xe;se.text+=xe}else if(be>0){se.tail-=be;se.text-=be}}se.tail+=oe;se.head+=oe}else{ve=ae*Y(ce,ie);ue=ve;se.text=le+ve}se.text+=oe;ve+=oe;ue+=oe;t["_"+K+"padplus"]=ae/2+ue;t["_"+K+"padminus"]=ae/2-ue;t["_"+K+"size"]=ae;t["_"+K+"shift"]=ve}if(W){F.remove();return}var _e=0;var we=0;if(t.align!=="left"){_e=(z-k)*(t.align==="center"?.5:1)}if(t.valign!=="top"){we=(N-A)*(t.valign==="middle"?.5:1)}if(d){c.select("svg").attr({x:j+_e-1,y:j+we}).call(f.setClipUrl,V?L:null,e)}else{var Te=j+we-T.top;var ke=j+_e-T.left;Z.call(v.positionText,ke,Te).call(f.setClipUrl,V?L:null,e)}H.select("rect").call(f.setRect,j,j,z,N);U.call(f.setRect,B/2,B/2,q-B,G-B);F.call(f.setTranslate,Math.round(C.x.text-q/2),Math.round(C.y.text-G/2));O.attr({transform:"rotate("+I+","+C.x.text+","+C.y.text+")"});var Ae=function(r,n){P.selectAll(".annotation-arrow-g").remove();var l=C.x.head;var c=C.y.head;var v=C.x.tail+r;var h=C.y.tail+n;var d=C.x.text+r;var b=C.y.text+n;var T=o.rotationXYMatrix(I,d,b);var k=o.apply2DTransform(T);var A=o.apply2DTransform2(T);var L=+U.attr("width");var D=+U.attr("height");var z=d-.5*L;var R=z+L;var B=b-.5*D;var N=B+D;var j=[[z,B,z,N],[z,N,R,N],[R,N,R,B],[R,B,z,B]].map(A);if(j.reduce((function(e,t){return e^!!o.segmentsIntersect(l,c,l+1e6,c+1e6,t[0],t[1],t[2],t[3])}),false)){return}j.forEach((function(e){var t=o.segmentsIntersect(v,h,l,c,e[0],e[1],e[2],e[3]);if(t){v=t.x;h=t.y}}));var V=t.arrowwidth;var H=t.arrowcolor;var q=t.arrowside;var G=P.append("g").style({opacity:u.opacity(H)}).classed("annotation-arrow-g",true);var Z=G.append("path").attr("d","M"+v+","+h+"L"+l+","+c).style("stroke-width",V+"px").call(u.stroke,u.rgb(H));g(Z,q,t);if(w.annotationPosition&&Z.node().parentNode&&!i){var Y=l;var W=c;if(t.standoff){var X=Math.sqrt(Math.pow(l-v,2)+Math.pow(c-h,2));Y+=t.standoff*(v-l)/X;W+=t.standoff*(h-c)/X}var J=G.append("path").classed("annotation-arrow",true).classed("anndrag",true).classed("cursor-move",true).attr({d:"M3,3H-3V-3H3ZM0,0L"+(v-Y)+","+(h-W),transform:s(Y,W)}).style("stroke-width",V+6+"px").call(u.stroke,"rgba(0,0,0,0)").call(u.fill,"rgba(0,0,0,0)");var K,$;p.init({element:J.node(),gd:e,prepFn:function(){var e=f.getTranslate(F);K=e.x;$=e.y;if(y&&y.autorange){M(y._name+".autorange",true)}if(m&&m.autorange){M(m._name+".autorange",true)}},moveFn:function(e,r){var n=k(K,$);var a=n[0]+e;var i=n[1]+r;F.call(f.setTranslate,a,i);S("x",x(y,e,"x",_,t));S("y",x(m,r,"y",_,t));if(t.axref===t.xref){S("ax",x(y,e,"ax",_,t))}if(t.ayref===t.yref){S("ay",x(m,r,"ay",_,t))}G.attr("transform",s(e,r));O.attr({transform:"rotate("+I+","+a+","+i+")"})},doneFn:function(){a.call("_guiRelayout",e,E());var t=document.querySelector(".js-notes-box-panel");if(t)t.redraw(t.selectedObj)}})}};if(t.showarrow)Ae(0,0);if(D){var Me;p.init({element:F.node(),gd:e,prepFn:function(){Me=O.attr("transform")},moveFn:function(e,r){var n="pointer";if(t.showarrow){if(t.axref===t.xref){S("ax",x(y,e,"ax",_,t))}else{S("ax",t.ax+e)}if(t.ayref===t.yref){S("ay",x(m,r,"ay",_.w,t))}else{S("ay",t.ay+r)}Ae(e,r)}else if(!i){var a,o;if(y){a=x(y,e,"x",_,t)}else{var l=t._xsize/_.w;var u=t.x+(t._xshift-t.xshift)/_.w-l/2;a=p.align(u+e/_.w,l,0,1,t.xanchor)}if(m){o=x(m,r,"y",_,t)}else{var f=t._ysize/_.h;var c=t.y-(t._yshift+t.yshift)/_.h-f/2;o=p.align(c-r/_.h,f,0,1,t.yanchor)}S("x",a);S("y",o);if(!y||!m){n=p.getCursor(y?.5:a,m?.5:o,t.xanchor,t.yanchor)}}else return;O.attr({transform:s(e,r)+Me});h(F,n)},clickFn:function(r,n){if(t.captureevents){e.emit("plotly_clickannotation",R(n))}},doneFn:function(){h(F);a.call("_guiRelayout",e,E());var t=document.querySelector(".js-notes-box-panel");if(t)t.redraw(t.selectedObj)}})}}if(w.annotationText){Z.call(v.makeEditable,{delegate:F,gd:e}).call(Y).on("edit",(function(r){t.text=r;this.call(Y);S("text",r);if(y&&y.autorange){M(y._name+".autorange",true)}if(m&&m.autorange){M(m._name+".autorange",true)}a.call("_guiRelayout",e,E())}))}else Z.call(Y)}},13011:function(e,t,r){"use strict";var n=r(39898);var a=r(7901);var i=r(82884);var o=r(71828);var s=o.strScale;var l=o.strRotate;var u=o.strTranslate;e.exports=function e(t,r,o){var f=t.node();var c=i[o.arrowhead||0];var v=i[o.startarrowhead||0];var h=(o.arrowwidth||1)*(o.arrowsize||1);var p=(o.arrowwidth||1)*(o.startarrowsize||1);var d=r.indexOf("start")>=0;var g=r.indexOf("end")>=0;var y=c.backoff*h+o.standoff;var m=v.backoff*p+o.startstandoff;var x,b,_,w;if(f.nodeName==="line"){x={x:+t.attr("x1"),y:+t.attr("y1")};b={x:+t.attr("x2"),y:+t.attr("y2")};var T=x.x-b.x;var k=x.y-b.y;_=Math.atan2(k,T);w=_+Math.PI;if(y&&m){if(y+m>Math.sqrt(T*T+k*k)){R();return}}if(y){if(y*y>T*T+k*k){R();return}var A=y*Math.cos(_);var M=y*Math.sin(_);b.x+=A;b.y+=M;t.attr({x2:b.x,y2:b.y})}if(m){if(m*m>T*T+k*k){R();return}var S=m*Math.cos(_);var E=m*Math.sin(_);x.x-=S;x.y-=E;t.attr({x1:x.x,y1:x.y})}}else if(f.nodeName==="path"){var L=f.getTotalLength();var C="";if(L<y+m){R();return}var I=f.getPointAtLength(0);var P=f.getPointAtLength(.1);_=Math.atan2(I.y-P.y,I.x-P.x);x=f.getPointAtLength(Math.min(m,L));C="0px,"+m+"px,";var O=f.getPointAtLength(L);var D=f.getPointAtLength(L-.1);w=Math.atan2(O.y-D.y,O.x-D.x);b=f.getPointAtLength(Math.max(0,L-y));var z=C?m+y:y;C+=L-z+"px,"+L+"px";t.style("stroke-dasharray",C)}function R(){t.style("stroke-dasharray","0px,100px")}function F(e,r,i,c){if(!e.path)return;if(e.noRotate)i=0;n.select(f.parentNode).append("path").attr({class:t.attr("class"),d:e.path,transform:u(r.x,r.y)+l(i*180/Math.PI)+s(c)}).style({fill:a.rgb(o.arrowcolor),"stroke-width":0})}if(d)F(v,x,_,p);if(g)F(c,b,w,h)}},32745:function(e,t,r){"use strict";var n=r(92605);var a=r(44317);e.exports={moduleType:"component",name:"annotations",layoutAttributes:r(50215),supplyLayoutDefaults:r(84046),includeBasePlot:r(76325)("annotations"),calcAutorange:r(3749),draw:n.draw,drawOne:n.drawOne,drawRaw:n.drawRaw,hasClickToShow:a.hasClickToShow,onClick:a.onClick,convertCoords:r(94128)}},26997:function(e,t,r){"use strict";var n=r(50215);var a=r(30962).overrideAll;var i=r(44467).templatedArray;e.exports=a(i("annotation",{visible:n.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:n.xanchor,xshift:n.xshift,yanchor:n.yanchor,yshift:n.yshift,text:n.text,textangle:n.textangle,font:n.font,width:n.width,height:n.height,opacity:n.opacity,align:n.align,valign:n.valign,bgcolor:n.bgcolor,bordercolor:n.bordercolor,borderpad:n.borderpad,borderwidth:n.borderwidth,showarrow:n.showarrow,arrowcolor:n.arrowcolor,arrowhead:n.arrowhead,startarrowhead:n.startarrowhead,arrowside:n.arrowside,arrowsize:n.arrowsize,startarrowsize:n.startarrowsize,arrowwidth:n.arrowwidth,standoff:n.standoff,startstandoff:n.startstandoff,hovertext:n.hovertext,hoverlabel:n.hoverlabel,captureevents:n.captureevents}),"calc","from-root")},5485:function(e,t,r){"use strict";var n=r(71828);var a=r(89298);e.exports=function e(t){var r=t.fullSceneLayout;var n=r.annotations;for(var a=0;a<n.length;a++){i(n[a],t)}t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function i(e,t){var r=t.fullSceneLayout;var i=r.domain;var o=t.fullLayout._size;var s={pdata:null,type:"linear",autorange:false,range:[-Infinity,Infinity]};e._xa={};n.extendFlat(e._xa,s);a.setConvert(e._xa);e._xa._offset=o.l+i.x[0]*o.w;e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*o.w*(i.x[1]-i.x[0])};e._ya={};n.extendFlat(e._ya,s);a.setConvert(e._ya);e._ya._offset=o.t+(1-i.y[1])*o.h;e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*o.h*(i.y[1]-i.y[0])}}},20226:function(e,t,r){"use strict";var n=r(71828);var a=r(89298);var i=r(85501);var o=r(25625);var s=r(26997);e.exports=function e(t,r,n){i(t,r,{name:"annotations",handleItemDefaults:l,fullLayout:n.fullLayout})};function l(e,t,r,i){function l(r,a){return n.coerce(e,t,s,r,a)}function u(e){var n=e+"axis";var i={_fullLayout:{}};i._fullLayout[n]=r[n];return a.coercePosition(t,i,l,e,e,.5)}var f=l("visible");if(!f)return;o(e,t,i.fullLayout,l);u("x");u("y");u("z");n.noneOrAll(e,t,["x","y","z"]);t.xref="x";t.yref="y";t.zref="z";l("xanchor");l("yanchor");l("xshift");l("yshift");if(t.showarrow){t.axref="pixel";t.ayref="pixel";l("ax",-10);l("ay",-30);n.noneOrAll(e,t,["ax","ay"])}}},82188:function(e,t,r){"use strict";var n=r(92605).drawRaw;var a=r(63538);var i=["x","y","z"];e.exports=function e(t){var r=t.fullSceneLayout;var o=t.dataScale;var s=r.annotations;for(var l=0;l<s.length;l++){var u=s[l];var f=false;for(var c=0;c<3;c++){var v=i[c];var h=u[v];var p=r[v+"axis"];var d=p.r2fraction(h);if(d<0||d>1){f=true;break}}if(f){t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+l+'"]').remove()}else{u._pdata=a(t.glplot.cameraParams,[r.xaxis.r2l(u.x)*o[0],r.yaxis.r2l(u.y)*o[1],r.zaxis.r2l(u.z)*o[2]]);n(t.graphDiv,u,l,t.id,u._xa,u._ya)}}}},2468:function(e,t,r){"use strict";var n=r(73972);var a=r(71828);e.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:r(26997)}}},layoutAttributes:r(26997),handleDefaults:r(20226),includeBasePlot:i,convert:r(5485),draw:r(82188)};function i(e,t){var r=n.subplotsRegistry.gl3d;if(!r)return;var i=r.attrRegex;var o=Object.keys(e);for(var s=0;s<o.length;s++){var l=o[s];if(i.test(l)&&(e[l].annotations||[]).length){a.pushUnique(t._basePlotModules,r);a.pushUnique(t._subplots.gl3d,l)}}}},7561:function(e,t,r){"use strict";e.exports=r(63489);r(94338);r(3961);r(38751);r(86825);r(37715);r(99384);r(43805);r(88874);r(83290);r(29108);r(55422);r(94320);r(31320);r(51367);r(21457)},72201:function(e,t,r){"use strict";var n=r(7561);var a=r(71828);var i=r(50606);var o=i.EPOCHJD;var s=i.ONEDAY;var l={valType:"enumerated",values:a.sortObjectKeys(n.calendars),editType:"calc",dflt:"gregorian"};var u=function(e,t,r,n){var i={};i[r]=l;return a.coerce(e,t,i,r,n)};var f=function(e,t,r,n){for(var a=0;a<r.length;a++){u(e,t,r[a]+"calendar",n.calendar)}};var c={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"};var v={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"};var h={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]};var p="##";var d={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:p,w:p,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function g(e,t,r){var n=Math.floor((t+.05)/s)+o;var a=m(r).fromJD(n);var i=0;var l,u,f,c,v;while((i=e.indexOf("%",i))!==-1){l=e.charAt(i+1);if(l==="0"||l==="-"||l==="_"){f=3;u=e.charAt(i+2);if(l==="_")l="-"}else{u=l;l="0";f=2}c=d[u];if(!c){i+=f}else{if(c===p)v=p;else v=a.formatDate(c[l]);e=e.substr(0,i)+v+e.substr(i+f);i+=v.length}}return e}var y={};function m(e){var t=y[e];if(t)return t;t=y[e]=n.instance(e);return t}function x(e){return a.extendFlat({},l,{description:e})}function b(e){return"Sets the calendar system to use with `"+e+"` date data."}var _={xcalendar:x(b("x"))};var w=a.extendFlat({},_,{ycalendar:x(b("y"))});var T=a.extendFlat({},w,{zcalendar:x(b("z"))});var k=x(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));e.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:w,bar:w,box:w,heatmap:w,contour:w,histogram:w,histogram2d:w,histogram2dcontour:w,scatter3d:T,surface:T,mesh3d:T,scattergl:w,ohlc:_,candlestick:_},layout:{calendar:x(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:k},yaxis:{calendar:k},scene:{xaxis:{calendar:k},yaxis:{calendar:k},zaxis:{calendar:k}},polar:{radialaxis:{calendar:k}}},transforms:{filter:{valuecalendar:x(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:x(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:l,handleDefaults:u,handleTraceDefaults:f,CANONICAL_SUNDAY:v,CANONICAL_TICK:c,DFLTRANGE:h,getCal:m,worldCalFmt:g}},22399:function(e,t){"use strict";t.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];t.defaultLine="#444";t.lightLine="#eee";t.background="#fff";t.borderLine="#BEC8D9";t.lightFraction=100*(14-4)/(15-4)},7901:function(e,t,r){"use strict";var n=r(84267);var a=r(92770);var i=r(73627).isTypedArray;var o=e.exports={};var s=r(22399);o.defaults=s.defaults;var l=o.defaultLine=s.defaultLine;o.lightLine=s.lightLine;var u=o.background=s.background;o.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"};o.rgb=function(e){return o.tinyRGB(n(e))};o.opacity=function(e){return e?n(e).getAlpha():0};o.addOpacity=function(e,t){var r=n(e).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+t+")"};o.combine=function(e,t){var r=n(e).toRgb();if(r.a===1)return n(e).toRgbString();var a=n(t||u).toRgb();var i=a.a===1?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a};var o={r:i.r*(1-r.a)+r.r*r.a,g:i.g*(1-r.a)+r.g*r.a,b:i.b*(1-r.a)+r.b*r.a};return n(o).toRgbString()};o.contrast=function(e,t,r){var a=n(e);if(a.getAlpha()!==1)a=n(o.combine(e,u));var i=a.isDark()?t?a.lighten(t):u:r?a.darken(r):l;return i.toString()};o.stroke=function(e,t){var r=n(t);e.style({stroke:o.tinyRGB(r),"stroke-opacity":r.getAlpha()})};o.fill=function(e,t){var r=n(t);e.style({fill:o.tinyRGB(r),"fill-opacity":r.getAlpha()})};o.clean=function(e){if(!e||typeof e!=="object")return;var t=Object.keys(e);var r,n,a,s;for(r=0;r<t.length;r++){a=t[r];s=e[a];if(a.substr(a.length-5)==="color"){if(Array.isArray(s)){for(n=0;n<s.length;n++)s[n]=f(s[n])}else e[a]=f(s)}else if(a.substr(a.length-10)==="colorscale"&&Array.isArray(s)){for(n=0;n<s.length;n++){if(Array.isArray(s[n]))s[n][1]=f(s[n][1])}}else if(Array.isArray(s)){var l=s[0];if(!Array.isArray(l)&&l&&typeof l==="object"){for(n=0;n<s.length;n++)o.clean(s[n])}}else if(s&&typeof s==="object"&&!i(s))o.clean(s)}};function f(e){if(a(e)||typeof e!=="string")return e;var t=e.trim();if(t.substr(0,3)!=="rgb")return e;var r=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return e;var n=r[1].trim().split(/\s*[\s,]\s*/);var i=t.charAt(3)==="a"&&n.length===4;if(!i&&n.length!==3)return e;for(var o=0;o<n.length;o++){if(!n[o].length)return e;n[o]=Number(n[o]);if(!(n[o]>=0)){return e}if(o===3){if(n[o]>1)n[o]=1}else if(n[o]>=1){return e}}var s=Math.round(n[0]*255)+", "+Math.round(n[1]*255)+", "+Math.round(n[2]*255);if(i)return"rgba("+s+", "+n[3]+")";return"rgb("+s+")"}},63583:function(e,t,r){"use strict";var n=r(13838);var a=r(41940);var i=r(1426).extendFlat;var o=r(30962).overrideAll;e.exports=o({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:n.linecolor,outlinewidth:n.linewidth,bordercolor:n.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:n.minor.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:i({},n.ticks,{dflt:""}),ticklabeloverflow:i({},n.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,ticklabelstep:n.ticklabelstep,showticklabels:n.showticklabels,labelalias:n.labelalias,tickfont:a({}),tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,tickprefix:n.tickprefix,showtickprefix:n.showtickprefix,ticksuffix:n.ticksuffix,showticksuffix:n.showticksuffix,separatethousands:n.separatethousands,exponentformat:n.exponentformat,minexponent:n.minexponent,showexponent:n.showexponent,title:{text:{valType:"string"},font:a({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:a({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},30939:function(e){"use strict";e.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},62499:function(e,t,r){"use strict";var n=r(71828);var a=r(44467);var i=r(26218);var o=r(38701);var s=r(96115);var l=r(89426);var u=r(63583);e.exports=function e(t,r,f){var c=a.newContainer(r,"colorbar");var v=t.colorbar||{};function h(e,t){return n.coerce(v,c,u,e,t)}var p=f.margin||{t:0,b:0,l:0,r:0};var d=f.width-p.l-p.r;var g=f.height-p.t-p.b;var y=h("orientation");var m=y==="v";var x=h("thicknessmode");h("thickness",x==="fraction"?30/(m?d:g):30);var b=h("lenmode");h("len",b==="fraction"?1:m?g:d);var _=h("yref");var w=h("xref");var T=_==="paper";var k=w==="paper";var A,M,S;var E="left";if(m){S="middle";E=k?"left":"right";A=k?1.02:1;M=.5}else{S=T?"bottom":"top";E="center";A=.5;M=T?1.02:1}n.coerce(v,c,{x:{valType:"number",min:k?-2:0,max:k?3:1,dflt:A}},"x");n.coerce(v,c,{y:{valType:"number",min:T?-2:0,max:T?3:1,dflt:M}},"y");h("xanchor",E);h("xpad");h("yanchor",S);h("ypad");n.noneOrAll(v,c,["x","y"]);h("outlinecolor");h("outlinewidth");h("bordercolor");h("borderwidth");h("bgcolor");var L=n.coerce(v,c,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:m?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");h("ticklabeloverflow",L.indexOf("inside")!==-1?"hide past domain":"hide past div");i(v,c,h,"linear");var C=f.font;var I={outerTicks:false,font:C};if(L.indexOf("inside")!==-1){I.bgColor="black"}l(v,c,h,"linear",I);s(v,c,h,"linear",I);o(v,c,h,"linear",I);h("title.text",f._dfltTitle.colorbar);var P=c.showticklabels?c.tickfont:C;var O=n.extendFlat({},P,{color:C.color,size:n.bigFont(P.size)});n.coerceFont(h,"title.font",O);h("title.side",m?"top":"right")}},98981:function(e,t,r){"use strict";var n=r(39898);var a=r(84267);var i=r(74875);var o=r(73972);var s=r(89298);var l=r(28569);var u=r(71828);var f=u.strTranslate;var c=r(1426).extendFlat;var v=r(6964);var h=r(91424);var p=r(7901);var d=r(92998);var g=r(63893);var y=r(52075).flipScale;var m=r(71453);var x=r(52830);var b=r(13838);var _=r(18783);var w=_.LINE_SPACING;var T=_.FROM_TL;var k=_.FROM_BR;var A=r(30939).cn;function M(e){var t=e._fullLayout;var r=t._infolayer.selectAll("g."+A.colorbar).data(S(e),(function(e){return e._id}));r.enter().append("g").attr("class",(function(e){return e._id})).classed(A.colorbar,true);r.each((function(t){var r=n.select(this);u.ensureSingle(r,"rect",A.cbbg);u.ensureSingle(r,"g",A.cbfills);u.ensureSingle(r,"g",A.cblines);u.ensureSingle(r,"g",A.cbaxis,(function(e){e.classed(A.crisp,true)}));u.ensureSingle(r,"g",A.cbtitleunshift,(function(e){e.append("g").classed(A.cbtitle,true)}));u.ensureSingle(r,"rect",A.cboutline);var a=E(r,t,e);if(a&&a.then)(e._promises||[]).push(a);if(e._context.edits.colorbarPosition){L(r,t,e)}}));r.exit().each((function(t){i.autoMargin(e,t._id)})).remove();r.order()}function S(e){var t=e._fullLayout;var r=e.calcdata;var n=[];var a;var i;var o;var s;function l(e){return c(e,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function u(){if(typeof s.calc==="function"){s.calc(e,o,a)}else{a._fillgradient=i.reversescale?y(i.colorscale):i.colorscale;a._zrange=[i[s.min],i[s.max]]}}for(var f=0;f<r.length;f++){var v=r[f];o=v[0].trace;if(!o._module)continue;var h=o._module.colorbar;if(o.visible===true&&h){var p=Array.isArray(h);var d=p?h:[h];for(var g=0;g<d.length;g++){s=d[g];var m=s.container;i=m?o[m]:o;if(i&&i.showscale){a=l(i.colorbar);a._id="cb"+o.uid+(p&&m?"-"+m:"");a._traceIndex=o.index;a._propPrefix=(m?m+".":"")+"colorbar.";a._meta=o._meta;u();n.push(a)}}}}for(var x in t._colorAxes){i=t[x];if(i.showscale){var b=t._colorAxes[x];a=l(i.colorbar);a._id="cb"+x;a._propPrefix=x+".colorbar.";a._meta=t._meta;s={min:"cmin",max:"cmax"};if(b[0]!=="heatmap"){o=b[1];s.calc=o._module.colorbar.calc}u();n.push(a)}}return n}function E(e,t,r){var o=t.orientation==="v";var l=t.len;var v=t.lenmode;var y=t.thickness;var m=t.thicknessmode;var x=t.outlinewidth;var b=t.borderwidth;var _=t.bgcolor;var M=t.xanchor;var S=t.yanchor;var E=t.xpad;var L=t.ypad;var P=t.x;var O=o?t.y:1-t.y;var D=t.yref==="paper";var z=t.xref==="paper";var R=r._fullLayout;var F=R._size;var B=t._fillcolor;var N=t._line;var j=t.title;var U=j.side;var V=t._zrange||n.extent((typeof B==="function"?B:N.color).domain());var H=typeof N.color==="function"?N.color:function(){return N.color};var q=typeof B==="function"?B:function(){return B};var G=t._levels;var Z=C(r,t,V);var Y=Z.fill;var W=Z.line;var X=Math.round(y*(m==="fraction"?o?F.w:F.h:1));var J=X/(o?F.w:F.h);var K=Math.round(l*(v==="fraction"?o?F.h:F.w:1));var $=K/(o?F.h:F.w);var Q=z?F.w:r._fullLayout.width;var ee=D?F.h:r._fullLayout.height;var te=Math.round(o?P*Q+E:O*ee+L);var re={center:.5,right:1}[M]||0;var ne={top:1,middle:.5}[S]||0;var ae=o?P-re*J:O-ne*J;var ie=o?O-ne*$:P-re*$;var oe=Math.round(o?ee*(1-ie):Q*ie);t._lenFrac=$;t._thickFrac=J;t._uFrac=ae;t._vFrac=ie;var se=t._axis=I(r,t,V);se.position=J+(o?P+E/F.w:O+L/F.h);var le=["top","bottom"].indexOf(U)!==-1;if(o&&le){se.title.side=U;se.titlex=P+E/F.w;se.titley=ie+(j.side==="top"?$-L/F.h:L/F.h)}if(!o&&!le){se.title.side=U;se.titley=O+L/F.h;se.titlex=ie+E/F.w}if(N.color&&t.tickmode==="auto"){se.tickmode="linear";se.tick0=G.start;var ue=G.size;var fe=u.constrain(K/50,4,15)+1;var ce=(V[1]-V[0])/((t.nticks||fe)*ue);if(ce>1){var ve=Math.pow(10,Math.floor(Math.log(ce)/Math.LN10));ue*=ve*u.roundUp(ce/ve,[2,5,10]);if((Math.abs(G.start)/G.size+1e-6)%1<2e-6){se.tick0=0}}se.dtick=ue}se.domain=o?[ie+L/F.h,ie+$-L/F.h]:[ie+E/F.w,ie+$-E/F.w];se.setScale();e.attr("transform",f(Math.round(F.l),Math.round(F.t)));var he=e.select("."+A.cbtitleunshift).attr("transform",f(-Math.round(F.l),-Math.round(F.t)));var pe=se.ticklabelposition;var de=se.title.font.size;var ge=e.select("."+A.cbaxis);var ye;var me=0;var xe=0;function be(n,a){var i={propContainer:se,propName:t._propPrefix+"title",traceIndex:t._traceIndex,_meta:t._meta,placeholder:R._dfltTitle.colorbar,containerGroup:e.select("."+A.cbtitle)};var o=n.charAt(0)==="h"?n.substr(1):"h"+n;e.selectAll("."+o+",."+o+"-math-group").remove();d.draw(r,n,c(i,a||{}))}function _e(){if(o&&le||!o&&!le){var e,t;if(U==="top"){e=E+F.l+Q*P;t=L+F.t+ee*(1-ie-$)+3+de*.75}if(U==="bottom"){e=E+F.l+Q*P;t=L+F.t+ee*(1-ie)-3-de*.25}if(U==="right"){t=L+F.t+ee*O+3+de*.75;e=E+F.l+Q*ie}be(se._id+"title",{attributes:{x:e,y:t,"text-anchor":o?"start":"middle"}})}}function we(){if(o&&!le||!o&&le){var e=se.position||0;var a=se._offset+se._length/2;var i,s;if(U==="right"){s=a;i=F.l+Q*e+10+de*(se.showticklabels?1:.5)}else{i=a;if(U==="bottom"){s=F.t+ee*e+10+(pe.indexOf("inside")===-1?se.tickfont.size:0)+(se.ticks!=="intside"?t.ticklen||0:0)}if(U==="top"){var l=j.text.split("<br>").length;s=F.t+ee*e+10-X-w*de*l}}be((o?"h":"v")+se._id+"title",{avoid:{selection:n.select(r).selectAll("g."+se._id+"tick"),side:U,offsetTop:o?0:F.t,offsetLeft:o?F.l:0,maxShift:o?R.width:R.height},attributes:{x:i,y:s,"text-anchor":"middle"},transform:{rotate:o?-90:0,offset:0}})}}function Te(){if(!o&&!le||o&&le){var i=e.select("."+A.cbtitle);var l=i.select("text");var c=[-x/2,x/2];var v=i.select(".h"+se._id+"title-math-group").node();var p=15.6;if(l.node()){p=parseInt(l.node().style.fontSize,10)*w}var d;if(v){d=h.bBox(v);xe=d.width;me=d.height;if(me>p){c[1]-=(me-p)/2}}else if(l.node()&&!l.classed(A.jsPlaceholder)){d=h.bBox(l.node());xe=d.width;me=d.height}if(o){if(me){me+=5;if(U==="top"){se.domain[1]-=me/F.h;c[1]*=-1}else{se.domain[0]+=me/F.h;var y=g.lineCount(l);c[1]+=(1-y)*p}i.attr("transform",f(c[0],c[1]));se.setScale()}}else{if(xe){if(U==="right"){se.domain[0]+=(xe+de/2)/F.w}i.attr("transform",f(c[0],c[1]));se.setScale()}}}e.selectAll("."+A.cbfills+",."+A.cblines).attr("transform",o?f(0,Math.round(F.h*(1-se.domain[1]))):f(Math.round(F.w*se.domain[0]),0));ge.attr("transform",o?f(0,Math.round(-F.t)):f(Math.round(-F.l),0));var m=e.select("."+A.cbfills).selectAll("rect."+A.cbfill).attr("style","").data(Y);m.enter().append("rect").classed(A.cbfill,true).attr("style","");m.exit().remove();var b=V.map(se.c2p).map(Math.round).sort((function(e,t){return e-t}));m.each((function(e,i){var s=[i===0?V[0]:(Y[i]+Y[i-1])/2,i===Y.length-1?V[1]:(Y[i]+Y[i+1])/2].map(se.c2p).map(Math.round);if(o){s[1]=u.constrain(s[1]+(s[1]>s[0])?1:-1,b[0],b[1])}var l=n.select(this).attr(o?"x":"y",te).attr(o?"y":"x",n.min(s)).attr(o?"width":"height",Math.max(X,2)).attr(o?"height":"width",Math.max(n.max(s)-n.min(s),2));if(t._fillgradient){h.gradient(l,r,t._id,o?"vertical":"horizontalreversed",t._fillgradient,"fill")}else{var f=q(e).replace("e-","");l.attr("fill",a(f).toHexString())}}));var _=e.select("."+A.cblines).selectAll("path."+A.cbline).data(N.color&&N.width?W:[]);_.enter().append("path").classed(A.cbline,true);_.exit().remove();_.each((function(e){var t=te;var r=Math.round(se.c2p(e))+N.width/2%1;n.select(this).attr("d","M"+(o?t+","+r:r+","+t)+(o?"h":"v")+X).call(h.lineGroupStyle,N.width,H(e),N.dash)}));ge.selectAll("g."+se._id+"tick,path").remove();var T=te+X+(x||0)/2-(t.ticks==="outside"?1:0);var k=s.calcTicks(se);var M=s.getTickSigns(se)[2];s.drawTicks(r,se,{vals:se.ticks==="inside"?s.clipEnds(se,k):k,layer:ge,path:s.makeTickPath(se,T,M),transFn:s.makeTransTickFn(se)});return s.drawLabels(r,se,{vals:k,layer:ge,transFn:s.makeTransTickLabelFn(se),labelFns:s.makeLabelFns(se,T)})}function ke(){var n;var s=X+x/2;if(pe.indexOf("inside")===-1){n=h.bBox(ge.node());s+=o?n.width:n.height}ye=he.select("text");var u=0;var c=o&&U==="top";var d=!o&&U==="right";var g=0;if(ye.node()&&!ye.classed(A.jsPlaceholder)){var w;var C=he.select(".h"+se._id+"title-math-group").node();if(C&&(o&&le||!o&&!le)){n=h.bBox(C);u=n.width;w=n.height}else{n=h.bBox(he.node());u=n.right-F.l-(o?te:oe);w=n.bottom-F.t-(o?oe:te);if(!o&&U==="top"){s+=n.height;g=n.height}}if(d){ye.attr("transform",f(u/2+de/2,0));u*=2}s=Math.max(s,o?u:w)}var I=(o?E:L)*2+s+b+x/2;var B=0;if(!o&&j.text&&S==="bottom"&&O<=0){B=I/2;I+=B;g+=B}R._hColorbarMoveTitle=B;R._hColorbarMoveCBTitle=g;var N=b+x;var V=(o?te:oe)-N/2-(o?E:0);var H=(o?oe:te)-(o?K:L+g-B);e.select("."+A.cbbg).attr("x",V).attr("y",H).attr(o?"width":"height",Math.max(I-B,2)).attr(o?"height":"width",Math.max(K+N,2)).call(p.fill,_).call(p.stroke,t.bordercolor).style("stroke-width",b);var q=d?Math.max(u-10,0):0;e.selectAll("."+A.cboutline).attr("x",(o?te:oe+E)+q).attr("y",(o?oe+L-K:te)+(c?me:0)).attr(o?"width":"height",Math.max(X,2)).attr(o?"height":"width",Math.max(K-(o?2*L+me:2*E+q),2)).call(p.stroke,t.outlinecolor).style({fill:"none","stroke-width":x});var G=o?re*I:0;var Z=o?0:(1-ne)*I-g;G=z?F.l-G:-G;Z=D?F.t-Z:-Z;e.attr("transform",f(G,Z));if(!o&&(b||a(_).getAlpha()&&!a.equals(R.paper_bgcolor,_))){var Y=ge.selectAll("text");var W=Y[0].length;var J=e.select("."+A.cbbg).node();var $=h.bBox(J);var Q=h.getTranslate(e);var ee=2;Y.each((function(e,t){var r=0;var n=W-1;if(t===r||t===n){var a=h.bBox(this);var i=h.getTranslate(this);var o;if(t===n){var s=a.right+i.x;var l=$.right+Q.x+oe-b-ee+P;o=l-s;if(o>0)o=0}else if(t===r){var u=a.left+i.x;var f=$.left+Q.x+oe+b+ee;o=f-u;if(o<0)o=0}if(o){if(W<3){this.setAttribute("transform","translate("+o+",0) "+this.getAttribute("transform"))}else{this.setAttribute("visibility","hidden")}}}}))}var ae={};var ie=T[M];var ue=k[M];var fe=T[S];var ce=k[S];var ve=I-X;if(o){if(v==="pixels"){ae.y=O;ae.t=K*fe;ae.b=K*ce}else{ae.t=ae.b=0;ae.yt=O+l*fe;ae.yb=O-l*ce}if(m==="pixels"){ae.x=P;ae.l=I*ie;ae.r=I*ue}else{ae.l=ve*ie;ae.r=ve*ue;ae.xl=P-y*ie;ae.xr=P+y*ue}}else{if(v==="pixels"){ae.x=P;ae.l=K*ie;ae.r=K*ue}else{ae.l=ae.r=0;ae.xl=P+l*ie;ae.xr=P-l*ue}if(m==="pixels"){ae.y=1-O;ae.t=I*fe;ae.b=I*ce}else{ae.t=ve*fe;ae.b=ve*ce;ae.yt=O-y*fe;ae.yb=O+y*ce}}var xe=t.y<.5?"b":"t";var be=t.x<.5?"l":"r";r._fullLayout._reservedMargin[t._id]={};var _e={r:R.width-V-G,l:V+ae.r,b:R.height-H-Z,t:H+ae.b};if(z&&D){i.autoMargin(r,t._id,ae)}else if(z){r._fullLayout._reservedMargin[t._id][xe]=_e[xe]}else if(D){r._fullLayout._reservedMargin[t._id][be]=_e[be]}else{if(o){r._fullLayout._reservedMargin[t._id][be]=_e[be]}else{r._fullLayout._reservedMargin[t._id][xe]=_e[xe]}}}return u.syncOrAsync([i.previousPromises,_e,Te,we,i.previousPromises,ke],r)}function L(e,t,r){var n=t.orientation==="v";var a=r._fullLayout;var i=a._size;var s,u,c;l.init({element:e.node(),gd:r,prepFn:function(){s=e.attr("transform");v(e)},moveFn:function(r,a){e.attr("transform",s+f(r,a));u=l.align((n?t._uFrac:t._vFrac)+r/i.w,n?t._thickFrac:t._lenFrac,0,1,t.xanchor);c=l.align((n?t._vFrac:1-t._uFrac)-a/i.h,n?t._lenFrac:t._thickFrac,0,1,t.yanchor);var o=l.getCursor(u,c,t.xanchor,t.yanchor);v(e,o)},doneFn:function(){v(e);if(u!==undefined&&c!==undefined){var n={};n[t._propPrefix+"x"]=u;n[t._propPrefix+"y"]=c;if(t._traceIndex!==undefined){o.call("_guiRestyle",r,n,t._traceIndex)}else{o.call("_guiRelayout",r,n)}}}})}function C(e,t,r){var n=t._levels;var a=[];var i=[];var o;var s;var l=n.end+n.size/100;var u=n.size;var f=1.001*r[0]-.001*r[1];var c=1.001*r[1]-.001*r[0];for(s=0;s<1e5;s++){o=n.start+s*u;if(u>0?o>=l:o<=l)break;if(o>f&&o<c)a.push(o)}if(t._fillgradient){i=[0]}else if(typeof t._fillcolor==="function"){var v=t._filllevels;if(v){l=v.end+v.size/100;u=v.size;for(s=0;s<1e5;s++){o=v.start+s*u;if(u>0?o>=l:o<=l)break;if(o>r[0]&&o<r[1])i.push(o)}}else{i=a.map((function(e){return e-n.size/2}));i.push(i[i.length-1]+n.size)}}else if(t._fillcolor&&typeof t._fillcolor==="string"){i=[0]}if(n.size<0){a.reverse();i.reverse()}return{line:a,fill:i}}function I(e,t,r){var n=e._fullLayout;var a=t.orientation==="v";var i={type:"linear",range:r,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,labelalias:t.labelalias,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,ticklabelstep:t.ticklabelstep,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:true,anchor:"free",side:a?"right":"bottom",position:1};var o=a?"y":"x";var s={type:"linear",_id:o+t._id};var l={letter:o,font:n.font,noHover:true,noTickson:true,noTicklabelmode:true,noInsideRange:true,calendar:n.calendar};function f(e,t){return u.coerce(i,s,b,e,t)}m(i,s,f,l,n);x(i,s,f,l);return s}e.exports={draw:M}},76228:function(e,t,r){"use strict";var n=r(71828);e.exports=function e(t){return n.isPlainObject(t.colorbar)}},12311:function(e,t,r){"use strict";e.exports={moduleType:"component",name:"colorbar",attributes:r(63583),supplyDefaults:r(62499),draw:r(98981).draw,hasColorbar:r(76228)}},50693:function(e,t,r){"use strict";var n=r(63583);var a=r(30587).counter;var i=r(78607);var o=r(63282).scales;var s=i(o);function l(e){return"`"+e+"`"}e.exports=function e(t,r){t=t||"";r=r||{};var i=r.cLetter||"c";var s="onlyIfNumerical"in r?r.onlyIfNumerical:Boolean(t);var u="noScale"in r?r.noScale:t==="marker.line";var f="showScaleDflt"in r?r.showScaleDflt:i==="z";var c=typeof r.colorscaleDflt==="string"?o[r.colorscaleDflt]:null;var v=r.editTypeOverride||"";var h=t?t+".":"";var p,d;if("colorAttr"in r){p=r.colorAttr;d=r.colorAttr}else{p={z:"z",c:"color"}[i];d="in "+l(h+p)}var g=s?" Has an effect only if "+d+" is set to a numerical array.":"";var y=i+"auto";var m=i+"min";var x=i+"max";var b=i+"mid";var _=l(h+y);var w=l(h+m);var T=l(h+x);var k=w+" and "+T;var A={};A[m]=A[x]=undefined;var M={};M[y]=false;var S={};if(p==="color"){S.color={valType:"color",arrayOk:true,editType:v||"style"};if(r.anim){S.color.anim=true}}S[y]={valType:"boolean",dflt:true,editType:"calc",impliedEdits:A};S[m]={valType:"number",dflt:null,editType:v||"plot",impliedEdits:M};S[x]={valType:"number",dflt:null,editType:v||"plot",impliedEdits:M};S[b]={valType:"number",dflt:null,editType:"calc",impliedEdits:A};S.colorscale={valType:"colorscale",editType:"calc",dflt:c,impliedEdits:{autocolorscale:false}};S.autocolorscale={valType:"boolean",dflt:r.autoColorDflt===false?false:true,editType:"calc",impliedEdits:{colorscale:undefined}};S.reversescale={valType:"boolean",dflt:false,editType:"plot"};if(!u){S.showscale={valType:"boolean",dflt:f,editType:"calc"};S.colorbar=n}if(!r.noColorAxis){S.coloraxis={valType:"subplotid",regex:a("coloraxis"),dflt:null,editType:"calc"}}return S}},78803:function(e,t,r){"use strict";var n=r(92770);var a=r(71828);var i=r(52075).extractOpts;e.exports=function e(t,r,o){var s=t._fullLayout;var l=o.vals;var u=o.containerStr;var f=u?a.nestedProperty(r,u).get():r;var c=i(f);var v=c.auto!==false;var h=c.min;var p=c.max;var d=c.mid;var g=function(){return a.aggNums(Math.min,null,l)};var y=function(){return a.aggNums(Math.max,null,l)};if(h===undefined){h=g()}else if(v){if(f._colorAx&&n(h)){h=Math.min(h,g())}else{h=g()}}if(p===undefined){p=y()}else if(v){if(f._colorAx&&n(p)){p=Math.max(p,y())}else{p=y()}}if(v&&d!==undefined){if(p-d>d-h){h=d-(p-d)}else if(p-d<d-h){p=d+(d-h)}}if(h===p){h-=.5;p+=.5}c._sync("min",h);c._sync("max",p);if(c.autocolorscale){var m;if(h*p<0)m=s.colorscale.diverging;else if(h>=0)m=s.colorscale.sequential;else m=s.colorscale.sequentialminus;c._sync("colorscale",m)}}},33046:function(e,t,r){"use strict";var n=r(71828);var a=r(52075).hasColorscale;var i=r(52075).extractOpts;e.exports=function e(t,r){function o(e,t){var r=e["_"+t];if(r!==undefined){e[t]=r}}function s(e,t){var a=t.container?n.nestedProperty(e,t.container).get():e;if(a){if(a.coloraxis){a._colorAx=r[a.coloraxis]}else{var s=i(a);var l=s.auto;if(l||s.min===undefined){o(a,t.min)}if(l||s.max===undefined){o(a,t.max)}if(s.autocolorscale){o(a,"colorscale")}}}}for(var l=0;l<t.length;l++){var u=t[l];var f=u._module.colorbar;if(f){if(Array.isArray(f)){for(var c=0;c<f.length;c++){s(u,f[c])}}else{s(u,f)}}if(a(u,"marker.line")){s(u,{container:"marker.line",min:"cmin",max:"cmax"})}}for(var v in r._colorAxes){s(r[v],{min:"cmin",max:"cmax"})}}},1586:function(e,t,r){"use strict";var n=r(92770);var a=r(71828);var i=r(76228);var o=r(62499);var s=r(63282).isValid;var l=r(73972).traceIs;function u(e,t){var r=t.slice(0,t.length-1);return t?a.nestedProperty(e,r).get()||{}:e}e.exports=function e(t,r,f,c,v){var h=v.prefix;var p=v.cLetter;var d="_module"in r;var g=u(t,h);var y=u(r,h);var m=u(r._template||{},h)||{};var x=function(){delete t.coloraxis;delete r.coloraxis;return e(t,r,f,c,v)};if(d){var b=f._colorAxes||{};var _=c(h+"coloraxis");if(_){var w=l(r,"contour")&&a.nestedProperty(r,"contours.coloring").get()||"heatmap";var T=b[_];if(T){T[2].push(x);if(T[0]!==w){T[0]=false;a.warn(["Ignoring coloraxis:",_,"setting","as it is linked to incompatible colorscales."].join(" "))}}else{b[_]=[w,r,[x]]}return}}var k=g[p+"min"];var A=g[p+"max"];var M=n(k)&&n(A)&&k<A;var S=c(h+p+"auto",!M);if(S){c(h+p+"mid")}else{c(h+p+"min");c(h+p+"max")}var E=g.colorscale;var L=m.colorscale;var C;if(E!==undefined)C=!s(E);if(L!==undefined)C=!s(L);c(h+"autocolorscale",C);c(h+"colorscale");c(h+"reversescale");if(h!=="marker.line."){var I;if(h&&d)I=i(g);var P=c(h+"showscale",I);if(P){if(h&&m)y._template=m;o(g,y,f)}}}},52075:function(e,t,r){"use strict";var n=r(39898);var a=r(84267);var i=r(92770);var o=r(71828);var s=r(7901);var l=r(63282).isValid;function u(e,t,r){var n=t?o.nestedProperty(e,t).get()||{}:e;var a=n[r||"color"];var s=false;if(o.isArrayOrTypedArray(a)){for(var u=0;u<a.length;u++){if(i(a[u])){s=true;break}}}return o.isPlainObject(n)&&(s||n.showscale===true||i(n.cmin)&&i(n.cmax)||l(n.colorscale)||o.isPlainObject(n.colorbar))}var f=["showscale","autocolorscale","colorscale","reversescale","colorbar"];var c=["min","max","mid","auto"];function v(e){var t=e._colorAx;var r=t?t:e;var n={};var a;var i,o;for(i=0;i<f.length;i++){o=f[i];n[o]=r[o]}if(t){a="c";for(i=0;i<c.length;i++){o=c[i];n[o]=r["c"+o]}}else{var s;for(i=0;i<c.length;i++){o=c[i];s="c"+o;if(s in r){n[o]=r[s];continue}s="z"+o;if(s in r){n[o]=r[s]}}a=s.charAt(0)}n._sync=function(e,t){var n=c.indexOf(e)!==-1?a+e:e;r[n]=r["_"+n]=t};return n}function h(e){var t=v(e);var r=t.min;var n=t.max;var a=t.reversescale?p(t.colorscale):t.colorscale;var i=a.length;var o=new Array(i);var s=new Array(i);for(var l=0;l<i;l++){var u=a[l];o[l]=r+u[0]*(n-r);s[l]=u[1]}return{domain:o,range:s}}function p(e){var t=e.length;var r=new Array(t);for(var n=t-1,a=0;n>=0;n--,a++){var i=e[n];r[a]=[1-i[0],i[1]]}return r}function d(e,t){t=t||{};var r=e.domain;var o=e.range;var l=o.length;var u=new Array(l);for(var f=0;f<l;f++){var c=a(o[f]).toRgb();u[f]=[c.r,c.g,c.b,c.a]}var v=n.scale.linear().domain(r).range(u).clamp(true);var h=t.noNumericCheck;var p=t.returnArray;var d;if(h&&p){d=v}else if(h){d=function(e){return y(v(e))}}else if(p){d=function(e){if(i(e))return v(e);else if(a(e).isValid())return e;else return s.defaultLine}}else{d=function(e){if(i(e))return y(v(e));else if(a(e).isValid())return e;else return s.defaultLine}}d.domain=v.domain;d.range=function(){return o};return d}function g(e,t){return d(h(e),t)}function y(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return a(t).toRgbString()}e.exports={hasColorscale:u,extractOpts:v,extractScale:h,flipScale:p,makeColorScaleFunc:d,makeColorScaleFuncFromTrace:g}},21081:function(e,t,r){"use strict";var n=r(63282);var a=r(52075);e.exports={moduleType:"component",name:"colorscale",attributes:r(50693),layoutAttributes:r(72673),supplyLayoutDefaults:r(30959),handleDefaults:r(1586),crossTraceDefaults:r(33046),calc:r(78803),scales:n.scales,defaultScale:n.defaultScale,getScale:n.get,isValidScale:n.isValid,hasColorscale:a.hasColorscale,extractOpts:a.extractOpts,extractScale:a.extractScale,flipScale:a.flipScale,makeColorScaleFunc:a.makeColorScaleFunc,makeColorScaleFuncFromTrace:a.makeColorScaleFuncFromTrace}},72673:function(e,t,r){"use strict";var n=r(1426).extendFlat;var a=r(50693);var i=r(63282).scales;var o="Note that `autocolorscale` must be true for this attribute to work.";e.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:i.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:i.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:i.RdBu,editType:"calc"}},coloraxis:n({_isSubplotObj:true,editType:"calc"},a("",{colorAttr:"corresponding trace color array(s)",noColorAxis:true,showScaleDflt:true}))}},30959:function(e,t,r){"use strict";var n=r(71828);var a=r(44467);var i=r(72673);var o=r(1586);e.exports=function e(t,r){function s(e,a){return n.coerce(t,r,i,e,a)}s("colorscale.sequential");s("colorscale.sequentialminus");s("colorscale.diverging");var l=r._colorAxes;var u,f;function c(e,t){return n.coerce(u,f,i.coloraxis,e,t)}for(var v in l){var h=l[v];if(h[0]){u=t[v]||{};f=a.newContainer(r,v,"coloraxis");f._name=v;o(u,f,r,c,{prefix:"",cLetter:"c"})}else{for(var p=0;p<h[2].length;p++){h[2][p]()}delete r._colorAxes[v]}}}},63282:function(e,t,r){"use strict";var n=r(84267);var a={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]};var i=a.RdBu;function o(e,t){if(!t)t=i;if(!e)return t;function r(){try{e=a[e]||JSON.parse(e)}catch(r){e=t}}if(typeof e==="string"){r();if(typeof e==="string")r()}if(!s(e))return t;return e}function s(e){var t=0;if(!Array.isArray(e)||e.length<2)return false;if(!e[0]||!e[e.length-1])return false;if(+e[0][0]!==0||+e[e.length-1][0]!==1)return false;for(var r=0;r<e.length;r++){var a=e[r];if(a.length!==2||+a[0]<t||!n(a[1]).isValid()){return false}t=+a[0]}return true}function l(e){if(a[e]!==undefined)return true;else return s(e)}e.exports={scales:a,defaultScale:i,get:o,isValid:l}},92807:function(e){"use strict";e.exports=function e(t,r,n,a,i){var o=(t-n)/(a-n);var s=o+r/(a-n);var l=(o+s)/2;if(i==="left"||i==="bottom")return o;if(i==="center"||i==="middle")return l;if(i==="right"||i==="top")return s;if(o<2/3-l)return o;if(s>4/3-l)return s;return l}},70461:function(e,t,r){"use strict";var n=r(71828);var a=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];e.exports=function e(t,r,i,o){if(i==="left")t=0;else if(i==="center")t=1;else if(i==="right")t=2;else t=n.constrain(Math.floor(t*3),0,2);if(o==="bottom")r=0;else if(o==="middle")r=1;else if(o==="top")r=2;else r=n.constrain(Math.floor(r*3),0,2);return a[r][t]}},64505:function(e,t){"use strict";t.selectMode=function(e){return e==="lasso"||e==="select"};t.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"};t.openMode=function(e){return e==="drawline"||e==="drawopenpath"};t.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"};t.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"};t.selectingOrDrawing=function(e){return t.freeMode(e)||t.rectMode(e)}},28569:function(e,t,r){"use strict";var n=r(48956);var a=r(57035);var i=r(38520);var o=r(71828).removeElement;var s=r(85555);var l=e.exports={};l.align=r(92807);l.getCursor=r(70461);var u=r(26041);l.unhover=u.wrapped;l.unhoverRaw=u.raw;l.init=function e(t){var r=t.gd;var n=1;var u=r._context.doubleClickDelay;var v=t.element;var h,p,d,g,y,m,x,b;if(!r._mouseDownTime)r._mouseDownTime=0;v.style.pointerEvents="all";v.onmousedown=T;if(!i){v.ontouchstart=T}else{if(v._ontouchstart){v.removeEventListener("touchstart",v._ontouchstart)}v._ontouchstart=T;v.addEventListener("touchstart",T,{passive:false})}function _(e,t,r){if(Math.abs(e)<r)e=0;if(Math.abs(t)<r)t=0;return[e,t]}var w=t.clampFn||_;function T(e){r._dragged=false;r._dragging=true;var i=c(e);h=i[0];p=i[1];x=e.target;m=e;b=e.buttons===2||e.ctrlKey;if(typeof e.clientX==="undefined"&&typeof e.clientY==="undefined"){e.clientX=h;e.clientY=p}d=(new Date).getTime();if(d-r._mouseDownTime<u){n+=1}else{n=1;r._mouseDownTime=d}if(t.prepFn)t.prepFn(e,h,p);if(a&&!b){y=f();y.style.cursor=window.getComputedStyle(v).cursor}else if(!a){y=document;g=window.getComputedStyle(document.documentElement).cursor;document.documentElement.style.cursor=window.getComputedStyle(v).cursor}document.addEventListener("mouseup",A);document.addEventListener("touchend",A);if(t.dragmode!==false){e.preventDefault();document.addEventListener("mousemove",k);document.addEventListener("touchmove",k,{passive:false})}return}function k(e){e.preventDefault();var n=c(e);var a=t.minDrag||s.MINDRAG;var i=w(n[0]-h,n[1]-p,a);var o=i[0];var u=i[1];if(o||u){r._dragged=true;l.unhover(r,e)}if(r._dragged&&t.moveFn&&!b){r._dragdata={element:v,dx:o,dy:u};t.moveFn(o,u)}return}function A(e){delete r._dragdata;if(t.dragmode!==false){e.preventDefault();document.removeEventListener("mousemove",k);document.removeEventListener("touchmove",k)}document.removeEventListener("mouseup",A);document.removeEventListener("touchend",A);if(a){o(y)}else if(g){y.documentElement.style.cursor=g;g=null}if(!r._dragging){r._dragged=false;return}r._dragging=false;if((new Date).getTime()-r._mouseDownTime>u){n=Math.max(n-1,1)}if(r._dragged){if(t.doneFn)t.doneFn()}else{if(t.clickFn)t.clickFn(n,m);if(!b){var i;try{i=new MouseEvent("click",e)}catch(l){var s=c(e);i=document.createEvent("MouseEvents");i.initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,s[0],s[1],e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}x.dispatchEvent(i)}}r._dragging=false;r._dragged=false;return}};function f(){var e=document.createElement("div");e.className="dragcover";var t=e.style;t.position="fixed";t.left=0;t.right=0;t.top=0;t.bottom=0;t.zIndex=999999999;t.background="none";document.body.appendChild(e);return e}l.coverSlip=f;function c(e){return n(e.changedTouches?e.changedTouches[0]:e,document.body)}},26041:function(e,t,r){"use strict";var n=r(11086);var a=r(79990);var i=r(24401).getGraphDiv;var o=r(26675);var s=e.exports={};s.wrapped=function(e,t,r){e=i(e);if(e._fullLayout){a.clear(e._fullLayout._uid+o.HOVERID)}s.raw(e,t,r)};s.raw=function e(t,r){var a=t._fullLayout;var i=t._hoverdata;if(!r)r={};if(r.target&&!t._dragged&&n.triggerHandler(t,"plotly_beforehover",r)===false){return}a._hoverlayer.selectAll("g").remove();a._hoverlayer.selectAll("line").remove();a._hoverlayer.selectAll("circle").remove();t._hoverdata=undefined;if(r.target&&i){t.emit("plotly_unhover",{event:r,points:i})}}},79952:function(e,t){"use strict";t.P={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"};t.u={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:true,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:true,editType:"style"},fgcolor:{valType:"color",arrayOk:true,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:true,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:true,editType:"style"},editType:"style"}},91424:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);var i=a.numberFormat;var o=r(92770);var s=r(84267);var l=r(73972);var u=r(7901);var f=r(21081);var c=a.strTranslate;var v=r(63893);var h=r(77922);var p=r(18783);var d=p.LINE_SPACING;var g=r(37822).DESELECTDIM;var y=r(34098);var m=r(39984);var x=r(23469).appendArrayPointValue;var b=e.exports={};b.font=function(e,t,r,n){if(a.isPlainObject(t)){n=t.color;r=t.size;t=t.family}if(t)e.style("font-family",t);if(r+1)e.style("font-size",r+"px");if(n)e.call(u.fill,n)};b.setPosition=function(e,t,r){e.attr("x",t).attr("y",r)};b.setSize=function(e,t,r){e.attr("width",t).attr("height",r)};b.setRect=function(e,t,r,n,a){e.call(b.setPosition,t,r).call(b.setSize,n,a)};b.translatePoint=function(e,t,r,n){var a=r.c2p(e.x);var i=n.c2p(e.y);if(o(a)&&o(i)&&t.node()){if(t.node().nodeName==="text"){t.attr("x",a).attr("y",i)}else{t.attr("transform",c(a,i))}}else{return false}return true};b.translatePoints=function(e,t,r){e.each((function(e){var a=n.select(this);b.translatePoint(e,a,t,r)}))};b.hideOutsideRangePoint=function(e,t,r,n,a,i){t.attr("display",r.isPtWithinRange(e,a)&&n.isPtWithinRange(e,i)?null:"none")};b.hideOutsideRangePoints=function(e,t){if(!t._hasClipOnAxisFalse)return;var r=t.xaxis;var a=t.yaxis;e.each((function(t){var i=t[0].trace;var o=i.xcalendar;var s=i.ycalendar;var u=l.traceIs(i,"bar-like")?".bartext":".point,.textpoint";e.selectAll(u).each((function(e){b.hideOutsideRangePoint(e,n.select(this),r,a,o,s)}))}))};b.crispRound=function(e,t,r){if(!t||!o(t))return r||0;if(e._context.staticPlot)return t;if(t<1)return 1;return Math.round(t)};b.singleLineStyle=function(e,t,r,n,a){t.style("fill","none");var i=(((e||[])[0]||{}).trace||{}).line||{};var o=r||i.width||0;var s=a||i.dash||"";u.stroke(t,n||i.color);b.dashLine(t,s,o)};b.lineGroupStyle=function(e,t,r,a){e.style("fill","none").each((function(e){var i=(((e||[])[0]||{}).trace||{}).line||{};var o=t||i.width||0;var s=a||i.dash||"";n.select(this).call(u.stroke,r||i.color).call(b.dashLine,s,o)}))};b.dashLine=function(e,t,r){r=+r||0;t=b.dashStyle(t,r);e.style({"stroke-dasharray":t,"stroke-width":r+"px"})};b.dashStyle=function(e,t){t=+t||1;var r=Math.max(t,3);if(e==="solid")e="";else if(e==="dot")e=r+"px,"+r+"px";else if(e==="dash")e=3*r+"px,"+3*r+"px";else if(e==="longdash")e=5*r+"px,"+5*r+"px";else if(e==="dashdot"){e=3*r+"px,"+r+"px,"+r+"px,"+r+"px"}else if(e==="longdashdot"){e=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"}return e};function _(e,t,r){var n=t.fillpattern;var a=n&&b.getPatternAttr(n.shape,0,"");if(a){var i=b.getPatternAttr(n.bgcolor,0,null);var o=b.getPatternAttr(n.fgcolor,0,null);var s=n.fgopacity;var l=b.getPatternAttr(n.size,0,8);var f=b.getPatternAttr(n.solidity,0,.3);var c=t.uid;b.pattern(e,"point",r,c,a,l,f,undefined,n.fillmode,i,o,s)}else if(t.fillcolor){e.call(u.fill,t.fillcolor)}}b.singleFillStyle=function(e,t){var r=n.select(e.node());var a=r.data();var i=((a[0]||[])[0]||{}).trace||{};_(e,i,t)};b.fillGroupStyle=function(e,t){e.style("stroke-width",0).each((function(e){var r=n.select(this);if(e[0].trace){_(r,e[0].trace,t)}}))};var w=r(90998);b.symbolNames=[];b.symbolFuncs=[];b.symbolBackOffs=[];b.symbolNeedLines={};b.symbolNoDot={};b.symbolNoFill={};b.symbolList=[];Object.keys(w).forEach((function(e){var t=w[e];var r=t.n;b.symbolList.push(r,String(r),e,r+100,String(r+100),e+"-open");b.symbolNames[r]=e;b.symbolFuncs[r]=t.f;b.symbolBackOffs[r]=t.backoff||0;if(t.needLine){b.symbolNeedLines[r]=true}if(t.noDot){b.symbolNoDot[r]=true}else{b.symbolList.push(r+200,String(r+200),e+"-dot",r+300,String(r+300),e+"-open-dot")}if(t.noFill){b.symbolNoFill[r]=true}}));var T=b.symbolNames.length;var k="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";b.symbolNumber=function(e){if(o(e)){e=+e}else if(typeof e==="string"){var t=0;if(e.indexOf("-open")>0){t=100;e=e.replace("-open","")}if(e.indexOf("-dot")>0){t+=200;e=e.replace("-dot","")}e=b.symbolNames.indexOf(e);if(e>=0){e+=t}}return e%100>=T||e>=400?0:Math.floor(Math.max(e,0))};function A(e,t,r,n){var a=e%100;return b.symbolFuncs[a](t,r,n)+(e>=200?k:"")}var M={x1:1,x2:0,y1:0,y2:0};var S={x1:0,x2:0,y1:1,y2:0};var E=i("~f");var L={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:true},horizontal:{node:"linearGradient",attrs:M},horizontalreversed:{node:"linearGradient",attrs:M,reversed:true},vertical:{node:"linearGradient",attrs:S},verticalreversed:{node:"linearGradient",attrs:S,reversed:true}};b.gradient=function(e,t,r,i,o,l){var f=o.length;var c=L[i];var v=new Array(f);for(var h=0;h<f;h++){if(c.reversed){v[f-1-h]=[E((1-o[h][0])*100),o[h][1]]}else{v[h]=[E(o[h][0]*100),o[h][1]]}}var p=t._fullLayout;var d="g"+p._uid+"-"+r;var g=p._defs.select(".gradients").selectAll("#"+d).data([i+v.join(";")],a.identity);g.exit().remove();g.enter().append(c.node).each((function(){var e=n.select(this);if(c.attrs)e.attr(c.attrs);e.attr("id",d);var t=e.selectAll("stop").data(v);t.exit().remove();t.enter().append("stop");t.each((function(e){var t=s(e[1]);n.select(this).attr({offset:e[0]+"%","stop-color":u.tinyRGB(t),"stop-opacity":t.getAlpha()})}))}));e.style(l,Z(d,t)).style(l+"-opacity",null);e.classed("gradient_filled",true)};b.pattern=function(e,t,r,i,o,l,f,c,v,h,p,d){var g=t==="legend";if(c){if(v==="overlay"){h=c;p=u.contrast(h)}else{h=undefined;p=c}}var y=r._fullLayout;var m="p"+y._uid+"-"+i;var x,b;var _=function(e,t,r,n,a){return n+(a-n)*(e-t)/(r-t)};var w,T,k;var A;var M={};var S=s(p);var E=u.tinyRGB(S);var L=S.getAlpha();var C=d*L;switch(o){case"/":x=l*Math.sqrt(2);b=l*Math.sqrt(2);w="M-"+x/4+","+b/4+"l"+x/2+",-"+b/2+"M0,"+b+"L"+x+",0"+"M"+x/4*3+","+b/4*5+"l"+x/2+",-"+b/2;T=f*l;A="path";M={d:w,opacity:C,stroke:E,"stroke-width":T+"px"};break;case"\\":x=l*Math.sqrt(2);b=l*Math.sqrt(2);w="M"+x/4*3+",-"+b/4+"l"+x/2+","+b/2+"M0,0L"+x+","+b+"M-"+x/4+","+b/4*3+"l"+x/2+","+b/2;T=f*l;A="path";M={d:w,opacity:C,stroke:E,"stroke-width":T+"px"};break;case"x":x=l*Math.sqrt(2);b=l*Math.sqrt(2);w="M-"+x/4+","+b/4+"l"+x/2+",-"+b/2+"M0,"+b+"L"+x+",0"+"M"+x/4*3+","+b/4*5+"l"+x/2+",-"+b/2+"M"+x/4*3+",-"+b/4+"l"+x/2+","+b/2+"M0,0L"+x+","+b+"M-"+x/4+","+b/4*3+"l"+x/2+","+b/2;T=l-l*Math.sqrt(1-f);A="path";M={d:w,opacity:C,stroke:E,"stroke-width":T+"px"};break;case"|":x=l;b=l;A="path";w="M"+x/2+",0L"+x/2+","+b;T=f*l;A="path";M={d:w,opacity:C,stroke:E,"stroke-width":T+"px"};break;case"-":x=l;b=l;A="path";w="M0,"+b/2+"L"+x+","+b/2;T=f*l;A="path";M={d:w,opacity:C,stroke:E,"stroke-width":T+"px"};break;case"+":x=l;b=l;A="path";w="M"+x/2+",0L"+x/2+","+b+"M0,"+b/2+"L"+x+","+b/2;T=l-l*Math.sqrt(1-f);A="path";M={d:w,opacity:C,stroke:E,"stroke-width":T+"px"};break;case".":x=l;b=l;if(f<Math.PI/4){k=Math.sqrt(f*l*l/Math.PI)}else{k=_(f,Math.PI/4,1,l/2,l/Math.sqrt(2))}A="circle";M={cx:x/2,cy:b/2,r:k,opacity:C,fill:E};break}var I=[o||"noSh",h||"noBg",p||"noFg",l,f].join(";");var P=y._defs.select(".patterns").selectAll("#"+m).data([I],a.identity);P.exit().remove();P.enter().append("pattern").each((function(){var e=n.select(this);e.attr({id:m,width:x+"px",height:b+"px",patternUnits:"userSpaceOnUse",patternTransform:g?"scale(0.8)":""});if(h){var t=s(h);var r=u.tinyRGB(t);var a=t.getAlpha();var i=e.selectAll("rect").data([0]);i.exit().remove();i.enter().append("rect").attr({width:x+"px",height:b+"px",fill:r,"fill-opacity":a})}var o=e.selectAll(A).data([0]);o.exit().remove();o.enter().append(A).attr(M)}));e.style("fill",Z(m,r)).style("fill-opacity",null);e.classed("pattern_filled",true)};b.initGradients=function(e){var t=e._fullLayout;var r=a.ensureSingle(t._defs,"g","gradients");r.selectAll("linearGradient,radialGradient").remove();n.select(e).selectAll(".gradient_filled").classed("gradient_filled",false)};b.initPatterns=function(e){var t=e._fullLayout;var r=a.ensureSingle(t._defs,"g","patterns");r.selectAll("pattern").remove();n.select(e).selectAll(".pattern_filled").classed("pattern_filled",false)};b.getPatternAttr=function(e,t,r){if(e&&a.isArrayOrTypedArray(e)){return t<e.length?e[t]:r}return e};b.pointStyle=function(e,t,r,a){if(!e.size())return;var i=b.makePointStyleFns(t);e.each((function(e){b.singlePointStyle(e,n.select(this),t,i,r,a)}))};b.singlePointStyle=function(e,t,r,n,i,o){var s=r.marker;var l=s.line;if(o&&o.i>=0&&e.i===undefined)e.i=o.i;t.style("opacity",n.selectedOpacityFn?n.selectedOpacityFn(e):e.mo===undefined?s.opacity:e.mo);if(n.ms2mrc){var f;if(e.ms==="various"||s.size==="various"){f=3}else{f=n.ms2mrc(e.ms)}e.mrc=f;if(n.selectedSizeFn){f=e.mrc=n.selectedSizeFn(e)}var c=b.symbolNumber(e.mx||s.symbol)||0;e.om=c%200>=100;var v=oe(e,r);var h=X(e,r);t.attr("d",A(c,f,v,h))}var p=false;var d,g,y;if(e.so){y=l.outlierwidth;g=l.outliercolor;d=s.outliercolor}else{var m=(l||{}).width;y=(e.mlw+1||m+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0;if("mlc"in e)g=e.mlcc=n.lineScale(e.mlc);else if(a.isArrayOrTypedArray(l.color))g=u.defaultLine;else g=l.color;if(a.isArrayOrTypedArray(s.color)){d=u.defaultLine;p=true}if("mc"in e){d=e.mcc=n.markerScale(e.mc)}else{d=s.color||s.colors||"rgba(0,0,0,0)"}if(n.selectedColorFn){d=n.selectedColorFn(e)}}if(e.om){t.call(u.stroke,d).style({"stroke-width":(y||1)+"px",fill:"none"})}else{t.style("stroke-width",(e.isBlank?0:y)+"px");var x=s.gradient;var _=e.mgt;if(_)p=true;else _=x&&x.type;if(a.isArrayOrTypedArray(_)){_=_[0];if(!L[_])_=0}var w=s.pattern;var T=w&&b.getPatternAttr(w.shape,e.i,"");if(_&&_!=="none"){var k=e.mgc;if(k)p=true;else k=x.color;var M=r.uid;if(p)M+="-"+e.i;b.gradient(t,i,M,_,[[0,k],[1,d]],"fill")}else if(T){var S=false;var E=w.fgcolor;if(!E&&o&&o.color){E=o.color;S=true}var C=b.getPatternAttr(E,e.i,o&&o.color||null);var I=b.getPatternAttr(w.bgcolor,e.i,null);var P=w.fgopacity;var O=b.getPatternAttr(w.size,e.i,8);var D=b.getPatternAttr(w.solidity,e.i,.3);S=S||e.mcc||a.isArrayOrTypedArray(w.shape)||a.isArrayOrTypedArray(w.bgcolor)||a.isArrayOrTypedArray(w.fgcolor)||a.isArrayOrTypedArray(w.size)||a.isArrayOrTypedArray(w.solidity);var z=r.uid;if(S)z+="-"+e.i;b.pattern(t,"point",i,z,T,O,D,e.mcc,w.fillmode,I,C,P)}else{a.isArrayOrTypedArray(d)?u.fill(t,d[e.i]):u.fill(t,d)}if(y){u.stroke(t,g)}}};b.makePointStyleFns=function(e){var t={};var r=e.marker;t.markerScale=b.tryColorscale(r,"");t.lineScale=b.tryColorscale(r,"line");if(l.traceIs(e,"symbols")){t.ms2mrc=y.isBubble(e)?m(e):function(){return(r.size||6)/2}}if(e.selectedpoints){a.extendFlat(t,b.makeSelectedPointStyleFns(e))}return t};b.makeSelectedPointStyleFns=function(e){var t={};var r=e.selected||{};var n=e.unselected||{};var i=e.marker||{};var o=r.marker||{};var s=n.marker||{};var u=i.opacity;var f=o.opacity;var c=s.opacity;var v=f!==undefined;var h=c!==undefined;if(a.isArrayOrTypedArray(u)||v||h){t.selectedOpacityFn=function(e){var t=e.mo===undefined?i.opacity:e.mo;if(e.selected){return v?f:t}else{return h?c:g*t}}}var p=i.color;var d=o.color;var y=s.color;if(d||y){t.selectedColorFn=function(e){var t=e.mcc||p;if(e.selected){return d||t}else{return y||t}}}var m=i.size;var x=o.size;var b=s.size;var _=x!==undefined;var w=b!==undefined;if(l.traceIs(e,"symbols")&&(_||w)){t.selectedSizeFn=function(e){var t=e.mrc||m/2;if(e.selected){return _?x/2:t}else{return w?b/2:t}}}return t};b.makeSelectedTextStyleFns=function(e){var t={};var r=e.selected||{};var n=e.unselected||{};var a=e.textfont||{};var i=r.textfont||{};var o=n.textfont||{};var s=a.color;var l=i.color;var f=o.color;t.selectedTextColorFn=function(e){var t=e.tc||s;if(e.selected){return l||t}else{if(f)return f;else return l?t:u.addOpacity(t,g)}};return t};b.selectedPointStyle=function(e,t){if(!e.size()||!t.selectedpoints)return;var r=b.makeSelectedPointStyleFns(t);var a=t.marker||{};var i=[];if(r.selectedOpacityFn){i.push((function(e,t){e.style("opacity",r.selectedOpacityFn(t))}))}if(r.selectedColorFn){i.push((function(e,t){u.fill(e,r.selectedColorFn(t))}))}if(r.selectedSizeFn){i.push((function(e,n){var i=n.mx||a.symbol||0;var o=r.selectedSizeFn(n);e.attr("d",A(b.symbolNumber(i),o,oe(n,t),X(n,t)));n.mrc2=o}))}if(i.length){e.each((function(e){var t=n.select(this);for(var r=0;r<i.length;r++){i[r](t,e)}}))}};b.tryColorscale=function(e,t){var r=t?a.nestedProperty(e,t).get():e;if(r){var n=r.color;if((r.colorscale||r._colorAx)&&a.isArrayOrTypedArray(n)){return f.makeColorScaleFuncFromTrace(r)}}return a.identity};var C={start:1,end:-1,middle:0,bottom:1,top:-1};function I(e,t,r,a,i){var o=n.select(e.node().parentNode);var s=t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle";var l=t.indexOf("left")!==-1?"end":t.indexOf("right")!==-1?"start":"middle";var u=a?a/.8+1:0;var f=(v.lineCount(e)-1)*d+1;var h=C[l]*u;var p=r*.75+C[s]*u+(C[s]-1)*f*r/2;e.attr("text-anchor",l);if(!i){o.attr("transform",c(h,p))}}function P(e,t){var r=e.ts||t.textfont.size;return o(r)&&r>0?r:0}b.textPointStyle=function(e,t,r){if(!e.size())return;var i;if(t.selectedpoints){var o=b.makeSelectedTextStyleFns(t);i=o.selectedTextColorFn}var s=t.texttemplate;var l=r._fullLayout;e.each((function(e){var o=n.select(this);var u=s?a.extractOption(e,t,"txt","texttemplate"):a.extractOption(e,t,"tx","text");if(!u&&u!==0){o.remove();return}if(s){var f=t._module.formatLabels;var c=f?f(e,t,l):{};var h={};x(h,t,e.i);var p=t._meta||{};u=a.texttemplateString(u,c,l._d3locale,h,e,p)}var d=e.tp||t.textposition;var g=P(e,t);var y=i?i(e):e.tc||t.textfont.color;o.call(b.font,e.tf||t.textfont.family,g,y).text(u).call(v.convertToTspans,r).call(I,d,g,e.mrc)}))};b.selectedTextStyle=function(e,t){if(!e.size()||!t.selectedpoints)return;var r=b.makeSelectedTextStyleFns(t);e.each((function(e){var a=n.select(this);var i=r.selectedTextColorFn(e);var o=e.tp||t.textposition;var s=P(e,t);u.fill(a,i);var f=l.traceIs(t,"bar-like");I(a,o,s,e.mrc2||e.mrc,f)}))};var O=.5;b.smoothopen=function(e,t){if(e.length<3){return"M"+e.join("L")}var r="M"+e[0];var n=[];var a;for(a=1;a<e.length-1;a++){n.push(N(e[a-1],e[a],e[a+1],t))}r+="Q"+n[0][0]+" "+e[1];for(a=2;a<e.length-1;a++){r+="C"+n[a-2][1]+" "+n[a-1][0]+" "+e[a]}r+="Q"+n[e.length-3][1]+" "+e[e.length-1];return r};b.smoothclosed=function(e,t){if(e.length<3){return"M"+e.join("L")+"Z"}var r="M"+e[0];var n=e.length-1;var a=[N(e[n],e[0],e[1],t)];var i;for(i=1;i<n;i++){a.push(N(e[i-1],e[i],e[i+1],t))}a.push(N(e[n-1],e[n],e[0],t));for(i=1;i<=n;i++){r+="C"+a[i-1][1]+" "+a[i][0]+" "+e[i]}r+="C"+a[n][1]+" "+a[0][0]+" "+e[0]+"Z";return r};var D,z;function R(e,t,r){if(r)e=V(e);return t?B(e[1]):F(e[0])}function F(e){var t=n.round(e,2);D=t;return t}function B(e){var t=n.round(e,2);z=t;return t}function N(e,t,r,n){var a=e[0]-t[0];var i=e[1]-t[1];var o=r[0]-t[0];var s=r[1]-t[1];var l=Math.pow(a*a+i*i,O/2);var u=Math.pow(o*o+s*s,O/2);var f=(u*u*a-l*l*o)*n;var c=(u*u*i-l*l*s)*n;var v=3*u*(l+u);var h=3*l*(l+u);return[[F(t[0]+(v&&f/v)),B(t[1]+(v&&c/v))],[F(t[0]-(h&&f/h)),B(t[1]-(h&&c/h))]]}var j={hv:function(e,t,r){return"H"+F(t[0])+"V"+R(t,1,r)},vh:function(e,t,r){return"V"+B(t[1])+"H"+R(t,0,r)},hvh:function(e,t,r){return"H"+F((e[0]+t[0])/2)+"V"+B(t[1])+"H"+R(t,0,r)},vhv:function(e,t,r){return"V"+B((e[1]+t[1])/2)+"H"+F(t[0])+"V"+R(t,1,r)}};var U=function(e,t,r){return"L"+R(t,0,r)+","+R(t,1,r)};b.steps=function(e){var t=j[e]||U;return function(e){var r="M"+F(e[0][0])+","+B(e[0][1]);var n=e.length;for(var a=1;a<n;a++){r+=t(e[a-1],e[a],a===n-1)}return r}};function V(e,t){var r=e.backoff;var n=e.trace;var i=e.d;var o=e.i;if(r&&n&&n.marker&&n.marker.angle%360===0&&n.line&&n.line.shape!=="spline"){var s=a.isArrayOrTypedArray(r);var l=e;var u=t?t[0]:D||0;var f=t?t[1]:z||0;var c=l[0];var v=l[1];var h=c-u;var p=v-f;var d=Math.atan2(p,h);var g=s?r[o]:r;if(g==="auto"){var y=l.i;if(n.type==="scatter")y--;var m=l.marker;var x=m.symbol;if(a.isArrayOrTypedArray(x))x=x[y];var _=m.size;if(a.isArrayOrTypedArray(_))_=_[y];g=m?b.symbolBackOffs[b.symbolNumber(x)]*_:0;g+=b.getMarkerStandoff(i[y],n)||0}var w=c-g*Math.cos(d);var T=v-g*Math.sin(d);if((w<=c&&w>=u||w>=c&&w<=u)&&(T<=v&&T>=f||T>=v&&T<=f)){e=[w,T]}}return e}b.applyBackoff=V;b.makeTester=function(){var e=a.ensureSingleById(n.select("body"),"svg","js-plotly-tester",(function(e){e.attr(h.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}));var t=a.ensureSingle(e,"path","js-reference-point",(function(e){e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})}));b.tester=e;b.testref=t};b.savedBBoxes={};var H=0;var q=1e4;b.bBox=function(e,t,r){if(!r)r=G(e);var i;if(r){i=b.savedBBoxes[r];if(i)return a.extendFlat({},i)}else if(e.childNodes.length===1){var o=e.childNodes[0];r=G(o);if(r){var s=+o.getAttribute("x")||0;var l=+o.getAttribute("y")||0;var u=o.getAttribute("transform");if(!u){var f=b.bBox(o,false,r);if(s){f.left+=s;f.right+=s}if(l){f.top+=l;f.bottom+=l}return f}r+="~"+s+"~"+l+"~"+u;i=b.savedBBoxes[r];if(i)return a.extendFlat({},i)}}var c,h;if(t){c=e}else{h=b.tester.node();c=e.cloneNode(true);h.appendChild(c)}n.select(c).attr("transform",null).call(v.positionText,0,0);var p=c.getBoundingClientRect();var d=b.testref.node().getBoundingClientRect();if(!t)h.removeChild(c);var g={height:p.height,width:p.width,left:p.left-d.left,top:p.top-d.top,right:p.right-d.left,bottom:p.bottom-d.top};if(H>=q){b.savedBBoxes={};H=0}if(r)b.savedBBoxes[r]=g;H++;return a.extendFlat({},g)};function G(e){var t=e.getAttribute("data-unformatted");if(t===null)return;return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}b.setClipUrl=function(e,t,r){e.attr("clip-path",Z(t,r))};function Z(e,t){if(!e)return null;var r=t._context;var n=r._exportedPlot?"":r._baseUrl||"";return n?"url('"+n+"#"+e+"')":"url(#"+e+")"}b.getTranslate=function(e){var t=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/;var r=e.attr?"attr":"getAttribute";var n=e[r]("transform")||"";var a=n.replace(t,(function(e,t,r){return[t,r].join(" ")})).split(" ");return{x:+a[0]||0,y:+a[1]||0}};b.setTranslate=function(e,t,r){var n=/(\btranslate\(.*?\);?)/;var a=e.attr?"attr":"getAttribute";var i=e.attr?"attr":"setAttribute";var o=e[a]("transform")||"";t=t||0;r=r||0;o=o.replace(n,"").trim();o+=c(t,r);o=o.trim();e[i]("transform",o);return o};b.getScale=function(e){var t=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/;var r=e.attr?"attr":"getAttribute";var n=e[r]("transform")||"";var a=n.replace(t,(function(e,t,r){return[t,r].join(" ")})).split(" ");return{x:+a[0]||1,y:+a[1]||1}};b.setScale=function(e,t,r){var n=/(\bscale\(.*?\);?)/;var a=e.attr?"attr":"getAttribute";var i=e.attr?"attr":"setAttribute";var o=e[a]("transform")||"";t=t||1;r=r||1;o=o.replace(n,"").trim();o+="scale("+t+","+r+")";o=o.trim();e[i]("transform",o);return o};var Y=/\s*sc.*/;b.setPointGroupScale=function(e,t,r){t=t||1;r=r||1;if(!e)return;var n=t===1&&r===1?"":"scale("+t+","+r+")";e.each((function(){var e=(this.getAttribute("transform")||"").replace(Y,"");e+=n;e=e.trim();this.setAttribute("transform",e)}))};var W=/translate\([^)]*\)\s*$/;b.setTextPointsScale=function(e,t,r){if(!e)return;e.each((function(){var e;var a=n.select(this);var i=a.select("text");if(!i.node())return;var o=parseFloat(i.attr("x")||0);var s=parseFloat(i.attr("y")||0);var l=(a.attr("transform")||"").match(W);if(t===1&&r===1){e=[]}else{e=[c(o,s),"scale("+t+","+r+")",c(-o,-s)]}if(l){e.push(l)}a.attr("transform",e.join(""))}))};function X(e,t){var r;if(e)r=e.mf;if(r===undefined){r=t.marker?t.marker.standoff||0:0}if(!t._geo&&!t._xA){return-r}return r}b.getMarkerStandoff=X;var J=Math.atan2;var K=Math.cos;var $=Math.sin;function Q(e,t){var r=t[0];var n=t[1];return[r*K(e)-n*$(e),r*$(e)+n*K(e)]}var ee;var te;var re;var ne;var ae;var ie;function oe(e,t){var r=e.ma;if(r===undefined){r=t.marker.angle||0}var n,a;var i=t.marker.angleref;if(i==="previous"||i==="north"){if(t._geo){var s=t._geo.project(e.lonlat);n=s[0];a=s[1]}else{var l=t._xA;var u=t._yA;if(l&&u){n=l.c2p(e.x);a=u.c2p(e.y)}else{return 90}}if(t._geo){var f=e.lonlat[0];var c=e.lonlat[1];var v=t._geo.project([f,c+1e-5]);var h=t._geo.project([f+1e-5,c]);var p=J(h[1]-a,h[0]-n);var d=J(v[1]-a,v[0]-n);var g;if(i==="north"){g=r/180*Math.PI}else if(i==="previous"){var y=f/180*Math.PI;var m=c/180*Math.PI;var x=ee/180*Math.PI;var b=te/180*Math.PI;var _=x-y;var w=K(b)*$(_);var T=$(b)*K(m)-K(b)*$(m)*K(_);g=-J(w,T)-Math.PI;ee=f;te=c}var k=Q(p,[K(g),0]);var A=Q(d,[$(g),0]);r=J(k[1]+A[1],k[0]+A[0])/Math.PI*180;if(i==="previous"&&!(ie===t.uid&&e.i===ae+1)){r=null}}if(i==="previous"&&!t._geo){if(ie===t.uid&&e.i===ae+1&&o(n)&&o(a)){var M=n-re;var S=a-ne;var E=t.line?t.line.shape||"":"";var L=E.slice(E.length-1);if(L==="h")S=0;if(L==="v")M=0;r+=J(S,M)/Math.PI*180+90}else{r=null}}}re=n;ne=a;ae=e.i;ie=t.uid;return r}b.getMarkerAngle=oe},90998:function(e,t,r){"use strict";var n=r(95616);var a=r(39898).round;var i="M0,0Z";var o=Math.sqrt(2);var s=Math.sqrt(3);var l=Math.PI;var u=Math.cos;var f=Math.sin;e.exports={circle:{n:0,f:function(e,t,r){if(c(t))return i;var n=a(e,2);var o="M"+n+",0A"+n+","+n+" 0 1,1 0,-"+n+"A"+n+","+n+" 0 0,1 "+n+",0Z";return r?g(t,r,o):o}},square:{n:1,f:function(e,t,r){if(c(t))return i;var n=a(e,2);return g(t,r,"M"+n+","+n+"H-"+n+"V-"+n+"H"+n+"Z")}},diamond:{n:2,f:function(e,t,r){if(c(t))return i;var n=a(e*1.3,2);return g(t,r,"M"+n+",0L0,"+n+"L-"+n+",0L0,-"+n+"Z")}},cross:{n:3,f:function(e,t,r){if(c(t))return i;var n=a(e*.4,2);var o=a(e*1.2,2);return g(t,r,"M"+o+","+n+"H"+n+"V"+o+"H-"+n+"V"+n+"H-"+o+"V-"+n+"H-"+n+"V-"+o+"H"+n+"V-"+n+"H"+o+"Z")}},x:{n:4,f:function(e,t,r){if(c(t))return i;var n=a(e*.8/o,2);var s="l"+n+","+n;var l="l"+n+",-"+n;var u="l-"+n+",-"+n;var f="l-"+n+","+n;return g(t,r,"M0,"+n+s+l+u+l+u+f+u+f+s+f+s+"Z")}},"triangle-up":{n:5,f:function(e,t,r){if(c(t))return i;var n=a(e*2/s,2);var o=a(e/2,2);var l=a(e,2);return g(t,r,"M-"+n+","+o+"H"+n+"L0,-"+l+"Z")}},"triangle-down":{n:6,f:function(e,t,r){if(c(t))return i;var n=a(e*2/s,2);var o=a(e/2,2);var l=a(e,2);return g(t,r,"M-"+n+",-"+o+"H"+n+"L0,"+l+"Z")}},"triangle-left":{n:7,f:function(e,t,r){if(c(t))return i;var n=a(e*2/s,2);var o=a(e/2,2);var l=a(e,2);return g(t,r,"M"+o+",-"+n+"V"+n+"L-"+l+",0Z")}},"triangle-right":{n:8,f:function(e,t,r){if(c(t))return i;var n=a(e*2/s,2);var o=a(e/2,2);var l=a(e,2);return g(t,r,"M-"+o+",-"+n+"V"+n+"L"+l+",0Z")}},"triangle-ne":{n:9,f:function(e,t,r){if(c(t))return i;var n=a(e*.6,2);var o=a(e*1.2,2);return g(t,r,"M-"+o+",-"+n+"H"+n+"V"+o+"Z")}},"triangle-se":{n:10,f:function(e,t,r){if(c(t))return i;var n=a(e*.6,2);var o=a(e*1.2,2);return g(t,r,"M"+n+",-"+o+"V"+n+"H-"+o+"Z")}},"triangle-sw":{n:11,f:function(e,t,r){if(c(t))return i;var n=a(e*.6,2);var o=a(e*1.2,2);return g(t,r,"M"+o+","+n+"H-"+n+"V-"+o+"Z")}},"triangle-nw":{n:12,f:function(e,t,r){if(c(t))return i;var n=a(e*.6,2);var o=a(e*1.2,2);return g(t,r,"M-"+n+","+o+"V-"+n+"H"+o+"Z")}},pentagon:{n:13,f:function(e,t,r){if(c(t))return i;var n=a(e*.951,2);var o=a(e*.588,2);var s=a(-e,2);var l=a(e*-.309,2);var u=a(e*.809,2);return g(t,r,"M"+n+","+l+"L"+o+","+u+"H-"+o+"L-"+n+","+l+"L0,"+s+"Z")}},hexagon:{n:14,f:function(e,t,r){if(c(t))return i;var n=a(e,2);var o=a(e/2,2);var l=a(e*s/2,2);return g(t,r,"M"+l+",-"+o+"V"+o+"L0,"+n+"L-"+l+","+o+"V-"+o+"L0,-"+n+"Z")}},hexagon2:{n:15,f:function(e,t,r){if(c(t))return i;var n=a(e,2);var o=a(e/2,2);var l=a(e*s/2,2);return g(t,r,"M-"+o+","+l+"H"+o+"L"+n+",0L"+o+",-"+l+"H-"+o+"L-"+n+",0Z")}},octagon:{n:16,f:function(e,t,r){if(c(t))return i;var n=a(e*.924,2);var o=a(e*.383,2);return g(t,r,"M-"+o+",-"+n+"H"+o+"L"+n+",-"+o+"V"+o+"L"+o+","+n+"H-"+o+"L-"+n+","+o+"V-"+o+"Z")}},star:{n:17,f:function(e,t,r){if(c(t))return i;var n=e*1.4;var o=a(n*.225,2);var s=a(n*.951,2);var l=a(n*.363,2);var u=a(n*.588,2);var f=a(-n,2);var v=a(n*-.309,2);var h=a(n*.118,2);var p=a(n*.809,2);var d=a(n*.382,2);return g(t,r,"M"+o+","+v+"H"+s+"L"+l+","+h+"L"+u+","+p+"L0,"+d+"L-"+u+","+p+"L-"+l+","+h+"L-"+s+","+v+"H-"+o+"L0,"+f+"Z")}},hexagram:{n:18,f:function(e,t,r){if(c(t))return i;var n=a(e*.66,2);var o=a(e*.38,2);var s=a(e*.76,2);return g(t,r,"M-"+s+",0l-"+o+",-"+n+"h"+s+"l"+o+",-"+n+"l"+o+","+n+"h"+s+"l-"+o+","+n+"l"+o+","+n+"h-"+s+"l-"+o+","+n+"l-"+o+",-"+n+"h-"+s+"Z")}},"star-triangle-up":{n:19,f:function(e,t,r){if(c(t))return i;var n=a(e*s*.8,2);var o=a(e*.8,2);var l=a(e*1.6,2);var u=a(e*4,2);var f="A "+u+","+u+" 0 0 1 ";return g(t,r,"M-"+n+","+o+f+n+","+o+f+"0,-"+l+f+"-"+n+","+o+"Z")}},"star-triangle-down":{n:20,f:function(e,t,r){if(c(t))return i;var n=a(e*s*.8,2);var o=a(e*.8,2);var l=a(e*1.6,2);var u=a(e*4,2);var f="A "+u+","+u+" 0 0 1 ";return g(t,r,"M"+n+",-"+o+f+"-"+n+",-"+o+f+"0,"+l+f+n+",-"+o+"Z")}},"star-square":{n:21,f:function(e,t,r){if(c(t))return i;var n=a(e*1.1,2);var o=a(e*2,2);var s="A "+o+","+o+" 0 0 1 ";return g(t,r,"M-"+n+",-"+n+s+"-"+n+","+n+s+n+","+n+s+n+",-"+n+s+"-"+n+",-"+n+"Z")}},"star-diamond":{n:22,f:function(e,t,r){if(c(t))return i;var n=a(e*1.4,2);var o=a(e*1.9,2);var s="A "+o+","+o+" 0 0 1 ";return g(t,r,"M-"+n+",0"+s+"0,"+n+s+n+",0"+s+"0,-"+n+s+"-"+n+",0"+"Z")}},"diamond-tall":{n:23,f:function(e,t,r){if(c(t))return i;var n=a(e*.7,2);var o=a(e*1.4,2);return g(t,r,"M0,"+o+"L"+n+",0L0,-"+o+"L-"+n+",0Z")}},"diamond-wide":{n:24,f:function(e,t,r){if(c(t))return i;var n=a(e*1.4,2);var o=a(e*.7,2);return g(t,r,"M0,"+o+"L"+n+",0L0,-"+o+"L-"+n+",0Z")}},hourglass:{n:25,f:function(e,t,r){if(c(t))return i;var n=a(e,2);return g(t,r,"M"+n+","+n+"H-"+n+"L"+n+",-"+n+"H-"+n+"Z")},noDot:true},bowtie:{n:26,f:function(e,t,r){if(c(t))return i;var n=a(e,2);return g(t,r,"M"+n+","+n+"V-"+n+"L-"+n+","+n+"V-"+n+"Z")},noDot:true},"circle-cross":{n:27,f:function(e,t,r){if(c(t))return i;var n=a(e,2);return g(t,r,"M0,"+n+"V-"+n+"M"+n+",0H-"+n+"M"+n+",0A"+n+","+n+" 0 1,1 0,-"+n+"A"+n+","+n+" 0 0,1 "+n+",0Z")},needLine:true,noDot:true},"circle-x":{n:28,f:function(e,t,r){if(c(t))return i;var n=a(e,2);var s=a(e/o,2);return g(t,r,"M"+s+","+s+"L-"+s+",-"+s+"M"+s+",-"+s+"L-"+s+","+s+"M"+n+",0A"+n+","+n+" 0 1,1 0,-"+n+"A"+n+","+n+" 0 0,1 "+n+",0Z")},needLine:true,noDot:true},"square-cross":{n:29,f:function(e,t,r){if(c(t))return i;var n=a(e,2);return g(t,r,"M0,"+n+"V-"+n+"M"+n+",0H-"+n+"M"+n+","+n+"H-"+n+"V-"+n+"H"+n+"Z")},needLine:true,noDot:true},"square-x":{n:30,f:function(e,t,r){if(c(t))return i;var n=a(e,2);return g(t,r,"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+n+","+n+"H-"+n+"V-"+n+"H"+n+"Z")},needLine:true,noDot:true},"diamond-cross":{n:31,f:function(e,t,r){if(c(t))return i;var n=a(e*1.3,2);return g(t,r,"M"+n+",0L0,"+n+"L-"+n+",0L0,-"+n+"Z"+"M0,-"+n+"V"+n+"M-"+n+",0H"+n)},needLine:true,noDot:true},"diamond-x":{n:32,f:function(e,t,r){if(c(t))return i;var n=a(e*1.3,2);var o=a(e*.65,2);return g(t,r,"M"+n+",0L0,"+n+"L-"+n+",0L0,-"+n+"Z"+"M-"+o+",-"+o+"L"+o+","+o+"M-"+o+","+o+"L"+o+",-"+o)},needLine:true,noDot:true},"cross-thin":{n:33,f:function(e,t,r){if(c(t))return i;var n=a(e*1.4,2);return g(t,r,"M0,"+n+"V-"+n+"M"+n+",0H-"+n)},needLine:true,noDot:true,noFill:true},"x-thin":{n:34,f:function(e,t,r){if(c(t))return i;var n=a(e,2);return g(t,r,"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n)},needLine:true,noDot:true,noFill:true},asterisk:{n:35,f:function(e,t,r){if(c(t))return i;var n=a(e*1.2,2);var o=a(e*.85,2);return g(t,r,"M0,"+n+"V-"+n+"M"+n+",0H-"+n+"M"+o+","+o+"L-"+o+",-"+o+"M"+o+",-"+o+"L-"+o+","+o)},needLine:true,noDot:true,noFill:true},hash:{n:36,f:function(e,t,r){if(c(t))return i;var n=a(e/2,2);var o=a(e,2);return g(t,r,"M"+n+","+o+"V-"+o+"M"+(n-o)+",-"+o+"V"+o+"M"+o+","+n+"H-"+o+"M-"+o+","+(n-o)+"H"+o)},needLine:true,noFill:true},"y-up":{n:37,f:function(e,t,r){if(c(t))return i;var n=a(e*1.2,2);var o=a(e*1.6,2);var s=a(e*.8,2);return g(t,r,"M-"+n+","+s+"L0,0M"+n+","+s+"L0,0M0,-"+o+"L0,0")},needLine:true,noDot:true,noFill:true},"y-down":{n:38,f:function(e,t,r){if(c(t))return i;var n=a(e*1.2,2);var o=a(e*1.6,2);var s=a(e*.8,2);return g(t,r,"M-"+n+",-"+s+"L0,0M"+n+",-"+s+"L0,0M0,"+o+"L0,0")},needLine:true,noDot:true,noFill:true},"y-left":{n:39,f:function(e,t,r){if(c(t))return i;var n=a(e*1.2,2);var o=a(e*1.6,2);var s=a(e*.8,2);return g(t,r,"M"+s+","+n+"L0,0M"+s+",-"+n+"L0,0M-"+o+",0L0,0")},needLine:true,noDot:true,noFill:true},"y-right":{n:40,f:function(e,t,r){if(c(t))return i;var n=a(e*1.2,2);var o=a(e*1.6,2);var s=a(e*.8,2);return g(t,r,"M-"+s+","+n+"L0,0M-"+s+",-"+n+"L0,0M"+o+",0L0,0")},needLine:true,noDot:true,noFill:true},"line-ew":{n:41,f:function(e,t,r){if(c(t))return i;var n=a(e*1.4,2);return g(t,r,"M"+n+",0H-"+n)},needLine:true,noDot:true,noFill:true},"line-ns":{n:42,f:function(e,t,r){if(c(t))return i;var n=a(e*1.4,2);return g(t,r,"M0,"+n+"V-"+n)},needLine:true,noDot:true,noFill:true},"line-ne":{n:43,f:function(e,t,r){if(c(t))return i;var n=a(e,2);return g(t,r,"M"+n+",-"+n+"L-"+n+","+n)},needLine:true,noDot:true,noFill:true},"line-nw":{n:44,f:function(e,t,r){if(c(t))return i;var n=a(e,2);return g(t,r,"M"+n+","+n+"L-"+n+",-"+n)},needLine:true,noDot:true,noFill:true},"arrow-up":{n:45,f:function(e,t,r){if(c(t))return i;var n=a(e,2);var o=a(e*2,2);return g(t,r,"M0,0L-"+n+","+o+"H"+n+"Z")},backoff:1,noDot:true},"arrow-down":{n:46,f:function(e,t,r){if(c(t))return i;var n=a(e,2);var o=a(e*2,2);return g(t,r,"M0,0L-"+n+",-"+o+"H"+n+"Z")},noDot:true},"arrow-left":{n:47,f:function(e,t,r){if(c(t))return i;var n=a(e*2,2);var o=a(e,2);return g(t,r,"M0,0L"+n+",-"+o+"V"+o+"Z")},noDot:true},"arrow-right":{n:48,f:function(e,t,r){if(c(t))return i;var n=a(e*2,2);var o=a(e,2);return g(t,r,"M0,0L-"+n+",-"+o+"V"+o+"Z")},noDot:true},"arrow-bar-up":{n:49,f:function(e,t,r){if(c(t))return i;var n=a(e,2);var o=a(e*2,2);return g(t,r,"M-"+n+",0H"+n+"M0,0L-"+n+","+o+"H"+n+"Z")},backoff:1,needLine:true,noDot:true},"arrow-bar-down":{n:50,f:function(e,t,r){if(c(t))return i;var n=a(e,2);var o=a(e*2,2);return g(t,r,"M-"+n+",0H"+n+"M0,0L-"+n+",-"+o+"H"+n+"Z")},needLine:true,noDot:true},"arrow-bar-left":{n:51,f:function(e,t,r){if(c(t))return i;var n=a(e*2,2);var o=a(e,2);return g(t,r,"M0,-"+o+"V"+o+"M0,0L"+n+",-"+o+"V"+o+"Z")},needLine:true,noDot:true},"arrow-bar-right":{n:52,f:function(e,t,r){if(c(t))return i;var n=a(e*2,2);var o=a(e,2);return g(t,r,"M0,-"+o+"V"+o+"M0,0L-"+n+",-"+o+"V"+o+"Z")},needLine:true,noDot:true},arrow:{n:53,f:function(e,t,r){if(c(t))return i;var n=l/2.5;var a=2*e*u(n);var o=2*e*f(n);return g(t,r,"M0,0"+"L"+-a+","+o+"L"+a+","+o+"Z")},backoff:.9,noDot:true},"arrow-wide":{n:54,f:function(e,t,r){if(c(t))return i;var n=l/4;var a=2*e*u(n);var o=2*e*f(n);return g(t,r,"M0,0"+"L"+-a+","+o+"A "+2*e+","+2*e+" 0 0 1 "+a+","+o+"Z")},backoff:.4,noDot:true}};function c(e){return e===null}var v,h;var p,d;function g(e,t,r){if((!e||e%360===0)&&!t)return r;if(p===e&&d===t&&v===r)return h;p=e;d=t;v=r;function a(e,r){var n=u(e);var a=f(e);var i=r[0];var o=r[1]+(t||0);return[i*n-o*a,i*a+o*n]}var i=e/180*l;var o=0;var s=0;var c=n(r);var g="";for(var y=0;y<c.length;y++){var m=c[y];var x=m[0];var b=o;var _=s;if(x==="M"||x==="L"){o=+m[1];s=+m[2]}else if(x==="m"||x==="l"){o+=+m[1];s+=+m[2]}else if(x==="H"){o=+m[1]}else if(x==="h"){o+=+m[1]}else if(x==="V"){s=+m[1]}else if(x==="v"){s+=+m[1]}else if(x==="A"){o=+m[1];s=+m[2];var w=a(i,[+m[6],+m[7]]);m[6]=w[0];m[7]=w[1];m[3]=+m[3]+e}if(x==="H"||x==="V")x="L";if(x==="h"||x==="v")x="l";if(x==="m"||x==="l"){o-=b;s-=_}var T=a(i,[o,s]);if(x==="H"||x==="V")x="L";if(x==="M"||x==="L"||x==="m"||x==="l"){m[1]=T[0];m[2]=T[1]}m[0]=x;g+=m[0]+m.slice(1).join(",")}h=g;return g}},25673:function(e){"use strict";e.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},84532:function(e,t,r){"use strict";var n=r(92770);var a=r(73972);var i=r(89298);var o=r(71828);var s=r(45827);e.exports=function e(t){var r=t.calcdata;for(var n=0;n<r.length;n++){var o=r[n];var s=o[0].trace;if(s.visible===true&&a.traceIs(s,"errorBarsOK")){var u=i.getFromId(t,s.xaxis);var f=i.getFromId(t,s.yaxis);l(o,s,u,"x");l(o,s,f,"y")}}};function l(e,t,r,a){var l=t["error_"+a]||{};var u=l.visible&&["linear","log"].indexOf(r.type)!==-1;var f=[];if(!u)return;var c=s(l);for(var v=0;v<e.length;v++){var h=e[v];var p=h.i;if(p===undefined)p=v;else if(p===null)continue;var d=h[a];if(!n(r.c2l(d)))continue;var g=c(d,p);if(n(g[0])&&n(g[1])){var y=h[a+"s"]=d-g[0];var m=h[a+"h"]=d+g[1];f.push(y,m)}}var x=r._id;var b=t._extremes[x];var _=i.findExtremes(r,f,o.extendFlat({tozero:b.opts.tozero},{padded:true}));b.min=b.min.concat(_.min);b.max=b.max.concat(_.max)}},45827:function(e){"use strict";e.exports=function e(r){var n=r.type;var a=r.symmetric;if(n==="data"){var i=r.array||[];if(a){return function e(t,r){var n=+i[r];return[n,n]}}else{var o=r.arrayminus||[];return function e(t,r){var n=+i[r];var a=+o[r];if(!isNaN(n)||!isNaN(a)){return[a||0,n||0]}return[NaN,NaN]}}}else{var s=t(n,r.value);var l=t(n,r.valueminus);if(a||r.valueminus===undefined){return function e(t){var r=s(t);return[r,r]}}else{return function e(t){return[l(t),s(t)]}}}};function t(e,t){if(e==="percent"){return function(e){return Math.abs(e*t/100)}}if(e==="constant"){return function(){return Math.abs(t)}}if(e==="sqrt"){return function(e){return Math.sqrt(Math.abs(e))}}}},97587:function(e,t,r){"use strict";var n=r(92770);var a=r(73972);var i=r(71828);var o=r(44467);var s=r(25673);e.exports=function(e,t,r,l){var u="error_"+l.axis;var f=o.newContainer(t,u);var c=e[u]||{};function v(e,t){return i.coerce(c,f,s,e,t)}var h=c.array!==undefined||c.value!==undefined||c.type==="sqrt";var p=v("visible",h);if(p===false)return;var d=v("type","array"in c?"data":"percent");var g=true;if(d!=="sqrt"){g=v("symmetric",!((d==="data"?"arrayminus":"valueminus")in c))}if(d==="data"){v("array");v("traceref");if(!g){v("arrayminus");v("tracerefminus")}}else if(d==="percent"||d==="constant"){v("value");if(!g)v("valueminus")}var y="copy_"+l.inherit+"style";if(l.inherit){var m=t["error_"+l.inherit];if((m||{}).visible){v(y,!(c.color||n(c.thickness)||n(c.width)))}}if(!l.inherit||!f[y]){v("color",r);v("thickness");v("width",a.traceIs(t,"gl3d")?0:4)}}},37369:function(e,t,r){"use strict";var n=r(71828);var a=r(30962).overrideAll;var i=r(25673);var o={error_x:n.extendFlat({},i),error_y:n.extendFlat({},i)};delete o.error_x.copy_zstyle;delete o.error_y.copy_zstyle;delete o.error_y.copy_ystyle;var s={error_x:n.extendFlat({},i),error_y:n.extendFlat({},i),error_z:n.extendFlat({},i)};delete s.error_x.copy_ystyle;delete s.error_y.copy_ystyle;delete s.error_z.copy_ystyle;delete s.error_z.copy_zstyle;e.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:o,bar:o,histogram:o,scatter3d:a(s,"calc","nested"),scattergl:a(o,"calc","nested")}},supplyDefaults:r(97587),calc:r(84532),makeComputeError:r(45827),plot:r(19398),style:r(62662),hoverInfo:l};function l(e,t,r){if((t.error_y||{}).visible){r.yerr=e.yh-e.y;if(!t.error_y.symmetric)r.yerrneg=e.y-e.ys}if((t.error_x||{}).visible){r.xerr=e.xh-e.x;if(!t.error_x.symmetric)r.xerrneg=e.x-e.xs}}},19398:function(e,t,r){"use strict";var n=r(39898);var a=r(92770);var i=r(91424);var o=r(34098);e.exports=function e(t,r,l,u){var f;var c=l.xaxis;var v=l.yaxis;var h=u&&u.duration>0;var p=t._context.staticPlot;r.each((function(e){var r=e[0].trace;var d=r.error_x||{};var g=r.error_y||{};var y;if(r.ids){y=function(e){return e.id}}var m=o.hasMarkers(r)&&r.marker.maxdisplayed>0;if(!g.visible&&!d.visible)e=[];var x=n.select(this).selectAll("g.errorbar").data(e,y);x.exit().remove();if(!e.length)return;if(!d.visible)x.selectAll("path.xerror").remove();if(!g.visible)x.selectAll("path.yerror").remove();x.style("opacity",1);var b=x.enter().append("g").classed("errorbar",true);if(h){b.style("opacity",0).transition().duration(u.duration).style("opacity",1)}i.setClipUrl(x,l.layerClipId,t);x.each((function(e){var t=n.select(this);var r=s(e,c,v);if(m&&!e.vis)return;var i;var o=t.select("path.yerror");if(g.visible&&a(r.x)&&a(r.yh)&&a(r.ys)){var l=g.width;i="M"+(r.x-l)+","+r.yh+"h"+2*l+"m-"+l+",0V"+r.ys;if(!r.noYS)i+="m-"+l+",0h"+2*l;f=!o.size();if(f){o=t.append("path").style("vector-effect",p?"none":"non-scaling-stroke").classed("yerror",true)}else if(h){o=o.transition().duration(u.duration).ease(u.easing)}o.attr("d",i)}else o.remove();var y=t.select("path.xerror");if(d.visible&&a(r.y)&&a(r.xh)&&a(r.xs)){var x=(d.copy_ystyle?g:d).width;i="M"+r.xh+","+(r.y-x)+"v"+2*x+"m0,-"+x+"H"+r.xs;if(!r.noXS)i+="m0,-"+x+"v"+2*x;f=!y.size();if(f){y=t.append("path").style("vector-effect",p?"none":"non-scaling-stroke").classed("xerror",true)}else if(h){y=y.transition().duration(u.duration).ease(u.easing)}y.attr("d",i)}else y.remove()}))}))};function s(e,t,r){var n={x:t.c2p(e.x),y:r.c2p(e.y)};if(e.yh!==undefined){n.yh=r.c2p(e.yh);n.ys=r.c2p(e.ys);if(!a(n.ys)){n.noYS=true;n.ys=r.c2p(e.ys,true)}}if(e.xh!==undefined){n.xh=t.c2p(e.xh);n.xs=t.c2p(e.xs);if(!a(n.xs)){n.noXS=true;n.xs=t.c2p(e.xs,true)}}return n}},62662:function(e,t,r){"use strict";var n=r(39898);var a=r(7901);e.exports=function e(t){t.each((function(e){var t=e[0].trace;var r=t.error_y||{};var i=t.error_x||{};var o=n.select(this);o.selectAll("path.yerror").style("stroke-width",r.thickness+"px").call(a.stroke,r.color);if(i.copy_ystyle)i=r;o.selectAll("path.xerror").style("stroke-width",i.thickness+"px").call(a.stroke,i.color)}))}},77914:function(e,t,r){"use strict";var n=r(41940);var a=r(528).hoverlabel;var i=r(1426).extendFlat;e.exports={hoverlabel:{bgcolor:i({},a.bgcolor,{arrayOk:true}),bordercolor:i({},a.bordercolor,{arrayOk:true}),font:n({arrayOk:true,editType:"none"}),align:i({},a.align,{arrayOk:true}),namelength:i({},a.namelength,{arrayOk:true}),editType:"none"}}},30732:function(e,t,r){"use strict";var n=r(71828);var a=r(73972);e.exports=function e(t){var r=t.calcdata;var o=t._fullLayout;function s(e){return function(t){return n.coerceHoverinfo({hoverinfo:t},{_module:e._module},o)}}for(var l=0;l<r.length;l++){var u=r[l];var f=u[0].trace;if(a.traceIs(f,"pie-like"))continue;var c=a.traceIs(f,"2dMap")?i:n.fillArray;c(f.hoverinfo,u,"hi",s(f));if(f.hovertemplate)c(f.hovertemplate,u,"ht");if(!f.hoverlabel)continue;c(f.hoverlabel.bgcolor,u,"hbg");c(f.hoverlabel.bordercolor,u,"hbc");c(f.hoverlabel.font.size,u,"hts");c(f.hoverlabel.font.color,u,"htc");c(f.hoverlabel.font.family,u,"htf");c(f.hoverlabel.namelength,u,"hnl");c(f.hoverlabel.align,u,"hta")}};function i(e,t,r,a){a=a||n.identity;if(Array.isArray(e)){t[0][r]=a(e)}}},75914:function(e,t,r){"use strict";var n=r(73972);var a=r(88335).hover;e.exports=function e(t,r,i){var o=n.getComponentMethod("annotations","onClick")(t,t._hoverdata);if(i!==undefined){a(t,r,i,true)}function s(){t.emit("plotly_click",{points:t._hoverdata,event:r})}if(t._hoverdata&&r&&r.target){if(o&&o.then){o.then(s)}else s();if(r.stopImmediatePropagation)r.stopImmediatePropagation()}}},26675:function(e){"use strict";e.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},54268:function(e,t,r){"use strict";var n=r(71828);var a=r(77914);var i=r(38048);e.exports=function e(t,r,o,s){function l(e,i){return n.coerce(t,r,a,e,i)}var u=n.extendFlat({},s.hoverlabel);if(r.hovertemplate)u.namelength=-1;i(t,r,l,u)}},23469:function(e,t,r){"use strict";var n=r(71828);t.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo};t.isTraceInSubplots=function(e,r){if(e.type==="splom"){var n=e.xaxes||[];var a=e.yaxes||[];for(var i=0;i<n.length;i++){for(var o=0;o<a.length;o++){if(r.indexOf(n[i]+a[o])!==-1){return true}}}return false}return r.indexOf(t.getSubplot(e))!==-1};t.flat=function(e,t){var r=new Array(e.length);for(var n=0;n<e.length;n++){r[n]=t}return r};t.p2c=function(e,t){var r=new Array(e.length);for(var n=0;n<e.length;n++){r[n]=e[n].p2c(t)}return r};t.getDistanceFunction=function(e,r,n,a){if(e==="closest")return a||t.quadrature(r,n);return e.charAt(0)==="x"?r:n};t.getClosest=function(e,t,r){if(r.index!==false){if(r.index>=0&&r.index<e.length){r.distance=0}else r.index=false}else{for(var n=0;n<e.length;n++){var a=t(e[n]);if(a<=r.distance){r.index=n;r.distance=a}}}return r};t.inbox=function(e,t,r){return e*t<0||e===0?r:Infinity};t.quadrature=function(e,t){return function(r){var n=e(r);var a=t(r);return Math.sqrt(n*n+a*a)}};t.makeEventData=function(e,r,n){var a="index"in e?e.index:e.pointNumber;var i={data:r._input,fullData:r,curveNumber:r.index,pointNumber:a};if(r._indexToPoints){var o=r._indexToPoints[a];if(o.length===1){i.pointIndex=o[0]}else{i.pointIndices=o}}else{i.pointIndex=a}if(r._module.eventData){i=r._module.eventData(i,e,r,n,a)}else{if("xVal"in e)i.x=e.xVal;else if("x"in e)i.x=e.x;if("yVal"in e)i.y=e.yVal;else if("y"in e)i.y=e.y;if(e.xa)i.xaxis=e.xa;if(e.ya)i.yaxis=e.ya;if(e.zLabelVal!==undefined)i.z=e.zLabelVal}t.appendArrayPointValue(i,r,a);return i};t.appendArrayPointValue=function(e,t,r){var a=t._arrayAttrs;if(!a){return}for(var s=0;s<a.length;s++){var l=a[s];var u=i(l);if(e[u]===undefined){var f=n.nestedProperty(t,l).get();var c=o(f,r);if(c!==undefined)e[u]=c}}};t.appendArrayMultiPointValues=function(e,t,r){var a=t._arrayAttrs;if(!a){return}for(var s=0;s<a.length;s++){var l=a[s];var u=i(l);if(e[u]===undefined){var f=n.nestedProperty(t,l).get();var c=new Array(r.length);for(var v=0;v<r.length;v++){c[v]=o(f,r[v])}e[u]=c}}};var a={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function i(e){return a[e]||e}function o(e,t){if(Array.isArray(t)){if(Array.isArray(e)&&Array.isArray(e[t[0]])){return e[t[0]][t[1]]}}else{return e[t]}}var s={x:true,y:true};var l={"x unified":true,"y unified":true};t.isUnifiedHover=function(e){if(typeof e!=="string")return false;return!!l[e]};t.isXYhover=function(e){if(typeof e!=="string")return false;return!!s[e]}},88335:function(e,t,r){"use strict";var n=r(39898);var a=r(92770);var i=r(84267);var o=r(71828);var s=o.strTranslate;var l=o.strRotate;var u=r(11086);var f=r(63893);var c=r(39918);var v=r(91424);var h=r(7901);var p=r(28569);var d=r(89298);var g=r(73972);var y=r(23469);var m=r(26675);var x=r(99017);var b=r(43969);var _=m.YANGLE;var w=Math.PI*_/180;var T=1/Math.sin(w);var k=Math.cos(w);var A=Math.sin(w);var M=m.HOVERARROWSIZE;var S=m.HOVERTEXTPAD;var E={box:true,ohlc:true,violin:true,candlestick:true};var L={scatter:true,scattergl:true,splom:true};t.hover=function e(t,r,n,a){t=o.getGraphDiv(t);var i=r.target;o.throttle(t._fullLayout._uid+m.HOVERID,m.HOVERMINTIME,(function(){C(t,r,n,a,i)}))};t.loneHover=function e(t,r){var a=true;if(!Array.isArray(t)){a=false;t=[t]}var i=r.gd;var o=Z(i);var s=Y(i);var l=t.map((function(e){var t=e._x0||e.x0||e.x||0;var n=e._x1||e.x1||e.x||0;var a=e._y0||e.y0||e.y||0;var l=e._y1||e.y1||e.y||0;var u=e.eventData;if(u){var f=Math.min(t,n);var c=Math.max(t,n);var v=Math.min(a,l);var p=Math.max(a,l);var d=e.trace;if(g.traceIs(d,"gl3d")){var y=i._fullLayout[d.scene]._scene.container;var m=y.offsetLeft;var x=y.offsetTop;f+=m;c+=m;v+=x;p+=x}u.bbox={x0:f+s,x1:c+s,y0:v+o,y1:p+o};if(r.inOut_bbox){r.inOut_bbox.push(u.bbox)}}else{u=false}return{color:e.color||h.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,nameLength:e.nameLength,textAlign:e.textAlign,trace:e.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:e.hovertemplate||false,hovertemplateLabels:e.hovertemplateLabels||false,eventData:u}}));var u=false;var f=O(l,{gd:i,hovermode:"closest",rotateLabels:u,bgColor:r.bgColor||h.background,container:n.select(r.container),outerContainer:r.outerContainer||r.container});var c=f.hoverLabels;var v=5;var p=0;var d=0;c.sort((function(e,t){return e.y0-t.y0})).each((function(e,t){var n=e.y0-e.by/2;if(n-v<p){e.offset=p-n+v}else{e.offset=0}p=n+e.by+e.offset;if(t===r.anchorIndex||0)d=e.offset})).each((function(e){e.offset-=d}));var y=i._fullLayout._invScaleX;var m=i._fullLayout._invScaleY;B(c,u,y,m);return a?c:c.node()};function C(e,t,r,i,s){if(!r)r="xy";var l=Array.isArray(r)?r:[r];var f=e._fullLayout;var v=f._plots||[];var d=v[r];var m=f._has("cartesian");if(d){var x=d.overlays.map((function(e){return e.id}));l=l.concat(x)}var b=l.length;var _=new Array(b);var w=new Array(b);var T=false;for(var k=0;k<b;k++){var A=l[k];if(v[A]){T=true;_[k]=v[A].xaxis;w[k]=v[A].yaxis}else if(f[A]&&f[A]._subplot){var M=f[A]._subplot;_[k]=M.xaxis;w[k]=M.yaxis}else{o.warn("Unrecognized subplot: "+A);return}}var S=t.hovermode||f.hovermode;if(S&&!T)S="closest";if(["x","y","closest","x unified","y unified"].indexOf(S)===-1||!e.calcdata||e.querySelector(".zoombox")||e._dragging){return p.unhoverRaw(e,t)}var C=f.hoverdistance;if(C===-1)C=Infinity;var P=f.spikedistance;if(P===-1)P=Infinity;var D=[];var R=[];var F,H;var W,X,J,K,$,Q,ee,te,re,ne,ae;var ie={hLinePoint:null,vLinePoint:null};var oe=false;if(Array.isArray(t)){S="array";for(W=0;W<t.length;W++){J=e.calcdata[t[W].curveNumber||0];if(J){K=J[0].trace;if(J[0].trace.hoverinfo!=="skip"){R.push(J);if(K.orientation==="h"){oe=true}}}}}else{for(X=0;X<e.calcdata.length;X++){J=e.calcdata[X];K=J[0].trace;if(K.hoverinfo!=="skip"&&y.isTraceInSubplots(K,l)){R.push(J);if(K.orientation==="h"){oe=true}}}var se=!s;var le,ue;if(se){if("xpx"in t)le=t.xpx;else le=_[0]._length/2;if("ypx"in t)ue=t.ypx;else ue=w[0]._length/2}else{if(u.triggerHandler(e,"plotly_beforehover",t)===false){return}var fe=s.getBoundingClientRect();le=t.clientX-fe.left;ue=t.clientY-fe.top;f._calcInverseTransform(e);var ce=o.apply3DTransform(f._invTransform)(le,ue);le=ce[0];ue=ce[1];if(le<0||le>_[0]._length||ue<0||ue>w[0]._length){return p.unhoverRaw(e,t)}}t.pointerX=le+_[0]._offset;t.pointerY=ue+w[0]._offset;if("xval"in t)F=y.flat(l,t.xval);else F=y.p2c(_,le);if("yval"in t)H=y.flat(l,t.yval);else H=y.p2c(w,ue);if(!a(F[0])||!a(H[0])){o.warn("Fx.hover failed",t,e);return p.unhoverRaw(e,t)}}var ve=Infinity;function he(e,r){for(X=0;X<R.length;X++){J=R[X];if(!J||!J[0]||!J[0].trace)continue;K=J[0].trace;if(K.visible!==true||K._length===0)continue;if(["carpet","contourcarpet"].indexOf(K._module.name)!==-1)continue;if(K.type==="splom"){Q=0;$=l[Q]}else{$=y.getSubplot(K);Q=l.indexOf($)}ee=S;if(y.isUnifiedHover(ee)){ee=ee.charAt(0)}ne={cd:J,trace:K,xa:_[Q],ya:w[Q],maxHoverDistance:C,maxSpikeDistance:P,index:false,distance:Math.min(ve,C),spikeDistance:Infinity,xSpike:undefined,ySpike:undefined,color:h.defaultLine,name:K.name,x0:undefined,x1:undefined,y0:undefined,y1:undefined,xLabelVal:undefined,yLabelVal:undefined,zLabelVal:undefined,text:undefined};if(f[$]){ne.subplot=f[$]._subplot}if(f._splomScenes&&f._splomScenes[K.uid]){ne.scene=f._splomScenes[K.uid]}ae=D.length;if(ee==="array"){var n=t[X];if("pointNumber"in n){ne.index=n.pointNumber;ee="closest"}else{ee="";if("xval"in n){te=n.xval;ee="x"}if("yval"in n){re=n.yval;ee=ee?"closest":"y"}}}else if(e!==undefined&&r!==undefined){te=e;re=r}else{te=F[Q];re=H[Q]}if(C!==0){if(K._module&&K._module.hoverPoints){var i=K._module.hoverPoints(ne,te,re,ee,{finiteRange:true,hoverLayer:f._hoverlayer});if(i){var s;for(var u=0;u<i.length;u++){s=i[u];if(a(s.x0)&&a(s.y0)){D.push(N(s,S))}}}}else{o.log("Unrecognized trace type in hover:",K)}}if(S==="closest"&&D.length>ae){D.splice(0,ae);ve=D[0].distance}if(m&&P!==0){if(D.length===0){ne.distance=P;ne.index=false;var c=K._module.hoverPoints(ne,te,re,"closest",{hoverLayer:f._hoverlayer});if(c){c=c.filter((function(e){return e.spikeDistance<=P}))}if(c&&c.length){var v;var p=c.filter((function(e){return e.xa.showspikes&&e.xa.spikesnap!=="hovered data"}));if(p.length){var d=p[0];if(a(d.x0)&&a(d.y0)){v=de(d);if(!ie.vLinePoint||ie.vLinePoint.spikeDistance>v.spikeDistance){ie.vLinePoint=v}}}var g=c.filter((function(e){return e.ya.showspikes&&e.ya.spikesnap!=="hovered data"}));if(g.length){var x=g[0];if(a(x.x0)&&a(x.y0)){v=de(x);if(!ie.hLinePoint||ie.hLinePoint.spikeDistance>v.spikeDistance){ie.hLinePoint=v}}}}}}}}he();function pe(e,t,r){var n=null;var a=Infinity;var i;for(var o=0;o<e.length;o++){i=e[o].spikeDistance;if(r&&o===0)i=-Infinity;if(i<=a&&i<=t){n=e[o];a=i}}return n}function de(e){if(!e)return null;return{xa:e.xa,ya:e.ya,x:e.xSpike!==undefined?e.xSpike:(e.x0+e.x1)/2,y:e.ySpike!==undefined?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}}var ge={fullLayout:f,container:f._hoverlayer,event:t};var ye=e._spikepoints;var me={vLinePoint:ie.vLinePoint,hLinePoint:ie.hLinePoint};e._spikepoints=me;var xe=function(){D.sort((function(e,t){return e.distance-t.distance}));D=q(D,S)};xe();var be=S.charAt(0);var _e=(be==="x"||be==="y")&&D[0]&&L[D[0].trace.type];if(m&&P!==0){if(D.length!==0){var we=D.filter((function(e){return e.ya.showspikes}));var Te=pe(we,P,_e);ie.hLinePoint=de(Te);var ke=D.filter((function(e){return e.xa.showspikes}));var Ae=pe(ke,P,_e);ie.vLinePoint=de(Ae)}}if(D.length===0){var Me=p.unhoverRaw(e,t);if(m&&(ie.hLinePoint!==null||ie.vLinePoint!==null)){if(V(ye)){j(e,ie,ge)}}return Me}if(m){if(V(ye)){j(e,ie,ge)}}if(y.isXYhover(ee)&&D[0].length!==0&&D[0].trace.type!=="splom"){var Se=D[0];if(E[Se.trace.type]){D=D.filter((function(e){return e.trace.index===Se.trace.index}))}else{D=[Se]}var Ee=D.length;var Le=G("x",Se,f);var Ce=G("y",Se,f);he(Le,Ce);var Ie=[];var Pe={};var Oe=0;var De=function(e){var t=E[e.trace.type]?I(e):e.trace.index;if(!Pe[t]){Oe++;Pe[t]=Oe;Ie.push(e)}else{var r=Pe[t]-1;var n=Ie[r];if(r>0&&Math.abs(e.distance)<Math.abs(n.distance)){Ie[r]=e}}};var ze;for(ze=0;ze<Ee;ze++){De(D[ze])}for(ze=D.length-1;ze>Ee-1;ze--){De(D[ze])}D=Ie;xe()}var Re=e._hoverdata;var Fe=[];var Be=Z(e);var Ne=Y(e);for(W=0;W<D.length;W++){var je=D[W];var Ue=y.makeEventData(je,je.trace,je.cd);if(je.hovertemplate!==false){var Ve=false;if(je.cd[je.index]&&je.cd[je.index].ht){Ve=je.cd[je.index].ht}je.hovertemplate=Ve||je.trace.hovertemplate||false}if(je.xa&&je.ya){var He=je.x0+je.xa._offset;var qe=je.x1+je.xa._offset;var Ge=je.y0+je.ya._offset;var Ze=je.y1+je.ya._offset;var Ye=Math.min(He,qe);var We=Math.max(He,qe);var Xe=Math.min(Ge,Ze);var Je=Math.max(Ge,Ze);Ue.bbox={x0:Ye+Ne,x1:We+Ne,y0:Xe+Be,y1:Je+Be}}je.eventData=[Ue];Fe.push(Ue)}e._hoverdata=Fe;var Ke=S==="y"&&(R.length>1||D.length>1)||S==="closest"&&oe&&D.length>1;var $e=h.combine(f.plot_bgcolor||h.background,f.paper_bgcolor);var Qe=O(D,{gd:e,hovermode:S,rotateLabels:Ke,bgColor:$e,container:f._hoverlayer,outerContainer:f._paper.node(),commonLabelOpts:f.hoverlabel,hoverdistance:f.hoverdistance});var et=Qe.hoverLabels;if(!y.isUnifiedHover(S)){z(et,Ke,f,Qe.commonLabelBoundingBox);B(et,Ke,f._invScaleX,f._invScaleY)}if(s&&s.tagName){var tt=g.getComponentMethod("annotations","hasClickToShow")(e,Fe);c(n.select(s),tt?"pointer":"")}if(!s||i||!U(e,t,Re))return;if(Re){e.emit("plotly_unhover",{event:t,points:Re})}e.emit("plotly_hover",{event:t,points:e._hoverdata,xaxes:_,yaxes:w,xvals:F,yvals:H})}function I(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa?e.xa._id:"",e.ya?e.ya._id:""].join(",")}var P=/<extra>([\s\S]*)<\/extra>/;function O(e,t){var r=t.gd;var a=r._fullLayout;var i=t.hovermode;var u=t.rotateLabels;var c=t.bgColor;var p=t.container;var d=t.outerContainer;var w=t.commonLabelOpts||{};if(e.length===0)return[[]];var T=t.fontFamily||m.HOVERFONT;var k=t.fontSize||m.HOVERFONTSIZE;var A=e[0];var E=A.xa;var L=A.ya;var C=i.charAt(0);var P=C+"Label";var O=A[P];if(O===undefined&&E.type==="multicategory"){for(var z=0;z<e.length;z++){O=e[z][P];if(O!==undefined)break}}var R=W(r,d);var F=R.top;var B=R.width;var N=R.height;var j=O!==undefined&&A.distance<=t.hoverdistance&&(i==="x"||i==="y");if(j){var U=true;var V,H;for(V=0;V<e.length;V++){if(U&&e[V].zLabel===undefined)U=false;H=e[V].hoverinfo||e[V].trace.hoverinfo;if(H){var q=Array.isArray(H)?H:H.split("+");if(q.indexOf("all")===-1&&q.indexOf(i)===-1){j=false;break}}}if(U)j=false}var G=p.selectAll("g.axistext").data(j?[0]:[]);G.enter().append("g").classed("axistext",true);G.exit().remove();var Z={minX:0,maxX:0,minY:0,maxY:0};G.each((function(){var e=n.select(this);var t=o.ensureSingle(e,"path","",(function(e){e.style({"stroke-width":"1px"})}));var l=o.ensureSingle(e,"text","",(function(e){e.attr("data-notex",1)}));var u=w.bgcolor||h.defaultLine;var c=w.bordercolor||h.contrast(u);var p=h.contrast(u);var d={family:w.font.family||T,size:w.font.size||k,color:w.font.color||p};t.style({fill:u,stroke:c});l.text(O).call(v.font,d).call(f.positionText,0,0).call(f.convertToTspans,r);e.attr("transform","");var g=W(r,l.node());var y,m;if(i==="x"){var x=E.side==="top"?"-":"";l.attr("text-anchor","middle").call(f.positionText,0,E.side==="top"?F-g.bottom-M-S:F-g.top+M+S);y=E._offset+(A.x0+A.x1)/2;m=L._offset+(E.side==="top"?0:L._length);var b=g.width/2+S;if(y<b){y=b;t.attr("d","M-"+(b-M)+",0"+"L-"+(b-M*2)+","+x+M+"H"+b+"v"+x+(S*2+g.height)+"H-"+b+"V"+x+M+"Z")}else if(y>a.width-b){y=a.width-b;t.attr("d","M"+(b-M)+",0"+"L"+b+","+x+M+"v"+x+(S*2+g.height)+"H-"+b+"V"+x+M+"H"+(b-M*2)+"Z")}else{t.attr("d","M0,0"+"L"+M+","+x+M+"H"+b+"v"+x+(S*2+g.height)+"H-"+b+"V"+x+M+"H-"+M+"Z")}Z.minX=y-b;Z.maxX=y+b;if(E.side==="top"){Z.minY=m-(S*2+g.height);Z.maxY=m-S}else{Z.minY=m+S;Z.maxY=m+(S*2+g.height)}}else{var _;var C;var I;if(L.side==="right"){_="start";C=1;I="";y=E._offset+E._length}else{_="end";C=-1;I="-";y=E._offset}m=L._offset+(A.y0+A.y1)/2;l.attr("text-anchor",_);t.attr("d","M0,0"+"L"+I+M+","+M+"V"+(S+g.height/2)+"h"+I+(S*2+g.width)+"V-"+(S+g.height/2)+"H"+I+M+"V-"+M+"Z");Z.minY=m-(S+g.height/2);Z.maxY=m+(S+g.height/2);if(L.side==="right"){Z.minX=y+M;Z.maxX=y+M+(S*2+g.width)}else{Z.minX=y-M-(S*2+g.width);Z.maxX=y-M}var P=g.height/2;var D=F-g.top-P;var z="clip"+a._uid+"commonlabel"+L._id;var R;if(y<g.width+2*S+M){R="M-"+(M+S)+"-"+P+"h-"+(g.width-S)+"V"+P+"h"+(g.width-S)+"Z";var B=g.width-y+S;f.positionText(l,B,D);if(_==="end"){l.selectAll("tspan").each((function(){var e=n.select(this);var t=v.tester.append("text").text(e.text()).call(v.font,d);var a=W(r,t.node());if(Math.round(a.width)<Math.round(g.width)){e.attr("x",B-a.width)}t.remove()}))}}else{f.positionText(l,C*(S+M),D);R=null}var N=a._topclips.selectAll("#"+z).data(R?[0]:[]);N.enter().append("clipPath").attr("id",z).append("path");N.exit().remove();N.select("path").attr("d",R);v.setClipUrl(l,R?z:null,r)}e.attr("transform",s(y,m))}));if(y.isUnifiedHover(i)){p.selectAll("g.hovertext").remove();var Y=e.filter((function(e){return e.hoverinfo!=="none"}));if(Y.length===0)return[];var X=a.hoverlabel;var J=X.font;var K={showlegend:true,legend:{title:{text:O,font:J},font:J,bgcolor:X.bgcolor,bordercolor:X.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:a.legend?a.legend.traceorder:undefined,orientation:"v"}};var $={font:J};x(K,$,r._fullData);var Q=$.legend;Q.entries=[];for(var ee=0;ee<Y.length;ee++){var te=Y[ee];if(te.hoverinfo==="none")continue;var re=D(te,true,i,a,O);var ne=re[0];var ae=re[1];te.name=ae;if(ae!==""){te.text=ae+" : "+ne}else{te.text=ne}var ie=te.cd[te.index];if(ie){if(ie.mc)te.mc=ie.mc;if(ie.mcc)te.mc=ie.mcc;if(ie.mlc)te.mlc=ie.mlc;if(ie.mlcc)te.mlc=ie.mlcc;if(ie.mlw)te.mlw=ie.mlw;if(ie.mrc)te.mrc=ie.mrc;if(ie.dir)te.dir=ie.dir}te._distinct=true;Q.entries.push([te])}Q.entries.sort((function(e,t){return e[0].trace.index-t[0].trace.index}));Q.layer=p;Q._inHover=true;Q._groupTitleFont=X.grouptitlefont;b(r,Q);var oe=p.select("g.legend");var se=W(r,oe.node());var le=se.width+2*S;var ue=se.height+2*S;var fe=Y[0];var ce=(fe.x0+fe.x1)/2;var ve=(fe.y0+fe.y1)/2;var he=!(g.traceIs(fe.trace,"bar-like")||g.traceIs(fe.trace,"box-violin"));var pe,de;if(C==="y"){if(he){de=ve-S;pe=ve+S}else{de=Math.min.apply(null,Y.map((function(e){return Math.min(e.y0,e.y1)})));pe=Math.max.apply(null,Y.map((function(e){return Math.max(e.y0,e.y1)})))}}else{de=pe=o.mean(Y.map((function(e){return(e.y0+e.y1)/2})))-ue/2}var ge,ye;if(C==="x"){if(he){ge=ce+S;ye=ce-S}else{ge=Math.max.apply(null,Y.map((function(e){return Math.max(e.x0,e.x1)})));ye=Math.min.apply(null,Y.map((function(e){return Math.min(e.x0,e.x1)})))}}else{ge=ye=o.mean(Y.map((function(e){return(e.x0+e.x1)/2})))-le/2}var me=E._offset;var xe=L._offset;pe+=xe;ge+=me;ye+=me-le;de+=xe-ue;var be,_e;if(ge+le<B&&ge>=0){be=ge}else if(ye+le<B&&ye>=0){be=ye}else if(me+le<B){be=me}else{if(ge-ce<ce-ye+le){be=B-le}else{be=0}}be+=S;if(pe+ue<N&&pe>=0){_e=pe}else if(de+ue<N&&de>=0){_e=de}else if(xe+ue<N){_e=xe}else{if(pe-ve<ve-de+ue){_e=N-ue}else{_e=0}}_e+=S;oe.attr("transform",s(be-1,_e-1));return oe}var we=p.selectAll("g.hovertext").data(e,(function(e){return I(e)}));we.enter().append("g").classed("hovertext",true).each((function(){var e=n.select(this);e.append("rect").call(h.fill,h.addOpacity(c,.8));e.append("text").classed("name",true);e.append("path").style("stroke-width","1px");e.append("text").classed("nums",true).call(v.font,T,k)}));we.exit().remove();we.each((function(e){var t=n.select(this).attr("transform","");var o=e.color;if(Array.isArray(o)){o=o[e.eventData[0].pointNumber]}var p=e.bgcolor||o;var d=h.combine(h.opacity(p)?p:h.defaultLine,c);var g=h.combine(h.opacity(o)?o:h.defaultLine,c);var y=e.borderColor||h.contrast(d);var m=D(e,j,i,a,O,t);var x=m[0];var b=m[1];var w=t.select("text.nums").call(v.font,e.fontFamily||T,e.fontSize||k,e.fontColor||y).text(x).attr("data-notex",1).call(f.positionText,0,0).call(f.convertToTspans,r);var A=t.select("text.name");var E=0;var L=0;if(b&&b!==x){A.call(v.font,e.fontFamily||T,e.fontSize||k,g).text(b).attr("data-notex",1).call(f.positionText,0,0).call(f.convertToTspans,r);var C=W(r,A.node());E=C.width+2*S;L=C.height+2*S}else{A.remove();t.select("rect").remove()}t.select("path").style({fill:d,stroke:y});var I=e.xa._offset+(e.x0+e.x1)/2;var P=e.ya._offset+(e.y0+e.y1)/2;var z=Math.abs(e.x1-e.x0);var R=Math.abs(e.y1-e.y0);var U=W(r,w.node());var V=U.width/a._invScaleX;var H=U.height/a._invScaleY;e.ty0=(F-U.top)/a._invScaleY;e.bx=V+2*S;e.by=Math.max(H+2*S,L);e.anchor="start";e.txwidth=V;e.tx2width=E;e.offset=0;var q=(V+M+S+E)*a._invScaleX;var G,Z;if(u){e.pos=I;G=P+R/2+q<=N;Z=P-R/2-q>=0;if((e.idealAlign==="top"||!G)&&Z){P-=R/2;e.anchor="end"}else if(G){P+=R/2;e.anchor="start"}else{e.anchor="middle"}e.crossPos=P}else{e.pos=P;G=I+z/2+q<=B;Z=I-z/2-q>=0;if((e.idealAlign==="left"||!G)&&Z){I-=z/2;e.anchor="end"}else if(G){I+=z/2;e.anchor="start"}else{e.anchor="middle";var Y=q/2;var X=I+Y-B;var J=I-Y;if(X>0)I-=X;if(J<0)I+=-J}e.crossPos=I}w.attr("text-anchor",e.anchor);if(E)A.attr("text-anchor",e.anchor);t.attr("transform",s(I,P)+(u?l(_):""))}));return{hoverLabels:we,commonLabelBoundingBox:Z}}function D(e,t,r,n,a,i){var s="";var l="";if(e.nameOverride!==undefined)e.name=e.nameOverride;if(e.name){if(e.trace._meta){e.name=o.templateString(e.name,e.trace._meta)}s=H(e.name,e.nameLength)}var u=r.charAt(0);var f=u==="x"?"y":"x";if(e.zLabel!==undefined){if(e.xLabel!==undefined)l+="x: "+e.xLabel+"<br>";if(e.yLabel!==undefined)l+="y: "+e.yLabel+"<br>";if(e.trace.type!=="choropleth"&&e.trace.type!=="choroplethmapbox"){l+=(l?"z: ":"")+e.zLabel}}else if(t&&e[u+"Label"]===a){l=e[f+"Label"]||""}else if(e.xLabel===undefined){if(e.yLabel!==undefined&&e.trace.type!=="scattercarpet"){l=e.yLabel}}else if(e.yLabel===undefined)l=e.xLabel;else l="("+e.xLabel+", "+e.yLabel+")";if((e.text||e.text===0)&&!Array.isArray(e.text)){l+=(l?"<br>":"")+e.text}if(e.extraText!==undefined)l+=(l?"<br>":"")+e.extraText;if(i&&l===""&&!e.hovertemplate){if(s==="")i.remove();l=s}var c=e.hovertemplate||false;if(c){var v=e.hovertemplateLabels||e;if(e[u+"Label"]!==a){v[u+"other"]=v[u+"Val"];v[u+"otherLabel"]=v[u+"Label"]}l=o.hovertemplateString(c,v,n._d3locale,e.eventData[0]||{},e.trace._meta);l=l.replace(P,(function(t,r){s=H(r,e.nameLength);return""}))}return[l,s]}function z(e,t,r,n){var a=t?"xa":"ya";var i=t?"ya":"xa";var o=0;var s=1;var l=e.size();var u=new Array(l);var f=0;var c=n.minX;var v=n.maxX;var h=n.minY;var p=n.maxY;var d=function(e){return e*r._invScaleX};var g=function(e){return e*r._invScaleY};e.each((function(e){var n=e[a];var o=e[i];var l=n._id.charAt(0)==="x";var y=n.range;if(f===0&&y&&y[0]>y[1]!==l){s=-1}var m=0;var x=l?r.width:r.height;if(r.hovermode==="x"||r.hovermode==="y"){var b=R(e,t);var _=e.anchor;var w=_==="end"?-1:1;var k;var A;if(_==="middle"){k=e.crossPos+(l?g(b.y-e.by/2):d(e.bx/2+e.tx2width/2));A=k+(l?g(e.by):d(e.bx))}else{if(l){k=e.crossPos+g(M+b.y)-g(e.by/2-M);A=k+g(e.by)}else{var S=d(w*M+b.x);var E=S+d(w*e.bx);k=e.crossPos+Math.min(S,E);A=e.crossPos+Math.max(S,E)}}if(l){if(h!==undefined&&p!==undefined&&Math.min(A,p)-Math.max(k,h)>1){if(o.side==="left"){m=o._mainLinePosition;x=r.width}else{x=o._mainLinePosition}}}else{if(c!==undefined&&v!==undefined&&Math.min(A,v)-Math.max(k,c)>1){if(o.side==="top"){m=o._mainLinePosition;x=r.height}else{x=o._mainLinePosition}}}}u[f++]=[{datum:e,traceIndex:e.trace.index,dp:0,pos:e.pos,posref:e.posref,size:e.by*(l?T:1)/2,pmin:m,pmax:x}]}));u.sort((function(e,t){return e[0].posref-t[0].posref||s*(t[0].traceIndex-e[0].traceIndex)}));var y,m,x,b,_,w,k;function A(e){var t=e[0];var r=e[e.length-1];m=t.pmin-t.pos-t.dp+t.size;x=r.pos+r.dp+r.size-t.pmax;if(m>.01){for(_=e.length-1;_>=0;_--)e[_].dp+=m;y=false}if(x<.01)return;if(m<-.01){for(_=e.length-1;_>=0;_--)e[_].dp-=x;y=false}if(!y)return;var n=0;for(b=0;b<e.length;b++){w=e[b];if(w.pos+w.dp+w.size>t.pmax)n++}for(b=e.length-1;b>=0;b--){if(n<=0)break;w=e[b];if(w.pos>t.pmax-1){w.del=true;n--}}for(b=0;b<e.length;b++){if(n<=0)break;w=e[b];if(w.pos<t.pmin+1){w.del=true;n--;x=w.size*2;for(_=e.length-1;_>=0;_--)e[_].dp-=x}}for(b=e.length-1;b>=0;b--){if(n<=0)break;w=e[b];if(w.pos+w.dp+w.size>t.pmax){w.del=true;n--}}}while(!y&&o<=l){o++;y=true;b=0;while(b<u.length-1){var S=u[b];var E=u[b+1];var L=S[S.length-1];var C=E[0];m=L.pos+L.dp+L.size-C.pos-C.dp+C.size;if(m>.01&&L.pmin===C.pmin&&L.pmax===C.pmax){for(_=E.length-1;_>=0;_--)E[_].dp+=m;S.push.apply(S,E);u.splice(b+1,1);k=0;for(_=S.length-1;_>=0;_--)k+=S[_].dp;x=k/S.length;for(_=S.length-1;_>=0;_--)S[_].dp-=x;y=false}else b++}u.forEach(A)}for(b=u.length-1;b>=0;b--){var I=u[b];for(_=I.length-1;_>=0;_--){var P=I[_];var O=P.datum;O.offset=P.dp;O.del=P.del}}}function R(e,t){var r=0;var n=e.offset;if(t){n*=-A;r=e.offset*k}return{x:r,y:n}}function F(e){var t={start:1,end:-1,middle:0}[e.anchor];var r=t*(M+S);var n=r+t*(e.txwidth+S);var a=e.anchor==="middle";if(a){r-=e.tx2width/2;n+=e.txwidth/2+S}return{alignShift:t,textShiftX:r,text2ShiftX:n}}function B(e,t,r,a){var i=function(e){return e*r};var o=function(e){return e*a};e.each((function(e){var r=n.select(this);if(e.del)return r.remove();var a=r.select("text.nums");var s=e.anchor;var l=s==="end"?-1:1;var u=F(e);var c=R(e,t);var h=c.x;var p=c.y;var d=s==="middle";r.select("path").attr("d",d?"M-"+i(e.bx/2+e.tx2width/2)+","+o(p-e.by/2)+"h"+i(e.bx)+"v"+o(e.by)+"h-"+i(e.bx)+"Z":"M0,0L"+i(l*M+h)+","+o(M+p)+"v"+o(e.by/2-M)+"h"+i(l*e.bx)+"v-"+o(e.by)+"H"+i(l*M+h)+"V"+o(p-M)+"Z");var g=h+u.textShiftX;var y=p+e.ty0-e.by/2+S;var m=e.textAlign||"auto";if(m!=="auto"){if(m==="left"&&s!=="start"){a.attr("text-anchor","start");g=d?-e.bx/2-e.tx2width/2+S:-e.bx-S}else if(m==="right"&&s!=="end"){a.attr("text-anchor","end");g=d?e.bx/2-e.tx2width/2-S:e.bx+S}}a.call(f.positionText,i(g),o(y));if(e.tx2width){r.select("text.name").call(f.positionText,i(u.text2ShiftX+u.alignShift*S+h),o(p+e.ty0-e.by/2+S));r.select("rect").call(v.setRect,i(u.text2ShiftX+(u.alignShift-1)*e.tx2width/2+h),o(p-e.by/2-1),i(e.tx2width),o(e.by+2))}}))}function N(e,t){var r=e.index;var n=e.trace||{};var i=e.cd[0];var s=e.cd[r]||{};function l(e){return e||a(e)&&e===0}var u=Array.isArray(r)?function(e,t){var a=o.castOption(i,r,e);return l(a)?a:o.extractOption({},n,"",t)}:function(e,t){return o.extractOption(s,n,e,t)};function f(t,r,n){var a=u(r,n);if(l(a))e[t]=a}f("hoverinfo","hi","hoverinfo");f("bgcolor","hbg","hoverlabel.bgcolor");f("borderColor","hbc","hoverlabel.bordercolor");f("fontFamily","htf","hoverlabel.font.family");f("fontSize","hts","hoverlabel.font.size");f("fontColor","htc","hoverlabel.font.color");f("nameLength","hnl","hoverlabel.namelength");f("textAlign","hta","hoverlabel.align");e.posref=t==="y"||t==="closest"&&n.orientation==="h"?e.xa._offset+(e.x0+e.x1)/2:e.ya._offset+(e.y0+e.y1)/2;e.x0=o.constrain(e.x0,0,e.xa._length);e.x1=o.constrain(e.x1,0,e.xa._length);e.y0=o.constrain(e.y0,0,e.ya._length);e.y1=o.constrain(e.y1,0,e.ya._length);if(e.xLabelVal!==undefined){e.xLabel="xLabel"in e?e.xLabel:d.hoverLabelText(e.xa,e.xLabelVal,n.xhoverformat);e.xVal=e.xa.c2d(e.xLabelVal)}if(e.yLabelVal!==undefined){e.yLabel="yLabel"in e?e.yLabel:d.hoverLabelText(e.ya,e.yLabelVal,n.yhoverformat);e.yVal=e.ya.c2d(e.yLabelVal)}if(e.zLabelVal!==undefined&&e.zLabel===undefined){e.zLabel=String(e.zLabelVal)}if(!isNaN(e.xerr)&&!(e.xa.type==="log"&&e.xerr<=0)){var c=d.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;if(e.xerrneg!==undefined){e.xLabel+=" +"+c+" / -"+d.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text}else e.xLabel+="  "+c;if(t==="x")e.distance+=1}if(!isNaN(e.yerr)&&!(e.ya.type==="log"&&e.yerr<=0)){var v=d.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;if(e.yerrneg!==undefined){e.yLabel+=" +"+v+" / -"+d.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text}else e.yLabel+="  "+v;if(t==="y")e.distance+=1}var h=e.hoverinfo||e.trace.hoverinfo;if(h&&h!=="all"){h=Array.isArray(h)?h:h.split("+");if(h.indexOf("x")===-1)e.xLabel=undefined;if(h.indexOf("y")===-1)e.yLabel=undefined;if(h.indexOf("z")===-1)e.zLabel=undefined;if(h.indexOf("text")===-1)e.text=undefined;if(h.indexOf("name")===-1)e.name=undefined}return e}function j(e,t,r){var n=r.container;var a=r.fullLayout;var o=a._size;var s=r.event;var l=!!t.hLinePoint;var u=!!t.vLinePoint;var f,c;n.selectAll(".spikeline").remove();if(!(u||l))return;var p=h.combine(a.plot_bgcolor,a.paper_bgcolor);if(l){var g=t.hLinePoint;var y,m;f=g&&g.xa;c=g&&g.ya;var x=c.spikesnap;if(x==="cursor"){y=s.pointerX;m=s.pointerY}else{y=f._offset+g.x;m=c._offset+g.y}var b=i.readability(g.color,p)<1.5?h.contrast(p):g.color;var _=c.spikemode;var w=c.spikethickness;var T=c.spikecolor||b;var k=d.getPxPosition(e,c);var A,M;if(_.indexOf("toaxis")!==-1||_.indexOf("across")!==-1){if(_.indexOf("toaxis")!==-1){A=k;M=y}if(_.indexOf("across")!==-1){var S=c._counterDomainMin;var E=c._counterDomainMax;if(c.anchor==="free"){S=Math.min(S,c.position);E=Math.max(E,c.position)}A=o.l+S*o.w;M=o.l+E*o.w}n.insert("line",":first-child").attr({x1:A,x2:M,y1:m,y2:m,"stroke-width":w,stroke:T,"stroke-dasharray":v.dashStyle(c.spikedash,w)}).classed("spikeline",true).classed("crisp",true);n.insert("line",":first-child").attr({x1:A,x2:M,y1:m,y2:m,"stroke-width":w+2,stroke:p}).classed("spikeline",true).classed("crisp",true)}if(_.indexOf("marker")!==-1){n.insert("circle",":first-child").attr({cx:k+(c.side!=="right"?w:-w),cy:m,r:w,fill:T}).classed("spikeline",true)}}if(u){var L=t.vLinePoint;var C,I;f=L&&L.xa;c=L&&L.ya;var P=f.spikesnap;if(P==="cursor"){C=s.pointerX;I=s.pointerY}else{C=f._offset+L.x;I=c._offset+L.y}var O=i.readability(L.color,p)<1.5?h.contrast(p):L.color;var D=f.spikemode;var z=f.spikethickness;var R=f.spikecolor||O;var F=d.getPxPosition(e,f);var B,N;if(D.indexOf("toaxis")!==-1||D.indexOf("across")!==-1){if(D.indexOf("toaxis")!==-1){B=F;N=I}if(D.indexOf("across")!==-1){var j=f._counterDomainMin;var U=f._counterDomainMax;if(f.anchor==="free"){j=Math.min(j,f.position);U=Math.max(U,f.position)}B=o.t+(1-U)*o.h;N=o.t+(1-j)*o.h}n.insert("line",":first-child").attr({x1:C,x2:C,y1:B,y2:N,"stroke-width":z,stroke:R,"stroke-dasharray":v.dashStyle(f.spikedash,z)}).classed("spikeline",true).classed("crisp",true);n.insert("line",":first-child").attr({x1:C,x2:C,y1:B,y2:N,"stroke-width":z+2,stroke:p}).classed("spikeline",true).classed("crisp",true)}if(D.indexOf("marker")!==-1){n.insert("circle",":first-child").attr({cx:C,cy:F-(f.side!=="top"?z:-z),r:z,fill:R}).classed("spikeline",true)}}}function U(e,t,r){if(!r||r.length!==e._hoverdata.length)return true;for(var n=r.length-1;n>=0;n--){var a=r[n];var i=e._hoverdata[n];if(a.curveNumber!==i.curveNumber||String(a.pointNumber)!==String(i.pointNumber)||String(a.pointNumbers)!==String(i.pointNumbers)){return true}}return false}function V(e,t){if(!t)return true;if(t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint)return true;return false}function H(e,t){return f.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em"]})}function q(e,t){var r=t.charAt(0);var n=[];var a=[];var i=[];for(var o=0;o<e.length;o++){var s=e[o];if(g.traceIs(s.trace,"bar-like")||g.traceIs(s.trace,"box-violin")){i.push(s)}else if(s.trace[r+"period"]){a.push(s)}else{n.push(s)}}return n.concat(a).concat(i)}function G(e,t,r){var n=t[e+"a"];var a=t[e+"Val"];var i=t.cd[0];if(n.type==="category"||n.type==="multicategory")a=n._categoriesMap[a];else if(n.type==="date"){var o=t.trace[e+"periodalignment"];if(o){var s=t.cd[t.index];var l=s[e+"Start"];if(l===undefined)l=s[e];var u=s[e+"End"];if(u===undefined)u=s[e];var f=u-l;if(o==="end"){a+=f}else if(o==="middle"){a+=f/2}}a=n.d2c(a)}if(i&&i.t&&i.t.posLetter===n._id){if(r.boxmode==="group"||r.violinmode==="group"){a+=i.t.dPos}}return a}function Z(e){return e.offsetTop+e.clientTop}function Y(e){return e.offsetLeft+e.clientLeft}function W(e,t){var r=e._fullLayout;var n=t.getBoundingClientRect();var a=n.left;var i=n.top;var s=a+n.width;var l=i+n.height;var u=o.apply3DTransform(r._invTransform)(a,i);var f=o.apply3DTransform(r._invTransform)(s,l);var c=u[0];var v=u[1];var h=f[0];var p=f[1];return{x:c,y:v,width:h-c,height:p-v,top:Math.min(v,p),left:Math.min(c,h),right:Math.max(c,h),bottom:Math.max(v,p)}}},38048:function(e,t,r){"use strict";var n=r(71828);var a=r(7901);var i=r(23469).isUnifiedHover;e.exports=function e(t,r,o,s){s=s||{};var l=r.legend;function u(e){if(!s.font[e]){s.font[e]=l?r.legend.font[e]:r.font[e]}}if(r&&i(r.hovermode)){if(!s.font)s.font={};u("size");u("family");u("color");if(l){if(!s.bgcolor)s.bgcolor=a.combine(r.legend.bgcolor,r.paper_bgcolor);if(!s.bordercolor)s.bordercolor=r.legend.bordercolor}else{if(!s.bgcolor)s.bgcolor=r.paper_bgcolor}}o("hoverlabel.bgcolor",s.bgcolor);o("hoverlabel.bordercolor",s.bordercolor);o("hoverlabel.namelength",s.namelength);n.coerceFont(o,"hoverlabel.font",s.font);o("hoverlabel.align",s.align)}},98212:function(e,t,r){"use strict";var n=r(71828);var a=r(528);e.exports=function e(t,r){function i(e,i){if(r[e]!==undefined)return r[e];return n.coerce(t,r,a,e,i)}i("clickmode");return i("hovermode")}},30211:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);var i=r(28569);var o=r(23469);var s=r(528);var l=r(88335);e.exports={moduleType:"component",name:"fx",constants:r(26675),schema:{layout:s},attributes:r(77914),layoutAttributes:s,supplyLayoutGlobalDefaults:r(22774),supplyDefaults:r(54268),supplyLayoutDefaults:r(34938),calc:r(30732),getDistanceFunction:o.getDistanceFunction,getClosest:o.getClosest,inbox:o.inbox,quadrature:o.quadrature,appendArrayPointValue:o.appendArrayPointValue,castHoverOption:f,castHoverinfo:c,hover:l.hover,unhover:i.unhover,loneHover:l.loneHover,loneUnhover:u,click:r(75914)};function u(e){var t=a.isD3Selection(e)?e:n.select(e);t.selectAll("g.hovertext").remove();t.selectAll(".spikeline").remove()}function f(e,t,r){return a.castOption(e,t,"hoverlabel."+r)}function c(e,t,r){function n(r){return a.coerceHoverinfo({hoverinfo:r},{_module:e._module},t)}return a.castOption(e,r,"hoverinfo",n)}},528:function(e,t,r){"use strict";var n=r(26675);var a=r(41940);var i=a({editType:"none"});i.family.dflt=n.HOVERFONT;i.size.dflt=n.HOVERFONTSIZE;e.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",false],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",false,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:i,grouptitlefont:a({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},34938:function(e,t,r){"use strict";var n=r(71828);var a=r(528);var i=r(98212);var o=r(38048);e.exports=function e(t,r){function s(e,i){return n.coerce(t,r,a,e,i)}var l=i(t,r);if(l){s("hoverdistance");s("spikedistance")}var u=s("dragmode");if(u==="select")s("selectdirection");var f=r._has("mapbox");var c=r._has("geo");var v=r._basePlotModules.length;if(r.dragmode==="zoom"&&((f||c)&&v===1||f&&c&&v===2)){r.dragmode="pan"}o(t,r,s);n.coerceFont(s,"hoverlabel.grouptitlefont",r.hoverlabel.font)}},22774:function(e,t,r){"use strict";var n=r(71828);var a=r(38048);var i=r(528);e.exports=function e(t,r){function o(e,a){return n.coerce(t,r,i,e,a)}a(t,r,o)}},83312:function(e,t,r){"use strict";var n=r(71828);var a=r(30587).counter;var i=r(27670).Y;var o=r(85555).idRegex;var s=r(44467);var l={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:true,dimensions:2,items:{valType:"enumerated",values:[a("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:true,items:{valType:"enumerated",values:[o.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:true,items:{valType:"enumerated",values:[o.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:i({name:"grid",editType:"plot",noGridCell:true},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function u(e,t,r){var n=t[r+"axes"];var a=Object.keys((e._splomAxes||{})[r]||{});if(Array.isArray(n))return n;if(a.length)return a}function f(e,t){var r=e.grid||{};var a=u(t,r,"x");var i=u(t,r,"y");if(!e.grid&&!a&&!i)return;var o=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]);var f=Array.isArray(a);var v=Array.isArray(i);var h=f&&a!==r.xaxes&&v&&i!==r.yaxes;var p,d;if(o){p=r.subplots.length;d=r.subplots[0].length}else{if(v)p=i.length;if(f)d=a.length}var g=s.newContainer(t,"grid");function y(e,t){return n.coerce(r,g,l,e,t)}var m=y("rows",p);var x=y("columns",d);if(!(m*x>1)){delete t.grid;return}if(!o&&!f&&!v){var b=y("pattern")==="independent";if(b)o=true}g._hasSubplotGrid=o;var _=y("roworder");var w=_==="top to bottom";var T=o?.2:.1;var k=o?.3:.1;var A,M;if(h&&t._splomGridDflt){A=t._splomGridDflt.xside;M=t._splomGridDflt.yside}g._domains={x:c("x",y,T,A,x),y:c("y",y,k,M,m,w)}}function c(e,t,r,n,a,i){var o=t(e+"gap",r);var s=t("domain."+e);t(e+"side",n);var l=new Array(a);var u=s[0];var f=(s[1]-u)/(a-o);var c=f*(1-o);for(var v=0;v<a;v++){var h=u+f*v;l[i?a-1-v:v]=[h,h+c]}return l}function v(e,t){var r=t.grid;if(!r||!r._domains)return;var n=e.grid||{};var a=t._subplots;var i=r._hasSubplotGrid;var o=r.rows;var s=r.columns;var l=r.pattern==="independent";var f,c,v,p,d,g,y;var m=r._axisMap={};if(i){var x=n.subplots||[];g=r.subplots=new Array(o);var b=1;for(f=0;f<o;f++){var _=g[f]=new Array(s);var w=x[f]||[];for(c=0;c<s;c++){if(l){d=b===1?"xy":"x"+b+"y"+b;b++}else d=w[c];_[c]="";if(a.cartesian.indexOf(d)!==-1){y=d.indexOf("y");v=d.slice(0,y);p=d.slice(y);if(m[v]!==undefined&&m[v]!==c||m[p]!==undefined&&m[p]!==f){continue}_[c]=d;m[v]=c;m[p]=f}}}}else{var T=u(t,n,"x");var k=u(t,n,"y");r.xaxes=h(T,a.xaxis,s,m,"x");r.yaxes=h(k,a.yaxis,o,m,"y")}var A=r._anchors={};var M=r.roworder==="top to bottom";for(var S in m){var E=S.charAt(0);var L=r[E+"side"];var C,I,P;if(L.length<8){A[S]="free"}else if(E==="x"){if(L.charAt(0)==="t"===M){C=0;I=1;P=o}else{C=o-1;I=-1;P=-1}if(i){var O=m[S];for(f=C;f!==P;f+=I){d=g[f][O];if(!d)continue;y=d.indexOf("y");if(d.slice(0,y)===S){A[S]=d.slice(y);break}}}else{for(f=C;f!==P;f+=I){p=r.yaxes[f];if(a.cartesian.indexOf(S+p)!==-1){A[S]=p;break}}}}else{if(L.charAt(0)==="l"){C=0;I=1;P=s}else{C=s-1;I=-1;P=-1}if(i){var D=m[S];for(f=C;f!==P;f+=I){d=g[D][f];if(!d)continue;y=d.indexOf("y");if(d.slice(y)===S){A[S]=d.slice(0,y);break}}}else{for(f=C;f!==P;f+=I){v=r.xaxes[f];if(a.cartesian.indexOf(v+S)!==-1){A[S]=v;break}}}}}}function h(e,t,r,n,a){var i=new Array(r);var o;function s(e,r){if(t.indexOf(r)!==-1&&n[r]===undefined){i[e]=r;n[r]=e}else i[e]=""}if(Array.isArray(e)){for(o=0;o<r;o++){s(o,e[o])}}else{s(0,a);for(o=1;o<r;o++){s(o,a+(o+1))}}return i}e.exports={moduleType:"component",name:"grid",schema:{layout:{grid:l}},layoutAttributes:l,sizeDefaults:f,contentDefaults:v}},69819:function(e,t,r){"use strict";var n=r(85555);var a=r(44467).templatedArray;var i=r(24695);e.exports=a("image",{visible:{valType:"boolean",dflt:true,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",n.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",n.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},75378:function(e,t,r){"use strict";var n=r(92770);var a=r(58163);e.exports=function e(t,r,i,o){r=r||{};var s=i==="log"&&r.type==="linear";var l=i==="linear"&&r.type==="log";if(!(s||l))return;var u=t._fullLayout.images;var f=r._id.charAt(0);var c;var v;for(var h=0;h<u.length;h++){c=u[h];v="images["+h+"].";if(c[f+"ref"]===r._id){var p=c[f];var d=c["size"+f];var g=null;var y=null;if(s){g=a(p,r.range);var m=d/Math.pow(10,g)/2;y=2*Math.log(m+Math.sqrt(1+m*m))/Math.LN10}else{g=Math.pow(10,p);y=g*(Math.pow(10,d/2)-Math.pow(10,-d/2))}if(!n(g)){g=null;y=null}else if(!n(y))y=null;o(v+f,g);o(v+"size"+f,y)}}}},81603:function(e,t,r){"use strict";var n=r(71828);var a=r(89298);var i=r(85501);var o=r(69819);var s="images";e.exports=function e(t,r){var n={name:s,handleItemDefaults:l};i(t,r,n)};function l(e,t,r){function i(r,a){return n.coerce(e,t,o,r,a)}var s=i("source");var l=i("visible",!!s);if(!l)return t;i("layer");i("xanchor");i("yanchor");i("sizex");i("sizey");i("sizing");i("opacity");var u={_fullLayout:r};var f=["x","y"];for(var c=0;c<2;c++){var v=f[c];var h=a.coerceRef(e,t,u,v,"paper",undefined);if(h!=="paper"){var p=a.getFromId(u,h);p._imgIndices.push(t._index)}a.coercePosition(t,u,i,h,v,0)}return t}},80750:function(e,t,r){"use strict";var n=r(39898);var a=r(91424);var i=r(89298);var o=r(41675);var s=r(77922);e.exports=function e(t){var r=t._fullLayout;var l=[];var u={};var f=[];var c;var v;for(v=0;v<r.images.length;v++){var h=r.images[v];if(h.visible){if(h.layer==="below"&&h.xref!=="paper"&&h.yref!=="paper"){c=o.ref2id(h.xref)+o.ref2id(h.yref);var p=r._plots[c];if(!p){f.push(h);continue}if(p.mainplot){c=p.mainplot.id}if(!u[c]){u[c]=[]}u[c].push(h)}else if(h.layer==="above"){l.push(h)}else{f.push(h)}}}var d={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function g(e){var r=n.select(this);if(this._imgSrc===e.source){return}r.attr("xmlns",s.svg);if(e.source&&e.source.slice(0,5)==="data:"){r.attr("xlink:href",e.source);this._imgSrc=e.source}else{var a=new Promise(function(t){var n=new Image;this.img=n;n.setAttribute("crossOrigin","anonymous");n.onerror=a;n.onload=function(){var e=document.createElement("canvas");e.width=this.width;e.height=this.height;var n=e.getContext("2d",{willReadFrequently:true});n.drawImage(this,0,0);var a=e.toDataURL("image/png");r.attr("xlink:href",a);t()};r.on("error",a);n.src=e.source;this._imgSrc=e.source;function a(){r.remove();t()}}.bind(this));t._promises.push(a)}}function y(e){var o=n.select(this);var s=i.getFromId(t,e.xref);var l=i.getFromId(t,e.yref);var u=i.getRefType(e.xref)==="domain";var f=i.getRefType(e.yref)==="domain";var c=r._size;var v,h;if(s!==undefined){v=typeof e.xref==="string"&&u?s._length*e.sizex:Math.abs(s.l2p(e.sizex)-s.l2p(0))}else{v=e.sizex*c.w}if(l!==undefined){h=typeof e.yref==="string"&&f?l._length*e.sizey:Math.abs(l.l2p(e.sizey)-l.l2p(0))}else{h=e.sizey*c.h}var p=v*d.x[e.xanchor].offset;var g=h*d.y[e.yanchor].offset;var y=d.x[e.xanchor].sizing+d.y[e.yanchor].sizing;var m,x;if(s!==undefined){m=typeof e.xref==="string"&&u?s._length*e.x+s._offset:s.r2p(e.x)+s._offset}else{m=e.x*c.w+c.l}m+=p;if(l!==undefined){x=typeof e.yref==="string"&&f?l._length*(1-e.y)+l._offset:l.r2p(e.y)+l._offset}else{x=c.h-e.y*c.h+c.t}x+=g;switch(e.sizing){case"fill":y+=" slice";break;case"stretch":y="none";break}o.attr({x:m,y:x,width:v,height:h,preserveAspectRatio:y,opacity:e.opacity});var b=s&&i.getRefType(e.xref)!=="domain"?s._id:"";var _=l&&i.getRefType(e.yref)!=="domain"?l._id:"";var w=b+_;a.setClipUrl(o,w?"clip"+r._uid+w:null,t)}var m=r._imageLowerLayer.selectAll("image").data(f);var x=r._imageUpperLayer.selectAll("image").data(l);m.enter().append("image");x.enter().append("image");m.exit().remove();x.exit().remove();m.each((function(e){g.bind(this)(e);y.bind(this)(e)}));x.each((function(e){g.bind(this)(e);y.bind(this)(e)}));var b=Object.keys(r._plots);for(v=0;v<b.length;v++){c=b[v];var _=r._plots[c];if(!_.imagelayer)continue;var w=_.imagelayer.selectAll("image").data(u[c]||[]);w.enter().append("image");w.exit().remove();w.each((function(e){g.bind(this)(e);y.bind(this)(e)}))}}},68804:function(e,t,r){"use strict";e.exports={moduleType:"component",name:"images",layoutAttributes:r(69819),supplyLayoutDefaults:r(81603),includeBasePlot:r(76325)("images"),draw:r(80750),convertCoords:r(75378)}},33030:function(e,t,r){"use strict";var n=r(41940);var a=r(22399);e.exports={_isSubplotObj:true,visible:{valType:"boolean",dflt:true,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:n({editType:"legend"}),grouptitlefont:n({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",false],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",false],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:n({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},14928:function(e){"use strict";e.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},99017:function(e,t,r){"use strict";var n=r(73972);var a=r(71828);var i=r(44467);var o=r(9012);var s=r(33030);var l=r(10820);var u=r(10130);function f(e,t,r,f){var c=t[e]||{};var v=i.newContainer(r,e);function h(e,t){return a.coerce(c,v,s,e,t)}var p=a.coerceFont(h,"font",r.font);h("bgcolor",r.paper_bgcolor);h("bordercolor");var d=h("visible");if(!d)return;var g;var y=function(e,t){var r=g._input;var n=g;return a.coerce(r,n,o,e,t)};var m=r.font||{};var x=a.coerceFont(h,"grouptitlefont",a.extendFlat({},m,{size:Math.round(m.size*1.1)}));var b=0;var _=false;var w="normal";var T=(r.shapes||[]).filter((function(e){return e.showlegend}));var k=f.concat(T).filter((function(t){return e===(t.legend||"legend")}));for(var A=0;A<k.length;A++){g=k[A];if(!g.visible)continue;var M=g._isShape;if(g.showlegend||g._dfltShowLegend&&!(g._module&&g._module.attributes&&g._module.attributes.showlegend&&g._module.attributes.showlegend.dflt===false)){b++;if(g.showlegend){_=true;if(!M&&n.traceIs(g,"pie-like")||g._input.showlegend===true){b++}}a.coerceFont(y,"legendgrouptitle.font",x)}if(!M&&n.traceIs(g,"bar")&&r.barmode==="stack"||["tonextx","tonexty"].indexOf(g.fill)!==-1){w=u.isGrouped({traceorder:w})?"grouped+reversed":"reversed"}if(g.legendgroup!==undefined&&g.legendgroup!==""){w=u.isReversed({traceorder:w})?"reversed+grouped":"grouped"}}var S=a.coerce(t,r,l,"showlegend",_&&b>(e==="legend"?1:0));if(S===false)r[e]=undefined;if(S===false&&!c.uirevision)return;h("uirevision",r.uirevision);if(S===false)return;h("borderwidth");var E=h("orientation");var L=h("yref");var C=h("xref");var I=E==="h";var P=L==="paper";var O=C==="paper";var D,z,R;var F="left";if(I){D=0;if(n.getComponentMethod("rangeslider","isVisible")(t.xaxis)){if(P){z=1.1;R="bottom"}else{z=1;R="top"}}else{if(P){z=-.1;R="top"}else{z=0;R="bottom"}}}else{z=1;R="auto";if(O){D=1.02}else{D=1;F="right"}}a.coerce(c,v,{x:{valType:"number",editType:"legend",min:O?-2:0,max:O?3:1,dflt:D}},"x");a.coerce(c,v,{y:{valType:"number",editType:"legend",min:P?-2:0,max:P?3:1,dflt:z}},"y");h("traceorder",w);if(u.isGrouped(r[e]))h("tracegroupgap");h("entrywidth");h("entrywidthmode");h("itemsizing");h("itemwidth");h("itemclick");h("itemdoubleclick");h("groupclick");h("xanchor",F);h("yanchor",R);h("valign");a.noneOrAll(c,v,["x","y"]);var B=h("title.text");if(B){h("title.side",I?"left":"top");var N=a.extendFlat({},p,{size:a.bigFont(p.size)});a.coerceFont(h,"title.font",N)}}e.exports=function e(t,r,n){var i;var o=n.slice();var s=r.shapes;if(s){for(i=0;i<s.length;i++){var l=s[i];if(!l.showlegend)continue;var u={_input:l._input,visible:l.visible,showlegend:l.showlegend,legend:l.legend};o.push(u)}}var c=["legend"];for(i=0;i<o.length;i++){a.pushUnique(c,o[i].legend)}r._legends=[];for(i=0;i<c.length;i++){var v=c[i];f(v,t,r,o);if(r[v]&&r[v].visible){r[v]._id=v}r._legends.push(v)}}},43969:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);var i=r(74875);var o=r(73972);var s=r(11086);var l=r(28569);var u=r(91424);var f=r(7901);var c=r(63893);var v=r(85167);var h=r(14928);var p=r(18783);var d=p.LINE_SPACING;var g=p.FROM_TL;var y=p.FROM_BR;var m=r(82424);var x=r(53630);var b=r(10130);var _=1;var w=/^legend[0-9]*$/;e.exports=function e(t,r){if(r){k(t,r)}else{var a=t._fullLayout;var i=a._legends;var o=a._infolayer.selectAll('[class^="legend"]');o.each((function(){var e=n.select(this);var t=e.attr("class");var r=t.split(" ")[0];if(r.match(w)&&i.indexOf(r)===-1){e.remove()}}));for(var s=0;s<i.length;s++){var l=i[s];var u=t._fullLayout[l];k(t,u)}}};function T(e,t,r){if(t.title.side!=="top center"&&t.title.side!=="top right")return;var n=t.title.font;var a=n.size*d;var i=0;var o=e.node();var s=u.bBox(o).width;if(t.title.side==="top center"){i=.5*(t._width-2*r-2*h.titlePad-s)}else if(t.title.side==="top right"){i=t._width-2*r-2*h.titlePad-s}c.positionText(e,r+h.titlePad+i,r+a)}function k(e,t){var r=t||{};var s=e._fullLayout;var c=F(r);var v,p;var d=r._inHover;if(d){p=r.layer;v="hover"}else{p=s._infolayer;v=c}if(!p)return;v+=s._uid;if(!e._legendMouseDownTime)e._legendMouseDownTime=0;var y;if(!d){var b=(e.calcdata||[]).slice();var w=s.shapes;for(var k=0;k<w.length;k++){var A=w[k];if(!A.showlegend)continue;var E={_isShape:true,_fullInput:A,index:A._index,name:A.name||A.label.text||"shape "+A._index,legend:A.legend,legendgroup:A.legendgroup,legendgrouptitle:A.legendgrouptitle,legendrank:A.legendrank,legendwidth:A.legendwidth,showlegend:A.showlegend,visible:A.visible,opacity:A.opacity,mode:A.type==="line"?"lines":"markers",line:A.line,marker:{line:A.line,color:A.fillcolor,size:12,symbol:A.type==="rect"?"square":A.type==="circle"?"circle":"hexagon2"}};b.push([{trace:E}])}y=s.showlegend&&m(b,r,s._legends.length>1)}else{if(!r.entries)return;y=m(r.entries,r)}var I=s.hiddenlabels||[];if(!d&&(!s.showlegend||!y.length)){p.selectAll("."+c).remove();s._topdefs.select("#"+v).remove();return i.autoMargin(e,c)}var P=a.ensureSingle(p,"g",c,(function(e){if(!d)e.attr("pointer-events","all")}));var B=a.ensureSingleById(s._topdefs,"clipPath",v,(function(e){e.append("rect")}));var N=a.ensureSingle(P,"rect","bg",(function(e){e.attr("shape-rendering","crispEdges")}));N.call(f.stroke,r.bordercolor).call(f.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px");var j=a.ensureSingle(P,"g","scrollbox");var U=r.title;r._titleWidth=0;r._titleHeight=0;var V;if(U.text){V=a.ensureSingle(j,"text",c+"titletext");V.attr("text-anchor","start").call(u.font,U.font).text(U.text);C(V,j,e,r,_)}else{j.selectAll("."+c+"titletext").remove()}var H=a.ensureSingle(P,"rect","scrollbar",(function(e){e.attr(h.scrollBarEnterAttrs).call(f.fill,h.scrollBarColor)}));var q=j.selectAll("g.groups").data(y);q.enter().append("g").attr("class","groups");q.exit().remove();var G=q.selectAll("g.traces").data(a.identity);G.enter().append("g").attr("class","traces");G.exit().remove();G.style("opacity",(function(e){var t=e[0].trace;if(o.traceIs(t,"pie-like")){return I.indexOf(e[0].label)!==-1?.5:1}else{return t.visible==="legendonly"?.5:1}})).each((function(){n.select(this).call(S,e,r)})).call(x,e,r).each((function(){if(!d)n.select(this).call(L,e,c)}));a.syncOrAsync([i.previousPromises,function(){return O(e,q,G,r)},function(){var t=s._size;var i=r.borderwidth;var f=r.xref==="paper";var y=r.yref==="paper";if(U.text){T(V,r,i)}if(!d){var m,x;if(f){m=t.l+t.w*r.x-g[z(r)]*r._width}else{m=s.width*r.x-g[z(r)]*r._width}if(y){x=t.t+t.h*(1-r.y)-g[R(r)]*r._effHeight}else{x=s.height*(1-r.y)-g[R(r)]*r._effHeight}var b=D(e,c,m,x);if(b)return;if(s.margin.autoexpand){var _=m;var w=x;m=f?a.constrain(m,0,s.width-r._width):_;x=y?a.constrain(x,0,s.height-r._effHeight):w;if(m!==_){a.log("Constrain "+c+".x to make legend fit inside graph")}if(x!==w){a.log("Constrain "+c+".y to make legend fit inside graph")}}u.setTranslate(P,m,x)}H.on(".drag",null);P.on("wheel",null);if(d||r._height<=r._maxHeight||e._context.staticPlot){var k=r._effHeight;if(d)k=r._height;N.attr({width:r._width-i,height:k-i,x:i/2,y:i/2});u.setTranslate(j,0,0);B.select("rect").attr({width:r._width-2*i,height:k-2*i,x:i,y:i});u.setClipUrl(j,v,e);u.setRect(H,0,0,0,0);delete r._scrollY}else{var A=Math.max(h.scrollBarMinHeight,r._effHeight*r._effHeight/r._height);var S=r._effHeight-A-2*h.scrollBarMargin;var E=r._height-r._effHeight;var L=S/E;var C=Math.min(r._scrollY||0,E);N.attr({width:r._width-2*i+h.scrollBarWidth+h.scrollBarMargin,height:r._effHeight-i,x:i/2,y:i/2});B.select("rect").attr({width:r._width-2*i+h.scrollBarWidth+h.scrollBarMargin,height:r._effHeight-2*i,x:i,y:i+C});u.setClipUrl(j,v,e);W(C,A,L);P.on("wheel",(function(){C=a.constrain(r._scrollY+n.event.deltaY/S*E,0,E);W(C,A,L);if(C!==0&&C!==E){n.event.preventDefault()}}));var I,O,F;var q=function(e,t,r){var n=(r-t)/L+e;return a.constrain(n,0,E)};var G=function(e,t,r){var n=(t-r)/L+e;return a.constrain(n,0,E)};var Z=n.behavior.drag().on("dragstart",(function(){var e=n.event.sourceEvent;if(e.type==="touchstart"){I=e.changedTouches[0].clientY}else{I=e.clientY}F=C})).on("drag",(function(){var e=n.event.sourceEvent;if(e.buttons===2||e.ctrlKey)return;if(e.type==="touchmove"){O=e.changedTouches[0].clientY}else{O=e.clientY}C=q(F,I,O);W(C,A,L)}));H.call(Z);var Y=n.behavior.drag().on("dragstart",(function(){var e=n.event.sourceEvent;if(e.type==="touchstart"){I=e.changedTouches[0].clientY;F=C}})).on("drag",(function(){var e=n.event.sourceEvent;if(e.type==="touchmove"){O=e.changedTouches[0].clientY;C=G(F,I,O);W(C,A,L)}}));j.call(Y)}function W(t,n,a){r._scrollY=e._fullLayout[c]._scrollY=t;u.setTranslate(j,0,-t);u.setRect(H,r._width,h.scrollBarMargin+t*a,h.scrollBarWidth,n);B.select("rect").attr("y",i+t)}if(e._context.edits.legendPosition){var X,J,K,$;P.classed("cursor-move",true);l.init({element:P.node(),gd:e,prepFn:function(){var e=u.getTranslate(P);K=e.x;$=e.y},moveFn:function(e,n){var a=K+e;var i=$+n;u.setTranslate(P,a,i);X=l.align(a,r._width,t.l,t.l+t.w,r.xanchor);J=l.align(i+r._height,-r._height,t.t+t.h,t.t,r.yanchor)},doneFn:function(){if(X!==undefined&&J!==undefined){var t={};t[c+".x"]=X;t[c+".y"]=J;o.call("_guiRelayout",e,t)}},clickFn:function(t,r){var n=p.selectAll("g.traces").filter((function(){var e=this.getBoundingClientRect();return r.clientX>=e.left&&r.clientX<=e.right&&r.clientY>=e.top&&r.clientY<=e.bottom}));if(n.size()>0){M(e,P,n,t,r)}}})}}],e)}function A(e,t,r){var n=e[0];var a=n.width;var i=t.entrywidthmode;var o=n.trace.legendwidth||t.entrywidth;if(i==="fraction")return t._maxWidth*o;return r+(o||a)}function M(e,t,r,n,a){var i=r.data()[0][0].trace;var l={event:a,node:r.node(),curveNumber:i.index,expandedIndex:i._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};if(i._group){l.group=i._group}if(o.traceIs(i,"pie-like")){l.label=r.datum()[0].label}var u=s.triggerHandler(e,"plotly_legendclick",l);if(n===1){if(u===false)return;t._clickTimeout=setTimeout((function(){if(!e._fullLayout)return;v(r,e,n)}),e._context.doubleClickDelay)}else if(n===2){if(t._clickTimeout)clearTimeout(t._clickTimeout);e._legendMouseDownTime=0;var f=s.triggerHandler(e,"plotly_legenddoubleclick",l);if(f!==false&&u!==false)v(r,e,n)}}function S(e,t,r){var n=F(r);var i=e.data()[0][0];var s=i.trace;var l=o.traceIs(s,"pie-like");var f=!r._inHover&&t._context.edits.legendText&&!l;var v=r._maxNameLength;var p,d;if(i.groupTitle){p=i.groupTitle.text;d=i.groupTitle.font}else{d=r.font;if(!r.entries){p=l?i.label:s.name;if(s._meta){p=a.templateString(p,s._meta)}}else{p=i.text}}var g=a.ensureSingle(e,"text",n+"text");g.attr("text-anchor","start").call(u.font,d).text(f?E(p,v):p);var y=r.itemwidth+h.itemGap*2;c.positionText(g,y,0);if(f){g.call(c.makeEditable,{gd:t,text:p}).call(C,e,t,r).on("edit",(function(n){this.text(E(n,v)).call(C,e,t,r);var l=i.trace._fullInput||{};var u={};if(o.hasTransform(l,"groupby")){var f=o.getTransformIndices(l,"groupby");var c=f[f.length-1];var h=a.keyedContainer(l,"transforms["+c+"].styles","target","value.name");h.set(i.trace._group,n);u=h.constructUpdate()}else{u.name=n}if(l._isShape){return o.call("_guiRelayout",t,"shapes["+s.index+"].name",u.name)}else{return o.call("_guiRestyle",t,u,s.index)}}))}else{C(g,e,t,r)}}function E(e,t){var r=Math.max(4,t);if(e&&e.trim().length>=r/2)return e;e=e||"";for(var n=r-e.length;n>0;n--)e+=" ";return e}function L(e,t,r){var i=t._context.doubleClickDelay;var o;var s=1;var l=a.ensureSingle(e,"rect",r+"toggle",(function(e){if(!t._context.staticPlot){e.style("cursor","pointer").attr("pointer-events","all")}e.call(f.fill,"rgba(0,0,0,0)")}));if(t._context.staticPlot)return;l.on("mousedown",(function(){o=(new Date).getTime();if(o-t._legendMouseDownTime<i){s+=1}else{s=1;t._legendMouseDownTime=o}}));l.on("mouseup",(function(){if(t._dragged||t._editing)return;var a=t._fullLayout[r];if((new Date).getTime()-t._legendMouseDownTime>i){s=Math.max(s-1,1)}M(t,a,e,s,n.event)}))}function C(e,t,r,n,a){if(n._inHover)e.attr("data-notex",true);c.convertToTspans(e,r,(function(){I(t,r,n,a)}))}function I(e,t,r,n){var a=e.data()[0][0];if(!r._inHover&&a&&!a.trace.showlegend){e.remove();return}var i=e.select("g[class*=math-group]");var o=i.node();var s=F(r);if(!r){r=t._fullLayout[s]}var l=r.borderwidth;var f;if(n===_){f=r.title.font}else if(a.groupTitle){f=a.groupTitle.font}else{f=r.font}var v=f.size*d;var p,g;if(o){var y=u.bBox(o);p=y.height;g=y.width;if(n===_){u.setTranslate(i,l,l+p*.75)}else{u.setTranslate(i,0,p*.25)}}else{var m="."+s+(n===_?"title":"")+"text";var x=e.select(m);var b=c.lineCount(x);var w=x.node();p=v*b;g=w?u.bBox(w).width:0;if(n===_){if(r.title.side==="left"){g+=h.itemGap*2}c.positionText(x,l+h.titlePad,l+v)}else{var T=h.itemGap*2+r.itemwidth;if(a.groupTitle){T=h.itemGap;g-=r.itemwidth}c.positionText(x,T,-v*((b-1)/2-.3))}}if(n===_){r._titleWidth=g;r._titleHeight=p}else{a.lineHeight=v;a.height=Math.max(p,16)+3;a.width=g}}function P(e){var t=0;var r=0;var n=e.title.side;if(n){if(n.indexOf("left")!==-1){t=e._titleWidth}if(n.indexOf("top")!==-1){r=e._titleHeight}}return[t,r]}function O(e,t,r,a){var i=e._fullLayout;var o=F(a);if(!a){a=i[o]}var s=i._size;var l=b.isVertical(a);var f=b.isGrouped(a);var c=a.entrywidthmode==="fraction";var v=a.borderwidth;var p=2*v;var d=h.itemGap;var g=a.itemwidth+d*2;var y=2*(v+d);var m=R(a);var x=a.y<0||a.y===0&&m==="top";var _=a.y>1||a.y===1&&m==="bottom";var w=a.tracegroupgap;var T={};a._maxHeight=Math.max(x||_?i.height/2:s.h,30);var k=0;a._width=0;a._height=0;var M=P(a);if(l){r.each((function(e){var t=e[0].height;u.setTranslate(this,v+M[0],v+M[1]+a._height+t/2+d);a._height+=t;a._width=Math.max(a._width,e[0].width)}));k=g+a._width;a._width+=d+g+p;a._height+=y;if(f){t.each((function(e,t){u.setTranslate(this,0,t*a.tracegroupgap)}));a._height+=(a._lgroupsLength-1)*a.tracegroupgap}}else{var S=z(a);var E=a.x<0||a.x===0&&S==="right";var L=a.x>1||a.x===1&&S==="left";var C=_||x;var I=i.width/2;a._maxWidth=Math.max(E?C&&S==="left"?s.l+s.w:I:L?C&&S==="right"?s.r+s.w:I:s.w,2*g);var O=0;var D=0;r.each((function(e){var t=A(e,a,g);O=Math.max(O,t);D+=t}));k=null;var B=0;if(f){var N=0;var j=0;var U=0;t.each((function(){var e=0;var t=0;n.select(this).selectAll("g.traces").each((function(r){var n=A(r,a,g);var i=r[0].height;u.setTranslate(this,M[0],M[1]+v+d+i/2+t);t+=i;e=Math.max(e,n);T[r[0].trace.legendgroup]=e}));var r=e+d;if(j>0&&r+v+j>a._maxWidth){B=Math.max(B,j);j=0;U+=N+w;N=t}else{N=Math.max(N,t)}u.setTranslate(this,j,U);j+=r}));a._width=Math.max(B,j)+v;a._height=U+N+y}else{var V=r.size();var H=D+p+(V-1)*d<a._maxWidth;var q=0;var G=0;var Z=0;var Y=0;r.each((function(e){var t=e[0].height;var r=A(e,a,g,f);var n=H?r:O;if(!c){n+=d}if(n+v+G-d>=a._maxWidth){B=Math.max(B,Y);G=0;Z+=q;a._height+=q;q=0}u.setTranslate(this,M[0]+v+G,M[1]+v+Z+t/2+d);Y=G+r+d;G+=n;q=Math.max(q,t)}));if(H){a._width=G+p;a._height=q+y}else{a._width=Math.max(B,Y)+p;a._height+=q+y}}}a._width=Math.ceil(Math.max(a._width+M[0],a._titleWidth+2*(v+h.titlePad)));a._height=Math.ceil(Math.max(a._height+M[1],a._titleHeight+2*(v+h.itemGap)));a._effHeight=Math.min(a._height,a._maxHeight);var W=e._context.edits;var X=W.legendText||W.legendPosition;r.each((function(e){var t=n.select(this).select("."+o+"toggle");var r=e[0].height;var i=e[0].trace.legendgroup;var s=A(e,a,g);if(f&&i!==""){s=T[i]}var v=X?g:k||s;if(!l&&!c){v+=d/2}u.setRect(t,0,-r/2,v,r)}))}function D(e,t,r,n){var a=e._fullLayout;var o=a[t];var s=z(o);var l=R(o);var u=o.xref==="paper";var f=o.yref==="paper";e._fullLayout._reservedMargin[t]={};var c=o.y<.5?"b":"t";var v=o.x<.5?"l":"r";var h={r:a.width-r,l:r+o._width,b:a.height-n,t:n+o._effHeight};if(u&&f){return i.autoMargin(e,t,{x:o.x,y:o.y,l:o._width*g[s],r:o._width*y[s],b:o._effHeight*y[l],t:o._effHeight*g[l]})}else if(u){e._fullLayout._reservedMargin[t][c]=h[c]}else if(f){e._fullLayout._reservedMargin[t][v]=h[v]}else{if(o.orientation==="v"){e._fullLayout._reservedMargin[t][v]=h[v]}else{e._fullLayout._reservedMargin[t][c]=h[c]}}}function z(e){return a.isRightAnchor(e)?"right":a.isCenterAnchor(e)?"center":"left"}function R(e){return a.isBottomAnchor(e)?"bottom":a.isMiddleAnchor(e)?"middle":"top"}function F(e){return e._id||"legend"}},82424:function(e,t,r){"use strict";var n=r(73972);var a=r(10130);e.exports=function e(t,r,i){var o=r._inHover;var s=a.isGrouped(r);var l=a.isReversed(r);var u={};var f=[];var c=false;var v={};var h=0;var p=0;var d,g;function y(e,t,n){if(r.visible===false)return;if(i&&e!==r._id)return;if(t===""||!a.isGrouped(r)){var o="~~i"+h;f.push(o);u[o]=[n];h++}else if(f.indexOf(t)===-1){f.push(t);c=true;u[t]=[n]}else{u[t].push(n)}}for(d=0;d<t.length;d++){var m=t[d];var x=m[0];var b=x.trace;var _=b.legend;var w=b.legendgroup;if(!o&&(!b.visible||!b.showlegend))continue;if(n.traceIs(b,"pie-like")){if(!v[w])v[w]={};for(g=0;g<m.length;g++){var T=m[g].label;if(!v[w][T]){y(_,w,{label:T,color:m[g].color,i:m[g].i,trace:b,pts:m[g].pts});v[w][T]=true;p=Math.max(p,(T||"").length)}}}else{y(_,w,x);p=Math.max(p,(b.name||"").length)}}if(!f.length)return[];var k=!c||!s;var A=[];for(d=0;d<f.length;d++){var M=u[f[d]];if(k){A.push(M[0])}else{A.push(M)}}if(k)A=[A];for(d=0;d<A.length;d++){var S=Infinity;for(g=0;g<A[d].length;g++){var E=A[d][g].trace.legendrank;if(S>E)S=E}A[d][0]._groupMinRank=S;A[d][0]._preGroupSort=d}var L=function(e,t){return e[0]._groupMinRank-t[0]._groupMinRank||e[0]._preGroupSort-t[0]._preGroupSort};var C=function(e,t){return e.trace.legendrank-t.trace.legendrank||e._preSort-t._preSort};A.forEach((function(e,t){e[0]._preGroupSort=t}));A.sort(L);for(d=0;d<A.length;d++){A[d].forEach((function(e,t){e._preSort=t}));A[d].sort(C);var I=A[d][0].trace;var P=null;for(g=0;g<A[d].length;g++){var O=A[d][g].trace.legendgrouptitle;if(O&&O.text){P=O;if(o)O.font=r._groupTitleFont;break}}if(l)A[d].reverse();if(P){var D=false;for(g=0;g<A[d].length;g++){if(n.traceIs(A[d][g].trace,"pie-like")){D=true;break}}A[d].unshift({i:-1,groupTitle:P,noClick:D,trace:{showlegend:I.showlegend,legendgroup:I.legendgroup,visible:r.groupclick==="toggleitem"?true:I.visible}})}for(g=0;g<A[d].length;g++){A[d][g]=[A[d][g]]}}r._lgroupsLength=A.length;r._maxNameLength=p;return A}},85167:function(e,t,r){"use strict";var n=r(73972);var a=r(71828);var i=a.pushUnique;var o=true;e.exports=function e(t,r,s){var l=r._fullLayout;if(r._dragged||r._editing)return;var u=l.legend.itemclick;var f=l.legend.itemdoubleclick;var c=l.legend.groupclick;if(s===1&&u==="toggle"&&f==="toggleothers"&&o&&r.data&&r._context.showTips){a.notifier(a._(r,"Double-click on legend to isolate one trace"),"long");o=false}else{o=false}var v;if(s===1)v=u;else if(s===2)v=f;if(!v)return;var h=c==="togglegroup";var p=l.hiddenlabels?l.hiddenlabels.slice():[];var d=t.data()[0][0];if(d.groupTitle&&d.noClick)return;var g=r._fullData;var y=(l.shapes||[]).filter((function(e){return e.showlegend}));var m=g.concat(y);var x=d.trace;if(x._isShape){x=x._fullInput}var b=x.legendgroup;var _,w,T,k,A,M;var S={};var E=[];var L=[];var C=[];function I(e,t){var r=E.indexOf(e);var n=S.visible;if(!n){n=S.visible=[]}if(E.indexOf(e)===-1){E.push(e);r=E.length-1}n[r]=t;return r}var P=(l.shapes||[]).map((function(e){return e._input}));var O=false;function D(e,t){P[e].visible=t;O=true}function z(e,t){if(d.groupTitle&&!h)return;var r=e._fullInput||e;var i=r._isShape;var o=r.index;if(o===undefined)o=r._index;if(n.hasTransform(r,"groupby")){var s=L[o];if(!s){var l=n.getTransformIndices(r,"groupby");var u=l[l.length-1];s=a.keyedContainer(r,"transforms["+u+"].styles","target","value.visible");L[o]=s}var f=s.get(e._group);if(f===undefined){f=true}if(f!==false){s.set(e._group,t)}C[o]=I(o,r.visible===false?false:true)}else{var c=r.visible===false?false:t;if(i){D(o,c)}else{I(o,c)}}}var R=x.legend;var F=x._fullInput;var B=F&&F._isShape;if(!B&&n.traceIs(x,"pie-like")){var N=d.label;var j=p.indexOf(N);if(v==="toggle"){if(j===-1)p.push(N);else p.splice(j,1)}else if(v==="toggleothers"){var U=j!==-1;var V=[];for(_=0;_<r.calcdata.length;_++){var H=r.calcdata[_];for(w=0;w<H.length;w++){var q=H[w];var G=q.label;if(R===H[0].trace.legend){if(N!==G){if(p.indexOf(G)===-1)U=true;i(p,G);V.push(G)}}}}if(!U){for(var Z=0;Z<V.length;Z++){var Y=p.indexOf(V[Z]);if(Y!==-1){p.splice(Y,1)}}}}n.call("_guiRelayout",r,"hiddenlabels",p)}else{var W=b&&b.length;var X=[];var J;if(W){for(_=0;_<m.length;_++){J=m[_];if(!J.visible)continue;if(J.legendgroup===b){X.push(_)}}}if(v==="toggle"){var K;switch(x.visible){case true:K="legendonly";break;case false:K=false;break;case"legendonly":K=true;break}if(W){if(h){for(_=0;_<m.length;_++){var $=m[_];if($.visible!==false&&$.legendgroup===b){z($,K)}}}else{z(x,K)}}else{z(x,K)}}else if(v==="toggleothers"){var Q,ee,te,re,ne;var ae=true;for(_=0;_<m.length;_++){ne=m[_];Q=ne===x;te=ne.showlegend!==true;if(Q||te)continue;ee=W&&ne.legendgroup===b;if(!ee&&ne.legend===R&&ne.visible===true&&!n.traceIs(ne,"notLegendIsolatable")){ae=false;break}}for(_=0;_<m.length;_++){ne=m[_];if(ne.visible===false||ne.legend!==R)continue;if(n.traceIs(ne,"notLegendIsolatable")){continue}switch(x.visible){case"legendonly":z(ne,true);break;case true:re=ae?true:"legendonly";Q=ne===x;te=ne.showlegend!==true&&!ne.legendgroup;ee=Q||W&&ne.legendgroup===b;z(ne,ee||te?true:re);break}}}for(_=0;_<L.length;_++){T=L[_];if(!T)continue;var ie=T.constructUpdate();var oe=Object.keys(ie);for(w=0;w<oe.length;w++){k=oe[w];M=S[k]=S[k]||[];M[C[_]]=ie[k]}}A=Object.keys(S);for(_=0;_<A.length;_++){k=A[_];for(w=0;w<E.length;w++){if(!S[k].hasOwnProperty(w)){S[k][w]=undefined}}}if(O){n.call("_guiUpdate",r,S,{shapes:P},E)}else{n.call("_guiRestyle",r,S,E)}}}},10130:function(e,t){"use strict";t.isGrouped=function e(t){return(t.traceorder||"").indexOf("grouped")!==-1};t.isVertical=function e(t){return t.orientation!=="h"};t.isReversed=function e(t){return(t.traceorder||"").indexOf("reversed")!==-1}},2199:function(e,t,r){"use strict";e.exports={moduleType:"component",name:"legend",layoutAttributes:r(33030),supplyLayoutDefaults:r(99017),draw:r(43969),style:r(53630)}},53630:function(e,t,r){"use strict";var n=r(39898);var a=r(73972);var i=r(71828);var o=i.strTranslate;var s=r(91424);var l=r(7901);var u=r(52075).extractOpts;var f=r(34098);var c=r(63463);var v=r(53581).castOption;var h=r(14928);var p=12;var d=5;var g=2;var y=10;var m=5;e.exports=function e(t,r,w){var T=r._fullLayout;if(!w)w=T.legend;var k=w.itemsizing==="constant";var A=w.itemwidth;var M=(A+h.itemGap*2)/2;var S=o(M,0);var E=function(e,t,r,n){var a;if(e+1){a=e}else if(t&&t.width>0){a=t.width}else{return 0}return k?n:Math.min(a,r)};t.each((function(e){var t=n.select(this);var r=i.ensureSingle(t,"g","layers");r.style("opacity",e[0].trace.opacity);var a=w.valign;var s=e[0].lineHeight;var l=e[0].height;if(a==="middle"||!s||!l){r.attr("transform",null)}else{var u={top:1,bottom:-1}[a];var f=u*(.5*(s-l+3));r.attr("transform",o(0,f))}var c=r.selectAll("g.legendfill").data([e]);c.enter().append("g").classed("legendfill",true);var v=r.selectAll("g.legendlines").data([e]);v.enter().append("g").classed("legendlines",true);var h=r.selectAll("g.legendsymbols").data([e]);h.enter().append("g").classed("legendsymbols",true);h.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",true)})).each(U).each(I).each(O).each(P).each(z).each(N).each(B).each(L).each(C).each(R).each(F);function L(e){var t=b(e);var a=t.showFill;var o=t.showLine;var l=t.showGradientLine;var c=t.showGradientFill;var v=t.anyFill;var h=t.anyLine;var p=e[0];var g=p.trace;var m,_;var w=u(g);var T=w.colorscale;var k=w.reversescale;var M=function(e){if(e.size()){if(a){s.fillGroupStyle(e,r)}else{var t="legendfill-"+g.uid;s.gradient(e,r,t,x(k),T,"fill")}}};var S=function(e){if(e.size()){var t="legendline-"+g.uid;s.lineGroupStyle(e);s.gradient(e,r,t,x(k),T,"stroke")}};var L=f.hasMarkers(g)||!v?"M5,0":h?"M5,-2":"M5,-3";var C=n.select(this);var I=C.select(".legendfill").selectAll("path").data(a||c?[e]:[]);I.enter().append("path").classed("js-fill",true);I.exit().remove();I.attr("d",L+"h"+A+"v6h-"+A+"z").call(M);if(o||l){var P=E(undefined,g.line,y,d);_=i.minExtend(g,{line:{width:P}});m=[i.minExtend(p,{trace:_})]}var O=C.select(".legendlines").selectAll("path").data(o||l?[m]:[]);O.enter().append("path").classed("js-line",true);O.exit().remove();O.attr("d",L+(l?"l"+A+",0.0001":"h"+A)).call(o?s.lineGroupStyle:S)}function C(e){var t=b(e);var a=t.anyFill;var o=t.anyLine;var l=t.showLine;var u=t.showMarker;var c=e[0];var v=c.trace;var h=!u&&!o&&!a&&f.hasText(v);var y,m;function x(e,t,r,n){var a=i.nestedProperty(v,e).get();var o=i.isArrayOrTypedArray(a)&&t?t(a):a;if(k&&o&&n!==undefined){o=n}if(r){if(o<r[0])return r[0];else if(o>r[1])return r[1]}return o}function _(e){if(c._distinct&&c.index&&e[c.index])return e[c.index];return e[0]}if(u||h||l){var w={};var T={};if(u){w.mc=x("marker.color",_);w.mx=x("marker.symbol",_);w.mo=x("marker.opacity",i.mean,[.2,1]);w.mlc=x("marker.line.color",_);w.mlw=x("marker.line.width",i.mean,[0,5],g);T.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var A=x("marker.size",i.mean,[2,16],p);w.ms=A;T.marker.size=A}if(l){T.line={width:x("line.width",_,[0,10],d)}}if(h){w.tx="Aa";w.tp=x("textposition",_);w.ts=10;w.tc=x("textfont.color",_);w.tf=x("textfont.family",_)}y=[i.minExtend(c,w)];m=i.minExtend(v,T);m.selectedpoints=null;m.texttemplate=null}var M=n.select(this).select("g.legendpoints");var E=M.selectAll("path.scatterpts").data(u?y:[]);E.enter().insert("path",":first-child").classed("scatterpts",true).attr("transform",S);E.exit().remove();E.call(s.pointStyle,m,r);if(u)y[0].mrc=3;var L=M.selectAll("g.pointtext").data(h?y:[]);L.enter().append("g").classed("pointtext",true).append("text").attr("transform",S);L.exit().remove();L.selectAll("text").call(s.textPointStyle,m,r)}function I(e){var t=e[0].trace;var r=t.type==="waterfall";if(e[0]._distinct&&r){var a=e[0].trace[e[0].dir].marker;e[0].mc=a.color;e[0].mlw=a.line.width;e[0].mlc=a.line.color;return D(e,this,"waterfall")}var i=[];if(t.visible&&r){i=e[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]}var o=n.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(i);o.enter().append("path").classed("legendwaterfall",true).attr("transform",S).style("stroke-miterlimit",1);o.exit().remove();o.each((function(e){var r=n.select(this);var a=t[e[0]].marker;var i=E(undefined,a.line,m,g);r.attr("d",e[1]).style("stroke-width",i+"px").call(l.fill,a.color);if(i){r.call(l.stroke,a.line.color)}}))}function P(e){D(e,this)}function O(e){D(e,this,"funnel")}function D(e,t,i){var o=e[0].trace;var f=o.marker||{};var c=f.line||{};var v=!i?a.traceIs(o,"bar"):o.visible&&o.type===i;var h=n.select(t).select("g.legendpoints").selectAll("path.legend"+i).data(v?[e]:[]);h.enter().append("path").classed("legend"+i,true).attr("d","M6,6H-6V-6H6Z").attr("transform",S);h.exit().remove();h.each((function(e){var t=n.select(this);var a=e[0];var i=E(a.mlw,f.line,m,g);t.style("stroke-width",i+"px");var v=a.mcc;if(!w._inHover&&"mc"in a){var h=u(f);var p=h.mid;if(p===undefined)p=(h.max+h.min)/2;v=s.tryColorscale(f,"")(p)}var d=v||a.mc||f.color;var y=f.pattern;var x=y&&s.getPatternAttr(y.shape,0,"");if(x){var b=s.getPatternAttr(y.bgcolor,0,null);var T=s.getPatternAttr(y.fgcolor,0,null);var k=y.fgopacity;var A=_(y.size,8,10);var M=_(y.solidity,.5,1);var S="legend-"+o.uid;t.call(s.pattern,"legend",r,S,x,A,M,v,y.fillmode,b,T,k)}else{t.call(l.fill,d)}if(i)l.stroke(t,a.mlc||c.color)}))}function z(e){var t=e[0].trace;var o=n.select(this).select("g.legendpoints").selectAll("path.legendbox").data(t.visible&&a.traceIs(t,"box-violin")?[e]:[]);o.enter().append("path").classed("legendbox",true).attr("d","M6,6H-6V-6H6Z").attr("transform",S);o.exit().remove();o.each((function(){var e=n.select(this);if((t.boxpoints==="all"||t.points==="all")&&l.opacity(t.fillcolor)===0&&l.opacity((t.line||{}).color)===0){var a=i.minExtend(t,{marker:{size:k?p:i.constrain(t.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});o.call(s.pointStyle,a,r)}else{var u=E(undefined,t.line,m,g);e.style("stroke-width",u+"px").call(l.fill,t.fillcolor);if(u)l.stroke(e,t.line.color)}}))}function R(e){var t=e[0].trace;var r=n.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(t.visible&&t.type==="candlestick"?[e,e]:[]);r.enter().append("path").classed("legendcandle",true).attr("d",(function(e,t){if(t)return"M-15,0H-8M-8,6V-6H8Z";return"M15,0H8M8,-6V6H-8Z"})).attr("transform",S).style("stroke-miterlimit",1);r.exit().remove();r.each((function(e,r){var a=n.select(this);var i=t[r?"increasing":"decreasing"];var o=E(undefined,i.line,m,g);a.style("stroke-width",o+"px").call(l.fill,i.fillcolor);if(o)l.stroke(a,i.line.color)}))}function F(e){var t=e[0].trace;var r=n.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(t.visible&&t.type==="ohlc"?[e,e]:[]);r.enter().append("path").classed("legendohlc",true).attr("d",(function(e,t){if(t)return"M-15,0H0M-8,-6V0";return"M15,0H0M8,6V0"})).attr("transform",S).style("stroke-miterlimit",1);r.exit().remove();r.each((function(e,r){var a=n.select(this);var i=t[r?"increasing":"decreasing"];var o=E(undefined,i.line,m,g);a.style("fill","none").call(s.dashLine,i.line.dash,o);if(o)l.stroke(a,i.line.color)}))}function B(e){j(e,this,"pie")}function N(e){j(e,this,"funnelarea")}function j(e,t,o){var s=e[0];var l=s.trace;var u=!o?a.traceIs(l,o):l.visible&&l.type===o;var f=n.select(t).select("g.legendpoints").selectAll("path.legend"+o).data(u?[e]:[]);f.enter().append("path").classed("legend"+o,true).attr("d","M6,6H-6V-6H6Z").attr("transform",S);f.exit().remove();if(f.size()){var h=l.marker||{};var p=E(v(h.line.width,s.pts),h.line,m,g);var d="pieLike";var y=i.minExtend(l,{marker:{line:{width:p}}},d);var x=i.minExtend(s,{trace:y},d);c(f,x,y,r)}}function U(e){var t=e[0].trace;var a;var o=[];if(t.visible){switch(t.type){case"histogram2d":case"heatmap":o=[["M-15,-2V4H15V-2Z"]];a=true;break;case"choropleth":case"choroplethmapbox":o=[["M-6,-6V6H6V-6Z"]];a=true;break;case"densitymapbox":o=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]];a="radial";break;case"cone":o=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]];a=false;break;case"streamtube":o=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]];a=false;break;case"surface":o=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]];a=true;break;case"mesh3d":o=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];a=false;break;case"volume":o=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];a=true;break;case"isosurface":o=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]];a=false;break}}var f=n.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(o);f.enter().append("path").classed("legend3dandfriends",true).attr("transform",S).style("stroke-miterlimit",1);f.exit().remove();f.each((function(e,o){var f=n.select(this);var c=u(t);var v=c.colorscale;var h=c.reversescale;var p=function(e){if(e.size()){var n="legendfill-"+t.uid;s.gradient(e,r,n,x(h,a==="radial"),v,"fill")}};var d;if(!v){var g=t.vertexcolor||t.facecolor||t.color;d=i.isArrayOrTypedArray(g)?g[o]||g[0]:g}else{if(!a){var y=v.length;d=o===0?v[h?y-1:0][1]:o===1?v[h?0:y-1][1]:v[Math.floor((y-1)/2)][1]}}f.attr("d",e[0]);if(d){f.call(l.fill,d)}else{f.call(p)}}))}};function x(e,t){var r=t?"radial":"horizontal";return r+(e?"":"reversed")}function b(e){var t=e[0].trace;var r=t.contours;var n=f.hasLines(t);var a=f.hasMarkers(t);var i=t.visible&&t.fill&&t.fill!=="none";var o=false;var s=false;if(r){var l=r.coloring;if(l==="lines"){o=true}else{n=l==="none"||l==="heatmap"||r.showlines}if(r.type==="constraint"){i=r._operation!=="="}else if(l==="fill"||l==="heatmap"){s=true}}return{showMarker:a,showLine:n,showFill:i,showGradientLine:o,showGradientFill:s,anyLine:n||o,anyFill:i||s}}function _(e,t,r){if(e&&i.isArrayOrTypedArray(e))return t;if(e>r)return r;return e}},42068:function(e,t,r){"use strict";var n=r(93348);e.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:true,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:true,dflt:"",editType:"modebar"}}},26023:function(e,t,r){"use strict";var n=r(73972);var a=r(74875);var i=r(41675);var o=r(24255);var s=r(34031).eraseActiveShape;var l=r(71828);var u=l._;var f=e.exports={};f.toImage={name:"toImage",title:function(e){var t=e._context.toImageButtonOptions||{};var r=t.format||"png";return r==="png"?u(e,"Download plot as a png"):u(e,"Download plot")},icon:o.camera,click:function(e){var t=e._context.toImageButtonOptions;var r={format:t.format||"png"};l.notifier(u(e,"Taking snapshot - this may take a few seconds"),"long");if(r.format!=="svg"&&l.isIE()){l.notifier(u(e,"IE only supports svg.  Changing format to svg."),"long");r.format="svg"}["filename","width","height","scale"].forEach((function(e){if(e in t){r[e]=t[e]}}));n.call("downloadImage",e,r).then((function(t){l.notifier(u(e,"Snapshot succeeded")+" - "+t,"long")})).catch((function(){l.notifier(u(e,"Sorry, there was a problem downloading your snapshot!"),"long")}))}};f.sendDataToCloud={name:"sendDataToCloud",title:function(e){return u(e,"Edit in Chart Studio")},icon:o.disk,click:function(e){a.sendDataToCloud(e)}};f.editInChartStudio={name:"editInChartStudio",title:function(e){return u(e,"Edit in Chart Studio")},icon:o.pencil,click:function(e){a.sendDataToCloud(e)}};f.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return u(e,"Zoom")},attr:"dragmode",val:"zoom",icon:o.zoombox,click:c};f.pan2d={name:"pan2d",_cat:"pan",title:function(e){return u(e,"Pan")},attr:"dragmode",val:"pan",icon:o.pan,click:c};f.select2d={name:"select2d",_cat:"select",title:function(e){return u(e,"Box Select")},attr:"dragmode",val:"select",icon:o.selectbox,click:c};f.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return u(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:o.lasso,click:c};f.drawclosedpath={name:"drawclosedpath",title:function(e){return u(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:o.drawclosedpath,click:c};f.drawopenpath={name:"drawopenpath",title:function(e){return u(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:o.drawopenpath,click:c};f.drawline={name:"drawline",title:function(e){return u(e,"Draw line")},attr:"dragmode",val:"drawline",icon:o.drawline,click:c};f.drawrect={name:"drawrect",title:function(e){return u(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:o.drawrect,click:c};f.drawcircle={name:"drawcircle",title:function(e){return u(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:o.drawcircle,click:c};f.eraseshape={name:"eraseshape",title:function(e){return u(e,"Erase active shape")},icon:o.eraseshape,click:s};f.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return u(e,"Zoom in")},attr:"zoom",val:"in",icon:o.zoom_plus,click:c};f.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return u(e,"Zoom out")},attr:"zoom",val:"out",icon:o.zoom_minus,click:c};f.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return u(e,"Autoscale")},attr:"zoom",val:"auto",icon:o.autoscale,click:c};f.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return u(e,"Reset axes")},attr:"zoom",val:"reset",icon:o.home,click:c};f.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return u(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:o.tooltip_basic,gravity:"ne",click:c};f.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return u(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:o.tooltip_compare,gravity:"ne",click:c};function c(e,t){var r=t.currentTarget;var a=r.getAttribute("data-attr");var o=r.getAttribute("data-val")||true;var s=e._fullLayout;var l={};var u=i.list(e,null,true);var f=s._cartesianSpikesEnabled;var c,v;if(a==="zoom"){var h=o==="in"?.5:2;var p=(1+h)/2;var d=(1-h)/2;var g;for(v=0;v<u.length;v++){c=u[v];if(!c.fixedrange){g=c._name;if(o==="auto"){l[g+".autorange"]=true}else if(o==="reset"){if(c._rangeInitial0===undefined&&c._rangeInitial1===undefined){l[g+".autorange"]=true}else if(c._rangeInitial0===undefined){l[g+".autorange"]=c._autorangeInitial;l[g+".range"]=[null,c._rangeInitial1]}else if(c._rangeInitial1===undefined){l[g+".range"]=[c._rangeInitial0,null];l[g+".autorange"]=c._autorangeInitial}else{l[g+".range"]=[c._rangeInitial0,c._rangeInitial1]}if(c._showSpikeInitial!==undefined){l[g+".showspikes"]=c._showSpikeInitial;if(f==="on"&&!c._showSpikeInitial){f="off"}}}else{var y=[c.r2l(c.range[0]),c.r2l(c.range[1])];var m=[p*y[0]+d*y[1],p*y[1]+d*y[0]];l[g+".range[0]"]=c.l2r(m[0]);l[g+".range[1]"]=c.l2r(m[1])}}}}else{if(a==="hovermode"&&(o==="x"||o==="y")){o=s._isHoriz?"y":"x";r.setAttribute("data-val",o)}l[a]=o}s._cartesianSpikesEnabled=f;n.call("_guiRelayout",e,l)}f.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return u(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:o.zoombox,click:v};f.pan3d={name:"pan3d",_cat:"pan",title:function(e){return u(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:o.pan,click:v};f.orbitRotation={name:"orbitRotation",title:function(e){return u(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:o["3d_rotate"],click:v};f.tableRotation={name:"tableRotation",title:function(e){return u(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:o["z-axis"],click:v};function v(e,t){var r=t.currentTarget;var a=r.getAttribute("data-attr");var i=r.getAttribute("data-val")||true;var o=e._fullLayout._subplots.gl3d||[];var s={};var l=a.split(".");for(var u=0;u<o.length;u++){s[o[u]+"."+l[1]]=i}var f=i==="pan"?i:"zoom";s.dragmode=f;n.call("_guiRelayout",e,s)}f.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return u(e,"Reset camera to default")},attr:"resetDefault",icon:o.home,click:h};f.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return u(e,"Reset camera to last save")},attr:"resetLastSave",icon:o.movie,click:h};function h(e,t){var r=t.currentTarget;var a=r.getAttribute("data-attr");var i=a==="resetLastSave";var o=a==="resetDefault";var s=e._fullLayout;var l=s._subplots.gl3d||[];var u={};for(var f=0;f<l.length;f++){var c=l[f];var v=c+".camera";var h=c+".aspectratio";var p=c+".aspectmode";var d=s[c]._scene;var g;if(i){u[v+".up"]=d.viewInitial.up;u[v+".eye"]=d.viewInitial.eye;u[v+".center"]=d.viewInitial.center;g=true}else if(o){u[v+".up"]=null;u[v+".eye"]=null;u[v+".center"]=null;g=true}if(g){u[h+".x"]=d.viewInitial.aspectratio.x;u[h+".y"]=d.viewInitial.aspectratio.y;u[h+".z"]=d.viewInitial.aspectratio.z;u[p]=d.viewInitial.aspectmode}}n.call("_guiRelayout",e,u)}f.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return u(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:o.tooltip_basic,gravity:"ne",click:d};function p(e,t){var r=t.currentTarget;var n=r._previousVal;var a=e._fullLayout;var i=a._subplots.gl3d||[];var o=["xaxis","yaxis","zaxis"];var s={};var l={};if(n){l=n;r._previousVal=null}else{for(var u=0;u<i.length;u++){var f=i[u];var c=a[f];var v=f+".hovermode";s[v]=c.hovermode;l[v]=false;for(var h=0;h<3;h++){var p=o[h];var d=f+"."+p+".showspikes";l[d]=false;s[d]=c[p].showspikes}}r._previousVal=s}return l}function d(e,t){var r=p(e,t);n.call("_guiRelayout",e,r)}f.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return u(e,"Zoom in")},attr:"zoom",val:"in",icon:o.zoom_plus,click:g};f.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return u(e,"Zoom out")},attr:"zoom",val:"out",icon:o.zoom_minus,click:g};f.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return u(e,"Reset")},attr:"reset",val:null,icon:o.autoscale,click:g};f.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return u(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:o.tooltip_basic,gravity:"ne",click:m};function g(e,t){var r=t.currentTarget;var a=r.getAttribute("data-attr");var i=r.getAttribute("data-val")||true;var o=e._fullLayout;var s=o._subplots.geo||[];for(var l=0;l<s.length;l++){var u=s[l];var f=o[u];if(a==="zoom"){var c=f.projection.scale;var v=i==="in"?2*c:.5*c;n.call("_guiRelayout",e,u+".projection.scale",v)}}if(a==="reset"){_(e,"geo")}}f.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return u(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:o.tooltip_basic,gravity:"ne",click:m};f.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return u(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:o.tooltip_basic,gravity:"ne",click:m};function y(e){var t=e._fullLayout;if(t.hovermode)return false;if(t._has("cartesian")){return t._isHoriz?"y":"x"}return"closest"}function m(e){var t=y(e);n.call("_guiRelayout",e,"hovermode",t)}f.resetViewSankey={name:"resetSankeyGroup",title:function(e){return u(e,"Reset view")},icon:o.home,click:function(e){var t={"node.groups":[],"node.x":[],"node.y":[]};for(var r=0;r<e._fullData.length;r++){var a=e._fullData[r]._viewInitial;t["node.groups"].push(a.node.groups.slice());t["node.x"].push(a.node.x.slice());t["node.y"].push(a.node.y.slice())}n.call("restyle",e,t)}};f.toggleHover={name:"toggleHover",title:function(e){return u(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:o.tooltip_basic,gravity:"ne",click:function(e,t){var r=p(e,t);r.hovermode=y(e);n.call("_guiRelayout",e,r)}};f.resetViews={name:"resetViews",title:function(e){return u(e,"Reset views")},icon:o.home,click:function(e,t){var r=t.currentTarget;r.setAttribute("data-attr","zoom");r.setAttribute("data-val","reset");c(e,t);r.setAttribute("data-attr","resetLastSave");h(e,t);_(e,"geo");_(e,"mapbox")}};f.toggleSpikelines={name:"toggleSpikelines",title:function(e){return u(e,"Toggle Spike Lines")},icon:o.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout;var r=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled=r==="on"?"off":"on";n.call("_guiRelayout",e,x(e))}};function x(e){var t=e._fullLayout;var r=t._cartesianSpikesEnabled==="on";var n=i.list(e,null,true);var a={};for(var o=0;o<n.length;o++){var s=n[o];a[s._name+".showspikes"]=r?true:s._showSpikeInitial}return a}f.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return u(e,"Reset view")},attr:"reset",icon:o.home,click:function(e){_(e,"mapbox")}};f.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return u(e,"Zoom in")},attr:"zoom",val:"in",icon:o.zoom_plus,click:b};f.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return u(e,"Zoom out")},attr:"zoom",val:"out",icon:o.zoom_minus,click:b};function b(e,t){var r=t.currentTarget;var a=r.getAttribute("data-val");var i=e._fullLayout;var o=i._subplots.mapbox||[];var s=1.05;var l={};for(var u=0;u<o.length;u++){var f=o[u];var c=i[f].zoom;var v=a==="in"?s*c:c/s;l[f+".zoom"]=v}n.call("_guiRelayout",e,l)}function _(e,t){var r=e._fullLayout;var a=r._subplots[t]||[];var i={};for(var o=0;o<a.length;o++){var s=a[o];var l=r[s]._subplot;var u=l.viewInitial;var f=Object.keys(u);for(var c=0;c<f.length;c++){var v=f[c];i[s+"."+v]=u[v]}}n.call("_guiRelayout",e,i)}},93348:function(e,t,r){"use strict";var n=r(26023);var a=Object.keys(n);var i=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"];var o=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(i);var s=[];var l=function(e){if(o.indexOf(e._cat||e.name)!==-1)return;var t=e.name;var r=(e._cat||e.name).toLowerCase();if(s.indexOf(t)===-1)s.push(t);if(s.indexOf(r)===-1)s.push(r)};a.forEach((function(e){l(n[e])}));s.sort();e.exports={DRAW_MODES:i,backButtons:o,foreButtons:s}},35750:function(e,t,r){"use strict";var n=r(71828);var a=r(7901);var i=r(44467);var o=r(42068);e.exports=function e(t,r){var s=t.modebar||{};var l=i.newContainer(r,"modebar");function u(e,t){return n.coerce(s,l,o,e,t)}u("orientation");u("bgcolor",a.addOpacity(r.paper_bgcolor,.5));var f=a.contrast(a.rgb(r.modebar.bgcolor));u("color",a.addOpacity(f,.3));u("activecolor",a.addOpacity(f,.7));u("uirevision",r.uirevision);u("add");u("remove")}},64168:function(e,t,r){"use strict";e.exports={moduleType:"component",name:"modebar",layoutAttributes:r(42068),supplyLayoutDefaults:r(35750),manage:r(14192)}},14192:function(e,t,r){"use strict";var n=r(41675);var a=r(34098);var i=r(73972);var o=r(23469).isUnifiedHover;var s=r(37676);var l=r(26023);var u=r(93348).DRAW_MODES;var f=r(71828).extendDeep;e.exports=function e(t){var r=t._fullLayout;var n=t._context;var a=r._modeBar;if(!n.displayModeBar&&!n.watermark){if(a){a.destroy();delete r._modeBar}return}if(!Array.isArray(n.modeBarButtonsToRemove)){throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "))}if(!Array.isArray(n.modeBarButtonsToAdd)){throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "))}var i=n.modeBarButtons;var o;if(Array.isArray(i)&&i.length){o=g(i)}else if(!n.displayModeBar&&n.watermark){o=[]}else{o=c(t)}if(a)a.update(t,o);else r._modeBar=s(t,o)};function c(e){var t=e._fullLayout;var r=e._fullData;var n=e._context;function a(e,t){if(typeof t==="string"){if(t.toLowerCase()===e.toLowerCase())return true}else{var r=t.name;var n=t._cat||t.name;if(r===e||n===e.toLowerCase())return true}return false}var i=t.modebar.add;if(typeof i==="string")i=[i];var s=t.modebar.remove;if(typeof s==="string")s=[s];var f=n.modeBarButtonsToAdd.concat(i.filter((function(e){for(var t=0;t<n.modeBarButtonsToRemove.length;t++){if(a(e,n.modeBarButtonsToRemove[t]))return false}return true})));var c=n.modeBarButtonsToRemove.concat(s.filter((function(e){for(var t=0;t<n.modeBarButtonsToAdd.length;t++){if(a(e,n.modeBarButtonsToAdd[t]))return false}return true})));var g=t._has("cartesian");var y=t._has("gl3d");var m=t._has("geo");var x=t._has("pie");var b=t._has("funnelarea");var _=t._has("gl2d");var w=t._has("ternary");var T=t._has("mapbox");var k=t._has("polar");var A=t._has("smith");var M=t._has("sankey");var S=v(t);var E=o(t.hovermode);var L=[];function C(e){if(!e.length)return;var t=[];for(var r=0;r<e.length;r++){var n=e[r];var a=l[n];var i=a.name.toLowerCase();var o=(a._cat||a.name).toLowerCase();var s=false;for(var u=0;u<c.length;u++){var f=c[u].toLowerCase();if(f===i||f===o){s=true;break}}if(s)continue;t.push(l[n])}L.push(t)}var I=["toImage"];if(n.showEditInChartStudio)I.push("editInChartStudio");else if(n.showSendToCloud)I.push("sendDataToCloud");C(I);var P=[];var O=[];var D=[];var z=[];if((g||_||x||b||w)+m+y+T+k+A>1){O=["toggleHover"];D=["resetViews"]}else if(m){P=["zoomInGeo","zoomOutGeo"];O=["hoverClosestGeo"];D=["resetGeo"]}else if(y){O=["hoverClosest3d"];D=["resetCameraDefault3d","resetCameraLastSave3d"]}else if(T){P=["zoomInMapbox","zoomOutMapbox"];O=["toggleHover"];D=["resetViewMapbox"]}else if(_){O=["hoverClosestGl2d"]}else if(x){O=["hoverClosestPie"]}else if(M){O=["hoverClosestCartesian","hoverCompareCartesian"];D=["resetViewSankey"]}else{O=["toggleHover"]}if(g){O=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]}if(p(r)||E){O=[]}if((g||_)&&!S){P=["zoomIn2d","zoomOut2d","autoScale2d"];if(D[0]!=="resetViews")D=["resetScale2d"]}if(y){z=["zoom3d","pan3d","orbitRotation","tableRotation"]}else if((g||_)&&!S||w){z=["zoom2d","pan2d"]}else if(T||m){z=["pan2d"]}else if(k){z=["zoom2d"]}if(h(r)){z.push("select2d","lasso2d")}var R=[];var F=function(e){if(R.indexOf(e)!==-1)return;if(O.indexOf(e)!==-1){R.push(e)}};if(Array.isArray(f)){var B=[];for(var N=0;N<f.length;N++){var j=f[N];if(typeof j==="string"){j=j.toLowerCase();if(u.indexOf(j)!==-1){if(t._has("mapbox")||t._has("cartesian")){z.push(j)}}else if(j==="togglespikelines"){F("toggleSpikelines")}else if(j==="togglehover"){F("toggleHover")}else if(j==="hovercompare"){F("hoverCompareCartesian")}else if(j==="hoverclosest"){F("hoverClosestCartesian");F("hoverClosestGeo");F("hoverClosest3d");F("hoverClosestGl2d");F("hoverClosestPie")}else if(j==="v1hovermode"){F("toggleHover");F("hoverClosestCartesian");F("hoverCompareCartesian");F("hoverClosestGeo");F("hoverClosest3d");F("hoverClosestGl2d");F("hoverClosestPie")}}else B.push(j)}f=B}C(z);C(P.concat(D));C(R);return d(L,f)}function v(e){var t=n.list({_fullLayout:e},null,true);for(var r=0;r<t.length;r++){if(!t[r].fixedrange){return false}}return true}function h(e){var t=false;for(var r=0;r<e.length;r++){if(t)break;var n=e[r];if(!n._module||!n._module.selectPoints)continue;if(i.traceIs(n,"scatter-like")){if(a.hasMarkers(n)||a.hasText(n)){t=true}}else if(i.traceIs(n,"box-violin")){if(n.boxpoints==="all"||n.points==="all"){t=true}}else{t=true}}return t}function p(e){for(var t=0;t<e.length;t++){if(!i.traceIs(e[t],"noHover"))return false}return true}function d(e,t){if(t.length){if(Array.isArray(t[0])){for(var r=0;r<t.length;r++){e.push(t[r])}}else e.push(t)}return e}function g(e){var t=f([],e);for(var r=0;r<t.length;r++){var n=t[r];for(var a=0;a<n.length;a++){var i=n[a];if(typeof i==="string"){if(l[i]!==undefined){t[r][a]=l[i]}else{throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}}}}return t}},37676:function(e,t,r){"use strict";var n=r(39898);var a=r(92770);var i=r(71828);var o=r(24255);var s=r(11506).version;var l=new DOMParser;function u(e){this.container=e.container;this.element=document.createElement("div");this.update(e.graphInfo,e.buttons);this.container.appendChild(this.element)}var f=u.prototype;f.update=function(e,t){this.graphInfo=e;var r=this.graphInfo._context;var n=this.graphInfo._fullLayout;var a="modebar-"+n._uid;this.element.setAttribute("id",a);this._uid=a;this.element.className="modebar";if(r.displayModeBar==="hover")this.element.className+=" modebar--hover ease-bg";if(n.modebar.orientation==="v"){this.element.className+=" vertical";t=t.reverse()}var o=n.modebar;var s=r.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";i.deleteRelatedStyleRule(a);i.addRelatedStyleRule(a,s+"#"+a+" .modebar-group","background-color: "+o.bgcolor);i.addRelatedStyleRule(a,"#"+a+" .modebar-btn .icon path","fill: "+o.color);i.addRelatedStyleRule(a,"#"+a+" .modebar-btn:hover .icon path","fill: "+o.activecolor);i.addRelatedStyleRule(a,"#"+a+" .modebar-btn.active .icon path","fill: "+o.activecolor);var l=!this.hasButtons(t);var u=this.hasLogo!==r.displaylogo;var f=this.locale!==r.locale;this.locale=r.locale;if(l||u||f){this.removeAllButtons();this.updateButtons(t);if(r.watermark||r.displaylogo){var c=this.getLogo();if(r.watermark){c.className=c.className+" watermark"}if(n.modebar.orientation==="v"){this.element.insertBefore(c,this.element.childNodes[0])}else{this.element.appendChild(c)}this.hasLogo=true}}this.updateActiveButton()};f.updateButtons=function(e){var t=this;this.buttons=e;this.buttonElements=[];this.buttonsNames=[];this.buttons.forEach((function(e){var r=t.createGroup();e.forEach((function(e){var n=e.name;if(!n){throw new Error("must provide button 'name' in button config")}if(t.buttonsNames.indexOf(n)!==-1){throw new Error("button name '"+n+"' is taken")}t.buttonsNames.push(n);var a=t.createButton(e);t.buttonElements.push(a);r.appendChild(a)}));t.element.appendChild(r)}))};f.createGroup=function(){var e=document.createElement("div");e.className="modebar-group";return e};f.createButton=function(e){var t=this;var r=document.createElement("a");r.setAttribute("rel","tooltip");r.className="modebar-btn";var a=e.title;if(a===undefined)a=e.name;else if(typeof a==="function")a=a(this.graphInfo);if(a||a===0)r.setAttribute("data-title",a);if(e.attr!==undefined)r.setAttribute("data-attr",e.attr);var i=e.val;if(i!==undefined){if(typeof i==="function")i=i(this.graphInfo);r.setAttribute("data-val",i)}var s=e.click;if(typeof s!=="function"){throw new Error("must provide button 'click' function in button config")}else{r.addEventListener("click",(function(r){e.click(t.graphInfo,r);t.updateActiveButton(r.currentTarget)}))}r.setAttribute("data-toggle",e.toggle||false);if(e.toggle)n.select(r).classed("active",true);var l=e.icon;if(typeof l==="function"){r.appendChild(l())}else{r.appendChild(this.createIcon(l||o.question))}r.setAttribute("data-gravity",e.gravity||"n");return r};f.createIcon=function(e){var t=a(e.height)?Number(e.height):e.ascent-e.descent;var r="http://www.w3.org/2000/svg";var n;if(e.path){n=document.createElementNS(r,"svg");n.setAttribute("viewBox",[0,0,e.width,t].join(" "));n.setAttribute("class","icon");var i=document.createElementNS(r,"path");i.setAttribute("d",e.path);if(e.transform){i.setAttribute("transform",e.transform)}else if(e.ascent!==undefined){i.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")")}n.appendChild(i)}if(e.svg){var o=l.parseFromString(e.svg,"application/xml");n=o.childNodes[0]}n.setAttribute("height","1em");n.setAttribute("width","1em");return n};f.updateActiveButton=function(e){var t=this.graphInfo._fullLayout;var r=e!==undefined?e.getAttribute("data-attr"):null;this.buttonElements.forEach((function(e){var a=e.getAttribute("data-val")||true;var o=e.getAttribute("data-attr");var s=e.getAttribute("data-toggle")==="true";var l=n.select(e);if(s){if(o===r){l.classed("active",!l.classed("active"))}}else{var u=o===null?o:i.nestedProperty(t,o).get();l.classed("active",u===a)}}))};f.hasButtons=function(e){var t=this.buttons;if(!t)return false;if(e.length!==t.length)return false;for(var r=0;r<e.length;++r){if(e[r].length!==t[r].length)return false;for(var n=0;n<e[r].length;n++){if(e[r][n].name!==t[r][n].name)return false}}return true};function c(e){return e+" (v"+s+")"}f.getLogo=function(){var e=this.createGroup();var t=document.createElement("a");t.href="https://plotly.com/";t.target="_blank";t.setAttribute("data-title",c(i._(this.graphInfo,"Produced with Plotly.js")));t.className="modebar-btn plotlyjsicon modebar-btn--logo";t.appendChild(this.createIcon(o.newplotlylogo));e.appendChild(t);return e};f.removeAllButtons=function(){while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}this.hasLogo=false};f.destroy=function(){i.removeElement(this.container.querySelector(".modebar"));i.deleteRelatedStyleRule(this._uid)};function v(e,t){var r=e._fullLayout;var a=new u({graphInfo:e,container:r._modebardiv.node(),buttons:t});if(r._privateplot){n.select(a.element).append("span").classed("badge-private float--left",true).text("PRIVATE")}return a}e.exports=v},37113:function(e,t,r){"use strict";var n=r(41940);var a=r(22399);var i=r(44467).templatedArray;var o=i("button",{visible:{valType:"boolean",dflt:true,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});e.exports={visible:{valType:"boolean",editType:"plot"},buttons:o,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:n({editType:"plot"}),bgcolor:{valType:"color",dflt:a.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},89573:function(e){"use strict";e.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},28674:function(e,t,r){"use strict";var n=r(71828);var a=r(7901);var i=r(44467);var o=r(85501);var s=r(37113);var l=r(89573);e.exports=function e(t,r,c,v,h){var p=t.rangeselector||{};var d=i.newContainer(r,"rangeselector");function g(e,t){return n.coerce(p,d,s,e,t)}var y=o(p,d,{name:"buttons",handleItemDefaults:u,calendar:h});var m=g("visible",y.length>0);if(m){var x=f(r,c,v);g("x",x[0]);g("y",x[1]);n.noneOrAll(t,r,["x","y"]);g("xanchor");g("yanchor");n.coerceFont(g,"font",c.font);var b=g("bgcolor");g("activecolor",a.contrast(b,l.lightAmount,l.darkAmount));g("bordercolor");g("borderwidth")}};function u(e,t,r,a){var i=a.calendar;function o(r,a){return n.coerce(e,t,s.buttons,r,a)}var l=o("visible");if(l){var u=o("step");if(u!=="all"){if(i&&i!=="gregorian"&&(u==="month"||u==="year")){t.stepmode="backward"}else{o("stepmode")}o("count")}o("label")}}function f(e,t,r){var n=r.filter((function(r){return t[r].anchor===e._id}));var a=0;for(var i=0;i<n.length;i++){var o=t[n[i]].domain;if(o)a=Math.max(o[1],a)}return[e.domain[0],a+l.yPad]}},21598:function(e,t,r){"use strict";var n=r(39898);var a=r(73972);var i=r(74875);var o=r(7901);var s=r(91424);var l=r(71828);var u=l.strTranslate;var f=r(63893);var c=r(41675);var v=r(18783);var h=v.LINE_SPACING;var p=v.FROM_TL;var d=v.FROM_BR;var g=r(89573);var y=r(70565);e.exports=function e(t){var r=t._fullLayout;var i=r._infolayer.selectAll(".rangeselector").data(m(t),x);i.enter().append("g").classed("rangeselector",true);i.exit().remove();i.style({cursor:"pointer","pointer-events":"all"});i.each((function(e){var r=n.select(this);var i=e;var o=i.rangeselector;var s=r.selectAll("g.button").data(l.filterVisible(o.buttons));s.enter().append("g").classed("button",true);s.exit().remove();s.each((function(e){var r=n.select(this);var s=y(i,e);e._isActive=b(i,e,s);r.call(_,o,e);r.call(T,o,e,t);r.on("click",(function(){if(t._dragged)return;a.call("_guiRelayout",t,s)}));r.on("mouseover",(function(){e._isHovered=true;r.call(_,o,e)}));r.on("mouseout",(function(){e._isHovered=false;r.call(_,o,e)}))}));A(t,s,o,i._name,r)}))};function m(e){var t=c.list(e,"x",true);var r=[];for(var n=0;n<t.length;n++){var a=t[n];if(a.rangeselector&&a.rangeselector.visible){r.push(a)}}return r}function x(e){return e._id}function b(e,t,r){if(t.step==="all"){return e.autorange===true}else{var n=Object.keys(r);return e.range[0]===r[n[0]]&&e.range[1]===r[n[1]]}}function _(e,t,r){var n=l.ensureSingle(e,"rect","selector-rect",(function(e){e.attr("shape-rendering","crispEdges")}));n.attr({rx:g.rx,ry:g.ry});n.call(o.stroke,t.bordercolor).call(o.fill,w(t,r)).style("stroke-width",t.borderwidth+"px")}function w(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}function T(e,t,r,n){function a(e){f.convertToTspans(e,n)}var i=l.ensureSingle(e,"text","selector-text",(function(e){e.attr("text-anchor","middle")}));i.call(s.font,t.font).text(k(r,n._fullLayout._meta)).call(a)}function k(e,t){if(e.label){return t?l.templateString(e.label,t):e.label}if(e.step==="all")return"all";return e.count+e.step.charAt(0)}function A(e,t,r,a,o){var c=0;var v=0;var y=r.borderwidth;t.each((function(){var e=n.select(this);var t=e.select(".selector-text");var a=r.font.size*h;var i=Math.max(a*f.lineCount(t),16)+3;v=Math.max(v,i)}));t.each((function(){var e=n.select(this);var t=e.select(".selector-rect");var a=e.select(".selector-text");var i=a.node()&&s.bBox(a.node()).width;var o=r.font.size*h;var l=f.lineCount(a);var p=Math.max(i+10,g.minButtonWidth);e.attr("transform",u(y+c,y));t.attr({x:0,y:0,width:p,height:v});f.positionText(a,p/2,v/2-(l-1)*o/2+3);c+=p+5}));var m=e._fullLayout._size;var x=m.l+m.w*r.x;var b=m.t+m.h*(1-r.y);var _="left";if(l.isRightAnchor(r)){x-=c;_="right"}if(l.isCenterAnchor(r)){x-=c/2;_="center"}var w="top";if(l.isBottomAnchor(r)){b-=v;w="bottom"}if(l.isMiddleAnchor(r)){b-=v/2;w="middle"}c=Math.ceil(c);v=Math.ceil(v);x=Math.round(x);b=Math.round(b);i.autoMargin(e,a+"-range-selector",{x:r.x,y:r.y,l:c*p[_],r:c*d[_],b:v*d[w],t:v*p[w]});o.attr("transform",u(x,b))}},70565:function(e,t,r){"use strict";var n=r(81041);var a=r(71828).titleCase;e.exports=function e(t,r){var n=t._name;var a={};if(r.step==="all"){a[n+".autorange"]=true}else{var o=i(t,r);a[n+".range[0]"]=o[0];a[n+".range[1]"]=o[1]}return a};function i(e,t){var r=e.range;var i=new Date(e.r2l(r[1]));var o=t.step;var s=n["utc"+a(o)];var l=t.count;var u;switch(t.stepmode){case"backward":u=e.l2r(+s.offset(i,-l));break;case"todate":var f=s.offset(i,-l);u=e.l2r(+s.ceil(f));break}var c=r[1];return[u,c]}},97218:function(e,t,r){"use strict";e.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:r(37113)}}},layoutAttributes:r(37113),handleDefaults:r(28674),draw:r(21598)}},75148:function(e,t,r){"use strict";var n=r(22399);e.exports={bgcolor:{valType:"color",dflt:n.background,editType:"plot"},bordercolor:{valType:"color",dflt:n.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:true,editType:"calc",impliedEdits:{"range[0]":undefined,"range[1]":undefined}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":false}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":false}}],editType:"calc",impliedEdits:{autorange:false}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:true,editType:"calc"},editType:"calc"}},88443:function(e,t,r){"use strict";var n=r(41675).list;var a=r(71739).getAutoRange;var i=r(73251);e.exports=function e(t){var r=n(t,"x",true);for(var o=0;o<r.length;o++){var s=r[o];var l=s[i.name];if(l&&l.visible&&l.autorange){l._input.autorange=true;l._input.range=l.range=a(t,s)}}}},73251:function(e){"use strict";e.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},26377:function(e,t,r){"use strict";var n=r(71828);var a=r(44467);var i=r(41675);var o=r(75148);var s=r(47850);e.exports=function e(t,r,l){var u=t[l];var f=r[l];if(!(u.rangeslider||r._requestRangeslider[f._id]))return;if(!n.isPlainObject(u.rangeslider)){u.rangeslider={}}var c=u.rangeslider;var v=a.newContainer(f,"rangeslider");function h(e,t){return n.coerce(c,v,o,e,t)}var p,d;function g(e,t){return n.coerce(p,d,s,e,t)}var y=h("visible");if(!y)return;h("bgcolor",r.plot_bgcolor);h("bordercolor");h("borderwidth");h("thickness");h("autorange",!f.isValidRange(c.range));h("range");var m=r._subplots;if(m){var x=m.cartesian.filter((function(e){return e.substr(0,e.indexOf("y"))===i.name2id(l)})).map((function(e){return e.substr(e.indexOf("y"),e.length)}));var b=n.simpleMap(x,i.id2name);for(var _=0;_<b.length;_++){var w=b[_];p=c[w]||{};d=a.newContainer(v,w,"yaxis");var T=r[w];var k;if(p.range&&T.isValidRange(p.range)){k="fixed"}var A=g("rangemode",k);if(A!=="match"){g("range",T.range.slice())}}}v._input=c}},72413:function(e,t,r){"use strict";var n=r(39898);var a=r(73972);var i=r(74875);var o=r(71828);var s=o.strTranslate;var l=r(91424);var u=r(7901);var f=r(92998);var c=r(93612);var v=r(41675);var h=r(28569);var p=r(6964);var d=r(73251);e.exports=function(e){var t=e._fullLayout;var r=t._rangeSliderData;for(var a=0;a<r.length;a++){var i=r[a][d.name];i._clipId=i._id+"-"+t._uid}function l(e){return e._name}var u=t._infolayer.selectAll("g."+d.containerClassName).data(r,l);u.exit().each((function(e){var r=e[d.name];t._topdefs.select("#"+r._clipId).remove()})).remove();if(r.length===0)return;u.enter().append("g").classed(d.containerClassName,true).attr("pointer-events","all");u.each((function(r){var a=n.select(this);var i=r[d.name];var l=t[v.id2name(r.anchor)];var u=i[v.id2name(r.anchor)];if(i.range){var c=o.simpleMap(i.range,r.r2l);var h=o.simpleMap(r.range,r.r2l);var p;if(h[0]<h[1]){p=[Math.min(c[0],h[0]),Math.max(c[1],h[1])]}else{p=[Math.max(c[0],h[0]),Math.min(c[1],h[1])]}i.range=i._input.range=o.simpleMap(p,r.l2r)}r.cleanRange("rangeslider.range");var y=t._size;var w=r.domain;i._width=y.w*(w[1]-w[0]);var M=Math.round(y.l+y.w*w[0]);var S=Math.round(y.t+y.h*(1-r._counterDomainMin)+(r.side==="bottom"?r._depth:0)+i._offsetShift+d.extraPad);a.attr("transform",s(M,S));i._rl=o.simpleMap(i.range,r.r2l);var E=i._rl[0];var L=i._rl[1];var C=L-E;i.p2d=function(e){return e/i._width*C+E};i.d2p=function(e){return(e-E)/C*i._width};if(r.rangebreaks){var I=r.locateBreaks(E,L);if(I.length){var P,O;var D=0;for(P=0;P<I.length;P++){O=I[P];D+=O.max-O.min}var z=i._width/(L-E-D);var R=[-z*E];for(P=0;P<I.length;P++){O=I[P];R.push(R[R.length-1]-z*(O.max-O.min))}i.d2p=function(e){var t=R[0];for(var r=0;r<I.length;r++){var n=I[r];if(e>=n.max)t=R[r+1];else if(e<n.min)break}return t+z*e};for(P=0;P<I.length;P++){O=I[P];O.pmin=i.d2p(O.min);O.pmax=i.d2p(O.max)}i.p2d=function(e){var t=R[0];for(var r=0;r<I.length;r++){var n=I[r];if(e>=n.pmax)t=R[r+1];else if(e<n.pmin)break}return(e-t)/z}}}if(u.rangemode!=="match"){var F=l.r2l(u.range[0]);var B=l.r2l(u.range[1]);var N=B-F;i.d2pOppAxis=function(e){return(e-F)/N*i._height}}a.call(x,e,r,i).call(b,e,r,i).call(_,e,r,i).call(T,e,r,i,u).call(k,e,r,i).call(A,e,r,i);g(a,e,r,i);m(a,e,r,i,l,u);if(r.side==="bottom"){f.draw(e,r._id+"title",{propContainer:r,propName:r._name+".title",placeholder:t._dfltTitle.x,attributes:{x:r._offset+r._length/2,y:S+i._height+i._offsetShift+10+1.5*r.title.font.size,"text-anchor":"middle"}})}}))};function g(e,t,r,a){if(t._context.staticPlot)return;var i=e.select("rect."+d.slideBoxClassName).node();var s=e.select("rect."+d.grabAreaMinClassName).node();var l=e.select("rect."+d.grabAreaMaxClassName).node();function u(){var u=n.event;var f=u.target;var c=u.clientX||u.touches[0].clientX;var v=c-e.node().getBoundingClientRect().left;var d=a.d2p(r._rl[0]);var g=a.d2p(r._rl[1]);var m=h.coverSlip();this.addEventListener("touchmove",x);this.addEventListener("touchend",b);m.addEventListener("mousemove",x);m.addEventListener("mouseup",b);function x(o){var u=o.clientX||o.touches[0].clientX;var h=+u-c;var x,b,_;switch(f){case i:_="ew-resize";if(d+h>r._length||g+h<0){return}x=d+h;b=g+h;break;case s:_="col-resize";if(d+h>r._length){return}x=d+h;b=g;break;case l:_="col-resize";if(g+h<0){return}x=d;b=g+h;break;default:_="ew-resize";x=v;b=v+h;break}if(b<x){var w=b;b=x;x=w}a._pixelMin=x;a._pixelMax=b;p(n.select(m),_);y(e,t,r,a)}function b(){m.removeEventListener("mousemove",x);m.removeEventListener("mouseup",b);this.removeEventListener("touchmove",x);this.removeEventListener("touchend",b);o.removeElement(m)}}e.on("mousedown",u);e.on("touchstart",u)}function y(e,t,r,n){function i(e){return r.l2r(o.constrain(e,n._rl[0],n._rl[1]))}var s=i(n.p2d(n._pixelMin));var l=i(n.p2d(n._pixelMax));window.requestAnimationFrame((function(){a.call("_guiRelayout",t,r._name+".range",[s,l])}))}function m(e,t,r,n,a,i){var l=d.handleWidth/2;function u(e){return o.constrain(e,0,n._width)}function f(e){return o.constrain(e,0,n._height)}function c(e){return o.constrain(e,-l,n._width+l)}var v=u(n.d2p(r._rl[0]));var h=u(n.d2p(r._rl[1]));e.select("rect."+d.slideBoxClassName).attr("x",v).attr("width",h-v);e.select("rect."+d.maskMinClassName).attr("width",v);e.select("rect."+d.maskMaxClassName).attr("x",h).attr("width",n._width-h);if(i.rangemode!=="match"){var p=n._height-f(n.d2pOppAxis(a._rl[1]));var g=n._height-f(n.d2pOppAxis(a._rl[0]));e.select("rect."+d.maskMinOppAxisClassName).attr("x",v).attr("height",p).attr("width",h-v);e.select("rect."+d.maskMaxOppAxisClassName).attr("x",v).attr("y",g).attr("height",n._height-g).attr("width",h-v);e.select("rect."+d.slideBoxClassName).attr("y",p).attr("height",g-p)}var y=.5;var m=Math.round(c(v-l))-y;var x=Math.round(c(h-l))+y;e.select("g."+d.grabberMinClassName).attr("transform",s(m,y));e.select("g."+d.grabberMaxClassName).attr("transform",s(x,y))}function x(e,t,r,n){var a=o.ensureSingle(e,"rect",d.bgClassName,(function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})}));var i=n.borderwidth%2===0?n.borderwidth:n.borderwidth-1;var f=-n._offsetShift;var c=l.crispRound(t,n.borderwidth);a.attr({width:n._width+i,height:n._height+i,transform:s(f,f),"stroke-width":c}).call(u.stroke,n.bordercolor).call(u.fill,n.bgcolor)}function b(e,t,r,n){var a=t._fullLayout;var i=o.ensureSingleById(a._topdefs,"clipPath",n._clipId,(function(e){e.append("rect").attr({x:0,y:0})}));i.select("rect").attr({width:n._width,height:n._height})}function _(e,t,r,a){var s=t.calcdata;var u=e.selectAll("g."+d.rangePlotClassName).data(r._subplotsWith,o.identity);u.enter().append("g").attr("class",(function(e){return d.rangePlotClassName+" "+e})).call(l.setClipUrl,a._clipId,t);u.order();u.exit().remove();var f;u.each((function(e,o){var l=n.select(this);var u=o===0;var h=v.getFromId(t,e,"y");var p=h._name;var d=a[p];var g={data:[],layout:{xaxis:{type:r.type,domain:[0,1],range:a.range.slice(),calendar:r.calendar},width:a._width,height:a._height,margin:{t:0,b:0,l:0,r:0}},_context:t._context};if(r.rangebreaks){g.layout.xaxis.rangebreaks=r.rangebreaks}g.layout[p]={type:h.type,domain:[0,1],range:d.rangemode!=="match"?d.range.slice():h.range.slice(),calendar:h.calendar};if(h.rangebreaks){g.layout[p].rangebreaks=h.rangebreaks}i.supplyDefaults(g);var y=g._fullLayout.xaxis;var m=g._fullLayout[p];y.clearCalc();y.setScale();m.clearCalc();m.setScale();var x={id:e,plotgroup:l,xaxis:y,yaxis:m,isRangePlot:true};if(u)f=x;else{x.mainplot="xy";x.mainplotinfo=f}c.rangePlot(t,x,w(s,e))}))}function w(e,t){var r=[];for(var n=0;n<e.length;n++){var a=e[n];var i=a[0].trace;if(i.xaxis+i.yaxis===t){r.push(a)}}return r}function T(e,t,r,n,a){var i=o.ensureSingle(e,"rect",d.maskMinClassName,(function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})}));i.attr("height",n._height).call(u.fill,d.maskColor);var s=o.ensureSingle(e,"rect",d.maskMaxClassName,(function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}));s.attr("height",n._height).call(u.fill,d.maskColor);if(a.rangemode!=="match"){var l=o.ensureSingle(e,"rect",d.maskMinOppAxisClassName,(function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}));l.attr("width",n._width).call(u.fill,d.maskOppAxisColor);var f=o.ensureSingle(e,"rect",d.maskMaxOppAxisClassName,(function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}));f.attr("width",n._width).style("border-top",d.maskOppBorder).call(u.fill,d.maskOppAxisColor)}}function k(e,t,r,n){if(t._context.staticPlot)return;var a=o.ensureSingle(e,"rect",d.slideBoxClassName,(function(e){e.attr({y:0,cursor:d.slideBoxCursor,"shape-rendering":"crispEdges"})}));a.attr({height:n._height,fill:d.slideBoxFill})}function A(e,t,r,n){var a=o.ensureSingle(e,"g",d.grabberMinClassName);var i=o.ensureSingle(e,"g",d.grabberMaxClassName);var s={x:0,width:d.handleWidth,rx:d.handleRadius,fill:u.background,stroke:u.defaultLine,"stroke-width":d.handleStrokeWidth,"shape-rendering":"crispEdges"};var l={y:Math.round(n._height/4),height:Math.round(n._height/2)};var f=o.ensureSingle(a,"rect",d.handleMinClassName,(function(e){e.attr(s)}));f.attr(l);var c=o.ensureSingle(i,"rect",d.handleMaxClassName,(function(e){e.attr(s)}));c.attr(l);var v={width:d.grabAreaWidth,x:0,y:0,fill:d.grabAreaFill,cursor:!t._context.staticPlot?d.grabAreaCursor:undefined};var h=o.ensureSingle(a,"rect",d.grabAreaMinClassName,(function(e){e.attr(v)}));h.attr("height",n._height);var p=o.ensureSingle(i,"rect",d.grabAreaMaxClassName,(function(e){e.attr(v)}));p.attr("height",n._height)}},549:function(e,t,r){"use strict";var n=r(41675);var a=r(63893);var i=r(73251);var o=r(18783).LINE_SPACING;var s=i.name;function l(e){var t=e&&e[s];return t&&t.visible}t.isVisible=l;t.makeData=function(e){var t=n.list({_fullLayout:e},"x",true);var r=e.margin;var a=[];if(!e._has("gl2d")){for(var i=0;i<t.length;i++){var o=t[i];if(l(o)){a.push(o);var u=o[s];u._id=s+o._id;u._height=(e.height-r.b-r.t)*u.thickness;u._offsetShift=Math.floor(u.borderwidth/2)}}}e._rangeSliderData=a};t.autoMarginOpts=function(e,t){var r=e._fullLayout;var n=t[s];var l=t._id.charAt(0);var u=0;var f=0;if(t.side==="bottom"){u=t._depth;if(t.title.text!==r._dfltTitle[l]){f=1.5*t.title.font.size+10+n._offsetShift;var c=(t.title.text.match(a.BR_TAG_ALL)||[]).length;f+=c*t.title.font.size*o}}return{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:n._height+u+Math.max(r.margin.b,f),pad:i.extraPad+n._offsetShift*2}}},13137:function(e,t,r){"use strict";var n=r(71828);var a=r(75148);var i=r(47850);var o=r(549);e.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:n.extendFlat({},a,{yaxis:i})}}},layoutAttributes:r(75148),handleDefaults:r(26377),calcAutorange:r(88443),draw:r(72413),isVisible:o.isVisible,makeData:o.makeData,autoMarginOpts:o.autoMarginOpts}},47850:function(e){"use strict";e.exports={_isSubplotObj:true,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},8389:function(e,t,r){"use strict";var n=r(50215);var a=r(82196).line;var i=r(79952).P;var o=r(1426).extendFlat;var s=r(30962).overrideAll;var l=r(44467).templatedArray;var u=r(24695);e.exports=s(l("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:o({},n.xref,{}),yref:o({},n.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:a.color,width:o({},a.width,{min:1,dflt:1}),dash:o({},i,{dflt:"dot"})}}),"arraydraw","from-root")},34122:function(e){"use strict";e.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},59402:function(e,t,r){"use strict";var n=r(71828);var a=r(89298);var i=r(85501);var o=r(8389);var s=r(30477);e.exports=function e(t,r){i(t,r,{name:"selections",handleItemDefaults:l});var n=r.selections;for(var a=0;a<n.length;a++){var o=n[a];if(!o)continue;if(o.path===undefined){if(o.x0===undefined||o.x1===undefined||o.y0===undefined||o.y1===undefined){r.selections[a]=null}}}};function l(e,t,r){function i(r,a){return n.coerce(e,t,o,r,a)}var l=i("path");var u=l?"path":"rect";var f=i("type",u);var c=f!=="path";if(c)delete t.path;i("opacity");i("line.color");i("line.width");i("line.dash");var v=["x","y"];for(var h=0;h<2;h++){var p=v[h];var d={_fullLayout:r};var g;var y;var m;var x=a.coerceRef(e,t,d,p);g=a.getFromId(d,x);g._selectionIndices.push(t._index);m=s.rangeToShapePosition(g);y=s.shapePositionToRange(g);if(c){var b=p+"0";var _=p+"1";var w=e[b];var T=e[_];e[b]=y(e[b],true);e[_]=y(e[_],true);a.coercePosition(t,d,i,x,b);a.coercePosition(t,d,i,x,_);var k=t[b];var A=t[_];if(k!==undefined&&A!==undefined){t[b]=m(k);t[_]=m(A);e[b]=w;e[_]=T}}}if(c){n.noneOrAll(e,t,["x0","x1","y0","y1"])}}},32485:function(e,t,r){"use strict";var n=r(60165).readPaths;var a=r(42359);var i=r(51873).clearOutlineControllers;var o=r(7901);var s=r(91424);var l=r(44467).arrayEditor;var u=r(30477);var f=u.getPathString;e.exports={draw:c,drawOne:h,activateLastSelection:g};function c(e){var t=e._fullLayout;i(e);t._selectionLayer.selectAll("path").remove();for(var r in t._plots){var n=t._plots[r].selectionLayer;if(n)n.selectAll("path").remove()}for(var a=0;a<t.selections.length;a++){h(e,a)}}function v(e){return e._context.editSelection}function h(e,t){e._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+t+'"]').remove();var r=u.makeSelectionsOptionsAndPlotinfo(e,t);var i=r.options;var c=r.plotinfo;if(!i._input)return;h(e._fullLayout._selectionLayer);function h(r){var u=f(e,i);var h={"data-index":t,"fill-rule":"evenodd",d:u};var g=i.opacity;var y="rgba(0,0,0,0)";var m=i.line.color||o.contrast(e._fullLayout.plot_bgcolor);var x=i.line.width;var b=i.line.dash;if(!x){x=5;b="solid"}var _=v(e)&&e._fullLayout._activeSelectionIndex===t;if(_){y=e._fullLayout.activeselection.fillcolor;g=e._fullLayout.activeselection.opacity}var w=[];for(var T=1;T>=0;T--){var k=r.append("path").attr(h).style("opacity",T?.1:g).call(o.stroke,m).call(o.fill,y).call(s.dashLine,T?"solid":b,T?4+x:x);p(k,e,i);if(_){var A=l(e.layout,"selections",i);k.style({cursor:"move"});var M={element:k.node(),plotinfo:c,gd:e,editHelpers:A,isActiveSelection:true};var S=n(u,e);a(S,k,M)}else{k.style("pointer-events",T?"all":"none")}w[T]=k}var E=w[0];var L=w[1];L.node().addEventListener("click",(function(){return d(e,E)}))}}function p(e,t,r){var n=r.xref+r.yref;s.setClipUrl(e,"clip"+t._fullLayout._uid+n,t)}function d(e,t){if(!v(e))return;var r=t.node();var n=+r.getAttribute("data-index");if(n>=0){if(n===e._fullLayout._activeSelectionIndex){y(e);return}e._fullLayout._activeSelectionIndex=n;e._fullLayout._deactivateSelection=y;c(e)}}function g(e){if(!v(e))return;var t=e._fullLayout.selections.length-1;e._fullLayout._activeSelectionIndex=t;e._fullLayout._deactivateSelection=y;c(e)}function y(e){if(!v(e))return;var t=e._fullLayout._activeSelectionIndex;if(t>=0){i(e);delete e._fullLayout._activeSelectionIndex;c(e)}}},53777:function(e,t,r){"use strict";var n=r(79952).P;var a=r(1426).extendFlat;e.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:a({},n,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},90849:function(e){"use strict";e.exports=function e(t,r,n){n("newselection.mode");var a=n("newselection.line.width");if(a){n("newselection.line.color");n("newselection.line.dash")}n("activeselection.fillcolor");n("activeselection.opacity")}},35855:function(e,t,r){"use strict";var n=r(64505);var a=n.selectMode;var i=r(51873);var o=i.clearOutline;var s=r(60165);var l=s.readPaths;var u=s.writePaths;var f=s.fixDatesForPaths;e.exports=function e(t,r){if(!t.length)return;var n=t[0][0];if(!n)return;var i=n.getAttribute("d");var s=r.gd;var c=s._fullLayout.newselection;var v=r.plotinfo;var h=v.xaxis;var p=v.yaxis;var d=r.isActiveSelection;var g=r.dragmode;var y=(s.layout||{}).selections||[];if(!a(g)&&d!==undefined){var m=s._fullLayout._activeSelectionIndex;if(m<y.length){switch(s._fullLayout.selections[m].type){case"rect":g="select";break;case"path":g="lasso";break}}}var x=l(i,s,v,d);var b={xref:h._id,yref:p._id,opacity:c.opacity,line:{color:c.line.color,width:c.line.width,dash:c.line.dash}};var _;if(x.length===1)_=x[0];if(_&&_.length===5&&g==="select"){b.type="rect";b.x0=_[0][1];b.y0=_[0][2];b.x1=_[2][1];b.y1=_[2][2]}else{b.type="path";if(h&&p)f(x,h,p);b.path=u(x);_=null}o(s);var w=r.editHelpers;var T=(w||{}).modifyItem;var k=[];for(var A=0;A<y.length;A++){var M=s._fullLayout.selections[A];if(!M){k[A]=M;continue}k[A]=M._input;if(d!==undefined&&A===s._fullLayout._activeSelectionIndex){var S=b;switch(M.type){case"rect":T("x0",S.x0);T("x1",S.x1);T("y0",S.y0);T("y1",S.y1);break;case"path":T("path",S.path);break}}}if(d===undefined){k.push(b);return k}return w?w.getUpdateObj():{}}},75549:function(e,t,r){"use strict";var n=r(71828).strTranslate;function a(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}function i(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}}function o(e){var t=e._id.charAt(0)==="y"?1:0;return function(r){return a(e,r[t])}}function s(e){return n(e.xaxis._offset,e.yaxis._offset)}e.exports={p2r:a,r2p:i,axValue:o,getTransform:s}},47322:function(e,t,r){"use strict";var n=r(32485);var a=r(3937);e.exports={moduleType:"component",name:"selections",layoutAttributes:r(8389),supplyLayoutDefaults:r(59402),supplyDrawNewSelectionDefaults:r(90849),includeBasePlot:r(76325)("selections"),draw:n.draw,drawOne:n.drawOne,reselect:a.reselect,prepSelect:a.prepSelect,clearOutline:a.clearOutline,clearSelectionsCache:a.clearSelectionsCache,selectOnClick:a.selectOnClick}},3937:function(e,t,r){"use strict";var n=r(52142);var a=r(38258);var i=r(73972);var o=r(91424).dashStyle;var s=r(7901);var l=r(30211);var u=r(23469).makeEventData;var f=r(64505);var c=f.freeMode;var v=f.rectMode;var h=f.drawMode;var p=f.openMode;var d=f.selectMode;var g=r(30477);var y=r(21459);var m=r(42359);var x=r(51873).clearOutline;var b=r(60165);var _=b.handleEllipse;var w=b.readPaths;var T=r(90551).newShapes;var k=r(35855);var A=r(32485).activateLastSelection;var M=r(71828);var S=M.sorterAsc;var E=r(61082);var L=r(79990);var C=r(41675).getFromId;var I=r(33306);var P=r(61549).redrawReglTraces;var O=r(34122);var D=O.MINSELECT;var z=E.filter;var R=E.tester;var F=r(75549);var B=F.p2r;var N=F.axValue;var j=F.getTransform;function U(e){return e.subplot!==undefined}function V(e,t,r,n,a){var u=!U(n);var f=c(a);var g=v(a);var y=p(a);var x=h(a);var b=d(a);var w=a==="drawline";var T=a==="drawcircle";var k=w||T;var A=n.gd;var S=A._fullLayout;var E=b&&S.newselection.mode==="immediate"&&u;var C=S._zoomlayer;var I=n.element.getBoundingClientRect();var P=n.plotinfo;var F=j(P);var B=t-I.left;var N=r-I.top;S._calcInverseTransform(A);var V=M.apply3DTransform(S._invTransform)(B,N);B=V[0];N=V[1];var q=S._invScaleX;var G=S._invScaleY;var Z=B;var X=N;var J="M"+B+","+N;var $=n.xaxes[0];var ee=n.yaxes[0];var te=$._length;var re=ee._length;var ne=e.altKey&&!(h(a)&&y);var ae,ie,se,ue;var he,pe,ge;W(e,A,n);if(f){ae=z([[B,N]],O.BENDPX)}var ye=C.selectAll("path.select-outline-"+P.id).data([1]);var me=x?S.newshape:S.newselection;if(x){n.hasText=me.label.text||me.label.texttemplate}var xe=x&&!y?me.fillcolor:"rgba(0,0,0,0)";var _e=me.line.color||(u?s.contrast(A._fullLayout.plot_bgcolor):"#7f7f7f");ye.enter().append("path").attr("class","select-outline select-outline-"+P.id).style({opacity:x?me.opacity/2:1,"stroke-dasharray":o(me.line.dash,me.line.width),"stroke-width":me.line.width+"px","shape-rendering":"crispEdges"}).call(s.stroke,_e).call(s.fill,xe).attr("fill-rule","evenodd").classed("cursor-move",x?true:false).attr("transform",F).attr("d",J+"Z");var we=C.append("path").attr("class","zoombox-corners").style({fill:s.background,stroke:s.defaultLine,"stroke-width":1}).attr("transform",F).attr("d","M0,0Z");if(x&&n.hasText){var Se=C.select(".label-temp");if(Se.empty()){Se=C.append("g").classed("label-temp",true).classed("select-outline",true).style({opacity:.8})}}var Ee=S._uid+O.SELECTID;var Le=[];var Ce=Q(A,n.xaxes,n.yaxes,n.subplot);if(E&&!e.shiftKey){n._clearSubplotSelections=function(){if(!u)return;var e=$._id;var t=ee._id;de(A,e,t,Ce);var r=(A.layout||{}).selections||[];var n=[];var a=false;for(var o=0;o<r.length;o++){var s=S.selections[o];if(s.xref!==e||s.yref!==t){n.push(r[o])}else{a=true}}if(a){A._fullLayout._noEmitSelectedAtStart=true;i.call("_guiRelayout",A,{selections:n})}}}var Ie=Te(n);n.moveFn=function(e,t){if(n._clearSubplotSelections){n._clearSubplotSelections();n._clearSubplotSelections=undefined}Z=Math.max(0,Math.min(te,q*e+B));X=Math.max(0,Math.min(re,G*t+N));var r=Math.abs(Z-B);var a=Math.abs(X-N);if(g){var i;var o,s;if(b){var l=S.selectdirection;if(l==="any"){if(a<Math.min(r*.6,D)){i="h"}else if(r<Math.min(a*.6,D)){i="v"}else{i="d"}}else{i=l}switch(i){case"h":o=T?re/2:0;s=re;break;case"v":o=T?te/2:0;s=te;break}}if(x){switch(S.newshape.drawdirection){case"vertical":i="h";o=T?re/2:0;s=re;break;case"horizontal":i="v";o=T?te/2:0;s=te;break;case"ortho":if(r<a){i="h";o=N;s=X}else{i="v";o=B;s=Z}break;default:i="d"}}if(i==="h"){ue=k?_(T,[Z,o],[Z,s]):[[B,o],[B,s],[Z,s],[Z,o]];ue.xmin=k?Z:Math.min(B,Z);ue.xmax=k?Z:Math.max(B,Z);ue.ymin=Math.min(o,s);ue.ymax=Math.max(o,s);we.attr("d","M"+ue.xmin+","+(N-D)+"h-4v"+2*D+"h4Z"+"M"+(ue.xmax-1)+","+(N-D)+"h4v"+2*D+"h-4Z")}else if(i==="v"){ue=k?_(T,[o,X],[s,X]):[[o,N],[o,X],[s,X],[s,N]];ue.xmin=Math.min(o,s);ue.xmax=Math.max(o,s);ue.ymin=k?X:Math.min(N,X);ue.ymax=k?X:Math.max(N,X);we.attr("d","M"+(B-D)+","+ue.ymin+"v-4h"+2*D+"v4Z"+"M"+(B-D)+","+(ue.ymax-1)+"v4h"+2*D+"v-4Z")}else if(i==="d"){ue=k?_(T,[B,N],[Z,X]):[[B,N],[B,X],[Z,X],[Z,N]];ue.xmin=Math.min(B,Z);ue.xmax=Math.max(B,Z);ue.ymin=Math.min(N,X);ue.ymax=Math.max(N,X);we.attr("d","M0,0Z")}}else if(f){ae.addPt([Z,X]);ue=ae.filtered}if(n.selectionDefs&&n.selectionDefs.length){se=le(n.mergedPolygons,ue,ne);ue.subtract=ne;ie=Y(n.selectionDefs.concat([ue]))}else{se=[ue];ie=R(ue)}m(fe(se,y),ye,n);if(b){var u=ve(A,false);var c=u.eventData?u.eventData.points.slice():[];u=ve(A,false,ie,Ce,n);ie=u.selectionTesters;ge=u.eventData;var v;if(ae){v=ae.filtered}else{v=be(se)}L.throttle(Ee,O.SELECTDELAY,(function(){Le=ce(ie,Ce);var e=Le.slice();for(var t=0;t<c.length;t++){var r=c[t];var n=false;for(var a=0;a<e.length;a++){if(e[a].curveNumber===r.curveNumber&&e[a].pointNumber===r.pointNumber){n=true;break}}if(!n)e.push(r)}if(e.length){if(!ge)ge={};ge.points=e}Ie(ge,v);ke(A,ge)}))}};n.clickFn=function(e,t){we.remove();if(A._fullLayout._activeShapeIndex>=0){A._fullLayout._deactivateShape(A);return}if(x)return;var r=S.clickmode;L.done(Ee).then((function(){L.clear(Ee);if(e===2){ye.remove();for(he=0;he<Ce.length;he++){pe=Ce[he];pe._module.selectPoints(pe,false)}oe(A,Ce);K(n);Me(A);if(Ce.length){var a=Ce[0].xaxis;var o=Ce[0].yaxis;if(a&&o){var s=[];var u=A._fullLayout.selections;for(var f=0;f<u.length;f++){var c=u[f];if(!c)continue;if(c.xref!==a._id||c.yref!==o._id){s.push(c)}}if(s.length<u.length){A._fullLayout._noEmitSelectedAtStart=true;i.call("_guiRelayout",A,{selections:s})}}}}else{if(r.indexOf("select")>-1){H(t,A,n.xaxes,n.yaxes,n.subplot,n,ye)}if(r==="event"){Ae(A,undefined)}}l.click(A,t,P.id)})).catch(M.error)};n.doneFn=function(){we.remove();L.done(Ee).then((function(){L.clear(Ee);if(!E&&ue&&n.selectionDefs){ue.subtract=ne;n.selectionDefs.push(ue);n.mergedPolygons.length=0;[].push.apply(n.mergedPolygons,se)}if(E||x){K(n,E)}if(n.doneFnCompleted){n.doneFnCompleted(Le)}if(b){Ae(A,ge)}})).catch(M.error)}}function H(e,t,r,n,a,i,o){var s=t._hoverdata;var l=t._fullLayout;var u=l.clickmode;var f=u.indexOf("event")>-1;var c=[];var v,h,d,g,y;var x,b,_,w,T;if(te(s)){W(e,t,i);v=Q(t,r,n,a);var k=re(s,v);var A=k.pointNumbers.length>0;if(A?ae(v,k):ie(v)&&(b=ne(k))){if(o)o.remove();for(T=0;T<v.length;T++){h=v[T];h._module.selectPoints(h,false)}oe(t,v);K(i);if(f){Me(t)}}else{_=e.shiftKey&&(b!==undefined?b:ne(k));d=q(k.pointNumber,k.searchInfo,_);var M=i.selectionDefs.concat([d]);g=Y(M,g);for(T=0;T<v.length;T++){y=v[T]._module.selectPoints(v[T],g);x=ue(y,v[T]);if(c.length){for(var S=0;S<x.length;S++){c.push(x[S])}}else c=x}w={points:c};oe(t,v,w);if(d&&i){i.selectionDefs.push(d)}if(o){var E=i.mergedPolygons;var L=p(i.dragmode);m(fe(E,L),o,i)}if(f){Ae(t,w)}}}}function q(e,t,r){return{pointNumber:e,searchInfo:t,subtract:!!r}}function G(e){return"pointNumber"in e&&"searchInfo"in e}function Z(e){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(t,r,n,a){var i=e.searchInfo.cd[0].trace._expandedIndex;var o=a.cd[0].trace._expandedIndex;return o===i&&n===e.pointNumber},isRect:false,degenerate:false,subtract:!!e.subtract}}function Y(e){if(!e.length)return;var t=[];var r=G(e[0])?0:e[0][0][0];var n=r;var a=G(e[0])?0:e[0][0][1];var i=a;for(var o=0;o<e.length;o++){if(G(e[o])){t.push(Z(e[o]))}else{var s=R(e[o]);s.subtract=!!e[o].subtract;t.push(s);r=Math.min(r,s.xmin);n=Math.max(n,s.xmax);a=Math.min(a,s.ymin);i=Math.max(i,s.ymax)}}function l(e,r,n,a){var i=false;for(var o=0;o<t.length;o++){if(t[o].contains(e,r,n,a)){i=!t[o].subtract}}return i}return{xmin:r,xmax:n,ymin:a,ymax:i,pts:[],contains:l,isRect:false,degenerate:false}}function W(e,t,r){var n=t._fullLayout;var a=r.plotinfo;var i=r.dragmode;var o=n._lastSelectedSubplot&&n._lastSelectedSubplot===a.id;var s=(e.shiftKey||e.altKey)&&!(h(i)&&p(i));if(o&&s&&a.selection&&a.selection.selectionDefs&&!r.selectionDefs){r.selectionDefs=a.selection.selectionDefs;r.mergedPolygons=a.selection.mergedPolygons}else if(!s||!a.selection){K(r)}if(!o){x(t);n._lastSelectedSubplot=a.id}}function X(e){return e._fullLayout._activeShapeIndex>=0}function J(e){return e._fullLayout._activeSelectionIndex>=0}function K(e,t){var r=e.dragmode;var n=e.plotinfo;var a=e.gd;if(X(a)){a._fullLayout._deactivateShape(a)}if(J(a)){a._fullLayout._deactivateSelection(a)}var o=a._fullLayout;var s=o._zoomlayer;var l=h(r);var u=d(r);if(l||u){var f=s.selectAll(".select-outline-"+n.id);if(f&&a._fullLayout._outlining){var c;if(l){c=T(f,e)}if(c){i.call("_guiRelayout",a,{shapes:c})}var v;if(u&&!U(e)){v=k(f,e)}if(v){a._fullLayout._noEmitSelectedAtStart=true;i.call("_guiRelayout",a,{selections:v}).then((function(){if(t){A(a)}}))}a._fullLayout._outlining=false}}n.selection={};n.selection.selectionDefs=e.selectionDefs=[];n.selection.mergedPolygons=e.mergedPolygons=[]}function $(e){return e._id}function Q(e,t,r,n){if(!e.calcdata)return[];var a=[];var i=t.map($);var o=r.map($);var s,l,u;for(u=0;u<e.calcdata.length;u++){s=e.calcdata[u];l=s[0].trace;if(l.visible!==true||!l._module||!l._module.selectPoints)continue;if(U({subplot:n})&&(l.subplot===n||l.geo===n)){a.push(ee(l._module,s,t[0],r[0]))}else if(l.type==="splom"){if(l._xaxes[i[0]]&&l._yaxes[o[0]]){var f=ee(l._module,s,t[0],r[0]);f.scene=e._fullLayout._splomScenes[l.uid];a.push(f)}}else if(l.type==="sankey"){var c=ee(l._module,s,t[0],r[0]);a.push(c)}else{if(i.indexOf(l.xaxis)===-1)continue;if(o.indexOf(l.yaxis)===-1)continue;a.push(ee(l._module,s,C(e,l.xaxis),C(e,l.yaxis)))}}return a}function ee(e,t,r,n){return{_module:e,cd:t,xaxis:r,yaxis:n}}function te(e){return e&&Array.isArray(e)&&e[0].hoverOnBox!==true}function re(e,t){var r=e[0];var n=-1;var a=[];var i,o;for(o=0;o<t.length;o++){i=t[o];if(r.fullData._expandedIndex===i.cd[0].trace._expandedIndex){if(r.hoverOnBox===true){break}if(r.pointNumber!==undefined){n=r.pointNumber}else if(r.binNumber!==undefined){n=r.binNumber;a=r.pointNumbers}break}}return{pointNumber:n,pointNumbers:a,searchInfo:i}}function ne(e){var t=e.searchInfo.cd[0].trace;var r=e.pointNumber;var n=e.pointNumbers;var a=n.length>0;var i=a?n[0]:r;return t.selectedpoints?t.selectedpoints.indexOf(i)>-1:false}function ae(e,t){var r=[];var n,a,i,o;for(o=0;o<e.length;o++){n=e[o];if(n.cd[0].trace.selectedpoints&&n.cd[0].trace.selectedpoints.length>0){r.push(n)}}if(r.length===1){i=r[0]===t.searchInfo;if(i){a=t.searchInfo.cd[0].trace;if(a.selectedpoints.length===t.pointNumbers.length){for(o=0;o<t.pointNumbers.length;o++){if(a.selectedpoints.indexOf(t.pointNumbers[o])<0){return false}}return true}}}return false}function ie(e){var t=0;var r,n,a;for(a=0;a<e.length;a++){r=e[a];n=r.cd[0].trace;if(n.selectedpoints){if(n.selectedpoints.length>1)return false;t+=n.selectedpoints.length;if(t>1)return false}}return t===1}function oe(e,t,r){var n;for(n=0;n<t.length;n++){var a=t[n].cd[0].trace._fullInput;var i=e._fullLayout._tracePreGUI[a.uid]||{};if(i.selectedpoints===undefined){i.selectedpoints=a._input.selectedpoints||null}}var o;if(r){var s=r.points||[];for(n=0;n<t.length;n++){o=t[n].cd[0].trace;o._input.selectedpoints=o._fullInput.selectedpoints=[];if(o._fullInput!==o)o.selectedpoints=[]}for(var l=0;l<s.length;l++){var u=s[l];var f=u.data;var c=u.fullData;var v=u.pointIndex;var h=u.pointIndices;if(h){[].push.apply(f.selectedpoints,h);if(o._fullInput!==o){[].push.apply(c.selectedpoints,h)}}else{f.selectedpoints.push(v);if(o._fullInput!==o){c.selectedpoints.push(v)}}}}else{for(n=0;n<t.length;n++){o=t[n].cd[0].trace;delete o.selectedpoints;delete o._input.selectedpoints;if(o._fullInput!==o){delete o._fullInput.selectedpoints}}}se(e,t)}function se(e,t){var r=false;for(var n=0;n<t.length;n++){var a=t[n];var o=a.cd;if(i.traceIs(o[0].trace,"regl")){r=true}var s=a._module;var l=s.styleOnSelect||s.style;if(l){l(e,o,o[0].node3);if(o[0].nodeRangePlot3)l(e,o,o[0].nodeRangePlot3)}}if(r){I(e);P(e)}}function le(e,t,r){var a=r?n.difference:n.union;var i=a({regions:e},{regions:[t]});var o=i.regions.reverse();for(var s=0;s<o.length;s++){var l=o[s];l.subtract=me(l,o.slice(0,s))}return o}function ue(e,t){if(Array.isArray(e)){var r=t.cd;var n=t.cd[0].trace;for(var a=0;a<e.length;a++){e[a]=u(e[a],n,r)}}return e}function fe(e,t){var r=[];for(var n=0;n<e.length;n++){r[n]=[];for(var a=0;a<e[n].length;a++){r[n][a]=[];r[n][a][0]=a?"L":"M";for(var i=0;i<e[n][a].length;i++){r[n][a].push(e[n][a][i])}}if(!t){r[n].push(["Z",r[n][0][1],r[n][0][2]])}}return r}function ce(e,t){var r=[];var n;var a=[];var i;for(var o=0;o<t.length;o++){var s=t[o];i=s._module.selectPoints(s,e);a.push(i);n=ue(i,s);r=r.concat(n)}return r}function ve(e,t,r,n,a){var i=!!n;var o,s,l;if(a){o=a.plotinfo;s=a.xaxes[0]._id;l=a.yaxes[0]._id}var u=[];var f=[];var c=ye(e);var v=e._fullLayout;if(o){var p=v._zoomlayer;var g=v.dragmode;var y=h(g);var m=d(g);if(y||m){var x=C(e,s,"x");var b=C(e,l,"y");if(x&&b){var _=p.selectAll(".select-outline-"+o.id);if(_&&e._fullLayout._outlining){if(_.length){var T=_[0][0];var k=T.getAttribute("d");var A=w(k,e,o);var M=[];for(var S=0;S<A.length;S++){var E=A[S];var L=[];for(var I=0;I<E.length;I++){L.push([xe(x,E[I][1]),xe(b,E[I][2])])}L.xref=s;L.yref=l;L.subtract=me(L,M);M.push(L)}c=c.concat(M)}}}}}var P=s&&l?[s+l]:v._subplots.cartesian;he(e);var O={};for(var D=0;D<P.length;D++){var z=P[D];var R=z.indexOf("y");var F=z.slice(0,R);var B=z.slice(R);var N=s&&l?r:undefined;N=ge(c,F,B,N);if(N){var j=n;if(!i){var U=C(e,F,"x");var V=C(e,B,"y");j=Q(e,[U],[V],z);for(var H=0;H<j.length;H++){var q=j[H];var G=q.cd[0];var Z=G.trace;if(q._module.name==="scattergl"&&!G.t.xpx){var Y=Z.x;var W=Z.y;var X=Z._length;G.t.xpx=[];G.t.ypx=[];for(var J=0;J<X;J++){G.t.xpx[J]=U.c2p(Y[J]);G.t.ypx[J]=V.c2p(W[J])}}if(q._module.name==="splom"){if(!O[Z.uid]){O[Z.uid]=true}}}}var K=ce(N,j);u=u.concat(K);f=f.concat(j)}}var $={points:u};oe(e,f,$);var ee=v.clickmode;var te=ee.indexOf("event")>-1&&t;if(!o&&t){var re=ye(e,true);if(re.length){var ne=re[0].xref;var ae=re[0].yref;if(ne&&ae){var ie=be(re);var se=we([C(e,ne,"x"),C(e,ae,"y")]);se($,ie)}}if(e._fullLayout._noEmitSelectedAtStart){e._fullLayout._noEmitSelectedAtStart=false}else{if(te)Ae(e,$)}v._reselect=false}if(!o&&v._deselect){var le=v._deselect;s=le.xref;l=le.yref;if(!pe(s,l,f)){de(e,s,l,n)}if(te){if($.points.length){Ae(e,$)}else{Me(e)}}v._deselect=false}return{eventData:$,selectionTesters:r}}function he(e){var t=e.calcdata;if(!t)return;for(var r=0;r<t.length;r++){var n=t[r][0];var a=n.trace;var i=e._fullLayout._splomScenes;if(i){var o=i[a.uid];if(o){o.selectBatch=[]}}}}function pe(e,t,r){for(var n=0;n<r.length;n++){var a=r[n];if(a.xaxis&&a.xaxis._id===e&&a.yaxis&&a.yaxis._id===t){return true}}return false}function de(e,t,r,n){n=Q(e,[C(e,t,"x")],[C(e,r,"y")],t+r);for(var a=0;a<n.length;a++){var i=n[a];i._module.selectPoints(i,false)}oe(e,n)}function ge(e,t,r,n){var a;for(var i=0;i<e.length;i++){var o=e[i];if(t!==o.xref||r!==o.yref)continue;if(a){var s=!!o.subtract;a=le(a,o,s);n=Y(a)}else{a=[o];n=R(o)}}return n}function ye(e,t){var r=[];var n=e._fullLayout;var a=n.selections;var i=a.length;for(var o=0;o<i;o++){if(t&&o!==n._activeSelectionIndex)continue;var s=a[o];if(!s)continue;var l=s.xref;var u=s.yref;var f=C(e,l,"x");var c=C(e,u,"y");var v,h,p,d;var m;if(s.type==="rect"){m=[];var x=xe(f,s.x0);var b=xe(f,s.x1);var _=xe(c,s.y0);var w=xe(c,s.y1);m=[[x,_],[x,w],[b,w],[b,_]];v=Math.min(x,b);h=Math.max(x,b);p=Math.min(_,w);d=Math.max(_,w);m.xmin=v;m.xmax=h;m.ymin=p;m.ymax=d;m.xref=l;m.yref=u;m.subtract=false;m.isRect=true;r.push(m)}else if(s.type==="path"){var T=s.path.split("Z");var k=[];for(var A=0;A<T.length;A++){var M=T[A];if(!M)continue;M+="Z";var S=g.extractPathCoords(M,y.paramIsX,"raw");var E=g.extractPathCoords(M,y.paramIsY,"raw");v=Infinity;h=-Infinity;p=Infinity;d=-Infinity;m=[];for(var L=0;L<S.length;L++){var I=xe(f,S[L]);var P=xe(c,E[L]);m.push([I,P]);v=Math.min(I,v);h=Math.max(I,h);p=Math.min(P,p);d=Math.max(P,d)}m.xmin=v;m.xmax=h;m.ymin=p;m.ymax=d;m.xref=l;m.yref=u;m.subtract=me(m,k);k.push(m);r.push(m)}}}return r}function me(e,t){var r=false;for(var n=0;n<t.length;n++){var i=t[n];for(var o=0;o<e.length;o++){if(a(e[o],i)){r=!r;break}}}return r}function xe(e,t){if(e.type==="date")t=t.replace("_"," ");return e.type==="log"?e.c2p(t):e.r2p(t,null,e.calendar)}function be(e){var t=e.length;var r=[];for(var n=0;n<t;n++){var a=e[n];r=r.concat(a);r=r.concat([a[0]])}return _e(r)}function _e(e){e.isRect=e.length===5&&e[0][0]===e[4][0]&&e[0][1]===e[4][1]&&e[0][0]===e[1][0]&&e[2][0]===e[3][0]&&e[0][1]===e[3][1]&&e[1][1]===e[2][1]||e[0][1]===e[1][1]&&e[2][1]===e[3][1]&&e[0][0]===e[3][0]&&e[1][0]===e[2][0];if(e.isRect){e.xmin=Math.min(e[0][0],e[2][0]);e.xmax=Math.max(e[0][0],e[2][0]);e.ymin=Math.min(e[0][1],e[2][1]);e.ymax=Math.max(e[0][1],e[2][1])}return e}function we(e){return function(t,r){var n;var a;for(var i=0;i<e.length;i++){var o=e[i];var s=o._id;var l=s.charAt(0);if(r.isRect){if(!n)n={};var u=r[l+"min"];var f=r[l+"max"];if(u!==undefined&&f!==undefined){n[s]=[B(o,u),B(o,f)].sort(S)}}else{if(!a)a={};a[s]=r.map(N(o))}}if(n){t.range=n}if(a){t.lassoPoints=a}}}function Te(e){var t=e.plotinfo;return t.fillRangeItems||we(e.xaxes.concat(e.yaxes))}function ke(e,t){e.emit("plotly_selecting",t)}function Ae(e,t){if(t){t.selections=(e.layout||{}).selections||[]}e.emit("plotly_selected",t)}function Me(e){e.emit("plotly_deselect",null)}e.exports={reselect:ve,prepSelect:V,clearOutline:x,clearSelectionsCache:K,selectOnClick:H}},89827:function(e,t,r){"use strict";var n=r(50215);var a=r(41940);var i=r(82196).line;var o=r(79952).P;var s=r(1426).extendFlat;var l=r(44467).templatedArray;var u=r(24695);var f=r(9012);var c=r(5386).R;var v=r(37281);e.exports=l("shape",{visible:s({},f.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:false,editType:"calc+arraydraw"},legend:s({},f.legend,{editType:"calc+arraydraw"}),legendgroup:s({},f.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:s({},f.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:a({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:s({},f.legendrank,{editType:"calc+arraydraw"}),legendwidth:s({},f.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:s({},n.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:s({},n.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:s({},i.color,{editType:"arraydraw"}),width:s({},i.width,{editType:"calc+arraydraw"}),dash:s({},o,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:false,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:c({},{keys:Object.keys(v)}),font:a({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},5627:function(e,t,r){"use strict";var n=r(71828);var a=r(89298);var i=r(21459);var o=r(30477);e.exports=function e(t){var r=t._fullLayout;var o=n.filterVisible(r.shapes);if(!o.length||!t._fullData.length)return;for(var u=0;u<o.length;u++){var c=o[u];c._extremes={};var v;var h;var p=a.getRefType(c.xref);var d=a.getRefType(c.yref);if(c.xref!=="paper"&&p!=="domain"){var g=c.xsizemode==="pixel"?c.xanchor:c.x0;var y=c.xsizemode==="pixel"?c.xanchor:c.x1;v=a.getFromId(t,c.xref);h=f(v,g,y,c.path,i.paramIsX);if(h){c._extremes[v._id]=a.findExtremes(v,h,s(c))}}if(c.yref!=="paper"&&d!=="domain"){var m=c.ysizemode==="pixel"?c.yanchor:c.y0;var x=c.ysizemode==="pixel"?c.yanchor:c.y1;v=a.getFromId(t,c.yref);h=f(v,m,x,c.path,i.paramIsY);if(h){c._extremes[v._id]=a.findExtremes(v,h,l(c))}}}};function s(e){return u(e.line.width,e.xsizemode,e.x0,e.x1,e.path,false)}function l(e){return u(e.line.width,e.ysizemode,e.y0,e.y1,e.path,true)}function u(e,t,r,a,s,l){var u=e/2;var f=l;if(t==="pixel"){var c=s?o.extractPathCoords(s,l?i.paramIsY:i.paramIsX):[r,a];var v=n.aggNums(Math.max,null,c);var h=n.aggNums(Math.min,null,c);var p=h<0?Math.abs(h)+u:u;var d=v>0?v+u:u;return{ppad:u,ppadplus:f?p:d,ppadminus:f?d:p}}else{return{ppad:u}}}function f(e,t,r,n,a){var s=e.type==="category"||e.type==="multicategory"?e.r2c:e.d2c;if(t!==undefined)return[s(t),s(r)];if(!n)return;var l=Infinity;var u=-Infinity;var f=n.match(i.segmentRE);var c;var v;var h;var p;var d;if(e.type==="date")s=o.decodeDate(s);for(c=0;c<f.length;c++){v=f[c];h=a[v.charAt(0)].drawn;if(h===undefined)continue;p=f[c].substr(1).match(i.paramRE);if(!p||p.length<h)continue;d=s(p[h]);if(d<l)l=d;if(d>u)u=d}if(u>=l)return[l,u]}},21459:function(e){"use strict";e.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:true,drawn:0},L:{0:true,drawn:0},H:{0:true,drawn:0},V:{},Q:{0:true,2:true,drawn:2},C:{0:true,2:true,4:true,drawn:4},T:{0:true,drawn:0},S:{0:true,2:true,drawn:2},Z:{}},paramIsY:{M:{1:true,drawn:1},L:{1:true,drawn:1},H:{},V:{0:true,drawn:0},Q:{1:true,3:true,drawn:3},C:{1:true,3:true,5:true,drawn:5},T:{1:true,drawn:1},S:{1:true,3:true,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},84726:function(e,t,r){"use strict";var n=r(71828);var a=r(89298);var i=r(85501);var o=r(89827);var s=r(30477);e.exports=function e(t,r){i(t,r,{name:"shapes",handleItemDefaults:u})};function l(e,t){return e?"bottom":t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle"}function u(e,t,r){function i(r,a){return n.coerce(e,t,o,r,a)}t._isShape=true;var u=i("visible");if(!u)return;var f=i("showlegend");if(f){i("legend");i("legendwidth");i("legendgroup");i("legendgrouptitle.text");n.coerceFont(i,"legendgrouptitle.font");i("legendrank")}var c=i("path");var v=c?"path":"rect";var h=i("type",v);var p=h!=="path";if(p)delete t.path;i("editable");i("layer");i("opacity");i("fillcolor");i("fillrule");var d=i("line.width");if(d){i("line.color");i("line.dash")}var g=i("xsizemode");var y=i("ysizemode");var m=["x","y"];for(var x=0;x<2;x++){var b=m[x];var _=b+"anchor";var w=b==="x"?g:y;var T={_fullLayout:r};var k;var A;var M;var S=a.coerceRef(e,t,T,b,undefined,"paper");var E=a.getRefType(S);if(E==="range"){k=a.getFromId(T,S);k._shapeIndices.push(t._index);M=s.rangeToShapePosition(k);A=s.shapePositionToRange(k)}else{A=M=n.identity}if(p){var L=.25;var C=.75;var I=b+"0";var P=b+"1";var O=e[I];var D=e[P];e[I]=A(e[I],true);e[P]=A(e[P],true);if(w==="pixel"){i(I,0);i(P,10)}else{a.coercePosition(t,T,i,S,I,L);a.coercePosition(t,T,i,S,P,C)}t[I]=M(t[I]);t[P]=M(t[P]);e[I]=O;e[P]=D}if(w==="pixel"){var z=e[_];e[_]=A(e[_],true);a.coercePosition(t,T,i,S,_,.25);t[_]=M(t[_]);e[_]=z}}if(p){n.noneOrAll(e,t,["x0","x1","y0","y1"])}var R=h==="line";var F,B;if(p){F=i("label.texttemplate")}if(!F){B=i("label.text")}if(B||F){i("label.textangle");var N=i("label.textposition",R?"middle":"middle center");i("label.xanchor");i("label.yanchor",l(R,N));i("label.padding");n.coerceFont(i,"label.font",r.font)}}},48100:function(e,t,r){"use strict";var n=r(71828);var a=r(89298);var i=r(63893);var o=r(91424);var s=r(60165).readPaths;var l=r(30477);var u=l.getPathString;var f=r(37281);var c=r(18783).FROM_TL;e.exports=function e(t,r,c,p){p.selectAll(".shape-label").remove();if(!(c.label.text||c.label.texttemplate))return;var d;if(c.label.texttemplate){var g={};if(c.type!=="path"){var y=a.getFromId(t,c.xref);var m=a.getFromId(t,c.yref);for(var x in f){var b=f[x](c,y,m);if(b!==undefined)g[x]=b}}d=n.texttemplateStringForShapes(c.label.texttemplate,{},t._fullLayout._d3locale,g)}else{d=c.label.text}var _={"data-index":r};var w=c.label.font;var T={"data-notex":1};var k=p.append("g").attr(_).classed("shape-label",true);var A=k.append("text").attr(T).classed("shape-label-text",true).text(d);var M,S,E,L;if(c.path){var C=u(t,c);var I=s(C,t);M=Infinity;E=Infinity;S=-Infinity;L=-Infinity;for(var P=0;P<I.length;P++){for(var O=0;O<I[P].length;O++){var D=I[P][O];for(var z=1;z<D.length;z+=2){var R=D[z];var F=D[z+1];M=Math.min(M,R);S=Math.max(S,R);E=Math.min(E,F);L=Math.max(L,F)}}}}else{var B=a.getFromId(t,c.xref);var N=a.getRefType(c.xref);var j=a.getFromId(t,c.yref);var U=a.getRefType(c.yref);var V=l.getDataToPixel(t,B,false,N);var H=l.getDataToPixel(t,j,true,U);M=V(c.x0);S=V(c.x1);E=H(c.y0);L=H(c.y1)}var q=c.label.textangle;if(q==="auto"){if(c.type==="line"){q=v(M,E,S,L)}else{q=0}}A.call((function(e){e.call(o.font,w).attr({});i.convertToTspans(e,t);return e}));var G=o.bBox(A.node());var Z=h(M,E,S,L,c,q,G);var Y=Z.textx;var W=Z.texty;var X=Z.xanchor;A.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[X],y:W,x:Y,transform:"rotate("+q+","+Y+","+W+")"}).call(i.positionText,Y,W)};function v(e,t,r,n){var a,i;i=Math.abs(r-e);if(r>=e){a=t-n}else{a=n-t}return-180/Math.PI*Math.atan2(a,i)}function h(e,t,r,n,a,i,o){var s=a.label.textposition;var l=a.label.textangle;var u=a.label.padding;var f=a.type;var v=Math.PI/180*i;var h=Math.sin(v);var p=Math.cos(v);var d=a.label.xanchor;var g=a.label.yanchor;var y,m,x,b;if(f==="line"){if(s==="start"){y=e;m=t}else if(s==="end"){y=r;m=n}else{y=(e+r)/2;m=(t+n)/2}if(d==="auto"){if(s==="start"){if(l==="auto"){if(r>e)d="left";else if(r<e)d="right";else d="center"}else{if(r>e)d="right";else if(r<e)d="left";else d="center"}}else if(s==="end"){if(l==="auto"){if(r>e)d="right";else if(r<e)d="left";else d="center"}else{if(r>e)d="left";else if(r<e)d="right";else d="center"}}else{d="center"}}var _={left:1,center:0,right:-1};var w={bottom:-1,middle:0,top:1};if(l==="auto"){var T=w[g];x=-u*h*T;b=u*p*T}else{var k=_[d];var A=w[g];x=u*k;b=u*A}y=y+x;m=m+b}else{x=u+3;if(s.indexOf("right")!==-1){y=Math.max(e,r)-x;if(d==="auto")d="right"}else if(s.indexOf("left")!==-1){y=Math.min(e,r)+x;if(d==="auto")d="left"}else{y=(e+r)/2;if(d==="auto")d="center"}if(s.indexOf("top")!==-1){m=Math.min(t,n)}else if(s.indexOf("bottom")!==-1){m=Math.max(t,n)}else{m=(t+n)/2}b=u;if(g==="bottom"){m=m-b}else if(g==="top"){m=m+b}}var M=c[g];var S=a.label.font.size;var E=o.height;var L=(E*M-S)*h;var C=-(E*M-S)*p;return{textx:y+L,texty:m+C,xanchor:d}}},42359:function(e,t,r){"use strict";var n=r(71828);var a=n.strTranslate;var i=r(28569);var o=r(64505);var s=o.drawMode;var l=o.selectMode;var u=r(73972);var f=r(7901);var c=r(89995);var v=c.i000;var h=c.i090;var p=c.i180;var d=c.i270;var g=r(51873);var y=g.clearOutlineControllers;var m=r(60165);var x=m.pointsOnRectangle;var b=m.pointsOnEllipse;var _=m.writePaths;var w=r(90551).newShapes;var T=r(90551).createShapeObj;var k=r(35855);var A=r(48100);e.exports=function e(t,r,n,o){if(!o)o=0;var c=n.gd;function g(){e(t,r,n,o++);if(b(t[0])||n.hasText){m({redrawing:true})}}function m(e){var t={};if(n.isActiveShape!==undefined){n.isActiveShape=false;t=w(r,n)}if(n.isActiveSelection!==undefined){n.isActiveSelection=false;t=k(r,n);c._fullLayout._reselect=true}if(Object.keys(t).length){u.call((e||{}).redrawing?"relayout":"_guiRelayout",c,t)}}var L=c._fullLayout;var C=L._zoomlayer;var I=n.dragmode;var P=s(I);var O=l(I);if(P||O){c._fullLayout._outlining=true}y(c);r.attr("d",_(t));var D;var z;var R;var F;var B;if(!o&&(n.isActiveShape||n.isActiveSelection)){B=M([],t);var N=C.append("g").attr("class","outline-controllers");Y(N);Q()}if(P&&n.hasText){var j=C.select(".label-temp");var U=T(r,n,n.dragmode);A(c,"label-temp",U,j)}function V(e){R=+e.srcElement.getAttribute("data-i");F=+e.srcElement.getAttribute("data-j");D[R][F].moveFn=H}function H(e,r){if(!t.length)return;var a=B[R][F][1];var i=B[R][F][2];var o=t[R];var s=o.length;if(x(o)){var l=e;var u=r;if(n.isActiveSelection){var f=S(o,F);if(f[1]===o[F][1]){u=0}else{l=0}}for(var c=0;c<s;c++){if(c===F)continue;var v=o[c];if(v[1]===o[F][1]){v[1]=a+l}if(v[2]===o[F][2]){v[2]=i+u}}o[F][1]=a+l;o[F][2]=i+u;if(!x(o)){for(var h=0;h<s;h++){for(var p=0;p<o[h].length;p++){o[h][p]=B[R][h][p]}}}}else{o[F][1]=a+e;o[F][2]=i+r}g()}function q(){m()}function G(){if(!t.length)return;if(!t[R])return;if(!t[R].length)return;var e=[];for(var r=0;r<t[R].length;r++){if(r!==F){e.push(t[R][r])}}if(e.length>1&&!(e.length===2&&e[1][0]==="Z")){if(F===0){e[0][0]="M"}t[R]=e;g();m()}}function Z(e,r){if(e===2){R=+r.srcElement.getAttribute("data-i");F=+r.srcElement.getAttribute("data-j");var n=t[R];if(!x(n)&&!b(n)){G()}}}function Y(e){D=[];for(var r=0;r<t.length;r++){var o=t[r];var s=x(o);var l=!s&&b(o);D[r]=[];var u=o.length;for(var g=0;g<u;g++){if(o[g][0]==="Z")continue;if(l&&g!==v&&g!==h&&g!==p&&g!==d){continue}var y=s&&n.isActiveSelection;var m;if(y)m=S(o,g);var _=o[g][1];var w=o[g][2];var T=e.append(y?"rect":"circle").attr("data-i",r).attr("data-j",g).style({fill:f.background,stroke:f.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(y){var k=m[1]-_;var A=m[2]-w;var M=A?5:Math.max(Math.min(25,Math.abs(k)-5),5);var E=k?5:Math.max(Math.min(25,Math.abs(A)-5),5);T.classed(A?"cursor-ew-resize":"cursor-ns-resize",true).attr("width",M).attr("height",E).attr("x",_-M/2).attr("y",w-E/2).attr("transform",a(k/2,A/2))}else{T.classed("cursor-grab",true).attr("r",5).attr("cx",_).attr("cy",w)}D[r][g]={element:T.node(),gd:c,prepFn:V,doneFn:q,clickFn:Z};i.init(D[r][g])}}}function W(e,r){if(!t.length)return;for(var n=0;n<t.length;n++){for(var a=0;a<t[n].length;a++){for(var i=0;i+2<t[n][a].length;i+=2){t[n][a][i+1]=B[n][a][i+1]+e;t[n][a][i+2]=B[n][a][i+2]+r}}}}function X(e,t){W(e,t);g()}function J(e){R=+e.srcElement.getAttribute("data-i");if(!R)R=0;z[R].moveFn=X}function K(){m()}function $(e){if(e===2){E(c)}}function Q(){z=[];if(!t.length)return;var e=0;z[e]={element:r[0][0],gd:c,prepFn:J,doneFn:K,clickFn:$};i.init(z[e])}};function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];e[r]=[];for(var a=0;a<n.length;a++){e[r][a]=[];for(var i=0;i<n[a].length;i++){e[r][a][i]=n[a][i]}}}return e}function S(e,t){var r=e[t][1];var n=e[t][2];var a=e.length;var i,o,s;i=(t+1)%a;o=e[i][1];s=e[i][2];if(o===r&&s===n){i=(t+2)%a;o=e[i][1];s=e[i][2]}return[i,o,s]}function E(e){if(!l(e._fullLayout.dragmode))return;y(e);var t=e._fullLayout._activeSelectionIndex;var r=(e.layout||{}).selections||[];if(t<r.length){var n=[];for(var a=0;a<r.length;a++){if(a!==t){n.push(r[a])}}delete e._fullLayout._activeSelectionIndex;var i=e._fullLayout.selections[t];e._fullLayout._deselect={xref:i.xref,yref:i.yref};u.call("_guiRelayout",e,{selections:n})}}},34031:function(e,t,r){"use strict";var n=r(39898);var a=r(73972);var i=r(71828);var o=r(89298);var s=r(60165).readPaths;var l=r(42359);var u=r(48100);var f=r(51873).clearOutlineControllers;var c=r(7901);var v=r(91424);var h=r(44467).arrayEditor;var p=r(28569);var d=r(6964);var g=r(21459);var y=r(30477);var m=y.getPathString;e.exports={draw:x,drawOne:w,eraseActiveShape:E,drawLabel:u};function x(e){var t=e._fullLayout;t._shapeUpperLayer.selectAll("path").remove();t._shapeLowerLayer.selectAll("path").remove();t._shapeUpperLayer.selectAll("text").remove();t._shapeLowerLayer.selectAll("text").remove();for(var r in t._plots){var n=t._plots[r].shapelayer;if(n){n.selectAll("path").remove();n.selectAll("text").remove()}}for(var a=0;a<t.shapes.length;a++){if(t.shapes[a].visible===true){w(e,a)}}}function b(e){return!!e._fullLayout._outlining}function _(e){return!e._context.edits.shapePosition}function w(e,t){e._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+t+'"]').remove();var r=y.makeShapesOptionsAndPlotinfo(e,t);var n=r.options;var a=r.plotinfo;if(!n._input||n.visible!==true)return;if(n.layer!=="below"){o(e._fullLayout._shapeUpperLayer)}else if(n.xref==="paper"||n.yref==="paper"){o(e._fullLayout._shapeLowerLayer)}else{if(a._hadPlotinfo){var i=a.mainplotinfo||a;o(i.shapelayer)}else{o(e._fullLayout._shapeLowerLayer)}}function o(r){var i=m(e,n);var o={"data-index":t,"fill-rule":n.fillrule,d:i};var f=n.opacity;var p=n.fillcolor;var d=n.line.width?n.line.color:"rgba(0,0,0,0)";var g=n.line.width;var y=n.line.dash;if(!g&&n.editable===true){g=5;y="solid"}var x=i[i.length-1]!=="Z";var b=_(e)&&n.editable&&e._fullLayout._activeShapeIndex===t;if(b){p=x?"rgba(0,0,0,0)":e._fullLayout.activeshape.fillcolor;f=e._fullLayout.activeshape.opacity}var w=r.append("g").classed("shape-group",true).attr({"data-index":t});var A=w.append("path").attr(o).style("opacity",f).call(c.stroke,d).call(c.fill,p).call(v.dashLine,y,g);T(w,e,n);u(e,t,n,w);var S;if(b||e._context.edits.shapePosition)S=h(e.layout,"shapes",n);if(b){A.style({cursor:"move"});var E={element:A.node(),plotinfo:a,gd:e,editHelpers:S,hasText:n.label.text||n.label.texttemplate,isActiveShape:true};var L=s(i,e);l(L,A,E)}else{if(e._context.edits.shapePosition){k(e,A,n,t,r,S)}else if(n.editable===true){A.style("pointer-events",x||c.opacity(p)*f<=.5?"stroke":"all")}}A.node().addEventListener("click",(function(){return M(e,A)}))}}function T(e,t,r){var n=(r.xref+r.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");v.setClipUrl(e,n?"clip"+t._fullLayout._uid+n:null,t)}function k(e,t,r,s,l,f){var c=10;var h=10;var x=r.xsizemode==="pixel";var _=r.ysizemode==="pixel";var w=r.type==="line";var k=r.type==="path";var M=f.modifyItem;var S,E,L,C,I,P;var O,D,z,R,F,B,N,j;var U;var V=n.select(t.node().parentNode);var H=o.getFromId(e,r.xref);var q=o.getRefType(r.xref);var G=o.getFromId(e,r.yref);var Z=o.getRefType(r.yref);var Y=y.getDataToPixel(e,H,false,q);var W=y.getDataToPixel(e,G,true,Z);var X=y.getPixelToData(e,H,false,q);var J=y.getPixelToData(e,G,true,Z);var K=ee();var $={element:K.node(),gd:e,prepFn:ne,doneFn:ae,clickFn:ie};var Q;p.init($);K.node().onmousemove=re;function ee(){return w?te():t}function te(){var e=10;var n=Math.max(r.line.width,e);var a=l.append("g").attr("data-index",s).attr("drag-helper",true);a.append("path").attr("d",t.attr("d")).style({cursor:"move","stroke-width":n,"stroke-opacity":"0"});var i={"fill-opacity":"0"};var o=Math.max(n/2,e);a.append("circle").attr({"data-line-point":"start-point",cx:x?Y(r.xanchor)+r.x0:Y(r.x0),cy:_?W(r.yanchor)-r.y0:W(r.y0),r:o}).style(i).classed("cursor-grab",true);a.append("circle").attr({"data-line-point":"end-point",cx:x?Y(r.xanchor)+r.x1:Y(r.x1),cy:_?W(r.yanchor)-r.y1:W(r.y1),r:o}).style(i).classed("cursor-grab",true);return a}function re(r){if(b(e)){Q=null;return}if(w){if(r.target.tagName==="path"){Q="move"}else{Q=r.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point"}}else{var n=$.element.getBoundingClientRect();var a=n.right-n.left;var i=n.bottom-n.top;var o=r.clientX-n.left;var s=r.clientY-n.top;var l=!k&&a>c&&i>h&&!r.shiftKey?p.getCursor(o/a,1-s/i):"move";d(t,l);Q=l.split("-")[0]}}function ne(n){if(b(e))return;if(x){I=Y(r.xanchor)}if(_){P=W(r.yanchor)}if(r.type==="path"){U=r.path}else{S=x?r.x0:Y(r.x0);E=_?r.y0:W(r.y0);L=x?r.x1:Y(r.x1);C=_?r.y1:W(r.y1)}if(S<L){z=S;N="x0";R=L;j="x1"}else{z=L;N="x1";R=S;j="x0"}if(!_&&E<C||_&&E>C){O=E;F="y0";D=C;B="y1"}else{O=C;F="y1";D=E;B="y0"}re(n);le(l,r);fe(t,r,e);$.moveFn=Q==="move"?oe:se;$.altKey=n.altKey}function ae(){if(b(e))return;d(t);ue(l);T(t,e,r);a.call("_guiRelayout",e,f.getUpdateObj())}function ie(){if(b(e))return;ue(l)}function oe(n,a){if(r.type==="path"){var i=function(e){return e};var o=i;var f=i;if(x){M("xanchor",r.xanchor=X(I+n))}else{o=function e(t){return X(Y(t)+n)};if(H&&H.type==="date")o=y.encodeDate(o)}if(_){M("yanchor",r.yanchor=J(P+a))}else{f=function e(t){return J(W(t)+a)};if(G&&G.type==="date")f=y.encodeDate(f)}M("path",r.path=A(U,o,f))}else{if(x){M("xanchor",r.xanchor=X(I+n))}else{M("x0",r.x0=X(S+n));M("x1",r.x1=X(L+n))}if(_){M("yanchor",r.yanchor=J(P+a))}else{M("y0",r.y0=J(E+a));M("y1",r.y1=J(C+a))}}t.attr("d",m(e,r));le(l,r);u(e,s,r,V)}function se(n,a){if(k){var i=function(e){return e};var o=i;var f=i;if(x){M("xanchor",r.xanchor=X(I+n))}else{o=function e(t){return X(Y(t)+n)};if(H&&H.type==="date")o=y.encodeDate(o)}if(_){M("yanchor",r.yanchor=J(P+a))}else{f=function e(t){return J(W(t)+a)};if(G&&G.type==="date")f=y.encodeDate(f)}M("path",r.path=A(U,o,f))}else if(w){if(Q==="resize-over-start-point"){var v=S+n;var p=_?E-a:E+a;M("x0",r.x0=x?v:X(v));M("y0",r.y0=_?p:J(p))}else if(Q==="resize-over-end-point"){var d=L+n;var g=_?C-a:C+a;M("x1",r.x1=x?d:X(d));M("y1",r.y1=_?g:J(g))}}else{var b=function(e){return Q.indexOf(e)!==-1};var T=b("n");var q=b("s");var Z=b("w");var K=b("e");var $=T?O+a:O;var ee=q?D+a:D;var te=Z?z+n:z;var re=K?R+n:R;if(_){if(T)$=O-a;if(q)ee=D-a}if(!_&&ee-$>h||_&&$-ee>h){M(F,r[F]=_?$:J($));M(B,r[B]=_?ee:J(ee))}if(re-te>c){M(N,r[N]=x?te:X(te));M(j,r[j]=x?re:X(re))}}t.attr("d",m(e,r));le(l,r);u(e,s,r,V)}function le(e,t){if(x||_){r()}function r(){var r=t.type!=="path";var n=e.selectAll(".visual-cue").data([0]);var a=1;n.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":a}).classed("visual-cue",true);var o=Y(x?t.xanchor:i.midRange(r?[t.x0,t.x1]:y.extractPathCoords(t.path,g.paramIsX)));var s=W(_?t.yanchor:i.midRange(r?[t.y0,t.y1]:y.extractPathCoords(t.path,g.paramIsY)));o=y.roundPositionForSharpStrokeRendering(o,a);s=y.roundPositionForSharpStrokeRendering(s,a);if(x&&_){var l="M"+(o-1-a)+","+(s-1-a)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";n.attr("d",l)}else if(x){var u="M"+(o-1-a)+","+(s-9-a)+"v18 h2 v-18 Z";n.attr("d",u)}else{var f="M"+(o-9-a)+","+(s-1-a)+"h18 v2 h-18 Z";n.attr("d",f)}}}function ue(e){e.selectAll(".visual-cue").remove()}function fe(e,t,r){var n=t.xref;var a=t.yref;var i=o.getFromId(r,n);var s=o.getFromId(r,a);var l="";if(n!=="paper"&&!i.autorange)l+=n;if(a!=="paper"&&!s.autorange)l+=a;v.setClipUrl(e,l?"clip"+r._fullLayout._uid+l:null,r)}}function A(e,t,r){return e.replace(g.segmentRE,(function(e){var n=0;var a=e.charAt(0);var i=g.paramIsX[a];var o=g.paramIsY[a];var s=g.numParams[a];var l=e.substr(1).replace(g.paramRE,(function(e){if(n>=s)return e;if(i[n])e=t(e);else if(o[n])e=r(e);n++;return e}));return a+l}))}function M(e,t){if(!_(e))return;var r=t.node();var n=+r.getAttribute("data-index");if(n>=0){if(n===e._fullLayout._activeShapeIndex){S(e);return}e._fullLayout._activeShapeIndex=n;e._fullLayout._deactivateShape=S;x(e)}}function S(e){if(!_(e))return;var t=e._fullLayout._activeShapeIndex;if(t>=0){f(e);delete e._fullLayout._activeShapeIndex;x(e)}}function E(e){if(!_(e))return;f(e);var t=e._fullLayout._activeShapeIndex;var r=(e.layout||{}).shapes||[];if(t<r.length){var n=[];for(var i=0;i<r.length;i++){if(i!==t){n.push(r[i])}}delete e._fullLayout._activeShapeIndex;return a.call("_guiRelayout",e,{shapes:n})}}},29241:function(e,t,r){"use strict";var n=r(30962).overrideAll;var a=r(9012);var i=r(41940);var o=r(79952).P;var s=r(1426).extendFlat;var l=r(5386).R;var u=r(37281);e.exports=n({newshape:{visible:s({},a.visible,{}),showlegend:{valType:"boolean",dflt:false},legend:s({},a.legend,{}),legendgroup:s({},a.legendgroup,{}),legendgrouptitle:{text:s({},a.legendgrouptitle.text,{}),font:i({})},legendrank:s({},a.legendrank,{}),legendwidth:s({},a.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:s({},o,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:s({},a.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:l({newshape:true},{keys:Object.keys(u)}),font:i({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},89995:function(e){"use strict";var t=32;e.exports={CIRCLE_SIDES:t,i000:0,i090:t/4,i180:t/2,i270:t/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},45547:function(e,t,r){"use strict";var n=r(7901);var a=r(71828);function i(e,t){return e?"bottom":t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle"}e.exports=function e(t,r,o){o("newshape.visible");o("newshape.name");o("newshape.showlegend");o("newshape.legend");o("newshape.legendwidth");o("newshape.legendgroup");o("newshape.legendgrouptitle.text");a.coerceFont(o,"newshape.legendgrouptitle.font");o("newshape.legendrank");o("newshape.drawdirection");o("newshape.layer");o("newshape.fillcolor");o("newshape.fillrule");o("newshape.opacity");var s=o("newshape.line.width");if(s){var l=(t||{}).plot_bgcolor||"#FFF";o("newshape.line.color",n.contrast(l));o("newshape.line.dash")}var u=t.dragmode==="drawline";var f=o("newshape.label.text");var c=o("newshape.label.texttemplate");if(f||c){o("newshape.label.textangle");var v=o("newshape.label.textposition",u?"middle":"middle center");o("newshape.label.xanchor");o("newshape.label.yanchor",i(u,v));o("newshape.label.padding");a.coerceFont(o,"newshape.label.font",r.font)}o("activeshape.fillcolor");o("activeshape.opacity")}},60165:function(e,t,r){"use strict";var n=r(95616);var a=r(89995);var i=a.CIRCLE_SIDES;var o=a.SQRT2;var s=r(75549);var l=s.p2r;var u=s.r2p;var f=[0,3,4,5,6,1,2];var c=[0,3,4,1,2];t.writePaths=function(e){var t=e.length;if(!t)return"M0,0Z";var r="";for(var n=0;n<t;n++){var a=e[n].length;for(var i=0;i<a;i++){var o=e[n][i][0];if(o==="Z"){r+="Z"}else{var s=e[n][i].length;for(var l=0;l<s;l++){var u=l;if(o==="Q"||o==="S"){u=c[l]}else if(o==="C"){u=f[l]}r+=e[n][i][u];if(l>0&&l<s-1){r+=","}}}}}return r};t.readPaths=function(e,t,r,a){var o=n(e);var s=[];var f=-1;var c=function(){f++;s[f]=[]};var v;var h=0;var p=0;var d;var g;var y=function(){d=h;g=p};y();for(var m=0;m<o.length;m++){var x=[];var b,_,w,T;var k=o[m][0];var A=k;switch(k){case"M":c();h=+o[m][1];p=+o[m][2];x.push([A,h,p]);y();break;case"Q":case"S":b=+o[m][1];w=+o[m][2];h=+o[m][3];p=+o[m][4];x.push([A,h,p,b,w]);break;case"C":b=+o[m][1];w=+o[m][2];_=+o[m][3];T=+o[m][4];h=+o[m][5];p=+o[m][6];x.push([A,h,p,b,w,_,T]);break;case"T":case"L":h=+o[m][1];p=+o[m][2];x.push([A,h,p]);break;case"H":A="L";h=+o[m][1];x.push([A,h,p]);break;case"V":A="L";p=+o[m][1];x.push([A,h,p]);break;case"A":A="L";var M=+o[m][1];var S=+o[m][2];if(!+o[m][4]){M=-M;S=-S}var E=h-M;var L=p;for(v=1;v<=i/2;v++){var C=2*Math.PI*v/i;x.push([A,E+M*Math.cos(C),L+S*Math.sin(C)])}break;case"Z":if(h!==d||p!==g){h=d;p=g;x.push([A,h,p])}break}var I=(r||{}).domain;var P=t._fullLayout._size;var O=r&&r.xsizemode==="pixel";var D=r&&r.ysizemode==="pixel";var z=a===false;for(var R=0;R<x.length;R++){for(v=0;v+2<7;v+=2){var F=x[R][v+1];var B=x[R][v+2];if(F===undefined||B===undefined)continue;h=F;p=B;if(r){if(r.xaxis&&r.xaxis.p2r){if(z)F-=r.xaxis._offset;if(O){F=u(r.xaxis,r.xanchor)+F}else{F=l(r.xaxis,F)}}else{if(z)F-=P.l;if(I)F=I.x[0]+F/P.w;else F=F/P.w}if(r.yaxis&&r.yaxis.p2r){if(z)B-=r.yaxis._offset;if(D){B=u(r.yaxis,r.yanchor)-B}else{B=l(r.yaxis,B)}}else{if(z)B-=P.t;if(I)B=I.y[1]-B/P.h;else B=1-B/P.h}}x[R][v+1]=F;x[R][v+2]=B}s[f].push(x[R].slice())}}return s};function v(e,t){return Math.abs(e-t)<=1e-6}function h(e,t){var r=t[1]-e[1];var n=t[2]-e[2];return Math.sqrt(r*r+n*n)}t.pointsOnRectangle=function(e){var t=e.length;if(t!==5)return false;for(var r=1;r<3;r++){var n=e[0][r]-e[1][r];var a=e[3][r]-e[2][r];if(!v(n,a))return false;var i=e[0][r]-e[3][r];var o=e[1][r]-e[2][r];if(!v(i,o))return false}if(!v(e[0][1],e[1][1])&&!v(e[0][1],e[3][1]))return false;return!!(h(e[0],e[1])*h(e[0],e[3]))};t.pointsOnEllipse=function(e){var t=e.length;if(t!==i+1)return false;t=i;for(var r=0;r<t;r++){var n=(t*2-r)%t;var a=(t/2+n)%t;var o=(t/2+r)%t;if(!v(h(e[r],e[o]),h(e[n],e[a])))return false}return true};t.handleEllipse=function(e,r,n){if(!e)return[r,n];var a=t.ellipseOver({x0:r[0],y0:r[1],x1:n[0],y1:n[1]});var s=(a.x1+a.x0)/2;var l=(a.y1+a.y0)/2;var u=(a.x1-a.x0)/2;var f=(a.y1-a.y0)/2;if(!u)u=f=f/o;if(!f)f=u=u/o;var c=[];for(var v=0;v<i;v++){var h=v*2*Math.PI/i;c.push([s+u*Math.cos(h),l+f*Math.sin(h)])}return c};t.ellipseOver=function(e){var t=e.x0;var r=e.y0;var n=e.x1;var a=e.y1;var i=n-t;var s=a-r;t-=i;r-=s;var l=(t+n)/2;var u=(r+a)/2;var f=o;i*=f;s*=f;return{x0:l-i,y0:u-s,x1:l+i,y1:u+s}};t.fixDatesForPaths=function(e,t,r){var n=t.type==="date";var a=r.type==="date";if(!n&&!a)return e;for(var i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++){for(var s=0;s+2<e[i][o].length;s+=2){if(n)e[i][o][s+1]=e[i][o][s+1].replace(" ","_");if(a)e[i][o][s+2]=e[i][o][s+2].replace(" ","_")}}}return e}},90551:function(e,t,r){"use strict";var n=r(64505);var a=n.drawMode;var i=n.openMode;var o=r(89995);var s=o.i000;var l=o.i090;var u=o.i180;var f=o.i270;var c=o.cos45;var v=o.sin45;var h=r(75549);var p=h.p2r;var d=h.r2p;var g=r(51873);var y=g.clearOutline;var m=r(60165);var x=m.readPaths;var b=m.writePaths;var _=m.ellipseOver;var w=m.fixDatesForPaths;function T(e,t){if(!e.length)return;var r=e[0][0];if(!r)return;var n=t.gd;var i=t.isActiveShape;var o=t.dragmode;var s=(n.layout||{}).shapes||[];if(!a(o)&&i!==undefined){var l=n._fullLayout._activeShapeIndex;if(l<s.length){switch(n._fullLayout.shapes[l].type){case"rect":o="drawrect";break;case"circle":o="drawcircle";break;case"line":o="drawline";break;case"path":var u=s[l].path||"";if(u[u.length-1]==="Z"){o="drawclosedpath"}else{o="drawopenpath"}break}}}var f=k(e,t,o);y(n);var c=t.editHelpers;var v=(c||{}).modifyItem;var h=[];for(var p=0;p<s.length;p++){var d=n._fullLayout.shapes[p];h[p]=d._input;if(i!==undefined&&p===n._fullLayout._activeShapeIndex){var g=f;switch(d.type){case"line":case"rect":case"circle":v("x0",g.x0);v("x1",g.x1);v("y0",g.y0);v("y1",g.y1);break;case"path":v("path",g.path);break}}}if(i===undefined){h.push(f);return h}return c?c.getUpdateObj():{}}function k(e,t,r){var n=e[0][0];var a=t.gd;var o=n.getAttribute("d");var h=a._fullLayout.newshape;var g=t.plotinfo;var y=t.isActiveShape;var m=g.xaxis;var T=g.yaxis;var k=!!g.domain||!g.xaxis;var A=!!g.domain||!g.yaxis;var M=i(r);var S=x(o,a,g,y);var E={editable:true,visible:h.visible,name:h.name,showlegend:h.showlegend,legend:h.legend,legendwidth:h.legendwidth,legendgroup:h.legendgroup,legendgrouptitle:{text:h.legendgrouptitle.text,font:h.legendgrouptitle.font},legendrank:h.legendrank,label:h.label,xref:k?"paper":m._id,yref:A?"paper":T._id,layer:h.layer,opacity:h.opacity,line:{color:h.line.color,width:h.line.width,dash:h.line.dash}};if(!M){E.fillcolor=h.fillcolor;E.fillrule=h.fillrule}var L;if(S.length===1)L=S[0];if(L&&L.length===5&&r==="drawrect"){E.type="rect";E.x0=L[0][1];E.y0=L[0][2];E.x1=L[2][1];E.y1=L[2][2]}else if(L&&r==="drawline"){E.type="line";E.x0=L[0][1];E.y0=L[0][2];E.x1=L[1][1];E.y1=L[1][2]}else if(L&&r==="drawcircle"){E.type="circle";var C=L[s][1];var I=L[l][1];var P=L[u][1];var O=L[f][1];var D=L[s][2];var z=L[l][2];var R=L[u][2];var F=L[f][2];var B=g.xaxis&&(g.xaxis.type==="date"||g.xaxis.type==="log");var N=g.yaxis&&(g.yaxis.type==="date"||g.yaxis.type==="log");if(B){C=d(g.xaxis,C);I=d(g.xaxis,I);P=d(g.xaxis,P);O=d(g.xaxis,O)}if(N){D=d(g.yaxis,D);z=d(g.yaxis,z);R=d(g.yaxis,R);F=d(g.yaxis,F)}var j=(I+O)/2;var U=(D+R)/2;var V=(O-I+P-C)/2;var H=(F-z+R-D)/2;var q=_({x0:j,y0:U,x1:j+V*c,y1:U+H*v});if(B){q.x0=p(g.xaxis,q.x0);q.x1=p(g.xaxis,q.x1)}if(N){q.y0=p(g.yaxis,q.y0);q.y1=p(g.yaxis,q.y1)}E.x0=q.x0;E.y0=q.y0;E.x1=q.x1;E.y1=q.y1}else{E.type="path";if(m&&T)w(S,m,T);E.path=b(S);L=null}return E}e.exports={newShapes:T,createShapeObj:k}},51873:function(e){"use strict";function t(e){var t=e._fullLayout._zoomlayer;if(t){t.selectAll(".outline-controllers").remove()}}function r(e){var t=e._fullLayout._zoomlayer;if(t){t.selectAll(".select-outline").remove()}e._fullLayout._outlining=false}e.exports={clearOutlineControllers:t,clearOutline:r}},30477:function(e,t,r){"use strict";var n=r(21459);var a=r(71828);var i=r(89298);t.rangeToShapePosition=function(e){return e.type==="log"?e.r2d:function(e){return e}};t.shapePositionToRange=function(e){return e.type==="log"?e.d2r:function(e){return e}};t.decodeDate=function(e){return function(t){if(t.replace)t=t.replace("_"," ");return e(t)}};t.encodeDate=function(e){return function(t){return e(t).replace(" ","_")}};t.extractPathCoords=function(e,t,r){var i=[];var o=e.match(n.segmentRE);o.forEach((function(e){var o=t[e.charAt(0)].drawn;if(o===undefined)return;var s=e.substr(1).match(n.paramRE);if(!s||s.length<o)return;var l=s[o];var u=r?l:a.cleanNumber(l);i.push(u)}));return i};t.getDataToPixel=function(e,r,n,a){var i=e._fullLayout._size;var o;if(r){if(a==="domain"){o=function(e){return r._length*(n?1-e:e)+r._offset}}else{var s=t.shapePositionToRange(r);o=function(e){return r._offset+r.r2p(s(e,true))};if(r.type==="date")o=t.decodeDate(o)}}else if(n){o=function(e){return i.t+i.h*(1-e)}}else{o=function(e){return i.l+i.w*e}}return o};t.getPixelToData=function(e,r,n,a){var i=e._fullLayout._size;var o;if(r){if(a==="domain"){o=function(e){var t=(e-r._offset)/r._length;return n?1-t:t}}else{var s=t.rangeToShapePosition(r);o=function(e){return s(r.p2r(e-r._offset))}}}else if(n){o=function(e){return 1-(e-i.t)/i.h}}else{o=function(e){return(e-i.l)/i.w}}return o};t.roundPositionForSharpStrokeRendering=function(e,t){var r=Math.round(t%2)===1;var n=Math.round(e);return r?n+.5:n};t.makeShapesOptionsAndPlotinfo=function(e,t){var r=e._fullLayout.shapes[t]||{};var n=e._fullLayout._plots[r.xref+r.yref];var a=!!n;if(a){n._hadPlotinfo=true}else{n={};if(r.xref&&r.xref!=="paper")n.xaxis=e._fullLayout[r.xref+"axis"];if(r.yref&&r.yref!=="paper")n.yaxis=e._fullLayout[r.yref+"axis"]}n.xsizemode=r.xsizemode;n.ysizemode=r.ysizemode;n.xanchor=r.xanchor;n.yanchor=r.yanchor;return{options:r,plotinfo:n}};t.makeSelectionsOptionsAndPlotinfo=function(e,t){var r=e._fullLayout.selections[t]||{};var n=e._fullLayout._plots[r.xref+r.yref];var a=!!n;if(a){n._hadPlotinfo=true}else{n={};if(r.xref)n.xaxis=e._fullLayout[r.xref+"axis"];if(r.yref)n.yaxis=e._fullLayout[r.yref+"axis"]}return{options:r,plotinfo:n}};t.getPathString=function(e,r){var n=r.type;var a=i.getRefType(r.xref);var s=i.getRefType(r.yref);var l=i.getFromId(e,r.xref);var u=i.getFromId(e,r.yref);var f=e._fullLayout._size;var c,v,h,p;var d,g,y,m;if(l){if(a==="domain"){v=function(e){return l._offset+l._length*e}}else{c=t.shapePositionToRange(l);v=function(e){return l._offset+l.r2p(c(e,true))}}}else{v=function(e){return f.l+f.w*e}}if(u){if(s==="domain"){p=function(e){return u._offset+u._length*(1-e)}}else{h=t.shapePositionToRange(u);p=function(e){return u._offset+u.r2p(h(e,true))}}}else{p=function(e){return f.t+f.h*(1-e)}}if(n==="path"){if(l&&l.type==="date")v=t.decodeDate(v);if(u&&u.type==="date")p=t.decodeDate(p);return o(r,v,p)}if(r.xsizemode==="pixel"){var x=v(r.xanchor);d=x+r.x0;g=x+r.x1}else{d=v(r.x0);g=v(r.x1)}if(r.ysizemode==="pixel"){var b=p(r.yanchor);y=b-r.y0;m=b-r.y1}else{y=p(r.y0);m=p(r.y1)}if(n==="line")return"M"+d+","+y+"L"+g+","+m;if(n==="rect")return"M"+d+","+y+"H"+g+"V"+m+"H"+d+"Z";var _=(d+g)/2;var w=(y+m)/2;var T=Math.abs(_-d);var k=Math.abs(w-y);var A="A"+T+","+k;var M=_+T+","+w;var S=_+","+(w-k);return"M"+M+A+" 0 1,1 "+S+A+" 0 0,1 "+M+"Z"};function o(e,t,r){var i=e.path;var o=e.xsizemode;var s=e.ysizemode;var l=e.xanchor;var u=e.yanchor;return i.replace(n.segmentRE,(function(e){var i=0;var f=e.charAt(0);var c=n.paramIsX[f];var v=n.paramIsY[f];var h=n.numParams[f];var p=e.substr(1).replace(n.paramRE,(function(e){if(c[i]){if(o==="pixel")e=t(l)+Number(e);else e=t(e)}else if(v[i]){if(s==="pixel")e=r(u)-Number(e);else e=r(e)}i++;if(i>h)e="X";return e}));if(i>h){p=p.replace(/[\s,]*X.*/,"");a.log("Ignoring extra params in segment "+e)}return f+p}))}},89853:function(e,t,r){"use strict";var n=r(34031);e.exports={moduleType:"component",name:"shapes",layoutAttributes:r(89827),supplyLayoutDefaults:r(84726),supplyDrawNewShapeDefaults:r(45547),includeBasePlot:r(76325)("shapes"),calcAutorange:r(5627),draw:n.draw,drawOne:n.drawOne}},37281:function(e){"use strict";function t(e,t){return t?t.d2l(e):e}function r(e,t){return t?t.l2d(e):e}function n(e){return e.x0}function a(e){return e.x1}function i(e){return e.y0}function o(e){return e.y1}function s(e,r){return t(e.x1,r)-t(e.x0,r)}function l(e,r,n){return t(e.y1,n)-t(e.y0,n)}function u(e,t){return Math.abs(s(e,t))}function f(e,t,r){return Math.abs(l(e,t,r))}function c(e,t,r){return e.type!=="line"?undefined:Math.sqrt(Math.pow(s(e,t),2)+Math.pow(l(e,t,r),2))}function v(e,n){return r((t(e.x1,n)+t(e.x0,n))/2,n)}function h(e,n,a){return r((t(e.y1,a)+t(e.y0,a))/2,a)}function p(e,t,r){return e.type!=="line"?undefined:l(e,t,r)/s(e,t)}e.exports={x0:n,x1:a,y0:i,y1:o,slope:p,dx:s,dy:l,width:u,height:f,length:c,xcenter:v,ycenter:h}},75067:function(e,t,r){"use strict";var n=r(41940);var a=r(35025);var i=r(1426).extendDeepAll;var o=r(30962).overrideAll;var s=r(85594);var l=r(44467).templatedArray;var u=r(98292);var f=l("step",{visible:{valType:"boolean",dflt:true},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:true,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:true}});e.exports=o(l("slider",{visible:{valType:"boolean",dflt:true},active:{valType:"number",min:0,dflt:0},steps:f,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:i(a({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:true},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:n({})},font:n({}),activebgcolor:{valType:"color",dflt:u.gripBgActiveColor},bgcolor:{valType:"color",dflt:u.railBgColor},bordercolor:{valType:"color",dflt:u.railBorderColor},borderwidth:{valType:"number",min:0,dflt:u.railBorderWidth},ticklen:{valType:"number",min:0,dflt:u.tickLength},tickcolor:{valType:"color",dflt:u.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:u.minorTickLength}}),"arraydraw","from-root")},98292:function(e){"use strict";e.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},12343:function(e,t,r){"use strict";var n=r(71828);var a=r(85501);var i=r(75067);var o=r(98292);var s=o.name;var l=i.steps;e.exports=function e(t,r){a(t,r,{name:s,handleItemDefaults:u})};function u(e,t,r){function o(r,a){return n.coerce(e,t,i,r,a)}var s=a(e,t,{name:"steps",handleItemDefaults:f});var l=0;for(var u=0;u<s.length;u++){if(s[u].visible)l++}var c;if(l<2)c=t.visible=false;else c=o("visible");if(!c)return;t._stepCount=l;var v=t._visibleSteps=n.filterVisible(s);var h=o("active");if(!(s[h]||{}).visible)t.active=v[0]._index;o("x");o("y");n.noneOrAll(e,t,["x","y"]);o("xanchor");o("yanchor");o("len");o("lenmode");o("pad.t");o("pad.r");o("pad.b");o("pad.l");n.coerceFont(o,"font",r.font);var p=o("currentvalue.visible");if(p){o("currentvalue.xanchor");o("currentvalue.prefix");o("currentvalue.suffix");o("currentvalue.offset");n.coerceFont(o,"currentvalue.font",t.font)}o("transition.duration");o("transition.easing");o("bgcolor");o("activebgcolor");o("bordercolor");o("borderwidth");o("ticklen");o("tickwidth");o("tickcolor");o("minorticklen")}function f(e,t){function r(r,a){return n.coerce(e,t,l,r,a)}var a;if(e.method!=="skip"&&!Array.isArray(e.args)){a=t.visible=false}else a=r("visible");if(a){r("method");r("args");var i=r("label","step-"+t._index);r("value",i);r("execute")}}},44504:function(e,t,r){"use strict";var n=r(39898);var a=r(74875);var i=r(7901);var o=r(91424);var s=r(71828);var l=s.strTranslate;var u=r(63893);var f=r(44467).arrayEditor;var c=r(98292);var v=r(18783);var h=v.LINE_SPACING;var p=v.FROM_TL;var d=v.FROM_BR;e.exports=function e(t){var r=t._context.staticPlot;var i=t._fullLayout;var o=y(i,t);var s=i._infolayer.selectAll("g."+c.containerClassName).data(o.length>0?[0]:[]);s.enter().append("g").classed(c.containerClassName,true).style("cursor",r?null:"ew-resize");function l(e){if(e._commandObserver){e._commandObserver.remove();delete e._commandObserver}a.autoMargin(t,g(e))}s.exit().each((function(){n.select(this).selectAll("g."+c.groupClassName).each(l)})).remove();if(o.length===0)return;var u=s.selectAll("g."+c.groupClassName).data(o,m);u.enter().append("g").classed(c.groupClassName,true);u.exit().each(l).remove();for(var f=0;f<o.length;f++){var v=o[f];x(t,v)}u.each((function(e){var r=n.select(this);L(e);a.manageCommandObserver(t,e,e._visibleSteps,(function(e){var n=r.data()[0];if(n.active===e.index)return;if(n._dragging)return;M(t,r,n,e.index,false,true)}));b(t,n.select(this),e)}))};function g(e){return c.autoMarginIdRoot+e._index}function y(e,t){var r=e[c.name];var n=[];for(var a=0;a<r.length;a++){var i=r[a];if(!i.visible)continue;i._gd=t;n.push(i)}return n}function m(e){return e._index}function x(e,t){var r=o.tester.selectAll("g."+c.labelGroupClass).data(t._visibleSteps);r.enter().append("g").classed(c.labelGroupClass,true);var i=0;var l=0;r.each((function(e){var r=n.select(this);var a=T(r,{step:e},t);var s=a.node();if(s){var u=o.bBox(s);l=Math.max(l,u.height);i=Math.max(i,u.width)}}));r.remove();var f=t._dims={};f.inputAreaWidth=Math.max(c.railWidth,c.gripHeight);var v=e._fullLayout._size;f.lx=v.l+v.w*t.x;f.ly=v.t+v.h*(1-t.y);if(t.lenmode==="fraction"){f.outerLength=Math.round(v.w*t.len)}else{f.outerLength=t.len}f.inputAreaStart=0;f.inputAreaLength=Math.round(f.outerLength-t.pad.l-t.pad.r);var h=f.inputAreaLength-2*c.stepInset;var y=h/(t._stepCount-1);var m=i+c.labelPadding;f.labelStride=Math.max(1,Math.ceil(m/y));f.labelHeight=l;f.currentValueMaxWidth=0;f.currentValueHeight=0;f.currentValueTotalHeight=0;f.currentValueMaxLines=1;if(t.currentvalue.visible){var x=o.tester.append("g");r.each((function(e){var r=_(x,t,e.label);var n=r.node()&&o.bBox(r.node())||{width:0,height:0};var a=u.lineCount(r);f.currentValueMaxWidth=Math.max(f.currentValueMaxWidth,Math.ceil(n.width));f.currentValueHeight=Math.max(f.currentValueHeight,Math.ceil(n.height));f.currentValueMaxLines=Math.max(f.currentValueMaxLines,a)}));f.currentValueTotalHeight=f.currentValueHeight+t.currentvalue.offset;x.remove()}f.height=f.currentValueTotalHeight+c.tickOffset+t.ticklen+c.labelOffset+f.labelHeight+t.pad.t+t.pad.b;var b="left";if(s.isRightAnchor(t)){f.lx-=f.outerLength;b="right"}if(s.isCenterAnchor(t)){f.lx-=f.outerLength/2;b="center"}var w="top";if(s.isBottomAnchor(t)){f.ly-=f.height;w="bottom"}if(s.isMiddleAnchor(t)){f.ly-=f.height/2;w="middle"}f.outerLength=Math.ceil(f.outerLength);f.height=Math.ceil(f.height);f.lx=Math.round(f.lx);f.ly=Math.round(f.ly);var k={y:t.y,b:f.height*d[w],t:f.height*p[w]};if(t.lenmode==="fraction"){k.l=0;k.xl=t.x-t.len*p[b];k.r=0;k.xr=t.x+t.len*d[b]}else{k.x=t.x;k.l=f.outerLength*p[b];k.r=f.outerLength*d[b]}a.autoMargin(e,g(t),k)}function b(e,t,r){if(!(r.steps[r.active]||{}).visible){r.active=r._visibleSteps[0]._index}t.call(_,r).call(D,r).call(k,r).call(E,r).call(O,e,r).call(w,e,r);var n=r._dims;o.setTranslate(t,n.lx+r.pad.l,n.ly+r.pad.t);t.call(C,r,false);t.call(_,r)}function _(e,t,r){if(!t.currentvalue.visible)return;var n=t._dims;var a,i;switch(t.currentvalue.xanchor){case"right":a=n.inputAreaLength-c.currentValueInset-n.currentValueMaxWidth;i="left";break;case"center":a=n.inputAreaLength*.5;i="middle";break;default:a=c.currentValueInset;i="left"}var l=s.ensureSingle(e,"text",c.labelClass,(function(e){e.attr({"text-anchor":i,"data-notex":1})}));var f=t.currentvalue.prefix?t.currentvalue.prefix:"";if(typeof r==="string"){f+=r}else{var v=t.steps[t.active].label;var p=t._gd._fullLayout._meta;if(p)v=s.templateString(v,p);f+=v}if(t.currentvalue.suffix){f+=t.currentvalue.suffix}l.call(o.font,t.currentvalue.font).text(f).call(u.convertToTspans,t._gd);var d=u.lineCount(l);var g=(n.currentValueMaxLines+1-d)*t.currentvalue.font.size*h;u.positionText(l,a,g);return l}function w(e,t,r){var n=s.ensureSingle(e,"rect",c.gripRectClass,(function(n){n.call(S,t,e,r).style("pointer-events","all")}));n.attr({width:c.gripWidth,height:c.gripHeight,rx:c.gripRadius,ry:c.gripRadius}).call(i.stroke,r.bordercolor).call(i.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function T(e,t,r){var n=s.ensureSingle(e,"text",c.labelClass,(function(e){e.attr({"text-anchor":"middle","data-notex":1})}));var a=t.step.label;var i=r._gd._fullLayout._meta;if(i)a=s.templateString(a,i);n.call(o.font,r.font).text(a).call(u.convertToTspans,r._gd);return n}function k(e,t){var r=s.ensureSingle(e,"g",c.labelsClass);var a=t._dims;var i=r.selectAll("g."+c.labelGroupClass).data(a.labelSteps);i.enter().append("g").classed(c.labelGroupClass,true);i.exit().remove();i.each((function(e){var r=n.select(this);r.call(T,e,t);o.setTranslate(r,I(t,e.fraction),c.tickOffset+t.ticklen+t.font.size*h+c.labelOffset+a.currentValueTotalHeight)}))}function A(e,t,r,n,a){var i=Math.round(n*(r._stepCount-1));var o=r._visibleSteps[i]._index;if(o!==r.active){M(e,t,r,o,true,a)}}function M(e,t,r,n,i,o){var s=r.active;r.active=n;f(e.layout,c.name,r).applyUpdate("active",n);var l=r.steps[r.active];t.call(C,r,o);t.call(_,r);e.emit("plotly_sliderchange",{slider:r,step:r.steps[r.active],interaction:i,previousActive:s});if(l&&l.method&&i){if(t._nextMethod){t._nextMethod.step=l;t._nextMethod.doCallback=i;t._nextMethod.doTransition=o}else{t._nextMethod={step:l,doCallback:i,doTransition:o};t._nextMethodRaf=window.requestAnimationFrame((function(){var r=t._nextMethod.step;if(!r.method)return;if(r.execute){a.executeAPICommand(e,r.method,r.args)}t._nextMethod=null;t._nextMethodRaf=null}))}}}function S(e,t,r){if(t._context.staticPlot)return;var a=r.node();var o=n.select(t);function s(){return r.data()[0]}function l(){var e=s();t.emit("plotly_sliderstart",{slider:e});var l=r.select("."+c.gripRectClass);n.event.stopPropagation();n.event.preventDefault();l.call(i.fill,e.activebgcolor);var u=P(e,n.mouse(a)[0]);A(t,r,e,u,true);e._dragging=true;function f(){var e=s();var i=P(e,n.mouse(a)[0]);A(t,r,e,i,false)}o.on("mousemove",f);o.on("touchmove",f);function v(){var e=s();e._dragging=false;l.call(i.fill,e.bgcolor);o.on("mouseup",null);o.on("mousemove",null);o.on("touchend",null);o.on("touchmove",null);t.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})}o.on("mouseup",v);o.on("touchend",v)}e.on("mousedown",l);e.on("touchstart",l)}function E(e,t){var r=e.selectAll("rect."+c.tickRectClass).data(t._visibleSteps);var a=t._dims;r.enter().append("rect").classed(c.tickRectClass,true);r.exit().remove();r.attr({width:t.tickwidth+"px","shape-rendering":"crispEdges"});r.each((function(e,r){var s=r%a.labelStride===0;var l=n.select(this);l.attr({height:s?t.ticklen:t.minorticklen}).call(i.fill,s?t.tickcolor:t.tickcolor);o.setTranslate(l,I(t,r/(t._stepCount-1))-.5*t.tickwidth,(s?c.tickOffset:c.minorTickOffset)+a.currentValueTotalHeight)}))}function L(e){var t=e._dims;t.labelSteps=[];var r=e._stepCount;for(var n=0;n<r;n+=t.labelStride){t.labelSteps.push({fraction:n/(r-1),step:e._visibleSteps[n]})}}function C(e,t,r){var n=e.select("rect."+c.gripRectClass);var a=0;for(var i=0;i<t._stepCount;i++){if(t._visibleSteps[i]._index===t.active){a=i;break}}var o=I(t,a/(t._stepCount-1));if(t._invokingCommand)return;var s=n;if(r&&t.transition.duration>0){s=s.transition().duration(t.transition.duration).ease(t.transition.easing)}s.attr("transform",l(o-c.gripWidth*.5,t._dims.currentValueTotalHeight))}function I(e,t){var r=e._dims;return r.inputAreaStart+c.stepInset+(r.inputAreaLength-2*c.stepInset)*Math.min(1,Math.max(0,t))}function P(e,t){var r=e._dims;return Math.min(1,Math.max(0,(t-c.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*c.stepInset-2*r.inputAreaStart)))}function O(e,t,r){var n=r._dims;var a=s.ensureSingle(e,"rect",c.railTouchRectClass,(function(n){n.call(S,t,e,r).style("pointer-events","all")}));a.attr({width:n.inputAreaLength,height:Math.max(n.inputAreaWidth,c.tickOffset+r.ticklen+n.labelHeight)}).call(i.fill,r.bgcolor).attr("opacity",0);o.setTranslate(a,0,n.currentValueTotalHeight)}function D(e,t){var r=t._dims;var n=r.inputAreaLength-c.railInset*2;var a=s.ensureSingle(e,"rect",c.railRectClass);a.attr({width:n,height:c.railWidth,rx:c.railRadius,ry:c.railRadius,"shape-rendering":"crispEdges"}).call(i.stroke,t.bordercolor).call(i.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px");o.setTranslate(a,c.railInset,(r.inputAreaWidth-c.railWidth)*.5+r.currentValueTotalHeight)}},23243:function(e,t,r){"use strict";var n=r(98292);e.exports={moduleType:"component",name:n.name,layoutAttributes:r(75067),supplyLayoutDefaults:r(12343),draw:r(44504)}},92998:function(e,t,r){"use strict";var n=r(39898);var a=r(92770);var i=r(74875);var o=r(73972);var s=r(71828);var l=s.strTranslate;var u=r(91424);var f=r(7901);var c=r(63893);var v=r(37822);var h=r(18783).OPPOSITE_SIDE;var p=/ [XY][0-9]* /;function d(e,t,r){var d=r.propContainer;var g=r.propName;var y=r.placeholder;var m=r.traceIndex;var x=r.avoid||{};var b=r.attributes;var _=r.transform;var w=r.containerGroup;var T=e._fullLayout;var k=1;var A=false;var M=d.title;var S=(M&&M.text?M.text:"").trim();var E=M&&M.font?M.font:{};var L=E.family;var C=E.size;var I=E.color;var P;if(g==="title.text")P="titleText";else if(g.indexOf("axis")!==-1)P="axisTitleText";else if(g.indexOf("colorbar"!==-1))P="colorbarTitleText";var O=e._context.edits[P];if(S==="")k=0;else if(S.replace(p," % ")===y.replace(p," % ")){k=.2;A=true;if(!O)S=""}if(r._meta){S=s.templateString(S,r._meta)}else if(T._meta){S=s.templateString(S,T._meta)}var D=S||O;var z;if(!w){w=s.ensureSingle(T._infolayer,"g","g-"+t);z=T._hColorbarMoveTitle}var R=w.selectAll("text").data(D?[0]:[]);R.enter().append("text");R.text(S).attr("class",t);R.exit().remove();if(!D)return w;function F(e){s.syncOrAsync([B,N],e)}function B(t){var r;if(!_&&z){_={}}if(_){r="";if(_.rotate){r+="rotate("+[_.rotate,b.x,b.y]+")"}if(_.offset||z){r+=l(0,(_.offset||0)-(z||0))}}else{r=null}t.attr("transform",r);t.style({"font-family":L,"font-size":n.round(C,2)+"px",fill:f.rgb(I),opacity:k*f.opacity(I),"font-weight":i.fontWeight}).attr(b).call(c.convertToTspans,e);return i.previousPromises(e)}function N(t){var r=n.select(t.node().parentNode);if(x&&x.selection&&x.side&&S){r.attr("transform",null);var i=h[x.side];var o=x.side==="left"||x.side==="top"?-1:1;var f=a(x.pad)?x.pad:2;var c=u.bBox(r.node());var v={t:0,b:0,l:0,r:0};var p=e._fullLayout._reservedMargin;for(var g in p){for(var y in p[g]){var m=p[g][y];v[y]=Math.max(v[y],m)}}var b={left:v.l,top:v.t,right:T.width-v.r,bottom:T.height-v.b};var _=x.maxShift||o*(b[x.side]-c[x.side]);var w=0;if(_<0){w=_}else{var k=x.offsetLeft||0;var A=x.offsetTop||0;c.left-=k;c.right-=k;c.top-=A;c.bottom-=A;x.selection.each((function(){var e=u.bBox(this);if(s.bBoxIntersect(c,e,f)){w=Math.max(w,o*(e[x.side]-c[i])+f)}}));w=Math.min(_,w);d._titleScoot=Math.abs(w)}if(w>0||_<0){var M={left:[-w,0],right:[w,0],top:[0,-w],bottom:[0,w]}[x.side];r.attr("transform",l(M[0],M[1]))}}}R.call(F);function j(){k=0;A=true;R.text(y).on("mouseover.opacity",(function(){n.select(this).transition().duration(v.SHOW_PLACEHOLDER).style("opacity",1)})).on("mouseout.opacity",(function(){n.select(this).transition().duration(v.HIDE_PLACEHOLDER).style("opacity",0)}))}if(O){if(!S)j();else R.on(".opacity",null);R.call(c.makeEditable,{gd:e}).on("edit",(function(t){if(m!==undefined){o.call("_guiRestyle",e,g,t,m)}else{o.call("_guiRelayout",e,g,t)}})).on("cancel",(function(){this.text(this.attr("data-unformatted")).call(F)})).on("input",(function(e){this.text(e||" ").call(c.positionText,b.x,b.y)}))}R.classed("js-placeholder",A);return w}e.exports={draw:d}},7163:function(e,t,r){"use strict";var n=r(41940);var a=r(22399);var i=r(1426).extendFlat;var o=r(30962).overrideAll;var s=r(35025);var l=r(44467).templatedArray;var u=l("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:true,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:true,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:true}});e.exports=o(l("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:true},buttons:u,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:i(s({editType:"arraydraw"}),{}),font:n({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:a.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},75909:function(e){"use strict";e.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},64897:function(e,t,r){"use strict";var n=r(71828);var a=r(85501);var i=r(7163);var o=r(75909);var s=o.name;var l=i.buttons;e.exports=function e(t,r){var n={name:s,handleItemDefaults:u};a(t,r,n)};function u(e,t,r){function o(r,a){return n.coerce(e,t,i,r,a)}var s=a(e,t,{name:"buttons",handleItemDefaults:f});var l=o("visible",s.length>0);if(!l)return;o("active");o("direction");o("type");o("showactive");o("x");o("y");n.noneOrAll(e,t,["x","y"]);o("xanchor");o("yanchor");o("pad.t");o("pad.r");o("pad.b");o("pad.l");n.coerceFont(o,"font",r.font);o("bgcolor",r.paper_bgcolor);o("bordercolor");o("borderwidth")}function f(e,t){function r(r,a){return n.coerce(e,t,l,r,a)}var a=r("visible",e.method==="skip"||Array.isArray(e.args));if(a){r("method");r("args");r("args2");r("label");r("execute")}}},13689:function(e,t,r){"use strict";var n=r(39898);var a=r(74875);var i=r(7901);var o=r(91424);var s=r(71828);var l=r(63893);var u=r(44467).arrayEditor;var f=r(18783).LINE_SPACING;var c=r(75909);var v=r(25849);e.exports=function e(t){var r=t._fullLayout;var i=s.filterVisible(r[c.name]);function o(e){a.autoMargin(t,E(e))}var l=r._menulayer.selectAll("g."+c.containerClassName).data(i.length>0?[0]:[]);l.enter().append("g").classed(c.containerClassName,true).style("cursor","pointer");l.exit().each((function(){n.select(this).selectAll("g."+c.headerGroupClassName).each(o)})).remove();if(i.length===0)return;var u=l.selectAll("g."+c.headerGroupClassName).data(i,h);u.enter().append("g").classed(c.headerGroupClassName,true);var f=s.ensureSingle(l,"g",c.dropdownButtonGroupClassName,(function(e){e.style("pointer-events","all")}));for(var p=0;p<i.length;p++){var x=i[p];S(t,x)}var b="updatemenus"+r._uid;var _=new v(t,f,b);if(u.enter().size()){f.node().parentNode.appendChild(f.node());f.call(C)}u.exit().each((function(e){f.call(C);o(e)})).remove();u.each((function(e){var r=n.select(this);var i=e.type==="dropdown"?f:null;a.manageCommandObserver(t,e,e.buttons,(function(n){g(t,e,e.buttons[n.index],r,i,_,n.index,true)}));if(e.type==="dropdown"){y(t,r,f,_,e);if(d(f,e)){m(t,r,f,_,e)}}else{m(t,r,null,null,e)}}))};function h(e){return e._index}function p(e){return+e.attr(c.menuIndexAttrName)===-1}function d(e,t){return+e.attr(c.menuIndexAttrName)===t._index}function g(e,t,r,n,a,i,o,s){t.active=o;u(e.layout,c.name,t).applyUpdate("active",o);if(t.type==="buttons"){m(e,n,null,null,t)}else if(t.type==="dropdown"){a.attr(c.menuIndexAttrName,"-1");y(e,n,a,i,t);if(!s){m(e,n,a,i,t)}}}function y(e,t,r,n,a){var i=s.ensureSingle(t,"g",c.headerClassName,(function(e){e.style("pointer-events","all")}));var l=a._dims;var u=a.active;var f=a.buttons[u]||c.blankHeaderOpts;var v={y:a.pad.t,yPad:0,x:a.pad.l,xPad:0,index:0};var h={width:l.headerWidth,height:l.headerHeight};i.call(_,a,f,e).call(L,a,v,h);var p=s.ensureSingle(t,"text",c.headerArrowClassName,(function(e){e.attr("text-anchor","end").call(o.font,a.font).text(c.arrowSymbol[a.direction])}));p.attr({x:l.headerWidth-c.arrowOffsetX+a.pad.l,y:l.headerHeight/2+c.textOffsetY+a.pad.t});i.on("click",(function(){r.call(C,String(d(r,a)?-1:a._index));m(e,t,r,n,a)}));i.on("mouseover",(function(){i.call(A)}));i.on("mouseout",(function(){i.call(M,a)}));o.setTranslate(t,l.lx,l.ly)}function m(e,t,r,i,o){if(!r){r=t;r.attr("pointer-events","all")}var l=!p(r)||o.type==="buttons"?o.buttons:[];var u=o.type==="dropdown"?c.dropdownButtonClassName:c.buttonClassName;var f=r.selectAll("g."+u).data(s.filterVisible(l));var v=f.enter().append("g").classed(u,true);var h=f.exit();if(o.type==="dropdown"){v.attr("opacity","0").transition().attr("opacity","1");h.transition().attr("opacity","0").remove()}else{h.remove()}var d=0;var y=0;var m=o._dims;var w=["up","down"].indexOf(o.direction)!==-1;if(o.type==="dropdown"){if(w){y=m.headerHeight+c.gapButtonHeader}else{d=m.headerWidth+c.gapButtonHeader}}if(o.type==="dropdown"&&o.direction==="up"){y=-c.gapButtonHeader+c.gapButton-m.openHeight}if(o.type==="dropdown"&&o.direction==="left"){d=-c.gapButtonHeader+c.gapButton-m.openWidth}var T={x:m.lx+d+o.pad.l,y:m.ly+y+o.pad.t,yPad:c.gapButton,xPad:c.gapButton,index:0};var S={l:T.x+o.borderwidth,t:T.y+o.borderwidth};f.each((function(s,l){var u=n.select(this);u.call(_,o,s,e).call(L,o,T);u.on("click",(function(){if(n.event.defaultPrevented)return;if(s.execute){if(s.args2&&o.active===l){g(e,o,s,t,r,i,-1);a.executeAPICommand(e,s.method,s.args2)}else{g(e,o,s,t,r,i,l);a.executeAPICommand(e,s.method,s.args)}}e.emit("plotly_buttonclicked",{menu:o,button:s,active:o.active})}));u.on("mouseover",(function(){u.call(A)}));u.on("mouseout",(function(){u.call(M,o);f.call(k,o)}))}));f.call(k,o);if(w){S.w=Math.max(m.openWidth,m.headerWidth);S.h=T.y-S.t}else{S.w=T.x-S.l;S.h=Math.max(m.openHeight,m.headerHeight)}S.direction=o.direction;if(i){if(f.size()){x(e,t,r,i,o,S)}else{b(i)}}}function x(e,t,r,n,a,i){var o=a.direction;var s=o==="up"||o==="down";var l=a._dims;var u=a.active;var f,v;var h;if(s){v=0;for(h=0;h<u;h++){v+=l.heights[h]+c.gapButton}}else{f=0;for(h=0;h<u;h++){f+=l.widths[h]+c.gapButton}}n.enable(i,f,v);if(n.hbar){n.hbar.attr("opacity","0").transition().attr("opacity","1")}if(n.vbar){n.vbar.attr("opacity","0").transition().attr("opacity","1")}}function b(e){var t=!!e.hbar;var r=!!e.vbar;if(t){e.hbar.transition().attr("opacity","0").each("end",(function(){t=false;if(!r)e.disable()}))}if(r){e.vbar.transition().attr("opacity","0").each("end",(function(){r=false;if(!t)e.disable()}))}}function _(e,t,r,n){e.call(w,t).call(T,t,r,n)}function w(e,t){var r=s.ensureSingle(e,"rect",c.itemRectClassName,(function(e){e.attr({rx:c.rx,ry:c.ry,"shape-rendering":"crispEdges"})}));r.call(i.stroke,t.bordercolor).call(i.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function T(e,t,r,n){var a=s.ensureSingle(e,"text",c.itemTextClassName,(function(e){e.attr({"text-anchor":"start","data-notex":1})}));var i=r.label;var u=n._fullLayout._meta;if(u)i=s.templateString(i,u);a.call(o.font,t.font).text(i).call(l.convertToTspans,n)}function k(e,t){var r=t.active;e.each((function(e,a){var o=n.select(this);if(a===r&&t.showactive){o.select("rect."+c.itemRectClassName).call(i.fill,c.activeColor)}}))}function A(e){e.select("rect."+c.itemRectClassName).call(i.fill,c.hoverColor)}function M(e,t){e.select("rect."+c.itemRectClassName).call(i.fill,t.bgcolor)}function S(e,t){var r=t._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0};var i=o.tester.selectAll("g."+c.dropdownButtonClassName).data(s.filterVisible(t.buttons));i.enter().append("g").classed(c.dropdownButtonClassName,true);var u=["up","down"].indexOf(t.direction)!==-1;i.each((function(a,i){var s=n.select(this);s.call(_,t,a,e);var v=s.select("."+c.itemTextClassName);var h=v.node()&&o.bBox(v.node()).width;var p=Math.max(h+c.textPadX,c.minWidth);var d=t.font.size*f;var g=l.lineCount(v);var y=Math.max(d*g,c.minHeight)+c.textOffsetY;y=Math.ceil(y);p=Math.ceil(p);r.widths[i]=p;r.heights[i]=y;r.height1=Math.max(r.height1,y);r.width1=Math.max(r.width1,p);if(u){r.totalWidth=Math.max(r.totalWidth,p);r.openWidth=r.totalWidth;r.totalHeight+=y+c.gapButton;r.openHeight+=y+c.gapButton}else{r.totalWidth+=p+c.gapButton;r.openWidth+=p+c.gapButton;r.totalHeight=Math.max(r.totalHeight,y);r.openHeight=r.totalHeight}}));if(u){r.totalHeight-=c.gapButton}else{r.totalWidth-=c.gapButton}r.headerWidth=r.width1+c.arrowPadX;r.headerHeight=r.height1;if(t.type==="dropdown"){if(u){r.width1+=c.arrowPadX;r.totalHeight=r.height1}else{r.totalWidth=r.width1}r.totalWidth+=c.arrowPadX}i.remove();var v=r.totalWidth+t.pad.l+t.pad.r;var h=r.totalHeight+t.pad.t+t.pad.b;var p=e._fullLayout._size;r.lx=p.l+p.w*t.x;r.ly=p.t+p.h*(1-t.y);var d="left";if(s.isRightAnchor(t)){r.lx-=v;d="right"}if(s.isCenterAnchor(t)){r.lx-=v/2;d="center"}var g="top";if(s.isBottomAnchor(t)){r.ly-=h;g="bottom"}if(s.isMiddleAnchor(t)){r.ly-=h/2;g="middle"}r.totalWidth=Math.ceil(r.totalWidth);r.totalHeight=Math.ceil(r.totalHeight);r.lx=Math.round(r.lx);r.ly=Math.round(r.ly);a.autoMargin(e,E(t),{x:t.x,y:t.y,l:v*({right:1,center:.5}[d]||0),r:v*({left:1,center:.5}[d]||0),b:h*({top:1,middle:.5}[g]||0),t:h*({bottom:1,middle:.5}[g]||0)})}function E(e){return c.autoMarginIdRoot+e._index}function L(e,t,r,n){n=n||{};var a=e.select("."+c.itemRectClassName);var i=e.select("."+c.itemTextClassName);var s=t.borderwidth;var u=r.index;var v=t._dims;o.setTranslate(e,s+r.x,s+r.y);var h=["up","down"].indexOf(t.direction)!==-1;var p=n.height||(h?v.heights[u]:v.height1);a.attr({x:0,y:0,width:n.width||(h?v.width1:v.widths[u]),height:p});var d=t.font.size*f;var g=l.lineCount(i);var y=(g-1)*d/2;l.positionText(i,c.textOffsetX,p/2-y+c.textOffsetY);if(h){r.y+=v.heights[u]+r.yPad}else{r.x+=v.widths[u]+r.xPad}r.index++}function C(e,t){e.attr(c.menuIndexAttrName,t||"-1").selectAll("g."+c.dropdownButtonClassName).remove()}},20763:function(e,t,r){"use strict";var n=r(75909);e.exports={moduleType:"component",name:n.name,layoutAttributes:r(7163),supplyLayoutDefaults:r(64897),draw:r(13689)}},25849:function(e,t,r){"use strict";e.exports=s;var n=r(39898);var a=r(7901);var i=r(91424);var o=r(71828);function s(e,t,r){this.gd=e;this.container=t;this.id=r;this.position=null;this.translateX=null;this.translateY=null;this.hbar=null;this.vbar=null;this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]);this.bg.exit().on(".drag",null).on("wheel",null).remove();this.bg.enter().append("rect").classed("scrollbox-bg",true).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}s.barWidth=2;s.barLength=20;s.barRadius=2;s.barPad=1;s.barColor="#808BA4";s.prototype.enable=function e(t,r,o){var l=this.gd._fullLayout;var u=l.width;var f=l.height;this.position=t;var c=this.position.l;var v=this.position.w;var h=this.position.t;var p=this.position.h;var d=this.position.direction;var g=d==="down";var y=d==="left";var m=d==="right";var x=d==="up";var b=v;var _=p;var w,T;var k,A;if(!g&&!y&&!m&&!x){this.position.direction="down";g=true}var M=g||x;if(M){w=c;T=w+b;if(g){k=h;A=Math.min(k+_,f);_=A-k}else{A=h+_;k=Math.max(A-_,0);_=A-k}}else{k=h;A=k+_;if(y){T=c+b;w=Math.max(T-b,0);b=T-w}else{w=c;T=Math.min(w+b,u);b=T-w}}this._box={l:w,t:k,w:b,h:_};var S=v>b;var E=s.barLength+2*s.barPad;var L=s.barWidth+2*s.barPad;var C=c;var I=h+p;if(I+L>f)I=f-L;var P=this.container.selectAll("rect.scrollbar-horizontal").data(S?[0]:[]);P.exit().on(".drag",null).remove();P.enter().append("rect").classed("scrollbar-horizontal",true).call(a.fill,s.barColor);if(S){this.hbar=P.attr({rx:s.barRadius,ry:s.barRadius,x:C,y:I,width:E,height:L});this._hbarXMin=C+E/2;this._hbarTranslateMax=b-E}else{delete this.hbar;delete this._hbarXMin;delete this._hbarTranslateMax}var O=p>_;var D=s.barWidth+2*s.barPad;var z=s.barLength+2*s.barPad;var R=c+v;var F=h;if(R+D>u)R=u-D;var B=this.container.selectAll("rect.scrollbar-vertical").data(O?[0]:[]);B.exit().on(".drag",null).remove();B.enter().append("rect").classed("scrollbar-vertical",true).call(a.fill,s.barColor);if(O){this.vbar=B.attr({rx:s.barRadius,ry:s.barRadius,x:R,y:F,width:D,height:z});this._vbarYMin=F+z/2;this._vbarTranslateMax=_-z}else{delete this.vbar;delete this._vbarYMin;delete this._vbarTranslateMax}var N=this.id;var j=w-.5;var U=O?T+D+.5:T+.5;var V=k-.5;var H=S?A+L+.5:A+.5;var q=l._topdefs.selectAll("#"+N).data(S||O?[0]:[]);q.exit().remove();q.enter().append("clipPath").attr("id",N).append("rect");if(S||O){this._clipRect=q.select("rect").attr({x:Math.floor(j),y:Math.floor(V),width:Math.ceil(U)-Math.floor(j),height:Math.ceil(H)-Math.floor(V)});this.container.call(i.setClipUrl,N,this.gd);this.bg.attr({x:c,y:h,width:v,height:p})}else{this.bg.attr({width:0,height:0});this.container.on("wheel",null).on(".drag",null).call(i.setClipUrl,null);delete this._clipRect}if(S||O){var G=n.behavior.drag().on("dragstart",(function(){n.event.sourceEvent.preventDefault()})).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(G);var Z=n.behavior.drag().on("dragstart",(function(){n.event.sourceEvent.preventDefault();n.event.sourceEvent.stopPropagation()})).on("drag",this._onBarDrag.bind(this));if(S){this.hbar.on(".drag",null).call(Z)}if(O){this.vbar.on(".drag",null).call(Z)}}this.setTranslate(r,o)};s.prototype.disable=function e(){if(this.hbar||this.vbar){this.bg.attr({width:0,height:0});this.container.on("wheel",null).on(".drag",null).call(i.setClipUrl,null);delete this._clipRect}if(this.hbar){this.hbar.on(".drag",null);this.hbar.remove();delete this.hbar;delete this._hbarXMin;delete this._hbarTranslateMax}if(this.vbar){this.vbar.on(".drag",null);this.vbar.remove();delete this.vbar;delete this._vbarYMin;delete this._vbarTranslateMax}};s.prototype._onBoxDrag=function e(){var t=this.translateX;var r=this.translateY;if(this.hbar){t-=n.event.dx}if(this.vbar){r-=n.event.dy}this.setTranslate(t,r)};s.prototype._onBoxWheel=function e(){var t=this.translateX;var r=this.translateY;if(this.hbar){t+=n.event.deltaY}if(this.vbar){r+=n.event.deltaY}this.setTranslate(t,r)};s.prototype._onBarDrag=function e(){var t=this.translateX;var r=this.translateY;if(this.hbar){var a=t+this._hbarXMin;var i=a+this._hbarTranslateMax;var s=o.constrain(n.event.x,a,i);var l=(s-a)/(i-a);var u=this.position.w-this._box.w;t=l*u}if(this.vbar){var f=r+this._vbarYMin;var c=f+this._vbarTranslateMax;var v=o.constrain(n.event.y,f,c);var h=(v-f)/(c-f);var p=this.position.h-this._box.h;r=h*p}this.setTranslate(t,r)};s.prototype.setTranslate=function e(t,r){var n=this.position.w-this._box.w;var a=this.position.h-this._box.h;t=o.constrain(t||0,0,n);r=o.constrain(r||0,0,a);this.translateX=t;this.translateY=r;this.container.call(i.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-r);if(this._clipRect){this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+r-.5)})}if(this.hbar){var s=t/n;this.hbar.call(i.setTranslate,t+s*this._hbarTranslateMax,r)}if(this.vbar){var l=r/a;this.vbar.call(i.setTranslate,t,r+l*this._vbarTranslateMax)}}},18783:function(e){"use strict";e.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},24695:function(e){"use strict";e.exports={axisRefDescription:function(e,t,r){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+r+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",r,"of the domain of the","second",e,"axis."].join(" ")}}},22372:function(e){"use strict";e.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:""},DECREASING:{COLOR:"#FF4136",SYMBOL:""}}},31562:function(e){"use strict";e.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},74808:function(e){"use strict";e.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},29659:function(e){"use strict";e.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87381:function(e){"use strict";e.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},37822:function(e){"use strict";e.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},50606:function(e){"use strict";e.exports={BADNUM:undefined,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:""}},32396:function(e,t){"use strict";t.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]];t.STYLE=t.CSS_DECLARATIONS.map((function(e){return e.join(": ")+"; "})).join("")},77922:function(e,t){"use strict";t.xmlns="http://www.w3.org/2000/xmlns/";t.svg="http://www.w3.org/2000/svg";t.xlink="http://www.w3.org/1999/xlink";t.svgAttrs={xmlns:t.svg,"xmlns:xlink":t.xlink}},8729:function(e,t,r){"use strict";t.version=r(11506).version;r(7417);r(98847);var n=r(73972);var a=t.register=n.register;var i=r(10641);var o=Object.keys(i);for(var s=0;s<o.length;s++){var l=o[s];if(l.charAt(0)!=="_")t[l]=i[l];a({moduleType:"apiMethod",name:l,fn:i[l]})}a(r(67368));a([r(32745),r(2468),r(47322),r(89853),r(68804),r(20763),r(23243),r(13137),r(97218),r(83312),r(37369),r(21081),r(12311),r(2199),r(30211),r(64168)]);a([r(92177),r(37815)]);if(window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)){a(window.PlotlyLocales);delete window.PlotlyLocales}t.Icons=r(24255);var u=r(30211);var f=r(74875);t.Plots={resize:f.resize,graphJson:f.graphJson,sendDataToCloud:f.sendDataToCloud};t.Fx={hover:u.hover,unhover:u.unhover,loneHover:u.loneHover,loneUnhover:u.loneUnhover};t.Snapshot=r(44511);t.PlotSchema=r(86281)},24255:function(e){"use strict";e.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},99863:function(e,t){"use strict";t.isLeftAnchor=function e(t){return t.xanchor==="left"||t.xanchor==="auto"&&t.x<=1/3};t.isCenterAnchor=function e(t){return t.xanchor==="center"||t.xanchor==="auto"&&t.x>1/3&&t.x<2/3};t.isRightAnchor=function e(t){return t.xanchor==="right"||t.xanchor==="auto"&&t.x>=2/3};t.isTopAnchor=function e(t){return t.yanchor==="top"||t.yanchor==="auto"&&t.y>=2/3};t.isMiddleAnchor=function e(t){return t.yanchor==="middle"||t.yanchor==="auto"&&t.y>1/3&&t.y<2/3};t.isBottomAnchor=function e(t){return t.yanchor==="bottom"||t.yanchor==="auto"&&t.y<=1/3}},26348:function(e,t,r){"use strict";var n=r(64872);var a=n.mod;var i=n.modHalf;var o=Math.PI;var s=2*o;function l(e){return e/180*o}function u(e){return e/o*180}function f(e){return Math.abs(e[1]-e[0])>s-1e-14}function c(e,t){return i(t-e,s)}function v(e,t){return Math.abs(c(e,t))}function h(e,t){if(f(t))return true;var r,n;if(t[0]<t[1]){r=t[0];n=t[1]}else{r=t[1];n=t[0]}r=a(r,s);n=a(n,s);if(r>n)n+=s;var i=a(e,s);var o=i+s;return i>=r&&i<=n||o>=r&&o<=n}function p(e,t,r,n){if(!h(t,n))return false;var a,i;if(r[0]<r[1]){a=r[0];i=r[1]}else{a=r[1];i=r[0]}return e>=a&&e<=i}function d(e,t,r,n,a,i,l){a=a||0;i=i||0;var u=f([r,n]);var c,v,h;var p,d;if(u){c=0;v=o;h=s}else{if(r<n){c=r;h=n}else{c=n;h=r}}if(e<t){p=e;d=t}else{p=t;d=e}function g(e,t){return[e*Math.cos(t)+a,i-e*Math.sin(t)]}var y=Math.abs(h-c)<=o?0:1;function m(e,t,r){return"A"+[e,e]+" "+[0,y,r]+" "+g(e,t)}var x;if(u){if(p===null){x="M"+g(d,c)+m(d,v,0)+m(d,h,0)+"Z"}else{x="M"+g(p,c)+m(p,v,0)+m(p,h,0)+"Z"+"M"+g(d,c)+m(d,v,1)+m(d,h,1)+"Z"}}else{if(p===null){x="M"+g(d,c)+m(d,h,0);if(l)x+="L0,0Z"}else{x="M"+g(p,c)+"L"+g(d,c)+m(d,h,0)+"L"+g(p,h)+m(p,c,1)+"Z"}}return x}function g(e,t,r,n,a){return d(null,e,t,r,n,a,0)}function y(e,t,r,n,a){return d(null,e,t,r,n,a,1)}function m(e,t,r,n,a,i){return d(e,t,r,n,a,i,1)}e.exports={deg2rad:l,rad2deg:u,angleDelta:c,angleDist:v,isFullCircle:f,isAngleInsideSector:h,isPtInsideSector:p,pathArc:g,pathSector:y,pathAnnulus:m}},73627:function(e,t){"use strict";var r=Array.isArray;var n=ArrayBuffer;var a=DataView;function i(e){return n.isView(e)&&!(e instanceof a)}t.isTypedArray=i;function o(e){return r(e)||i(e)}t.isArrayOrTypedArray=o;function s(e){return!o(e[0])}t.isArray1D=s;t.ensureArray=function(e,t){if(!r(e))e=[];e.length=t;return e};t.concat=function(){var e=[];var t=true;var n=0;var a,i,o,s,l,u,f,c;for(o=0;o<arguments.length;o++){s=arguments[o];u=s.length;if(u){if(i)e.push(s);else{i=s;l=u}if(r(s)){a=false}else{t=false;if(!n){a=s.constructor}else if(a!==s.constructor){a=false}}n+=u}}if(!n)return[];if(!e.length)return i;if(t)return i.concat.apply(i,e);if(a){f=new a(n);f.set(i);for(o=0;o<e.length;o++){s=e[o];f.set(s,l);l+=s.length}return f}f=new Array(n);for(c=0;c<i.length;c++)f[c]=i[c];for(o=0;o<e.length;o++){s=e[o];for(c=0;c<s.length;c++)f[l+c]=s[c];l+=c}return f};t.maxRowLength=function(e){return l(e,Math.max,0)};t.minRowLength=function(e){return l(e,Math.min,Infinity)};function l(e,t,r){if(o(e)){if(o(e[0])){var n=r;for(var a=0;a<e.length;a++){n=t(n,e[a].length)}return n}else{return e.length}}return 0}},95218:function(e,t,r){"use strict";var n=r(92770);var a=r(50606).BADNUM;var i=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;e.exports=function e(t){if(typeof t==="string"){t=t.replace(i,"")}if(n(t))return Number(t);return a}},33306:function(e){"use strict";e.exports=function e(t){var r=t._fullLayout;if(r._glcanvas&&r._glcanvas.size()){r._glcanvas.each((function(e){if(e.regl)e.regl.clear({color:true,depth:true})}))}}},86367:function(e){"use strict";e.exports=function e(t){if(t._responsiveChartHandler){window.removeEventListener("resize",t._responsiveChartHandler);delete t._responsiveChartHandler}}},96554:function(e,t,r){"use strict";var n=r(92770);var a=r(84267);var i=r(9012);var o=r(63282);var s=r(7901);var l=r(37822).DESELECTDIM;var u=r(65487);var f=r(30587).counter;var c=r(64872).modHalf;var v=r(73627).isArrayOrTypedArray;t.valObjectMeta={data_array:{coerceFunction:function(e,t,r){if(v(e))t.set(e);else if(r!==undefined)t.set(r)}},enumerated:{coerceFunction:function(e,t,r,n){if(n.coerceNumber)e=+e;if(n.values.indexOf(e)===-1)t.set(r);else t.set(e)},validateFunction:function(e,t){if(t.coerceNumber)e=+e;var r=t.values;for(var n=0;n<r.length;n++){var a=String(r[n]);if(a.charAt(0)==="/"&&a.charAt(a.length-1)==="/"){var i=new RegExp(a.substr(1,a.length-2));if(i.test(e))return true}else if(e===r[n])return true}return false}},boolean:{coerceFunction:function(e,t,r){if(e===true||e===false)t.set(e);else t.set(r)}},number:{coerceFunction:function(e,t,r,a){if(!n(e)||a.min!==undefined&&e<a.min||a.max!==undefined&&e>a.max){t.set(r)}else t.set(+e)}},integer:{coerceFunction:function(e,t,r,a){if(e%1||!n(e)||a.min!==undefined&&e<a.min||a.max!==undefined&&e>a.max){t.set(r)}else t.set(+e)}},string:{coerceFunction:function(e,t,r,n){if(typeof e!=="string"){var a=typeof e==="number";if(n.strict===true||!a)t.set(r);else t.set(String(e))}else if(n.noBlank&&!e)t.set(r);else t.set(e)}},color:{coerceFunction:function(e,t,r){if(a(e).isValid())t.set(e);else t.set(r)}},colorlist:{coerceFunction:function(e,t,r){function n(e){return a(e).isValid()}if(!Array.isArray(e)||!e.length)t.set(r);else if(e.every(n))t.set(e);else t.set(r)}},colorscale:{coerceFunction:function(e,t,r){t.set(o.get(e,r))}},angle:{coerceFunction:function(e,t,r){if(e==="auto")t.set("auto");else if(!n(e))t.set(r);else t.set(c(+e,360))}},subplotid:{coerceFunction:function(e,t,r,n){var a=n.regex||f(r);if(typeof e==="string"&&a.test(e)){t.set(e);return}t.set(r)},validateFunction:function(e,t){var r=t.dflt;if(e===r)return true;if(typeof e!=="string")return false;if(f(r).test(e))return true;return false}},flaglist:{coerceFunction:function(e,t,r,n){if((n.extras||[]).indexOf(e)!==-1){t.set(e);return}if(typeof e!=="string"){t.set(r);return}var a=e.split("+");var i=0;while(i<a.length){var o=a[i];if(n.flags.indexOf(o)===-1||a.indexOf(o)<i){a.splice(i,1)}else i++}if(!a.length)t.set(r);else t.set(a.join("+"))}},any:{coerceFunction:function(e,t,r){if(e===undefined)t.set(r);else t.set(e)}},info_array:{coerceFunction:function(e,r,n,a){function i(e,r,n){var a;var i={set:function(e){a=e}};if(n===undefined)n=r.dflt;t.valObjectMeta[r.valType].coerceFunction(e,i,n,r);return a}var o=a.dimensions===2||a.dimensions==="1-2"&&Array.isArray(e)&&Array.isArray(e[0]);if(!Array.isArray(e)){r.set(n);return}var s=a.items;var l=[];var u=Array.isArray(s);var f=u&&o&&Array.isArray(s[0]);var c=o&&u&&!f;var v=u&&!c?s.length:e.length;var h,p,d,g,y,m;n=Array.isArray(n)?n:[];if(o){for(h=0;h<v;h++){l[h]=[];d=Array.isArray(e[h])?e[h]:[];if(c)y=s.length;else if(u)y=s[h].length;else y=d.length;for(p=0;p<y;p++){if(c)g=s[p];else if(u)g=s[h][p];else g=s;m=i(d[p],g,(n[h]||[])[p]);if(m!==undefined)l[h][p]=m}}}else{for(h=0;h<v;h++){m=i(e[h],u?s[h]:s,n[h]);if(m!==undefined)l[h]=m}}r.set(l)},validateFunction:function(e,t){if(!Array.isArray(e))return false;var r=t.items;var n=Array.isArray(r);var a=t.dimensions===2;if(!t.freeLength&&e.length!==r.length)return false;for(var i=0;i<e.length;i++){if(a){if(!Array.isArray(e[i])||!t.freeLength&&e[i].length!==r[i].length){return false}for(var o=0;o<e[i].length;o++){if(!h(e[i][o],n?r[i][o]:r)){return false}}}else if(!h(e[i],n?r[i]:r))return false}return true}}};t.coerce=function(e,r,n,a,i){var o=u(n,a).get();var s=u(e,a);var l=u(r,a);var f=s.get();var c=r._template;if(f===undefined&&c){f=u(c,a).get();c=0}if(i===undefined)i=o.dflt;if(o.arrayOk&&v(f)){l.set(f);return f}var p=t.valObjectMeta[o.valType].coerceFunction;p(f,l,i,o);var d=l.get();if(c&&d===i&&!h(f,o)){f=u(c,a).get();p(f,l,i,o);d=l.get()}return d};t.coerce2=function(e,r,n,a,i){var o=u(e,a);var s=t.coerce(e,r,n,a,i);var l=o.get();return l!==undefined&&l!==null?s:false};t.coerceFont=function(e,t,r){var n={};r=r||{};n.family=e(t+".family",r.family);n.size=e(t+".size",r.size);n.color=e(t+".color",r.color);return n};t.coercePattern=function(e,t,r,n){var a=e(t+".shape");if(a){e(t+".solidity");e(t+".size");var i=e(t+".fillmode");var o=i==="overlay";if(!n){var l=e(t+".bgcolor",o?r:undefined);e(t+".fgcolor",o?s.contrast(l):r)}e(t+".fgopacity",o?.5:1)}};t.coerceHoverinfo=function(e,r,n){var a=r._module.attributes;var o=a.hoverinfo?a:i;var s=o.hoverinfo;var l;if(n._dataLength===1){var u=s.dflt==="all"?s.flags.slice():s.dflt.split("+");u.splice(u.indexOf("name"),1);l=u.join("+")}return t.coerce(e,r,o,"hoverinfo",l)};t.coerceSelectionMarkerOpacity=function(e,t){if(!e.marker)return;var r=e.marker.opacity;if(r===undefined)return;var n;var a;if(!v(r)&&!e.selected&&!e.unselected){n=r;a=l*r}t("selected.marker.opacity",n);t("unselected.marker.opacity",a)};function h(e,r){var n=t.valObjectMeta[r.valType];if(r.arrayOk&&v(e))return true;if(n.validateFunction){return n.validateFunction(e,r)}var a={};var i=a;var o={set:function(e){i=e}};n.coerceFunction(e,o,a,r);return i!==a}t.validate=h},41631:function(e,t,r){"use strict";var n=r(84096).i$;var a=r(92770);var i=r(47769);var o=r(64872).mod;var s=r(50606);var l=s.BADNUM;var u=s.ONEDAY;var f=s.ONEHOUR;var c=s.ONEMIN;var v=s.ONESEC;var h=s.EPOCHJD;var p=r(73972);var d=r(84096).g0;var g=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m;var y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m;var m=(new Date).getFullYear()-70;function x(e){return e&&p.componentsRegistry.calendars&&typeof e==="string"&&e!=="gregorian"}t.dateTick0=function(e,r){var n=b(e,!!r);if(r<2)return n;var a=t.dateTime2ms(n,e);a+=u*(r-1);return t.ms2DateTime(a,0,e)};function b(e,t){if(x(e)){return t?p.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:p.getComponentMethod("calendars","CANONICAL_TICK")[e]}else{return t?"2000-01-02":"2000-01-01"}}t.dfltRange=function(e){if(x(e)){return p.getComponentMethod("calendars","DFLTRANGE")[e]}else{return["2000-01-01","2001-01-01"]}};t.isJSDate=function(e){return typeof e==="object"&&e!==null&&typeof e.getTime==="function"};var _,w;t.dateTime2ms=function(e,r){if(t.isJSDate(e)){var n=e.getTimezoneOffset()*c;var a=(e.getUTCMinutes()-e.getMinutes())*c+(e.getUTCSeconds()-e.getSeconds())*v+(e.getUTCMilliseconds()-e.getMilliseconds());if(a){var i=3*c;n=n-i/2+o(a-n+i/2,i)}e=Number(e)-n;if(e>=_&&e<=w)return e;return l}if(typeof e!=="string"&&typeof e!=="number")return l;e=String(e);var s=x(r);var d=e.charAt(0);if(s&&(d==="G"||d==="g")){e=e.substr(1);r=""}var b=s&&r.substr(0,7)==="chinese";var T=e.match(b?y:g);if(!T)return l;var k=T[1];var A=T[3]||"1";var M=Number(T[5]||1);var S=Number(T[7]||0);var E=Number(T[9]||0);var L=Number(T[11]||0);if(s){if(k.length===2)return l;k=Number(k);var C;try{var I=p.getComponentMethod("calendars","getCal")(r);if(b){var P=A.charAt(A.length-1)==="i";A=parseInt(A,10);C=I.newDate(k,I.toMonthIndex(k,A,P),M)}else{C=I.newDate(k,Number(A),M)}}catch(D){return l}if(!C)return l;return(C.toJD()-h)*u+S*f+E*c+L*v}if(k.length===2){k=(Number(k)+2e3-m)%100+m}else k=Number(k);A-=1;var O=new Date(Date.UTC(2e3,A,M,S,E));O.setUTCFullYear(k);if(O.getUTCMonth()!==A)return l;if(O.getUTCDate()!==M)return l;return O.getTime()+L*v};_=t.MIN_MS=t.dateTime2ms("-9999");w=t.MAX_MS=t.dateTime2ms("9999-12-31 23:59:59.9999");t.isDateTime=function(e,r){return t.dateTime2ms(e,r)!==l};function T(e,t){return String(e+Math.pow(10,t)).substr(1)}var k=90*u;var A=3*f;var M=5*c;t.ms2DateTime=function(e,t,r){if(typeof e!=="number"||!(e>=_&&e<=w))return l;if(!t)t=0;var n=Math.floor(o(e+.05,1)*10);var a=Math.round(e-n/10);var i,s,g,y,m,b;if(x(r)){var T=Math.floor(a/u)+h;var E=Math.floor(o(e,u));try{i=p.getComponentMethod("calendars","getCal")(r).fromJD(T).formatDate("yyyy-mm-dd")}catch(L){i=d("G%Y-%m-%d")(new Date(a))}if(i.charAt(0)==="-"){while(i.length<11)i="-0"+i.substr(1)}else{while(i.length<10)i="0"+i}s=t<k?Math.floor(E/f):0;g=t<k?Math.floor(E%f/c):0;y=t<A?Math.floor(E%c/v):0;m=t<M?E%v*10+n:0}else{b=new Date(a);i=d("%Y-%m-%d")(b);s=t<k?b.getUTCHours():0;g=t<k?b.getUTCMinutes():0;y=t<A?b.getUTCSeconds():0;m=t<M?b.getUTCMilliseconds()*10+n:0}return S(i,s,g,y,m)};t.ms2DateTimeLocal=function(e){if(!(e>=_+u&&e<=w-u))return l;var t=Math.floor(o(e+.05,1)*10);var r=new Date(Math.round(e-t/10));var a=n("%Y-%m-%d")(r);var i=r.getHours();var s=r.getMinutes();var f=r.getSeconds();var c=r.getUTCMilliseconds()*10+t;return S(a,i,s,f,c)};function S(e,t,r,n,a){if(t||r||n||a){e+=" "+T(t,2)+":"+T(r,2);if(n||a){e+=":"+T(n,2);if(a){var i=4;while(a%10===0){i-=1;a/=10}e+="."+T(a,i)}}}return e}t.cleanDate=function(e,r,n){if(e===l)return r;if(t.isJSDate(e)||typeof e==="number"&&isFinite(e)){if(x(n)){i.error("JS Dates and milliseconds are incompatible with world calendars",e);return r}e=t.ms2DateTimeLocal(+e);if(!e&&r!==undefined)return r}else if(!t.isDateTime(e,n)){i.error("unrecognized date",e);return r}return e};var E=/%\d?f/g;var L=/%h/g;var C={1:"1",2:"1",3:"2",4:"2"};function I(e,t,r,n){e=e.replace(E,(function(e){var r=Math.min(+e.charAt(1)||6,6);var n=(t/1e3%1+2).toFixed(r).substr(2).replace(/0+$/,"")||"0";return n}));var a=new Date(Math.floor(t+.05));e=e.replace(L,(function(){return C[r("%q")(a)]}));if(x(n)){try{e=p.getComponentMethod("calendars","worldCalFmt")(e,t,n)}catch(i){return"Invalid"}}return r(e)(a)}var P=[59,59.9,59.99,59.999,59.9999];function O(e,t){var r=o(e+.05,u);var n=T(Math.floor(r/f),2)+":"+T(o(Math.floor(r/c),60),2);if(t!=="M"){if(!a(t))t=0;var i=Math.min(o(e/v,60),P[t]);var s=(100+i).toFixed(t).substr(1);if(t>0){s=s.replace(/0+$/,"").replace(/[\.]$/,"")}n+=":"+s}return n}t.formatDate=function(e,t,r,n,a,i){a=x(a)&&a;if(!t){if(r==="y")t=i.year;else if(r==="m")t=i.month;else if(r==="d"){t=i.dayMonth+"\n"+i.year}else{return O(e,r)+"\n"+I(i.dayMonthYear,e,n,a)}}return I(t,e,n,a)};var D=3*u;t.incrementMonth=function(e,t,r){r=x(r)&&r;var n=o(e,u);e=Math.round(e-n);if(r){try{var a=Math.round(e/u)+h;var s=p.getComponentMethod("calendars","getCal")(r);var l=s.fromJD(a);if(t%12)s.add(l,t,"m");else s.add(l,t/12,"y");return(l.toJD()-h)*u+n}catch(c){i.error("invalid ms "+e+" in calendar "+r)}}var f=new Date(e+D);return f.setUTCMonth(f.getUTCMonth()+t)+n-D};t.findExactDates=function(e,t){var r=0;var n=0;var i=0;var o=0;var s;var l;var f=x(t)&&p.getComponentMethod("calendars","getCal")(t);for(var c=0;c<e.length;c++){l=e[c];if(!a(l)){o++;continue}if(l%u)continue;if(f){try{s=f.fromJD(l/u+h);if(s.day()===1){if(s.month()===1)r++;else n++}else i++}catch(d){}}else{s=new Date(l);if(s.getUTCDate()===1){if(s.getUTCMonth()===0)r++;else n++}else i++}}n+=r;i+=n;var v=e.length-o;return{exactYears:r/v,exactMonths:n/v,exactDays:i/v}}},24401:function(e,t,r){"use strict";var n=r(39898);var a=r(47769);var i=r(35657);var o=r(79576);function s(e){var t;if(typeof e==="string"){t=document.getElementById(e);if(t===null){throw new Error("No DOM element with id '"+e+"' exists on the page.")}return t}else if(e===null||e===undefined){throw new Error("DOM element provided is null or undefined")}return e}function l(e){var t=n.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")}function u(e){var t=e&&e.parentNode;if(t)t.removeChild(e)}function f(e,t){c("global",e,t)}function c(e,t,r){var n="plotly.js-style-"+e;var i=document.getElementById(n);if(!i){i=document.createElement("style");i.setAttribute("id",n);i.appendChild(document.createTextNode(""));document.head.appendChild(i)}var o=i.sheet;if(o.insertRule){o.insertRule(t+"{"+r+"}",0)}else if(o.addRule){o.addRule(t,r,0)}else a.warn("addStyleRule failed")}function v(e){var t="plotly.js-style-"+e;var r=document.getElementById(t);if(r)u(r)}function h(e){var t=d(e);var r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];t.forEach((function(e){var t=p(e);if(t){var n=i.convertCssMatrix(t);r=o.multiply(r,r,n)}}));return r}function p(e){var t=window.getComputedStyle(e,null);var r=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");if(r==="none")return null;return r.replace("matrix","").replace("3d","").slice(1,-1).split(",").map((function(e){return+e}))}function d(e){var t=[];while(g(e)){t.push(e);e=e.parentNode}return t}function g(e){return e&&(e instanceof Element||e instanceof HTMLElement)}function y(e,t){return e&&t&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}e.exports={getGraphDiv:s,isPlotDiv:l,removeElement:u,addStyleRule:f,addRelatedStyleRule:c,deleteRelatedStyleRule:v,getFullTransformMatrix:h,getElementTransformMatrix:p,getElementAndAncestors:d,equalDomRects:y}},11086:function(e,t,r){"use strict";var n=r(15398).EventEmitter;var a={init:function(e){if(e._ev instanceof n)return e;var t=new n;var r=new n;e._ev=t;e._internalEv=r;e.on=t.on.bind(t);e.once=t.once.bind(t);e.removeListener=t.removeListener.bind(t);e.removeAllListeners=t.removeAllListeners.bind(t);e._internalOn=r.on.bind(r);e._internalOnce=r.once.bind(r);e._removeInternalListener=r.removeListener.bind(r);e._removeAllInternalListeners=r.removeAllListeners.bind(r);e.emit=function(n,a){if(typeof jQuery!=="undefined"){jQuery(e).trigger(n,a)}t.emit(n,a);r.emit(n,a)};return e},triggerHandler:function(e,t,r){var n;var a;if(typeof jQuery!=="undefined"){n=jQuery(e).triggerHandler(t,r)}var i=e._ev;if(!i)return n;var o=i._events[t];if(!o)return n;function s(e){if(e.listener){i.removeListener(t,e.listener);if(!e.fired){e.fired=true;return e.listener.apply(i,[r])}}else{return e.apply(i,[r])}}o=Array.isArray(o)?o:[o];var l;for(l=0;l<o.length-1;l++){s(o[l])}a=s(o[l]);return n!==undefined?n:a},purge:function(e){delete e._ev;delete e.on;delete e.once;delete e.removeListener;delete e.removeAllListeners;delete e.emit;delete e._ev;delete e._internalEv;delete e._internalOn;delete e._internalOnce;delete e._removeInternalListener;delete e._removeAllInternalListeners;return e}};e.exports=a},1426:function(e,t,r){"use strict";var n=r(41965);var a=Array.isArray;function i(e,t){var r,n;for(r=0;r<e.length;r++){n=e[r];if(n!==null&&typeof n==="object"){return false}if(n!==void 0){t[r]=n}}return true}t.extendFlat=function(){return o(arguments,false,false,false)};t.extendDeep=function(){return o(arguments,true,false,false)};t.extendDeepAll=function(){return o(arguments,true,true,false)};t.extendDeepNoArrays=function(){return o(arguments,true,false,true)};function o(e,t,r,s){var l=e[0];var u=e.length;var f,c,v,h,p,d,g;if(u===2&&a(l)&&a(e[1])&&l.length===0){g=i(e[1],l);if(g){return l}else{l.splice(0,l.length)}}for(var y=1;y<u;y++){f=e[y];for(c in f){v=l[c];h=f[c];if(s&&a(h)){l[c]=h}else if(t&&h&&(n(h)||(p=a(h)))){if(p){p=false;d=v&&a(v)?v:[]}else{d=v&&n(v)?v:{}}l[c]=o([d,h],t,r,s)}else if(typeof h!=="undefined"||r){l[c]=h}}}return l}},75744:function(e){"use strict";e.exports=function e(t){var r={};var n=[];var a=0;for(var i=0;i<t.length;i++){var o=t[i];if(r[o]!==1){r[o]=1;n[a++]=o}}return n}},76756:function(e){"use strict";e.exports=function e(a){var i=n(a)?r:t;var o=[];for(var s=0;s<a.length;s++){var l=a[s];if(i(l))o.push(l)}return o};function t(e){return e.visible===true}function r(e){var t=e[0].trace;return t.visible===true&&t._length!==0}function n(e){return Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace}},41327:function(e,t,r){"use strict";var n=r(39898);var a=r(24138);var i=r(30774);var o=r(29261);var s=r(85268);var l=r(23389);var u=r(47769);var f=r(41965);var c=r(65487);var v=r(61082);var h=Object.keys(a);var p={"ISO-3":l,"USA-states":l,"country names":d};function d(e){for(var t=0;t<h.length;t++){var r=h[t];var n=new RegExp(a[r]);if(n.test(e.trim().toLowerCase()))return r}u.log("Unrecognized country name: "+e+".");return false}function g(e,t,r){if(!t||typeof t!=="string")return false;var n=p[e](t);var a;var i,o;if(n){if(e==="USA-states"){a=[];for(o=0;o<r.length;o++){i=r[o];if(i.properties&&i.properties.gu&&i.properties.gu==="USA"){a.push(i)}}}else{a=r}for(o=0;o<a.length;o++){i=a[o];if(i.id===n)return i}u.log(["Location with id",n,"does not have a matching topojson feature at this resolution."].join(" "))}return false}function y(e){var t=e.geometry;var r=t.coordinates;var n=e.id;var a=[];var i,o,s,l;function u(e){for(var t=0;t<e.length-1;t++){if(e[t][0]>0&&e[t+1][0]<0)return t}return null}if(n==="RUS"||n==="FJI"){i=function(e){var t;if(u(e)===null){t=e}else{t=new Array(e.length);for(l=0;l<e.length;l++){t[l]=[e[l][0]<0?e[l][0]+360:e[l][0],e[l][1]]}}a.push(v.tester(t))}}else if(n==="ATA"){i=function(e){var t=u(e);if(t===null){return a.push(v.tester(e))}var r=new Array(e.length+1);var n=0;for(l=0;l<e.length;l++){if(l>t){r[n++]=[e[l][0]+360,e[l][1]]}else if(l===t){r[n++]=e[l];r[n++]=[e[l][0],-90]}else{r[n++]=e[l]}}var i=v.tester(r);i.pts.pop();a.push(i)}}else{i=function(e){a.push(v.tester(e))}}switch(t.type){case"MultiPolygon":for(o=0;o<r.length;o++){for(s=0;s<r[o].length;s++){i(r[o][s])}}break;case"Polygon":for(o=0;o<r.length;o++){i(r[o])}break}return a}function m(e){var t=e.geojson;var r=window.PlotlyGeoAssets||{};var n=typeof t==="string"?r[t]:t;if(!f(n)){u.error("Oops ... something went wrong when fetching "+t);return false}return n}function x(e){var t=e[0].trace;var r=m(t);if(!r)return false;var n={};var a=[];var i;for(i=0;i<t._length;i++){var o=e[i];if(o.loc||o.loc===0){n[o.loc]=o}}function s(e){var r=c(e,t.featureidkey||"id").get();var i=n[r];if(i){var o=e.geometry;if(o.type==="Polygon"||o.type==="MultiPolygon"){var s={type:"Feature",id:r,geometry:o,properties:{}};s.properties.ct=b(s);i.fIn=e;i.fOut=s;a.push(s)}else{u.log(["Location",i.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}}delete n[r]}switch(r.type){case"FeatureCollection":var l=r.features;for(i=0;i<l.length;i++){s(l[i])}break;case"Feature":s(r);break;default:u.warn(["Invalid GeoJSON type",(r.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" "));return false}for(var f in n){u.log(["Location *"+f+"*","does not have a matching feature with id-key","*"+t.featureidkey+"*."].join(" "))}return a}function b(e){var t=e.geometry;var r;if(t.type==="MultiPolygon"){var n=t.coordinates;var a=0;for(var s=0;s<n.length;s++){var l={type:"Polygon",coordinates:n[s]};var u=i.default(l);if(u>a){a=u;r=l}}}else{r=t}return o.default(r).geometry.coordinates}function _(e){var t=window.PlotlyGeoAssets||{};var r=[];function a(e){return new Promise((function(r,a){n.json(e,(function(n,i){if(n){delete t[e];var o=n.status===404?'GeoJSON at URL "'+e+'" does not exist.':"Unexpected error while fetching from "+e;return a(new Error(o))}t[e]=i;return r(i)}))}))}function i(e){return new Promise((function(r,n){var a=0;var i=setInterval((function(){if(t[e]&&t[e]!=="pending"){clearInterval(i);return r(t[e])}if(a>100){clearInterval(i);return n("Unexpected error while fetching from "+e)}a++}),50)}))}for(var o=0;o<e.length;o++){var s=e[o][0].trace;var l=s.geojson;if(typeof l==="string"){if(!t[l]){t[l]="pending";r.push(a(l))}else if(t[l]==="pending"){r.push(i(l))}}}return r}function w(e){return s.default(e)}e.exports={locationToFeature:g,feature2polygons:y,getTraceGeojson:m,extractTraceFeature:x,fetchTraceGeoData:_,computeBbox:w}},18214:function(e,t,r){"use strict";var n=r(50606).BADNUM;t.calcTraceToLineCoords=function(e){var t=e[0].trace;var r=t.connectgaps;var a=[];var i=[];for(var o=0;o<e.length;o++){var s=e[o];var l=s.lonlat;if(l[0]!==n){i.push(l)}else if(!r&&i.length>0){a.push(i);i=[]}}if(i.length>0){a.push(i)}return a};t.makeLine=function(e){if(e.length===1){return{type:"LineString",coordinates:e[0]}}else{return{type:"MultiLineString",coordinates:e}}};t.makePolygon=function(e){if(e.length===1){return{type:"Polygon",coordinates:e}}else{var t=new Array(e.length);for(var r=0;r<e.length;r++){t[r]=[e[r]]}return{type:"MultiPolygon",coordinates:t}}};t.makeBlank=function(){return{type:"Point",coordinates:[]}}},87642:function(e,t,r){"use strict";var n=r(64872).mod;t.segmentsIntersect=a;function a(e,t,r,n,a,i,o,s){var l=r-e;var u=a-e;var f=o-a;var c=n-t;var v=i-t;var h=s-i;var p=l*h-f*c;if(p===0)return null;var d=(u*h-f*v)/p;var g=(u*c-l*v)/p;if(g<0||g>1||d<0||d>1)return null;return{x:e+l*d,y:t+c*d}}t.segmentDistance=function e(t,r,n,o,s,l,u,f){if(a(t,r,n,o,s,l,u,f))return 0;var c=n-t;var v=o-r;var h=u-s;var p=f-l;var d=c*c+v*v;var g=h*h+p*p;var y=Math.min(i(c,v,d,s-t,l-r),i(c,v,d,u-t,f-r),i(h,p,g,t-s,r-l),i(h,p,g,n-s,o-l));return Math.sqrt(y)};function i(e,t,r,n,a){var i=n*e+a*t;if(i<0){return n*n+a*a}else if(i>r){var o=n-e;var s=a-t;return o*o+s*s}else{var l=n*t-a*e;return l*l/r}}var o,s,l;t.getTextLocation=function e(t,r,a,i){if(t!==s||i!==l){o={};s=t;l=i}if(o[a]){return o[a]}var u=t.getPointAtLength(n(a-i/2,r));var f=t.getPointAtLength(n(a+i/2,r));var c=Math.atan((f.y-u.y)/(f.x-u.x));var v=t.getPointAtLength(n(a,r));var h=(v.x*4+u.x+f.x)/6;var p=(v.y*4+u.y+f.y)/6;var d={x:h,y:p,theta:c};o[a]=d;return d};t.clearLocationCache=function(){s=null};t.getVisibleSegment=function e(t,r,n){var a=r.left;var i=r.right;var o=r.top;var s=r.bottom;var l=0;var u=t.getTotalLength();var f=u;var c,v;function h(e){var r=t.getPointAtLength(e);if(e===0)c=r;else if(e===u)v=r;var n=r.x<a?a-r.x:r.x>i?r.x-i:0;var l=r.y<o?o-r.y:r.y>s?r.y-s:0;return Math.sqrt(n*n+l*l)}var p=h(l);while(p){l+=p+n;if(l>f)return;p=h(l)}p=h(f);while(p){f-=p+n;if(l>f)return;p=h(f)}return{min:l,max:f,len:f-l,total:u,isClosed:l===0&&f===u&&Math.abs(c.x-v.x)<.1&&Math.abs(c.y-v.y)<.1}};t.findPointOnPath=function e(t,r,n,a){a=a||{};var i=a.pathLength||t.getTotalLength();var o=a.tolerance||.001;var s=a.iterationLimit||30;var l=t.getPointAtLength(0)[n]>t.getPointAtLength(i)[n]?-1:1;var u=0;var f=0;var c=i;var v;var h;var p;while(u<s){v=(f+c)/2;h=t.getPointAtLength(v);p=h[n]-r;if(Math.abs(p)<o){return h}else{if(l*p>0){c=v}else{f=v}u++}}return h}},81697:function(e,t,r){"use strict";var n=r(92770);var a=r(84267);var i=r(25075);var o=r(21081);var s=r(22399).defaultLine;var l=r(73627).isArrayOrTypedArray;var u=i(s);var f=1;function c(e,t){var r=e;r[3]*=t;return r}function v(e){if(n(e))return u;var t=i(e);return t.length?t:u}function h(e){return n(e)?e:f}function p(e,t,r){var n=e.color;var a=l(n);var s=l(t);var p=o.extractOpts(e);var d=[];var g,y,m,x,b;if(p.colorscale!==undefined){g=o.makeColorScaleFuncFromTrace(e)}else{g=v}if(a){y=function(e,t){return e[t]===undefined?u:i(g(e[t]))}}else y=v;if(s){m=function(e,t){return e[t]===undefined?f:h(e[t])}}else m=h;if(a||s){for(var _=0;_<r;_++){x=y(n,_);b=m(t,_);d[_]=c(x,b)}}else d=c(i(n),t);return d}function d(e){var t=o.extractOpts(e);var r=t.colorscale;if(t.reversescale)r=o.flipScale(t.colorscale);return r.map((function(e){var t=e[0];var r=a(e[1]);var n=r.toRgb();return{index:t,rgb:[n.r,n.g,n.b,n.a]}}))}e.exports={formatColor:p,parseColorScale:d}},28984:function(e,t,r){"use strict";var n=r(23389);function a(e){return[e]}e.exports={keyFun:function(e){return e.key},repeat:a,descend:n,wrap:a,unwrap:function(e){return e[0]}}},23389:function(e){"use strict";e.exports=function e(t){return t}},39240:function(e){"use strict";e.exports=function e(t,r){if(!r)return t;var n=1/Math.abs(r);var a=n>1?(n*t+n*r)/n:t+r;var i=String(a).length;if(i>16){var o=String(r).length;var s=String(t).length;if(i>=s+o){var l=parseFloat(a).toPrecision(12);if(l.indexOf("e+")===-1)a=+l}}return a}},71828:function(e,t,r){"use strict";var n=r(39898);var a=r(84096).g0;var i=r(60721).WU;var o=r(92770);var s=r(50606);var l=s.FP_SAFE;var u=-l;var f=s.BADNUM;var c=e.exports={};c.adjustFormat=function e(t){if(!t||/^\d[.]\df/.test(t)||/[.]\d%/.test(t))return t;if(t==="0.f")return"~f";if(/^\d%/.test(t))return"~%";if(/^\ds/.test(t))return"~s";if(!/^[~,.0$]/.test(t)&&/[&fps]/.test(t))return"~"+t;return t};var v={};c.warnBadFormat=function(e){var t=String(e);if(!v[t]){v[t]=1;c.warn('encountered bad format: "'+t+'"')}};c.noFormat=function(e){return String(e)};c.numberFormat=function(e){var t;try{t=i(c.adjustFormat(e))}catch(r){c.warnBadFormat(e);return c.noFormat}return t};c.nestedProperty=r(65487);c.keyedContainer=r(66636);c.relativeAttr=r(6962);c.isPlainObject=r(41965);c.toLogRange=r(58163);c.relinkPrivateKeys=r(51332);var h=r(73627);c.isTypedArray=h.isTypedArray;c.isArrayOrTypedArray=h.isArrayOrTypedArray;c.isArray1D=h.isArray1D;c.ensureArray=h.ensureArray;c.concat=h.concat;c.maxRowLength=h.maxRowLength;c.minRowLength=h.minRowLength;var p=r(64872);c.mod=p.mod;c.modHalf=p.modHalf;var d=r(96554);c.valObjectMeta=d.valObjectMeta;c.coerce=d.coerce;c.coerce2=d.coerce2;c.coerceFont=d.coerceFont;c.coercePattern=d.coercePattern;c.coerceHoverinfo=d.coerceHoverinfo;c.coerceSelectionMarkerOpacity=d.coerceSelectionMarkerOpacity;c.validate=d.validate;var g=r(41631);c.dateTime2ms=g.dateTime2ms;c.isDateTime=g.isDateTime;c.ms2DateTime=g.ms2DateTime;c.ms2DateTimeLocal=g.ms2DateTimeLocal;c.cleanDate=g.cleanDate;c.isJSDate=g.isJSDate;c.formatDate=g.formatDate;c.incrementMonth=g.incrementMonth;c.dateTick0=g.dateTick0;c.dfltRange=g.dfltRange;c.findExactDates=g.findExactDates;c.MIN_MS=g.MIN_MS;c.MAX_MS=g.MAX_MS;var y=r(65888);c.findBin=y.findBin;c.sorterAsc=y.sorterAsc;c.sorterDes=y.sorterDes;c.distinctVals=y.distinctVals;c.roundUp=y.roundUp;c.sort=y.sort;c.findIndexOfMin=y.findIndexOfMin;c.sortObjectKeys=r(78607);var m=r(80038);c.aggNums=m.aggNums;c.len=m.len;c.mean=m.mean;c.median=m.median;c.midRange=m.midRange;c.variance=m.variance;c.stdev=m.stdev;c.interp=m.interp;var x=r(35657);c.init2dArray=x.init2dArray;c.transposeRagged=x.transposeRagged;c.dot=x.dot;c.translationMatrix=x.translationMatrix;c.rotationMatrix=x.rotationMatrix;c.rotationXYMatrix=x.rotationXYMatrix;c.apply3DTransform=x.apply3DTransform;c.apply2DTransform=x.apply2DTransform;c.apply2DTransform2=x.apply2DTransform2;c.convertCssMatrix=x.convertCssMatrix;c.inverseTransformMatrix=x.inverseTransformMatrix;var b=r(26348);c.deg2rad=b.deg2rad;c.rad2deg=b.rad2deg;c.angleDelta=b.angleDelta;c.angleDist=b.angleDist;c.isFullCircle=b.isFullCircle;c.isAngleInsideSector=b.isAngleInsideSector;c.isPtInsideSector=b.isPtInsideSector;c.pathArc=b.pathArc;c.pathSector=b.pathSector;c.pathAnnulus=b.pathAnnulus;var _=r(99863);c.isLeftAnchor=_.isLeftAnchor;c.isCenterAnchor=_.isCenterAnchor;c.isRightAnchor=_.isRightAnchor;c.isTopAnchor=_.isTopAnchor;c.isMiddleAnchor=_.isMiddleAnchor;c.isBottomAnchor=_.isBottomAnchor;var w=r(87642);c.segmentsIntersect=w.segmentsIntersect;c.segmentDistance=w.segmentDistance;c.getTextLocation=w.getTextLocation;c.clearLocationCache=w.clearLocationCache;c.getVisibleSegment=w.getVisibleSegment;c.findPointOnPath=w.findPointOnPath;var T=r(1426);c.extendFlat=T.extendFlat;c.extendDeep=T.extendDeep;c.extendDeepAll=T.extendDeepAll;c.extendDeepNoArrays=T.extendDeepNoArrays;var k=r(47769);c.log=k.log;c.warn=k.warn;c.error=k.error;var A=r(30587);c.counterRegex=A.counter;var M=r(79990);c.throttle=M.throttle;c.throttleDone=M.done;c.clearThrottle=M.clear;var S=r(24401);c.getGraphDiv=S.getGraphDiv;c.isPlotDiv=S.isPlotDiv;c.removeElement=S.removeElement;c.addStyleRule=S.addStyleRule;c.addRelatedStyleRule=S.addRelatedStyleRule;c.deleteRelatedStyleRule=S.deleteRelatedStyleRule;c.getFullTransformMatrix=S.getFullTransformMatrix;c.getElementTransformMatrix=S.getElementTransformMatrix;c.getElementAndAncestors=S.getElementAndAncestors;c.equalDomRects=S.equalDomRects;c.clearResponsive=r(86367);c.preserveDrawingBuffer=r(45142);c.makeTraceGroups=r(77310);c._=r(15867);c.notifier=r(75046);c.filterUnique=r(75744);c.filterVisible=r(76756);c.pushUnique=r(75138);c.increment=r(39240);c.cleanNumber=r(95218);c.ensureNumber=function e(t){if(!o(t))return f;t=Number(t);return t>l||t<u?f:t};c.isIndex=function(e,t){if(t!==undefined&&e>=t)return false;return o(e)&&e>=0&&e%1===0};c.noop=r(64213);c.identity=r(23389);c.repeat=function(e,t){var r=new Array(t);for(var n=0;n<t;n++){r[n]=e}return r};c.swapAttrs=function(e,t,r,n){if(!r)r="x";if(!n)n="y";for(var a=0;a<t.length;a++){var i=t[a];var o=c.nestedProperty(e,i.replace("?",r));var s=c.nestedProperty(e,i.replace("?",n));var l=o.get();o.set(s.get());s.set(l)}};c.raiseToTop=function e(t){t.parentNode.appendChild(t)};c.cancelTransition=function(e){return e.transition().duration(0)};c.constrain=function(e,t,r){if(t>r)return Math.max(r,Math.min(t,e));return Math.max(t,Math.min(r,e))};c.bBoxIntersect=function(e,t,r){r=r||0;return e.left<=t.right+r&&t.left<=e.right+r&&e.top<=t.bottom+r&&t.top<=e.bottom+r};c.simpleMap=function(e,t,r,n,a){var i=e.length;var o=new Array(i);for(var s=0;s<i;s++)o[s]=t(e[s],r,n,a);return o};c.randstr=function e(t,r,n,a){if(!n)n=16;if(r===undefined)r=24;if(r<=0)return"0";var i=Math.log(Math.pow(2,r))/Math.log(n);var o="";var s,l,u;for(s=2;i===Infinity;s*=2){i=Math.log(Math.pow(2,r/s))/Math.log(n)*s}var f=i-Math.floor(i);for(s=0;s<Math.floor(i);s++){u=Math.floor(Math.random()*n).toString(n);o=u+o}if(f){l=Math.pow(n,f);u=Math.floor(Math.random()*l).toString(n);o=u+o}var v=parseInt(o,n);if(t&&t[o]||v!==Infinity&&v>=Math.pow(2,r)){if(a>10){c.warn("randstr failed uniqueness");return o}return e(t,r,n,(a||0)+1)}else return o};c.OptionControl=function(e,t){if(!e)e={};if(!t)t="opt";var r={};r.optionList=[];r._newoption=function(n){n[t]=e;r[n.name]=n;r.optionList.push(n)};r["_"+t]=e;return r};c.smooth=function(e,t){t=Math.round(t)||0;if(t<2)return e;var r=e.length;var n=2*r;var a=2*t-1;var i=new Array(a);var o=new Array(r);var s;var l;var u;var f;for(s=0;s<a;s++){i[s]=(1-Math.cos(Math.PI*(s+1)/t))/(2*t)}for(s=0;s<r;s++){f=0;for(l=0;l<a;l++){u=s+l+1-t;if(u<-r)u-=n*Math.round(u/n);else if(u>=n)u-=n*Math.floor(u/n);if(u<0)u=-1-u;else if(u>=r)u=n-1-u;f+=e[u]*i[l]}o[s]=f}return o};c.syncOrAsync=function(e,t,r){var n,a;function i(){return c.syncOrAsync(e,t,r)}while(e.length){a=e.splice(0,1)[0];n=a(t);if(n&&n.then){return n.then(i)}}return r&&r(t)};c.stripTrailingSlash=function(e){if(e.substr(-1)==="/")return e.substr(0,e.length-1);return e};c.noneOrAll=function(e,t,r){if(!e)return;var n=false;var a=true;var i;var o;for(i=0;i<r.length;i++){o=e[r[i]];if(o!==undefined&&o!==null)n=true;else a=false}if(n&&!a){for(i=0;i<r.length;i++){e[r[i]]=t[r[i]]}}};c.mergeArray=function(e,t,r,n){var a=typeof n==="function";if(c.isArrayOrTypedArray(e)){var i=Math.min(e.length,t.length);for(var o=0;o<i;o++){var s=e[o];t[o][r]=a?n(s):s}}};c.mergeArrayCastPositive=function(e,t,r){return c.mergeArray(e,t,r,(function(e){var t=+e;return!isFinite(t)?0:t>0?t:0}))};c.fillArray=function(e,t,r,n){n=n||c.identity;if(c.isArrayOrTypedArray(e)){for(var a=0;a<t.length;a++){t[a][r]=n(e[a])}}};c.castOption=function(e,t,r,n){n=n||c.identity;var a=c.nestedProperty(e,r).get();if(c.isArrayOrTypedArray(a)){if(Array.isArray(t)&&c.isArrayOrTypedArray(a[t[0]])){return n(a[t[0]][t[1]])}else{return n(a[t])}}else{return a}};c.extractOption=function(e,t,r,n){if(r in e)return e[r];var a=c.nestedProperty(t,n).get();if(!Array.isArray(a))return a};function E(e){var t={};for(var r in e){var n=e[r];for(var a=0;a<n.length;a++){t[n[a]]=+r}}return t}c.tagSelected=function(e,t,r){var n=t.selectedpoints;var a=t._indexToPoints;var i;if(a){i=E(a)}function o(t){return t!==undefined&&t<e.length}for(var s=0;s<n.length;s++){var l=n[s];if(c.isIndex(l)||c.isArrayOrTypedArray(l)&&c.isIndex(l[0])&&c.isIndex(l[1])){var u=i?i[l]:l;var f=r?r[u]:u;if(o(f)){e[f].selected=1}}}};c.selIndices2selPoints=function(e){var t=e.selectedpoints;var r=e._indexToPoints;if(r){var n=E(r);var a=[];for(var i=0;i<t.length;i++){var o=t[i];if(c.isIndex(o)){var s=n[o];if(c.isIndex(s)){a.push(s)}}}return a}else{return t}};c.getTargetArray=function(e,t){var r=t.target;if(typeof r==="string"&&r){var n=c.nestedProperty(e,r).get();return Array.isArray(n)?n:false}else if(Array.isArray(r)){return r}return false};function L(e,t,r){var n={};if(typeof t!=="object")t={};var a=r==="pieLike"?-1:3;var i=Object.keys(e);var o,s,l;for(o=0;o<i.length;o++){s=i[o];l=e[s];if(s.charAt(0)==="_"||typeof l==="function")continue;else if(s==="module")n[s]=l;else if(Array.isArray(l)){if(s==="colorscale"||a===-1){n[s]=l.slice()}else{n[s]=l.slice(0,a)}}else if(c.isTypedArray(l)){if(a===-1){n[s]=l.subarray()}else{n[s]=l.subarray(0,a)}}else if(l&&typeof l==="object")n[s]=L(e[s],t[s],r);else n[s]=l}i=Object.keys(t);for(o=0;o<i.length;o++){s=i[o];l=t[s];if(typeof l!=="object"||!(s in n)||typeof n[s]!=="object"){n[s]=l}}return n}c.minExtend=L;c.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)};c.containsAny=function(e,t){for(var r=0;r<t.length;r++){if(e.indexOf(t[r])!==-1)return true}return false};c.isIE=function(){return typeof window.navigator.msSaveBlob!=="undefined"};var C=/Version\/[\d\.]+.*Safari/;c.isSafari=function(){return C.test(window.navigator.userAgent)};var I=/iPad|iPhone|iPod/;c.isIOS=function(){return I.test(window.navigator.userAgent)};var P=/Firefox\/(\d+)\.\d+/;c.getFirefoxVersion=function(){var e=P.exec(window.navigator.userAgent);if(e&&e.length===2){var t=parseInt(e[1]);if(!isNaN(t)){return t}}return null};c.isD3Selection=function(e){return e instanceof n.selection};c.ensureSingle=function(e,t,r,n){var a=e.select(t+(r?"."+r:""));if(a.size())return a;var i=e.append(t);if(r)i.classed(r,true);if(n)i.call(n);return i};c.ensureSingleById=function(e,t,r,n){var a=e.select(t+"#"+r);if(a.size())return a;var i=e.append(t).attr("id",r);if(n)i.call(n);return i};c.objectFromPath=function(e,t){var r=e.split(".");var n;var a=n={};for(var i=0;i<r.length;i++){var o=r[i];var s=null;var l=r[i].match(/(.*)\[([0-9]+)\]/);if(l){o=l[1];s=l[2];n=n[o]=[];if(i===r.length-1){n[s]=t}else{n[s]={}}n=n[s]}else{if(i===r.length-1){n[o]=t}else{n[o]={}}n=n[o]}}return a};var O=/^([^\[\.]+)\.(.+)?/;var D=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function z(e){return e.slice(0,2)==="__"}c.expandObjectPaths=function(e){var t,r,n,a,i,o,s;if(typeof e==="object"&&!Array.isArray(e)){for(r in e){if(e.hasOwnProperty(r)){if(t=r.match(O)){a=e[r];n=t[1];if(z(n))continue;delete e[r];e[n]=c.extendDeepNoArrays(e[n]||{},c.objectFromPath(r,c.expandObjectPaths(a))[n])}else if(t=r.match(D)){a=e[r];n=t[1];if(z(n))continue;i=parseInt(t[2]);delete e[r];e[n]=e[n]||[];if(t[3]==="."){s=t[4];o=e[n][i]=e[n][i]||{};c.extendDeepNoArrays(o,c.objectFromPath(s,c.expandObjectPaths(a)))}else{if(z(n))continue;e[n][i]=c.expandObjectPaths(a)}}else{if(z(r))continue;e[r]=c.expandObjectPaths(e[r])}}}}return e};c.numSeparate=function(e,t,r){if(!r)r=false;if(typeof t!=="string"||t.length===0){throw new Error("Separator string required for formatting!")}if(typeof e==="number"){e=String(e)}var n=/(\d+)(\d{3})/;var a=t.charAt(0);var i=t.charAt(1);var o=e.split(".");var s=o[0];var l=o.length>1?a+o[1]:"";if(i&&(o.length>1||s.length>4||r)){while(n.test(s)){s=s.replace(n,"$1"+i+"$2")}}return s+l};c.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var R=/^\w*$/;c.templateString=function(e,t){var r={};return e.replace(c.TEMPLATE_STRING_REGEX,(function(e,n){var a;if(R.test(n)){a=t[n]}else{r[n]=r[n]||c.nestedProperty(t,n).get;a=r[n]()}return c.isValidTextValue(a)?a:""}))};var F={max:10,count:0,name:"hovertemplate"};c.hovertemplateString=function(){return H.apply(F,arguments)};var B={max:10,count:0,name:"texttemplate"};c.texttemplateString=function(){return H.apply(B,arguments)};var N=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function j(e){var t=e.match(N);if(t)return{key:t[1],op:t[2],number:Number(t[3])};return{key:e,op:null,number:null}}var U={max:10,count:0,name:"texttemplate",parseMultDiv:true};c.texttemplateStringForShapes=function(){return H.apply(U,arguments)};var V=/^[:|\|]/;function H(e,t,r){var n=this;var i=arguments;if(!t)t={};var o={};return e.replace(c.TEMPLATE_STRING_REGEX,(function(e,s,l){var u=s==="xother"||s==="yother";var f=s==="_xother"||s==="_yother";var v=s==="_xother_"||s==="_yother_";var h=s==="xother_"||s==="yother_";var p=u||f||h||v;var d=s;if(f||v)d=d.substring(1);if(h||v)d=d.substring(0,d.length-1);var g=null;var y=null;if(n.parseMultDiv){var m=j(d);d=m.key;g=m.op;y=m.number}var x;if(p){x=t[d];if(x===undefined)return""}else{var b,_;for(_=3;_<i.length;_++){b=i[_];if(!b)continue;if(b.hasOwnProperty(d)){x=b[d];break}if(!R.test(d)){x=c.nestedProperty(b,d).get();x=o[d]||c.nestedProperty(b,d).get();if(x)o[d]=x}if(x!==undefined)break}}if(x!==undefined){if(g==="*")x*=y;if(g==="/")x/=y}if(x===undefined&&n){if(n.count<n.max){c.warn("Variable '"+d+"' in "+n.name+" could not be found!");x=e}if(n.count===n.max){c.warn("Too many "+n.name+" warnings - additional warnings will be suppressed")}n.count++;return e}if(l){var w;if(l[0]===":"){w=r?r.numberFormat:c.numberFormat;x=w(l.replace(V,""))(x)}if(l[0]==="|"){w=r?r.timeFormat:a;var T=c.dateTime2ms(x);x=c.formatDate(T,l.replace(V,""),false,w)}}else{var k=d+"Label";if(t.hasOwnProperty(k))x=t[k]}if(p){x="("+x+")";if(f||v)x=" "+x;if(h||v)x=x+" "}return x}))}var q=48;var G=57;c.subplotSort=function(e,t){var r=Math.min(e.length,t.length)+1;var n=0;var a=0;for(var i=0;i<r;i++){var o=e.charCodeAt(i)||0;var s=t.charCodeAt(i)||0;var l=o>=q&&o<=G;var u=s>=q&&s<=G;if(l)n=10*n+o-q;if(u)a=10*a+s-q;if(!l||!u){if(n!==a)return n-a;if(o!==s)return o-s}}return a-n};var Z=2e9;c.seedPseudoRandom=function(){Z=2e9};c.pseudoRandom=function(){var e=Z;Z=(69069*Z+1)%4294967296;if(Math.abs(Z-e)<429496729)return c.pseudoRandom();return Z/4294967296};c.fillText=function(e,t,r){var n=Array.isArray(r)?function(e){r.push(e)}:function(e){r.text=e};var a=c.extractOption(e,t,"htx","hovertext");if(c.isValidTextValue(a))return n(a);var i=c.extractOption(e,t,"tx","text");if(c.isValidTextValue(i))return n(i)};c.isValidTextValue=function(e){return e||e===0};c.formatPercent=function(e,t){t=t||0;var r=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%";for(var n=0;n<t;n++){if(r.indexOf(".")!==-1){r=r.replace("0%","%");r=r.replace(".%","%")}}return r};c.isHidden=function(e){var t=window.getComputedStyle(e).display;return!t||t==="none"};c.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""};c.strRotate=function(e){return e?"rotate("+e+")":""};c.strScale=function(e){return e!==1?"scale("+e+")":""};c.getTextTransform=function(e){var t=e.noCenter;var r=e.textX;var n=e.textY;var a=e.targetX;var i=e.targetY;var o=e.anchorX||0;var s=e.anchorY||0;var l=e.rotate;var u=e.scale;if(!u)u=0;else if(u>1)u=1;return c.strTranslate(a-u*(r+o),i-u*(n+s))+c.strScale(u)+(l?"rotate("+l+(t?"":" "+r+" "+n)+")":"")};c.setTransormAndDisplay=function(e,t){e.attr("transform",c.getTextTransform(t));e.style("display",t.scale?null:"none")};c.ensureUniformFontSize=function(e,t){var r=c.extendFlat({},t);r.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0);return r};c.join2=function(e,t,r){var n=e.length;if(n>1){return e.slice(0,-1).join(t)+r+e[n-1]}return e.join(t)};c.bigFont=function(e){return Math.round(1.2*e)};var Y=c.getFirefoxVersion();var W=Y!==null&&Y<86;c.getPositionFromD3Event=function(){if(W){return[n.event.layerX,n.event.layerY]}else{return[n.event.offsetX,n.event.offsetY]}}},41965:function(e){"use strict";e.exports=function e(t){if(window&&window.process&&window.process.versions){return Object.prototype.toString.call(t)==="[object Object]"}return Object.prototype.toString.call(t)==="[object Object]"&&Object.getPrototypeOf(t).hasOwnProperty("hasOwnProperty")}},66636:function(e,t,r){"use strict";var n=r(65487);var a=/^\w*$/;var i=0;var o=1;var s=2;var l=3;var u=4;e.exports=function e(t,r,f,c){f=f||"name";c=c||"value";var v,h,p;var d={};if(r&&r.length){p=n(t,r);h=p.get()}else{h=t}r=r||"";var g={};if(h){for(v=0;v<h.length;v++){g[h[v][f]]=v}}var y=a.test(c);var m={set:function(e,t){var r=t===null?u:i;if(!h){if(!p||r===u)return;h=[];p.set(h)}var a=g[e];if(a===undefined){if(r===u)return;r=r|l;a=h.length;g[e]=a}else if(t!==(y?h[a][c]:n(h[a],c).get())){r=r|s}var o=h[a]=h[a]||{};o[f]=e;if(y){o[c]=t}else{n(o,c).set(t)}if(t!==null){r=r&~u}d[a]=d[a]|r;return m},get:function(e){if(!h)return;var t=g[e];if(t===undefined){return undefined}else if(y){return h[t][c]}else{return n(h[t],c).get()}},rename:function(e,t){var r=g[e];if(r===undefined)return m;d[r]=d[r]|o;g[t]=r;delete g[e];h[r][f]=t;return m},remove:function(e){var t=g[e];if(t===undefined)return m;var r=h[t];if(Object.keys(r).length>2){d[t]=d[t]|s;return m.set(e,null)}if(y){for(v=t;v<h.length;v++){d[v]=d[v]|l}for(v=t;v<h.length;v++){g[h[v][f]]--}h.splice(t,1);delete g[e]}else{n(r,c).set(null);d[t]=d[t]|s|u}return m},constructUpdate:function(){var e,t;var a={};var i=Object.keys(d);for(var l=0;l<i.length;l++){t=i[l];e=r+"["+t+"]";if(h[t]){if(d[t]&o){a[e+"."+f]=h[t][f]}if(d[t]&s){if(y){a[e+"."+c]=d[t]&u?null:h[t][c]}else{a[e+"."+c]=d[t]&u?null:n(h[t],c).get()}}}else{a[e]=null}}return a}};return m}},15867:function(e,t,r){"use strict";var n=r(73972);e.exports=function e(t,r){var a=t._context.locale;for(var i=0;i<2;i++){var o=t._context.locales;for(var s=0;s<2;s++){var l=(o[a]||{}).dictionary;if(l){var u=l[r];if(u)return u}o=n.localeRegistry}var f=a.split("-")[0];if(f===a)break;a=f}return r}},47769:function(e,t,r){"use strict";var n=r(72075).dfltConfig;var a=r(75046);var i=e.exports={};i.log=function(){var e;if(n.logging>1){var t=["LOG:"];for(e=0;e<arguments.length;e++){t.push(arguments[e])}console.trace.apply(console,t)}if(n.notifyOnLogging>1){var r=[];for(e=0;e<arguments.length;e++){r.push(arguments[e])}a(r.join("<br>"),"long")}};i.warn=function(){var e;if(n.logging>0){var t=["WARN:"];for(e=0;e<arguments.length;e++){t.push(arguments[e])}console.trace.apply(console,t)}if(n.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++){r.push(arguments[e])}a(r.join("<br>"),"stick")}};i.error=function(){var e;if(n.logging>0){var t=["ERROR:"];for(e=0;e<arguments.length;e++){t.push(arguments[e])}console.error.apply(console,t)}if(n.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++){r.push(arguments[e])}a(r.join("<br>"),"stick")}}},77310:function(e,t,r){"use strict";var n=r(39898);e.exports=function e(t,r,a){var i=t.selectAll("g."+a.replace(/\s/g,".")).data(r,(function(e){return e[0].trace.uid}));i.exit().remove();i.enter().append("g").attr("class",a);i.order();var o=t.classed("rangeplot")?"nodeRangePlot3":"node3";i.each((function(e){e[0][o]=n.select(this)}));return i}},35657:function(e,t,r){"use strict";var n=r(79576);t.init2dArray=function(e,t){var r=new Array(e);for(var n=0;n<e;n++)r[n]=new Array(t);return r};t.transposeRagged=function(e){var t=0;var r=e.length;var n,a;for(n=0;n<r;n++)t=Math.max(t,e[n].length);var i=new Array(t);for(n=0;n<t;n++){i[n]=new Array(r);for(a=0;a<r;a++)i[n][a]=e[a][n]}return i};t.dot=function(e,r){if(!(e.length&&r.length)||e.length!==r.length)return null;var n=e.length;var a;var i;if(e[0].length){a=new Array(n);for(i=0;i<n;i++)a[i]=t.dot(e[i],r)}else if(r[0].length){var o=t.transposeRagged(r);a=new Array(o.length);for(i=0;i<o.length;i++)a[i]=t.dot(e,o[i])}else{a=0;for(i=0;i<n;i++)a+=e[i]*r[i]}return a};t.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]};t.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]};t.rotationXYMatrix=function(e,r,n){return t.dot(t.dot(t.translationMatrix(r,n),t.rotationMatrix(e)),t.translationMatrix(-r,-n))};t.apply3DTransform=function(e){return function(){var r=arguments;var n=arguments.length===1?r[0]:[r[0],r[1],r[2]||0];return t.dot(e,[n[0],n[1],n[2],1]).slice(0,3)}};t.apply2DTransform=function(e){return function(){var r=arguments;if(r.length===3){r=r[0]}var n=arguments.length===1?r[0]:[r[0],r[1]];return t.dot(e,[n[0],n[1],1]).slice(0,2)}};t.apply2DTransform2=function(e){var r=t.apply2DTransform(e);return function(e){return r(e.slice(0,2)).concat(r(e.slice(2,4)))}};t.convertCssMatrix=function(e){if(e){var t=e.length;if(t===16)return e;if(t===6){return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};t.inverseTransformMatrix=function(e){var t=[];n.invert(t,e);return[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}},64872:function(e){"use strict";function t(e,t){var r=e%t;return r<0?r+t:r}function r(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}e.exports={mod:t,modHalf:r}},65487:function(e,t,r){"use strict";var n=r(92770);var a=r(73627).isArrayOrTypedArray;e.exports=function e(t,r){if(n(r))r=String(r);else if(typeof r!=="string"||r.substr(r.length-4)==="[-1]"){throw"bad property string"}var a=r.split(".");var o;var s;var u,f;for(f=0;f<a.length;f++){if(String(a[f]).slice(0,2)==="__"){throw"bad property string"}}f=0;while(f<a.length){o=String(a[f]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/);if(o){if(o[1])a[f]=o[1];else if(f===0)a.splice(0,1);else throw"bad property string";s=o[2].substr(1,o[2].length-2).split("][");for(u=0;u<s.length;u++){f++;a.splice(f,0,Number(s[u]))}}f++}if(typeof t!=="object"){return v(t,r,a)}return{set:l(t,a,r),get:i(t,a),astr:r,parts:a,obj:t}};function i(e,t){return function(){var r=e;var n;var o;var s;var l;var u;for(l=0;l<t.length-1;l++){n=t[l];if(n===-1){o=true;s=[];for(u=0;u<r.length;u++){s[u]=i(r[u],t.slice(l+1))();if(s[u]!==s[0])o=false}return o?s[0]:s}if(typeof n==="number"&&!a(r)){return undefined}r=r[n];if(typeof r!=="object"||r===null){return undefined}}if(typeof r!=="object"||r===null)return undefined;s=r[t[l]];if(s===null)return undefined;return s}}var o=/(^|\.)args\[/;function s(e,t){return e===undefined||e===null&&!t.match(o)}function l(e,t,r){return function(n){var i=e;var o="";var l=[[e,o]];var v=s(n,r);var h;var p;for(p=0;p<t.length-1;p++){h=t[p];if(typeof h==="number"&&!a(i)){throw"array index but container is not an array"}if(h===-1){v=!f(i,t.slice(p+1),n,r);if(v)break;else return}if(!c(i,h,t[p+1],v)){break}i=i[h];if(typeof i!=="object"||i===null){throw"container is not an object"}o=u(o,h);l.push([i,o])}if(v){if(p===t.length-1){delete i[t[p]];if(Array.isArray(i)&&+t[p]===i.length-1){while(i.length&&i[i.length-1]===undefined){i.pop()}}}}else i[t[p]]=n}}function u(e,t){var r=t;if(n(t))r="["+t+"]";else if(e)r="."+t;return e+r}function f(e,t,r,n){var i=a(r);var o=true;var u=r;var f=n.replace("-1",0);var v=i?false:s(r,f);var h=t[0];var p;for(p=0;p<e.length;p++){f=n.replace("-1",p);if(i){u=r[p%r.length];v=s(u,f)}if(v)o=false;if(!c(e,p,h,v)){continue}l(e[p],t,n.replace("-1",p))(u)}return o}function c(e,t,r,n){if(e[t]===undefined){if(n)return false;if(typeof r==="number")e[t]=[];else e[t]={}}return true}function v(e,t,r){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:r,obj:e}}},64213:function(e){"use strict";e.exports=function e(){}},75046:function(e,t,r){"use strict";var n=r(39898);var a=r(92770);var i=[];e.exports=function(e,t){if(i.indexOf(e)!==-1)return;i.push(e);var r=1e3;if(a(t))r=t;else if(t==="long")r=3e3;var o=n.select("body").selectAll(".plotly-notifier").data([0]);o.enter().append("div").classed("plotly-notifier",true);var s=o.selectAll(".notifier-note").data(i);function l(e){e.duration(700).style("opacity",0).each("end",(function(e){var t=i.indexOf(e);if(t!==-1)i.splice(t,1);n.select(this).remove()}))}s.enter().append("div").classed("notifier-note",true).style("opacity",0).each((function(e){var a=n.select(this);a.append("button").classed("notifier-close",true).html("&times;").on("click",(function(){a.transition().call(l)}));var i=a.append("p");var o=e.split(/<br\s*\/?>/g);for(var s=0;s<o.length;s++){if(s)i.append("br");i.append("span").text(o[s])}if(t==="stick"){a.transition().duration(350).style("opacity",1)}else{a.transition().duration(700).style("opacity",1).transition().delay(r).call(l)}}))}},39918:function(e,t,r){"use strict";var n=r(6964);var a="data-savedcursor";var i="!!";e.exports=function e(t,r){var o=t.attr(a);if(r){if(!o){var s=(t.attr("class")||"").split(" ");for(var l=0;l<s.length;l++){var u=s[l];if(u.indexOf("cursor-")===0){t.attr(a,u.substr(7)).classed(u,false)}}if(!t.attr(a)){t.attr(a,i)}}n(t,r)}else if(o){t.attr(a,null);if(o===i)n(t);else n(t,o)}}},61082:function(e,t,r){"use strict";var n=r(35657).dot;var a=r(50606).BADNUM;var i=e.exports={};i.tester=function e(t){var r=t.slice();var n=r[0][0];var i=n;var o=r[0][1];var s=o;var l;if(r[r.length-1][0]!==r[0][0]||r[r.length-1][1]!==r[0][1]){r.push(r[0])}for(l=1;l<r.length;l++){n=Math.min(n,r[l][0]);i=Math.max(i,r[l][0]);o=Math.min(o,r[l][1]);s=Math.max(s,r[l][1])}var u=false;var f;if(r.length===5){if(r[0][0]===r[1][0]){if(r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]){u=true;f=function(e){return e[0]===r[0][0]}}}else if(r[0][1]===r[1][1]){if(r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]){u=true;f=function(e){return e[1]===r[0][1]}}}}function c(e,t){var r=e[0];var l=e[1];if(r===a||r<n||r>i||l===a||l<o||l>s){return false}if(t&&f(e))return false;return true}function v(e,t){var l=e[0];var u=e[1];if(l===a||l<n||l>i||u===a||u<o||u>s){return false}var f=r.length;var c=r[0][0];var v=r[0][1];var h=0;var p;var d;var g;var y;var m;for(p=1;p<f;p++){d=c;g=v;c=r[p][0];v=r[p][1];y=Math.min(d,c);if(l<y||l>Math.max(d,c)||u>Math.max(g,v)){continue}else if(u<Math.min(g,v)){if(l!==y)h++}else{if(c===d)m=u;else m=g+(l-d)*(v-g)/(c-d);if(u===m){if(p===1&&t)return false;return true}if(u<=m&&l!==y)h++}}return h%2===1}var h=true;var p=r[0];for(l=1;l<r.length;l++){if(p[0]!==r[l][0]||p[1]!==r[l][1]){h=false;break}}return{xmin:n,xmax:i,ymin:o,ymax:s,pts:r,contains:u?c:v,isRect:u,degenerate:h}};i.isSegmentBent=function e(t,r,a,i){var o=t[r];var s=[t[a][0]-o[0],t[a][1]-o[1]];var l=n(s,s);var u=Math.sqrt(l);var f=[-s[1]/u,s[0]/u];var c;var v;var h;for(c=r+1;c<a;c++){v=[t[c][0]-o[0],t[c][1]-o[1]];h=n(v,s);if(h<0||h>l||Math.abs(n(v,f))>i)return true}return false};i.filter=function e(t,r){var n=[t[0]];var a=0;var o=0;function s(e){t.push(e);var s=n.length;var l=a;n.splice(o+1);for(var u=l+1;u<t.length;u++){if(u===t.length-1||i.isSegmentBent(t,l,u+1,r)){n.push(t[u]);if(n.length<s-2){a=u;o=n.length-1}l=u}}}if(t.length>1){var l=t.pop();s(l)}return{addPt:s,raw:t,filtered:n}}},79749:function(e,t,r){"use strict";var n=r(58617);var a=r(98580);e.exports=function e(t,i,o){var s=t._fullLayout;var l=true;s._glcanvas.each((function(e){if(e.regl){e.regl.preloadCachedCode(o);return}if(e.pick&&!s._has("parcoords"))return;try{e.regl=a({canvas:this,attributes:{antialias:!e.pick,preserveDrawingBuffer:true},pixelRatio:t._context.plotGlPixelRatio||r.g.devicePixelRatio,extensions:i||[],cachedCode:o||{}})}catch(n){l=false}if(!e.regl)l=false;if(l){this.addEventListener("webglcontextlost",(function(r){if(t&&t.emit){t.emit("plotly_webglcontextlost",{event:r,layer:e.key})}}),false)}}));if(!l){n({container:s._glcontainer.node()})}return l}},45142:function(e,t,r){"use strict";var n=r(92770);var a=r(35791);e.exports=function e(t){var r;if(t&&t.hasOwnProperty("userAgent")){r=t.userAgent}else{r=i()}if(typeof r!=="string")return true;var o=a({ua:{headers:{"user-agent":r}},tablet:true,featureDetect:false});if(!o){var s=r.split(" ");for(var l=1;l<s.length;l++){var u=s[l];if(u.indexOf("Safari")!==-1){for(var f=l-1;f>-1;f--){var c=s[f];if(c.substr(0,8)==="Version/"){var v=c.substr(8).split(".")[0];if(n(v))v=+v;if(v>=13)return true}}}}}return o};function i(){var e;if(typeof navigator!=="undefined"){e=navigator.userAgent}if(e&&e.headers&&typeof e.headers["user-agent"]==="string"){e=e.headers["user-agent"]}return e}},75138:function(e){"use strict";e.exports=function e(t,r){if(r instanceof RegExp){var n=r.toString();for(var a=0;a<t.length;a++){if(t[a]instanceof RegExp&&t[a].toString()===n){return t}}t.push(r)}else if((r||r===0)&&t.indexOf(r)===-1)t.push(r);return t}},10847:function(e,t,r){"use strict";var n=r(71828);var a=r(72075).dfltConfig;function i(e,t){var r=[];var a;for(var i=0;i<t.length;i++){a=t[i];if(a===e)r[i]=a;else if(typeof a==="object"){r[i]=Array.isArray(a)?n.extendDeep([],a):n.extendDeepAll({},a)}else r[i]=a}return r}var o={};o.add=function(e,t,r,n,i){var o,s;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};s=e.undoQueue.index;if(e.autoplay){if(!e.undoQueue.inSequence)e.autoplay=false;return}if(!e.undoQueue.sequence||e.undoQueue.beginSequence){o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}};e.undoQueue.queue.splice(s,e.undoQueue.queue.length-s,o);e.undoQueue.index+=1}else{o=e.undoQueue.queue[s-1]}e.undoQueue.beginSequence=false;if(o){o.undo.calls.unshift(t);o.undo.args.unshift(r);o.redo.calls.push(n);o.redo.args.push(i)}if(e.undoQueue.queue.length>a.queueLength){e.undoQueue.queue.shift();e.undoQueue.index--}};o.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};e.undoQueue.sequence=true;e.undoQueue.beginSequence=true};o.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};e.undoQueue.sequence=false;e.undoQueue.beginSequence=false};o.undo=function e(t){var r,n;if(t.undoQueue===undefined||isNaN(t.undoQueue.index)||t.undoQueue.index<=0){return}t.undoQueue.index--;r=t.undoQueue.queue[t.undoQueue.index];t.undoQueue.inSequence=true;for(n=0;n<r.undo.calls.length;n++){o.plotDo(t,r.undo.calls[n],r.undo.args[n])}t.undoQueue.inSequence=false;t.autoplay=false};o.redo=function e(t){var r,n;if(t.undoQueue===undefined||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length){return}r=t.undoQueue.queue[t.undoQueue.index];t.undoQueue.inSequence=true;for(n=0;n<r.redo.calls.length;n++){o.plotDo(t,r.redo.calls[n],r.redo.args[n])}t.undoQueue.inSequence=false;t.autoplay=false;t.undoQueue.index++};o.plotDo=function(e,t,r){e.autoplay=true;r=i(e,r);t.apply(null,r)};e.exports=o},30587:function(e,t){"use strict";t.counter=function(e,t,r,n){var a=(t||"")+(r?"":"$");var i=n===false?"":"^";if(e==="xy"){return new RegExp(i+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+a)}return new RegExp(i+e+"([2-9]|[1-9][0-9]+)?"+a)}},6962:function(e){"use strict";var t=/^(.*)(\.[^\.\[\]]+|\[\d\])$/;var r=/^[^\.\[\]]+$/;e.exports=function(e,n){while(n){var a=e.match(t);if(a)e=a[1];else if(e.match(r))e="";else throw new Error("bad relativeAttr call:"+[e,n]);if(n.charAt(0)==="^")n=n.slice(1);else break}if(e&&n.charAt(0)!=="["){return e+"."+n}return e+n}},51332:function(e,t,r){"use strict";var n=r(73627).isArrayOrTypedArray;var a=r(41965);e.exports=function e(t,r){for(var i in r){var o=r[i];var s=t[i];if(s===o)continue;if(i.charAt(0)==="_"||typeof o==="function"){if(i in t)continue;t[i]=o}else if(n(o)&&n(s)&&a(o[0])){if(i==="customdata"||i==="ids")continue;var l=Math.min(o.length,s.length);for(var u=0;u<l;u++){if(s[u]!==o[u]&&a(o[u])&&a(s[u])){e(s[u],o[u])}}}else if(a(o)&&a(s)){e(s,o);if(!Object.keys(s).length)delete t[i]}}}},65888:function(e,t,r){"use strict";var n=r(92770);var a=r(47769);var i=r(23389);var o=r(50606).BADNUM;var s=1e-9;t.findBin=function(e,t,r){if(n(t.start)){return r?Math.ceil((e-t.start)/t.size-s)-1:Math.floor((e-t.start)/t.size+s)}else{var i=0;var o=t.length;var v=0;var h=o>1?(t[o-1]-t[0])/(o-1):1;var p,d;if(h>=0){d=r?l:u}else{d=r?c:f}e+=h*s*(r?-1:1)*(h>=0?1:-1);while(i<o&&v++<100){p=Math.floor((i+o)/2);if(d(t[p],e))i=p+1;else o=p}if(v>90)a.log("Long binary search...");return i-1}};function l(e,t){return e<t}function u(e,t){return e<=t}function f(e,t){return e>t}function c(e,t){return e>=t}t.sorterAsc=function(e,t){return e-t};t.sorterDes=function(e,t){return t-e};t.distinctVals=function(e){var r=e.slice();r.sort(t.sorterAsc);var n;for(n=r.length-1;n>-1;n--){if(r[n]!==o)break}var a=r[n]-r[0]||1;var i=a/(n||1)/1e4;var s=[];var l;for(var u=0;u<=n;u++){var f=r[u];var c=f-l;if(l===undefined){s.push(f);l=f}else if(c>i){a=Math.min(a,c);s.push(f);l=f}}return{vals:s,minDiff:a}};t.roundUp=function(e,t,r){var n=0;var a=t.length-1;var i;var o=0;var s=r?0:1;var l=r?1:0;var u=r?Math.ceil:Math.floor;while(n<a&&o++<100){i=u((n+a)/2);if(t[i]<=e)n=i+s;else a=i-l}return t[n]};t.sort=function(e,t){var r=0;var n=0;for(var a=1;a<e.length;a++){var i=t(e[a],e[a-1]);if(i<0)r=1;else if(i>0)n=1;if(r&&n)return e.sort(t)}return n?e:e.reverse()};t.findIndexOfMin=function(e,t){t=t||i;var r=Infinity;var n;for(var a=0;a<e.length;a++){var o=t(e[a]);if(o<r){r=o;n=a}}return n}},6964:function(e){"use strict";e.exports=function e(t,r){(t.attr("class")||"").split(" ").forEach((function(e){if(e.indexOf("cursor-")===0)t.classed(e,false)}));if(r)t.classed("cursor-"+r,true)}},58617:function(e,t,r){"use strict";var n=r(7901);var a=function(){};e.exports=function e(t){for(var r in t){if(typeof t[r]==="function")t[r]=a}t.destroy=function(){t.container.parentNode.removeChild(t.container)};var i=document.createElement("div");i.className="no-webgl";i.style.cursor="pointer";i.style.fontSize="24px";i.style.color=n.defaults[0];i.style.position="absolute";i.style.left=i.style.top="0px";i.style.width=i.style.height="100%";i.style["background-color"]=n.lightLine;i.style["z-index"]=30;var o=document.createElement("p");o.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info";o.style.position="relative";o.style.top="50%";o.style.left="50%";o.style.height="30%";o.style.width="50%";o.style.margin="-15% 0 0 -25%";i.appendChild(o);t.container.appendChild(i);t.container.style.background="#FFFFFF";t.container.onclick=function(){window.open("https://get.webgl.org")};return false}},78607:function(e){"use strict";e.exports=function e(t){return Object.keys(t).sort()}},80038:function(e,t,r){"use strict";var n=r(92770);var a=r(73627).isArrayOrTypedArray;t.aggNums=function(e,r,i,o){var s,l;if(!o||o>i.length)o=i.length;if(!n(r))r=false;if(a(i[0])){l=new Array(o);for(s=0;s<o;s++)l[s]=t.aggNums(e,r,i[s]);i=l}for(s=0;s<o;s++){if(!n(r))r=i[s];else if(n(i[s]))r=e(+r,+i[s])}return r};t.len=function(e){return t.aggNums((function(e){return e+1}),0,e)};t.mean=function(e,r){if(!r)r=t.len(e);return t.aggNums((function(e,t){return e+t}),0,e)/r};t.midRange=function(e){if(e===undefined||e.length===0)return undefined;return(t.aggNums(Math.max,null,e)+t.aggNums(Math.min,null,e))/2};t.variance=function(e,r,a){if(!r)r=t.len(e);if(!n(a))a=t.mean(e,r);return t.aggNums((function(e,t){return e+Math.pow(t-a,2)}),0,e)/r};t.stdev=function(e,r,n){return Math.sqrt(t.variance(e,r,n))};t.median=function(e){var r=e.slice().sort();return t.interp(r,.5)};t.interp=function(e,t){if(!n(t))throw"n should be a finite number";t=t*e.length-.5;if(t<0)return e[0];if(t>e.length-1)return e[e.length-1];var r=t%1;return r*e[Math.ceil(t)]+(1-r)*e[Math.floor(t)]}},78614:function(e,t,r){"use strict";var n=r(25075);function a(e){if(!e)return[0,0,0,1];return n(e)}e.exports=a},3883:function(e,t,r){"use strict";var n=r(32396);var a=r(91424);var i=r(71828);var o=null;function s(){if(o!==null){return o}o=false;var e=i.isIE()||i.isSafari()||i.isIOS();if(window.navigator.userAgent&&!e){var t=Array.from(n.CSS_DECLARATIONS).reverse();var r=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof r==="function"){o=t.some((function(e){return r.apply(null,e)}))}else{var s=a.tester.append("image").attr("style",n.STYLE);var l=window.getComputedStyle(s.node());var u=l.imageRendering;o=t.some((function(e){var t=e[1];return u===t||u===t.toLowerCase()}));s.remove()}}return o}e.exports=s},63893:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);var i=a.strTranslate;var o=r(77922);var s=r(18783).LINE_SPACING;var l=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;t.convertToTspans=function(e,r,a){var o=e.text();var s=!e.attr("data-notex")&&r&&r._context.typesetMath&&typeof MathJax!=="undefined"&&o.match(l);var u=n.select(e.node().parentNode);if(u.empty())return;var f=e.attr("class")?e.attr("class").split(" ")[0]:"text";f+="-math";u.selectAll("svg."+f).remove();u.selectAll("g."+f+"-group").remove();e.style("display",null).attr({"data-unformatted":o,"data-math":"N"});function c(){if(!u.empty()){f=e.attr("class")+"-math";u.select("svg."+f).remove()}e.text("").style("white-space","pre");var r=O(e.node(),o);if(r){e.style("pointer-events","all")}t.positionText(e);if(a)a.call(e)}if(s){(r&&r._promises||[]).push(new Promise((function(t){e.style("display","none");var r=parseInt(e.node().style.fontSize,10);var n={fontSize:r};h(s[2],n,(function(n,s,l){u.selectAll("svg."+f).remove();u.selectAll("g."+f+"-group").remove();var v=n&&n.select("svg");if(!v||!v.node()){c();t();return}var h=u.append("g").classed(f+"-group",true).attr({"pointer-events":"none","data-unformatted":o,"data-math":"Y"});h.node().appendChild(v.node());if(s&&s.node()){v.node().insertBefore(s.node().cloneNode(true),v.node().firstChild)}var p=l.width;var d=l.height;v.attr({class:f,height:d,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var g=e.node().style.fill||"black";var y=v.select("g");y.attr({fill:g,stroke:g});var m=y.node().getBoundingClientRect();var x=m.width;var b=m.height;if(x>p||b>d){v.style("overflow","hidden");m=v.node().getBoundingClientRect();x=m.width;b=m.height}var _=+e.attr("x");var w=+e.attr("y");var T=r||e.node().getBoundingClientRect().height;var k=-T/4;if(f[0]==="y"){h.attr({transform:"rotate("+[-90,_,w]+")"+i(-x/2,k-b/2)})}else if(f[0]==="l"){w=k-b/2}else if(f[0]==="a"&&f.indexOf("atitle")!==0){_=0;w=k}else{var A=e.attr("text-anchor");_=_-x*(A==="middle"?.5:A==="end"?1:0);w=w+k-b/2}v.attr({x:_,y:w});if(a)a.call(e,h);t(h)}))})))}else c();return e};var u=/(<|&lt;|&#60;)/g;var f=/(>|&gt;|&#62;)/g;function c(e){return e.replace(u,"\\lt ").replace(f,"\\gt ")}var v=[["$","$"],["\\(","\\)"]];function h(e,t,r){var i=parseInt((MathJax.version||"").split(".")[0]);if(i!==2&&i!==3){a.warn("No MathJax version:",MathJax.version);return}var o,s,l,u;var f=function(){s=a.extendDeepAll({},MathJax.Hub.config);l=MathJax.Hub.processSectionDelay;if(MathJax.Hub.processSectionDelay!==undefined){MathJax.Hub.processSectionDelay=0}return MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:v},displayAlign:"left"})};var h=function(){s=a.extendDeepAll({},MathJax.config);if(!MathJax.config.tex){MathJax.config.tex={}}MathJax.config.tex.inlineMath=v};var p=function(){o=MathJax.Hub.config.menuSettings.renderer;if(o!=="SVG"){return MathJax.Hub.setRenderer("SVG")}};var d=function(){o=MathJax.config.startup.output;if(o!=="svg"){MathJax.config.startup.output="svg"}};var g=function(){var r="math-output-"+a.randstr({},64);u=n.select("body").append("div").attr({id:r}).style({visibility:"hidden",position:"absolute","font-size":t.fontSize+"px"}).text(c(e));var o=u.node();return i===2?MathJax.Hub.Typeset(o):MathJax.typeset([o])};var y=function(){var t=u.select(i===2?".MathJax_SVG":".MathJax");var o=!t.empty()&&u.select("svg").node();if(!o){a.log("There was an error in the tex syntax.",e);r()}else{var s=o.getBoundingClientRect();var l;if(i===2){l=n.select("body").select("#MathJax_SVG_glyphs")}else{l=t.select("defs")}r(t,l,s)}u.remove()};var m=function(){if(o!=="SVG"){return MathJax.Hub.setRenderer(o)}};var x=function(){if(o!=="svg"){MathJax.config.startup.output=o}};var b=function(){if(l!==undefined){MathJax.Hub.processSectionDelay=l}return MathJax.Hub.Config(s)};var _=function(){MathJax.config=s};if(i===2){MathJax.Hub.Queue(f,p,g,y,m,b)}else if(i===3){h();d();MathJax.startup.defaultReady();MathJax.startup.promise.then((function(){g();y();x();_()}))}}var p={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"};var d={sub:"0.3em",sup:"-0.6em"};var g={sub:"-0.21em",sup:"0.42em"};var y="";var m=["http:","https:","mailto:","",undefined,":"];var x=t.NEWLINES=/(\r\n?|\n)/g;var b=/(<[^<>]*>)/;var _=/<(\/?)([^ >]*)(\s+(.*))?>/i;var w=/<br(\s+.*)?>/i;t.BR_TAG_ALL=/<br(\s+.*)?>/gi;var T=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i;var k=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i;var A=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i;var M=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function S(e,t){if(!e)return null;var r=e.match(t);var n=r&&(r[3]||r[4]);return n&&I(n)}var E=/(^|;)\s*color:/;t.plainText=function(e,t){t=t||{};var r=t.len!==undefined&&t.len!==-1?t.len:Infinity;var n=t.allowedTags!==undefined?t.allowedTags:["br"];var a="...";var i=a.length;var o=e.split(b);var s=[];var l="";var u=0;for(var f=0;f<o.length;f++){var c=o[f];var v=c.match(_);var h=v&&v[2].toLowerCase();if(h){if(n.indexOf(h)!==-1){s.push(c);l=h}}else{var p=c.length;if(u+p<r){s.push(c);u+=p}else if(u<r){var d=r-u;if(l&&(l!=="br"||d<=i||p<=i)){s.pop()}if(r>i){s.push(c.substr(0,d-i)+a)}else{s.push(c.substr(0,d))}break}l=""}}return s.join("")};var L={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""};var C=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function I(e){return e.replace(C,(function(e,t){var r;if(t.charAt(0)==="#"){r=P(t.charAt(1)==="x"?parseInt(t.substr(2),16):parseInt(t.substr(1),10))}else r=L[t];return r||e}))}t.convertEntities=I;function P(e){if(e>1114111)return;var t=String.fromCodePoint;if(t)return t(e);var r=String.fromCharCode;if(e<=65535)return r(e);return r((e>>10)+55232,e%1024+56320)}function O(e,t){t=t.replace(x," ");var r=false;var i=[];var l;var u=-1;function f(){u++;var t=document.createElementNS(o.svg,"tspan");n.select(t).attr({class:"line",dy:u*s+"em"});e.appendChild(t);l=t;var r=i;i=[{node:t}];if(r.length>1){for(var a=1;a<r.length;a++){c(r[a])}}}function c(e){var t=e.type;var r={};var a;if(t==="a"){a="a";var s=e.target;var u=e.href;var f=e.popup;if(u){r={"xlink:xlink:show":s==="_blank"||s.charAt(0)!=="_"?"new":"replace",target:s,"xlink:xlink:href":u};if(f){r.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+f+'");return false;'}}}else a="tspan";if(e.style)r.style=e.style;var c=document.createElementNS(o.svg,a);if(t==="sup"||t==="sub"){v(l,y);l.appendChild(c);var h=document.createElementNS(o.svg,"tspan");v(h,y);n.select(h).attr("dy",g[t]);r.dy=d[t];l.appendChild(c);l.appendChild(h)}else{l.appendChild(c)}n.select(c).attr(r);l=e.node=c;i.push(e)}function v(e,t){e.appendChild(document.createTextNode(t))}function h(e){if(i.length===1){a.log("Ignoring unexpected end tag </"+e+">.",t);return}var r=i.pop();if(e!==r.type){a.log("Start tag <"+r.type+"> doesnt match end tag <"+e+">. Pretending it did match.",t)}l=i[i.length-1].node}var m=w.test(t);if(m)f();else{l=e;i=[{node:e}]}var L=t.split(b);for(var C=0;C<L.length;C++){var P=L[C];var O=P.match(_);var z=O&&O[2].toLowerCase();var R=p[z];if(z==="br"){f()}else if(R===undefined){v(l,I(P))}else{if(O[1]){h(z)}else{var F=O[4];var B={type:z};var N=S(F,T);if(N){N=N.replace(E,"$1 fill:");if(R)N+=";"+R}else if(R)N=R;if(N)B.style=N;if(z==="a"){r=true;var j=S(F,k);if(j){var U=D(j);if(U){B.href=U;B.target=S(F,A)||"_blank";B.popup=S(F,M)}}}c(B)}}}return r}function D(e){var t=encodeURI(decodeURI(e));var r=document.createElement("a");var n=document.createElement("a");r.href=e;n.href=t;var a=r.protocol;var i=n.protocol;if(m.indexOf(a)!==-1&&m.indexOf(i)!==-1){return t}else{return""}}t.sanitizeHTML=function e(t){t=t.replace(x," ");var r=document.createElement("p");var a=r;var i=[];var o=t.split(b);for(var s=0;s<o.length;s++){var l=o[s];var u=l.match(_);var f=u&&u[2].toLowerCase();if(f in p){if(u[1]){if(i.length){a=i.pop()}}else{var c=u[4];var v=S(c,T);var h=v?{style:v}:{};if(f==="a"){var d=S(c,k);if(d){var g=D(d);if(g){h.href=g;var y=S(c,A);if(y){h.target=y}}}}var m=document.createElement(f);a.appendChild(m);n.select(m).attr(h);a=m;i.push(m)}}else{a.appendChild(document.createTextNode(I(l)))}}var w="innerHTML";return r[w]};t.lineCount=function e(t){return t.selectAll("tspan.line").size()||1};t.positionText=function e(t,r,a){return t.each((function(){var e=n.select(this);function t(t,r){if(r===undefined){r=e.attr(t);if(r===null){e.attr(t,0);r=0}}else e.attr(t,r);return r}var i=t("x",r);var o=t("y",a);if(this.nodeName==="text"){e.selectAll("tspan.line").attr({x:i,y:o})}}))};function z(e,t,r){var n=r.horizontalAlign;var i=r.verticalAlign||"top";var o=e.node().getBoundingClientRect();var s=t.node().getBoundingClientRect();var l;var u;var f;if(i==="bottom"){u=function(){return o.bottom-l.height}}else if(i==="middle"){u=function(){return o.top+(o.height-l.height)/2}}else{u=function(){return o.top}}if(n==="right"){f=function(){return o.right-l.width}}else if(n==="center"){f=function(){return o.left+(o.width-l.width)/2}}else{f=function(){return o.left}}return function(){l=this.node().getBoundingClientRect();var e=f()-s.left;var t=u()-s.top;var n=r.gd||{};if(r.gd){n._fullLayout._calcInverseTransform(n);var i=a.apply3DTransform(n._fullLayout._invTransform)(e,t);e=i[0];t=i[1]}this.style({top:t+"px",left:e+"px","z-index":1e3});return this}}var R="1px ";t.makeTextShadow=function(e){var t=R;var r=R;var n=R;return t+r+n+e+", "+"-"+t+"-"+r+n+e+", "+t+"-"+r+n+e+", "+"-"+t+r+n+e};t.makeEditable=function(e,t){var r=t.gd;var a=t.delegate;var i=n.dispatch("edit","input","cancel");var o=a||e;e.style({"pointer-events":a?"none":"all"});if(e.size()!==1)throw new Error("boo");function s(){u();e.style({opacity:0});var t=o.attr("class");var r;if(t)r="."+t.split(" ")[0]+"-math-group";else r="[class*=-math-group]";if(r){n.select(e.node().parentNode).select(r).style({opacity:0})}}function l(e){var t=e.node();var r=document.createRange();r.selectNodeContents(t);var n=window.getSelection();n.removeAllRanges();n.addRange(r);t.focus()}function u(){var a=n.select(r);var o=a.select(".svg-container");var s=o.append("div");var u=e.node().style;var f=parseFloat(u.fontSize||12);var c=t.text;if(c===undefined)c=e.attr("data-unformatted");s.classed("plugin-editable editable",true).style({position:"absolute","font-family":u.fontFamily||"Arial","font-size":f,color:t.fill||u.fill||"black",opacity:1,"background-color":t.background||"transparent",outline:"#ffffff33 1px solid",margin:[-f/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:true}).text(c).call(z(e,o,t)).on("blur",(function(){r._editing=false;e.text(this.textContent).style({opacity:1});var t=n.select(this).attr("class");var a;if(t)a="."+t.split(" ")[0]+"-math-group";else a="[class*=-math-group]";if(a){n.select(e.node().parentNode).select(a).style({opacity:0})}var o=this.textContent;n.select(this).transition().duration(0).remove();n.select(document).on("mouseup",null);i.edit.call(e,o)})).on("focus",(function(){var e=this;r._editing=true;n.select(document).on("mouseup",(function(){if(n.event.target===e)return false;if(document.activeElement===s.node())s.node().blur()}))})).on("keyup",(function(){if(n.event.which===27){r._editing=false;e.style({opacity:1});n.select(this).style({opacity:0}).on("blur",(function(){return false})).transition().remove();i.cancel.call(e,this.textContent)}else{i.input.call(e,this.textContent);n.select(this).call(z(e,o,t))}})).on("keydown",(function(){if(n.event.which===13)this.blur()})).call(l)}if(t.immediate)s();else o.on("click",s);return n.rebind(e,i,"on")}},79990:function(e,t){"use strict";var r={};t.throttle=function e(t,a,i){var o=r[t];var s=Date.now();if(!o){for(var l in r){if(r[l].ts<s-6e4){delete r[l]}}o=r[t]={ts:0,timer:null}}n(o);function u(){i();o.ts=Date.now();if(o.onDone){o.onDone();o.onDone=null}}if(s>o.ts+a){u();return}o.timer=setTimeout((function(){u();o.timer=null}),a)};t.done=function(e){var t=r[e];if(!t||!t.timer)return Promise.resolve();return new Promise((function(e){var r=t.onDone;t.onDone=function n(){if(r)r();e();t.onDone=null}}))};t.clear=function(e){if(e){n(r[e]);delete r[e]}else{for(var a in r)t.clear(a)}};function n(e){if(e&&e.timer!==null){clearTimeout(e.timer);e.timer=null}}},58163:function(e,t,r){"use strict";var n=r(92770);e.exports=function e(t,r){if(t>0)return Math.log(t)/Math.LN10;var a=Math.log(Math.min(r[0],r[1]))/Math.LN10;if(!n(a))a=Math.log(Math.max(r[0],r[1]))/Math.LN10-6;return a}},90973:function(e,t,r){"use strict";var n=e.exports={};var a=r(78776).locationmodeToLayer;var i=r(96892).zL;n.getTopojsonName=function(e){return[e.scope.replace(/ /g,"-"),"_",e.resolution.toString(),"m"].join("")};n.getTopojsonPath=function(e,t){return e+t+".json"};n.getTopojsonFeatures=function(e,t){var r=a[e.locationmode];var n=t.objects[r];return i(t,n).features}},37815:function(e){"use strict";e.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},92177:function(e){"use strict";e.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},14458:function(e,t,r){"use strict";var n=r(73972);e.exports=function e(t){var r=n.layoutArrayContainers;var a=n.layoutArrayRegexes;var i=t.split("[")[0];var o;var s;for(var l=0;l<a.length;l++){s=t.match(a[l]);if(s&&s.index===0){o=s[0];break}}if(!o)o=r[r.indexOf(i)];if(!o)return false;var u=t.substr(o.length);if(!u)return{array:o,index:"",property:""};s=u.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/);if(!s)return false;return{array:o,index:Number(s[1]),property:s[3]||""}}},30962:function(e,t,r){"use strict";var n=r(1426).extendFlat;var a=r(41965);var i={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]};var o={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]};var s=i.flags.slice().concat(["fullReplot"]);var l=o.flags.slice().concat("layoutReplot");e.exports={traces:i,layout:o,traceFlags:function(){return u(s)},layoutFlags:function(){return u(l)},update:function(e,t){var r=t.editType;if(r&&r!=="none"){var n=r.split("+");for(var a=0;a<n.length;a++){e[n[a]]=true}}},overrideAll:f};function u(e){var t={};for(var r=0;r<e.length;r++)t[e[r]]=false;return t}function f(e,t,r){var i=n({},e);for(var o in i){var s=i[o];if(a(s)){i[o]=c(s,t,r,o)}}if(r==="from-root")i.editType=t;return i}function c(e,t,r,a){if(e.valType){var i=n({},e);i.editType=t;if(Array.isArray(e.items)){i.items=new Array(e.items.length);for(var o=0;o<e.items.length;o++){i.items[o]=c(e.items[o],t,"from-root")}}return i}else{return f(e,t,a.charAt(0)==="_"?"nested":"from-root")}}},58377:function(e,t,r){"use strict";var n=r(92770);var a=r(27812);var i=r(73972);var o=r(71828);var s=r(74875);var l=r(41675);var u=r(7901);var f=l.cleanId;var c=l.getFromTrace;var v=i.traceIs;t.clearPromiseQueue=function(e){if(Array.isArray(e._promises)&&e._promises.length>0){o.log("Clearing previous rejected promises from queue.")}e._promises=[]};t.cleanLayout=function(e){var r,n;if(!e)e={};if(e.xaxis1){if(!e.xaxis)e.xaxis=e.xaxis1;delete e.xaxis1}if(e.yaxis1){if(!e.yaxis)e.yaxis=e.yaxis1;delete e.yaxis1}if(e.scene1){if(!e.scene)e.scene=e.scene1;delete e.scene1}var i=(s.subplotsRegistry.cartesian||{}).attrRegex;var l=(s.subplotsRegistry.polar||{}).attrRegex;var c=(s.subplotsRegistry.ternary||{}).attrRegex;var v=(s.subplotsRegistry.gl3d||{}).attrRegex;var d=Object.keys(e);for(r=0;r<d.length;r++){var g=d[r];if(i&&i.test(g)){var y=e[g];if(y.anchor&&y.anchor!=="free"){y.anchor=f(y.anchor)}if(y.overlaying)y.overlaying=f(y.overlaying);if(!y.type){if(y.isdate)y.type="date";else if(y.islog)y.type="log";else if(y.isdate===false&&y.islog===false)y.type="linear"}if(y.autorange==="withzero"||y.autorange==="tozero"){y.autorange=true;y.rangemode="tozero"}if(y.insiderange)delete y.range;delete y.islog;delete y.isdate;delete y.categories;if(m(y,"domain"))delete y.domain;if(y.autotick!==undefined){if(y.tickmode===undefined){y.tickmode=y.autotick?"auto":"linear"}delete y.autotick}p(y)}else if(l&&l.test(g)){var x=e[g];p(x.radialaxis)}else if(c&&c.test(g)){var b=e[g];p(b.aaxis);p(b.baxis);p(b.caxis)}else if(v&&v.test(g)){var _=e[g];var w=_.cameraposition;if(Array.isArray(w)&&w[0].length===4){var T=w[0];var k=w[1];var A=w[2];var M=a([],T);var S=[];for(n=0;n<3;++n){S[n]=k[n]+A*M[2+4*n]}_.camera={eye:{x:S[0],y:S[1],z:S[2]},center:{x:k[0],y:k[1],z:k[2]},up:{x:0,y:0,z:1}};delete _.cameraposition}p(_.xaxis);p(_.yaxis);p(_.zaxis)}}var E=Array.isArray(e.annotations)?e.annotations.length:0;for(r=0;r<E;r++){var L=e.annotations[r];if(!o.isPlainObject(L))continue;if(L.ref){if(L.ref==="paper"){L.xref="paper";L.yref="paper"}else if(L.ref==="data"){L.xref="x";L.yref="y"}delete L.ref}h(L,"xref");h(L,"yref")}var C=Array.isArray(e.shapes)?e.shapes.length:0;for(r=0;r<C;r++){var I=e.shapes[r];if(!o.isPlainObject(I))continue;h(I,"xref");h(I,"yref")}var P=Array.isArray(e.images)?e.images.length:0;for(r=0;r<P;r++){var O=e.images[r];if(!o.isPlainObject(O))continue;h(O,"xref");h(O,"yref")}var D=e.legend;if(D){if(D.x>3){D.x=1.02;D.xanchor="left"}else if(D.x<-2){D.x=-.02;D.xanchor="right"}if(D.y>3){D.y=1.02;D.yanchor="bottom"}else if(D.y<-2){D.y=-.02;D.yanchor="top"}}p(e);if(e.dragmode==="rotate")e.dragmode="orbit";u.clean(e);if(e.template&&e.template.layout){t.cleanLayout(e.template.layout)}return e};function h(e,t){var r=e[t];var n=t.charAt(0);if(r&&r!=="paper"){e[t]=f(r,n,true)}}function p(e){if(e){if(typeof e.title==="string"||typeof e.title==="number"){e.title={text:e.title}}t("titlefont","font");t("titleposition","position");t("titleside","side");t("titleoffset","offset")}function t(t,r){var n=e[t];var a=e.title&&e.title[r];if(n&&!a){if(!e.title){e.title={}}e.title[r]=e[t];delete e[t]}}}t.cleanData=function(e){for(var r=0;r<e.length;r++){var n=e[r];var a;if(n.type==="histogramy"&&"xbins"in n&&!("ybins"in n)){n.ybins=n.xbins;delete n.xbins}if(n.error_y&&"opacity"in n.error_y){var l=u.defaults;var c=n.error_y.color||(v(n,"bar")?u.defaultLine:l[r%l.length]);n.error_y.color=u.addOpacity(u.rgb(c),u.opacity(c)*n.error_y.opacity);delete n.error_y.opacity}if("bardir"in n){if(n.bardir==="h"&&(v(n,"bar")||n.type.substr(0,9)==="histogram")){n.orientation="h";t.swapXYData(n)}delete n.bardir}if(n.type==="histogramy")t.swapXYData(n);if(n.type==="histogramx"||n.type==="histogramy"){n.type="histogram"}if("scl"in n&&!("colorscale"in n)){n.colorscale=n.scl;delete n.scl}if("reversescl"in n&&!("reversescale"in n)){n.reversescale=n.reversescl;delete n.reversescl}if(n.xaxis)n.xaxis=f(n.xaxis,"x");if(n.yaxis)n.yaxis=f(n.yaxis,"y");if(v(n,"gl3d")&&n.scene){n.scene=s.subplotsRegistry.gl3d.cleanId(n.scene)}if(!v(n,"pie-like")&&!v(n,"bar-like")){if(Array.isArray(n.textposition)){for(a=0;a<n.textposition.length;a++){n.textposition[a]=y(n.textposition[a])}}else if(n.textposition){n.textposition=y(n.textposition)}}var h=i.getModule(n);if(h&&h.colorbar){var x=h.colorbar.container;var b=x?n[x]:n;if(b&&b.colorscale){if(b.colorscale==="YIGnBu")b.colorscale="YlGnBu";if(b.colorscale==="YIOrRd")b.colorscale="YlOrRd"}}if(n.type==="surface"&&o.isPlainObject(n.contours)){var _=["x","y","z"];for(a=0;a<_.length;a++){var w=n.contours[_[a]];if(!o.isPlainObject(w))continue;if(w.highlightColor){w.highlightcolor=w.highlightColor;delete w.highlightColor}if(w.highlightWidth){w.highlightwidth=w.highlightWidth;delete w.highlightWidth}}}if(n.type==="candlestick"||n.type==="ohlc"){var T=(n.increasing||{}).showlegend!==false;var k=(n.decreasing||{}).showlegend!==false;var A=d(n.increasing);var M=d(n.decreasing);if(A!==false&&M!==false){var S=g(A,M,T,k);if(S)n.name=S}else if((A||M)&&!n.name){n.name=A||M}}if(Array.isArray(n.transforms)){var E=n.transforms;for(a=0;a<E.length;a++){var L=E[a];if(!o.isPlainObject(L))continue;switch(L.type){case"filter":if(L.filtersrc){L.target=L.filtersrc;delete L.filtersrc}if(L.calendar){if(!L.valuecalendar){L.valuecalendar=L.calendar}delete L.calendar}break;case"groupby":L.styles=L.styles||L.style;if(L.styles&&!Array.isArray(L.styles)){var C=L.styles;var I=Object.keys(C);L.styles=[];for(var P=0;P<I.length;P++){L.styles.push({target:I[P],value:C[I[P]]})}}break}}}if(m(n,"line"))delete n.line;if("marker"in n){if(m(n.marker,"line"))delete n.marker.line;if(m(n,"marker"))delete n.marker}u.clean(n);if(n.autobinx){delete n.autobinx;delete n.xbins}if(n.autobiny){delete n.autobiny;delete n.ybins}p(n);if(n.colorbar)p(n.colorbar);if(n.marker&&n.marker.colorbar)p(n.marker.colorbar);if(n.line&&n.line.colorbar)p(n.line.colorbar);if(n.aaxis)p(n.aaxis);if(n.baxis)p(n.baxis)}};function d(e){if(!o.isPlainObject(e))return false;var t=e.name;delete e.name;delete e.showlegend;return(typeof t==="string"||typeof t==="number")&&String(t)}function g(e,t,r,n){if(r&&!n)return e;if(n&&!r)return t;if(!e.trim())return t;if(!t.trim())return e;var a=Math.min(e.length,t.length);var i;for(i=0;i<a;i++){if(e.charAt(i)!==t.charAt(i))break}var o=e.substr(0,i);return o.trim()}function y(e){var t="middle";var r="center";if(typeof e==="string"){if(e.indexOf("top")!==-1)t="top";else if(e.indexOf("bottom")!==-1)t="bottom";if(e.indexOf("left")!==-1)r="left";else if(e.indexOf("right")!==-1)r="right"}return t+" "+r}function m(e,t){return t in e&&typeof e[t]==="object"&&Object.keys(e[t]).length===0}t.swapXYData=function(e){var t;o.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]);if(Array.isArray(e.z)&&Array.isArray(e.z[0])){if(e.transpose)delete e.transpose;else e.transpose=true}if(e.error_x&&e.error_y){var r=e.error_y;var n="copy_ystyle"in r?r.copy_ystyle:!(r.color||r.thickness||r.width);o.swapAttrs(e,["error_?.copy_ystyle"]);if(n){o.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}}if(typeof e.hoverinfo==="string"){var a=e.hoverinfo.split("+");for(t=0;t<a.length;t++){if(a[t]==="x")a[t]="y";else if(a[t]==="y")a[t]="x"}e.hoverinfo=a.join("+")}};t.coerceTraceIndices=function(e,t){if(n(t)){return[t]}else if(!Array.isArray(t)||!t.length){return e.data.map((function(e,t){return t}))}else if(Array.isArray(t)){var r=[];for(var a=0;a<t.length;a++){if(o.isIndex(t[a],e.data.length)){r.push(t[a])}else{o.warn("trace index (",t[a],") is not a number or is out of bounds")}}return r}return t};t.manageArrayContainers=function(e,t,r){var a=e.obj;var i=e.parts;var s=i.length;var l=i[s-1];var u=n(l);if(u&&t===null){var f=i.slice(0,s-1).join(".");var c=o.nestedProperty(a,f).get();c.splice(l,1)}else if(u&&e.get()===undefined){if(e.get()===undefined)r[e.astr]=null;e.set(t)}else{e.set(t)}};var x=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function b(e){var t=e.search(x);if(t>0)return e.substr(0,t)}t.hasParent=function(e,t){var r=b(t);while(r){if(r in e)return true;r=b(r)}return false};var _=["x","y","z"];t.clearAxisTypes=function(e,t,r){for(var n=0;n<t.length;n++){var a=e._fullData[n];for(var i=0;i<3;i++){var s=c(e,a,_[i]);if(s&&s.type!=="log"){var l=s._name;var u=s._id.substr(1);if(u.substr(0,5)==="scene"){if(r[u]!==undefined)continue;l=u+"."+l}var f=l+".type";if(r[l]===undefined&&r[f]===undefined){o.nestedProperty(e.layout,f).set(null)}}}}}},10641:function(e,t,r){"use strict";var n=r(72391);t._doPlot=n._doPlot;t.newPlot=n.newPlot;t.restyle=n.restyle;t.relayout=n.relayout;t.redraw=n.redraw;t.update=n.update;t._guiRestyle=n._guiRestyle;t._guiRelayout=n._guiRelayout;t._guiUpdate=n._guiUpdate;t._storeDirectGUIEdit=n._storeDirectGUIEdit;t.react=n.react;t.extendTraces=n.extendTraces;t.prependTraces=n.prependTraces;t.addTraces=n.addTraces;t.deleteTraces=n.deleteTraces;t.moveTraces=n.moveTraces;t.purge=n.purge;t.addFrames=n.addFrames;t.deleteFrames=n.deleteFrames;t.animate=n.animate;t.setPlotConfig=n.setPlotConfig;var a=r(24401).getGraphDiv;var i=r(34031).eraseActiveShape;t.deleteActiveShape=function(e){return i(a(e))};t.toImage=r(403);t.validate=r(84936);t.downloadImage=r(7239);var o=r(96318);t.makeTemplate=o.makeTemplate;t.validateTemplate=o.validateTemplate},6611:function(e,t,r){"use strict";var n=r(41965);var a=r(64213);var i=r(47769);var o=r(65888).sorterAsc;var s=r(73972);t.containerArrayMatch=r(14458);var l=t.isAddVal=function e(t){return t==="add"||n(t)};var u=t.isRemoveVal=function e(t){return t===null||t==="remove"};t.applyContainerArrayChanges=function e(t,r,n,f,c){var v=r.astr;var h=s.getComponentMethod(v,"supplyLayoutDefaults");var p=s.getComponentMethod(v,"draw");var d=s.getComponentMethod(v,"drawOne");var g=f.replot||f.recalc||h===a||p===a;var y=t.layout;var m=t._fullLayout;if(n[""]){if(Object.keys(n).length>1){i.warn("Full array edits are incompatible with other edits",v)}var x=n[""][""];if(u(x))r.set(null);else if(Array.isArray(x))r.set(x);else{i.warn("Unrecognized full array edit value",v,x);return true}if(g)return false;h(y,m);p(t);return true}var b=Object.keys(n).map(Number).sort(o);var _=r.get();var w=_||[];var T=c(m,v).get();var k=[];var A=-1;var M=w.length;var S;var E;var L;var C;var I;var P;var O,D;for(S=0;S<b.length;S++){L=b[S];C=n[L];I=Object.keys(C);P=C[""],O=l(P);if(L<0||L>w.length-(O?0:1)){i.warn("index out of range",v,L);continue}if(P!==undefined){if(I.length>1){i.warn("Insertion & removal are incompatible with edits to the same index.",v,L)}if(u(P)){k.push(L)}else if(O){if(P==="add")P={};w.splice(L,0,P);if(T)T.splice(L,0,{})}else{i.warn("Unrecognized full object edit value",v,L,P)}if(A===-1)A=L}else{for(E=0;E<I.length;E++){D=v+"["+L+"].";c(w[L],I[E],D).set(C[I[E]])}}}for(S=k.length-1;S>=0;S--){w.splice(k[S],1);if(T)T.splice(k[S],1)}if(!w.length)r.set(null);else if(!_)r.set(w);if(g)return false;h(y,m);if(d!==a){var z;if(A===-1){z=b}else{M=Math.max(w.length,M);z=[];for(S=0;S<b.length;S++){L=b[S];if(L>=A)break;z.push(L)}for(S=A;S<M;S++){z.push(S)}}for(S=0;S<z.length;S++){d(t,z[S])}}else p(t);return true}},72391:function(e,t,r){"use strict";var n=r(39898);var a=r(92770);var i=r(57035);var o=r(71828);var s=o.nestedProperty;var l=r(11086);var u=r(10847);var f=r(73972);var c=r(86281);var v=r(74875);var h=r(89298);var p=r(23608);var d=r(13838);var g=r(91424);var y=r(7901);var m=r(4305).initInteractions;var x=r(77922);var b=r(47322).clearOutline;var _=r(72075).dfltConfig;var w=r(6611);var T=r(58377);var k=r(61549);var A=r(30962);var M=r(85555).AX_NAME_PATTERN;var S=0;var E=5;function L(e,r,a,i){var s;e=o.getGraphDiv(e);l.init(e);if(o.isPlainObject(r)){var u=r;r=u.data;a=u.layout;i=u.config;s=u.frames}var c=l.triggerHandler(e,"plotly_beforeplot",[r,a,i]);if(c===false)return Promise.reject();if(!r&&!a&&!o.isPlotDiv(e)){o.warn("Calling _doPlot as if redrawing "+"but this container doesn't yet have a plot.",e)}function p(){if(s){return t.addFrames(e,s)}}D(e,i);if(!a)a={};n.select(e).classed("js-plotly-plot",true);g.makeTester();if(!Array.isArray(e._promises))e._promises=[];var d=(e.data||[]).length===0&&Array.isArray(r);if(Array.isArray(r)){T.cleanData(r);if(d)e.data=r;else e.data.push.apply(e.data,r);e.empty=false}if(!e.layout||d){e.layout=T.cleanLayout(a)}v.supplyDefaults(e);var y=e._fullLayout;var x=y._has("cartesian");y._replotting=true;if(d||y._shouldCreateBgLayer){Ie(e);if(y._shouldCreateBgLayer){delete y._shouldCreateBgLayer}}g.initGradients(e);g.initPatterns(e);if(d)h.saveShowSpikeInitial(e);var b=!e.calcdata||e.calcdata.length!==(e._fullData||[]).length;if(b)v.doCalcdata(e);for(var _=0;_<e.calcdata.length;_++){e.calcdata[_][0].trace=e._fullData[_]}if(e._context.responsive){if(!e._responsiveChartHandler){e._responsiveChartHandler=function(){if(!o.isHidden(e))v.resize(e)};window.addEventListener("resize",e._responsiveChartHandler)}}else{o.clearResponsive(e)}var w=o.extendFlat({},y._size);var A=0;function M(){var t=y._basePlotModules;for(var r=0;r<t.length;r++){if(t[r].drawFramework){t[r].drawFramework(e)}}if(!y._glcanvas&&y._has("gl")){y._glcanvas=y._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:true,pick:false},{key:"focusLayer",context:false,pick:false},{key:"pickLayer",context:false,pick:true}],(function(e){return e.key}));y._glcanvas.enter().append("canvas").attr("class",(function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")})).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"})}var n=e._context.plotGlPixelRatio;if(y._glcanvas){y._glcanvas.attr("width",y.width*n).attr("height",y.height*n).style("width",y.width+"px").style("height",y.height+"px");var a=y._glcanvas.data()[0].regl;if(a){if(Math.floor(y.width*n)!==a._gl.drawingBufferWidth||Math.floor(y.height*n)!==a._gl.drawingBufferHeight){var i="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(A){o.error(i)}else{o.log(i+" Clearing graph and plotting again.");v.cleanPlot([],{},e._fullData,y);v.supplyDefaults(e);y=e._fullLayout;v.doCalcdata(e);A++;return M()}}}}if(y.modebar.orientation==="h"){y._modebardiv.style("height",null).style("width","100%")}else{y._modebardiv.style("width",null).style("height",y.height+"px")}return v.previousPromises(e)}function S(){v.clearAutoMarginIds(e);k.drawMarginPushers(e);h.allowAutoMargin(e);if(e._fullLayout.title.text&&e._fullLayout.title.automargin)v.allowAutoMargin(e,"title.automargin");if(y._has("pie")){var t=e._fullData;for(var r=0;r<t.length;r++){var n=t[r];if(n.type==="pie"&&n.automargin){v.allowAutoMargin(e,"pie."+n.uid+".automargin")}}}v.doAutoMargin(e);return v.previousPromises(e)}function E(){if(!v.didMarginChange(w,y._size))return;return o.syncOrAsync([S,k.layoutStyles],e)}function L(){if(!b){I();return}return o.syncOrAsync([f.getComponentMethod("shapes","calcAutorange"),f.getComponentMethod("annotations","calcAutorange"),I],e)}function I(){if(e._transitioning)return;k.doAutoRangeAndConstraints(e);if(d)h.saveRangeInitial(e);f.getComponentMethod("rangeslider","calcAutorange")(e)}function P(){return h.draw(e,d?"":"redraw")}var O=[v.previousPromises,p,M,S,E];if(x)O.push(L);O.push(k.layoutStyles);if(x){O.push(P,(function e(t){var r=t._fullLayout._insideTickLabelsUpdaterange;if(r){t._fullLayout._insideTickLabelsUpdaterange=undefined;return ne(t,r).then((function(){h.saveRangeInitial(t,true)}))}}))}O.push(k.drawData,k.finalDraw,m,v.addLinks,v.rehover,v.redrag,v.reselect,v.doAutoMargin,v.previousPromises);var z=o.syncOrAsync(O,e);if(!z||!z.then)z=Promise.resolve();return z.then((function(){C(e);return e}))}function C(e){var t=e._fullLayout;if(t._redrawFromAutoMarginCount){t._redrawFromAutoMarginCount--}else{e.emit("plotly_afterplot")}}function I(e){return o.extendFlat(_,e)}function P(e,t){try{e._fullLayout._paper.style("background",t)}catch(r){o.error(r)}}function O(e,t){var r=y.combine(t,"white");P(e,r)}function D(e,t){if(!e._context){e._context=o.extendDeep({},_);var r=n.select("base");e._context._baseUrl=r.size()&&r.attr("href")?window.location.href.split("#")[0]:""}var a=e._context;var s,l,u;if(t){l=Object.keys(t);for(s=0;s<l.length;s++){u=l[s];if(u==="editable"||u==="edits")continue;if(u in a){if(u==="setBackground"&&t[u]==="opaque"){a[u]=O}else{a[u]=t[u]}}}if(t.plot3dPixelRatio&&!a.plotGlPixelRatio){a.plotGlPixelRatio=a.plot3dPixelRatio}var f=t.editable;if(f!==undefined){a.editable=f;l=Object.keys(a.edits);for(s=0;s<l.length;s++){a.edits[l[s]]=f}}if(t.edits){l=Object.keys(t.edits);for(s=0;s<l.length;s++){u=l[s];if(u in a.edits){a.edits[u]=t.edits[u]}}}a._exportedPlot=t._exportedPlot}if(a.staticPlot){a.editable=false;a.edits={};a.autosizable=false;a.scrollZoom=false;a.doubleClick=false;a.showTips=false;a.showLink=false;a.displayModeBar=false}if(a.displayModeBar==="hover"&&!i){a.displayModeBar=true}if(a.setBackground==="transparent"||typeof a.setBackground!=="function"){a.setBackground=P}a._hasZeroHeight=a._hasZeroHeight||e.clientHeight===0;a._hasZeroWidth=a._hasZeroWidth||e.clientWidth===0;var c=a.scrollZoom;var v=a._scrollZoom={};if(c===true){v.cartesian=1;v.gl3d=1;v.geo=1;v.mapbox=1}else if(typeof c==="string"){var h=c.split("+");for(s=0;s<h.length;s++){v[h[s]]=1}}else if(c!==false){v.gl3d=1;v.geo=1;v.mapbox=1}}function z(e){e=o.getGraphDiv(e);if(!o.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e)}T.cleanData(e.data);T.cleanLayout(e.layout);e.calcdata=undefined;return t._doPlot(e).then((function(){e.emit("plotly_redraw");return e}))}function R(e,r,n,a){e=o.getGraphDiv(e);v.cleanPlot([],{},e._fullData||[],e._fullLayout||{});v.purge(e);return t._doPlot(e,r,n,a)}function F(e,t){var r=t+1;var n=[];var a;var i;for(a=0;a<e.length;a++){i=e[a];if(i<0){n.push(r+i)}else{n.push(i)}}return n}function B(e,t,r){var n,a;for(n=0;n<t.length;n++){a=t[n];if(a!==parseInt(a,10)){throw new Error("all values in "+r+" must be integers")}if(a>=e.data.length||a<-e.data.length){throw new Error(r+" must be valid indices for gd.data.")}if(t.indexOf(a,n+1)>-1||a>=0&&t.indexOf(-e.data.length+a)>-1||a<0&&t.indexOf(e.data.length+a)>-1){throw new Error("each index in "+r+" must be unique.")}}}function N(e,t,r){if(!Array.isArray(e.data)){throw new Error("gd.data must be an array.")}if(typeof t==="undefined"){throw new Error("currentIndices is a required argument.")}else if(!Array.isArray(t)){t=[t]}B(e,t,"currentIndices");if(typeof r!=="undefined"&&!Array.isArray(r)){r=[r]}if(typeof r!=="undefined"){B(e,r,"newIndices")}if(typeof r!=="undefined"&&t.length!==r.length){throw new Error("current and new indices must be of equal length.")}}function j(e,t,r){var n,a;if(!Array.isArray(e.data)){throw new Error("gd.data must be an array.")}if(typeof t==="undefined"){throw new Error("traces must be defined.")}if(!Array.isArray(t)){t=[t]}for(n=0;n<t.length;n++){a=t[n];if(typeof a!=="object"||Array.isArray(a)||a===null){throw new Error("all values in traces array must be non-array objects")}}if(typeof r!=="undefined"&&!Array.isArray(r)){r=[r]}if(typeof r!=="undefined"&&r.length!==t.length){throw new Error("if indices is specified, traces.length must equal indices.length")}}function U(e,t,r,n){var a=o.isPlainObject(n);if(!Array.isArray(e.data)){throw new Error("gd.data must be an array")}if(!o.isPlainObject(t)){throw new Error("update must be a key:value object")}if(typeof r==="undefined"){throw new Error("indices must be an integer or array of integers")}B(e,r,"indices");for(var i in t){if(!Array.isArray(t[i])||t[i].length!==r.length){throw new Error("attribute "+i+" must be an array of length equal to indices array length")}if(a&&(!(i in n)||!Array.isArray(n[i])||n[i].length!==t[i].length)){throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 "+"corrispondence with the keys and number of traces in the update object")}}}function V(e,t,r,n){var i=o.isPlainObject(n);var l=[];var u,f,c,v,h;if(!Array.isArray(r))r=[r];r=F(r,e.data.length-1);for(var p in t){for(var d=0;d<r.length;d++){u=e.data[r[d]];c=s(u,p);f=c.get();v=t[p][d];if(!o.isArrayOrTypedArray(v)){throw new Error("attribute: "+p+" index: "+d+" must be an array")}if(!o.isArrayOrTypedArray(f)){throw new Error("cannot extend missing or non-array attribute: "+p)}if(f.constructor!==v.constructor){throw new Error("cannot extend array with an array of a different type: "+p)}h=i?n[p][d]:n;if(!a(h))h=-1;l.push({prop:c,target:f,insert:v,maxp:Math.floor(h)})}}return l}function H(e,t,r,n,a){U(e,t,r,n);var i=V(e,t,r,n);var o={};var s={};for(var l=0;l<i.length;l++){var u=i[l].prop;var f=i[l].maxp;var c=a(i[l].target,i[l].insert,f);u.set(c[0]);if(!Array.isArray(o[u.astr]))o[u.astr]=[];o[u.astr].push(c[1]);if(!Array.isArray(s[u.astr]))s[u.astr]=[];s[u.astr].push(i[l].target.length)}return{update:o,maxPoints:s}}function q(e,t){var r=new e.constructor(e.length+t.length);r.set(e);r.set(t,e.length);return r}function G(e,r,n,a){e=o.getGraphDiv(e);function i(e,t,r){var n,a;if(o.isTypedArray(e)){if(r<0){var i=new e.constructor(0);var s=q(e,t);if(r<0){n=s;a=i}else{n=i;a=s}}else{n=new e.constructor(r);a=new e.constructor(e.length+t.length-r);if(r===t.length){n.set(t);a.set(e)}else if(r<t.length){var l=t.length-r;n.set(t.subarray(l));a.set(e);a.set(t.subarray(0,l),e.length)}else{var u=r-t.length;var f=e.length-u;n.set(e.subarray(f));n.set(t,u);a.set(e.subarray(0,f))}}}else{n=e.concat(t);a=r>=0&&r<n.length?n.splice(0,n.length-r):[]}return[n,a]}var s=H(e,r,n,a,i);var l=t.redraw(e);var f=[e,s.update,n,s.maxPoints];u.add(e,t.prependTraces,f,G,arguments);return l}function Z(e,r,n,a){e=o.getGraphDiv(e);function i(e,t,r){var n,a;if(o.isTypedArray(e)){if(r<=0){var i=new e.constructor(0);var s=q(t,e);if(r<0){n=s;a=i}else{n=i;a=s}}else{n=new e.constructor(r);a=new e.constructor(e.length+t.length-r);if(r===t.length){n.set(t);a.set(e)}else if(r<t.length){var l=t.length-r;n.set(t.subarray(0,l));a.set(t.subarray(l));a.set(e,l)}else{var u=r-t.length;n.set(t);n.set(e.subarray(0,u),t.length);a.set(e.subarray(u))}}}else{n=t.concat(e);a=r>=0&&r<n.length?n.splice(r,n.length):[]}return[n,a]}var s=H(e,r,n,a,i);var l=t.redraw(e);var f=[e,s.update,n,s.maxPoints];u.add(e,t.extendTraces,f,Z,arguments);return l}function Y(e,r,n){e=o.getGraphDiv(e);var a=[];var i=t.deleteTraces;var s=Y;var l=[e,a];var f=[e,r];var c;var v;j(e,r,n);if(!Array.isArray(r)){r=[r]}r=r.map((function(e){return o.extendFlat({},e)}));T.cleanData(r);for(c=0;c<r.length;c++){e.data.push(r[c])}for(c=0;c<r.length;c++){a.push(-r.length+c)}if(typeof n==="undefined"){v=t.redraw(e);u.add(e,i,l,s,f);return v}if(!Array.isArray(n)){n=[n]}try{N(e,a,n)}catch(h){e.data.splice(e.data.length-r.length,r.length);throw h}u.startSequence(e);u.add(e,i,l,s,f);v=t.moveTraces(e,a,n);u.stopSequence(e);return v}function W(e,r){e=o.getGraphDiv(e);var n=[];var a=t.addTraces;var i=W;var s=[e,n,r];var l=[e,r];var f;var c;if(typeof r==="undefined"){throw new Error("indices must be an integer or array of integers.")}else if(!Array.isArray(r)){r=[r]}B(e,r,"indices");r=F(r,e.data.length-1);r.sort(o.sorterDes);for(f=0;f<r.length;f+=1){c=e.data.splice(r[f],1)[0];n.push(c)}var v=t.redraw(e);u.add(e,a,s,i,l);return v}function X(e,r,n){e=o.getGraphDiv(e);var a=[];var i=[];var s=X;var l=X;var f=[e,n,r];var c=[e,r,n];var v;N(e,r,n);r=Array.isArray(r)?r:[r];if(typeof n==="undefined"){n=[];for(v=0;v<r.length;v++){n.push(-r.length+v)}}n=Array.isArray(n)?n:[n];r=F(r,e.data.length-1);n=F(n,e.data.length-1);for(v=0;v<e.data.length;v++){if(r.indexOf(v)===-1){a.push(e.data[v])}}for(v=0;v<r.length;v++){i.push({newIndex:n[v],trace:e.data[r[v]]})}i.sort((function(e,t){return e.newIndex-t.newIndex}));for(v=0;v<i.length;v+=1){a.splice(i[v].newIndex,0,i[v].trace)}e.data=a;var h=t.redraw(e);u.add(e,s,f,l,c);return h}function J(e,r,n,a){e=o.getGraphDiv(e);T.clearPromiseQueue(e);var i={};if(typeof r==="string")i[r]=n;else if(o.isPlainObject(r)){i=o.extendFlat({},r);if(a===undefined)a=n}else{o.warn("Restyle fail.",r,n,a);return Promise.reject()}if(Object.keys(i).length)e.changed=true;var s=T.coerceTraceIndices(e,a);var l=te(e,i,s);var f=l.flags;if(f.calc)e.calcdata=undefined;if(f.clearAxisTypes)T.clearAxisTypes(e,s,{});var c=[];if(f.fullReplot){c.push(t._doPlot)}else{c.push(v.previousPromises);v.supplyDefaults(e);if(f.markerSize){v.doCalcdata(e);ie(c)}if(f.style)c.push(k.doTraceStyle);if(f.colorbars)c.push(k.doColorBars);c.push(C)}c.push(v.rehover,v.redrag,v.reselect);u.add(e,J,[e,l.undoit,l.traces],J,[e,l.redoit,l.traces]);var h=o.syncOrAsync(c,e);if(!h||!h.then)h=Promise.resolve();return h.then((function(){e.emit("plotly_restyle",l.eventData);return e}))}function K(e){if(e===undefined)return null;return e}function $(e,t){if(!t)return s;return function(t,r,n){var a=s(t,r);var i=a.set;a.set=function(t){var o=(n||"")+r;Q(o,a.get(),t,e);i(t)};return a}}function Q(e,t,r,n){if(Array.isArray(t)||Array.isArray(r)){var a=Array.isArray(t)?t:[];var i=Array.isArray(r)?r:[];var s=Math.max(a.length,i.length);for(var l=0;l<s;l++){Q(e+"["+l+"]",a[l],i[l],n)}}else if(o.isPlainObject(t)||o.isPlainObject(r)){var u=o.isPlainObject(t)?t:{};var f=o.isPlainObject(r)?r:{};var c=o.extendFlat({},u,f);for(var v in c){Q(e+"."+v,u[v],f[v],n)}}else if(n[e]===undefined){n[e]=K(t)}}function ee(e,t,r){for(var n in r){var a=s(e,n);Q(n,a.get(),r[n],t)}}function te(e,t,r){var n=e._fullLayout;var a=e._fullData;var i=e.data;var l=n._guiEditing;var u=$(n._preGUI,l);var p=o.extendDeepAll({},t);var d;re(t);var g=A.traceFlags();var y={};var m={};var x;function b(){return r.map((function(){return undefined}))}function _(e){var t=h.id2name(e);if(x.indexOf(t)===-1)x.push(t)}function w(e){return"LAYOUT"+e+".autorange"}function k(e){return"LAYOUT"+e+".range"}function M(e){for(var t=e;t<a.length;t++){if(a[t]._input===i[e])return a[t]}}function S(a,o,s){if(Array.isArray(a)){a.forEach((function(e){S(e,o,s)}));return}if(a in t||T.hasParent(t,a))return;var f;if(a.substr(0,6)==="LAYOUT"){f=u(e.layout,a.replace("LAYOUT",""))}else{var c=r[s];var v=n._tracePreGUI[M(c)._fullInput.uid];f=$(v,l)(i[c],a)}if(!(a in m)){m[a]=b()}if(m[a][s]===undefined){m[a][s]=K(f.get())}if(o!==undefined){f.set(o)}}function E(e){return function(t){return a[t][e]}}function L(e){return function(t,n){return t===false?a[r[n]][e]:null}}for(var C in t){if(T.hasParent(t,C)){throw new Error("cannot set "+C+" and a parent attribute simultaneously")}var I=t[C];var P;var O;var D;var z;var R;var F;if(C==="autobinx"||C==="autobiny"){C=C.charAt(C.length-1)+"bins";if(Array.isArray(I))I=I.map(L(C));else if(I===false)I=r.map(E(C));else I=null}y[C]=I;if(C.substr(0,6)==="LAYOUT"){D=u(e.layout,C.replace("LAYOUT",""));m[C]=[K(D.get())];D.set(Array.isArray(I)?I[0]:I);g.calc=true;continue}m[C]=b();for(d=0;d<r.length;d++){P=i[r[d]];O=M(r[d]);var B=n._tracePreGUI[O._fullInput.uid];D=$(B,l)(P,C);z=D.get();R=Array.isArray(I)?I[d%I.length]:I;if(R===undefined)continue;var N=D.parts[D.parts.length-1];var j=C.substr(0,C.length-N.length-1);var U=j?j+".":"";var V=j?s(O,j).get():O;F=c.getTraceValObject(O,D.parts);if(F&&F.impliedEdits&&R!==null){for(var H in F.impliedEdits){S(o.relativeAttr(C,H),F.impliedEdits[H],d)}}else if((N==="thicknessmode"||N==="lenmode")&&z!==R&&(R==="fraction"||R==="pixels")&&V){var q=n._size;var G=V.orient;var Z=G==="top"||G==="bottom";if(N==="thicknessmode"){var Y=Z?q.h:q.w;S(U+"thickness",V.thickness*(R==="fraction"?1/Y:Y),d)}else{var W=Z?q.w:q.h;S(U+"len",V.len*(R==="fraction"?1/W:W),d)}}else if(C==="type"&&(R==="pie"!==(z==="pie")||R==="funnelarea"!==(z==="funnelarea"))){var X="x";var J="y";if((R==="bar"||z==="bar")&&P.orientation==="h"){X="y";J="x"}o.swapAttrs(P,["?","?src"],"labels",X);o.swapAttrs(P,["d?","?0"],"label",X);o.swapAttrs(P,["?","?src"],"values",J);if(z==="pie"||z==="funnelarea"){s(P,"marker.color").set(s(P,"marker.colors").get());n._pielayer.selectAll("g.trace").remove()}else if(f.traceIs(P,"cartesian")){s(P,"marker.colors").set(s(P,"marker.color").get())}}m[C][d]=K(z);var Q=["swapxy","swapxyaxes","orientation","orientationaxes"];if(Q.indexOf(C)!==-1){if(C==="orientation"){D.set(R);var ee=P.x&&!P.y?"h":"v";if((D.get()||ee)===O.orientation){continue}}else if(C==="orientationaxes"){P.orientation={v:"h",h:"v"}[O.orientation]}T.swapXYData(P);g.calc=g.clearAxisTypes=true}else if(v.dataArrayContainers.indexOf(D.parts[0])!==-1){T.manageArrayContainers(D,R,m);g.calc=true}else{if(F){if(F.arrayOk&&!f.traceIs(O,"regl")&&(o.isArrayOrTypedArray(R)||o.isArrayOrTypedArray(z))){g.calc=true}else A.update(g,F)}else{g.calc=true}D.set(R)}}if(["swapxyaxes","orientationaxes"].indexOf(C)!==-1){h.swap(e,r)}if(C==="orientationaxes"){var te=s(e.layout,"hovermode");var ne=te.get();if(ne==="x"){te.set("y")}else if(ne==="y"){te.set("x")}else if(ne==="x unified"){te.set("y unified")}else if(ne==="y unified"){te.set("x unified")}}if(["orientation","type"].indexOf(C)!==-1){x=[];for(d=0;d<r.length;d++){var ae=i[r[d]];if(f.traceIs(ae,"cartesian")){_(ae.xaxis||"x");_(ae.yaxis||"y")}}S(x.map(w),true,0);S(x.map(k),[0,1],0)}}if(g.calc||g.plot){g.fullReplot=true}return{flags:g,undoit:m,redoit:y,traces:r,eventData:o.extendDeepNoArrays([],[p,r])}}function re(e){var t=o.counterRegex("axis",".title",false,false);var r=/colorbar\.title$/;var n=Object.keys(e);var a,i,s;for(a=0;a<n.length;a++){i=n[a];s=e[i];if((i==="title"||t.test(i)||r.test(i))&&(typeof s==="string"||typeof s==="number")){l(i,i.replace("title","title.text"))}else if(i.indexOf("titlefont")>-1&&i.indexOf("grouptitlefont")===-1){l(i,i.replace("titlefont","title.font"))}else if(i.indexOf("titleposition")>-1){l(i,i.replace("titleposition","title.position"))}else if(i.indexOf("titleside")>-1){l(i,i.replace("titleside","title.side"))}else if(i.indexOf("titleoffset")>-1){l(i,i.replace("titleoffset","title.offset"))}}function l(t,r){e[r]=e[t];delete e[t]}}function ne(e,t,r){e=o.getGraphDiv(e);T.clearPromiseQueue(e);var n={};if(typeof t==="string"){n[t]=r}else if(o.isPlainObject(t)){n=o.extendFlat({},t)}else{o.warn("Relayout fail.",t,r);return Promise.reject()}if(Object.keys(n).length)e.changed=true;var a=ue(e,n);var i=a.flags;if(i.calc)e.calcdata=undefined;var s=[v.previousPromises];if(i.layoutReplot){s.push(k.layoutReplot)}else if(Object.keys(n).length){ae(e,i,a)||v.supplyDefaults(e);if(i.legend)s.push(k.doLegend);if(i.layoutstyle)s.push(k.layoutStyles);if(i.axrange)ie(s,a.rangesAltered);if(i.ticks)s.push(k.doTicksRelayout);if(i.modebar)s.push(k.doModeBar);if(i.camera)s.push(k.doCamera);if(i.colorbars)s.push(k.doColorBars);s.push(C)}s.push(v.rehover,v.redrag,v.reselect);u.add(e,ne,[e,a.undoit],ne,[e,a.redoit]);var l=o.syncOrAsync(s,e);if(!l||!l.then)l=Promise.resolve(e);return l.then((function(){e.emit("plotly_relayout",a.eventData);return e}))}function ae(e,t,r){var n=e._fullLayout;if(!t.axrange)return false;for(var a in t){if(a!=="axrange"&&t[a])return false}var i,s;var l=function(e,t){return o.coerce(i,s,d,e,t)};var u={};for(var f in r.rangesAltered){var c=h.id2name(f);i=e.layout[c];s=n[c];p(i,s,l,u);if(s._matchGroup){for(var v in s._matchGroup){if(v!==f){var g=n[h.id2name(v)];g.autorange=s.autorange;g.range=s.range.slice();g._input.range=s.range.slice()}}}}return true}function ie(e,t){var r=t?function(e){var r=[];var n=true;for(var a in t){var i=h.getFromId(e,a);r.push(a);if((i.ticklabelposition||"").indexOf("inside")!==-1){if(i._anchorAxis){r.push(i._anchorAxis._id)}}if(i._matchGroup){for(var o in i._matchGroup){if(!t[o]){r.push(o)}}}}return h.draw(e,r,{skipTitle:n})}:function(e){return h.draw(e,"redraw")};e.push(b,k.doAutoRangeAndConstraints,r,k.drawData,k.finalDraw)}var oe=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/;var se=/^[xyz]axis[0-9]*\.autorange$/;var le=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ue(e,t){var r=e.layout;var n=e._fullLayout;var a=n._guiEditing;var i=$(n._preGUI,a);var l=Object.keys(t);var u=h.list(e);var v=o.extendDeepAll({},t);var p={};var d,g,y;re(t);l=Object.keys(t);for(g=0;g<l.length;g++){if(l[g].indexOf("allaxes")===0){for(y=0;y<u.length;y++){var m=u[y]._id.substr(1);var x=m.indexOf("scene")!==-1?m+".":"";var b=l[g].replace("allaxes",x+u[y]._name);if(!t[b])t[b]=t[l[g]]}delete t[l[g]]}}var _=A.layoutFlags();var k={};var S={};function E(e,n){if(Array.isArray(e)){e.forEach((function(e){E(e,n)}));return}if(e in t||T.hasParent(t,e))return;var a=i(r,e);if(!(e in S)){S[e]=K(a.get())}if(n!==undefined)a.set(n)}var L={};var C;function I(e){var t=h.name2id(e.split(".")[0]);L[t]=1;return t}for(var P in t){if(T.hasParent(t,P)){throw new Error("cannot set "+P+" and a parent attribute simultaneously")}var O=i(r,P);var D=t[P];var z=O.parts.length;var R=z-1;while(R>0&&typeof O.parts[R]!=="string")R--;var F=O.parts[R];var B=O.parts[R-1]+"."+F;var N=O.parts.slice(0,R).join(".");var j=s(e.layout,N).get();var U=s(n,N).get();var V=O.get();if(D===undefined)continue;k[P]=D;S[P]=F==="reverse"?D:K(V);var H=c.getLayoutValObject(n,O.parts);if(H&&H.impliedEdits&&D!==null){for(var q in H.impliedEdits){E(o.relativeAttr(P,q),H.impliedEdits[q])}}if(["width","height"].indexOf(P)!==-1){if(D){E("autosize",null);var G=P==="height"?"width":"height";E(G,n[G])}else{n[P]=e._initialAutoSize[P]}}else if(P==="autosize"){E("width",D?null:n.width);E("height",D?null:n.height)}else if(B.match(oe)){I(B);s(n,N+"._inputRange").set(null)}else if(B.match(se)){I(B);s(n,N+"._inputRange").set(null);var Z=s(n,N).get();if(Z._inputDomain){Z._input.domain=Z._inputDomain.slice()}}else if(B.match(le)){s(n,N+"._inputDomain").set(null)}if(F==="type"){C=j;var Y=U.type==="linear"&&D==="log";var W=U.type==="log"&&D==="linear";if(Y||W){if(!C||!C.range){E(N+".autorange",true)}else if(!U.autorange){var X=C.range[0];var J=C.range[1];if(Y){if(X<=0&&J<=0){E(N+".autorange",true)}if(X<=0)X=J/1e6;else if(J<=0)J=X/1e6;E(N+".range[0]",Math.log(X)/Math.LN10);E(N+".range[1]",Math.log(J)/Math.LN10)}else{E(N+".range[0]",Math.pow(10,X));E(N+".range[1]",Math.pow(10,J))}}else if(Y){C.range=C.range[1]>C.range[0]?[1,2]:[2,1]}if(Array.isArray(n._subplots.polar)&&n._subplots.polar.length&&n[O.parts[0]]&&O.parts[1]==="radialaxis"){delete n[O.parts[0]]._subplot.viewInitial["radialaxis.range"]}f.getComponentMethod("annotations","convertCoords")(e,U,D,E);f.getComponentMethod("images","convertCoords")(e,U,D,E)}else{E(N+".autorange",true);E(N+".range",null)}s(n,N+"._inputRange").set(null)}else if(F.match(M)){var Q=s(n,P).get();var ee=(D||{}).type;if(!ee||ee==="-")ee="linear";f.getComponentMethod("annotations","convertCoords")(e,Q,ee,E);f.getComponentMethod("images","convertCoords")(e,Q,ee,E)}var te=w.containerArrayMatch(P);if(te){d=te.array;g=te.index;var ne=te.property;var ae=H||{editType:"calc"};if(g!==""&&ne===""){if(w.isAddVal(D)){S[P]=null}else if(w.isRemoveVal(D)){S[P]=(s(r,d).get()||[])[g]}else{o.warn("unrecognized full object value",t)}}A.update(_,ae);if(!p[d])p[d]={};var ie=p[d][g];if(!ie)ie=p[d][g]={};ie[ne]=D;delete t[P]}else if(F==="reverse"){if(j.range)j.range.reverse();else{E(N+".autorange",true);j.range=[1,0]}if(U.autorange)_.calc=true;else _.plot=true}else{if(P==="dragmode"&&(D===false&&V!==false||D!==false&&V===false)){_.plot=true}else if(n._has("scatter-like")&&n._has("regl")&&P==="dragmode"&&(D==="lasso"||D==="select")&&!(V==="lasso"||V==="select")){_.plot=true}else if(n._has("gl2d")){_.plot=true}else if(H)A.update(_,H);else _.calc=true;O.set(D)}}for(d in p){var ue=w.applyContainerArrayChanges(e,i(r,d),p[d],_,i);if(!ue)_.plot=true}for(var ce in L){C=h.getFromId(e,ce);var ve=C&&C._constraintGroup;if(ve){_.calc=true;for(var he in ve){if(!L[he]){h.getFromId(e,he)._constraintShrinkable=true}}}}if(fe(e)||t.height||t.width)_.plot=true;var pe=n.shapes;for(g=0;g<pe.length;g++){if(pe[g].showlegend){_.calc=true;break}}if(_.plot||_.calc){_.layoutReplot=true}return{flags:_,rangesAltered:L,undoit:S,redoit:k,eventData:v}}function fe(e){var t=e._fullLayout;var r=t.width;var n=t.height;if(e.layout.autosize)v.plotAutoSize(e,e.layout,t);return t.width!==r||t.height!==n}function ce(e,r,n,a){e=o.getGraphDiv(e);T.clearPromiseQueue(e);if(!o.isPlainObject(r))r={};if(!o.isPlainObject(n))n={};if(Object.keys(r).length)e.changed=true;if(Object.keys(n).length)e.changed=true;var i=T.coerceTraceIndices(e,a);var s=te(e,o.extendFlat({},r),i);var l=s.flags;var f=ue(e,o.extendFlat({},n));var c=f.flags;if(l.calc||c.calc)e.calcdata=undefined;if(l.clearAxisTypes)T.clearAxisTypes(e,i,n);var h=[];if(c.layoutReplot){h.push(k.layoutReplot)}else if(l.fullReplot){h.push(t._doPlot)}else{h.push(v.previousPromises);ae(e,c,f)||v.supplyDefaults(e);if(l.style)h.push(k.doTraceStyle);if(l.colorbars||c.colorbars)h.push(k.doColorBars);if(c.legend)h.push(k.doLegend);if(c.layoutstyle)h.push(k.layoutStyles);if(c.axrange)ie(h,f.rangesAltered);if(c.ticks)h.push(k.doTicksRelayout);if(c.modebar)h.push(k.doModeBar);if(c.camera)h.push(k.doCamera);h.push(C)}h.push(v.rehover,v.redrag,v.reselect);u.add(e,ce,[e,s.undoit,f.undoit,s.traces],ce,[e,s.redoit,f.redoit,s.traces]);var p=o.syncOrAsync(h,e);if(!p||!p.then)p=Promise.resolve(e);return p.then((function(){e.emit("plotly_update",{data:s.eventData,layout:f.eventData});return e}))}function ve(e){return function t(r){r._fullLayout._guiEditing=true;var n=e.apply(null,arguments);r._fullLayout._guiEditing=false;return n}}var he=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}];var pe=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function de(e,t){for(var r=0;r<t.length;r++){var n=t[r];var a=e.match(n.pattern);if(a){var i=a[1]||"";return{head:i,tail:e.substr(i.length+1),attr:n.attr}}}}function ge(e,t){var r=s(t,e).get();if(r!==undefined)return r;var n=e.split(".");n.pop();while(n.length>1){n.pop();r=s(t,n.join(".")+".uirevision").get();if(r!==undefined)return r}return t.uirevision}function ye(e,t){for(var r=0;r<t.length;r++){if(t[r]._fullInput.uid===e)return r}return-1}function me(e,t,r){for(var n=0;n<t.length;n++){if(t[n].uid===e)return n}return!t[r]||t[r].uid?-1:r}function xe(e,t){var r=o.isPlainObject(e);var n=Array.isArray(e);if(r||n){return(r&&o.isPlainObject(t)||n&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t)}return e===t}function be(e,t,r,n){var a=n._preGUI;var i,l,u,f,c,v,h,p,d,g;var y=[];var m={};var x={};for(i in a){c=de(i,he);if(c){d=c.head;g=c.tail;l=c.attr||d+".uirevision";u=s(n,l).get();f=u&&ge(l,t);if(f&&f===u){v=a[i];if(v===null)v=undefined;h=s(t,i);p=h.get();if(xe(p,v)){if(p===undefined&&g==="autorange"){y.push(d)}h.set(K(s(n,i).get()));continue}else if(g==="autorange"||g.substr(0,6)==="range["){var b=a[d+".range[0]"];var _=a[d+".range[1]"];var w=a[d+".autorange"];if(w||w===null&&b===null&&_===null){if(!(d in m)){var T=s(t,d).get();m[d]=T&&(T.autorange||T.autorange!==false&&(!T.range||T.range.length!==2))}if(m[d]){h.set(K(s(n,i).get()));continue}}}}}else{o.warn("unrecognized GUI edit: "+i)}delete a[i];if(c&&c.tail.substr(0,6)==="range["){x[c.head]=1}}for(var k=0;k<y.length;k++){var A=y[k];if(x[A]){var M=s(t,A).get();if(M)delete M.autorange}}var S=n._tracePreGUI;for(var E in S){var L=S[E];var C=null;var I;for(i in L){if(!C){var P=ye(E,r);if(P<0){delete S[E];break}var O=r[P];I=O._fullInput;var D=me(E,e,I.index);if(D<0){delete S[E];break}C=e[D]}c=de(i,pe);if(c){if(c.attr){u=s(n,c.attr).get();f=u&&ge(c.attr,t)}else{u=I.uirevision;f=C.uirevision;if(f===undefined)f=t.uirevision}if(f&&f===u){v=L[i];if(v===null)v=undefined;h=s(C,i);p=h.get();if(xe(p,v)){h.set(K(s(I,i).get()));continue}}}else{o.warn("unrecognized GUI edit: "+i+" in trace uid "+E)}delete L[i]}}}function _e(e,r,n,a){var i,s;function l(){return t.addFrames(e,i)}e=o.getGraphDiv(e);T.clearPromiseQueue(e);var u=e._fullData;var c=e._fullLayout;if(!o.isPlotDiv(e)||!u||!c){s=t.newPlot(e,r,n,a)}else{if(o.isPlainObject(r)){var h=r;r=h.data;n=h.layout;a=h.config;i=h.frames}var p=false;if(a){var d=o.extendDeep({},e._context);e._context=undefined;D(e,a);p=Ae(d,e._context)}e.data=r||[];T.cleanData(e.data);e.layout=n||{};T.cleanLayout(e.layout);be(e.data,e.layout,u,c);v.supplyDefaults(e,{skipUpdateCalc:true});var g=e._fullData;var y=e._fullLayout;var m=y.datarevision===undefined;var x=y.transition;var b=Te(e,c,y,m,x);var _=b.newDataRevision;var w=we(e,u,g,m,x,_);if(fe(e))b.layoutReplot=true;if(w.calc||b.calc){e.calcdata=undefined;var A=Object.getOwnPropertyNames(y);for(var M=0;M<A.length;M++){var S=A[M];var E=S.substring(0,5);if(E==="xaxis"||E==="yaxis"){var L=y[S]._emptyCategories;if(L)L()}}}else{v.supplyDefaultsUpdateCalc(e.calcdata,g)}var I=[];if(i){e._transitionData={};v.createTransitionData(e);I.push(l)}if(y.transition&&!p&&(w.anim||b.anim)){if(b.ticks)I.push(k.doTicksRelayout);v.doCalcdata(e);k.doAutoRangeAndConstraints(e);I.push((function(){return v.transitionFromReact(e,w,b,c)}))}else if(w.fullReplot||b.layoutReplot||p){e._fullLayout._skipDefaults=true;I.push(t._doPlot)}else{for(var P in b.arrays){var O=b.arrays[P];if(O.length){var z=f.getComponentMethod(P,"drawOne");if(z!==o.noop){for(var R=0;R<O.length;R++){z(e,O[R])}}else{var F=f.getComponentMethod(P,"draw");if(F===o.noop){throw new Error("cannot draw components: "+P)}F(e)}}}I.push(v.previousPromises);if(w.style)I.push(k.doTraceStyle);if(w.colorbars||b.colorbars)I.push(k.doColorBars);if(b.legend)I.push(k.doLegend);if(b.layoutstyle)I.push(k.layoutStyles);if(b.axrange)ie(I);if(b.ticks)I.push(k.doTicksRelayout);if(b.modebar)I.push(k.doModeBar);if(b.camera)I.push(k.doCamera);I.push(C)}I.push(v.rehover,v.redrag,v.reselect);s=o.syncOrAsync(I,e);if(!s||!s.then)s=Promise.resolve(e)}return s.then((function(){e.emit("plotly_react",{data:r,layout:n});return e}))}function we(e,t,r,n,a,i){var o=t.length===r.length;if(!a&&!o){return{fullReplot:true,calc:true}}var s=A.traceFlags();s.arrays={};s.nChanges=0;s.nChangesAnim=0;var l,u;function f(e){var t=c.getTraceValObject(u,e);if(!u._module.animatable&&t.anim){t.anim=false}return t}var h={getValObject:f,flags:s,immutable:n,transition:a,newDataRevision:i,gd:e};var p={};for(l=0;l<t.length;l++){if(r[l]){u=r[l]._fullInput;if(v.hasMakesDataTransform(u))u=r[l];if(p[u.uid])continue;p[u.uid]=1;ke(t[l]._fullInput,u,[],h)}}if(s.calc||s.plot){s.fullReplot=true}if(a&&s.nChanges&&s.nChangesAnim){s.anim=s.nChanges===s.nChangesAnim&&o?"all":"some"}return s}function Te(e,t,r,n,a){var i=A.layoutFlags();i.arrays={};i.rangesAltered={};i.nChanges=0;i.nChangesAnim=0;function o(e){return c.getLayoutValObject(r,e)}var s={getValObject:o,flags:i,immutable:n,transition:a,gd:e};ke(t,r,[],s);if(i.plot||i.calc){i.layoutReplot=true}if(a&&i.nChanges&&i.nChangesAnim){i.anim=i.nChanges===i.nChangesAnim?"all":"some"}return i}function ke(e,t,r,n){var a,i,l;var u=n.getValObject;var f=n.flags;var c=n.immutable;var v=n.inArray;var h=n.arrayIndex;function p(){var e=a.editType;if(v&&e.indexOf("arraydraw")!==-1){o.pushUnique(f.arrays[v],h);return}A.update(f,a);if(e!=="none"){f.nChanges++}if(n.transition&&a.anim){f.nChangesAnim++}if(oe.test(l)||se.test(l)){f.rangesAltered[r[0]]=1}if(le.test(l)){s(t,"_inputDomain").set(null)}if(i==="datarevision"){f.newDataRevision=1}}function d(e){return e.valType==="data_array"||e.arrayOk}for(i in e){if(f.calc&&!n.transition)return;var g=e[i];var y=t[i];var m=r.concat(i);l=m.join(".");if(i.charAt(0)==="_"||typeof g==="function"||g===y)continue;if((i==="tick0"||i==="dtick")&&r[0]!=="geo"){var x=t.tickmode;if(x==="auto"||x==="array"||!x)continue}if(i==="range"&&t.autorange)continue;if((i==="zmin"||i==="zmax")&&t.type==="contourcarpet")continue;a=u(m);if(!a)continue;if(a._compareAsJSON&&JSON.stringify(g)===JSON.stringify(y))continue;var b=a.valType;var _;var w=d(a);var T=Array.isArray(g);var k=Array.isArray(y);if(T&&k){var M="_input_"+i;var S=e[M];var E=t[M];if(Array.isArray(S)&&S===E)continue}if(y===undefined){if(w&&T)f.calc=true;else p()}else if(a._isLinkedToArray){var L=[];var C=false;if(!v)f.arrays[i]=L;var I=Math.min(g.length,y.length);var P=Math.max(g.length,y.length);if(I!==P){if(a.editType==="arraydraw"){C=true}else{p();continue}}for(_=0;_<I;_++){ke(g[_],y[_],m.concat(_),o.extendFlat({inArray:i,arrayIndex:_},n))}if(C){for(_=I;_<P;_++){L.push(_)}}}else if(!b&&o.isPlainObject(g)){ke(g,y,m,n)}else if(w){if(T&&k){if(c){f.calc=true}if(c||n.newDataRevision){p()}}else if(T!==k){f.calc=true}else p()}else if(T&&k){if(g.length!==y.length||String(g)!==String(y)){p()}}else{p()}}for(i in t){if(!(i in e||i.charAt(0)==="_"||typeof t[i]==="function")){a=u(r.concat(i));if(d(a)&&Array.isArray(t[i])){f.calc=true;return}else p()}}}function Ae(e,t){var r;for(r in e){if(r.charAt(0)==="_")continue;var n=e[r];var a=t[r];if(n!==a){if(o.isPlainObject(n)&&o.isPlainObject(a)){if(Ae(n,a)){return true}}else if(Array.isArray(n)&&Array.isArray(a)){if(n.length!==a.length){return true}for(var i=0;i<n.length;i++){if(n[i]!==a[i]){if(o.isPlainObject(n[i])&&o.isPlainObject(a[i])){if(Ae(n[i],a[i])){return true}}else{return true}}}}else{return true}}}}function Me(e,t,r){e=o.getGraphDiv(e);if(!o.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed "+"to create a plot before animating it. For more details, see "+"https://plotly.com/javascript/animations/")}var n=e._transitionData;if(!n._frameQueue){n._frameQueue=[]}r=v.supplyAnimationDefaults(r);var a=r.transition;var i=r.frame;if(n._frameWaitingCnt===undefined){n._frameWaitingCnt=0}function s(e){if(Array.isArray(a)){if(e>=a.length){return a[0]}else{return a[e]}}else{return a}}function l(e){if(Array.isArray(i)){if(e>=i.length){return i[0]}else{return i[e]}}else{return i}}function u(e,t){var r=0;return function(){if(e&&++r===t){return e()}}}return new Promise((function(i,f){function c(){if(n._frameQueue.length===0){return}while(n._frameQueue.length){var t=n._frameQueue.pop();if(t.onInterrupt){t.onInterrupt()}}e.emit("plotly_animationinterrupted",[])}function h(t){if(t.length===0)return;for(var a=0;a<t.length;a++){var o;if(t[a].type==="byname"){o=v.computeFrame(e,t[a].name)}else{o=t[a].data}var c=l(a);var h=s(a);h.duration=Math.min(h.duration,c.duration);var p={frame:o,name:t[a].name,frameOpts:c,transitionOpts:h};if(a===t.length-1){p.onComplete=u(i,2);p.onInterrupt=f}n._frameQueue.push(p)}if(r.mode==="immediate"){n._lastFrameAt=-Infinity}if(!n._animationRaf){g()}}function p(){e.emit("plotly_animated");window.cancelAnimationFrame(n._animationRaf);n._animationRaf=null}function d(){if(n._currentFrame&&n._currentFrame.onComplete){n._currentFrame.onComplete()}var t=n._currentFrame=n._frameQueue.shift();if(t){var r=t.name?t.name.toString():null;e._fullLayout._currentFrame=r;n._lastFrameAt=Date.now();n._timeToNext=t.frameOpts.duration;v.transition(e,t.frame.data,t.frame.layout,T.coerceTraceIndices(e,t.frame.traces),t.frameOpts,t.transitionOpts).then((function(){if(t.onComplete){t.onComplete()}}));e.emit("plotly_animatingframe",{name:r,frame:t.frame,animation:{frame:t.frameOpts,transition:t.transitionOpts}})}else{p()}}function g(){e.emit("plotly_animating");n._lastFrameAt=-Infinity;n._timeToNext=0;n._runningTransitions=0;n._currentFrame=null;var t=function(){n._animationRaf=window.requestAnimationFrame(t);if(Date.now()-n._lastFrameAt>n._timeToNext){d()}};t()}var y=0;function m(e){if(Array.isArray(a)){if(y>=a.length){e.transitionOpts=a[y]}else{e.transitionOpts=a[0]}}else{e.transitionOpts=a}y++;return e}var x,b;var _=[];var w=t===undefined||t===null;var k=Array.isArray(t);var A=!w&&!k&&o.isPlainObject(t);if(A){_.push({type:"object",data:m(o.extendFlat({},t))})}else if(w||["string","number"].indexOf(typeof t)!==-1){for(x=0;x<n._frames.length;x++){b=n._frames[x];if(!b)continue;if(w||String(b.group)===String(t)){_.push({type:"byname",name:String(b.name),data:m({name:b.name})})}}}else if(k){for(x=0;x<t.length;x++){var M=t[x];if(["number","string"].indexOf(typeof M)!==-1){M=String(M);_.push({type:"byname",name:M,data:m({name:M})})}else if(o.isPlainObject(M)){_.push({type:"object",data:m(o.extendFlat({},M))})}}}for(x=0;x<_.length;x++){b=_[x];if(b.type==="byname"&&!n._frameHash[b.data.name]){o.warn('animate failure: frame not found: "'+b.data.name+'"');f();return}}if(["next","immediate"].indexOf(r.mode)!==-1){c()}if(r.direction==="reverse"){_.reverse()}var S=e._fullLayout._currentFrame;if(S&&r.fromcurrent){var E=-1;for(x=0;x<_.length;x++){b=_[x];if(b.type==="byname"&&b.name===S){E=x;break}}if(E>0&&E<_.length-1){var L=[];for(x=0;x<_.length;x++){b=_[x];if(_[x].type!=="byname"||x>E){L.push(b)}}_=L}}if(_.length>0){h(_)}else{e.emit("plotly_animated");i()}}))}function Se(e,t,r){e=o.getGraphDiv(e);if(t===null||t===undefined){return Promise.resolve()}if(!o.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed "+"to create a plot before adding frames. For more details, see "+"https://plotly.com/javascript/animations/")}var n,a,i,s;var l=e._transitionData._frames;var f=e._transitionData._frameHash;if(!Array.isArray(t)){throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t)}var c=l.length+t.length*2;var h=[];var p={};for(n=t.length-1;n>=0;n--){if(!o.isPlainObject(t[n]))continue;var d=t[n].name;var g=(f[d]||p[d]||{}).name;var y=t[n].name;var m=f[g]||p[g];if(g&&y&&typeof y==="number"&&m&&S<E){S++;o.warn('addFrames: overwriting frame "'+(f[g]||p[g]).name+'" with a frame whose name of type "number" also equates to "'+g+'". This is valid but may potentially lead to unexpected '+"behavior since all plotly.js frame names are stored internally "+"as strings.");if(S===E){o.warn("addFrames: This API call has yielded too many of these warnings. "+"For the rest of this call, further warnings about numeric frame "+"names will be suppressed.")}}p[d]={name:d};h.push({frame:v.supplyFrameDefaults(t[n]),index:r&&r[n]!==undefined&&r[n]!==null?r[n]:c+n})}h.sort((function(e,t){if(e.index>t.index)return-1;if(e.index<t.index)return 1;return 0}));var x=[];var b=[];var _=l.length;for(n=h.length-1;n>=0;n--){a=h[n].frame;if(typeof a.name==="number"){o.warn("Warning: addFrames accepts frames with numeric names, but the numbers are"+"implicitly cast to strings")}if(!a.name){while(f[a.name="frame "+e._transitionData._counter++]);}if(f[a.name]){for(i=0;i<l.length;i++){if((l[i]||{}).name===a.name)break}x.push({type:"replace",index:i,value:a});b.unshift({type:"replace",index:i,value:l[i]})}else{s=Math.max(0,Math.min(h[n].index,_));x.push({type:"insert",index:s,value:a});b.unshift({type:"delete",index:s});_++}}var w=v.modifyFrames;var T=v.modifyFrames;var k=[e,b];var A=[e,x];if(u)u.add(e,w,k,T,A);return v.modifyFrames(e,x)}function Ee(e,t){e=o.getGraphDiv(e);if(!o.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e)}var r,n;var a=e._transitionData._frames;var i=[];var s=[];if(!t){t=[];for(r=0;r<a.length;r++){t.push(r)}}t=t.slice();t.sort();for(r=t.length-1;r>=0;r--){n=t[r];i.push({type:"delete",index:n});s.unshift({type:"insert",index:n,value:a[n]})}var l=v.modifyFrames;var f=v.modifyFrames;var c=[e,s];var h=[e,i];if(u)u.add(e,l,c,f,h);return v.modifyFrames(e,i)}function Le(e){e=o.getGraphDiv(e);var t=e._fullLayout||{};var r=e._fullData||[];v.cleanPlot([],{},r,t);v.purge(e);l.purge(e);if(t._container)t._container.remove();delete e._context;return e}function Ce(e){var t=e._fullLayout;var r=e.getBoundingClientRect();if(o.equalDomRects(r,t._lastBBox))return;var n=t._invTransform=o.inverseTransformMatrix(o.getFullTransformMatrix(e));t._invScaleX=Math.sqrt(n[0][0]*n[0][0]+n[0][1]*n[0][1]+n[0][2]*n[0][2]);t._invScaleY=Math.sqrt(n[1][0]*n[1][0]+n[1][1]*n[1][1]+n[1][2]*n[1][2]);t._lastBBox=r}function Ie(e){var t=n.select(e);var r=e._fullLayout;r._calcInverseTransform=Ce;r._calcInverseTransform(e);r._container=t.selectAll(".plot-container").data([0]);r._container.enter().insert("div",":first-child").classed("plot-container",true).classed("plotly",true);r._paperdiv=r._container.selectAll(".svg-container").data([0]);r._paperdiv.enter().append("div").classed("user-select-none",true).classed("svg-container",true).style("position","relative");r._glcontainer=r._paperdiv.selectAll(".gl-container").data([{}]);r._glcontainer.enter().append("div").classed("gl-container",true);r._paperdiv.selectAll(".main-svg").remove();r._paperdiv.select(".modebar-container").remove();r._paper=r._paperdiv.insert("svg",":first-child").classed("main-svg",true);r._toppaper=r._paperdiv.append("svg").classed("main-svg",true);r._modebardiv=r._paperdiv.append("div");delete r._modeBar;r._hoverpaper=r._paperdiv.append("svg").classed("main-svg",true);if(!r._uid){var a={};n.selectAll("defs").each((function(){if(this.id)a[this.id.split("-")[1]]=1}));r._uid=o.randstr(a)}r._paperdiv.selectAll(".main-svg").attr(x.svgAttrs);r._defs=r._paper.append("defs").attr("id","defs-"+r._uid);r._clips=r._defs.append("g").classed("clips",true);r._topdefs=r._toppaper.append("defs").attr("id","topdefs-"+r._uid);r._topclips=r._topdefs.append("g").classed("clips",true);r._bgLayer=r._paper.append("g").classed("bglayer",true);r._draggers=r._paper.append("g").classed("draglayer",true);var i=r._paper.append("g").classed("layer-below",true);r._imageLowerLayer=i.append("g").classed("imagelayer",true);r._shapeLowerLayer=i.append("g").classed("shapelayer",true);r._cartesianlayer=r._paper.append("g").classed("cartesianlayer",true);r._polarlayer=r._paper.append("g").classed("polarlayer",true);r._smithlayer=r._paper.append("g").classed("smithlayer",true);r._ternarylayer=r._paper.append("g").classed("ternarylayer",true);r._geolayer=r._paper.append("g").classed("geolayer",true);r._funnelarealayer=r._paper.append("g").classed("funnelarealayer",true);r._pielayer=r._paper.append("g").classed("pielayer",true);r._iciclelayer=r._paper.append("g").classed("iciclelayer",true);r._treemaplayer=r._paper.append("g").classed("treemaplayer",true);r._sunburstlayer=r._paper.append("g").classed("sunburstlayer",true);r._indicatorlayer=r._toppaper.append("g").classed("indicatorlayer",true);r._glimages=r._paper.append("g").classed("glimages",true);var s=r._toppaper.append("g").classed("layer-above",true);r._imageUpperLayer=s.append("g").classed("imagelayer",true);r._shapeUpperLayer=s.append("g").classed("shapelayer",true);r._selectionLayer=r._toppaper.append("g").classed("selectionlayer",true);r._infolayer=r._toppaper.append("g").classed("infolayer",true);r._menulayer=r._toppaper.append("g").classed("menulayer",true);r._zoomlayer=r._toppaper.append("g").classed("zoomlayer",true);r._hoverlayer=r._hoverpaper.append("g").classed("hoverlayer",true);r._modebardiv.classed("modebar-container",true).style("position","absolute").style("top","0px").style("right","0px");e.emit("plotly_framework")}t.animate=Me;t.addFrames=Se;t.deleteFrames=Ee;t.addTraces=Y;t.deleteTraces=W;t.extendTraces=G;t.moveTraces=X;t.prependTraces=Z;t.newPlot=R;t._doPlot=L;t.purge=Le;t.react=_e;t.redraw=z;t.relayout=ne;t.restyle=J;t.setPlotConfig=I;t.update=ce;t._guiRelayout=ve(ne);t._guiRestyle=ve(J);t._guiUpdate=ve(ce);t._storeDirectGUIEdit=ee},72075:function(e){"use strict";var t={staticPlot:{valType:"boolean",dflt:false},typesetMath:{valType:"boolean",dflt:true},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:false},edits:{annotationPosition:{valType:"boolean",dflt:false},annotationTail:{valType:"boolean",dflt:false},annotationText:{valType:"boolean",dflt:false},axisTitleText:{valType:"boolean",dflt:false},colorbarPosition:{valType:"boolean",dflt:false},colorbarTitleText:{valType:"boolean",dflt:false},legendPosition:{valType:"boolean",dflt:false},legendText:{valType:"boolean",dflt:false},shapePosition:{valType:"boolean",dflt:false},titleText:{valType:"boolean",dflt:false}},editSelection:{valType:"boolean",dflt:true},autosizable:{valType:"boolean",dflt:false},responsive:{valType:"boolean",dflt:false},fillFrame:{valType:"boolean",dflt:false},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[true,false],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[false,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:true},showAxisRangeEntryBoxes:{valType:"boolean",dflt:true},showTips:{valType:"boolean",dflt:true},showLink:{valType:"boolean",dflt:false},linkText:{valType:"string",dflt:"Edit chart",noBlank:true},sendData:{valType:"boolean",dflt:true},showSources:{valType:"any",dflt:false},displayModeBar:{valType:"enumerated",values:["hover",true,false],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:false},showEditInChartStudio:{valType:"boolean",dflt:false},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:false},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:true},watermark:{valType:"boolean",dflt:false},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:true,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}};var r={};function n(e,t){for(var r in e){var a=e[r];if(a.valType){t[r]=a.dflt}else{if(!t[r]){t[r]={}}n(a,t[r])}}}n(t,r);e.exports={configAttributes:t,dfltConfig:r}},86281:function(e,t,r){"use strict";var n=r(73972);var a=r(71828);var i=r(9012);var o=r(10820);var s=r(31391);var l=r(85594);var u=r(72075).configAttributes;var f=r(30962);var c=a.extendDeepAll;var v=a.isPlainObject;var h=a.isArrayOrTypedArray;var p=a.nestedProperty;var d=a.valObjectMeta;var g="_isSubplotObj";var y="_isLinkedToArray";var m="_arrayAttrRegexps";var x="_deprecated";var b=[g,y,m,x];t.IS_SUBPLOT_OBJ=g;t.IS_LINKED_TO_ARRAY=y;t.DEPRECATED=x;t.UNDERSCORE_ATTRS=b;t.get=function(){var e={};n.allTypes.forEach((function(t){e[t]=k(t)}));var t={};Object.keys(n.transformsRegistry).forEach((function(e){t[e]=M(e)}));return{defs:{valObjects:d,metaKeys:b.concat(["description","role","editType","impliedEdits"]),editType:{traces:f.traces,layout:f.layout},impliedEdits:{}},traces:e,layout:A(),transforms:t,frames:S(),animation:E(l),config:E(u)}};t.crawl=function(e,r,n,a){var i=n||0;a=a||"";Object.keys(e).forEach((function(n){var o=e[n];if(b.indexOf(n)!==-1)return;var s=(a?a+".":"")+n;r(o,n,e,i,s);if(t.isValObject(o))return;if(v(o)&&n!=="impliedEdits"){t.crawl(o,r,i+1,s)}}))};t.isValObject=function(e){return e&&e.valType!==undefined};t.findArrayAttributes=function(e){var r=[];var n=[];var a=[];var o,s;function l(e,t,r,i){n=n.slice(0,i).concat([t]);a=a.slice(0,i).concat([e&&e._isLinkedToArray]);var s=e&&(e.valType==="data_array"||e.arrayOk===true)&&!(n[i-1]==="colorbar"&&(t==="ticktext"||t==="tickvals"));if(!s)return;u(o,0,"")}function u(e,t,i){var o=e[n[t]];var l=i+n[t];if(t===n.length-1){if(h(o)){r.push(s+l)}}else{if(a[t]){if(Array.isArray(o)){for(var f=0;f<o.length;f++){if(v(o[f])){u(o[f],t+1,l+"["+f+"].")}}}}else if(v(o)){u(o,t+1,l+".")}}}o=e;s="";t.crawl(i,l);if(e._module&&e._module.attributes){t.crawl(e._module.attributes,l)}var f=e.transforms;if(f){for(var c=0;c<f.length;c++){var p=f[c];var d=p._module;if(d){s="transforms["+c+"].";o=p;t.crawl(d.attributes,l)}}}return r};t.getTraceValObject=function(e,t){var r=t[0];var a=1;var o,s;if(r==="transforms"){if(t.length===1){return i.transforms}var l=e.transforms;if(!Array.isArray(l)||!l.length)return false;var u=t[1];if(!T(u)||u>=l.length){return false}o=(n.transformsRegistry[l[u].type]||{}).attributes;s=o&&o[t[2]];a=3}else{var f=e._module;if(!f)f=(n.modules[e.type||i.type.dflt]||{})._module;if(!f)return false;o=f.attributes;s=o&&o[r];if(!s){var c=f.basePlotModule;if(c&&c.attributes){s=c.attributes[r]}}if(!s)s=i[r]}return w(s,t,a)};t.getLayoutValObject=function(e,t){var r=_(e,t[0]);return w(r,t,1)};function _(e,t){var r,a,i,s;var l=e._basePlotModules;if(l){var u;for(r=0;r<l.length;r++){i=l[r];if(i.attrRegex&&i.attrRegex.test(t)){if(i.layoutAttrOverrides)return i.layoutAttrOverrides;if(!u&&i.layoutAttributes)u=i.layoutAttributes}var f=i.baseLayoutAttrOverrides;if(f&&t in f)return f[t]}if(u)return u}var c=e._modules;if(c){for(r=0;r<c.length;r++){s=c[r].layoutAttributes;if(s&&t in s){return s[t]}}}for(a in n.componentsRegistry){i=n.componentsRegistry[a];if(i.name==="colorscale"&&t.indexOf("coloraxis")===0){return i.layoutAttributes[t]}else if(!i.schema&&t===i.name){return i.layoutAttributes}}if(t in o)return o[t];return false}function w(e,t,r){if(!e)return false;if(e._isLinkedToArray){if(T(t[r]))r++;else if(r<t.length)return false}for(;r<t.length;r++){var n=e[t[r]];if(v(n))e=n;else break;if(r===t.length-1)break;if(e._isLinkedToArray){r++;if(!T(t[r]))return false}else if(e.valType==="info_array"){r++;var a=t[r];if(!T(a))return false;var i=e.items;if(Array.isArray(i)){if(a>=i.length)return false;if(e.dimensions===2){r++;if(t.length===r)return e;var o=t[r];if(!T(o))return false;e=i[a][o]}else e=i[a]}else{e=i}}}return e}function T(e){return e===Math.round(e)&&e>=0}function k(e){var r,a;r=n.modules[e]._module,a=r.basePlotModule;var o={};o.type=null;var s=c({},i);var l=c({},r.attributes);t.crawl(l,(function(e,t,r,n,a){p(s,a).set(undefined);if(e===undefined)p(l,a).set(undefined)}));c(o,s);if(n.traceIs(e,"noOpacity")){delete o.opacity}if(!n.traceIs(e,"showLegend")){delete o.showlegend;delete o.legendgroup}if(n.traceIs(e,"noHover")){delete o.hoverinfo;delete o.hoverlabel}if(!r.selectPoints){delete o.selectedpoints}c(o,l);if(a.attributes){c(o,a.attributes)}o.type=e;var u={meta:r.meta||{},categories:r.categories||{},animatable:Boolean(r.animatable),type:e,attributes:E(o)};if(r.layoutAttributes){var f={};c(f,r.layoutAttributes);u.layoutAttributes=E(f)}if(!r.animatable){t.crawl(u,(function(e){if(t.isValObject(e)&&"anim"in e){delete e.anim}}))}return u}function A(){var e={};var t,r;c(e,o);for(t in n.subplotsRegistry){r=n.subplotsRegistry[t];if(!r.layoutAttributes)continue;if(Array.isArray(r.attr)){for(var a=0;a<r.attr.length;a++){P(e,r,r.attr[a])}}else{var i=r.attr==="subplot"?r.name:r.attr;P(e,r,i)}}for(t in n.componentsRegistry){r=n.componentsRegistry[t];var s=r.schema;if(s&&(s.subplots||s.layout)){var l=s.subplots;if(l&&l.xaxis&&!l.yaxis){for(var u in l.xaxis){delete e.yaxis[u]}}delete e.xaxis.shift;delete e.xaxis.autoshift}else if(r.name==="colorscale"){c(e,r.layoutAttributes)}else if(r.layoutAttributes){O(e,r.layoutAttributes,r.name)}}return{layoutAttributes:E(e)}}function M(e){var t=n.transformsRegistry[e];var r=c({},t.attributes);Object.keys(n.componentsRegistry).forEach((function(t){var a=n.componentsRegistry[t];if(a.schema&&a.schema.transforms&&a.schema.transforms[e]){Object.keys(a.schema.transforms[e]).forEach((function(t){O(r,a.schema.transforms[e][t],t)}))}}));return{attributes:E(r)}}function S(){var e={frames:c({},s)};E(e);return e.frames}function E(e){L(e);C(e);I(e);return e}function L(e){function r(e){return{valType:"string",editType:"none"}}function n(e,n,a){if(t.isValObject(e)){if(e.arrayOk===true||e.valType==="data_array"){a[n+"src"]=r(n)}}else if(v(e)){e.role="object"}}t.crawl(e,n)}function C(e){function r(e,t,r){if(!e)return;var n=e[y];if(!n)return;delete e[y];r[t]={items:{}};r[t].items[n]=e;r[t].role="object"}t.crawl(e,r)}function I(e){function t(e){for(var r in e){if(v(e[r])){t(e[r])}else if(Array.isArray(e[r])){for(var n=0;n<e[r].length;n++){t(e[r][n])}}else{if(e[r]instanceof RegExp){e[r]=e[r].toString()}}}}t(e)}function P(e,t,r){var n=p(e,r);var a=c({},t.layoutAttributes);a[g]=true;n.set(a)}function O(e,t,r){var n=p(e,r);n.set(c(n.get()||{},t))}},44467:function(e,t,r){"use strict";var n=r(71828);var a=r(9012);var i="templateitemname";var o={name:{valType:"string",editType:"none"}};o[i]={valType:"string",editType:"calc"};t.templatedArray=function(e,t){t._isLinkedToArray=e;t.name=o.name;t[i]=o[i];return t};t.traceTemplater=function(e){var t={};var r,i;for(r in e){i=e[r];if(Array.isArray(i)&&i.length){t[r]=0}}function o(o){r=n.coerce(o,{},a,"type");var s={type:r,_template:null};if(r in t){i=e[r];var l=t[r]%i.length;t[r]++;s._template=i[l]}else{}return s}return{newTrace:o}};t.newContainer=function(e,t,r){var a=e._template;var i=a&&(a[t]||r&&a[r]);if(!n.isPlainObject(i))i=null;var o=e[t]={_template:i};return o};t.arrayTemplater=function(e,t,r){var n=e._template;var a=n&&n[l(t)];var o=n&&n[t];if(!Array.isArray(o)||!o.length){o=[]}var u={};function f(e){var t={name:e.name,_input:e};var n=t[i]=e[i];if(!s(n)){t._template=a;return t}for(var l=0;l<o.length;l++){var f=o[l];if(f.name===n){u[n]=1;t._template=f;return t}}t[r]=e[r]||false;t._template=false;return t}function c(){var e=[];for(var t=0;t<o.length;t++){var r=o[t];var n=r.name;if(s(n)&&!u[n]){var a={_template:r,name:n,_input:{_templateitemname:n}};a[i]=r[i];e.push(a);u[n]=1}}return e}return{newItem:f,defaultItems:c}};function s(e){return e&&typeof e==="string"}function l(e){var t=e.length-1;if(e.charAt(t)!=="s"){n.warn("bad argument to arrayDefaultKey: "+e)}return e.substr(0,e.length-1)+"defaults"}t.arrayDefaultKey=l;t.arrayEditor=function(e,t,r){var a=(n.nestedProperty(e,t).get()||[]).length;var o=r._index;var s=o>=a&&(r._input||{})._templateitemname;if(s)o=a;var l=t+"["+o+"]";var u;function f(){u={};if(s){u[l]={};u[l][i]=s}}f();function c(e,t){u[e]=t}function v(e,t){if(s){n.nestedProperty(u[l],e).set(t)}else{u[l+"."+e]=t}}function h(){var e=u;f();return e}function p(t,r){if(t)v(t,r);var a=h();for(var i in a){n.nestedProperty(e,i).set(a[i])}}return{modifyBase:c,modifyItem:v,getUpdateObj:h,applyUpdate:p}}},61549:function(e,t,r){"use strict";var n=r(39898);var a=r(73972);var i=r(74875);var o=r(71828);var s=r(63893);var l=r(33306);var u=r(7901);var f=r(91424);var c=r(92998);var v=r(64168);var h=r(89298);var p=r(18783);var d=r(99082);var g=d.enforce;var y=d.clean;var m=r(71739).doAutoRange;var x="start";var b="middle";var _="end";t.layoutStyles=function(e){return o.syncOrAsync([i.doAutoMargin,T],e)};function w(e,t,r){for(var n=0;n<r.length;n++){var a=r[n][0];var i=r[n][1];if(a[0]>=e[1]||a[1]<=e[0]){continue}if(i[0]<t[1]&&i[1]>t[0]){return true}}return false}function T(e){var r=e._fullLayout;var a=r._size;var s=a.p;var l=h.list(e,"",true);var c,d,g,y,m,x;r._paperdiv.style({width:e._context.responsive&&r.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":r.width+"px",height:e._context.responsive&&r.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":r.height+"px"}).selectAll(".main-svg").call(f.setSize,r.width,r.height);e._context.setBackground(e,r.paper_bgcolor);t.drawMainTitle(e);v.manage(e);if(!r._has("cartesian")){return i.previousPromises(e)}function b(e,t,r){var n=e._lw/2;if(e._id.charAt(0)==="x"){if(!t)return a.t+a.h*(1-(e.position||0))+n%1;else if(r==="top")return t._offset-s-n;return t._offset+t._length+s+n}if(!t)return a.l+a.w*(e.position||0)+n%1;else if(r==="right")return t._offset+t._length+s+n;return t._offset-s-n}for(c=0;c<l.length;c++){y=l[c];var _=y._anchorAxis;y._linepositions={};y._lw=f.crispRound(e,y.linewidth,1);y._mainLinePosition=b(y,_,y.side);y._mainMirrorPosition=y.mirror&&_?b(y,_,p.OPPOSITE_SIDE[y.side]):null}var T=[];var A=[];var S=[];var E=u.opacity(r.paper_bgcolor)===1&&u.opacity(r.plot_bgcolor)===1&&r.paper_bgcolor===r.plot_bgcolor;for(d in r._plots){g=r._plots[d];if(g.mainplot){if(g.bg){g.bg.remove()}g.bg=undefined}else{var L=g.xaxis.domain;var C=g.yaxis.domain;var I=g.plotgroup;if(w(L,C,S)){var P=I.node();var O=g.bg=o.ensureSingle(I,"rect","bg");P.insertBefore(O.node(),P.childNodes[0]);A.push(d)}else{I.select("rect.bg").remove();S.push([L,C]);if(!E){T.push(d);A.push(d)}}}}var D=r._bgLayer.selectAll(".bg").data(T);D.enter().append("rect").classed("bg",true);D.exit().remove();D.each((function(e){r._plots[e].bg=n.select(this)}));for(c=0;c<A.length;c++){g=r._plots[A[c]];m=g.xaxis;x=g.yaxis;if(g.bg&&m._offset!==undefined&&x._offset!==undefined){g.bg.call(f.setRect,m._offset-s,x._offset-s,m._length+2*s,x._length+2*s).call(u.fill,r.plot_bgcolor).style("stroke-width",0)}}if(!r._hasOnlyLargeSploms){for(d in r._plots){g=r._plots[d];m=g.xaxis;x=g.yaxis;var z=g.clipId="clip"+r._uid+d+"plot";var R=o.ensureSingleById(r._clips,"clipPath",z,(function(e){e.classed("plotclip",true).append("rect")}));g.clipRect=R.select("rect").attr({width:m._length,height:x._length});f.setTranslate(g.plot,m._offset,x._offset);var F;var B;if(g._hasClipOnAxisFalse){F=null;B=z}else{F=z;B=null}f.setClipUrl(g.plot,F,e);g.layerClipId=B}}var N,j,U,V,H,q;var G,Z,Y,W,X,J;var K;function $(e){return"M"+N+","+e+"H"+j}function Q(e){return"M"+m._offset+","+e+"h"+m._length}function ee(e){return"M"+e+","+Z+"V"+G}function te(e){if(x._shift!==undefined){e+=x._shift}return"M"+e+","+x._offset+"v"+x._length}function re(e,t,r){if(!e.showline||d!==e._mainSubplot)return"";if(!e._anchorAxis)return r(e._mainLinePosition);var n=t(e._mainLinePosition);if(e.mirror)n+=t(e._mainMirrorPosition);return n}for(d in r._plots){g=r._plots[d];m=g.xaxis;x=g.yaxis;var ne="M0,0";if(k(m,d)){H=M(m,"left",x,l);N=m._offset-(H?s+H:0);q=M(m,"right",x,l);j=m._offset+m._length+(q?s+q:0);U=b(m,x,"bottom");V=b(m,x,"top");K=!m._anchorAxis||d!==m._mainSubplot;if(K&&(m.mirror==="allticks"||m.mirror==="all")){m._linepositions[d]=[U,V]}ne=re(m,$,Q);if(K&&m.showline&&(m.mirror==="all"||m.mirror==="allticks")){ne+=$(U)+$(V)}g.xlines.style("stroke-width",m._lw+"px").call(u.stroke,m.showline?m.linecolor:"rgba(0,0,0,0)")}g.xlines.attr("d",ne);var ae="M0,0";if(k(x,d)){X=M(x,"bottom",m,l);G=x._offset+x._length+(X?s:0);J=M(x,"top",m,l);Z=x._offset-(J?s:0);Y=b(x,m,"left");W=b(x,m,"right");K=!x._anchorAxis||d!==x._mainSubplot;if(K&&(x.mirror==="allticks"||x.mirror==="all")){x._linepositions[d]=[Y,W]}ae=re(x,ee,te);if(K&&x.showline&&(x.mirror==="all"||x.mirror==="allticks")){ae+=ee(Y)+ee(W)}g.ylines.style("stroke-width",x._lw+"px").call(u.stroke,x.showline?x.linecolor:"rgba(0,0,0,0)")}g.ylines.attr("d",ae)}h.makeClipPaths(e);return i.previousPromises(e)}function k(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||e.mirror==="all"||e.mirror==="allticks")}function A(e,t,r){if(!r.showline||!r._lw)return false;if(r.mirror==="all"||r.mirror==="allticks")return true;var n=r._anchorAxis;if(!n)return false;var a=p.FROM_BL[t];if(r.side===t){return n.domain[a]===e.domain[a]}return r.mirror&&n.domain[1-a]===e.domain[1-a]}function M(e,t,r,n){if(A(e,t,r)){return r._lw}for(var a=0;a<n.length;a++){var i=n[a];if(i._mainAxis===r._mainAxis&&A(e,t,i)){return i._lw}}return 0}t.drawMainTitle=function(e){var t=e._fullLayout.title;var r=e._fullLayout;var a=D(r);var i=z(r);var o=P(r,i);var l=I(r,a);c.draw(e,"gtitle",{propContainer:r,propName:"title.text",placeholder:r._dfltTitle.plot,attributes:{x:l,y:o,"text-anchor":a,dy:i}});if(t.text&&t.automargin){var u=n.selectAll(".gtitle");var v=f.bBox(u.node()).height;var h=L(e,t,v);if(h>0){C(e,o,h,v);u.attr({x:l,y:o,"text-anchor":a,dy:O(t.yanchor)}).call(s.positionText,l,o);var d=(t.text.match(s.BR_TAG_ALL)||[]).length;if(d){var g=p.LINE_SPACING*d+p.MID_SHIFT;if(t.y===0){g=-g}u.selectAll(".line").each((function(){var e=+this.getAttribute("dy").slice(0,-2)-g+"em";this.setAttribute("dy",e)}))}}}};function S(e,t,r,n,a){var i=t.yref==="paper"?e._fullLayout._size.h:e._fullLayout.height;var s=o.isTopAnchor(t)?n:n-a;var l=r==="b"?i-s:s;if(o.isTopAnchor(t)&&r==="t"||o.isBottomAnchor(t)&&r==="b"){return false}else{return l<a}}function E(e,t,r,n,a){var i=0;if(r==="middle"){i+=a/2}if(e==="t"){if(r==="top"){i+=a}i+=n-t*n}else{if(r==="bottom"){i+=a}i+=t*n}return i}function L(e,t,r){var n=t.y;var a=t.yanchor;var i=n>.5?"t":"b";var o=e._fullLayout.margin[i];var s=0;if(t.yref==="paper"){s=r+t.pad.t+t.pad.b}else if(t.yref==="container"){s=E(i,n,a,e._fullLayout.height,r)+t.pad.t+t.pad.b}if(s>o){return s}return 0}function C(e,t,r,n){var a="title.automargin";var o=e._fullLayout.title;var s=o.y>.5?"t":"b";var l={x:o.x,y:o.y,t:0,b:0};var u={};if(o.yref==="paper"&&S(e,o,s,t,n)){l[s]=r}else if(o.yref==="container"){u[s]=r;e._fullLayout._reservedMargin[a]=u}i.allowAutoMargin(e,a);i.autoMargin(e,a,l)}function I(e,t){var r=e.title;var n=e._size;var a=0;if(t===x){a=r.pad.l}else if(t===_){a=-r.pad.r}switch(r.xref){case"paper":return n.l+n.w*r.x+a;case"container":default:return e.width*r.x+a}}function P(e,t){var r=e.title;var n=e._size;var a=0;if(t==="0em"||!t){a=-r.pad.b}else if(t===p.CAP_SHIFT+"em"){a=r.pad.t}if(r.y==="auto"){return n.t/2}else{switch(r.yref){case"paper":return n.t+n.h-n.h*r.y+a;case"container":default:return e.height-e.height*r.y+a}}}function O(e){if(e==="top"){return p.CAP_SHIFT+.3+"em"}else if(e==="bottom"){return"-0.3em"}else{return p.MID_SHIFT+"em"}}function D(e){var t=e.title;var r=b;if(o.isRightAnchor(t)){r=_}else if(o.isLeftAnchor(t)){r=x}return r}function z(e){var t=e.title;var r="0em";if(o.isTopAnchor(t)){r=p.CAP_SHIFT+"em"}else if(o.isMiddleAnchor(t)){r=p.MID_SHIFT+"em"}return r}t.doTraceStyle=function(e){var r=e.calcdata;var n=[];var o;for(o=0;o<r.length;o++){var s=r[o];var u=s[0]||{};var f=u.trace||{};var c=f._module||{};var v=c.arraysToCalcdata;if(v)v(s,f);var h=c.editStyle;if(h)n.push({fn:h,cd0:u})}if(n.length){for(o=0;o<n.length;o++){var p=n[o];p.fn(e,p.cd0)}l(e);t.redrawReglTraces(e)}i.style(e);a.getComponentMethod("legend","draw")(e);return i.previousPromises(e)};t.doColorBars=function(e){a.getComponentMethod("colorbar","draw")(e);return i.previousPromises(e)};t.layoutReplot=function(e){var t=e.layout;e.layout=undefined;return a.call("_doPlot",e,"",t)};t.doLegend=function(e){a.getComponentMethod("legend","draw")(e);return i.previousPromises(e)};t.doTicksRelayout=function(e){h.draw(e,"redraw");if(e._fullLayout._hasOnlyLargeSploms){a.subplotsRegistry.splom.updateGrid(e);l(e);t.redrawReglTraces(e)}t.drawMainTitle(e);return i.previousPromises(e)};t.doModeBar=function(e){var t=e._fullLayout;v.manage(e);for(var r=0;r<t._basePlotModules.length;r++){var n=t._basePlotModules[r].updateFx;if(n)n(e)}return i.previousPromises(e)};t.doCamera=function(e){var t=e._fullLayout;var r=t._subplots.gl3d;for(var n=0;n<r.length;n++){var a=t[r[n]];var i=a._scene;i.setViewport(a)}};t.drawData=function(e){var r=e._fullLayout;l(e);var n=r._basePlotModules;for(var o=0;o<n.length;o++){n[o].plot(e)}t.redrawReglTraces(e);i.style(e);a.getComponentMethod("selections","draw")(e);a.getComponentMethod("shapes","draw")(e);a.getComponentMethod("annotations","draw")(e);a.getComponentMethod("images","draw")(e);r._replotting=false;return i.previousPromises(e)};t.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var r=e._fullData;var n=[];var a=[];var i,s;if(t._hasOnlyLargeSploms){t._splomGrid.draw()}for(i=0;i<r.length;i++){var l=r[i];if(l.visible===true&&l._length!==0){if(l.type==="splom"){t._splomScenes[l.uid].draw()}else if(l.type==="scattergl"){o.pushUnique(n,l.xaxis+l.yaxis)}else if(l.type==="scatterpolargl"){o.pushUnique(a,l.subplot)}}}for(i=0;i<n.length;i++){s=t._plots[n[i]];if(s._scene)s._scene.draw()}for(i=0;i<a.length;i++){s=t[a[i]]._subplot;if(s._scene)s._scene.draw()}}};t.doAutoRangeAndConstraints=function(e){var t=h.list(e,"",true);var r;var n={};for(var a=0;a<t.length;a++){r=t[a];if(!n[r._id]){n[r._id]=1;y(e,r);m(e,r);var i=r._matchGroup;if(i){for(var o in i){var s=h.getFromId(e,o);m(e,s,r.range);n[o]=1}}}}g(e)};t.finalDraw=function(e){a.getComponentMethod("rangeslider","draw")(e);a.getComponentMethod("rangeselector","draw")(e)};t.drawMarginPushers=function(e){a.getComponentMethod("legend","draw")(e);a.getComponentMethod("rangeselector","draw")(e);a.getComponentMethod("sliders","draw")(e);a.getComponentMethod("updatemenus","draw")(e);a.getComponentMethod("colorbar","draw")(e)}},96318:function(e,t,r){"use strict";var n=r(71828);var a=n.isPlainObject;var i=r(86281);var o=r(74875);var s=r(9012);var l=r(44467);var u=r(72075).dfltConfig;t.makeTemplate=function(e){e=n.isPlainObject(e)?e:n.getGraphDiv(e);e=n.extendDeep({_context:u},{data:e.data,layout:e.layout});o.supplyDefaults(e);var t=e.data||[];var r=e.layout||{};r._basePlotModules=e._fullLayout._basePlotModules;r._modules=e._fullLayout._modules;var i={data:{},layout:{}};t.forEach((function(e){var t={};v(e,t,p.bind(null,e));var r=n.coerce(e,{},s,"type");var a=i.data[r];if(!a)a=i.data[r]=[];a.push(t)}));v(r,i.layout,h.bind(null,r));delete i.layout.template;var l=r.template;if(a(l)){var c=l.layout;var d,g,y,m,x,b;if(a(c)){f(c,i.layout)}var _=l.data;if(a(_)){for(g in i.data){y=_[g];if(Array.isArray(y)){x=i.data[g];b=x.length;m=y.length;for(d=0;d<b;d++){f(y[d%m],x[d])}for(d=b;d<m;d++){x.push(n.extendDeep({},y[d]))}}}for(g in _){if(!(g in i.data)){i.data[g]=n.extendDeep([],_[g])}}}}return i};function f(e,t){e=n.extendDeep({},e);var r=Object.keys(e).sort();var i,o;function s(t,r,n){if(a(r)&&a(t)){f(t,r)}else if(Array.isArray(r)&&Array.isArray(t)){var i=l.arrayTemplater({_template:e},n);for(o=0;o<r.length;o++){var s=r[o];var u=i.newItem(s)._template;if(u)f(u,s)}var c=i.defaultItems();for(o=0;o<c.length;o++)r.push(c[o]._template);for(o=0;o<r.length;o++)delete r[o].templateitemname}}for(i=0;i<r.length;i++){var u=r[i];var v=e[u];if(u in t){s(v,t[u],u)}else t[u]=v;if(c(u)===u){for(var h in t){var p=c(h);if(h!==p&&p===u&&!(h in e)){s(v,t[h],u)}}}}}function c(e){return e.replace(/[0-9]+$/,"")}function v(e,t,r,i,o){var s=o&&r(o);for(var u in e){var f=e[u];var h=d(e,u,i);var p=d(e,u,o);var g=r(p);if(!g){var y=c(u);if(y!==u){p=d(e,y,o);g=r(p)}}if(s&&s===g)continue;if(!g||g._noTemplating||g.valType==="data_array"||g.arrayOk&&Array.isArray(f)){continue}if(!g.valType&&a(f)){v(f,t,r,h,p)}else if(g._isLinkedToArray&&Array.isArray(f)){var m=false;var x=0;var b={};for(var _=0;_<f.length;_++){var w=f[_];if(a(w)){var T=w.name;if(T){if(!b[T]){v(w,t,r,d(f,x,h),d(f,x,p));x++;b[T]=1}}else if(!m){var k=l.arrayDefaultKey(u);var A=d(e,k,i);var M=d(f,x,h);v(w,t,r,M,d(f,x,p));var S=n.nestedProperty(t,M);var E=n.nestedProperty(t,A);E.set(S.get());S.set(null);m=true}}}}else{var L=n.nestedProperty(t,h);L.set(f)}}}function h(e,t){return i.getLayoutValObject(e,n.nestedProperty({},t).parts)}function p(e,t){return i.getTraceValObject(e,n.nestedProperty({},t).parts)}function d(e,t,r){var n;if(!r)n=t;else if(Array.isArray(e))n=r+"["+t+"]";else n=r+"."+t;return n}t.validateTemplate=function(e,t){var r=n.extendDeep({},{_context:u,data:e.data,layout:e.layout});var i=r.layout||{};if(!a(t))t=i.template||{};var s=t.layout;var l=t.data;var f=[];r.layout=i;r.layout.template=t;o.supplyDefaults(r);var v=r._fullLayout;var h=r._fullData;var p={};function m(e,t){for(var r in e){if(r.charAt(0)!=="_"&&a(e[r])){var n=c(r);var i=[];var o;for(o=0;o<t.length;o++){i.push(d(e,r,t[o]));if(n!==r)i.push(d(e,n,t[o]))}for(o=0;o<i.length;o++){p[i[o]]=1}m(e[r],i)}}}function x(e,t){for(var r in e){if(r.indexOf("defaults")===-1&&a(e[r])){var n=d(e,r,t);if(p[n]){x(e[r],n)}else{f.push({code:"unused",path:n})}}}}if(!a(s)){f.push({code:"layout"})}else{m(v,["layout"]);x(s,"layout")}if(!a(l)){f.push({code:"data"})}else{var b={};var _;for(var w=0;w<h.length;w++){var T=h[w];_=T.type;b[_]=(b[_]||0)+1;if(!T._fullInput._template){f.push({code:"missing",index:T._fullInput.index,traceType:_})}}for(_ in l){var k=l[_].length;var A=b[_]||0;if(k>A){f.push({code:"unused",traceType:_,templateCount:k,dataCount:A})}else if(A>k){f.push({code:"reused",traceType:_,templateCount:k,dataCount:A})}}}function M(e,t){for(var r in e){if(r.charAt(0)==="_")continue;var n=e[r];var i=d(e,r,t);if(a(n)){if(Array.isArray(e)&&n._template===false&&n.templateitemname){f.push({code:"missing",path:i,templateitemname:n.templateitemname})}M(n,i)}else if(Array.isArray(n)&&g(n)){M(n,i)}}}M({data:h,layout:v},"");if(f.length)return f.map(y)};function g(e){for(var t=0;t<e.length;t++){if(a(e[t]))return true}}function y(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":if(e.path){t="There are no templates for item "+e.path+" with name "+e.templateitemname}else{t="There are no templates for trace "+e.index+", of type "+e.traceType+"."}break;case"unused":if(e.path){t="The template item at "+e.path+" was not used in constructing the plot."}else if(e.dataCount){t="Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type."}else{t="The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data."}break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type.";break}e.msg=t;return e}},403:function(e,t,r){"use strict";var n=r(92770);var a=r(72391);var i=r(74875);var o=r(71828);var s=r(25095);var l=r(5900);var u=r(70942);var f=r(11506).version;var c={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:false},imageDataOnly:{valType:"boolean",dflt:false}};function v(e,t){t=t||{};var r;var v;var h;var p;if(o.isPlainObject(e)){r=e.data||[];v=e.layout||{};h=e.config||{};p={}}else{e=o.getGraphDiv(e);r=o.extendDeep([],e.data);v=o.extendDeep({},e.layout);h=e._context;p=e._fullLayout||{}}function d(e){return!(e in t)||o.validate(t[e],c[e])}if(!d("width")&&t.width!==null||!d("height")&&t.height!==null){throw new Error("Height and width should be pixel values.")}if(!d("format")){throw new Error("Export format is not "+o.join2(c.format.values,", "," or ")+".")}var g={};function y(e,r){return o.coerce(t,g,c,e,r)}var m=y("format");var x=y("width");var b=y("height");var _=y("scale");var w=y("setBackground");var T=y("imageDataOnly");var k=document.createElement("div");k.style.position="absolute";k.style.left="-5000px";document.body.appendChild(k);var A=o.extendFlat({},v);if(x){A.width=x}else if(t.width===null&&n(p.width)){A.width=p.width}if(b){A.height=b}else if(t.height===null&&n(p.height)){A.height=p.height}var M=o.extendFlat({},h,{_exportedPlot:true,staticPlot:true,setBackground:w});var S=s.getRedrawFunc(k);function E(){return new Promise((function(e){setTimeout(e,s.getDelay(k._fullLayout))}))}function L(){return new Promise((function(e,t){var r=l(k,m,_);var n=k._fullLayout.width;var c=k._fullLayout.height;function v(){a.purge(k);document.body.removeChild(k)}if(m==="full-json"){var h=i.graphJson(k,false,"keepdata","object",true,true);h.version=f;h=JSON.stringify(h);v();if(T){return e(h)}else{return e(s.encodeJSON(h))}}v();if(m==="svg"){if(T){return e(r)}else{return e(s.encodeSVG(r))}}var p=document.createElement("canvas");p.id=o.randstr();u({format:m,width:n,height:c,scale:_,canvas:p,svg:r,promise:true}).then(e).catch(t)}))}function C(e){if(T){return e.replace(s.IMAGE_URL_PREFIX,"")}else{return e}}return new Promise((function(e,t){a.newPlot(k,r,A,M).then(S).then(E).then(L).then((function(t){e(C(t))})).catch((function(e){t(e)}))}))}e.exports=v},84936:function(e,t,r){"use strict";var n=r(71828);var a=r(74875);var i=r(86281);var o=r(72075).dfltConfig;var s=n.isPlainObject;var l=Array.isArray;var u=n.isArrayOrTypedArray;e.exports=function e(t,r){if(t===undefined)t=[];if(r===undefined)r={};var u=i.get();var v=[];var h={_context:n.extendFlat({},o)};var d,g;if(l(t)){h.data=n.extendDeep([],t);d=t}else{h.data=[];d=[];v.push(p("array","data"))}if(s(r)){h.layout=n.extendDeep({},r);g=r}else{h.layout={};g={};if(arguments.length>1){v.push(p("object","layout"))}}a.supplyDefaults(h);var y=h._fullData;var m=d.length;for(var x=0;x<m;x++){var b=d[x];var _=["data",x];if(!s(b)){v.push(p("object",_));continue}var w=y[x];var T=w.type;var k=u.traces[T].attributes;k.type={valType:"enumerated",values:[T]};if(w.visible===false&&b.visible!==false){v.push(p("invisible",_))}f(b,w,k,v,_);var A=b.transforms;var M=w.transforms;if(A){if(!l(A)){v.push(p("array",_,["transforms"]))}_.push("transforms");for(var S=0;S<A.length;S++){var E=["transforms",S];var L=A[S].type;if(!s(A[S])){v.push(p("object",_,E));continue}var C=u.transforms[L]?u.transforms[L].attributes:{};C.type={valType:"enumerated",values:Object.keys(u.transforms)};f(A[S],M[S],C,v,_,E)}}}var I=h._fullLayout;var P=c(u,y);f(g,I,P,v,"layout");return v.length===0?void 0:v};function f(e,t,r,a,i,o){o=o||[];var c=Object.keys(e);for(var v=0;v<c.length;v++){var h=c[v];if(h==="transforms")continue;var y=o.slice();y.push(h);var m=e[h];var x=t[h];var b=g(r,h);var _=(b||{}).valType;var w=_==="info_array";var T=_==="colorscale";var k=(b||{}).items;if(!d(r,h)){a.push(p("schema",i,y))}else if(s(m)&&s(x)&&_!=="any"){f(m,x,b,a,i,y)}else if(w&&l(m)){if(m.length>x.length){a.push(p("unused",i,y.concat(x.length)))}var A=x.length;var M=Array.isArray(k);if(M)A=Math.min(A,k.length);var S,E,L,C,I;if(b.dimensions===2){for(E=0;E<A;E++){if(l(m[E])){if(m[E].length>x[E].length){a.push(p("unused",i,y.concat(E,x[E].length)))}var P=x[E].length;for(S=0;S<(M?Math.min(P,k[E].length):P);S++){L=M?k[E][S]:k;C=m[E][S];I=x[E][S];if(!n.validate(C,L)){a.push(p("value",i,y.concat(E,S),C))}else if(I!==C&&I!==+C){a.push(p("dynamic",i,y.concat(E,S),C,I))}}}else{a.push(p("array",i,y.concat(E),m[E]))}}}else{for(E=0;E<A;E++){L=M?k[E]:k;C=m[E];I=x[E];if(!n.validate(C,L)){a.push(p("value",i,y.concat(E),C))}else if(I!==C&&I!==+C){a.push(p("dynamic",i,y.concat(E),C,I))}}}}else if(b.items&&!w&&l(m)){var O=k[Object.keys(k)[0]];var D=[];var z,R;for(z=0;z<x.length;z++){var F=x[z]._index||z;R=y.slice();R.push(F);if(s(m[F])&&s(x[z])){D.push(F);var B=m[F];var N=x[z];if(s(B)&&B.visible!==false&&N.visible===false){a.push(p("invisible",i,R))}else f(B,N,O,a,i,R)}}for(z=0;z<m.length;z++){R=y.slice();R.push(z);if(!s(m[z])){a.push(p("object",i,R,m[z]))}else if(D.indexOf(z)===-1){a.push(p("unused",i,R))}}}else if(!s(m)&&s(x)){a.push(p("object",i,y,m))}else if(!u(m)&&u(x)&&!w&&!T){a.push(p("array",i,y,m))}else if(!(h in t)){a.push(p("unused",i,y,m))}else if(!n.validate(m,b)){a.push(p("value",i,y,m))}else if(b.valType==="enumerated"&&(b.coerceNumber&&m!==+x||m!==x)){a.push(p("dynamic",i,y,m,x))}}return a}function c(e,t){var r=e.layout.layoutAttributes;for(var a=0;a<t.length;a++){var i=t[a];var o=e.traces[i.type];var s=o.layoutAttributes;if(s){if(i.subplot){n.extendFlat(r[o.attributes.subplot.dflt],s)}else{n.extendFlat(r,s)}}}return r}var v={object:function(e,t){var r;if(e==="layout"&&t==="")r="The layout argument";else if(e[0]==="data"&&t===""){r="Trace "+e[1]+" in the data argument"}else r=h(e)+"key "+t;return r+" must be linked to an object container"},array:function(e,t){var r;if(e==="data")r="The data argument";else r=h(e)+"key "+t;return r+" must be linked to an array container"},schema:function(e,t){return h(e)+"key "+t+" is not part of the schema"},unused:function(e,t,r){var n=s(r)?"container":"key";return h(e)+n+" "+t+" did not get coerced"},dynamic:function(e,t,r,n){return[h(e)+"key",t,"(set to '"+r+"')","got reset to","'"+n+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?h(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,r){return[h(e)+"key "+t,"is set to an invalid value ("+r+")"].join(" ")}};function h(e){if(l(e))return"In data trace "+e[1]+", ";return"In "+e+", "}function p(e,t,r,a,i){r=r||"";var o,s;if(l(t)){o=t[0];s=t[1]}else{o=t;s=null}var u=x(r);var f=v[e](t,u,a,i);n.log(f);return{code:e,container:o,trace:s,path:r,astr:u,msg:f}}function d(e,t){var r=m(t);var n=r.keyMinusId;var a=r.id;if(n in e&&e[n]._isSubplotObj&&a){return true}return t in e}function g(e,t){if(t in e)return e[t];var r=m(t);return e[r.keyMinusId]}var y=n.counterRegex("([a-z]+)");function m(e){var t=e.match(y);return{keyMinusId:t&&t[1],id:t&&t[2]}}function x(e){if(!l(e))return String(e);var t="";for(var r=0;r<e.length;r++){var n=e[r];if(typeof n==="number"){t=t.substr(0,t.length-1)+"["+n+"]"}else{t+=n}if(r<e.length-1)t+="."}return t}},85594:function(e){"use strict";e.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:false},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:true}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},85501:function(e,t,r){"use strict";var n=r(71828);var a=r(44467);e.exports=function e(t,r,i){var o=i.name;var s=i.inclusionAttr||"visible";var l=r[o];var u=n.isArrayOrTypedArray(t[o])?t[o]:[];var f=r[o]=[];var c=a.arrayTemplater(r,o,s);var v,h;for(v=0;v<u.length;v++){var p=u[v];if(!n.isPlainObject(p)){h=c.newItem({});h[s]=false}else{h=c.newItem(p)}h._index=v;if(h[s]!==false){i.handleItemDefaults(p,h,r,i)}f.push(h)}var d=c.defaultItems();for(v=0;v<d.length;v++){h=d[v];h._index=f.length;i.handleItemDefaults({},h,r,i,{});f.push(h)}if(n.isArrayOrTypedArray(l)){var g=Math.min(l.length,f.length);for(v=0;v<g;v++){n.relinkPrivateKeys(f[v],l[v])}}return f}},9012:function(e,t,r){"use strict";var n=r(41940);var a=r(77914);e.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:true},visible:{valType:"enumerated",values:[true,false,"legendonly"],dflt:true,editType:"calc"},showlegend:{valType:"boolean",dflt:true,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:n({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:true},ids:{valType:"data_array",editType:"calc",anim:true},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:true,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:true,dflt:"all",editType:"none"},hoverlabel:a.hoverlabel,stream:{token:{valType:"string",noBlank:true,strict:true,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},42973:function(e,t,r){"use strict";var n=r(92770);var a=r(71828);var i=a.dateTime2ms;var o=a.incrementMonth;var s=r(50606);var l=s.ONEAVGMONTH;e.exports=function e(t,r,a,s){if(r.type!=="date")return{vals:s};var u=t[a+"periodalignment"];if(!u)return{vals:s};var f=t[a+"period"];var c;if(n(f)){f=+f;if(f<=0)return{vals:s}}else if(typeof f==="string"&&f.charAt(0)==="M"){var v=+f.substring(1);if(v>0&&Math.round(v)===v){c=v}else return{vals:s}}var h=r.calendar;var p="start"===u;var d="end"===u;var g=t[a+"period0"];var y=i(g,h)||0;var m=[];var x=[];var b=[];var _=s.length;for(var w=0;w<_;w++){var T=s[w];var k,A,M;if(c){k=Math.round((T-y)/(c*l));M=o(y,c*k,h);while(M>T){M=o(M,-c,h)}while(M<=T){M=o(M,c,h)}A=o(M,-c,h)}else{k=Math.round((T-y)/f);M=y+k*f;while(M>T){M-=f}while(M<=T){M+=f}A=M-f}m[w]=p?A:d?M:(A+M)/2;x[w]=A;b[w]=M}return{vals:m,starts:x,ends:b}}},89502:function(e){"use strict";e.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},71739:function(e,t,r){"use strict";var n=r(39898);var a=r(92770);var i=r(71828);var o=r(50606).FP_SAFE;var s=r(73972);var l=r(91424);var u=r(41675);var f=u.getFromId;var c=u.isLinked;e.exports={applyAutorangeOptions:L,getAutoRange:v,makePadFn:p,doAutoRange:m,findExtremes:x,concatExtremes:y};function v(e,t){var r,n;var a=[];var o=e._fullLayout;var s=p(o,t,0);var l=p(o,t,1);var u=y(e,t);var f=u.min;var c=u.max;if(f.length===0||c.length===0){return i.simpleMap(t.range,t.r2l)}var v=f[0].val;var d=c[0].val;for(r=1;r<f.length;r++){if(v!==d)break;v=Math.min(v,f[r].val)}for(r=1;r<c.length;r++){if(v!==d)break;d=Math.max(d,c[r].val)}var g=t.autorange;var m=g==="reversed"||g==="min reversed"||g==="max reversed";if(!m&&t.range){var x=i.simpleMap(t.range,t.r2l);m=x[1]<x[0]}if(t.autorange==="reversed"){t.autorange=true}var b=t.rangemode;var _=b==="tozero";var w=b==="nonnegative";var T=t._length;var k=T/10;var A=0;var M,S,E,C,I,P;for(r=0;r<f.length;r++){M=f[r];for(n=0;n<c.length;n++){S=c[n];P=S.val-M.val-h(t,M.val,S.val);if(P>0){I=T-s(M)-l(S);if(I>k){if(P/I>A){E=M;C=S;A=P/I}}else if(P/T>A){E={val:M.val,nopad:1};C={val:S.val,nopad:1};A=P/T}}}}function O(e,t){return Math.max(e,l(t))}if(v===d){var D=v-1;var z=v+1;if(_){if(v===0){a=[0,1]}else{var R=(v>0?c:f).reduce(O,0);var F=v/(1-Math.min(.5,R/T));a=v>0?[0,F]:[F,0]}}else if(w){a=[Math.max(0,D),Math.max(1,z)]}else{a=[D,z]}}else{if(_){if(E.val>=0){E={val:0,nopad:1}}if(C.val<=0){C={val:0,nopad:1}}}else if(w){if(E.val-A*s(E)<0){E={val:0,nopad:1}}if(C.val<=0){C={val:1,nopad:1}}}A=(C.val-E.val-h(t,M.val,S.val))/(T-s(E)-l(C));a=[E.val-A*s(E),C.val+A*l(C)]}a=L(a,t);if(t.limitRange)t.limitRange();if(m)a.reverse();return i.simpleMap(a,t.l2r||Number)}function h(e,t,r){var n=0;if(e.rangebreaks){var a=e.locateBreaks(t,r);for(var i=0;i<a.length;i++){var o=a[i];n+=o.max-o.min}}return n}function p(e,t,r){var n=.05*t._length;var a=t._anchorAxis||{};if((t.ticklabelposition||"").indexOf("inside")!==-1||(a.ticklabelposition||"").indexOf("inside")!==-1){var o=t.isReversed();if(!o){var s=i.simpleMap(t.range,t.r2l);o=s[1]<s[0]}if(o)r=!r}var l=0;if(!c(e,t._id)){l=g(e,t,r)}n=Math.max(l,n);if(t.constrain==="domain"&&t._inputDomain){n*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])}return function e(t){if(t.nopad)return 0;return t.pad+(t.extrapad?n:l)}}var d=3;function g(e,t,r){var a=0;var o=t._id.charAt(0)==="x";for(var s in e._plots){var u=e._plots[s];if(t._id!==u.xaxis._id&&t._id!==u.yaxis._id)continue;var f=(o?u.yaxis:u.xaxis)||{};if((f.ticklabelposition||"").indexOf("inside")!==-1){if(!r&&(f.side==="left"||f.side==="bottom")||r&&(f.side==="top"||f.side==="right")){if(f._vals){var c=i.deg2rad(f._tickAngles[f._id+"tick"]||0);var v=Math.abs(Math.cos(c));var h=Math.abs(Math.sin(c));if(!f._vals[0].bb){var p=f._id+"tick";var g=f._selections[p];g.each((function(e){var t=n.select(this);var r=t.select(".text-math-group");if(r.empty()){e.bb=l.bBox(t.node())}}))}for(var y=0;y<f._vals.length;y++){var m=f._vals[y];var x=m.bb;if(x){var b=2*d+x.width;var _=2*d+x.height;a=Math.max(a,o?Math.max(b*v,_*h):Math.max(_*v,b*h))}}}if(f.ticks==="inside"&&f.ticklabelposition==="inside"){a+=f.ticklen||0}}}}return a}function y(e,t,r){var n=t._id;var a=e._fullData;var i=e._fullLayout;var o=[];var s=[];var l,u,c;function v(e,t){for(l=0;l<t.length;l++){var r=e[t[l]];var a=(r._extremes||{})[n];if(r.visible===true&&a){for(u=0;u<a.min.length;u++){c=a.min[u];b(o,c.val,c.pad,{extrapad:c.extrapad})}for(u=0;u<a.max.length;u++){c=a.max[u];_(s,c.val,c.pad,{extrapad:c.extrapad})}}}}v(a,t._traceIndices);v(i.annotations||[],t._annIndices||[]);v(i.shapes||[],t._shapeIndices||[]);if(t._matchGroup&&!r){for(var h in t._matchGroup){if(h!==t._id){var p=f(e,h);var d=y(e,p,true);var g=t._length/p._length;for(u=0;u<d.min.length;u++){c=d.min[u];b(o,c.val,c.pad*g,{extrapad:c.extrapad})}for(u=0;u<d.max.length;u++){c=d.max[u];_(s,c.val,c.pad*g,{extrapad:c.extrapad})}}}}return{min:o,max:s}}function m(e,t,r){t.setScale();if(t.autorange){t.range=r?r.slice():v(e,t);t._r=t.range.slice();t._rl=i.simpleMap(t._r,t.r2l);var n=t._input;var a={};a[t._attr+".range"]=t.range;a[t._attr+".autorange"]=t.autorange;s.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,a);n.range=t.range.slice();n.autorange=t.autorange}var o=t._anchorAxis;if(o&&o.rangeslider){var l=o.rangeslider[t._name];if(l){if(l.rangemode==="auto"){l.range=v(e,t)}}o._input.rangeslider[t._name]=i.extendFlat({},l)}}function x(e,t,r){if(!r)r={};if(!e._m)e.setScale();var n=[];var i=[];var s=t.length;var l=r.padded||false;var u=r.tozero&&(e.type==="linear"||e.type==="-");var f=e.type==="log";var c=false;var v=r.vpadLinearized||false;var h,p,d,g,y,m,x,w,k;function A(e){if(Array.isArray(e)){c=true;return function(t){return Math.max(Number(e[t]||0),0)}}else{var t=Math.max(Number(e||0),0);return function(){return t}}}var M=A((e._m>0?r.ppadplus:r.ppadminus)||r.ppad||0);var S=A((e._m>0?r.ppadminus:r.ppadplus)||r.ppad||0);var E=A(r.vpadplus||r.vpad);var L=A(r.vpadminus||r.vpad);if(!c){w=Infinity;k=-Infinity;if(f){for(h=0;h<s;h++){p=t[h];if(p<w&&p>0)w=p;if(p>k&&p<o)k=p}}else{for(h=0;h<s;h++){p=t[h];if(p<w&&p>-o)w=p;if(p>k&&p<o)k=p}}t=[w,k];s=2}var C={tozero:u,extrapad:l};function I(r){d=t[r];if(!a(d))return;m=M(r);x=S(r);if(v){g=e.c2l(d)-L(r);y=e.c2l(d)+E(r)}else{w=d-L(r);k=d+E(r);if(f&&w<k/10)w=k/10;g=e.c2l(w);y=e.c2l(k)}if(u){g=Math.min(0,g);y=Math.max(0,y)}if(T(g)){b(n,g,x,C)}if(T(y)){_(i,y,m,C)}}var P=Math.min(6,s);for(h=0;h<P;h++)I(h);for(h=s-1;h>=P;h--)I(h);return{min:n,max:i,opts:r}}function b(e,t,r,n){w(e,t,r,n,k)}function _(e,t,r,n){w(e,t,r,n,A)}function w(e,t,r,n,a){var i=n.tozero;var o=n.extrapad;var s=true;for(var l=0;l<e.length&&s;l++){var u=e[l];if(a(u.val,t)&&u.pad>=r&&(u.extrapad||!o)){s=false;break}else if(a(t,u.val)&&u.pad<=r&&(o||!u.extrapad)){e.splice(l,1);l--}}if(s){var f=i&&t===0;e.push({val:t,pad:f?0:r,extrapad:f?false:o})}}function T(e){return a(e)&&Math.abs(e)<o}function k(e,t){return e<=t}function A(e,t){return e>=t}function M(e,t){var r=t.autorangeoptions;if(r&&r.minallowed!==undefined&&E(t,r.minallowed,r.maxallowed)){return r.minallowed}if(r&&r.clipmin!==undefined&&E(t,r.clipmin,r.clipmax)){return Math.max(e,t.d2l(r.clipmin))}return e}function S(e,t){var r=t.autorangeoptions;if(r&&r.maxallowed!==undefined&&E(t,r.minallowed,r.maxallowed)){return r.maxallowed}if(r&&r.clipmax!==undefined&&E(t,r.clipmin,r.clipmax)){return Math.min(e,t.d2l(r.clipmax))}return e}function E(e,t,r){if(t!==undefined&&r!==undefined){t=e.d2l(t);r=e.d2l(r);return t<r}return true}function L(e,t){if(!t||!t.autorangeoptions)return e;var r=e[0];var n=e[1];var a=t.autorangeoptions.include;if(a!==undefined){var o=t.d2l(r);var s=t.d2l(n);if(!i.isArrayOrTypedArray(a))a=[a];for(var l=0;l<a.length;l++){var u=t.d2l(a[l]);if(o>=u){o=u;r=u}if(s<=u){s=u;n=u}}}r=M(r,t);n=S(n,t);return[r,n]}},23074:function(e){"use strict";e.exports=function e(t,r,n){var a,i;if(n){var o=r==="reversed"||r==="min reversed"||r==="max reversed";a=n[o?1:0];i=n[o?0:1]}var s=t("autorangeoptions.minallowed",i===null?a:undefined);var l=t("autorangeoptions.maxallowed",a===null?i:undefined);if(s===undefined)t("autorangeoptions.clipmin");if(l===undefined)t("autorangeoptions.clipmax");t("autorangeoptions.include")}},89298:function(e,t,r){"use strict";var n=r(39898);var a=r(92770);var i=r(74875);var o=r(73972);var s=r(71828);var l=s.strTranslate;var u=r(63893);var f=r(92998);var c=r(7901);var v=r(91424);var h=r(13838);var p=r(66287);var d=r(50606);var g=d.ONEMAXYEAR;var y=d.ONEAVGYEAR;var m=d.ONEMINYEAR;var x=d.ONEMAXQUARTER;var b=d.ONEAVGQUARTER;var _=d.ONEMINQUARTER;var w=d.ONEMAXMONTH;var T=d.ONEAVGMONTH;var k=d.ONEMINMONTH;var A=d.ONEWEEK;var M=d.ONEDAY;var S=M/2;var E=d.ONEHOUR;var L=d.ONEMIN;var C=d.ONESEC;var I=d.MINUS_SIGN;var P=d.BADNUM;var O={K:"zeroline"};var D={K:"gridline",L:"path"};var z={K:"minor-gridline",L:"path"};var R={K:"tick",L:"path"};var F={K:"tick",L:"text"};var B={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]};var N=r(18783);var j=N.MID_SHIFT;var U=N.CAP_SHIFT;var V=N.LINE_SPACING;var H=N.OPPOSITE_SIDE;var q=3;var G=e.exports={};G.setConvert=r(21994);var Z=r(4322);var Y=r(41675);var W=Y.idSort;var X=Y.isLinked;G.id2name=Y.id2name;G.name2id=Y.name2id;G.cleanId=Y.cleanId;G.list=Y.list;G.listIds=Y.listIds;G.getFromId=Y.getFromId;G.getFromTrace=Y.getFromTrace;var J=r(71739);G.getAutoRange=J.getAutoRange;G.findExtremes=J.findExtremes;var K=1e-4;function $(e){var t=(e[1]-e[0])*K;return[e[0]-t,e[1]+t]}G.coerceRef=function(e,t,r,n,a,i){var o=n.charAt(n.length-1);var l=r._fullLayout._subplots[o+"axis"];var u=n+"ref";var f={};if(!a)a=l[0]||(typeof i==="string"?i:i[0]);if(!i)i=a;l=l.concat(l.map((function(e){return e+" domain"})));f[u]={valType:"enumerated",values:l.concat(i?typeof i==="string"?[i]:i:[]),dflt:a};return s.coerce(e,t,f,u)};G.getRefType=function(e){if(e===undefined){return e}if(e==="paper"){return"paper"}if(e==="pixel"){return"pixel"}if(/( domain)$/.test(e)){return"domain"}else{return"range"}};G.coercePosition=function(e,t,r,n,a,i){var o,l;var u=G.getRefType(n);if(u!=="range"){o=s.ensureNumber;l=r(a,i)}else{var f=G.getFromId(t,n);i=f.fraction2r(i);l=r(a,i);o=f.cleanPos}e[a]=o(l)};G.cleanPosition=function(e,t,r){var n=r==="paper"||r==="pixel"?s.ensureNumber:G.getFromId(t,r).cleanPos;return n(e)};G.redrawComponents=function(e,t){t=t?t:G.listIds(e);var r=e._fullLayout;function n(n,a,i,s){var l=o.getComponentMethod(n,a);var u={};for(var f=0;f<t.length;f++){var c=r[G.id2name(t[f])];var v=c[i];for(var h=0;h<v.length;h++){var p=v[h];if(!u[p]){l(e,p);u[p]=1;if(s)return}}}}n("annotations","drawOne","_annIndices");n("shapes","drawOne","_shapeIndices");n("images","draw","_imgIndices",true);n("selections","drawOne","_selectionIndices")};var Q=G.getDataConversions=function(e,t,r,n){var a;var i=r==="x"||r==="y"||r==="z"?r:n;if(Array.isArray(i)){a={type:Z(n,undefined,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]};G.setConvert(a);if(a.type==="category"){for(var o=0;o<n.length;o++){a.d2c(n[o])}}}else{a=G.getFromTrace(e,t,i)}if(a)return{d2c:a.d2c,c2d:a.c2d};if(i==="ids")return{d2c:te,c2d:te};return{d2c:ee,c2d:ee}};function ee(e){return+e}function te(e){return String(e)}G.getDataToCoordFunc=function(e,t,r,n){return Q(e,t,r,n).d2c};G.counterLetter=function(e){var t=e.charAt(0);if(t==="x")return"y";if(t==="y")return"x"};G.minDtick=function(e,t,r,n){if(["log","category","multicategory"].indexOf(e.type)!==-1||!n){e._minDtick=0}else if(e._minDtick===undefined){e._minDtick=t;e._forceTick0=r}else if(e._minDtick){if((e._minDtick/t+1e-6)%1<2e-6&&((r-e._forceTick0)/t%1+1.000001)%1<2e-6){e._minDtick=t;e._forceTick0=r}else if((t/e._minDtick+1e-6)%1>2e-6||((r-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6){e._minDtick=0}}};G.saveRangeInitial=function(e,t){var r=G.list(e,"",true);var n=false;for(var a=0;a<r.length;a++){var i=r[a];var o=i._rangeInitial0===undefined&&i._rangeInitial1===undefined;var s=o||i.range[0]!==i._rangeInitial0||i.range[1]!==i._rangeInitial1;var l=i.autorange;if(o&&l!==true||t&&s){i._rangeInitial0=l==="min"||l==="max reversed"?undefined:i.range[0];i._rangeInitial1=l==="max"||l==="min reversed"?undefined:i.range[1];i._autorangeInitial=l;n=true}}return n};G.saveShowSpikeInitial=function(e,t){var r=G.list(e,"",true);var n=false;var a="on";for(var i=0;i<r.length;i++){var o=r[i];var s=o._showSpikeInitial===undefined;var l=s||!(o.showspikes===o._showspikes);if(s||t&&l){o._showSpikeInitial=o.showspikes;n=true}if(a==="on"&&!o.showspikes){a="off"}}e._fullLayout._cartesianSpikesEnabled=a;return n};G.autoBin=function(e,t,r,n,i,o){var l=s.aggNums(Math.min,null,e);var u=s.aggNums(Math.max,null,e);if(t.type==="category"||t.type==="multicategory"){return{start:l-.5,end:u+.5,size:Math.max(1,Math.round(o)||1),_dataSpan:u-l}}if(!i)i=t.calendar;var f;if(t.type==="log"){f={type:"linear",range:[l,u]}}else{f={type:t.type,range:s.simpleMap([l,u],t.c2r,0,i),calendar:i}}G.setConvert(f);o=o&&p.dtick(o,f.type);if(o){f.dtick=o;f.tick0=p.tick0(undefined,f.type,i)}else{var c;if(r)c=(u-l)/r;else{var v=s.distinctVals(e);var h=Math.pow(10,Math.floor(Math.log(v.minDiff)/Math.LN10));var d=h*s.roundUp(v.minDiff/h,[.9,1.9,4.9,9.9],true);c=Math.max(d,2*s.stdev(e)/Math.pow(e.length,n?.25:.4));if(!a(c))c=1}G.autoTicks(f,c)}var g=f.dtick;var y=G.tickIncrement(G.tickFirst(f),g,"reverse",i);var m,x;if(typeof g==="number"){y=re(y,e,f,l,u);x=1+Math.floor((u-y)/g);m=y+x*g}else{if(f.dtick.charAt(0)==="M"){y=ne(y,e,g,l,i)}m=y;x=0;while(m<=u){m=G.tickIncrement(m,g,false,i);x++}}return{start:t.c2r(y,0,i),end:t.c2r(m,0,i),size:g,_dataSpan:u-l}};function re(e,t,r,n,i){var o=0;var s=0;var l=0;var u=0;function f(t){return(1+(t-e)*100/r.dtick)%100<2}for(var c=0;c<t.length;c++){if(t[c]%1===0)l++;else if(!a(t[c]))u++;if(f(t[c]))o++;if(f(t[c]+r.dtick/2))s++}var v=t.length-u;if(l===v&&r.type!=="date"){if(r.dtick<1){e=n-.5*r.dtick}else{e-=.5;if(e+r.dtick<n)e+=r.dtick}}else if(s<v*.1){if(o>v*.3||f(n)||f(i)){var h=r.dtick/2;e+=e+h<n?h:-h}}return e}function ne(e,t,r,n,a){var i=s.findExactDates(t,a);var o=.8;if(i.exactDays>o){var l=Number(r.substr(1));if(i.exactYears>o&&l%12===0){e=G.tickIncrement(e,"M6","reverse")+M*1.5}else if(i.exactMonths>o){e=G.tickIncrement(e,"M1","reverse")+M*15.5}else{e-=S}var u=G.tickIncrement(e,r);if(u<=n)return u}return e}G.prepMinorTicks=function(e,t,r){if(!t.minor.dtick){delete e.dtick;var n=t.dtick&&a(t._tmin);var i;if(n){var o=G.tickIncrement(t._tmin,t.dtick,true);i=[t._tmin,o*.99+t._tmin*.01]}else{var l=s.simpleMap(t.range,t.r2l);i=[l[0],.8*l[0]+.2*l[1]]}e.range=s.simpleMap(i,t.l2r);e._isMinor=true;G.prepTicks(e,r);if(n){var u=a(t.dtick);var f=a(e.dtick);var c=u?t.dtick:+t.dtick.substring(1);var v=f?e.dtick:+e.dtick.substring(1);if(u&&f){if(!ae(c,v)){if(c===2*A&&v===3*M){e.dtick=A}else if(c===A&&!(t._input.minor||{}).nticks){e.dtick=M}else if(ie(c/v,2.5)){e.dtick=c/2}else{e.dtick=c}}else if(c===2*A&&v===2*M){e.dtick=A}}else if(String(t.dtick).charAt(0)==="M"){if(f){e.dtick="M1"}else{if(!ae(c,v)){e.dtick=t.dtick}else if(c>=12&&v===2){e.dtick="M3"}}}else if(String(e.dtick).charAt(0)==="L"){if(String(t.dtick).charAt(0)==="L"){if(!ae(c,v)){e.dtick=ie(c/v,2.5)?t.dtick/2:t.dtick}}else{e.dtick="D1"}}else if(e.dtick==="D2"&&+t.dtick>1){e.dtick=1}}e.range=t.range}if(t.minor._tick0Init===undefined){e.tick0=t.tick0}};function ae(e,t){return Math.abs((e/t+.5)%1-.5)<.001}function ie(e,t){return Math.abs(e/t-1)<.001}G.prepTicks=function(e,t){var r=s.simpleMap(e.range,e.r2l,undefined,undefined,t);if(e.tickmode==="auto"||!e.dtick){var n=e.nticks;var a;if(!n){if(e.type==="category"||e.type==="multicategory"){a=e.tickfont?s.bigFont(e.tickfont.size||12):15;n=e._length/a}else{a=e._id.charAt(0)==="y"?40:80;n=s.constrain(e._length/a,4,9)+1}if(e._name==="radialaxis")n*=2}if(!(e.minor&&e.minor.tickmode!=="array")){if(e.tickmode==="array")n*=100}e._roughDTick=Math.abs(r[1]-r[0])/n;G.autoTicks(e,e._roughDTick);if(e._minDtick>0&&e.dtick<e._minDtick*2){e.dtick=e._minDtick;e.tick0=e.l2r(e._forceTick0)}}if(e.ticklabelmode==="period"){se(e)}if(!e.tick0){e.tick0=e.type==="date"?"2000-01-01":0}if(e.type==="date"&&e.dtick<.1)e.dtick=.1;be(e)};function oe(e){return+e.substring(1)}function se(e){var t;function r(){return!(a(e.dtick)||e.dtick.charAt(0)!=="M")}var n=r();var i=G.getTickFormat(e);if(i){var o=e._dtickInit!==e.dtick;if(!/%[fLQsSMX]/.test(i)){if(/%[HI]/.test(i)){t=E;if(o&&!n&&e.dtick<E)e.dtick=E}else if(/%p/.test(i)){t=S;if(o&&!n&&e.dtick<S)e.dtick=S}else if(/%[Aadejuwx]/.test(i)){t=M;if(o&&!n&&e.dtick<M)e.dtick=M}else if(/%[UVW]/.test(i)){t=A;if(o&&!n&&e.dtick<A)e.dtick=A}else if(/%[Bbm]/.test(i)){t=T;if(o&&(n?oe(e.dtick)<1:e.dtick<k))e.dtick="M1"}else if(/%[q]/.test(i)){t=b;if(o&&(n?oe(e.dtick)<3:e.dtick<_))e.dtick="M3"}else if(/%[Yy]/.test(i)){t=y;if(o&&(n?oe(e.dtick)<12:e.dtick<m))e.dtick="M12"}}}n=r();if(n&&e.tick0===e._dowTick0){e.tick0=e._rawTick0}e._definedDelta=t}function le(e,t,r){for(var n=0;n<e.length;n++){var a=e[n].value;var i=n;var o=n+1;if(n<e.length-1){i=n;o=n+1}else if(n>0){i=n-1;o=n}else{i=n;o=n}var s=e[i].value;var l=e[o].value;var u=Math.abs(l-s);var f=r||u;var c=0;if(f>=m){if(u>=m&&u<=g){c=u}else{c=y}}else if(r===b&&f>=_){if(u>=_&&u<=x){c=u}else{c=b}}else if(f>=k){if(u>=k&&u<=w){c=u}else{c=T}}else if(r===A&&f>=A){c=A}else if(f>=M){c=M}else if(r===S&&f>=S){c=S}else if(r===E&&f>=E){c=E}var v;if(c>=u){c=u;v=true}var h=a+c;if(t.rangebreaks&&c>0){var p=84;var d=0;for(var L=0;L<p;L++){var C=(L+.5)/p;if(t.maskBreaks(a*(1-C)+C*h)!==P)d++}c*=d/p;if(!c){e[n].drop=true}if(v&&u>A)c=u}if(c>0||n===0){e[n].periodX=a+c/2}}}G.calcTicks=function e(t,r){var n=t.type;var i=t.calendar;var o=t.ticklabelstep;var l=t.ticklabelmode==="period";var u=s.simpleMap(t.range,t.r2l,undefined,undefined,r);var f=u[1]<u[0];var c=Math.min(u[0],u[1]);var v=Math.max(u[0],u[1]);var h=Math.max(1e3,t._length||0);var p=[];var d=[];var g=[];var y=[];var m=t.minor&&(t.minor.ticks||t.minor.showgrid);for(var x=1;x>=(m?0:1);x--){var b=!x;if(x){t._dtickInit=t.dtick;t._tick0Init=t.tick0}else{t.minor._dtickInit=t.minor.dtick;t.minor._tick0Init=t.minor.tick0}var _=x?t:s.extendFlat({},t,t.minor);if(b){G.prepMinorTicks(_,t,r)}else{G.prepTicks(_,r)}if(_.tickmode==="array"){if(x){g=[];p=ce(t)}else{y=[];d=ce(t)}continue}if(_.tickmode==="sync"){g=[];p=fe(t);continue}var w=$(u);var k=w[0];var A=w[1];var M=a(_.dtick);var S=n==="log"&&!(M||_.dtick.charAt(0)==="L");var E=G.tickFirst(_,r);if(x){t._tmin=E;if(E<k!==f)break;if(n==="category"||n==="multicategory"){A=f?Math.max(-.5,A):Math.min(t._categories.length-.5,A)}}var L=null;var C=E;var I;if(x){var O;if(M){O=t.dtick}else{if(n==="date"){if(typeof t.dtick==="string"&&t.dtick.charAt(0)==="M"){O=T*t.dtick.substring(1)}}else{O=t._roughDTick}}I=Math.round((t.r2l(C)-t.r2l(t.tick0))/O)-1}var D=_.dtick;if(_.rangebreaks&&_._tick0Init!==_.tick0){C=rt(C,t);if(!f){C=G.tickIncrement(C,D,!f,i)}}if(x&&l){C=G.tickIncrement(C,D,!f,i);I--}for(;f?C>=A:C<=A;C=G.tickIncrement(C,D,f,i)){if(x)I++;if(_.rangebreaks){if(!f){if(C<k)continue;if(_.maskBreaks(C)===P&&rt(C,_)>=v)break}}if(g.length>h||C===L)break;L=C;var z={value:C};if(x){if(S&&C!==(C|0)){z.simpleLabel=true}if(o>1&&I%o){z.skipLabel=true}g.push(z)}else{z.minor=true;y.push(z)}}}if(m){var R=t.minor.ticks==="inside"&&t.ticks==="outside"||t.minor.ticks==="outside"&&t.ticks==="inside";if(!R){var F=g.map((function(e){return e.value}));var B=[];for(var N=0;N<y.length;N++){var j=y[N];var U=j.value;if(F.indexOf(U)!==-1){continue}var V=false;for(var H=0;!V&&H<g.length;H++){if(1e7+g[H].value===1e7+U){V=true}}if(!V)B.push(j)}y=B}}if(l)le(g,t,t._definedDelta);var q;if(t.rangebreaks){var Z=t._id.charAt(0)==="y";var Y=1;if(t.tickmode==="auto"){Y=t.tickfont?t.tickfont.size:12}var W=NaN;for(q=g.length-1;q>-1;q--){if(g[q].drop){g.splice(q,1);continue}g[q].value=rt(g[q].value,t);var X=t.c2p(g[q].value);if(Z?W>X-Y:W<X+Y){g.splice(f?q+1:q,1)}else{W=X}}}if(tt(t)&&Math.abs(u[1]-u[0])===360){g.pop()}t._tmax=(g[g.length-1]||{}).value;t._prevDateHead="";t._inCalcTicks=true;var J;var K=function(e){e.text="";t._prevDateHead=J};g=g.concat(y);var Q,ee;for(q=0;q<g.length;q++){var te=g[q].minor;var re=g[q].value;if(te){d.push({x:re,minor:true})}else{J=t._prevDateHead;Q=G.tickText(t,re,false,g[q].simpleLabel);ee=g[q].periodX;if(ee!==undefined){Q.periodX=ee;if(ee>v||ee<c){if(ee>v)Q.periodX=v;if(ee<c)Q.periodX=c;K(Q)}}if(g[q].skipLabel){K(Q)}p.push(Q)}}p=p.concat(d);t._inCalcTicks=false;if(l&&p.length){p[0].noTick=true}return p};function ue(e,t){if(e.rangebreaks){t=t.filter((function(t){return e.maskBreaks(t.x)!==P}))}return t}function fe(e){var t=e._mainAxis;var r=[];if(t._vals){for(var n=0;n<t._vals.length;n++){if(t._vals[n].noTick){continue}var a=t.l2p(t._vals[n].x);var i=e.p2l(a);var o=G.tickText(e,i);if(t._vals[n].minor){o.minor=true;o.text=""}r.push(o)}}r=ue(e,r);return r}function ce(e){var t=s.simpleMap(e.range,e.r2l);var r=$(t);var n=Math.min(r[0],r[1]);var a=Math.max(r[0],r[1]);var i=e.type==="category"?e.d2l_noadd:e.d2l;if(e.type==="log"&&String(e.dtick).charAt(0)!=="L"){e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1)}var o=[];for(var l=0;l<=1;l++){if(l&&!e.minor)continue;var u=!l?e.tickvals:e.minor.tickvals;var f=!l?e.ticktext:[];if(!u)continue;if(!Array.isArray(f))f=[];for(var c=0;c<u.length;c++){var v=i(u[c]);if(v>n&&v<a){var h=f[c]===undefined?G.tickText(e,v):_e(e,v,String(f[c]));if(l){h.minor=true;h.text=""}o.push(h)}}}o=ue(e,o);return o}var ve=[2,5,10];var he=[1,2,3,6,12];var pe=[1,2,5,10,15,30];var de=[1,2,3,7,14];var ge=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1];var ye=[-.301,0,.301,.699,1];var me=[15,30,45,90,180];function xe(e,t,r){return t*s.roundUp(e/t,r)}G.autoTicks=function(e,t,r){var n;function i(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if(e.type==="date"){e.tick0=s.dateTick0(e.calendar,0);var o=2*t;if(o>y){t/=y;n=i(10);e.dtick="M"+12*xe(t,n,ve)}else if(o>T){t/=T;e.dtick="M"+xe(t,1,he)}else if(o>M){e.dtick=xe(t,M,e._hasDayOfWeekBreaks?[1,2,7,14]:de);if(!r){var l=G.getTickFormat(e);var u=e.ticklabelmode==="period";if(u)e._rawTick0=e.tick0;if(/%[uVW]/.test(l)){e.tick0=s.dateTick0(e.calendar,2)}else{e.tick0=s.dateTick0(e.calendar,1)}if(u)e._dowTick0=e.tick0}}else if(o>E){e.dtick=xe(t,E,he)}else if(o>L){e.dtick=xe(t,L,pe)}else if(o>C){e.dtick=xe(t,C,pe)}else{n=i(10);e.dtick=xe(t,n,ve)}}else if(e.type==="log"){e.tick0=0;var f=s.simpleMap(e.range,e.r2l);if(e._isMinor){t*=1.5}if(t>.7){e.dtick=Math.ceil(t)}else if(Math.abs(f[1]-f[0])<1){var c=1.5*Math.abs((f[1]-f[0])/t);t=Math.abs(Math.pow(10,f[1])-Math.pow(10,f[0]))/c;n=i(10);e.dtick="L"+xe(t,n,ve)}else{e.dtick=t>.3?"D2":"D1"}}else if(e.type==="category"||e.type==="multicategory"){e.tick0=0;e.dtick=Math.ceil(Math.max(t,1))}else if(tt(e)){e.tick0=0;n=1;e.dtick=xe(t,n,me)}else{e.tick0=0;n=i(10);e.dtick=xe(t,n,ve)}if(e.dtick===0)e.dtick=1;if(!a(e.dtick)&&typeof e.dtick!=="string"){var v=e.dtick;e.dtick=1;throw"ax.dtick error: "+String(v)}};function be(e){var t=e.dtick;e._tickexponent=0;if(!a(t)&&typeof t!=="string"){t=1}if(e.type==="category"||e.type==="multicategory"){e._tickround=null}if(e.type==="date"){var r=e.r2l(e.tick0);var n=e.l2r(r).replace(/(^-|i)/g,"");var i=n.length;if(String(t).charAt(0)==="M"){if(i>10||n.substr(5)!=="01-01")e._tickround="d";else e._tickround=+t.substr(1)%12===0?"y":"m"}else if(t>=M&&i<=10||t>=M*15)e._tickround="d";else if(t>=L&&i<=16||t>=E)e._tickround="M";else if(t>=C&&i<=19||t>=L)e._tickround="S";else{var o=e.l2r(r+t).replace(/^-/,"").length;e._tickround=Math.max(i,o)-20;if(e._tickround<0)e._tickround=4}}else if(a(t)||t.charAt(0)==="L"){var s=e.range.map(e.r2d||Number);if(!a(t))t=Number(t.substr(1));e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var l=Math.max(Math.abs(s[0]),Math.abs(s[1]));var u=Math.floor(Math.log(l)/Math.LN10+.01);var f=e.minexponent===undefined?3:e.minexponent;if(Math.abs(u)>f){if(Ce(e.exponentformat)&&!Ie(u)){e._tickexponent=3*Math.round((u-1)/3)}else e._tickexponent=u}}else{e._tickround=null}}G.tickIncrement=function(e,t,r,i){var o=r?-1:1;if(a(t))return s.increment(e,o*t);var l=t.charAt(0);var u=o*Number(t.substr(1));if(l==="M")return s.incrementMonth(e,u,i);if(l==="L")return Math.log(Math.pow(10,e)+u)/Math.LN10;if(l==="D"){var f=t==="D2"?ye:ge;var c=e+o*.01;var v=s.roundUp(s.mod(c,1),f,r);return Math.floor(c)+Math.log(n.round(Math.pow(10,v),1))/Math.LN10}throw"unrecognized dtick "+String(t)};G.tickFirst=function(e,t){var r=e.r2l||Number;var i=s.simpleMap(e.range,r,undefined,undefined,t);var o=i[1]<i[0];var l=o?Math.floor:Math.ceil;var u=$(i)[0];var f=e.dtick;var c=r(e.tick0);if(a(f)){var v=l((u-c)/f)*f+c;if(e.type==="category"||e.type==="multicategory"){v=s.constrain(v,0,e._categories.length-1)}return v}var h=f.charAt(0);var p=Number(f.substr(1));if(h==="M"){var d=0;var g=c;var y,m,x;while(d<10){y=G.tickIncrement(g,f,o,e.calendar);if((y-u)*(g-u)<=0){if(o)return Math.min(g,y);return Math.max(g,y)}m=(u-(g+y)/2)/(y-g);x=h+(Math.abs(Math.round(m))||1)*p;g=G.tickIncrement(g,x,m<0?!o:o,e.calendar);d++}s.error("tickFirst did not converge",e);return g}else if(h==="L"){return Math.log(l((Math.pow(10,u)-c)/p)*p+c)/Math.LN10}else if(h==="D"){var b=f==="D2"?ye:ge;var _=s.roundUp(s.mod(u,1),b,o);return Math.floor(u)+Math.log(n.round(Math.pow(10,_),1))/Math.LN10}else throw"unrecognized dtick "+String(f)};G.tickText=function(e,t,r,n){var a=_e(e,t);var i=e.tickmode==="array";var o=r||i;var l=e.type;var u=l==="category"?e.d2l_noadd:e.d2l;var f;if(i&&Array.isArray(e.ticktext)){var c=s.simpleMap(e.range,e.r2l);var v=(Math.abs(c[1]-c[0])-(e._lBreaks||0))/1e4;for(f=0;f<e.ticktext.length;f++){if(Math.abs(t-u(e.tickvals[f]))<v)break}if(f<e.ticktext.length){a.text=String(e.ticktext[f]);return a}}function h(n){if(n===undefined)return true;if(r)return n==="none";var a={first:e._tmin,last:e._tmax}[n];return n!=="all"&&t!==a}var p=r?"never":e.exponentformat!=="none"&&h(e.showexponent)?"hide":"";if(l==="date")we(e,a,r,o);else if(l==="log")Te(e,a,r,o,p);else if(l==="category")ke(e,a);else if(l==="multicategory")Ae(e,a,r);else if(tt(e))Se(e,a,r,o,p);else Me(e,a,r,o,p);if(!n){if(e.tickprefix&&!h(e.showtickprefix))a.text=e.tickprefix+a.text;if(e.ticksuffix&&!h(e.showticksuffix))a.text+=e.ticksuffix}if(e.labelalias&&e.labelalias.hasOwnProperty(a.text)){var d=e.labelalias[a.text];if(typeof d==="string")a.text=d}if(e.tickson==="boundaries"||e.showdividers){var g=function(t){var r=e.l2p(t);return r>=0&&r<=e._length?t:null};a.xbnd=[g(a.x-.5),g(a.x+e.dtick-.5)]}return a};G.hoverLabelText=function(e,t,r){if(r)e=s.extendFlat({},e,{hoverformat:r});var n=Array.isArray(t)?t[0]:t;var a=Array.isArray(t)?t[1]:undefined;if(a!==undefined&&a!==n){return G.hoverLabelText(e,n,r)+" - "+G.hoverLabelText(e,a,r)}var i=e.type==="log"&&n<=0;var o=G.tickText(e,e.c2l(i?-n:n),"hover").text;if(i){return n===0?"0":I+o}return o};function _e(e,t,r){var n=e.tickfont||{};return{x:t,dx:0,dy:0,text:r||"",fontSize:n.size,font:n.family,fontColor:n.color}}function we(e,t,r,n){var i=e._tickround;var o=r&&e.hoverformat||G.getTickFormat(e);n=!o&&n;if(n){if(a(i))i=4;else i={y:"m",m:"d",d:"M",M:"S",S:4}[i]}var l=s.formatDate(t.x,o,i,e._dateFormat,e.calendar,e._extraFormat);var u;var f=l.indexOf("\n");if(f!==-1){u=l.substr(f+1);l=l.substr(0,f)}if(n){if(u!==undefined&&(l==="00:00:00"||l==="00:00")){l=u;u=""}else if(l.length===8){l=l.replace(/:00$/,"")}}if(u){if(r){if(i==="d")l+=", "+u;else l=u+(l?", "+l:"")}else{if(!e._inCalcTicks||e._prevDateHead!==u){e._prevDateHead=u;l+="<br>"+u}else{var c=nt(e);var v=e._trueSide||e.side;if(!c&&v==="top"||c&&v==="bottom"){l+="<br> "}}}}t.text=l}function Te(e,t,r,n,i){var o=e.dtick;var l=t.x;var u=e.tickformat;var f=typeof o==="string"&&o.charAt(0);if(i==="never"){i=""}if(n&&f!=="L"){o="L3";f="L"}if(u||f==="L"){t.text=Pe(Math.pow(10,l),e,i,n)}else if(a(o)||f==="D"&&s.mod(l+.01,1)<.1){var c=Math.round(l);var v=Math.abs(c);var h=e.exponentformat;if(h==="power"||Ce(h)&&Ie(c)){if(c===0)t.text=1;else if(c===1)t.text="10";else t.text="10<sup>"+(c>1?"":I)+v+"</sup>";t.fontSize*=1.25}else if((h==="e"||h==="E")&&v>2){t.text="1"+h+(c>0?"+":I)+v}else{t.text=Pe(Math.pow(10,l),e,"","fakehover");if(o==="D1"&&e._id.charAt(0)==="y"){t.dy-=t.fontSize/6}}}else if(f==="D"){t.text=String(Math.round(Math.pow(10,s.mod(l,1))));t.fontSize*=.75}else throw"unrecognized dtick "+String(o);if(e.dtick==="D1"){var p=String(t.text).charAt(0);if(p==="0"||p==="1"){if(e._id.charAt(0)==="y"){t.dx-=t.fontSize/4}else{t.dy+=t.fontSize/2;t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(l<0?.5:.25)}}}}function ke(e,t){var r=e._categories[Math.round(t.x)];if(r===undefined)r="";t.text=String(r)}function Ae(e,t,r){var n=Math.round(t.x);var a=e._categories[n]||[];var i=a[1]===undefined?"":String(a[1]);var o=a[0]===undefined?"":String(a[0]);if(r){t.text=o+" - "+i}else{t.text=i;t.text2=o}}function Me(e,t,r,n,a){if(a==="never"){a=""}else if(e.showexponent==="all"&&Math.abs(t.x/e.dtick)<1e-6){a="hide"}t.text=Pe(t.x,e,a,n)}function Se(e,t,r,n,a){if(e.thetaunit==="radians"&&!r){var i=t.x/180;if(i===0){t.text="0"}else{var o=Ee(i);if(o[1]>=100){t.text=Pe(s.deg2rad(t.x),e,a,n)}else{var l=t.x<0;if(o[1]===1){if(o[0]===1)t.text="";else t.text=o[0]+""}else{t.text=["<sup>",o[0],"</sup>","","<sub>",o[1],"</sub>",""].join("")}if(l)t.text=I+t.text}}}else{t.text=Pe(t.x,e,a,n)}}function Ee(e){function t(e,t){return Math.abs(e-t)<=1e-6}function r(e,n){return t(n,0)?e:r(n,e%n)}function n(e){var r=1;while(!t(Math.round(e*r)/r,e)){r*=10}return r}var a=n(e);var i=e*a;var o=Math.abs(r(i,a));return[Math.round(i/o),Math.round(a/o)]}var Le=["f","p","n","","m","","k","M","G","T"];function Ce(e){return e==="SI"||e==="B"}function Ie(e){return e>14||e<-15}function Pe(e,t,r,n){var i=e<0;var o=t._tickround;var l=r||t.exponentformat||"B";var u=t._tickexponent;var f=G.getTickFormat(t);var c=t.separatethousands;if(n){var v={exponentformat:l,minexponent:t.minexponent,dtick:t.showexponent==="none"?t.dtick:a(e)?Math.abs(e)||1:1,range:t.showexponent==="none"?t.range.map(t.r2d):[0,e||1]};be(v);o=(Number(v._tickround)||0)+4;u=v._tickexponent;if(t.hoverformat)f=t.hoverformat}if(f)return t._numFormat(f)(e).replace(/-/g,I);var h=Math.pow(10,-o)/2;if(l==="none")u=0;e=Math.abs(e);if(e<h){e="0";i=false}else{e+=h;if(u){e*=Math.pow(10,-u);o+=u}if(o===0)e=String(Math.floor(e));else if(o<0){e=String(Math.round(e));e=e.substr(0,e.length+o);for(var p=o;p<0;p++)e+="0"}else{e=String(e);var d=e.indexOf(".")+1;if(d)e=e.substr(0,d+o).replace(/\.?0+$/,"")}e=s.numSeparate(e,t._separators,c)}if(u&&l!=="hide"){if(Ce(l)&&Ie(u))l="power";var g;if(u<0)g=I+-u;else if(l!=="power")g="+"+u;else g=String(u);if(l==="e"||l==="E"){e+=l+g}else if(l==="power"){e+="10<sup>"+g+"</sup>"}else if(l==="B"&&u===9){e+="B"}else if(Ce(l)){e+=Le[u/3+5]}}if(i)return I+e;return e}G.getTickFormat=function(e){var t;function r(e){return typeof e!=="string"?e:Number(e.replace("M",""))*T}function n(e,t){var r=["L","D"];if(typeof e===typeof t){if(typeof e==="number"){return e-t}else{var n=r.indexOf(e.charAt(0));var a=r.indexOf(t.charAt(0));if(n===a){return Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,""))}else{return n-a}}}else{return typeof e==="number"?1:-1}}function a(e,t,r){var n=r||function(e){return e};var a=t[0];var i=t[1];return(!a&&typeof a!=="number"||n(a)<=n(e))&&(!i&&typeof i!=="number"||n(i)>=n(e))}function i(e,t){var r=t[0]===null;var a=t[1]===null;var i=n(e,t[0])>=0;var o=n(e,t[1])<=0;return(r||i)&&(a||o)}var o,s;if(e.tickformatstops&&e.tickformatstops.length>0){switch(e.type){case"date":case"linear":{for(t=0;t<e.tickformatstops.length;t++){s=e.tickformatstops[t];if(s.enabled&&a(e.dtick,s.dtickrange,r)){o=s;break}}break}case"log":{for(t=0;t<e.tickformatstops.length;t++){s=e.tickformatstops[t];if(s.enabled&&i(e.dtick,s.dtickrange)){o=s;break}}break}default:}}return o?o.value:e.tickformat};G.getSubplots=function(e,t){var r=e._fullLayout._subplots;var n=r.cartesian.concat(r.gl2d||[]);var a=t?G.findSubplotsWithAxis(n,t):n;a.sort((function(e,t){var r=e.substr(1).split("y");var n=t.substr(1).split("y");if(r[0]===n[0])return+r[1]-+n[1];return+r[0]-+n[0]}));return a};G.findSubplotsWithAxis=function(e,t){var r=new RegExp(t._id.charAt(0)==="x"?"^"+t._id+"y":t._id+"$");var n=[];for(var a=0;a<e.length;a++){var i=e[a];if(r.test(i))n.push(i)}return n};G.makeClipPaths=function(e){var t=e._fullLayout;if(t._hasOnlyLargeSploms)return;var r={_offset:0,_length:t.width,_id:""};var a={_offset:0,_length:t.height,_id:""};var i=G.list(e,"x",true);var o=G.list(e,"y",true);var s=[];var l,u;for(l=0;l<i.length;l++){s.push({x:i[l],y:a});for(u=0;u<o.length;u++){if(l===0)s.push({x:r,y:o[u]});s.push({x:i[l],y:o[u]})}}var f=t._clips.selectAll(".axesclip").data(s,(function(e){return e.x._id+e.y._id}));f.enter().append("clipPath").classed("axesclip",true).attr("id",(function(e){return"clip"+t._uid+e.x._id+e.y._id})).append("rect");f.exit().remove();f.each((function(e){n.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})}))};G.draw=function(e,t,r){var n=e._fullLayout;if(t==="redraw"){n._paper.selectAll("g.subplot").each((function(e){var t=e[0];var r=n._plots[t];if(r){var a=r.xaxis;var i=r.yaxis;r.xaxislayer.selectAll("."+a._id+"tick").remove();r.yaxislayer.selectAll("."+i._id+"tick").remove();r.xaxislayer.selectAll("."+a._id+"tick2").remove();r.yaxislayer.selectAll("."+i._id+"tick2").remove();r.xaxislayer.selectAll("."+a._id+"divider").remove();r.yaxislayer.selectAll("."+i._id+"divider").remove();if(r.minorGridlayer)r.minorGridlayer.selectAll("path").remove();if(r.gridlayer)r.gridlayer.selectAll("path").remove();if(r.zerolinelayer)r.zerolinelayer.selectAll("path").remove();n._infolayer.select(".g-"+a._id+"title").remove();n._infolayer.select(".g-"+i._id+"title").remove()}}))}var a=!t||t==="redraw"?G.listIds(e):t;var i=G.list(e);var o=i.filter((function(e){return e.autoshift})).map((function(e){return e.overlaying}));a.map((function(t){var r=G.getFromId(e,t);if(r.tickmode==="sync"&&r.overlaying){var n=a.findIndex((function(e){return e===r.overlaying}));if(n>=0){a.unshift(a.splice(n,1).shift())}}}));var l={false:{left:0,right:0}};return s.syncOrAsync(a.map((function(t){return function(){if(!t)return;var n=G.getFromId(e,t);if(!r)r={};r.axShifts=l;r.overlayingShiftedAx=o;var a=G.drawOne(e,n,r);if(n._shiftPusher){it(n,n._fullDepth||0,l,true)}n._r=n.range.slice();n._rl=s.simpleMap(n._r,n.r2l);return a}})))};G.drawOne=function(e,t,r){r=r||{};var n=r.axShifts||{};var a=r.overlayingShiftedAx||[];var l,u,f;t.setScale();var c=e._fullLayout;var v=t._id;var h=v.charAt(0);var p=G.counterLetter(v);var d=c._plots[t._mainSubplot];if(!d)return;t._shiftPusher=t.autoshift||a.indexOf(t._id)!==-1||a.indexOf(t.overlaying)!==-1;if(t._shiftPusher&t.anchor==="free"){var g=t.linewidth/2||0;if(t.ticks==="inside"){g+=t.ticklen}it(t,g,n,true);it(t,t.shift||0,n,false)}if(r.skipTitle!==true||t._shift===undefined)t._shift=ot(t,n);var y=d[h+"axislayer"];var m=t._mainLinePosition;var x=m+=t._shift;var b=t._mainMirrorPosition;var _=t._vals=G.calcTicks(t);var w=[t.mirror,x,b].join("_");for(l=0;l<_.length;l++){_[l].axInfo=w}t._selections={};if(t._tickAngles)t._prevTickAngles=t._tickAngles;t._tickAngles={};t._depth=null;var T={};function k(e){var r=v+(e||"tick");if(!T[r])T[r]=Fe(t,r);return T[r]}if(!t.visible)return;var A=G.makeTransTickFn(t);var M=G.makeTransTickLabelFn(t);var S;var E;var L=t.ticks==="inside";var C=t.ticks==="outside";if(t.tickson==="boundaries"){var I=De(t,_);E=G.clipEnds(t,I);S=L?E:I}else{E=G.clipEnds(t,_);S=L&&t.ticklabelmode!=="period"?E:_}var P=t._gridVals=E;var O=Re(t,_);if(!c._hasOnlyLargeSploms){var D=t._subplotsWith;var z={};for(l=0;l<D.length;l++){u=D[l];f=c._plots[u];var R=f[p+"axis"];var F=R._mainAxis._id;if(z[F])continue;z[F]=1;var B=h==="x"?"M0,"+R._offset+"v"+R._length:"M"+R._offset+",0h"+R._length;G.drawGrid(e,t,{vals:P,counterAxis:R,layer:f.gridlayer.select("."+v),minorLayer:f.minorGridlayer.select("."+v),path:B,transFn:A});G.drawZeroLine(e,t,{counterAxis:R,layer:f.zerolinelayer,path:B,transFn:A})}}var N;var j=G.getTickSigns(t);var U=G.getTickSigns(t,"minor");if(t.ticks||t.minor&&t.minor.ticks){var q=G.makeTickPath(t,x,j[2]);var Z=G.makeTickPath(t,x,U[2],{minor:true});var Y;var W;var X;var J;if(t._anchorAxis&&t.mirror&&t.mirror!==true){Y=G.makeTickPath(t,b,j[3]);W=G.makeTickPath(t,b,U[3],{minor:true});X=q+Y;J=Z+W}else{Y="";W="";X=q;J=Z}if(t.showdividers&&C&&t.tickson==="boundaries"){var K={};for(l=0;l<O.length;l++){K[O[l].x]=1}N=function(e){return K[e.x]?Y:X}}else{N=function(e){return e.minor?J:X}}}G.drawTicks(e,t,{vals:S,layer:y,path:N,transFn:A});if(t.mirror==="allticks"){var $=Object.keys(t._linepositions||{});for(l=0;l<$.length;l++){u=$[l];f=c._plots[u];var Q=t._linepositions[u]||[];var ee=Q[0];var te=Q[1];var re=Q[2];var ne=G.makeTickPath(t,ee,re?j[0]:U[0],{minor:re})+G.makeTickPath(t,te,re?j[1]:U[1],{minor:re});G.drawTicks(e,t,{vals:S,layer:f[h+"axislayer"],path:ne,transFn:A})}}var ae=[];ae.push((function(){return G.drawLabels(e,t,{vals:_,layer:y,plotinfo:f,transFn:M,labelFns:G.makeLabelFns(t,x)})}));if(t.type==="multicategory"){var ie={x:2,y:10}[h];ae.push((function(){var r={x:"height",y:"width"}[h];var n=k()[r]+ie+(t._tickAngles[v+"tick"]?t.tickfont.size*V:0);return G.drawLabels(e,t,{vals:ze(t,_),layer:y,cls:v+"tick2",repositionOnUpdate:true,secondary:true,transFn:A,labelFns:G.makeLabelFns(t,x+n*j[4])})}));ae.push((function(){t._depth=j[4]*(k("tick2")[t.side]-x);return Ue(e,t,{vals:O,layer:y,path:G.makeTickPath(t,x,j[4],{len:t._depth}),transFn:A})}))}else if(t.title.hasOwnProperty("standoff")){ae.push((function(){t._depth=j[4]*(k()[t.side]-x)}))}var oe=o.getComponentMethod("rangeslider","isVisible")(t);if(!r.skipTitle&&!(oe&&t.side==="bottom")){ae.push((function(){return He(e,t)}))}ae.push((function(){var r=t.side.charAt(0);var n=H[t.side].charAt(0);var a=G.getPxPosition(e,t);var s=C?t.ticklen:0;var l;var u;var f;var v;if(t.automargin||oe||t._shiftPusher){if(t.type==="multicategory"){l=k("tick2")}else{l=k();if(h==="x"&&r==="b"){t._depth=Math.max(l.width>0?l.bottom-a:0,s)}}}var d=0;var g=0;if(t._shiftPusher){d=Math.max(s,l.height>0?r==="l"?a-l.left:l.right-a:0);if(t.title.text!==c._dfltTitle[h]){g=(t._titleStandoff||0)+(t._titleScoot||0);if(r==="l"){g+=Ve(t)}}t._fullDepth=Math.max(d,g)}if(t.automargin){u={x:0,y:0,r:0,l:0,t:0,b:0};var y=[0,1];var m=typeof t._shift==="number"?t._shift:0;if(h==="x"){if(r==="b"){u[r]=t._depth}else{u[r]=t._depth=Math.max(l.width>0?a-l.top:0,s);y.reverse()}if(l.width>0){var x=l.right-(t._offset+t._length);if(x>0){u.xr=1;u.r=x}var b=t._offset-l.left;if(b>0){u.xl=0;u.l=b}}}else{if(r==="l"){t._depth=Math.max(l.height>0?a-l.left:0,s);u[r]=t._depth-m}else{t._depth=Math.max(l.height>0?l.right-a:0,s);u[r]=t._depth+m;y.reverse()}if(l.height>0){var _=l.bottom-(t._offset+t._length);if(_>0){u.yb=0;u.b=_}var w=t._offset-l.top;if(w>0){u.yt=1;u.t=w}}}u[p]=t.anchor==="free"?t.position:t._anchorAxis.domain[y[0]];if(t.title.text!==c._dfltTitle[h]){u[r]+=Ve(t)+(t.title.standoff||0)}if(t.mirror&&t.anchor!=="free"){f={x:0,y:0,r:0,l:0,t:0,b:0};f[n]=t.linewidth;if(t.mirror&&t.mirror!==true)f[n]+=s;if(t.mirror===true||t.mirror==="ticks"){f[p]=t._anchorAxis.domain[y[1]]}else if(t.mirror==="all"||t.mirror==="allticks"){f[p]=[t._counterDomainMin,t._counterDomainMax][y[1]]}}}if(oe){v=o.getComponentMethod("rangeslider","autoMarginOpts")(e,t)}if(typeof t.automargin==="string"){Oe(u,t.automargin);Oe(f,t.automargin)}i.autoMargin(e,We(t),u);i.autoMargin(e,Xe(t),f);i.autoMargin(e,Je(t),v)}));return s.syncOrAsync(ae)};function Oe(e,t){if(!e)return;var r=Object.keys(B).reduce((function(e,r){if(t.indexOf(r)!==-1){B[r].forEach((function(t){e[t]=1}))}return e}),{});Object.keys(e).forEach((function(t){if(!r[t]){if(t.length===1)e[t]=0;else delete e[t]}}))}function De(e,t){var r=[];var n;var a=function(e,t){var n=e.xbnd[t];if(n!==null){r.push(s.extendFlat({},e,{x:n}))}};if(t.length){for(n=0;n<t.length;n++){a(t[n],0)}a(t[n-1],1)}return r}function ze(e,t){var r=[];var n={};for(var a=0;a<t.length;a++){var i=t[a];if(n[i.text2]){n[i.text2].push(i.x)}else{n[i.text2]=[i.x]}}for(var o in n){r.push(_e(e,s.interp(n[o],.5),o))}return r}function Re(e,t){var r=[];var n,a;var i=t.length&&t[t.length-1].x<t[0].x;var o=function(e,t){var n=e.xbnd[t];if(n!==null){r.push(s.extendFlat({},e,{x:n}))}};if(e.showdividers&&t.length){for(n=0;n<t.length;n++){var l=t[n];if(l.text2!==a){o(l,i?1:0)}a=l.text2}o(t[n-1],i?0:1)}return r}function Fe(e,t){var r,n;var a,i;if(e._selections[t].size()){r=Infinity;n=-Infinity;a=Infinity;i=-Infinity;e._selections[t].each((function(){var e=Ye(this);var t=v.bBox(e.node().parentNode);r=Math.min(r,t.top);n=Math.max(n,t.bottom);a=Math.min(a,t.left);i=Math.max(i,t.right)}))}else{r=0;n=0;a=0;i=0}return{top:r,bottom:n,left:a,right:i,height:n-r,width:i-a}}G.getTickSigns=function(e,t){var r=e._id.charAt(0);var n={x:"top",y:"right"}[r];var a=e.side===n?1:-1;var i=[-1,1,a,-a];var o=t?(e.minor||{}).ticks:e.ticks;if(o!=="inside"===(r==="x")){i=i.map((function(e){return-e}))}if(e.side){i.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)])}return i};G.makeTransTickFn=function(e){return e._id.charAt(0)==="x"?function(t){return l(e._offset+e.l2p(t.x),0)}:function(t){return l(0,e._offset+e.l2p(t.x))}};G.makeTransTickLabelFn=function(e){var t=Ne(e);var r=t[0];var n=t[1];return e._id.charAt(0)==="x"?function(t){return l(r+e._offset+e.l2p(Be(t)),n)}:function(t){return l(n,r+e._offset+e.l2p(Be(t)))}};function Be(e){return e.periodX!==undefined?e.periodX:e.x}function Ne(e){var t=e.ticklabelposition||"";var r=function(e){return t.indexOf(e)!==-1};var n=r("top");var a=r("left");var i=r("right");var o=r("bottom");var s=r("inside");var l=o||a||n||i;if(!l&&!s)return[0,0];var u=e.side;var f=l?(e.tickwidth||0)/2:0;var c=q;var v=e.tickfont?e.tickfont.size:12;if(o||n){f+=v*U;c+=(e.linewidth||0)/2}if(a||i){f+=(e.linewidth||0)/2;c+=q}if(s&&u==="top"){c-=v*(1-U)}if(a||n)f=-f;if(u==="bottom"||u==="right")c=-c;return[l?f:0,s?c:0]}G.makeTickPath=function(e,t,r,n){if(!n)n={};var a=n.minor;if(a&&!e.minor)return"";var i=n.len!==undefined?n.len:a?e.minor.ticklen:e.ticklen;var o=e._id.charAt(0);var s=(e.linewidth||1)/2;return o==="x"?"M0,"+(t+s*r)+"v"+i*r:"M"+(t+s*r)+",0h"+i*r};G.makeLabelFns=function(e,t,r){var n=e.ticklabelposition||"";var i=function(e){return n.indexOf(e)!==-1};var o=i("top");var l=i("left");var u=i("right");var f=i("bottom");var c=f||l||o||u;var v=i("inside");var h=n==="inside"&&e.ticks==="inside"||!v&&e.ticks==="outside"&&e.tickson!=="boundaries";var p=0;var d=0;var g=h?e.ticklen:0;if(v){g*=-1}else if(c){g=0}if(h){p+=g;if(r){var y=s.deg2rad(r);p=g*Math.cos(y)+1;d=g*Math.sin(y)}}if(e.showticklabels&&(h||e.showline)){p+=.2*e.tickfont.size}p+=(e.linewidth||1)/2*(v?-1:1);var m={labelStandoff:p,labelShift:d};var x,b,_,w;var T=0;var k=e.side;var A=e._id.charAt(0);var M=e.tickangle;var S;if(A==="x"){S=!v&&k==="bottom"||v&&k==="top";w=S?1:-1;if(v)w*=-1;x=d*w;b=t+p*w;_=S?1:-.2;if(Math.abs(M)===90){if(v){_+=j}else{if(M===-90&&k==="bottom"){_=U}else if(M===90&&k==="top"){_=j}else{_=.5}}T=j/2*(M/90)}m.xFn=function(e){return e.dx+x+T*e.fontSize};m.yFn=function(e){return e.dy+b+e.fontSize*_};m.anchorFn=function(e,t){if(c){if(l)return"end";if(u)return"start"}if(!a(t)||t===0||t===180){return"middle"}return t*w<0!==v?"end":"start"};m.heightFn=function(t,r,n){return r<-60||r>60?-.5*n:e.side==="top"!==v?-n:0}}else if(A==="y"){S=!v&&k==="left"||v&&k==="right";w=S?1:-1;if(v)w*=-1;x=p;b=d*w;_=0;if(!v&&Math.abs(M)===90){if(M===-90&&k==="left"||M===90&&k==="right"){_=U}else{_=.5}}if(v){var E=a(M)?+M:0;if(E!==0){var L=s.deg2rad(E);T=Math.abs(Math.sin(L))*U*w;_=0}}m.xFn=function(e){return e.dx+t-(x+e.fontSize*_)*w+T*e.fontSize};m.yFn=function(e){return e.dy+b+e.fontSize*j};m.anchorFn=function(e,t){if(a(t)&&Math.abs(t)===90){return"middle"}return S?"end":"start"};m.heightFn=function(t,r,n){if(e.side==="right")r*=-1;return r<-30?-n:r<30?-.5*n:0}}return m};function je(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}G.drawTicks=function(e,t,r){r=r||{};var a=t._id+"tick";var i=[].concat(t.minor&&t.minor.ticks?r.vals.filter((function(e){return e.minor&&!e.noTick})):[]).concat(t.ticks?r.vals.filter((function(e){return!e.minor&&!e.noTick})):[]);var o=r.layer.selectAll("path."+a).data(i,je);o.exit().remove();o.enter().append("path").classed(a,1).classed("ticks",1).classed("crisp",r.crisp!==false).each((function(e){return c.stroke(n.select(this),e.minor?t.minor.tickcolor:t.tickcolor)})).style("stroke-width",(function(r){return v.crispRound(e,r.minor?t.minor.tickwidth:t.tickwidth,1)+"px"})).attr("d",r.path).style("display",null);at(t,[R]);o.attr("transform",r.transFn)};G.drawGrid=function(e,t,r){r=r||{};if(t.tickmode==="sync"){return}var a=t._id+"grid";var i=t.minor&&t.minor.showgrid;var o=i?r.vals.filter((function(e){return e.minor})):[];var s=t.showgrid?r.vals.filter((function(e){return!e.minor})):[];var l=r.counterAxis;if(l&&G.shouldShowZeroLine(e,t,l)){var u=t.tickmode==="array";for(var f=0;f<s.length;f++){var h=s[f].x;if(u?!h:Math.abs(h)<t.dtick/100){s=s.slice(0,f).concat(s.slice(f+1));if(u)f--;else break}}}t._gw=v.crispRound(e,t.gridwidth,1);var p=!i?0:v.crispRound(e,t.minor.gridwidth,1);var d=r.layer;var g=r.minorLayer;for(var y=1;y>=0;y--){var m=y?d:g;if(!m)continue;var x=m.selectAll("path."+a).data(y?s:o,je);x.exit().remove();x.enter().append("path").classed(a,1).classed("crisp",r.crisp!==false);x.attr("transform",r.transFn).attr("d",r.path).each((function(e){return c.stroke(n.select(this),e.minor?t.minor.gridcolor:t.gridcolor||"#ddd")})).style("stroke-dasharray",(function(e){return v.dashStyle(e.minor?t.minor.griddash:t.griddash,e.minor?t.minor.gridwidth:t.gridwidth)})).style("stroke-width",(function(e){return(e.minor?p:t._gw)+"px"})).style("display",null);if(typeof r.path==="function")x.attr("d",r.path)}at(t,[D,z])};G.drawZeroLine=function(e,t,r){r=r||r;var n=t._id+"zl";var a=G.shouldShowZeroLine(e,t,r.counterAxis);var i=r.layer.selectAll("path."+n).data(a?[{x:0,id:t._id}]:[]);i.exit().remove();i.enter().append("path").classed(n,1).classed("zl",1).classed("crisp",r.crisp!==false).each((function(){r.layer.selectAll("path").sort((function(e,t){return W(e.id,t.id)}))}));i.attr("transform",r.transFn).attr("d",r.path).call(c.stroke,t.zerolinecolor||c.defaultLine).style("stroke-width",v.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null);at(t,[O])};G.drawLabels=function(e,t,r){r=r||{};var i=e._fullLayout;var o=t._id;var f=o.charAt(0);var c=r.cls||o+"tick";var h=r.vals.filter((function(e){return e.text}));var p=r.labelFns;var d=r.secondary?0:t.tickangle;var g=(t._prevTickAngles||{})[c];var y=r.layer.selectAll("g."+c).data(t.showticklabels?h:[],je);var m=[];y.enter().append("g").classed(c,1).append("text").attr("text-anchor","middle").each((function(t){var r=n.select(this);var a=e._promises.length;r.call(u.positionText,p.xFn(t),p.yFn(t)).call(v.font,t.font,t.fontSize,t.fontColor).text(t.text).call(u.convertToTspans,e);if(e._promises[a]){m.push(e._promises.pop().then((function(){x(r,d)})))}else{x(r,d)}}));at(t,[F]);y.exit().remove();if(r.repositionOnUpdate){y.each((function(e){n.select(this).select("text").call(u.positionText,p.xFn(e),p.yFn(e))}))}function x(e,i){e.each((function(e){var o=n.select(this);var s=o.select(".text-math-group");var f=p.anchorFn(e,i);var c=r.transFn.call(o.node(),e)+(a(i)&&+i!==0?" rotate("+i+","+p.xFn(e)+","+(p.yFn(e)-e.fontSize/2)+")":"");var h=u.lineCount(o);var d=V*e.fontSize;var g=p.heightFn(e,a(i)?+i:0,(h-1)*d);if(g){c+=l(0,g)}if(s.empty()){var y=o.select("text");y.attr({transform:c,"text-anchor":f});y.style("opacity",1);if(t._adjustTickLabelsOverflow){t._adjustTickLabelsOverflow()}}else{var m=v.bBox(s.node()).width;var x=m*{end:-.5,start:.5}[f];s.attr("transform",c+l(x,0))}}))}t._adjustTickLabelsOverflow=function(){var r=t.ticklabeloverflow;if(!r||r==="allow")return;var a=r.indexOf("hide")!==-1;var o=t._id.charAt(0)==="x";var l=0;var u=o?e._fullLayout.width:e._fullLayout.height;if(r.indexOf("domain")!==-1){var f=s.simpleMap(t.range,t.r2l);l=t.l2p(f[0])+t._offset;u=t.l2p(f[1])+t._offset}var c=Math.min(l,u);var h=Math.max(l,u);var p=t.side;var d=Infinity;var g=-Infinity;y.each((function(e){var r=n.select(this);var i=r.select(".text-math-group");if(i.empty()){var s=v.bBox(r.node());var l=0;if(o){if(s.right>h)l=1;else if(s.left<c)l=1}else{if(s.bottom>h)l=1;else if(s.top+(t.tickangle?0:e.fontSize/4)<c)l=1}var u=r.select("text");if(l){if(a)u.style("opacity",0)}else{u.style("opacity",1);if(p==="bottom"||p==="right"){d=Math.min(d,o?s.top:s.left)}else{d=-Infinity}if(p==="top"||p==="left"){g=Math.max(g,o?s.bottom:s.right)}else{g=Infinity}}}}));for(var m in i._plots){var x=i._plots[m];if(t._id!==x.xaxis._id&&t._id!==x.yaxis._id)continue;var b=o?x.yaxis:x.xaxis;if(b){b["_visibleLabelMin_"+t._id]=d;b["_visibleLabelMax_"+t._id]=g}}};t._hideCounterAxisInsideTickLabels=function(e){var r=t._id.charAt(0)==="x";var a=[];for(var o in i._plots){var s=i._plots[o];if(t._id!==s.xaxis._id&&t._id!==s.yaxis._id)continue;a.push(r?s.yaxis:s.xaxis)}a.forEach((function(r,a){if(r&&nt(r)){(e||[O,z,D,R,F]).forEach((function(e){var o=e.K==="tick"&&e.L==="text"&&t.ticklabelmode==="period";var s=i._plots[t._mainSubplot];var l;if(e.K===O.K)l=s.zerolinelayer.selectAll("."+t._id+"zl");else if(e.K===z.K)l=s.minorGridlayer.selectAll("."+t._id);else if(e.K===D.K)l=s.gridlayer.selectAll("."+t._id);else l=s[t._id.charAt(0)+"axislayer"];l.each((function(){var i=n.select(this);if(e.L)i=i.selectAll(e.L);i.each((function(i){var s=t.l2p(o?Be(i):i.x)+t._offset;var l=n.select(this);if(s<t["_visibleLabelMax_"+r._id]&&s>t["_visibleLabelMin_"+r._id]){l.style("display","none")}else if(e.K==="tick"&&!a){l.style("display",null)}}))}))}))}}))};x(y,g+1?g:d);function b(){return m.length&&Promise.all(m)}var _=null;function w(){x(y,d);if(h.length&&f==="x"&&!a(d)&&(t.type!=="log"||String(t.dtick).charAt(0)!=="D")){_=0;var e=0;var n=[];var i;y.each((function(r){e=Math.max(e,r.fontSize);var a=t.l2p(r.x);var i=Ye(this);var o=v.bBox(i.node());n.push({top:0,bottom:10,height:10,left:a-o.width/2,right:a+o.width/2+2,width:o.width+2})}));if((t.tickson==="boundaries"||t.showdividers)&&!r.secondary){var o=2;if(t.ticks)o+=t.tickwidth/2;for(i=0;i<n.length;i++){var l=h[i].xbnd;var u=n[i];if(l[0]!==null&&u.left-t.l2p(l[0])<o||l[1]!==null&&t.l2p(l[1])-u.right<o){_=90;break}}}else{var c=h.length;var p=Math.abs((h[c-1].x-h[0].x)*t._m)/(c-1);var g=t.ticklabelposition||"";var m=function(e){return g.indexOf(e)!==-1};var b=m("top");var w=m("left");var T=m("right");var k=m("bottom");var A=k||w||b||T;var M=!A?0:(t.tickwidth||0)+2*q;var S=p<e*2.5||t.type==="multicategory"||t._name==="realaxis";for(i=0;i<n.length-1;i++){if(s.bBoxIntersect(n[i],n[i+1],M)){_=S?90:30;break}}}if(_){x(y,_)}}}if(t._selections){t._selections[c]=y}var T=[b];if(t.automargin&&i._redrawFromAutoMarginCount&&g===90){_=90;T.push((function(){x(y,g)}))}else{T.push(w)}if(t._tickAngles){T.push((function(){t._tickAngles[c]=_===null?a(d)?d:0:_}))}var k=function(){var e=0;var r=0;y.each((function(n,a){var i=Ye(this);var o=i.select(".text-math-group");if(o.empty()){var s;if(t._vals[a]){s=t._vals[a].bb||v.bBox(i.node());t._vals[a].bb=s}e=Math.max(e,s.width);r=Math.max(r,s.height)}}));return{labelsMaxW:e,labelsMaxH:r}};var A=t._anchorAxis;if(A&&(A.autorange||A.insiderange)&&nt(t)&&!X(i,t._id)){if(!i._insideTickLabelsUpdaterange){i._insideTickLabelsUpdaterange={}}if(A.autorange){i._insideTickLabelsUpdaterange[A._name+".autorange"]=A.autorange;T.push(k)}if(A.insiderange){var M=k();var S=t._id.charAt(0)==="y"?M.labelsMaxW:M.labelsMaxH;S+=2*q;if(t.ticklabelposition==="inside"){S+=t.ticklen||0}var E=t.side==="right"||t.side==="top"?1:-1;var L=E===1?1:0;var C=E===1?0:1;var I=[];I[C]=A.range[C];var P=A.d2p(A.range[L]);var B=A.d2p(A.range[C]);var N=Math.abs(B-P);if(N-S>0){N-=S;S*=1+S/N}else{S=0}if(t._id.charAt(0)!=="y")S=-S;I[L]=A.p2d(A.d2p(A.range[L])+E*S);if(A.autorange==="min"||A.autorange==="max reversed"){I[0]=null;A._rangeInitial0=undefined;A._rangeInitial1=undefined}else if(A.autorange==="max"||A.autorange==="min reversed"){I[1]=null;A._rangeInitial0=undefined;A._rangeInitial1=undefined}i._insideTickLabelsUpdaterange[A._name+".range"]=I}}var j=s.syncOrAsync(T);if(j&&j.then)e._promises.push(j);return j};function Ue(e,t,r){var n=t._id+"divider";var a=r.vals;var i=r.layer.selectAll("path."+n).data(a,je);i.exit().remove();i.enter().insert("path",":first-child").classed(n,1).classed("crisp",1).call(c.stroke,t.dividercolor).style("stroke-width",v.crispRound(e,t.dividerwidth,1)+"px");i.attr("transform",r.transFn).attr("d",r.path)}G.getPxPosition=function(e,t){var r=e._fullLayout._size;var n=t._id.charAt(0);var a=t.side;var i;if(t.anchor!=="free"){i=t._anchorAxis}else if(n==="x"){i={_offset:r.t+(1-(t.position||0))*r.h,_length:0}}else if(n==="y"){i={_offset:r.l+(t.position||0)*r.w+t._shift,_length:0}}if(a==="top"||a==="left"){return i._offset}else if(a==="bottom"||a==="right"){return i._offset+i._length}};function Ve(e){var t=e.title.font.size;var r=(e.title.text.match(u.BR_TAG_ALL)||[]).length;if(e.title.hasOwnProperty("standoff")){return r?t*(U+r*V):t*U}else{return r?t*(r+1)*V:t}}function He(e,t){var r=e._fullLayout;var n=t._id;var a=n.charAt(0);var i=t.title.font.size;var o;if(t.title.hasOwnProperty("standoff")){o=t._depth+t.title.standoff+Ve(t)}else{var s=nt(t);if(t.type==="multicategory"){o=t._depth}else{var l=1.5*i;if(s){l=.5*i;if(t.ticks==="outside"){l+=t.ticklen}}o=10+l+(t.linewidth?t.linewidth-1:0)}if(!s){if(a==="x"){o+=t.side==="top"?i*(t.showticklabels?1:0):i*(t.showticklabels?1.5:.5)}else{o+=t.side==="right"?i*(t.showticklabels?1:.5):i*(t.showticklabels?.5:0)}}}var u=G.getPxPosition(e,t);var c,h,p;if(a==="x"){h=t._offset+t._length/2;p=t.side==="top"?u-o:u+o}else{p=t._offset+t._length/2;h=t.side==="right"?u+o:u-o;c={rotate:"-90",offset:0}}var d;if(t.type!=="multicategory"){var g=t._selections[t._id+"tick"];d={selection:g,side:t.side};if(g&&g.node()&&g.node().parentNode){var y=v.getTranslate(g.node().parentNode);d.offsetLeft=y.x;d.offsetTop=y.y}if(t.title.hasOwnProperty("standoff")){d.pad=0}}t._titleStandoff=o;return f.draw(e,n+"title",{propContainer:t,propName:t._name+".title.text",placeholder:r._dfltTitle[a],avoid:d,transform:c,attributes:{x:h,y:p,"text-anchor":"middle"}})}G.shouldShowZeroLine=function(e,t,r){var n=s.simpleMap(t.range,t.r2l);return n[0]*n[1]<=0&&t.zeroline&&(t.type==="linear"||t.type==="-")&&!(t.rangebreaks&&t.maskBreaks(0)===P)&&(qe(t,0)||!Ge(e,t,r,n)||Ze(e,t))};G.clipEnds=function(e,t){return t.filter((function(t){return qe(e,t.x)}))};function qe(e,t){var r=e.l2p(t);return r>1&&r<e._length-1}function Ge(e,t,r,n){var a=r._mainAxis;if(!a)return;var i=e._fullLayout;var o=t._id.charAt(0);var s=G.counterLetter(t._id);var l=t._offset+(Math.abs(n[0])<Math.abs(n[1])===(o==="x")?0:t._length);function u(e){if(!e.showline||!e.linewidth)return false;var r=Math.max((e.linewidth+t.zerolinewidth)/2,1);function n(e){return typeof e==="number"&&Math.abs(e-l)<r}if(n(e._mainLinePosition)||n(e._mainMirrorPosition)){return true}var a=e._linepositions||{};for(var i in a){if(n(a[i][0])||n(a[i][1])){return true}}}var f=i._plots[r._mainSubplot];if(!(f.mainplotinfo||f).overlays.length){return u(r,l)}var c=G.list(e,s);for(var v=0;v<c.length;v++){var h=c[v];if(h._mainAxis===a&&u(h,l)){return true}}}function Ze(e,t){var r=e._fullData;var n=t._mainSubplot;var a=t._id.charAt(0);for(var i=0;i<r.length;i++){var s=r[i];if(s.visible===true&&s.xaxis+s.yaxis===n){if(o.traceIs(s,"bar-like")&&s.orientation==={x:"h",y:"v"}[a])return true;if(s.fill&&s.fill.charAt(s.fill.length-1)===a)return true}}return false}function Ye(e){var t=n.select(e);var r=t.select(".text-math-group");return r.empty()?t.select("text"):r}G.allowAutoMargin=function(e){var t=G.list(e,"",true);for(var r=0;r<t.length;r++){var n=t[r];if(n.automargin){i.allowAutoMargin(e,We(n));if(n.mirror){i.allowAutoMargin(e,Xe(n))}}if(o.getComponentMethod("rangeslider","isVisible")(n)){i.allowAutoMargin(e,Je(n))}}};function We(e){return e._id+".automargin"}function Xe(e){return We(e)+".mirror"}function Je(e){return e._id+".rangeslider"}G.swap=function(e,t){var r=Ke(e,t);for(var n=0;n<r.length;n++){Qe(e,r[n].x,r[n].y)}};function Ke(e,t){var r=[];var n,a;for(n=0;n<t.length;n++){var i=[];var o=e._fullData[t[n]].xaxis;var s=e._fullData[t[n]].yaxis;if(!o||!s)continue;for(a=0;a<r.length;a++){if(r[a].x.indexOf(o)!==-1||r[a].y.indexOf(s)!==-1){i.push(a)}}if(!i.length){r.push({x:[o],y:[s]});continue}var l=r[i[0]];var u;if(i.length>1){for(a=1;a<i.length;a++){u=r[i[a]];$e(l.x,u.x);$e(l.y,u.y)}}$e(l.x,[o]);$e(l.y,[s])}return r}function $e(e,t){for(var r=0;r<t.length;r++){if(e.indexOf(t[r])===-1)e.push(t[r])}}function Qe(e,t,r){var n=[];var a=[];var i=e.layout;var o,l;for(o=0;o<t.length;o++)n.push(G.getFromId(e,t[o]));for(o=0;o<r.length;o++)a.push(G.getFromId(e,r[o]));var u=Object.keys(h);var f=["anchor","domain","overlaying","position","side","tickangle","editType"];var c=["linear","log"];for(o=0;o<u.length;o++){var v=u[o];var p=n[0][v];var d=a[0][v];var g=true;var y=false;var m=false;if(v.charAt(0)==="_"||typeof p==="function"||f.indexOf(v)!==-1){continue}for(l=1;l<n.length&&g;l++){var x=n[l][v];if(v==="type"&&c.indexOf(p)!==-1&&c.indexOf(x)!==-1&&p!==x){y=true}else if(x!==p)g=false}for(l=1;l<a.length&&g;l++){var b=a[l][v];if(v==="type"&&c.indexOf(d)!==-1&&c.indexOf(b)!==-1&&d!==b){m=true}else if(a[l][v]!==d)g=false}if(g){if(y)i[n[0]._name].type="linear";if(m)i[a[0]._name].type="linear";et(i,v,n,a,e._fullLayout._dfltTitle)}}for(o=0;o<e._fullLayout.annotations.length;o++){var _=e._fullLayout.annotations[o];if(t.indexOf(_.xref)!==-1&&r.indexOf(_.yref)!==-1){s.swapAttrs(i.annotations[o],["?"])}}}function et(e,t,r,n,a){var i=s.nestedProperty;var o=i(e[r[0]._name],t).get();var l=i(e[n[0]._name],t).get();var u;if(t==="title"){if(o&&o.text===a.x){o.text=a.y}if(l&&l.text===a.y){l.text=a.x}}for(u=0;u<r.length;u++){i(e,r[u]._name+"."+t).set(l)}for(u=0;u<n.length;u++){i(e,n[u]._name+"."+t).set(o)}}function tt(e){return e._id==="angularaxis"}function rt(e,t){var r=t._rangebreaks.length;for(var n=0;n<r;n++){var a=t._rangebreaks[n];if(e>=a.min&&e<a.max){return a.max}}return e}function nt(e){return(e.ticklabelposition||"").indexOf("inside")!==-1}function at(e,t){if(nt(e._anchorAxis||{})){if(e._hideCounterAxisInsideTickLabels){e._hideCounterAxisInsideTickLabels(t)}}}function it(e,t,r,n){var a=e.anchor!=="free"&&(e.overlaying===undefined||e.overlaying===false)?e._id:e.overlaying;var i;if(n){i=e.side==="right"?t:-t}else{i=t}if(!(a in r)){r[a]={}}if(!(e.side in r[a])){r[a][e.side]=0}r[a][e.side]+=i}function ot(e,t){return e.autoshift?t[e.overlaying][e.side]:e.shift||0}},4322:function(e,t,r){"use strict";var n=r(92770);var a=r(71828);var i=r(50606).BADNUM;var o=a.isArrayOrTypedArray;var s=a.isDateTime;var l=a.cleanNumber;var u=Math.round;e.exports=function e(t,r,n){var a=t;var i=n.noMultiCategory;if(o(a)&&!a.length)return"-";if(!i&&d(a))return"multicategory";if(i&&Array.isArray(a[0])){var s=[];for(var l=0;l<a.length;l++){if(o(a[l])){for(var u=0;u<a[l].length;u++){s.push(a[l][u])}}}a=s}if(v(a,r))return"date";var f=n.autotypenumbers!=="strict";if(p(a,f))return"category";if(c(a,f))return"linear";return"-"};function f(e,t){return t?n(e):typeof e==="number"}function c(e,t){var r=e.length;for(var n=0;n<r;n++){if(f(e[n],t))return true}return false}function v(e,t){var r=e.length;var a=h(r);var i=0;var o=0;var l={};for(var f=0;f<r;f+=a){var c=u(f);var v=e[c];var p=String(v);if(l[p])continue;l[p]=1;if(s(v,t))i++;if(n(v))o++}return i>o*2}function h(e){return Math.max(1,(e-1)/1e3)}function p(e,t){var r=e.length;var n=h(r);var a=0;var o=0;var s={};for(var f=0;f<r;f+=n){var c=u(f);var v=e[c];var p=String(v);if(s[p])continue;s[p]=1;var d=typeof v;if(d==="boolean")o++;else if(t?l(v)!==i:d==="number")a++;else if(d==="string")o++}return o>a*2}function d(e){return o(e[0])&&o(e[1])}},71453:function(e,t,r){"use strict";var n=r(92770);var a=r(73972);var i=r(71828);var o=r(44467);var s=r(85501);var l=r(13838);var u=r(26218);var f=r(38701);var c=r(96115);var v=r(89426);var h=r(15258);var p=r(92128);var d=r(23608);var g=r(21994);var y=r(85555).WEEKDAY_PATTERN;var m=r(85555).HOUR_PATTERN;e.exports=function e(t,r,n,m,b){var _=m.letter;var w=m.font||{};var T=m.splomStash||{};var k=n("visible",!m.visibleDflt);var A=r._template||{};var M=r.type||A.type||"-";var S;if(M==="date"){var E=a.getComponentMethod("calendars","handleDefaults");E(t,r,"calendar",m.calendar);if(!m.noTicklabelmode){S=n("ticklabelmode")}}var L="";if(!m.noTicklabelposition||M==="multicategory"){L=i.coerce(t,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:S==="period"?["outside","inside"]:_==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")}if(!m.noTicklabeloverflow){n("ticklabeloverflow",L.indexOf("inside")!==-1?"hide past domain":M==="category"||M==="multicategory"?"allow":"hide past div")}g(r,b);d(t,r,n,m);h(t,r,n,m);if(M!=="category"&&!m.noHover)n("hoverformat");var C=n("color");var I=C!==l.color.dflt?C:w.color;var P=T.label||b._dfltTitle[_];v(t,r,n,M,m);if(!k)return r;n("title.text",P);i.coerceFont(n,"title.font",{family:w.family,size:i.bigFont(w.size),color:I});u(t,r,n,M);var O=m.hasMinor;if(O){o.newContainer(r,"minor");u(t,r,n,M,{isMinor:true})}c(t,r,n,M,m);f(t,r,n,m);if(O){var D=m.isMinor;m.isMinor=true;f(t,r,n,m);m.isMinor=D}p(t,r,n,{dfltColor:C,bgColor:m.bgColor,showGrid:m.showGrid,hasMinor:O,attributes:l});if(O&&!r.minor.ticks&&!r.minor.showgrid){delete r.minor}if(r.showline||r.ticks)n("mirror");var z=M==="multicategory";if(!m.noTickson&&(M==="category"||z)&&(r.ticks||r.showgrid)){var R;if(z)R="boundaries";var F=n("tickson",R);if(F==="boundaries"){delete r.ticklabelposition}}if(z){var B=n("showdividers");if(B){n("dividercolor");n("dividerwidth")}}if(M==="date"){s(t,r,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:x});if(!r.rangebreaks.length){delete r.rangebreaks}else{for(var N=0;N<r.rangebreaks.length;N++){if(r.rangebreaks[N].pattern===y){r._hasDayOfWeekBreaks=true;break}}g(r,b);if(b._has("scattergl")||b._has("splom")){for(var j=0;j<m.data.length;j++){var U=m.data[j];if(U.type==="scattergl"||U.type==="splom"){U.visible=false;i.warn(U.type+" traces do not work on axes with rangebreaks."+" Setting trace "+U.index+" to `visible: false`.")}}}}}return r};function x(e,t,r){function a(r,n){return i.coerce(e,t,l.rangebreaks,r,n)}var o=a("enabled");if(o){var s=a("bounds");if(s&&s.length>=2){var u="";var f,c;if(s.length===2){for(f=0;f<2;f++){c=_(s[f]);if(c){u=y;break}}}var v=a("pattern",u);if(v===y){for(f=0;f<2;f++){c=_(s[f]);if(c){t.bounds[f]=s[f]=c-1}}}if(v){for(f=0;f<2;f++){c=s[f];switch(v){case y:if(!n(c)){t.enabled=false;return}c=+c;if(c!==Math.floor(c)||c<0||c>=7){t.enabled=false;return}t.bounds[f]=s[f]=c;break;case m:if(!n(c)){t.enabled=false;return}c=+c;if(c<0||c>24){t.enabled=false;return}t.bounds[f]=s[f]=c;break}}}if(r.autorange===false){var h=r.range;if(h[0]<h[1]){if(s[0]<h[0]&&s[1]>h[1]){t.enabled=false;return}}else if(s[0]>h[0]&&s[1]<h[1]){t.enabled=false;return}}}else{var p=a("values");if(p&&p.length){a("dvalue")}else{t.enabled=false;return}}}}var b={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function _(e){if(typeof e!=="string")return;return b[e.substr(0,3).toLowerCase()]}},12663:function(e,t,r){"use strict";var n=r(31562);var a=n.FORMAT_LINK;var i=n.DATE_FORMAT_LINK;function o(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?s:l)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}}function s(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+a+"."].join(" ")}function l(e,t){return s(e,t)+[" And for dates see: "+i+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}e.exports={axisHoverFormat:o,descriptionOnlyNumbers:s,descriptionWithDates:l}},41675:function(e,t,r){"use strict";var n=r(73972);var a=r(85555);t.id2name=function e(t){if(typeof t!=="string"||!t.match(a.AX_ID_PATTERN))return;var r=t.split(" ")[0].substr(1);if(r==="1")r="";return t.charAt(0)+"axis"+r};t.name2id=function e(t){if(!t.match(a.AX_NAME_PATTERN))return;var r=t.substr(5);if(r==="1")r="";return t.charAt(0)+r};t.cleanId=function e(t,r,n){var i=/( domain)$/.test(t);if(typeof t!=="string"||!t.match(a.AX_ID_PATTERN))return;if(r&&t.charAt(0)!==r)return;if(i&&!n)return;var o=t.split(" ")[0].substr(1).replace(/^0+/,"");if(o==="1")o="";return t.charAt(0)+o+(i&&n?" domain":"")};t.list=function(e,r,n){var a=e._fullLayout;if(!a)return[];var i=t.listIds(e,r);var o=new Array(i.length);var s;for(s=0;s<i.length;s++){var l=i[s];o[s]=a[l.charAt(0)+"axis"+l.substr(1)]}if(!n){var u=a._subplots.gl3d||[];for(s=0;s<u.length;s++){var f=a[u[s]];if(r)o.push(f[r+"axis"]);else o.push(f.xaxis,f.yaxis,f.zaxis)}}return o};t.listIds=function(e,t){var r=e._fullLayout;if(!r)return[];var n=r._subplots;if(t)return n[t+"axis"];return n.xaxis.concat(n.yaxis)};t.getFromId=function(e,r,n){var a=e._fullLayout;r=r===undefined||typeof r!=="string"?r:r.replace(" domain","");if(n==="x")r=r.replace(/y[0-9]*/,"");else if(n==="y")r=r.replace(/x[0-9]*/,"");return a[t.id2name(r)]};t.getFromTrace=function(e,r,a){var i=e._fullLayout;var o=null;if(n.traceIs(r,"gl3d")){var s=r.scene;if(s.substr(0,5)==="scene"){o=i[s][a+"axis"]}}else{o=t.getFromId(e,r[a+"axis"]||a)}return o};t.idSort=function(e,t){var r=e.charAt(0);var n=t.charAt(0);if(r!==n)return r>n?1:-1;return+(e.substr(1)||1)-+(t.substr(1)||1)};t.ref2id=function(e){return/^[xyz]/.test(e)?e.split(" ")[0]:false};function i(e,t){if(t&&t.length){for(var r=0;r<t.length;r++){if(t[r][e])return true}}return false}t.isLinked=function(e,t){return i(t,e._axisMatchGroups)||i(t,e._axisConstraintGroups)}},15258:function(e){"use strict";function t(e,t){var r=t.dataAttr||e._id.charAt(0);var n={};var a;var i,o;if(t.axData){a=t.axData}else{a=[];for(i=0;i<t.data.length;i++){var s=t.data[i];if(s[r+"axis"]===e._id){a.push(s)}}}for(i=0;i<a.length;i++){var l=a[i][r];for(o=0;o<l.length;o++){var u=l[o];if(u!==null&&u!==undefined){n[u]=1}}}return Object.keys(n)}e.exports=function e(r,n,a,i){if(n.type!=="category")return;var o=r.categoryarray;var s=Array.isArray(o)&&o.length>0;var l;if(s)l="array";var u=a("categoryorder",l);var f;if(u==="array"){f=a("categoryarray")}if(!s&&u==="array"){u=n.categoryorder="trace"}if(u==="trace"){n._initialCategories=[]}else if(u==="array"){n._initialCategories=f.slice()}else{f=t(n,i).sort();if(u==="category ascending"){n._initialCategories=f}else if(u==="category descending"){n._initialCategories=f.reverse()}}}},66287:function(e,t,r){"use strict";var n=r(92770);var a=r(71828);var i=r(50606);var o=i.ONEDAY;var s=i.ONEWEEK;t.dtick=function(e,t){var r=t==="log";var a=t==="date";var i=t==="category";var s=a?o:1;if(!e)return s;if(n(e)){e=Number(e);if(e<=0)return s;if(i){return Math.max(1,Math.round(e))}if(a){return Math.max(.1,e)}return e}if(typeof e!=="string"||!(a||r)){return s}var l=e.charAt(0);var u=e.substr(1);u=n(u)?Number(u):0;if(u<=0||!(a&&l==="M"&&u===Math.round(u)||r&&l==="L"||r&&l==="D"&&(u===1||u===2))){return s}return e};t.tick0=function(e,t,r,i){if(t==="date"){return a.cleanDate(e,a.dateTick0(r,i%s===0?1:0))}if(i==="D1"||i==="D2"){return undefined}return n(e)?Number(e):0}},85555:function(e,t,r){"use strict";var n=r(30587).counter;e.exports={idRegex:{x:n("x","( domain)?"),y:n("y","( domain)?")},attrRegex:n("[xy]axis"),xAxisMatch:n("xaxis"),yAxisMatch:n("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},99082:function(e,t,r){"use strict";var n=r(71828);var a=r(71739);var i=r(41675).id2name;var o=r(13838);var s=r(42449);var l=r(21994);var u=r(50606).ALMOST_EQUAL;var f=r(18783).FROM_BL;t.handleDefaults=function(e,t,r){var a=r.axIds;var o=r.axHasImage;var s=t._axisConstraintGroups=[];var u=t._axisMatchGroups=[];var f,v,h,p,d,g,y,m;for(f=0;f<a.length;f++){p=i(a[f]);d=e[p];g=t[p];c(d,g,{axIds:a,layoutOut:t,hasImage:o[p]})}function x(e,r){for(f=0;f<e.length;f++){v=e[f];for(h in v){t[i(h)][r]=v}}}x(u,"_matchGroup");for(f=0;f<s.length;f++){v=s[f];for(h in v){g=t[i(h)];if(g.fixedrange){for(var b in v){var _=i(b);if((e[_]||{}).fixedrange===false){n.warn("fixedrange was specified as false for axis "+_+" but was overridden because another "+"axis in its constraint group has fixedrange true")}t[_].fixedrange=true}break}}}f=0;while(f<s.length){v=s[f];for(h in v){g=t[i(h)];if(g._matchGroup&&Object.keys(g._matchGroup).length===Object.keys(v).length){s.splice(f,1);f--}break}f++}x(s,"_constraintGroup");var w=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"];var T=false;var k=false;function A(){m=g[y];if(y==="rangebreaks"){k=g._hasDayOfWeekBreaks}}for(f=0;f<u.length;f++){v=u[f];for(var M=0;M<w.length;M++){y=w[M];m=null;var S;for(h in v){p=i(h);d=e[p];g=t[p];if(!(y in g)){continue}if(!g.matches){S=g;if(y in d){A();break}}if(m===null&&y in d){A()}}if(y==="range"&&m&&d.range&&d.range.length===2&&d.range[0]!==null&&d.range[1]!==null){T=true}if(y==="autorange"&&m===null&&T){m=false}if(m===null&&y in S){m=S[y]}if(m!==null){for(h in v){g=t[i(h)];g[y]=y==="range"?m.slice():m;if(y==="rangebreaks"){g._hasDayOfWeekBreaks=k;l(g,t)}}}}}};function c(e,t,r){var a=r.axIds;var s=r.layoutOut;var l=r.hasImage;var u=s._axisConstraintGroups;var f=s._axisMatchGroups;var c=t._id;var d=c.charAt(0);var g=((s._splomAxes||{})[d]||{})[c]||{};var y=t._id;var m=y.charAt(0)==="x";t._matchGroup=null;t._constraintGroup=null;function x(r,a){return n.coerce(e,t,o,r,a)}x("constrain",l?"domain":"range");n.coerce(e,t,{constraintoward:{valType:"enumerated",values:m?["left","center","right"]:["bottom","middle","top"],dflt:m?"center":"middle"}},"constraintoward");var b=t.type;var _,w;var T=[];for(_=0;_<a.length;_++){w=a[_];if(w===y)continue;var k=s[i(w)];if(k.type===b){T.push(w)}}var A=h(u,y);if(A){var M=[];for(_=0;_<T.length;_++){w=T[_];if(!A[w])M.push(w)}T=M}var S=T.length;var E,L;if(S&&(e.matches||g.matches)){E=n.coerce(e,t,{matches:{valType:"enumerated",values:T,dflt:T.indexOf(g.matches)!==-1?g.matches:undefined}},"matches")}var C=l&&!m?t.anchor:undefined;if(S&&!E&&(e.scaleanchor||C)){L=n.coerce(e,t,{scaleanchor:{valType:"enumerated",values:T.concat([false])}},"scaleanchor",C)}if(E){t._matchGroup=p(f,y,E,1);var I=s[i(E)];var P=v(s,t)/v(s,I);if(m!==(E.charAt(0)==="x")){P=(m?"x":"y")+P}p(u,y,E,P)}else if(e.matches&&a.indexOf(e.matches)!==-1){n.warn("ignored "+t._name+'.matches: "'+e.matches+'" to avoid an infinite loop')}if(L){var O=x("scaleratio");if(!O)O=t.scaleratio=1;p(u,y,L,O)}else if(e.scaleanchor&&a.indexOf(e.scaleanchor)!==-1){n.warn("ignored "+t._name+'.scaleanchor: "'+e.scaleanchor+'" to avoid either an infinite loop '+"and possibly inconsistent scaleratios, or because this axis "+"declares a *matches* constraint.")}}function v(e,t){var r=t.domain;if(!r){r=e[i(t.overlaying)].domain}return r[1]-r[0]}function h(e,t){for(var r=0;r<e.length;r++){if(e[r][t]){return e[r]}}return null}function p(e,t,r,n){var a,i,o,s,l;var u=h(e,t);if(u===null){u={};u[t]=1;l=e.length;e.push(u)}else{l=e.indexOf(u)}var f=Object.keys(u);for(a=0;a<e.length;a++){o=e[a];if(a!==l&&o[r]){var c=o[r];for(i=0;i<f.length;i++){s=f[i];o[s]=d(c,d(n,u[s]))}e.splice(l,1);return}}if(n!==1){for(i=0;i<f.length;i++){var v=f[i];u[v]=d(n,u[v])}}u[r]=1}function d(e,t){var r="";var n="";var a,i;if(typeof e==="string"){r=e.match(/^[xy]*/)[0];a=r.length;e=+e.substr(a)}if(typeof t==="string"){n=t.match(/^[xy]*/)[0];i=n.length;t=+t.substr(i)}var o=e*t;if(!a&&!i){return o}if(!a||!i||r.charAt(0)===n.charAt(0)){return r+n+e*t}if(a===i){return o}return(a>i?r.substr(i):n.substr(a))+o}function g(e,t){var r=t._size;var n=r.h/r.w;var a={};var i=Object.keys(e);for(var o=0;o<i.length;o++){var s=i[o];var l=e[s];if(typeof l==="string"){var u=l.match(/^[xy]*/)[0];var f=u.length;l=+l.substr(f);var c=u.charAt(0)==="y"?n:1/n;for(var v=0;v<f;v++){l*=c}}a[s]=l}return a}t.enforce=function e(t){var r=t._fullLayout;var n=r._axisConstraintGroups||[];var o,l,f,c,v,h,p,d;for(o=0;o<n.length;o++){f=g(n[o],r);var m=Object.keys(f);var x=Infinity;var b=0;var _=Infinity;var w={};var T={};var k=false;for(l=0;l<m.length;l++){c=m[l];T[c]=v=r[i(c)];if(v._inputDomain)v.domain=v._inputDomain.slice();else v._inputDomain=v.domain.slice();if(!v._inputRange)v._inputRange=v.range.slice();v.setScale();w[c]=h=Math.abs(v._m)/f[c];x=Math.min(x,h);if(v.constrain==="domain"||!v._constraintShrinkable){_=Math.min(_,h)}delete v._constraintShrinkable;b=Math.max(b,h);if(v.constrain==="domain")k=true}if(x>u*b&&!k)continue;for(l=0;l<m.length;l++){c=m[l];h=w[c];v=T[c];p=v.constrain;if(h!==_||p==="domain"){d=h/_;if(p==="range"){s(v,d)}else{var A=v._inputDomain;var M=(v.domain[1]-v.domain[0])/(A[1]-A[0]);var S=(v.r2l(v.range[1])-v.r2l(v.range[0]))/(v.r2l(v._inputRange[1])-v.r2l(v._inputRange[0]));d/=M;if(d*S<1){v.domain=v._input.domain=A.slice();s(v,d);continue}if(S<1){v.range=v._input.range=v._inputRange.slice();d*=S}if(v.autorange){var E=v.r2l(v.range[0]);var L=v.r2l(v.range[1]);var C=(E+L)/2;var I=C;var P=C;var O=Math.abs(L-C);var D=C-O*d*1.0001;var z=C+O*d*1.0001;var R=a.makePadFn(r,v,0);var F=a.makePadFn(r,v,1);y(v,d);var B=Math.abs(v._m);var N=a.concatExtremes(t,v);var j=N.min;var U=N.max;var V;var H;for(H=0;H<j.length;H++){V=j[H].val-R(j[H])/B;if(V>D&&V<I){I=V}}for(H=0;H<U.length;H++){V=U[H].val+F(U[H])/B;if(V<z&&V>P){P=V}}var q=(P-I)/(2*O);d/=q;I=v.l2r(I);P=v.l2r(P);v.range=v._input.range=E<L?[I,P]:[P,I]}y(v,d)}}}}};t.getAxisGroup=function e(t,r){var n=t._axisMatchGroups;for(var a=0;a<n.length;a++){var i=n[a];if(i[r])return"g"+a}return r};t.clean=function e(t,r){if(r._inputDomain){var n=false;var a=r._id;var i=t._fullLayout._axisConstraintGroups;for(var o=0;o<i.length;o++){if(i[o][a]){n=true;break}}if(!n||r.constrain!=="domain"){r._input.domain=r.domain=r._inputDomain;delete r._inputDomain}}};function y(e,t){var r=e._inputDomain;var n=f[e.constraintoward];var a=r[0]+(r[1]-r[0])*n;e.domain=e._input.domain=[a+(r[0]-a)/t,a+(r[1]-a)/t];e.setScale()}},29323:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);var i=a.numberFormat;var o=r(84267);var s=r(38520);var l=r(73972);var u=a.strTranslate;var f=r(63893);var c=r(7901);var v=r(91424);var h=r(30211);var p=r(89298);var d=r(6964);var g=r(28569);var y=r(64505);var m=y.selectingOrDrawing;var x=y.freeMode;var b=r(18783).FROM_TL;var _=r(33306);var w=r(61549).redrawReglTraces;var T=r(74875);var k=r(41675).getFromId;var A=r(47322).prepSelect;var M=r(47322).clearOutline;var S=r(47322).selectOnClick;var E=r(42449);var L=r(85555);var C=L.MINDRAG;var I=L.MINZOOM;var P=true;function O(e,t,r,i,s,u,c,d){var y=e._fullLayout._zoomlayer;var P=c+d==="nsew";var O=(c+d).length===1;var D,G;var ee,te;var re,ne;var ae,ie;var oe,se;var le;var ue;var fe,ce;var ve;var he,pe;var de,ge,ye;var me;var xe;var be;r+=t.yaxis._shift;function _e(){D=t.xaxis;G=t.yaxis;oe=D._length;se=G._length;ae=D._offset;ie=G._offset;ee={};ee[D._id]=D;te={};te[G._id]=G;if(c&&d){var r=t.overlays;for(var n=0;n<r.length;n++){var a=r[n].xaxis;ee[a._id]=a;var i=r[n].yaxis;te[i._id]=i}}re=Q(ee);ne=Q(te);fe=R(re,d);ce=R(ne,c);ve=!ce&&!fe;ue=K(e,e._fullLayout._axisMatchGroups,ee,te);le=K(e,e._fullLayout._axisConstraintGroups,ee,te,ue);var o=le.isSubplotConstrained||ue.isSubplotConstrained;he=d||o;pe=c||o;var s=e._fullLayout;de=s._has("scattergl");ge=s._has("splom");ye=s._has("svg")}_e();var we=U(ce+fe,e._fullLayout.dragmode,P);var Te=z(t,c+d+"drag",we,r,i,s,u);if(ve&&!P){Te.onmousedown=null;Te.style.pointerEvents="none";return Te}var ke={element:Te,gd:e,plotinfo:t};ke.prepFn=function(t,r,n){var a=ke.dragmode;var i=e._fullLayout.dragmode;if(i!==a){ke.dragmode=i}_e();xe=e._fullLayout._invScaleX;be=e._fullLayout._invScaleY;if(!ve){if(P){if(t.shiftKey){if(i==="pan")i="zoom";else if(!m(i))i="pan"}else if(t.ctrlKey){i="pan"}}else{i="pan"}}if(x(i))ke.minDrag=1;else ke.minDrag=undefined;if(m(i)){ke.xaxes=re;ke.yaxes=ne;A(t,r,n,ke,i)}else{ke.clickFn=Me;if(m(a)){Ae()}if(!ve){if(i==="zoom"){ke.moveFn=Be;ke.doneFn=je;ke.minDrag=1;Fe(t,r,n)}else if(i==="pan"){ke.moveFn=Ze;ke.doneFn=Je}}}e._fullLayout._redrag=function(){var t=e._dragdata;if(t&&t.element===Te){var r=e._fullLayout.dragmode;if(!m(r)){_e();Ke([0,0,oe,se]);ke.moveFn(t.dx,t.dy)}}}};function Ae(){ke.plotinfo.selection=false;M(e)}function Me(e,r){var a=ke.gd;if(a._fullLayout._activeShapeIndex>=0){a._fullLayout._deactivateShape(a);return}var i=a._fullLayout.clickmode;Z(a);if(e===2&&!O)Xe();if(P){if(i.indexOf("select")>-1){S(r,a,re,ne,t.id,ke)}if(i.indexOf("event")>-1){h.click(a,r,t.id)}}else if(e===1&&O){var o=c?G:D;var s=c==="s"||d==="w"?0:1;var u=o._name+".range["+s+"]";var v=F(o,s);var p="left";var g="middle";if(o.fixedrange)return;if(c){g=c==="n"?"top":"bottom";if(o.side==="right")p="right"}else if(d==="e")p="right";if(a._context.showAxisRangeEntryBoxes){n.select(Te).call(f.makeEditable,{gd:a,immediate:true,background:a._fullLayout.paper_bgcolor,text:String(v),fill:o.tickfont?o.tickfont.color:"#444",horizontalAlign:p,verticalAlign:g}).on("edit",(function(e){var t=o.d2r(e);if(t!==undefined){l.call("_guiRelayout",a,u,t)}}))}}}g.init(ke);var Se,Ee;var Le;var Ce;var Ie;var Pe;var Oe;var De;var ze;var Re;function Fe(t,r,n){var i=Te.getBoundingClientRect();Se=r-i.left;Ee=n-i.top;e._fullLayout._calcInverseTransform(e);var s=a.apply3DTransform(e._fullLayout._invTransform)(Se,Ee);Se=s[0];Ee=s[1];Le={l:Se,r:Se,w:0,t:Ee,b:Ee,h:0};Ce=e._hmpixcount?e._hmlumcount/e._hmpixcount:o(e._fullLayout.plot_bgcolor).getLuminance();Ie="M0,0H"+oe+"V"+se+"H0V0";Pe=false;Oe="xy";Re=false;De=V(y,Ce,ae,ie,Ie);ze=H(y,ae,ie)}function Be(t,r){if(e._transitioningWithDuration){return false}var n=Math.max(0,Math.min(oe,xe*t+Se));var a=Math.max(0,Math.min(se,be*r+Ee));var i=Math.abs(n-Se);var o=Math.abs(a-Ee);Le.l=Math.min(Se,n);Le.r=Math.max(Se,n);Le.t=Math.min(Ee,a);Le.b=Math.max(Ee,a);function s(){Oe="";Le.r=Le.l;Le.t=Le.b;ze.attr("d","M0,0Z")}if(le.isSubplotConstrained){if(i>I||o>I){Oe="xy";if(i/oe>o/se){o=i*se/oe;if(Ee>a)Le.t=Ee-o;else Le.b=Ee+o}else{i=o*oe/se;if(Se>n)Le.l=Se-i;else Le.r=Se+i}ze.attr("d",J(Le))}else{s()}}else if(ue.isSubplotConstrained){if(i>I||o>I){Oe="xy";var l=Math.min(Le.l/oe,(se-Le.b)/se);var u=Math.max(Le.r/oe,(se-Le.t)/se);Le.l=l*oe;Le.r=u*oe;Le.b=(1-l)*se;Le.t=(1-u)*se;ze.attr("d",J(Le))}else{s()}}else if(!ce||o<Math.min(Math.max(i*.6,C),I)){if(i<C||!fe){s()}else{Le.t=0;Le.b=se;Oe="x";ze.attr("d",W(Le,Ee))}}else if(!fe||i<Math.min(o*.6,I)){Le.l=0;Le.r=oe;Oe="y";ze.attr("d",X(Le,Se))}else{Oe="xy";ze.attr("d",J(Le))}Le.w=Le.r-Le.l;Le.h=Le.b-Le.t;if(Oe)Re=true;e._dragged=Re;q(De,ze,Le,Ie,Pe,Ce);Ne();e.emit("plotly_relayouting",me);Pe=true}function Ne(){me={};if(Oe==="xy"||Oe==="x"){B(re,Le.l/oe,Le.r/oe,me,le.xaxes);Ye("x",me)}if(Oe==="xy"||Oe==="y"){B(ne,(se-Le.b)/se,(se-Le.t)/se,me,le.yaxes);Ye("y",me)}}function je(){Ne();Z(e);Je();Y(e)}var Ue=[0,0,oe,se];var Ve=null;var He=L.REDRAWDELAY;var qe=t.mainplot?e._fullLayout._plots[t.mainplot]:t;function Ge(t){if(!e._context._scrollZoom.cartesian&&!e._fullLayout._enablescrollzoom){return}Ae();if(e._transitioningWithDuration){t.preventDefault();t.stopPropagation();return}_e();clearTimeout(Ve);var r=-t.deltaY;if(!isFinite(r))r=t.wheelDelta/10;if(!isFinite(r)){a.log("Did not find wheel motion attributes: ",t);return}var n=Math.exp(-Math.min(Math.max(r,-20),20)/200);var i=qe.draglayer.select(".nsewdrag").node().getBoundingClientRect();var o=(t.clientX-i.left)/i.width;var s=(i.bottom-t.clientY)/i.height;var l;function u(e,t,r){if(e.fixedrange)return;var n=a.simpleMap(e.range,e.r2l);var i=n[0]+(n[1]-n[0])*t;function o(t){return e.l2r(i+(t-i)*r)}e.range=n.map(o)}if(he){if(!d)o=.5;for(l=0;l<re.length;l++){u(re[l],o,n)}Ye("x");Ue[2]*=n;Ue[0]+=Ue[2]*o*(1/n-1)}if(pe){if(!c)s=.5;for(l=0;l<ne.length;l++){u(ne[l],s,n)}Ye("y");Ue[3]*=n;Ue[1]+=Ue[3]*(1-s)*(1/n-1)}Ke(Ue);We();e.emit("plotly_relayouting",me);Ve=setTimeout((function(){if(!e._fullLayout)return;Ue=[0,0,oe,se];Je()}),He);t.preventDefault();return}if(c.length*d.length!==1){$(Te,Ge)}function Ze(t,r){t=t*xe;r=r*be;if(e._transitioningWithDuration){return}e._fullLayout._replotting=true;if(fe==="ew"||ce==="ns"){var n=fe?-t:0;var a=ce?-r:0;if(ue.isSubplotConstrained){if(fe&&ce){var i=(t/oe-r/se)/2;t=i*oe;r=-i*se;n=-t;a=-r}if(ce){n=-a*oe/se}else{a=-n*se/oe}}if(fe){N(re,t);Ye("x")}if(ce){N(ne,r);Ye("y")}Ke([n,a,oe,se]);We();e.emit("plotly_relayouting",me);return}function o(e,t,r){var n=1-t;var a;var i;for(var o=0;o<e.length;o++){var s=e[o];if(s.fixedrange)continue;a=s;i=s._rl[n]+(s._rl[t]-s._rl[n])/j(r/s._length);var l=s.l2r(i);if(l!==false&&l!==undefined)s.range[t]=l}return a._length*(a._rl[t]-i)/(a._rl[t]-a._rl[n])}var s=fe==="w"===(ce==="n")?1:-1;if(fe&&ce&&(le.isSubplotConstrained||ue.isSubplotConstrained)){var l=(t/oe+s*r/se)/2;t=l*oe;r=s*l*se}var u,f;if(fe==="w")t=o(re,0,t);else if(fe==="e")t=o(re,1,-t);else if(!fe)t=0;if(ce==="n")r=o(ne,1,r);else if(ce==="s")r=o(ne,0,-r);else if(!ce)r=0;u=fe==="w"?t:0;f=ce==="n"?r:0;if(le.isSubplotConstrained&&!ue.isSubplotConstrained||ue.isSubplotConstrained&&fe&&ce&&s>0){var c;if(ue.isSubplotConstrained||!fe&&ce.length===1){for(c=0;c<re.length;c++){re[c].range=re[c]._r.slice();E(re[c],1-r/se)}t=r*oe/se;u=t/2}if(ue.isSubplotConstrained||!ce&&fe.length===1){for(c=0;c<ne.length;c++){ne[c].range=ne[c]._r.slice();E(ne[c],1-t/oe)}r=t*se/oe;f=r/2}}if(!ue.isSubplotConstrained||!ce){Ye("x")}if(!ue.isSubplotConstrained||!fe){Ye("y")}var v=oe-t;var h=se-r;if(ue.isSubplotConstrained&&!(fe&&ce)){if(fe){f=u?0:t*se/oe;h=v*se/oe}else{u=f?0:r*oe/se;v=h*oe/se}}Ke([u,f,v,h]);We();e.emit("plotly_relayouting",me)}function Ye(e,t){var r=ue.isSubplotConstrained?{x:ne,y:re}[e]:ue[e+"axes"];var n=ue.isSubplotConstrained?{x:re,y:ne}[e]:[];for(var a=0;a<r.length;a++){var i=r[a];var o=i._id;var s=ue.xLinks[o]||ue.yLinks[o];var l=n[0]||ee[s]||te[s];if(l){if(t){t[i._name+".range[0]"]=t[l._name+".range[0]"];t[i._name+".range[1]"]=t[l._name+".range[1]"]}else{i.range=l.range.slice()}}}}function We(){var r=[];var n;function a(e){for(n=0;n<e.length;n++){if(!e[n].fixedrange)r.push(e[n]._id)}}function i(e,t){for(n=0;n<e.length;n++){var a=e[n];var i=a[t];if(!a.fixedrange&&i.tickmode==="sync")r.push(i._id)}}if(he){a(re);a(le.xaxes);a(ue.xaxes);i(t.overlays,"xaxis")}if(pe){a(ne);a(le.yaxes);a(ue.yaxes);i(t.overlays,"yaxis")}me={};for(n=0;n<r.length;n++){var o=r[n];var s=k(e,o);p.drawOne(e,s,{skipTitle:true});me[s._name+".range[0]"]=s.range[0];me[s._name+".range[1]"]=s.range[1]}p.redrawComponents(e,r)}function Xe(){if(e._transitioningWithDuration)return;var t=e._context.doubleClick;var r=[];if(fe)r=r.concat(re);if(ce)r=r.concat(ne);if(ue.xaxes)r=r.concat(ue.xaxes);if(ue.yaxes)r=r.concat(ue.yaxes);var n={};var a,i;if(t==="reset+autosize"){t="autosize";for(i=0;i<r.length;i++){a=r[i];var o=a._rangeInitial0;var s=a._rangeInitial1;var u=o!==undefined||s!==undefined;if(u&&(o!==undefined&&o!==a.range[0]||s!==undefined&&s!==a.range[1])||!u&&a.autorange!==true){t="reset";break}}}if(t==="autosize"){for(i=0;i<r.length;i++){a=r[i];if(!a.fixedrange)n[a._name+".autorange"]=true}}else if(t==="reset"){if(fe||le.isSubplotConstrained)r=r.concat(le.xaxes);if(ce&&!le.isSubplotConstrained)r=r.concat(le.yaxes);if(le.isSubplotConstrained){if(!fe)r=r.concat(re);else if(!ce)r=r.concat(ne)}for(i=0;i<r.length;i++){a=r[i];if(!a.fixedrange){var f=a._name;var c=a._autorangeInitial;if(a._rangeInitial0===undefined&&a._rangeInitial1===undefined){n[f+".autorange"]=true}else if(a._rangeInitial0===undefined){n[f+".autorange"]=c;n[f+".range"]=[null,a._rangeInitial1]}else if(a._rangeInitial1===undefined){n[f+".range"]=[a._rangeInitial0,null];n[f+".autorange"]=c}else{n[f+".range"]=[a._rangeInitial0,a._rangeInitial1]}}}}e.emit("plotly_doubleclick",null);l.call("_guiRelayout",e,n)}function Je(){Ke([0,0,oe,se]);a.syncOrAsync([T.previousPromises,function(){e._fullLayout._replotting=false;l.call("_guiRelayout",e,me)}],e)}function Ke(t){var r=e._fullLayout;var n=r._plots;var i=r._subplots.cartesian;var o,s,u,f;if(ge){l.subplotsRegistry.splom.drag(e)}if(de){for(o=0;o<i.length;o++){s=n[i[o]];u=s.xaxis;f=s.yaxis;if(s._scene){var h=a.simpleMap(u.range,u.r2l);var p=a.simpleMap(f.range,f.r2l);if(u.limitRange)u.limitRange();if(f.limitRange)f.limitRange();h=u.range;p=f.range;s._scene.update({range:[h[0],p[0],h[1],p[1]]})}}}if(ge||de){_(e);w(e)}if(ye){var g=t[2]/D._length;var y=t[3]/G._length;for(o=0;o<i.length;o++){s=n[i[o]];u=s.xaxis;f=s.yaxis;var m=(he||ue.isSubplotConstrained)&&!u.fixedrange&&ee[u._id];var x=(pe||ue.isSubplotConstrained)&&!f.fixedrange&&te[f._id];var b,T;var k,A;if(m){b=g;k=d||ue.isSubplotConstrained?t[0]:et(u,b)}else if(ue.xaHash[u._id]){b=g;k=t[0]*u._length/D._length}else if(ue.yaHash[u._id]){b=y;k=ce==="ns"?-t[1]*u._length/G._length:et(u,b,{n:"top",s:"bottom"}[ce])}else{b=$e(u,g,y);k=Qe(u,b)}if(b>1&&(u.maxallowed!==undefined&&he===(u.range[0]<u.range[1]?"e":"w")||u.minallowed!==undefined&&he===(u.range[0]<u.range[1]?"w":"e"))){b=1;k=0}if(x){T=y;A=c||ue.isSubplotConstrained?t[1]:et(f,T)}else if(ue.yaHash[f._id]){T=y;A=t[1]*f._length/G._length}else if(ue.xaHash[f._id]){T=g;A=fe==="ew"?-t[0]*f._length/D._length:et(f,T,{e:"right",w:"left"}[fe])}else{T=$e(f,g,y);A=Qe(f,T)}if(T>1&&(f.maxallowed!==undefined&&pe===(f.range[0]<f.range[1]?"n":"s")||f.minallowed!==undefined&&pe===(f.range[0]<f.range[1]?"s":"n"))){T=1;A=0}if(!b&&!T){continue}if(!b)b=1;if(!T)T=1;var M=u._offset-k/b;var S=f._offset-A/T;s.clipRect.call(v.setTranslate,k,A).call(v.setScale,b,T);s.plot.call(v.setTranslate,M,S).call(v.setScale,1/b,1/T);if(b!==s.xScaleFactor||T!==s.yScaleFactor){v.setPointGroupScale(s.zoomScalePts,b,T);v.setTextPointsScale(s.zoomScaleTxt,b,T)}v.hideOutsideRangePoints(s.clipOnAxisFalseTraces,s);s.xScaleFactor=b;s.yScaleFactor=T}}}function $e(e,t,r){if(e.fixedrange)return 0;if(he&&le.xaHash[e._id]){return t}if(pe&&(le.isSubplotConstrained?le.xaHash:le.yaHash)[e._id]){return r}return 0}function Qe(e,t){if(t){e.range=e._r.slice();E(e,t);return et(e,t)}return 0}function et(e,t,r){return e._length*(1-t)*b[r||e.constraintoward||"middle"]}return Te}function D(e,t,r,n){var i=a.ensureSingle(e.draglayer,t,r,(function(t){t.classed("drag",true).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id)}));i.call(d,n);return i.node()}function z(e,t,r,a,i,o,s){var l=D(e,"rect",t,r);n.select(l).call(v.setRect,a,i,o,s);return l}function R(e,t){for(var r=0;r<e.length;r++){if(!e[r].fixedrange)return t}return""}function F(e,t){var r=e.range[t];var n=Math.abs(r-e.range[1-t]);var a;if(e.type==="date"){return r}else if(e.type==="log"){a=Math.ceil(Math.max(0,-Math.log(n)/Math.LN10))+3;return i("."+a+"g")(Math.pow(10,r))}else{a=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(n)/Math.LN10)+4;return i("."+String(a)+"g")(r)}}function B(e,t,r,n,a){for(var i=0;i<e.length;i++){var o=e[i];if(o.fixedrange)continue;if(o.rangebreaks){var s=o._id.charAt(0)==="y";var l=s?1-t:t;var u=s?1-r:r;n[o._name+".range[0]"]=o.l2r(o.p2l(l*o._length));n[o._name+".range[1]"]=o.l2r(o.p2l(u*o._length))}else{var f=o._rl[0];var c=o._rl[1]-f;n[o._name+".range[0]"]=o.l2r(f+c*t);n[o._name+".range[1]"]=o.l2r(f+c*r)}}if(a&&a.length){var v=(t+(1-r))/2;B(a,v,1-v,n,[])}}function N(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!n.fixedrange){if(n.rangebreaks){var a=0;var i=n._length;var o=n.p2l(a+t)-n.p2l(a);var s=n.p2l(i+t)-n.p2l(i);var l=(o+s)/2;n.range=[n.l2r(n._rl[0]-l),n.l2r(n._rl[1]-l)]}else{n.range=[n.l2r(n._rl[0]-t/n._m),n.l2r(n._rl[1]-t/n._m)]}if(n.limitRange)n.limitRange()}}}function j(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function U(e,t,r){if(!e)return"pointer";if(e==="nsew"){if(r)return"";if(t==="pan")return"move";return"crosshair"}return e.toLowerCase()+"-resize"}function V(e,t,r,n,a){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",u(r,n)).attr("d",a+"Z")}function H(e,t,r){return e.append("path").attr("class","zoombox-corners").style({fill:c.background,stroke:c.defaultLine,"stroke-width":1,opacity:0}).attr("transform",u(t,r)).attr("d","M0,0Z")}function q(e,t,r,n,a,i){e.attr("d",n+"M"+r.l+","+r.t+"v"+r.h+"h"+r.w+"v-"+r.h+"h-"+r.w+"Z");G(e,t,a,i)}function G(e,t,r,n){if(!r){e.transition().style("fill",n>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200);t.transition().style("opacity",1).duration(200)}}function Z(e){n.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Y(e){if(P&&e.data&&e._context.showTips){a.notifier(a._(e,"Double-click to zoom back out"),"long");P=false}}function W(e,t){return"M"+(e.l-.5)+","+(t-I-.5)+"h-3v"+(2*I+1)+"h3ZM"+(e.r+.5)+","+(t-I-.5)+"h3v"+(2*I+1)+"h-3Z"}function X(e,t){return"M"+(t-I-.5)+","+(e.t-.5)+"v-3h"+(2*I+1)+"v3ZM"+(t-I-.5)+","+(e.b+.5)+"v3h"+(2*I+1)+"v-3Z"}function J(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,I)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function K(e,t,r,n,i){var o=false;var s={};var l={};var u,f,c,v;var h=(i||{}).xaHash;var p=(i||{}).yaHash;for(var d=0;d<t.length;d++){var g=t[d];for(u in r){if(g[u]){for(c in g){if(!(i&&(h[c]||p[c]))&&!(c.charAt(0)==="x"?r:n)[c]){s[c]=u}}for(f in n){if(!(i&&(h[f]||p[f]))&&g[f]){o=true}}}}for(f in n){if(g[f]){for(v in g){if(!(i&&(h[v]||p[v]))&&!(v.charAt(0)==="x"?r:n)[v]){l[v]=f}}}}}if(o){a.extendFlat(s,l);l={}}var y={};var m=[];for(c in s){var x=k(e,c);m.push(x);y[x._id]=x}var b={};var _=[];for(v in l){var w=k(e,v);_.push(w);b[w._id]=w}return{xaHash:y,yaHash:b,xaxes:m,yaxes:_,xLinks:s,yLinks:l,isSubplotConstrained:o}}function $(e,t){if(!s){if(e.onwheel!==undefined)e.onwheel=t;else if(e.onmousewheel!==undefined)e.onmousewheel=t;else if(!e.isAddedWheelEvent){e.isAddedWheelEvent=true;e.addEventListener("wheel",t,{passive:false})}}else{var r=e.onwheel!==undefined?"wheel":"mousewheel";if(e._onwheel){e.removeEventListener(r,e._onwheel)}e._onwheel=t;e.addEventListener(r,t,{passive:false})}}function Q(e){var t=[];for(var r in e)t.push(e[r]);return t}e.exports={makeDragBox:O,makeDragger:D,makeRectDragger:z,makeZoombox:V,makeCorners:H,updateZoombox:q,xyCorners:J,transitionZoombox:G,removeZoombox:Z,showDoubleClickNotifier:Y,attachWheelEventHandler:$}},4305:function(e,t,r){"use strict";var n=r(39898);var a=r(30211);var i=r(28569);var o=r(6964);var s=r(29323).makeDragBox;var l=r(85555).DRAGGERSIZE;t.initInteractions=function e(r){var o=r._fullLayout;if(r._context.staticPlot){n.select(r).selectAll(".drag").remove();return}if(!o._has("cartesian")&&!o._has("splom"))return;var u=Object.keys(o._plots||{}).sort((function(e,t){if((o._plots[e].mainplot&&true)===(o._plots[t].mainplot&&true)){var r=e.split("y");var n=t.split("y");return r[0]===n[0]?Number(r[1]||1)-Number(n[1]||1):Number(r[0]||1)-Number(n[0]||1)}return o._plots[e].mainplot?1:-1}));u.forEach((function(e){var t=o._plots[e];var n=t.xaxis;var u=t.yaxis;if(!t.mainplot){var f=s(r,t,n._offset,u._offset,n._length,u._length,"ns","ew");f.onmousemove=function(t){r._fullLayout._rehover=function(){if(r._fullLayout._hoversubplot===e&&r._fullLayout._plots[e]){a.hover(r,t,e)}};a.hover(r,t,e);r._fullLayout._lasthover=f;r._fullLayout._hoversubplot=e};f.onmouseout=function(e){if(r._dragging)return;r._fullLayout._hoversubplot=null;i.unhover(r,e)};if(r._context.showAxisDragHandles){s(r,t,n._offset-l,u._offset-l,l,l,"n","w");s(r,t,n._offset+n._length,u._offset-l,l,l,"n","e");s(r,t,n._offset-l,u._offset+u._length,l,l,"s","w");s(r,t,n._offset+n._length,u._offset+u._length,l,l,"s","e")}}if(r._context.showAxisDragHandles){if(e===n._mainSubplot){var c=n._mainLinePosition;if(n.side==="top")c-=l;s(r,t,n._offset+n._length*.1,c,n._length*.8,l,"","ew");s(r,t,n._offset,c,n._length*.1,l,"","w");s(r,t,n._offset+n._length*.9,c,n._length*.1,l,"","e")}if(e===u._mainSubplot){var v=u._mainLinePosition;if(u.side!=="right")v-=l;s(r,t,v,u._offset+u._length*.1,l,u._length*.8,"ns","");s(r,t,v,u._offset+u._length*.9,l,u._length*.1,"s","");s(r,t,v,u._offset,l,u._length*.1,"n","")}}}));var f=o._hoverlayer.node();f.onmousemove=function(e){e.target=r._fullLayout._lasthover;a.hover(r,e,o._hoversubplot)};f.onclick=function(e){e.target=r._fullLayout._lasthover;a.click(r,e)};f.onmousedown=function(e){r._fullLayout._lasthover.onmousedown(e)};t.updateFx(r)};t.updateFx=function(e){var t=e._fullLayout;var r=t.dragmode==="pan"?"move":"crosshair";o(t._draggers,r)}},76325:function(e,t,r){"use strict";var n=r(73972);var a=r(71828);var i=r(41675);e.exports=function e(t){return function e(r,o){var s=r[t];if(!Array.isArray(s))return;var l=n.subplotsRegistry.cartesian;var u=l.idRegex;var f=o._subplots;var c=f.xaxis;var v=f.yaxis;var h=f.cartesian;var p=o._has("cartesian")||o._has("gl2d");for(var d=0;d<s.length;d++){var g=s[d];if(!a.isPlainObject(g))continue;var y=i.cleanId(g.xref,"x",false);var m=i.cleanId(g.yref,"y",false);var x=u.x.test(y);var b=u.y.test(m);if(x||b){if(!p)a.pushUnique(o._basePlotModules,l);var _=false;if(x&&c.indexOf(y)===-1){c.push(y);_=true}if(b&&v.indexOf(m)===-1){v.push(m);_=true}if(_&&x&&b){h.push(y+m)}}}}}},93612:function(e,t,r){"use strict";var n=r(39898);var a=r(73972);var i=r(71828);var o=r(74875);var s=r(91424);var l=r(27659).a0;var u=r(41675);var f=r(85555);var c=r(77922);var v=i.ensureSingle;function h(e,t,r){return i.ensureSingle(e,t,r,(function(e){e.datum(r)}))}t.name="cartesian";t.attr=["xaxis","yaxis"];t.idRoot=["x","y"];t.idRegex=f.idRegex;t.attrRegex=f.attrRegex;t.attributes=r(89502);t.layoutAttributes=r(13838);t.supplyLayoutDefaults=r(86763);t.transitionAxes=r(66847);t.finalizeSubplots=function(e,t){var r=t._subplots;var n=r.xaxis;var a=r.yaxis;var o=r.cartesian;var s=o.concat(r.gl2d||[]);var l={};var c={};var v,h,p;for(v=0;v<s.length;v++){var d=s[v].split("y");l[d[0]]=1;c["y"+d[1]]=1}for(v=0;v<n.length;v++){h=n[v];if(!l[h]){p=(e[u.id2name(h)]||{}).anchor;if(!f.idRegex.y.test(p))p="y";o.push(h+p);s.push(h+p);if(!c[p]){c[p]=1;i.pushUnique(a,p)}}}for(v=0;v<a.length;v++){p=a[v];if(!c[p]){h=(e[u.id2name(p)]||{}).anchor;if(!f.idRegex.x.test(h))h="x";o.push(h+p);s.push(h+p);if(!l[h]){l[h]=1;i.pushUnique(n,h)}}}if(!s.length){h="";p="";for(var g in e){if(f.attrRegex.test(g)){var y=g.charAt(0);if(y==="x"){if(!h||+g.substr(5)<+h.substr(5)){h=g}}else if(!p||+g.substr(5)<+p.substr(5)){p=g}}}h=h?u.name2id(h):"x";p=p?u.name2id(p):"y";n.push(h);a.push(p);o.push(h+p)}};t.plot=function(e,t,r,n){var a=e._fullLayout;var i=a._subplots.cartesian;var o=e.calcdata;var s;if(!Array.isArray(t)){t=[];for(s=0;s<o.length;s++)t.push(s)}for(s=0;s<i.length;s++){var l=i[s];var u=a._plots[l];var f=[];var c;for(var v=0;v<o.length;v++){var h=o[v];var d=h[0].trace;if(d.xaxis+d.yaxis===l){if(t.indexOf(d.index)!==-1||d.carpet){if(c&&c[0].trace.xaxis+c[0].trace.yaxis===l&&["tonextx","tonexty","tonext"].indexOf(d.fill)!==-1&&f.indexOf(c)===-1){f.push(c)}f.push(h)}c=h}}p(e,u,f,r,n)}};function p(e,t,r,i,o){var u=f.traceLayerClasses;var c=e._fullLayout;var v=c._modules;var h,p,d;var g=[];var y=[];for(var m=0;m<v.length;m++){h=v[m];var x=h.name;var b=a.modules[x].categories;if(b.svg){var _=h.layerName||x+"layer";var w=h.plot;p=l(r,w);d=p[0];r=p[1];if(d.length){g.push({i:u.indexOf(_),className:_,plotMethod:w,cdModule:d})}if(b.zoomScale){y.push("."+_)}}}g.sort((function(e,t){return e.i-t.i}));var T=t.plot.selectAll("g.mlayer").data(g,(function(e){return e.className}));T.enter().append("g").attr("class",(function(e){return e.className})).classed("mlayer",true).classed("rangeplot",t.isRangePlot);T.exit().remove();T.order();T.each((function(r){var a=n.select(this);var l=r.className;r.plotMethod(e,t,r.cdModule,a,i,o);if(f.clipOnAxisFalseQuery.indexOf("."+l)===-1){s.setClipUrl(a,t.layerClipId,e)}}));if(c._has("scattergl")){h=a.getModule("scattergl");d=l(r,h)[0];h.plot(e,t,d)}if(!e._context.staticPlot){if(t._hasClipOnAxisFalse){t.clipOnAxisFalseTraces=t.plot.selectAll(f.clipOnAxisFalseQuery.join(",")).selectAll(".trace")}if(y.length){var k=t.plot.selectAll(y.join(",")).selectAll(".trace");t.zoomScalePts=k.selectAll("path.point");t.zoomScaleTxt=k.selectAll(".textpoint")}}}t.clean=function(e,t,r,n){var a=n._plots||{};var i=t._plots||{};var o=n._subplots||{};var s;var l,f;if(n._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms){for(f in a){s=a[f];if(s.plotgroup)s.plotgroup.remove()}}var c=n._has&&n._has("gl");var v=t._has&&t._has("gl");if(c&&!v){for(f in a){s=a[f];if(s._scene)s._scene.destroy()}}if(o.xaxis&&o.yaxis){var h=u.listIds({_fullLayout:n});for(l=0;l<h.length;l++){var p=h[l];if(!t[u.id2name(p)]){n._infolayer.selectAll(".g-"+p+"title").remove()}}}var d=n._has&&n._has("cartesian");var g=t._has&&t._has("cartesian");if(d&&!g){y(n._cartesianlayer.selectAll(".subplot"),n);n._defs.selectAll(".axesclip").remove();delete n._axisConstraintGroups;delete n._axisMatchGroups}else if(o.cartesian){for(l=0;l<o.cartesian.length;l++){var x=o.cartesian[l];if(!i[x]){var b="."+x+",."+x+"-x,."+x+"-y";n._cartesianlayer.selectAll(b).remove();m(x,n)}}}};t.drawFramework=function(e){var t=e._fullLayout;var r=d(e);var a=t._cartesianlayer.selectAll(".subplot").data(r,String);a.enter().append("g").attr("class",(function(e){return"subplot "+e[0]}));a.order();a.exit().call(y,t);a.each((function(r){var a=r[0];var i=t._plots[a];i.plotgroup=n.select(this);g(e,i);i.draglayer=v(t._draggers,"g",a)}))};t.rangePlot=function(e,t,r){g(e,t);p(e,t,r);o.style(e)};function d(e){var t=e._fullLayout;var r=t._subplots.cartesian;var n=r.length;var a,i,o,s,l,u;var f=[];var c=[];for(a=0;a<n;a++){o=r[a];s=t._plots[o];l=s.xaxis;u=s.yaxis;var v=l._mainAxis;var h=u._mainAxis;var p=v._id+h._id;var d=t._plots[p];s.overlays=[];if(p!==o&&d){s.mainplot=p;s.mainplotinfo=d;c.push(o)}else{s.mainplot=undefined;s.mainplotinfo=undefined;f.push(o)}}for(a=0;a<c.length;a++){o=c[a];s=t._plots[o];s.mainplotinfo.overlays.push(s)}var g=f.concat(c);var y=new Array(n);for(a=0;a<n;a++){o=g[a];s=t._plots[o];l=s.xaxis;u=s.yaxis;var m=[o,l.layer,u.layer,l.overlaying||"",u.overlaying||""];for(i=0;i<s.overlays.length;i++){m.push(s.overlays[i].id)}y[a]=m}return y}function g(e,t){var r=t.plotgroup;var n=t.id;var a=f.layerValue2layerClass[t.xaxis.layer];var i=f.layerValue2layerClass[t.yaxis.layer];var o=e._fullLayout._hasOnlyLargeSploms;if(!t.mainplot){if(o){t.xlines=v(r,"path","xlines-above");t.ylines=v(r,"path","ylines-above");t.xaxislayer=v(r,"g","xaxislayer-above");t.yaxislayer=v(r,"g","yaxislayer-above")}else{var s=v(r,"g","layer-subplot");t.shapelayer=v(s,"g","shapelayer");t.imagelayer=v(s,"g","imagelayer");t.minorGridlayer=v(r,"g","minor-gridlayer");t.gridlayer=v(r,"g","gridlayer");t.zerolinelayer=v(r,"g","zerolinelayer");v(r,"path","xlines-below");v(r,"path","ylines-below");t.overlinesBelow=v(r,"g","overlines-below");v(r,"g","xaxislayer-below");v(r,"g","yaxislayer-below");t.overaxesBelow=v(r,"g","overaxes-below");t.plot=v(r,"g","plot");t.overplot=v(r,"g","overplot");t.xlines=v(r,"path","xlines-above");t.ylines=v(r,"path","ylines-above");t.overlinesAbove=v(r,"g","overlines-above");v(r,"g","xaxislayer-above");v(r,"g","yaxislayer-above");t.overaxesAbove=v(r,"g","overaxes-above");t.xlines=r.select(".xlines-"+a);t.ylines=r.select(".ylines-"+i);t.xaxislayer=r.select(".xaxislayer-"+a);t.yaxislayer=r.select(".yaxislayer-"+i)}}else{var l=t.mainplotinfo;var c=l.plotgroup;var p=n+"-x";var d=n+"-y";t.minorGridlayer=l.minorGridlayer;t.gridlayer=l.gridlayer;t.zerolinelayer=l.zerolinelayer;v(l.overlinesBelow,"path",p);v(l.overlinesBelow,"path",d);v(l.overaxesBelow,"g",p);v(l.overaxesBelow,"g",d);t.plot=v(l.overplot,"g",n);v(l.overlinesAbove,"path",p);v(l.overlinesAbove,"path",d);v(l.overaxesAbove,"g",p);v(l.overaxesAbove,"g",d);t.xlines=c.select(".overlines-"+a).select("."+p);t.ylines=c.select(".overlines-"+i).select("."+d);t.xaxislayer=c.select(".overaxes-"+a).select("."+p);t.yaxislayer=c.select(".overaxes-"+i).select("."+d)}if(!o){h(t.minorGridlayer,"g",t.xaxis._id);h(t.minorGridlayer,"g",t.yaxis._id);t.minorGridlayer.selectAll("g").map((function(e){return e[0]})).sort(u.idSort);h(t.gridlayer,"g",t.xaxis._id);h(t.gridlayer,"g",t.yaxis._id);t.gridlayer.selectAll("g").map((function(e){return e[0]})).sort(u.idSort)}t.xlines.style("fill","none").classed("crisp",true);t.ylines.style("fill","none").classed("crisp",true)}function y(e,t){if(!e)return;var r={};e.each((function(e){var a=e[0];var i=n.select(this);i.remove();m(a,t);r[a]=true}));for(var a in t._plots){var i=t._plots[a];var o=i.overlays||[];for(var s=0;s<o.length;s++){var l=o[s];if(r[l.id]){l.plot.selectAll(".trace").remove()}}}}function m(e,t){t._draggers.selectAll("g."+e).remove();t._defs.select("#clip"+t._uid+e+"plot").remove()}t.toSVG=function(e){var t=e._fullLayout._glimages;var r=n.select(e).selectAll(".svg-container");var a=r.filter((function(e,t){return t===r.size()-1})).selectAll(".gl-canvas-context, .gl-canvas-focus");function i(){var e=this;var r=e.toDataURL("image/png");var n=t.append("svg:image");n.attr({xmlns:c.svg,"xlink:href":r,preserveAspectRatio:"none",x:0,y:0,width:e.style.width,height:e.style.height})}a.each(i)};t.updateFx=r(4305).updateFx},13838:function(e,t,r){"use strict";var n=r(41940);var a=r(22399);var i=r(79952).P;var o=r(1426).extendFlat;var s=r(44467).templatedArray;var l=r(12663).descriptionWithDates;var u=r(50606).ONEDAY;var f=r(85555);var c=f.HOUR_PATTERN;var v=f.WEEKDAY_PATTERN;var h={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:undefined,dtick:undefined}};var p=o({},h,{values:h.values.slice().concat(["sync"])});function d(e){return{valType:"integer",min:0,dflt:e?5:0,editType:"ticks"}}var g={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}};var y={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}};var m={valType:"data_array",editType:"ticks"};var x={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function b(e){var t={valType:"number",min:0,editType:"ticks"};if(!e)t.dflt=5;return t}function _(e){var t={valType:"number",min:0,editType:"ticks"};if(!e)t.dflt=1;return t}var w={valType:"color",dflt:a.defaultLine,editType:"ticks"};var T={valType:"color",dflt:a.lightLine,editType:"ticks"};function k(e){var t={valType:"number",min:0,editType:"ticks"};if(!e)t.dflt=1;return t}var A=o({},i,{editType:"ticks"});var M={valType:"boolean",editType:"ticks"};e.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:a.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:n({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:true},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[true,false,"reversed","min reversed","max reversed","min","max"],dflt:true,editType:"axrange",impliedEdits:{"range[0]":undefined,"range[1]":undefined}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":undefined,"range[1]":undefined}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":undefined,"range[1]":undefined}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":undefined,"range[1]":undefined}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":undefined,"range[1]":undefined}},include:{valType:"any",arrayOk:true,editType:"plot",impliedEdits:{"range[0]":undefined,"range[1]":undefined}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":false},anim:true},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":false},anim:true}],editType:"axrange",impliedEdits:{autorange:false},anim:true},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":false}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":false}},fixedrange:{valType:"boolean",dflt:false,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[f.idRegex.x.toString(),f.idRegex.y.toString(),false],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[f.idRegex.x.toString(),f.idRegex.y.toString()],editType:"calc"},rangebreaks:s("rangebreak",{enabled:{valType:"boolean",dflt:true,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[v,c,""],editType:"calc"},values:{valType:"info_array",freeLength:true,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:u},editType:"calc"}),tickmode:p,nticks:d(),tick0:g,dtick:y,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:m,ticktext:{valType:"data_array",editType:"ticks"},ticks:x,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[true,"ticks",false,"all","allticks"],dflt:false,editType:"ticks+layoutstyle"},ticklen:b(),tickwidth:_(),tickcolor:w,showticklabels:{valType:"boolean",dflt:true,editType:"ticks"},labelalias:{valType:"any",dflt:false,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[true,false],dflt:false,editType:"ticks"},showspikes:{valType:"boolean",dflt:false,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:o({},i,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:n({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:false,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:l("tick label")},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:true,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:l("hover text")},showline:{valType:"boolean",dflt:false,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:a.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:M,gridcolor:T,gridwidth:k(),griddash:A,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:true,editType:"ticks"},dividercolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",f.idRegex.x.toString(),f.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",f.idRegex.x.toString(),f.idRegex.y.toString()],editType:"plot"},minor:{tickmode:h,nticks:d("minor"),tick0:g,dtick:y,tickvals:m,ticks:x,ticklen:b("minor"),tickwidth:_("minor"),tickcolor:w,gridcolor:T,gridwidth:k("minor"),griddash:A,showgrid:M,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:false,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:n({editType:"ticks"})}}},86763:function(e,t,r){"use strict";var n=r(71828);var a=r(7901);var i=r(23469).isUnifiedHover;var o=r(98212);var s=r(44467);var l=r(10820);var u=r(13838);var f=r(951);var c=r(71453);var v=r(99082);var h=r(52830);var p=r(41675);var d=p.id2name;var g=p.name2id;var y=r(85555).AX_ID_PATTERN;var m=r(73972);var x=m.traceIs;var b=m.getComponentMethod;function _(e,t,r){if(Array.isArray(e[t]))e[t].push(r);else e[t]=[r]}e.exports=function e(t,r,m){var w=r.autotypenumbers;var T={};var k={};var A={};var M={};var S={};var E={};var L={};var C={};var I={};var P={};var O,D;for(O=0;O<m.length;O++){var z=m[O];if(!x(z,"cartesian")&&!x(z,"gl2d"))continue;var R;if(z.xaxis){R=d(z.xaxis);_(T,R,z)}else if(z.xaxes){for(D=0;D<z.xaxes.length;D++){_(T,d(z.xaxes[D]),z)}}var F;if(z.yaxis){F=d(z.yaxis);_(T,F,z)}else if(z.yaxes){for(D=0;D<z.yaxes.length;D++){_(T,d(z.yaxes[D]),z)}}if(z.type==="funnel"){if(z.orientation==="h"){if(R)k[R]=true;if(F)L[F]=true}else{if(F)A[F]=true}}else if(z.type==="image"){if(F)C[F]=true;if(R)C[R]=true}else{if(F){S[F]=true;E[F]=true}if(!x(z,"carpet")||z.type==="carpet"&&!z._cheater){if(R)M[R]=true}}if(z.type==="carpet"&&z._cheater){if(R)k[R]=true}if(x(z,"2dMap")){I[R]=true;I[F]=true}if(x(z,"oriented")){var B=z.orientation==="h"?F:R;P[B]=true}}var N=r._subplots;var j=N.xaxis;var U=N.yaxis;var V=n.simpleMap(j,d);var H=n.simpleMap(U,d);var q=V.concat(H);var G=a.background;if(j.length&&U.length){G=n.coerce(t,r,l,"plot_bgcolor")}var Z=a.combine(G,r.paper_bgcolor);var Y;var W;var X;var J;var K;function $(){var e=T[Y]||[];K._traceIndices=e.map((function(e){return e._expandedIndex}));K._annIndices=[];K._shapeIndices=[];K._selectionIndices=[];K._imgIndices=[];K._subplotsWith=[];K._counterAxes=[];K._name=K._attr=Y;K._id=W}function Q(e,t){return n.coerce(J,K,u,e,t)}function ee(e,t){return n.coerce2(J,K,u,e,t)}function te(e){return e==="x"?U:j}function re(e,r){var n=e==="x"?V:H;var a=[];for(var i=0;i<n.length;i++){var o=n[i];if(o!==r&&!(t[o]||{}).overlaying){a.push(g(o))}}return a}var ne={x:te("x"),y:te("y")};var ae=ne.x.concat(ne.y);var ie={};var oe=[];function se(){var e=J.matches;if(y.test(e)&&ae.indexOf(e)===-1){ie[e]=J.type;oe=Object.keys(ie)}}var le=o(t,r);var ue=i(le);for(O=0;O<q.length;O++){Y=q[O];W=g(Y);X=Y.charAt(0);if(!n.isPlainObject(t[Y])){t[Y]={}}J=t[Y];K=s.newContainer(r,Y,X+"axis");$();var fe=X==="x"&&!M[Y]&&k[Y]||X==="y"&&!S[Y]&&A[Y];var ce=X==="y"&&(!E[Y]&&L[Y]||C[Y]);var ve={hasMinor:true,letter:X,font:r.font,outerTicks:I[Y],showGrid:!P[Y],data:T[Y]||[],bgColor:Z,calendar:r.calendar,automargin:true,visibleDflt:fe,reverseDflt:ce,autotypenumbersDflt:w,splomStash:((r._splomAxes||{})[X]||{})[W]};Q("uirevision",r.uirevision);f(J,K,Q,ve);c(J,K,Q,ve,r);var he=ue&&X===le.charAt(0);var pe=ee("spikecolor",ue?K.color:undefined);var de=ee("spikethickness",ue?1.5:undefined);var ge=ee("spikedash",ue?"dot":undefined);var ye=ee("spikemode",ue?"across":undefined);var me=ee("spikesnap");var xe=Q("showspikes",!!he||!!pe||!!de||!!ge||!!ye||!!me);if(!xe){delete K.spikecolor;delete K.spikethickness;delete K.spikedash;delete K.spikemode;delete K.spikesnap}var be=d(J.overlaying);var _e=[0,1];if(r[be]!==undefined){var we=d(r[be].anchor);if(r[we]!==undefined){_e=r[we].domain}}h(J,K,Q,{letter:X,counterAxes:ne[X],overlayableAxes:re(X,Y),grid:r.grid,overlayingDomain:_e});Q("title.standoff");se();K._input=J}O=0;while(O<oe.length){W=oe[O++];Y=d(W);X=Y.charAt(0);if(!n.isPlainObject(t[Y])){t[Y]={}}J=t[Y];K=s.newContainer(r,Y,X+"axis");$();var Te={letter:X,font:r.font,outerTicks:I[Y],showGrid:!P[Y],data:[],bgColor:Z,calendar:r.calendar,automargin:true,visibleDflt:false,reverseDflt:false,autotypenumbersDflt:w,splomStash:((r._splomAxes||{})[X]||{})[W]};Q("uirevision",r.uirevision);K.type=ie[W]||"linear";c(J,K,Q,Te,r);h(J,K,Q,{letter:X,counterAxes:ne[X],overlayableAxes:re(X,Y),grid:r.grid});Q("fixedrange");se();K._input=J}var ke=b("rangeslider","handleDefaults");var Ae=b("rangeselector","handleDefaults");for(O=0;O<V.length;O++){Y=V[O];J=t[Y];K=r[Y];ke(t,r,Y);if(K.type==="date"){Ae(J,K,r,H,K.calendar)}Q("fixedrange")}for(O=0;O<H.length;O++){Y=H[O];J=t[Y];K=r[Y];var Me=r[d(K.anchor)];var Se=b("rangeslider","isVisible")(Me);Q("fixedrange",Se)}v.handleDefaults(t,r,{axIds:ae.concat(oe).sort(p.idSort),axHasImage:C})}},92128:function(e,t,r){"use strict";var n=r(84267).mix;var a=r(22399);var i=r(71828);e.exports=function e(t,r,o,s){s=s||{};var l=s.dfltColor;function u(e,n){return i.coerce2(t,r,s.attributes,e,n)}var f=u("linecolor",l);var c=u("linewidth");var v=o("showline",s.showLine||!!f||!!c);if(!v){delete r.linecolor;delete r.linewidth}var h=n(l,s.bgColor,s.blend||a.lightFraction).toRgbString();var p=u("gridcolor",h);var d=u("gridwidth");var g=u("griddash");var y=o("showgrid",s.showGrid||!!p||!!d||!!g);if(!y){delete r.gridcolor;delete r.gridwidth;delete r.griddash}if(s.hasMinor){var m=n(r.gridcolor,s.bgColor,67).toRgbString();var x=u("minor.gridcolor",m);var b=u("minor.gridwidth",r.gridwidth||1);var _=u("minor.griddash",r.griddash||"solid");var w=o("minor.showgrid",!!x||!!b||!!_);if(!w){delete r.minor.gridcolor;delete r.minor.gridwidth;delete r.minor.griddash}}if(!s.noZeroLine){var T=u("zerolinecolor",l);var k=u("zerolinewidth");var A=o("zeroline",s.showGrid||!!T||!!k);if(!A){delete r.zerolinecolor;delete r.zerolinewidth}}}},52830:function(e,t,r){"use strict";var n=r(92770);var a=r(71828);e.exports=function e(t,r,i,o){var s=o.counterAxes||[];var l=o.overlayableAxes||[];var u=o.letter;var f=o.grid;var c=o.overlayingDomain;var v,h,p,d,g,y;if(f){h=f._domains[u][f._axisMap[r._id]];v=f._anchors[r._id];if(h){p=f[u+"side"].split(" ")[0];d=f.domain[u][p==="right"||p==="top"?1:0]}}h=h||[0,1];v=v||(n(t.position)?"free":s[0]||"free");p=p||(u==="x"?"bottom":"left");d=d||0;g=0;y=false;var m=a.coerce(t,r,{anchor:{valType:"enumerated",values:["free"].concat(s),dflt:v}},"anchor");var x=a.coerce(t,r,{side:{valType:"enumerated",values:u==="x"?["bottom","top"]:["left","right"],dflt:p}},"side");if(m==="free"){if(u==="y"){var b=i("autoshift");if(b){d=x==="left"?c[0]:c[1];y=r.automargin?r.automargin:true;g=x==="left"?-3:3}i("shift",g)}i("position",d)}i("automargin",y);var _=false;if(l.length){_=a.coerce(t,r,{overlaying:{valType:"enumerated",values:[false].concat(l),dflt:false}},"overlaying")}if(!_){var w=i("domain",h);if(w[0]>w[1]-1/4096)r.domain=h;a.noneOrAll(t.domain,r.domain,h);if(r.tickmode==="sync"){r.tickmode="auto"}}i("layer");return r}},89426:function(e,t,r){"use strict";var n=r(59652);e.exports=function e(t,r,a,i,o){if(!o)o={};var s=o.tickSuffixDflt;var l=n(t);var u=a("tickprefix");if(u)a("showtickprefix",l);var f=a("ticksuffix",s);if(f)a("showticksuffix",l)}},23608:function(e,t,r){"use strict";var n=r(23074);e.exports=function e(t,r,a,i){var o=r._template||{};var s=r.type||o.type||"-";a("minallowed");a("maxallowed");var l=a("range");if(!l){var u;if(!i.noInsiderange&&s!=="log"){u=a("insiderange");if(u&&(u[0]===null||u[1]===null)){r.insiderange=false;u=undefined}if(u)l=a("range",u)}}var f=r.getAutorangeDflt(l,i);var c=a("autorange",f);var v;if(l&&(l[0]===null&&l[1]===null||(l[0]===null||l[1]===null)&&(c==="reversed"||c===true)||l[0]!==null&&(c==="min"||c==="max reversed")||l[1]!==null&&(c==="max"||c==="min reversed"))){l=undefined;delete r.range;r.autorange=true;v=true}if(!v){f=r.getAutorangeDflt(l,i);c=a("autorange",f)}if(c){n(a,c,l);if(s==="linear"||s==="-")a("rangemode")}r.cleanRange()}},42449:function(e,t,r){"use strict";var n=r(18783).FROM_BL;e.exports=function e(t,r,a){if(a===undefined){a=n[t.constraintoward||"center"]}var i=[t.r2l(t.range[0]),t.r2l(t.range[1])];var o=i[0]+(i[1]-i[0])*a;t.range=t._input.range=[t.l2r(o+(i[0]-o)*r),t.l2r(o+(i[1]-o)*r)];t.setScale()}},21994:function(e,t,r){"use strict";var n=r(39898);var a=r(84096).g0;var i=r(71828);var o=i.numberFormat;var s=r(92770);var l=i.cleanNumber;var u=i.ms2DateTime;var f=i.dateTime2ms;var c=i.ensureNumber;var v=i.isArrayOrTypedArray;var h=r(50606);var p=h.FP_SAFE;var d=h.BADNUM;var g=h.LOG_CLIP;var y=h.ONEWEEK;var m=h.ONEDAY;var x=h.ONEHOUR;var b=h.ONEMIN;var _=h.ONESEC;var w=r(41675);var T=r(85555);var k=T.HOUR_PATTERN;var A=T.WEEKDAY_PATTERN;function M(e){return Math.pow(10,e)}function S(e){return e!==null&&e!==undefined}e.exports=function e(t,r){r=r||{};var h=t._id||"x";var E=h.charAt(0);function L(e,r){if(e>0)return Math.log(e)/Math.LN10;else if(e<=0&&r&&t.range&&t.range.length===2){var n=t.range[0];var a=t.range[1];return.5*(n+a-2*g*Math.abs(n-a))}else return d}function C(e,r,n,a){if((a||{}).msUTC&&s(e)){return+e}var o=f(e,n||t.calendar);if(o===d){if(s(e)){e=+e;var l=Math.floor(i.mod(e+.05,1)*10);var u=Math.round(e-l/10);o=f(new Date(u))+l/10}else return d}return o}function I(e,r,n){return u(e,r,n||t.calendar)}function P(e){return t._categories[Math.round(e)]}function O(e){if(S(e)){if(t._categoriesMap===undefined){t._categoriesMap={}}if(t._categoriesMap[e]!==undefined){return t._categoriesMap[e]}else{t._categories.push(typeof e==="number"?String(e):e);var r=t._categories.length-1;t._categoriesMap[e]=r;return r}}return d}function D(e,t){var r=new Array(t);for(var n=0;n<t;n++){var a=(e[0]||[])[n];var i=(e[1]||[])[n];r[n]=z([a,i])}return r}function z(e){if(t._categoriesMap){return t._categoriesMap[e]}}function R(e){var t=z(e);if(t!==undefined)return t;if(s(e))return+e}function F(e){return s(e)?+e:z(e)}function B(e,t,r){return n.round(r+t*e,2)}function N(e,t,r){return(e-r)/t}var j=function e(r){if(!s(r))return d;return B(r,t._m,t._b)};var U=function(e){return N(e,t._m,t._b)};if(t.rangebreaks){var V=E==="y";j=function(e){if(!s(e))return d;var r=t._rangebreaks.length;if(!r)return B(e,t._m,t._b);var n=V;if(t.range[0]>t.range[1])n=!n;var a=n?-1:1;var i=a*e;var o=0;for(var l=0;l<r;l++){var u=a*t._rangebreaks[l].min;var f=a*t._rangebreaks[l].max;if(i<u)break;if(i>f)o=l+1;else{o=i<(u+f)/2?l:l+1;break}}var c=t._B[o]||0;if(!isFinite(c))return 0;return B(e,t._m2,c)};U=function(e){var r=t._rangebreaks.length;if(!r)return N(e,t._m,t._b);var n=0;for(var a=0;a<r;a++){if(e<t._rangebreaks[a].pmin)break;if(e>t._rangebreaks[a].pmax)n=a+1}return N(e,t._m2,t._B[n])}}t.c2l=t.type==="log"?L:c;t.l2c=t.type==="log"?M:c;t.l2p=j;t.p2l=U;t.c2p=t.type==="log"?function(e,t){return j(L(e,t))}:j;t.p2c=t.type==="log"?function(e){return M(U(e))}:U;if(["linear","-"].indexOf(t.type)!==-1){t.d2r=t.r2d=t.d2c=t.r2c=t.d2l=t.r2l=l;t.c2d=t.c2r=t.l2d=t.l2r=c;t.d2p=t.r2p=function(e){return t.l2p(l(e))};t.p2d=t.p2r=U;t.cleanPos=c}else if(t.type==="log"){t.d2r=t.d2l=function(e,t){return L(l(e),t)};t.r2d=t.r2c=function(e){return M(l(e))};t.d2c=t.r2l=l;t.c2d=t.l2r=c;t.c2r=L;t.l2d=M;t.d2p=function(e,r){return t.l2p(t.d2r(e,r))};t.p2d=function(e){return M(U(e))};t.r2p=function(e){return t.l2p(l(e))};t.p2r=U;t.cleanPos=c}else if(t.type==="date"){t.d2r=t.r2d=i.identity;t.d2c=t.r2c=t.d2l=t.r2l=C;t.c2d=t.c2r=t.l2d=t.l2r=I;t.d2p=t.r2p=function(e,r,n){return t.l2p(C(e,0,n))};t.p2d=t.p2r=function(e,t,r){return I(U(e),t,r)};t.cleanPos=function(e){return i.cleanDate(e,d,t.calendar)}}else if(t.type==="category"){t.d2c=t.d2l=O;t.r2d=t.c2d=t.l2d=P;t.d2r=t.d2l_noadd=R;t.r2c=function(e){var r=F(e);return r!==undefined?r:t.fraction2r(.5)};t.l2r=t.c2r=c;t.r2l=F;t.d2p=function(e){return t.l2p(t.r2c(e))};t.p2d=function(e){return P(U(e))};t.r2p=t.d2p;t.p2r=U;t.cleanPos=function(e){if(typeof e==="string"&&e!=="")return e;return c(e)}}else if(t.type==="multicategory"){t.r2d=t.c2d=t.l2d=P;t.d2r=t.d2l_noadd=R;t.r2c=function(e){var r=R(e);return r!==undefined?r:t.fraction2r(.5)};t.r2c_just_indices=z;t.l2r=t.c2r=c;t.r2l=R;t.d2p=function(e){return t.l2p(t.r2c(e))};t.p2d=function(e){return P(U(e))};t.r2p=t.d2p;t.p2r=U;t.cleanPos=function(e){if(Array.isArray(e)||typeof e==="string"&&e!=="")return e;return c(e)};t.setupMultiCategory=function(e){var n=t._traceIndices;var a,o;var s=t._matchGroup;if(s&&t._categories.length===0){for(var l in s){if(l!==h){var u=r[w.id2name(l)];n=n.concat(u._traceIndices)}}}var f=[[0,{}],[0,{}]];var c=[];for(a=0;a<n.length;a++){var p=e[n[a]];if(E in p){var d=p[E];var g=p._length||i.minRowLength(d);if(v(d[0])&&v(d[1])){for(o=0;o<g;o++){var y=d[0][o];var m=d[1][o];if(S(y)&&S(m)){c.push([y,m]);if(!(y in f[0][1])){f[0][1][y]=f[0][0]++}if(!(m in f[1][1])){f[1][1][m]=f[1][0]++}}}}}}c.sort((function(e,t){var r=f[0][1];var n=r[e[0]]-r[t[0]];if(n)return n;var a=f[1][1];return a[e[1]]-a[t[1]]}));for(a=0;a<c.length;a++){O(c[a])}}}t.fraction2r=function(e){var r=t.r2l(t.range[0]);var n=t.r2l(t.range[1]);return t.l2r(r+e*(n-r))};t.r2fraction=function(e){var r=t.r2l(t.range[0]);var n=t.r2l(t.range[1]);return(t.r2l(e)-r)/(n-r)};t.limitRange=function(e){var r=t.minallowed;var n=t.maxallowed;if(r===undefined&&n===undefined)return;if(!e)e="range";var a=i.nestedProperty(t,e).get();var o=i.simpleMap(a,t.r2l);var s=o[1]<o[0];if(s)o.reverse();var l=i.simpleMap([r,n],t.r2l);if(r!==undefined&&o[0]<l[0])a[s?1:0]=r;if(n!==undefined&&o[1]>l[1])a[s?0:1]=n};t.cleanRange=function(e,r){t._cleanRange(e,r);t.limitRange(e)};t._cleanRange=function(e,r){if(!r)r={};if(!e)e="range";var n=i.nestedProperty(t,e).get();var a,o;if(t.type==="date")o=i.dfltRange(t.calendar);else if(E==="y")o=T.DFLTRANGEY;else if(t._name==="realaxis")o=[0,1];else o=r.dfltRange||T.DFLTRANGEX;o=o.slice();if(t.rangemode==="tozero"||t.rangemode==="nonnegative"){o[0]=0}if(!n||n.length!==2){i.nestedProperty(t,e).set(o);return}var l=n[0]===null;var u=n[1]===null;if(t.type==="date"&&!t.autorange){n[0]=i.cleanDate(n[0],d,t.calendar);n[1]=i.cleanDate(n[1],d,t.calendar)}for(a=0;a<2;a++){if(t.type==="date"){if(!i.isDateTime(n[a],t.calendar)){t[e]=o;break}if(t.r2l(n[0])===t.r2l(n[1])){var f=i.constrain(t.r2l(n[0]),i.MIN_MS+1e3,i.MAX_MS-1e3);n[0]=t.l2r(f-1e3);n[1]=t.l2r(f+1e3);break}}else{if(!s(n[a])){if(!(l||u)&&s(n[1-a])){n[a]=n[1-a]*(a?10:.1)}else{t[e]=o;break}}if(n[a]<-p)n[a]=-p;else if(n[a]>p)n[a]=p;if(n[0]===n[1]){var c=Math.max(1,Math.abs(n[0]*1e-6));n[0]-=c;n[1]+=c}}}};t.setScale=function(e){var n=r._size;if(t.overlaying){var a=w.getFromId({_fullLayout:r},t.overlaying);t.domain=a.domain}var i=e&&t._r?"_r":"range";var o=t.calendar;t.cleanRange(i);var s=t.r2l(t[i][0],o);var l=t.r2l(t[i][1],o);var u=E==="y";if(u){t._offset=n.t+(1-t.domain[1])*n.h;t._length=n.h*(t.domain[1]-t.domain[0]);t._m=t._length/(s-l);t._b=-t._m*l}else{t._offset=n.l+t.domain[0]*n.w;t._length=n.w*(t.domain[1]-t.domain[0]);t._m=t._length/(l-s);t._b=-t._m*s}t._rangebreaks=[];t._lBreaks=0;t._m2=0;t._B=[];if(t.rangebreaks){var f,c;t._rangebreaks=t.locateBreaks(Math.min(s,l),Math.max(s,l));if(t._rangebreaks.length){for(f=0;f<t._rangebreaks.length;f++){c=t._rangebreaks[f];t._lBreaks+=Math.abs(c.max-c.min)}var v=u;if(s>l)v=!v;if(v)t._rangebreaks.reverse();var h=v?-1:1;t._m2=h*t._length/(Math.abs(l-s)-t._lBreaks);t._B.push(-t._m2*(u?l:s));for(f=0;f<t._rangebreaks.length;f++){c=t._rangebreaks[f];t._B.push(t._B[t._B.length-1]-h*t._m2*(c.max-c.min))}for(f=0;f<t._rangebreaks.length;f++){c=t._rangebreaks[f];c.pmin=j(c.min);c.pmax=j(c.max)}}}if(!isFinite(t._m)||!isFinite(t._b)||t._length<0){r._replotting=false;throw new Error("Something went wrong with axis scaling")}};t.maskBreaks=function(e){var r=t.rangebreaks||[];var n,a,o,s,u;if(!r._cachedPatterns){r._cachedPatterns=r.map((function(e){return e.enabled&&e.bounds?i.simpleMap(e.bounds,e.pattern?l:t.d2c):null}))}if(!r._cachedValues){r._cachedValues=r.map((function(e){return e.enabled&&e.values?i.simpleMap(e.values,t.d2c).sort(i.sorterAsc):null}))}for(var f=0;f<r.length;f++){var c=r[f];if(c.enabled){if(c.bounds){var v=c.pattern;n=r._cachedPatterns[f];a=n[0];o=n[1];switch(v){case A:u=new Date(e);s=u.getUTCDay();if(a>o){o+=7;if(s<a)s+=7}break;case k:u=new Date(e);var h=u.getUTCHours();var p=u.getUTCMinutes();var g=u.getUTCSeconds();var y=u.getUTCMilliseconds();s=h+(p/60+g/3600+y/36e5);if(a>o){o+=24;if(s<a)s+=24}break;case"":s=e;break}if(s>=a&&s<o)return d}else{var m=r._cachedValues[f];for(var x=0;x<m.length;x++){a=m[x];o=a+c.dvalue;if(e>=a&&e<o)return d}}}}return e};t.locateBreaks=function(e,r){var n,a,o,s;var u=[];if(!t.rangebreaks)return u;var f=t.rangebreaks.slice().sort((function(e,t){if(e.pattern===A&&t.pattern===k)return-1;if(t.pattern===A&&e.pattern===k)return 1;return 0}));var c=function(t,n){t=i.constrain(t,e,r);n=i.constrain(n,e,r);if(t===n)return;var a=true;for(var o=0;o<u.length;o++){var s=u[o];if(t<s.max&&n>=s.min){if(t<s.min){s.min=t}if(n>s.max){s.max=n}a=false}}if(a){u.push({min:t,max:n})}};for(n=0;n<f.length;n++){var v=f[n];if(v.enabled){if(v.bounds){var h=e;var p=r;if(v.pattern){h=Math.floor(h)}a=i.simpleMap(v.bounds,v.pattern?l:t.r2l);o=a[0];s=a[1];var d=new Date(h);var g;var w;switch(v.pattern){case A:w=y;g=((s<o?7:0)+(s-o))*m;h+=o*m-(d.getUTCDay()*m+d.getUTCHours()*x+d.getUTCMinutes()*b+d.getUTCSeconds()*_+d.getUTCMilliseconds());break;case k:w=m;g=((s<o?24:0)+(s-o))*x;h+=o*x-(d.getUTCHours()*x+d.getUTCMinutes()*b+d.getUTCSeconds()*_+d.getUTCMilliseconds());break;default:h=Math.min(a[0],a[1]);p=Math.max(a[0],a[1]);w=p-h;g=w}for(var T=h;T<p;T+=w){c(T,T+g)}}else{var M=i.simpleMap(v.values,t.d2c);for(var S=0;S<M.length;S++){o=M[S];s=o+v.dvalue;c(o,s)}}}}u.sort((function(e,t){return e.min-t.min}));return u};t.makeCalcdata=function(e,r,n){var a,o,s,l;var u=t.type;var f=u==="date"&&e[r+"calendar"];if(r in e){a=e[r];l=e._length||i.minRowLength(a);if(i.isTypedArray(a)&&(u==="linear"||u==="log")){if(l===a.length){return a}else if(a.subarray){return a.subarray(0,l)}}if(u==="multicategory"){return D(a,l)}o=new Array(l);for(s=0;s<l;s++){o[s]=t.d2c(a[s],0,f,n)}}else{var c=r+"0"in e?t.d2c(e[r+"0"],0,f):0;var v=e["d"+r]?Number(e["d"+r]):1;a=e[{x:"y",y:"x"}[r]];l=e._length||a.length;o=new Array(l);for(s=0;s<l;s++){o[s]=c+s*v}}if(t.rangebreaks){for(s=0;s<l;s++){o[s]=t.maskBreaks(o[s])}}return o};t.isValidRange=function(e,r){return Array.isArray(e)&&e.length===2&&(r&&e[0]===null||s(t.r2l(e[0])))&&(r&&e[1]===null||s(t.r2l(e[1])))};t.getAutorangeDflt=function(e,r){var n=!t.isValidRange(e,"nullOk");if(n&&r&&r.reverseDflt)n="reversed";else if(e){if(e[0]===null&&e[1]===null){n=true}else if(e[0]===null&&e[1]!==null){n="min"}else if(e[0]!==null&&e[1]===null){n="max"}}return n};t.isReversed=function(){var e=t.autorange;return e==="reversed"||e==="min reversed"||e==="max reversed"};t.isPtWithinRange=function(e,r){var n=t.c2l(e[E],null,r);var a=t.r2l(t.range[0]);var i=t.r2l(t.range[1]);if(a<i){return a<=n&&n<=i}else{return i<=n&&n<=a}};t._emptyCategories=function(){t._categories=[];t._categoriesMap={}};t.clearCalc=function(){var e=t._matchGroup;if(e){var n=null;var a=null;for(var i in e){var o=r[w.id2name(i)];if(o._categories){n=o._categories;a=o._categoriesMap;break}}if(n&&a){t._categories=n;t._categoriesMap=a}else{t._emptyCategories()}}else{t._emptyCategories()}if(t._initialCategories){for(var s=0;s<t._initialCategories.length;s++){O(t._initialCategories[s])}}};t.sortByInitialCategories=function(){var e=[];t._emptyCategories();if(t._initialCategories){for(var n=0;n<t._initialCategories.length;n++){O(t._initialCategories[n])}}e=e.concat(t._traceIndices);var a=t._matchGroup;for(var i in a){if(h===i)continue;var o=r[w.id2name(i)];o._categories=t._categories;o._categoriesMap=t._categoriesMap;e=e.concat(o._traceIndices)}return e};var H=r._d3locale;if(t.type==="date"){t._dateFormat=H?H.timeFormat:a;t._extraFormat=r._extraFormat}t._separators=r.separators;t._numFormat=H?H.numberFormat:o;delete t._minDtick;delete t._forceTick0}},59652:function(e){"use strict";e.exports=function e(t){var r=["showexponent","showtickprefix","showticksuffix"];var n=r.filter((function(e){return t[e]!==undefined}));var a=function(e){return t[e]===t[n[0]]};if(n.every(a)||n.length===1){return t[n[0]]}}},96115:function(e,t,r){"use strict";var n=r(71828);var a=r(7901).contrast;var i=r(13838);var o=r(59652);var s=r(85501);e.exports=function e(t,r,u,f,c){if(!c)c={};var v=u("labelalias");if(!n.isPlainObject(v))delete r.labelalias;var h=o(t);var p=u("showticklabels");if(p){var d=c.font||{};var g=r.color;var y=r.ticklabelposition||"";var m=y.indexOf("inside")!==-1?a(c.bgColor):g&&g!==i.color.dflt?g:d.color;n.coerceFont(u,"tickfont",{family:d.family,size:d.size,color:m});if(!c.noTicklabelstep&&f!=="multicategory"&&f!=="log"){u("ticklabelstep")}if(!c.noAng)u("tickangle");if(f!=="category"){var x=u("tickformat");s(t,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:l});if(!r.tickformatstops.length){delete r.tickformatstops}if(!c.noExp&&!x&&f!=="date"){u("showexponent",h);u("exponentformat");u("minexponent");u("separatethousands")}}}};function l(e,t){function r(r,a){return n.coerce(e,t,i.tickformatstops,r,a)}var a=r("enabled");if(a){r("dtickrange");r("value")}}},38701:function(e,t,r){"use strict";var n=r(71828);var a=r(13838);e.exports=function e(t,r,i,o){var s=o.isMinor;var l=s?t.minor||{}:t;var u=s?r.minor:r;var f=s?a.minor:a;var c=s?"minor.":"";var v=n.coerce2(l,u,f,"ticklen",s?(r.ticklen||5)*.6:undefined);var h=n.coerce2(l,u,f,"tickwidth",s?r.tickwidth||1:undefined);var p=n.coerce2(l,u,f,"tickcolor",(s?r.tickcolor:undefined)||u.color);var d=i(c+"ticks",!s&&o.outerTicks||v||h||p?"outside":"");if(!d){delete u.ticklen;delete u.tickwidth;delete u.tickcolor}}},26218:function(e,t,r){"use strict";var n=r(66287);var a=r(71828).isArrayOrTypedArray;e.exports=function e(t,r,i,o,s){if(!s)s={};var l=s.isMinor;var u=l?t.minor||{}:t;var f=l?r.minor:r;var c=l?"minor.":"";function v(e){var t=u[e];return t!==undefined?t:(f._template||{})[e]}var h=v("tick0");var p=v("dtick");var d=v("tickvals");var g=a(d)?"array":p?"linear":"auto";var y=i(c+"tickmode",g);if(y==="auto"||y==="sync"){i(c+"nticks")}else if(y==="linear"){var m=f.dtick=n.dtick(p,o);f.tick0=n.tick0(h,o,r.calendar,m)}else if(o!=="multicategory"){var x=i(c+"tickvals");if(x===undefined)f.tickmode="auto";else if(!l)i("ticktext")}}},66847:function(e,t,r){"use strict";var n=r(39898);var a=r(73972);var i=r(71828);var o=r(91424);var s=r(89298);e.exports=function e(t,r,l,u){var f=t._fullLayout;if(r.length===0){s.redrawComponents(t);return}function c(e){var t=e.xaxis;var r=e.yaxis;f._defs.select("#"+e.clipId+"> rect").call(o.setTranslate,0,0).call(o.setScale,1,1);e.plot.call(o.setTranslate,t._offset,r._offset).call(o.setScale,1,1);var n=e.plot.selectAll(".scatterlayer .trace");n.selectAll(".point").call(o.setPointGroupScale,1,1);n.selectAll(".textpoint").call(o.setTextPointsScale,1,1);n.call(o.hideOutsideRangePoints,e)}function v(e,r){var n=e.plotinfo;var a=n.xaxis;var l=n.yaxis;var u=a._length;var f=l._length;var c=!!e.xr1;var v=!!e.yr1;var h=[];if(c){var p=i.simpleMap(e.xr0,a.r2l);var d=i.simpleMap(e.xr1,a.r2l);var g=p[1]-p[0];var y=d[1]-d[0];h[0]=(p[0]*(1-r)+r*d[0]-p[0])/(p[1]-p[0])*u;h[2]=u*(1-r+r*y/g);a.range[0]=a.l2r(p[0]*(1-r)+r*d[0]);a.range[1]=a.l2r(p[1]*(1-r)+r*d[1])}else{h[0]=0;h[2]=u}if(v){var m=i.simpleMap(e.yr0,l.r2l);var x=i.simpleMap(e.yr1,l.r2l);var b=m[1]-m[0];var _=x[1]-x[0];h[1]=(m[1]*(1-r)+r*x[1]-m[1])/(m[0]-m[1])*f;h[3]=f*(1-r+r*_/b);l.range[0]=a.l2r(m[0]*(1-r)+r*x[0]);l.range[1]=l.l2r(m[1]*(1-r)+r*x[1])}else{h[1]=0;h[3]=f}s.drawOne(t,a,{skipTitle:true});s.drawOne(t,l,{skipTitle:true});s.redrawComponents(t,[a._id,l._id]);var w=c?u/h[2]:1;var T=v?f/h[3]:1;var k=c?h[0]:0;var A=v?h[1]:0;var M=c?h[0]/h[2]*u:0;var S=v?h[1]/h[3]*f:0;var E=a._offset-M;var L=l._offset-S;n.clipRect.call(o.setTranslate,k,A).call(o.setScale,1/w,1/T);n.plot.call(o.setTranslate,E,L).call(o.setScale,w,T);o.setPointGroupScale(n.zoomScalePts,1/w,1/T);o.setTextPointsScale(n.zoomScaleTxt,1/w,1/T)}var h;if(u){h=u()}function p(){var e={};for(var n=0;n<r.length;n++){var i=r[n];var o=i.plotinfo.xaxis;var s=i.plotinfo.yaxis;if(i.xr1)e[o._name+".range"]=i.xr1.slice();if(i.yr1)e[s._name+".range"]=i.yr1.slice()}h&&h();return a.call("relayout",t,e).then((function(){for(var e=0;e<r.length;e++){c(r[e].plotinfo)}}))}function d(){var e={};for(var n=0;n<r.length;n++){var i=r[n];var o=i.plotinfo.xaxis;var s=i.plotinfo.yaxis;if(i.xr0)e[o._name+".range"]=i.xr0.slice();if(i.yr0)e[s._name+".range"]=i.yr0.slice()}return a.call("relayout",t,e).then((function(){for(var e=0;e<r.length;e++){c(r[e].plotinfo)}}))}var g,y,m;var x=n.ease(l.easing);t._transitionData._interruptCallbacks.push((function(){window.cancelAnimationFrame(m);m=null;return d()}));function b(){y=Date.now();var e=Math.min(1,(y-g)/l.duration);var t=x(e);for(var n=0;n<r.length;n++){v(r[n],t)}if(y-g>l.duration){p();m=window.cancelAnimationFrame(b)}else{m=window.requestAnimationFrame(b)}}g=Date.now();m=window.requestAnimationFrame(b);return Promise.resolve()}},951:function(e,t,r){"use strict";var n=r(73972).traceIs;var a=r(4322);e.exports=function e(t,r,n,a){n("autotypenumbers",a.autotypenumbersDflt);var o=n("type",(a.splomStash||{}).type);if(o==="-"){i(r,a.data);if(r.type==="-"){r.type="linear"}else{t.type=r.type}}};function i(e,t){if(e.type!=="-")return;var r=e._id;var i=r.charAt(0);var u;if(r.indexOf("scene")!==-1)r=i;var f=o(t,r,i);if(!f)return;if(f.type==="histogram"&&i==={v:"y",h:"x"}[f.orientation||"v"]){e.type="linear";return}var c=i+"calendar";var v=f[c];var h={noMultiCategory:!n(f,"cartesian")||n(f,"noMultiCategory")};if(f.type==="box"&&f._hasPreCompStats&&i==={h:"x",v:"y"}[f.orientation||"v"]){h.noMultiCategory=true}h.autotypenumbers=e.autotypenumbers;if(l(f,i)){var p=s(f);var d=[];for(u=0;u<t.length;u++){var g=t[u];if(!n(g,"box-violin")||(g[i+"axis"]||i)!==r)continue;if(g[p]!==undefined)d.push(g[p][0]);else if(g.name!==undefined)d.push(g.name);else d.push("text");if(g[c]!==v)v=undefined}e.type=a(d,v,h)}else if(f.type==="splom"){var y=f.dimensions;var m=y[f._axesDim[r]];if(m.visible)e.type=a(m.values,v,h)}else{e.type=a(f[i]||[f[i+"0"]],v,h)}}function o(e,t,r){for(var n=0;n<e.length;n++){var a=e[n];if(a.type==="splom"&&a._length>0&&(a["_"+r+"axes"]||{})[t]){return a}if((a[r+"axis"]||r)===t){if(l(a,r)){return a}else if((a[r]||[]).length||a[r+"0"]){return a}}}}function s(e){return{v:"x",h:"y"}[e.orientation||"v"]}function l(e,t){var r=s(e);var a=n(e,"box-violin");var i=n(e._fullInput||{},"candlestick");return a&&!i&&t===r&&e[r]===undefined&&e[r+"0"]===undefined}},31137:function(e,t,r){"use strict";var n=r(73972);var a=r(71828);t.manageCommandObserver=function(e,r,n,o){var s={};var l=true;if(r&&r._commandObserver){s=r._commandObserver}if(!s.cache){s.cache={}}s.lookupTable={};var u=t.hasSimpleAPICommandBindings(e,n,s.lookupTable);if(r&&r._commandObserver){if(!u){if(r._commandObserver.remove){r._commandObserver.remove();r._commandObserver=null;return s}}else{return s}}if(u){i(e,u,s.cache);s.check=function t(){if(!l)return;var r=i(e,u,s.cache);if(r.changed&&o){if(s.lookupTable[r.value]!==undefined){s.disable();Promise.resolve(o({value:r.value,type:u.type,prop:u.prop,traces:u.traces,index:s.lookupTable[r.value]})).then(s.enable,s.enable)}}return r.changed};var f=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"];for(var c=0;c<f.length;c++){e._internalOn(f[c],s.check)}s.remove=function(){for(var t=0;t<f.length;t++){e._removeInternalListener(f[t],s.check)}}}else{a.log("Unable to automatically bind plot updates to API command");s.lookupTable={};s.remove=function(){}}s.disable=function e(){l=false};s.enable=function e(){l=true};if(r){r._commandObserver=s}return s};t.hasSimpleAPICommandBindings=function(e,r,n){var a;var i=r.length;var o;for(a=0;a<i;a++){var s;var l=r[a];var u=l.method;var f=l.args;if(!Array.isArray(f))f=[];if(!u){return false}var c=t.computeAPICommandBindings(e,u,f);if(c.length!==1){return false}if(!o){o=c[0];if(Array.isArray(o.traces)){o.traces.sort()}}else{s=c[0];if(s.type!==o.type){return false}if(s.prop!==o.prop){return false}if(Array.isArray(o.traces)){if(Array.isArray(s.traces)){s.traces.sort();for(var v=0;v<o.traces.length;v++){if(o.traces[v]!==s.traces[v]){return false}}}else{return false}}else{if(s.prop!==o.prop){return false}}}s=c[0];var h=s.value;if(Array.isArray(h)){if(h.length===1){h=h[0]}else{return false}}if(n){n[h]=a}}return o};function i(e,t,r){var n,i,o;var s=false;if(t.type==="data"){n=e._fullData[t.traces!==null?t.traces[0]:0]}else if(t.type==="layout"){n=e._fullLayout}else{return false}i=a.nestedProperty(n,t.prop).get();o=r[t.type]=r[t.type]||{};if(o.hasOwnProperty(t.prop)){if(o[t.prop]!==i){s=true}}o[t.prop]=i;return{changed:s,value:i}}t.executeAPICommand=function(e,t,r){if(t==="skip")return Promise.resolve();var i=n.apiMethodRegistry[t];var o=[e];if(!Array.isArray(r))r=[];for(var s=0;s<r.length;s++){o.push(r[s])}return i.apply(null,o).catch((function(e){a.warn("API call to Plotly."+t+" rejected.",e);return Promise.reject(e)}))};t.computeAPICommandBindings=function(e,t,r){var n;if(!Array.isArray(r))r=[];switch(t){case"restyle":n=l(e,r);break;case"relayout":n=s(e,r);break;case"update":n=l(e,[r[0],r[2]]).concat(s(e,[r[1]]));break;case"animate":n=o(e,r);break;default:n=[]}return n};function o(e,t){if(Array.isArray(t[0])&&t[0].length===1&&["string","number"].indexOf(typeof t[0][0])!==-1){return[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]}else{return[]}}function s(e,t){var r=[];var n=t[0];var i={};if(typeof n==="string"){i[n]=t[1]}else if(a.isPlainObject(n)){i=n}else{return r}u(i,(function(e,t,n){r.push({type:"layout",prop:e,value:n})}),"",0);return r}function l(e,t){var r,n,i,o;var s=[];n=t[0];i=t[1];r=t[2];o={};if(typeof n==="string"){o[n]=i}else if(a.isPlainObject(n)){o=n;if(r===undefined){r=i}}else{return s}if(r===undefined){r=null}u(o,(function(t,n,a){var i;var o;if(Array.isArray(a)){o=a.slice();var l=Math.min(o.length,e.data.length);if(r){l=Math.min(l,r.length)}i=[];for(var u=0;u<l;u++){i[u]=r?r[u]:u}}else{o=a;i=r?r.slice():null}if(i===null){if(Array.isArray(o)){o=o[0]}}else if(Array.isArray(i)){if(!Array.isArray(o)){var f=o;o=[];for(var c=0;c<i.length;c++){o[c]=f}}o.length=Math.min(i.length,o.length)}s.push({type:"data",prop:t,traces:i,value:o})}),"",0);return s}function u(e,t,r,n){Object.keys(e).forEach((function(i){var o=e[i];if(i[0]==="_")return;var s=r+(n>0?".":"")+i;if(a.isPlainObject(o)){u(o,t,s,n+1)}else{t(s,i,o)}}))}},27670:function(e,t,r){"use strict";var n=r(1426).extendFlat;t.Y=function(e,t){e=e||{};t=t||{};var r={valType:"info_array",editType:e.editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]};var a=e.name?e.name+" ":"";var i=e.trace?"trace ":"subplot ";var o=t.description?" "+t.description:"";var s={x:n({},r,{}),y:n({},r,{}),editType:e.editType};if(!e.noGridCell){s.row={valType:"integer",min:0,dflt:0,editType:e.editType};s.column={valType:"integer",min:0,dflt:0,editType:e.editType}}return s};t.c=function(e,t,r,n){var a=n&&n.x||[0,1];var i=n&&n.y||[0,1];var o=t.grid;if(o){var s=r("domain.column");if(s!==undefined){if(s<o.columns)a=o._domains.x[s];else delete e.domain.column}var l=r("domain.row");if(l!==undefined){if(l<o.rows)i=o._domains.y[l];else delete e.domain.row}}var u=r("domain.x",a);var f=r("domain.y",i);if(!(u[0]<u[1]))e.domain.x=a.slice();if(!(f[0]<f[1]))e.domain.y=i.slice()}},41940:function(e){"use strict";e.exports=function(e){var t=e.editType;var r=e.colorEditType;if(r===undefined)r=t;var n={family:{valType:"string",noBlank:true,strict:true,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:r},editType:t};if(e.autoSize)n.size.dflt="auto";if(e.autoColor)n.color.dflt="auto";if(e.arrayOk){n.family.arrayOk=true;n.size.arrayOk=true;n.color.arrayOk=true}return n}},31391:function(e){"use strict";e.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},78776:function(e,t){"use strict";t.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"};t.axesNames=["lonaxis","lataxis"];t.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360};t.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180};t.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}};t.clipPad=.001;t.precision=.1;t.landColor="#F0DC82";t.waterColor="#3399FF";t.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"};t.sphereSVG={type:"Sphere"};t.fillLayers={ocean:1,land:1,lakes:1};t.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1};t.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"];t.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"];t.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},69082:function(e,t,r){"use strict";var n=r(39898);var a=r(27362);var i=a.geoPath;var o=a.geoDistance;var s=r(65704);var l=r(73972);var u=r(71828);var f=u.strTranslate;var c=r(7901);var v=r(91424);var h=r(30211);var p=r(74875);var d=r(89298);var g=r(71739).getAutoRange;var y=r(28569);var m=r(47322).prepSelect;var x=r(47322).clearOutline;var b=r(47322).selectOnClick;var _=r(74455);var w=r(78776);var T=r(41327);var k=r(90973);var A=r(96892).zL;function M(e){this.id=e.id;this.graphDiv=e.graphDiv;this.container=e.container;this.topojsonURL=e.topojsonURL;this.isStatic=e.staticPlot;this.topojsonName=null;this.topojson=null;this.projection=null;this.scope=null;this.viewInitial=null;this.fitScale=null;this.bounds=null;this.midPt=null;this.hasChoropleth=false;this.traceHash={};this.layers={};this.basePaths={};this.dataPaths={};this.dataPoints={};this.clipDef=null;this.clipRect=null;this.bgRect=null;this.makeFramework()}var S=M.prototype;e.exports=function e(t){return new M(t)};S.plot=function(e,t,r,n){var a=this;if(n)return a.update(e,t,true);a._geoCalcData=e;a._fullLayout=t;var i=t[this.id];var o=[];var s=false;for(var l in w.layerNameToAdjective){if(l!=="frame"&&i["show"+l]){s=true;break}}var u=false;for(var f=0;f<e.length;f++){var c=e[0][0].trace;c._geo=a;if(c.locationmode){s=true}var v=c.marker;if(v){var h=v.angle;var p=v.angleref;if(h||p==="north"||p==="previous")u=true}}this._hasMarkerAngles=u;if(s){var d=k.getTopojsonName(i);if(a.topojson===null||d!==a.topojsonName){a.topojsonName=d;if(PlotlyGeoAssets.topojson[a.topojsonName]===undefined){o.push(a.fetchTopojson())}}}o=o.concat(T.fetchTraceGeoData(e));r.push(new Promise((function(r,n){Promise.all(o).then((function(){a.topojson=PlotlyGeoAssets.topojson[a.topojsonName];a.update(e,t);r()})).catch(n)})))};S.fetchTopojson=function(){var e=this;var t=k.getTopojsonPath(e.topojsonURL,e.topojsonName);return new Promise((function(r,a){n.json(t,(function(n,i){if(n){if(n.status===404){return a(new Error(["plotly.js could not find topojson file at",t+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")))}else{return a(new Error(["unexpected error while fetching topojson file at",t].join(" ")))}}PlotlyGeoAssets.topojson[e.topojsonName]=i;r()}))}))};S.update=function(e,t,r){var n=t[this.id];this.hasChoropleth=false;for(var a=0;a<e.length;a++){var i=e[a];var o=i[0].trace;if(o.type==="choropleth"){this.hasChoropleth=true}if(o.visible===true&&o._length>0){o._module.calcGeoJSON(i,t)}}if(!r){var s=this.updateProjection(e,t);if(s)return;if(!this.viewInitial||this.scope!==n.scope){this.saveViewInitial(n)}}this.scope=n.scope;this.updateBaseLayers(t,n);this.updateDims(t,n);this.updateFx(t,n);p.generalUpdatePerTraceModule(this.graphDiv,this,e,n);var l=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=l.selectAll(".point");this.dataPoints.text=l.selectAll("text");this.dataPaths.line=l.selectAll(".js-line");var u=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=u.selectAll("path");this._render()};S.updateProjection=function(e,t){var r=this.graphDiv;var n=t[this.id];var a=t._size;var i=n.domain;var o=n.projection;var s=n.lonaxis;var l=n.lataxis;var f=s._ax;var c=l._ax;var v=this.projection=E(n);var h=[[a.l+a.w*i.x[0],a.t+a.h*(1-i.y[1])],[a.l+a.w*i.x[1],a.t+a.h*(1-i.y[0])]];var p=n.center||{};var d=o.rotation||{};var y=s.range||[];var m=l.range||[];if(n.fitbounds){f._length=h[1][0]-h[0][0];c._length=h[1][1]-h[0][1];f.range=g(r,f);c.range=g(r,c);var x=(f.range[0]+f.range[1])/2;var b=(c.range[0]+c.range[1])/2;if(n._isScoped){p={lon:x,lat:b}}else if(n._isClipped){p={lon:x,lat:b};d={lon:x,lat:b,roll:d.roll};var _=o.type;var T=w.lonaxisSpan[_]/2||180;var k=w.lataxisSpan[_]/2||90;y=[x-T,x+T];m=[b-k,b+k]}else{p={lon:x,lat:b};d={lon:x,lat:d.lat,roll:d.roll}}}v.center([p.lon-d.lon,p.lat-d.lat]).rotate([-d.lon,-d.lat,d.roll]).parallels(o.parallels);var A=C(y,m);v.fitExtent(h,A);var M=this.bounds=v.getBounds(A);var S=this.fitScale=v.scale();var L=v.translate();if(n.fitbounds){var I=v.getBounds(C(f.range,c.range));var P=Math.min((M[1][0]-M[0][0])/(I[1][0]-I[0][0]),(M[1][1]-M[0][1])/(I[1][1]-I[0][1]));if(isFinite(P)){v.scale(P*S)}else{u.warn("Something went wrong during"+this.id+"fitbounds computations.")}}else{v.scale(o.scale*S)}var O=this.midPt=[(M[0][0]+M[1][0])/2,(M[0][1]+M[1][1])/2];v.translate([L[0]+(O[0]-L[0]),L[1]+(O[1]-L[1])]).clipExtent(M);if(n._isAlbersUsa){var D=v([p.lon,p.lat]);var z=v.translate();v.translate([z[0]-(D[0]-z[0]),z[1]-(D[1]-z[1])])}};S.updateBaseLayers=function(e,t){var r=this;var a=r.topojson;var i=r.layers;var o=r.basePaths;function s(e){return e==="lonaxis"||e==="lataxis"}function l(e){return Boolean(w.lineLayers[e])}function u(e){return Boolean(w.fillLayers[e])}var f=this.hasChoropleth?w.layersForChoropleth:w.layers;var h=f.filter((function(e){return l(e)||u(e)?t["show"+e]:s(e)?t[e].showgrid:true}));var p=r.framework.selectAll(".layer").data(h,String);p.exit().each((function(e){delete i[e];delete o[e];n.select(this).remove()}));p.enter().append("g").attr("class",(function(e){return"layer "+e})).each((function(e){var t=i[e]=n.select(this);if(e==="bg"){r.bgRect=t.append("rect").style("pointer-events","all")}else if(s(e)){o[e]=t.append("path").style("fill","none")}else if(e==="backplot"){t.append("g").classed("choroplethlayer",true)}else if(e==="frontplot"){t.append("g").classed("scatterlayer",true)}else if(l(e)){o[e]=t.append("path").style("fill","none").style("stroke-miterlimit",2)}else if(u(e)){o[e]=t.append("path").style("stroke","none")}}));p.order();p.each((function(r){var n=o[r];var i=w.layerNameToAdjective[r];if(r==="frame"){n.datum(w.sphereSVG)}else if(l(r)||u(r)){n.datum(A(a,a.objects[r]))}else if(s(r)){n.datum(L(r,t,e)).call(c.stroke,t[r].gridcolor).call(v.dashLine,t[r].griddash,t[r].gridwidth)}if(l(r)){n.call(c.stroke,t[i+"color"]).call(v.dashLine,"",t[i+"width"])}else if(u(r)){n.call(c.fill,t[i+"color"])}}))};S.updateDims=function(e,t){var r=this.bounds;var n=(t.framewidth||0)/2;var a=r[0][0]-n;var i=r[0][1]-n;var o=r[1][0]-a+n;var s=r[1][1]-i+n;v.setRect(this.clipRect,a,i,o,s);this.bgRect.call(v.setRect,a,i,o,s).call(c.fill,t.bgcolor);this.xaxis._offset=a;this.xaxis._length=o;this.yaxis._offset=i;this.yaxis._length=s};S.updateFx=function(e,t){var r=this;var a=r.graphDiv;var i=r.bgRect;var o=e.dragmode;var s=e.clickmode;if(r.isStatic)return;function f(){var e=r.viewInitial;var t={};for(var n in e){t[r.id+"."+n]=e[n]}l.call("_guiRelayout",a,t);a.emit("plotly_doubleclick",null)}function c(e){return r.projection.invert([e[0]+r.xaxis._offset,e[1]+r.yaxis._offset])}var v=function(e,t){if(t.isRect){var n=e.range={};n[r.id]=[c([t.xmin,t.ymin]),c([t.xmax,t.ymax])]}else{var a=e.lassoPoints={};a[r.id]=t.map(c)}};var p={element:r.bgRect.node(),gd:a,plotinfo:{id:r.id,xaxis:r.xaxis,yaxis:r.yaxis,fillRangeItems:v},xaxes:[r.xaxis],yaxes:[r.yaxis],subplot:r.id,clickFn:function(e){if(e===2){x(a)}}};if(o==="pan"){i.node().onmousedown=null;i.call(_(r,t));i.on("dblclick.zoom",f);if(!a._context._scrollZoom.geo){i.on("wheel.zoom",null)}}else if(o==="select"||o==="lasso"){i.on(".zoom",null);p.prepFn=function(e,t,r){m(e,t,r,p,o)};y.init(p)}i.on("mousemove",(function(){var e=r.projection.invert(u.getPositionFromD3Event());if(!e){return y.unhover(a,n.event)}r.xaxis.p2c=function(){return e[0]};r.yaxis.p2c=function(){return e[1]};h.hover(a,n.event,r.id)}));i.on("mouseout",(function(){if(a._dragging)return;y.unhover(a,n.event)}));i.on("click",(function(){if(o!=="select"&&o!=="lasso"){if(s.indexOf("select")>-1){b(n.event,a,[r.xaxis],[r.yaxis],r.id,p)}if(s.indexOf("event")>-1){h.click(a,n.event)}}}))};S.makeFramework=function(){var e=this;var t=e.graphDiv;var r=t._fullLayout;var a="clip"+r._uid+e.id;e.clipDef=r._clips.append("clipPath").attr("id",a);e.clipRect=e.clipDef.append("rect");e.framework=n.select(e.container).append("g").attr("class","geo "+e.id).call(v.setClipUrl,a,t);e.project=function(t){var r=e.projection(t);return r?[r[0]-e.xaxis._offset,r[1]-e.yaxis._offset]:[null,null]};e.xaxis={_id:"x",c2p:function(t){return e.project(t)[0]}};e.yaxis={_id:"y",c2p:function(t){return e.project(t)[1]}};e.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};d.setConvert(e.mockAxis,r)};S.saveViewInitial=function(e){var t=e.center||{};var r=e.projection;var n=r.rotation||{};this.viewInitial={fitbounds:e.fitbounds,"projection.scale":r.scale};var a;if(e._isScoped){a={"center.lon":t.lon,"center.lat":t.lat}}else if(e._isClipped){a={"projection.rotation.lon":n.lon,"projection.rotation.lat":n.lat}}else{a={"center.lon":t.lon,"center.lat":t.lat,"projection.rotation.lon":n.lon}}u.extendFlat(this.viewInitial,a)};S.render=function(e){if(this._hasMarkerAngles&&e){this.plot(this._geoCalcData,this._fullLayout,[],true)}else{this._render()}};S._render=function(){var e=this.projection;var t=e.getPath();var r;function n(t){var r=e(t.lonlat);return r?f(r[0],r[1]):null}function a(t){return e.isLonLatOverEdges(t.lonlat)?"none":null}for(r in this.basePaths){this.basePaths[r].attr("d",t)}for(r in this.dataPaths){this.dataPaths[r].attr("d",(function(e){return t(e.geojson)}))}for(r in this.dataPoints){this.dataPoints[r].attr("display",a).attr("transform",n)}};function E(e){var t=e.projection;var r=t.type;var n=w.projNames[r];n="geo"+u.titleCase(n);var l=a[n]||s[n];var f=l();var c=e._isSatellite?Math.acos(1/t.distance)*180/Math.PI:e._isClipped?w.lonaxisSpan[r]/2:null;var v=["center","rotate","parallels","clipExtent"];var h=function(e){return e?f:[]};for(var p=0;p<v.length;p++){var d=v[p];if(typeof f[d]!=="function"){f[d]=h}}f.isLonLatOverEdges=function(e){if(f(e)===null){return true}if(c){var t=f.rotate();var r=o(e,[-t[0],-t[1]]);var n=c*Math.PI/180;return r>n}else{return false}};f.getPath=function(){return i().projection(f)};f.getBounds=function(e){return f.getPath().bounds(e)};f.precision(w.precision);if(e._isSatellite){f.tilt(t.tilt).distance(t.distance)}if(c){f.clipAngle(c-w.clipPad)}return f}function L(e,t,r){var n=1e-6;var a=2.5;var i=t[e];var o=w.scopeDefaults[t.scope];var s;var l;var u;if(e==="lonaxis"){s=o.lonaxisRange;l=o.lataxisRange;u=function(e,t){return[e,t]}}else if(e==="lataxis"){s=o.lataxisRange;l=o.lonaxisRange;u=function(e,t){return[t,e]}}var f={type:"linear",range:[s[0],s[1]-n],tick0:i.tick0,dtick:i.dtick};d.setConvert(f,r);var c=d.calcTicks(f);if(!t.isScoped&&e==="lonaxis"){c.pop()}var v=c.length;var h=new Array(v);for(var p=0;p<v;p++){var g=c[p].x;var y=h[p]=[];for(var m=l[0];m<l[1]+a;m+=a){y.push(u(g,m))}}return{type:"MultiLineString",coordinates:h}}function C(e,t){var r=w.clipPad;var n=e[0]+r;var a=e[1]-r;var i=t[0]+r;var o=t[1]-r;if(n>0&&a<0)a+=360;var s=(a-n)/4;return{type:"Polygon",coordinates:[[[n,i],[n,o],[n+s,o],[n+2*s,o],[n+3*s,o],[a,o],[a,i],[a-s,i],[a-2*s,i],[a-3*s,i],[n,i]]]}}},44622:function(e,t,r){"use strict";var n=r(27659).AU;var a=r(71828).counterRegex;var i=r(69082);var o="geo";var s=a(o);var l={};l[o]={valType:"subplotid",dflt:o,editType:"calc"};function u(e){var t=e._fullLayout;var r=e.calcdata;var a=t._subplots[o];for(var s=0;s<a.length;s++){var l=a[s];var u=n(r,o,l);var f=t[l];var c=f._subplot;if(!c){c=i({id:l,graphDiv:e,container:t._geolayer.node(),topojsonURL:e._context.topojsonURL,staticPlot:e._context.staticPlot});t[l]._subplot=c}c.plot(u,t,e._promises)}}function f(e,t,r,n){var a=n._subplots[o]||[];for(var i=0;i<a.length;i++){var s=a[i];var l=n[s]._subplot;if(!t[s]&&!!l){l.framework.remove();l.clipDef.remove()}}}function c(e){var t=e._fullLayout;var r=t._subplots[o];for(var n=0;n<r.length;n++){var a=t[r[n]];var i=a._subplot;i.updateFx(t,a)}}e.exports={attr:o,name:o,idRoot:o,idRegex:s,attrRegex:s,attributes:l,layoutAttributes:r(77519),supplyLayoutDefaults:r(82161),plot:u,updateFx:c,clean:f}},77519:function(e,t,r){"use strict";var n=r(22399);var a=r(27670).Y;var i=r(79952).P;var o=r(78776);var s=r(30962).overrideAll;var l=r(78607);var u={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:false},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:n.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:i};var f=e.exports=s({domain:a({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[false,"locations","geojson"],dflt:false,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:true},scope:{valType:"enumerated",values:l(o.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:l(o.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:true},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:n.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:false},landcolor:{valType:"color",dflt:o.landColor},showocean:{valType:"boolean",dflt:false},oceancolor:{valType:"color",dflt:o.waterColor},showlakes:{valType:"boolean",dflt:false},lakecolor:{valType:"color",dflt:o.waterColor},showrivers:{valType:"boolean",dflt:false},rivercolor:{valType:"color",dflt:o.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:n.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:n.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:n.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:n.background},lonaxis:u,lataxis:u},"plot","from-root");f.uirevision={valType:"any",editType:"none"}},82161:function(e,t,r){"use strict";var n=r(71828);var a=r(49119);var i=r(27659).NG;var o=r(78776);var s=r(77519);var l=o.axesNames;e.exports=function e(t,r,n){a(t,r,n,{type:"geo",attributes:s,handleDefaults:u,fullData:n,partition:"y"})};function u(e,t,r,a){var s=i(a.fullData,"geo",a.id);var u=s.map((function(e){return e._expandedIndex}));var f=r("resolution");var c=r("scope");var v=o.scopeDefaults[c];var h=r("projection.type",v.projType);var p=t._isAlbersUsa=h==="albers usa";if(p)c=t.scope="usa";var d=t._isScoped=c!=="world";var g=t._isSatellite=h==="satellite";var y=t._isConic=h.indexOf("conic")!==-1||h==="albers";var m=t._isClipped=!!o.lonaxisSpan[h];if(e.visible===false){var x=n.extendDeep({},t._template);x.showcoastlines=false;x.showcountries=false;x.showframe=false;x.showlakes=false;x.showland=false;x.showocean=false;x.showrivers=false;x.showsubunits=false;if(x.lonaxis)x.lonaxis.showgrid=false;if(x.lataxis)x.lataxis.showgrid=false;t._template=x}var b=r("visible");var _;for(var w=0;w<l.length;w++){var T=l[w];var k=[30,10][w];var A;if(d){A=v[T+"Range"]}else{var M=o[T+"Span"];var S=(M[h]||M["*"])/2;var E=r("projection.rotation."+T.substr(0,3),v.projRotate[w]);A=[E-S,E+S]}var L=r(T+".range",A);r(T+".tick0");r(T+".dtick",k);_=r(T+".showgrid",!b?false:undefined);if(_){r(T+".gridcolor");r(T+".gridwidth");r(T+".griddash")}t[T]._ax={type:"linear",_id:T.slice(0,3),_traceIndices:u,setScale:n.identity,c2l:n.identity,r2l:n.identity,autorange:true,range:L.slice(),_m:1,_input:{}}}var C=t.lonaxis.range;var I=t.lataxis.range;var P=C[0];var O=C[1];if(P>0&&O<0)O+=360;var D=(P+O)/2;var z;if(!p){var R=d?v.projRotate:[D,0,0];z=r("projection.rotation.lon",R[0]);r("projection.rotation.lat",R[1]);r("projection.rotation.roll",R[2]);_=r("showcoastlines",!d&&b);if(_){r("coastlinecolor");r("coastlinewidth")}_=r("showocean",!b?false:undefined);if(_)r("oceancolor")}var F;var B;if(p){F=-96.6;B=38.7}else{F=d?D:z;B=(I[0]+I[1])/2}r("center.lon",F);r("center.lat",B);if(g){r("projection.tilt");r("projection.distance")}if(y){var N=v.projParallels||[0,60];r("projection.parallels",N)}r("projection.scale");_=r("showland",!b?false:undefined);if(_)r("landcolor");_=r("showlakes",!b?false:undefined);if(_)r("lakecolor");_=r("showrivers",!b?false:undefined);if(_){r("rivercolor");r("riverwidth")}_=r("showcountries",d&&c!=="usa"&&b);if(_){r("countrycolor");r("countrywidth")}if(c==="usa"||c==="north america"&&f===50){r("showsubunits",b);r("subunitcolor");r("subunitwidth")}if(!d){_=r("showframe",b);if(_){r("framecolor");r("framewidth")}}r("bgcolor");var j=r("fitbounds");if(j){delete t.projection.scale;if(d){delete t.center.lon;delete t.center.lat}else if(m){delete t.center.lon;delete t.center.lat;delete t.projection.rotation.lon;delete t.projection.rotation.lat;delete t.lonaxis.range;delete t.lataxis.range}else{delete t.center.lon;delete t.center.lat;delete t.projection.rotation.lon}}}},74455:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);var i=r(73972);var o=Math.PI/180;var s=180/Math.PI;var l={cursor:"pointer"};var u={cursor:"auto"};function f(e,t){var r=e.projection;var n;if(t._isScoped){n=h}else if(t._isClipped){n=d}else{n=p}return n(e,r)}e.exports=f;function c(e,t){return n.behavior.zoom().translate(t.translate()).scale(t.scale())}function v(e,t,r){var n=e.id;var o=e.graphDiv;var s=o.layout;var l=s[n];var u=o._fullLayout;var f=u[n];var c={};var v={};function h(e,t){c[n+"."+e]=a.nestedProperty(l,e).get();i.call("_storeDirectGUIEdit",s,u._preGUI,c);var r=a.nestedProperty(f,e);if(r.get()!==t){r.set(t);a.nestedProperty(l,e).set(t);v[n+"."+e]=t}}r(h);h("projection.scale",t.scale()/e.fitScale);h("fitbounds",false);o.emit("plotly_relayout",v)}function h(e,t){var r=c(e,t);function a(){n.select(this).style(l)}function i(){t.scale(n.event.scale).translate(n.event.translate);e.render(true);var r=t.invert(e.midPt);e.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":t.scale()/e.fitScale,"geo.center.lon":r[0],"geo.center.lat":r[1]})}function o(r){var n=t.invert(e.midPt);r("center.lon",n[0]);r("center.lat",n[1])}function s(){n.select(this).style(u);v(e,t,o)}r.on("zoomstart",a).on("zoom",i).on("zoomend",s);return r}function p(e,t){var r=c(e,t);var a=2;var i,o,s,f,h,p,d,g,y;function m(e){return t.invert(e)}function x(e){var r=m(e);if(!r)return true;var n=t(r);return Math.abs(n[0]-e[0])>a||Math.abs(n[1]-e[1])>a}function b(){n.select(this).style(l);i=n.mouse(this);o=t.rotate();s=t.translate();f=o;h=m(i)}function _(){p=n.mouse(this);if(x(i)){r.scale(t.scale());r.translate(t.translate());return}t.scale(n.event.scale);t.translate([s[0],n.event.translate[1]]);if(!h){i=p;h=m(i)}else if(m(p)){g=m(p);d=[f[0]+(g[0]-h[0]),o[1],o[2]];t.rotate(d);f=d}y=true;e.render(true);var a=t.rotate();var l=t.invert(e.midPt);e.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":t.scale()/e.fitScale,"geo.center.lon":l[0],"geo.center.lat":l[1],"geo.projection.rotation.lon":-a[0]})}function w(){n.select(this).style(u);if(y)v(e,t,T)}function T(r){var n=t.rotate();var a=t.invert(e.midPt);r("projection.rotation.lon",-n[0]);r("center.lon",a[0]);r("center.lat",a[1])}r.on("zoomstart",b).on("zoom",_).on("zoomend",w);return r}function d(e,t){var r={r:t.rotate(),k:t.scale()};var a=c(e,t);var i=E(a,"zoomstart","zoom","zoomend");var o=0;var s=a.on;var f;a.on("zoomstart",(function(){n.select(this).style(l);var e=n.mouse(this);var o=t.rotate();var u=o;var c=t.translate();var v=y(o);f=g(t,e);s.call(a,"zoom",(function(){var a=n.mouse(this);t.scale(r.k=n.event.scale);if(!f){e=a;f=g(t,e)}else if(g(t,a)){t.rotate(o).translate(c);var s=g(t,a);var l=x(f,s);var h=k(m(v,l));var d=r.r=b(h,f,u);if(!isFinite(d[0])||!isFinite(d[1])||!isFinite(d[2])){d=u}t.rotate(d);u=d}p(i.of(this,arguments))}));h(i.of(this,arguments))})).on("zoomend",(function(){n.select(this).style(u);s.call(a,"zoom",null);d(i.of(this,arguments));v(e,t,_)})).on("zoom.redraw",(function(){e.render(true);var r=t.rotate();e.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":t.scale()/e.fitScale,"geo.projection.rotation.lon":-r[0],"geo.projection.rotation.lat":-r[1]})}));function h(e){if(!o++)e({type:"zoomstart"})}function p(e){e({type:"zoom"})}function d(e){if(!--o)e({type:"zoomend"})}function _(e){var r=t.rotate();e("projection.rotation.lon",-r[0]);e("projection.rotation.lat",-r[1])}return n.rebind(a,i,"on")}function g(e,t){var r=e.invert(t);return r&&isFinite(r[0])&&isFinite(r[1])&&A(r)}function y(e){var t=.5*e[0]*o;var r=.5*e[1]*o;var n=.5*e[2]*o;var a=Math.sin(t);var i=Math.cos(t);var s=Math.sin(r);var l=Math.cos(r);var u=Math.sin(n);var f=Math.cos(n);return[i*l*f+a*s*u,a*l*f-i*s*u,i*s*f+a*l*u,i*l*u-a*s*f]}function m(e,t){var r=e[0];var n=e[1];var a=e[2];var i=e[3];var o=t[0];var s=t[1];var l=t[2];var u=t[3];return[r*o-n*s-a*l-i*u,r*s+n*o+a*u-i*l,r*l-n*u+a*o+i*s,r*u+n*l-a*s+i*o]}function x(e,t){if(!e||!t)return;var r=S(e,t);var n=Math.sqrt(M(r,r));var a=.5*Math.acos(Math.max(-1,Math.min(1,M(e,t))));var i=Math.sin(a)/n;return n&&[Math.cos(a),r[2]*i,-r[1]*i,r[0]*i]}function b(e,t,r){var n=T(t,2,e[0]);n=T(n,1,e[1]);n=T(n,0,e[2]-r[2]);var a=t[0];var i=t[1];var o=t[2];var l=n[0];var u=n[1];var f=n[2];var c=Math.atan2(i,a)*s;var v=Math.sqrt(a*a+i*i);var h;var p;if(Math.abs(u)>v){p=(u>0?90:-90)-c;h=0}else{p=Math.asin(u/v)*s-c;h=Math.sqrt(v*v-u*u)}var d=180-p-2*c;var g=(Math.atan2(f,l)-Math.atan2(o,h))*s;var y=(Math.atan2(f,l)-Math.atan2(o,-h))*s;var m=_(r[0],r[1],p,g);var x=_(r[0],r[1],d,y);if(m<=x)return[p,g,r[2]];else return[d,y,r[2]]}function _(e,t,r,n){var a=w(r-e);var i=w(n-t);return Math.sqrt(a*a+i*i)}function w(e){return(e%360+540)%360-180}function T(e,t,r){var n=r*o;var a=e.slice();var i=t===0?1:0;var s=t===2?1:2;var l=Math.cos(n);var u=Math.sin(n);a[i]=e[i]*l-e[s]*u;a[s]=e[s]*l+e[i]*u;return a}function k(e){return[Math.atan2(2*(e[0]*e[1]+e[2]*e[3]),1-2*(e[1]*e[1]+e[2]*e[2]))*s,Math.asin(Math.max(-1,Math.min(1,2*(e[0]*e[2]-e[3]*e[1]))))*s,Math.atan2(2*(e[0]*e[3]+e[1]*e[2]),1-2*(e[2]*e[2]+e[3]*e[3]))*s]}function A(e){var t=e[0]*o;var r=e[1]*o;var n=Math.cos(r);return[n*Math.cos(t),n*Math.sin(t),Math.sin(r)]}function M(e,t){var r=0;for(var n=0,a=e.length;n<a;++n)r+=e[n]*t[n];return r}function S(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function E(e){var t=0;var r=arguments.length;var a=[];while(++t<r)a.push(arguments[t]);var i=n.dispatch.apply(null,a);i.of=function(t,r){return function(a){var o;try{o=a.sourceEvent=n.event;a.target=e;n.event=a;i[a.type].apply(t,r)}finally{n.event=o}}};return i}},27659:function(e,t,r){"use strict";var n=r(73972);var a=r(85555).SUBPLOT_PATTERN;t.AU=function(e,t,r){var a=n.subplotsRegistry[t];if(!a)return[];var i=a.attr;var o=[];for(var s=0;s<e.length;s++){var l=e[s];var u=l[0].trace;if(u[i]===r)o.push(l)}return o};t.a0=function(e,t){var r=[];var a=[];var i;if(typeof t==="string"){i=n.getModule(t).plot}else if(typeof t==="function"){i=t}else{i=t.plot}if(!i){return[r,e]}for(var o=0;o<e.length;o++){var s=e[o];var l=s[0].trace;if(l.visible!==true||l._length===0)continue;if(l._module&&l._module.plot===i){r.push(s)}else{a.push(s)}}return[r,a]};t.NG=function e(t,r,i){if(!n.subplotsRegistry[r])return[];var o=n.subplotsRegistry[r].attr;var s=[];var l,u,f;if(r==="gl2d"){var c=i.match(a);u="x"+c[1];f="y"+c[2]}for(var v=0;v<t.length;v++){l=t[v];if(r==="gl2d"&&n.traceIs(l,"gl2d")){if(l[o[0]]===u&&l[o[1]]===f){s.push(l)}}else{if(l[o]===i)s.push(l)}}return s}},75071:function(e,t,r){"use strict";var n=r(16825);var a=r(1195);var i=r(48956);var o=r(85555);var s=r(38520);e.exports=u;function l(e,t){this.element=e;this.plot=t;this.mouseListener=null;this.wheelListener=null;this.lastInputTime=Date.now();this.lastPos=[0,0];this.boxEnabled=false;this.boxInited=false;this.boxStart=[0,0];this.boxEnd=[0,0];this.dragStart=[0,0]}function u(e){var t=e.mouseContainer;var r=e.glplot;var u=new l(t,r);function f(){e.xaxis.autorange=false;e.yaxis.autorange=false}function c(){var t=e.graphDiv._fullLayout._axisConstraintGroups;var r=e.xaxis._id;var n=e.yaxis._id;for(var a=0;a<t.length;a++){if(t[a][r]!==-1){if(t[a][n]!==-1)return true;break}}return false}u.mouseListener=n(t,v);t.addEventListener("touchstart",(function(e){var r=i(e.changedTouches[0],t);v(0,r[0],r[1]);v(1,r[0],r[1]);e.preventDefault()}),s?{passive:false}:false);t.addEventListener("touchmove",(function(e){e.preventDefault();var r=i(e.changedTouches[0],t);v(1,r[0],r[1]);e.preventDefault()}),s?{passive:false}:false);t.addEventListener("touchend",(function(e){v(0,u.lastPos[0],u.lastPos[1]);e.preventDefault()}),s?{passive:false}:false);function v(t,n,a){var i=e.calcDataBox();var s=r.viewBox;var l=u.lastPos[0];var v=u.lastPos[1];var h=o.MINDRAG*r.pixelRatio;var p=o.MINZOOM*r.pixelRatio;var d,g;n*=r.pixelRatio;a*=r.pixelRatio;a=s[3]-s[1]-a;function y(t,r,n){var a=Math.min(r,n);var o=Math.max(r,n);if(a!==o){i[t]=a;i[t+2]=o;u.dataBox=i;e.setRanges(i)}else{e.selectBox.selectBox=[0,0,1,1];e.glplot.setDirty()}}switch(e.fullLayout.dragmode){case"zoom":if(t){var m=n/(s[2]-s[0])*(i[2]-i[0])+i[0];var x=a/(s[3]-s[1])*(i[3]-i[1])+i[1];if(!u.boxInited){u.boxStart[0]=m;u.boxStart[1]=x;u.dragStart[0]=n;u.dragStart[1]=a}u.boxEnd[0]=m;u.boxEnd[1]=x;u.boxInited=true;if(!u.boxEnabled&&(u.boxStart[0]!==u.boxEnd[0]||u.boxStart[1]!==u.boxEnd[1])){u.boxEnabled=true}var b=Math.abs(u.dragStart[0]-n)<p;var _=Math.abs(u.dragStart[1]-a)<p;if(c()&&!(b&&_)){d=u.boxEnd[0]-u.boxStart[0];g=u.boxEnd[1]-u.boxStart[1];var w=(i[3]-i[1])/(i[2]-i[0]);if(Math.abs(d*w)>Math.abs(g)){u.boxEnd[1]=u.boxStart[1]+Math.abs(d)*w*(g>=0?1:-1);if(u.boxEnd[1]<i[1]){u.boxEnd[1]=i[1];u.boxEnd[0]=u.boxStart[0]+(i[1]-u.boxStart[1])/Math.abs(w)}else if(u.boxEnd[1]>i[3]){u.boxEnd[1]=i[3];u.boxEnd[0]=u.boxStart[0]+(i[3]-u.boxStart[1])/Math.abs(w)}}else{u.boxEnd[0]=u.boxStart[0]+Math.abs(g)/w*(d>=0?1:-1);if(u.boxEnd[0]<i[0]){u.boxEnd[0]=i[0];u.boxEnd[1]=u.boxStart[1]+(i[0]-u.boxStart[0])*Math.abs(w)}else if(u.boxEnd[0]>i[2]){u.boxEnd[0]=i[2];u.boxEnd[1]=u.boxStart[1]+(i[2]-u.boxStart[0])*Math.abs(w)}}}else{if(b)u.boxEnd[0]=u.boxStart[0];if(_)u.boxEnd[1]=u.boxStart[1]}}else if(u.boxEnabled){d=u.boxStart[0]!==u.boxEnd[0];g=u.boxStart[1]!==u.boxEnd[1];if(d||g){if(d){y(0,u.boxStart[0],u.boxEnd[0]);e.xaxis.autorange=false}if(g){y(1,u.boxStart[1],u.boxEnd[1]);e.yaxis.autorange=false}e.relayoutCallback()}else{e.glplot.setDirty()}u.boxEnabled=false;u.boxInited=false}else if(u.boxInited){u.boxInited=false}break;case"pan":u.boxEnabled=false;u.boxInited=false;if(t){if(!u.panning){u.dragStart[0]=n;u.dragStart[1]=a}if(Math.abs(u.dragStart[0]-n)<h)n=u.dragStart[0];if(Math.abs(u.dragStart[1]-a)<h)a=u.dragStart[1];d=(l-n)*(i[2]-i[0])/(r.viewBox[2]-r.viewBox[0]);g=(v-a)*(i[3]-i[1])/(r.viewBox[3]-r.viewBox[1]);i[0]+=d;i[2]+=d;i[1]+=g;i[3]+=g;e.setRanges(i);u.panning=true;u.lastInputTime=Date.now();f();e.cameraChanged();e.handleAnnotations()}else if(u.panning){u.panning=false;e.relayoutCallback()}break}u.lastPos[0]=n;u.lastPos[1]=a}u.wheelListener=a(t,(function(t,n){if(!e.scrollZoom)return false;var a=e.calcDataBox();var i=r.viewBox;var o=u.lastPos[0];var s=u.lastPos[1];var l=Math.exp(5*n/(i[3]-i[1]));var c=o/(i[2]-i[0])*(a[2]-a[0])+a[0];var v=s/(i[3]-i[1])*(a[3]-a[1])+a[1];a[0]=(a[0]-c)*l+c;a[2]=(a[2]-c)*l+c;a[1]=(a[1]-v)*l+v;a[3]=(a[3]-v)*l+v;e.setRanges(a);u.lastInputTime=Date.now();f();e.cameraChanged();e.handleAnnotations();e.relayoutCallback();return true}),true);return u}},82961:function(e,t,r){"use strict";var n=r(89298);var a=r(78614);function i(e){this.scene=e;this.gl=e.gl;this.pixelRatio=e.pixelRatio;this.screenBox=[0,0,1,1];this.viewBox=[0,0,1,1];this.dataBox=[-1,-1,1,1];this.borderLineEnable=[false,false,false,false];this.borderLineWidth=[1,1,1,1];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.ticks=[[],[]];this.tickEnable=[true,true,false,false];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labels=["x","y"];this.labelEnable=[true,true,false,false];this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2];this.labelPad=[15,15,15,15];this.labelSize=[12,12];this.labelFont=["sans-serif","sans-serif"];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.title="";this.titleEnable=true;this.titleCenter=[0,0,0,0];this.titleAngle=0;this.titleColor=[0,0,0,1];this.titleFont="sans-serif";this.titleSize=18;this.gridLineEnable=[true,true];this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]];this.gridLineWidth=[1,1];this.zeroLineEnable=[true,true];this.zeroLineWidth=[1,1];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.static=this.scene.staticPlot}var o=i.prototype;var s=["xaxis","yaxis"];o.merge=function(e){this.titleEnable=false;this.backgroundColor=a(e.plot_bgcolor);var t,r,n,i;var o,l,u,f,c;var v,h;for(v=0;v<2;++v){t=s[v];var p=t.charAt(0);r=e[this.scene[t]._name];n=r.title.text===this.scene.fullLayout._dfltTitle[p]?"":r.title.text;for(h=0;h<=2;h+=2){this.labelEnable[v+h]=false;this.labels[v+h]=n;this.labelColor[v+h]=a(r.title.font.color);this.labelFont[v+h]=r.title.font.family;this.labelSize[v+h]=r.title.font.size;this.labelPad[v+h]=this.getLabelPad(t,r);this.tickEnable[v+h]=false;this.tickColor[v+h]=a((r.tickfont||{}).color);this.tickAngle[v+h]=r.tickangle==="auto"?0:Math.PI*-r.tickangle/180;this.tickPad[v+h]=this.getTickPad(r);this.tickMarkLength[v+h]=0;this.tickMarkWidth[v+h]=r.tickwidth||0;this.tickMarkColor[v+h]=a(r.tickcolor);this.borderLineEnable[v+h]=false;this.borderLineColor[v+h]=a(r.linecolor);this.borderLineWidth[v+h]=r.linewidth||0}u=this.hasSharedAxis(r);o=this.hasAxisInDfltPos(t,r)&&!u;l=this.hasAxisInAltrPos(t,r)&&!u;i=r.mirror||false;f=u?String(i).indexOf("all")!==-1:!!i;c=u?i==="allticks":String(i).indexOf("ticks")!==-1;if(o)this.labelEnable[v]=true;else if(l)this.labelEnable[v+2]=true;if(o)this.tickEnable[v]=r.showticklabels;else if(l)this.tickEnable[v+2]=r.showticklabels;if(o||f)this.borderLineEnable[v]=r.showline;if(l||f)this.borderLineEnable[v+2]=r.showline;if(o||c)this.tickMarkLength[v]=this.getTickMarkLength(r);if(l||c)this.tickMarkLength[v+2]=this.getTickMarkLength(r);this.gridLineEnable[v]=r.showgrid;this.gridLineColor[v]=a(r.gridcolor);this.gridLineWidth[v]=r.gridwidth;this.zeroLineEnable[v]=r.zeroline;this.zeroLineColor[v]=a(r.zerolinecolor);this.zeroLineWidth[v]=r.zerolinewidth}};o.hasSharedAxis=function(e){var t=this.scene;var r=t.fullLayout._subplots.gl2d;var a=n.findSubplotsWithAxis(r,e);return a.indexOf(t.id)!==0};o.hasAxisInDfltPos=function(e,t){var r=t.side;if(e==="xaxis")return r==="bottom";else if(e==="yaxis")return r==="left"};o.hasAxisInAltrPos=function(e,t){var r=t.side;if(e==="xaxis")return r==="top";else if(e==="yaxis")return r==="right"};o.getLabelPad=function(e,t){var r=1.5;var n=t.title.font.size;var a=t.showticklabels;if(e==="xaxis"){return t.side==="top"?-10+n*(r+(a?1:0)):-10+n*(r+(a?.5:0))}else if(e==="yaxis"){return t.side==="right"?10+n*(r+(a?1:.5)):10+n*(r+(a?.5:0))}};o.getTickPad=function(e){return e.ticks==="outside"?10+e.ticklen:15};o.getTickMarkLength=function(e){if(!e.ticks)return 0;var t=e.ticklen;return e.ticks==="inside"?-t:t};function l(e){return new i(e)}e.exports=l},4796:function(e,t,r){"use strict";var n=r(30962).overrideAll;var a=r(92918);var i=r(10820);var o=r(77922);var s=r(85555);var l=r(93612);var u=r(528);var f=r(27659).NG;t.name="gl2d";t.attr=["xaxis","yaxis"];t.idRoot=["x","y"];t.idRegex=s.idRegex;t.attrRegex=s.attrRegex;t.attributes=r(89502);t.supplyLayoutDefaults=function(e,t,r){if(!t._has("cartesian")){l.supplyLayoutDefaults(e,t,r)}};t.layoutAttrOverrides=n(l.layoutAttributes,"plot","from-root");t.baseLayoutAttrOverrides=n({plot_bgcolor:i.plot_bgcolor,hoverlabel:u.hoverlabel},"plot","nested");t.plot=function e(t){var r=t._fullLayout;var n=t._fullData;var i=r._subplots.gl2d;for(var o=0;o<i.length;o++){var s=i[o];var l=r._plots[s];var u=f(n,"gl2d",s);var c=l._scene2d;if(c===undefined){c=new a({id:s,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio},r);l._scene2d=c}c.plot(u,t.calcdata,r,t.layout)}};t.clean=function(e,t,r,n){var a=n._subplots.gl2d||[];for(var i=0;i<a.length;i++){var o=a[i];var s=n._plots[o];if(!s._scene2d)continue;var u=f(e,"gl2d",o);if(u.length===0){s._scene2d.destroy();delete n._plots[o]}}l.clean.apply(this,arguments)};t.drawFramework=function(e){if(!e._context.staticPlot){l.drawFramework(e)}};t.toSVG=function(e){var t=e._fullLayout;var r=t._subplots.gl2d;for(var n=0;n<r.length;n++){var a=t._plots[r[n]];var i=a._scene2d;var s=i.toImage("png");var l=t._glimages.append("svg:image");l.attr({xmlns:o.svg,"xlink:href":s,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"});i.destroy()}};t.updateFx=function(e){var t=e._fullLayout;var r=t._subplots.gl2d;for(var n=0;n<r.length;n++){var a=t._plots[r[n]]._scene2d;a.updateFx(t.dragmode)}}},92918:function(e,t,r){"use strict";var n=r(73972);var a=r(89298);var i=r(30211);var o=r(9330).gl_plot2d;var s=r(9330).gl_spikes2d;var l=r(9330).gl_select_box;var u=r(40372);var f=r(82961);var c=r(75071);var v=r(58617);var h=r(99082);var p=h.enforce;var d=h.clean;var g=r(71739).doAutoRange;var y=r(64505);var m=y.drawMode;var x=y.selectMode;var b=["xaxis","yaxis"];var _,w;var T=r(85555).SUBPLOT_PATTERN;function k(e,t){this.container=e.container;this.graphDiv=e.graphDiv;this.pixelRatio=e.plotGlPixelRatio||window.devicePixelRatio;this.id=e.id;this.staticPlot=!!e.staticPlot;this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian;this.fullData=null;this.updateRefs(t);this.makeFramework();if(this.stopped)return;this.glplotOptions=f(this);this.glplotOptions.merge(t);this.glplot=o(this.glplotOptions);this.camera=c(this);this.traces={};this.spikes=s(this.glplot);this.selectBox=l(this.glplot,{innerFill:false,outerFill:true});this.lastButtonState=0;this.pickResult=null;this.isMouseOver=true;this.stopped=false;this.redraw=this.draw.bind(this);this.redraw()}e.exports=k;var A=k.prototype;A.makeFramework=function(){if(this.staticPlot){if(!w){_=document.createElement("canvas");w=u({canvas:_,preserveDrawingBuffer:false,premultipliedAlpha:true,antialias:true});if(!w){throw new Error("Error creating static canvas/context for image server")}}this.canvas=_;this.gl=w}else{var e=this.container.querySelector(".gl-canvas-focus");var t=u({canvas:e,preserveDrawingBuffer:true,premultipliedAlpha:true});if(!t){v(this);this.stopped=true;return}this.canvas=e;this.gl=t}var r=this.canvas;r.style.width="100%";r.style.height="100%";r.style.position="absolute";r.style.top="0px";r.style.left="0px";r.style["pointer-events"]="none";this.updateSize(r);var n=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");n.style.position="absolute";n.style.top=n.style.left="0px";n.style.width=n.style.height="100%";n.style["z-index"]=20;n.style["pointer-events"]="none";var a=this.mouseContainer=document.createElement("div");a.style.position="absolute";a.style["pointer-events"]="auto";this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var i=this.container;i.appendChild(n);i.appendChild(a);var o=this;a.addEventListener("mouseout",(function(){o.isMouseOver=false;o.unhover()}));a.addEventListener("mouseover",(function(){o.isMouseOver=true}))};A.toImage=function(e){if(!e)e="png";this.stopped=true;if(this.staticPlot)this.container.appendChild(_);this.updateSize(this.canvas);var t=this.glplot.gl;var r=t.drawingBufferWidth;var n=t.drawingBufferHeight;t.clearColor(1,1,1,0);t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT);this.glplot.setDirty();this.glplot.draw();t.bindFramebuffer(t.FRAMEBUFFER,null);var a=new Uint8Array(r*n*4);t.readPixels(0,0,r,n,t.RGBA,t.UNSIGNED_BYTE,a);for(var i=0,o=n-1;i<o;++i,--o){for(var s=0;s<r;++s){for(var l=0;l<4;++l){var u=a[4*(r*i+s)+l];a[4*(r*i+s)+l]=a[4*(r*o+s)+l];a[4*(r*o+s)+l]=u}}}var f=document.createElement("canvas");f.width=r;f.height=n;var c=f.getContext("2d",{willReadFrequently:true});var v=c.createImageData(r,n);v.data.set(a);c.putImageData(v,0,0);var h;switch(e){case"jpeg":h=f.toDataURL("image/jpeg");break;case"webp":h=f.toDataURL("image/webp");break;default:h=f.toDataURL("image/png")}if(this.staticPlot)this.container.removeChild(_);return h};A.updateSize=function(e){if(!e)e=this.canvas;var t=this.pixelRatio;var r=this.fullLayout;var n=r.width;var a=r.height;var i=Math.ceil(t*n)|0;var o=Math.ceil(t*a)|0;if(e.width!==i||e.height!==o){e.width=i;e.height=o}return e};A.computeTickMarks=function(){this.xaxis.setScale();this.yaxis.setScale();var e=[a.calcTicks(this.xaxis),a.calcTicks(this.yaxis)];for(var t=0;t<2;++t){for(var r=0;r<e[t].length;++r){e[t][r].text=e[t][r].text+""}}return e};function M(e,t){for(var r=0;r<2;++r){var n=e[r];var a=t[r];if(n.length!==a.length)return true;for(var i=0;i<n.length;++i){if(n[i].x!==a[i].x)return true}}return false}A.updateRefs=function(e){this.fullLayout=e;var t=this.id.match(T);var r="xaxis"+t[1];var n="yaxis"+t[2];this.xaxis=this.fullLayout[r];this.yaxis=this.fullLayout[n]};A.relayoutCallback=function(){var e=this.graphDiv;var t=this.xaxis;var r=this.yaxis;var a=e.layout;var i={};var o=i[t._name+".range"]=t.range.slice();var s=i[r._name+".range"]=r.range.slice();i[t._name+".autorange"]=t.autorange;i[r._name+".autorange"]=r.autorange;n.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,i);var l=a[t._name];l.range=o;l.autorange=t.autorange;var u=a[r._name];u.range=s;u.autorange=r.autorange;i.lastInputTime=this.camera.lastInputTime;e.emit("plotly_relayout",i)};A.cameraChanged=function(){var e=this.camera;this.glplot.setDataBox(this.calcDataBox());var t=this.computeTickMarks();var r=this.glplotOptions.ticks;if(M(t,r)){this.glplotOptions.ticks=t;this.glplotOptions.dataBox=e.dataBox;this.glplot.update(this.glplotOptions);this.handleAnnotations()}};A.handleAnnotations=function(){var e=this.graphDiv;var t=this.fullLayout.annotations;for(var r=0;r<t.length;r++){var a=t[r];if(a.xref===this.xaxis._id&&a.yref===this.yaxis._id){n.getComponentMethod("annotations","drawOne")(e,r)}}};A.destroy=function(){if(!this.glplot)return;var e=this.traces;if(e){Object.keys(e).map((function(t){e[t].dispose();delete e[t]}))}this.glplot.dispose();this.container.removeChild(this.svgContainer);this.container.removeChild(this.mouseContainer);this.fullData=null;this.glplot=null;this.stopped=true;this.camera.mouseListener.enabled=false;this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener);this.camera=null};A.plot=function(e,t,r){var n=this.glplot;this.updateRefs(r);this.xaxis.clearCalc();this.yaxis.clearCalc();this.updateTraces(e,t);this.updateFx(r.dragmode);var a=r.width;var i=r.height;this.updateSize(this.canvas);var o=this.glplotOptions;o.merge(r);o.screenBox=[0,0,a,i];var s={_fullLayout:{_axisConstraintGroups:r._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:r._size}};d(s,this.xaxis);d(s,this.yaxis);var l=r._size;var u=this.xaxis.domain;var f=this.yaxis.domain;o.viewBox=[l.l+u[0]*l.w,l.b+f[0]*l.h,a-l.r-(1-u[1])*l.w,i-l.t-(1-f[1])*l.h];this.mouseContainer.style.width=l.w*(u[1]-u[0])+"px";this.mouseContainer.style.height=l.h*(f[1]-f[0])+"px";this.mouseContainer.height=l.h*(f[1]-f[0]);this.mouseContainer.style.left=l.l+u[0]*l.w+"px";this.mouseContainer.style.top=l.t+(1-f[1])*l.h+"px";var c,v;for(v=0;v<2;++v){c=this[b[v]];c._length=o.viewBox[v+2]-o.viewBox[v];g(this.graphDiv,c);c.setScale()}p(s);o.ticks=this.computeTickMarks();o.dataBox=this.calcDataBox();o.merge(r);n.update(o);this.glplot.draw()};A.calcDataBox=function(){var e=this.xaxis;var t=this.yaxis;var r=e.range;var n=t.range;var a=e.r2l;var i=t.r2l;return[a(r[0]),i(n[0]),a(r[1]),i(n[1])]};A.setRanges=function(e){var t=this.xaxis;var r=this.yaxis;var n=t.l2r;var a=r.l2r;t.range=[n(e[0]),n(e[2])];r.range=[a(e[1]),a(e[3])]};A.updateTraces=function(e,t){var r=Object.keys(this.traces);var n,a,i;this.fullData=e;e:for(n=0;n<r.length;n++){var o=r[n];var s=this.traces[o];for(a=0;a<e.length;a++){i=e[a];if(i.uid===o&&i.type===s.type){continue e}}s.dispose();delete this.traces[o]}for(n=0;n<e.length;n++){i=e[n];var l=t[n];var u=this.traces[i.uid];if(u)u.update(i,l);else{u=i._module.plot(this,i,l);this.traces[i.uid]=u}}this.glplot.objects.sort((function(e,t){return e._trace.index-t._trace.index}))};A.updateFx=function(e){if(x(e)||m(e)){this.pickCanvas.style["pointer-events"]="none";this.mouseContainer.style["pointer-events"]="none"}else{this.pickCanvas.style["pointer-events"]="auto";this.mouseContainer.style["pointer-events"]="auto"}if(e==="pan"){this.mouseContainer.style.cursor="move"}else if(e==="zoom"){this.mouseContainer.style.cursor="crosshair"}else{this.mouseContainer.style.cursor=null}};A.emitPointAction=function(e,t){var r=e.trace.uid;var n=e.pointIndex;var a;for(var o=0;o<this.fullData.length;o++){if(this.fullData[o].uid===r){a=this.fullData[o]}}var s={x:e.traceCoord[0],y:e.traceCoord[1],curveNumber:a.index,pointNumber:n,data:a._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};i.appendArrayPointValue(s,a,n);this.graphDiv.emit(t,{points:[s]})};A.draw=function(){if(this.stopped)return;requestAnimationFrame(this.redraw);var e=this.glplot;var t=this.camera;var r=t.mouseListener;var n=this.lastButtonState===1&&r.buttons===0;var a=this.fullLayout;this.lastButtonState=r.buttons;this.cameraChanged();var o=r.x*e.pixelRatio;var s=this.canvas.height-e.pixelRatio*r.y;var l;if(t.boxEnabled&&a.dragmode==="zoom"){this.selectBox.enabled=true;var u=this.selectBox.selectBox=[Math.min(t.boxStart[0],t.boxEnd[0]),Math.min(t.boxStart[1],t.boxEnd[1]),Math.max(t.boxStart[0],t.boxEnd[0]),Math.max(t.boxStart[1],t.boxEnd[1])];for(var f=0;f<2;f++){if(t.boxStart[f]===t.boxEnd[f]){u[f]=e.dataBox[f];u[f+2]=e.dataBox[f+2]}}e.setDirty()}else if(!t.panning&&this.isMouseOver){this.selectBox.enabled=false;var c=a._size;var v=this.xaxis.domain;var h=this.yaxis.domain;l=e.pick(o/e.pixelRatio+c.l+v[0]*c.w,s/e.pixelRatio-(c.t+(1-h[1])*c.h));var p=l&&l.object._trace.handlePick(l);if(p&&n){this.emitPointAction(p,"plotly_click")}if(l&&l.object._trace.hoverinfo!=="skip"&&a.hovermode){if(p&&(!this.lastPickResult||this.lastPickResult.traceUid!==p.trace.uid||this.lastPickResult.dataCoord[0]!==p.dataCoord[0]||this.lastPickResult.dataCoord[1]!==p.dataCoord[1])){var d=p;this.lastPickResult={traceUid:p.trace?p.trace.uid:null,dataCoord:p.dataCoord.slice()};this.spikes.update({center:l.dataCoord});d.screenCoord=[((e.viewBox[2]-e.viewBox[0])*(l.dataCoord[0]-e.dataBox[0])/(e.dataBox[2]-e.dataBox[0])+e.viewBox[0])/e.pixelRatio,(this.canvas.height-(e.viewBox[3]-e.viewBox[1])*(l.dataCoord[1]-e.dataBox[1])/(e.dataBox[3]-e.dataBox[1])-e.viewBox[1])/e.pixelRatio];this.emitPointAction(p,"plotly_hover");var g=this.fullData[d.trace.index]||{};var y=d.pointIndex;var m=i.castHoverinfo(g,a,y);if(m&&m!=="all"){var x=m.split("+");if(x.indexOf("x")===-1)d.traceCoord[0]=undefined;if(x.indexOf("y")===-1)d.traceCoord[1]=undefined;if(x.indexOf("z")===-1)d.traceCoord[2]=undefined;if(x.indexOf("text")===-1)d.textLabel=undefined;if(x.indexOf("name")===-1)d.name=undefined}i.loneHover({x:d.screenCoord[0],y:d.screenCoord[1],xLabel:this.hoverFormatter("xaxis",d.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",d.traceCoord[1]),zLabel:d.traceCoord[2],text:d.textLabel,name:d.name,color:i.castHoverOption(g,y,"bgcolor")||d.color,borderColor:i.castHoverOption(g,y,"bordercolor"),fontFamily:i.castHoverOption(g,y,"font.family"),fontSize:i.castHoverOption(g,y,"font.size"),fontColor:i.castHoverOption(g,y,"font.color"),nameLength:i.castHoverOption(g,y,"namelength"),textAlign:i.castHoverOption(g,y,"align")},{container:this.svgContainer,gd:this.graphDiv})}}}if(!l){this.unhover()}e.draw()};A.unhover=function(){if(this.lastPickResult){this.spikes.update({});this.lastPickResult=null;this.graphDiv.emit("plotly_unhover");i.loneUnhover(this.svgContainer)}};A.hoverFormatter=function(e,t){if(t===undefined)return undefined;var r=this[e];return a.tickText(r,r.c2l(t),"hover").text}},58547:function(e,t,r){"use strict";var n=r(30962).overrideAll;var a=r(528);var i=r(33539);var o=r(27659).NG;var s=r(71828);var l=r(77922);var u="gl3d";var f="scene";t.name=u;t.attr=f;t.idRoot=f;t.idRegex=t.attrRegex=s.counterRegex("scene");t.attributes=r(59084);t.layoutAttributes=r(65500);t.baseLayoutAttrOverrides=n({hoverlabel:a.hoverlabel},"plot","nested");t.supplyLayoutDefaults=r(24682);t.plot=function e(t){var r=t._fullLayout;var n=t._fullData;var a=r._subplots[u];for(var s=0;s<a.length;s++){var l=a[s];var f=o(n,u,l);var c=r[l];var v=c.camera;var h=c._scene;if(!h){h=new i({id:l,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio,camera:v},r);c._scene=h}if(!h.viewInitial){h.viewInitial={up:{x:v.up.x,y:v.up.y,z:v.up.z},eye:{x:v.eye.x,y:v.eye.y,z:v.eye.z},center:{x:v.center.x,y:v.center.y,z:v.center.z}}}h.plot(f,r,t.layout)}};t.clean=function(e,t,r,n){var a=n._subplots[u]||[];for(var i=0;i<a.length;i++){var o=a[i];if(!t[o]&&!!n[o]._scene){n[o]._scene.destroy();if(n._infolayer){n._infolayer.selectAll(".annotation-"+o).remove()}}}};t.toSVG=function(e){var t=e._fullLayout;var r=t._subplots[u];var n=t._size;for(var a=0;a<r.length;a++){var i=t[r[a]];var o=i.domain;var s=i._scene;var f=s.toImage("png");var c=t._glimages.append("svg:image");c.attr({xmlns:l.svg,"xlink:href":f,x:n.l+n.w*o.x[0],y:n.t+n.h*(1-o.y[1]),width:n.w*(o.x[1]-o.x[0]),height:n.h*(o.y[1]-o.y[0]),preserveAspectRatio:"none"});s.destroy()}};t.cleanId=function e(t){if(!t.match(/^scene[0-9]*$/))return;var r=t.substr(5);if(r==="1")r="";return f+r};t.updateFx=function(e){var t=e._fullLayout;var r=t._subplots[u];for(var n=0;n<r.length;n++){var a=t[r[n]]._scene;a.updateFx(t.dragmode,t.hovermode)}}},59084:function(e){"use strict";e.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},77894:function(e,t,r){"use strict";var n=r(7901);var a=r(13838);var i=r(1426).extendFlat;var o=r(30962).overrideAll;e.exports=o({visible:a.visible,showspikes:{valType:"boolean",dflt:true},spikesides:{valType:"boolean",dflt:true},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:n.defaultLine},showbackground:{valType:"boolean",dflt:false},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:true},color:a.color,categoryorder:a.categoryorder,categoryarray:a.categoryarray,title:{text:a.title.text,font:a.title.font},type:i({},a.type,{values:["-","linear","log","date","category"]}),autotypenumbers:a.autotypenumbers,autorange:a.autorange,autorangeoptions:{minallowed:a.autorangeoptions.minallowed,maxallowed:a.autorangeoptions.maxallowed,clipmin:a.autorangeoptions.clipmin,clipmax:a.autorangeoptions.clipmax,include:a.autorangeoptions.include,editType:"plot"},rangemode:a.rangemode,minallowed:a.minallowed,maxallowed:a.maxallowed,range:i({},a.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":false}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":false}}],anim:false}),tickmode:a.minor.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:a.ticks,mirror:a.mirror,ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,showticklabels:a.showticklabels,labelalias:a.labelalias,tickfont:a.tickfont,tickangle:a.tickangle,tickprefix:a.tickprefix,showtickprefix:a.showtickprefix,ticksuffix:a.ticksuffix,showticksuffix:a.showticksuffix,showexponent:a.showexponent,exponentformat:a.exponentformat,minexponent:a.minexponent,separatethousands:a.separatethousands,tickformat:a.tickformat,tickformatstops:a.tickformatstops,hoverformat:a.hoverformat,showline:a.showline,linecolor:a.linecolor,linewidth:a.linewidth,showgrid:a.showgrid,gridcolor:i({},a.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:a.gridwidth,zeroline:a.zeroline,zerolinecolor:a.zerolinecolor,zerolinewidth:a.zerolinewidth,_deprecated:{title:a._deprecated.title,titlefont:a._deprecated.titlefont}},"plot","from-root")},3277:function(e,t,r){"use strict";var n=r(84267).mix;var a=r(71828);var i=r(44467);var o=r(77894);var s=r(951);var l=r(71453);var u=["xaxis","yaxis","zaxis"];var f=100*(204-68)/(255-68);e.exports=function e(t,r,c){var v,h;function p(e,t){return a.coerce(v,h,o,e,t)}for(var d=0;d<u.length;d++){var g=u[d];v=t[g]||{};h=i.newContainer(r,g);h._id=g[0]+c.scene;h._name=g;s(v,h,p,c);l(v,h,p,{font:c.font,letter:g[0],data:c.data,showGrid:true,noTickson:true,noTicklabelmode:true,noTicklabelstep:true,noTicklabelposition:true,noTicklabeloverflow:true,noInsiderange:true,bgColor:c.bgColor,calendar:c.calendar},c.fullLayout);p("gridcolor",n(h.color,c.bgColor,f).toRgbString());p("title.text",g[0]);h.setScale=a.noop;if(p("showspikes")){p("spikesides");p("spikethickness");p("spikecolor",h.color)}p("showaxeslabels");if(p("showbackground"))p("backgroundcolor")}}},30422:function(e,t,r){"use strict";var n=r(78614);var a=r(71828);var i=["xaxis","yaxis","zaxis"];function o(){this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.tickEnable=[true,true,true];this.tickFont=["sans-serif","sans-serif","sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[18,18,18];this.labels=["x","y","z"];this.labelEnable=[true,true,true];this.labelFont=["Open Sans","Open Sans","Open Sans"];this.labelSize=[20,20,20];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[30,30,30];this.lineEnable=[true,true,true];this.lineMirror=[false,false,false];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[true,true,true];this.lineTickMirror=[false,false,false];this.lineTickLength=[10,10,10];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[true,true,true];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[true,true,true];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[true,true,true];this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._defaultTickPad=this.tickPad.slice();this._defaultLabelPad=this.labelPad.slice();this._defaultLineTickLength=this.lineTickLength.slice()}var s=o.prototype;s.merge=function(e,t){var r=this;for(var o=0;o<3;++o){var s=t[i[o]];if(!s.visible){r.tickEnable[o]=false;r.labelEnable[o]=false;r.lineEnable[o]=false;r.lineTickEnable[o]=false;r.gridEnable[o]=false;r.zeroEnable[o]=false;r.backgroundEnable[o]=false;continue}r.labels[o]=e._meta?a.templateString(s.title.text,e._meta):s.title.text;if("font"in s.title){if(s.title.font.color)r.labelColor[o]=n(s.title.font.color);if(s.title.font.family)r.labelFont[o]=s.title.font.family;if(s.title.font.size)r.labelSize[o]=s.title.font.size}if("showline"in s)r.lineEnable[o]=s.showline;if("linecolor"in s)r.lineColor[o]=n(s.linecolor);if("linewidth"in s)r.lineWidth[o]=s.linewidth;if("showgrid"in s)r.gridEnable[o]=s.showgrid;if("gridcolor"in s)r.gridColor[o]=n(s.gridcolor);if("gridwidth"in s)r.gridWidth[o]=s.gridwidth;if(s.type==="log")r.zeroEnable[o]=false;else if("zeroline"in s)r.zeroEnable[o]=s.zeroline;if("zerolinecolor"in s)r.zeroLineColor[o]=n(s.zerolinecolor);if("zerolinewidth"in s)r.zeroLineWidth[o]=s.zerolinewidth;if("ticks"in s&&!!s.ticks)r.lineTickEnable[o]=true;else r.lineTickEnable[o]=false;if("ticklen"in s){r.lineTickLength[o]=r._defaultLineTickLength[o]=s.ticklen}if("tickcolor"in s)r.lineTickColor[o]=n(s.tickcolor);if("tickwidth"in s)r.lineTickWidth[o]=s.tickwidth;if("tickangle"in s){r.tickAngle[o]=s.tickangle==="auto"?-3600:Math.PI*-s.tickangle/180}if("showticklabels"in s)r.tickEnable[o]=s.showticklabels;if("tickfont"in s){if(s.tickfont.color)r.tickColor[o]=n(s.tickfont.color);if(s.tickfont.family)r.tickFont[o]=s.tickfont.family;if(s.tickfont.size)r.tickSize[o]=s.tickfont.size}if("mirror"in s){if(["ticks","all","allticks"].indexOf(s.mirror)!==-1){r.lineTickMirror[o]=true;r.lineMirror[o]=true}else if(s.mirror===true){r.lineTickMirror[o]=false;r.lineMirror[o]=true}else{r.lineTickMirror[o]=false;r.lineMirror[o]=false}}else r.lineMirror[o]=false;if("showbackground"in s&&s.showbackground!==false){r.backgroundEnable[o]=true;r.backgroundColor[o]=n(s.backgroundcolor)}else r.backgroundEnable[o]=false}};function l(e,t){var r=new o;r.merge(e,t);return r}e.exports=l},24682:function(e,t,r){"use strict";var n=r(71828);var a=r(7901);var i=r(73972);var o=r(49119);var s=r(3277);var l=r(65500);var u=r(27659).NG;var f="gl3d";e.exports=function e(t,r,a){var i=r._basePlotModules.length>1;function s(e){if(i)return;var r=n.validate(t[e],l[e]);if(r)return t[e]}o(t,r,a,{type:f,attributes:l,handleDefaults:c,fullLayout:r,font:r.font,fullData:a,getDfltFromLayout:s,autotypenumbersDflt:r.autotypenumbers,paper_bgcolor:r.paper_bgcolor,calendar:r.calendar})};function c(e,t,r,n){var o=r("bgcolor");var l=a.combine(o,n.paper_bgcolor);var c=["up","center","eye"];for(var v=0;v<c.length;v++){r("camera."+c[v]+".x");r("camera."+c[v]+".y");r("camera."+c[v]+".z")}r("camera.projection.type");var h=!!r("aspectratio.x")&&!!r("aspectratio.y")&&!!r("aspectratio.z");var p=h?"manual":"auto";var d=r("aspectmode",p);if(!h){e.aspectratio=t.aspectratio={x:1,y:1,z:1};if(d==="manual")t.aspectmode="auto";e.aspectmode=t.aspectmode}var g=u(n.fullData,f,n.id);s(e,t,{font:n.font,scene:n.id,data:g,bgColor:l,calendar:n.calendar,autotypenumbersDflt:n.autotypenumbersDflt,fullLayout:n.fullLayout});i.getComponentMethod("annotations3d","handleDefaults")(e,t,n);var y=n.getDfltFromLayout("dragmode");if(y!==false){if(!y){y="orbit";if(e.camera&&e.camera.up){var m=e.camera.up.x;var x=e.camera.up.y;var b=e.camera.up.z;if(b!==0){if(!m||!x||!b){y="turntable"}else if(b/Math.sqrt(m*m+x*x+b*b)>.999){y="turntable"}}}else{y="turntable"}}}r("dragmode",y);r("hovermode",n.getDfltFromLayout("hovermode"))}},65500:function(e,t,r){"use strict";var n=r(77894);var a=r(27670).Y;var i=r(1426).extendFlat;var o=r(71828).counterRegex;function s(e,t,r){return{x:{valType:"number",dflt:e,editType:"camera"},y:{valType:"number",dflt:t,editType:"camera"},z:{valType:"number",dflt:r,editType:"camera"},editType:"camera"}}e.exports={_arrayAttrRegexps:[o("scene",".annotations",true)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:i(s(0,0,1),{}),center:i(s(0,0,0),{}),eye:i(s(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:a({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":undefined,"aspectratio.y":undefined,"aspectratio.z":undefined}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:n,yaxis:n,zaxis:n,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",false],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",false],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},13133:function(e,t,r){"use strict";var n=r(78614);var a=["xaxis","yaxis","zaxis"];function i(){this.enabled=[true,true,true];this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.drawSides=[true,true,true];this.lineWidth=[1,1,1]}var o=i.prototype;o.merge=function(e){for(var t=0;t<3;++t){var r=e[a[t]];if(!r.visible){this.enabled[t]=false;this.drawSides[t]=false;continue}this.enabled[t]=r.showspikes;this.colors[t]=n(r.spikecolor);this.drawSides[t]=r.spikesides;this.lineWidth[t]=r.spikethickness}};function s(e){var t=new i;t.merge(e);return t}e.exports=s},96085:function(e,t,r){"use strict";e.exports=l;var n=r(89298);var a=r(71828);var i=["xaxis","yaxis","zaxis"];var o=[0,0,0];function s(e){var t=new Array(3);for(var r=0;r<3;++r){var n=e[r];var a=new Array(n.length);for(var i=0;i<n.length;++i){a[i]=n[i].x}t[r]=a}return t}function l(e){var t=e.axesOptions;var r=e.glplot.axesPixels;var l=e.fullSceneLayout;var u=[[],[],[]];for(var f=0;f<3;++f){var c=l[i[f]];c._length=(r[f].hi-r[f].lo)*r[f].pixelsPerDataUnit/e.dataScale[f];if(Math.abs(c._length)===Infinity||isNaN(c._length)){u[f]=[]}else{c._input_range=c.range.slice();c.range[0]=r[f].lo/e.dataScale[f];c.range[1]=r[f].hi/e.dataScale[f];c._m=1/(e.dataScale[f]*r[f].pixelsPerDataUnit);if(c.range[0]===c.range[1]){c.range[0]-=1;c.range[1]+=1}var v=c.tickmode;if(c.tickmode==="auto"){c.tickmode="linear";var h=c.nticks||a.constrain(c._length/40,4,9);n.autoTicks(c,Math.abs(c.range[1]-c.range[0])/h)}var p=n.calcTicks(c,{msUTC:true});for(var d=0;d<p.length;++d){p[d].x=p[d].x*e.dataScale[f];if(c.type==="date"){p[d].text=p[d].text.replace(/\<br\>/g," ")}}u[f]=p;c.tickmode=v}}t.ticks=u;for(var f=0;f<3;++f){o[f]=.5*(e.glplot.bounds[0][f]+e.glplot.bounds[1][f]);for(var d=0;d<2;++d){t.bounds[d][f]=e.glplot.bounds[d][f]}}e.contourLevels=s(u)}},63538:function(e){"use strict";function t(e,t){var r=[0,0,0,0];var n,a;for(n=0;n<4;++n){for(a=0;a<4;++a){r[a]+=e[4*n+a]*t[n]}}return r}function r(e,r){var n=t(e.projection,t(e.view,t(e.model,[r[0],r[1],r[2],1])));return n}e.exports=r},33539:function(e,t,r){"use strict";var n=r(9330).gl_plot3d;var a=n.createCamera;var i=n.createScene;var o=r(40372);var s=r(38520);var l=r(73972);var u=r(71828);var f=u.preserveDrawingBuffer();var c=r(89298);var v=r(30211);var h=r(78614);var p=r(58617);var d=r(63538);var g=r(30422);var y=r(13133);var m=r(96085);var x=r(71739).applyAutorangeOptions;var b,_;var w=false;function T(e,t){var r=document.createElement("div");var n=e.container;this.graphDiv=e.graphDiv;var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.style.position="absolute";a.style.top=a.style.left="0px";a.style.width=a.style.height="100%";a.style["z-index"]=20;a.style["pointer-events"]="none";r.appendChild(a);this.svgContainer=a;r.id=e.id;r.style.position="absolute";r.style.top=r.style.left="0px";r.style.width=r.style.height="100%";n.appendChild(r);this.fullLayout=t;this.id=e.id||"scene";this.fullSceneLayout=t[this.id];this.plotArgs=[[],{},{}];this.axesOptions=g(t,t[this.id]);this.spikeOptions=y(t[this.id]);this.container=r;this.staticMode=!!e.staticPlot;this.pixelRatio=this.pixelRatio||e.plotGlPixelRatio||2;this.dataScale=[1,1,1];this.contourLevels=[[],[],[]];this.convertAnnotations=l.getComponentMethod("annotations3d","convert");this.drawAnnotations=l.getComponentMethod("annotations3d","draw");this.initializeGLPlot()}var k=T.prototype;k.prepareOptions=function(){var e=this;var t={canvas:e.canvas,gl:e.gl,glOptions:{preserveDrawingBuffer:f,premultipliedAlpha:true,antialias:true},container:e.container,axes:e.axesOptions,spikes:e.spikeOptions,pickRadius:10,snapToData:true,autoScale:true,autoBounds:false,cameraObject:e.camera,pixelRatio:e.pixelRatio};if(e.staticMode){if(!_){b=document.createElement("canvas");_=o({canvas:b,preserveDrawingBuffer:true,premultipliedAlpha:true,antialias:true});if(!_){throw new Error("error creating static canvas/context for image server")}}t.gl=_;t.canvas=b}return t};var A=true;k.tryCreatePlot=function(){var e=this;var t=e.prepareOptions();var r=true;try{e.glplot=i(t)}catch(n){if(e.staticMode||!A||f){r=false}else{u.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{f=t.glOptions.preserveDrawingBuffer=true;e.glplot=i(t)}catch(n){f=t.glOptions.preserveDrawingBuffer=false;r=false}}}A=false;return r};k.initializeGLCamera=function(){var e=this;var t=e.fullSceneLayout.camera;var r=t.projection.type==="orthographic";e.camera=a(e.container,{center:[t.center.x,t.center.y,t.center.z],eye:[t.eye.x,t.eye.y,t.eye.z],up:[t.up.x,t.up.y,t.up.z],_ortho:r,zoomMin:.01,zoomMax:100,mode:"orbit"})};k.initializeGLPlot=function(){var e=this;e.initializeGLCamera();var t=e.tryCreatePlot();if(!t)return p(e);e.traces={};e.make4thDimension();var r=e.graphDiv;var n=r.layout;var a=function(){var t={};if(e.isCameraChanged(n)){t[e.id+".camera"]=e.getCamera()}if(e.isAspectChanged(n)){t[e.id+".aspectratio"]=e.glplot.getAspectratio();if(n[e.id].aspectmode!=="manual"){e.fullSceneLayout.aspectmode=n[e.id].aspectmode=t[e.id+".aspectmode"]="manual"}}return t};var i=function(e){if(e.fullSceneLayout.dragmode===false)return;var t=a();e.saveLayout(n);e.graphDiv.emit("plotly_relayout",t)};if(e.glplot.canvas){e.glplot.canvas.addEventListener("mouseup",(function(){i(e)}));e.glplot.canvas.addEventListener("touchstart",(function(){w=true}));e.glplot.canvas.addEventListener("wheel",(function(t){if(r._context._scrollZoom.gl3d){if(e.camera._ortho){var n=t.deltaX>t.deltaY?1.1:1/1.1;var a=e.glplot.getAspectratio();e.glplot.setAspectratio({x:n*a.x,y:n*a.y,z:n*a.z})}i(e)}}),s?{passive:false}:false);e.glplot.canvas.addEventListener("mousemove",(function(){if(e.fullSceneLayout.dragmode===false)return;if(e.camera.mouseListener.buttons===0)return;var t=a();e.graphDiv.emit("plotly_relayouting",t)}));if(!e.staticMode){e.glplot.canvas.addEventListener("webglcontextlost",(function(t){if(r&&r.emit){r.emit("plotly_webglcontextlost",{event:t,layer:e.id})}}),false)}}e.glplot.oncontextloss=function(){e.recoverContext()};e.glplot.onrender=function(){e.render()};return true};k.render=function(){var e=this;var t=e.graphDiv;var r;var n=e.svgContainer;var a=e.container.getBoundingClientRect();t._fullLayout._calcInverseTransform(t);var i=t._fullLayout._invScaleX;var o=t._fullLayout._invScaleY;var s=a.width*i;var l=a.height*o;n.setAttributeNS(null,"viewBox","0 0 "+s+" "+l);n.setAttributeNS(null,"width",s);n.setAttributeNS(null,"height",l);m(e);e.glplot.axes.update(e.axesOptions);var f=Object.keys(e.traces);var h=null;var p=e.glplot.selection;for(var g=0;g<f.length;++g){r=e.traces[f[g]];if(r.data.hoverinfo!=="skip"&&r.handlePick(p)){h=r}if(r.setContourLevels)r.setContourLevels()}function y(t,r,n){var a=e.fullSceneLayout[t+"axis"];if(a.type!=="log"){r=a.d2l(r)}return c.hoverLabelText(a,r,n)}if(h!==null){var x=d(e.glplot.cameraParams,p.dataCoordinate);r=h.data;var b=t._fullData[r.index];var _=p.index;var T={xLabel:y("x",p.traceCoordinate[0],r.xhoverformat),yLabel:y("y",p.traceCoordinate[1],r.yhoverformat),zLabel:y("z",p.traceCoordinate[2],r.zhoverformat)};var k=v.castHoverinfo(b,e.fullLayout,_);var A=(k||"").split("+");var M=k&&k==="all";if(!b.hovertemplate&&!M){if(A.indexOf("x")===-1)T.xLabel=undefined;if(A.indexOf("y")===-1)T.yLabel=undefined;if(A.indexOf("z")===-1)T.zLabel=undefined;if(A.indexOf("text")===-1)p.textLabel=undefined;if(A.indexOf("name")===-1)h.name=undefined}var S;var E=[];if(r.type==="cone"||r.type==="streamtube"){T.uLabel=y("x",p.traceCoordinate[3],r.uhoverformat);if(M||A.indexOf("u")!==-1){E.push("u: "+T.uLabel)}T.vLabel=y("y",p.traceCoordinate[4],r.vhoverformat);if(M||A.indexOf("v")!==-1){E.push("v: "+T.vLabel)}T.wLabel=y("z",p.traceCoordinate[5],r.whoverformat);if(M||A.indexOf("w")!==-1){E.push("w: "+T.wLabel)}T.normLabel=p.traceCoordinate[6].toPrecision(3);if(M||A.indexOf("norm")!==-1){E.push("norm: "+T.normLabel)}if(r.type==="streamtube"){T.divergenceLabel=p.traceCoordinate[7].toPrecision(3);if(M||A.indexOf("divergence")!==-1){E.push("divergence: "+T.divergenceLabel)}}if(p.textLabel){E.push(p.textLabel)}S=E.join("<br>")}else if(r.type==="isosurface"||r.type==="volume"){T.valueLabel=c.hoverLabelText(e._mockAxis,e._mockAxis.d2l(p.traceCoordinate[3]),r.valuehoverformat);E.push("value: "+T.valueLabel);if(p.textLabel){E.push(p.textLabel)}S=E.join("<br>")}else{S=p.textLabel}var L={x:p.traceCoordinate[0],y:p.traceCoordinate[1],z:p.traceCoordinate[2],data:b._input,fullData:b,curveNumber:b.index,pointNumber:_};v.appendArrayPointValue(L,b,_);if(r._module.eventData){L=b._module.eventData(L,p,b,{},_)}var C={points:[L]};if(e.fullSceneLayout.hovermode){var I=[];v.loneHover({trace:b,x:(.5+.5*x[0]/x[3])*s,y:(.5-.5*x[1]/x[3])*l,xLabel:T.xLabel,yLabel:T.yLabel,zLabel:T.zLabel,text:S,name:h.name,color:v.castHoverOption(b,_,"bgcolor")||h.color,borderColor:v.castHoverOption(b,_,"bordercolor"),fontFamily:v.castHoverOption(b,_,"font.family"),fontSize:v.castHoverOption(b,_,"font.size"),fontColor:v.castHoverOption(b,_,"font.color"),nameLength:v.castHoverOption(b,_,"namelength"),textAlign:v.castHoverOption(b,_,"align"),hovertemplate:u.castOption(b,_,"hovertemplate"),hovertemplateLabels:u.extendFlat({},L,T),eventData:[L]},{container:n,gd:t,inOut_bbox:I});L.bbox=I[0]}if(p.distance<5&&(p.buttons||w)){t.emit("plotly_click",C)}else{t.emit("plotly_hover",C)}this.oldEventData=C}else{v.loneUnhover(n);if(this.oldEventData)t.emit("plotly_unhover",this.oldEventData);this.oldEventData=undefined}e.drawAnnotations(e)};k.recoverContext=function(){var e=this;e.glplot.dispose();var t=function(){if(e.glplot.gl.isContextLost()){requestAnimationFrame(t);return}if(!e.initializeGLPlot()){u.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}e.plot.apply(e,e.plotArgs)};requestAnimationFrame(t)};var M=["xaxis","yaxis","zaxis"];function S(e,t,r){var n=e.fullSceneLayout;for(var a=0;a<3;a++){var i=M[a];var o=i.charAt(0);var s=n[i];var l=t[o];var f=t[o+"calendar"];var c=t["_"+o+"length"];if(!u.isArrayOrTypedArray(l)){r[0][a]=Math.min(r[0][a],0);r[1][a]=Math.max(r[1][a],c-1)}else{var v;for(var h=0;h<(c||l.length);h++){if(u.isArrayOrTypedArray(l[h])){for(var p=0;p<l[h].length;++p){v=s.d2l(l[h][p],0,f);if(!isNaN(v)&&isFinite(v)){r[0][a]=Math.min(r[0][a],v);r[1][a]=Math.max(r[1][a],v)}}}else{v=s.d2l(l[h],0,f);if(!isNaN(v)&&isFinite(v)){r[0][a]=Math.min(r[0][a],v);r[1][a]=Math.max(r[1][a],v)}}}}}}function E(e,t){var r=e.fullSceneLayout;var n=r.annotations||[];for(var a=0;a<3;a++){var i=M[a];var o=i.charAt(0);var s=r[i];for(var l=0;l<n.length;l++){var u=n[l];if(u.visible){var f=s.r2l(u[o]);if(!isNaN(f)&&isFinite(f)){t[0][a]=Math.min(t[0][a],f);t[1][a]=Math.max(t[1][a],f)}}}}}k.plot=function(e,t,r){var n=this;n.plotArgs=[e,t,r];if(n.glplot.contextLost)return;var a,i;var o,s,l,u;var f=t[n.id];var c=r[n.id];n.fullLayout=t;n.fullSceneLayout=f;n.axesOptions.merge(t,f);n.spikeOptions.merge(f);n.setViewport(f);n.updateFx(f.dragmode,f.hovermode);n.camera.enableWheel=n.graphDiv._context._scrollZoom.gl3d;n.glplot.setClearColor(h(f.bgcolor));n.setConvert(l);if(!e)e=[];else if(!Array.isArray(e))e=[e];var v=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(o=0;o<e.length;++o){a=e[o];if(a.visible!==true||a._length===0)continue;S(this,a,v)}E(this,v);var p=[1,1,1];for(s=0;s<3;++s){if(v[1][s]===v[0][s]){p[s]=1}else{p[s]=1/(v[1][s]-v[0][s])}}n.dataScale=p;n.convertAnnotations(this);for(o=0;o<e.length;++o){a=e[o];if(a.visible!==true||a._length===0){continue}i=n.traces[a.uid];if(i){if(i.data.type===a.type){i.update(a)}else{i.dispose();i=a._module.plot(this,a);n.traces[a.uid]=i}}else{i=a._module.plot(this,a);n.traces[a.uid]=i}i.name=a.name}var d=Object.keys(n.traces);e:for(o=0;o<d.length;++o){for(s=0;s<e.length;++s){if(e[s].uid===d[o]&&e[s].visible===true&&e[s]._length!==0){continue e}}i=n.traces[d[o]];i.dispose();delete n.traces[d[o]]}n.glplot.objects.sort((function(e,t){return e._trace.data.index-t._trace.data.index}));var g=[[0,0,0],[0,0,0]];var y=[];var m={};for(o=0;o<3;++o){l=f[M[o]];u=l.type;if(u in m){m[u].acc*=p[o];m[u].count+=1}else{m[u]={acc:p[o],count:1}}var b;if(l.autorange){g[0][o]=Infinity;g[1][o]=-Infinity;var _=n.glplot.objects;var w=n.fullSceneLayout.annotations||[];var T=l._name.charAt(0);for(s=0;s<_.length;s++){var k=_[s];var A=k.bounds;var L=k._trace.data._pad||0;if(k.constructor.name==="ErrorBars"&&l._lowerLogErrorBound){g[0][o]=Math.min(g[0][o],l._lowerLogErrorBound)}else{g[0][o]=Math.min(g[0][o],A[0][o]/p[o]-L)}g[1][o]=Math.max(g[1][o],A[1][o]/p[o]+L)}for(s=0;s<w.length;s++){var C=w[s];if(C.visible){var I=l.r2l(C[T]);g[0][o]=Math.min(g[0][o],I);g[1][o]=Math.max(g[1][o],I)}}if("rangemode"in l&&l.rangemode==="tozero"){g[0][o]=Math.min(g[0][o],0);g[1][o]=Math.max(g[1][o],0)}if(g[0][o]>g[1][o]){g[0][o]=-1;g[1][o]=1}else{var P=g[1][o]-g[0][o];g[0][o]-=P/32;g[1][o]+=P/32}b=[g[0][o],g[1][o]];b=x(b,l);g[0][o]=b[0];g[1][o]=b[1];if(l.isReversed()){var O=g[0][o];g[0][o]=g[1][o];g[1][o]=O}}else{b=l.range;g[0][o]=l.r2l(b[0]);g[1][o]=l.r2l(b[1])}if(g[0][o]===g[1][o]){g[0][o]-=1;g[1][o]+=1}y[o]=g[1][o]-g[0][o];l.range=[g[0][o],g[1][o]];l.limitRange();n.glplot.setBounds(o,{min:l.range[0]*p[o],max:l.range[1]*p[o]})}var D;var z=f.aspectmode;if(z==="cube"){D=[1,1,1]}else if(z==="manual"){var R=f.aspectratio;D=[R.x,R.y,R.z]}else if(z==="auto"||z==="data"){var F=[1,1,1];for(o=0;o<3;++o){l=f[M[o]];u=l.type;var B=m[u];F[o]=Math.pow(B.acc,1/B.count)/p[o]}if(z==="data"){D=F}else{if(Math.max.apply(null,F)/Math.min.apply(null,F)<=4){D=F}else{D=[1,1,1]}}}else{throw new Error("scene.js aspectRatio was not one of the enumerated types")}f.aspectratio.x=c.aspectratio.x=D[0];f.aspectratio.y=c.aspectratio.y=D[1];f.aspectratio.z=c.aspectratio.z=D[2];n.glplot.setAspectratio(f.aspectratio);if(!n.viewInitial.aspectratio){n.viewInitial.aspectratio={x:f.aspectratio.x,y:f.aspectratio.y,z:f.aspectratio.z}}if(!n.viewInitial.aspectmode){n.viewInitial.aspectmode=f.aspectmode}var N=f.domain||null;var j=t._size||null;if(N&&j){var U=n.container.style;U.position="absolute";U.left=j.l+N.x[0]*j.w+"px";U.top=j.t+(1-N.y[1])*j.h+"px";U.width=j.w*(N.x[1]-N.x[0])+"px";U.height=j.h*(N.y[1]-N.y[0])+"px"}n.glplot.redraw()};k.destroy=function(){var e=this;if(!e.glplot)return;e.camera.mouseListener.enabled=false;e.container.removeEventListener("wheel",e.camera.wheelListener);e.camera=null;e.glplot.dispose();e.container.parentNode.removeChild(e.container);e.glplot=null};function L(e){return[[e.eye.x,e.eye.y,e.eye.z],[e.center.x,e.center.y,e.center.z],[e.up.x,e.up.y,e.up.z]]}function C(e){return{up:{x:e.up[0],y:e.up[1],z:e.up[2]},center:{x:e.center[0],y:e.center[1],z:e.center[2]},eye:{x:e.eye[0],y:e.eye[1],z:e.eye[2]},projection:{type:e._ortho===true?"orthographic":"perspective"}}}k.getCamera=function(){var e=this;e.camera.view.recalcMatrix(e.camera.view.lastT());return C(e.camera)};k.setViewport=function(e){var t=this;var r=e.camera;t.camera.lookAt.apply(this,L(r));t.glplot.setAspectratio(e.aspectratio);var n=r.projection.type==="orthographic";var a=t.camera._ortho;if(n!==a){t.glplot.redraw();t.glplot.clearRGBA();t.glplot.dispose();t.initializeGLPlot()}};k.isCameraChanged=function(e){var t=this;var r=t.getCamera();var n=u.nestedProperty(e,t.id+".camera");var a=n.get();function i(e,t,r,n){var a=["up","center","eye"];var i=["x","y","z"];return t[a[r]]&&e[a[r]][i[n]]===t[a[r]][i[n]]}var o=false;if(a===undefined){o=true}else{for(var s=0;s<3;s++){for(var l=0;l<3;l++){if(!i(r,a,s,l)){o=true;break}}}if(!a.projection||r.projection&&r.projection.type!==a.projection.type){o=true}}return o};k.isAspectChanged=function(e){var t=this;var r=t.glplot.getAspectratio();var n=u.nestedProperty(e,t.id+".aspectratio");var a=n.get();return a===undefined||a.x!==r.x||a.y!==r.y||a.z!==r.z};k.saveLayout=function(e){var t=this;var r=t.fullLayout;var n;var a;var i;var o;var s;var f;var c=t.isCameraChanged(e);var v=t.isAspectChanged(e);var h=c||v;if(h){var p={};if(c){n=t.getCamera();a=u.nestedProperty(e,t.id+".camera");i=a.get();p[t.id+".camera"]=i}if(v){o=t.glplot.getAspectratio();s=u.nestedProperty(e,t.id+".aspectratio");f=s.get();p[t.id+".aspectratio"]=f}l.call("_storeDirectGUIEdit",e,r._preGUI,p);if(c){a.set(n);var d=u.nestedProperty(r,t.id+".camera");d.set(n)}if(v){s.set(o);var g=u.nestedProperty(r,t.id+".aspectratio");g.set(o);t.glplot.redraw()}}return h};k.updateFx=function(e,t){var r=this;var n=r.camera;if(n){if(e==="orbit"){n.mode="orbit";n.keyBindingMode="rotate"}else if(e==="turntable"){n.up=[0,0,1];n.mode="turntable";n.keyBindingMode="rotate";var a=r.graphDiv;var i=a._fullLayout;var o=r.fullSceneLayout.camera;var s=o.up.x;var f=o.up.y;var c=o.up.z;if(c/Math.sqrt(s*s+f*f+c*c)<.999){var v=r.id+".camera.up";var h={x:0,y:0,z:1};var p={};p[v]=h;var d=a.layout;l.call("_storeDirectGUIEdit",d,i._preGUI,p);o.up=h;u.nestedProperty(d,v).set(h)}}else{n.keyBindingMode=e}}r.fullSceneLayout.hovermode=t};function I(e,t,r){for(var n=0,a=r-1;n<a;++n,--a){for(var i=0;i<t;++i){for(var o=0;o<4;++o){var s=4*(t*n+i)+o;var l=4*(t*a+i)+o;var u=e[s];e[s]=e[l];e[l]=u}}}}function P(e,t,r){for(var n=0;n<r;++n){for(var a=0;a<t;++a){var i=4*(t*n+a);var o=e[i+3];if(o>0){var s=255/o;for(var l=0;l<3;++l){e[i+l]=Math.min(s*e[i+l],255)}}}}}k.toImage=function(e){var t=this;if(!e)e="png";if(t.staticMode)t.container.appendChild(b);t.glplot.redraw();var r=t.glplot.gl;var n=r.drawingBufferWidth;var a=r.drawingBufferHeight;r.bindFramebuffer(r.FRAMEBUFFER,null);var i=new Uint8Array(n*a*4);r.readPixels(0,0,n,a,r.RGBA,r.UNSIGNED_BYTE,i);I(i,n,a);P(i,n,a);var o=document.createElement("canvas");o.width=n;o.height=a;var s=o.getContext("2d",{willReadFrequently:true});var l=s.createImageData(n,a);l.data.set(i);s.putImageData(l,0,0);var u;switch(e){case"jpeg":u=o.toDataURL("image/jpeg");break;case"webp":u=o.toDataURL("image/webp");break;default:u=o.toDataURL("image/png")}if(t.staticMode)t.container.removeChild(b);return u};k.setConvert=function(){var e=this;for(var t=0;t<3;t++){var r=e.fullSceneLayout[M[t]];c.setConvert(r,e.fullLayout);r.setScale=u.noop}};k.make4thDimension=function(){var e=this;var t=e.graphDiv;var r=t._fullLayout;e._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};c.setConvert(e._mockAxis,r)};e.exports=T},90060:function(e){"use strict";e.exports=function e(t,r,n,a){a=a||t.length;var i=new Array(a);for(var o=0;o<a;o++){i[o]=[t[o],r[o],n[o]]}return i}},10820:function(e,t,r){"use strict";var n=r(41940);var a=r(85594);var i=r(22399);var o=r(29241);var s=r(53777);var l=r(35025);var u=r(1426).extendFlat;var f=n({editType:"calc"});f.family.dflt='"Open Sans", verdana, arial, sans-serif';f.size.dflt=12;f.color.dflt=i.defaultLine;e.exports={font:f,title:{text:{valType:"string",editType:"layoutstyle"},font:n({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:u(l({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:false,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[false,"hide","show"],dflt:false,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:false,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:true,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:i.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:i.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:false,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:i.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:o.newshape,activeshape:o.activeshape,newselection:s.newselection,activeselection:s.activeselection,meta:{valType:"any",arrayOk:true,editType:"plot"},transition:u({},a.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:n({editType:"layoutstyle"})}}},77734:function(e,t,r){"use strict";var n=r(78607);var a="1.10.1";var i=' <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors';var o=[' <a target="_blank" href="https://carto.com/">Carto</a>',i].join(" ");var s=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" ");var l=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" ");var u={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:i,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:o,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:o,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:s,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:s,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:l,tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}};var f=n(u);e.exports={requiredVersion:a,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:u,styleValuesNonMapbox:f,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+a+"."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",f.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multiple"+"access tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},13056:function(e,t,r){"use strict";var n=r(71828);e.exports=function e(t,r){var a=t.split(" ");var i=a[0];var o=a[1];var s=n.isArrayOrTypedArray(r)?n.mean(r):r;var l=.5+s/100;var u=1.5+s/100;var f=["",""];var c=[0,0];switch(i){case"top":f[0]="top";c[1]=-u;break;case"bottom":f[0]="bottom";c[1]=u;break}switch(o){case"left":f[1]="right";c[0]=-l;break;case"right":f[1]="left";c[0]=l;break}var v;if(f[0]&&f[1])v=f.join("-");else if(f[0])v=f[0];else if(f[1])v=f[1];else v="center";return{anchor:v,offset:c}}},50101:function(e,t,r){"use strict";var n=r(44517);var a=r(71828);var i=a.strTranslate;var o=a.strScale;var s=r(27659).AU;var l=r(77922);var u=r(39898);var f=r(91424);var c=r(63893);var v=r(10481);var h="mapbox";var p=t.constants=r(77734);t.name=h;t.attr="subplot";t.idRoot=h;t.idRegex=t.attrRegex=a.counterRegex(h);t.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}};t.layoutAttributes=r(23585);t.supplyLayoutDefaults=r(77882);t.plot=function e(t){var r=t._fullLayout;var i=t.calcdata;var o=r._subplots[h];if(n.version!==p.requiredVersion){throw new Error(p.wrongVersionErrorMsg)}var l=d(t,o);n.accessToken=l;for(var u=0;u<o.length;u++){var f=o[u];var c=s(i,h,f);var g=r[f];var y=g._subplot;if(!y){y=new v(t,f);r[f]._subplot=y}if(!y.viewInitial){y.viewInitial={center:a.extendFlat({},g.center),zoom:g.zoom,bearing:g.bearing,pitch:g.pitch}}y.plot(c,r,t._promises)}};t.clean=function(e,t,r,n){var a=n._subplots[h]||[];for(var i=0;i<a.length;i++){var o=a[i];if(!t[o]&&!!n[o]._subplot){n[o]._subplot.destroy()}}};t.toSVG=function(e){var t=e._fullLayout;var r=t._subplots[h];var n=t._size;for(var a=0;a<r.length;a++){var s=t[r[a]];var v=s.domain;var d=s._subplot;var g=d.toImage("png");var y=t._glimages.append("svg:image");y.attr({xmlns:l.svg,"xlink:href":g,x:n.l+n.w*v.x[0],y:n.t+n.h*(1-v.y[1]),width:n.w*(v.x[1]-v.x[0]),height:n.h*(v.y[1]-v.y[0]),preserveAspectRatio:"none"});var m=u.select(s._subplot.div);var x=m.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!x){var b=t._glimages.append("g");b.attr("transform",i(n.l+n.w*v.x[0]+10,n.t+n.h*(1-v.y[0])-31));b.append("path").attr("d",p.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"});b.append("path").attr("d",p.mapboxLogo.path1).style("opacity",.35).style("enable-background","new");b.append("path").attr("d",p.mapboxLogo.path2).style("opacity",.35).style("enable-background","new");b.append("polygon").attr("points",p.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var _=m.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map","");var w=t._glimages.append("g");var T=w.append("text");T.text(_).classed("static-attribution",true).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":_});var k=f.bBox(T.node());var A=n.w*(v.x[1]-v.x[0]);if(k.width>A/2){var M=_.split("|").join("<br>");T.text(M).attr("data-unformatted",M).call(c.convertToTspans,e);k=f.bBox(T.node())}T.attr("transform",i(-3,-k.height+8));w.insert("rect",".static-attribution").attr({x:-k.width-6,y:-k.height-3,width:k.width+6,height:k.height+3,fill:"rgba(255, 255, 255, 0.75)"});var S=1;if(k.width+6>A)S=A/(k.width+6);var E=[n.l+n.w*v.x[1],n.t+n.h*(1-v.y[0])];w.attr("transform",i(E[0],E[1])+o(S))}};function d(e,t){var r=e._fullLayout;var n=e._context;if(n.mapboxAccessToken==="")return"";var i=[];var o=[];var s=false;var l=false;for(var u=0;u<t.length;u++){var f=r[t[u]];var c=f.accesstoken;if(g(f.style)){if(c){a.pushUnique(i,c)}else{if(g(f._input.style)){a.error("Uses Mapbox map style, but did not set an access token.");s=true}l=true}}if(c){a.pushUnique(o,c)}}if(l){var v=s?p.noAccessTokenErrorMsg:p.missingStyleErrorMsg;a.error(v);throw new Error(v)}if(i.length){if(i.length>1){a.warn(p.multipleTokensErrorMsg)}return i[0]}else{if(o.length){a.log(["Listed mapbox access token(s)",o.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" "))}return""}}function g(e){return typeof e==="string"&&(p.styleValuesMapbox.indexOf(e)!==-1||e.indexOf("mapbox://")===0||e.indexOf("stamen")===0)}t.updateFx=function(e){var t=e._fullLayout;var r=t._subplots[h];for(var n=0;n<r.length;n++){var a=t[r[n]]._subplot;a.updateFx(t)}}},67911:function(e,t,r){"use strict";var n=r(71828);var a=r(63893).sanitizeHTML;var i=r(13056);var o=r(77734);function s(e,t){this.subplot=e;this.uid=e.uid+"-"+t;this.index=t;this.idSource="source-"+this.uid;this.idLayer=o.layoutLayerPrefix+this.uid;this.sourceType=null;this.source=null;this.layerType=null;this.below=null;this.visible=false}var l=s.prototype;l.update=function e(t){if(!this.visible){this.updateSource(t);this.updateLayer(t)}else if(this.needsNewImage(t)){this.updateImage(t)}else if(this.needsNewSource(t)){this.removeLayer();this.updateSource(t);this.updateLayer(t)}else if(this.needsNewLayer(t)){this.updateLayer(t)}else{this.updateStyle(t)}this.visible=u(t)};l.needsNewImage=function(e){var t=this.subplot.map;return t.getSource(this.idSource)&&this.sourceType==="image"&&e.sourcetype==="image"&&(this.source!==e.source||JSON.stringify(this.coordinates)!==JSON.stringify(e.coordinates))};l.needsNewSource=function(e){return this.sourceType!==e.sourcetype||JSON.stringify(this.source)!==JSON.stringify(e.source)||this.layerType!==e.type};l.needsNewLayer=function(e){return this.layerType!==e.type||this.below!==this.subplot.belowLookup["layout-"+this.index]};l.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]};l.updateImage=function(e){var t=this.subplot.map;t.getSource(this.idSource).updateImage({url:e.source,coordinates:e.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());if(r!==null){this.subplot.map.moveLayer(this.idLayer,r)}};l.updateSource=function(e){var t=this.subplot.map;if(t.getSource(this.idSource))t.removeSource(this.idSource);this.sourceType=e.sourcetype;this.source=e.source;if(!u(e))return;var r=c(e);t.addSource(this.idSource,r)};l.findFollowingMapboxLayerId=function(e){if(e==="traces"){var t=this.subplot.getMapLayers();for(var r=0;r<t.length;r++){var n=t[r].id;if(typeof n==="string"&&n.indexOf(o.traceLayerPrefix)===0){e=n;break}}}return e};l.updateLayer=function(e){var t=this.subplot;var r=f(e);var n=this.lookupBelow();var a=this.findFollowingMapboxLayerId(n);this.removeLayer();if(u(e)){t.addLayer({id:this.idLayer,source:this.idSource,"source-layer":e.sourcelayer||"",type:e.type,minzoom:e.minzoom,maxzoom:e.maxzoom,layout:r.layout,paint:r.paint},a)}this.layerType=e.type;this.below=n};l.updateStyle=function(e){if(u(e)){var t=f(e);this.subplot.setOptions(this.idLayer,"setLayoutProperty",t.layout);this.subplot.setOptions(this.idLayer,"setPaintProperty",t.paint)}};l.removeLayer=function(){var e=this.subplot.map;if(e.getLayer(this.idLayer)){e.removeLayer(this.idLayer)}};l.dispose=function(){var e=this.subplot.map;if(e.getLayer(this.idLayer))e.removeLayer(this.idLayer);if(e.getSource(this.idSource))e.removeSource(this.idSource)};function u(e){if(!e.visible)return false;var t=e.source;if(Array.isArray(t)&&t.length>0){for(var r=0;r<t.length;r++){if(typeof t[r]!=="string"||t[r].length===0){return false}}return true}return n.isPlainObject(t)||typeof t==="string"&&t.length>0}function f(e){var t={};var r={};switch(e.type){case"circle":n.extendFlat(r,{"circle-radius":e.circle.radius,"circle-color":e.color,"circle-opacity":e.opacity});break;case"line":n.extendFlat(r,{"line-width":e.line.width,"line-color":e.color,"line-opacity":e.opacity,"line-dasharray":e.line.dash});break;case"fill":n.extendFlat(r,{"fill-color":e.color,"fill-outline-color":e.fill.outlinecolor,"fill-opacity":e.opacity});break;case"symbol":var a=e.symbol;var o=i(a.textposition,a.iconsize);n.extendFlat(t,{"icon-image":a.icon+"-15","icon-size":a.iconsize/10,"text-field":a.text,"text-size":a.textfont.size,"text-anchor":o.anchor,"text-offset":o.offset,"symbol-placement":a.placement});n.extendFlat(r,{"icon-color":e.color,"text-color":a.textfont.color,"text-opacity":e.opacity});break;case"raster":n.extendFlat(r,{"raster-fade-duration":0,"raster-opacity":e.opacity});break}return{layout:t,paint:r}}function c(e){var t=e.sourcetype;var r=e.source;var n={type:t};var i;if(t==="geojson"){i="data"}else if(t==="vector"){i=typeof r==="string"?"url":"tiles"}else if(t==="raster"){i="tiles";n.tileSize=256}else if(t==="image"){i="url";n.coordinates=e.coordinates}n[i]=r;if(e.sourceattribution){n.attribution=a(e.sourceattribution)}return n}e.exports=function e(t,r,n){var a=new s(t,r);a.update(n);return a}},23585:function(e,t,r){"use strict";var n=r(71828);var a=r(7901).defaultLine;var i=r(27670).Y;var o=r(41940);var s=r(82196).textposition;var l=r(30962).overrideAll;var u=r(44467).templatedArray;var f=r(77734);var c=o({});c.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var v=e.exports=l({_arrayAttrRegexps:[n.counterRegex("mapbox",".layers",true)],domain:i({name:"mapbox"}),accesstoken:{valType:"string",noBlank:true,strict:true},style:{valType:"any",values:f.styleValuesMapbox.concat(f.styleValuesNonMapbox),dflt:f.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:u("layer",{visible:{valType:"boolean",dflt:true},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:a},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:a}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:c,textposition:n.extendFlat({},s,{arrayOk:false})}})},"plot","from-root");v.uirevision={valType:"any",editType:"none"}},77882:function(e,t,r){"use strict";var n=r(71828);var a=r(49119);var i=r(85501);var o=r(23585);e.exports=function e(t,r,n){a(t,r,n,{type:"mapbox",attributes:o,handleDefaults:s,partition:"y",accessToken:r._mapboxAccessToken})};function s(e,t,r,n){r("accesstoken",n.accessToken);r("style");r("center.lon");r("center.lat");r("zoom");r("bearing");r("pitch");var a=r("bounds.west");var o=r("bounds.east");var s=r("bounds.south");var u=r("bounds.north");if(a===undefined||o===undefined||s===undefined||u===undefined){delete t.bounds}i(e,t,{name:"layers",handleItemDefaults:l});t._input=e}function l(e,t){function r(r,a){return n.coerce(e,t,o.layers,r,a)}var a=r("visible");if(a){var i=r("sourcetype");var s=i==="raster"||i==="image";r("source");r("sourceattribution");if(i==="vector"){r("sourcelayer")}if(i==="image"){r("coordinates")}var l;if(s)l="raster";var u=r("type",l);if(s&&u!=="raster"){u=t.type="raster";n.log("Source types *raster* and *image* must drawn *raster* layer type.")}r("below");r("color");r("opacity");r("minzoom");r("maxzoom");if(u==="circle"){r("circle.radius")}if(u==="line"){r("line.width");r("line.dash")}if(u==="fill"){r("fill.outlinecolor")}if(u==="symbol"){r("symbol.icon");r("symbol.iconsize");r("symbol.text");n.coerceFont(r,"symbol.textfont");r("symbol.textposition");r("symbol.placement")}}}},10481:function(e,t,r){"use strict";var n=r(44517);var a=r(71828);var i=r(41327);var o=r(73972);var s=r(89298);var l=r(28569);var u=r(30211);var f=r(64505);var c=f.drawMode;var v=f.selectMode;var h=r(47322).prepSelect;var p=r(47322).clearOutline;var d=r(47322).clearSelectionsCache;var g=r(47322).selectOnClick;var y=r(77734);var m=r(67911);function x(e,t){this.id=t;this.gd=e;var r=e._fullLayout;var n=e._context;this.container=r._glcontainer.node();this.isStatic=n.staticPlot;this.uid=r._uid+"-"+this.id;this.div=null;this.xaxis=null;this.yaxis=null;this.createFramework(r);this.map=null;this.accessToken=null;this.styleObj=null;this.traceHash={};this.layerList=[];this.belowLookup={};this.dragging=false;this.wheeling=false}var b=x.prototype;b.plot=function(e,t,r){var n=this;var a=t[n.id];if(n.map&&a.accesstoken!==n.accessToken){n.map.remove();n.map=null;n.styleObj=null;n.traceHash={};n.layerList=[]}var i;if(!n.map){i=new Promise((function(r,a){n.createMap(e,t,r,a)}))}else{i=new Promise((function(r,a){n.updateMap(e,t,r,a)}))}r.push(i)};b.createMap=function(e,t,r,a){var o=this;var s=t[o.id];var l=o.styleObj=w(s.style,t);o.accessToken=s.accesstoken;var u=s.bounds;var f=u?[[u.west,u.south],[u.east,u.north]]:null;var c=o.map=new n.Map({container:o.div,style:l.style,center:k(s.center),zoom:s.zoom,bearing:s.bearing,pitch:s.pitch,maxBounds:f,interactive:!o.isStatic,preserveDrawingBuffer:o.isStatic,doubleClickZoom:false,boxZoom:false,attributionControl:false}).addControl(new n.AttributionControl({compact:true}));c._canvas.style.left="0px";c._canvas.style.top="0px";o.rejectOnError(a);if(!o.isStatic){o.initFx(e,t)}var v=[];v.push(new Promise((function(e){c.once("load",e)})));v=v.concat(i.fetchTraceGeoData(e));Promise.all(v).then((function(){o.fillBelowLookup(e,t);o.updateData(e);o.updateLayout(t);o.resolveOnRender(r)})).catch(a)};b.updateMap=function(e,t,r,n){var a=this;var o=a.map;var s=t[this.id];a.rejectOnError(n);var l=[];var u=w(s.style,t);if(JSON.stringify(a.styleObj)!==JSON.stringify(u)){a.styleObj=u;o.setStyle(u.style);a.traceHash={};l.push(new Promise((function(e){o.once("styledata",e)})))}l=l.concat(i.fetchTraceGeoData(e));Promise.all(l).then((function(){a.fillBelowLookup(e,t);a.updateData(e);a.updateLayout(t);a.resolveOnRender(r)})).catch(n)};b.fillBelowLookup=function(e,t){var r=t[this.id];var n=r.layers;var a,i;var o=this.belowLookup={};var s=false;for(a=0;a<e.length;a++){var l=e[a][0].trace;var u=l._module;if(typeof l.below==="string"){i=l.below}else if(u.getBelow){i=u.getBelow(l,this)}if(i===""){s=true}o["trace-"+l.uid]=i||""}for(a=0;a<n.length;a++){var f=n[a];if(typeof f.below==="string"){i=f.below}else if(s){i="traces"}else{i=""}o["layout-"+a]=i}var c={};var v,h;for(v in o){i=o[v];if(c[i]){c[i].push(v)}else{c[i]=[v]}}for(i in c){var p=c[i];if(p.length>1){for(a=0;a<p.length;a++){v=p[a];if(v.indexOf("trace-")===0){h=v.split("trace-")[1];if(this.traceHash[h]){this.traceHash[h].below=null}}else if(v.indexOf("layout-")===0){h=v.split("layout-")[1];if(this.layerList[h]){this.layerList[h].below=null}}}}}};var _={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};b.updateData=function(e){var t=this.traceHash;var r,n,a,i;var o=e.slice().sort((function(e,t){return _[e[0].trace.type]-_[t[0].trace.type]}));for(a=0;a<o.length;a++){var s=o[a];n=s[0].trace;r=t[n.uid];var l=false;if(r){if(r.type===n.type){r.update(s);l=true}else{r.dispose()}}if(!l&&n._module){t[n.uid]=n._module.plot(this,s)}}var u=Object.keys(t);e:for(a=0;a<u.length;a++){var f=u[a];for(i=0;i<e.length;i++){n=e[i][0].trace;if(f===n.uid)continue e}r=t[f];r.dispose();delete t[f]}};b.updateLayout=function(e){var t=this.map;var r=e[this.id];if(!this.dragging&&!this.wheeling){t.setCenter(k(r.center));t.setZoom(r.zoom);t.setBearing(r.bearing);t.setPitch(r.pitch)}this.updateLayers(e);this.updateFramework(e);this.updateFx(e);this.map.resize();if(this.gd._context._scrollZoom.mapbox){t.scrollZoom.enable()}else{t.scrollZoom.disable()}};b.resolveOnRender=function(e){var t=this.map;t.on("render",(function r(){if(t.loaded()){t.off("render",r);setTimeout(e,10)}}))};b.rejectOnError=function(e){var t=this.map;function r(){e(new Error(y.mapOnErrorMsg))}t.once("error",r);t.once("style.error",r);t.once("source.error",r);t.once("tile.error",r);t.once("layer.error",r)};b.createFramework=function(e){var t=this;var r=t.div=document.createElement("div");r.id=t.uid;r.style.position="absolute";t.container.appendChild(r);t.xaxis={_id:"x",c2p:function(e){return t.project(e).x}};t.yaxis={_id:"y",c2p:function(e){return t.project(e).y}};t.updateFramework(e);t.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};s.setConvert(t.mockAxis,e)};b.initFx=function(e,t){var r=this;var n=r.gd;var a=r.map;a.on("moveend",(function(e){if(!r.map)return;var t=n._fullLayout;if(e.originalEvent||r.wheeling){var a=t[r.id];o.call("_storeDirectGUIEdit",n.layout,t._preGUI,r.getViewEdits(a));var i=r.getView();a._input.center=a.center=i.center;a._input.zoom=a.zoom=i.zoom;a._input.bearing=a.bearing=i.bearing;a._input.pitch=a.pitch=i.pitch;n.emit("plotly_relayout",r.getViewEditsWithDerived(i))}if(e.originalEvent&&e.originalEvent.type==="mouseup"){r.dragging=false}else if(r.wheeling){r.wheeling=false}if(t._rehover){t._rehover()}}));a.on("wheel",(function(){r.wheeling=true}));a.on("mousemove",(function(e){var t=r.div.getBoundingClientRect();var i=[e.originalEvent.offsetX,e.originalEvent.offsetY];e.target.getBoundingClientRect=function(){return t};r.xaxis.p2c=function(){return a.unproject(i).lng};r.yaxis.p2c=function(){return a.unproject(i).lat};n._fullLayout._rehover=function(){if(n._fullLayout._hoversubplot===r.id&&n._fullLayout[r.id]){u.hover(n,e,r.id)}};u.hover(n,e,r.id);n._fullLayout._hoversubplot=r.id}));function i(){u.loneUnhover(t._hoverlayer)}a.on("dragstart",(function(){r.dragging=true;i()}));a.on("zoomstart",i);a.on("mouseout",(function(){n._fullLayout._hoversubplot=null}));function s(){var e=r.getView();n.emit("plotly_relayouting",r.getViewEditsWithDerived(e))}a.on("drag",s);a.on("zoom",s);a.on("dblclick",(function(){var e=n._fullLayout[r.id];o.call("_storeDirectGUIEdit",n.layout,n._fullLayout._preGUI,r.getViewEdits(e));var t=r.viewInitial;a.setCenter(k(t.center));a.setZoom(t.zoom);a.setBearing(t.bearing);a.setPitch(t.pitch);var i=r.getView();e._input.center=e.center=i.center;e._input.zoom=e.zoom=i.zoom;e._input.bearing=e.bearing=i.bearing;e._input.pitch=e.pitch=i.pitch;n.emit("plotly_doubleclick",null);n.emit("plotly_relayout",r.getViewEditsWithDerived(i))}));r.clearOutline=function(){d(r.dragOptions);p(r.dragOptions.gd)};r.onClickInPanFn=function(e){return function(t){var a=n._fullLayout.clickmode;if(a.indexOf("select")>-1){g(t.originalEvent,n,[r.xaxis],[r.yaxis],r.id,e)}if(a.indexOf("event")>-1){u.click(n,t.originalEvent)}}}};b.updateFx=function(e){var t=this;var r=t.map;var n=t.gd;if(t.isStatic)return;function i(e){var r=t.map.unproject(e);return[r.lng,r.lat]}var o=e.dragmode;var s;s=function(e,r){if(r.isRect){var n=e.range={};n[t.id]=[i([r.xmin,r.ymin]),i([r.xmax,r.ymax])]}else{var a=e.lassoPoints={};a[t.id]=r.map(i)}};var u=t.dragOptions;t.dragOptions=a.extendDeep(u||{},{dragmode:e.dragmode,element:t.div,gd:n,plotinfo:{id:t.id,domain:e[t.id].domain,xaxis:t.xaxis,yaxis:t.yaxis,fillRangeItems:s},xaxes:[t.xaxis],yaxes:[t.yaxis],subplot:t.id});r.off("click",t.onClickInPanHandler);if(v(o)||c(o)){r.dragPan.disable();r.on("zoomstart",t.clearOutline);t.dragOptions.prepFn=function(e,r,n){h(e,r,n,t.dragOptions,o)};l.init(t.dragOptions)}else{r.dragPan.enable();r.off("zoomstart",t.clearOutline);t.div.onmousedown=null;t.div.ontouchstart=null;t.div.removeEventListener("touchstart",t.div._ontouchstart);t.onClickInPanHandler=t.onClickInPanFn(t.dragOptions);r.on("click",t.onClickInPanHandler)}};b.updateFramework=function(e){var t=e[this.id].domain;var r=e._size;var n=this.div.style;n.width=r.w*(t.x[1]-t.x[0])+"px";n.height=r.h*(t.y[1]-t.y[0])+"px";n.left=r.l+t.x[0]*r.w+"px";n.top=r.t+(1-t.y[1])*r.h+"px";this.xaxis._offset=r.l+t.x[0]*r.w;this.xaxis._length=r.w*(t.x[1]-t.x[0]);this.yaxis._offset=r.t+(1-t.y[1])*r.h;this.yaxis._length=r.h*(t.y[1]-t.y[0])};b.updateLayers=function(e){var t=e[this.id];var r=t.layers;var n=this.layerList;var a;if(r.length!==n.length){for(a=0;a<n.length;a++){n[a].dispose()}n=this.layerList=[];for(a=0;a<r.length;a++){n.push(m(this,a,r[a]))}}else{for(a=0;a<r.length;a++){n[a].update(r[a])}}};b.destroy=function(){if(this.map){this.map.remove();this.map=null;this.container.removeChild(this.div)}};b.toImage=function(){this.map.stop();return this.map.getCanvas().toDataURL()};b.setOptions=function(e,t,r){for(var n in r){this.map[t](e,n,r[n])}};b.getMapLayers=function(){return this.map.getStyle().layers};b.addLayer=function(e,t){var r=this.map;if(typeof t==="string"){if(t===""){r.addLayer(e,t);return}var n=this.getMapLayers();for(var i=0;i<n.length;i++){if(t===n[i].id){r.addLayer(e,t);return}}a.warn(["Trying to add layer with *below* value",t,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}r.addLayer(e)};b.project=function(e){return this.map.project(new n.LngLat(e[0],e[1]))};b.getView=function(){var e=this.map;var t=e.getCenter();var r=t.lng;var n=t.lat;var a={lon:r,lat:n};var i=e.getCanvas();var o=parseInt(i.style.width);var s=parseInt(i.style.height);return{center:a,zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch(),_derived:{coordinates:[e.unproject([0,0]).toArray(),e.unproject([o,0]).toArray(),e.unproject([o,s]).toArray(),e.unproject([0,s]).toArray()]}}};b.getViewEdits=function(e){var t=this.id;var r=["center","zoom","bearing","pitch"];var n={};for(var a=0;a<r.length;a++){var i=r[a];n[t+"."+i]=e[i]}return n};b.getViewEditsWithDerived=function(e){var t=this.id;var r=this.getViewEdits(e);r[t+"._derived"]=e._derived;return r};function w(e,t){var r={};if(a.isPlainObject(e)){r.id=e.id;r.style=e}else if(typeof e==="string"){r.id=e;if(y.styleValuesMapbox.indexOf(e)!==-1){r.style=T(e)}else if(y.stylesNonMapbox[e]){r.style=y.stylesNonMapbox[e];var n=r.style.sources["plotly-"+e];var i=n?n.tiles:undefined;if(i&&i[0]&&i[0].slice(-9)==="?api_key="){i[0]+=t._mapboxAccessToken}}else{r.style=e}}else{r.id=y.styleValueDflt;r.style=T(y.styleValueDflt)}r.transition={duration:0,delay:0};return r}function T(e){return y.styleUrlPrefix+e+"-"+y.styleUrlSuffix}function k(e){return[e.lon,e.lat]}e.exports=x},35025:function(e){"use strict";e.exports=function(e){var t=e.editType;return{t:{valType:"number",dflt:0,editType:t},r:{valType:"number",dflt:0,editType:t},b:{valType:"number",dflt:0,editType:t},l:{valType:"number",dflt:0,editType:t},editType:t}}},74875:function(e,t,r){"use strict";var n=r(39898);var a=r(84096).Dq;var i=r(60721).FF;var o=r(92770);var s=r(73972);var l=r(86281);var u=r(44467);var f=r(71828);var c=r(7901);var v=r(50606).BADNUM;var h=r(41675);var p=r(51873).clearOutline;var d=r(21479);var g=r(85594);var y=r(31391);var m=r(27659).a0;var x=f.relinkPrivateKeys;var b=f._;var _=e.exports={};f.extendFlat(_,s);_.attributes=r(9012);_.attributes.type.values=_.allTypes;_.fontAttrs=r(41940);_.layoutAttributes=r(10820);_.fontWeight="normal";var w=_.transformsRegistry;var T=r(31137);_.executeAPICommand=T.executeAPICommand;_.computeAPICommandBindings=T.computeAPICommandBindings;_.manageCommandObserver=T.manageCommandObserver;_.hasSimpleAPICommandBindings=T.hasSimpleAPICommandBindings;_.redrawText=function(e){e=f.getGraphDiv(e);return new Promise((function(t){setTimeout((function(){if(!e._fullLayout)return;s.getComponentMethod("annotations","draw")(e);s.getComponentMethod("legend","draw")(e);s.getComponentMethod("colorbar","draw")(e);t(_.previousPromises(e))}),300)}))};_.resize=function(e){e=f.getGraphDiv(e);var t;var r=new Promise((function(r,n){if(!e||f.isHidden(e)){n(new Error("Resize must be passed a displayed plot div element."))}if(e._redrawTimer)clearTimeout(e._redrawTimer);if(e._resolveResize)t=e._resolveResize;e._resolveResize=r;e._redrawTimer=setTimeout((function(){if(!e.layout||e.layout.width&&e.layout.height||f.isHidden(e)){r(e);return}delete e.layout.width;delete e.layout.height;var t=e.changed;e.autoplay=true;s.call("relayout",e,{autosize:true}).then((function(){e.changed=t;if(e._resolveResize===r){delete e._resolveResize;r(e)}}))}),100)}));if(t)t(r);return r};_.previousPromises=function(e){if((e._promises||[]).length){return Promise.all(e._promises).then((function(){e._promises=[]}))}};_.addLinks=function(e){if(!e._context.showLink&&!e._context.showSources)return;var t=e._fullLayout;var r=f.ensureSingle(t._paper,"text","js-plot-link-container",(function(e){e.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:c.defaultLine,"pointer-events":"all"}).each((function(){var e=n.select(this);e.append("tspan").classed("js-link-to-tool",true);e.append("tspan").classed("js-link-spacer",true);e.append("tspan").classed("js-sourcelinks",true)}))}));var a=r.node();var i={y:t._paper.attr("height")-9};if(document.body.contains(a)&&a.getComputedTextLength()>=t.width-20){i["text-anchor"]="start";i.x=5}else{i["text-anchor"]="end";i.x=t._paper.attr("width")-7}r.attr(i);var o=r.select(".js-link-to-tool");var s=r.select(".js-link-spacer");var l=r.select(".js-sourcelinks");if(e._context.showSources)e._context.showSources(e);if(e._context.showLink)k(e,o);s.text(o.text()&&l.text()?" - ":"")};function k(e,t){t.text("");var r=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));if(e._context.sendData){r.on("click",(function(){_.sendDataToCloud(e)}))}else{var n=window.location.pathname.split("/");var a=window.location.search;r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+n[2].split(".")[0]+"/"+n[1]+a})}}_.sendDataToCloud=function(e){var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(!t)return;e.emit("plotly_beforeexport");var r=n.select(e).append("div").attr("id","hiddenform").style("display","none");var a=r.append("form").attr({action:t+"/external",method:"post",target:"_blank"});var i=a.append("input").attr({type:"text",name:"data"});i.node().value=_.graphJson(e,false,"keepdata");a.node().submit();r.remove();e.emit("plotly_afterexport");return false};var A=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"];var M=["year","month","dayMonth","dayMonthYear"];_.supplyDefaults=function(e,t){var r=t&&t.skipUpdateCalc;var n=e._fullLayout||{};if(n._skipDefaults){delete n._skipDefaults;return}var a=e._fullLayout={};var i=e.layout||{};var o=e._fullData||[];var l=e._fullData=[];var u=e.data||[];var c=e.calcdata||[];var v=e._context||{};var h;if(!e._transitionData)_.createTransitionData(e);a._dfltTitle={plot:b(e,"Click to enter Plot title"),x:b(e,"Click to enter X axis title"),y:b(e,"Click to enter Y axis title"),colorbar:b(e,"Click to enter Colorscale title"),annotation:b(e,"new text")};a._traceWord=b(e,"trace");var d=L(e,A);a._mapboxAccessToken=v.mapboxAccessToken;if(n._initialAutoSizeIsDone){var g=n.width;var y=n.height;_.supplyLayoutGlobalDefaults(i,a,d);if(!i.width)a.width=g;if(!i.height)a.height=y;_.sanitizeMargins(a)}else{_.supplyLayoutGlobalDefaults(i,a,d);var m=!i.width||!i.height;var w=a.autosize;var T=v.autosizable;var k=m&&(w||T);if(k)_.plotAutoSize(e,i,a);else if(m)_.sanitizeMargins(a);if(!w&&m){i.width=a.width;i.height=a.height}}a._d3locale=C(d,a.separators);a._extraFormat=L(e,M);a._initialAutoSizeIsDone=true;a._dataLength=u.length;a._modules=[];a._visibleModules=[];a._basePlotModules=[];var P=a._subplots=E();var O=a._splomAxes={x:{},y:{}};var D=a._splomSubplots={};a._splomGridDflt={};a._scatterStackOpts={};a._firstScatter={};a._alignmentOpts={};a._colorAxes={};a._requestRangeslider={};a._traceUids=S(o,u);a._globalTransforms=(e._context||{}).globalTransforms;_.supplyDataDefaults(u,l,i,a);var z=Object.keys(O.x);var F=Object.keys(O.y);if(z.length>1&&F.length>1){s.getComponentMethod("grid","sizeDefaults")(i,a);for(h=0;h<z.length;h++){f.pushUnique(P.xaxis,z[h])}for(h=0;h<F.length;h++){f.pushUnique(P.yaxis,F[h])}for(var B in D){f.pushUnique(P.cartesian,B)}}a._has=_._hasPlotType.bind(a);if(o.length===l.length){for(h=0;h<l.length;h++){x(l[h],o[h])}}_.supplyLayoutModuleDefaults(i,a,l,e._transitionData);var N=a._visibleModules;var j=[];for(h=0;h<N.length;h++){var U=N[h].crossTraceDefaults;if(U)f.pushUnique(j,U)}for(h=0;h<j.length;h++){j[h](l,a)}a._hasOnlyLargeSploms=a._basePlotModules.length===1&&a._basePlotModules[0].name==="splom"&&z.length>15&&F.length>15&&a.shapes.length===0&&a.images.length===0;_.linkSubplots(l,a,o,n);_.cleanPlot(l,a,o,n);var V=!!(n._has&&n._has("gl2d"));var H=!!(a._has&&a._has("gl2d"));var q=!!(n._has&&n._has("cartesian"));var G=!!(a._has&&a._has("cartesian"));var Z=q||V;var Y=G||H;if(Z&&!Y){n._bgLayer.remove()}else if(Y&&!Z){a._shouldCreateBgLayer=true}if(n._zoomlayer&&!e._dragging){p({_fullLayout:n})}I(l,a);x(a,n);s.getComponentMethod("colorscale","crossTraceDefaults")(l,a);if(!a._preGUI)a._preGUI={};if(!a._tracePreGUI)a._tracePreGUI={};var W=a._tracePreGUI;var X={};var J;for(J in W)X[J]="old";for(h=0;h<l.length;h++){J=l[h]._fullInput.uid;if(!X[J])W[J]={};X[J]="new"}for(J in X){if(X[J]==="old")delete W[J]}R(a);s.getComponentMethod("rangeslider","makeData")(a);if(!r&&c.length===l.length){_.supplyDefaultsUpdateCalc(c,l)}};_.supplyDefaultsUpdateCalc=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];var a=(e[r]||[])[0];if(a&&a.trace){var i=a.trace;if(i._hasCalcTransform){var o=i._arrayAttrs;var s,l,u;for(s=0;s<o.length;s++){l=o[s];u=f.nestedProperty(i,l).get().slice();f.nestedProperty(n,l).set(u)}}a.trace=n}}};function S(e,t){var r=t.length;var n=[];var a,i;for(a=0;a<e.length;a++){var o=e[a]._fullInput;if(o!==i)n.push(o);i=o}var s=n.length;var l=new Array(r);var u={};function c(e,t){l[t]=e;u[e]=1}function v(e,t){if(e&&typeof e==="string"&&!u[e]){c(e,t);return true}}for(a=0;a<r;a++){var h=t[a].uid;if(typeof h==="number")h=String(h);if(v(h,a))continue;if(a<s&&v(n[a].uid,a))continue;c(f.randstr(u),a)}return l}function E(){var e=s.collectableSubplotTypes;var t={};var r,n;if(!e){e=[];var a=s.subplotsRegistry;for(var i in a){var o=a[i];var l=o.attr;if(l){e.push(i);if(Array.isArray(l)){for(n=0;n<l.length;n++){f.pushUnique(e,l[n])}}}}}for(r=0;r<e.length;r++){t[e[r]]=[]}return t}function L(e,t){var r=e._context.locale;if(!r)r="en-US";var n=false;var a={};function i(e){var r=true;for(var i=0;i<t.length;i++){var o=t[i];if(!a[o]){if(e[o]){a[o]=e[o]}else r=false}}if(r)n=true}for(var o=0;o<2;o++){var l=e._context.locales;for(var u=0;u<2;u++){var f=(l[r]||{}).format;if(f){i(f);if(n)break}l=s.localeRegistry}var c=r.split("-")[0];if(n||c===r)break;r=c}if(!n)i(s.localeRegistry.en.format);return a}function C(e,t){e.decimal=t.charAt(0);e.thousands=t.charAt(1);return{numberFormat:function(t){try{t=i(e).format(f.adjustFormat(t))}catch(r){f.warnBadFormat(t);return f.noFormat}return t},timeFormat:a(e).utcFormat}}function I(e,t){var r;var n=[];if(t.meta){r=t._meta={meta:t.meta,layout:{meta:t.meta}}}for(var a=0;a<e.length;a++){var i=e[a];if(i.meta){n[i.index]=i._meta={meta:i.meta}}else if(t.meta){i._meta={meta:t.meta}}if(t.meta){i._meta.layout={meta:t.meta}}}if(n.length){if(!r){r=t._meta={}}r.data=n}}_.createTransitionData=function(e){if(!e._transitionData){e._transitionData={}}if(!e._transitionData._frames){e._transitionData._frames=[]}if(!e._transitionData._frameHash){e._transitionData._frameHash={}}if(!e._transitionData._counter){e._transitionData._counter=0}if(!e._transitionData._interruptCallbacks){e._transitionData._interruptCallbacks=[]}};_._hasPlotType=function(e){var t;var r=this._basePlotModules||[];for(t=0;t<r.length;t++){if(r[t].name===e)return true}var n=this._modules||[];for(t=0;t<n.length;t++){var a=n[t].name;if(a===e)return true;var i=s.modules[a];if(i&&i.categories[e])return true}return false};_.cleanPlot=function(e,t,r,n){var a,i;var o=n._basePlotModules||[];for(a=0;a<o.length;a++){var s=o[a];if(s.clean){s.clean(e,t,r,n)}}var l=n._has&&n._has("gl");var u=t._has&&t._has("gl");if(l&&!u){if(n._glcontainer!==undefined){n._glcontainer.selectAll(".gl-canvas").remove();n._glcontainer.selectAll(".no-webgl").remove();n._glcanvas=null}}var f=!!n._infolayer;e:for(a=0;a<r.length;a++){var c=r[a];var v=c.uid;for(i=0;i<e.length;i++){var h=e[i];if(v===h.uid)continue e}if(f){n._infolayer.select(".cb"+v).remove()}}};_.linkSubplots=function(e,t,r,n){var a,i;var o=n._plots||{};var l=t._plots={};var u=t._subplots;var c={_fullData:e,_fullLayout:t};var v=u.cartesian.concat(u.gl2d||[]);for(a=0;a<v.length;a++){var p=v[a];var d=o[p];var g=h.getFromId(c,p,"x");var y=h.getFromId(c,p,"y");var m;if(d){m=l[p]=d}else{m=l[p]={};m.id=p}g._counterAxes.push(y._id);y._counterAxes.push(g._id);g._subplotsWith.push(p);y._subplotsWith.push(p);m.xaxis=g;m.yaxis=y;m._hasClipOnAxisFalse=false;for(i=0;i<e.length;i++){var x=e[i];if(x.xaxis===m.xaxis._id&&x.yaxis===m.yaxis._id&&x.cliponaxis===false){m._hasClipOnAxisFalse=true;break}}}var b=h.list(c,null,true);var _;for(a=0;a<b.length;a++){_=b[a];var w=null;if(_.overlaying){w=h.getFromId(c,_.overlaying);if(w&&w.overlaying){_.overlaying=false;w=null}}_._mainAxis=w||_;if(w)_.domain=w.domain.slice();_._anchorAxis=_.anchor==="free"?null:h.getFromId(c,_.anchor)}for(a=0;a<b.length;a++){_=b[a];_._counterAxes.sort(h.idSort);_._subplotsWith.sort(f.subplotSort);_._mainSubplot=P(_,t);if(_._counterAxes.length&&(_.spikemode&&_.spikemode.indexOf("across")!==-1||_.automargin&&_.mirror&&_.anchor!=="free"||s.getComponentMethod("rangeslider","isVisible")(_))){var T=1;var k=0;for(i=0;i<_._counterAxes.length;i++){var A=h.getFromId(c,_._counterAxes[i]);T=Math.min(T,A.domain[0]);k=Math.max(k,A.domain[1])}if(T<k){_._counterDomainMin=T;_._counterDomainMax=k}}}};function P(e,t){var r={_fullLayout:t};var n=e._id.charAt(0)==="x";var a=e._mainAxis._anchorAxis;var i="";var o="";var s="";if(a){s=a._mainAxis._id;i=n?e._id+s:s+e._id}if(!i||!t._plots[i]){i="";var l=e._counterAxes;for(var u=0;u<l.length;u++){var f=l[u];var c=n?e._id+f:f+e._id;if(!o)o=c;var v=h.getFromId(r,f);if(s&&v.overlaying===s){i=c;break}}}return i||o}_.clearExpandedTraceDefaultColors=function(e){var t,r,n;function a(e,n,a,i){r[i]=n;r.length=i+1;if(e.valType==="color"&&e.dflt===undefined){t.push(r.join("."))}}r=[];t=e._module._colorAttrs;if(!t){e._module._colorAttrs=t=[];l.crawl(e._module.attributes,a)}for(n=0;n<t.length;n++){var i=f.nestedProperty(e,"_input."+t[n]);if(!i.get()){f.nestedProperty(e,t[n]).set(null)}}};_.supplyDataDefaults=function(e,t,r,n){var a=n._modules;var i=n._visibleModules;var o=n._basePlotModules;var l=0;var c=0;var v,h,p;n._transformModules=[];function d(e){t.push(e);var r=e._module;if(!r)return;f.pushUnique(a,r);if(e.visible===true)f.pushUnique(i,r);f.pushUnique(o,e._module.basePlotModule);l++;if(e._input.visible!==false)c++}var g={};var y=[];var m=(r.template||{}).data||{};var b=u.traceTemplater(m);for(v=0;v<e.length;v++){p=e[v];h=b.newTrace(p);h.uid=n._traceUids[v];_.supplyTraceDefaults(p,h,c,n,v);h.index=v;h._input=p;h._expandedIndex=l;if(h.transforms&&h.transforms.length){var w=p.visible!==false&&h.visible===false;var T=D(h,t,r,n);for(var k=0;k<T.length;k++){var A=T[k];var M={_template:h._template,type:h.type,uid:h.uid+k};if(w&&A.visible===false){delete A.visible}_.supplyTraceDefaults(A,M,l,n,v);x(M,A);M.index=v;M._input=p;M._fullInput=h;M._expandedIndex=l;M._expandedInput=A;d(M)}}else{h._fullInput=h;h._expandedInput=h;d(h)}if(s.traceIs(h,"carpetAxis")){g[h.carpet]=h}if(s.traceIs(h,"carpetDependent")){y.push(v)}}for(v=0;v<y.length;v++){h=t[y[v]];if(!h.visible)continue;var S=g[h.carpet];h._carpet=S;if(!S||!S.visible){h.visible=false;continue}h.xaxis=S.xaxis;h.yaxis=S.yaxis}};_.supplyAnimationDefaults=function(e){e=e||{};var t;var r={};function n(t,n){return f.coerce(e||{},r,g,t,n)}n("mode");n("direction");n("fromcurrent");if(Array.isArray(e.frame)){r.frame=[];for(t=0;t<e.frame.length;t++){r.frame[t]=_.supplyAnimationFrameDefaults(e.frame[t]||{})}}else{r.frame=_.supplyAnimationFrameDefaults(e.frame||{})}if(Array.isArray(e.transition)){r.transition=[];for(t=0;t<e.transition.length;t++){r.transition[t]=_.supplyAnimationTransitionDefaults(e.transition[t]||{})}}else{r.transition=_.supplyAnimationTransitionDefaults(e.transition||{})}return r};_.supplyAnimationFrameDefaults=function(e){var t={};function r(r,n){return f.coerce(e||{},t,g.frame,r,n)}r("duration");r("redraw");return t};_.supplyAnimationTransitionDefaults=function(e){var t={};function r(r,n){return f.coerce(e||{},t,g.transition,r,n)}r("duration");r("easing");return t};_.supplyFrameDefaults=function(e){var t={};function r(r,n){return f.coerce(e,t,y,r,n)}r("group");r("name");r("traces");r("baseframe");r("data");r("layout");return t};_.supplyTraceDefaults=function(e,t,r,n,a){var i=n.colorway||c.defaults;var o=i[r%i.length];var l;function u(r,n){return f.coerce(e,t,_.attributes,r,n)}var v=u("visible");u("type");u("name",n._traceWord+" "+a);u("uirevision",n.uirevision);var h=_.getModule(t);t._module=h;if(h){var p=h.basePlotModule;var d=p.attr;var g=p.attributes;if(d&&g){var y=n._subplots;var m="";if(v||p.name!=="gl2d"){if(Array.isArray(d)){for(l=0;l<d.length;l++){var x=d[l];var b=f.coerce(e,t,g,x);if(y[x])f.pushUnique(y[x],b);m+=b}}else{m=f.coerce(e,t,g,d)}if(y[p.name]){f.pushUnique(y[p.name],m)}}}}if(v){u("customdata");u("ids");u("meta");if(s.traceIs(t,"showLegend")){f.coerce(e,t,h.attributes.showlegend?h.attributes:_.attributes,"showlegend");u("legend");u("legendwidth");u("legendgroup");u("legendgrouptitle.text");u("legendrank");t._dfltShowLegend=true}else{t._dfltShowLegend=false}if(h){h.supplyDefaults(e,t,o,n)}if(!s.traceIs(t,"noOpacity")){u("opacity")}if(s.traceIs(t,"notLegendIsolatable")){t.visible=!!t.visible}if(!s.traceIs(t,"noHover")){if(!t.hovertemplate)f.coerceHoverinfo(e,t,n);if(t.type!=="parcats"){s.getComponentMethod("fx","supplyDefaults")(e,t,o,n)}}if(h&&h.selectPoints){u("selectedpoints")}_.supplyTransformDefaults(e,t,n)}return t};function O(e){var t=e.transforms;if(Array.isArray(t)&&t.length){for(var r=0;r<t.length;r++){var n=t[r];var a=n._module||w[n.type];if(a&&a.makesData)return true}}return false}_.hasMakesDataTransform=O;_.supplyTransformDefaults=function(e,t,r){if(!(t._length||O(e)))return;var n=r._globalTransforms||[];var a=r._transformModules||[];if(!Array.isArray(e.transforms)&&n.length===0)return;var i=e.transforms||[];var o=n.concat(i);var s=t.transforms=[];for(var l=0;l<o.length;l++){var u=o[l];var c=u.type;var v=w[c];var h;var p=!(u._module&&u._module===v);var d=v&&typeof v.transform==="function";if(!v)f.warn("Unrecognized transform type "+c+".");if(v&&v.supplyDefaults&&(p||d)){h=v.supplyDefaults(u,t,r,e);h.type=c;h._module=v;f.pushUnique(a,v)}else{h=f.extendFlat({},u)}s.push(h)}};function D(e,t,r,n){var a=e.transforms;var i=[e];for(var o=0;o<a.length;o++){var s=a[o];var l=w[s.type];if(l&&l.transform){i=l.transform(i,{transform:s,fullTrace:e,fullData:t,layout:r,fullLayout:n,transformIndex:o})}}return i}_.supplyLayoutGlobalDefaults=function(e,t,r){function n(r,n){return f.coerce(e,t,_.layoutAttributes,r,n)}var a=e.template;if(f.isPlainObject(a)){t.template=a;t._template=a.layout;t._dataTemplate=a.data}n("autotypenumbers");var i=f.coerceFont(n,"font");var o=i.size;f.coerceFont(n,"title.font",f.extendFlat({},i,{size:Math.round(o*1.4)}));n("title.text",t._dfltTitle.plot);n("title.xref");var l=n("title.yref");n("title.pad.t");n("title.pad.r");n("title.pad.b");n("title.pad.l");var u=n("title.automargin");n("title.x");n("title.xanchor");n("title.y");n("title.yanchor");if(u){if(l==="paper"){if(t.title.y!==0)t.title.y=1;if(t.title.yanchor==="auto"){t.title.yanchor=t.title.y===0?"top":"bottom"}}if(l==="container"){if(t.title.y==="auto")t.title.y=1;if(t.title.yanchor==="auto"){t.title.yanchor=t.title.y<.5?"bottom":"top"}}}var c=n("uniformtext.mode");if(c){n("uniformtext.minsize")}n("autosize",!(e.width&&e.height));n("width");n("height");n("minreducedwidth");n("minreducedheight");n("margin.l");n("margin.r");n("margin.t");n("margin.b");n("margin.pad");n("margin.autoexpand");if(e.width&&e.height)_.sanitizeMargins(t);s.getComponentMethod("grid","sizeDefaults")(e,t);n("paper_bgcolor");n("separators",r.decimal+r.thousands);n("hidesources");n("colorway");n("datarevision");var v=n("uirevision");n("editrevision",v);n("selectionrevision",v);s.getComponentMethod("modebar","supplyLayoutDefaults")(e,t);s.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(e,t,n);s.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(e,t,n);n("meta");if(f.isPlainObject(e.transition)){n("transition.duration");n("transition.easing");n("transition.ordering")}s.getComponentMethod("calendars","handleDefaults")(e,t,"calendar");s.getComponentMethod("fx","supplyLayoutGlobalDefaults")(e,t,n);f.coerce(e,t,d,"scattermode")};function z(e){return typeof e==="string"&&e.substr(e.length-2)==="px"&&parseFloat(e)}_.plotAutoSize=function e(t,r,n){var a=t._context||{};var i=a.frameMargins;var s;var l;var u=f.isPlotDiv(t);if(u)t.emit("plotly_autosize");if(a.fillFrame){s=window.innerWidth;l=window.innerHeight;document.body.style.overflow="hidden"}else{var c=u?window.getComputedStyle(t):{};s=z(c.width)||z(c.maxWidth)||n.width;l=z(c.height)||z(c.maxHeight)||n.height;if(o(i)&&i>0){var v=1-2*i;s=Math.round(v*s);l=Math.round(v*l)}}var h=_.layoutAttributes.width.min;var p=_.layoutAttributes.height.min;if(s<h)s=h;if(l<p)l=p;var d=!r.width&&Math.abs(n.width-s)>1;var g=!r.height&&Math.abs(n.height-l)>1;if(g||d){if(d)n.width=s;if(g)n.height=l}if(!t._initialAutoSize){t._initialAutoSize={width:s,height:l}}_.sanitizeMargins(n)};_.supplyLayoutModuleDefaults=function(e,t,r,n){var a=s.componentsRegistry;var i=t._basePlotModules;var o,l,u;var c=s.subplotsRegistry.cartesian;for(o in a){u=a[o];if(u.includeBasePlot){u.includeBasePlot(e,t)}}if(!i.length){i.push(c)}if(t._has("cartesian")){s.getComponentMethod("grid","contentDefaults")(e,t);c.finalizeSubplots(e,t)}for(var v in t._subplots){t._subplots[v].sort(f.subplotSort)}for(l=0;l<i.length;l++){u=i[l];if(u.supplyLayoutDefaults){u.supplyLayoutDefaults(e,t,r)}}var h=t._modules;for(l=0;l<h.length;l++){u=h[l];if(u.supplyLayoutDefaults){u.supplyLayoutDefaults(e,t,r)}}var p=t._transformModules;for(l=0;l<p.length;l++){u=p[l];if(u.supplyLayoutDefaults){u.supplyLayoutDefaults(e,t,r,n)}}for(o in a){u=a[o];if(u.supplyLayoutDefaults){u.supplyLayoutDefaults(e,t,r)}}};_.purge=function(e){var t=e._fullLayout||{};if(t._glcontainer!==undefined){t._glcontainer.selectAll(".gl-canvas").remove();t._glcontainer.remove();t._glcanvas=null}if(t._modeBar)t._modeBar.destroy();if(e._transitionData){if(e._transitionData._interruptCallbacks){e._transitionData._interruptCallbacks.length=0}if(e._transitionData._animationRaf){window.cancelAnimationFrame(e._transitionData._animationRaf)}}f.clearThrottle();f.clearResponsive(e);delete e.data;delete e.layout;delete e._fullData;delete e._fullLayout;delete e.calcdata;delete e.empty;delete e.fid;delete e.undoqueue;delete e.undonum;delete e.autoplay;delete e.changed;delete e._promises;delete e._redrawTimer;delete e._hmlumcount;delete e._hmpixcount;delete e._transitionData;delete e._transitioning;delete e._initialAutoSize;delete e._transitioningWithDuration;delete e._dragging;delete e._dragged;delete e._dragdata;delete e._hoverdata;delete e._snapshotInProgress;delete e._editing;delete e._mouseDownTime;delete e._legendMouseDownTime;if(e.removeAllListeners)e.removeAllListeners()};_.style=function(e){var t=e._fullLayout._visibleModules;var r=[];var n;for(n=0;n<t.length;n++){var a=t[n];if(a.style){f.pushUnique(r,a.style)}}for(n=0;n<r.length;n++){r[n](e)}};_.sanitizeMargins=function(e){if(!e||!e.margin)return;var t=e.width;var r=e.height;var n=e.margin;var a=t-(n.l+n.r);var i=r-(n.t+n.b);var o;if(a<0){o=(t-1)/(n.l+n.r);n.l=Math.floor(o*n.l);n.r=Math.floor(o*n.r)}if(i<0){o=(r-1)/(n.t+n.b);n.t=Math.floor(o*n.t);n.b=Math.floor(o*n.b)}};_.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}};_.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};function R(e){var t=e.margin;if(!e._size){var r=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)};r.w=Math.round(e.width)-r.l-r.r;r.h=Math.round(e.height)-r.t-r.b}if(!e._pushmargin)e._pushmargin={};if(!e._pushmarginIds)e._pushmarginIds={};if(!e._reservedMargin)e._reservedMargin={}}var F=2;var B=2;_.autoMargin=function(e,t,r){var n=e._fullLayout;var a=n.width;var i=n.height;var o=n.margin;var s=n.minreducedwidth;var l=n.minreducedheight;var u=f.constrain(a-o.l-o.r,F,s);var c=f.constrain(i-o.t-o.b,B,l);var v=Math.max(0,a-u);var h=Math.max(0,i-c);var p=n._pushmargin;var d=n._pushmarginIds;if(o.autoexpand!==false){if(!r){delete p[t];delete d[t]}else{var g=r.pad;if(g===undefined){g=Math.min(12,o.l,o.r,o.t,o.b)}if(v){var y=(r.l+r.r)/v;if(y>1){r.l/=y;r.r/=y}}if(h){var m=(r.t+r.b)/h;if(m>1){r.t/=m;r.b/=m}}var x=r.xl!==undefined?r.xl:r.x;var b=r.xr!==undefined?r.xr:r.x;var w=r.yt!==undefined?r.yt:r.y;var T=r.yb!==undefined?r.yb:r.y;p[t]={l:{val:x,size:r.l+g},r:{val:b,size:r.r+g},b:{val:T,size:r.b+g},t:{val:w,size:r.t+g}};d[t]=1}if(!n._replotting){return _.doAutoMargin(e)}}};function N(e){if("_redrawFromAutoMarginCount"in e._fullLayout){return false}var t=h.list(e,"",true);for(var r in t){if(t[r].autoshift||t[r].shift)return true}return false}_.doAutoMargin=function(e){var t=e._fullLayout;var r=t.width;var n=t.height;if(!t._size)t._size={};R(t);var a=t._size;var i=t.margin;var l={t:0,b:0,l:0,r:0};var u=f.extendFlat({},a);var c=i.l;var v=i.r;var h=i.t;var p=i.b;var d=t._pushmargin;var g=t._pushmarginIds;var y=t.minreducedwidth;var m=t.minreducedheight;if(i.autoexpand!==false){for(var x in d){if(!g[x])delete d[x]}var b=e._fullLayout._reservedMargin;for(var w in b){for(var T in b[w]){var k=b[w][T];l[T]=Math.max(l[T],k)}}d.base={l:{val:0,size:c},r:{val:1,size:v},t:{val:1,size:h},b:{val:0,size:p}};for(var A in l){var M=0;for(var S in d){if(S!=="base"){if(o(d[S][A].size)){M=d[S][A].size>M?d[S][A].size:M}}}var E=Math.max(0,i[A]-M);l[A]=Math.max(0,l[A]-E)}for(var L in d){var C=d[L].l||{};var I=d[L].b||{};var P=C.val;var O=C.size;var D=I.val;var z=I.size;var U=r-l.r-l.l;var V=n-l.t-l.b;for(var H in d){if(o(O)&&d[H].r){var q=d[H].r.val;var G=d[H].r.size;if(q>P){var Z=(O*q+(G-U)*P)/(q-P);var Y=(G*(1-P)+(O-U)*(1-q))/(q-P);if(Z+Y>c+v){c=Z;v=Y}}}if(o(z)&&d[H].t){var W=d[H].t.val;var X=d[H].t.size;if(W>D){var J=(z*W+(X-V)*D)/(W-D);var K=(X*(1-D)+(z-V)*(1-W))/(W-D);if(J+K>p+h){p=J;h=K}}}}}}var $=f.constrain(r-i.l-i.r,F,y);var Q=f.constrain(n-i.t-i.b,B,m);var ee=Math.max(0,r-$);var te=Math.max(0,n-Q);if(ee){var re=(c+v)/ee;if(re>1){c/=re;v/=re}}if(te){var ne=(p+h)/te;if(ne>1){p/=ne;h/=ne}}a.l=Math.round(c)+l.l;a.r=Math.round(v)+l.r;a.t=Math.round(h)+l.t;a.b=Math.round(p)+l.b;a.p=Math.round(i.pad);a.w=Math.round(r)-a.l-a.r;a.h=Math.round(n)-a.t-a.b;if(!t._replotting&&(_.didMarginChange(u,a)||N(e))){if("_redrawFromAutoMarginCount"in t){t._redrawFromAutoMarginCount++}else{t._redrawFromAutoMarginCount=1}var ae=3*(1+Object.keys(g).length);if(t._redrawFromAutoMarginCount<ae){return s.call("_doPlot",e)}else{t._size=u;f.warn("Too many auto-margin redraws.")}}j(e)};function j(e){var t=h.list(e,"",true);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach((function(e){for(var r=0;r<t.length;r++){var n=t[r][e];if(n)n()}}))}var U=["l","r","t","b","p","w","h"];_.didMarginChange=function(e,t){for(var r=0;r<U.length;r++){var n=U[r];var a=e[n];var i=t[n];if(!o(a)||Math.abs(i-a)>1){return true}}return false};_.graphJson=function(e,t,r,n,a,i){if(a&&t&&!e._fullData||a&&!t&&!e._fullLayout){_.supplyDefaults(e)}var o=a?e._fullData:e.data;var s=a?e._fullLayout:e.layout;var l=(e._transitionData||{})._frames;function u(e,t){if(typeof e==="function"){return t?"_function_":null}if(f.isPlainObject(e)){var n={};var a;Object.keys(e).sort().forEach((function(i){if(["_","["].indexOf(i.charAt(0))!==-1)return;if(typeof e[i]==="function"){if(t)n[i]="_function";return}if(r==="keepdata"){if(i.substr(i.length-3)==="src"){return}}else if(r==="keepstream"){a=e[i+"src"];if(typeof a==="string"&&a.indexOf(":")>0){if(!f.isPlainObject(e.stream)){return}}}else if(r!=="keepall"){a=e[i+"src"];if(typeof a==="string"&&a.indexOf(":")>0){return}}n[i]=u(e[i],t)}));return n}if(Array.isArray(e)){return e.map((function(e){return u(e,t)}))}if(f.isTypedArray(e)){return f.simpleMap(e,f.identity)}if(f.isJSDate(e))return f.ms2DateTimeLocal(+e);return e}var c={data:(o||[]).map((function(e){var r=u(e);if(t){delete r.fit}return r}))};if(!t){c.layout=u(s);if(a){var v=s._size;c.layout.computed={margin:{b:v.b,l:v.l,r:v.r,t:v.t}}}}if(l)c.frames=u(l);if(i)c.config=u(e._context,true);return n==="object"?c:JSON.stringify(c)};_.modifyFrames=function(e,t){var r,n,a;var i=e._transitionData._frames;var o=e._transitionData._frameHash;for(r=0;r<t.length;r++){n=t[r];switch(n.type){case"replace":a=n.value;var s=(i[n.index]||{}).name;var l=a.name;i[n.index]=o[l]=a;if(l!==s){delete o[s];o[l]=a}break;case"insert":a=n.value;o[a.name]=a;i.splice(n.index,0,a);break;case"delete":a=i[n.index];delete o[a.name];i.splice(n.index,1);break}}return Promise.resolve()};_.computeFrame=function(e,t){var r=e._transitionData._frameHash;var n,a,i,o;if(!t){throw new Error("computeFrame must be given a string frame name")}var s=r[t.toString()];if(!s){return false}var l=[s];var u=[s.name];while(s.baseframe&&(s=r[s.baseframe.toString()])){if(u.indexOf(s.name)!==-1)break;l.push(s);u.push(s.name)}var f={};while(s=l.pop()){if(s.layout){f.layout=_.extendLayout(f.layout,s.layout)}if(s.data){if(!f.data){f.data=[]}a=s.traces;if(!a){a=[];for(n=0;n<s.data.length;n++){a[n]=n}}if(!f.traces){f.traces=[]}for(n=0;n<s.data.length;n++){i=a[n];if(i===undefined||i===null){continue}o=f.traces.indexOf(i);if(o===-1){o=f.data.length;f.traces[o]=i}f.data[o]=_.extendTrace(f.data[o],s.data[n])}}}return f};_.recomputeFrameHash=function(e){var t=e._transitionData._frameHash={};var r=e._transitionData._frames;for(var n=0;n<r.length;n++){var a=r[n];if(a&&a.name){t[a.name]=a}}};_.extendObjectWithContainers=function(e,t,r){var n,a,i,o,s,l,u,c;var v=f.extendDeepNoArrays({},t||{});var h=f.expandObjectPaths(v);var p={};if(r&&r.length){for(i=0;i<r.length;i++){n=f.nestedProperty(h,r[i]);a=n.get();if(a===undefined){f.nestedProperty(p,r[i]).set(null)}else{n.set(null);f.nestedProperty(p,r[i]).set(a)}}}e=f.extendDeepNoArrays(e||{},h);if(r&&r.length){for(i=0;i<r.length;i++){s=f.nestedProperty(p,r[i]);u=s.get();if(!u)continue;l=f.nestedProperty(e,r[i]);c=l.get();if(!Array.isArray(c)){c=[];l.set(c)}for(o=0;o<u.length;o++){var d=u[o];if(d===null)c[o]=null;else{c[o]=_.extendObjectWithContainers(c[o],d)}}l.set(c)}}return e};_.dataArrayContainers=["transforms","dimensions"];_.layoutArrayContainers=s.layoutArrayContainers;_.extendTrace=function(e,t){return _.extendObjectWithContainers(e,t,_.dataArrayContainers)};_.extendLayout=function(e,t){return _.extendObjectWithContainers(e,t,_.layoutArrayContainers)};_.transition=function(e,t,r,n,a,i){var o={redraw:a.redraw};var s={};var l=[];o.prepareFn=function(){var a=Array.isArray(t)?t.length:0;var i=n.slice(0,a);for(var o=0;o<i.length;o++){var u=i[o];var c=e._fullData[u];var v=c._module;if(!v)continue;if(v.animatable){var h=v.basePlotModule.name;if(!s[h])s[h]=[];s[h].push(u)}e.data[i[o]]=_.extendTrace(e.data[i[o]],t[o])}var p=f.expandObjectPaths(f.extendDeepNoArrays({},r));var d=/^[xy]axis[0-9]*$/;for(var g in p){if(!d.test(g))continue;delete p[g].range}_.extendLayout(e.layout,p);delete e.calcdata;_.supplyDefaults(e);_.doCalcdata(e);var y=f.expandObjectPaths(r);if(y){var m=e._fullLayout._plots;for(var x in m){var b=m[x];var w=b.xaxis;var T=b.yaxis;var k=w.range.slice();var A=T.range.slice();var M=null;var S=null;var E=null;var L=null;if(Array.isArray(y[w._name+".range"])){M=y[w._name+".range"].slice()}else if(Array.isArray((y[w._name]||{}).range)){M=y[w._name].range.slice()}if(Array.isArray(y[T._name+".range"])){S=y[T._name+".range"].slice()}else if(Array.isArray((y[T._name]||{}).range)){S=y[T._name].range.slice()}if(k&&M&&(w.r2l(k[0])!==w.r2l(M[0])||w.r2l(k[1])!==w.r2l(M[1]))){E={xr0:k,xr1:M}}if(A&&S&&(T.r2l(A[0])!==T.r2l(S[0])||T.r2l(A[1])!==T.r2l(S[1]))){L={yr0:A,yr1:S}}if(E||L){l.push(f.extendFlat({plotinfo:b},E,L))}}}return Promise.resolve()};o.runFn=function(t){var n;var a=e._fullLayout._basePlotModules;var o=l.length;var u;if(r){for(u=0;u<a.length;u++){if(a[u].transitionAxes){a[u].transitionAxes(e,l,i,t)}}}if(o){n=f.extendFlat({},i);n.duration=0;delete s.cartesian}else{n=i}for(var c in s){var v=s[c];var h=e._fullData[v[0]]._module;h.basePlotModule.plot(e,v,n,t)}};return V(e,i,o)};_.transitionFromReact=function(e,t,r,n){var a=e._fullLayout;var i=a.transition;var o={};var s=[];o.prepareFn=function(){var e=a._plots;o.redraw=false;if(t.anim==="some")o.redraw=true;if(r.anim==="some")o.redraw=true;for(var i in e){var l=e[i];var u=l.xaxis;var c=l.yaxis;var v=n[u._name].range.slice();var h=n[c._name].range.slice();var p=u.range.slice();var d=c.range.slice();u.setScale();c.setScale();var g=null;var y=null;if(u.r2l(v[0])!==u.r2l(p[0])||u.r2l(v[1])!==u.r2l(p[1])){g={xr0:v,xr1:p}}if(c.r2l(h[0])!==c.r2l(d[0])||c.r2l(h[1])!==c.r2l(d[1])){y={yr0:h,yr1:d}}if(g||y){s.push(f.extendFlat({plotinfo:l},g,y))}}return Promise.resolve()};o.runFn=function(r){var n=e._fullData;var a=e._fullLayout;var o=a._basePlotModules;var l;var u;var c;var v=[];for(var h=0;h<n.length;h++){v.push(h)}function p(){if(!e._fullLayout)return;for(var t=0;t<o.length;t++){if(o[t].transitionAxes){o[t].transitionAxes(e,s,l,r)}}}function d(){if(!e._fullLayout)return;for(var t=0;t<o.length;t++){o[t].plot(e,c,u,r)}}if(s.length&&t.anim){if(i.ordering==="traces first"){l=f.extendFlat({},i,{duration:0});c=v;u=i;setTimeout(p,i.duration);d()}else{l=i;c=null;u=f.extendFlat({},i,{duration:0});setTimeout(d,l.duration);p()}}else if(s.length){l=i;p()}else if(t.anim){c=v;u=i;d()}};return V(e,i,o)};function V(e,t,r){var n=false;function a(e){var t=Promise.resolve();if(!e)return t;while(e.length){t=t.then(e.shift())}return t}function i(e){if(!e)return;while(e.length){e.shift()}}function o(){e.emit("plotly_transitioning",[]);return new Promise((function(a){e._transitioning=true;if(t.duration>0){e._transitioningWithDuration=true}e._transitionData._interruptCallbacks.push((function(){n=true}));if(r.redraw){e._transitionData._interruptCallbacks.push((function(){return s.call("redraw",e)}))}e._transitionData._interruptCallbacks.push((function(){e.emit("plotly_transitioninterrupted",[])}));var i=0;var o=0;function u(){i++;return function(){o++;if(!n&&o===i){l(a)}}}r.runFn(u);setTimeout(u())}))}function l(t){if(!e._transitionData)return;i(e._transitionData._interruptCallbacks);return Promise.resolve().then((function(){if(r.redraw){return s.call("redraw",e)}})).then((function(){e._transitioning=false;e._transitioningWithDuration=false;e.emit("plotly_transitioned",[])})).then(t)}function u(){if(!e._transitionData)return;e._transitioning=false;return a(e._transitionData._interruptCallbacks)}var c=[_.previousPromises,u,r.prepareFn,_.rehover,_.reselect,o];var v=f.syncOrAsync(c,e);if(!v||!v.then){v=Promise.resolve()}return v.then((function(){return e}))}_.doCalcdata=function(e,t){var r=h.list(e);var n=e._fullData;var a=e._fullLayout;var i,o,u,f;var c=new Array(n.length);var p=(e.calcdata||[]).slice();e.calcdata=c;a._numBoxes=0;a._numViolins=0;a._violinScaleGroupStats={};e._hmpixcount=0;e._hmlumcount=0;a._piecolormap={};a._sunburstcolormap={};a._treemapcolormap={};a._iciclecolormap={};a._funnelareacolormap={};for(u=0;u<n.length;u++){if(Array.isArray(t)&&t.indexOf(u)===-1){c[u]=p[u];continue}}for(u=0;u<n.length;u++){i=n[u];i._arrayAttrs=l.findArrayAttributes(i);i._extremes={}}var d=a._subplots.polar||[];for(u=0;u<d.length;u++){r.push(a[d[u]].radialaxis,a[d[u]].angularaxis)}for(var g in a._colorAxes){var y=a[g];if(y.cauto!==false){delete y.cmin;delete y.cmax}}var m=false;function x(t){i=n[t];o=i._module;if(i.visible===true&&i.transforms){if(o&&o.calc){var r=o.calc(e,i);if(r[0]&&r[0].t&&r[0].t._scene){delete r[0].t._scene.dirty}}for(f=0;f<i.transforms.length;f++){var a=i.transforms[f];o=w[a.type];if(o&&o.calcTransform){i._hasCalcTransform=true;m=true;o.calcTransform(e,i,a)}}}}function b(t,r){i=n[t];o=i._module;if(!!o.isContainer!==r)return;var a=[];if(i.visible===true&&i._length!==0){delete i._indexToPoints;var s=i.transforms||[];for(f=s.length-1;f>=0;f--){if(s[f].enabled){i._indexToPoints=s[f]._indexToPoints;break}}if(o&&o.calc){a=o.calc(e,i)}}if(!Array.isArray(a)||!a[0]){a=[{x:v,y:v}]}if(!a[0].t)a[0].t={};a[0].trace=i;c[t]=a}G(r,n,a);for(u=0;u<n.length;u++)b(u,true);for(u=0;u<n.length;u++)x(u);if(m)G(r,n,a);for(u=0;u<n.length;u++)b(u,true);for(u=0;u<n.length;u++)b(u,false);Z(e);var _=q(r,e);if(_.length){a._numBoxes=0;a._numViolins=0;for(u=0;u<_.length;u++)b(_[u],true);for(u=0;u<_.length;u++)b(_[u],false);Z(e)}s.getComponentMethod("fx","calc")(e);s.getComponentMethod("errorbars","calc")(e)};var H=/(total|sum|min|max|mean|median) (ascending|descending)/;function q(e,t){var r=[];var n,a,i,o,l;function u(e,r,n){var a=r._id.charAt(0);if(e==="histogram2dcontour"){var i=r._counterAxes[0];var o=h.getFromId(t,i);var s=a==="x"||i==="x"&&o.type==="category";var l=a==="y"||i==="y"&&o.type==="category";return function(e,t){if(e===0||t===0)return-1;if(s&&e===n[t].length-1)return-1;if(l&&t===n.length-1)return-1;return(a==="y"?t:e)-1}}else{return function(e,t){return a==="y"?t:e}}}var c={min:function(e){return f.aggNums(Math.min,null,e)},max:function(e){return f.aggNums(Math.max,null,e)},sum:function(e){return f.aggNums((function(e,t){return e+t}),null,e)},total:function(e){return f.aggNums((function(e,t){return e+t}),null,e)},mean:function(e){return f.mean(e)},median:function(e){return f.median(e)}};function v(e,t){return e[1]-t[1]}function p(e,t){return t[1]-e[1]}for(n=0;n<e.length;n++){var d=e[n];if(d.type!=="category")continue;var g=d.categoryorder.match(H);if(g){var y=g[1];var m=g[2];var x=d._id.charAt(0);var b=x==="x";var _=[];for(a=0;a<d._categories.length;a++){_.push([d._categories[a],[]])}for(a=0;a<d._traceIndices.length;a++){var w=d._traceIndices[a];var T=t._fullData[w];if(T.visible!==true)continue;var k=T.type;if(s.traceIs(T,"histogram")){delete T._xautoBinFinished;delete T._yautoBinFinished}var A=k==="splom";var M=k==="scattergl";var S=t.calcdata[w];for(i=0;i<S.length;i++){var E=S[i];var L,C;if(A){var I=T._axesDim[d._id];if(!b){var P=T._diag[I][0];if(P)d=t._fullLayout[h.id2name(P)]}var O=E.trace.dimensions[I].values;for(o=0;o<O.length;o++){L=d._categoriesMap[O[o]];for(l=0;l<E.trace.dimensions.length;l++){if(l===I)continue;var D=E.trace.dimensions[l];_[L][1].push(D.values[o])}}}else if(M){for(o=0;o<E.t.x.length;o++){if(b){L=E.t.x[o];C=E.t.y[o]}else{L=E.t.y[o];C=E.t.x[o]}_[L][1].push(C)}if(E.t&&E.t._scene){delete E.t._scene.dirty}}else if(E.hasOwnProperty("z")){C=E.z;var z=u(T.type,d,C);for(o=0;o<C.length;o++){for(l=0;l<C[o].length;l++){L=z(l,o);if(L+1)_[L][1].push(C[o][l])}}}else{L=E.p;if(L===undefined)L=E[x];C=E.s;if(C===undefined)C=E.v;if(C===undefined)C=b?E.y:E.x;if(!Array.isArray(C)){if(C===undefined)C=[];else C=[C]}for(o=0;o<C.length;o++){_[L][1].push(C[o])}}}}d._categoriesValue=_;var R=[];for(a=0;a<_.length;a++){R.push([_[a][0],c[y](_[a][1])])}R.sort(m==="descending"?p:v);d._categoriesAggregatedValue=R;d._initialCategories=R.map((function(e){return e[0]}));r=r.concat(d.sortByInitialCategories())}}return r}function G(e,t,r){var n={};function a(e){e.clearCalc();if(e.type==="multicategory"){e.setupMultiCategory(t)}n[e._id]=1}f.simpleMap(e,a);var i=r._axisMatchGroups||[];for(var o=0;o<i.length;o++){for(var s in i[o]){if(!n[s]){a(r[h.id2name(s)])}}}}function Z(e){var t=e._fullLayout;var r=t._visibleModules;var n={};var a,i,o;for(i=0;i<r.length;i++){var s=r[i];var l=s.crossTraceCalc;if(l){var u=s.basePlotModule.name;if(n[u]){f.pushUnique(n[u],l)}else{n[u]=[l]}}}for(o in n){var c=n[o];var v=t._subplots[o];if(Array.isArray(v)){for(a=0;a<v.length;a++){var h=v[a];var p=o==="cartesian"?t._plots[h]:t[h];for(i=0;i<c.length;i++){c[i](e,p,h)}}}else{for(i=0;i<c.length;i++){c[i](e)}}}}_.rehover=function(e){if(e._fullLayout._rehover){e._fullLayout._rehover()}};_.redrag=function(e){if(e._fullLayout._redrag){e._fullLayout._redrag()}};_.reselect=function(e){var t=e._fullLayout;var r=(e.layout||{}).selections;var n=t._previousSelections;t._previousSelections=r;var a=t._reselect||JSON.stringify(r)!==JSON.stringify(n);s.getComponentMethod("selections","reselect")(e,a)};_.generalUpdatePerTraceModule=function(e,t,r,n){var a=t.traceHash;var i={};var o;for(o=0;o<r.length;o++){var s=r[o];var l=s[0].trace;if(l.visible){i[l.type]=i[l.type]||[];i[l.type].push(s)}}for(var u in a){if(!i[u]){var c=a[u][0];var v=c[0].trace;v.visible=false;i[u]=[c]}}for(var h in i){var p=i[h];var d=p[0][0].trace._module;d.plot(e,t,f.filterVisible(p),n)}t.traceHash=i};_.plotBasePlot=function(e,t,r,n,a){var i=s.getModule(e);var o=m(t.calcdata,i)[0];i.plot(t,o,n,a)};_.cleanBasePlot=function(e,t,r,n,a){var i=a._has&&a._has(e);var o=r._has&&r._has(e);if(i&&!o){a["_"+e+"layer"].selectAll("g.trace").remove()}}},9813:function(e){"use strict";e.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},10869:function(e,t,r){"use strict";var n=r(71828);var a=r(61082).tester;var i=n.findIndexOfMin;var o=n.isAngleInsideSector;var s=n.angleDelta;var l=n.angleDist;function u(e,t,r,n,i){if(!o(t,n))return false;var s,l;if(r[0]<r[1]){s=r[0];l=r[1]}else{s=r[1];l=r[0]}var u=a(p(s,n[0],n[1],i));var f=a(p(l,n[0],n[1],i));var c=[e*Math.cos(t),e*Math.sin(t)];return f.contains(c)&&!u.contains(c)}function f(e,t,r,n){var a,i;var o=n[0];var s=n[1];var l=y(Math.sin(t)-Math.sin(e));var u=y(Math.cos(t)-Math.cos(e));var f=Math.tan(r);var c=y(1/f);var v=l/u;var h=s-v*o;if(c){if(l&&u){a=h/(f-v);i=f*a}else if(u){a=s*c;i=s}else{a=o;i=o*f}}else{if(l&&u){a=0;i=h}else if(u){a=0;i=s}else{a=i=NaN}}return[a,i]}function c(e,t,r,n){var a=-t*r;var i=t*t+1;var o=2*(t*a-r);var s=a*a+r*r-e*e;var l=Math.sqrt(o*o-4*i*s);var u=(-o+l)/(2*i);var f=(-o-l)/(2*i);return[[u,t*u+a+n],[f,t*f+a+n]]}function v(e,t){var r=t.length;var n=new Array(r+1);var a;for(a=0;a<r;a++){var i=t[a];n[a]=[e*Math.cos(i),e*Math.sin(i)]}n[a]=n[0].slice();return n}function h(e,t,r,a){var s=a.length;var u=[];var c,v;function h(t){return[e*Math.cos(t),e*Math.sin(t)]}function p(e,t,r){return f(e,t,r,h(e))}function d(e){return n.mod(e,s)}function g(e){return o(e,[t,r])}var y=i(a,(function(e){return g(e)?l(e,t):Infinity}));var m=p(a[y],a[d(y-1)],t);u.push(m);for(c=y,v=0;v<s;c++,v++){var x=a[d(c)];if(!g(x))break;u.push(h(x))}var b=i(a,(function(e){return g(e)?l(e,r):Infinity}));var _=p(a[b],a[d(b+1)],r);u.push(_);u.push([0,0]);u.push(u[0].slice());return u}function p(e,t,r,a){return n.isFullCircle([t,r])?v(e,a):h(e,t,r,a)}function d(e,t,r,n){var a=Infinity;var i=Infinity;var o=p(e,t,r,n);for(var s=0;s<o.length;s++){var l=o[s];a=Math.min(a,l[0]);i=Math.min(i,-l[1])}return[a,i]}function g(e,t){var r=function(t){var r=s(t,e);return r>0?r:Infinity};var a=i(t,r);var o=n.mod(a+1,t.length);return[t[a],t[o]]}function y(e){return Math.abs(e)>1e-10?e:0}function m(e,t,r){t=t||0;r=r||0;var n=e.length;var a=new Array(n);for(var i=0;i<n;i++){var o=e[i];a[i]=[t+o[0],r-o[1]]}return a}function x(e,t,r,n,a,i){var o=p(e,t,r,n);return"M"+m(o,a,i).join("L")}function b(e,t,r,n,a,i,o){var s,l;if(e<t){s=e;l=t}else{s=t;l=e}var u=m(p(s,r,n,a),i,o);var f=m(p(l,r,n,a),i,o);return"M"+f.reverse().join("L")+"M"+u.join("L")}e.exports={isPtInsidePolygon:u,findPolygonOffset:d,findEnclosingVertexAngles:g,findIntersectionXY:f,findXYatLength:c,clampTiny:y,pathPolygon:x,pathPolygonAnnulus:b}},23580:function(e,t,r){"use strict";var n=r(27659).AU;var a=r(71828).counterRegex;var i=r(77997);var o=r(9813);var s=o.attr;var l=o.name;var u=a(l);var f={};f[s]={valType:"subplotid",dflt:l,editType:"calc"};function c(e){var t=e._fullLayout;var r=e.calcdata;var a=t._subplots[l];for(var o=0;o<a.length;o++){var s=a[o];var u=n(r,l,s);var f=t[s]._subplot;if(!f){f=i(e,s);t[s]._subplot=f}f.plot(u,t,e._promises)}}function v(e,t,r,n){var a=n._subplots[l]||[];var i=n._has&&n._has("gl");var o=t._has&&t._has("gl");var s=i&&!o;for(var u=0;u<a.length;u++){var f=a[u];var c=n[f]._subplot;if(!t[f]&&!!c){c.framework.remove();c.layers["radial-axis-title"].remove();for(var v in c.clipPaths){c.clipPaths[v].remove()}}if(s&&c._scene){c._scene.destroy();c._scene=null}}}e.exports={attr:s,name:l,idRoot:l,idRegex:u,attrRegex:u,attributes:f,layoutAttributes:r(73812),supplyLayoutDefaults:r(68993),plot:c,clean:v,toSVG:r(93612).toSVG}},73812:function(e,t,r){"use strict";var n=r(22399);var a=r(13838);var i=r(27670).Y;var o=r(71828).extendFlat;var s=r(30962).overrideAll;var l=s({color:a.color,showline:o({},a.showline,{dflt:true}),linecolor:a.linecolor,linewidth:a.linewidth,showgrid:o({},a.showgrid,{dflt:true}),gridcolor:a.gridcolor,gridwidth:a.gridwidth,griddash:a.griddash},"plot","from-root");var u=s({tickmode:a.minor.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:a.ticks,ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,ticklabelstep:a.ticklabelstep,showticklabels:a.showticklabels,labelalias:a.labelalias,showtickprefix:a.showtickprefix,tickprefix:a.tickprefix,showticksuffix:a.showticksuffix,ticksuffix:a.ticksuffix,showexponent:a.showexponent,exponentformat:a.exponentformat,minexponent:a.minexponent,separatethousands:a.separatethousands,tickfont:a.tickfont,tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,layer:a.layer},"plot","from-root");var f={visible:o({},a.visible,{dflt:true}),type:o({},a.type,{values:["-","linear","log","date","category"]}),autotypenumbers:a.autotypenumbers,autorangeoptions:{minallowed:a.autorangeoptions.minallowed,maxallowed:a.autorangeoptions.maxallowed,clipmin:a.autorangeoptions.clipmin,clipmax:a.autorangeoptions.clipmax,include:a.autorangeoptions.include,editType:"plot"},autorange:o({},a.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:o({},a.minallowed,{editType:"plot"}),maxallowed:o({},a.maxallowed,{editType:"plot"}),range:o({},a.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":false}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":false}}],editType:"plot"}),categoryorder:a.categoryorder,categoryarray:a.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:o({},a.title.text,{editType:"plot",dflt:""}),font:o({},a.title.font,{editType:"plot"}),editType:"plot"},hoverformat:a.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:a._deprecated.title,titlefont:a._deprecated.titlefont}};o(f,l,u);var c={visible:o({},a.visible,{dflt:true}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:true},autotypenumbers:a.autotypenumbers,categoryorder:a.categoryorder,categoryarray:a.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:a.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};o(c,l,u);e.exports={domain:i({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:n.background},radialaxis:f,angularaxis:c,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},68993:function(e,t,r){"use strict";var n=r(71828);var a=r(7901);var i=r(44467);var o=r(49119);var s=r(27659).NG;var l=r(26218);var u=r(38701);var f=r(96115);var c=r(89426);var v=r(15258);var h=r(92128);var p=r(23074);var d=r(4322);var g=r(73812);var y=r(12101);var m=r(9813);var x=m.axisNames;function b(e,t,r,o){var d=r("bgcolor");o.bgColor=a.combine(d,o.paper_bgcolor);var b=r("sector");r("hole");var w=s(o.fullData,m.name,o.id);var T=o.layoutOut;var k;function A(e,t){return r(k+"."+e,t)}for(var M=0;M<x.length;M++){k=x[M];if(!n.isPlainObject(e[k])){e[k]={}}var S=e[k];var E=i.newContainer(t,k);E._id=E._name=k;E._attr=o.id+"."+k;E._traceIndices=w.map((function(e){return e._expandedIndex}));var L=m.axisName2dataArray[k];var C=_(S,E,A,w,L,o);v(S,E,A,{axData:w,dataAttr:L});var I=A("visible");y(E,t,T);A("uirevision",t.uirevision);E._m=1;switch(k){case"radialaxis":A("minallowed");A("maxallowed");var P=A("range");var O=E.getAutorangeDflt(P);var D=A("autorange",O);var z;if(P&&(P[0]===null&&P[1]===null||(P[0]===null||P[1]===null)&&(D==="reversed"||D===true)||P[0]!==null&&(D==="min"||D==="max reversed")||P[1]!==null&&(D==="max"||D==="min reversed"))){P=undefined;delete E.range;E.autorange=true;z=true}if(!z){O=E.getAutorangeDflt(P);D=A("autorange",O)}S.autorange=D;if(D){p(A,D,P);if(C==="linear"||C==="-")A("rangemode");if(E.isReversed())E._m=-1}E.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(C==="date"){n.log("Polar plots do not support date angular axes yet.");for(var R=0;R<w.length;R++){w[R].visible=false}C=S.type=E.type="linear"}if(C==="linear"){A("thetaunit")}else{A("period")}var F=A("direction");A("rotation",{counterclockwise:0,clockwise:90}[F]);break}c(S,E,A,E.type,{tickSuffixDflt:E.thetaunit==="degrees"?"":undefined});if(I){var B;var N;var j;var U;var V=o.font||{};B=A("color");N=B===S.color?B:V.color;j=V.size;U=V.family;l(S,E,A,E.type);f(S,E,A,E.type,{font:{color:N,size:j,family:U}});u(S,E,A,{outerTicks:true});h(S,E,A,{dfltColor:B,bgColor:o.bgColor,blend:60,showLine:true,showGrid:true,noZeroLine:true,attributes:g[k]});A("layer");if(k==="radialaxis"){A("side");A("angle",b[0]);A("title.text");n.coerceFont(A,"title.font",{color:N,size:n.bigFont(j),family:U})}}if(C!=="category")A("hoverformat");E._input=S}if(t.angularaxis.type==="category"){r("gridshape")}}function _(e,t,r,n,a,i){var o=r("autotypenumbers",i.autotypenumbersDflt);var s=r("type");if(s==="-"){var l;for(var u=0;u<n.length;u++){if(n[u].visible){l=n[u];break}}if(l&&l[a]){t.type=d(l[a],"gregorian",{noMultiCategory:true,autotypenumbers:o})}if(t.type==="-"){t.type="linear"}else{e.type=t.type}}return t.type}e.exports=function e(t,r,n){o(t,r,n,{type:m.name,attributes:g,handleDefaults:b,font:r.font,autotypenumbersDflt:r.autotypenumbers,paper_bgcolor:r.paper_bgcolor,fullData:n,layoutOut:r})}},77997:function(e,t,r){"use strict";var n=r(39898);var a=r(84267);var i=r(73972);var o=r(71828);var s=o.strRotate;var l=o.strTranslate;var u=r(7901);var f=r(91424);var c=r(74875);var v=r(89298);var h=r(21994);var p=r(12101);var d=r(71739).doAutoRange;var g=r(29323);var y=r(28569);var m=r(30211);var x=r(92998);var b=r(47322).prepSelect;var _=r(47322).selectOnClick;var w=r(47322).clearOutline;var T=r(6964);var k=r(33306);var A=r(61549).redrawReglTraces;var M=r(18783).MID_SHIFT;var S=r(9813);var E=r(10869);var L=r(23893);var C=L.smith;var I=L.reactanceArc;var P=L.resistanceArc;var O=L.smithTransform;var D=o._;var z=o.mod;var R=o.deg2rad;var F=o.rad2deg;function B(e,t,r){this.isSmith=r||false;this.id=t;this.gd=e;this._hasClipOnAxisFalse=null;this.vangles=null;this.radialAxisAngle=null;this.traceHash={};this.layers={};this.clipPaths={};this.clipIds={};this.viewInitial={};var n=e._fullLayout;var a="clip"+n._uid+t;this.clipIds.forTraces=a+"-for-traces";this.clipPaths.forTraces=n._clips.append("clipPath").attr("id",this.clipIds.forTraces);this.clipPaths.forTraces.append("path");this.framework=n["_"+(r?"smith":"polar")+"layer"].append("g").attr("class",t);this.getHole=function(e){return this.isSmith?0:e.hole};this.getSector=function(e){return this.isSmith?[0,360]:e.sector};this.getRadial=function(e){return this.isSmith?e.realaxis:e.radialaxis};this.getAngular=function(e){return this.isSmith?e.imaginaryaxis:e.angularaxis};if(!r){this.radialTickLayout=null;this.angularTickLayout=null}}var N=B.prototype;e.exports=function e(t,r,n){return new B(t,r,n)};N.plot=function(e,t){var r=this;var n=t[r.id];var a=false;for(var i=0;i<e.length;i++){var o=e[i][0].trace;if(o.cliponaxis===false){a=true;break}}r._hasClipOnAxisFalse=a;r.updateLayers(t,n);r.updateLayout(t,n);c.generalUpdatePerTraceModule(r.gd,r,e,n);r.updateFx(t,n);if(r.isSmith){delete n.realaxis.range;delete n.imaginaryaxis.range}};N.updateLayers=function(e,t){var r=this;var a=r.isSmith;var i=r.layers;var o=r.getRadial(t);var s=r.getAngular(t);var l=S.layerNames;var u=l.indexOf("frontplot");var f=l.slice(0,u);var c=s.layer==="below traces";var v=o.layer==="below traces";if(c)f.push("angular-line");if(v)f.push("radial-line");if(c)f.push("angular-axis");if(v)f.push("radial-axis");f.push("frontplot");if(!c)f.push("angular-line");if(!v)f.push("radial-line");if(!c)f.push("angular-axis");if(!v)f.push("radial-axis");var h=(a?"smith":"polar")+"sublayer";var p=r.framework.selectAll("."+h).data(f,String);p.enter().append("g").attr("class",(function(e){return h+" "+e})).each((function(e){var t=i[e]=n.select(this);switch(e){case"frontplot":if(!a){t.append("g").classed("barlayer",true)}t.append("g").classed("scatterlayer",true);break;case"backplot":t.append("g").classed("maplayer",true);break;case"plotbg":i.bg=t.append("path");break;case"radial-grid":t.style("fill","none");break;case"angular-grid":t.style("fill","none");break;case"radial-line":t.append("line").style("fill","none");break;case"angular-line":t.append("path").style("fill","none");break}}));p.order()};N.updateLayout=function(e,t){var r=this;var n=r.layers;var a=e._size;var i=r.getRadial(t);var o=r.getAngular(t);var s=t.domain.x;var c=t.domain.y;r.xOffset=a.l+a.w*s[0];r.yOffset=a.t+a.h*(1-c[1]);var v=r.xLength=a.w*(s[1]-s[0]);var h=r.yLength=a.h*(c[1]-c[0]);var p=r.getSector(t);r.sectorInRad=p.map(R);var d=r.sectorBBox=U(p);var g=d[2]-d[0];var y=d[3]-d[1];var m=h/v;var x=Math.abs(y/g);var b,_;var w,T;var k;if(m>x){b=v;_=v*x;k=(h-_)/a.h/2;w=[s[0],s[1]];T=[c[0]+k,c[1]-k]}else{b=h/x;_=h;k=(v-b)/a.w/2;w=[s[0]+k,s[1]-k];T=[c[0],c[1]]}r.xLength2=b;r.yLength2=_;r.xDomain2=w;r.yDomain2=T;var A=r.xOffset2=a.l+a.w*w[0];var M=r.yOffset2=a.t+a.h*(1-T[1]);var S=r.radius=b/g;var E=r.innerRadius=r.getHole(t)*S;var L=r.cx=A-S*d[0];var C=r.cy=M+S*d[3];var I=r.cxx=L-A;var P=r.cyy=C-M;var O=i.side;var D;if(O==="counterclockwise"){D=O;O="top"}else if(O==="clockwise"){D=O;O="bottom"}r.radialAxis=r.mockAxis(e,t,i,{_id:"x",side:O,_trueSide:D,domain:[E/a.w,S/a.w]});r.angularAxis=r.mockAxis(e,t,o,{side:"right",domain:[0,Math.PI],autorange:false});r.doAutoRange(e,t);r.updateAngularAxis(e,t);r.updateRadialAxis(e,t);r.updateRadialAxisTitle(e,t);r.xaxis=r.mockCartesianAxis(e,t,{_id:"x",domain:w});r.yaxis=r.mockCartesianAxis(e,t,{_id:"y",domain:T});var z=r.pathSubplot();r.clipPaths.forTraces.select("path").attr("d",z).attr("transform",l(I,P));n.frontplot.attr("transform",l(A,M)).call(f.setClipUrl,r._hasClipOnAxisFalse?null:r.clipIds.forTraces,r.gd);n.bg.attr("d",z).attr("transform",l(L,C)).call(u.fill,t.bgcolor)};N.mockAxis=function(e,t,r,n){var a=o.extendFlat({},r,n);p(a,t,e);return a};N.mockCartesianAxis=function(e,t,r){var n=this;var a=n.isSmith;var i=r._id;var s=o.extendFlat({type:"linear"},r);h(s,e);var l={x:[0,2],y:[1,3]};s.setRange=function(){var e=n.sectorBBox;var r=l[i];var a=n.radialAxis._rl;var o=(a[1]-a[0])/(1-n.getHole(t));s.range=[e[r[0]]*o,e[r[1]]*o]};s.isPtWithinRange=i==="x"&&!a?function(e){return n.isPtInside(e)}:function(){return true};s.setRange();s.setScale();return s};N.doAutoRange=function(e,t){var r=this;var n=r.gd;var a=r.radialAxis;var i=r.getRadial(t);d(n,a);var o=a.range;i.range=o.slice();i._input.range=o.slice();a._rl=[a.r2l(o[0],null,"gregorian"),a.r2l(o[1],null,"gregorian")]};N.updateRadialAxis=function(e,t){var r=this;var n=r.gd;var a=r.layers;var i=r.radius;var f=r.innerRadius;var c=r.cx;var h=r.cy;var p=r.getRadial(t);var d=z(r.getSector(t)[0],360);var g=r.radialAxis;var y=f<i;var m=r.isSmith;if(!m){r.fillViewInitialKey("radialaxis.angle",p.angle);r.fillViewInitialKey("radialaxis.range",g.range.slice());g.setGeometry()}if(g.tickangle==="auto"&&d>90&&d<=270){g.tickangle=180}var x=m?function(e){var t=O(r,C([e.x,0]));return l(t[0]-c,t[1]-h)}:function(e){return l(g.l2p(e.x)+f,0)};var b=m?function(e){return P(r,e.x,-Infinity,Infinity)}:function(e){return r.pathArc(g.r2p(e.x)+f)};var _=j(p);if(r.radialTickLayout!==_){a["radial-axis"].selectAll(".xtick").remove();r.radialTickLayout=_}if(y){g.setScale();var w=0;var T=m?(g.tickvals||[]).filter((function(e){return e>=0})).map((function(e){return v.tickText(g,e,true,false)})):v.calcTicks(g);var k=m?T:v.clipEnds(g,T);var A=v.getTickSigns(g)[2];if(m){if(g.ticks==="top"&&g.side==="bottom"||g.ticks==="bottom"&&g.side==="top"){A=-A}if(g.ticks==="top"&&g.side==="top")w=-g.ticklen;if(g.ticks==="bottom"&&g.side==="bottom")w=g.ticklen}v.drawTicks(n,g,{vals:T,layer:a["radial-axis"],path:v.makeTickPath(g,0,A),transFn:x,crisp:false});v.drawGrid(n,g,{vals:k,layer:a["radial-grid"],path:b,transFn:o.noop,crisp:false});v.drawLabels(n,g,{vals:T,layer:a["radial-axis"],transFn:x,labelFns:v.makeLabelFns(g,w)})}var M=r.radialAxisAngle=r.vangles?F(V(R(p.angle),r.vangles)):p.angle;var S=l(c,h);var E=S+s(-M);H(a["radial-axis"],y&&(p.showticklabels||p.ticks),{transform:E});H(a["radial-grid"],y&&p.showgrid,{transform:m?"":S});H(a["radial-line"].select("line"),y&&p.showline,{x1:m?-i:f,y1:0,x2:i,y2:0,transform:E}).attr("stroke-width",p.linewidth).call(u.stroke,p.linecolor)};N.updateRadialAxisTitle=function(e,t,r){if(this.isSmith)return;var n=this;var a=n.gd;var i=n.radius;var o=n.cx;var s=n.cy;var l=n.getRadial(t);var u=n.id+"title";var c=0;if(l.title){var v=f.bBox(n.layers["radial-axis"].node()).height;var h=l.title.font.size;var p=l.side;c=p==="top"?h:p==="counterclockwise"?-(v+h*.4):v+h*.8}var d=r!==undefined?r:n.radialAxisAngle;var g=R(d);var y=Math.cos(g);var m=Math.sin(g);var b=o+i/2*y+c*m;var _=s-i/2*m+c*y;n.layers["radial-axis-title"]=x.draw(a,u,{propContainer:l,propName:n.id+".radialaxis.title",placeholder:D(a,"Click to enter radial axis title"),attributes:{x:b,y:_,"text-anchor":"middle"},transform:{rotate:-d}})};N.updateAngularAxis=function(e,t){var r=this;var n=r.gd;var a=r.layers;var i=r.radius;var f=r.innerRadius;var c=r.cx;var h=r.cy;var p=r.getAngular(t);var d=r.angularAxis;var g=r.isSmith;if(!g){r.fillViewInitialKey("angularaxis.rotation",p.rotation);d.setGeometry();d.setScale()}var y=g?function(e){var t=O(r,C([0,e.x]));return Math.atan2(t[0]-c,t[1]-h)-Math.PI/2}:function(e){return d.t2g(e.x)};if(d.type==="linear"&&d.thetaunit==="radians"){d.tick0=F(d.tick0);d.dtick=F(d.dtick)}var m=function(e){return l(c+i*Math.cos(e),h-i*Math.sin(e))};var x=g?function(e){var t=O(r,C([0,e.x]));return l(t[0],t[1])}:function(e){return m(y(e))};var b=g?function(e){var t=O(r,C([0,e.x]));var n=Math.atan2(t[0]-c,t[1]-h)-Math.PI/2;return l(t[0],t[1])+s(-F(n))}:function(e){var t=y(e);return m(t)+s(-F(t))};var _=g?function(e){return I(r,e.x,0,Infinity)}:function(e){var t=y(e);var r=Math.cos(t);var n=Math.sin(t);return"M"+[c+f*r,h-f*n]+"L"+[c+i*r,h-i*n]};var w=v.makeLabelFns(d,0);var T=w.labelStandoff;var k={};k.xFn=function(e){var t=y(e);return Math.cos(t)*T};k.yFn=function(e){var t=y(e);var r=Math.sin(t)>0?.2:1;return-Math.sin(t)*(T+e.fontSize*r)+Math.abs(Math.cos(t))*(e.fontSize*M)};k.anchorFn=function(e){var t=y(e);var r=Math.cos(t);return Math.abs(r)<.1?"middle":r>0?"start":"end"};k.heightFn=function(e,t,r){var n=y(e);return-.5*(1+Math.sin(n))*r};var A=j(p);if(r.angularTickLayout!==A){a["angular-axis"].selectAll("."+d._id+"tick").remove();r.angularTickLayout=A}var S=g?[Infinity].concat(d.tickvals||[]).map((function(e){return v.tickText(d,e,true,false)})):v.calcTicks(d);if(g){S[0].text="";S[0].fontSize*=1.75}var E;if(t.gridshape==="linear"){E=S.map(y);if(o.angleDelta(E[0],E[1])<0){E=E.slice().reverse()}}else{E=null}r.vangles=E;if(d.type==="category"){S=S.filter((function(e){return o.isAngleInsideSector(y(e),r.sectorInRad)}))}if(d.visible){var L=d.ticks==="inside"?-1:1;var P=(d.linewidth||1)/2;v.drawTicks(n,d,{vals:S,layer:a["angular-axis"],path:"M"+L*P+",0h"+L*d.ticklen,transFn:b,crisp:false});v.drawGrid(n,d,{vals:S,layer:a["angular-grid"],path:_,transFn:o.noop,crisp:false});v.drawLabels(n,d,{vals:S,layer:a["angular-axis"],repositionOnUpdate:true,transFn:x,labelFns:k})}H(a["angular-line"].select("path"),p.showline,{d:r.pathSubplot(),transform:l(c,h)}).attr("stroke-width",p.linewidth).call(u.stroke,p.linecolor)};N.updateFx=function(e,t){if(!this.gd._context.staticPlot){var r=!this.isSmith;if(r){this.updateAngularDrag(e);this.updateRadialDrag(e,t,0);this.updateRadialDrag(e,t,1)}this.updateHoverAndMainDrag(e)}};N.updateHoverAndMainDrag=function(e){var t=this;var r=t.isSmith;var s=t.gd;var u=t.layers;var f=e._zoomlayer;var c=S.MINZOOM;var v=S.OFFEDGE;var h=t.radius;var p=t.innerRadius;var d=t.cx;var x=t.cy;var T=t.cxx;var k=t.cyy;var A=t.sectorInRad;var M=t.vangles;var L=t.radialAxis;var C=E.clampTiny;var I=E.findXYatLength;var P=E.findEnclosingVertexAngles;var O=S.cornerHalfWidth;var D=S.cornerLen/2;var z;var R;var F=g.makeDragger(u,"path","maindrag",e.dragmode===false?"none":"crosshair");n.select(F).attr("d",t.pathSubplot()).attr("transform",l(d,x));F.onmousemove=function(e){m.hover(s,e,t.id);s._fullLayout._lasthover=F;s._fullLayout._hoversubplot=t.id};F.onmouseout=function(e){if(s._dragging)return;y.unhover(s,e)};var B={element:F,gd:s,subplot:t.id,plotinfo:{id:t.id,xaxis:t.xaxis,yaxis:t.yaxis},xaxes:[t.xaxis],yaxes:[t.yaxis]};var N,j;var U,V;var H,q,G;var Z,Y;function W(e,t){return Math.sqrt(e*e+t*t)}function X(e,t){return W(e-T,t-k)}function J(e,t){return Math.atan2(k-t,e-T)}function K(e,t){return[e*Math.cos(t),e*Math.sin(-t)]}function $(e,r){if(e===0)return t.pathSector(2*O);var n=D/e;var a=r-n;var i=r+n;var o=Math.max(0,Math.min(e,h));var s=o-O;var l=o+O;return"M"+K(s,a)+"A"+[s,s]+" 0,0,0 "+K(s,i)+"L"+K(l,i)+"A"+[l,l]+" 0,0,1 "+K(l,a)+"Z"}function Q(e,r,n){if(e===0)return t.pathSector(2*O);var a=K(e,r);var i=K(e,n);var o=C((a[0]+i[0])/2);var s=C((a[1]+i[1])/2);var l,u;if(o&&s){var f=s/o;var c=-1/f;var v=I(O,f,o,s);l=I(D,c,v[0][0],v[0][1]);u=I(D,c,v[1][0],v[1][1])}else{var h,p;if(s){h=D;p=O}else{h=O;p=D}l=[[o-h,s-p],[o+h,s-p]];u=[[o-h,s+p],[o+h,s+p]]}return"M"+l.join("L")+"L"+u.reverse().join("L")+"Z"}function ee(){U=null;V=null;H=t.pathSubplot();q=false;var e=s._fullLayout[t.id];G=a(e.bgcolor).getLuminance();Z=g.makeZoombox(f,G,d,x,H);Z.attr("fill-rule","evenodd");Y=g.makeCorners(f,d,x);w(s)}function te(e,t){t=Math.max(Math.min(t,h),p);if(e<v)e=0;else if(h-e<v)e=h;else if(t<v)t=0;else if(h-t<v)t=h;if(Math.abs(t-e)>c){if(e<t){U=e;V=t}else{U=t;V=e}return true}else{U=null;V=null;return false}}function re(e,t){e=e||H;t=t||"M0,0Z";Z.attr("d",e);Y.attr("d",t);g.transitionZoombox(Z,Y,q,G);q=true;var r={};se(r);s.emit("plotly_relayouting",r)}function ne(e,r){e=e*z;r=r*R;var n=N+e;var a=j+r;var i=X(N,j);var o=Math.min(X(n,a),h);var s=J(N,j);var l;var u;if(te(i,o)){l=H+t.pathSector(V);if(U)l+=t.pathSector(U);u=$(U,s)+$(V,s)}re(l,u)}function ae(e,t,r,n){var a=E.findIntersectionXY(r,n,r,[e-T,k-t]);return W(a[0],a[1])}function ie(e,r){var n=N+e;var a=j+r;var i=J(N,j);var o=J(n,a);var s=P(i,M);var l=P(o,M);var u=ae(N,j,s[0],s[1]);var f=Math.min(ae(n,a,l[0],l[1]),h);var c;var v;if(te(u,f)){c=H+t.pathSector(V);if(U)c+=t.pathSector(U);v=[Q(U,s[0],s[1]),Q(V,s[0],s[1])].join(" ")}re(c,v)}function oe(){g.removeZoombox(s);if(U===null||V===null)return;var e={};se(e);g.showDoubleClickNotifier(s);i.call("_guiRelayout",s,e)}function se(e){var r=L._rl;var n=(r[1]-r[0])/(1-p/h)/h;var a=[r[0]+(U-p)*n,r[0]+(V-p)*n];e[t.id+".radialaxis.range"]=a}function le(e,r){var n=s._fullLayout.clickmode;g.removeZoombox(s);if(e===2){var a={};for(var o in t.viewInitial){a[t.id+"."+o]=t.viewInitial[o]}s.emit("plotly_doubleclick",null);i.call("_guiRelayout",s,a)}if(n.indexOf("select")>-1&&e===1){_(r,s,[t.xaxis],[t.yaxis],t.id,B)}if(n.indexOf("event")>-1){m.click(s,r,t.id)}}B.prepFn=function(e,t,n){var a=s._fullLayout.dragmode;var i=F.getBoundingClientRect();s._fullLayout._calcInverseTransform(s);var l=s._fullLayout._invTransform;z=s._fullLayout._invScaleX;R=s._fullLayout._invScaleY;var u=o.apply3DTransform(l)(t-i.left,n-i.top);N=u[0];j=u[1];if(M){var f=E.findPolygonOffset(h,A[0],A[1],M);N+=T+f[0];j+=k+f[1]}switch(a){case"zoom":B.clickFn=le;if(!r){if(M){B.moveFn=ie}else{B.moveFn=ne}B.doneFn=oe;ee(e,t,n)}break;case"select":case"lasso":b(e,t,n,B,a);break}};y.init(B)};N.updateRadialDrag=function(e,t,r){var a=this;var u=a.gd;var f=a.layers;var c=a.radius;var v=a.innerRadius;var h=a.cx;var p=a.cy;var d=a.radialAxis;var m=S.radialDragBoxSize;var x=m/2;if(!d.visible)return;var b=R(a.radialAxisAngle);var _=d._rl;var T=_[0];var M=_[1];var E=_[r];var L=.75*(_[1]-_[0])/(1-a.getHole(t))/c;var C,I,P;if(r){C=h+(c+x)*Math.cos(b);I=p-(c+x)*Math.sin(b);P="radialdrag"}else{C=h+(v-x)*Math.cos(b);I=p-(v-x)*Math.sin(b);P="radialdrag-inner"}var O=g.makeRectDragger(f,P,"crosshair",-x,-x,m,m);var D={element:O,gd:u};if(e.dragmode===false){D.dragmode=false}H(n.select(O),d.visible&&v<c,{transform:l(C,I)});var z;var B;var N;function j(e,t){if(z){z(e,t)}else{var r=[e,-t];var n=[Math.cos(b),Math.sin(b)];var a=Math.abs(o.dot(r,n)/Math.sqrt(o.dot(r,r)));if(!isNaN(a)){z=a<.5?G:Z}}var i={};U(i);u.emit("plotly_relayouting",i)}function U(e){if(B!==null){e[a.id+".radialaxis.angle"]=B}else if(N!==null){e[a.id+".radialaxis.range["+r+"]"]=N}}function q(){if(B!==null){i.call("_guiRelayout",u,a.id+".radialaxis.angle",B)}else if(N!==null){i.call("_guiRelayout",u,a.id+".radialaxis.range["+r+"]",N)}}function G(e,t){if(r===0)return;var n=C+e;var i=I+t;B=Math.atan2(p-i,n-h);if(a.vangles)B=V(B,a.vangles);B=F(B);var o=l(h,p)+s(-B);f["radial-axis"].attr("transform",o);f["radial-line"].select("line").attr("transform",o);var u=a.gd._fullLayout;var c=u[a.id];a.updateRadialAxisTitle(u,c,B)}function Z(e,t){var n=o.dot([e,-t],[Math.cos(b),Math.sin(b)]);N=E-L*n;if(L>0!==(r?N>T:N<M)){N=null;return}var s=u._fullLayout;var l=s[a.id];d.range[r]=N;d._rl[r]=N;a.updateRadialAxis(s,l);a.xaxis.setRange();a.xaxis.setScale();a.yaxis.setRange();a.yaxis.setScale();var f=false;for(var c in a.traceHash){var v=a.traceHash[c];var h=o.filterVisible(v);var p=v[0][0].trace._module;p.plot(u,a,h,l);if(i.traceIs(c,"gl")&&h.length)f=true}if(f){k(u);A(u)}}D.prepFn=function(){z=null;B=null;N=null;D.moveFn=j;D.doneFn=q;w(u)};D.clampFn=function(e,t){if(Math.sqrt(e*e+t*t)<S.MINDRAG){e=0;t=0}return[e,t]};y.init(D)};N.updateAngularDrag=function(e){var t=this;var r=t.gd;var a=t.layers;var u=t.radius;var c=t.angularAxis;var v=t.cx;var h=t.cy;var p=t.cxx;var d=t.cyy;var m=S.angularDragBoxSize;var x=g.makeDragger(a,"path","angulardrag",e.dragmode===false?"none":"move");var b={element:x,gd:r};if(e.dragmode===false){b.dragmode=false}else{n.select(x).attr("d",t.pathAnnulus(u,u+m)).attr("transform",l(v,h)).call(T,"move")}function _(e,t){return Math.atan2(d+m-t,e-p-m)}var M=a.frontplot.select(".scatterlayer").selectAll(".trace");var E=M.selectAll(".point");var L=M.selectAll(".textpoint");var C,I;var P,O;var D;var z;function R(u,g){var y=t.gd._fullLayout;var m=y[t.id];var x=C+u*e._invScaleX;var b=I+g*e._invScaleY;var w=_(x,b);var T=F(w-z);O=P+T;a.frontplot.attr("transform",l(t.xOffset2,t.yOffset2)+s([-T,p,d]));if(t.vangles){D=t.radialAxisAngle+T;var S=l(v,h)+s(-T);var R=l(v,h)+s(-D);a.bg.attr("transform",S);a["radial-grid"].attr("transform",S);a["radial-axis"].attr("transform",R);a["radial-line"].select("line").attr("transform",R);t.updateRadialAxisTitle(y,m,D)}else{t.clipPaths.forTraces.select("path").attr("transform",l(p,d)+s(T))}E.each((function(){var e=n.select(this);var t=f.getTranslate(e);e.attr("transform",l(t.x,t.y)+s([T]))}));L.each((function(){var e=n.select(this);var t=e.select("text");var r=f.getTranslate(e);e.attr("transform",s([T,t.attr("x"),t.attr("y")])+l(r.x,r.y))}));c.rotation=o.modHalf(O,360);t.updateAngularAxis(y,m);if(t._hasClipOnAxisFalse&&!o.isFullCircle(t.sectorInRad)){M.call(f.hideOutsideRangePoints,t)}var N=false;for(var j in t.traceHash){if(i.traceIs(j,"gl")){var U=t.traceHash[j];var V=o.filterVisible(U);var H=U[0][0].trace._module;H.plot(r,t,V,m);if(V.length)N=true}}if(N){k(r);A(r)}var q={};B(q);r.emit("plotly_relayouting",q)}function B(e){e[t.id+".angularaxis.rotation"]=O;if(t.vangles){e[t.id+".radialaxis.angle"]=D}}function N(){L.select("text").attr("transform",null);var e={};B(e);i.call("_guiRelayout",r,e)}b.prepFn=function(n,a,i){var s=e[t.id];P=s.angularaxis.rotation;var l=x.getBoundingClientRect();C=a-l.left;I=i-l.top;r._fullLayout._calcInverseTransform(r);var u=o.apply3DTransform(e._invTransform)(C,I);C=u[0];I=u[1];z=_(C,I);b.moveFn=R;b.doneFn=N;w(r)};if(t.vangles&&!o.isFullCircle(t.sectorInRad)){b.prepFn=o.noop;T(n.select(x),null)}y.init(b)};N.isPtInside=function(e){if(this.isSmith)return true;var t=this.sectorInRad;var r=this.vangles;var n=this.angularAxis.c2g(e.theta);var a=this.radialAxis;var i=a.c2l(e.r);var s=a._rl;var l=r?E.isPtInsidePolygon:o.isPtInsideSector;return l(i,n,s,t,r)};N.pathArc=function(e){var t=this.sectorInRad;var r=this.vangles;var n=r?E.pathPolygon:o.pathArc;return n(e,t[0],t[1],r)};N.pathSector=function(e){var t=this.sectorInRad;var r=this.vangles;var n=r?E.pathPolygon:o.pathSector;return n(e,t[0],t[1],r)};N.pathAnnulus=function(e,t){var r=this.sectorInRad;var n=this.vangles;var a=n?E.pathPolygonAnnulus:o.pathAnnulus;return a(e,t,r[0],r[1],n)};N.pathSubplot=function(){var e=this.innerRadius;var t=this.radius;return e?this.pathAnnulus(e,t):this.pathSector(t)};N.fillViewInitialKey=function(e,t){if(!(e in this.viewInitial)){this.viewInitial[e]=t}};function j(e){var t=e.ticks+String(e.ticklen)+String(e.showticklabels);if("side"in e)t+=e.side;return t}function U(e){var t=e[0];var r=e[1];var n=r-t;var a=z(t,360);var i=a+n;var o=Math.cos(R(a));var s=Math.sin(R(a));var l=Math.cos(R(i));var u=Math.sin(R(i));var f,c,v,h;if(a<=90&&i>=90||a>90&&i>=450){h=1}else if(s<=0&&u<=0){h=0}else{h=Math.max(s,u)}if(a<=180&&i>=180||a>180&&i>=540){f=-1}else if(o>=0&&l>=0){f=0}else{f=Math.min(o,l)}if(a<=270&&i>=270||a>270&&i>=630){c=-1}else if(s>=0&&u>=0){c=0}else{c=Math.min(s,u)}if(i>=360){v=1}else if(o<=0&&l<=0){v=0}else{v=Math.max(o,l)}return[f,c,v,h]}function V(e,t){var r=function(t){return o.angleDist(e,t)};var n=o.findIndexOfMin(t,r);return t[n]}function H(e,t,r){if(t){e.attr("display",null);e.attr(r)}else if(e){e.attr("display","none")}return e}},12101:function(e,t,r){"use strict";var n=r(71828);var a=r(21994);var i=n.deg2rad;var o=n.rad2deg;e.exports=function e(t,r,n){a(t,n);switch(t._id){case"x":case"radialaxis":s(t,r);break;case"angularaxis":f(t,r);break}};function s(e,t){var r=t._subplot;e.setGeometry=function(){var t=e._rl[0];var n=e._rl[1];var a=r.innerRadius;var i=(r.radius-a)/(n-t);var o=a/i;var s=t>n?function(e){return e<=0}:function(e){return e>=0};e.c2g=function(r){var n=e.c2l(r)-t;return(s(n)?n:0)+o};e.g2c=function(r){return e.l2c(r+t-o)};e.g2p=function(e){return e*i};e.c2p=function(t){return e.g2p(e.c2g(t))}}}function l(e,t){return t==="degrees"?i(e):e}function u(e,t){return t==="degrees"?o(e):e}function f(e,t){var r=e.type;if(r==="linear"){var a=e.d2c;var s=e.c2d;e.d2c=function(e,t){return l(a(e),t)};e.c2d=function(e,t){return s(u(e,t))}}e.makeCalcdata=function(t,a){var i=t[a];var o=t._length;var s,l;var u=function(r){return e.d2c(r,t.thetaunit)};if(i){if(n.isTypedArray(i)&&r==="linear"){if(o===i.length){return i}else if(i.subarray){return i.subarray(0,o)}}s=new Array(o);for(l=0;l<o;l++){s[l]=u(i[l])}}else{var f=a+"0";var c="d"+a;var v=f in t?u(t[f]):0;var h=t[c]?u(t[c]):(e.period||2*Math.PI)/o;s=new Array(o);for(l=0;l<o;l++){s[l]=v+l*h}}return s};e.setGeometry=function(){var a=t.sector;var s=a.map(i);var l={clockwise:-1,counterclockwise:1}[e.direction];var u=i(e.rotation);var f=function(e){return l*e+u};var c=function(e){return(e-u)/l};var v,h;var p,d;switch(r){case"linear":h=v=n.identity;d=i;p=o;e.range=n.isFullCircle(s)?[a[0],a[0]+360]:s.map(c).map(o);break;case"category":var g=e._categories.length;var y=e.period?Math.max(e.period,g):g;if(y===0)y=1;h=d=function(e){return e*2*Math.PI/y};v=p=function(e){return e*y/Math.PI/2};e.range=[0,y];break}e.c2g=function(e){return f(h(e))};e.g2c=function(e){return v(c(e))};e.t2g=function(e){return f(d(e))};e.g2t=function(e){return p(c(e))}}}},39779:function(e){"use strict";e.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},23893:function(e){"use strict";function t(e){return e<0?-1:e>0?1:0}function r(e){var t=e[0];var r=e[1];if(!isFinite(t)||!isFinite(r))return[1,0];var n=(t+1)*(t+1)+r*r;return[(t*t+r*r-1)/n,2*r/n]}function n(e,t){var r=t[0];var n=t[1];return[r*e.radius+e.cx,-n*e.radius+e.cy]}function a(e,t){return t*e.radius}function i(e,t,i,o){var s=n(e,r([i,t]));var l=s[0];var u=s[1];var f=n(e,r([o,t]));var c=f[0];var v=f[1];if(t===0){return["M"+l+","+u,"L"+c+","+v].join(" ")}var h=a(e,1/Math.abs(t));return["M"+l+","+u,"A"+h+","+h+" 0 0,"+(t<0?1:0)+" "+c+","+v].join(" ")}function o(e,i,o,s){var l=a(e,1/(i+1));var u=n(e,r([i,o]));var f=u[0];var c=u[1];var v=n(e,r([i,s]));var h=v[0];var p=v[1];if(t(o)!==t(s)){var d=n(e,r([i,0]));var g=d[0];var y=d[1];return["M"+f+","+c,"A"+l+","+l+" 0 0,"+(0<o?0:1)+" "+g+","+y,"A"+l+","+l+" 0 0,"+(s<0?0:1)+h+","+p].join(" ")}return["M"+f+","+c,"A"+l+","+l+" 0 0,"+(s<o?0:1)+" "+h+","+p].join(" ")}e.exports={smith:r,reactanceArc:i,resistanceArc:o,smithTransform:n}},7504:function(e,t,r){"use strict";var n=r(27659).AU;var a=r(71828).counterRegex;var i=r(77997);var o=r(39779);var s=o.attr;var l=o.name;var u=a(l);var f={};f[s]={valType:"subplotid",dflt:l,editType:"calc"};function c(e){var t=e._fullLayout;var r=e.calcdata;var a=t._subplots[l];for(var o=0;o<a.length;o++){var s=a[o];var u=n(r,l,s);var f=t[s]._subplot;if(!f){f=i(e,s,true);t[s]._subplot=f}f.plot(u,t,e._promises)}}function v(e,t,r,n){var a=n._subplots[l]||[];for(var i=0;i<a.length;i++){var o=a[i];var s=n[o]._subplot;if(!t[o]&&!!s){s.framework.remove();for(var u in s.clipPaths){s.clipPaths[u].remove()}}}}e.exports={attr:s,name:l,idRoot:l,idRegex:u,attrRegex:u,attributes:f,layoutAttributes:r(33419),supplyLayoutDefaults:r(9558),plot:c,clean:v,toSVG:r(93612).toSVG}},33419:function(e,t,r){"use strict";var n=r(22399);var a=r(13838);var i=r(27670).Y;var o=r(71828).extendFlat;var s=r(30962).overrideAll;var l=s({color:a.color,showline:o({},a.showline,{dflt:true}),linecolor:a.linecolor,linewidth:a.linewidth,showgrid:o({},a.showgrid,{dflt:true}),gridcolor:a.gridcolor,gridwidth:a.gridwidth,griddash:a.griddash},"plot","from-root");var u=s({ticklen:a.ticklen,tickwidth:o({},a.tickwidth,{dflt:2}),tickcolor:a.tickcolor,showticklabels:a.showticklabels,labelalias:a.labelalias,showtickprefix:a.showtickprefix,tickprefix:a.tickprefix,showticksuffix:a.showticksuffix,ticksuffix:a.ticksuffix,tickfont:a.tickfont,tickformat:a.tickformat,hoverformat:a.hoverformat,layer:a.layer},"plot","from-root");var f=o({visible:o({},a.visible,{dflt:true}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:o({},a.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},l,u);var c=o({visible:o({},a.visible,{dflt:true}),tickvals:{valType:"data_array",editType:"plot"},ticks:a.ticks,editType:"calc"},l,u);e.exports={domain:i({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:n.background},realaxis:f,imaginaryaxis:c,editType:"calc"}},9558:function(e,t,r){"use strict";var n=r(71828);var a=r(7901);var i=r(44467);var o=r(49119);var s=r(27659).NG;var l=r(89426);var u=r(96115);var f=r(92128);var c=r(21994);var v=r(33419);var h=r(39779);var p=h.axisNames;var d=y((function(e){return e.slice().reverse().map((function(e){return-e})).concat([0]).concat(e)}),String);function g(e,t,r,o){var g=r("bgcolor");o.bgColor=a.combine(g,o.paper_bgcolor);var y=s(o.fullData,h.name,o.id);var m=o.layoutOut;var x;function b(e,t){return r(x+"."+e,t)}for(var _=0;_<p.length;_++){x=p[_];if(!n.isPlainObject(e[x])){e[x]={}}var w=e[x];var T=i.newContainer(t,x);T._id=T._name=x;T._attr=o.id+"."+x;T._traceIndices=y.map((function(e){return e._expandedIndex}));var k=b("visible");T.type="linear";c(T,m);l(w,T,b,T.type);if(k){var A=x==="realaxis";if(A)b("side");if(A){b("tickvals")}else{var M=d(t.realaxis.tickvals||v.realaxis.tickvals.dflt);b("tickvals",M)}var S;var E;var L;var C;var I=o.font||{};if(k){S=b("color");E=S===w.color?S:I.color;L=I.size;C=I.family}u(w,T,b,T.type,{noTicklabelstep:true,noAng:!A,noExp:true,font:{color:E,size:L,family:C}});n.coerce2(e,t,v,x+".ticklen");n.coerce2(e,t,v,x+".tickwidth");n.coerce2(e,t,v,x+".tickcolor",t.color);var P=b("ticks");if(!P){delete t[x].ticklen;delete t[x].tickwidth;delete t[x].tickcolor}f(w,T,b,{dfltColor:S,bgColor:o.bgColor,blend:60,showLine:true,showGrid:true,noZeroLine:true,attributes:v[x]});b("layer")}b("hoverformat");delete T.type;T._input=w}}e.exports=function e(t,r,n){o(t,r,n,{noUirevision:true,type:h.name,attributes:v,handleDefaults:g,font:r.font,paper_bgcolor:r.paper_bgcolor,fullData:n,layoutOut:r})};function y(e,t){var r={};return function(n){var a=t?t(n):n;if(a in r){return r[a]}var i=e(n);r[a]=i;return i}}},49119:function(e,t,r){"use strict";var n=r(71828);var a=r(44467);var i=r(27670).c;e.exports=function e(t,r,o,s){var l=s.type;var u=s.attributes;var f=s.handleDefaults;var c=s.partition||"x";var v=r._subplots[l];var h=v.length;var p=h&&v[0].replace(/\d+$/,"");var d,g;function y(e,t){return n.coerce(d,g,u,e,t)}for(var m=0;m<h;m++){var x=v[m];if(t[x])d=t[x];else d=t[x]={};g=a.newContainer(r,x,p);if(!s.noUirevision)y("uirevision",r.uirevision);var b={};b[c]=[m/h,(m+1)/h];i(g,r,y,b);s.id=x;f(d,g,y,s)}}},5386:function(e,t,r){"use strict";var n=r(31562);var a=n.FORMAT_LINK;var i=n.DATE_FORMAT_LINK;function o(e){var t=e&&e.supportOther;return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(t?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),'Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',a,"for details on the formatting syntax.",'Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',i,"for details on the date formatting syntax."].join(" ")}function s(){return["Variables are inserted using %{variable},",'for example "x0: %{x0}".','Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{x0:$.2f}". See',a,"for details on the formatting syntax.",'Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{x0|%m %b %Y}". See',i,"for details on the date formatting syntax.","A single multiplication or division operation may be applied to numeric variables, and combined with",'d3 number formatting, for example "Length in cm: %{x0*2.54}", "%{slope*60:.1f} meters per second."',"For log axes, variable values are given in log units.","For date axes, x/y coordinate variables and center variables use datetimes, while all other variable values use values in ms."].join(" ")}function l(e){var t=e.description?" "+e.description:"";var r=e.keys||[];if(r.length>0){var n=[];for(var a=0;a<r.length;a++){n[a]="`"+r[a]+"`"}t=t+"Finally, the template string has access to ";if(r.length===1){t=t+"variable "+n[0]}else{t=t+"variables "+n.slice(0,-1).join(", ")+" and "+n.slice(-1)+"."}}return t}t.fF=function(e,t){e=e||{};t=t||{};var r=l(t);var n={valType:"string",dflt:"",editType:e.editType||"none"};if(e.arrayOk!==false){n.arrayOk=true}return n};t.si=function(e,t){e=e||{};t=t||{};var r=l(t);var n={valType:"string",dflt:"",editType:e.editType||"calc"};if(e.arrayOk!==false){n.arrayOk=true}return n};t.R=function(e,t){e=e||{};t=t||{};var r=e.newshape?"new ":"";var n=l(t);var a={valType:"string",dflt:"",editType:e.editType||"arraydraw"};return a}},61639:function(e,t,r){"use strict";var n=r(64380);var a=r(27659).AU;var i=r(71828).counterRegex;var o="ternary";t.name=o;var s=t.attr="subplot";t.idRoot=o;t.idRegex=t.attrRegex=i(o);var l=t.attributes={};l[s]={valType:"subplotid",dflt:"ternary",editType:"calc"};t.layoutAttributes=r(81367);t.supplyLayoutDefaults=r(25369);t.plot=function e(t){var r=t._fullLayout;var i=t.calcdata;var s=r._subplots[o];for(var l=0;l<s.length;l++){var u=s[l];var f=a(i,o,u);var c=r[u]._subplot;if(!c){c=new n({id:u,graphDiv:t,container:r._ternarylayer.node()},r);r[u]._subplot=c}c.plot(f,r,t._promises)}};t.clean=function(e,t,r,n){var a=n._subplots[o]||[];for(var i=0;i<a.length;i++){var s=a[i];var l=n[s]._subplot;if(!t[s]&&!!l){l.plotContainer.remove();l.clipDef.remove();l.clipDefRelative.remove();l.layers["a-title"].remove();l.layers["b-title"].remove();l.layers["c-title"].remove()}}}},81367:function(e,t,r){"use strict";var n=r(22399);var a=r(27670).Y;var i=r(13838);var o=r(30962).overrideAll;var s=r(1426).extendFlat;var l={title:{text:i.title.text,font:i.title.font},color:i.color,tickmode:i.minor.tickmode,nticks:s({},i.nticks,{dflt:6,min:1}),tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:i.ticks,ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,ticklabelstep:i.ticklabelstep,showticklabels:i.showticklabels,labelalias:i.labelalias,showtickprefix:i.showtickprefix,tickprefix:i.tickprefix,showticksuffix:i.showticksuffix,ticksuffix:i.ticksuffix,showexponent:i.showexponent,exponentformat:i.exponentformat,minexponent:i.minexponent,separatethousands:i.separatethousands,tickfont:i.tickfont,tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,hoverformat:i.hoverformat,showline:s({},i.showline,{dflt:true}),linecolor:i.linecolor,linewidth:i.linewidth,showgrid:s({},i.showgrid,{dflt:true}),gridcolor:i.gridcolor,gridwidth:i.gridwidth,griddash:i.griddash,layer:i.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:i._deprecated.title,titlefont:i._deprecated.titlefont}};var u=e.exports=o({domain:a({name:"ternary"}),bgcolor:{valType:"color",dflt:n.background},sum:{valType:"number",dflt:1,min:0},aaxis:l,baxis:l,caxis:l},"plot","from-root");u.uirevision={valType:"any",editType:"none"};u.aaxis.uirevision=u.baxis.uirevision=u.caxis.uirevision={valType:"any",editType:"none"}},25369:function(e,t,r){"use strict";var n=r(7901);var a=r(44467);var i=r(71828);var o=r(49119);var s=r(96115);var l=r(89426);var u=r(38701);var f=r(26218);var c=r(92128);var v=r(81367);var h=["aaxis","baxis","caxis"];e.exports=function e(t,r,n){o(t,r,n,{type:"ternary",attributes:v,handleDefaults:p,font:r.font,paper_bgcolor:r.paper_bgcolor})};function p(e,t,r,i){var o=r("bgcolor");var s=r("sum");i.bgColor=n.combine(o,i.paper_bgcolor);var l,u,f;for(var c=0;c<h.length;c++){l=h[c];u=e[l]||{};f=a.newContainer(t,l);f._name=l;d(u,f,i,t)}var v=t.aaxis;var p=t.baxis;var g=t.caxis;if(v.min+p.min+g.min>=s){v.min=0;p.min=0;g.min=0;if(e.aaxis)delete e.aaxis.min;if(e.baxis)delete e.baxis.min;if(e.caxis)delete e.caxis.min}}function d(e,t,r,n){var a=v[t._name];function o(r,n){return i.coerce(e,t,a,r,n)}o("uirevision",n.uirevision);t.type="linear";var h=o("color");var p=h!==a.color.dflt?h:r.font.color;var d=t._name;var g=d.charAt(0).toUpperCase();var y="Component "+g;var m=o("title.text",y);t._hovertitle=m===y?m:g;i.coerceFont(o,"title.font",{family:r.font.family,size:i.bigFont(r.font.size),color:p});o("min");f(e,t,o,"linear");l(e,t,o,"linear");s(e,t,o,"linear");u(e,t,o,{outerTicks:true});var x=o("showticklabels");if(x){i.coerceFont(o,"tickfont",{family:r.font.family,size:r.font.size,color:p});o("tickangle");o("tickformat")}c(e,t,o,{dfltColor:h,bgColor:r.bgColor,blend:60,showLine:true,showGrid:true,noZeroLine:true,attributes:a});o("hoverformat");o("layer")}},64380:function(e,t,r){"use strict";var n=r(39898);var a=r(84267);var i=r(73972);var o=r(71828);var s=o.strTranslate;var l=o._;var u=r(7901);var f=r(91424);var c=r(21994);var v=r(1426).extendFlat;var h=r(74875);var p=r(89298);var d=r(28569);var g=r(30211);var y=r(64505);var m=y.freeMode;var x=y.rectMode;var b=r(92998);var _=r(47322).prepSelect;var w=r(47322).selectOnClick;var T=r(47322).clearOutline;var k=r(47322).clearSelectionsCache;var A=r(85555);function M(e,t){this.id=e.id;this.graphDiv=e.graphDiv;this.init(t);this.makeFramework(t);this.aTickLayout=null;this.bTickLayout=null;this.cTickLayout=null}e.exports=M;var S=M.prototype;S.init=function(e){this.container=e._ternarylayer;this.defs=e._defs;this.layoutId=e._uid;this.traceHash={};this.layers={}};S.plot=function(e,t){var r=this;var n=t[r.id];var a=t._size;r._hasClipOnAxisFalse=false;for(var i=0;i<e.length;i++){var o=e[i][0].trace;if(o.cliponaxis===false){r._hasClipOnAxisFalse=true;break}}r.updateLayers(n);r.adjustLayout(n,a);h.generalUpdatePerTraceModule(r.graphDiv,r,e,n);r.layers.plotbg.select("path").call(u.fill,n.bgcolor)};S.makeFramework=function(e){var t=this;var r=t.graphDiv;var n=e[t.id];var a=t.clipId="clip"+t.layoutId+t.id;var i=t.clipIdRelative="clip-relative"+t.layoutId+t.id;t.clipDef=o.ensureSingleById(e._clips,"clipPath",a,(function(e){e.append("path").attr("d","M0,0Z")}));t.clipDefRelative=o.ensureSingleById(e._clips,"clipPath",i,(function(e){e.append("path").attr("d","M0,0Z")}));t.plotContainer=o.ensureSingle(t.container,"g",t.id);t.updateLayers(n);f.setClipUrl(t.layers.backplot,a,r);f.setClipUrl(t.layers.grids,a,r)};S.updateLayers=function(e){var t=this;var r=t.layers;var a=["draglayer","plotbg","backplot","grids"];if(e.aaxis.layer==="below traces"){a.push("aaxis","aline")}if(e.baxis.layer==="below traces"){a.push("baxis","bline")}if(e.caxis.layer==="below traces"){a.push("caxis","cline")}a.push("frontplot");if(e.aaxis.layer==="above traces"){a.push("aaxis","aline")}if(e.baxis.layer==="above traces"){a.push("baxis","bline")}if(e.caxis.layer==="above traces"){a.push("caxis","cline")}var i=t.plotContainer.selectAll("g.toplevel").data(a,String);var o=["agrid","bgrid","cgrid"];i.enter().append("g").attr("class",(function(e){return"toplevel "+e})).each((function(e){var t=n.select(this);r[e]=t;if(e==="frontplot"){t.append("g").classed("scatterlayer",true)}else if(e==="backplot"){t.append("g").classed("maplayer",true)}else if(e==="plotbg"){t.append("path").attr("d","M0,0Z")}else if(e==="aline"||e==="bline"||e==="cline"){t.append("path")}else if(e==="grids"){o.forEach((function(e){r[e]=t.append("g").classed("grid "+e,true)}))}}));i.order()};var E=Math.sqrt(4/3);S.adjustLayout=function(e,t){var r=this;var n=e.domain;var a=(n.x[0]+n.x[1])/2;var i=(n.y[0]+n.y[1])/2;var o=n.x[1]-n.x[0];var l=n.y[1]-n.y[0];var h=o*t.w;var p=l*t.h;var d=e.sum;var g=e.aaxis.min;var y=e.baxis.min;var m=e.caxis.min;var x,b,_,w,T,k;if(h>E*p){w=p;_=w*E}else{_=h;w=_/E}T=o*_/h;k=l*w/p;x=t.l+t.w*a-_/2;b=t.t+t.h*(1-i)-w/2;r.x0=x;r.y0=b;r.w=_;r.h=w;r.sum=d;r.xaxis={type:"linear",range:[g+2*m-d,d-g-2*y],domain:[a-T/2,a+T/2],_id:"x"};c(r.xaxis,r.graphDiv._fullLayout);r.xaxis.setScale();r.xaxis.isPtWithinRange=function(e){return e.a>=r.aaxis.range[0]&&e.a<=r.aaxis.range[1]&&e.b>=r.baxis.range[1]&&e.b<=r.baxis.range[0]&&e.c>=r.caxis.range[1]&&e.c<=r.caxis.range[0]};r.yaxis={type:"linear",range:[g,d-y-m],domain:[i-k/2,i+k/2],_id:"y"};c(r.yaxis,r.graphDiv._fullLayout);r.yaxis.setScale();r.yaxis.isPtWithinRange=function(){return true};var A=r.yaxis.domain[0];var M=r.aaxis=v({},e.aaxis,{range:[g,d-y-m],side:"left",tickangle:(+e.aaxis.tickangle||0)-30,domain:[A,A+k*E],anchor:"free",position:0,_id:"y",_length:_});c(M,r.graphDiv._fullLayout);M.setScale();var S=r.baxis=v({},e.baxis,{range:[d-g-m,y],side:"bottom",domain:r.xaxis.domain,anchor:"free",position:0,_id:"x",_length:_});c(S,r.graphDiv._fullLayout);S.setScale();var L=r.caxis=v({},e.caxis,{range:[d-g-y,m],side:"right",tickangle:(+e.caxis.tickangle||0)+30,domain:[A,A+k*E],anchor:"free",position:0,_id:"y",_length:_});c(L,r.graphDiv._fullLayout);L.setScale();var C="M"+x+","+(b+w)+"h"+_+"l-"+_/2+",-"+w+"Z";r.clipDef.select("path").attr("d",C);r.layers.plotbg.select("path").attr("d",C);var I="M0,"+w+"h"+_+"l-"+_/2+",-"+w+"Z";r.clipDefRelative.select("path").attr("d",I);var P=s(x,b);r.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",P);r.clipDefRelative.select("path").attr("transform",null);var O=s(x-S._offset,b+w);r.layers.baxis.attr("transform",O);r.layers.bgrid.attr("transform",O);var D=s(x+_/2,b)+"rotate(30)"+s(0,-M._offset);r.layers.aaxis.attr("transform",D);r.layers.agrid.attr("transform",D);var z=s(x+_/2,b)+"rotate(-30)"+s(0,-L._offset);r.layers.caxis.attr("transform",z);r.layers.cgrid.attr("transform",z);r.drawAxes(true);r.layers.aline.select("path").attr("d",M.showline?"M"+x+","+(b+w)+"l"+_/2+",-"+w:"M0,0").call(u.stroke,M.linecolor||"#000").style("stroke-width",(M.linewidth||0)+"px");r.layers.bline.select("path").attr("d",S.showline?"M"+x+","+(b+w)+"h"+_:"M0,0").call(u.stroke,S.linecolor||"#000").style("stroke-width",(S.linewidth||0)+"px");r.layers.cline.select("path").attr("d",L.showline?"M"+(x+_/2)+","+b+"l"+_/2+","+w:"M0,0").call(u.stroke,L.linecolor||"#000").style("stroke-width",(L.linewidth||0)+"px");if(!r.graphDiv._context.staticPlot){r.initInteractions()}f.setClipUrl(r.layers.frontplot,r._hasClipOnAxisFalse?null:r.clipId,r.graphDiv)};S.drawAxes=function(e){var t=this;var r=t.graphDiv;var n=t.id.substr(7)+"title";var a=t.layers;var i=t.aaxis;var o=t.baxis;var s=t.caxis;t.drawAx(i);t.drawAx(o);t.drawAx(s);if(e){var u=Math.max(i.showticklabels?i.tickfont.size/2:0,(s.showticklabels?s.tickfont.size*.75:0)+(s.ticks==="outside"?s.ticklen*.87:0));var f=(o.showticklabels?o.tickfont.size:0)+(o.ticks==="outside"?o.ticklen:0)+3;a["a-title"]=b.draw(r,"a"+n,{propContainer:i,propName:t.id+".aaxis.title",placeholder:l(r,"Click to enter Component A title"),attributes:{x:t.x0+t.w/2,y:t.y0-i.title.font.size/3-u,"text-anchor":"middle"}});a["b-title"]=b.draw(r,"b"+n,{propContainer:o,propName:t.id+".baxis.title",placeholder:l(r,"Click to enter Component B title"),attributes:{x:t.x0-f,y:t.y0+t.h+o.title.font.size*.83+f,"text-anchor":"middle"}});a["c-title"]=b.draw(r,"c"+n,{propContainer:s,propName:t.id+".caxis.title",placeholder:l(r,"Click to enter Component C title"),attributes:{x:t.x0+t.w+f,y:t.y0+t.h+s.title.font.size*.83+f,"text-anchor":"middle"}})}};S.drawAx=function(e){var t=this;var r=t.graphDiv;var n=e._name;var a=n.charAt(0);var i=e._id;var s=t.layers[n];var l=30;var u=a+"tickLayout";var f=L(e);if(t[u]!==f){s.selectAll("."+i+"tick").remove();t[u]=f}e.setScale();var c=p.calcTicks(e);var v=p.clipEnds(e,c);var h=p.makeTransTickFn(e);var d=p.getTickSigns(e)[2];var g=o.deg2rad(l);var y=d*(e.linewidth||1)/2;var m=d*e.ticklen;var x=t.w;var b=t.h;var _=a==="b"?"M0,"+y+"l"+Math.sin(g)*m+","+Math.cos(g)*m:"M"+y+",0l"+Math.cos(g)*m+","+-Math.sin(g)*m;var w={a:"M0,0l"+b+",-"+x/2,b:"M0,0l-"+x/2+",-"+b,c:"M0,0l-"+b+","+x/2}[a];p.drawTicks(r,e,{vals:e.ticks==="inside"?v:c,layer:s,path:_,transFn:h,crisp:false});p.drawGrid(r,e,{vals:v,layer:t.layers[a+"grid"],path:w,transFn:h,crisp:false});p.drawLabels(r,e,{vals:c,layer:s,transFn:h,labelFns:p.makeLabelFns(e,0,l)})};function L(e){return e.ticks+String(e.ticklen)+String(e.showticklabels)}var C=A.MINZOOM/2+.87;var I="m-0.87,.5h"+C+"v3h-"+(C+5.2)+"l"+(C/2+2.6)+",-"+(C*.87+4.5)+"l2.6,1.5l-"+C/2+","+C*.87+"Z";var P="m0.87,.5h-"+C+"v3h"+(C+5.2)+"l-"+(C/2+2.6)+",-"+(C*.87+4.5)+"l-2.6,1.5l"+C/2+","+C*.87+"Z";var O="m0,1l"+C/2+","+C*.87+"l2.6,-1.5l-"+(C/2+2.6)+",-"+(C*.87+4.5)+"l-"+(C/2+2.6)+","+(C*.87+4.5)+"l2.6,1.5l"+C/2+",-"+C*.87+"Z";var D="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z";var z=true;S.clearOutline=function(){k(this.dragOptions);T(this.dragOptions.gd)};S.initInteractions=function(){var e=this;var t=e.layers.plotbg.select("path").node();var r=e.graphDiv;var n=r._fullLayout._zoomlayer;var c;var v;this.dragOptions={element:t,gd:r,plotinfo:{id:e.id,domain:r._fullLayout[e.id].domain,xaxis:e.xaxis,yaxis:e.yaxis},subplot:e.id,prepFn:function(t,n,a){e.dragOptions.xaxes=[e.xaxis];e.dragOptions.yaxes=[e.yaxis];c=r._fullLayout._invScaleX;v=r._fullLayout._invScaleY;var i=e.dragOptions.dragmode=r._fullLayout.dragmode;if(m(i))e.dragOptions.minDrag=1;else e.dragOptions.minDrag=undefined;if(i==="zoom"){e.dragOptions.moveFn=H;e.dragOptions.clickFn=B;e.dragOptions.doneFn=q;N(t,n,a)}else if(i==="pan"){e.dragOptions.moveFn=Z;e.dragOptions.clickFn=B;e.dragOptions.doneFn=Y;G();e.clearOutline(r)}else if(x(i)||m(i)){_(t,n,a,e.dragOptions,i)}}};var h,p,y,b,T,k,M,S,L,C;function F(t){var r={};r[e.id+".aaxis.min"]=t.a;r[e.id+".baxis.min"]=t.b;r[e.id+".caxis.min"]=t.c;return r}function B(t,n){var a=r._fullLayout.clickmode;R(r);if(t===2){r.emit("plotly_doubleclick",null);i.call("_guiRelayout",r,F({a:0,b:0,c:0}))}if(a.indexOf("select")>-1&&t===1){w(n,r,[e.xaxis],[e.yaxis],e.id,e.dragOptions)}if(a.indexOf("event")>-1){g.click(r,n,e.id)}}function N(i,l,f){var c=t.getBoundingClientRect();h=l-c.left;p=f-c.top;r._fullLayout._calcInverseTransform(r);var v=r._fullLayout._invTransform;var d=o.apply3DTransform(v)(h,p);h=d[0];p=d[1];y={a:e.aaxis.range[0],b:e.baxis.range[1],c:e.caxis.range[1]};T=y;b=e.aaxis.range[1]-y.a;k=a(e.graphDiv._fullLayout[e.id].bgcolor).getLuminance();M="M0,"+e.h+"L"+e.w/2+", 0L"+e.w+","+e.h+"Z";S=false;L=n.append("path").attr("class","zoombox").attr("transform",s(e.x0,e.y0)).style({fill:k>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",M);C=n.append("path").attr("class","zoombox-corners").attr("transform",s(e.x0,e.y0)).style({fill:u.background,stroke:u.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z");e.clearOutline(r)}function j(t,r){return 1-r/e.h}function U(t,r){return 1-(t+(e.h-r)/Math.sqrt(3))/e.w}function V(t,r){return(t-(e.h-r)/Math.sqrt(3))/e.w}function H(t,n){var a=h+t*c;var i=p+n*v;var o=Math.max(0,Math.min(1,j(h,p),j(a,i)));var s=Math.max(0,Math.min(1,U(h,p),U(a,i)));var l=Math.max(0,Math.min(1,V(h,p),V(a,i)));var u=(o/2+l)*e.w;var f=(1-o/2-s)*e.w;var d=(u+f)/2;var g=f-u;var m=(1-o)*e.h;var x=m-g/E;if(g<A.MINZOOM){T=y;L.attr("d",M);C.attr("d","M0,0Z")}else{T={a:y.a+o*b,b:y.b+s*b,c:y.c+l*b};L.attr("d",M+"M"+u+","+m+"H"+f+"L"+d+","+x+"L"+u+","+m+"Z");C.attr("d","M"+h+","+p+D+"M"+u+","+m+I+"M"+f+","+m+P+"M"+d+","+x+O)}if(!S){L.transition().style("fill",k>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200);C.transition().style("opacity",1).duration(200);S=true}r.emit("plotly_relayouting",F(T))}function q(){R(r);if(T===y)return;i.call("_guiRelayout",r,F(T));if(z&&r.data&&r._context.showTips){o.notifier(l(r,"Double-click to zoom back out"),"long");z=false}}function G(){y={a:e.aaxis.range[0],b:e.baxis.range[1],c:e.caxis.range[1]};T=y}function Z(t,n){var a=t/e.xaxis._m;var i=n/e.yaxis._m;T={a:y.a-i,b:y.b+(a+i)/2,c:y.c-(a-i)/2};var l=[T.a,T.b,T.c].sort(o.sorterAsc);var u={a:l.indexOf(T.a),b:l.indexOf(T.b),c:l.indexOf(T.c)};if(l[0]<0){if(l[1]+l[0]/2<0){l[2]+=l[0]+l[1];l[0]=l[1]=0}else{l[2]+=l[0]/2;l[1]+=l[0]/2;l[0]=0}T={a:l[u.a],b:l[u.b],c:l[u.c]};n=(y.a-T.a)*e.yaxis._m;t=(y.c-T.c-y.b+T.b)*e.xaxis._m}var c=s(e.x0+t,e.y0+n);e.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",c);var v=s(-t,-n);e.clipDefRelative.select("path").attr("transform",v);e.aaxis.range=[T.a,e.sum-T.b-T.c];e.baxis.range=[e.sum-T.a-T.c,T.b];e.caxis.range=[e.sum-T.a-T.b,T.c];e.drawAxes(false);if(e._hasClipOnAxisFalse){e.plotContainer.select(".scatterlayer").selectAll(".trace").call(f.hideOutsideRangePoints,e)}r.emit("plotly_relayouting",F(T))}function Y(){i.call("_guiRelayout",r,F(T))}t.onmousemove=function(n){g.hover(r,n,e.id);r._fullLayout._lasthover=t;r._fullLayout._hoversubplot=e.id};t.onmouseout=function(e){if(r._dragging)return;d.unhover(r,e)};d.init(this.dragOptions)};function R(e){n.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},73972:function(e,t,r){"use strict";var n=r(47769);var a=r(64213);var i=r(75138);var o=r(41965);var s=r(24401).addStyleRule;var l=r(1426);var u=r(9012);var f=r(10820);var c=l.extendFlat;var v=l.extendDeepAll;t.modules={};t.allCategories={};t.allTypes=[];t.subplotsRegistry={};t.transformsRegistry={};t.componentsRegistry={};t.layoutArrayContainers=[];t.layoutArrayRegexes=[];t.traceLayoutAttributes={};t.localeRegistry={};t.apiMethodRegistry={};t.collectableSubplotTypes=null;t.register=function e(r){t.collectableSubplotTypes=null;if(!r){throw new Error("No argument passed to Plotly.register.")}else if(r&&!Array.isArray(r)){r=[r]}for(var n=0;n<r.length;n++){var a=r[n];if(!a){throw new Error("Invalid module was attempted to be registered!")}switch(a.moduleType){case"trace":h(a);break;case"transform":g(a);break;case"component":d(a);break;case"locale":y(a);break;case"apiMethod":var i=a.name;t.apiMethodRegistry[i]=a.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}};t.getModule=function(e){var r=t.modules[w(e)];if(!r)return false;return r._module};t.traceIs=function(e,r){e=w(e);if(e==="various")return false;var a=t.modules[e];if(!a){if(e){n.log("Unrecognized trace type "+e+".")}a=t.modules[u.type.dflt]}return!!a.categories[r]};t.getTransformIndices=function(e,t){var r=[];var n=e.transforms||[];for(var a=0;a<n.length;a++){if(n[a].type===t){r.push(a)}}return r};t.hasTransform=function(e,t){var r=e.transforms||[];for(var n=0;n<r.length;n++){if(r[n].type===t){return true}}return false};t.getComponentMethod=function(e,r){var n=t.componentsRegistry[e];if(!n)return a;return n[r]||a};t.call=function(){var e=arguments[0];var r=[].slice.call(arguments,1);return t.apiMethodRegistry[e].apply(null,r)};function h(e){var r=e.name;var a=e.categories;var i=e.meta;if(t.modules[r]){n.log("Type "+r+" already registered");return}if(!t.subplotsRegistry[e.basePlotModule.name]){p(e.basePlotModule)}var o={};for(var l=0;l<a.length;l++){o[a[l]]=true;t.allCategories[a[l]]=true}t.modules[r]={_module:e,categories:o};if(i&&Object.keys(i).length){t.modules[r].meta=i}t.allTypes.push(r);for(var u in t.componentsRegistry){x(u,r)}if(e.layoutAttributes){c(t.traceLayoutAttributes,e.layoutAttributes)}var f=e.basePlotModule;var v=f.name;if(v==="mapbox"){var h=f.constants.styleRules;for(var d in h){s(".js-plotly-plot .plotly .mapboxgl-"+d,h[d])}}if((v==="geo"||v==="mapbox")&&window.PlotlyGeoAssets===undefined){window.PlotlyGeoAssets={topojson:{}}}}function p(e){var r=e.name;if(t.subplotsRegistry[r]){n.log("Plot type "+r+" already registered.");return}m(e);t.subplotsRegistry[r]=e;for(var a in t.componentsRegistry){_(a,e.name)}}function d(e){if(typeof e.name!=="string"){throw new Error("Component module *name* must be a string.")}var r=e.name;t.componentsRegistry[r]=e;if(e.layoutAttributes){if(e.layoutAttributes._isLinkedToArray){i(t.layoutArrayContainers,r)}m(e)}for(var n in t.modules){x(r,n)}for(var a in t.subplotsRegistry){_(r,a)}for(var o in t.transformsRegistry){b(r,o)}if(e.schema&&e.schema.layout){v(f,e.schema.layout)}}function g(e){if(typeof e.name!=="string"){throw new Error("Transform module *name* must be a string.")}var r="Transform module "+e.name;var a=typeof e.transform==="function";var i=typeof e.calcTransform==="function";if(!a&&!i){throw new Error(r+" is missing a *transform* or *calcTransform* method.")}if(a&&i){n.log([r+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" "))}if(!o(e.attributes)){n.log(r+" registered without an *attributes* object.")}if(typeof e.supplyDefaults!=="function"){n.log(r+" registered without a *supplyDefaults* method.")}t.transformsRegistry[e.name]=e;for(var s in t.componentsRegistry){b(s,e.name)}}function y(e){var r=e.name;var n=r.split("-")[0];var a=e.dictionary;var i=e.format;var o=a&&Object.keys(a).length;var s=i&&Object.keys(i).length;var l=t.localeRegistry;var u=l[r];if(!u)l[r]=u={};if(n!==r){var f=l[n];if(!f)l[n]=f={};if(o&&f.dictionary===u.dictionary){f.dictionary=a}if(s&&f.format===u.format){f.format=i}}if(o)u.dictionary=a;if(s)u.format=i}function m(e){if(e.layoutAttributes){var r=e.layoutAttributes._arrayAttrRegexps;if(r){for(var n=0;n<r.length;n++){i(t.layoutArrayRegexes,r[n])}}}}function x(e,r){var n=t.componentsRegistry[e].schema;if(!n||!n.traces)return;var a=n.traces[r];if(a){v(t.modules[r]._module.attributes,a)}}function b(e,r){var n=t.componentsRegistry[e].schema;if(!n||!n.transforms)return;var a=n.transforms[r];if(a){v(t.transformsRegistry[r].attributes,a)}}function _(e,r){var n=t.componentsRegistry[e].schema;if(!n||!n.subplots)return;var a=t.subplotsRegistry[r];var i=a.layoutAttributes;var o=a.attr==="subplot"?a.name:a.attr;if(Array.isArray(o))o=o[0];var s=n.subplots[o];if(i&&s){v(i,s)}}function w(e){if(typeof e==="object")e=e.type;return e}},61914:function(e,t,r){"use strict";var n=r(73972);var a=r(71828);var i=a.extendFlat;var o=a.extendDeep;function s(e){var t;switch(e){case"themes__thumb":t={autosize:true,width:150,height:150,title:{text:""},showlegend:false,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:true,showlegend:false,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function l(e){var t=["xaxis","yaxis","zaxis"];return t.indexOf(e.slice(0,5))>-1}e.exports=function e(t,r){var a;var u=t.data;var f=t.layout;var c=o([],u);var v=o({},f,s(r.tileClass));var h=t._context||{};if(r.width)v.width=r.width;if(r.height)v.height=r.height;if(r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){v.annotations=[];var p=Object.keys(v);for(a=0;a<p.length;a++){if(l(p[a])){v[p[a]].title={text:""}}}for(a=0;a<c.length;a++){var d=c[a];d.showscale=false;if(d.marker)d.marker.showscale=false;if(n.traceIs(d,"pie-like"))d.textposition="none"}}if(Array.isArray(r.annotations)){for(a=0;a<r.annotations.length;a++){v.annotations.push(r.annotations[a])}}var g=Object.keys(v).filter((function(e){return e.match(/^scene\d*$/)}));if(g.length){var y={};if(r.tileClass==="thumbnail"){y={title:{text:""},showaxeslabels:false,showticklabels:false,linetickenable:false}}for(a=0;a<g.length;a++){var m=v[g[a]];if(!m.xaxis){m.xaxis={}}if(!m.yaxis){m.yaxis={}}if(!m.zaxis){m.zaxis={}}i(m.xaxis,y);i(m.yaxis,y);i(m.zaxis,y);m._scene=null}}var x=document.createElement("div");if(r.tileClass)x.className=r.tileClass;var b={gd:x,td:x,layout:v,data:c,config:{staticPlot:r.staticPlot===undefined?true:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===undefined?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||false,showLink:r.showLink||false,showTips:r.showTips||false,mapboxAccessToken:h.mapboxAccessToken}};if(r.setBackground!=="transparent"){b.config.setBackground=r.setBackground||"opaque"}b.gd.defaultLayout=s(r.tileClass);return b}},7239:function(e,t,r){"use strict";var n=r(71828);var a=r(403);var i=r(22435);var o=r(25095);function s(e,t){var r;if(!n.isPlainObject(e))r=n.getGraphDiv(e);t=t||{};t.format=t.format||"png";t.width=t.width||null;t.height=t.height||null;t.imageDataOnly=true;return new Promise((function(s,l){if(r&&r._snapshotInProgress){l(new Error("Snapshotting already in progress."))}if(n.isIE()&&t.format!=="svg"){l(new Error(o.MSG_IE_BAD_FORMAT))}if(r)r._snapshotInProgress=true;var u=a(e,t);var f=t.filename||e.fn||"newplot";f+="."+t.format.replace("-",".");u.then((function(e){if(r)r._snapshotInProgress=false;return i(e,f,t.format)})).then((function(e){s(e)})).catch((function(e){if(r)r._snapshotInProgress=false;l(e)}))}))}e.exports=s},22435:function(e,t,r){"use strict";var n=r(71828);var a=r(25095);function i(e,t,r){var i=document.createElement("a");var o="download"in i;var s=new Promise((function(s,l){var u;var f;if(n.isIE()){u=a.createBlob(e,"svg");window.navigator.msSaveBlob(u,t);u=null;return s(t)}if(o){u=a.createBlob(e,r);f=a.createObjectURL(u);i.href=f;i.download=t;document.body.appendChild(i);i.click();document.body.removeChild(i);a.revokeObjectURL(f);u=null;return s(t)}if(n.isSafari()){var c=r==="svg"?",":";base64,";a.octetStream(c+encodeURIComponent(e));return s(t)}l(new Error("download error"))}));return s}e.exports=i},25095:function(e,t,r){"use strict";var n=r(73972);t.getDelay=function(e){if(!e._has)return 0;return e._has("gl3d")||e._has("gl2d")||e._has("mapbox")?500:0};t.getRedrawFunc=function(e){return function(){n.getComponentMethod("colorbar","draw")(e)}};t.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)};t.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var a=window.URL||window.webkitURL;t.createObjectURL=function(e){return a.createObjectURL(e)};t.revokeObjectURL=function(e){return a.revokeObjectURL(e)};t.createBlob=function(e,t){if(t==="svg"){return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"})}else if(t==="full-json"){return new window.Blob([e],{type:"application/json;charset=utf-8"})}else{var r=i(window.atob(e));return new window.Blob([r],{type:"image/"+t})}};t.octetStream=function(e){document.location.href="data:application/octet-stream"+e};function i(e){var t=e.length;var r=new ArrayBuffer(t);var n=new Uint8Array(r);for(var a=0;a<t;a++){n[a]=e.charCodeAt(a)}return r}t.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;t.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},44511:function(e,t,r){"use strict";var n=r(25095);var a={getDelay:n.getDelay,getRedrawFunc:n.getRedrawFunc,clone:r(61914),toSVG:r(5900),svgToImg:r(70942),toImage:r(56395),downloadImage:r(7239)};e.exports=a},70942:function(e,t,r){"use strict";var n=r(71828);var a=r(15398).EventEmitter;var i=r(25095);function o(e){var t=e.emitter||new a;var r=new Promise((function(a,o){var s=window.Image;var l=e.svg;var u=e.format||"png";if(n.isIE()&&u!=="svg"){var f=new Error(i.MSG_IE_BAD_FORMAT);o(f);if(!e.promise){return t.emit("error",f)}else{return r}}var c=e.canvas;var v=e.scale||1;var h=e.width||300;var p=e.height||150;var d=v*h;var g=v*p;var y=c.getContext("2d",{willReadFrequently:true});var m=new s;var x,b;if(u==="svg"||n.isSafari()){b=i.encodeSVG(l)}else{x=i.createBlob(l,"svg");b=i.createObjectURL(x)}c.width=d;c.height=g;m.onload=function(){var r;x=null;i.revokeObjectURL(b);if(u!=="svg"){y.drawImage(m,0,0,d,g)}switch(u){case"jpeg":r=c.toDataURL("image/jpeg");break;case"png":r=c.toDataURL("image/png");break;case"webp":r=c.toDataURL("image/webp");break;case"svg":r=b;break;default:var n="Image format is not jpeg, png, svg or webp.";o(new Error(n));if(!e.promise){return t.emit("error",n)}}a(r);if(!e.promise){t.emit("success",r)}};m.onerror=function(r){x=null;i.revokeObjectURL(b);o(r);if(!e.promise){return t.emit("error",r)}};m.src=b}));if(e.promise){return r}return t}e.exports=o},56395:function(e,t,r){"use strict";var n=r(15398).EventEmitter;var a=r(73972);var i=r(71828);var o=r(25095);var s=r(61914);var l=r(5900);var u=r(70942);function f(e,t){var r=new n;var f=s(e,{format:"png"});var c=f.gd;c.style.position="absolute";c.style.left="-5000px";document.body.appendChild(c);function v(){var e=o.getDelay(c._fullLayout);setTimeout((function(){var e=l(c);var n=document.createElement("canvas");n.id=i.randstr();r=u({format:t.format,width:c._fullLayout.width,height:c._fullLayout.height,canvas:n,emitter:r,svg:e});r.clean=function(){if(c)document.body.removeChild(c)}}),e)}var h=o.getRedrawFunc(c);a.call("_doPlot",c,f.data,f.layout,f.config).then(h).then(v).catch((function(e){r.emit("error",e)}));return r}e.exports=f},5900:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);var i=r(91424);var o=r(7901);var s=r(77922);var l=/"/g;var u="TOBESTRIPPED";var f=new RegExp('("'+u+")|("+u+'")',"g");function c(e){var t=n.select("body").append("div").style({display:"none"}).html("");var r=e.replace(/(&[^;]*;)/gi,(function(e){if(e==="&lt;"){return"&#60;"}if(e==="&rt;"){return"&#62;"}if(e.indexOf("<")!==-1||e.indexOf(">")!==-1){return""}return t.html(e).text()}));t.remove();return r}function v(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}e.exports=function e(t,r,h){var p=t._fullLayout;var d=p._paper;var g=p._toppaper;var y=p.width;var m=p.height;var x;d.insert("rect",":first-child").call(i.setRect,0,0,y,m).call(o.fill,p.paper_bgcolor);var b=p._basePlotModules||[];for(x=0;x<b.length;x++){var _=b[x];if(_.toSVG)_.toSVG(t)}if(g){var w=g.node().childNodes;var T=Array.prototype.slice.call(w);for(x=0;x<T.length;x++){var k=T[x];if(k.childNodes.length)d.node().appendChild(k)}}if(p._draggers){p._draggers.remove()}d.node().style.background="";d.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each((function(){var e=n.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){e.remove();return}else{e.style({visibility:null,display:null})}var t=this.style.fontFamily;if(t&&t.indexOf('"')!==-1){e.style("font-family",t.replace(l,u))}}));d.selectAll(".gradient_filled,.pattern_filled").each((function(){var e=n.select(this);var t=this.style.fill;if(t&&t.indexOf("url(")!==-1){e.style("fill",t.replace(l,u))}var r=this.style.stroke;if(r&&r.indexOf("url(")!==-1){e.style("stroke",r.replace(l,u))}}));if(r==="pdf"||r==="eps"){d.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0)}d.node().setAttributeNS(s.xmlns,"xmlns",s.svg);d.node().setAttributeNS(s.xmlns,"xmlns:xlink",s.xlink);if(r==="svg"&&h){d.attr("width",h*y);d.attr("height",h*m);d.attr("viewBox","0 0 "+y+" "+m)}var A=(new window.XMLSerializer).serializeToString(d.node());A=c(A);A=v(A);A=A.replace(f,"'");if(a.isIE()){A=A.replace(/"/gi,"'");A=A.replace(/(\('#)([^']*)('\))/gi,'("#$2")');A=A.replace(/(\\')/gi,'"')}return A}},75341:function(e,t,r){"use strict";var n=r(71828);e.exports=function e(t,r){for(var a=0;a<t.length;a++)t[a].i=a;n.mergeArray(r.text,t,"tx");n.mergeArray(r.hovertext,t,"htx");var i=r.marker;if(i){n.mergeArray(i.opacity,t,"mo",true);n.mergeArray(i.color,t,"mc");var o=i.line;if(o){n.mergeArray(o.color,t,"mlc");n.mergeArrayCastPositive(o.width,t,"mlw")}}}},1486:function(e,t,r){"use strict";var n=r(82196);var a=r(12663).axisHoverFormat;var i=r(5386).fF;var o=r(5386).si;var s=r(50693);var l=r(41940);var u=r(97313);var f=r(79952).u;var c=r(1426).extendFlat;var v=l({editType:"calc",arrayOk:true,colorEditType:"style"});var h=n.marker;var p=h.line;var d=c({},p.width,{dflt:0});var g=c({width:d,editType:"calc"},s("marker.line"));var y=c({line:g,editType:"calc"},s("marker"),{opacity:{valType:"number",arrayOk:true,dflt:1,min:0,max:1,editType:"style"},pattern:f});e.exports={x:n.x,x0:n.x0,dx:n.dx,y:n.y,y0:n.y0,dy:n.dy,xperiod:n.xperiod,yperiod:n.yperiod,xperiod0:n.xperiod0,yperiod0:n.yperiod0,xperiodalignment:n.xperiodalignment,yperiodalignment:n.yperiodalignment,xhoverformat:a("x"),yhoverformat:a("y"),text:n.text,texttemplate:o({editType:"plot"},{keys:u.eventDataKeys}),hovertext:n.hovertext,hovertemplate:i({},{keys:u.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:true,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:c({},v,{}),insidetextfont:c({},v,{}),outsidetextfont:c({},v,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:c({},n.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:true,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:true,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:true,editType:"calc"},marker:y,offsetgroup:n.offsetgroup,alignmentgroup:n.alignmentgroup,selected:{marker:{opacity:n.selected.marker.opacity,color:n.selected.marker.color,editType:"style"},textfont:n.selected.textfont,editType:"style"},unselected:{marker:{opacity:n.unselected.marker.opacity,color:n.unselected.marker.color,editType:"style"},textfont:n.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},92290:function(e,t,r){"use strict";var n=r(89298);var a=r(42973);var i=r(52075).hasColorscale;var o=r(78803);var s=r(75341);var l=r(66279);e.exports=function e(t,r){var u=n.getFromId(t,r.xaxis||"x");var f=n.getFromId(t,r.yaxis||"y");var c,v,h,p,d,g;var y={msUTC:!!(r.base||r.base===0)};if(r.orientation==="h"){c=u.makeCalcdata(r,"x",y);h=f.makeCalcdata(r,"y");p=a(r,f,"y",h);d=!!r.yperiodalignment;g="y"}else{c=f.makeCalcdata(r,"y",y);h=u.makeCalcdata(r,"x");p=a(r,u,"x",h);d=!!r.xperiodalignment;g="x"}v=p.vals;var m=Math.min(v.length,c.length);var x=new Array(m);for(var b=0;b<m;b++){x[b]={p:v[b],s:c[b]};if(d){x[b].orig_p=h[b];x[b][g+"End"]=p.ends[b];x[b][g+"Start"]=p.starts[b]}if(r.ids){x[b].id=String(r.ids[b])}}if(i(r,"marker")){o(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"})}if(i(r,"marker.line")){o(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"})}s(x,r);l(x,r);return x}},97313:function(e){"use strict";e.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},11661:function(e,t,r){"use strict";var n=r(92770);var a=r(71828).isArrayOrTypedArray;var i=r(50606).BADNUM;var o=r(73972);var s=r(89298);var l=r(99082).getAxisGroup;var u=r(61546);function f(e,t){var r=t.xaxis;var n=t.yaxis;var a=e._fullLayout;var i=e._fullData;var s=e.calcdata;var l=[];var u=[];for(var f=0;f<i.length;f++){var v=i[f];if(v.visible===true&&o.traceIs(v,"bar")&&v.xaxis===r._id&&v.yaxis===n._id){if(v.orientation==="h"){l.push(s[f])}else{u.push(s[f])}if(v._computePh){var h=e.calcdata[f];for(var p=0;p<h.length;p++){if(typeof h[p].ph0==="function")h[p].ph0=h[p].ph0();if(typeof h[p].ph1==="function")h[p].ph1=h[p].ph1()}}}}var d={xCat:r.type==="category"||r.type==="multicategory",yCat:n.type==="category"||n.type==="multicategory",mode:a.barmode,norm:a.barnorm,gap:a.bargap,groupgap:a.bargroupgap};c(e,r,n,u,d);c(e,n,r,l,d)}function c(e,t,r,n,a){if(!n.length)return;var i;var o;var s,l,u;v(r,n);switch(a.mode){case"overlay":h(t,r,n,a);break;case"group":i=[];o=[];for(s=0;s<n.length;s++){l=n[s];u=l[0].trace;if(u.offset===undefined)o.push(l);else i.push(l)}if(o.length){p(e,t,r,o,a)}if(i.length){h(t,r,i,a)}break;case"stack":case"relative":i=[];o=[];for(s=0;s<n.length;s++){l=n[s];u=l[0].trace;if(u.base===undefined)o.push(l);else i.push(l)}if(o.length){d(e,t,r,o,a)}if(i.length){h(t,r,i,a)}break}M(n,t)}function v(e,t){var r,i;for(r=0;r<t.length;r++){var o=t[r];var s=o[0].trace;var l=s.type==="funnel"?s._base:s.base;var u;var f=s.orientation==="h"?s.xcalendar:s.ycalendar;var c=e.type==="category"||e.type==="multicategory"?function(){return null}:e.d2c;if(a(l)){for(i=0;i<Math.min(l.length,o.length);i++){u=c(l[i],0,f);if(n(u)){o[i].b=+u;o[i].hasB=1}else o[i].b=0}for(;i<o.length;i++){o[i].b=0}}else{u=c(l,0,f);var v=n(u);u=v?u:0;for(i=0;i<o.length;i++){o[i].b=u;if(v)o[i].hasB=1}}}}function h(e,t,r,n){for(var a=0;a<r.length;a++){var i=r[a];var o=new u([i],{posAxis:e,sepNegVal:false,overlapNoMerge:!n.norm});g(e,o,n);if(n.norm){T(o);A(t,o,n)}else{_(t,o)}}}function p(e,t,r,n,a){var i=new u(n,{posAxis:t,sepNegVal:false,overlapNoMerge:!a.norm});y(e,t,i,a);k(i,t);if(a.norm){T(i);A(r,i,a)}else{_(r,i)}}function d(e,t,r,n,a){var o=new u(n,{posAxis:t,sepNegVal:a.mode==="relative",overlapNoMerge:!(a.norm||a.mode==="stack"||a.mode==="relative")});g(t,o,a);w(r,o,a);for(var s=0;s<n.length;s++){var l=n[s];for(var f=0;f<l.length;f++){var c=l[f];if(c.s!==i){var v=c.b+c.s===o.get(c.p,c.s);if(v)c._outmost=true}}}if(a.norm)A(r,o,a)}function g(e,t,r){var n=t.minDiff;var a=t.traces;var i=n*(1-r.gap);var o=i;var s=o*(1-(r.groupgap||0));var l=-s/2;for(var u=0;u<a.length;u++){var f=a[u];var c=f[0].t;c.barwidth=s;c.poffset=l;c.bargroupwidth=i;c.bardelta=n}t.binWidth=a[0][0].t.barwidth/100;m(t);x(e,t);b(e,t)}function y(e,t,r,n){var a=e._fullLayout;var i=r.positions;var o=r.distinctPositions;var s=r.minDiff;var u=r.traces;var f=u.length;var c=i.length!==o.length;var v=s*(1-n.gap);var h=l(a,t._id)+u[0][0].trace.orientation;var p=a._alignmentOpts[h]||{};for(var d=0;d<f;d++){var g=u[d];var y=g[0].trace;var _=p[y.alignmentgroup]||{};var w=Object.keys(_.offsetGroups||{}).length;var T;if(w){T=v/w}else{T=c?v/f:v}var k=T*(1-(n.groupgap||0));var A;if(w){A=((2*y._offsetIndex+1-w)*T-k)/2}else{A=c?((2*d+1-f)*T-k)/2:-k/2}var M=g[0].t;M.barwidth=k;M.poffset=A;M.bargroupwidth=v;M.bardelta=s}r.binWidth=u[0][0].t.barwidth/100;m(r);x(t,r);b(t,r,c)}function m(e){var t=e.traces;var r,i;for(r=0;r<t.length;r++){var o=t[r];var s=o[0];var l=s.trace;var u=s.t;var f=l._offset||l.offset;var c=u.poffset;var v;if(a(f)){v=Array.prototype.slice.call(f,0,o.length);for(i=0;i<v.length;i++){if(!n(v[i])){v[i]=c}}for(i=v.length;i<o.length;i++){v.push(c)}u.poffset=v}else if(f!==undefined){u.poffset=f}var h=l._width||l.width;var p=u.barwidth;if(a(h)){var d=Array.prototype.slice.call(h,0,o.length);for(i=0;i<d.length;i++){if(!n(d[i]))d[i]=p}for(i=d.length;i<o.length;i++){d.push(p)}u.barwidth=d;if(f===undefined){v=[];for(i=0;i<o.length;i++){v.push(c+(p-d[i])/2)}u.poffset=v}}else if(h!==undefined){u.barwidth=h;if(f===undefined){u.poffset=c+(p-h)/2}}}}function x(e,t){var r=t.traces;var n=S(e);for(var a=0;a<r.length;a++){var i=r[a];var o=i[0].t;var s=o.poffset;var l=Array.isArray(s);var u=o.barwidth;var f=Array.isArray(u);for(var c=0;c<i.length;c++){var v=i[c];var h=v.w=f?u[c]:u;if(v.p===undefined){v.p=v[n];v["orig_"+n]=v[n]}var p=(l?s[c]:s)+h/2;v[n]=v.p+p}}}function b(e,t,r){var n=t.traces;var a=t.minDiff;var i=a/2;s.minDtick(e,t.minDiff,t.distinctPositions[0],r);for(var o=0;o<n.length;o++){var l=n[o];var u=l[0];var f=u.trace;var c=[];var v,h,p,d;for(d=0;d<l.length;d++){v=l[d];h=v.p-i;p=v.p+i;c.push(h,p)}if(f.width||f.offset){var g=u.t;var y=g.poffset;var m=g.barwidth;var x=Array.isArray(y);var b=Array.isArray(m);for(d=0;d<l.length;d++){v=l[d];var _=x?y[d]:y;var w=b?m[d]:m;h=v.p+_;p=h+w;c.push(h,p)}}f._extremes[e._id]=s.findExtremes(e,c,{padded:false})}}function _(e,t){var r=t.traces;var n=S(e);for(var a=0;a<r.length;a++){var i=r[a];var o=i[0].trace;var l=o.type==="scatter";var u=o.orientation==="v";var f=[];var c=false;for(var v=0;v<i.length;v++){var h=i[v];var p=l?0:h.b;var d=l?u?h.y:h.x:p+h.s;h[n]=d;f.push(d);if(h.hasB)f.push(p);if(!h.hasB||!h.b){c=true}}o._extremes[e._id]=s.findExtremes(e,f,{tozero:c,padded:true})}}function w(e,t,r){var n=S(e);var a=t.traces;var o;var l;var u;var f,c;var v;for(f=0;f<a.length;f++){o=a[f];l=o[0].trace;if(l.type==="funnel"){for(c=0;c<o.length;c++){v=o[c];if(v.s!==i){t.put(v.p,-.5*v.s)}}}}for(f=0;f<a.length;f++){o=a[f];l=o[0].trace;u=l.type==="funnel";var h=[];for(c=0;c<o.length;c++){v=o[c];if(v.s!==i){var p;if(u){p=v.s}else{p=v.s+v.b}var d=t.put(v.p,p);var g=d+p;v.b=d;v[n]=g;if(!r.norm){h.push(g);if(v.hasB){h.push(d)}}}}if(!r.norm){l._extremes[e._id]=s.findExtremes(e,h,{tozero:true,padded:true})}}}function T(e){var t=e.traces;for(var r=0;r<t.length;r++){var n=t[r];for(var a=0;a<n.length;a++){var o=n[a];if(o.s!==i){e.put(o.p,o.b+o.s)}}}}function k(e,t){var r=e.traces;for(var n=0;n<r.length;n++){var a=r[n];var o=a[0].trace;if(o.base===undefined){var s=new u([a],{posAxis:t,sepNegVal:true,overlapNoMerge:true});for(var l=0;l<a.length;l++){var f=a[l];if(f.p!==i){var c=s.put(f.p,f.b+f.s);if(c)f.b=c}}}}}function A(e,t,r){var a=t.traces;var o=S(e);var l=r.norm==="fraction"?1:100;var u=l/1e9;var f=e.l2c(e.c2l(0));var c=r.mode==="stack"?l:f;function v(t){return n(e.c2l(t))&&(t<f-u||t>c+u||!n(f))}for(var h=0;h<a.length;h++){var p=a[h];var d=p[0].trace;var g=[];var y=false;var m=false;for(var x=0;x<p.length;x++){var b=p[x];if(b.s!==i){var _=Math.abs(l/t.get(b.p,b.s));b.b*=_;b.s*=_;var w=b.b;var T=w+b.s;b[o]=T;g.push(T);m=m||v(T);if(b.hasB){g.push(w);m=m||v(w)}if(!b.hasB||!b.b){y=true}}}d._extremes[e._id]=s.findExtremes(e,g,{tozero:y,padded:m})}}function M(e,t){var r=S(t);var a={};var i,o,s;var l=Infinity;var u=-Infinity;for(i=0;i<e.length;i++){s=e[i];for(o=0;o<s.length;o++){var f=s[o].p;if(n(f)){l=Math.min(l,f);u=Math.max(u,f)}}}var c=1e4/(u-l);var v=a.round=function(e){return String(Math.round(c*(e-l)))};for(i=0;i<e.length;i++){s=e[i];s[0].t.extents=a;var h=s[0].t.poffset;var p=Array.isArray(h);for(o=0;o<s.length;o++){var d=s[o];var g=d[r]-d.w/2;if(n(g)){var y=d[r]+d.w/2;var m=v(d.p);if(a[m]){a[m]=[Math.min(g,a[m][0]),Math.max(y,a[m][1])]}else{a[m]=[g,y]}}d.p0=d.p+(p?h[o]:h);d.p1=d.p0+d.w;d.s0=d.b;d.s1=d.s0+d.s}}}function S(e){return e._id.charAt(0)}e.exports={crossTraceCalc:f,setGroupPositions:c}},90769:function(e,t,r){"use strict";var n=r(71828);var a=r(7901);var i=r(73972);var o=r(67513);var s=r(73927);var l=r(98340);var u=r(26125);var f=r(1486);var c=n.coerceFont;function v(e,t,r,u){function c(r,a){return n.coerce(e,t,f,r,a)}var v=o(e,t,u,c);if(!v){t.visible=false;return}s(e,t,u,c);c("xhoverformat");c("yhoverformat");c("orientation",t.x&&!t.y?"h":"v");c("base");c("offset");c("width");c("text");c("hovertext");c("hovertemplate");var h=c("textposition");p(e,t,u,c,h,{moduleHasSelected:true,moduleHasUnselected:true,moduleHasConstrain:true,moduleHasCliponaxis:true,moduleHasTextangle:true,moduleHasInsideanchor:true});l(e,t,c,r,u);var d=(t.marker.line||{}).color;var g=i.getComponentMethod("errorbars","supplyDefaults");g(e,t,d||a.defaultLine,{axis:"y"});g(e,t,d||a.defaultLine,{axis:"x",inherit:"y"});n.coerceSelectionMarkerOpacity(t,c)}function h(e,t){var r,a;function i(e){return n.coerce(a._input,a,f,e)}if(t.barmode==="group"){for(var o=0;o<e.length;o++){a=e[o];if(a.type==="bar"){r=a._input;u(r,a,t,i)}}}}function p(e,t,r,a,i,o){o=o||{};var s=!(o.moduleHasSelected===false);var l=!(o.moduleHasUnselected===false);var u=!(o.moduleHasConstrain===false);var f=!(o.moduleHasCliponaxis===false);var v=!(o.moduleHasTextangle===false);var h=!(o.moduleHasInsideanchor===false);var p=!!o.hasPathbar;var d=Array.isArray(i)||i==="auto";var g=d||i==="inside";var y=d||i==="outside";if(g||y){var m=c(a,"textfont",r.font);var x=n.extendFlat({},m);var b=e.textfont&&e.textfont.color;var _=!b;if(_){delete x.color}c(a,"insidetextfont",x);if(p){var w=n.extendFlat({},m);if(_){delete w.color}c(a,"pathbar.textfont",w)}if(y)c(a,"outsidetextfont",m);if(s)a("selected.textfont.color");if(l)a("unselected.textfont.color");if(u)a("constraintext");if(f)a("cliponaxis");if(v)a("textangle");a("texttemplate")}if(g){if(h)a("insidetextanchor")}}e.exports={supplyDefaults:v,crossTraceDefaults:h,handleText:p}},58065:function(e){"use strict";e.exports=function e(t,r,n){t.x="xVal"in r?r.xVal:r.x;t.y="yVal"in r?r.yVal:r.y;if(r.xa)t.xaxis=r.xa;if(r.ya)t.yaxis=r.ya;if(n.orientation==="h"){t.label=t.y;t.value=t.x}else{t.label=t.x;t.value=t.y}return t}},69383:function(e,t,r){"use strict";var n=r(92770);var a=r(84267);var i=r(71828).isArrayOrTypedArray;t.coerceString=function(e,t,r){if(typeof t==="string"){if(t||!e.noBlank)return t}else if(typeof t==="number"||t===true){if(!e.strict)return String(t)}return r!==undefined?r:e.dflt};t.coerceNumber=function(e,t,r){if(n(t)){t=+t;var a=e.min;var i=e.max;var o=a!==undefined&&t<a||i!==undefined&&t>i;if(!o)return t}return r!==undefined?r:e.dflt};t.coerceColor=function(e,t,r){if(a(t).isValid())return t;return r!==undefined?r:e.dflt};t.coerceEnumerated=function(e,t,r){if(e.coerceNumber)t=+t;if(e.values.indexOf(t)!==-1)return t;return r!==undefined?r:e.dflt};t.getValue=function(e,t){var r;if(!Array.isArray(e))r=e;else if(t<e.length)r=e[t];return r};t.getLineWidth=function(e,t){var r=0<t.mlw?t.mlw:!i(e.marker.line.width)?e.marker.line.width:0;return r}},95423:function(e,t,r){"use strict";var n=r(30211);var a=r(73972);var i=r(7901);var o=r(71828).fillText;var s=r(69383).getLineWidth;var l=r(89298).hoverLabelText;var u=r(50606).BADNUM;function f(e,t,r,n,i){var o=c(e,t,r,n,i);if(o){var s=o.cd;var l=s[0].trace;var u=s[o.index];o.color=v(l,u);a.getComponentMethod("errorbars","hoverInfo")(u,l,o);return[o]}}function c(e,t,r,a,i){var s=e.cd;var f=s[0].trace;var c=s[0].t;var v=a==="closest";var h=f.type==="waterfall";var p=e.maxHoverDistance;var d=e.maxSpikeDistance;var g,y,m,x,b,_,w;if(f.orientation==="h"){g=r;y=t;m="y";x="x";b=z;_=P}else{g=t;y=r;m="x";x="y";_=z;b=P}var T=f[m+"period"];var k=v||T;function A(e){return S(e,-1)}function M(e){return S(e,1)}function S(e,t){var r=e.w;return e[m]+t*r/2}function E(e){return e[m+"End"]-e[m+"Start"]}var L=v?A:T?function(e){return e.p-E(e)/2}:function(e){return Math.min(A(e),e.p-c.bardelta/2)};var C=v?M:T?function(e){return e.p+E(e)/2}:function(e){return Math.max(M(e),e.p+c.bardelta/2)};function I(e,t,r){if(i.finiteRange)r=0;return n.inbox(e-g,t-g,r+Math.min(1,Math.abs(t-e)/w)-1)}function P(e){return I(L(e),C(e),p)}function O(e){return I(A(e),M(e),d)}function D(e){var t=e[x];if(h){var r=Math.abs(e.rawS)||0;if(y>0){t+=r}else if(y<0){t-=r}}return t}function z(e){var t=y;var r=e.b;var a=D(e);return n.inbox(r-t,a-t,p+(a-t)/(a-r)-1)}function R(e){var t=y;var r=e.b;var a=D(e);return n.inbox(r-t,a-t,d+(a-t)/(a-r)-1)}var F=e[m+"a"];var B=e[x+"a"];w=Math.abs(F.r2c(F.range[1])-F.r2c(F.range[0]));function N(e){return(b(e)+_(e))/2}var j=n.getDistanceFunction(a,b,_,N);n.getClosest(s,j,e);if(e.index===false)return;if(s[e.index].p===u)return;if(!k){L=function(e){return Math.min(A(e),e.p-c.bargroupwidth/2)};C=function(e){return Math.max(M(e),e.p+c.bargroupwidth/2)}}var U=e.index;var V=s[U];var H=f.base?V.b+V.s:V.s;e[x+"0"]=e[x+"1"]=B.c2p(V[x],true);e[x+"LabelVal"]=H;var q=c.extents[c.extents.round(V.p)];e[m+"0"]=F.c2p(v?L(V):q[0],true);e[m+"1"]=F.c2p(v?C(V):q[1],true);var G=V.orig_p!==undefined;e[m+"LabelVal"]=G?V.orig_p:V.p;e.labelLabel=l(F,e[m+"LabelVal"],f[m+"hoverformat"]);e.valueLabel=l(B,e[x+"LabelVal"],f[x+"hoverformat"]);e.baseLabel=l(B,V.b,f[x+"hoverformat"]);e.spikeDistance=(R(V)+O(V))/2;e[m+"Spike"]=F.c2p(V.p,true);o(V,f,e);e.hovertemplate=f.hovertemplate;return e}function v(e,t){var r=t.mcc||e.marker.color;var n=t.mlcc||e.marker.line.color;var a=s(e,t);if(i.opacity(r))return r;else if(i.opacity(n)&&a)return n}e.exports={hoverPoints:f,hoverOnBars:c,getTraceColor:v}},60822:function(e,t,r){"use strict";e.exports={attributes:r(1486),layoutAttributes:r(43641),supplyDefaults:r(90769).supplyDefaults,crossTraceDefaults:r(90769).crossTraceDefaults,supplyLayoutDefaults:r(13957),calc:r(92290),crossTraceCalc:r(11661).crossTraceCalc,colorbar:r(4898),arraysToCalcdata:r(75341),plot:r(17295).plot,style:r(16688).style,styleOnSelect:r(16688).styleOnSelect,hoverPoints:r(95423).hoverPoints,eventData:r(58065),selectPoints:r(81974),moduleType:"trace",name:"bar",basePlotModule:r(93612),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:true,meta:{}}},43641:function(e){"use strict";e.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},13957:function(e,t,r){"use strict";var n=r(73972);var a=r(89298);var i=r(71828);var o=r(43641);e.exports=function(e,t,r){function s(r,n){return i.coerce(e,t,o,r,n)}var l=false;var u=false;var f=false;var c={};var v=s("barmode");for(var h=0;h<r.length;h++){var p=r[h];if(n.traceIs(p,"bar")&&p.visible)l=true;else continue;if(v==="group"){var d=p.xaxis+p.yaxis;if(c[d])f=true;c[d]=true}if(p.visible&&p.type==="histogram"){var g=a.getFromId({_fullLayout:t},p[p.orientation==="v"?"xaxis":"yaxis"]);if(g.type!=="category")u=true}}if(!l){delete t.barmode;return}if(v!=="overlay")s("barnorm");s("bargap",u&&!f?0:.2);s("bargroupgap")}},17295:function(e,t,r){"use strict";var n=r(39898);var a=r(92770);var i=r(71828);var o=r(63893);var s=r(7901);var l=r(91424);var u=r(73972);var f=r(89298).tickText;var c=r(72597);var v=c.recordMinTextSize;var h=c.clearMinTextSize;var p=r(16688);var d=r(69383);var g=r(97313);var y=r(1486);var m=y.text;var x=y.textposition;var b=r(23469).appendArrayPointValue;var _=g.TEXTPAD;function w(e){return e.id}function T(e){if(e.ids){return w}}function k(e,t){return e<t?1:-1}function A(e,t,r,n){var a=[];var i=[];var o=n?t:r;var s=n?r:t;a[0]=o.c2p(e.s0,true);i[0]=s.c2p(e.p0,true);a[1]=o.c2p(e.s1,true);i[1]=s.c2p(e.p1,true);return n?[a,i]:[i,a]}function M(e,t,r,n){if(!t.uniformtext.mode&&S(r)){var a;if(n){a=n()}return e.transition().duration(r.duration).ease(r.easing).each("end",(function(){a&&a()})).each("interrupt",(function(){a&&a()}))}else{return e}}function S(e){return e&&e.duration>0}function E(e,t,r,o,f,c){var v=t.xaxis;var p=t.yaxis;var g=e._fullLayout;var y=e._context.staticPlot;if(!f){f={mode:g.barmode,norm:g.barmode,gap:g.bargap,groupgap:g.bargroupgap};h("bar",g)}var m=i.makeTraceGroups(o,r,"trace bars").each((function(r){var o=n.select(this);var u=r[0].trace;var h=u.type==="waterfall";var m=u.type==="funnel";var x=u.type==="bar";var b=x||m;var _=0;if(h&&u.connector.visible&&u.connector.mode==="between"){_=u.connector.line.width/2}var w=u.orientation==="h";var E=S(f);var C=i.ensureSingle(o,"g","points");var I=T(u);var P=C.selectAll("g.point").data(i.identity,I);P.enter().append("g").classed("point",true);P.exit().remove();P.each((function(o,h){var m=n.select(this);var x=A(o,v,p,w);var T=x[0][0];var S=x[0][1];var C=x[1][0];var I=x[1][1];var P=(w?S-T:I-C)===0;if(P&&b&&d.getLineWidth(u,o)){P=false}if(!P){P=!a(T)||!a(S)||!a(C)||!a(I)}o.isBlank=P;if(P){if(w){S=T}else{I=C}}if(_&&!P){if(w){T-=k(T,S)*_;S+=k(T,S)*_}else{C-=k(C,I)*_;I+=k(C,I)*_}}var O;var D;if(u.type==="waterfall"){if(!P){var z=u[o.dir].marker;O=z.line.width;D=z.color}}else{O=d.getLineWidth(u,o);D=o.mc||u.marker.color}function R(e){var t=n.round(O/2%1,2);return f.gap===0&&f.groupgap===0?n.round(Math.round(e)-t,2):e}function F(e,t,r){if(r&&e===t){return e}return Math.abs(e-t)>=2?R(e):e>t?Math.ceil(e):Math.floor(e)}if(!e._context.staticPlot){var B=s.opacity(D);var N=B<1||O>.01?R:F;T=N(T,S,w);S=N(S,T,w);C=N(C,I,!w);I=N(I,C,!w)}var j=M(i.ensureSingle(m,"path"),g,f,c);j.style("vector-effect",y?"none":"non-scaling-stroke").attr("d",isNaN((S-T)*(I-C))||P&&e._context.staticPlot?"M0,0Z":"M"+T+","+C+"V"+I+"H"+S+"V"+C+"Z").call(l.setClipUrl,t.layerClipId,e);if(!g.uniformtext.mode&&E){var U=l.makePointStyleFns(u);l.singlePointStyle(o,j,u,U,e)}L(e,t,m,r,h,T,S,C,I,f,c);if(t.layerClipId){l.hideOutsideRangePoint(o,m.select("text"),v,p,u.xcalendar,u.ycalendar)}}));var O=u.cliponaxis===false;l.setClipUrl(o,O?null:t.layerClipId,e)}));u.getComponentMethod("errorbars","plot")(e,m,t,f)}function L(e,t,r,n,a,s,u,f,c,h,d){var g=t.xaxis;var y=t.yaxis;var m=e._fullLayout;var x;function b(t,r,n){var a=i.ensureSingle(t,"text").text(r).attr({class:"bartext bartext-"+x,"text-anchor":"middle","data-notex":1}).call(l.font,n).call(o.convertToTspans,e);return a}var w=n[0].trace;var T=w.orientation==="h";var k=D(m,n,a,g,y);x=z(w,a);var A=h.mode==="stack"||h.mode==="relative";var S=n[a];var E=!A||S._outmost;if(!k||x==="none"||(S.isBlank||s===u||f===c)&&(x==="auto"||x==="inside")){r.select("text").remove();return}var L=m.font;var C=p.getBarColor(n[a],w);var I=p.getInsideTextFont(w,a,L,C);var R=p.getOutsideTextFont(w,a,L);var F=r.datum();if(T){if(g.type==="log"&&F.s0<=0){if(g.range[0]<g.range[1]){s=0}else{s=g._length}}}else{if(y.type==="log"&&F.s0<=0){if(y.range[0]<y.range[1]){f=y._length}else{f=0}}}var B=Math.abs(u-s)-2*_;var N=Math.abs(c-f)-2*_;var j;var U;var V;var H;var q;if(x==="outside"){if(!E&&!S.hasB)x="inside"}if(x==="auto"){if(E){x="inside";q=i.ensureUniformFontSize(e,I);j=b(r,k,q);U=l.bBox(j.node()),V=U.width,H=U.height;var G=V>0&&H>0;var Z=V<=B&&H<=N;var Y=V<=N&&H<=B;var W=T?B>=V*(N/H):N>=H*(B/V);if(G&&(Z||Y||W)){x="inside"}else{x="outside";j.remove();j=null}}else{x="inside"}}if(!j){q=i.ensureUniformFontSize(e,x==="outside"?R:I);j=b(r,k,q);var X=j.attr("transform");j.attr("transform","");U=l.bBox(j.node()),V=U.width,H=U.height;j.attr("transform",X);if(V<=0||H<=0){j.remove();return}}var J=w.textangle;var K,$;if(x==="outside"){$=w.constraintext==="both"||w.constraintext==="outside";K=O(s,u,f,c,U,{isHorizontal:T,constrained:$,angle:J})}else{$=w.constraintext==="both"||w.constraintext==="inside";K=P(s,u,f,c,U,{isHorizontal:T,constrained:$,angle:J,anchor:w.insidetextanchor})}K.fontSize=q.size;v(w.type==="histogram"?"bar":w.type,K,m);S.transform=K;var Q=M(j,m,h,d);i.setTransormAndDisplay(Q,K)}function C(e){return e==="auto"?0:e}function I(e,t){var r=Math.PI/180*t;var n=Math.abs(Math.sin(r));var a=Math.abs(Math.cos(r));return{x:e.width*a+e.height*n,y:e.width*n+e.height*a}}function P(e,t,r,n,a,i){var o=!!i.isHorizontal;var s=!!i.constrained;var l=i.angle||0;var u=i.anchor||"end";var f=u==="end";var c=u==="start";var v=i.leftToRight||0;var h=(v+1)/2;var p=1-h;var d=a.width;var g=a.height;var y=Math.abs(t-e);var m=Math.abs(n-r);var x=y>2*_&&m>2*_?_:0;y-=2*x;m-=2*x;var b=C(l);if(l==="auto"&&!(d<=y&&g<=m)&&(d>y||g>m)&&(!(d>m||g>y)||d<g!==y<m)){b+=90}var w=I(a,b);var T=1;if(s){T=Math.min(1,y/w.x,m/w.y)}var A=a.left*p+a.right*h;var M=(a.top+a.bottom)/2;var S=(e+_)*p+(t-_)*h;var E=(r+n)/2;var L=0;var P=0;if(c||f){var O=(o?w.x:w.y)/2;var D=o?k(e,t):k(r,n);if(o){if(c){S=e+D*x;L=-D*O}else{S=t-D*x;L=D*O}}else{if(c){E=r+D*x;P=-D*O}else{E=n-D*x;P=D*O}}}return{textX:A,textY:M,targetX:S,targetY:E,anchorX:L,anchorY:P,scale:T,rotate:b}}function O(e,t,r,n,a,i){var o=!!i.isHorizontal;var s=!!i.constrained;var l=i.angle||0;var u=a.width;var f=a.height;var c=Math.abs(t-e);var v=Math.abs(n-r);var h;if(o){h=v>2*_?_:0}else{h=c>2*_?_:0}var p=1;if(s){p=o?Math.min(1,v/f):Math.min(1,c/u)}var d=C(l);var g=I(a,d);var y=(o?g.x:g.y)/2;var m=(a.left+a.right)/2;var x=(a.top+a.bottom)/2;var b=(e+t)/2;var w=(r+n)/2;var T=0;var A=0;var M=o?k(t,e):k(r,n);if(o){b=t-M*h;T=M*y}else{w=n+M*h;A=-M*y}return{textX:m,textY:x,targetX:b,targetY:w,anchorX:T,anchorY:A,scale:p,rotate:d}}function D(e,t,r,n,a){var i=t[0].trace;var o=i.texttemplate;var s;if(o){s=R(e,t,r,n,a)}else if(i.textinfo){s=F(t,r,n,a)}else{s=d.getValue(i.text,r)}return d.coerceString(m,s)}function z(e,t){var r=d.getValue(e.textposition,t);return d.coerceEnumerated(x,r)}function R(e,t,r,n,a){var o=t[0].trace;var s=i.castOption(o,r,"texttemplate");if(!s)return"";var l=o.type==="histogram";var u=o.type==="waterfall";var c=o.type==="funnel";var v=o.orientation==="h";var h,p;var d,g;if(v){h="y";p=a;d="x";g=n}else{h="x";p=n;d="y";g=a}function y(e){return f(p,p.c2l(e),true).text}function m(e){return f(g,g.c2l(e),true).text}var x=t[r];var _={};_.label=x.p;_.labelLabel=_[h+"Label"]=y(x.p);var w=i.castOption(o,x.i,"text");if(w===0||w)_.text=w;_.value=x.s;_.valueLabel=_[d+"Label"]=m(x.s);var T={};b(T,o,x.i);if(l||T.x===undefined)T.x=v?_.value:_.label;if(l||T.y===undefined)T.y=v?_.label:_.value;if(l||T.xLabel===undefined)T.xLabel=v?_.valueLabel:_.labelLabel;if(l||T.yLabel===undefined)T.yLabel=v?_.labelLabel:_.valueLabel;if(u){_.delta=+x.rawS||x.s;_.deltaLabel=m(_.delta);_.final=x.v;_.finalLabel=m(_.final);_.initial=_.final-_.delta;_.initialLabel=m(_.initial)}if(c){_.value=x.s;_.valueLabel=m(_.value);_.percentInitial=x.begR;_.percentInitialLabel=i.formatPercent(x.begR);_.percentPrevious=x.difR;_.percentPreviousLabel=i.formatPercent(x.difR);_.percentTotal=x.sumR;_.percenTotalLabel=i.formatPercent(x.sumR)}var k=i.castOption(o,x.i,"customdata");if(k)_.customdata=k;return i.texttemplateString(s,_,e._d3locale,T,_,o._meta||{})}function F(e,t,r,n){var a=e[0].trace;var o=a.orientation==="h";var s=a.type==="waterfall";var l=a.type==="funnel";function u(e){var t=o?n:r;return f(t,e,true).text}function c(e){var t=o?r:n;return f(t,+e,true).text}var v=a.textinfo;var h=e[t];var p=v.split("+");var d=[];var g;var y=function(e){return p.indexOf(e)!==-1};if(y("label")){d.push(u(e[t].p))}if(y("text")){g=i.castOption(a,h.i,"text");if(g===0||g)d.push(g)}if(s){var m=+h.rawS||h.s;var x=h.v;var b=x-m;if(y("initial"))d.push(c(b));if(y("delta"))d.push(c(m));if(y("final"))d.push(c(x))}if(l){if(y("value"))d.push(c(h.s));var _=0;if(y("percent initial"))_++;if(y("percent previous"))_++;if(y("percent total"))_++;var w=_>1;if(y("percent initial")){g=i.formatPercent(h.begR);if(w)g+=" of initial";d.push(g)}if(y("percent previous")){g=i.formatPercent(h.difR);if(w)g+=" of previous";d.push(g)}if(y("percent total")){g=i.formatPercent(h.sumR);if(w)g+=" of total";d.push(g)}}return d.join("<br>")}e.exports={plot:E,toMoveInsideBar:P}},81974:function(e){"use strict";e.exports=function e(r,n){var a=r.cd;var i=r.xaxis;var o=r.yaxis;var s=a[0].trace;var l=s.type==="funnel";var u=s.orientation==="h";var f=[];var c;if(n===false){for(c=0;c<a.length;c++){a[c].selected=0}}else{for(c=0;c<a.length;c++){var v=a[c];var h="ct"in v?v.ct:t(v,i,o,u,l);if(n.contains(h,false,c,r)){f.push({pointNumber:c,x:i.c2d(v.x),y:o.c2d(v.y)});v.selected=1}else{v.selected=0}}}return f};function t(e,t,r,n,a){var i=t.c2p(n?e.s0:e.p0,true);var o=t.c2p(n?e.s1:e.p1,true);var s=r.c2p(n?e.p0:e.s0,true);var l=r.c2p(n?e.p1:e.s1,true);if(a){return[(i+o)/2,(s+l)/2]}else{if(n){return[o,(s+l)/2]}else{return[(i+o)/2,l]}}}},61546:function(e,t,r){"use strict";e.exports=a;var n=r(71828).distinctVals;function a(e,t){this.traces=e;this.sepNegVal=t.sepNegVal;this.overlapNoMerge=t.overlapNoMerge;var r=Infinity;var a=t.posAxis._id.charAt(0);var i=[];for(var o=0;o<e.length;o++){var s=e[o];for(var l=0;l<s.length;l++){var u=s[l];var f=u.p;if(f===undefined){f=u[a]}if(f!==undefined)i.push(f)}if(s[0]&&s[0].width1){r=Math.min(s[0].width1,r)}}this.positions=i;var c=n(i);this.distinctPositions=c.vals;if(c.vals.length===1&&r!==Infinity)this.minDiff=r;else this.minDiff=Math.min(c.minDiff,r);var v=(t.posAxis||{}).type;if(v==="category"||v==="multicategory"){this.minDiff=1}this.binWidth=this.minDiff;this.bins={}}a.prototype.put=function e(t,r){var n=this.getLabel(t,r);var a=this.bins[n]||0;this.bins[n]=a+r;return a};a.prototype.get=function e(t,r){var n=this.getLabel(t,r);return this.bins[n]||0};a.prototype.getLabel=function e(t,r){var n=r<0&&this.sepNegVal?"v":"^";var a=this.overlapNoMerge?t:Math.round(t/this.binWidth);return n+a}},16688:function(e,t,r){"use strict";var n=r(39898);var a=r(7901);var i=r(91424);var o=r(71828);var s=r(73972);var l=r(72597).resizeText;var u=r(1486);var f=u.textfont;var c=u.insidetextfont;var v=u.outsidetextfont;var h=r(69383);function p(e){var t=n.select(e).selectAll("g.barlayer").selectAll("g.trace");l(e,t,"bar");var r=t.size();var a=e._fullLayout;t.style("opacity",(function(e){return e[0].trace.opacity})).each((function(e){if(a.barmode==="stack"&&r>1||a.bargap===0&&a.bargroupgap===0&&!e[0].trace.marker.line.width){n.select(this).attr("shape-rendering","crispEdges")}}));t.selectAll("g.points").each((function(t){var r=n.select(this);var a=t[0].trace;d(r,a,e)}));s.getComponentMethod("errorbars","style")(t)}function d(e,t,r){i.pointStyle(e.selectAll("path"),t,r);g(e,t,r)}function g(e,t,r){e.selectAll("text").each((function(e){var a=n.select(this);var s=o.ensureUniformFontSize(r,b(a,e,t,r));i.font(a,s)}))}function y(e,t,r){var n=t[0].trace;if(n.selectedpoints){m(r,n,e)}else{d(r,n,e);s.getComponentMethod("errorbars","style")(r)}}function m(e,t,r){i.selectedPointStyle(e.selectAll("path"),t);x(e.selectAll("text"),t,r)}function x(e,t,r){e.each((function(e){var a=n.select(this);var s;if(e.selected){s=o.ensureUniformFontSize(r,b(a,e,t,r));var l=t.selected.textfont&&t.selected.textfont.color;if(l){s.color=l}i.font(a,s)}else{i.selectedTextStyle(a,t)}}))}function b(e,t,r,n){var a=n._fullLayout.font;var i=r.textfont;if(e.classed("bartext-inside")){var o=A(t,r);i=w(r,t.i,a,o)}else if(e.classed("bartext-outside")){i=T(r,t.i,a)}return i}function _(e,t,r){return k(f,e.textfont,t,r)}function w(e,t,r,n){var i=_(e,t,r);var o=e._input.textfont===undefined||e._input.textfont.color===undefined||Array.isArray(e.textfont.color)&&e.textfont.color[t]===undefined;if(o){i={color:a.contrast(n),family:i.family,size:i.size}}return k(c,e.insidetextfont,t,i)}function T(e,t,r){var n=_(e,t,r);return k(v,e.outsidetextfont,t,n)}function k(e,t,r,n){t=t||{};var a=h.getValue(t.family,r);var i=h.getValue(t.size,r);var o=h.getValue(t.color,r);return{family:h.coerceString(e.family,a,n.family),size:h.coerceNumber(e.size,i,n.size),color:h.coerceColor(e.color,o,n.color)}}function A(e,t){if(t.type==="waterfall"){return t[e.dir].marker.color}return e.mcc||e.mc||t.marker.color}e.exports={style:p,styleTextPoints:g,styleOnSelect:y,getInsideTextFont:w,getOutsideTextFont:T,getBarColor:A,resizeText:l}},98340:function(e,t,r){"use strict";var n=r(7901);var a=r(52075).hasColorscale;var i=r(1586);var o=r(71828).coercePattern;e.exports=function e(t,r,s,l,u){var f=s("marker.color",l);var c=a(t,"marker");if(c){i(t,r,u,s,{prefix:"marker.",cLetter:"c"})}s("marker.line.color",n.defaultLine);if(a(t,"marker.line")){i(t,r,u,s,{prefix:"marker.line.",cLetter:"c"})}s("marker.line.width");s("marker.opacity");o(s,"marker.pattern",f,c);s("selected.marker.color");s("unselected.marker.color")}},72597:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);function i(e,t,r){var i=e._fullLayout;var o=i["_"+r+"Text_minsize"];if(o){var s=i.uniformtext.mode==="hide";var l;switch(r){case"funnelarea":case"pie":case"sunburst":l="g.slice";break;case"treemap":case"icicle":l="g.slice, g.pathbar";break;default:l="g.points > g.point"}t.selectAll(l).each((function(e){var t=e.transform;if(t){t.scale=s&&t.hide?0:o/t.fontSize;var r=n.select(this).select("text");a.setTransormAndDisplay(r,t)}}))}}function o(e,t,r){if(r.uniformtext.mode){var n=l(e);var a=r.uniformtext.minsize;var i=t.scale*t.fontSize;t.hide=i<a;r[n]=r[n]||Infinity;if(!t.hide){r[n]=Math.min(r[n],Math.max(i,a))}}}function s(e,t){var r=l(e);t[r]=undefined}function l(e){return"_"+e+"Text_minsize"}e.exports={recordMinTextSize:o,clearMinTextSize:s,resizeText:i}},55023:function(e,t,r){"use strict";var n=r(5386).fF;var a=r(1426).extendFlat;var i=r(81245);var o=r(1486);e.exports={r:i.r,theta:i.theta,r0:i.r0,dr:i.dr,theta0:i.theta0,dtheta:i.dtheta,thetaunit:i.thetaunit,base:a({},o.base,{}),offset:a({},o.offset,{}),width:a({},o.width,{}),text:a({},o.text,{}),hovertext:a({},o.hovertext,{}),marker:o.marker,hoverinfo:i.hoverinfo,hovertemplate:n(),selected:o.selected,unselected:o.unselected}},74692:function(e,t,r){"use strict";var n=r(52075).hasColorscale;var a=r(78803);var i=r(75341);var o=r(11661).setGroupPositions;var s=r(66279);var l=r(73972).traceIs;var u=r(71828).extendFlat;function f(e,t){var r=e._fullLayout;var o=t.subplot;var l=r[o].radialaxis;var u=r[o].angularaxis;var f=l.makeCalcdata(t,"r");var c=u.makeCalcdata(t,"theta");var v=t._length;var h=new Array(v);var p=f;var d=c;for(var g=0;g<v;g++){h[g]={p:d[g],s:p[g]}}function y(e){var r=t[e];if(r!==undefined){t["_"+e]=Array.isArray(r)?u.makeCalcdata(t,e):u.d2c(r,t.thetaunit)}}if(u.type==="linear"){y("width");y("offset")}if(n(t,"marker")){a(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"})}if(n(t,"marker.line")){a(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"})}i(h,t);s(h,t);return h}function c(e,t,r){var n=e.calcdata;var a=[];for(var i=0;i<n.length;i++){var s=n[i];var f=s[0].trace;if(f.visible===true&&l(f,"bar")&&f.subplot===r){a.push(s)}}var c=u({},t.radialaxis,{_id:"x"});var v=t.angularaxis;o(e,v,c,a,{mode:t.barmode,norm:t.barnorm,gap:t.bargap,groupgap:t.bargroupgap})}e.exports={calc:f,crossTraceCalc:c}},6135:function(e,t,r){"use strict";var n=r(71828);var a=r(22184).handleRThetaDefaults;var i=r(98340);var o=r(55023);e.exports=function e(t,r,s,l){function u(e,a){return n.coerce(t,r,o,e,a)}var f=a(t,r,l,u);if(!f){r.visible=false;return}u("thetaunit");u("base");u("offset");u("width");u("text");u("hovertext");u("hovertemplate");i(t,r,u,s,l);n.coerceSelectionMarkerOpacity(r,u)}},27379:function(e,t,r){"use strict";var n=r(30211);var a=r(71828);var i=r(95423).getTraceColor;var o=a.fillText;var s=r(59150).makeHoverPointText;var l=r(10869).isPtInsidePolygon;e.exports=function e(t,r,u){var f=t.cd;var c=f[0].trace;var v=t.subplot;var h=v.radialAxis;var p=v.angularAxis;var d=v.vangles;var g=d?l:a.isPtInsideSector;var y=t.maxHoverDistance;var m=p._period||2*Math.PI;var x=Math.abs(h.g2p(Math.sqrt(r*r+u*u)));var b=Math.atan2(u,r);if(h.range[0]>h.range[1]){b+=Math.PI}var _=function(e){if(g(x,b,[e.rp0,e.rp1],[e.thetag0,e.thetag1],d)){return y+Math.min(1,Math.abs(e.thetag1-e.thetag0)/m)-1+(e.rp1-x)/(e.rp1-e.rp0)-1}else{return Infinity}};n.getClosest(f,_,t);if(t.index===false)return;var w=t.index;var T=f[w];t.x0=t.x1=T.ct[0];t.y0=t.y1=T.ct[1];var k=a.extendFlat({},T,{r:T.s,theta:T.p});o(T,c,t);s(k,c,v,t);t.hovertemplate=c.hovertemplate;t.color=i(c,T);t.xLabelVal=t.yLabelVal=undefined;if(T.s<0){t.idealAlign="left"}return[t]}},23381:function(e,t,r){"use strict";e.exports={moduleType:"trace",name:"barpolar",basePlotModule:r(23580),categories:["polar","bar","showLegend"],attributes:r(55023),layoutAttributes:r(40151),supplyDefaults:r(6135),supplyLayoutDefaults:r(19860),calc:r(74692).calc,crossTraceCalc:r(74692).crossTraceCalc,plot:r(60173),colorbar:r(4898),formatLabels:r(98608),style:r(16688).style,styleOnSelect:r(16688).styleOnSelect,hoverPoints:r(27379),selectPoints:r(81974),meta:{}}},40151:function(e){"use strict";e.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},19860:function(e,t,r){"use strict";var n=r(71828);var a=r(40151);e.exports=function(e,t,r){var i={};var o;function s(r,i){return n.coerce(e[o]||{},t[o],a,r,i)}for(var l=0;l<r.length;l++){var u=r[l];if(u.type==="barpolar"&&u.visible===true){o=u.subplot;if(!i[o]){s("barmode");s("bargap");i[o]=1}}}}},60173:function(e,t,r){"use strict";var n=r(39898);var a=r(92770);var i=r(71828);var o=r(91424);var s=r(10869);e.exports=function e(t,r,s){var u=t._context.staticPlot;var f=r.xaxis;var c=r.yaxis;var v=r.radialAxis;var h=r.angularAxis;var p=l(r);var d=r.layers.frontplot.select("g.barlayer");i.makeTraceGroups(d,s,"trace bars").each((function(){var e=n.select(this);var s=i.ensureSingle(e,"g","points");var l=s.selectAll("g.point").data(i.identity);l.enter().append("g").style("vector-effect",u?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",true);l.exit().remove();l.each((function(e){var t=n.select(this);var r=e.rp0=v.c2p(e.s0);var o=e.rp1=v.c2p(e.s1);var s=e.thetag0=h.c2g(e.p0);var l=e.thetag1=h.c2g(e.p1);var u;if(!a(r)||!a(o)||!a(s)||!a(l)||r===o||s===l){u="M0,0Z"}else{var d=v.c2g(e.s1);var g=(s+l)/2;e.ct=[f.c2p(d*Math.cos(g)),c.c2p(d*Math.sin(g))];u=p(r,o,s,l)}i.ensureSingle(t,"path").attr("d",u)}));o.setClipUrl(e,r._hasClipOnAxisFalse?r.clipIds.forTraces:null,t)}))};function l(e){var t=e.cxx;var r=e.cyy;if(e.vangles){return function(n,a,o,l){var u,f;if(i.angleDelta(o,l)>0){u=o;f=l}else{u=l;f=o}var c=s.findEnclosingVertexAngles(u,e.vangles)[0];var v=s.findEnclosingVertexAngles(f,e.vangles)[1];var h=[c,(u+f)/2,v];return s.pathPolygonAnnulus(n,a,u,f,h,t,r)}}return function(e,n,a,o){return i.pathAnnulus(e,n,a,o,t,r)}}},53522:function(e,t,r){"use strict";var n=r(82196);var a=r(1486);var i=r(22399);var o=r(12663).axisHoverFormat;var s=r(5386).fF;var l=r(1426).extendFlat;var u=n.marker;var f=u.line;e.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:n.xperiod,yperiod:n.yperiod,xperiod0:n.xperiod0,yperiod0:n.yperiod0,xperiodalignment:n.xperiodalignment,yperiodalignment:n.yperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",false],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[true,"sd",false],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:l({},u.symbol,{arrayOk:false,editType:"plot"}),opacity:l({},u.opacity,{arrayOk:false,dflt:1,editType:"style"}),angle:l({},u.angle,{arrayOk:false,editType:"calc"}),size:l({},u.size,{arrayOk:false,editType:"calc"}),color:l({},u.color,{arrayOk:false,editType:"style"}),line:{color:l({},f.color,{arrayOk:false,dflt:i.defaultLine,editType:"style"}),width:l({},f.width,{arrayOk:false,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:n.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:a.offsetgroup,alignmentgroup:a.alignmentgroup,selected:{marker:n.selected.marker,editType:"style"},unselected:{marker:n.unselected.marker,editType:"style"},text:l({},n.text,{}),hovertext:l({},n.hovertext,{}),hovertemplate:s({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},48518:function(e,t,r){"use strict";var n=r(92770);var a=r(89298);var i=r(42973);var o=r(71828);var s=r(50606).BADNUM;var l=o._;e.exports=function e(t,r){var i=t._fullLayout;var v=a.getFromId(t,r.xaxis||"x");var w=a.getFromId(t,r.yaxis||"y");var T=[];var k=r.type==="violin"?"_numViolins":"_numBoxes";var A,M;var S,E;var L,C;var I;if(r.orientation==="h"){S=v;E="x";L=w;C="y";I=!!r.yperiodalignment}else{S=w;E="y";L=v;C="x";I=!!r.xperiodalignment}var P=u(r,C,L,i[k]);var O=P[0];var D=P[1];var z=o.distinctVals(O,L);var R=z.vals;var F=z.minDiff/2;var B;var N;var j;var U;var V;var H;var q=(r.boxpoints||r.points)==="all"?o.identity:function(e){return e.v<B.lf||e.v>B.uf};if(r._hasPreCompStats){var G=r[E];var Z=function(e){return S.d2c((r[e]||[])[A])};var Y=Infinity;var W=-Infinity;for(A=0;A<r._length;A++){var X=O[A];if(!n(X))continue;B={};B.pos=B[C]=X;if(I&&D){B.orig_p=D[A]}B.q1=Z("q1");B.med=Z("median");B.q3=Z("q3");N=[];if(G&&o.isArrayOrTypedArray(G[A])){for(M=0;M<G[A].length;M++){H=S.d2c(G[A][M]);if(H!==s){V={v:H,i:[A,M]};h(V,r,[A,M]);N.push(V)}}}B.pts=N.sort(d);j=B[E]=N.map(g);U=j.length;if(B.med!==s&&B.q1!==s&&B.q3!==s&&B.med>=B.q1&&B.q3>=B.med){var J=Z("lowerfence");B.lf=J!==s&&J<=B.q1?J:y(B,j,U);var K=Z("upperfence");B.uf=K!==s&&K>=B.q3?K:m(B,j,U);var $=Z("mean");B.mean=$!==s?$:U?o.mean(j,U):(B.q1+B.q3)/2;var Q=Z("sd");B.sd=$!==s&&Q>=0?Q:U?o.stdev(j,U,B.mean):B.q3-B.q1;B.lo=x(B);B.uo=b(B);var ee=Z("notchspan");ee=ee!==s&&ee>0?ee:_(B,U);B.ln=B.med-ee;B.un=B.med+ee;var te=B.lf;var re=B.uf;if(r.boxpoints&&j.length){te=Math.min(te,j[0]);re=Math.max(re,j[U-1])}if(r.notched){te=Math.min(te,B.ln);re=Math.max(re,B.un)}B.min=te;B.max=re}else{o.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+B.q1,"median = "+B.med,"q3 = "+B.q3].join("\n"));var ne;if(B.med!==s){ne=B.med}else if(B.q1!==s){if(B.q3!==s)ne=(B.q1+B.q3)/2;else ne=B.q1}else if(B.q3!==s){ne=B.q3}else{ne=0}B.med=ne;B.q1=B.q3=ne;B.lf=B.uf=ne;B.mean=B.sd=ne;B.ln=B.un=ne;B.min=B.max=ne}Y=Math.min(Y,B.min);W=Math.max(W,B.max);B.pts2=N.filter(q);T.push(B)}r._extremes[S._id]=a.findExtremes(S,[Y,W],{padded:true})}else{var ae=S.makeCalcdata(r,E);var ie=f(R,F);var oe=R.length;var se=c(oe);for(A=0;A<r._length;A++){H=ae[A];if(!n(H))continue;var le=o.findBin(O[A],ie);if(le>=0&&le<oe){V={v:H,i:A};h(V,r,A);se[le].push(V)}}var ue=Infinity;var fe=-Infinity;var ce=r.quartilemethod;var ve=ce==="exclusive";var he=ce==="inclusive";for(A=0;A<oe;A++){if(se[A].length>0){B={};B.pos=B[C]=R[A];N=B.pts=se[A].sort(d);j=B[E]=N.map(g);U=j.length;B.min=j[0];B.max=j[U-1];B.mean=o.mean(j,U);B.sd=o.stdev(j,U,B.mean)*r.sdmultiple;B.med=o.interp(j,.5);if(U%2&&(ve||he)){var pe;var de;if(ve){pe=j.slice(0,U/2);de=j.slice(U/2+1)}else if(he){pe=j.slice(0,U/2+1);de=j.slice(U/2)}B.q1=o.interp(pe,.5);B.q3=o.interp(de,.5)}else{B.q1=o.interp(j,.25);B.q3=o.interp(j,.75)}B.lf=y(B,j,U);B.uf=m(B,j,U);B.lo=x(B);B.uo=b(B);var ge=_(B,U);B.ln=B.med-ge;B.un=B.med+ge;ue=Math.min(ue,B.ln);fe=Math.max(fe,B.un);B.pts2=N.filter(q);T.push(B)}}r._extremes[S._id]=a.findExtremes(S,r.notched?ae.concat([ue,fe]):ae,{padded:true})}p(T,r);if(T.length>0){T[0].t={num:i[k],dPos:F,posLetter:C,valLetter:E,labels:{med:l(t,"median:"),min:l(t,"min:"),q1:l(t,"q1:"),q3:l(t,"q3:"),max:l(t,"max:"),mean:r.boxmean==="sd"||r.sizemode==="sd"?l(t,"mean  :").replace("",r.sdmultiple===1?"":r.sdmultiple+""):l(t,"mean:"),lf:l(t,"lower fence:"),uf:l(t,"upper fence:")}};i[k]++;return T}else{return[{t:{empty:true}}]}};function u(e,t,r,a){var s=t in e;var l=t+"0"in e;var u="d"+t in e;if(s||l&&u){var f=r.makeCalcdata(e,t);var c=i(e,r,t,f).vals;return[c,f]}var v;if(l){v=e[t+"0"]}else if("name"in e&&(r.type==="category"||n(e.name)&&["linear","log"].indexOf(r.type)!==-1||o.isDateTime(e.name)&&r.type==="date")){v=e.name}else{v=a}var h=r.type==="multicategory"?r.r2c_just_indices(v):r.d2c(v,0,e[t+"calendar"]);var p=e._length;var d=new Array(p);for(var g=0;g<p;g++)d[g]=h;return[d]}function f(e,t){var r=e.length;var n=new Array(r+1);for(var a=0;a<r;a++){n[a]=e[a]-t}n[r]=e[r-1]+t;return n}function c(e){var t=new Array(e);for(var r=0;r<e;r++){t[r]=[]}return t}var v={text:"tx",hovertext:"htx"};function h(e,t,r){for(var n in v){if(o.isArrayOrTypedArray(t[n])){if(Array.isArray(r)){if(o.isArrayOrTypedArray(t[n][r[0]])){e[v[n]]=t[n][r[0]][r[1]]}}else{e[v[n]]=t[n][r]}}}}function p(e,t){if(o.isArrayOrTypedArray(t.selectedpoints)){for(var r=0;r<e.length;r++){var n=e[r].pts||[];var a={};for(var i=0;i<n.length;i++){a[n[i].i]=i}o.tagSelected(n,t,a)}}}function d(e,t){return e.v-t.v}function g(e){return e.v}function y(e,t,r){if(r===0)return e.q1;return Math.min(e.q1,t[Math.min(o.findBin(2.5*e.q1-1.5*e.q3,t,true)+1,r-1)])}function m(e,t,r){if(r===0)return e.q3;return Math.max(e.q3,t[Math.max(o.findBin(2.5*e.q3-1.5*e.q1,t),0)])}function x(e){return 4*e.q1-3*e.q3}function b(e){return 4*e.q3-3*e.q1}function _(e,t){if(t===0)return 0;return 1.57*(e.q3-e.q1)/Math.sqrt(t)}},37188:function(e,t,r){"use strict";var n=r(89298);var a=r(71828);var i=r(99082).getAxisGroup;var o=["v","h"];function s(e,t){var r=e.calcdata;var n=t.xaxis;var a=t.yaxis;for(var i=0;i<o.length;i++){var s=o[i];var u=s==="h"?a:n;var f=[];for(var c=0;c<r.length;c++){var v=r[c];var h=v[0].t;var p=v[0].trace;if(p.visible===true&&(p.type==="box"||p.type==="candlestick")&&!h.empty&&(p.orientation||"v")===s&&p.xaxis===n._id&&p.yaxis===a._id){f.push(c)}}l("box",e,f,u)}}function l(e,t,r,o){var s=t.calcdata;var l=t._fullLayout;var u=o._id;var f=u.charAt(0);var c,v,h;var p=[];var d=0;for(c=0;c<r.length;c++){h=s[r[c]];for(v=0;v<h.length;v++){p.push(o.c2l(h[v].pos,true));d+=(h[v].pts2||[]).length}}if(!p.length)return;var g=a.distinctVals(p);if(o.type==="category"||o.type==="multicategory"){g.minDiff=1}var y=g.minDiff/2;n.minDtick(o,g.minDiff,g.vals[0],true);var m=e==="violin"?"_numViolins":"_numBoxes";var x=l[m];var b=l[e+"mode"]==="group"&&x>1;var _=1-l[e+"gap"];var w=1-l[e+"groupgap"];for(c=0;c<r.length;c++){h=s[r[c]];var T=h[0].trace;var k=h[0].t;var A=T.width;var M=T.side;var S;var E;var L;var C;if(A){S=E=C=A/2;L=0}else{S=y;if(b){var I=i(l,o._id)+T.orientation;var P=l._alignmentOpts[I]||{};var O=P[T.alignmentgroup]||{};var D=Object.keys(O.offsetGroups||{}).length;var z=D||x;var R=D?T._offsetIndex:k.num;E=S*_*w/z;L=2*S*(-.5+(R+.5)/z)*_;C=S*_/z}else{E=S*_*w;L=0;C=S}}k.dPos=S;k.bPos=L;k.bdPos=E;k.wHover=C;var F;var B;var N=L+E;var j;var U;var V;var H;var q;var G;var Z=Boolean(A);var Y=(T.boxpoints||T.points)&&d>0;if(M==="positive"){F=S*(A?1:.5);j=N;B=j=L}else if(M==="negative"){F=j=L;B=S*(A?1:.5);U=N}else{F=B=S;j=U=N}if(Y){var W=T.pointpos;var X=T.jitter;var J=T.marker.size/2;var K=0;if(W+X>=0){K=N*(W+X);if(K>F){Z=true;q=J;V=K}else if(K>j){q=J;V=F}}if(K<=F){V=F}var $=0;if(W-X<=0){$=-N*(W-X);if($>B){Z=true;G=J;H=$}else if($>U){G=J;H=B}}if($<=B){H=B}}else{V=F;H=B}var Q=new Array(h.length);for(v=0;v<h.length;v++){Q[v]=h[v].pos}T._extremes[u]=n.findExtremes(o,Q,{padded:Z,vpadminus:H,vpadplus:V,vpadLinearized:true,ppadminus:{x:G,y:q}[f],ppadplus:{x:q,y:G}[f]})}}e.exports={crossTraceCalc:s,setPositionOffset:l}},36411:function(e,t,r){"use strict";var n=r(71828);var a=r(73972);var i=r(7901);var o=r(73927);var s=r(26125);var l=r(4322);var u=r(53522);function f(e,t,r,a){function s(r,a){return n.coerce(e,t,u,r,a)}c(e,t,s,a);if(t.visible===false)return;o(e,t,a,s);s("xhoverformat");s("yhoverformat");var l=t._hasPreCompStats;if(l){s("lowerfence");s("upperfence")}s("line.color",(e.marker||{}).color||r);s("line.width");s("fillcolor",i.addOpacity(t.line.color,.5));var f=false;if(l){var h=s("mean");var p=s("sd");if(h&&h.length){f=true;if(p&&p.length)f="sd"}}s("whiskerwidth");var d=s("sizemode");var g;if(d==="quartiles"){g=s("boxmean",f)}s("showwhiskers",d==="quartiles");if(d==="sd"||g==="sd"){s("sdmultiple")}s("width");s("quartilemethod");var y=false;if(l){var m=s("notchspan");if(m&&m.length){y=true}}else if(n.validate(e.notchwidth,u.notchwidth)){y=true}var x=s("notched",y);if(x)s("notchwidth");v(e,t,s,{prefix:"box"})}function c(e,t,r,i){function o(e){var t=0;if(e&&e.length){t+=1;if(n.isArrayOrTypedArray(e[0])&&e[0].length){t+=1}}return t}function s(t){return n.validate(e[t],u[t])}var f=r("y");var c=r("x");var v;if(t.type==="box"){var h=r("q1");var p=r("median");var d=r("q3");t._hasPreCompStats=h&&h.length&&p&&p.length&&d&&d.length;v=Math.min(n.minRowLength(h),n.minRowLength(p),n.minRowLength(d))}var g=o(f);var y=o(c);var m=g&&n.minRowLength(f);var x=y&&n.minRowLength(c);var b=i.calendar;var _={autotypenumbers:i.autotypenumbers};var w,T;if(t._hasPreCompStats){switch(String(y)+String(g)){case"00":var k=s("x0")||s("dx");var A=s("y0")||s("dy");if(A&&!k){w="h"}else{w="v"}T=v;break;case"10":w="v";T=Math.min(v,x);break;case"20":w="h";T=Math.min(v,c.length);break;case"01":w="h";T=Math.min(v,m);break;case"02":w="v";T=Math.min(v,f.length);break;case"12":w="v";T=Math.min(v,x,f.length);break;case"21":w="h";T=Math.min(v,c.length,m);break;case"11":T=0;break;case"22":var M=false;var S;for(S=0;S<c.length;S++){if(l(c[S],b,_)==="category"){M=true;break}}if(M){w="v";T=Math.min(v,x,f.length)}else{for(S=0;S<f.length;S++){if(l(f[S],b,_)==="category"){M=true;break}}if(M){w="h";T=Math.min(v,c.length,m)}else{w="v";T=Math.min(v,x,f.length)}}break}}else if(g>0){w="v";if(y>0){T=Math.min(x,m)}else{T=Math.min(m)}}else if(y>0){w="h";T=Math.min(x)}else{T=0}if(!T){t.visible=false;return}t._length=T;var E=r("orientation",w);if(t._hasPreCompStats){if(E==="v"&&y===0){r("x0",0);r("dx",1)}else if(E==="h"&&g===0){r("y0",0);r("dy",1)}}else{if(E==="v"&&y===0){r("x0")}else if(E==="h"&&g===0){r("y0")}}var L=a.getComponentMethod("calendars","handleTraceDefaults");L(e,t,["x","y"],i)}function v(e,t,r,a){var i=a.prefix;var o=n.coerce2(e,t,u,"marker.outliercolor");var s=r("marker.line.outliercolor");var l="outliers";if(t._hasPreCompStats){l="all"}else if(o||s){l="suspectedoutliers"}var f=r(i+"points",l);if(f){r("jitter",f==="all"?.3:0);r("pointpos",f==="all"?-1.5:0);r("marker.symbol");r("marker.opacity");r("marker.size");r("marker.angle");r("marker.color",t.line.color);r("marker.line.color");r("marker.line.width");if(f==="suspectedoutliers"){r("marker.line.outliercolor",t.marker.color);r("marker.line.outlierwidth")}r("selected.marker.color");r("unselected.marker.color");r("selected.marker.size");r("unselected.marker.size");r("text");r("hovertext")}else{delete t.marker}var c=r("hoveron");if(c==="all"||c.indexOf("points")!==-1){r("hovertemplate")}n.coerceSelectionMarkerOpacity(t,r)}function h(e,t){var r,a;function i(e){return n.coerce(a._input,a,u,e)}for(var o=0;o<e.length;o++){a=e[o];var l=a.type;if(l==="box"||l==="violin"){r=a._input;if(t[l+"mode"]==="group"){s(r,a,t,i)}}}}e.exports={supplyDefaults:f,crossTraceDefaults:h,handleSampleDefaults:c,handlePointsDefaults:v}},74907:function(e){"use strict";e.exports=function e(t,r){if(r.hoverOnBox)t.hoverOnBox=r.hoverOnBox;if("xVal"in r)t.x=r.xVal;if("yVal"in r)t.y=r.yVal;if(r.xa)t.xaxis=r.xa;if(r.ya)t.yaxis=r.ya;return t}},41868:function(e,t,r){"use strict";var n=r(89298);var a=r(71828);var i=r(30211);var o=r(7901);var s=a.fillText;function l(e,t,r,n){var a=e.cd;var i=a[0].trace;var o=i.hoveron;var s=[];var l;if(o.indexOf("boxes")!==-1){s=s.concat(u(e,t,r,n))}if(o.indexOf("points")!==-1){l=f(e,t,r)}if(n==="closest"){if(l)return[l];return s}if(l){s.push(l);return s}return s}function u(e,t,r,s){var l=e.cd;var u=e.xa;var f=e.ya;var c=l[0].trace;var v=l[0].t;var h=c.type==="violin";var p,d,g,y,m,x,b,_,w,T,k;var A=v.bdPos;var M,S;var E=v.wHover;var L=function(e){return g.c2l(e.pos)+v.bPos-g.c2l(x)};if(h&&c.side!=="both"){if(c.side==="positive"){w=function(e){var t=L(e);return i.inbox(t,t+E,T)};M=A;S=0}if(c.side==="negative"){w=function(e){var t=L(e);return i.inbox(t-E,t,T)};M=0;S=A}}else{w=function(e){var t=L(e);return i.inbox(t-E,t+E,T)};M=S=A}var C;if(h){C=function(e){return i.inbox(e.span[0]-m,e.span[1]-m,T)}}else{C=function(e){return i.inbox(e.min-m,e.max-m,T)}}if(c.orientation==="h"){m=t;x=r;b=C;_=w;p="y";g=f;d="x";y=u}else{m=r;x=t;b=w;_=C;p="x";g=u;d="y";y=f}var I=Math.min(1,A/Math.abs(g.r2c(g.range[1])-g.r2c(g.range[0])));T=e.maxHoverDistance-I;k=e.maxSpikeDistance-I;function P(e){return(b(e)+_(e))/2}var O=i.getDistanceFunction(s,b,_,P);i.getClosest(l,O,e);if(e.index===false)return[];var D=l[e.index];var z=c.line.color;var R=(c.marker||{}).color;if(o.opacity(z)&&c.line.width)e.color=z;else if(o.opacity(R)&&c.boxpoints)e.color=R;else e.color=c.fillcolor;e[p+"0"]=g.c2p(D.pos+v.bPos-S,true);e[p+"1"]=g.c2p(D.pos+v.bPos+M,true);e[p+"LabelVal"]=D.orig_p!==undefined?D.orig_p:D.pos;var F=p+"Spike";e.spikeDistance=P(D)*k/T;e[F]=g.c2p(D.pos,true);var B=c.boxmean||c.sizemode==="sd"||(c.meanline||{}).visible;var N=c.boxpoints||c.points;var j=N&&B?["max","uf","q3","med","mean","q1","lf","min"]:N&&!B?["max","uf","q3","med","q1","lf","min"]:!N&&B?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"];var U=y.range[1]<y.range[0];if(c.orientation===(U?"v":"h")){j.reverse()}var V=e.spikeDistance;var H=e[F];var q=[];for(var G=0;G<j.length;G++){var Z=j[G];if(!(Z in D))continue;var Y=D[Z];var W=y.c2p(Y,true);var X=a.extendFlat({},e);X.attr=Z;X[d+"0"]=X[d+"1"]=W;X[d+"LabelVal"]=Y;X[d+"Label"]=(v.labels?v.labels[Z]+" ":"")+n.hoverLabelText(y,Y,c[d+"hoverformat"]);X.hoverOnBox=true;if(Z==="mean"&&"sd"in D&&(c.boxmean==="sd"||c.sizemode==="sd")){X[d+"err"]=D.sd}X.hovertemplate=false;q.push(X)}e.name="";e.spikeDistance=undefined;e[F]=undefined;for(var J=0;J<q.length;J++){if(q[J].attr!=="med"){q[J].name="";q[J].spikeDistance=undefined;q[J][F]=undefined}else{q[J].spikeDistance=V;q[J][F]=H}}return q}function f(e,t,r){var n=e.cd;var o=e.xa;var l=e.ya;var u=n[0].trace;var f=o.c2p(t);var c=l.c2p(r);var v;var h=function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(o.c2p(e.x)-f)-t,1-3/t)};var p=function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(l.c2p(e.y)-c)-t,1-3/t)};var d=i.quadrature(h,p);var g=false;var y,m;for(var x=0;x<n.length;x++){y=n[x];for(var b=0;b<(y.pts||[]).length;b++){m=y.pts[b];var _=d(m);if(_<=e.distance){e.distance=_;g=[x,b]}}}if(!g)return false;y=n[g[0]];m=y.pts[g[1]];var w=o.c2p(m.x,true);var T=l.c2p(m.y,true);var k=m.mrc||1;v=a.extendFlat({},e,{index:m.i,color:(u.marker||{}).color,name:u.name,x0:w-k,x1:w+k,y0:T-k,y1:T+k,spikeDistance:e.distance,hovertemplate:u.hovertemplate});var A=y.orig_p;var M=A!==undefined?A:y.pos;var S;if(u.orientation==="h"){S=l;v.xLabelVal=m.x;v.yLabelVal=M}else{S=o;v.xLabelVal=M;v.yLabelVal=m.y}var E=S._id.charAt(0);v[E+"Spike"]=S.c2p(y.pos,true);s(m,u,v);return v}e.exports={hoverPoints:l,hoverOnBoxes:u,hoverOnPoints:f}},83832:function(e,t,r){"use strict";e.exports={attributes:r(53522),layoutAttributes:r(40094),supplyDefaults:r(36411).supplyDefaults,crossTraceDefaults:r(36411).crossTraceDefaults,supplyLayoutDefaults:r(4199).supplyLayoutDefaults,calc:r(48518),crossTraceCalc:r(37188).crossTraceCalc,plot:r(86047).plot,style:r(58063).style,styleOnSelect:r(58063).styleOnSelect,hoverPoints:r(41868).hoverPoints,eventData:r(74907),selectPoints:r(24626),moduleType:"trace",name:"box",basePlotModule:r(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},40094:function(e){"use strict";e.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},4199:function(e,t,r){"use strict";var n=r(73972);var a=r(71828);var i=r(40094);function o(e,t,r,a,i){var o=i+"Layout";var s=false;for(var l=0;l<r.length;l++){var u=r[l];if(n.traceIs(u,o)){s=true;break}}if(!s)return;a(i+"mode");a(i+"gap");a(i+"groupgap")}function s(e,t,r){function n(r,n){return a.coerce(e,t,i,r,n)}o(e,t,r,n,"box")}e.exports={supplyLayoutDefaults:s,_supply:o}},86047:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);var i=r(91424);var o=5;var s=.01;function l(e,t,r,i){var o=e._context.staticPlot;var s=t.xaxis;var l=t.yaxis;a.makeTraceGroups(i,r,"trace boxes").each((function(e){var t=n.select(this);var r=e[0];var a=r.t;var i=r.trace;a.wdPos=a.bdPos*i.whiskerwidth;if(i.visible!==true||a.empty){t.remove();return}var v,h;if(i.orientation==="h"){v=l;h=s}else{v=s;h=l}u(t,{pos:v,val:h},i,a,o);f(t,{x:s,y:l},i,a);c(t,{pos:v,val:h},i,a)}))}function u(e,t,r,i,o){var s=r.orientation==="h";var l=t.val;var u=t.pos;var f=!!u.rangebreaks;var c=i.bPos;var v=i.wdPos||0;var h=i.bPosPxOffset||0;var p=r.whiskerwidth||0;var d=r.showwhiskers!==false;var g=r.notched||false;var y=g?1-2*r.notchwidth:1;var m;var x;if(Array.isArray(i.bdPos)){m=i.bdPos[0];x=i.bdPos[1]}else{m=i.bdPos;x=i.bdPos}var b=e.selectAll("path.box").data(r.type!=="violin"||r.box.visible?a.identity:[]);b.enter().append("path").style("vector-effect",o?"none":"non-scaling-stroke").attr("class","box");b.exit().remove();b.each((function(e){if(e.empty)return n.select(this).attr("d","M0,0Z");var t=u.c2l(e.pos+c,true);var i=u.l2p(t-m)+h;var o=u.l2p(t+x)+h;var b=f?(i+o)/2:u.l2p(t)+h;var _=r.whiskerwidth;var w=f?i*_+(1-_)*b:u.l2p(t-v)+h;var T=f?o*_+(1-_)*b:u.l2p(t+v)+h;var k=u.l2p(t-m*y)+h;var A=u.l2p(t+x*y)+h;var M=r.sizemode==="sd";var S=l.c2p(M?e.mean-e.sd:e.q1,true);var E=M?l.c2p(e.mean+e.sd,true):l.c2p(e.q3,true);var L=a.constrain(M?l.c2p(e.mean,true):l.c2p(e.med,true),Math.min(S,E)+1,Math.max(S,E)-1);var C=e.lf===undefined||r.boxpoints===false||M;var I=l.c2p(C?e.min:e.lf,true);var P=l.c2p(C?e.max:e.uf,true);var O=l.c2p(e.ln,true);var D=l.c2p(e.un,true);if(s){n.select(this).attr("d","M"+L+","+k+"V"+A+"M"+S+","+i+"V"+o+(g?"H"+O+"L"+L+","+A+"L"+D+","+o:"")+"H"+E+"V"+i+(g?"H"+D+"L"+L+","+k+"L"+O+","+i:"")+"Z"+(d?"M"+S+","+b+"H"+I+"M"+E+","+b+"H"+P+(p===0?"":"M"+I+","+w+"V"+T+"M"+P+","+w+"V"+T):""))}else{n.select(this).attr("d","M"+k+","+L+"H"+A+"M"+i+","+S+"H"+o+(g?"V"+O+"L"+A+","+L+"L"+o+","+D:"")+"V"+E+"H"+i+(g?"V"+D+"L"+k+","+L+"L"+i+","+O:"")+"Z"+(d?"M"+b+","+S+"V"+I+"M"+b+","+E+"V"+P+(p===0?"":"M"+w+","+I+"H"+T+"M"+w+","+P+"H"+T):""))}}))}function f(e,t,r,n){var l=t.x;var u=t.y;var f=n.bdPos;var c=n.bPos;var v=r.boxpoints||r.points;a.seedPseudoRandom();var h=function(e){e.forEach((function(e){e.t=n;e.trace=r}));return e};var p=e.selectAll("g.points").data(v?h:[]);p.enter().append("g").attr("class","points");p.exit().remove();var d=p.selectAll("path").data((function(e){var t;var n=e.pts2;var i=Math.max((e.max-e.min)/10,e.q3-e.q1);var l=i*1e-9;var u=i*s;var h=[];var p=0;var d;if(r.jitter){if(i===0){p=1;h=new Array(n.length);for(t=0;t<n.length;t++){h[t]=1}}else{for(t=0;t<n.length;t++){var g=Math.max(0,t-o);var y=n[g].v;var m=Math.min(n.length-1,t+o);var x=n[m].v;if(v!=="all"){if(n[t].v<e.lf)x=Math.min(x,e.lf);else y=Math.max(y,e.uf)}var b=Math.sqrt(u*(m-g)/(x-y+l))||0;b=a.constrain(Math.abs(b),0,1);h.push(b);p=Math.max(b,p)}}d=r.jitter*2/(p||1)}for(t=0;t<n.length;t++){var _=n[t];var w=_.v;var T=r.jitter?d*h[t]*(a.pseudoRandom()-.5):0;var k=e.pos+c+f*(r.pointpos+T);if(r.orientation==="h"){_.y=k;_.x=w}else{_.x=k;_.y=w}if(v==="suspectedoutliers"&&w<e.uo&&w>e.lo){_.so=true}}return n}));d.enter().append("path").classed("point",true);d.exit().remove();d.call(i.translatePoints,l,u)}function c(e,t,r,i){var o=t.val;var s=t.pos;var l=!!s.rangebreaks;var u=i.bPos;var f=i.bPosPxOffset||0;var c=r.boxmean||(r.meanline||{}).visible;var v;var h;if(Array.isArray(i.bdPos)){v=i.bdPos[0];h=i.bdPos[1]}else{v=i.bdPos;h=i.bdPos}var p=e.selectAll("path.mean").data(r.type==="box"&&r.boxmean||r.type==="violin"&&r.box.visible&&r.meanline.visible?a.identity:[]);p.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"});p.exit().remove();p.each((function(e){var t=s.c2l(e.pos+u,true);var a=s.l2p(t-v)+f;var i=s.l2p(t+h)+f;var p=l?(a+i)/2:s.l2p(t)+f;var d=o.c2p(e.mean,true);var g=o.c2p(e.mean-e.sd,true);var y=o.c2p(e.mean+e.sd,true);if(r.orientation==="h"){n.select(this).attr("d","M"+d+","+a+"V"+i+(c==="sd"?"m0,0L"+g+","+p+"L"+d+","+a+"L"+y+","+p+"Z":""))}else{n.select(this).attr("d","M"+a+","+d+"H"+i+(c==="sd"?"m0,0L"+p+","+g+"L"+a+","+d+"L"+p+","+y+"Z":""))}}))}e.exports={plot:l,plotBoxAndWhiskers:u,plotPoints:f,plotBoxMean:c}},24626:function(e){"use strict";e.exports=function e(t,r){var n=t.cd;var a=t.xaxis;var i=t.yaxis;var o=[];var s,l;if(r===false){for(s=0;s<n.length;s++){for(l=0;l<(n[s].pts||[]).length;l++){n[s].pts[l].selected=0}}}else{for(s=0;s<n.length;s++){for(l=0;l<(n[s].pts||[]).length;l++){var u=n[s].pts[l];var f=a.c2p(u.x);var c=i.c2p(u.y);if(r.contains([f,c],null,u.i,t)){o.push({pointNumber:u.i,x:a.c2d(u.x),y:i.c2d(u.y)});u.selected=1}else{u.selected=0}}}}return o}},58063:function(e,t,r){"use strict";var n=r(39898);var a=r(7901);var i=r(91424);function o(e,t,r){var o=r?r:n.select(e).selectAll("g.trace.boxes");o.style("opacity",(function(e){return e[0].trace.opacity}));o.each((function(t){var r=n.select(this);var o=t[0].trace;var s=o.line.width;function l(e,t,r,n){e.style("stroke-width",t+"px").call(a.stroke,r).call(a.fill,n)}var u=r.selectAll("path.box");if(o.type==="candlestick"){u.each((function(e){if(e.empty)return;var t=n.select(this);var r=o[e.dir];l(t,r.line.width,r.line.color,r.fillcolor);t.style("opacity",o.selectedpoints&&!e.selected?.3:1)}))}else{l(u,s,o.line.color,o.fillcolor);r.selectAll("path.mean").style({"stroke-width":s,"stroke-dasharray":2*s+"px,"+s+"px"}).call(a.stroke,o.line.color);var f=r.selectAll("path.point");i.pointStyle(f,o,e)}}))}function s(e,t,r){var n=t[0].trace;var a=r.selectAll("path.point");if(n.selectedpoints){i.selectedPointStyle(a,n)}else{i.pointStyle(a,n,e)}}e.exports={style:o,styleOnSelect:s}},75343:function(e,t,r){"use strict";var n=r(71828).extendFlat;var a=r(12663).axisHoverFormat;var i=r(2522);var o=r(53522);function s(e){return{line:{color:n({},o.line.color,{dflt:e}),width:o.line.width,editType:"style"},fillcolor:o.fillcolor,editType:"style"}}e.exports={xperiod:i.xperiod,xperiod0:i.xperiod0,xperiodalignment:i.xperiodalignment,xhoverformat:a("x"),yhoverformat:a("y"),x:i.x,open:i.open,high:i.high,low:i.low,close:i.close,line:{width:n({},o.line.width,{}),editType:"style"},increasing:s(i.increasing.line.color.dflt),decreasing:s(i.decreasing.line.color.dflt),text:i.text,hovertext:i.hovertext,whiskerwidth:n({},o.whiskerwidth,{dflt:0}),hoverlabel:i.hoverlabel}},41197:function(e,t,r){"use strict";var n=r(71828);var a=r(89298);var i=r(42973);var o=r(3485).calcCommon;e.exports=function(e,t){var r=e._fullLayout;var l=a.getFromId(e,t.xaxis);var u=a.getFromId(e,t.yaxis);var f=l.makeCalcdata(t,"x");var c=i(t,l,"x",f).vals;var v=o(e,t,f,c,u,s);if(v.length){n.extendFlat(v[0].t,{num:r._numBoxes,dPos:n.distinctVals(c).minDiff/2,posLetter:"x",valLetter:"y"});r._numBoxes++;return v}else{return[{t:{empty:true}}]}};function s(e,t,r,n){return{min:r,q1:Math.min(e,n),med:n,q3:Math.max(e,n),max:t}}},1026:function(e,t,r){"use strict";var n=r(71828);var a=r(7901);var i=r(14555);var o=r(73927);var s=r(75343);e.exports=function e(t,r,a,u){function f(e,a){return n.coerce(t,r,s,e,a)}var c=i(t,r,f,u);if(!c){r.visible=false;return}o(t,r,u,f,{x:true});f("xhoverformat");f("yhoverformat");f("line.width");l(t,r,f,"increasing");l(t,r,f,"decreasing");f("text");f("hovertext");f("whiskerwidth");u._requestRangeslider[r.xaxis]=true};function l(e,t,r,n){var i=r(n+".line.color");r(n+".line.width",t.line.width);r(n+".fillcolor",a.addOpacity(i,.5))}},91815:function(e,t,r){"use strict";e.exports={moduleType:"trace",name:"candlestick",basePlotModule:r(93612),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:r(75343),layoutAttributes:r(40094),supplyLayoutDefaults:r(4199).supplyLayoutDefaults,crossTraceCalc:r(37188).crossTraceCalc,supplyDefaults:r(1026),calc:r(41197),plot:r(86047).plot,layerName:"boxlayer",style:r(58063).style,hoverPoints:r(66449).hoverPoints,selectPoints:r(67324)}},13145:function(e,t,r){"use strict";var n=r(11500);var a=r(44467);e.exports=function e(t,r,n,a,o){var s=a("a");if(!s){a("da");a("a0")}var l=a("b");if(!l){a("db");a("b0")}i(t,r,n,o)};function i(e,t,r,i){var o=["aaxis","baxis"];o.forEach((function(o){var s=o.charAt(0);var l=e[o]||{};var u=a.newContainer(t,o);var f={noTicklabelstep:true,tickfont:"x",id:s+"axis",letter:s,font:t.font,name:o,data:e[s],calendar:t.calendar,dfltColor:i,bgColor:r.paper_bgcolor,autotypenumbersDflt:r.autotypenumbers,fullLayout:r};n(l,u,f);u._categories=u._categories||[];if(!e[o]&&l.type!=="-"){e[o]={type:l.type}}}))}},402:function(e,t,r){"use strict";var n=r(71828).isArrayOrTypedArray;e.exports=function(e){return a(e,0)};function a(e,t){if(!n(e)||t>=10){return null}var r=Infinity;var i=-Infinity;var o=e.length;for(var s=0;s<o;s++){var l=e[s];if(n(l)){var u=a(l,t+1);if(u){r=Math.min(u[0],r);i=Math.max(u[1],i)}}else{r=Math.min(l,r);i=Math.max(l,i)}}return[r,i]}},99798:function(e,t,r){"use strict";var n=r(41940);var a=r(1928);var i=r(22399);var o=n({editType:"calc"});o.family.dflt='"Open Sans", verdana, arial, sans-serif';o.size.dflt=12;o.color.dflt=i.defaultLine;e.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:a,baxis:a,font:o,color:{valType:"color",dflt:i.defaultLine,editType:"plot"},transforms:undefined}},4536:function(e,t,r){"use strict";var n=r(71828).isArrayOrTypedArray;e.exports=function(e,t,r,a){var i,o,s,l,u,f;var c,v,h,p,d,g,y;var m=n(r)?"a":"b";var x=m==="a"?e.aaxis:e.baxis;var b=x.smoothing;var _=m==="a"?e.a2i:e.b2j;var w=m==="a"?r:a;var T=m==="a"?a:r;var k=m==="a"?t.a.length:t.b.length;var A=m==="a"?t.b.length:t.a.length;var M=Math.floor(m==="a"?e.b2j(T):e.a2i(T));var S=m==="a"?function(t){return e.evalxy([],t,M)}:function(t){return e.evalxy([],M,t)};if(b){s=Math.max(0,Math.min(A-2,M));l=M-s;o=m==="a"?function(t,r){return e.dxydi([],t,s,r,l)}:function(t,r){return e.dxydj([],s,t,l,r)}}var E=_(w[0]);var L=_(w[1]);var C=E<L?1:-1;var I=(L-E)*1e-8;var P=C>0?Math.floor:Math.ceil;var O=C>0?Math.ceil:Math.floor;var D=C>0?Math.min:Math.max;var z=C>0?Math.max:Math.min;var R=P(E+I);var F=O(L-I);c=S(E);var B=[[c]];for(i=R;i*C<F*C;i+=C){u=[];d=z(E,i);g=D(L,i+C);y=g-d;f=Math.max(0,Math.min(k-2,Math.floor(.5*(d+g))));v=S(g);if(b){h=o(f,d-f);p=o(f,g-f);u.push([c[0]+h[0]/3*y,c[1]+h[1]/3*y]);u.push([v[0]-p[0]/3*y,v[1]-p[1]/3*y])}u.push(v);B.push(u);c=v}return B}},1928:function(e,t,r){"use strict";var n=r(41940);var a=r(22399);var i=r(13838);var o=r(12663).descriptionWithDates;var s=r(30962).overrideAll;var l=r(79952).P;var u=r(1426).extendFlat;e.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:n({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:i.autotypenumbers,autorange:{valType:"enumerated",values:[true,false,"reversed"],dflt:true,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:false,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:u({},i.labelalias,{editType:"calc"}),tickfont:n({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:false,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:o("tick label")},tickformatstops:s(i.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:false,editType:"calc"},linecolor:{valType:"color",dflt:a.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:u({},l,{editType:"calc"}),showgrid:{valType:"boolean",dflt:true,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:u({},l,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:a.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:n({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},11500:function(e,t,r){"use strict";var n=r(99798);var a=r(7901).addOpacity;var i=r(73972);var o=r(71828);var s=r(26218);var l=r(96115);var u=r(89426);var f=r(15258);var c=r(21994);var v=r(4322);e.exports=function e(t,r,v){var p=v.letter;var d=v.font||{};var g=n[p+"axis"];function y(e,n){return o.coerce(t,r,g,e,n)}function m(e,n){return o.coerce2(t,r,g,e,n)}if(v.name){r._name=v.name;r._id=v.name}y("autotypenumbers",v.autotypenumbersDflt);var x=y("type");if(x==="-"){if(v.data)h(r,v.data);if(r.type==="-"){r.type="linear"}else{x=t.type=r.type}}y("smoothing");y("cheatertype");y("showticklabels");y("labelprefix",p+" = ");y("labelsuffix");y("showtickprefix");y("showticksuffix");y("separatethousands");y("tickformat");y("exponentformat");y("minexponent");y("showexponent");y("categoryorder");y("tickmode");y("tickvals");y("ticktext");y("tick0");y("dtick");if(r.tickmode==="array"){y("arraytick0");y("arraydtick")}y("labelpadding");r._hovertitle=p;if(x==="date"){var b=i.getComponentMethod("calendars","handleDefaults");b(t,r,"calendar",v.calendar)}c(r,v.fullLayout);r.c2p=o.identity;var _=y("color",v.dfltColor);var w=_===t.color?_:d.color;var T=y("title.text");if(T){o.coerceFont(y,"title.font",{family:d.family,size:o.bigFont(d.size),color:w});y("title.offset")}y("tickangle");var k=y("autorange",!r.isValidRange(t.range));if(k)y("rangemode");y("range");r.cleanRange();y("fixedrange");s(t,r,y,x);u(t,r,y,x,v);l(t,r,y,x,v);f(t,r,y,{data:v.data,dataAttr:p});var A=m("gridcolor",a(_,.3));var M=m("gridwidth");var S=m("griddash");var E=y("showgrid");if(!E){delete r.gridcolor;delete r.gridwidth;delete r.griddash}var L=m("startlinecolor",_);var C=m("startlinewidth",M);var I=y("startline",r.showgrid||!!L||!!C);if(!I){delete r.startlinecolor;delete r.startlinewidth}var P=m("endlinecolor",_);var O=m("endlinewidth",M);var D=y("endline",r.showgrid||!!P||!!O);if(!D){delete r.endlinecolor;delete r.endlinewidth}if(!E){delete r.gridcolor;delete r.gridwidth;delete r.griddash}else{y("minorgridcount");y("minorgridwidth",M);y("minorgriddash",S);y("minorgridcolor",a(A,.06));if(!r.minorgridcount){delete r.minorgridwidth;delete r.minorgriddash;delete r.minorgridcolor}}if(r.showticklabels==="none"){delete r.tickfont;delete r.tickangle;delete r.showexponent;delete r.exponentformat;delete r.minexponent;delete r.tickformat;delete r.showticksuffix;delete r.showtickprefix}if(!r.showticksuffix){delete r.ticksuffix}if(!r.showtickprefix){delete r.tickprefix}y("tickmode");return r};function h(e,t){if(e.type!=="-")return;var r=e._id;var n=r.charAt(0);var a=n+"calendar";var i=e[a];e.type=v(t,i,{autotypenumbers:e.autotypenumbers})}},25281:function(e,t,r){"use strict";var n=r(89298);var a=r(71828).isArray1D;var i=r(53824);var o=r(402);var s=r(20347);var l=r(83311);var u=r(44807);var f=r(4742);var c=r(72505);var v=r(68296);var h=r(11435);e.exports=function e(t,r){var p=n.getFromId(t,r.xaxis);var d=n.getFromId(t,r.yaxis);var g=r.aaxis;var y=r.baxis;var m=r.x;var x=r.y;var b=[];if(m&&a(m))b.push("x");if(x&&a(x))b.push("y");if(b.length){v(r,g,y,"a","b",b)}var _=r._a=r._a||r.a;var w=r._b=r._b||r.b;m=r._x||r.x;x=r._y||r.y;var T={};if(r._cheater){var k=g.cheatertype==="index"?_.length:_;var A=y.cheatertype==="index"?w.length:w;m=i(k,A,r.cheaterslope)}r._x=m=f(m);r._y=x=f(x);c(m,_,w);c(x,_,w);h(r);r.setScale();var M=o(m);var S=o(x);var E=.5*(M[1]-M[0]);var L=.5*(M[1]+M[0]);var C=.5*(S[1]-S[0]);var I=.5*(S[1]+S[0]);var P=1.3;M=[L-E*P,L+E*P];S=[I-C*P,I+C*P];r._extremes[p._id]=n.findExtremes(p,M,{padded:true});r._extremes[d._id]=n.findExtremes(d,S,{padded:true});s(r,"a","b");s(r,"b","a");l(r,g);l(r,y);T.clipsegments=u(r._xctrl,r._yctrl,g,y);T.x=m;T.y=x;T.a=_;T.b=w;return[T]}},44807:function(e){"use strict";e.exports=function e(t,r,n,a){var i,o,s;var l=[];var u=!!n.smoothing;var f=!!a.smoothing;var c=t[0].length-1;var v=t.length-1;for(i=0,o=[],s=[];i<=c;i++){o[i]=t[0][i];s[i]=r[0][i]}l.push({x:o,y:s,bicubic:u});for(i=0,o=[],s=[];i<=v;i++){o[i]=t[i][c];s[i]=r[i][c]}l.push({x:o,y:s,bicubic:f});for(i=c,o=[],s=[];i>=0;i--){o[c-i]=t[v][i];s[c-i]=r[v][i]}l.push({x:o,y:s,bicubic:u});for(i=v,o=[],s=[];i>=0;i--){o[v-i]=t[i][0];s[v-i]=r[i][0]}l.push({x:o,y:s,bicubic:f});return l}},20347:function(e,t,r){"use strict";var n=r(89298);var a=r(1426).extendFlat;e.exports=function e(t,r,i){var o,s,l;var u,f,c,v,h,p,d;var g,y,m,x;var b=t["_"+r];var _=t[r+"axis"];var w=_._gridlines=[];var T=_._minorgridlines=[];var k=_._boundarylines=[];var A=t["_"+i];var M=t[i+"axis"];if(_.tickmode==="array"){_.tickvals=b.slice()}var S=t._xctrl;var E=t._yctrl;var L=S[0].length;var C=S.length;var I=t._a.length;var P=t._b.length;n.prepTicks(_);if(_.tickmode==="array")delete _.tickvals;var O=_.smoothing?3:1;function D(e){var n,a,o,s,l,u,f,c,v,p,d,g;var y=[];var m=[];var x={};if(r==="b"){a=t.b2j(e);o=Math.floor(Math.max(0,Math.min(P-2,a)));s=a-o;x.length=P;x.crossLength=I;x.xy=function(e){return t.evalxy([],e,a)};x.dxy=function(e,r){return t.dxydi([],e,o,r,s)};for(n=0;n<I;n++){u=Math.min(I-2,n);f=n-u;c=t.evalxy([],n,a);if(M.smoothing&&n>0){v=t.dxydi([],n-1,o,0,s);y.push(l[0]+v[0]/3);m.push(l[1]+v[1]/3);p=t.dxydi([],n-1,o,1,s);y.push(c[0]-p[0]/3);m.push(c[1]-p[1]/3)}y.push(c[0]);m.push(c[1]);l=c}}else{n=t.a2i(e);u=Math.floor(Math.max(0,Math.min(I-2,n)));f=n-u;x.length=I;x.crossLength=P;x.xy=function(e){return t.evalxy([],n,e)};x.dxy=function(e,r){return t.dxydj([],u,e,f,r)};for(a=0;a<P;a++){o=Math.min(P-2,a);s=a-o;c=t.evalxy([],n,a);if(M.smoothing&&a>0){d=t.dxydj([],u,a-1,f,0);y.push(l[0]+d[0]/3);m.push(l[1]+d[1]/3);g=t.dxydj([],u,a-1,f,1);y.push(c[0]-g[0]/3);m.push(c[1]-g[1]/3)}y.push(c[0]);m.push(c[1]);l=c}}x.axisLetter=r;x.axis=_;x.crossAxis=M;x.value=e;x.constvar=i;x.index=h;x.x=y;x.y=m;x.smoothing=M.smoothing;return x}function z(e){var n,a,o,s,l;var u=[];var f=[];var c={};c.length=b.length;c.crossLength=A.length;if(r==="b"){o=Math.max(0,Math.min(P-2,e));l=Math.min(1,Math.max(0,e-o));c.xy=function(r){return t.evalxy([],r,e)};c.dxy=function(e,r){return t.dxydi([],e,o,r,l)};for(n=0;n<L;n++){u[n]=S[e*O][n];f[n]=E[e*O][n]}}else{a=Math.max(0,Math.min(I-2,e));s=Math.min(1,Math.max(0,e-a));c.xy=function(r){return t.evalxy([],e,r)};c.dxy=function(e,r){return t.dxydj([],a,e,s,r)};for(n=0;n<C;n++){u[n]=S[n][e*O];f[n]=E[n][e*O]}}c.axisLetter=r;c.axis=_;c.crossAxis=M;c.value=b[e];c.constvar=i;c.index=e;c.x=u;c.y=f;c.smoothing=M.smoothing;return c}if(_.tickmode==="array"){u=5e-15;f=[Math.floor((b.length-1-_.arraytick0)/_.arraydtick*(1+u)),Math.ceil(-_.arraytick0/_.arraydtick/(1+u))].sort((function(e,t){return e-t}));c=f[0]-1;v=f[1]+1;for(h=c;h<v;h++){s=_.arraytick0+_.arraydtick*h;if(s<0||s>b.length-1)continue;w.push(a(z(s),{color:_.gridcolor,width:_.gridwidth,dash:_.griddash}))}for(h=c;h<v;h++){l=_.arraytick0+_.arraydtick*h;g=Math.min(l+_.arraydtick,b.length-1);if(l<0||l>b.length-1)continue;if(g<0||g>b.length-1)continue;y=b[l];m=b[g];for(o=0;o<_.minorgridcount;o++){x=g-l;if(x<=0)continue;d=y+(m-y)*(o+1)/(_.minorgridcount+1)*(_.arraydtick/x);if(d<b[0]||d>b[b.length-1])continue;T.push(a(D(d),{color:_.minorgridcolor,width:_.minorgridwidth,dash:_.minorgriddash}))}}if(_.startline){k.push(a(z(0),{color:_.startlinecolor,width:_.startlinewidth}))}if(_.endline){k.push(a(z(b.length-1),{color:_.endlinecolor,width:_.endlinewidth}))}}else{u=5e-15;f=[Math.floor((b[b.length-1]-_.tick0)/_.dtick*(1+u)),Math.ceil((b[0]-_.tick0)/_.dtick/(1+u))].sort((function(e,t){return e-t}));c=f[0];v=f[1];for(h=c;h<=v;h++){p=_.tick0+_.dtick*h;w.push(a(D(p),{color:_.gridcolor,width:_.gridwidth,dash:_.griddash}))}for(h=c-1;h<v+1;h++){p=_.tick0+_.dtick*h;for(o=0;o<_.minorgridcount;o++){d=p+_.dtick*(o+1)/(_.minorgridcount+1);if(d<b[0]||d>b[b.length-1])continue;T.push(a(D(d),{color:_.minorgridcolor,width:_.minorgridwidth,dash:_.minorgriddash}))}}if(_.startline){k.push(a(D(b[0]),{color:_.startlinecolor,width:_.startlinewidth}))}if(_.endline){k.push(a(D(b[b.length-1]),{color:_.endlinecolor,width:_.endlinewidth}))}}}},83311:function(e,t,r){"use strict";var n=r(89298);var a=r(1426).extendFlat;e.exports=function e(t,r){var i,o,s,l,u;var f=r._labels=[];var c=r._gridlines;for(i=0;i<c.length;i++){u=c[i];if(["start","both"].indexOf(r.showticklabels)!==-1){o=n.tickText(r,u.value);a(o,{prefix:s,suffix:l,endAnchor:true,xy:u.xy(0),dxy:u.dxy(0,0),axis:u.axis,length:u.crossAxis.length,font:u.axis.tickfont,isFirst:i===0,isLast:i===c.length-1});f.push(o)}if(["end","both"].indexOf(r.showticklabels)!==-1){o=n.tickText(r,u.value);a(o,{endAnchor:false,xy:u.xy(u.crossLength-1),dxy:u.dxy(u.crossLength-2,1),axis:u.axis,length:u.crossAxis.length,font:u.axis.tickfont,isFirst:i===0,isLast:i===c.length-1});f.push(o)}}}},42048:function(e){"use strict";var t=.5;e.exports=function e(r,n,a,i){var o=r[0]-n[0];var s=r[1]-n[1];var l=a[0]-n[0];var u=a[1]-n[1];var f=Math.pow(o*o+s*s,t/2);var c=Math.pow(l*l+u*u,t/2);var v=(c*c*o-f*f*l)*i;var h=(c*c*s-f*f*u)*i;var p=c*(f+c)*3;var d=f*(f+c)*3;return[[n[0]+(p&&v/p),n[1]+(p&&h/p)],[n[0]-(d&&v/d),n[1]-(d&&h/d)]]}},53824:function(e,t,r){"use strict";var n=r(71828).isArrayOrTypedArray;e.exports=function(e,t,r){var a,i,o,s,l,u;var f=[];var c=n(e)?e.length:e;var v=n(t)?t.length:t;var h=n(e)?e:null;var p=n(t)?t:null;if(h){o=(h.length-1)/(h[h.length-1]-h[0])/(c-1)}if(p){s=(p.length-1)/(p[p.length-1]-p[0])/(v-1)}var d;var g=Infinity;var y=-Infinity;for(i=0;i<v;i++){f[i]=[];u=p?(p[i]-p[0])*s:i/(v-1);for(a=0;a<c;a++){l=h?(h[a]-h[0])*o:a/(c-1);d=l-u*r;g=Math.min(d,g);y=Math.max(d,y);f[i][a]=d}}var m=1/(y-g);var x=-g*m;for(i=0;i<v;i++){for(a=0;a<c;a++){f[i][a]=m*f[i][a]+x}}return f}},45664:function(e,t,r){"use strict";var n=r(42048);var a=r(71828).ensureArray;function i(e,t,r){var n=-.5*r[0]+1.5*t[0];var a=-.5*r[1]+1.5*t[1];return[(2*n+e[0])/3,(2*a+e[1])/3]}e.exports=function e(t,r,o,s,l,u){var f,c,v,h,p,d,g,y,m,x;var b=o[0].length;var _=o.length;var w=l?3*b-2:b;var T=u?3*_-2:_;t=a(t,T);r=a(r,T);for(v=0;v<T;v++){t[v]=a(t[v],w);r[v]=a(r[v],w)}for(c=0,h=0;c<_;c++,h+=u?3:1){p=t[h];d=r[h];g=o[c];y=s[c];for(f=0,v=0;f<b;f++,v+=l?3:1){p[v]=g[f];d[v]=y[f]}}if(l){for(c=0,h=0;c<_;c++,h+=u?3:1){for(f=1,v=3;f<b-1;f++,v+=3){m=n([o[c][f-1],s[c][f-1]],[o[c][f],s[c][f]],[o[c][f+1],s[c][f+1]],l);t[h][v-1]=m[0][0];r[h][v-1]=m[0][1];t[h][v+1]=m[1][0];r[h][v+1]=m[1][1]}x=i([t[h][0],r[h][0]],[t[h][2],r[h][2]],[t[h][3],r[h][3]]);t[h][1]=x[0];r[h][1]=x[1];x=i([t[h][w-1],r[h][w-1]],[t[h][w-3],r[h][w-3]],[t[h][w-4],r[h][w-4]]);t[h][w-2]=x[0];r[h][w-2]=x[1]}}if(u){for(v=0;v<w;v++){for(h=3;h<T-3;h+=3){m=n([t[h-3][v],r[h-3][v]],[t[h][v],r[h][v]],[t[h+3][v],r[h+3][v]],u);t[h-1][v]=m[0][0];r[h-1][v]=m[0][1];t[h+1][v]=m[1][0];r[h+1][v]=m[1][1]}x=i([t[0][v],r[0][v]],[t[2][v],r[2][v]],[t[3][v],r[3][v]]);t[1][v]=x[0];r[1][v]=x[1];x=i([t[T-1][v],r[T-1][v]],[t[T-3][v],r[T-3][v]],[t[T-4][v],r[T-4][v]]);t[T-2][v]=x[0];r[T-2][v]=x[1]}}if(l&&u){for(h=1;h<T;h+=(h+1)%3===0?2:1){for(v=3;v<w-3;v+=3){m=n([t[h][v-3],r[h][v-3]],[t[h][v],r[h][v]],[t[h][v+3],r[h][v+3]],l);t[h][v-1]=.5*(t[h][v-1]+m[0][0]);r[h][v-1]=.5*(r[h][v-1]+m[0][1]);t[h][v+1]=.5*(t[h][v+1]+m[1][0]);r[h][v+1]=.5*(r[h][v+1]+m[1][1])}x=i([t[h][0],r[h][0]],[t[h][2],r[h][2]],[t[h][3],r[h][3]]);t[h][1]=.5*(t[h][1]+x[0]);r[h][1]=.5*(r[h][1]+x[1]);x=i([t[h][w-1],r[h][w-1]],[t[h][w-3],r[h][w-3]],[t[h][w-4],r[h][w-4]]);t[h][w-2]=.5*(t[h][w-2]+x[0]);r[h][w-2]=.5*(r[h][w-2]+x[1])}}return[t,r]}},35509:function(e){"use strict";e.exports={RELATIVE_CULL_TOLERANCE:1e-6}},54495:function(e){"use strict";e.exports=function(e,t,r){if(t&&r){return function(t,r,n,a,i){if(!t)t=[];var o,s,l,u,f,c;r*=3;n*=3;var v=a*a;var h=1-a;var p=h*h;var d=h*a*2;var g=-3*p;var y=3*(p-d);var m=3*(d-v);var x=3*v;var b=i*i;var _=b*i;var w=1-i;var T=w*w;var k=T*w;for(c=0;c<e.length;c++){f=e[c];o=g*f[n][r]+y*f[n][r+1]+m*f[n][r+2]+x*f[n][r+3];s=g*f[n+1][r]+y*f[n+1][r+1]+m*f[n+1][r+2]+x*f[n+1][r+3];l=g*f[n+2][r]+y*f[n+2][r+1]+m*f[n+2][r+2]+x*f[n+2][r+3];u=g*f[n+3][r]+y*f[n+3][r+1]+m*f[n+3][r+2]+x*f[n+3][r+3];t[c]=k*o+3*(T*i*s+w*b*l)+_*u}return t}}else if(t){return function(t,r,n,a,i){if(!t)t=[];var o,s,l,u;r*=3;var f=a*a;var c=1-a;var v=c*c;var h=c*a*2;var p=-3*v;var d=3*(v-h);var g=3*(h-f);var y=3*f;var m=1-i;for(l=0;l<e.length;l++){u=e[l];o=p*u[n][r]+d*u[n][r+1]+g*u[n][r+2]+y*u[n][r+3];s=p*u[n+1][r]+d*u[n+1][r+1]+g*u[n+1][r+2]+y*u[n+1][r+3];t[l]=m*o+i*s}return t}}else if(r){return function(t,r,n,a,i){if(!t)t=[];var o,s,l,u,f,c;n*=3;var v=i*i;var h=v*i;var p=1-i;var d=p*p;var g=d*p;for(f=0;f<e.length;f++){c=e[f];o=c[n][r+1]-c[n][r];s=c[n+1][r+1]-c[n+1][r];l=c[n+2][r+1]-c[n+2][r];u=c[n+3][r+1]-c[n+3][r];t[f]=g*o+3*(d*i*s+p*v*l)+h*u}return t}}else{return function(t,r,n,a,i){if(!t)t=[];var o,s,l,u;var f=1-i;for(l=0;l<e.length;l++){u=e[l];o=u[n][r+1]-u[n][r];s=u[n+1][r+1]-u[n+1][r];t[l]=f*o+i*s}return t}}}},73057:function(e){"use strict";e.exports=function(e,t,r){if(t&&r){return function(t,r,n,a,i){if(!t)t=[];var o,s,l,u,f,c;r*=3;n*=3;var v=a*a;var h=v*a;var p=1-a;var d=p*p;var g=d*p;var y=i*i;var m=1-i;var x=m*m;var b=m*i*2;var _=-3*x;var w=3*(x-b);var T=3*(b-y);var k=3*y;for(c=0;c<e.length;c++){f=e[c];o=_*f[n][r]+w*f[n+1][r]+T*f[n+2][r]+k*f[n+3][r];s=_*f[n][r+1]+w*f[n+1][r+1]+T*f[n+2][r+1]+k*f[n+3][r+1];l=_*f[n][r+2]+w*f[n+1][r+2]+T*f[n+2][r+2]+k*f[n+3][r+2];u=_*f[n][r+3]+w*f[n+1][r+3]+T*f[n+2][r+3]+k*f[n+3][r+3];t[c]=g*o+3*(d*a*s+p*v*l)+h*u}return t}}else if(t){return function(t,r,n,a,i){if(!t)t=[];var o,s,l,u,f,c;r*=3;var v=i*i;var h=v*i;var p=1-i;var d=p*p;var g=d*p;for(f=0;f<e.length;f++){c=e[f];o=c[n+1][r]-c[n][r];s=c[n+1][r+1]-c[n][r+1];l=c[n+1][r+2]-c[n][r+2];u=c[n+1][r+3]-c[n][r+3];t[f]=g*o+3*(d*i*s+p*v*l)+h*u}return t}}else if(r){return function(t,r,n,a,i){if(!t)t=[];var o,s,l,u;n*=3;var f=1-a;var c=i*i;var v=1-i;var h=v*v;var p=v*i*2;var d=-3*h;var g=3*(h-p);var y=3*(p-c);var m=3*c;for(l=0;l<e.length;l++){u=e[l];o=d*u[n][r]+g*u[n+1][r]+y*u[n+2][r]+m*u[n+3][r];s=d*u[n][r+1]+g*u[n+1][r+1]+y*u[n+2][r+1]+m*u[n+3][r+1];t[l]=f*o+a*s}return t}}else{return function(t,r,n,a,i){if(!t)t=[];var o,s,l,u;var f=1-a;for(l=0;l<e.length;l++){u=e[l];o=u[n+1][r]-u[n][r];s=u[n+1][r+1]-u[n][r+1];t[l]=f*o+a*s}return t}}}},20349:function(e){"use strict";e.exports=function(e,t,r,n,a){var i=t-2;var o=r-2;if(n&&a){return function(t,r,n){if(!t)t=[];var a,s,l,u,f,c;var v=Math.max(0,Math.min(Math.floor(r),i));var h=Math.max(0,Math.min(Math.floor(n),o));var p=Math.max(0,Math.min(1,r-v));var d=Math.max(0,Math.min(1,n-h));v*=3;h*=3;var g=p*p;var y=g*p;var m=1-p;var x=m*m;var b=x*m;var _=d*d;var w=_*d;var T=1-d;var k=T*T;var A=k*T;for(c=0;c<e.length;c++){f=e[c];a=b*f[h][v]+3*(x*p*f[h][v+1]+m*g*f[h][v+2])+y*f[h][v+3];s=b*f[h+1][v]+3*(x*p*f[h+1][v+1]+m*g*f[h+1][v+2])+y*f[h+1][v+3];l=b*f[h+2][v]+3*(x*p*f[h+2][v+1]+m*g*f[h+2][v+2])+y*f[h+2][v+3];u=b*f[h+3][v]+3*(x*p*f[h+3][v+1]+m*g*f[h+3][v+2])+y*f[h+3][v+3];t[c]=A*a+3*(k*d*s+T*_*l)+w*u}return t}}else if(n){return function(t,r,n){if(!t)t=[];var a=Math.max(0,Math.min(Math.floor(r),i));var s=Math.max(0,Math.min(Math.floor(n),o));var l=Math.max(0,Math.min(1,r-a));var u=Math.max(0,Math.min(1,n-s));var f,c,v,h,p,d;a*=3;var g=l*l;var y=g*l;var m=1-l;var x=m*m;var b=x*m;var _=1-u;for(p=0;p<e.length;p++){d=e[p];f=_*d[s][a]+u*d[s+1][a];c=_*d[s][a+1]+u*d[s+1][a+1];v=_*d[s][a+2]+u*d[s+1][a+1];h=_*d[s][a+3]+u*d[s+1][a+1];t[p]=b*f+3*(x*l*c+m*g*v)+y*h}return t}}else if(a){return function(t,r,n){if(!t)t=[];var a=Math.max(0,Math.min(Math.floor(r),i));var s=Math.max(0,Math.min(Math.floor(n),o));var l=Math.max(0,Math.min(1,r-a));var u=Math.max(0,Math.min(1,n-s));var f,c,v,h,p,d;s*=3;var g=u*u;var y=g*u;var m=1-u;var x=m*m;var b=x*m;var _=1-l;for(p=0;p<e.length;p++){d=e[p];f=_*d[s][a]+l*d[s][a+1];c=_*d[s+1][a]+l*d[s+1][a+1];v=_*d[s+2][a]+l*d[s+2][a+1];h=_*d[s+3][a]+l*d[s+3][a+1];t[p]=b*f+3*(x*u*c+m*g*v)+y*h}return t}}else{return function(t,r,n){if(!t)t=[];var a=Math.max(0,Math.min(Math.floor(r),i));var s=Math.max(0,Math.min(Math.floor(n),o));var l=Math.max(0,Math.min(1,r-a));var u=Math.max(0,Math.min(1,n-s));var f,c,v,h;var p=1-u;var d=1-l;for(v=0;v<e.length;v++){h=e[v];f=d*h[s][a]+l*h[s][a+1];c=d*h[s+1][a]+l*h[s+1][a+1];t[v]=p*f+u*c}return t}}}},92087:function(e,t,r){"use strict";var n=r(71828);var a=r(19237);var i=r(13145);var o=r(99798);var s=r(22399);e.exports=function e(t,r,l,u){function f(e,a){return n.coerce(t,r,o,e,a)}r._clipPathId="clip"+r.uid+"carpet";var c=f("color",s.defaultLine);n.coerceFont(f,"font");f("carpet");i(t,r,u,f,c);if(!r.a||!r.b){r.visible=false;return}if(r.a.length<3){r.aaxis.smoothing=0}if(r.b.length<3){r.baxis.smoothing=0}var v=a(t,r,f);if(!v){r.visible=false}if(r._cheater){f("cheaterslope")}}},21462:function(e,t,r){"use strict";e.exports={attributes:r(99798),supplyDefaults:r(92087),plot:r(89740),calc:r(25281),animatable:true,isContainer:true,moduleType:"trace",name:"carpet",basePlotModule:r(93612),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},22882:function(e){"use strict";e.exports=function(e,t){var r=e._fullData.length;var n;for(var a=0;a<r;a++){var i=e._fullData[a];if(i.index===t.index)continue;if(i.type==="carpet"){if(!n){n=i}if(i.carpet===t.carpet){return i}}}return n}},67961:function(e){"use strict";e.exports=function e(t,r,n){if(t.length===0)return"";var a;var i=[];var o=n?3:1;for(a=0;a<t.length;a+=o){i.push(t[a]+","+r[a]);if(n&&a<t.length-o){i.push("C");i.push([t[a+1]+","+r[a+1],t[a+2]+","+r[a+2]+" "].join(" "))}}return i.join(n?"":"L")}},27669:function(e,t,r){"use strict";var n=r(71828).isArrayOrTypedArray;e.exports=function e(t,r,a){var i;if(!n(t)){t=[]}else if(t.length>r.length){t=t.slice(0,r.length)}for(i=0;i<r.length;i++){t[i]=a(r[i])}return t}},11651:function(e){"use strict";e.exports=function e(t,r,n,a,i,o){var s=i[0]*t.dpdx(r);var l=i[1]*t.dpdy(n);var u=1;var f=1;if(o){var c=Math.sqrt(i[0]*i[0]+i[1]*i[1]);var v=Math.sqrt(o[0]*o[0]+o[1]*o[1]);var h=(i[0]*o[0]+i[1]*o[1])/c/v;f=Math.max(0,h)}var p=Math.atan2(l,s)*180/Math.PI;if(p<-90){p+=180;u=-u}else if(p>90){p-=180;u=-u}return{angle:p,flip:u,p:t.c2p(a,r,n),offsetMultplier:f}}},89740:function(e,t,r){"use strict";var n=r(39898);var a=r(91424);var i=r(27669);var o=r(67961);var s=r(11651);var l=r(63893);var u=r(71828);var f=u.strRotate;var c=u.strTranslate;var v=r(18783);e.exports=function e(t,r,a,i){var o=t._context.staticPlot;var s=r.xaxis;var l=r.yaxis;var f=t._fullLayout;var c=f._clips;u.makeTraceGroups(i,a,"trace").each((function(e){var r=n.select(this);var a=e[0];var i=a.trace;var f=i.aaxis;var v=i.baxis;var y=u.ensureSingle(r,"g","minorlayer");var m=u.ensureSingle(r,"g","majorlayer");var x=u.ensureSingle(r,"g","boundarylayer");var b=u.ensureSingle(r,"g","labellayer");r.style("opacity",i.opacity);p(s,l,m,f,"a",f._gridlines,true,o);p(s,l,m,v,"b",v._gridlines,true,o);p(s,l,y,f,"a",f._minorgridlines,true,o);p(s,l,y,v,"b",v._minorgridlines,true,o);p(s,l,x,f,"a-boundary",f._boundarylines,o);p(s,l,x,v,"b-boundary",v._boundarylines,o);var _=d(t,s,l,i,a,b,f._labels,"a-label");var w=d(t,s,l,i,a,b,v._labels,"b-label");g(t,b,i,a,s,l,_,w);h(i,a,c,s,l)}))};function h(e,t,r,n,a){var s,l,f,c;var v=r.select("#"+e._clipPathId);if(!v.size()){v=r.append("clipPath").classed("carpetclip",true)}var h=u.ensureSingle(v,"path","carpetboundary");var p=t.clipsegments;var d=[];for(c=0;c<p.length;c++){s=p[c];l=i([],s.x,n.c2p);f=i([],s.y,a.c2p);d.push(o(l,f,s.bicubic))}var g="M"+d.join("L")+"Z";v.attr("id",e._clipPathId);h.attr("d",g)}function p(e,t,r,s,l,u,f){var c="const-"+l+"-lines";var v=r.selectAll("."+c).data(u);v.enter().append("path").classed(c,true).style("vector-effect",f?"none":"non-scaling-stroke");v.each((function(r){var s=r;var l=s.x;var u=s.y;var f=i([],l,e.c2p);var c=i([],u,t.c2p);var v="M"+o(f,c,s.smoothing);var h=n.select(this);h.attr("d",v).style("stroke-width",s.width).style("stroke",s.color).style("stroke-dasharray",a.dashStyle(s.dash,s.width)).style("fill","none")}));v.exit().remove()}function d(e,t,r,i,o,u,v,h){var p=u.selectAll("text."+h).data(v);p.enter().append("text").classed(h,true);var d=0;var g={};p.each((function(o,u){var v;if(o.axis.tickangle==="auto"){v=s(i,t,r,o.xy,o.dxy)}else{var h=(o.axis.tickangle+180)*Math.PI/180;v=s(i,t,r,o.xy,[Math.cos(h),Math.sin(h)])}if(!u){g={angle:v.angle,flip:v.flip}}var p=(o.endAnchor?-1:1)*v.flip;var y=n.select(this).attr({"text-anchor":p>0?"start":"end","data-notex":1}).call(a.font,o.font).text(o.text).call(l.convertToTspans,e);var m=a.bBox(this);y.attr("transform",c(v.p[0],v.p[1])+f(v.angle)+c(o.axis.labelpadding*p,m.height*.3));d=Math.max(d,m.width+o.axis.labelpadding)}));p.exit().remove();g.maxExtent=d;return g}function g(e,t,r,n,a,i,o,l){var f,c,v,h;var p=u.aggNums(Math.min,null,r.a);var d=u.aggNums(Math.max,null,r.a);var g=u.aggNums(Math.min,null,r.b);var y=u.aggNums(Math.max,null,r.b);f=.5*(p+d);c=g;v=r.ab2xy(f,c,true);h=r.dxyda_rough(f,c);if(o.angle===undefined){u.extendFlat(o,s(r,a,i,v,r.dxydb_rough(f,c)))}x(e,t,r,n,v,h,r.aaxis,a,i,o,"a-title");f=p;c=.5*(g+y);v=r.ab2xy(f,c,true);h=r.dxydb_rough(f,c);if(l.angle===undefined){u.extendFlat(l,s(r,a,i,v,r.dxyda_rough(f,c)))}x(e,t,r,n,v,h,r.baxis,a,i,l,"b-title")}var y=v.LINE_SPACING;var m=(1-v.MID_SHIFT)/y+1;function x(e,t,r,i,o,u,v,h,p,d,g){var x=[];if(v.title.text)x.push(v.title.text);var b=t.selectAll("text."+g).data(x);var _=d.maxExtent;b.enter().append("text").classed(g,true);b.each((function(){var t=s(r,h,p,o,u);if(["start","both"].indexOf(v.showticklabels)===-1){_=0}var i=v.title.font.size;_+=i+v.title.offset;var g=d.angle+(d.flip<0?180:0);var x=(g-t.angle+450)%360;var b=x>90&&x<270;var w=n.select(this);w.text(v.title.text).call(l.convertToTspans,e);if(b){_=(-l.lineCount(w)+m)*y*i-_}w.attr("transform",c(t.p[0],t.p[1])+f(t.angle)+c(0,_)).attr("text-anchor","middle").call(a.font,v.title.font)}));b.exit().remove()}},11435:function(e,t,r){"use strict";var n=r(35509);var a=r(65888).findBin;var i=r(45664);var o=r(20349);var s=r(54495);var l=r(73057);e.exports=function e(t){var r=t._a;var u=t._b;var f=r.length;var c=u.length;var v=t.aaxis;var h=t.baxis;var p=r[0];var d=r[f-1];var g=u[0];var y=u[c-1];var m=r[r.length-1]-r[0];var x=u[u.length-1]-u[0];var b=m*n.RELATIVE_CULL_TOLERANCE;var _=x*n.RELATIVE_CULL_TOLERANCE;p-=b;d+=b;g-=_;y+=_;t.isVisible=function(e,t){return e>p&&e<d&&t>g&&t<y};t.isOccluded=function(e,t){return e<p||e>d||t<g||t>y};t.setScale=function(){var e=t._x;var r=t._y;var n=i(t._xctrl,t._yctrl,e,r,v.smoothing,h.smoothing);t._xctrl=n[0];t._yctrl=n[1];t.evalxy=o([t._xctrl,t._yctrl],f,c,v.smoothing,h.smoothing);t.dxydi=s([t._xctrl,t._yctrl],v.smoothing,h.smoothing);t.dxydj=l([t._xctrl,t._yctrl],v.smoothing,h.smoothing)};t.i2a=function(e){var t=Math.max(0,Math.floor(e[0]),f-2);var n=e[0]-t;return(1-n)*r[t]+n*r[t+1]};t.j2b=function(e){var t=Math.max(0,Math.floor(e[1]),f-2);var r=e[1]-t;return(1-r)*u[t]+r*u[t+1]};t.ij2ab=function(e){return[t.i2a(e[0]),t.j2b(e[1])]};t.a2i=function(e){var t=Math.max(0,Math.min(a(e,r),f-2));var n=r[t];var i=r[t+1];return Math.max(0,Math.min(f-1,t+(e-n)/(i-n)))};t.b2j=function(e){var t=Math.max(0,Math.min(a(e,u),c-2));var r=u[t];var n=u[t+1];return Math.max(0,Math.min(c-1,t+(e-r)/(n-r)))};t.ab2ij=function(e){return[t.a2i(e[0]),t.b2j(e[1])]};t.i2c=function(e,r){return t.evalxy([],e,r)};t.ab2xy=function(e,n,a){if(!a&&(e<r[0]||e>r[f-1]|n<u[0]||n>u[c-1])){return[false,false]}var i=t.a2i(e);var o=t.b2j(n);var s=t.evalxy([],i,o);if(a){var l=0;var v=0;var h=[];var p,d,g,y;if(e<r[0]){p=0;d=0;l=(e-r[0])/(r[1]-r[0])}else if(e>r[f-1]){p=f-2;d=1;l=(e-r[f-1])/(r[f-1]-r[f-2])}else{p=Math.max(0,Math.min(f-2,Math.floor(i)));d=i-p}if(n<u[0]){g=0;y=0;v=(n-u[0])/(u[1]-u[0])}else if(n>u[c-1]){g=c-2;y=1;v=(n-u[c-1])/(u[c-1]-u[c-2])}else{g=Math.max(0,Math.min(c-2,Math.floor(o)));y=o-g}if(l){t.dxydi(h,p,g,d,y);s[0]+=h[0]*l;s[1]+=h[1]*l}if(v){t.dxydj(h,p,g,d,y);s[0]+=h[0]*v;s[1]+=h[1]*v}}return s};t.c2p=function(e,t,r){return[t.c2p(e[0]),r.c2p(e[1])]};t.p2x=function(e,t,r){return[t.p2c(e[0]),r.p2c(e[1])]};t.dadi=function(e){var t=Math.max(0,Math.min(r.length-2,e));return r[t+1]-r[t]};t.dbdj=function(e){var t=Math.max(0,Math.min(u.length-2,e));return u[t+1]-u[t]};t.dxyda=function(e,r,n,a){var i=t.dxydi(null,e,r,n,a);var o=t.dadi(e,n);return[i[0]/o,i[1]/o]};t.dxydb=function(e,r,n,a){var i=t.dxydj(null,e,r,n,a);var o=t.dbdj(r,a);return[i[0]/o,i[1]/o]};t.dxyda_rough=function(e,r,n){var a=m*(n||.1);var i=t.ab2xy(e+a,r,true);var o=t.ab2xy(e-a,r,true);return[(i[0]-o[0])*.5/a,(i[1]-o[1])*.5/a]};t.dxydb_rough=function(e,r,n){var a=x*(n||.1);var i=t.ab2xy(e,r+a,true);var o=t.ab2xy(e,r-a,true);return[(i[0]-o[0])*.5/a,(i[1]-o[1])*.5/a]};t.dpdx=function(e){return e._m};t.dpdy=function(e){return e._m}}},72505:function(e,t,r){"use strict";var n=r(71828);e.exports=function e(t,r,a){var i,o,s;var l=[];var u=[];var f=t[0].length;var c=t.length;function v(e,r){var n=0;var a;var i=0;if(e>0&&(a=t[r][e-1])!==undefined){i++;n+=a}if(e<f-1&&(a=t[r][e+1])!==undefined){i++;n+=a}if(r>0&&(a=t[r-1][e])!==undefined){i++;n+=a}if(r<c-1&&(a=t[r+1][e])!==undefined){i++;n+=a}return n/Math.max(1,i)}var h=0;for(i=0;i<f;i++){for(o=0;o<c;o++){if(t[o][i]===undefined){l.push(i);u.push(o);t[o][i]=v(i,o)}h=Math.max(h,Math.abs(t[o][i]))}}if(!l.length)return t;var p,d,g,y,m,x,b,_,w,T,k;var A=1e-5;var M=0;var S=100;var E=0;var L=l.length;do{M=0;for(s=0;s<L;s++){i=l[s];o=u[s];var C=0;var I=0;var P,O,D,z,R,F;if(i===0){R=Math.min(f-1,2);D=r[R];z=r[1];P=t[o][R];O=t[o][1];I+=O+(O-P)*(r[0]-z)/(z-D);C++}else if(i===f-1){R=Math.max(0,f-3);D=r[R];z=r[f-2];P=t[o][R];O=t[o][f-2];I+=O+(O-P)*(r[f-1]-z)/(z-D);C++}if((i===0||i===f-1)&&o>0&&o<c-1){p=a[o+1]-a[o];d=a[o]-a[o-1];I+=(d*t[o+1][i]+p*t[o-1][i])/(d+p);C++}if(o===0){F=Math.min(c-1,2);D=a[F];z=a[1];P=t[F][i];O=t[1][i];I+=O+(O-P)*(a[0]-z)/(z-D);C++}else if(o===c-1){F=Math.max(0,c-3);D=a[F];z=a[c-2];P=t[F][i];O=t[c-2][i];I+=O+(O-P)*(a[c-1]-z)/(z-D);C++}if((o===0||o===c-1)&&i>0&&i<f-1){p=r[i+1]-r[i];d=r[i]-r[i-1];I+=(d*t[o][i+1]+p*t[o][i-1])/(d+p);C++}if(!C){g=r[i+1]-r[i];y=r[i]-r[i-1];m=a[o+1]-a[o];x=a[o]-a[o-1];b=g*y*(g+y);_=m*x*(m+x);I=(b*(x*t[o+1][i]+m*t[o-1][i])+_*(y*t[o][i+1]+g*t[o][i-1]))/(_*(y+g)+b*(x+m))}else{I/=C}w=I-t[o][i];T=w/h;M+=T*T;k=C?0:.85;t[o][i]+=w*(1+k)}M=Math.sqrt(M)}while(E++<S&&M>A);n.log("Smoother converged to",M,"after",E,"iterations");return t}},19237:function(e,t,r){"use strict";var n=r(71828).isArray1D;e.exports=function e(t,r,a){var i=a("x");var o=i&&i.length;var s=a("y");var l=s&&s.length;if(!o&&!l)return false;r._cheater=!i;if((!o||n(i))&&(!l||n(s))){var u=o?i.length:Infinity;if(l)u=Math.min(u,s.length);if(r.a&&r.a.length)u=Math.min(u,r.a.length);if(r.b&&r.b.length)u=Math.min(u,r.b.length);r._length=u}else r._length=null;return true}},69568:function(e,t,r){"use strict";var n=r(5386).fF;var a=r(19316);var i=r(50693);var o=r(9012);var s=r(22399).defaultLine;var l=r(1426).extendFlat;var u=a.marker.line;e.exports=l({locations:{valType:"data_array",editType:"calc"},locationmode:a.locationmode,z:{valType:"data_array",editType:"calc"},geojson:l({},a.geojson,{}),featureidkey:a.featureidkey,text:l({},a.text,{}),hovertext:l({},a.hovertext,{}),marker:{line:{color:l({},u.color,{dflt:s}),width:l({},u.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:true,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:a.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:a.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:l({},o.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:n(),showlegend:l({},o.showlegend,{dflt:false})},i("",{cLetter:"z",editTypeOverride:"calc"}))},38675:function(e,t,r){"use strict";var n=r(92770);var a=r(50606).BADNUM;var i=r(78803);var o=r(75225);var s=r(66279);function l(e){return e&&typeof e==="string"}e.exports=function e(t,r){var u=r._length;var f=new Array(u);var c;if(r.geojson){c=function(e){return l(e)||n(e)}}else{c=l}for(var v=0;v<u;v++){var h=f[v]={};var p=r.locations[v];var d=r.z[v];if(c(p)&&n(d)){h.loc=p;h.z=d}else{h.loc=null;h.z=a}h.index=v}o(f,r);i(t,r,{vals:r.z,containerStr:"",cLetter:"z"});s(f,r);return f}},61869:function(e,t,r){"use strict";var n=r(71828);var a=r(1586);var i=r(69568);e.exports=function e(t,r,o,s){function l(e,a){return n.coerce(t,r,i,e,a)}var u=l("locations");var f=l("z");if(!(u&&u.length&&n.isArrayOrTypedArray(f)&&f.length)){r.visible=false;return}r._length=Math.min(u.length,f.length);var c=l("geojson");var v;if(typeof c==="string"&&c!==""||n.isPlainObject(c)){v="geojson-id"}var h=l("locationmode",v);if(h==="geojson-id"){l("featureidkey")}l("text");l("hovertext");l("hovertemplate");var p=l("marker.line.width");if(p)l("marker.line.color");l("marker.opacity");a(t,r,s,l,{prefix:"",cLetter:"z"});n.coerceSelectionMarkerOpacity(r,l)}},92069:function(e){"use strict";e.exports=function e(t,r,n,a,i){t.location=r.location;t.z=r.z;var o=a[i];if(o.fIn&&o.fIn.properties){t.properties=o.fIn.properties}t.ct=o.ct;return t}},42300:function(e,t,r){"use strict";var n=r(89298);var a=r(69568);var i=r(71828).fillText;e.exports=function e(t,r,a){var i=t.cd;var s=i[0].trace;var l=t.subplot;var u,f,c,v;var h=[r,a];var p=[r+360,a];for(f=0;f<i.length;f++){u=i[f];v=false;if(u._polygons){for(c=0;c<u._polygons.length;c++){if(u._polygons[c].contains(h)){v=!v}if(u._polygons[c].contains(p)){v=!v}}if(v)break}}if(!v||!u)return;t.x0=t.x1=t.xa.c2p(u.ct);t.y0=t.y1=t.ya.c2p(u.ct);t.index=u.index;t.location=u.loc;t.z=u.z;t.zLabel=n.tickText(l.mockAxis,l.mockAxis.c2l(u.z),"hover").text;t.hovertemplate=u.hovertemplate;o(t,s,u);return[t]};function o(e,t,r){if(t.hovertemplate)return;var n=r.hi||t.hoverinfo;var o=String(r.loc);var s=n==="all"?a.hoverinfo.flags:n.split("+");var l=s.indexOf("name")!==-1;var u=s.indexOf("location")!==-1;var f=s.indexOf("z")!==-1;var c=s.indexOf("text")!==-1;var v=!l&&u;var h=[];if(v){e.nameOverride=o}else{if(l)e.nameOverride=t.name;if(u)h.push(o)}if(f){h.push(e.zLabel)}if(c){i(r,t,h)}e.extraText=h.join("<br>")}},51319:function(e,t,r){"use strict";e.exports={attributes:r(69568),supplyDefaults:r(61869),colorbar:r(61243),calc:r(38675),calcGeoJSON:r(99841).calcGeoJSON,plot:r(99841).plot,style:r(99636).style,styleOnSelect:r(99636).styleOnSelect,hoverPoints:r(42300),eventData:r(92069),selectPoints:r(81253),moduleType:"trace",name:"choropleth",basePlotModule:r(44622),categories:["geo","noOpacity","showLegend"],meta:{}}},99841:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);var i=r(41327);var o=r(90973).getTopojsonFeatures;var s=r(71739).findExtremes;var l=r(99636).style;function u(e,t,r){var i=t.layers.backplot.select(".choroplethlayer");a.makeTraceGroups(i,r,"trace choropleth").each((function(t){var r=n.select(this);var i=r.selectAll("path.choroplethlocation").data(a.identity);i.enter().append("path").classed("choroplethlocation",true);i.exit().remove();l(e,t)}))}function f(e,t){var r=e[0].trace;var n=t[r.geo];var a=n._subplot;var l=r.locationmode;var u=r._length;var f=l==="geojson-id"?i.extractTraceFeature(e):o(r,a.topojson);var c=[];var v=[];for(var h=0;h<u;h++){var p=e[h];var d=l==="geojson-id"?p.fOut:i.locationToFeature(l,p.loc,f);if(d){p.geojson=d;p.ct=d.properties.ct;p._polygons=i.feature2polygons(d);var g=i.computeBbox(d);c.push(g[0],g[2]);v.push(g[1],g[3])}else{p.geojson=null}}if(n.fitbounds==="geojson"&&l==="geojson-id"){var y=i.computeBbox(i.getTraceGeojson(r));c=[y[0],y[2]];v=[y[1],y[3]]}var m={padded:true};r._extremes.lon=s(n.lonaxis._ax,c,m);r._extremes.lat=s(n.lataxis._ax,v,m)}e.exports={calcGeoJSON:f,plot:u}},81253:function(e){"use strict";e.exports=function e(t,r){var n=t.cd;var a=t.xaxis;var i=t.yaxis;var o=[];var s,l,u,f,c;if(r===false){for(s=0;s<n.length;s++){n[s].selected=0}}else{for(s=0;s<n.length;s++){l=n[s];u=l.ct;if(!u)continue;f=a.c2p(u);c=i.c2p(u);if(r.contains([f,c],null,s,t)){o.push({pointNumber:s,lon:u[0],lat:u[1]});l.selected=1}else{l.selected=0}}}return o}},99636:function(e,t,r){"use strict";var n=r(39898);var a=r(7901);var i=r(91424);var o=r(21081);function s(e,t){if(t)l(e,t)}function l(e,t){var r=t[0].trace;var s=t[0].node3;var l=s.selectAll(".choroplethlocation");var u=r.marker||{};var f=u.line||{};var c=o.makeColorScaleFuncFromTrace(r);l.each((function(e){n.select(this).attr("fill",c(e.z)).call(a.stroke,e.mlc||f.color).call(i.dashLine,"",e.mlw||f.width||0).style("opacity",u.opacity)}));i.selectedPointStyle(l,r)}function u(e,t){var r=t[0].node3;var n=t[0].trace;if(n.selectedpoints){i.selectedPointStyle(r.selectAll(".choroplethlocation"),n)}else{l(e,t)}}e.exports={style:s,styleOnSelect:u}},64496:function(e,t,r){"use strict";var n=r(69568);var a=r(50693);var i=r(5386).fF;var o=r(9012);var s=r(1426).extendFlat;e.exports=s({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:s({},n.featureidkey,{}),below:{valType:"string",editType:"plot"},text:n.text,hovertext:n.hovertext,marker:{line:{color:s({},n.marker.line.color,{editType:"plot"}),width:s({},n.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:s({},n.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:s({},n.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:s({},n.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:n.hoverinfo,hovertemplate:i({},{keys:["properties"]}),showlegend:s({},o.showlegend,{dflt:false})},a("",{cLetter:"z",editTypeOverride:"calc"}))},82004:function(e,t,r){"use strict";var n=r(92770);var a=r(71828);var i=r(21081);var o=r(91424);var s=r(18214).makeBlank;var l=r(41327);function u(e){var t=e[0].trace;var r=t.visible===true&&t._length!==0;var o={layout:{visibility:"none"},paint:{}};var u={layout:{visibility:"none"},paint:{}};var c=t._opts={fill:o,line:u,geojson:s()};if(!r)return c;var v=l.extractTraceFeature(e);if(!v)return c;var h=i.makeColorScaleFuncFromTrace(t);var p=t.marker;var d=p.line||{};var g;if(a.isArrayOrTypedArray(p.opacity)){g=function(e){var t=e.mo;return n(t)?+a.constrain(t,0,1):0}}var y;if(a.isArrayOrTypedArray(d.color)){y=function(e){return e.mlc}}var m;if(a.isArrayOrTypedArray(d.width)){m=function(e){return e.mlw}}for(var x=0;x<e.length;x++){var b=e[x];var _=b.fOut;if(_){var w=_.properties;w.fc=h(b.z);if(g)w.mo=g(b);if(y)w.mlc=y(b);if(m)w.mlw=m(b);b.ct=w.ct;b._polygons=l.feature2polygons(_)}}var T=g?{type:"identity",property:"mo"}:p.opacity;a.extendFlat(o.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":T});a.extendFlat(u.paint,{"line-color":y?{type:"identity",property:"mlc"}:d.color,"line-width":m?{type:"identity",property:"mlw"}:d.width,"line-opacity":T});o.layout.visibility="visible";u.layout.visibility="visible";c.geojson={type:"FeatureCollection",features:v};f(e);return c}function f(e){var t=e[0].trace;var r=t._opts;var n;if(t.selectedpoints){var i=o.makeSelectedPointStyleFns(t);for(var s=0;s<e.length;s++){var l=e[s];if(l.fOut){l.fOut.properties.mo2=i.selectedOpacityFn(l)}}n={type:"identity",property:"mo2"}}else{n=a.isArrayOrTypedArray(t.marker.opacity)?{type:"identity",property:"mo"}:t.marker.opacity}a.extendFlat(r.fill.paint,{"fill-opacity":n});a.extendFlat(r.line.paint,{"line-opacity":n});return r}e.exports={convert:u,convertOnSelect:f}},22654:function(e,t,r){"use strict";var n=r(71828);var a=r(1586);var i=r(64496);e.exports=function e(t,r,o,s){function l(e,a){return n.coerce(t,r,i,e,a)}var u=l("locations");var f=l("z");var c=l("geojson");if(!n.isArrayOrTypedArray(u)||!u.length||!n.isArrayOrTypedArray(f)||!f.length||!(typeof c==="string"&&c!==""||n.isPlainObject(c))){r.visible=false;return}l("featureidkey");r._length=Math.min(u.length,f.length);l("below");l("text");l("hovertext");l("hovertemplate");var v=l("marker.line.width");if(v)l("marker.line.color");l("marker.opacity");a(t,r,s,l,{prefix:"",cLetter:"z"});n.coerceSelectionMarkerOpacity(r,l)}},57516:function(e,t,r){"use strict";e.exports={attributes:r(64496),supplyDefaults:r(22654),colorbar:r(61243),calc:r(38675),plot:r(7852),hoverPoints:r(42300),eventData:r(92069),selectPoints:r(81253),styleOnSelect:function(e,t){if(t){var r=t[0].trace;r._glTrace.updateOnSelect(t)}},getBelow:function(e,t){var r=t.getMapLayers();for(var n=r.length-2;n>=0;n--){var a=r[n].id;if(typeof a==="string"&&a.indexOf("water")===0){for(var i=n+1;i<r.length;i++){a=r[i].id;if(typeof a==="string"&&a.indexOf("plotly-")===-1){return a}}}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:r(50101),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},7852:function(e,t,r){"use strict";var n=r(82004).convert;var a=r(82004).convertOnSelect;var i=r(77734).traceLayerPrefix;function o(e,t){this.type="choroplethmapbox";this.subplot=e;this.uid=t;this.sourceId="source-"+t;this.layerList=[["fill",i+t+"-fill"],["line",i+t+"-line"]];this.below=null}var s=o.prototype;s.update=function(e){this._update(n(e));e[0].trace._glTrace=this};s.updateOnSelect=function(e){this._update(a(e))};s._update=function(e){var t=this.subplot;var r=this.layerList;var n=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(e.geojson);if(n!==this.below){this._removeLayers();this._addLayers(e,n);this.below=n}for(var a=0;a<r.length;a++){var i=r[a];var o=i[0];var s=i[1];var l=e[o];t.setOptions(s,"setLayoutProperty",l.layout);if(l.layout.visibility==="visible"){t.setOptions(s,"setPaintProperty",l.paint)}}};s._addLayers=function(e,t){var r=this.subplot;var n=this.layerList;var a=this.sourceId;for(var i=0;i<n.length;i++){var o=n[i];var s=o[0];var l=e[s];r.addLayer({type:s,id:o[1],source:a,layout:l.layout,paint:l.paint},t)}};s._removeLayers=function(){var e=this.subplot.map;var t=this.layerList;for(var r=t.length-1;r>=0;r--){e.removeLayer(t[r][1])}};s.dispose=function(){var e=this.subplot.map;this._removeLayers();e.removeSource(this.sourceId)};e.exports=function e(t,r){var a=r[0].trace;var i=new o(t,a.uid);var s=i.sourceId;var l=n(r);var u=i.below=t.belowLookup["trace-"+a.uid];t.map.addSource(s,{type:"geojson",data:l.geojson});i._addLayers(l,u);r[0].trace._glTrace=i;return i}},12674:function(e,t,r){"use strict";var n=r(50693);var a=r(12663).axisHoverFormat;var i=r(5386).fF;var o=r(2418);var s=r(9012);var l=r(1426).extendFlat;var u={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:true,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:true,editType:"calc"},hovertemplate:i({editType:"calc"},{keys:["norm"]}),uhoverformat:a("u",1),vhoverformat:a("v",1),whoverformat:a("w",1),xhoverformat:a("x"),yhoverformat:a("y"),zhoverformat:a("z"),showlegend:l({},s.showlegend,{dflt:false})};l(u,n("",{colorAttr:"u/v/w norm",showScaleDflt:true,editTypeOverride:"calc"}));var f=["opacity","lightposition","lighting"];f.forEach((function(e){u[e]=o[e]}));u.hoverinfo=l({},s.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"});u.transforms=undefined;e.exports=u},31371:function(e,t,r){"use strict";var n=r(78803);e.exports=function e(t,r){var a=r.u;var i=r.v;var o=r.w;var s=Math.min(r.x.length,r.y.length,r.z.length,a.length,i.length,o.length);var l=-Infinity;var u=Infinity;for(var f=0;f<s;f++){var c=a[f];var v=i[f];var h=o[f];var p=Math.sqrt(c*c+v*v+h*h);l=Math.max(l,p);u=Math.min(u,p)}r._len=s;r._normMax=l;n(t,r,{vals:[u,l],containerStr:"",cLetter:"c"})}},5453:function(e,t,r){"use strict";var n=r(9330).gl_cone3d;var a=r(9330).gl_cone3d.createConeMesh;var i=r(71828).simpleMap;var o=r(81697).parseColorScale;var s=r(21081).extractOpts;var l=r(90060);function u(e,t){this.scene=e;this.uid=t;this.mesh=null;this.data=null}var f=u.prototype;f.handlePick=function(e){if(e.object===this.mesh){var t=e.index=e.data.index;var r=this.data.x[t];var n=this.data.y[t];var a=this.data.z[t];var i=this.data.u[t];var o=this.data.v[t];var s=this.data.w[t];e.traceCoordinate=[r,n,a,i,o,s,Math.sqrt(i*i+o*o+s*s)];var l=this.data.hovertext||this.data.text;if(Array.isArray(l)&&l[t]!==undefined){e.textLabel=l[t]}else if(l){e.textLabel=l}return true}};var c={xaxis:0,yaxis:1,zaxis:2};var v={tip:1,tail:0,cm:.25,center:.5};var h={tip:1,tail:1,cm:.75,center:.5};function p(e,t){var r=e.fullSceneLayout;var a=e.dataScale;var u={};function f(e,t){var n=r[t];var o=a[c[t]];return i(e,(function(e){return n.d2l(e)*o}))}u.vectors=l(f(t.u,"xaxis"),f(t.v,"yaxis"),f(t.w,"zaxis"),t._len);u.positions=l(f(t.x,"xaxis"),f(t.y,"yaxis"),f(t.z,"zaxis"),t._len);var p=s(t);u.colormap=o(t);u.vertexIntensityBounds=[p.min/t._normMax,p.max/t._normMax];u.coneOffset=v[t.anchor];if(t.sizemode==="scaled"){u.coneSize=t.sizeref||.5}else{u.coneSize=t.sizeref&&t._normMax?t.sizeref/t._normMax:.5}var d=n(u);var g=t.lightposition;d.lightPosition=[g.x,g.y,g.z];d.ambient=t.lighting.ambient;d.diffuse=t.lighting.diffuse;d.specular=t.lighting.specular;d.roughness=t.lighting.roughness;d.fresnel=t.lighting.fresnel;d.opacity=t.opacity;t._pad=h[t.anchor]*d.vectorScale*d.coneScale*t._normMax;return d}f.update=function(e){this.data=e;var t=p(this.scene,e);this.mesh.update(t)};f.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};function d(e,t){var r=e.glplot.gl;var n=p(e,t);var i=a(r,n);var o=new u(e,t.uid);o.mesh=i;o.data=t;i._trace=o;e.glplot.add(i);return o}e.exports=d},91750:function(e,t,r){"use strict";var n=r(71828);var a=r(1586);var i=r(12674);e.exports=function e(t,r,o,s){function l(e,a){return n.coerce(t,r,i,e,a)}var u=l("u");var f=l("v");var c=l("w");var v=l("x");var h=l("y");var p=l("z");if(!u||!u.length||!f||!f.length||!c||!c.length||!v||!v.length||!h||!h.length||!p||!p.length){r.visible=false;return}l("sizeref");l("sizemode");l("anchor");l("lighting.ambient");l("lighting.diffuse");l("lighting.specular");l("lighting.roughness");l("lighting.fresnel");l("lightposition.x");l("lightposition.y");l("lightposition.z");a(t,r,s,l,{prefix:"",cLetter:"c"});l("text");l("hovertext");l("hovertemplate");l("uhoverformat");l("vhoverformat");l("whoverformat");l("xhoverformat");l("yhoverformat");l("zhoverformat");r._length=null}},98128:function(e,t,r){"use strict";e.exports={moduleType:"trace",name:"cone",basePlotModule:r(58547),categories:["gl3d","showLegend"],attributes:r(12674),supplyDefaults:r(91750),colorbar:{min:"cmin",max:"cmax"},calc:r(31371),plot:r(5453),eventData:function(e,t){e.norm=t.traceCoordinate[6];return e},meta:{}}},70600:function(e,t,r){"use strict";var n=r(21606);var a=r(82196);var i=r(12663);var o=i.axisHoverFormat;var s=i.descriptionOnlyNumbers;var l=r(50693);var u=r(79952).P;var f=r(41940);var c=r(1426).extendFlat;var v=r(74808);var h=v.COMPARISON_OPS2;var p=v.INTERVAL_OPS;var d=a.line;e.exports=c({z:n.z,x:n.x,x0:n.x0,dx:n.dx,y:n.y,y0:n.y0,dy:n.dy,xperiod:n.xperiod,yperiod:n.yperiod,xperiod0:a.xperiod0,yperiod0:a.yperiod0,xperiodalignment:n.xperiodalignment,yperiodalignment:n.yperiodalignment,text:n.text,hovertext:n.hovertext,transpose:n.transpose,xtype:n.xtype,ytype:n.ytype,xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z",1),hovertemplate:n.hovertemplate,texttemplate:c({},n.texttemplate,{}),textfont:c({},n.textfont,{}),hoverongaps:n.hoverongaps,connectgaps:c({},n.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:true,editType:"calc",impliedEdits:{"contours.start":undefined,"contours.end":undefined,"contours.size":undefined}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":false}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":false}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":false}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:true,editType:"plot"},showlabels:{valType:"boolean",dflt:false,editType:"plot"},labelfont:f({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:s("contour label")},operation:{valType:"enumerated",values:[].concat(h).concat(p),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:false}},line:{color:c({},d.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:u,smoothing:c({},d.smoothing,{}),editType:"plot"}},l("",{cLetter:"z",autoColorDflt:false,editTypeOverride:"calc"}))},27529:function(e,t,r){"use strict";var n=r(21081);var a=r(90757);var i=r(18670);var o=r(53572);e.exports=function e(t,r){var s=a(t,r);var l=s[0].z;i(r,l);var u=r.contours;var f=n.extractOpts(r);var c;if(u.coloring==="heatmap"&&f.auto&&r.autocontour===false){var v=u.start;var h=o(u);var p=u.size||1;var d=Math.floor((h-v)/p)+1;if(!isFinite(p)){p=1;d=1}var g=v-p/2;var y=g+d*p;c=[g,y]}else{c=l}n.calc(t,r,{vals:c,cLetter:"z"});return s}},20083:function(e){"use strict";e.exports=function(e,t){var r=e[0];var n=r.z;var a;switch(t.type){case"levels":var i=Math.min(n[0][0],n[0][1]);for(a=0;a<e.length;a++){var o=e[a];o.prefixBoundary=!o.edgepaths.length&&(i>o.level||o.starts.length&&i===o.level)}break;case"constraint":r.prefixBoundary=false;if(r.edgepaths.length)return;var s=r.x.length;var l=r.y.length;var u=-Infinity;var f=Infinity;for(a=0;a<l;a++){f=Math.min(f,n[a][0]);f=Math.min(f,n[a][s-1]);u=Math.max(u,n[a][0]);u=Math.max(u,n[a][s-1])}for(a=1;a<s-1;a++){f=Math.min(f,n[0][a]);f=Math.min(f,n[l-1][a]);u=Math.max(u,n[0][a]);u=Math.max(u,n[l-1][a])}var c=t.value;var v,h;switch(t._operation){case">":if(c>u){r.prefixBoundary=true}break;case"<":if(c<f||r.starts.length&&c===f){r.prefixBoundary=true}break;case"[]":v=Math.min(c[0],c[1]);h=Math.max(c[0],c[1]);if(h<f||v>u||r.starts.length&&h===f){r.prefixBoundary=true}break;case"][":v=Math.min(c[0],c[1]);h=Math.max(c[0],c[1]);if(v<f&&h>u){r.prefixBoundary=true}break}break}}},90654:function(e,t,r){"use strict";var n=r(21081);var a=r(86068);var i=r(53572);function o(e,t,r){var o=t.contours;var s=t.line;var l=o.size||1;var u=o.coloring;var f=a(t,{isColorbar:true});if(u==="heatmap"){var c=n.extractOpts(t);r._fillgradient=c.reversescale?n.flipScale(c.colorscale):c.colorscale;r._zrange=[c.min,c.max]}else if(u==="fill"){r._fillcolor=f}r._line={color:u==="lines"?f:s.color,width:o.showlines!==false?s.width:0,dash:s.dash};r._levels={start:o.start,end:i(o),size:l}}e.exports={min:"zmin",max:"zmax",calc:o}},36914:function(e){"use strict";e.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},83179:function(e,t,r){"use strict";var n=r(92770);var a=r(14523);var i=r(7901);var o=i.addOpacity;var s=i.opacity;var l=r(74808);var u=l.CONSTRAINT_REDUCTION;var f=l.COMPARISON_OPS2;e.exports=function e(t,r,n,i,l,f){var v=r.contours;var h,p,d;var g=n("contours.operation");v._operation=u[g];c(n,v);if(g==="="){h=v.showlines=true}else{h=n("contours.showlines");d=n("fillcolor",o((t.line||{}).color||l,.5))}if(h){var y=d&&s(d)?o(r.fillcolor,1):l;p=n("line.color",y);n("line.width",2);n("line.dash")}n("line.smoothing");a(n,i,p,f)};function c(e,t){var r;if(f.indexOf(t.operation)===-1){e("contours.value",[0,1]);if(!Array.isArray(t.value)){if(n(t.value)){r=parseFloat(t.value);t.value=[r,r+1]}}else if(t.value.length>2){t.value=t.value.slice(2)}else if(t.length===0){t.value=[0,1]}else if(t.length<2){r=parseFloat(t.value[0]);t.value=[r,r+1]}else{t.value=[parseFloat(t.value[0]),parseFloat(t.value[1])]}}else{e("contours.value",0);if(!n(t.value)){if(Array.isArray(t.value)){t.value=parseFloat(t.value[0])}else{t.value=0}}}}},64237:function(e,t,r){"use strict";var n=r(74808);var a=r(92770);e.exports={"[]":o("[]"),"][":o("]["),">":s(">"),"<":s("<"),"=":s("=")};function i(e,t){var r=Array.isArray(t);var i;function o(e){return a(e)?+e:null}if(n.COMPARISON_OPS2.indexOf(e)!==-1){i=r?o(t[0]):o(t)}else if(n.INTERVAL_OPS.indexOf(e)!==-1){i=r?[o(t[0]),o(t[1])]:[o(t),o(t)]}else if(n.SET_OPS.indexOf(e)!==-1){i=r?t.map(o):[o(t)]}return i}function o(e){return function(t){t=i(e,t);var r=Math.min(t[0],t[1]);var n=Math.max(t[0],t[1]);return{start:r,end:n,size:n-r}}}function s(e){return function(t){t=i(e,t);return{start:t,end:Infinity,size:Infinity}}}},67217:function(e){"use strict";e.exports=function e(t,r,n,a){var i=a("contours.start");var o=a("contours.end");var s=i===false||o===false;var l=n("contours.size");var u;if(s)u=r.autocontour=true;else u=n("autocontour",false);if(u||!l)n("ncontours")}},84857:function(e,t,r){"use strict";var n=r(71828);e.exports=function(e,t){var r,i,o;var s=function(e){return e.reverse()};var l=function(e){return e};switch(t){case"=":case"<":return e;case">":if(e.length!==1){n.warn("Contour data invalid for the specified inequality operation.")}i=e[0];for(r=0;r<i.edgepaths.length;r++){i.edgepaths[r]=s(i.edgepaths[r])}for(r=0;r<i.paths.length;r++){i.paths[r]=s(i.paths[r])}for(r=0;r<i.starts.length;r++){i.starts[r]=s(i.starts[r])}return e;case"][":var u=s;s=l;l=u;case"[]":if(e.length!==2){n.warn("Contour data invalid for the specified inequality range operation.")}i=a(e[0]);o=a(e[1]);for(r=0;r<i.edgepaths.length;r++){i.edgepaths[r]=s(i.edgepaths[r])}for(r=0;r<i.paths.length;r++){i.paths[r]=s(i.paths[r])}for(r=0;r<i.starts.length;r++){i.starts[r]=s(i.starts[r])}while(o.edgepaths.length){i.edgepaths.push(l(o.edgepaths.shift()))}while(o.paths.length){i.paths.push(l(o.paths.shift()))}while(o.starts.length){i.starts.push(l(o.starts.shift()))}return[i]}};function a(e){return n.extendFlat({},e,{edgepaths:n.extendDeep([],e.edgepaths),paths:n.extendDeep([],e.paths),starts:n.extendDeep([],e.starts)})}},13031:function(e,t,r){"use strict";var n=r(71828);var a=r(67684);var i=r(73927);var o=r(83179);var s=r(67217);var l=r(8724);var u=r(58623);var f=r(70600);e.exports=function e(t,r,c,v){function h(e,a){return n.coerce(t,r,f,e,a)}function p(e){return n.coerce2(t,r,f,e)}var d=a(t,r,h,v);if(!d){r.visible=false;return}i(t,r,v,h);h("xhoverformat");h("yhoverformat");h("text");h("hovertext");h("hoverongaps");h("hovertemplate");var g=h("contours.type")==="constraint";h("connectgaps",n.isArray1D(r.z));if(g){o(t,r,h,v,c)}else{s(t,r,h,p);l(t,r,h,v)}if(r.contours&&r.contours.coloring==="heatmap"){u(h,v)}}},87558:function(e,t,r){"use strict";var n=r(71828);var a=r(64237);var i=r(53572);e.exports=function e(t,r,o){var s=t.type==="constraint"?a[t._operation](t.value):t;var l=s.size;var u=[];var f=i(s);var c=o.trace._carpetTrace;var v=c?{xaxis:c.aaxis,yaxis:c.baxis,x:o.a,y:o.b}:{xaxis:r.xaxis,yaxis:r.yaxis,x:o.x,y:o.y};for(var h=s.start;h<f;h+=l){u.push(n.extendFlat({level:h,crossings:{},starts:[],edgepaths:[],paths:[],z:o.z,smoothing:o.trace.line.smoothing},v));if(u.length>1e3){n.warn("Too many contours, clipping at 1000",t);break}}return u}},53572:function(e){"use strict";e.exports=function e(t){return t.end+t.size/1e6}},81696:function(e,t,r){"use strict";var n=r(71828);var a=r(36914);e.exports=function e(t,r,a){var i,o,l,u,f;r=r||.01;a=a||.01;for(l=0;l<t.length;l++){u=t[l];for(f=0;f<u.starts.length;f++){o=u.starts[f];s(u,o,"edge",r,a)}i=0;while(Object.keys(u.crossings).length&&i<1e4){i++;o=Object.keys(u.crossings)[0].split(",").map(Number);s(u,o,undefined,r,a)}if(i===1e4)n.log("Infinite loop in contour?")}};function i(e,t,r,n){return Math.abs(e[0]-t[0])<r&&Math.abs(e[1]-t[1])<n}function o(e,t){var r=e[2]-t[2];var n=e[3]-t[3];return Math.sqrt(r*r+n*n)}function s(e,t,r,s,f){var c=t.join(",");var v=e.crossings[c];var h=l(v,r,t);var p=[u(e,t,[-h[0],-h[1]])];var d=e.z.length;var g=e.z[0].length;var y=t.slice();var m=h.slice();var x;for(x=0;x<1e4;x++){if(v>20){v=a.CHOOSESADDLE[v][(h[0]||h[1])<0?0:1];e.crossings[c]=a.SADDLEREMAINDER[v]}else{delete e.crossings[c]}h=a.NEWDELTA[v];if(!h){n.log("Found bad marching index:",v,t,e.level);break}p.push(u(e,t,h));t[0]+=h[0];t[1]+=h[1];c=t.join(",");if(i(p[p.length-1],p[p.length-2],s,f))p.pop();var b=h[0]&&(t[0]<0||t[0]>g-2)||h[1]&&(t[1]<0||t[1]>d-2);var _=t[0]===y[0]&&t[1]===y[1]&&h[0]===m[0]&&h[1]===m[1];if(_||r&&b)break;v=e.crossings[c]}if(x===1e4){n.log("Infinite loop in contour?")}var w=i(p[0],p[p.length-1],s,f);var T=0;var k=.2*e.smoothing;var A=[];var M=0;var S,E,L,C,I,P,O,D,z,R,F;for(x=1;x<p.length;x++){O=o(p[x],p[x-1]);T+=O;A.push(O)}var B=T/A.length*k;function N(e){return p[e%p.length]}for(x=p.length-2;x>=M;x--){S=A[x];if(S<B){L=0;for(E=x-1;E>=M;E--){if(S+A[E]<B){S+=A[E]}else break}if(w&&x===p.length-2){for(L=0;L<E;L++){if(S+A[L]<B){S+=A[L]}else break}}I=x-E+L+1;P=Math.floor((x+E+L+2)/2);if(!w&&x===p.length-2)C=p[p.length-1];else if(!w&&E===-1)C=p[0];else if(I%2)C=N(P);else{C=[(N(P)[0]+N(P+1)[0])/2,(N(P)[1]+N(P+1)[1])/2]}p.splice(E+1,x-E+1,C);x=E+1;if(L)M=L;if(w){if(x===p.length-2)p[L]=p[p.length-1];else if(x===0)p[p.length-1]=p[0]}}}p.splice(0,M);for(x=0;x<p.length;x++)p[x].length=2;if(p.length<2)return;else if(w){p.pop();e.paths.push(p)}else{if(!r){n.log("Unclosed interior contour?",e.level,y.join(","),p.join("L"))}var j=false;for(D=0;D<e.edgepaths.length;D++){R=e.edgepaths[D];if(!j&&i(R[0],p[p.length-1],s,f)){p.pop();j=true;var U=false;for(z=0;z<e.edgepaths.length;z++){F=e.edgepaths[z];if(i(F[F.length-1],p[0],s,f)){U=true;p.shift();e.edgepaths.splice(D,1);if(z===D){e.paths.push(p.concat(F))}else{if(z>D)z--;e.edgepaths[z]=F.concat(p,R)}break}}if(!U){e.edgepaths[D]=p.concat(R)}}}for(D=0;D<e.edgepaths.length;D++){if(j)break;R=e.edgepaths[D];if(i(R[R.length-1],p[0],s,f)){p.shift();e.edgepaths[D]=R.concat(p);j=true}}if(!j)e.edgepaths.push(p)}}function l(e,t,r){var n=0;var i=0;if(e>20&&t){if(e===208||e===1114){n=r[0]===0?1:-1}else{i=r[1]===0?1:-1}}else if(a.BOTTOMSTART.indexOf(e)!==-1)i=1;else if(a.LEFTSTART.indexOf(e)!==-1)n=1;else if(a.TOPSTART.indexOf(e)!==-1)i=-1;else n=-1;return[n,i]}function u(e,t,r){var n=t[0]+Math.max(r[0],0);var a=t[1]+Math.max(r[1],0);var i=e.z[a][n];var o=e.xaxis;var s=e.yaxis;if(r[1]){var l=(e.level-i)/(e.z[a][n+1]-i);var u=(l!==1?(1-l)*o.c2l(e.x[n]):0)+(l!==0?l*o.c2l(e.x[n+1]):0);return[o.c2p(o.l2c(u),true),s.c2p(e.y[a],true),n+l,a]}else{var f=(e.level-i)/(e.z[a+1][n]-i);var c=(f!==1?(1-f)*s.c2l(e.y[a]):0)+(f!==0?f*s.c2l(e.y[a+1]):0);return[o.c2p(e.x[n],true),s.c2p(s.l2c(c),true),n,a+f]}}},52421:function(e,t,r){"use strict";var n=r(7901);var a=r(46248);e.exports=function e(t,r,i,o,s){if(!s)s={};s.isContour=true;var l=a(t,r,i,o,s);if(l){l.forEach((function(e){var t=e.trace;if(t.contours.type==="constraint"){if(t.fillcolor&&n.opacity(t.fillcolor)){e.color=n.addOpacity(t.fillcolor,1)}else if(t.contours.showlines&&n.opacity(t.line.color)){e.color=n.addOpacity(t.line.color,1)}}}))}return l}},99442:function(e,t,r){"use strict";e.exports={attributes:r(70600),supplyDefaults:r(13031),calc:r(27529),plot:r(29854).plot,style:r(84426),colorbar:r(90654),hoverPoints:r(52421),moduleType:"trace",name:"contour",basePlotModule:r(93612),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},14523:function(e,t,r){"use strict";var n=r(71828);e.exports=function e(t,r,a,i){if(!i)i={};var o=t("contours.showlabels");if(o){var s=r.font;n.coerceFont(t,"contours.labelfont",{family:s.family,size:s.size,color:a});t("contours.labelformat")}if(i.hasHover!==false)t("zhoverformat")}},86068:function(e,t,r){"use strict";var n=r(39898);var a=r(21081);var i=r(53572);e.exports=function e(t){var r=t.contours;var o=r.start;var s=i(r);var l=r.size||1;var u=Math.floor((s-o)/l)+1;var f=r.coloring==="lines"?0:1;var c=a.extractOpts(t);if(!isFinite(l)){l=1;u=1}var v=c.reversescale?a.flipScale(c.colorscale):c.colorscale;var h=v.length;var p=new Array(h);var d=new Array(h);var g,y;var m=c.min;var x=c.max;if(r.coloring==="heatmap"){for(y=0;y<h;y++){g=v[y];p[y]=g[0]*(x-m)+m;d[y]=g[1]}var b=n.extent([m,x,r.start,r.start+l*(u-1)]);var _=b[m<x?0:1];var w=b[m<x?1:0];if(_!==m){p.splice(0,0,_);d.splice(0,0,d[0])}if(w!==x){p.push(w);d.push(d[d.length-1])}}else{var T=t._input&&typeof t._input.zmin==="number"&&typeof t._input.zmax==="number";if(T&&(o<=m||s>=x)){if(o<=m)o=m;if(s>=x)s=x;u=Math.floor((s-o)/l)+1;f=0}for(y=0;y<h;y++){g=v[y];p[y]=(g[0]*(u+f-1)-f/2)*l+o;d[y]=g[1]}if(T||t.autocontour){if(p[0]>m){p.unshift(m);d.unshift(d[0])}if(p[p.length-1]<x){p.push(x);d.push(d[d.length-1])}}}return a.makeColorScaleFunc({domain:p,range:d},{noNumericCheck:true})}},87678:function(e,t,r){"use strict";var n=r(36914);e.exports=function e(t){var r=t[0].z;var i=r.length;var o=r[0].length;var s=i===2||o===2;var l;var u;var f;var c;var v;var h;var p;var d;var g;for(u=0;u<i-1;u++){c=[];if(u===0)c=c.concat(n.BOTTOMSTART);if(u===i-2)c=c.concat(n.TOPSTART);for(l=0;l<o-1;l++){f=c.slice();if(l===0)f=f.concat(n.LEFTSTART);if(l===o-2)f=f.concat(n.RIGHTSTART);v=l+","+u;h=[[r[u][l],r[u][l+1]],[r[u+1][l],r[u+1][l+1]]];for(g=0;g<t.length;g++){d=t[g];p=a(d.level,h);if(!p)continue;d.crossings[v]=p;if(f.indexOf(p)!==-1){d.starts.push([l,u]);if(s&&f.indexOf(p,f.indexOf(p)+1)!==-1){d.starts.push([l,u])}}}}}};function a(e,t){var r=(t[0][0]>e?0:1)+(t[0][1]>e?0:2)+(t[1][1]>e?0:4)+(t[1][0]>e?0:8);if(r===5||r===10){var n=(t[0][0]+t[0][1]+t[1][0]+t[1][1])/4;if(e>n)return r===5?713:1114;return r===5?104:208}return r===15?0:r}},29854:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);var i=r(91424);var o=r(21081);var s=r(63893);var l=r(89298);var u=r(21994);var f=r(50347);var c=r(87678);var v=r(81696);var h=r(87558);var p=r(84857);var d=r(20083);var g=r(36914);var y=g.LABELOPTIMIZER;t.plot=function e(t,r,i,o){var s=r.xaxis;var l=r.yaxis;a.makeTraceGroups(o,i,"contour").each((function(e){var i=n.select(this);var o=e[0];var u=o.trace;var d=o.x;var g=o.y;var y=u.contours;var b=h(y,r,o);var w=a.ensureSingle(i,"g","heatmapcoloring");var k=[];if(y.coloring==="heatmap"){k=[e]}f(t,r,k,w);c(b);v(b);var A=s.c2p(d[0],true);var M=s.c2p(d[d.length-1],true);var S=l.c2p(g[0],true);var E=l.c2p(g[g.length-1],true);var L=[[A,E],[M,E],[M,S],[A,S]];var C=b;if(y.type==="constraint"){C=p(b,y._operation)}m(i,L,y);x(i,C,L,y);_(i,b,t,o,y);T(i,r,t,o,L)}))};function m(e,t,r){var n=a.ensureSingle(e,"g","contourbg");var i=n.selectAll("path").data(r.coloring==="fill"?[0]:[]);i.enter().append("path");i.exit().remove();i.attr("d","M"+t.join("L")+"Z").style("stroke","none")}function x(e,t,r,i){var o=i.coloring==="fill"||i.type==="constraint"&&i._operation!=="=";var s="M"+r.join("L")+"Z";if(o){d(t,i)}var l=a.ensureSingle(e,"g","contourfill");var u=l.selectAll("path").data(o?t:[]);u.enter().append("path");u.exit().remove();u.each((function(e){var t=(e.prefixBoundary?s:"")+b(e,r);if(!t){n.select(this).remove()}else{n.select(this).attr("d",t).style("stroke","none")}}))}function b(e,t){var r="";var n=0;var o=e.edgepaths.map((function(e,t){return t}));var s=true;var l;var u;var f;var c;var v;var h;function p(e){return Math.abs(e[1]-t[0][1])<.01}function d(e){return Math.abs(e[1]-t[2][1])<.01}function g(e){return Math.abs(e[0]-t[0][0])<.01}function y(e){return Math.abs(e[0]-t[2][0])<.01}while(o.length){h=i.smoothopen(e.edgepaths[n],e.smoothing);r+=s?h:h.replace(/^M/,"L");o.splice(o.indexOf(n),1);l=e.edgepaths[n][e.edgepaths[n].length-1];c=-1;for(f=0;f<4;f++){if(!l){a.log("Missing end?",n,e);break}if(p(l)&&!y(l))u=t[1];else if(g(l))u=t[0];else if(d(l))u=t[3];else if(y(l))u=t[2];for(v=0;v<e.edgepaths.length;v++){var m=e.edgepaths[v][0];if(Math.abs(l[0]-u[0])<.01){if(Math.abs(l[0]-m[0])<.01&&(m[1]-l[1])*(u[1]-m[1])>=0){u=m;c=v}}else if(Math.abs(l[1]-u[1])<.01){if(Math.abs(l[1]-m[1])<.01&&(m[0]-l[0])*(u[0]-m[0])>=0){u=m;c=v}}else{a.log("endpt to newendpt is not vert. or horz.",l,u,m)}}l=u;if(c>=0)break;r+="L"+u}if(c===e.edgepaths.length){a.log("unclosed perimeter path");break}n=c;s=o.indexOf(n)===-1;if(s){n=o[0];r+="Z"}}for(n=0;n<e.paths.length;n++){r+=i.smoothclosed(e.paths[n],e.smoothing)}return r}function _(e,r,o,s,l){var u=o._context.staticPlot;var f=a.ensureSingle(e,"g","contourlines");var c=l.showlines!==false;var v=l.showlabels;var h=c&&v;var p=t.createLines(f,c||v,r,u);var d=t.createLineClip(f,h,o,s.trace.uid);var y=e.selectAll("g.contourlabels").data(v?[0]:[]);y.exit().remove();y.enter().append("g").classed("contourlabels",true);if(v){var m=[];var x=[];a.clearLocationCache();var b=t.labelFormatter(o,s);var _=i.tester.append("text").attr("data-notex",1).call(i.font,l.labelfont);var w=r[0].xaxis;var T=r[0].yaxis;var k=w._length;var A=T._length;var M=w.range;var S=T.range;var E=a.aggNums(Math.min,null,s.x);var L=a.aggNums(Math.max,null,s.x);var C=a.aggNums(Math.min,null,s.y);var I=a.aggNums(Math.max,null,s.y);var P=Math.max(w.c2p(E,true),0);var O=Math.min(w.c2p(L,true),k);var D=Math.max(T.c2p(I,true),0);var z=Math.min(T.c2p(C,true),A);var R={};if(M[0]<M[1]){R.left=P;R.right=O}else{R.left=O;R.right=P}if(S[0]<S[1]){R.top=D;R.bottom=z}else{R.top=z;R.bottom=D}R.middle=(R.top+R.bottom)/2;R.center=(R.left+R.right)/2;m.push([[R.left,R.top],[R.right,R.top],[R.right,R.bottom],[R.left,R.bottom]]);var F=Math.sqrt(k*k+A*A);var B=g.LABELDISTANCE*F/Math.max(1,r.length/g.LABELINCREASE);p.each((function(e){var r=t.calcTextOpts(e.level,b,_,o);n.select(this).selectAll("path").each((function(){var e=this;var n=a.getVisibleSegment(e,R,r.height/2);if(!n)return;if(n.len<(r.width+r.height)*g.LABELMIN)return;var i=Math.min(Math.ceil(n.len/B),g.LABELMAX);for(var o=0;o<i;o++){var s=t.findBestTextLocation(e,n,r,x,R);if(!s)break;t.addLabelData(s,r,x,m)}}))}));_.remove();t.drawLabels(y,x,o,d,h?m:null)}if(v&&!c)p.remove()}t.createLines=function(e,t,r,n){var a=r[0].smoothing;var o=e.selectAll("g.contourlevel").data(t?r:[]);o.exit().remove();o.enter().append("g").classed("contourlevel",true);if(t){var s=o.selectAll("path.openline").data((function(e){return e.pedgepaths||e.edgepaths}));s.exit().remove();s.enter().append("path").classed("openline",true);s.attr("d",(function(e){return i.smoothopen(e,a)})).style("stroke-miterlimit",1).style("vector-effect",n?"none":"non-scaling-stroke");var l=o.selectAll("path.closedline").data((function(e){return e.ppaths||e.paths}));l.exit().remove();l.enter().append("path").classed("closedline",true);l.attr("d",(function(e){return i.smoothclosed(e,a)})).style("stroke-miterlimit",1).style("vector-effect",n?"none":"non-scaling-stroke")}return o};t.createLineClip=function(e,t,r,n){var a=r._fullLayout._clips;var o=t?"clipline"+n:null;var s=a.selectAll("#"+o).data(t?[0]:[]);s.exit().remove();s.enter().append("clipPath").classed("contourlineclip",true).attr("id",o);i.setClipUrl(e,o,r);return s};t.labelFormatter=function(e,t){var r=e._fullLayout;var n=t.trace;var a=n.contours;var i={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(a.labelformat){i.tickformat=a.labelformat;u(i,r)}else{var s=o.extractOpts(n);if(s&&s.colorbar&&s.colorbar._axis){i=s.colorbar._axis}else{if(a.type==="constraint"){var f=a.value;if(Array.isArray(f)){i.range=[f[0],f[f.length-1]]}else i.range=[f,f]}else{i.range=[a.start,a.end];i.nticks=(a.end-a.start)/a.size}if(i.range[0]===i.range[1]){i.range[1]+=i.range[0]||1}if(!i.nticks)i.nticks=1e3;u(i,r);l.prepTicks(i);i._tmin=null;i._tmax=null}}return function(e){return l.tickText(i,e).text}};t.calcTextOpts=function(e,t,r,n){var a=t(e);r.text(a).call(s.convertToTspans,n);var o=r.node();var l=i.bBox(o,true);return{text:a,width:l.width,height:l.height,fontSize:+o.style["font-size"].replace("px",""),level:e,dy:(l.top+l.bottom)/2}};t.findBestTextLocation=function(e,t,r,n,i){var o=r.width;var s,l,u,f,c;if(t.isClosed){l=t.len/y.INITIALSEARCHPOINTS;s=t.min+l/2;u=t.max}else{l=(t.len-o)/(y.INITIALSEARCHPOINTS+1);s=t.min+l+o/2;u=t.max-(l+o)/2}var v=Infinity;for(var h=0;h<y.ITERATIONS;h++){for(var p=s;p<u;p+=l){var d=a.getTextLocation(e,t.total,p,o);var g=w(d,r,n,i);if(g<v){v=g;c=d;f=p}}if(v>y.MAXCOST*2)break;if(h)l/=2;s=f-l/2;u=s+l*1.5}if(v<=y.MAXCOST)return c};function w(e,t,r,n){var i=t.width/2;var o=t.height/2;var s=e.x;var l=e.y;var u=e.theta;var f=Math.cos(u)*i;var c=Math.sin(u)*i;var v=(s>n.center?n.right-s:s-n.left)/(f+Math.abs(Math.sin(u)*o));var h=(l>n.middle?n.bottom-l:l-n.top)/(Math.abs(c)+Math.cos(u)*o);if(v<1||h<1)return Infinity;var p=y.EDGECOST*(1/(v-1)+1/(h-1));p+=y.ANGLECOST*u*u;var d=s-f;var g=l-c;var m=s+f;var x=l+c;for(var b=0;b<r.length;b++){var _=r[b];var w=Math.cos(_.theta)*_.width/2;var T=Math.sin(_.theta)*_.width/2;var k=a.segmentDistance(d,g,m,x,_.x-w,_.y-T,_.x+w,_.y+T)*2/(t.height+_.height);var A=_.level===t.level;var M=A?y.SAMELEVELDISTANCE:1;if(k<=M)return Infinity;var S=y.NEIGHBORCOST*(A?y.SAMELEVELFACTOR:1);p+=S/(k-M)}return p}t.addLabelData=function(e,t,r,n){var a=t.fontSize;var i=t.width+a/3;var o=Math.max(0,t.height-a/3);var s=e.x;var l=e.y;var u=e.theta;var f=Math.sin(u);var c=Math.cos(u);var v=function(e,t){return[s+e*c-t*f,l+e*f+t*c]};var h=[v(-i/2,-o/2),v(-i/2,o/2),v(i/2,o/2),v(i/2,-o/2)];r.push({text:t.text,x:s,y:l,dy:t.dy,theta:u,level:t.level,width:i,height:o});n.push(h)};t.drawLabels=function(e,t,r,i,o){var l=e.selectAll("text").data(t,(function(e){return e.text+","+e.x+","+e.y+","+e.theta}));l.exit().remove();l.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each((function(e){var t=e.x+Math.sin(e.theta)*e.dy;var a=e.y-Math.cos(e.theta)*e.dy;n.select(this).text(e.text).attr({x:t,y:a,transform:"rotate("+180*e.theta/Math.PI+" "+t+" "+a+")"}).call(s.convertToTspans,r)}));if(o){var u="";for(var f=0;f<o.length;f++){u+="M"+o[f].join("L")+"Z"}var c=a.ensureSingle(i,"path","");c.attr("d",u)}};function T(e,t,r,n,o){var s=n.trace;var l=r._fullLayout._clips;var u="clip"+s.uid;var f=l.selectAll("#"+u).data(s.connectgaps?[]:[0]);f.enter().append("clipPath").classed("contourclip",true).attr("id",u);f.exit().remove();if(s.connectgaps===false){var h={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:t.xaxis,yaxis:t.yaxis,x:n.x,y:n.y,z:k(n),smoothing:0};c([h]);v([h]);d([h],{type:"levels"});var p=a.ensureSingle(f,"path","");p.attr("d",(h.prefixBoundary?"M"+o.join("L")+"Z":"")+b(h,o))}else u=null;i.setClipUrl(e,u,r)}function k(e){var t=e.trace._emptypoints;var r=[];var n=e.z.length;var a=e.z[0].length;var i;var o=[];var s;for(i=0;i<a;i++)o.push(1);for(i=0;i<n;i++)r.push(o.slice());for(i=0;i<t.length;i++){s=t[i];r[s[0]][s[1]]=0}e.zmask=r;return r}},18670:function(e,t,r){"use strict";var n=r(89298);var a=r(71828);e.exports=function e(t,r){var o=t.contours;if(t.autocontour){var s=t.zmin;var l=t.zmax;if(t.zauto||s===undefined){s=a.aggNums(Math.min,null,r)}if(t.zauto||l===undefined){l=a.aggNums(Math.max,null,r)}var u=i(s,l,t.ncontours);o.size=u.dtick;o.start=n.tickFirst(u);u.range.reverse();o.end=n.tickFirst(u);if(o.start===s)o.start+=o.size;if(o.end===l)o.end-=o.size;if(o.start>o.end){o.start=o.end=(o.start+o.end)/2}if(!t._input.contours)t._input.contours={};a.extendFlat(t._input.contours,{start:o.start,end:o.end,size:o.size});t._input.autocontour=true}else if(o.type!=="constraint"){var f=o.start;var c=o.end;var v=t._input.contours;if(f>c){o.start=v.start=c;c=o.end=v.end=f;f=o.start}if(!(o.size>0)){var h;if(f===c)h=1;else h=i(f,c,t.ncontours).dtick;v.size=o.size=h}}};function i(e,t,r){var a={type:"linear",range:[e,t]};n.autoTicks(a,(t-e)/(r||15));return a}},84426:function(e,t,r){"use strict";var n=r(39898);var a=r(91424);var i=r(70035);var o=r(86068);e.exports=function e(t){var r=n.select(t).selectAll("g.contour");r.style("opacity",(function(e){return e[0].trace.opacity}));r.each((function(e){var t=n.select(this);var r=e[0].trace;var i=r.contours;var s=r.line;var l=i.size||1;var u=i.start;var f=i.type==="constraint";var c=!f&&i.coloring==="lines";var v=!f&&i.coloring==="fill";var h=c||v?o(r):null;t.selectAll("g.contourlevel").each((function(e){n.select(this).selectAll("path").call(a.lineGroupStyle,s.width,c?h(e.level):s.color,s.dash)}));var p=i.labelfont;t.selectAll("g.contourlabels text").each((function(e){a.font(n.select(this),{family:p.family,size:p.size,color:p.color||(c?h(e.level):s.color)})}));if(f){t.selectAll("g.contourfill path").style("fill",r.fillcolor)}else if(v){var d;t.selectAll("g.contourfill path").style("fill",(function(e){if(d===undefined)d=e.level;return h(e.level+.5*l)}));if(d===undefined)d=u;t.selectAll("g.contourbg path").style("fill",h(d-.5*l))}}));i(t)}},8724:function(e,t,r){"use strict";var n=r(1586);var a=r(14523);e.exports=function e(t,r,i,o,s){var l=i("contours.coloring");var u;var f="";if(l==="fill")u=i("contours.showlines");if(u!==false){if(l!=="lines")f=i("line.color","#000");i("line.width",.5);i("line.dash")}if(l!=="none"){if(t.showlegend!==true)r.showlegend=false;r._dfltShowLegend=false;n(t,r,o,i,{prefix:"",cLetter:"z"})}i("line.smoothing");a(i,o,f,s)}},88085:function(e,t,r){"use strict";var n=r(21606);var a=r(70600);var i=r(50693);var o=r(1426).extendFlat;var s=a.contours;e.exports=o({carpet:{valType:"string",editType:"calc"},z:n.z,a:n.x,a0:n.x0,da:n.dx,b:n.y,b0:n.y0,db:n.dy,text:n.text,hovertext:n.hovertext,transpose:n.transpose,atype:n.xtype,btype:n.ytype,fillcolor:a.fillcolor,autocontour:a.autocontour,ncontours:a.ncontours,contours:{type:s.type,start:s.start,end:s.end,size:s.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:s.showlines,showlabels:s.showlabels,labelfont:s.labelfont,labelformat:s.labelformat,operation:s.operation,value:s.value,editType:"calc",impliedEdits:{autocontour:false}},line:{color:a.line.color,width:a.line.width,dash:a.line.dash,smoothing:a.line.smoothing,editType:"plot"},transforms:undefined},i("",{cLetter:"z",autoColorDflt:false}))},59885:function(e,t,r){"use strict";var n=r(78803);var a=r(71828);var i=r(68296);var o=r(4742);var s=r(824);var l=r(43907);var u=r(70769);var f=r(75005);var c=r(22882);var v=r(18670);e.exports=function e(t,r){var n=r._carpetTrace=c(t,r);if(!n||!n.visible||n.visible==="legendonly")return;if(!r.a||!r.b){var a=t.data[n.index];var i=t.data[r.index];if(!i.a)i.a=a.a;if(!i.b)i.b=a.b;f(i,r,r._defaultColor,t._fullLayout)}var o=h(t,r);v(r,r._z);return o};function h(e,t){var r=t._carpetTrace;var f=r.aaxis;var c=r.baxis;var v,h,p,d,g,y,m;f._minDtick=0;c._minDtick=0;if(a.isArray1D(t.z))i(t,f,c,"a","b",["z"]);v=t._a=t._a||t.a;d=t._b=t._b||t.b;v=v?f.makeCalcdata(t,"_a"):[];d=d?c.makeCalcdata(t,"_b"):[];h=t.a0||0;p=t.da||1;g=t.b0||0;y=t.db||1;m=t._z=o(t._z||t.z,t.transpose);t._emptypoints=l(m);s(m,t._emptypoints);var x=a.maxRowLength(m);var b=t.xtype==="scaled"?"":v;var _=u(t,b,h,p,x,f);var w=t.ytype==="scaled"?"":d;var T=u(t,w,g,y,m.length,c);var k={a:_,b:T,z:m};if(t.contours.type==="levels"&&t.contours.coloring!=="none"){n(e,t,{vals:m,containerStr:"",cLetter:"z"})}return[k]}},75005:function(e,t,r){"use strict";var n=r(71828);var a=r(67684);var i=r(88085);var o=r(83179);var s=r(67217);var l=r(8724);e.exports=function e(t,r,u,f){function c(e,a){return n.coerce(t,r,i,e,a)}function v(e){return n.coerce2(t,r,i,e)}c("carpet");if(t.a&&t.b){var h=a(t,r,c,f,"a","b");if(!h){r.visible=false;return}c("text");var p=c("contours.type")==="constraint";if(p){o(t,r,c,f,u,{hasHover:false})}else{s(t,r,c,v);l(t,r,c,f,{hasHover:false})}}else{r._defaultColor=u;r._length=null}}},93740:function(e,t,r){"use strict";e.exports={attributes:r(88085),supplyDefaults:r(75005),colorbar:r(90654),calc:r(59885),plot:r(51048),style:r(84426),moduleType:"trace",name:"contourcarpet",basePlotModule:r(93612),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},51048:function(e,t,r){"use strict";var n=r(39898);var a=r(27669);var i=r(67961);var o=r(91424);var s=r(71828);var l=r(87678);var u=r(81696);var f=r(29854);var c=r(36914);var v=r(84857);var h=r(87558);var p=r(20083);var d=r(22882);var g=r(4536);e.exports=function e(t,r,f,c){var p=r.xaxis;var g=r.yaxis;s.makeTraceGroups(c,f,"contour").each((function(e){var s=n.select(this);var f=e[0];var c=f.trace;var x=c._carpetTrace=d(t,c);var b=t.calcdata[x.index][0];if(!x.visible||x.visible==="legendonly")return;var _=f.a;var w=f.b;var A=c.contours;var M=h(A,r,f);var S=A.type==="constraint";var E=A._operation;var L=S?E==="="?"lines":"fill":A.coloring;function C(e){var t=x.ab2xy(e[0],e[1],true);return[p.c2p(t[0]),g.c2p(t[1])]}var I=[[_[0],w[w.length-1]],[_[_.length-1],w[w.length-1]],[_[_.length-1],w[0]],[_[0],w[0]]];l(M);var P=(_[_.length-1]-_[0])*1e-8;var O=(w[w.length-1]-w[0])*1e-8;u(M,P,O);var D=M;if(A.type==="constraint"){D=v(M,E)}y(M,C);var z,R,F,B;var N=[];for(B=b.clipsegments.length-1;B>=0;B--){z=b.clipsegments[B];R=a([],z.x,p.c2p);F=a([],z.y,g.c2p);R.reverse();F.reverse();N.push(i(R,F,z.bicubic))}var j="M"+N.join("L")+"Z";T(s,b.clipsegments,p,g,S,L);k(c,s,p,g,D,I,C,x,b,L,j);m(s,M,t,f,A,r,x);o.setClipUrl(s,x._clipPathId,t)}))};function y(e,t){var r,n,a,i,o,s,l,u,f;for(r=0;r<e.length;r++){i=e[r];o=i.pedgepaths=[];s=i.ppaths=[];for(n=0;n<i.edgepaths.length;n++){f=i.edgepaths[n];l=[];for(a=0;a<f.length;a++){l[a]=t(f[a])}o.push(l)}for(n=0;n<i.paths.length;n++){f=i.paths[n];u=[];for(a=0;a<f.length;a++){u[a]=t(f[a])}s.push(u)}}}function m(e,t,r,a,i,l,u){var v=r._context.staticPlot;var h=s.ensureSingle(e,"g","contourlines");var p=i.showlines!==false;var d=i.showlabels;var g=p&&d;var y=f.createLines(h,p||d,t,v);var m=f.createLineClip(h,g,r,a.trace.uid);var b=e.selectAll("g.contourlabels").data(d?[0]:[]);b.exit().remove();b.enter().append("g").classed("contourlabels",true);if(d){var _=l.xaxis;var w=l.yaxis;var T=_._length;var k=w._length;var A=[[[0,0],[T,0],[T,k],[0,k]]];var M=[];s.clearLocationCache();var S=f.labelFormatter(r,a);var E=o.tester.append("text").attr("data-notex",1).call(o.font,i.labelfont);var L={left:0,right:T,center:T/2,top:0,bottom:k,middle:k/2};var C=Math.sqrt(T*T+k*k);var I=c.LABELDISTANCE*C/Math.max(1,t.length/c.LABELINCREASE);y.each((function(e){var t=f.calcTextOpts(e.level,S,E,r);n.select(this).selectAll("path").each((function(r){var n=this;var a=s.getVisibleSegment(n,L,t.height/2);if(!a)return;x(n,r,e,a,u,t.height);if(a.len<(t.width+t.height)*c.LABELMIN)return;var i=Math.min(Math.ceil(a.len/I),c.LABELMAX);for(var o=0;o<i;o++){var l=f.findBestTextLocation(n,a,t,M,L);if(!l)break;f.addLabelData(l,t,M,A)}}))}));E.remove();f.drawLabels(b,M,r,m,g?A:null)}if(d&&!p)y.remove()}function x(e,t,r,n,a,i){var o;for(var s=0;s<r.pedgepaths.length;s++){if(t===r.pedgepaths[s]){o=r.edgepaths[s]}}if(!o)return;var l=a.a[0];var u=a.a[a.a.length-1];var f=a.b[0];var c=a.b[a.b.length-1];function v(e,t){var r=0;var n;var o=.1;if(Math.abs(e[0]-l)<o||Math.abs(e[0]-u)<o){n=_(a.dxydb_rough(e[0],e[1],o));r=Math.max(r,i*w(t,n)/2)}if(Math.abs(e[1]-f)<o||Math.abs(e[1]-c)<o){n=_(a.dxyda_rough(e[0],e[1],o));r=Math.max(r,i*w(t,n)/2)}return r}var h=b(e,0,1);var p=b(e,n.total,n.total-1);var d=v(o[0],h);var g=n.total-v(o[o.length-1],p);if(n.min<d)n.min=d;if(n.max>g)n.max=g;n.len=n.max-n.min}function b(e,t,r){var n=e.getPointAtLength(t);var a=e.getPointAtLength(r);var i=a.x-n.x;var o=a.y-n.y;var s=Math.sqrt(i*i+o*o);return[i/s,o/s]}function _(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]}function w(e,t){var r=Math.abs(e[0]*t[0]+e[1]*t[1]);var n=Math.sqrt(1-r*r);return n/r}function T(e,t,r,n,o,l){var u,f,c,v;var h=s.ensureSingle(e,"g","contourbg");var p=h.selectAll("path").data(l==="fill"&&!o?[0]:[]);p.enter().append("path");p.exit().remove();var d=[];for(v=0;v<t.length;v++){u=t[v];f=a([],u.x,r.c2p);c=a([],u.y,n.c2p);d.push(i(f,c,u.bicubic))}p.attr("d","M"+d.join("L")+"Z").style("stroke","none")}function k(e,t,r,a,i,o,l,u,f,c,v){var h=c==="fill";if(h){p(i,e.contours)}var d=s.ensureSingle(t,"g","contourfill");var g=d.selectAll("path").data(h?i:[]);g.enter().append("path");g.exit().remove();g.each((function(t){var i=(t.prefixBoundary?v:"")+A(e,t,o,l,u,f,r,a);if(!i){n.select(this).remove()}else{n.select(this).attr("d",i).style("stroke","none")}}))}function A(e,t,r,n,a,i,l,u){var f;var c="";var v=t.edgepaths.map((function(e,t){return t}));var h=true;var p,d,y,m,x,b;var _=Math.abs(r[0][0]-r[2][0])*1e-4;var w=Math.abs(r[0][1]-r[2][1])*1e-4;function T(e){return Math.abs(e[1]-r[0][1])<w}function k(e){return Math.abs(e[1]-r[2][1])<w}function A(e){return Math.abs(e[0]-r[0][0])<_}function M(e){return Math.abs(e[0]-r[2][0])<_}function S(e,t){var r,n,o,s;var f="";if(T(e)&&!M(e)||k(e)&&!A(e)){s=a.aaxis;o=g(a,i,[e[0],t[0]],.5*(e[1]+t[1]))}else{s=a.baxis;o=g(a,i,.5*(e[0]+t[0]),[e[1],t[1]])}for(r=1;r<o.length;r++){f+=s.smoothing?"C":"L";for(n=0;n<o[r].length;n++){var c=o[r][n];f+=[l.c2p(c[0]),u.c2p(c[1])]+" "}}return f}f=0;p=null;while(v.length){var E=t.edgepaths[f][0];if(p){c+=S(p,E)}b=o.smoothopen(t.edgepaths[f].map(n),t.smoothing);c+=h?b:b.replace(/^M/,"L");v.splice(v.indexOf(f),1);p=t.edgepaths[f][t.edgepaths[f].length-1];m=-1;for(y=0;y<4;y++){if(!p){s.log("Missing end?",f,t);break}if(T(p)&&!M(p)){d=r[1]}else if(A(p)){d=r[0]}else if(k(p)){d=r[3]}else if(M(p)){d=r[2]}for(x=0;x<t.edgepaths.length;x++){var L=t.edgepaths[x][0];if(Math.abs(p[0]-d[0])<_){if(Math.abs(p[0]-L[0])<_&&(L[1]-p[1])*(d[1]-L[1])>=0){d=L;m=x}}else if(Math.abs(p[1]-d[1])<w){if(Math.abs(p[1]-L[1])<w&&(L[0]-p[0])*(d[0]-L[0])>=0){d=L;m=x}}else{s.log("endpt to newendpt is not vert. or horz.",p,d,L)}}if(m>=0)break;c+=S(p,d);p=d}if(m===t.edgepaths.length){s.log("unclosed perimeter path");break}f=m;h=v.indexOf(f)===-1;if(h){f=v[0];c+=S(p,d)+"Z";p=null}}for(f=0;f<t.paths.length;f++){c+=o.smoothclosed(t.paths[f].map(n),t.smoothing)}return c}},64096:function(e,t,r){"use strict";var n=r(50693);var a=r(5386).fF;var i=r(9012);var o=r(99181);var s=r(1426).extendFlat;e.exports=s({lon:o.lon,lat:o.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:true,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:o.text,hovertext:o.hovertext,hoverinfo:s({},i.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:a(),showlegend:s({},i.showlegend,{dflt:false})},n("",{cLetter:"z",editTypeOverride:"calc"}))},85070:function(e,t,r){"use strict";var n=r(92770);var a=r(71828).isArrayOrTypedArray;var i=r(50606).BADNUM;var o=r(78803);var s=r(71828)._;e.exports=function e(t,r){var l=r._length;var u=new Array(l);var f=r.z;var c=a(f)&&f.length;for(var v=0;v<l;v++){var h=u[v]={};var p=r.lon[v];var d=r.lat[v];h.lonlat=n(p)&&n(d)?[+p,+d]:[i,i];if(c){var g=f[v];h.z=n(g)?g:i}}o(t,r,{vals:c?f:[0,1],containerStr:"",cLetter:"z"});if(l){u[0].t={labels:{lat:s(t,"lat:")+" ",lon:s(t,"lon:")+" "}}}return u}},52414:function(e,t,r){"use strict";var n=r(92770);var a=r(71828);var i=r(7901);var o=r(21081);var s=r(50606).BADNUM;var l=r(18214).makeBlank;e.exports=function e(t){var r=t[0].trace;var u=r.visible===true&&r._length!==0;var f={layout:{visibility:"none"},paint:{}};var c=r._opts={heatmap:f,geojson:l()};if(!u)return c;var v=[];var h;var p=r.z;var d=r.radius;var g=a.isArrayOrTypedArray(p)&&p.length;var y=a.isArrayOrTypedArray(d);for(h=0;h<t.length;h++){var m=t[h];var x=m.lonlat;if(x[0]!==s){var b={};if(g){var _=m.z;b.z=_!==s?_:0}if(y){b.r=n(d[h])&&d[h]>0?+d[h]:0}v.push({type:"Feature",geometry:{type:"Point",coordinates:x},properties:b})}}var w=o.extractOpts(r);var T=w.reversescale?o.flipScale(w.colorscale):w.colorscale;var k=T[0][1];var A=i.opacity(k)<1?k:i.addOpacity(k,0);var M=["interpolate",["linear"],["heatmap-density"],0,A];for(h=1;h<T.length;h++){M.push(T[h][0],T[h][1])}var S=["interpolate",["linear"],["get","z"],w.min,0,w.max,1];a.extendFlat(c.heatmap.paint,{"heatmap-weight":g?S:1/(w.max-w.min),"heatmap-color":M,"heatmap-radius":y?{type:"identity",property:"r"}:r.radius,"heatmap-opacity":r.opacity});c.geojson={type:"FeatureCollection",features:v};c.heatmap.layout.visibility="visible";return c}},79429:function(e,t,r){"use strict";var n=r(71828);var a=r(1586);var i=r(64096);e.exports=function e(t,r,o,s){function l(e,a){return n.coerce(t,r,i,e,a)}var u=l("lon")||[];var f=l("lat")||[];var c=Math.min(u.length,f.length);if(!c){r.visible=false;return}r._length=c;l("z");l("radius");l("below");l("text");l("hovertext");l("hovertemplate");a(t,r,s,l,{prefix:"",cLetter:"z"})}},62474:function(e){"use strict";e.exports=function e(t,r){t.lon=r.lon;t.lat=r.lat;t.z=r.z;return t}},84684:function(e,t,r){"use strict";var n=r(89298);var a=r(28178).hoverPoints;var i=r(28178).getExtraText;e.exports=function e(t,r,o){var s=a(t,r,o);if(!s)return;var l=s[0];var u=l.cd;var f=u[0].trace;var c=u[l.index];delete l.color;if("z"in c){var v=l.subplot.mockAxis;l.z=c.z;l.zLabel=n.tickText(v,v.c2l(c.z),"hover").text}l.extraText=i(f,c,u[0].t.labels);return[l]}},93814:function(e,t,r){"use strict";e.exports={attributes:r(64096),supplyDefaults:r(79429),colorbar:r(61243),formatLabels:r(15636),calc:r(85070),plot:r(7336),hoverPoints:r(84684),eventData:r(62474),getBelow:function(e,t){var r=t.getMapLayers();for(var n=0;n<r.length;n++){var a=r[n];var i=a.id;if(a.type==="symbol"&&typeof i==="string"&&i.indexOf("plotly-")===-1){return i}}},moduleType:"trace",name:"densitymapbox",basePlotModule:r(50101),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},7336:function(e,t,r){"use strict";var n=r(52414);var a=r(77734).traceLayerPrefix;function i(e,t){this.type="densitymapbox";this.subplot=e;this.uid=t;this.sourceId="source-"+t;this.layerList=[["heatmap",a+t+"-heatmap"]];this.below=null}var o=i.prototype;o.update=function(e){var t=this.subplot;var r=this.layerList;var a=n(e);var i=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(a.geojson);if(i!==this.below){this._removeLayers();this._addLayers(a,i);this.below=i}for(var o=0;o<r.length;o++){var s=r[o];var l=s[0];var u=s[1];var f=a[l];t.setOptions(u,"setLayoutProperty",f.layout);if(f.layout.visibility==="visible"){t.setOptions(u,"setPaintProperty",f.paint)}}};o._addLayers=function(e,t){var r=this.subplot;var n=this.layerList;var a=this.sourceId;for(var i=0;i<n.length;i++){var o=n[i];var s=o[0];var l=e[s];r.addLayer({type:s,id:o[1],source:a,layout:l.layout,paint:l.paint},t)}};o._removeLayers=function(){var e=this.subplot.map;var t=this.layerList;for(var r=t.length-1;r>=0;r--){e.removeLayer(t[r][1])}};o.dispose=function(){var e=this.subplot.map;this._removeLayers();e.removeSource(this.sourceId)};e.exports=function e(t,r){var a=r[0].trace;var o=new i(t,a.uid);var s=o.sourceId;var l=n(r);var u=o.below=t.belowLookup["trace-"+a.uid];t.map.addSource(s,{type:"geojson",data:l.geojson});o._addLayers(l,u);return o}},49789:function(e,t,r){"use strict";var n=r(71828);e.exports=function e(t,r){for(var a=0;a<t.length;a++)t[a].i=a;n.mergeArray(r.text,t,"tx");n.mergeArray(r.hovertext,t,"htx");var i=r.marker;if(i){n.mergeArray(i.opacity,t,"mo");n.mergeArray(i.color,t,"mc");var o=i.line;if(o){n.mergeArray(o.color,t,"mlc");n.mergeArrayCastPositive(o.width,t,"mlw")}}}},1285:function(e,t,r){"use strict";var n=r(1486);var a=r(82196).line;var i=r(9012);var o=r(12663).axisHoverFormat;var s=r(5386).fF;var l=r(5386).si;var u=r(18517);var f=r(1426).extendFlat;var c=r(7901);e.exports={x:n.x,x0:n.x0,dx:n.dx,y:n.y,y0:n.y0,dy:n.dy,xperiod:n.xperiod,yperiod:n.yperiod,xperiod0:n.xperiod0,yperiod0:n.yperiod0,xperiodalignment:n.xperiodalignment,yperiodalignment:n.yperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),hovertext:n.hovertext,hovertemplate:s({},{keys:u.eventDataKeys}),hoverinfo:f({},i.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:false},texttemplate:l({editType:"plot"},{keys:u.eventDataKeys.concat(["label","value"])}),text:n.text,textposition:n.textposition,insidetextanchor:f({},n.insidetextanchor,{dflt:"middle"}),textangle:f({},n.textangle,{dflt:0}),textfont:n.textfont,insidetextfont:n.insidetextfont,outsidetextfont:n.outsidetextfont,constraintext:n.constraintext,cliponaxis:n.cliponaxis,orientation:f({},n.orientation,{}),offset:f({},n.offset,{arrayOk:false}),width:f({},n.width,{arrayOk:false}),marker:v(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:f({},a.color,{dflt:c.defaultLine}),width:f({},a.width,{dflt:0,editType:"plot"}),dash:a.dash,editType:"style"},visible:{valType:"boolean",dflt:true,editType:"plot"},editType:"plot"},offsetgroup:n.offsetgroup,alignmentgroup:n.alignmentgroup};function v(){var e=f({},n.marker);delete e.pattern;return e}},9532:function(e,t,r){"use strict";var n=r(89298);var a=r(42973);var i=r(49789);var o=r(66279);var s=r(50606).BADNUM;e.exports=function e(t,r){var u=n.getFromId(t,r.xaxis||"x");var f=n.getFromId(t,r.yaxis||"y");var c,v,h,p,d,g,y,m;if(r.orientation==="h"){c=u.makeCalcdata(r,"x");h=f.makeCalcdata(r,"y");p=a(r,f,"y",h);d=!!r.yperiodalignment;g="y"}else{c=f.makeCalcdata(r,"y");h=u.makeCalcdata(r,"x");p=a(r,u,"x",h);d=!!r.xperiodalignment;g="x"}v=p.vals;var x=Math.min(v.length,c.length);var b=new Array(x);r._base=[];for(y=0;y<x;y++){if(c[y]<0)c[y]=s;var _=false;if(c[y]!==s){if(y+1<x&&c[y+1]!==s){_=true}}m=b[y]={p:v[y],s:c[y],cNext:_};r._base[y]=-.5*m.s;if(d){b[y].orig_p=h[y];b[y][g+"End"]=p.ends[y];b[y][g+"Start"]=p.starts[y]}if(r.ids){m.id=String(r.ids[y])}if(y===0)b[0].vTotal=0;b[0].vTotal+=l(m.s);m.begR=l(m.s)/l(b[0].s)}var w;for(y=0;y<x;y++){m=b[y];if(m.s===s)continue;m.sumR=m.s/b[0].vTotal;m.difR=w!==undefined?m.s/w:1;w=m.s}i(b,r);o(b,r);return b};function l(e){return e===s?0:e}},18517:function(e){"use strict";e.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},8984:function(e,t,r){"use strict";var n=r(11661).setGroupPositions;e.exports=function e(t,r){var a=t._fullLayout;var i=t._fullData;var o=t.calcdata;var s=r.xaxis;var l=r.yaxis;var u=[];var f=[];var c=[];var v,h;for(h=0;h<i.length;h++){var p=i[h];var d=p.orientation==="h";if(p.visible===true&&p.xaxis===s._id&&p.yaxis===l._id&&p.type==="funnel"){v=o[h];if(d){c.push(v)}else{f.push(v)}u.push(v)}}var g={mode:a.funnelmode,norm:a.funnelnorm,gap:a.funnelgap,groupgap:a.funnelgroupgap};n(t,s,l,f,g);n(t,l,s,c,g);for(h=0;h<u.length;h++){v=u[h];for(var y=0;y<v.length;y++){if(y+1<v.length){v[y].nextP0=v[y+1].p0;v[y].nextS0=v[y+1].s0;v[y].nextP1=v[y+1].p1;v[y].nextS1=v[y+1].s1}}}}},26199:function(e,t,r){"use strict";var n=r(71828);var a=r(26125);var i=r(90769).handleText;var o=r(67513);var s=r(73927);var l=r(1285);var u=r(7901);function f(e,t,r,a){function f(r,a){return n.coerce(e,t,l,r,a)}var v=o(e,t,a,f);if(!v){t.visible=false;return}s(e,t,a,f);f("xhoverformat");f("yhoverformat");f("orientation",t.y&&!t.x?"v":"h");f("offset");f("width");var h=f("text");f("hovertext");f("hovertemplate");var p=f("textposition");i(e,t,a,f,p,{moduleHasSelected:false,moduleHasUnselected:false,moduleHasConstrain:true,moduleHasCliponaxis:true,moduleHasTextangle:true,moduleHasInsideanchor:true});if(t.textposition!=="none"&&!t.texttemplate){f("textinfo",Array.isArray(h)?"text+value":"value")}var d=f("marker.color",r);f("marker.line.color",u.defaultLine);f("marker.line.width");var g=f("connector.visible");if(g){f("connector.fillcolor",c(d));var y=f("connector.line.width");if(y){f("connector.line.color");f("connector.line.dash")}}}function c(e){var t=n.isArrayOrTypedArray(e)?"#000":e;return u.addOpacity(t,.5*u.opacity(t))}function v(e,t){var r,i;function o(e){return n.coerce(i._input,i,l,e)}if(t.funnelmode==="group"){for(var s=0;s<e.length;s++){i=e[s];r=i._input;a(r,i,t,o)}}}e.exports={supplyDefaults:f,crossTraceDefaults:v}},34598:function(e){"use strict";e.exports=function e(t,r){t.x="xVal"in r?r.xVal:r.x;t.y="yVal"in r?r.yVal:r.y;if("percentInitial"in r)t.percentInitial=r.percentInitial;if("percentPrevious"in r)t.percentPrevious=r.percentPrevious;if("percentTotal"in r)t.percentTotal=r.percentTotal;if(r.xa)t.xaxis=r.xa;if(r.ya)t.yaxis=r.ya;return t}},63341:function(e,t,r){"use strict";var n=r(7901).opacity;var a=r(95423).hoverOnBars;var i=r(71828).formatPercent;e.exports=function e(t,r,n,s,l){var u=a(t,r,n,s,l);if(!u)return;var f=u.cd;var c=f[0].trace;var v=c.orientation==="h";var h=u.index;var p=f[h];var d=v?"x":"y";u[d+"LabelVal"]=p.s;u.percentInitial=p.begR;u.percentInitialLabel=i(p.begR,1);u.percentPrevious=p.difR;u.percentPreviousLabel=i(p.difR,1);u.percentTotal=p.sumR;u.percentTotalLabel=i(p.sumR,1);var g=p.hi||c.hoverinfo;var y=[];if(g&&g!=="none"&&g!=="skip"){var m=g==="all";var x=g.split("+");var b=function(e){return m||x.indexOf(e)!==-1};if(b("percent initial")){y.push(u.percentInitialLabel+" of initial")}if(b("percent previous")){y.push(u.percentPreviousLabel+" of previous")}if(b("percent total")){y.push(u.percentTotalLabel+" of total")}}u.extraText=y.join("<br>");u.color=o(c,p);return[u]};function o(e,t){var r=e.marker;var a=t.mc||r.color;var i=t.mlc||r.line.color;var o=t.mlw||r.line.width;if(n(a))return a;else if(n(i)&&o)return i}},51759:function(e,t,r){"use strict";e.exports={attributes:r(1285),layoutAttributes:r(10440),supplyDefaults:r(26199).supplyDefaults,crossTraceDefaults:r(26199).crossTraceDefaults,supplyLayoutDefaults:r(93138),calc:r(9532),crossTraceCalc:r(8984),plot:r(80461),style:r(68266).style,hoverPoints:r(63341),eventData:r(34598),selectPoints:r(81974),moduleType:"trace",name:"funnel",basePlotModule:r(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},10440:function(e){"use strict";e.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},93138:function(e,t,r){"use strict";var n=r(71828);var a=r(10440);e.exports=function(e,t,r){var i=false;function o(r,i){return n.coerce(e,t,a,r,i)}for(var s=0;s<r.length;s++){var l=r[s];if(l.visible&&l.type==="funnel"){i=true;break}}if(i){o("funnelmode");o("funnelgap",.2);o("funnelgroupgap")}}},80461:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);var i=r(91424);var o=r(50606).BADNUM;var s=r(17295);var l=r(72597).clearMinTextSize;e.exports=function e(t,r,n,a){var i=t._fullLayout;l("funnel",i);u(t,r,n,a);f(t,r,n,a);s.plot(t,r,n,a,{mode:i.funnelmode,norm:i.funnelmode,gap:i.funnelgap,groupgap:i.funnelgroupgap})};function u(e,t,r,s){var l=t.xaxis;var u=t.yaxis;a.makeTraceGroups(s,r,"trace bars").each((function(r){var s=n.select(this);var f=r[0].trace;var v=a.ensureSingle(s,"g","regions");if(!f.connector||!f.connector.visible){v.remove();return}var h=f.orientation==="h";var p=v.selectAll("g.region").data(a.identity);p.enter().append("g").classed("region",true);p.exit().remove();var d=p.size();p.each((function(r,s){if(s!==d-1&&!r.cNext)return;var f=c(r,l,u,h);var v=f[0];var p=f[1];var g="";if(v[0]!==o&&p[0]!==o&&v[1]!==o&&p[1]!==o&&v[2]!==o&&p[2]!==o&&v[3]!==o&&p[3]!==o){if(h){g+="M"+v[0]+","+p[1]+"L"+v[2]+","+p[2]+"H"+v[3]+"L"+v[1]+","+p[1]+"Z"}else{g+="M"+v[1]+","+p[1]+"L"+v[2]+","+p[3]+"V"+p[2]+"L"+v[1]+","+p[0]+"Z"}}if(g==="")g="M0,0Z";a.ensureSingle(n.select(this),"path").attr("d",g).call(i.setClipUrl,t.layerClipId,e)}))}))}function f(e,t,r,o){var s=t.xaxis;var l=t.yaxis;a.makeTraceGroups(o,r,"trace bars").each((function(r){var o=n.select(this);var u=r[0].trace;var f=a.ensureSingle(o,"g","lines");if(!u.connector||!u.connector.visible||!u.connector.line.width){f.remove();return}var v=u.orientation==="h";var h=f.selectAll("g.line").data(a.identity);h.enter().append("g").classed("line",true);h.exit().remove();var p=h.size();h.each((function(r,o){if(o!==p-1&&!r.cNext)return;var u=c(r,s,l,v);var f=u[0];var h=u[1];var d="";if(f[3]!==undefined&&h[3]!==undefined){if(v){d+="M"+f[0]+","+h[1]+"L"+f[2]+","+h[2];d+="M"+f[1]+","+h[1]+"L"+f[3]+","+h[2]}else{d+="M"+f[1]+","+h[1]+"L"+f[2]+","+h[3];d+="M"+f[1]+","+h[0]+"L"+f[2]+","+h[2]}}if(d==="")d="M0,0Z";a.ensureSingle(n.select(this),"path").attr("d",d).call(i.setClipUrl,t.layerClipId,e)}))}))}function c(e,t,r,n){var a=[];var i=[];var o=n?t:r;var s=n?r:t;a[0]=o.c2p(e.s0,true);i[0]=s.c2p(e.p0,true);a[1]=o.c2p(e.s1,true);i[1]=s.c2p(e.p1,true);a[2]=o.c2p(e.nextS0,true);i[2]=s.c2p(e.nextP0,true);a[3]=o.c2p(e.nextS1,true);i[3]=s.c2p(e.nextP1,true);return n?[a,i]:[i,a]}},68266:function(e,t,r){"use strict";var n=r(39898);var a=r(91424);var i=r(7901);var o=r(37822).DESELECTDIM;var s=r(16688);var l=r(72597).resizeText;var u=s.styleTextPoints;function f(e,t,r){var s=r?r:n.select(e).selectAll("g.funnellayer").selectAll("g.trace");l(e,s,"funnel");s.style("opacity",(function(e){return e[0].trace.opacity}));s.each((function(t){var r=n.select(this);var s=t[0].trace;r.selectAll(".point > path").each((function(e){if(!e.isBlank){var t=s.marker;n.select(this).call(i.fill,e.mc||t.color).call(i.stroke,e.mlc||t.line.color).call(a.dashLine,t.line.dash,e.mlw||t.line.width).style("opacity",s.selectedpoints&&!e.selected?o:1)}}));u(r,s,e);r.selectAll(".regions").each((function(){n.select(this).selectAll("path").style("stroke-width",0).call(i.fill,s.connector.fillcolor)}));r.selectAll(".lines").each((function(){var e=s.connector.line;a.lineGroupStyle(n.select(this).selectAll("path"),e.width,e.color,e.dash)}))}))}e.exports={style:f}},86807:function(e,t,r){"use strict";var n=r(34e3);var a=r(9012);var i=r(27670).Y;var o=r(5386).fF;var s=r(5386).si;var l=r(1426).extendFlat;e.exports={labels:n.labels,label0:n.label0,dlabel:n.dlabel,values:n.values,marker:{colors:n.marker.colors,line:{color:l({},n.marker.line.color,{dflt:null}),width:l({},n.marker.line.width,{dflt:1}),editType:"calc"},pattern:n.marker.pattern,editType:"calc"},text:n.text,hovertext:n.hovertext,scalegroup:l({},n.scalegroup,{}),textinfo:l({},n.textinfo,{flags:["label","text","value","percent"]}),texttemplate:s({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:l({},a.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:o({},{keys:["label","color","value","text","percent"]}),textposition:l({},n.textposition,{values:["inside","none"],dflt:"inside"}),textfont:n.textfont,insidetextfont:n.insidetextfont,title:{text:n.title.text,font:n.title.font,position:l({},n.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:i({name:"funnelarea",trace:true,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},6452:function(e,t,r){"use strict";var n=r(74875);t.name="funnelarea";t.plot=function(e,r,a,i){n.plotBasePlot(t.name,e,r,a,i)};t.clean=function(e,r,a,i){n.cleanBasePlot(t.name,e,r,a,i)}},89574:function(e,t,r){"use strict";var n=r(32354);function a(e,t){return n.calc(e,t)}function i(e){n.crossTraceCalc(e,{type:"funnelarea"})}e.exports={calc:a,crossTraceCalc:i}},86282:function(e,t,r){"use strict";var n=r(71828);var a=r(86807);var i=r(27670).c;var o=r(90769).handleText;var s=r(37434).handleLabelsAndValues;var l=r(37434).handleMarkerDefaults;e.exports=function e(t,r,u,f){function c(e,i){return n.coerce(t,r,a,e,i)}var v=c("labels");var h=c("values");var p=s(v,h);var d=p.len;r._hasLabels=p.hasLabels;r._hasValues=p.hasValues;if(!r._hasLabels&&r._hasValues){c("label0");c("dlabel")}if(!d){r.visible=false;return}r._length=d;l(t,r,f,c);c("scalegroup");var g=c("text");var y=c("texttemplate");var m;if(!y)m=c("textinfo",Array.isArray(g)?"text+percent":"percent");c("hovertext");c("hovertemplate");if(y||m&&m!=="none"){var x=c("textposition");o(t,r,f,c,x,{moduleHasSelected:false,moduleHasUnselected:false,moduleHasConstrain:false,moduleHasCliponaxis:false,moduleHasTextangle:false,moduleHasInsideanchor:false})}i(r,f,c);var b=c("title.text");if(b){c("title.position");n.coerceFont(c,"title.font",f.font)}c("aspectratio");c("baseratio")}},10421:function(e,t,r){"use strict";e.exports={moduleType:"trace",name:"funnelarea",basePlotModule:r(6452),categories:["pie-like","funnelarea","showLegend"],attributes:r(86807),layoutAttributes:r(80097),supplyDefaults:r(86282),supplyLayoutDefaults:r(57402),calc:r(89574).calc,crossTraceCalc:r(89574).crossTraceCalc,plot:r(79187),style:r(71858),styleOne:r(63463),meta:{}}},80097:function(e,t,r){"use strict";var n=r(92774).hiddenlabels;e.exports={hiddenlabels:n,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:true,editType:"calc"}}},57402:function(e,t,r){"use strict";var n=r(71828);var a=r(80097);e.exports=function e(t,r){function i(e,i){return n.coerce(t,r,a,e,i)}i("hiddenlabels");i("funnelareacolorway",r.colorway);i("extendfunnelareacolors")}},79187:function(e,t,r){"use strict";var n=r(39898);var a=r(91424);var i=r(71828);var o=i.strScale;var s=i.strTranslate;var l=r(63893);var u=r(17295);var f=u.toMoveInsideBar;var c=r(72597);var v=c.recordMinTextSize;var h=c.clearMinTextSize;var p=r(53581);var d=r(14575);var g=d.attachFxHandlers;var y=d.determineInsideTextFont;var m=d.layoutAreas;var x=d.prerenderTitles;var b=d.positionTitleOutside;var _=d.formatSliceLabel;e.exports=function e(t,r){var u=t._context.staticPlot;var c=t._fullLayout;h("funnelarea",c);x(r,t);m(r,c._size);i.makeTraceGroups(c._funnelarealayer,r,"trace").each((function(e){var r=n.select(this);var h=e[0];var d=h.trace;k(e);r.each((function(){var r=n.select(this).selectAll("g.slice").data(e);r.enter().append("g").classed("slice",true);r.exit().remove();r.each((function(r,o){if(r.hidden){n.select(this).selectAll("path,g").remove();return}r.pointNumber=r.i;r.curveNumber=d.index;var s=h.cx;var m=h.cy;var x=n.select(this);var b=x.selectAll("path.surface").data([r]);b.enter().append("path").classed("surface",true).style({"pointer-events":u?"none":"all"});x.call(g,t,e);var T="M"+(s+r.TR[0])+","+(m+r.TR[1])+w(r.TR,r.BR)+w(r.BR,r.BL)+w(r.BL,r.TL)+"Z";b.attr("d",T);_(t,r,h);var k=p.castOption(d.textposition,r.pts);var A=x.selectAll("g.slicetext").data(r.text&&k!=="none"?[0]:[]);A.enter().append("g").classed("slicetext",true);A.exit().remove();A.each((function(){var u=i.ensureSingle(n.select(this),"text","",(function(e){e.attr("data-notex",1)}));var h=i.ensureUniformFontSize(t,y(d,r,c.font));u.text(r.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(a.font,h).call(l.convertToTspans,t);var p=a.bBox(u.node());var g;var x,b;var _=Math.min(r.BL[1],r.BR[1])+m;var w=Math.max(r.TL[1],r.TR[1])+m;x=Math.max(r.TL[0],r.BL[0])+s;b=Math.min(r.TR[0],r.BR[0])+s;g=f(x,b,_,w,p,{isHorizontal:true,constrained:true,angle:0,anchor:"middle"});g.fontSize=h.size;v(d.type,g,c);e[o].transform=g;i.setTransormAndDisplay(u,g)}))}));var m=n.select(this).selectAll("g.titletext").data(d.title.text?[0]:[]);m.enter().append("g").classed("titletext",true);m.exit().remove();m.each((function(){var e=i.ensureSingle(n.select(this),"text","",(function(e){e.attr("data-notex",1)}));var r=d.title.text;if(d._meta){r=i.templateString(r,d._meta)}e.text(r).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(a.font,d.title.font).call(l.convertToTspans,t);var u=b(h,c._size);e.attr("transform",s(u.x,u.y)+o(Math.min(1,u.scale))+s(u.tx,u.ty))}))}))}))};function w(e,t){var r=t[0]-e[0];var n=t[1]-e[1];return"l"+r+","+n}function T(e,t){return[.5*(e[0]+t[0]),.5*(e[1]+t[1])]}function k(e){if(!e.length)return;var t=e[0];var r=t.trace;var n=r.aspectratio;var a=r.baseratio;if(a>.999)a=.999;var i=Math.pow(a,2);var o=t.vTotal;var s=o*i/(1-i);var l=o;var u=s/o;function f(){var e=Math.sqrt(u);return{x:e,y:-e}}function c(){var e=f();return[e.x,e.y]}var v;var h=[];h.push(c());var p,d;for(p=e.length-1;p>-1;p--){d=e[p];if(d.hidden)continue;var g=d.v/l;u+=g;h.push(c())}var y=Infinity;var m=-Infinity;for(p=0;p<h.length;p++){v=h[p];y=Math.min(y,v[1]);m=Math.max(m,v[1])}for(p=0;p<h.length;p++){h[p][1]-=(m+y)/2}var x=h[h.length-1][0];var b=t.r;var _=(m-y)/2;var w=b/x;var k=b/_*n;t.r=k*_;for(p=0;p<h.length;p++){h[p][0]*=w;h[p][1]*=k}v=h[0];var A=[-v[0],v[1]];var M=[v[0],v[1]];var S=0;for(p=e.length-1;p>-1;p--){d=e[p];if(d.hidden)continue;S+=1;var E=h[S][0];var L=h[S][1];d.TL=[-E,L];d.TR=[E,L];d.BL=A;d.BR=M;d.pxmid=T(d.TR,d.BR);A=d.TL;M=d.TR}}},71858:function(e,t,r){"use strict";var n=r(39898);var a=r(63463);var i=r(72597).resizeText;e.exports=function e(t){var r=t._fullLayout._funnelarealayer.selectAll(".trace");i(t,r,"funnelarea");r.each((function(e){var r=e[0];var i=r.trace;var o=n.select(this);o.style({opacity:i.opacity});o.selectAll("path.surface").each((function(e){n.select(this).call(a,e,i,t)}))}))}},21606:function(e,t,r){"use strict";var n=r(82196);var a=r(9012);var i=r(41940);var o=r(12663).axisHoverFormat;var s=r(5386).fF;var l=r(5386).si;var u=r(50693);var f=r(1426).extendFlat;e.exports=f({z:{valType:"data_array",editType:"calc"},x:f({},n.x,{impliedEdits:{xtype:"array"}}),x0:f({},n.x0,{impliedEdits:{xtype:"scaled"}}),dx:f({},n.dx,{impliedEdits:{xtype:"scaled"}}),y:f({},n.y,{impliedEdits:{ytype:"array"}}),y0:f({},n.y0,{impliedEdits:{ytype:"scaled"}}),dy:f({},n.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:f({},n.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:f({},n.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:f({},n.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:f({},n.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:f({},n.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:f({},n.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:false,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",false],dflt:false,editType:"calc"},hoverongaps:{valType:"boolean",dflt:true,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z",1),hovertemplate:s(),texttemplate:l({arrayOk:false,editType:"plot"},{keys:["x","y","z","text"]}),textfont:i({editType:"plot",autoSize:true,autoColor:true,colorEditType:"style"}),showlegend:f({},a.showlegend,{dflt:false})},{transforms:undefined},u("",{cLetter:"z",autoColorDflt:false}))},90757:function(e,t,r){"use strict";var n=r(73972);var a=r(71828);var i=r(89298);var o=r(42973);var s=r(17562);var l=r(78803);var u=r(68296);var f=r(4742);var c=r(824);var v=r(43907);var h=r(70769);var p=r(50606).BADNUM;e.exports=function e(t,r){var p=i.getFromId(t,r.xaxis||"x");var y=i.getFromId(t,r.yaxis||"y");var m=n.traceIs(r,"contour");var x=n.traceIs(r,"histogram");var b=n.traceIs(r,"gl2d");var _=m?"best":r.zsmooth;var w,T,k,A;var M,S,E,L;var C,I,P;p._minDtick=0;y._minDtick=0;if(x){P=s(t,r);A=P.orig_x;w=P.x;T=P.x0;k=P.dx;L=P.orig_y;M=P.y;S=P.y0;E=P.dy;C=P.z}else{var O=r.z;if(a.isArray1D(O)){u(r,p,y,"x","y",["z"]);w=r._x;M=r._y;O=r._z}else{A=r.x?p.makeCalcdata(r,"x"):[];L=r.y?y.makeCalcdata(r,"y"):[];w=o(r,p,"x",A).vals;M=o(r,y,"y",L).vals;r._x=w;r._y=M}T=r.x0;k=r.dx;S=r.y0;E=r.dy;C=f(O,r,p,y)}if(p.rangebreaks||y.rangebreaks){C=g(w,M,C);if(!x){w=d(w);M=d(M);r._x=w;r._y=M}}if(!x&&(m||r.connectgaps)){r._emptypoints=v(C);c(C,r._emptypoints)}function D(e){_=r._input.zsmooth=r.zsmooth=false;a.warn('cannot use zsmooth: "fast": '+e)}function z(e){if(e.length>1){var t=(e[e.length-1]-e[0])/(e.length-1);var r=Math.abs(t/100);for(I=0;I<e.length-1;I++){if(Math.abs(e[I+1]-e[I]-t)>r){return false}}}return true}r._islinear=false;if(p.type==="log"||y.type==="log"){if(_==="fast"){D("log axis found")}}else if(!z(w)){if(_==="fast")D("x scale is not linear")}else if(!z(M)){if(_==="fast")D("y scale is not linear")}else{r._islinear=true}var R=a.maxRowLength(C);var F=r.xtype==="scaled"?"":w;var B=h(r,F,T,k,R,p);var N=r.ytype==="scaled"?"":M;var j=h(r,N,S,E,C.length,y);if(!b){r._extremes[p._id]=i.findExtremes(p,B);r._extremes[y._id]=i.findExtremes(y,j)}var U={x:B,y:j,z:C,text:r._text||r.text,hovertext:r._hovertext||r.hovertext};if(r.xperiodalignment&&A){U.orig_x=A}if(r.yperiodalignment&&L){U.orig_y=L}if(F&&F.length===B.length-1)U.xCenter=F;if(N&&N.length===j.length-1)U.yCenter=N;if(x){U.xRanges=P.xRanges;U.yRanges=P.yRanges;U.pts=P.pts}if(!m){l(t,r,{vals:C,cLetter:"z"})}if(m&&r.contours&&r.contours.coloring==="heatmap"){var V={type:r.type==="contour"?"heatmap":"histogram2d",xcalendar:r.xcalendar,ycalendar:r.ycalendar};U.xfill=h(V,F,T,k,R,p);U.yfill=h(V,N,S,E,C.length,y)}return[U]};function d(e){var t=[];var r=e.length;for(var n=0;n<r;n++){var a=e[n];if(a!==p)t.push(a)}return t}function g(e,t,r){var n=[];var a=-1;for(var i=0;i<r.length;i++){if(t[i]===p)continue;a++;n[a]=[];for(var o=0;o<r[i].length;o++){if(e[o]===p)continue;n[a].push(r[i][o])}}return n}},4742:function(e,t,r){"use strict";var n=r(92770);var a=r(71828);var i=r(50606).BADNUM;e.exports=function e(t,r,o,s){var l,u,f,c,v,h;function p(e){if(!n(e))return undefined;return+e}if(r&&r.transpose){l=0;for(v=0;v<t.length;v++)l=Math.max(l,t[v].length);if(l===0)return false;f=function(e){return e.length};c=function(e,t,r){return(e[r]||[])[t]}}else{l=t.length;f=function(e,t){return e[t].length};c=function(e,t,r){return(e[t]||[])[r]}}var d=function(e,t,r){if(t===i||r===i)return i;return c(e,t,r)};function g(e){if(r&&r.type!=="carpet"&&r.type!=="contourcarpet"&&e&&e.type==="category"&&r["_"+e._id.charAt(0)].length){var t=e._id.charAt(0);var n={};var o=r["_"+t+"CategoryMap"]||r[t];for(v=0;v<o.length;v++){n[o[v]]=v}return function(t){var r=n[e._categories[t]];return r+1?r:i}}else{return a.identity}}var y=g(o);var m=g(s);if(s&&s.type==="category")l=s._categories.length;var x=new Array(l);for(v=0;v<l;v++){if(o&&o.type==="category"){u=o._categories.length}else{u=f(t,v)}x[v]=new Array(u);for(h=0;h<u;h++)x[v][h]=p(d(t,m(v),y(h)))}return x}},61243:function(e){"use strict";e.exports={min:"zmin",max:"zmax"}},68296:function(e,t,r){"use strict";var n=r(71828);var a=r(50606).BADNUM;var i=r(42973);e.exports=function e(t,r,o,s,l,u){var f=t._length;var c=r.makeCalcdata(t,s);var v=o.makeCalcdata(t,l);c=i(t,r,s,c).vals;v=i(t,o,l,v).vals;var h=t.text;var p=h!==undefined&&n.isArray1D(h);var d=t.hovertext;var g=d!==undefined&&n.isArray1D(d);var y,m;var x=n.distinctVals(c);var b=x.vals;var _=n.distinctVals(v);var w=_.vals;var T=[];var k;var A;var M=w.length;var S=b.length;for(y=0;y<u.length;y++){T[y]=n.init2dArray(M,S)}if(p){k=n.init2dArray(M,S)}if(g){A=n.init2dArray(M,S)}var E=n.init2dArray(M,S);for(y=0;y<f;y++){if(c[y]!==a&&v[y]!==a){var L=n.findBin(c[y]+x.minDiff/2,b);var C=n.findBin(v[y]+_.minDiff/2,w);for(m=0;m<u.length;m++){var I=u[m];var P=t[I];var O=T[m];O[C][L]=P[y];E[C][L]=y}if(p)k[C][L]=h[y];if(g)A[C][L]=d[y]}}t["_"+s]=b;t["_"+l]=w;for(m=0;m<u.length;m++){t["_"+u[m]]=T[m]}if(p)t._text=k;if(g)t._hovertext=A;if(r&&r.type==="category"){t["_"+s+"CategoryMap"]=b.map((function(e){return r._categories[e]}))}if(o&&o.type==="category"){t["_"+l+"CategoryMap"]=w.map((function(e){return o._categories[e]}))}t._after2before=E}},76382:function(e,t,r){"use strict";var n=r(71828);var a=r(67684);var i=r(58623);var o=r(73927);var s=r(49901);var l=r(1586);var u=r(21606);e.exports=function e(t,r,f,c){function v(e,a){return n.coerce(t,r,u,e,a)}var h=a(t,r,v,c);if(!h){r.visible=false;return}o(t,r,c,v);v("xhoverformat");v("yhoverformat");v("text");v("hovertext");v("hovertemplate");i(v,c);s(t,r,v,c);v("hoverongaps");v("connectgaps",n.isArray1D(r.z)&&r.zsmooth!==false);l(t,r,c,v,{prefix:"",cLetter:"z"})}},43907:function(e,t,r){"use strict";var n=r(71828).maxRowLength;e.exports=function e(t){var r=[];var a={};var i=[];var o=t[0];var s=[];var l=[0,0,0];var u=n(t);var f;var c;var v;var h;var p;var d;var g;var y;for(c=0;c<t.length;c++){f=s;s=o;o=t[c+1]||[];for(v=0;v<u;v++){if(s[v]===undefined){d=(s[v-1]!==undefined?1:0)+(s[v+1]!==undefined?1:0)+(f[v]!==undefined?1:0)+(o[v]!==undefined?1:0);if(d){if(c===0)d++;if(v===0)d++;if(c===t.length-1)d++;if(v===s.length-1)d++;if(d<4){a[[c,v]]=[c,v,d]}r.push([c,v,d])}else i.push([c,v])}}}while(i.length){g={};y=false;for(p=i.length-1;p>=0;p--){h=i[p];c=h[0];v=h[1];d=((a[[c-1,v]]||l)[2]+(a[[c+1,v]]||l)[2]+(a[[c,v-1]]||l)[2]+(a[[c,v+1]]||l)[2])/20;if(d){g[h]=[c,v,d];i.splice(p,1);y=true}}if(!y){throw"findEmpties iterated with no new neighbors"}for(h in g){a[h]=g[h];r.push(g[h])}}return r.sort((function(e,t){return t[2]-e[2]}))}},46248:function(e,t,r){"use strict";var n=r(30211);var a=r(71828);var i=r(89298);var o=r(21081).extractOpts;e.exports=function e(t,r,s,l,u){if(!u)u={};var f=u.isContour;var c=t.cd[0];var v=c.trace;var h=t.xa;var p=t.ya;var d=c.x;var g=c.y;var y=c.z;var m=c.xCenter;var x=c.yCenter;var b=c.zmask;var _=v.zhoverformat;var w=d;var T=g;var k,A,M,S;if(t.index!==false){try{M=Math.round(t.index[1]);S=Math.round(t.index[0])}catch(j){a.error("Error hovering on heatmap, "+"pointNumber must be [row,col], found:",t.index);return}if(M<0||M>=y[0].length||S<0||S>y.length){return}}else if(n.inbox(r-d[0],r-d[d.length-1],0)>0||n.inbox(s-g[0],s-g[g.length-1],0)>0){return}else{if(f){var E;w=[2*d[0]-d[1]];for(E=1;E<d.length;E++){w.push((d[E]+d[E-1])/2)}w.push([2*d[d.length-1]-d[d.length-2]]);T=[2*g[0]-g[1]];for(E=1;E<g.length;E++){T.push((g[E]+g[E-1])/2)}T.push([2*g[g.length-1]-g[g.length-2]])}M=Math.max(0,Math.min(w.length-2,a.findBin(r,w)));S=Math.max(0,Math.min(T.length-2,a.findBin(s,T)))}var L=h.c2p(d[M]);var C=h.c2p(d[M+1]);var I=p.c2p(g[S]);var P=p.c2p(g[S+1]);var O,D;if(f){O=c.orig_x||d;D=c.orig_y||g;C=L;k=O[M];P=I;A=D[S]}else{O=c.orig_x||m||d;D=c.orig_y||x||g;k=m?O[M]:(O[M]+O[M+1])/2;A=x?D[S]:(D[S]+D[S+1])/2;if(h&&h.type==="category")k=d[M];if(p&&p.type==="category")A=g[S];if(v.zsmooth){L=C=h.c2p(k);I=P=p.c2p(A)}}var z=y[S][M];if(b&&!b[S][M])z=undefined;if(z===undefined&&!v.hoverongaps)return;var R;if(Array.isArray(c.hovertext)&&Array.isArray(c.hovertext[S])){R=c.hovertext[S][M]}else if(Array.isArray(c.text)&&Array.isArray(c.text[S])){R=c.text[S][M]}var F=o(v);var B={type:"linear",range:[F.min,F.max],hoverformat:_,_separators:h._separators,_numFormat:h._numFormat};var N=i.tickText(B,z,"hover").text;return[a.extendFlat(t,{index:v._after2before?v._after2before[S][M]:[S,M],distance:t.maxHoverDistance,spikeDistance:t.maxSpikeDistance,x0:L,x1:C,y0:I,y1:P,xLabelVal:k,yLabelVal:A,zLabelVal:z,zLabel:N,text:R})]}},92165:function(e,t,r){"use strict";e.exports={attributes:r(21606),supplyDefaults:r(76382),calc:r(90757),plot:r(50347),colorbar:r(61243),style:r(70035),hoverPoints:r(46248),moduleType:"trace",name:"heatmap",basePlotModule:r(93612),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},824:function(e,t,r){"use strict";var n=r(71828);var a=.01;var i=[[-1,0],[1,0],[0,-1],[0,1]];function o(e){return.5-.25*Math.min(1,e*.5)}e.exports=function e(t,r){var i=1;var l;s(t,r);for(l=0;l<r.length;l++){if(r[l][2]<4)break}r=r.slice(l);for(l=0;l<100&&i>a;l++){i=s(t,r,o(i))}if(i>a){n.log("interp2d didn't converge quickly",i)}return t};function s(e,t,r){var n=0;var a;var o;var s;var l;var u;var f;var c;var v;var h;var p;var d;var g;var y;for(l=0;l<t.length;l++){a=t[l];o=a[0];s=a[1];d=e[o][s];p=0;h=0;for(u=0;u<4;u++){f=i[u];c=e[o+f[0]];if(!c)continue;v=c[s+f[1]];if(v!==undefined){if(p===0){g=y=v}else{g=Math.min(g,v);y=Math.max(y,v)}h++;p+=v}}if(h===0){throw"iterateInterp2d order is wrong: no defined neighbors"}e[o][s]=p/h;if(d===undefined){if(h<4)n=1}else{e[o][s]=(1+r)*e[o][s]-r*d;if(y>g){n=Math.max(n,Math.abs(e[o][s]-d)/(y-g))}}}return n}},58623:function(e,t,r){"use strict";var n=r(71828);e.exports=function e(t,r){t("texttemplate");var a=n.extendFlat({},r.font,{color:"auto",size:"auto"});n.coerceFont(t,"textfont",a)}},70769:function(e,t,r){"use strict";var n=r(73972);var a=r(71828).isArrayOrTypedArray;e.exports=function e(t,r,i,o,s,l){var u=[];var f=n.traceIs(t,"contour");var c=n.traceIs(t,"histogram");var v=n.traceIs(t,"gl2d");var h;var p;var d;var g=a(r)&&r.length>1;if(g&&!c&&l.type!=="category"){var y=r.length;if(y<=s){if(f||v)u=r.slice(0,s);else if(s===1){u=[r[0]-.5,r[0]+.5]}else{u=[1.5*r[0]-.5*r[1]];for(d=1;d<y;d++){u.push((r[d-1]+r[d])*.5)}u.push(1.5*r[y-1]-.5*r[y-2])}if(y<s){var m=u[u.length-1];var x=m-u[u.length-2];for(d=y;d<s;d++){m+=x;u.push(m)}}}else{return f?r.slice(0,s):r.slice(0,s+1)}}else{var b=t[l._id.charAt(0)+"calendar"];if(c){h=l.r2c(i,0,b)}else{if(a(r)&&r.length===1){h=r[0]}else if(i===undefined){h=0}else{var _=l.type==="log"?l.d2c:l.r2c;h=_(i,0,b)}}p=o||1;for(d=f||v?0:-.5;d<s;d++){u.push(h+p*d)}}return u}},50347:function(e,t,r){"use strict";var n=r(39898);var a=r(84267);var i=r(73972);var o=r(91424);var s=r(89298);var l=r(71828);var u=r(63893);var f=r(8225);var c=r(7901);var v=r(21081).extractOpts;var h=r(21081).makeColorScaleFuncFromTrace;var p=r(77922);var d=r(18783);var g=d.LINE_SPACING;var y=r(3883);var m=r(32396).STYLE;var x="heatmap-label";function b(e){return e.selectAll("g."+x)}function _(e){b(e).remove()}e.exports=function(e,t,r,d){var A=t.xaxis;var M=t.yaxis;l.makeTraceGroups(d,r,"hm").each((function(t){var r=n.select(this);var d=t[0];var S=d.trace;var E=S.xgap||0;var L=S.ygap||0;var C=d.z;var I=d.x;var P=d.y;var O=d.xCenter;var D=d.yCenter;var z=i.traceIs(S,"contour");var R=z?"best":S.zsmooth;var F=C.length;var B=l.maxRowLength(C);var N=false;var j=false;var U,V,H,q,G,Z,Y,W;Z=0;while(U===undefined&&Z<I.length-1){U=A.c2p(I[Z]);Z++}Z=I.length-1;while(V===undefined&&Z>0){V=A.c2p(I[Z]);Z--}if(V<U){H=V;V=U;U=H;N=true}Z=0;while(q===undefined&&Z<P.length-1){q=M.c2p(P[Z]);Z++}Z=P.length-1;while(G===undefined&&Z>0){G=M.c2p(P[Z]);Z--}if(G<q){H=q;q=G;G=H;j=true}if(z){O=I;D=P;I=d.xfill;P=d.yfill}var X="default";if(R){X=R==="best"?"smooth":"fast"}else if(S._islinear&&E===0&&L===0&&y()){X="fast"}if(X!=="fast"){var J=R==="best"?0:.5;U=Math.max(-J*A._length,U);V=Math.min((1+J)*A._length,V);q=Math.max(-J*M._length,q);G=Math.min((1+J)*M._length,G)}var K=Math.round(V-U);var $=Math.round(G-q);var Q=U>=A._length||V<=0||q>=M._length||G<=0;if(Q){var ee=r.selectAll("image").data([]);ee.exit().remove();_(r);return}var te,re;if(X==="fast"){te=B;re=F}else{te=K;re=$}var ne=document.createElement("canvas");ne.width=te;ne.height=re;var ae=ne.getContext("2d",{willReadFrequently:true});var ie=h(S,{noNumericCheck:true,returnArray:true});var oe,se;if(X==="fast"){oe=N?function(e){return B-1-e}:l.identity;se=j?function(e){return F-1-e}:l.identity}else{oe=function(e){return l.constrain(Math.round(A.c2p(I[e])-U),0,K)};se=function(e){return l.constrain(Math.round(M.c2p(P[e])-q),0,$)}}var le=se(0);var ue=[le,le];var fe=N?0:1;var ce=j?0:1;var ve=0;var he=0;var pe=0;var de=0;var ge,ye,me,xe,be;function _e(e,t){if(e!==undefined){var r=ie(e);r[0]=Math.round(r[0]);r[1]=Math.round(r[1]);r[2]=Math.round(r[2]);ve+=t;he+=r[0]*t;pe+=r[1]*t;de+=r[2]*t;return r}return[0,0,0,0]}function we(e,t,r,n){var a=e[r.bin0];if(a===undefined)return _e(undefined,1);var i=e[r.bin1];var o=t[r.bin0];var s=t[r.bin1];var l=i-a||0;var u=o-a||0;var f;if(i===undefined){if(s===undefined)f=0;else if(o===undefined)f=2*(s-a);else f=(2*s-o-a)*2/3}else if(s===undefined){if(o===undefined)f=0;else f=(2*a-i-o)*2/3}else if(o===undefined)f=(2*s-i-a)*2/3;else f=s+a-i-o;return _e(a+r.frac*l+n.frac*(u+r.frac*f))}if(X!=="default"){var Te=0;var ke;try{ke=new Uint8Array(te*re*4)}catch(kt){ke=new Array(te*re*4)}if(X==="smooth"){var Ae=O||I;var Me=D||P;var Se=new Array(Ae.length);var Ee=new Array(Me.length);var Le=new Array(K);var Ce=O?T:w;var Ie=D?T:w;var Pe,Oe,De;for(Z=0;Z<Ae.length;Z++)Se[Z]=Math.round(A.c2p(Ae[Z])-U);for(Z=0;Z<Me.length;Z++)Ee[Z]=Math.round(M.c2p(Me[Z])-q);for(Z=0;Z<K;Z++)Le[Z]=Ce(Z,Se);for(Y=0;Y<$;Y++){Pe=Ie(Y,Ee);Oe=C[Pe.bin0];De=C[Pe.bin1];for(Z=0;Z<K;Z++,Te+=4){be=we(Oe,De,Le[Z],Pe);k(ke,Te,be)}}}else{for(Y=0;Y<F;Y++){xe=C[Y];ue=se(Y);for(Z=0;Z<B;Z++){be=_e(xe[Z],1);Te=(ue*B+oe(Z))*4;k(ke,Te,be)}}}var ze=ae.createImageData(te,re);try{ze.data.set(ke)}catch(kt){var Re=ze.data;var Fe=Re.length;for(Y=0;Y<Fe;Y++){Re[Y]=ke[Y]}}ae.putImageData(ze,0,0)}else{var Be=Math.floor(E/2);var Ne=Math.floor(L/2);for(Y=0;Y<F;Y++){xe=C[Y];ue.reverse();ue[ce]=se(Y+1);if(ue[0]===ue[1]||ue[0]===undefined||ue[1]===undefined){continue}ye=oe(0);ge=[ye,ye];for(Z=0;Z<B;Z++){ge.reverse();ge[fe]=oe(Z+1);if(ge[0]===ge[1]||ge[0]===undefined||ge[1]===undefined){continue}me=xe[Z];be=_e(me,(ge[1]-ge[0])*(ue[1]-ue[0]));ae.fillStyle="rgba("+be.join(",")+")";ae.fillRect(ge[0]+Be,ue[0]+Ne,ge[1]-ge[0]-E,ue[1]-ue[0]-L)}}}he=Math.round(he/ve);pe=Math.round(pe/ve);de=Math.round(de/ve);var je=a("rgb("+he+","+pe+","+de+")");e._hmpixcount=(e._hmpixcount||0)+ve;e._hmlumcount=(e._hmlumcount||0)+ve*je.getLuminance();var Ue=r.selectAll("image").data(t);Ue.enter().append("svg:image").attr({xmlns:p.svg,preserveAspectRatio:"none"});Ue.attr({height:$,width:K,x:U,y:q,"xlink:href":ne.toDataURL("image/png")});if(X==="fast"&&!R){Ue.attr("style",m)}_(r);var Ve=S.texttemplate;if(Ve){var He=v(S);var qe={type:"linear",range:[He.min,He.max],_separators:A._separators,_numFormat:A._numFormat};var Ge=S.type==="histogram2dcontour";var Ze=S.type==="contour";var Ye=Ze?1:0;var We=Ze?F-1:F;var Xe=Ze?1:0;var Je=Ze?B-1:B;var Ke=[];for(Z=Ye;Z<We;Z++){var $e;if(Ze){$e=d.y[Z]}else if(Ge){if(Z===0||Z===F-1)continue;$e=d.y[Z]}else if(d.yCenter){$e=d.yCenter[Z]}else{if(Z+1===F&&d.y[Z+1]===undefined)continue;$e=(d.y[Z]+d.y[Z+1])/2}var Qe=Math.round(M.c2p($e));if(0>Qe||Qe>M._length)continue;for(Y=Xe;Y<Je;Y++){var et;if(Ze){et=d.x[Y]}else if(Ge){if(Y===0||Y===B-1)continue;et=d.x[Y]}else if(d.xCenter){et=d.xCenter[Y]}else{if(Y+1===B&&d.x[Y+1]===undefined)continue;et=(d.x[Y]+d.x[Y+1])/2}var tt=Math.round(A.c2p(et));if(0>tt||tt>A._length)continue;var rt=f({x:et,y:$e},S,e._fullLayout);rt.x=et;rt.y=$e;var nt=d.z[Z][Y];if(nt===undefined){rt.z="";rt.zLabel=""}else{rt.z=nt;rt.zLabel=s.tickText(qe,nt,"hover").text}var at=d.text&&d.text[Z]&&d.text[Z][Y];if(at===undefined||at===false)at="";rt.text=at;var it=l.texttemplateString(Ve,rt,e._fullLayout._d3locale,rt,S._meta||{});if(!it)continue;var ot=it.split("<br>");var st=ot.length;var lt=0;for(W=0;W<st;W++){lt=Math.max(lt,ot[W].length)}Ke.push({l:st,c:lt,t:it,x:tt,y:Qe,z:nt})}}var ut=S.textfont;var ft=ut.family;var ct=ut.size;var vt=e._fullLayout.font.size;if(!ct||ct==="auto"){var ht=Infinity;var pt=Infinity;var dt=0;var gt=0;for(W=0;W<Ke.length;W++){var yt=Ke[W];dt=Math.max(dt,yt.l);gt=Math.max(gt,yt.c);if(W<Ke.length-1){var mt=Ke[W+1];var xt=Math.abs(mt.x-yt.x);var bt=Math.abs(mt.y-yt.y);if(xt)ht=Math.min(ht,xt);if(bt)pt=Math.min(pt,bt)}}if(!isFinite(ht)||!isFinite(pt)){ct=vt}else{ht-=E;pt-=L;ht/=gt;pt/=dt;ht/=g/2;pt/=g;ct=Math.min(Math.floor(ht),Math.floor(pt),vt)}}if(ct<=0||!isFinite(ct))return;var _t=function(e){return e.x};var wt=function(e){return e.y-ct*(e.l*g/2-1)};var Tt=b(r).data(Ke);Tt.enter().append("g").classed(x,1).append("text").attr("text-anchor","middle").each((function(t){var r=n.select(this);var a=ut.color;if(!a||a==="auto"){a=c.contrast("rgba("+ie(t.z).join()+")")}r.attr("data-notex",1).call(u.positionText,_t(t),wt(t)).call(o.font,ft,ct,a).text(t.t).call(u.convertToTspans,e)}))}}))};function w(e,t){var r=t.length-2;var n=l.constrain(l.findBin(e,t),0,r);var a=t[n];var i=t[n+1];var o=l.constrain(n+(e-a)/(i-a)-.5,0,r);var s=Math.round(o);var u=Math.abs(o-s);if(!o||o===r||!u){return{bin0:s,bin1:s,frac:0}}return{bin0:s,frac:u,bin1:Math.round(s+u/(o-s))}}function T(e,t){var r=t.length-1;var n=l.constrain(l.findBin(e,t),0,r);var a=t[n];var i=t[n+1];var o=(e-a)/(i-a)||0;if(o<=0){return{bin0:n,bin1:n,frac:0}}if(o<.5){return{bin0:n,bin1:n+1,frac:o}}return{bin0:n+1,bin1:n,frac:1-o}}function k(e,t,r){e[t]=r[0];e[t+1]=r[1];e[t+2]=r[2];e[t+3]=Math.round(r[3]*255)}},70035:function(e,t,r){"use strict";var n=r(39898);e.exports=function e(t){n.select(t).selectAll(".hm image").style("opacity",(function(e){return e.trace.opacity}))}},49901:function(e){"use strict";e.exports=function e(t,r,n){var a=n("zsmooth");if(a===false){n("xgap");n("ygap")}n("zhoverformat")}},67684:function(e,t,r){"use strict";var n=r(92770);var a=r(71828);var i=r(73972);e.exports=function e(t,r,n,l,u,f){var c=n("z");u=u||"x";f=f||"y";var v,h;if(c===undefined||!c.length)return 0;if(a.isArray1D(t.z)){v=n(u);h=n(f);var p=a.minRowLength(v);var d=a.minRowLength(h);if(p===0||d===0)return 0;r._length=Math.min(p,d,c.length)}else{v=o(u,n);h=o(f,n);if(!s(c))return 0;n("transpose");r._length=null}if(t.type==="heatmapgl")return true;var g=i.getComponentMethod("calendars","handleTraceDefaults");g(t,r,[u,f],l);return true};function o(e,t){var r=t(e);var n=r?t(e+"type","array"):"scaled";if(n==="scaled"){t(e+"0");t("d"+e)}return r}function s(e){var t=true;var r=false;var i=false;var o;for(var s=0;s<e.length;s++){o=e[s];if(!a.isArrayOrTypedArray(o)){t=false;break}if(o.length>0)r=true;for(var l=0;l<o.length;l++){if(n(o[l])){i=true;break}}}return t&&r&&i}},16063:function(e,t,r){"use strict";var n=r(21606);var a=r(50693);var i=r(1426).extendFlat;var o=r(30962).overrideAll;var s=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"];var l={};for(var u=0;u<s.length;u++){var f=s[u];l[f]=n[f]}l.zsmooth={valType:"enumerated",values:["fast",false],dflt:"fast",editType:"calc"};i(l,a("",{cLetter:"z",autoColorDflt:false}));e.exports=o(l,"calc","nested")},59560:function(e,t,r){"use strict";var n=r(9330).gl_heatmap2d;var a=r(89298);var i=r(78614);function o(e,t){this.scene=e;this.uid=t;this.type="heatmapgl";this.name="";this.hoverinfo="all";this.xData=[];this.yData=[];this.zData=[];this.textLabels=[];this.idToIndex=[];this.bounds=[0,0,0,0];this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]};this.heatmap=n(e.glplot,this.options);this.heatmap._trace=this}var s=o.prototype;s.handlePick=function(e){var t=this.options;var r=t.shape;var n=e.pointId;var a=n%r[0];var i=Math.floor(n/r[0]);var o=n;return{trace:this,dataCoord:e.dataCoord,traceCoord:[t.x[a],t.y[i],t.z[o]],textLabel:this.textLabels[n],name:this.name,pointIndex:[i,a],hoverinfo:this.hoverinfo}};s.update=function(e,t){var r=t[0];this.index=e.index;this.name=e.name;this.hoverinfo=e.hoverinfo;var n=r.z;this.options.z=[].concat.apply([],n);var i=n[0].length;var o=n.length;this.options.shape=[i,o];this.options.x=r.x;this.options.y=r.y;this.options.zsmooth=e.zsmooth;var s=l(e);this.options.colorLevels=s.colorLevels;this.options.colorValues=s.colorValues;this.textLabels=[].concat.apply([],e.text);this.heatmap.update(this.options);var u=this.scene.xaxis;var f=this.scene.yaxis;var c,v;if(e.zsmooth===false){c={ppad:r.x[1]-r.x[0]};v={ppad:r.y[1]-r.y[0]}}e._extremes[u._id]=a.findExtremes(u,r.x,c);e._extremes[f._id]=a.findExtremes(f,r.y,v)};s.dispose=function(){this.heatmap.dispose()};function l(e){var t=e.colorscale;var r=e.zmin;var n=e.zmax;var a=t.length;var o=new Array(a);var s=new Array(4*a);for(var l=0;l<a;l++){var u=t[l];var f=i(u[1]);o[l]=r+u[0]*(n-r);for(var c=0;c<4;c++){s[4*l+c]=f[c]}}return{colorLevels:o,colorValues:s}}function u(e,t,r){var n=new o(e,t.uid);n.update(t,r);return n}e.exports=u},19600:function(e,t,r){"use strict";var n=r(71828);var a=r(67684);var i=r(1586);var o=r(16063);e.exports=function e(t,r,s,l){function u(e,a){return n.coerce(t,r,o,e,a)}var f=a(t,r,u,l);if(!f){r.visible=false;return}u("text");u("zsmooth");i(t,r,l,u,{prefix:"",cLetter:"z"})}},3325:function(e,t,r){"use strict";var n=["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" ");e.exports={attributes:r(16063),supplyDefaults:r(19600),colorbar:r(61243),calc:r(90757),plot:r(59560),moduleType:"trace",name:"heatmapgl",basePlotModule:r(4796),categories:["gl","gl2d","2dMap"],meta:{}}},7745:function(e,t,r){"use strict";var n=r(1486);var a=r(12663).axisHoverFormat;var i=r(5386).fF;var o=r(5386).si;var s=r(41940);var l=r(17656);var u=r(72406);var f=r(1426).extendFlat;e.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:a("x"),yhoverformat:a("y"),text:f({},n.text,{}),hovertext:f({},n.hovertext,{}),orientation:n.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:false,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:l("x",true),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:l("y",true),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:i({},{keys:u.eventDataKeys}),texttemplate:o({arrayOk:false,editType:"plot"},{keys:["label","value"]}),textposition:f({},n.textposition,{arrayOk:false}),textfont:s({arrayOk:false,editType:"plot",colorEditType:"style"}),outsidetextfont:s({arrayOk:false,editType:"plot",colorEditType:"style"}),insidetextfont:s({arrayOk:false,editType:"plot",colorEditType:"style"}),insidetextanchor:n.insidetextanchor,textangle:n.textangle,cliponaxis:n.cliponaxis,constraintext:n.constraintext,marker:n.marker,offsetgroup:n.offsetgroup,alignmentgroup:n.alignmentgroup,selected:n.selected,unselected:n.unselected,_deprecated:{bardir:n._deprecated.bardir}}},42174:function(e){"use strict";e.exports=function e(t,r){var n=t.length;var a=0;for(var i=0;i<n;i++){if(r[i]){t[i]/=r[i];a+=t[i]}else t[i]=null}return a}},17656:function(e){"use strict";e.exports=function e(t,r){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},59575:function(e,t,r){"use strict";var n=r(92770);e.exports={count:function(e,t,r){r[e]++;return 1},sum:function(e,t,r,a){var i=a[t];if(n(i)){i=Number(i);r[e]+=i;return i}return 0},avg:function(e,t,r,a,i){var o=a[t];if(n(o)){o=Number(o);r[e]+=o;i[e]++}return 0},min:function(e,t,r,a){var i=a[t];if(n(i)){i=Number(i);if(!n(r[e])){r[e]=i;return i}else if(r[e]>i){var o=i-r[e];r[e]=i;return o}}return 0},max:function(e,t,r,a){var i=a[t];if(n(i)){i=Number(i);if(!n(r[e])){r[e]=i;return i}else if(r[e]<i){var o=i-r[e];r[e]=i;return o}}return 0}}},40965:function(e,t,r){"use strict";var n=r(50606);var a=n.ONEAVGYEAR;var i=n.ONEAVGMONTH;var o=n.ONEDAY;var s=n.ONEHOUR;var l=n.ONEMIN;var u=n.ONESEC;var f=r(89298).tickIncrement;e.exports=function e(t,r,n,i,s){var l=-1.1*r;var u=-.1*r;var v=t-u;var h=n[0];var p=n[1];var d=Math.min(c(h+u,h+v,i,s),c(p+u,p+v,i,s));var g=Math.min(c(h+l,h+u,i,s),c(p+l,p+u,i,s));var y,m;if(d>g&&g<Math.abs(p-h)/4e3){y=d;m=false}else{y=Math.min(d,g);m=true}if(i.type==="date"&&y>o){var x=y===a?1:6;var b=y===a?"M12":"M1";return function(e,r){var n=i.c2d(e,a,s);var o=n.indexOf("-",x);if(o>0)n=n.substr(0,o);var l=i.d2c(n,0,s);if(l<e){var u=f(l,b,false,s);if((l+u)/2<e+t)l=u}if(r&&m){return f(l,b,true,s)}return l}}return function(e,r){var n=y*Math.round(e/y);if(n+y/10<e&&n+y*.9<e+t){n+=y}if(r&&m){n-=y}return n}};function c(e,t,r,n){if(e*t<=0)return Infinity;var a=Math.abs(t-e);var i=r.type==="date";var o=v(a,i);for(var s=0;s<10;s++){var l=v(o*80,i);if(o===l)break;if(h(l,e,t,i,r,n))o=l;else break}return o}function v(e,t){if(t&&e>u){if(e>o){if(e>a*1.1)return a;if(e>i*1.1)return i;return o}if(e>s)return s;if(e>l)return l;return u}return Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function h(e,t,r,n,i,s){if(n&&e>o){var l=p(t,i,s);var u=p(r,i,s);var f=e===a?0:1;return l[f]!==u[f]}return Math.floor(r/e)-Math.floor(t/e)>.1}function p(e,t,r){var n=t.c2d(e,a,r).split("-");if(n[0]===""){n.unshift();n[0]="-"+n[0]}return n}},72138:function(e,t,r){"use strict";var n=r(92770);var a=r(71828);var i=r(73972);var o=r(89298);var s=r(75341);var l=r(59575);var u=r(36362);var f=r(42174);var c=r(40965);function v(e,t){var r=[];var i=[];var v=t.orientation==="h";var p=o.getFromId(e,v?t.yaxis:t.xaxis);var d=v?"y":"x";var y={x:"y",y:"x"}[d];var m=t[d+"calendar"];var x=t.cumulative;var b;var _=h(e,t,p,d);var w=_[0];var T=_[1];var k=typeof w.size==="string";var A=[];var M=k?A:w;var S=[];var E=[];var L=[];var C=0;var I=t.histnorm;var P=t.histfunc;var O=I.indexOf("density")!==-1;var D,z,R;if(x.enabled&&O){I=I.replace(/ ?density$/,"");O=false}var F=P==="max"||P==="min";var B=F?null:0;var N=l.count;var j=u[I];var U=false;var V=function(e){return p.r2c(e,0,m)};var H;if(a.isArrayOrTypedArray(t[y])&&P!=="count"){H=t[y];U=P==="avg";N=l[P]}b=V(w.start);z=V(w.end)+(b-o.tickIncrement(b,w.size,false,m))/1e6;while(b<z&&r.length<1e6){D=o.tickIncrement(b,w.size,false,m);r.push((b+D)/2);i.push(B);L.push([]);A.push(b);if(O)S.push(1/(D-b));if(U)E.push(0);if(D<=b)break;b=D}A.push(b);if(!k&&p.type==="date"){M={start:V(M.start),end:V(M.end),size:M.size}}if(!e._fullLayout._roundFnOpts)e._fullLayout._roundFnOpts={};var q=t["_"+d+"bingroup"];var G={leftGap:Infinity,rightGap:Infinity};if(q){if(!e._fullLayout._roundFnOpts[q])e._fullLayout._roundFnOpts[q]=G;G=e._fullLayout._roundFnOpts[q]}var Z=i.length;var Y=true;var W=G.leftGap;var X=G.rightGap;var J={};for(b=0;b<T.length;b++){var K=T[b];R=a.findBin(K,M);if(R>=0&&R<Z){C+=N(R,b,i,H,E);if(Y&&L[R].length&&K!==T[L[R][0]]){Y=false}L[R].push(b);J[b]=R;W=Math.min(W,K-A[R]);X=Math.min(X,A[R+1]-K)}}G.leftGap=W;G.rightGap=X;var $;if(!Y){$=function(t,r){return function(){var n=e._fullLayout._roundFnOpts[q];return c(n.leftGap,n.rightGap,A,p,m)(t,r)}}}if(U)C=f(i,E);if(j)j(i,C,S);if(x.enabled)g(i,x.direction,x.currentbin);var Q=Math.min(r.length,i.length);var ee=[];var te=0;var re=Q-1;for(b=0;b<Q;b++){if(i[b]){te=b;break}}for(b=Q-1;b>=te;b--){if(i[b]){re=b;break}}for(b=te;b<=re;b++){if(n(r[b])&&n(i[b])){var ne={p:r[b],s:i[b],b:0};if(!x.enabled){ne.pts=L[b];if(Y){ne.ph0=ne.ph1=L[b].length?T[L[b][0]]:r[b]}else{t._computePh=true;ne.ph0=$(A[b]);ne.ph1=$(A[b+1],true)}}ee.push(ne)}}if(ee.length===1){ee[0].width1=o.tickIncrement(ee[0].p,w.size,false,m)-ee[0].p}s(ee,t);if(a.isArrayOrTypedArray(t.selectedpoints)){a.tagSelected(ee,t,J)}return ee}function h(e,t,r,s,l){var u=s+"bins";var f=e._fullLayout;var c=t["_"+s+"bingroup"];var v=f._histogramBinOpts[c];var h=f.barmode==="overlay";var d,g,y,m,x,b,_;var w=function(e){return r.r2c(e,0,m)};var T=function(e){return r.c2r(e,0,m)};var k=r.type==="date"?function(e){return e||e===0?a.cleanDate(e,null,m):null}:function(e){return n(e)?Number(e):null};function A(e,t,r){if(t[e+"Found"]){t[e]=k(t[e]);if(t[e]===null)t[e]=r[e]}else{b[e]=t[e]=r[e];a.nestedProperty(g[0],u+"."+e).set(r[e])}}if(t["_"+s+"autoBinFinished"]){delete t["_"+s+"autoBinFinished"]}else{g=v.traces;var M=[];var S=true;var E=false;var L=false;for(d=0;d<g.length;d++){y=g[d];if(y.visible){var C=v.dirs[d];x=y["_"+C+"pos0"]=r.makeCalcdata(y,C);M=a.concat(M,x);delete y["_"+s+"autoBinFinished"];if(t.visible===true){if(S){S=false}else{delete y._autoBin;y["_"+s+"autoBinFinished"]=1}if(i.traceIs(y,"2dMap")){E=true}if(y.type==="histogram2dcontour"){L=true}}}}m=g[0][s+"calendar"];var I=o.autoBin(M,r,v.nbins,E,m,v.sizeFound&&v.size);var P=g[0]._autoBin={};b=P[v.dirs[0]]={};if(L){if(!v.size){I.start=T(o.tickIncrement(w(I.start),I.size,true,m))}if(v.end===undefined){I.end=T(o.tickIncrement(w(I.end),I.size,false,m))}}if(h&&!i.traceIs(t,"2dMap")&&I._dataSpan===0&&r.type!=="category"&&r.type!=="multicategory"&&t.bingroup===""&&typeof t.xbins==="undefined"){if(l)return[I,x,true];I=p(e,t,r,s,u)}_=y.cumulative||{};if(_.enabled&&_.currentbin!=="include"){if(_.direction==="decreasing"){I.start=T(o.tickIncrement(w(I.start),I.size,true,m))}else{I.end=T(o.tickIncrement(w(I.end),I.size,false,m))}}v.size=I.size;if(!v.sizeFound){b.size=I.size;a.nestedProperty(g[0],u+".size").set(I.size)}A("start",v,I);A("end",v,I)}x=t["_"+s+"pos0"];delete t["_"+s+"pos0"];var O=t._input[u]||{};var D=a.extendFlat({},v);var z=v.start;var R=r.r2l(O.start);var F=R!==undefined;if((v.startFound||F)&&R!==r.r2l(z)){var B=F?R:a.aggNums(Math.min,null,x);var N={type:r.type==="category"||r.type==="multicategory"?"linear":r.type,r2l:r.r2l,dtick:v.size,tick0:z,calendar:m,range:[B,o.tickIncrement(B,v.size,false,m)].map(r.l2r)};var j=o.tickFirst(N);if(j>r.r2l(B)){j=o.tickIncrement(j,v.size,true,m)}D.start=r.l2r(j);if(!F)a.nestedProperty(t,u+".start").set(D.start)}var U=v.end;var V=r.r2l(O.end);var H=V!==undefined;if((v.endFound||H)&&V!==r.r2l(U)){var q=H?V:a.aggNums(Math.max,null,x);D.end=r.l2r(q);if(!H)a.nestedProperty(t,u+".start").set(D.end)}var G="autobin"+s;if(t._input[G]===false){t._input[u]=a.extendFlat({},t[u]||{});delete t._input[G];delete t[G]}return[D,x]}function p(e,t,r,n,i){var o=e._fullLayout;var s=d(e,t);var l=false;var u=Infinity;var f=[t];var c,v,p;for(c=0;c<s.length;c++){v=s[c];if(v===t){l=true}else if(!l){p=o._histogramBinOpts[v["_"+n+"bingroup"]];u=Math.min(u,p.size||v[i].size)}else{var g=h(e,v,r,n,true);var y=g[0];var m=g[2];v["_"+n+"autoBinFinished"]=1;v["_"+n+"pos0"]=g[1];if(m){f.push(v)}else{u=Math.min(u,y.size)}}}var x=new Array(f.length);for(c=0;c<f.length;c++){var b=f[c]["_"+n+"pos0"];for(var _=0;_<b.length;_++){if(b[_]!==undefined){x[c]=b[_];break}}}if(!isFinite(u)){u=a.distinctVals(x).minDiff}for(c=0;c<f.length;c++){v=f[c];var w=v[n+"calendar"];var T={start:r.c2r(x[c]-u/2,0,w),end:r.c2r(x[c]+u/2,0,w),size:u};v._input[i]=v[i]=T;p=o._histogramBinOpts[v["_"+n+"bingroup"]];if(p)a.extendFlat(p,T)}return t[i]}function d(e,t){var r=t.xaxis;var n=t.yaxis;var a=t.orientation;var i=[];var o=e._fullData;for(var s=0;s<o.length;s++){var l=o[s];if(l.type==="histogram"&&l.visible===true&&l.orientation===a&&l.xaxis===r&&l.yaxis===n){i.push(l)}}return i}function g(e,t,r){var n,a,i;function o(t){i=e[t];e[t]/=2}function s(t){a=e[t];e[t]=i+a/2;i+=a}if(r==="half"){if(t==="increasing"){o(0);for(n=1;n<e.length;n++){s(n)}}else{o(e.length-1);for(n=e.length-2;n>=0;n--){s(n)}}}else if(t==="increasing"){for(n=1;n<e.length;n++){e[n]+=e[n-1]}if(r==="exclude"){e.unshift(0);e.pop()}}else{for(n=e.length-2;n>=0;n--){e[n]+=e[n+1]}if(r==="exclude"){e.push(0);e.shift()}}}e.exports={calc:v,calcAllAutoBins:h}},72406:function(e){"use strict";e.exports={eventDataKeys:["binNumber"]}},82222:function(e,t,r){"use strict";var n=r(71828);var a=r(41675);var i=r(73972).traceIs;var o=r(26125);var s=n.nestedProperty;var l=r(99082).getAxisGroup;var u=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}];var f=["x","y"];e.exports=function e(t,r){var c=r._histogramBinOpts={};var v=[];var h={};var p=[];var d,g,y,m;var x,b,_;function w(e,t){return n.coerce(d._input,d,d._module.attributes,e,t)}function T(e){return e.orientation==="v"?"x":"y"}function k(e,t){var n=a.getFromTrace({_fullLayout:r},e,t);return n.type}function A(e,t,r){var a=e.uid+"__"+r;if(!t)t=a;var i=k(e,r);var o=e[r+"calendar"]||"";var s=c[t];var l=true;if(s){if(i===s.axType&&o===s.calendar){l=false;s.traces.push(e);s.dirs.push(r)}else{t=a;if(i!==s.axType){n.warn(["Attempted to group the bins of trace",e.index,"set on a","type:"+i,"axis","with bins on","type:"+s.axType,"axis."].join(" "))}if(o!==s.calendar){n.warn(["Attempted to group the bins of trace",e.index,"set with a",o,"calendar","with bins",s.calendar?"on a "+s.calendar+" calendar":"w/o a set calendar"].join(" "))}}}if(l){c[t]={traces:[e],dirs:[r],axType:i,calendar:e[r+"calendar"]||""}}e["_"+r+"bingroup"]=t}for(x=0;x<t.length;x++){d=t[x];if(i(d,"histogram")){v.push(d);delete d._xautoBinFinished;delete d._yautoBinFinished;if(!i(d,"2dMap")){o(d._input,d,r,w)}}}var M=r._alignmentOpts||{};for(x=0;x<v.length;x++){d=v[x];y="";if(!i(d,"2dMap")){m=T(d);if(r.barmode==="group"&&d.alignmentgroup){var S=d[m+"axis"];var E=l(r,S)+d.orientation;if((M[E]||{})[d.alignmentgroup]){y=E}}if(!y&&r.barmode!=="overlay"){y=l(r,d.xaxis)+l(r,d.yaxis)+T(d)}}if(y){if(!h[y]){h[y]=[]}h[y].push(d)}else{p.push(d)}}for(y in h){g=h[y];if(g.length===1){p.push(g[0]);continue}var L=false;if(g.length){d=g[0];L=w("bingroup")}y=L||y;for(x=0;x<g.length;x++){d=g[x];var C=d._input.bingroup;if(C&&C!==y){n.warn(["Trace",d.index,"must match","within bingroup",y+".","Ignoring its bingroup:",C,"setting."].join(" "))}d.bingroup=y;A(d,y,T(d))}}for(x=0;x<p.length;x++){d=p[x];var I=w("bingroup");if(i(d,"2dMap")){for(_=0;_<2;_++){m=f[_];var P=w(m+"bingroup",I?I+"__"+m:null);A(d,P,m)}}else{A(d,I,T(d))}}for(y in c){var O=c[y];g=O.traces;for(b=0;b<u.length;b++){var D=u[b];var z=D.name;var R;var F;if(z==="nbins"&&O.sizeFound)continue;for(x=0;x<g.length;x++){d=g[x];m=O.dirs[x];R=D.aStr[m];if(s(d._input,R).get()!==undefined){O[z]=w(R);O[z+"Found"]=true;break}F=(d._autoBin||{})[m]||{};if(F[z]){s(d,R).set(F[z])}}if(z==="start"||z==="end"){for(;x<g.length;x++){d=g[x];if(d["_"+m+"bingroup"]){F=(d._autoBin||{})[m]||{};w(R,F[z])}}}if(z==="nbins"&&!O.sizeFound&&!O.nbinsFound){d=g[0];O[z]=w(R)}}}}},11385:function(e,t,r){"use strict";var n=r(73972);var a=r(71828);var i=r(7901);var o=r(90769).handleText;var s=r(98340);var l=r(7745);e.exports=function e(t,r,u,f){function c(e,n){return a.coerce(t,r,l,e,n)}var v=c("x");var h=c("y");var p=c("cumulative.enabled");if(p){c("cumulative.direction");c("cumulative.currentbin")}c("text");var d=c("textposition");o(t,r,f,c,d,{moduleHasSelected:true,moduleHasUnselected:true,moduleHasConstrain:true,moduleHasCliponaxis:true,moduleHasTextangle:true,moduleHasInsideanchor:true});c("hovertext");c("hovertemplate");c("xhoverformat");c("yhoverformat");var g=c("orientation",h&&!v?"h":"v");var y=g==="v"?"x":"y";var m=g==="v"?"y":"x";var x=v&&h?Math.min(a.minRowLength(v)&&a.minRowLength(h)):a.minRowLength(r[y]||[]);if(!x){r.visible=false;return}r._length=x;var b=n.getComponentMethod("calendars","handleTraceDefaults");b(t,r,["x","y"],f);var _=r[m];if(_)c("histfunc");c("histnorm");c("autobin"+y);s(t,r,c,u,f);a.coerceSelectionMarkerOpacity(r,c);var w=(r.marker.line||{}).color;var T=n.getComponentMethod("errorbars","supplyDefaults");T(t,r,w||i.defaultLine,{axis:"y"});T(t,r,w||i.defaultLine,{axis:"x",inherit:"y"})}},84402:function(e){"use strict";e.exports=function e(t,r,n,a,i){t.x="xVal"in r?r.xVal:r.x;t.y="yVal"in r?r.yVal:r.y;if("zLabelVal"in r)t.z=r.zLabelVal;if(r.xa)t.xaxis=r.xa;if(r.ya)t.yaxis=r.ya;if(!(n.cumulative||{}).enabled){var o=Array.isArray(i)?a[0].pts[i[0]][i[1]]:a[i].pts;t.pointNumbers=o;t.binNumber=t.pointNumber;delete t.pointNumber;delete t.pointIndex;var s;if(n._indexToPoints){s=[];for(var l=0;l<o.length;l++){s=s.concat(n._indexToPoints[o[l]])}}else{s=o}t.pointIndices=s}return t}},76440:function(e,t,r){"use strict";var n=r(95423).hoverPoints;var a=r(89298).hoverLabelText;e.exports=function e(t,r,i,o,s){var l=n(t,r,i,o,s);if(!l)return;t=l[0];var u=t.cd[t.index];var f=t.cd[0].trace;if(!f.cumulative.enabled){var c=f.orientation==="h"?"y":"x";t[c+"Label"]=a(t[c+"a"],[u.ph0,u.ph1],f[c+"hoverformat"])}return l}},36071:function(e,t,r){"use strict";e.exports={attributes:r(7745),layoutAttributes:r(43641),supplyDefaults:r(11385),crossTraceDefaults:r(82222),supplyLayoutDefaults:r(13957),calc:r(72138).calc,crossTraceCalc:r(11661).crossTraceCalc,plot:r(17295).plot,layerName:"barlayer",style:r(16688).style,styleOnSelect:r(16688).styleOnSelect,colorbar:r(4898),hoverPoints:r(76440),selectPoints:r(81974),eventData:r(84402),moduleType:"trace",name:"histogram",basePlotModule:r(93612),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},36362:function(e){"use strict";e.exports={percent:function(e,t){var r=e.length;var n=100/t;for(var a=0;a<r;a++)e[a]*=n},probability:function(e,t){var r=e.length;for(var n=0;n<r;n++)e[n]/=t},density:function(e,t,r,n){var a=e.length;n=n||1;for(var i=0;i<a;i++)e[i]*=r[i]*n},"probability density":function(e,t,r,n){var a=e.length;if(n)t/=n;for(var i=0;i<a;i++)e[i]*=r[i]/t}}},35361:function(e,t,r){"use strict";var n=r(7745);var a=r(17656);var i=r(21606);var o=r(9012);var s=r(12663).axisHoverFormat;var l=r(5386).fF;var u=r(5386).si;var f=r(50693);var c=r(1426).extendFlat;e.exports=c({x:n.x,y:n.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:n.histnorm,histfunc:n.histfunc,nbinsx:n.nbinsx,xbins:a("x"),nbinsy:n.nbinsy,ybins:a("y"),autobinx:n.autobinx,autobiny:n.autobiny,bingroup:c({},n.bingroup,{}),xbingroup:c({},n.bingroup,{}),ybingroup:c({},n.bingroup,{}),xgap:i.xgap,ygap:i.ygap,zsmooth:i.zsmooth,xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z",1),hovertemplate:l({},{keys:"z"}),texttemplate:u({arrayOk:false,editType:"plot"},{keys:"z"}),textfont:i.textfont,showlegend:c({},o.showlegend,{dflt:false})},f("",{cLetter:"z",autoColorDflt:false}))},17562:function(e,t,r){"use strict";var n=r(71828);var a=r(89298);var i=r(59575);var o=r(36362);var s=r(42174);var l=r(40965);var u=r(72138).calcAllAutoBins;e.exports=function e(t,r){var l=a.getFromId(t,r.xaxis);var h=a.getFromId(t,r.yaxis);var p=r.xcalendar;var d=r.ycalendar;var g=function(e){return l.r2c(e,0,p)};var y=function(e){return h.r2c(e,0,d)};var m=function(e){return l.c2r(e,0,p)};var x=function(e){return h.c2r(e,0,d)};var b,_,w,T;var k=u(t,r,l,"x");var A=k[0];var M=k[1];var S=u(t,r,h,"y");var E=S[0];var L=S[1];var C=r._length;if(M.length>C)M.splice(C,M.length-C);if(L.length>C)L.splice(C,L.length-C);var I=[];var P=[];var O=[];var D=typeof A.size==="string";var z=typeof E.size==="string";var R=[];var F=[];var B=D?R:A;var N=z?F:E;var j=0;var U=[];var V=[];var H=r.histnorm;var q=r.histfunc;var G=H.indexOf("density")!==-1;var Z=q==="max"||q==="min";var Y=Z?null:0;var W=i.count;var X=o[H];var J=false;var K=[];var $=[];var Q="z"in r?r.z:"marker"in r&&Array.isArray(r.marker.color)?r.marker.color:"";if(Q&&q!=="count"){J=q==="avg";W=i[q]}var ee=A.size;var te=g(A.start);var re=g(A.end)+(te-a.tickIncrement(te,ee,false,p))/1e6;for(b=te;b<re;b=a.tickIncrement(b,ee,false,p)){P.push(Y);R.push(b);if(J)O.push(0)}R.push(b);var ne=P.length;var ae=(b-te)/ne;var ie=m(te+ae/2);var oe=E.size;var se=y(E.start);var le=y(E.end)+(se-a.tickIncrement(se,oe,false,d))/1e6;for(b=se;b<le;b=a.tickIncrement(b,oe,false,d)){I.push(P.slice());F.push(b);var ue=new Array(ne);for(_=0;_<ne;_++)ue[_]=[];V.push(ue);if(J)U.push(O.slice())}F.push(b);var fe=I.length;var ce=(b-se)/fe;var ve=x(se+ce/2);if(G){K=f(P.length,B,ae,D);$=f(I.length,N,ce,z)}if(!D&&l.type==="date")B=c(g,B);if(!z&&h.type==="date")N=c(y,N);var he=true;var pe=true;var de=new Array(ne);var ge=new Array(fe);var ye=Infinity;var me=Infinity;var xe=Infinity;var be=Infinity;for(b=0;b<C;b++){var _e=M[b];var we=L[b];w=n.findBin(_e,B);T=n.findBin(we,N);if(w>=0&&w<ne&&T>=0&&T<fe){j+=W(w,b,I[T],Q,U[T]);V[T][w].push(b);if(he){if(de[w]===undefined)de[w]=_e;else if(de[w]!==_e)he=false}if(pe){if(ge[T]===undefined)ge[T]=we;else if(ge[T]!==we)pe=false}ye=Math.min(ye,_e-R[w]);me=Math.min(me,R[w+1]-_e);xe=Math.min(xe,we-F[T]);be=Math.min(be,F[T+1]-we)}}if(J){for(T=0;T<fe;T++)j+=s(I[T],U[T])}if(X){for(T=0;T<fe;T++)X(I[T],j,K,$[T])}return{x:M,xRanges:v(R,he&&de,ye,me,l,p),x0:ie,dx:ae,y:L,yRanges:v(F,pe&&ge,xe,be,h,d),y0:ve,dy:ce,z:I,pts:V}};function f(e,t,r,n){var a=new Array(e);var i;if(n){for(i=0;i<e;i++)a[i]=1/(t[i+1]-t[i])}else{var o=1/r;for(i=0;i<e;i++)a[i]=o}return a}function c(e,t){return{start:e(t.start),end:e(t.end),size:t.size}}function v(e,t,r,n,a,i){var o;var s=e.length-1;var u=new Array(s);var f=l(r,n,e,a,i);for(o=0;o<s;o++){var c=(t||[])[o];u[o]=c===undefined?[f(e[o]),f(e[o+1],true)]:[c,c]}return u}},93888:function(e,t,r){"use strict";var n=r(71828);var a=r(75238);var i=r(49901);var o=r(1586);var s=r(58623);var l=r(35361);e.exports=function e(t,r,u,f){function c(e,a){return n.coerce(t,r,l,e,a)}a(t,r,c,f);if(r.visible===false)return;i(t,r,c,f);o(t,r,f,c,{prefix:"",cLetter:"z"});c("hovertemplate");s(c,f);c("xhoverformat");c("yhoverformat")}},76128:function(e,t,r){"use strict";var n=r(46248);var a=r(89298).hoverLabelText;e.exports=function e(t,r,i,o,s){var l=n(t,r,i,o,s);if(!l)return;t=l[0];var u=t.index;var f=u[0];var c=u[1];var v=t.cd[0];var h=v.trace;var p=v.xRanges[c];var d=v.yRanges[f];t.xLabel=a(t.xa,[p[0],p[1]],h.xhoverformat);t.yLabel=a(t.ya,[d[0],d[1]],h.yhoverformat);return l}},43905:function(e,t,r){"use strict";e.exports={attributes:r(35361),supplyDefaults:r(93888),crossTraceDefaults:r(82222),calc:r(90757),plot:r(50347),layerName:"heatmaplayer",colorbar:r(61243),style:r(70035),hoverPoints:r(76128),eventData:r(84402),moduleType:"trace",name:"histogram2d",basePlotModule:r(93612),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},75238:function(e,t,r){"use strict";var n=r(73972);var a=r(71828);e.exports=function e(t,r,i,o){var s=i("x");var l=i("y");var u=a.minRowLength(s);var f=a.minRowLength(l);if(!u||!f){r.visible=false;return}r._length=Math.min(u,f);var c=n.getComponentMethod("calendars","handleTraceDefaults");c(t,r,["x","y"],o);var v=i("z")||i("marker.color");if(v)i("histfunc");i("histnorm");i("autobinx");i("autobiny")}},99066:function(e,t,r){"use strict";var n=r(35361);var a=r(70600);var i=r(50693);var o=r(12663).axisHoverFormat;var s=r(1426).extendFlat;e.exports=s({x:n.x,y:n.y,z:n.z,marker:n.marker,histnorm:n.histnorm,histfunc:n.histfunc,nbinsx:n.nbinsx,xbins:n.xbins,nbinsy:n.nbinsy,ybins:n.ybins,autobinx:n.autobinx,autobiny:n.autobiny,bingroup:n.bingroup,xbingroup:n.xbingroup,ybingroup:n.ybingroup,autocontour:a.autocontour,ncontours:a.ncontours,contours:a.contours,line:{color:a.line.color,width:s({},a.line.width,{dflt:.5}),dash:a.line.dash,smoothing:a.line.smoothing,editType:"plot"},xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z",1),hovertemplate:n.hovertemplate,texttemplate:a.texttemplate,textfont:a.textfont},i("",{cLetter:"z",editTypeOverride:"calc"}))},62654:function(e,t,r){"use strict";var n=r(71828);var a=r(75238);var i=r(67217);var o=r(8724);var s=r(58623);var l=r(99066);e.exports=function e(t,r,u,f){function c(e,a){return n.coerce(t,r,l,e,a)}function v(e){return n.coerce2(t,r,l,e)}a(t,r,c,f);if(r.visible===false)return;i(t,r,c,v);o(t,r,c,f);c("xhoverformat");c("yhoverformat");c("hovertemplate");if(r.contours&&r.contours.coloring==="heatmap"){s(c,f)}}},35902:function(e,t,r){"use strict";e.exports={attributes:r(99066),supplyDefaults:r(62654),crossTraceDefaults:r(82222),calc:r(27529),plot:r(29854).plot,layerName:"contourlayer",style:r(84426),colorbar:r(90654),hoverPoints:r(52421),moduleType:"trace",name:"histogram2dcontour",basePlotModule:r(93612),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},46291:function(e,t,r){"use strict";var n=r(5386).fF;var a=r(5386).si;var i=r(50693);var o=r(27670).Y;var s=r(34e3);var l=r(57564);var u=r(45802);var f=r(43473);var c=r(1426).extendFlat;var v=r(79952).u;e.exports={labels:l.labels,parents:l.parents,values:l.values,branchvalues:l.branchvalues,count:l.count,level:l.level,maxdepth:l.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:u.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:c({colors:l.marker.colors,line:l.marker.line,pattern:v,editType:"calc"},i("marker",{colorAttr:"colors",anim:false})),leaf:l.leaf,pathbar:u.pathbar,text:s.text,textinfo:l.textinfo,texttemplate:a({editType:"plot"},{keys:f.eventDataKeys.concat(["label","value"])}),hovertext:s.hovertext,hoverinfo:l.hoverinfo,hovertemplate:n({},{keys:f.eventDataKeys}),textfont:s.textfont,insidetextfont:s.insidetextfont,outsidetextfont:u.outsidetextfont,textposition:u.textposition,sort:s.sort,root:l.root,domain:o({name:"icicle",trace:true,editType:"calc"})}},96346:function(e,t,r){"use strict";var n=r(74875);t.name="icicle";t.plot=function(e,r,a,i){n.plotBasePlot(t.name,e,r,a,i)};t.clean=function(e,r,a,i){n.cleanBasePlot(t.name,e,r,a,i)}},46584:function(e,t,r){"use strict";var n=r(52147);t.y=function(e,t){return n.calc(e,t)};t.T=function(e){return n._runCrossTraceCalc("icicle",e)}},56524:function(e,t,r){"use strict";var n=r(71828);var a=r(46291);var i=r(7901);var o=r(27670).c;var s=r(90769).handleText;var l=r(97313).TEXTPAD;var u=r(37434).handleMarkerDefaults;var f=r(21081);var c=f.hasColorscale;var v=f.handleDefaults;e.exports=function e(t,r,f,h){function p(e,i){return n.coerce(t,r,a,e,i)}var d=p("labels");var g=p("parents");if(!d||!d.length||!g||!g.length){r.visible=false;return}var y=p("values");if(y&&y.length){p("branchvalues")}else{p("count")}p("level");p("maxdepth");p("tiling.orientation");p("tiling.flip");p("tiling.pad");var m=p("text");p("texttemplate");if(!r.texttemplate)p("textinfo",Array.isArray(m)?"text+label":"label");p("hovertext");p("hovertemplate");var x=p("pathbar.visible");var b="auto";s(t,r,h,p,b,{hasPathbar:x,moduleHasSelected:false,moduleHasUnselected:false,moduleHasConstrain:false,moduleHasCliponaxis:false,moduleHasTextangle:false,moduleHasInsideanchor:false});p("textposition");u(t,r,h,p);var _=r._hasColorscale=c(t,"marker","colors")||(t.marker||{}).coloraxis;if(_){v(t,r,h,p,{prefix:"marker.",cLetter:"c"})}p("leaf.opacity",_?1:.7);r._hovered={marker:{line:{width:2,color:i.contrast(h.paper_bgcolor)}}};if(x){p("pathbar.thickness",r.pathbar.textfont.size+2*l);p("pathbar.side");p("pathbar.edgeshape")}p("sort");p("root.color");o(r,h,p);r._length=null}},90666:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);var i=r(91424);var o=r(63893);var s=r(21538);var l=r(82454).styleOne;var u=r(43473);var f=r(2791);var c=r(83523);var v=r(24714).formatSliceLabel;var h=false;e.exports=function e(t,r,p,d,g){var y=g.width;var m=g.height;var x=g.viewX;var b=g.viewY;var _=g.pathSlice;var w=g.toMoveInsideSlice;var T=g.strTransform;var k=g.hasTransition;var A=g.handleSlicesExit;var M=g.makeUpdateSliceInterpolator;var S=g.makeUpdateTextInterpolator;var E=g.prevEntry;var L={};var C=t._context.staticPlot;var I=t._fullLayout;var P=r[0];var O=P.trace;var D=O.textposition.indexOf("left")!==-1;var z=O.textposition.indexOf("right")!==-1;var R=O.textposition.indexOf("bottom")!==-1;var F=s(p,[y,m],{flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,orientation:O.tiling.orientation,pad:{inner:O.tiling.pad},maxDepth:O._maxDepth});var B=F.descendants();var N=Infinity;var j=-Infinity;B.forEach((function(e){var t=e.depth;if(t>=O._maxDepth){e.x0=e.x1=(e.x0+e.x1)/2;e.y0=e.y1=(e.y0+e.y1)/2}else{N=Math.min(N,t);j=Math.max(j,t)}}));d=d.data(B,f.getPtId);O._maxVisibleLayers=isFinite(j)?j-N+1:0;d.enter().append("g").classed("slice",true);A(d,h,L,[y,m],_);d.order();var U=null;if(k&&E){var V=f.getPtId(E);d.each((function(e){if(U===null&&f.getPtId(e)===V){U={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1}}}))}var H=function(){return U||{x0:0,x1:y,y0:0,y1:m}};var q=d;if(k){q=q.transition().each("end",(function(){var e=n.select(this);f.setSliceCursor(e,t,{hideOnRoot:true,hideOnLeaves:false,isTransitioning:false})}))}q.each((function(e){e._x0=x(e.x0);e._x1=x(e.x1);e._y0=b(e.y0);e._y1=b(e.y1);e._hoverX=x(e.x1-O.tiling.pad),e._hoverY=R?b(e.y1-O.tiling.pad/2):b(e.y0+O.tiling.pad/2);var s=n.select(this);var d=a.ensureSingle(s,"path","surface",(function(e){e.style("pointer-events",C?"none":"all")}));if(k){d.transition().attrTween("d",(function(e){var t=M(e,h,H(),[y,m],{orientation:O.tiling.orientation,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1});return function(e){return _(t(e))}}))}else{d.attr("d",_)}s.call(c,p,t,r,{styleOne:l,eventDataKeys:u.eventDataKeys,transitionTime:u.CLICK_TRANSITION_TIME,transitionEasing:u.CLICK_TRANSITION_EASING}).call(f.setSliceCursor,t,{isTransitioning:t._transitioning});d.call(l,e,O,t,{hovered:false});if(e.x0===e.x1||e.y0===e.y1){e._text=""}else{e._text=v(e,p,O,r,I)||""}var g=a.ensureSingle(s,"g","slicetext");var A=a.ensureSingle(g,"text","",(function(e){e.attr("data-notex",1)}));var E=a.ensureUniformFontSize(t,f.determineTextFont(O,e,I.font));A.text(e._text||" ").classed("slicetext",true).attr("text-anchor",z?"end":D?"start":"middle").call(i.font,E).call(o.convertToTspans,t);e.textBB=i.bBox(A.node());e.transform=w(e,{fontSize:E.size});e.transform.fontSize=E.size;if(k){A.transition().attrTween("transform",(function(e){var t=S(e,h,H(),[y,m]);return function(e){return T(t(e))}}))}else{A.attr("transform",T(e))}}));return U}},69816:function(e,t,r){"use strict";e.exports={moduleType:"trace",name:"icicle",basePlotModule:r(96346),categories:[],animatable:true,attributes:r(46291),layoutAttributes:r(92894),supplyDefaults:r(56524),supplyLayoutDefaults:r(21070),calc:r(46584).y,crossTraceCalc:r(46584).T,plot:r(85596),style:r(82454).style,colorbar:r(4898),meta:{}}},92894:function(e){"use strict";e.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:true,editType:"calc"}}},21070:function(e,t,r){"use strict";var n=r(71828);var a=r(92894);e.exports=function e(t,r){function i(e,i){return n.coerce(t,r,a,e,i)}i("iciclecolorway",r.colorway);i("extendiciclecolors")}},21538:function(e,t,r){"use strict";var n=r(674);var a=r(14102);e.exports=function e(t,r,i){var o=i.flipX;var s=i.flipY;var l=i.orientation==="h";var u=i.maxDepth;var f=r[0];var c=r[1];if(u){f=(t.height+1)*r[0]/Math.min(t.height+1,u);c=(t.height+1)*r[1]/Math.min(t.height+1,u)}var v=n.partition().padding(i.pad.inner).size(l?[r[1],f]:[r[0],c])(t);if(l||o||s){a(v,r,{swapXY:l,flipX:o,flipY:s})}return v}},85596:function(e,t,r){"use strict";var n=r(80694);var a=r(90666);e.exports=function e(t,r,i,o){return n(t,r,i,o,{type:"icicle",drawDescendants:a})}},82454:function(e,t,r){"use strict";var n=r(39898);var a=r(7901);var i=r(71828);var o=r(72597).resizeText;var s=r(43467);function l(e){var t=e._fullLayout._iciclelayer.selectAll(".trace");o(e,t,"icicle");t.each((function(t){var r=n.select(this);var a=t[0];var i=a.trace;r.style("opacity",i.opacity);r.selectAll("path.surface").each((function(t){n.select(this).call(u,t,i,e)}))}))}function u(e,t,r,n){var o=t.data.data;var l=!t.children;var u=o.i;var f=i.castOption(r,u,"marker.line.color")||a.defaultLine;var c=i.castOption(r,u,"marker.line.width")||0;e.call(s,t,r,n).style("stroke-width",c).call(a.stroke,f).style("opacity",l?r.leaf.opacity:null)}e.exports={style:l,styleOne:u}},17230:function(e,t,r){"use strict";var n=r(9012);var a=r(5386).fF;var i=r(1426).extendFlat;var o=r(51877).colormodel;var s=["rgb","rgba","rgba256","hsl","hsla"];var l=[];var u=[];for(var f=0;f<s.length;f++){var c=o[s[f]];l.push("For the `"+s[f]+"` colormodel, it is ["+(c.zminDflt||c.min).join(", ")+"].");u.push("For the `"+s[f]+"` colormodel, it is ["+(c.zmaxDflt||c.max).join(", ")+"].")}e.exports=i({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:s,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",false],dflt:false,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:i({},n.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:a({},{keys:["z","color","colormodel"]}),transforms:undefined})},71113:function(e,t,r){"use strict";var n=r(71828);var a=r(51877);var i=r(92770);var o=r(89298);var s=r(71828).maxRowLength;var l=r(67395).A;e.exports=function e(t,r){var n;var a;if(r._hasZ){n=r.z.length;a=s(r.z)}else if(r._hasSource){var i=l(r.source);n=i.height;a=i.width}var u=o.getFromId(t,r.xaxis||"x");var f=o.getFromId(t,r.yaxis||"y");var v=u.d2c(r.x0)-r.dx/2;var h=f.d2c(r.y0)-r.dy/2;var p;var d=[v,v+a*r.dx];var g=[h,h+n*r.dy];if(u&&u.type==="log")for(p=0;p<a;p++)d.push(v+p*r.dx);if(f&&f.type==="log")for(p=0;p<n;p++)g.push(h+p*r.dy);r._extremes[u._id]=o.findExtremes(u,d);r._extremes[f._id]=o.findExtremes(f,g);r._scaler=c(r);var y={x0:v,y0:h,z:r.z,w:a,h:n};return[y]};function u(e,t,r,a){return function(i){return n.constrain((i-e)*t,r,a)}}function f(e,t){return function(r){return n.constrain(r,e,t)}}function c(e){var t=a.colormodel[e.colormodel];var r=t.colormodel||e.colormodel;var n=r.length;e._sArray=[];for(var o=0;o<n;o++){if(t.min[o]!==e.zmin[o]||t.max[o]!==e.zmax[o]){e._sArray.push(u(e.zmin[o],(t.max[o]-t.min[o])/(e.zmax[o]-e.zmin[o]),t.min[o],t.max[o]))}else{e._sArray.push(f(t.min[o],t.max[o]))}}return function(t){var r=t.slice(0,n);for(var a=0;a<n;a++){var o=r[a];if(!i(o))return false;r[a]=e._sArray[a](o)}return r}}},51877:function(e){"use strict";e.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(e){return e.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(e){var t=e.slice(0,3);t[1]=t[1]+"%";t[2]=t[2]+"%";return t},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(e){var t=e.slice(0,4);t[1]=t[1]+"%";t[2]=t[2]+"%";return t},suffix:["","%","%",""]}}}},13245:function(e,t,r){"use strict";var n=r(71828);var a=r(17230);var i=r(51877);var o=r(25095).IMAGE_URL_PREFIX;e.exports=function e(t,r){function s(e,i){return n.coerce(t,r,a,e,i)}s("source");if(r.source&&!r.source.match(o))delete r.source;r._hasSource=!!r.source;var l=s("z");r._hasZ=!(l===undefined||!l.length||!l[0]||!l[0].length);if(!r._hasZ&&!r._hasSource){r.visible=false;return}s("x0");s("y0");s("dx");s("dy");var u;if(r._hasZ){s("colormodel","rgb");u=i.colormodel[r.colormodel];s("zmin",u.zminDflt||u.min);s("zmax",u.zmaxDflt||u.max)}else if(r._hasSource){r.colormodel="rgba256";u=i.colormodel[r.colormodel];r.zmin=u.zminDflt;r.zmax=u.zmaxDflt}s("zsmooth");s("text");s("hovertext");s("hovertemplate");r._length=null}},30835:function(e){"use strict";e.exports=function e(t,r){if("xVal"in r)t.x=r.xVal;if("yVal"in r)t.y=r.yVal;if(r.xa)t.xaxis=r.xa;if(r.ya)t.yaxis=r.ya;t.color=r.color;t.colormodel=r.trace.colormodel;if(!t.z)t.z=r.color;return t}},67395:function(e,t,r){"use strict";var n=r(33575);var a=r(25095).IMAGE_URL_PREFIX;var i=r(12856).Buffer;t.A=function(e){var t=e.replace(a,"");var r=new i(t,"base64");return n(r)}},28749:function(e,t,r){"use strict";var n=r(30211);var a=r(71828);var i=r(51877);e.exports=function e(t,r,o){var s=t.cd[0];var l=s.trace;var u=t.xa;var f=t.ya;if(n.inbox(r-s.x0,r-(s.x0+s.w*l.dx),0)>0||n.inbox(o-s.y0,o-(s.y0+s.h*l.dy),0)>0){return}var c=Math.floor((r-s.x0)/l.dx);var v=Math.floor(Math.abs(o-s.y0)/l.dy);var h;if(l._hasZ){h=s.z[v][c]}else if(l._hasSource){h=l._canvas.el.getContext("2d",{willReadFrequently:true}).getImageData(c,v,1,1).data}if(!h)return;var p=s.hi||l.hoverinfo;var d;if(p){var g=p.split("+");if(g.indexOf("all")!==-1)g=["color"];if(g.indexOf("color")!==-1)d=true}var y=i.colormodel[l.colormodel];var m=y.colormodel||l.colormodel;var x=m.length;var b=l._scaler(h);var _=y.suffix;var w=[];if(l.hovertemplate||d){w.push("["+[b[0]+_[0],b[1]+_[1],b[2]+_[2]].join(", "));if(x===4)w.push(", "+b[3]+_[3]);w.push("]");w=w.join("");t.extraText=m.toUpperCase()+": "+w}var T;if(Array.isArray(l.hovertext)&&Array.isArray(l.hovertext[v])){T=l.hovertext[v][c]}else if(Array.isArray(l.text)&&Array.isArray(l.text[v])){T=l.text[v][c]}var k=f.c2p(s.y0+(v+.5)*l.dy);var A=s.x0+(c+.5)*l.dx;var M=s.y0+(v+.5)*l.dy;var S="["+h.slice(0,l.colormodel.length).join(", ")+"]";return[a.extendFlat(t,{index:[v,c],x0:u.c2p(s.x0+c*l.dx),x1:u.c2p(s.x0+(c+1)*l.dx),y0:k,y1:k,color:b,xVal:A,xLabelVal:A,yVal:M,yLabelVal:M,zLabelVal:S,text:T,hovertemplateLabels:{zLabel:S,colorLabel:w,"color[0]Label":b[0]+_[0],"color[1]Label":b[1]+_[1],"color[2]Label":b[2]+_[2],"color[3]Label":b[3]+_[3]}})]}},94507:function(e,t,r){"use strict";e.exports={attributes:r(17230),supplyDefaults:r(13245),calc:r(71113),plot:r(60775),style:r(12826),hoverPoints:r(28749),eventData:r(30835),moduleType:"trace",name:"image",basePlotModule:r(93612),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:false,meta:{}}},60775:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);var i=a.strTranslate;var o=r(77922);var s=r(51877);var l=r(3883);var u=r(32396).STYLE;e.exports=function e(t,r,f,c){var v=r.xaxis;var h=r.yaxis;var p=!t._context._exportedPlot&&l();a.makeTraceGroups(c,f,"im").each((function(e){var r=n.select(this);var l=e[0];var f=l.trace;var c=(f.zsmooth==="fast"||f.zsmooth===false&&p)&&!f._hasZ&&f._hasSource&&v.type==="linear"&&h.type==="linear";f._realImage=c;var d=l.z;var g=l.x0;var y=l.y0;var m=l.w;var x=l.h;var b=f.dx;var _=f.dy;var w,T,k,A,M,S;S=0;while(w===undefined&&S<m){w=v.c2p(g+S*b);S++}S=m;while(T===undefined&&S>0){T=v.c2p(g+S*b);S--}S=0;while(A===undefined&&S<x){A=h.c2p(y+S*_);S++}S=x;while(M===undefined&&S>0){M=h.c2p(y+S*_);S--}if(T<w){k=T;T=w;w=k}if(M<A){k=A;A=M;M=k}if(!c){var E=.5;w=Math.max(-E*v._length,w);T=Math.min((1+E)*v._length,T);A=Math.max(-E*h._length,A);M=Math.min((1+E)*h._length,M)}var L=Math.round(T-w);var C=Math.round(M-A);var I=L<=0||C<=0;if(I){var P=r.selectAll("image").data([]);P.exit().remove();return}function O(e){var t=document.createElement("canvas");t.width=L;t.height=C;var r=t.getContext("2d",{willReadFrequently:true});var n=function(e){return a.constrain(Math.round(v.c2p(g+e*b)-w),0,L)};var i=function(e){return a.constrain(Math.round(h.c2p(y+e*_)-A),0,C)};var o=s.colormodel[f.colormodel];var u=o.colormodel||f.colormodel;var c=o.fmt;var p;for(S=0;S<l.w;S++){var d=n(S);var m=n(S+1);if(m===d||isNaN(m)||isNaN(d))continue;for(var x=0;x<l.h;x++){var T=i(x);var k=i(x+1);if(k===T||isNaN(k)||isNaN(T)||!e(S,x))continue;p=f._scaler(e(S,x));if(p){r.fillStyle=u+"("+c(p).join(",")+")"}else{r.fillStyle="rgba(0,0,0,0)"}r.fillRect(d,T,m-d,k-T)}}return t}var D=r.selectAll("image").data([e]);D.enter().append("svg:image").attr({xmlns:o.svg,preserveAspectRatio:"none"});D.exit().remove();var z=f.zsmooth===false?u:"";if(c){var R=a.simpleMap(v.range,v.r2l);var F=a.simpleMap(h.range,h.r2l);var B=R[1]<R[0];var N=F[1]>F[0];if(B||N){var j=w+L/2;var U=A+C/2;z+="transform:"+i(j+"px",U+"px")+"scale("+(B?-1:1)+","+(N?-1:1)+")"+i(-j+"px",-U+"px")+";"}}D.attr("style",z);var V=new Promise((function(e){if(f._hasZ){e()}else if(f._hasSource){if(f._canvas&&f._canvas.el.width===m&&f._canvas.el.height===x&&f._canvas.source===f.source){e()}else{var t=document.createElement("canvas");t.width=m;t.height=x;var r=t.getContext("2d",{willReadFrequently:true});f._image=f._image||new Image;var n=f._image;n.onload=function(){r.drawImage(n,0,0);f._canvas={el:t,source:f.source};e()};n.setAttribute("src",f.source)}}})).then((function(){var e,t;if(f._hasZ){t=O((function(e,t){return d[t][e]}));e=t.toDataURL("image/png")}else if(f._hasSource){if(c){e=f.source}else{var r=f._canvas.el.getContext("2d",{willReadFrequently:true});var n=r.getImageData(0,0,m,x).data;t=O((function(e,t){var r=4*(t*m+e);return[n[r],n[r+1],n[r+2],n[r+3]]}));e=t.toDataURL("image/png")}}D.attr({"xlink:href":e,height:C,width:L,x:w,y:A})}));t._promises.push(V)}))}},12826:function(e,t,r){"use strict";var n=r(39898);e.exports=function e(t){n.select(t).selectAll(".im image").style("opacity",(function(e){return e[0].trace.opacity}))}},54846:function(e,t,r){"use strict";var n=r(1426).extendFlat;var a=r(1426).extendDeep;var i=r(30962).overrideAll;var o=r(41940);var s=r(22399);var l=r(27670).Y;var u=r(13838);var f=r(44467).templatedArray;var c=r(22372);var v=r(12663).descriptionOnlyNumbers;var h=o({editType:"plot",colorEditType:"plot"});var p={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:s.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"};var d={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"};var g=f("step",a({},p,{range:d}));e.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:true},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:l({name:"indicator",trace:true,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:n({},h,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:v("value")},font:n({},h,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:false},valueformat:{valType:"string",editType:"plot",description:v("value")},increasing:{symbol:{valType:"string",dflt:c.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:c.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:c.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:c.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:n({},h,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:a({},p,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:s.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:i({range:d,visible:n({},u.visible,{dflt:true}),tickmode:u.minor.tickmode,nticks:u.nticks,tick0:u.tick0,dtick:u.dtick,tickvals:u.tickvals,ticktext:u.ticktext,ticks:n({},u.ticks,{dflt:"outside"}),ticklen:u.ticklen,tickwidth:u.tickwidth,tickcolor:u.tickcolor,ticklabelstep:u.ticklabelstep,showticklabels:u.showticklabels,labelalias:u.labelalias,tickfont:o({}),tickangle:u.tickangle,tickformat:u.tickformat,tickformatstops:u.tickformatstops,tickprefix:u.tickprefix,showtickprefix:u.showtickprefix,ticksuffix:u.ticksuffix,showticksuffix:u.showticksuffix,separatethousands:u.separatethousands,exponentformat:u.exponentformat,minexponent:u.minexponent,showexponent:u.showexponent,editType:"plot"},"plot"),steps:g,threshold:{line:{color:n({},p.line.color,{}),width:n({},p.line.width,{dflt:1}),editType:"plot"},thickness:n({},p.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:false},editType:"plot"},editType:"plot"}}},15970:function(e,t,r){"use strict";var n=r(74875);t.name="indicator";t.plot=function(e,r,a,i){n.plotBasePlot(t.name,e,r,a,i)};t.clean=function(e,r,a,i){n.cleanBasePlot(t.name,e,r,a,i)}},24667:function(e){"use strict";function t(e,t){var r=[];var n=t.value;if(!(typeof t._lastValue==="number"))t._lastValue=t.value;var a=t._lastValue;var i=a;if(t._hasDelta&&typeof t.delta.reference==="number"){i=t.delta.reference}r[0]={y:n,lastY:a,delta:n-i,relativeDelta:(n-i)/i};return r}e.exports={calc:t}},84577:function(e){"use strict";e.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},94425:function(e,t,r){"use strict";var n=r(71828);var a=r(54846);var i=r(27670).c;var o=r(44467);var s=r(85501);var l=r(84577);var u=r(26218);var f=r(38701);var c=r(96115);var v=r(89426);function h(e,t,r,h){function d(r,i){return n.coerce(e,t,a,r,i)}i(t,h,d);d("mode");t._hasNumber=t.mode.indexOf("number")!==-1;t._hasDelta=t.mode.indexOf("delta")!==-1;t._hasGauge=t.mode.indexOf("gauge")!==-1;var g=d("value");t._range=[0,typeof g==="number"?1.5*g:1];var y=new Array(2);var m;if(t._hasNumber){d("number.valueformat");d("number.font.color",h.font.color);d("number.font.family",h.font.family);d("number.font.size");if(t.number.font.size===undefined){t.number.font.size=l.defaultNumberFontSize;y[0]=true}d("number.prefix");d("number.suffix");m=t.number.font.size}var x;if(t._hasDelta){d("delta.font.color",h.font.color);d("delta.font.family",h.font.family);d("delta.font.size");if(t.delta.font.size===undefined){t.delta.font.size=(t._hasNumber?.5:1)*(m||l.defaultNumberFontSize);y[1]=true}d("delta.reference",t.value);d("delta.relative");d("delta.valueformat",t.delta.relative?"2%":"");d("delta.increasing.symbol");d("delta.increasing.color");d("delta.decreasing.symbol");d("delta.decreasing.color");d("delta.position");d("delta.prefix");d("delta.suffix");x=t.delta.font.size}t._scaleNumbers=(!t._hasNumber||y[0])&&(!t._hasDelta||y[1])||false;d("title.font.color",h.font.color);d("title.font.family",h.font.family);d("title.font.size",.25*(m||x||l.defaultNumberFontSize));d("title.text");var b,_,w,T;function k(e,t){return n.coerce(b,_,a.gauge,e,t)}function A(e,t){return n.coerce(w,T,a.gauge.axis,e,t)}if(t._hasGauge){b=e.gauge;if(!b)b={};_=o.newContainer(t,"gauge");k("shape");var M=t._isBullet=t.gauge.shape==="bullet";if(!M){d("title.align","center")}var S=t._isAngular=t.gauge.shape==="angular";if(!S){d("align","center")}k("bgcolor",h.paper_bgcolor);k("borderwidth");k("bordercolor");k("bar.color");k("bar.line.color");k("bar.line.width");var E=l.valueThickness*(t.gauge.shape==="bullet"?.5:1);k("bar.thickness",E);s(b,_,{name:"steps",handleItemDefaults:p});k("threshold.value");k("threshold.thickness");k("threshold.line.width");k("threshold.line.color");w={};if(b)w=b.axis||{};T=o.newContainer(_,"axis");A("visible");t._range=A("range",t._range);var L={outerTicks:true};u(w,T,A,"linear");v(w,T,A,"linear",L);c(w,T,A,"linear",L);f(w,T,A,L)}else{d("title.align","center");d("align","center");t._isAngular=t._isBullet=false}t._length=null}function p(e,t){function r(r,i){return n.coerce(e,t,a.gauge.steps,r,i)}r("color");r("line.color");r("line.width");r("range");r("thickness")}e.exports={supplyDefaults:h}},15154:function(e,t,r){"use strict";e.exports={moduleType:"trace",name:"indicator",basePlotModule:r(15970),categories:["svg","noOpacity","noHover"],animatable:true,attributes:r(54846),supplyDefaults:r(94425).supplyDefaults,calc:r(24667).calc,plot:r(75634),meta:{}}},75634:function(e,t,r){"use strict";var n=r(39898);var a=r(81684).sX;var i=r(81684).k4;var o=r(71828);var s=o.strScale;var l=o.strTranslate;var u=o.rad2deg;var f=r(18783).MID_SHIFT;var c=r(91424);var v=r(84577);var h=r(63893);var p=r(89298);var d=r(71453);var g=r(52830);var y=r(13838);var m=r(7901);var x={left:"start",center:"middle",right:"end"};var b={left:0,center:.5,right:1};var _=/[yzafpnmkMGTPEZY]/;function w(e){return e&&e.duration>0}e.exports=function e(t,r,a,i){var s=t._fullLayout;var u;if(w(a)){if(i){u=i()}}o.makeTraceGroups(s._indicatorlayer,r,"trace").each((function(e){var r=e[0];var i=r.trace;var o=n.select(this);var f=i._hasGauge;var p=i._isAngular;var d=i._isBullet;var g=i.domain;var y={w:s._size.w*(g.x[1]-g.x[0]),h:s._size.h*(g.y[1]-g.y[0]),l:s._size.l+s._size.w*g.x[0],r:s._size.r+s._size.w*(1-g.x[1]),t:s._size.t+s._size.h*(1-g.y[1]),b:s._size.b+s._size.h*g.y[0]};var m=y.l+y.w/2;var _=y.t+y.h/2;var w=Math.min(y.w/2,y.h);var M=v.innerRadius*w;var S,E,I;var P=i.align||"center";E=_;if(!f){S=y.l+b[P]*y.w;I=function(e){return L(e,y.w,y.h)}}else{if(p){S=m;E=_+w/2;I=function(e){return C(e,.9*M)}}if(d){var O=v.bulletPadding;var D=1-v.bulletNumberDomainSize+O;S=y.l+(D+(1-D)*b[P])*y.w;I=function(e){return L(e,(v.bulletNumberDomainSize-O)*y.w,y.h)}}}A(t,o,e,{numbersX:S,numbersY:E,numbersScaler:I,transitionOpts:a,onComplete:u});var z,R;if(f){z={range:i.gauge.axis.range,color:i.gauge.bgcolor,line:{color:i.gauge.bordercolor,width:0},thickness:1};R={range:i.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:i.gauge.bordercolor,width:i.gauge.borderwidth},thickness:1}}var F=o.selectAll("g.angular").data(p?e:[]);F.exit().remove();var B=o.selectAll("g.angularaxis").data(p?e:[]);B.exit().remove();if(p){k(t,o,e,{radius:w,innerRadius:M,gauge:F,layer:B,size:y,gaugeBg:z,gaugeOutline:R,transitionOpts:a,onComplete:u})}var N=o.selectAll("g.bullet").data(d?e:[]);N.exit().remove();var j=o.selectAll("g.bulletaxis").data(d?e:[]);j.exit().remove();if(d){T(t,o,e,{gauge:N,layer:j,size:y,gaugeBg:z,gaugeOutline:R,transitionOpts:a,onComplete:u})}var U=o.selectAll("text.title").data(e);U.exit().remove();U.enter().append("text").classed("title",true);U.attr("text-anchor",(function(){return d?x.right:x[i.title.align]})).text(i.title.text).call(c.font,i.title.font).call(h.convertToTspans,t);U.attr("transform",(function(){var e=y.l+y.w*b[i.title.align];var t;var r=v.titlePadding;var n=c.bBox(U.node());if(f){if(p){if(i.gauge.axis.visible){var a=c.bBox(B.node());t=a.top-r-n.bottom}else{t=y.t+y.h/2-w/2-n.bottom-r}}if(d){t=E-(n.top+n.bottom)/2;e=y.l-v.bulletPadding*y.w}}else{t=i._numbersTop-r-n.bottom}return l(e,t)}))}))};function T(e,t,r,n){var a=r[0].trace;var i=n.gauge;var o=n.layer;var s=n.gaugeBg;var u=n.gaugeOutline;var f=n.size;var c=a.domain;var h=n.transitionOpts;var d=n.onComplete;var g,y,x,b,_;i.enter().append("g").classed("bullet",true);i.attr("transform",l(f.l,f.t));o.enter().append("g").classed("bulletaxis",true).classed("crisp",true);o.selectAll("g."+"xbulletaxis"+"tick,path,text").remove();var T=f.h;var k=a.gauge.bar.thickness*T;var A=c.x[0];var S=c.x[0]+(c.x[1]-c.x[0])*(a._hasNumber||a._hasDelta?1-v.bulletNumberDomainSize:1);g=E(e,a.gauge.axis);g._id="xbulletaxis";g.domain=[A,S];g.setScale();y=p.calcTicks(g);x=p.makeTransTickFn(g);b=p.getTickSigns(g)[2];_=f.t+f.h;if(g.visible){p.drawTicks(e,g,{vals:g.ticks==="inside"?p.clipEnds(g,y):y,layer:o,path:p.makeTickPath(g,_,b),transFn:x});p.drawLabels(e,g,{vals:y,layer:o,transFn:x,labelFns:p.makeLabelFns(g,_)})}function L(e){e.attr("width",(function(e){return Math.max(0,g.c2p(e.range[1])-g.c2p(e.range[0]))})).attr("x",(function(e){return g.c2p(e.range[0])})).attr("y",(function(e){return.5*(1-e.thickness)*T})).attr("height",(function(e){return e.thickness*T}))}var C=[s].concat(a.gauge.steps);var I=i.selectAll("g.bg-bullet").data(C);I.enter().append("g").classed("bg-bullet",true).append("rect");I.select("rect").call(L).call(M);I.exit().remove();var P=i.selectAll("g.value-bullet").data([a.gauge.bar]);P.enter().append("g").classed("value-bullet",true).append("rect");P.select("rect").attr("height",k).attr("y",(T-k)/2).call(M);if(w(h)){P.select("rect").transition().duration(h.duration).ease(h.easing).each("end",(function(){d&&d()})).each("interrupt",(function(){d&&d()})).attr("width",Math.max(0,g.c2p(Math.min(a.gauge.axis.range[1],r[0].y))))}else{P.select("rect").attr("width",typeof r[0].y==="number"?Math.max(0,g.c2p(Math.min(a.gauge.axis.range[1],r[0].y))):0)}P.exit().remove();var O=r.filter((function(){return a.gauge.threshold.value||a.gauge.threshold.value===0}));var D=i.selectAll("g.threshold-bullet").data(O);D.enter().append("g").classed("threshold-bullet",true).append("line");D.select("line").attr("x1",g.c2p(a.gauge.threshold.value)).attr("x2",g.c2p(a.gauge.threshold.value)).attr("y1",(1-a.gauge.threshold.thickness)/2*T).attr("y2",(1-(1-a.gauge.threshold.thickness)/2)*T).call(m.stroke,a.gauge.threshold.line.color).style("stroke-width",a.gauge.threshold.line.width);D.exit().remove();var z=i.selectAll("g.gauge-outline").data([u]);z.enter().append("g").classed("gauge-outline",true).append("rect");z.select("rect").call(L).call(M);z.exit().remove()}function k(e,t,r,a){var i=r[0].trace;var o=a.size;var s=a.radius;var c=a.innerRadius;var v=a.gaugeBg;var h=a.gaugeOutline;var d=[o.l+o.w/2,o.t+o.h/2+s/2];var g=a.gauge;var y=a.layer;var m=a.transitionOpts;var x=a.onComplete;var b=Math.PI/2;function _(e){var t=i.gauge.axis.range[0];var r=i.gauge.axis.range[1];var n=(e-t)/(r-t)*Math.PI-b;if(n<-b)return-b;if(n>b)return b;return n}function T(e){return n.svg.arc().innerRadius((c+s)/2-e/2*(s-c)).outerRadius((c+s)/2+e/2*(s-c)).startAngle(-b)}function k(e){e.attr("d",(function(e){return T(e.thickness).startAngle(_(e.range[0])).endAngle(_(e.range[1]))()}))}var A,L,C,I;g.enter().append("g").classed("angular",true);g.attr("transform",l(d[0],d[1]));y.enter().append("g").classed("angularaxis",true).classed("crisp",true);y.selectAll("g."+"xangularaxis"+"tick,path,text").remove();A=E(e,i.gauge.axis);A.type="linear";A.range=i.gauge.axis.range;A._id="xangularaxis";A.ticklabeloverflow="allow";A.setScale();var P=function(e){return(A.range[0]-e.x)/(A.range[1]-A.range[0])*Math.PI+Math.PI};var O={};var D=p.makeLabelFns(A,0);var z=D.labelStandoff;O.xFn=function(e){var t=P(e);return Math.cos(t)*z};O.yFn=function(e){var t=P(e);var r=Math.sin(t)>0?.2:1;return-Math.sin(t)*(z+e.fontSize*r)+Math.abs(Math.cos(t))*(e.fontSize*f)};O.anchorFn=function(e){var t=P(e);var r=Math.cos(t);return Math.abs(r)<.1?"middle":r>0?"start":"end"};O.heightFn=function(e,t,r){var n=P(e);return-.5*(1+Math.sin(n))*r};var R=function(e){return l(d[0]+s*Math.cos(e),d[1]-s*Math.sin(e))};C=function(e){return R(P(e))};var F=function(e){var t=P(e);return R(t)+"rotate("+-u(t)+")"};L=p.calcTicks(A);I=p.getTickSigns(A)[2];if(A.visible){I=A.ticks==="inside"?-1:1;var B=(A.linewidth||1)/2;p.drawTicks(e,A,{vals:L,layer:y,path:"M"+I*B+",0h"+I*A.ticklen,transFn:F});p.drawLabels(e,A,{vals:L,layer:y,transFn:C,labelFns:O})}var N=[v].concat(i.gauge.steps);var j=g.selectAll("g.bg-arc").data(N);j.enter().append("g").classed("bg-arc",true).append("path");j.select("path").call(k).call(M);j.exit().remove();var U=T(i.gauge.bar.thickness);var V=g.selectAll("g.value-arc").data([i.gauge.bar]);V.enter().append("g").classed("value-arc",true).append("path");var H=V.select("path");if(w(m)){H.transition().duration(m.duration).ease(m.easing).each("end",(function(){x&&x()})).each("interrupt",(function(){x&&x()})).attrTween("d",S(U,_(r[0].lastY),_(r[0].y)));i._lastValue=r[0].y}else{H.attr("d",typeof r[0].y==="number"?U.endAngle(_(r[0].y)):"M0,0Z")}H.call(M);V.exit().remove();N=[];var q=i.gauge.threshold.value;if(q||q===0){N.push({range:[q,q],color:i.gauge.threshold.color,line:{color:i.gauge.threshold.line.color,width:i.gauge.threshold.line.width},thickness:i.gauge.threshold.thickness})}var G=g.selectAll("g.threshold-arc").data(N);G.enter().append("g").classed("threshold-arc",true).append("path");G.select("path").call(k).call(M);G.exit().remove();var Z=g.selectAll("g.gauge-outline").data([h]);Z.enter().append("g").classed("gauge-outline",true).append("path");Z.select("path").call(k).call(M);Z.exit().remove()}function A(e,t,r,a){var u=r[0].trace;var f=a.numbersX;var v=a.numbersY;var d=u.align||"center";var g=x[d];var y=a.transitionOpts;var T=a.onComplete;var k=o.ensureSingle(t,"g","numbers");var A,M;var S;var L=[];if(u._hasNumber)L.push("number");if(u._hasDelta){L.push("delta");if(u.delta.position==="left")L.reverse()}var C=k.selectAll("text").data(L);C.enter().append("text");C.attr("text-anchor",(function(){return g})).attr("class",(function(e){return e})).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null);C.exit().remove();function O(t,r,n,a){if(t.match("s")&&n>=0!==a>=0&&!r(n).slice(-1).match(_)&&!r(a).slice(-1).match(_)){var i=t.slice().replace("s","f").replace(/\d+/,(function(e){return parseInt(e)-1}));var o=E(e,{tickformat:i});return function(e){if(Math.abs(e)<1)return p.tickText(o,e).text;return r(e)}}else{return r}}function D(){var t=E(e,{tickformat:u.number.valueformat},u._range);t.setScale();p.prepTicks(t);var a=function(e){return p.tickText(t,e).text};var o=u.number.suffix;var s=u.number.prefix;var l=k.select("text.number");function f(){var t=typeof r[0].y==="number"?s+a(r[0].y)+o:"-";l.text(t).call(c.font,u.number.font).call(h.convertToTspans,e)}if(w(y)){l.transition().duration(y.duration).ease(y.easing).each("end",(function(){f();T&&T()})).each("interrupt",(function(){f();T&&T()})).attrTween("text",(function(){var e=n.select(this);var t=i(r[0].lastY,r[0].y);u._lastValue=r[0].y;var l=O(u.number.valueformat,a,r[0].lastY,r[0].y);return function(r){e.text(s+l(t(r))+o)}}))}else{f()}A=I(s+a(r[0].y)+o,u.number.font,g,e);return l}function z(){var t=E(e,{tickformat:u.delta.valueformat},u._range);t.setScale();p.prepTicks(t);var a=function(e){return p.tickText(t,e).text};var o=u.delta.suffix;var s=u.delta.prefix;var l=function(e){var t=u.delta.relative?e.relativeDelta:e.delta;return t};var f=function(e,t){if(e===0||typeof e!=="number"||isNaN(e))return"-";return(e>0?u.delta.increasing.symbol:u.delta.decreasing.symbol)+s+t(e)+o};var v=function(e){return e.delta>=0?u.delta.increasing.color:u.delta.decreasing.color};if(u._deltaLastValue===undefined){u._deltaLastValue=l(r[0])}var d=k.select("text.delta");d.call(c.font,u.delta.font).call(m.fill,v({delta:u._deltaLastValue}));function x(){d.text(f(l(r[0]),a)).call(m.fill,v(r[0])).call(h.convertToTspans,e)}if(w(y)){d.transition().duration(y.duration).ease(y.easing).tween("text",(function(){var e=n.select(this);var t=l(r[0]);var o=u._deltaLastValue;var s=O(u.delta.valueformat,a,o,t);var c=i(o,t);u._deltaLastValue=t;return function(t){e.text(f(c(t),s));e.call(m.fill,v({delta:c(t)}))}})).each("end",(function(){x();T&&T()})).each("interrupt",(function(){x();T&&T()}))}else{x()}M=I(f(l(r[0]),a),u.delta.font,g,e);return d}var R=u.mode+u.align;var F;if(u._hasDelta){F=z();R+=u.delta.position+u.delta.font.size+u.delta.font.family+u.delta.valueformat;R+=u.delta.increasing.symbol+u.delta.decreasing.symbol;S=M}if(u._hasNumber){D();R+=u.number.font.size+u.number.font.family+u.number.valueformat+u.number.suffix+u.number.prefix;S=A}if(u._hasDelta&&u._hasNumber){var B=[(A.left+A.right)/2,(A.top+A.bottom)/2];var N=[(M.left+M.right)/2,(M.top+M.bottom)/2];var j,U;var V=.75*u.delta.font.size;if(u.delta.position==="left"){j=P(u,"deltaPos",0,-1*(A.width*b[u.align]+M.width*(1-b[u.align])+V),R,Math.min);U=B[1]-N[1];S={width:A.width+M.width+V,height:Math.max(A.height,M.height),left:M.left+j,right:A.right,top:Math.min(A.top,M.top+U),bottom:Math.max(A.bottom,M.bottom+U)}}if(u.delta.position==="right"){j=P(u,"deltaPos",0,A.width*(1-b[u.align])+M.width*b[u.align]+V,R,Math.max);U=B[1]-N[1];S={width:A.width+M.width+V,height:Math.max(A.height,M.height),left:A.left,right:M.right+j,top:Math.min(A.top,M.top+U),bottom:Math.max(A.bottom,M.bottom+U)}}if(u.delta.position==="bottom"){j=null;U=M.height;S={width:Math.max(A.width,M.width),height:A.height+M.height,left:Math.min(A.left,M.left),right:Math.max(A.right,M.right),top:A.bottom-A.height,bottom:A.bottom+M.height}}if(u.delta.position==="top"){j=null;U=A.top;S={width:Math.max(A.width,M.width),height:A.height+M.height,left:Math.min(A.left,M.left),right:Math.max(A.right,M.right),top:A.bottom-A.height-M.height,bottom:A.bottom}}F.attr({dx:j,dy:U})}if(u._hasNumber||u._hasDelta){k.attr("transform",(function(){var e=a.numbersScaler(S);R+=e[2];var t=P(u,"numbersScale",1,e[0],R,Math.min);var r;if(!u._scaleNumbers)t=1;if(u._isAngular){r=v-t*S.bottom}else{r=v-t*(S.top+S.bottom)/2}u._numbersTop=t*S.top+r;var n=S[d];if(d==="center")n=(S.left+S.right)/2;var i=f-t*n;i=P(u,"numbersTranslate",0,i,R,Math.max);return l(i,r)+s(t)}))}}function M(e){e.each((function(e){m.stroke(n.select(this),e.line.color)})).each((function(e){m.fill(n.select(this),e.color)})).style("stroke-width",(function(e){return e.line.width}))}function S(e,t,r){return function(){var n=a(t,r);return function(t){return e.endAngle(n(t))()}}}function E(e,t,r){var n=e._fullLayout;var a=o.extendFlat({type:"linear",ticks:"outside",range:r,showline:true},t);var i={type:"linear",_id:"x"+t._id};var s={letter:"x",font:n.font,noHover:true,noTickson:true};function l(e,t){return o.coerce(a,i,y,e,t)}d(a,i,l,s,n);g(a,i,l,s);return i}function L(e,t,r){var n=Math.min(t/e.width,r/e.height);return[n,e,t+"x"+r]}function C(e,t){var r=Math.sqrt(e.width/2*(e.width/2)+e.height*e.height);var n=t/r;return[n,e,t]}function I(e,t,r,a){var i=document.createElementNS("http://www.w3.org/2000/svg","text");var o=n.select(i);o.text(e).attr("x",0).attr("y",0).attr("text-anchor",r).attr("data-unformatted",e).call(h.convertToTspans,a).call(c.font,t);return c.bBox(o.node())}function P(e,t,r,n,a,i){var s="_cache"+t;if(!(e[s]&&e[s].key===a)){e[s]={key:a,value:r}}var l=o.aggNums(i,null,[e[s].value,n],2);e[s].value=l;return l}},16249:function(e,t,r){"use strict";var n=r(50693);var a=r(12663).axisHoverFormat;var i=r(5386).fF;var o=r(2418);var s=r(9012);var l=r(1426).extendFlat;var u=r(30962).overrideAll;function f(e){return{show:{valType:"boolean",dflt:false},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function c(e){return{show:{valType:"boolean",dflt:true},fill:{valType:"number",min:0,max:1,dflt:1}}}var v=e.exports=u(l({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:true},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:false},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:f("x"),y:f("y"),z:f("z")},caps:{x:c("x"),y:c("y"),z:c("z")},text:{valType:"string",dflt:"",arrayOk:true},hovertext:{valType:"string",dflt:"",arrayOk:true},hovertemplate:i(),xhoverformat:a("x"),yhoverformat:a("y"),zhoverformat:a("z"),valuehoverformat:a("value",1),showlegend:l({},s.showlegend,{dflt:false})},n("",{colorAttr:"`value`",showScaleDflt:true,editTypeOverride:"calc"}),{opacity:o.opacity,lightposition:o.lightposition,lighting:o.lighting,flatshading:o.flatshading,contour:o.contour,hoverinfo:l({},s.hoverinfo)}),"calc","nested");v.flatshading.dflt=true;v.lighting.facenormalsepsilon.dflt=0;v.x.editType=v.y.editType=v.z.editType=v.value.editType="calc+clearAxisTypes";v.transforms=undefined},56959:function(e,t,r){"use strict";var n=r(78803);var a=r(88489).processGrid;var i=r(88489).filter;e.exports=function e(t,r){r._len=Math.min(r.x.length,r.y.length,r.z.length,r.value.length);r._x=i(r.x,r._len);r._y=i(r.y,r._len);r._z=i(r.z,r._len);r._value=i(r.value,r._len);var o=a(r);r._gridFill=o.fill;r._Xs=o.Xs;r._Ys=o.Ys;r._Zs=o.Zs;r._len=o.len;var s=Infinity;var l=-Infinity;for(var u=0;u<r._len;u++){var f=r._value[u];s=Math.min(s,f);l=Math.max(l,f)}r._minValues=s;r._maxValues=l;r._vMin=r.isomin===undefined||r.isomin===null?s:r.isomin;r._vMax=r.isomax===undefined||r.isomin===null?l:r.isomax;n(t,r,{vals:[r._vMin,r._vMax],containerStr:"",cLetter:"c"})}},22674:function(e,t,r){"use strict";var n=r(9330).gl_mesh3d;var a=r(81697).parseColorScale;var i=r(78614);var o=r(21081).extractOpts;var s=r(90060);var l=function(e,t){for(var r=t.length-1;r>0;r--){var n=Math.min(t[r],t[r-1]);var a=Math.max(t[r],t[r-1]);if(a>n&&n<e&&e<=a){return{id:r,distRatio:(a-e)/(a-n)}}}return{id:0,distRatio:0}};function u(e,t,r){this.scene=e;this.uid=r;this.mesh=t;this.name="";this.data=null;this.showContour=false}var f=u.prototype;f.handlePick=function(e){if(e.object===this.mesh){var t=e.data.index;var r=this.data._meshX[t];var n=this.data._meshY[t];var a=this.data._meshZ[t];var i=this.data._Ys.length;var o=this.data._Zs.length;var s=l(r,this.data._Xs).id;var u=l(n,this.data._Ys).id;var f=l(a,this.data._Zs).id;var c=e.index=f+o*u+o*i*s;e.traceCoordinate=[this.data._meshX[c],this.data._meshY[c],this.data._meshZ[c],this.data._value[c]];var v=this.data.hovertext||this.data.text;if(Array.isArray(v)&&v[c]!==undefined){e.textLabel=v[c]}else if(v){e.textLabel=v}return true}};f.update=function(e){var t=this.scene;var r=t.fullSceneLayout;this.data=v(e);function n(e,t,r,n){return t.map((function(t){return e.d2l(t,0,n)*r}))}var l=s(n(r.xaxis,e._meshX,t.dataScale[0],e.xcalendar),n(r.yaxis,e._meshY,t.dataScale[1],e.ycalendar),n(r.zaxis,e._meshZ,t.dataScale[2],e.zcalendar));var u=s(e._meshI,e._meshJ,e._meshK);var f={positions:l,cells:u,lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,contourEnable:e.contour.show,contourColor:i(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading};var c=o(e);f.vertexIntensity=e._meshIntensity;f.vertexIntensityBounds=[c.min,c.max];f.colormap=a(e);this.mesh.update(f)};f.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};var c=["xyz","xzy","yxz","yzx","zxy","zyx"];function v(e){e._meshI=[];e._meshJ=[];e._meshK=[];var t=e.surface.show;var r=e.spaceframe.show;var n=e.surface.fill;var a=e.spaceframe.fill;var i=false;var o=false;var s=0;var u;var f;var v=e._Xs;var h=e._Ys;var p=e._Zs;var d=v.length;var g=h.length;var y=p.length;var m=c.indexOf(e._gridFill.replace(/-/g,"").replace(/\+/g,""));var x=function(e,t,r){switch(m){case 5:return r+y*t+y*g*e;case 4:return r+y*e+y*d*t;case 3:return t+g*r+g*y*e;case 2:return t+g*e+g*d*r;case 1:return e+d*r+d*y*t;default:return e+d*t+d*g*r}};var b=e._minValues;var _=e._maxValues;var w=e._vMin;var T=e._vMax;var k;var A;var M;var S;function E(e,t,r){var n=S.length;for(var a=f;a<n;a++){if(e===k[a]&&t===A[a]&&r===M[a]){return a}}return-1}function L(){f=u}function C(){k=[];A=[];M=[];S=[];u=0;L()}function I(e,t,r,n){k.push(e);A.push(t);M.push(r);S.push(n);u++;return u-1}function P(t,r,n){e._meshI.push(t);e._meshJ.push(r);e._meshK.push(n);s++;return s-1}function O(e,t,r){var n=[];for(var a=0;a<e.length;a++){n[a]=(e[a]+t[a]+r[a])/3}return n}function D(e,t,r){var n=[];for(var a=0;a<e.length;a++){n[a]=e[a]*(1-r)+r*t[a]}return n}var z;function R(e){z=e}function F(e,t){var r=e[0];var n=e[1];var a=e[2];var i=O(r,n,a);var o=Math.sqrt(1-z);var s=D(i,r,o);var l=D(i,n,o);var u=D(i,a,o);var f=t[0];var c=t[1];var v=t[2];return{xyzv:[[r,n,l],[l,s,r],[n,a,u],[u,l,n],[a,r,s],[s,u,a]],abc:[[f,c,-1],[-1,-1,f],[c,v,-1],[-1,-1,c],[v,f,-1],[-1,-1,v]]}}function B(e,t){if(e==="all"||e===null)return true;return e.indexOf(t)>-1}function N(e,t){if(e===null)return t;return e}function j(e,t,r){L();var n=[t];var a=[r];if(z>=1){n=[t];a=[r]}else if(z>0){var i=F(t,r);n=i.xyzv;a=i.abc}for(var o=0;o<n.length;o++){t=n[o];r=a[o];var s=[];for(var l=0;l<3;l++){var u=t[l][0];var f=t[l][1];var c=t[l][2];var v=t[l][3];var h=r[l]>-1?r[l]:E(u,f,c);if(h>-1){s[l]=h}else{s[l]=I(u,f,c,N(e,v))}}P(s[0],s[1],s[2])}}function U(e,t,r){var n=function(n,a,i){j(e,[t[n],t[a],t[i]],[r[n],r[a],r[i]])};n(0,1,2);n(2,3,0)}function V(e,t,r){var n=function(n,a,i){j(e,[t[n],t[a],t[i]],[r[n],r[a],r[i]])};n(0,1,2);n(3,0,1);n(2,3,0);n(1,2,3)}function H(e,t,r,n){var a=e[3];if(a<r)a=r;if(a>n)a=n;var i=(e[3]-a)/(e[3]-t[3]+1e-9);var o=[];for(var s=0;s<4;s++){o[s]=(1-i)*e[s]+i*t[s]}return o}function q(e,t,r){return e>=t&&e<=r}function G(e){var t=.001*(T-w);return e>=w-t&&e<=T+t}function Z(t){var r=[];for(var n=0;n<4;n++){var a=t[n];r.push([e._x[a],e._y[a],e._z[a],e._value[a]])}return r}var Y=3;function W(e,t,r,n,a,i){if(!i)i=1;r=[-1,-1,-1];var o=false;var s=[q(t[0][3],n,a),q(t[1][3],n,a),q(t[2][3],n,a)];if(!s[0]&&!s[1]&&!s[2]){return false}var l=function(e,t,r){if(G(t[0][3])&&G(t[1][3])&&G(t[2][3])){j(e,t,r);return true}else if(i<Y){return W(e,t,r,w,T,++i)}return false};if(s[0]&&s[1]&&s[2]){return l(e,t,r)||o}var u=false;[[0,1,2],[2,0,1],[1,2,0]].forEach((function(i){if(s[i[0]]&&s[i[1]]&&!s[i[2]]){var f=t[i[0]];var c=t[i[1]];var v=t[i[2]];var h=H(v,f,n,a);var p=H(v,c,n,a);o=l(e,[p,h,f],[-1,-1,r[i[0]]])||o;o=l(e,[f,c,p],[r[i[0]],r[i[1]],-1])||o;u=true}}));if(u)return o;[[0,1,2],[1,2,0],[2,0,1]].forEach((function(i){if(s[i[0]]&&!s[i[1]]&&!s[i[2]]){var f=t[i[0]];var c=t[i[1]];var v=t[i[2]];var h=H(c,f,n,a);var p=H(v,f,n,a);o=l(e,[p,h,f],[-1,-1,r[i[0]]])||o;u=true}}));return o}function X(e,t,r,n){var a=false;var i=Z(t);var s=[q(i[0][3],r,n),q(i[1][3],r,n),q(i[2][3],r,n),q(i[3][3],r,n)];if(!s[0]&&!s[1]&&!s[2]&&!s[3]){return a}if(s[0]&&s[1]&&s[2]&&s[3]){if(o){a=V(e,i,t)||a}return a}var l=false;[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach((function(u){if(s[u[0]]&&s[u[1]]&&s[u[2]]&&!s[u[3]]){var f=i[u[0]];var c=i[u[1]];var v=i[u[2]];var h=i[u[3]];if(o){a=j(e,[f,c,v],[t[u[0]],t[u[1]],t[u[2]]])||a}else{var p=H(h,f,r,n);var d=H(h,c,r,n);var g=H(h,v,r,n);a=j(null,[p,d,g],[-1,-1,-1])||a}l=true}}));if(l)return a;[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach((function(u){if(s[u[0]]&&s[u[1]]&&!s[u[2]]&&!s[u[3]]){var f=i[u[0]];var c=i[u[1]];var v=i[u[2]];var h=i[u[3]];var p=H(v,f,r,n);var d=H(v,c,r,n);var g=H(h,c,r,n);var y=H(h,f,r,n);if(o){a=j(e,[f,y,p],[t[u[0]],-1,-1])||a;a=j(e,[c,d,g],[t[u[1]],-1,-1])||a}else{a=U(null,[p,d,g,y],[-1,-1,-1,-1])||a}l=true}}));if(l)return a;[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach((function(u){if(s[u[0]]&&!s[u[1]]&&!s[u[2]]&&!s[u[3]]){var f=i[u[0]];var c=i[u[1]];var v=i[u[2]];var h=i[u[3]];var p=H(c,f,r,n);var d=H(v,f,r,n);var g=H(h,f,r,n);if(o){a=j(e,[f,p,d],[t[u[0]],-1,-1])||a;a=j(e,[f,d,g],[t[u[0]],-1,-1])||a;a=j(e,[f,g,p],[t[u[0]],-1,-1])||a}else{a=j(null,[p,d,g],[-1,-1,-1])||a}l=true}}));return a}function J(e,t,r,n,a,s,l,u,f,c,v){var h=false;if(i){if(B(e,"A")){h=X(null,[t,r,n,s],c,v)||h}if(B(e,"B")){h=X(null,[r,n,a,f],c,v)||h}if(B(e,"C")){h=X(null,[r,s,l,f],c,v)||h}if(B(e,"D")){h=X(null,[n,s,u,f],c,v)||h}if(B(e,"E")){h=X(null,[r,n,s,f],c,v)||h}}if(o){h=X(e,[r,n,s,f],c,v)||h}return h}function K(e,t,r,n,a,i,o,s){return[s[0]===true?true:W(e,Z([t,r,n]),[t,r,n],i,o),s[1]===true?true:W(e,Z([n,a,t]),[n,a,t],i,o)]}function $(e,t,r,n,a,i,o,s,l){if(s){return K(e,t,r,a,n,i,o,l)}else{return K(e,r,a,n,t,i,o,l)}}function Q(e,t,r,n,a,i,o){var s=false;var l,u,f,c;var v=function(){s=W(e,[l,u,f],[-1,-1,-1],a,i)||s;s=W(e,[f,c,l],[-1,-1,-1],a,i)||s};var h=o[0];var p=o[1];var d=o[2];if(h){l=D(Z([x(t,r-0,n-0)])[0],Z([x(t-1,r-0,n-0)])[0],h);u=D(Z([x(t,r-0,n-1)])[0],Z([x(t-1,r-0,n-1)])[0],h);f=D(Z([x(t,r-1,n-1)])[0],Z([x(t-1,r-1,n-1)])[0],h);c=D(Z([x(t,r-1,n-0)])[0],Z([x(t-1,r-1,n-0)])[0],h);v()}if(p){l=D(Z([x(t-0,r,n-0)])[0],Z([x(t-0,r-1,n-0)])[0],p);u=D(Z([x(t-0,r,n-1)])[0],Z([x(t-0,r-1,n-1)])[0],p);f=D(Z([x(t-1,r,n-1)])[0],Z([x(t-1,r-1,n-1)])[0],p);c=D(Z([x(t-1,r,n-0)])[0],Z([x(t-1,r-1,n-0)])[0],p);v()}if(d){l=D(Z([x(t-0,r-0,n)])[0],Z([x(t-0,r-0,n-1)])[0],d);u=D(Z([x(t-0,r-1,n)])[0],Z([x(t-0,r-1,n-1)])[0],d);f=D(Z([x(t-1,r-1,n)])[0],Z([x(t-1,r-1,n-1)])[0],d);c=D(Z([x(t-1,r-0,n)])[0],Z([x(t-1,r-0,n-1)])[0],d);v()}return s}function ee(e,t,r,n,a,o,s,l,u,f,c,v){var h=e;if(v){if(i&&e==="even")h=null;return J(h,t,r,n,a,o,s,l,u,f,c)}else{if(i&&e==="odd")h=null;return J(h,u,l,s,o,a,n,r,t,f,c)}}function te(e,t,r,n,a){var i=[];var o=0;for(var s=0;s<t.length;s++){var l=t[s];for(var u=1;u<y;u++){for(var f=1;f<g;f++){i.push($(e,x(l,f-1,u-1),x(l,f-1,u),x(l,f,u-1),x(l,f,u),r,n,(l+f+u)%2,a&&a[o]?a[o]:[]));o++}}}return i}function re(e,t,r,n,a){var i=[];var o=0;for(var s=0;s<t.length;s++){var l=t[s];for(var u=1;u<d;u++){for(var f=1;f<y;f++){i.push($(e,x(u-1,l,f-1),x(u,l,f-1),x(u-1,l,f),x(u,l,f),r,n,(u+l+f)%2,a&&a[o]?a[o]:[]));o++}}}return i}function ne(e,t,r,n,a){var i=[];var o=0;for(var s=0;s<t.length;s++){var l=t[s];for(var u=1;u<g;u++){for(var f=1;f<d;f++){i.push($(e,x(f-1,u-1,l),x(f-1,u,l),x(f,u-1,l),x(f,u,l),r,n,(f+u+l)%2,a&&a[o]?a[o]:[]));o++}}}return i}function ae(e,t,r){for(var n=1;n<y;n++){for(var a=1;a<g;a++){for(var i=1;i<d;i++){ee(e,x(i-1,a-1,n-1),x(i-1,a-1,n),x(i-1,a,n-1),x(i-1,a,n),x(i,a-1,n-1),x(i,a-1,n),x(i,a,n-1),x(i,a,n),t,r,(i+a+n)%2)}}}}function ie(e,t,r){o=true;ae(e,t,r);o=false}function oe(e,t,r){i=true;ae(e,t,r);i=false}function se(e,t,r,n,a,i){var o=[];var s=0;for(var l=0;l<t.length;l++){var u=t[l];for(var f=1;f<y;f++){for(var c=1;c<g;c++){o.push(Q(e,u,c,f,r,n,a[l],i&&i[s]?i[s]:[]));s++}}}return o}function le(e,t,r,n,a,i){var o=[];var s=0;for(var l=0;l<t.length;l++){var u=t[l];for(var f=1;f<d;f++){for(var c=1;c<y;c++){o.push(Q(e,f,u,c,r,n,a[l],i&&i[s]?i[s]:[]));s++}}}return o}function ue(e,t,r,n,a,i){var o=[];var s=0;for(var l=0;l<t.length;l++){var u=t[l];for(var f=1;f<g;f++){for(var c=1;c<d;c++){o.push(Q(e,c,f,u,r,n,a[l],i&&i[s]?i[s]:[]));s++}}}return o}function fe(e,t){var r=[];for(var n=e;n<t;n++){r.push(n)}return r}function ce(){for(var t=0;t<d;t++){for(var r=0;r<g;r++){for(var n=0;n<y;n++){var a=x(t,r,n);I(e._x[a],e._y[a],e._z[a],e._value[a])}}}}function ve(){C();ce();var i=null;if(r&&a){R(a);ie(i,w,T)}if(t&&n){R(n);var o=e.surface.pattern;var u=e.surface.count;for(var f=0;f<u;f++){var c=u===1?.5:f/(u-1);var m=(1-c)*w+c*T;var x=Math.abs(m-b);var E=Math.abs(m-_);var L=x>E?[b,m]:[m,_];oe(o,L[0],L[1])}}var I=[[Math.min(w,_),Math.max(w,_)],[Math.min(b,T),Math.max(b,T)]];["x","y","z"].forEach((function(t){var r=[];for(var n=0;n<I.length;n++){var a=0;var o=I[n][0];var s=I[n][1];var u=e.slices[t];if(u.show&&u.fill){R(u.fill);var f=[];var c=[];var m=[];if(u.locations.length){for(var x=0;x<u.locations.length;x++){var b=l(u.locations[x],t==="x"?v:t==="y"?h:p);if(b.distRatio===0){f.push(b.id)}else if(b.id>0){c.push(b.id);if(t==="x"){m.push([b.distRatio,0,0])}else if(t==="y"){m.push([0,b.distRatio,0])}else{m.push([0,0,b.distRatio])}}}}else{if(t==="x"){f=fe(1,d-1)}else if(t==="y"){f=fe(1,g-1)}else{f=fe(1,y-1)}}if(c.length>0){if(t==="x"){r[a]=se(i,c,o,s,m,r[a])}else if(t==="y"){r[a]=le(i,c,o,s,m,r[a])}else{r[a]=ue(i,c,o,s,m,r[a])}a++}if(f.length>0){if(t==="x"){r[a]=te(i,f,o,s,r[a])}else if(t==="y"){r[a]=re(i,f,o,s,r[a])}else{r[a]=ne(i,f,o,s,r[a])}a++}}var _=e.caps[t];if(_.show&&_.fill){R(_.fill);if(t==="x"){r[a]=te(i,[0,d-1],o,s,r[a])}else if(t==="y"){r[a]=re(i,[0,g-1],o,s,r[a])}else{r[a]=ne(i,[0,y-1],o,s,r[a])}a++}}}));if(s===0){C()}e._meshX=k;e._meshY=A;e._meshZ=M;e._meshIntensity=S;e._Xs=v;e._Ys=h;e._Zs=p}ve();return e}function h(e,t){var r=e.glplot.gl;var a=n({gl:r});var i=new u(e,a,t.uid);a._trace=i;i.update(t);e.glplot.add(a);return i}e.exports={findNearestOnAxis:l,generateIsoMeshes:v,createIsosurfaceTrace:h}},82738:function(e,t,r){"use strict";var n=r(71828);var a=r(73972);var i=r(16249);var o=r(1586);function s(e,t,r,a){function o(r,a){return n.coerce(e,t,i,r,a)}l(e,t,r,a,o)}function l(e,t,r,n,i){var s=i("isomin");var l=i("isomax");if(l!==undefined&&l!==null&&s!==undefined&&s!==null&&s>l){t.isomin=null;t.isomax=null}var u=i("x");var f=i("y");var c=i("z");var v=i("value");if(!u||!u.length||!f||!f.length||!c||!c.length||!v||!v.length){t.visible=false;return}var h=a.getComponentMethod("calendars","handleTraceDefaults");h(e,t,["x","y","z"],n);i("valuehoverformat");["x","y","z"].forEach((function(e){i(e+"hoverformat");var t="caps."+e;var r=i(t+".show");if(r){i(t+".fill")}var n="slices."+e;var a=i(n+".show");if(a){i(n+".fill");i(n+".locations")}}));var p=i("spaceframe.show");if(p){i("spaceframe.fill")}var d=i("surface.show");if(d){i("surface.count");i("surface.fill");i("surface.pattern")}var g=i("contour.show");if(g){i("contour.color");i("contour.width")}["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach((function(e){i(e)}));o(e,t,n,i,{prefix:"",cLetter:"c"});t._length=null}e.exports={supplyDefaults:s,supplyIsoDefaults:l}},64943:function(e,t,r){"use strict";e.exports={attributes:r(16249),supplyDefaults:r(82738).supplyDefaults,calc:r(56959),colorbar:{min:"cmin",max:"cmax"},plot:r(22674).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:r(58547),categories:["gl3d","showLegend"],meta:{}}},2418:function(e,t,r){"use strict";var n=r(50693);var a=r(12663).axisHoverFormat;var i=r(5386).fF;var o=r(54532);var s=r(9012);var l=r(1426).extendFlat;e.exports=l({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:true,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:true,editType:"calc"},hovertemplate:i({editType:"calc"}),xhoverformat:a("x"),yhoverformat:a("y"),zhoverformat:a("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:undefined},n("",{colorAttr:"`intensity`",showScaleDflt:true,editTypeOverride:"calc"}),{opacity:o.opacity,flatshading:{valType:"boolean",dflt:false,editType:"calc"},contour:{show:l({},o.contours.x.show,{}),color:o.contours.x.color,width:o.contours.x.width,editType:"calc"},lightposition:{x:l({},o.lightposition.x,{dflt:1e5}),y:l({},o.lightposition.y,{dflt:1e5}),z:l({},o.lightposition.z,{dflt:0}),editType:"calc"},lighting:l({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},o.lighting),hoverinfo:l({},s.hoverinfo,{editType:"calc"}),showlegend:l({},s.showlegend,{dflt:false})})},82932:function(e,t,r){"use strict";var n=r(78803);e.exports=function e(t,r){if(r.intensity){n(t,r,{vals:r.intensity,containerStr:"",cLetter:"c"})}}},91134:function(e,t,r){"use strict";var n=r(9330).gl_mesh3d;var a=r(9330).delaunay_triangulate;var i=r(9330).alpha_shape;var o=r(9330).convex_hull;var s=r(81697).parseColorScale;var l=r(78614);var u=r(21081).extractOpts;var f=r(90060);function c(e,t,r){this.scene=e;this.uid=r;this.mesh=t;this.name="";this.color="#fff";this.data=null;this.showContour=false}var v=c.prototype;v.handlePick=function(e){if(e.object===this.mesh){var t=e.index=e.data.index;if(e.data._cellCenter){e.traceCoordinate=e.data.dataCoordinate}else{e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]]}var r=this.data.hovertext||this.data.text;if(Array.isArray(r)&&r[t]!==undefined){e.textLabel=r[t]}else if(r){e.textLabel=r}return true}};function h(e){var t=[];var r=e.length;for(var n=0;n<r;n++){t[n]=l(e[n])}return t}function p(e,t,r,n){var a=[];var i=t.length;for(var o=0;o<i;o++){a[o]=e.d2l(t[o],0,n)*r}return a}function d(e){var t=[];var r=e.length;for(var n=0;n<r;n++){t[n]=Math.round(e[n])}return t}function g(e,t){var r=["x","y","z"].indexOf(e);var n=[];var i=t.length;for(var o=0;o<i;o++){n[o]=[t[o][(r+1)%3],t[o][(r+2)%3]]}return a(n)}function y(e,t){var r=e.length;for(var n=0;n<r;n++){if(e[n]<=-.5||e[n]>=t-.5){return false}}return true}v.update=function(e){var t=this.scene;var r=t.fullSceneLayout;this.data=e;var n=e.x.length;var a=f(p(r.xaxis,e.x,t.dataScale[0],e.xcalendar),p(r.yaxis,e.y,t.dataScale[1],e.ycalendar),p(r.zaxis,e.z,t.dataScale[2],e.zcalendar));var c;if(e.i&&e.j&&e.k){if(e.i.length!==e.j.length||e.j.length!==e.k.length||!y(e.i,n)||!y(e.j,n)||!y(e.k,n)){return}c=f(d(e.i),d(e.j),d(e.k))}else if(e.alphahull===0){c=o(a)}else if(e.alphahull>0){c=i(e.alphahull,a)}else{c=g(e.delaunayaxis,a)}var v={positions:a,cells:c,lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,contourEnable:e.contour.show,contourColor:l(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading};if(e.intensity){var m=u(e);this.color="#fff";var x=e.intensitymode;v[x+"Intensity"]=e.intensity;v[x+"IntensityBounds"]=[m.min,m.max];v.colormap=s(e)}else if(e.vertexcolor){this.color=e.vertexcolor[0];v.vertexColors=h(e.vertexcolor)}else if(e.facecolor){this.color=e.facecolor[0];v.cellColors=h(e.facecolor)}else{this.color=e.color;v.meshColor=l(e.color)}this.mesh.update(v)};v.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};function m(e,t){var r=e.glplot.gl;var a=n({gl:r});var i=new c(e,a,t.uid);a._trace=i;i.update(t);e.glplot.add(a);return i}e.exports=m},58669:function(e,t,r){"use strict";var n=r(73972);var a=r(71828);var i=r(1586);var o=r(2418);e.exports=function e(t,r,s,l){function u(e,n){return a.coerce(t,r,o,e,n)}function f(e){var t=e.map((function(e){var t=u(e);if(t&&a.isArrayOrTypedArray(t))return t;return null}));return t.every((function(e){return e&&e.length===t[0].length}))&&t}var c=f(["x","y","z"]);if(!c){r.visible=false;return}f(["i","j","k"]);if(r.i&&(!r.j||!r.k)||r.j&&(!r.k||!r.i)||r.k&&(!r.i||!r.j)){r.visible=false;return}var v=n.getComponentMethod("calendars","handleTraceDefaults");v(t,r,["x","y","z"],l);["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach((function(e){u(e)}));var h=u("contour.show");if(h){u("contour.color");u("contour.width")}if("intensity"in t){u("intensity");u("intensitymode");i(t,r,l,u,{prefix:"",cLetter:"c"})}else{r.showscale=false;if("facecolor"in t)u("facecolor");else if("vertexcolor"in t)u("vertexcolor");else u("color",s)}u("text");u("hovertext");u("hovertemplate");u("xhoverformat");u("yhoverformat");u("zhoverformat");r._length=null}},21164:function(e,t,r){"use strict";e.exports={attributes:r(2418),supplyDefaults:r(58669),calc:r(82932),colorbar:{min:"cmin",max:"cmax"},plot:r(91134),moduleType:"trace",name:"mesh3d",basePlotModule:r(58547),categories:["gl3d","showLegend"],meta:{}}},2522:function(e,t,r){"use strict";var n=r(71828).extendFlat;var a=r(82196);var i=r(12663).axisHoverFormat;var o=r(79952).P;var s=r(77914);var l=r(22372);var u=l.INCREASING.COLOR;var f=l.DECREASING.COLOR;var c=a.line;function v(e){return{line:{color:n({},c.color,{dflt:e}),width:c.width,dash:o,editType:"style"},editType:"style"}}e.exports={xperiod:a.xperiod,xperiod0:a.xperiod0,xperiodalignment:a.xperiodalignment,xhoverformat:i("x"),yhoverformat:i("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:n({},c.width,{}),dash:n({},o,{}),editType:"style"},increasing:v(u),decreasing:v(f),text:{valType:"string",dflt:"",arrayOk:true,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:true,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:n({},s.hoverlabel,{split:{valType:"boolean",dflt:false,editType:"style"}})}},3485:function(e,t,r){"use strict";var n=r(71828);var a=n._;var i=r(89298);var o=r(42973);var s=r(50606).BADNUM;function l(e,t){var r=i.getFromId(e,t.xaxis);var a=i.getFromId(e,t.yaxis);var o=c(e,r,t);var s=t._minDiff;t._minDiff=null;var l=t._origX;t._origX=null;var v=t._xcalc;t._xcalc=null;var h=f(e,t,l,v,a,u);t._extremes[r._id]=i.findExtremes(r,v,{vpad:s/2});if(h.length){n.extendFlat(h[0].t,{wHover:s/2,tickLen:o});return h}else{return[{t:{empty:true}}]}}function u(e,t,r,n){return{o:e,h:t,l:r,c:n}}function f(e,t,r,o,l,u){var f=l.makeCalcdata(t,"open");var c=l.makeCalcdata(t,"high");var v=l.makeCalcdata(t,"low");var h=l.makeCalcdata(t,"close");var p=Array.isArray(t.text);var d=Array.isArray(t.hovertext);var g=true;var y=null;var m=!!t.xperiodalignment;var x=[];for(var b=0;b<o.length;b++){var _=o[b];var w=f[b];var T=c[b];var k=v[b];var A=h[b];if(_!==s&&w!==s&&T!==s&&k!==s&&A!==s){if(A===w){if(y!==null&&A!==y)g=A>y}else g=A>w;y=A;var M=u(w,T,k,A);M.pos=_;M.yc=(w+A)/2;M.i=b;M.dir=g?"increasing":"decreasing";M.x=M.pos;M.y=[k,T];if(m)M.orig_p=r[b];if(p)M.tx=t.text[b];if(d)M.htx=t.hovertext[b];x.push(M)}else{x.push({pos:_,empty:true})}}t._extremes[l._id]=i.findExtremes(l,n.concat(v,c),{padded:true});if(x.length){x[0].t={labels:{open:a(e,"open:")+" ",high:a(e,"high:")+" ",low:a(e,"low:")+" ",close:a(e,"close:")+" "}}}return x}function c(e,t,r){var a=r._minDiff;if(!a){var i=e._fullData;var s=[];a=Infinity;var l;for(l=0;l<i.length;l++){var u=i[l];if(u.type==="ohlc"&&u.visible===true&&u.xaxis===t._id){s.push(u);var f=t.makeCalcdata(u,"x");u._origX=f;var c=o(r,t,"x",f).vals;u._xcalc=c;var v=n.distinctVals(c).minDiff;if(v&&isFinite(v)){a=Math.min(a,v)}}}if(a===Infinity)a=1;for(l=0;l<s.length;l++){s[l]._minDiff=a}}return a*r.tickwidth}e.exports={calc:l,calcCommon:f}},16169:function(e,t,r){"use strict";var n=r(71828);var a=r(14555);var i=r(73927);var o=r(2522);e.exports=function e(t,r,l,u){function f(e,a){return n.coerce(t,r,o,e,a)}var c=a(t,r,f,u);if(!c){r.visible=false;return}i(t,r,u,f,{x:true});f("xhoverformat");f("yhoverformat");f("line.width");f("line.dash");s(t,r,f,"increasing");s(t,r,f,"decreasing");f("text");f("hovertext");f("tickwidth");u._requestRangeslider[r.xaxis]=true};function s(e,t,r,n){r(n+".line.color");r(n+".line.width",t.line.width);r(n+".line.dash",t.line.dash)}},66449:function(e,t,r){"use strict";var n=r(89298);var a=r(71828);var i=r(30211);var o=r(7901);var s=r(71828).fillText;var l=r(22372);var u={increasing:l.INCREASING.SYMBOL,decreasing:l.DECREASING.SYMBOL};function f(e,t,r,n){var a=e.cd;var i=a[0].trace;if(i.hoverlabel.split){return v(e,t,r,n)}return h(e,t,r,n)}function c(e,t,r,n){var a=e.cd;var s=e.xa;var l=a[0].trace;var u=a[0].t;var f=l.type;var c=f==="ohlc"?"l":"min";var v=f==="ohlc"?"h":"max";var h,p;var d=u.bPos||0;var g=function(e){return e.pos+d-t};var y=u.bdPos||u.tickLen;var m=u.wHover;var x=Math.min(1,y/Math.abs(s.r2c(s.range[1])-s.r2c(s.range[0])));h=e.maxHoverDistance-x;p=e.maxSpikeDistance-x;function b(e){var t=g(e);return i.inbox(t-m,t+m,h)}function _(e){var t=e[c];var n=e[v];return t===n||i.inbox(t-r,n-r,h)}function w(e){return(b(e)+_(e))/2}var T=i.getDistanceFunction(n,b,_,w);i.getClosest(a,T,e);if(e.index===false)return null;var k=a[e.index];if(k.empty)return null;var A=k.dir;var M=l[A];var S=M.line.color;if(o.opacity(S)&&M.line.width)e.color=S;else e.color=M.fillcolor;e.x0=s.c2p(k.pos+d-y,true);e.x1=s.c2p(k.pos+d+y,true);e.xLabelVal=k.orig_p!==undefined?k.orig_p:k.pos;e.spikeDistance=w(k)*p/h;e.xSpike=s.c2p(k.pos,true);return e}function v(e,t,r,i){var o=e.cd;var s=e.ya;var l=o[0].trace;var u=o[0].t;var f=[];var v=c(e,t,r,i);if(!v)return[];var h=v.index;var p=o[h];var d=p.hi||l.hoverinfo;var g=d.split("+");var y=d==="all";var m=y||g.indexOf("y")!==-1;if(!m)return[];var x=["high","open","close","low"];var b={};for(var _=0;_<x.length;_++){var w=x[_];var T=l[w][v.index];var k=s.c2p(T,true);var A;if(T in b){A=b[T];A.yLabel+="<br>"+u.labels[w]+n.hoverLabelText(s,T,l.yhoverformat)}else{A=a.extendFlat({},v);A.y0=A.y1=k;A.yLabelVal=T;A.yLabel=u.labels[w]+n.hoverLabelText(s,T,l.yhoverformat);A.name="";f.push(A);b[T]=A}}return f}function h(e,t,r,a){var i=e.cd;var o=e.ya;var l=i[0].trace;var f=i[0].t;var v=c(e,t,r,a);if(!v)return[];var h=v.index;var p=i[h];var d=v.index=p.i;var g=p.dir;function y(e){return f.labels[e]+n.hoverLabelText(o,l[e][d],l.yhoverformat)}var m=p.hi||l.hoverinfo;var x=m.split("+");var b=m==="all";var _=b||x.indexOf("y")!==-1;var w=b||x.indexOf("text")!==-1;var T=_?[y("open"),y("high"),y("low"),y("close")+"  "+u[g]]:[];if(w)s(p,l,T);v.extraText=T.join("<br>");v.y0=v.y1=o.c2p(p.yc,true);return[v]}e.exports={hoverPoints:f,hoverSplit:v,hoverOnPoints:h}},54186:function(e,t,r){"use strict";e.exports={moduleType:"trace",name:"ohlc",basePlotModule:r(93612),categories:["cartesian","svg","showLegend"],meta:{},attributes:r(2522),supplyDefaults:r(16169),calc:r(3485).calc,plot:r(72314),style:r(53101),hoverPoints:r(66449).hoverPoints,selectPoints:r(67324)}},14555:function(e,t,r){"use strict";var n=r(73972);var a=r(71828);e.exports=function e(t,r,i,o){var s=i("x");var l=i("open");var u=i("high");var f=i("low");var c=i("close");i("hoverlabel.split");var v=n.getComponentMethod("calendars","handleTraceDefaults");v(t,r,["x"],o);if(!(l&&u&&f&&c))return;var h=Math.min(l.length,u.length,f.length,c.length);if(s)h=Math.min(h,a.minRowLength(s));r._length=h;return h}},72314:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);e.exports=function e(t,r,i,o){var s=r.yaxis;var l=r.xaxis;var u=!!l.rangebreaks;a.makeTraceGroups(o,i,"trace ohlc").each((function(e){var t=n.select(this);var r=e[0];var i=r.t;var o=r.trace;if(o.visible!==true||i.empty){t.remove();return}var f=i.tickLen;var c=t.selectAll("path").data(a.identity);c.enter().append("path");c.exit().remove();c.attr("d",(function(e){if(e.empty)return"M0,0Z";var t=l.c2p(e.pos-f,true);var r=l.c2p(e.pos+f,true);var n=u?(t+r)/2:l.c2p(e.pos,true);var a=s.c2p(e.o,true);var i=s.c2p(e.h,true);var o=s.c2p(e.l,true);var c=s.c2p(e.c,true);return"M"+t+","+a+"H"+n+"M"+n+","+i+"V"+o+"M"+r+","+c+"H"+n}))}))}},67324:function(e){"use strict";e.exports=function e(t,r){var n=t.cd;var a=t.xaxis;var i=t.yaxis;var o=[];var s;var l=n[0].t.bPos||0;if(r===false){for(s=0;s<n.length;s++){n[s].selected=0}}else{for(s=0;s<n.length;s++){var u=n[s];if(r.contains([a.c2p(u.pos+l),i.c2p(u.yc)],null,u.i,t)){o.push({pointNumber:u.i,x:a.c2d(u.pos),y:i.c2d(u.yc)});u.selected=1}else{u.selected=0}}}return o}},53101:function(e,t,r){"use strict";var n=r(39898);var a=r(91424);var i=r(7901);e.exports=function e(t,r,o){var s=o?o:n.select(t).selectAll("g.ohlclayer").selectAll("g.trace");s.style("opacity",(function(e){return e[0].trace.opacity}));s.each((function(e){var t=e[0].trace;n.select(this).selectAll("path").each((function(e){if(e.empty)return;var r=t[e.dir].line;n.select(this).style("fill","none").call(i.stroke,r.color).call(a.dashLine,r.dash,r.width).style("opacity",t.selectedpoints&&!e.selected?.3:1)}))}))}},99506:function(e,t,r){"use strict";var n=r(1426).extendFlat;var a=r(9012);var i=r(41940);var o=r(50693);var s=r(5386).fF;var l=r(27670).Y;var u=n({editType:"calc"},o("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:s({editType:"plot",arrayOk:false},{keys:["count","probability"]})});e.exports={domain:l({name:"parcats",trace:true,editType:"calc"}),hoverinfo:n({},a.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:false}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:s({editType:"plot",arrayOk:false},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:true,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:i({editType:"calc"}),tickfont:i({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:true,editType:"calc"}},line:u,counts:{valType:"number",min:0,dflt:1,arrayOk:true,editType:"calc"},customdata:undefined,hoverlabel:undefined,ids:undefined,legend:undefined,legendgroup:undefined,legendrank:undefined,opacity:undefined,selectedpoints:undefined,showlegend:undefined}},27677:function(e,t,r){"use strict";var n=r(27659).a0;var a=r(45784);var i="parcats";t.name=i;t.plot=function(e,t,r,o){var s=n(e.calcdata,i);if(s.length){var l=s[0];a(e,l,r,o)}};t.clean=function(e,t,r,n){var a=n._has&&n._has("parcats");var i=t._has&&t._has("parcats");if(a&&!i){n._paperdiv.selectAll(".parcats").remove()}}},28699:function(e,t,r){"use strict";var n=r(28984).wrap;var a=r(52075).hasColorscale;var i=r(78803);var o=r(75744);var s=r(91424);var l=r(71828);var u=r(92770);e.exports=function e(t,r){var x=l.filterVisible(r.dimensions);if(x.length===0)return[];var b=x.map((function(e){var t;if(e.categoryorder==="trace"){t=null}else if(e.categoryorder==="array"){t=e.categoryarray}else{t=o(e.values);var r=true;for(var n=0;n<t.length;n++){if(!u(t[n])){r=false;break}}t.sort(r?l.sorterAsc:undefined);if(e.categoryorder==="category descending"){t=t.reverse()}}return g(e.values,t)}));var _,w,T;if(l.isArrayOrTypedArray(r.counts)){_=r.counts}else{_=[r.counts]}y(x);x.forEach((function(e,t){m(e,b[t])}));var k=r.line;var A;if(k){if(a(r,"line")){i(t,r,{vals:r.line.color,containerStr:"line",cLetter:"c"})}A=s.tryColorscale(k)}else{A=l.identity}function M(e){var t,r;if(l.isArrayOrTypedArray(k.color)){t=k.color[e%k.color.length];r=t}else{t=k.color}return{color:A(t),rawColor:r}}var S=x[0].values.length;var E={};var L=b.map((function(e){return e.inds}));T=0;var C;var I;for(C=0;C<S;C++){var P=[];for(I=0;I<L.length;I++){P.push(L[I][C])}w=_[C%_.length];T+=w;var O=M(C);var D=P+"-"+O.rawColor;if(E[D]===undefined){E[D]=p(P,O.color,O.rawColor)}d(E[D],C,w)}var z=x.map((function(e,t){return c(t,e._index,e._displayindex,e.label,T)}));for(C=0;C<S;C++){w=_[C%_.length];for(I=0;I<z.length;I++){var R=z[I].containerInd;var F=b[I].inds[C];var B=z[I].categories;if(B[F]===undefined){var N=r.dimensions[R]._categoryarray[F];var j=r.dimensions[R]._ticktext[F];B[F]=v(I,F,N,j)}h(B[F],C,w)}}return n(f(z,E,T))};function f(e,t,r){var n=e.map((function(e){return e.categories.length})).reduce((function(e,t){return Math.max(e,t)}));return{dimensions:e,paths:t,trace:undefined,maxCats:n,count:r}}function c(e,t,r,n,a){return{dimensionInd:e,containerInd:t,displayInd:r,dimensionLabel:n,count:a,categories:[],dragX:null}}function v(e,t,r,n){return{dimensionInd:e,categoryInd:t,categoryValue:r,displayInd:t,categoryLabel:n,valueInds:[],count:0,dragY:null}}function h(e,t,r){e.valueInds.push(t);e.count+=r}function p(e,t,r){return{categoryInds:e,color:t,rawColor:r,valueInds:[],count:0}}function d(e,t,r){e.valueInds.push(t);e.count+=r}function g(e,t){if(t===undefined||t===null){t=[]}else{t=t.map((function(e){return e}))}var r={};var n={};var a=[];t.forEach((function(e,t){r[e]=0;n[e]=t}));for(var i=0;i<e.length;i++){var o=e[i];var s;if(r[o]===undefined){r[o]=1;s=t.push(o)-1;n[o]=s}else{r[o]++;s=n[o]}a.push(s)}var l=t.map((function(e){return r[e]}));return{uniqueValues:t,uniqueCounts:l,inds:a}}function y(e){var t=e.map((function(e){return e.displayindex}));var r;if(x(t)){for(r=0;r<e.length;r++){e[r]._displayindex=e[r].displayindex}}else{for(r=0;r<e.length;r++){e[r]._displayindex=r}}}function m(e,t){e._categoryarray=t.uniqueValues;if(e.ticktext===null||e.ticktext===undefined){e._ticktext=[]}else{e._ticktext=e.ticktext.slice()}for(var r=e._ticktext.length;r<t.uniqueValues.length;r++){e._ticktext.push(t.uniqueValues[r])}}function x(e){var t=new Array(e.length);for(var r=0;r<e.length;r++){if(e[r]<0||e[r]>=e.length){return false}if(t[e[r]]!==undefined){return false}t[e[r]]=true}return true}},14647:function(e,t,r){"use strict";var n=r(71828);var a=r(52075).hasColorscale;var i=r(1586);var o=r(27670).c;var s=r(85501);var l=r(99506);var u=r(94397);function f(e,t,r,o,s){s("line.shape");s("line.hovertemplate");var l=s("line.color",o.colorway[0]);if(a(e,"line")&&n.isArrayOrTypedArray(l)){if(l.length){s("line.colorscale");i(e,t,o,s,{prefix:"line.",cLetter:"c"});return l.length}else{t.line.color=r}}return Infinity}function c(e,t){function r(r,a){return n.coerce(e,t,l.dimensions,r,a)}var a=r("values");var i=r("visible");if(!(a&&a.length)){i=t.visible=false}if(i){r("label");r("displayindex",t._index);var o=e.categoryarray;var s=Array.isArray(o)&&o.length>0;var u;if(s)u="array";var f=r("categoryorder",u);if(f==="array"){r("categoryarray");r("ticktext")}else{delete e.categoryarray;delete e.ticktext}if(!s&&f==="array"){t.categoryorder="trace"}}}e.exports=function e(t,r,a,i){function v(e,a){return n.coerce(t,r,l,e,a)}var h=s(t,r,{name:"dimensions",handleItemDefaults:c});var p=f(t,r,a,i,v);o(r,i,v);if(!Array.isArray(h)||!h.length){r.visible=false}u(r,h,"values",p);v("hoveron");v("hovertemplate");v("arrangement");v("bundlecolors");v("sortpaths");v("counts");var d={family:i.font.family,size:Math.round(i.font.size),color:i.font.color};n.coerceFont(v,"labelfont",d);var g={family:i.font.family,size:Math.round(i.font.size/1.2),color:i.font.color};n.coerceFont(v,"tickfont",g)}},94873:function(e,t,r){"use strict";e.exports={attributes:r(99506),supplyDefaults:r(14647),calc:r(28699),plot:r(45784),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:r(27677),categories:["noOpacity"],meta:{}}},45460:function(e,t,r){"use strict";var n=r(39898);var a=r(81684).k4;var i=r(72391);var o=r(30211);var s=r(71828);var l=s.strTranslate;var u=r(91424);var f=r(84267);var c=r(63893);function v(e,t,r,a){var i=t._context.staticPlot;var o=e.map(H.bind(0,t,r));var f=a.selectAll("g.parcatslayer").data([null]);f.enter().append("g").attr("class","parcatslayer").style("pointer-events",i?"none":"all");var v=f.selectAll("g.trace.parcats").data(o,h);var m=v.enter().append("g").attr("class","trace parcats");v.attr("transform",(function(e){return l(e.x,e.y)}));m.append("g").attr("class","paths");var x=v.select("g.paths");var w=x.selectAll("path.path").data((function(e){return e.paths}),h);w.attr("fill",(function(e){return e.model.color}));var T=w.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",(function(e){return e.model.color})).attr("fill-opacity",0);_(T);w.attr("d",(function(e){return e.svgD}));if(!T.empty()){w.sort(d)}w.exit().remove();w.on("mouseover",g).on("mouseout",y).on("click",b);m.append("g").attr("class","dimensions");var A=v.select("g.dimensions");var S=A.selectAll("g.dimension").data((function(e){return e.dimensions}),h);S.enter().append("g").attr("class","dimension");S.attr("transform",(function(e){return l(e.x,0)}));S.exit().remove();var E=S.selectAll("g.category").data((function(e){return e.categories}),h);var L=E.enter().append("g").attr("class","category");E.attr("transform",(function(e){return l(0,e.y)}));L.append("rect").attr("class","catrect").attr("pointer-events","none");E.select("rect.catrect").attr("fill","none").attr("width",(function(e){return e.width})).attr("height",(function(e){return e.height}));k(L);var C=E.selectAll("rect.bandrect").data((function(e){return e.bands}),h);C.each((function(){s.raiseToTop(this)}));C.attr("fill",(function(e){return e.color}));var I=C.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",(function(e){return e.color})).attr("fill-opacity",0);C.attr("fill",(function(e){return e.color})).attr("width",(function(e){return e.width})).attr("height",(function(e){return e.height})).attr("y",(function(e){return e.y})).attr("cursor",(function(e){if(e.parcatsViewModel.arrangement==="fixed"){return"default"}else if(e.parcatsViewModel.arrangement==="perpendicular"){return"ns-resize"}else{return"move"}}));M(I);C.exit().remove();L.append("text").attr("class","catlabel").attr("pointer-events","none");var P=t._fullLayout.paper_bgcolor;E.select("text.catlabel").attr("text-anchor",(function(e){if(p(e)){return"start"}else{return"end"}})).attr("alignment-baseline","middle").style("text-shadow",c.makeTextShadow(P)).style("fill","rgb(0, 0, 0)").attr("x",(function(e){if(p(e)){return e.width+5}else{return-5}})).attr("y",(function(e){return e.height/2})).text((function(e){return e.model.categoryLabel})).each((function(e){u.font(n.select(this),e.parcatsViewModel.categorylabelfont);c.convertToTspans(n.select(this),t)}));L.append("text").attr("class","dimlabel");E.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",(function(e){if(e.parcatsViewModel.arrangement==="fixed"){return"default"}else{return"ew-resize"}})).attr("x",(function(e){return e.width/2})).attr("y",-5).text((function(e,t){if(t===0){return e.parcatsViewModel.model.dimensions[e.model.dimensionInd].dimensionLabel}else{return null}})).each((function(e){u.font(n.select(this),e.parcatsViewModel.labelfont)}));E.selectAll("rect.bandrect").on("mouseover",z).on("mouseout",R);E.exit().remove();S.call(n.behavior.drag().origin((function(e){return{x:e.x,y:0}})).on("dragstart",F).on("drag",B).on("dragend",N));v.each((function(e){e.traceSelection=n.select(this);e.pathSelection=n.select(this).selectAll("g.paths").selectAll("path.path");e.dimensionSelection=n.select(this).selectAll("g.dimensions").selectAll("g.dimension")}));v.exit().remove()}e.exports=function(e,t,r,n){v(r,e,n,t)};function h(e){return e.key}function p(e){var t=e.parcatsViewModel.dimensions.length;var r=e.parcatsViewModel.dimensions[t-1].model.dimensionInd;return e.model.dimensionInd===r}function d(e,t){if(e.model.rawColor>t.model.rawColor){return 1}else if(e.model.rawColor<t.model.rawColor){return-1}else{return 0}}function g(e){if(!e.parcatsViewModel.dragDimension){if(e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){s.raiseToTop(this);w(n.select(this));var t=m(e);var r=x(e);e.parcatsViewModel.graphDiv.emit("plotly_hover",{points:t,event:n.event,constraints:r});if(e.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var a=n.mouse(this)[0];var i=e.parcatsViewModel.graphDiv;var l=e.parcatsViewModel.trace;var u=i._fullLayout;var c=u._paperdiv.node().getBoundingClientRect();var v=e.parcatsViewModel.graphDiv.getBoundingClientRect();var h,p,d;for(d=0;d<e.leftXs.length-1;d++){if(e.leftXs[d]+e.dimWidths[d]-2<=a&&a<=e.leftXs[d+1]+2){var g=e.parcatsViewModel.dimensions[d];var y=e.parcatsViewModel.dimensions[d+1];h=(g.x+g.width+y.x)/2;p=(e.topYs[d]+e.topYs[d+1]+e.height)/2;break}}var b=e.parcatsViewModel.x+h;var _=e.parcatsViewModel.y+p;var T=f.mostReadable(e.model.color,["black","white"]);var k=e.model.count;var A=k/e.parcatsViewModel.model.count;var M={countLabel:k,probabilityLabel:A.toFixed(3)};var S=[];if(e.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1){S.push(["Count:",M.countLabel].join(" "))}if(e.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1){S.push(["P:",M.probabilityLabel].join(" "))}var E=S.join("<br>");var L=n.mouse(i)[0];o.loneHover({trace:l,x:b-c.left+v.left,y:_-c.top+v.top,text:E,color:e.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:T,idealAlign:L<b?"right":"left",hovertemplate:(l.line||{}).hovertemplate,hovertemplateLabels:M,eventData:[{data:l._input,fullData:l,count:k,probability:A}]},{container:u._hoverlayer.node(),outerContainer:u._paper.node(),gd:i})}}}}function y(e){if(!e.parcatsViewModel.dragDimension){_(n.select(this));o.loneUnhover(e.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node());e.parcatsViewModel.pathSelection.sort(d);if(e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var t=m(e);var r=x(e);e.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:t,event:n.event,constraints:r})}}}function m(e){var t=[];var r=j(e.parcatsViewModel);for(var n=0;n<e.model.valueInds.length;n++){var a=e.model.valueInds[n];t.push({curveNumber:r,pointNumber:a})}return t}function x(e){var t={};var r=e.parcatsViewModel.model.dimensions;for(var n=0;n<r.length;n++){var a=r[n];var i=a.categories[e.model.categoryInds[n]];t[a.containerInd]=i.categoryValue}if(e.model.rawColor!==undefined){t.color=e.model.rawColor}return t}function b(e){if(e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var t=m(e);var r=x(e);e.parcatsViewModel.graphDiv.emit("plotly_click",{points:t,event:n.event,constraints:r})}}function _(e){e.attr("fill",(function(e){return e.model.color})).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function w(e){e.attr("fill-opacity",.8).attr("stroke",(function(e){return f.mostReadable(e.model.color,["black","white"])})).attr("stroke-width",.3)}function T(e){e.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function k(e){e.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function A(e){e.attr("stroke","black").attr("stroke-width",1.5)}function M(e){e.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function S(e){var t=e.parcatsViewModel.pathSelection;var r=e.categoryViewModel.model.dimensionInd;var n=e.categoryViewModel.model.categoryInd;return t.filter((function(t){return t.model.categoryInds[r]===n&&t.model.color===e.color}))}function E(e){var t=n.select(e.parentNode).selectAll("rect.bandrect");t.each((function(e){var t=S(e);w(t);t.each((function(){s.raiseToTop(this)}))}));T(n.select(e.parentNode))}function L(e){var t=n.select(e).datum();var r=S(t);w(r);r.each((function(){s.raiseToTop(this)}));n.select(e.parentNode).selectAll("rect.bandrect").filter((function(e){return e.color===t.color})).each((function(){s.raiseToTop(this);A(n.select(this))}))}function C(e,t,r){var a=n.select(e).datum();var i=a.categoryViewModel.model;var o=a.parcatsViewModel.graphDiv;var s=n.select(e.parentNode).selectAll("rect.bandrect");var l=[];s.each((function(e){var t=S(e);t.each((function(e){Array.prototype.push.apply(l,m(e))}))}));var u={};u[i.dimensionInd]=i.categoryValue;o.emit(t,{points:l,event:r,constraints:u})}function I(e,t,r){var a=n.select(e).datum();var i=a.categoryViewModel.model;var o=a.parcatsViewModel.graphDiv;var s=S(a);var l=[];s.each((function(e){Array.prototype.push.apply(l,m(e))}));var u={};u[i.dimensionInd]=i.categoryValue;if(a.rawColor!==undefined){u.color=a.rawColor}o.emit(t,{points:l,event:r,constraints:u})}function P(e,t,r){e._fullLayout._calcInverseTransform(e);var a=e._fullLayout._invScaleX;var i=e._fullLayout._invScaleY;var o=n.select(r.parentNode).select("rect.catrect");var s=o.node().getBoundingClientRect();var l=o.datum();var u=l.parcatsViewModel;var f=u.model.dimensions[l.model.dimensionInd];var c=u.trace;var v=s.top+s.height/2;var h,p;if(u.dimensions.length>1&&f.displayInd===u.dimensions.length-1){h=s.left;p="left"}else{h=s.left+s.width;p="right"}var d=l.model.count;var g=l.model.categoryLabel;var y=d/l.parcatsViewModel.model.count;var m={countLabel:d,categoryLabel:g,probabilityLabel:y.toFixed(3)};var x=[];if(l.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1){x.push(["Count:",m.countLabel].join(" "))}if(l.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1){x.push(["P("+m.categoryLabel+"):",m.probabilityLabel].join(" "))}var b=x.join("<br>");return{trace:c,x:a*(h-t.left),y:i*(v-t.top),text:b,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:p,hovertemplate:c.hovertemplate,hovertemplateLabels:m,eventData:[{data:c._input,fullData:c,count:d,category:g,probability:y}]}}function O(e,t,r){var a=[];n.select(r.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each((function(){var r=this;a.push(P(e,t,r))}));return a}function D(e,t,r){e._fullLayout._calcInverseTransform(e);var a=e._fullLayout._invScaleX;var i=e._fullLayout._invScaleY;var o=r.getBoundingClientRect();var s=n.select(r).datum();var l=s.categoryViewModel;var u=l.parcatsViewModel;var c=u.model.dimensions[l.model.dimensionInd];var v=u.trace;var h=o.y+o.height/2;var p,d;if(u.dimensions.length>1&&c.displayInd===u.dimensions.length-1){p=o.left;d="left"}else{p=o.left+o.width;d="right"}var g=l.model.categoryLabel;var y=s.parcatsViewModel.model.count;var m=0;s.categoryViewModel.bands.forEach((function(e){if(e.color===s.color){m+=e.count}}));var x=l.model.count;var b=0;u.pathSelection.each((function(e){if(e.model.color===s.color){b+=e.model.count}}));var _=m/y;var w=m/b;var T=m/x;var k={countLabel:y,categoryLabel:g,probabilityLabel:_.toFixed(3)};var A=[];if(l.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1){A.push(["Count:",k.countLabel].join(" "))}if(l.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1){A.push("P(color  "+g+"): "+k.probabilityLabel);A.push("P("+g+" | color): "+w.toFixed(3));A.push("P(color | "+g+"): "+T.toFixed(3))}var M=A.join("<br>");var S=f.mostReadable(s.color,["black","white"]);return{trace:v,x:a*(p-t.left),y:i*(h-t.top),text:M,color:s.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:S,fontSize:10,idealAlign:d,hovertemplate:v.hovertemplate,hovertemplateLabels:k,eventData:[{data:v._input,fullData:v,category:g,count:y,probability:_,categorycount:x,colorcount:b,bandcolorcount:m}]}}function z(e){if(!e.parcatsViewModel.dragDimension){if(e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var t=n.mouse(this)[1];if(t<-1){return}var r=e.parcatsViewModel.graphDiv;var a=r._fullLayout;var i=a._paperdiv.node().getBoundingClientRect();var s=e.parcatsViewModel.hoveron;var l=this;if(s==="color"){L(l);I(l,"plotly_hover",n.event)}else{E(l);C(l,"plotly_hover",n.event)}if(e.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var u;if(s==="category"){u=P(r,i,l)}else if(s==="color"){u=D(r,i,l)}else if(s==="dimension"){u=O(r,i,l)}if(u){o.loneHover(u,{container:a._hoverlayer.node(),outerContainer:a._paper.node(),gd:r})}}}}}function R(e){var t=e.parcatsViewModel;if(!t.dragDimension){_(t.pathSelection);k(t.dimensionSelection.selectAll("g.category"));M(t.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect"));o.loneUnhover(t.graphDiv._fullLayout._hoverlayer.node());t.pathSelection.sort(d);if(t.hoverinfoItems.indexOf("skip")===-1){var r=e.parcatsViewModel.hoveron;var a=this;if(r==="color"){I(a,"plotly_unhover",n.event)}else{C(a,"plotly_unhover",n.event)}}}}function F(e){if(e.parcatsViewModel.arrangement==="fixed"){return}e.dragDimensionDisplayInd=e.model.displayInd;e.initialDragDimensionDisplayInds=e.parcatsViewModel.model.dimensions.map((function(e){return e.displayInd}));e.dragHasMoved=false;e.dragCategoryDisplayInd=null;n.select(this).selectAll("g.category").select("rect.catrect").each((function(t){var r=n.mouse(this)[0];var a=n.mouse(this)[1];if(-2<=r&&r<=t.width+2&&-2<=a&&a<=t.height+2){e.dragCategoryDisplayInd=t.model.displayInd;e.initialDragCategoryDisplayInds=e.model.categories.map((function(e){return e.displayInd}));t.model.dragY=t.y;s.raiseToTop(this.parentNode);n.select(this.parentNode).selectAll("rect.bandrect").each((function(t){if(t.y<a&&a<=t.y+t.height){e.potentialClickBand=this}}))}}));e.parcatsViewModel.dragDimension=e;o.loneUnhover(e.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node())}function B(e){if(e.parcatsViewModel.arrangement==="fixed"){return}e.dragHasMoved=true;if(e.dragDimensionDisplayInd===null){return}var t=e.dragDimensionDisplayInd;var r=t-1;var a=t+1;var i=e.parcatsViewModel.dimensions[t];if(e.dragCategoryDisplayInd!==null){var o=i.categories[e.dragCategoryDisplayInd];o.model.dragY+=n.event.dy;var s=o.model.dragY;var l=o.model.displayInd;var u=i.categories;var f=u[l-1];var c=u[l+1];if(f!==undefined){if(s<f.y+f.height/2){o.model.displayInd=f.model.displayInd;f.model.displayInd=l}}if(c!==undefined){if(s+o.height>c.y+c.height/2){o.model.displayInd=c.model.displayInd;c.model.displayInd=l}}e.dragCategoryDisplayInd=o.model.displayInd}if(e.dragCategoryDisplayInd===null||e.parcatsViewModel.arrangement==="freeform"){i.model.dragX=n.event.x;var v=e.parcatsViewModel.dimensions[r];var h=e.parcatsViewModel.dimensions[a];if(v!==undefined){if(i.model.dragX<v.x+v.width){i.model.displayInd=v.model.displayInd;v.model.displayInd=t}}if(h!==undefined){if(i.model.dragX+i.width>h.x){i.model.displayInd=h.model.displayInd;h.model.displayInd=e.dragDimensionDisplayInd}}e.dragDimensionDisplayInd=i.model.displayInd}Z(e.parcatsViewModel);G(e.parcatsViewModel);V(e.parcatsViewModel);U(e.parcatsViewModel)}function N(e){if(e.parcatsViewModel.arrangement==="fixed"){return}if(e.dragDimensionDisplayInd===null){return}n.select(this).selectAll("text").attr("font-weight","normal");var t={};var r=j(e.parcatsViewModel);var a=e.parcatsViewModel.model.dimensions.map((function(e){return e.displayInd}));var o=e.initialDragDimensionDisplayInds.some((function(e,t){return e!==a[t]}));if(o){a.forEach((function(r,n){var a=e.parcatsViewModel.model.dimensions[n].containerInd;t["dimensions["+a+"].displayindex"]=r}))}var s=false;if(e.dragCategoryDisplayInd!==null){var l=e.model.categories.map((function(e){return e.displayInd}));s=e.initialDragCategoryDisplayInds.some((function(e,t){return e!==l[t]}));if(s){var u=e.model.categories.slice().sort((function(e,t){return e.displayInd-t.displayInd}));var f=u.map((function(e){return e.categoryValue}));var c=u.map((function(e){return e.categoryLabel}));t["dimensions["+e.model.containerInd+"].categoryarray"]=[f];t["dimensions["+e.model.containerInd+"].ticktext"]=[c];t["dimensions["+e.model.containerInd+"].categoryorder"]="array"}}if(e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){if(!e.dragHasMoved&&e.potentialClickBand){if(e.parcatsViewModel.hoveron==="color"){I(e.potentialClickBand,"plotly_click",n.event.sourceEvent)}else{C(e.potentialClickBand,"plotly_click",n.event.sourceEvent)}}}e.model.dragX=null;if(e.dragCategoryDisplayInd!==null){var v=e.parcatsViewModel.dimensions[e.dragDimensionDisplayInd].categories[e.dragCategoryDisplayInd];v.model.dragY=null;e.dragCategoryDisplayInd=null}e.dragDimensionDisplayInd=null;e.parcatsViewModel.dragDimension=null;e.dragHasMoved=null;e.potentialClickBand=null;Z(e.parcatsViewModel);G(e.parcatsViewModel);var h=n.transition().duration(300).ease("cubic-in-out");h.each((function(){V(e.parcatsViewModel,true);U(e.parcatsViewModel,true)})).each("end",(function(){if(o||s){i.restyle(e.parcatsViewModel.graphDiv,t,[r])}}))}function j(e){var t;var r=e.graphDiv._fullData;for(var n=0;n<r.length;n++){if(e.key===r[n].uid){t=n;break}}return t}function U(e,t){if(t===undefined){t=false}function r(e){return t?e.transition():e}e.pathSelection.data((function(e){return e.paths}),h);r(e.pathSelection).attr("d",(function(e){return e.svgD}))}function V(e,t){if(t===undefined){t=false}function r(e){return t?e.transition():e}e.dimensionSelection.data((function(e){return e.dimensions}),h);var a=e.dimensionSelection.selectAll("g.category").data((function(e){return e.categories}),h);r(e.dimensionSelection).attr("transform",(function(e){return l(e.x,0)}));r(a).attr("transform",(function(e){return l(0,e.y)}));var i=a.select(".dimlabel");i.text((function(e,t){if(t===0){return e.parcatsViewModel.model.dimensions[e.model.dimensionInd].dimensionLabel}else{return null}}));var o=a.select(".catlabel");o.attr("text-anchor",(function(e){if(p(e)){return"start"}else{return"end"}})).attr("x",(function(e){if(p(e)){return e.width+5}else{return-5}})).each((function(e){var t;var r;if(p(e)){t=e.width+5;r="start"}else{t=-5;r="end"}n.select(this).selectAll("tspan").attr("x",t).attr("text-anchor",r)}));var u=a.selectAll("rect.bandrect").data((function(e){return e.bands}),h);var f=u.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",(function(e){return e.color})).attr("fill-opacity",0);u.attr("fill",(function(e){return e.color})).attr("width",(function(e){return e.width})).attr("height",(function(e){return e.height})).attr("y",(function(e){return e.y}));M(f);u.each((function(){s.raiseToTop(this)}));u.exit().remove()}function H(e,t,r){var n=r[0];var a=t.margin||{l:80,r:80,t:100,b:80};var i=n.trace;var o=i.domain;var s=t.width;var l=t.height;var u=Math.floor(s*(o.x[1]-o.x[0]));var f=Math.floor(l*(o.y[1]-o.y[0]));var c=o.x[0]*s+a.l;var v=t.height-o.y[1]*t.height+a.t;var h=i.line.shape;var p;if(i.hoverinfo==="all"){p=["count","probability"]}else{p=(i.hoverinfo||"").split("+")}var d={trace:i,key:i.uid,model:n,x:c,y:v,width:u,height:f,hoveron:i.hoveron,hoverinfoItems:p,arrangement:i.arrangement,bundlecolors:i.bundlecolors,sortpaths:i.sortpaths,labelfont:i.labelfont,categorylabelfont:i.tickfont,pathShape:h,dragDimension:null,margin:a,paths:[],dimensions:[],graphDiv:e,traceSelection:null,pathSelection:null,dimensionSelection:null};if(n.dimensions){Z(d);G(d)}return d}function q(e,t,r,n,i){var o=[];var s=[];var l;var u;for(u=0;u<r.length-1;u++){l=a(r[u]+e[u],e[u+1]);o.push(l(i));s.push(l(1-i))}var f="M "+e[0]+","+t[0];f+="l"+r[0]+",0 ";for(u=1;u<r.length;u++){f+="C"+o[u-1]+","+t[u-1]+" "+s[u-1]+","+t[u]+" "+e[u]+","+t[u];f+="l"+r[u]+",0 "}f+="l"+"0,"+n+" ";f+="l -"+r[r.length-1]+",0 ";for(u=r.length-2;u>=0;u--){f+="C"+s[u]+","+(t[u+1]+n)+" "+o[u]+","+(t[u]+n)+" "+(e[u]+r[u])+","+(t[u]+n);f+="l-"+r[u]+",0 "}f+="Z";return f}function G(e){var t=e.dimensions;var r=e.model;var n=t.map((function(e){return e.categories.map((function(e){return e.y}))}));var a=e.model.dimensions.map((function(e){return e.categories.map((function(e){return e.displayInd}))}));var i=e.model.dimensions.map((function(e){return e.displayInd}));var o=e.dimensions.map((function(e){return e.model.dimensionInd}));var s=t.map((function(e){return e.x}));var l=t.map((function(e){return e.width}));var u=[];for(var f in r.paths){if(r.paths.hasOwnProperty(f)){u.push(r.paths[f])}}function c(e){var t=e.categoryInds.map((function(e,t){return a[t][e]}));var r=o.map((function(e){return t[e]}));return r}u.sort((function(t,r){var n=c(t);var a=c(r);if(e.sortpaths==="backward"){n.reverse();a.reverse()}n.push(t.valueInds[0]);a.push(r.valueInds[0]);if(e.bundlecolors){n.unshift(t.rawColor);a.unshift(r.rawColor)}if(n<a){return-1}if(n>a){return 1}return 0}));var v=new Array(u.length);var h=t[0].model.count;var p=t[0].categories.map((function(e){return e.height})).reduce((function(e,t){return e+t}));for(var d=0;d<u.length;d++){var g=u[d];var y;if(h>0){y=p*(g.count/h)}else{y=0}var m=new Array(n.length);for(var x=0;x<g.categoryInds.length;x++){var b=g.categoryInds[x];var _=a[x][b];var w=i[x];m[w]=n[w][_];n[w][_]+=y;var T=e.dimensions[w].categories[_];var k=T.bands.length;var A=T.bands[k-1];if(A===undefined||g.rawColor!==A.rawColor){var M=A===undefined?0:A.y+A.height;T.bands.push({key:M,color:g.color,rawColor:g.rawColor,height:y,width:T.width,count:g.count,y:M,categoryViewModel:T,parcatsViewModel:e})}else{var S=T.bands[k-1];S.height+=y;S.count+=g.count}}var E;if(e.pathShape==="hspline"){E=q(s,m,l,y,.5)}else{E=q(s,m,l,y,0)}v[d]={key:g.valueInds[0],model:g,height:y,leftXs:s,topYs:m,dimWidths:l,svgD:E,parcatsViewModel:e}}e.paths=v}function Z(e){var t=e.model.dimensions.map((function(e){return{displayInd:e.displayInd,dimensionInd:e.dimensionInd}}));t.sort((function(e,t){return e.displayInd-t.displayInd}));var r=[];for(var n in t){var a=t[n].dimensionInd;var i=e.model.dimensions[a];r.push(Y(e,i))}e.dimensions=r}function Y(e,t){var r=40;var n=16;var a=e.model.dimensions.length;var i=t.displayInd;var o;var s;var l;if(a>1){o=(e.width-2*r-n)/(a-1)}else{o=0}s=r;l=s+o*i;var u=[];var f=e.model.maxCats;var c=t.categories.length;var v=8;var h=t.count;var p=e.height-v*(f-1);var d;var g;var y;var m;var x;var b=(f-c)*v/2;var _=t.categories.map((function(e){return{displayInd:e.displayInd,categoryInd:e.categoryInd}}));_.sort((function(e,t){return e.displayInd-t.displayInd}));for(x=0;x<c;x++){m=_[x].categoryInd;g=t.categories[m];if(h>0){d=g.count/h*p}else{d=0}y={key:g.valueInds[0],model:g,width:n,height:d,y:g.dragY!==null?g.dragY:b,bands:[],parcatsViewModel:e};b=b+d+v;u.push(y)}return{key:t.dimensionInd,x:t.dragX!==null?t.dragX:l,y:0,width:n,model:t,categories:u,parcatsViewModel:e,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},45784:function(e,t,r){"use strict";var n=r(45460);e.exports=function e(t,r,a,i){var o=t._fullLayout;var s=o._paper;var l=o._size;n(t,s,r,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},a,i)}},73362:function(e,t,r){"use strict";var n=r(50693);var a=r(13838);var i=r(41940);var o=r(27670).Y;var s=r(1426).extendFlat;var l=r(44467).templatedArray;e.exports={domain:o({name:"parcoords",trace:true,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:i({editType:"plot"}),tickfont:i({editType:"plot"}),rangefont:i({editType:"plot"}),dimensions:l("dimension",{label:{valType:"string",editType:"plot"},tickvals:s({},a.tickvals,{editType:"plot"}),ticktext:s({},a.ticktext,{editType:"plot"}),tickformat:s({},a.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:true,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:true,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:true,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:s({editType:"calc"},n("line",{colorscaleDflt:"Viridis",autoColorDflt:false,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},57920:function(e,t,r){"use strict";var n=r(25706);var a=r(39898);var i=r(28984).keyFun;var o=r(28984).repeat;var s=r(71828).sorterAsc;var l=r(71828).strTranslate;var u=n.bar.snapRatio;function f(e,t){return e*(1-u)+t*u}var c=n.bar.snapClose;function v(e,t){return e*(1-c)+t*c}function h(e,t,r,n){if(p(r,n))return r;var a=e?-1:1;var i=0;var o=t.length-1;if(a<0){var s=i;i=o;o=s}var l=t[i];var u=l;for(var c=i;a*c<a*o;c+=a){var h=c+a;var d=t[h];if(a*r<a*v(l,d))return f(l,u);if(a*r<a*d||h===o)return f(d,l);u=l;l=d}}function p(e,t){for(var r=0;r<t.length;r++){if(e>=t[r][0]&&e<=t[r][1])return true}return false}function d(e){e.attr("x",-n.bar.captureWidth/2).attr("width",n.bar.captureWidth)}function g(e){e.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function y(e){if(!e.brush.filterSpecified){return"0,"+e.height}var t=m(e.brush.filter.getConsolidated(),e.height);var r=[0];var n,a,i;var o=t.length?t[0][0]:null;for(var s=0;s<t.length;s++){n=t[s];a=n[1]-n[0];r.push(o);r.push(a);i=s+1;if(i<t.length){o=t[i][0]-n[1]}}r.push(e.height);return r}function m(e,t){return e.map((function(e){return e.map((function(e){return Math.max(0,e*t)})).sort(s)}))}function x(e,t){var r=n.bar.handleHeight;if(t>e[1]+r||t<e[0]-r)return;if(t>=.9*e[1]+.1*e[0])return"n";if(t<=.9*e[0]+.1*e[1])return"s";return"ns"}function b(){a.select(document.body).style("cursor",null)}function _(e){e.attr("stroke-dasharray",y)}function w(e,t){var r=a.select(e).selectAll(".highlight, .highlight-shadow");var i=t?r.transition().duration(n.bar.snapDuration).each("end",t):r;_(i)}function T(e,t){var r=e.brush;var n=r.filterSpecified;var a=NaN;var i={};var o;if(n){var s=e.height;var l=r.filter.getConsolidated();var u=m(l,s);var f=NaN;var c=NaN;var v=NaN;for(o=0;o<=u.length;o++){var h=u[o];if(h&&h[0]<=t&&t<=h[1]){f=o;break}else{c=o?o-1:NaN;if(h&&h[0]>t){v=o;break}}}a=f;if(isNaN(a)){if(isNaN(c)||isNaN(v)){a=isNaN(c)?v:c}else{a=t-u[c][1]<u[v][0]-t?c:v}}if(!isNaN(a)){var p=u[a];var d=x(p,t);if(d){i.interval=l[a];i.intervalPix=p;i.region=d}}}if(e.ordinal&&!i.region){var g=e.unitTickvals;var y=e.unitToPaddedPx.invert(t);for(o=0;o<g.length;o++){var b=[g[Math.max(o-1,0)]*.25+g[o]*.75,g[Math.min(o+1,g.length-1)]*.25+g[o]*.75];if(y>=b[0]&&y<=b[1]){i.clickableOrdinalRange=b;break}}}return i}function k(e,t){a.event.sourceEvent.stopPropagation();var r=t.height-a.mouse(e)[1]-2*n.verticalPadding;var i=t.unitToPaddedPx.invert(r);var o=t.brush;var s=T(t,r);var l=s.interval;var u=o.svgBrush;u.wasDragged=false;u.grabbingBar=s.region==="ns";if(u.grabbingBar){var f=l.map(t.unitToPaddedPx);u.grabPoint=r-f[0]-n.verticalPadding;u.barLength=f[1]-f[0]}u.clickableOrdinalRange=s.clickableOrdinalRange;u.stayingIntervals=t.multiselect&&o.filterSpecified?o.filter.getConsolidated():[];if(l){u.stayingIntervals=u.stayingIntervals.filter((function(e){return e[0]!==l[0]&&e[1]!==l[1]}))}u.startExtent=s.region?l[s.region==="s"?1:0]:i;t.parent.inBrushDrag=true;u.brushStartCallback()}function A(e,t){a.event.sourceEvent.stopPropagation();var r=t.height-a.mouse(e)[1]-2*n.verticalPadding;var i=t.brush.svgBrush;i.wasDragged=true;i._dragging=true;if(i.grabbingBar){i.newExtent=[r-i.grabPoint,r+i.barLength-i.grabPoint].map(t.unitToPaddedPx.invert)}else{i.newExtent=[i.startExtent,t.unitToPaddedPx.invert(r)].sort(s)}t.brush.filterSpecified=true;i.extent=i.stayingIntervals.concat([i.newExtent]);i.brushCallback(t);w(e.parentNode)}function M(e,t){var r=t.brush;var n=r.filter;var i=r.svgBrush;if(!i._dragging){S(e,t);A(e,t);t.brush.svgBrush.wasDragged=false}i._dragging=false;var o=a.event;o.sourceEvent.stopPropagation();var s=i.grabbingBar;i.grabbingBar=false;i.grabLocation=undefined;t.parent.inBrushDrag=false;b();if(!i.wasDragged){i.wasDragged=undefined;if(i.clickableOrdinalRange){if(r.filterSpecified&&t.multiselect){i.extent.push(i.clickableOrdinalRange)}else{i.extent=[i.clickableOrdinalRange];r.filterSpecified=true}}else if(s){i.extent=i.stayingIntervals;if(i.extent.length===0){O(r)}}else{O(r)}i.brushCallback(t);w(e.parentNode);i.brushEndCallback(r.filterSpecified?n.getConsolidated():[]);return}var l=function(){n.set(n.getConsolidated())};if(t.ordinal){var u=t.unitTickvals;if(u[u.length-1]<u[0])u.reverse();i.newExtent=[h(0,u,i.newExtent[0],i.stayingIntervals),h(1,u,i.newExtent[1],i.stayingIntervals)];var f=i.newExtent[1]>i.newExtent[0];i.extent=i.stayingIntervals.concat(f?[i.newExtent]:[]);if(!i.extent.length){O(r)}i.brushCallback(t);if(f){w(e.parentNode,l)}else{l();w(e.parentNode)}}else{l()}i.brushEndCallback(r.filterSpecified?n.getConsolidated():[])}function S(e,t){var r=t.height-a.mouse(e)[1]-2*n.verticalPadding;var i=T(t,r);var o="crosshair";if(i.clickableOrdinalRange)o="pointer";else if(i.region)o=i.region+"-resize";a.select(document.body).style("cursor",o)}function E(e){e.on("mousemove",(function(e){a.event.preventDefault();if(!e.parent.inBrushDrag)S(this,e)})).on("mouseleave",(function(e){if(!e.parent.inBrushDrag)b()})).call(a.behavior.drag().on("dragstart",(function(e){k(this,e)})).on("drag",(function(e){A(this,e)})).on("dragend",(function(e){M(this,e)})))}function L(e,t){return e[0]-t[0]}function C(e,t,r){var a=r._context.staticPlot;var i=e.selectAll(".background").data(o);i.enter().append("rect").classed("background",true).call(d).call(g).style("pointer-events",a?"none":"auto").attr("transform",l(0,n.verticalPadding));i.call(E).attr("height",(function(e){return e.height-n.verticalPadding}));var s=e.selectAll(".highlight-shadow").data(o);s.enter().append("line").classed("highlight-shadow",true).attr("x",-n.bar.width/2).attr("stroke-width",n.bar.width+n.bar.strokeWidth).attr("stroke",t).attr("opacity",n.bar.strokeOpacity).attr("stroke-linecap","butt");s.attr("y1",(function(e){return e.height})).call(_);var u=e.selectAll(".highlight").data(o);u.enter().append("line").classed("highlight",true).attr("x",-n.bar.width/2).attr("stroke-width",n.bar.width-n.bar.strokeWidth).attr("stroke",n.bar.fillColor).attr("opacity",n.bar.fillOpacity).attr("stroke-linecap","butt");u.attr("y1",(function(e){return e.height})).call(_)}function I(e,t,r){var a=e.selectAll("."+n.cn.axisBrush).data(o,i);a.enter().append("g").classed(n.cn.axisBrush,true);C(a,t,r)}function P(e){return e.svgBrush.extent.map((function(e){return e.slice()}))}function O(e){e.filterSpecified=false;e.svgBrush.extent=[[-Infinity,Infinity]]}function D(e){return function t(r){var n=r.brush;var a=P(n);var i=a.slice();n.filter.set(i);e()}}function z(e){var t=e.slice();var r=[];var n;var a=t.shift();while(a){n=a.slice();while((a=t.shift())&&a[0]<=n[1]){n[1]=Math.max(n[1],a[1])}r.push(n)}if(r.length===1&&r[0][0]>r[0][1]){r=[]}return r}function R(){var e=[];var t;var r;return{set:function(n){e=n.map((function(e){return e.slice().sort(s)})).sort(L);if(e.length===1&&e[0][0]===-Infinity&&e[0][1]===Infinity){e=[[0,-1]]}t=z(e);r=e.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[Infinity,-Infinity])},get:function(){return e.slice()},getConsolidated:function(){return t},getBounds:function(){return r}}}function F(e,t,r,n,a,i){var o=R();o.set(r);return{filter:o,filterSpecified:t,svgBrush:{extent:[],brushStartCallback:n,brushCallback:D(a),brushEndCallback:i}}}function B(e,t){if(Array.isArray(e[0])){e=e.map((function(e){return e.sort(s)}));if(!t.multiselect)e=[e[0]];else e=z(e.sort(L))}else e=[e.sort(s)];if(t.tickvals){var r=t.tickvals.slice().sort(s);e=e.map((function(e){var t=[h(0,r,e[0],[]),h(1,r,e[1],[])];if(t[1]>t[0])return t})).filter((function(e){return e}));if(!e.length)return}return e.length>1?e:e[0]}e.exports={makeBrush:F,ensureAxisBrush:I,cleanRanges:B}},71791:function(e,t,r){"use strict";e.exports={attributes:r(73362),supplyDefaults:r(3633),calc:r(24639),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:r(49351),categories:["gl","regl","noOpacity","noHover"],meta:{}}},49351:function(e,t,r){"use strict";var n=r(39898);var a=r(27659).a0;var i=r(21341);var o=r(77922);t.name="parcoords";t.plot=function(e){var t=a(e.calcdata,"parcoords")[0];if(t.length)i(e,t)};t.clean=function(e,t,r,n){var a=n._has&&n._has("parcoords");var i=t._has&&t._has("parcoords");if(a&&!i){n._paperdiv.selectAll(".parcoords").remove();n._glimages.selectAll("*").remove()}};t.toSVG=function(e){var t=e._fullLayout._glimages;var r=n.select(e).selectAll(".svg-container");var a=r.filter((function(e,t){return t===r.size()-1})).selectAll(".gl-canvas-context, .gl-canvas-focus");function i(){var e=this;var r=e.toDataURL("image/png");var n=t.append("svg:image");n.attr({xmlns:o.svg,"xlink:href":r,preserveAspectRatio:"none",x:0,y:0,width:e.style.width,height:e.style.height})}a.each(i);window.setTimeout((function(){n.selectAll("#filterBarPattern").attr("id","filterBarPattern")}),60)}},24639:function(e,t,r){"use strict";var n=r(71828).isArrayOrTypedArray;var a=r(21081);var i=r(28984).wrap;e.exports=function e(t,r){var s;var l;if(a.hasColorscale(r,"line")&&n(r.line.color)){s=r.line.color;l=a.extractOpts(r.line).colorscale;a.calc(t,r,{vals:s,containerStr:"line",cLetter:"c"})}else{s=o(r._length);l=[[0,r.line.color],[1,r.line.color]]}return i({lineColor:s,cscale:l})};function o(e){var t=new Array(e);for(var r=0;r<e;r++){t[r]=.5}return t}},25706:function(e){"use strict";e.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},3633:function(e,t,r){"use strict";var n=r(71828);var a=r(52075).hasColorscale;var i=r(1586);var o=r(27670).c;var s=r(85501);var l=r(89298);var u=r(73362);var f=r(57920);var c=r(25706).maxDimensionCount;var v=r(94397);function h(e,t,r,o,s){var l=s("line.color",r);if(a(e,"line")&&n.isArrayOrTypedArray(l)){if(l.length){s("line.colorscale");i(e,t,o,s,{prefix:"line.",cLetter:"c"});return l.length}else{t.line.color=r}}return Infinity}function p(e,t,r,a){function i(r,a){return n.coerce(e,t,u.dimensions,r,a)}var o=i("values");var s=i("visible");if(!(o&&o.length)){s=t.visible=false}if(s){i("label");i("tickvals");i("ticktext");i("tickformat");var c=i("range");t._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:c};l.setConvert(t._ax,a.layout);i("multiselect");var v=i("constraintrange");if(v){t.constraintrange=f.cleanRanges(v,t)}}}e.exports=function e(t,r,a,i){function l(e,a){return n.coerce(t,r,u,e,a)}var f=t.dimensions;if(Array.isArray(f)&&f.length>c){n.log("parcoords traces support up to "+c+" dimensions at the moment");f.splice(c)}var d=s(t,r,{name:"dimensions",layout:i,handleItemDefaults:p});var g=h(t,r,a,i,l);o(r,i,l);if(!Array.isArray(d)||!d.length){r.visible=false}v(r,d,"values",g);var y={family:i.font.family,size:Math.round(i.font.size/1.2),color:i.font.color};n.coerceFont(l,"labelfont",y);n.coerceFont(l,"tickfont",y);n.coerceFont(l,"rangefont",y);l("labelangle");l("labelside");l("unselected.line.color");l("unselected.line.opacity")}},1602:function(e,t,r){"use strict";var n=r(71828).isTypedArray;t.convertTypedArray=function(e){return n(e)?Array.prototype.slice.call(e):e};t.isOrdinal=function(e){return!!e.tickvals};t.isVisible=function(e){return e.visible||!("visible"in e)}},67618:function(e,t,r){"use strict";var n=r(71791);n.plot=r(21341);e.exports=n},83398:function(e,t,r){"use strict";var n=r(56068);var a=n(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]);var i=n(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]);var o=r(25706).maxDimensionCount;var s=r(71828);var l=1e-6;var u=2048;var f=new Uint8Array(4);var c=new Uint8Array(4);var v={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function h(e){e.read({x:0,y:0,width:1,height:1,data:f})}function p(e,t,r,n,a){var i=e._gl;i.enable(i.SCISSOR_TEST);i.scissor(t,r,n,a);e.clear({color:[0,0,0,0],depth:1})}function d(e,t,r,n,a,i){var o=i.key;function s(l){var u=Math.min(n,a-l*n);if(l===0){window.cancelAnimationFrame(r.currentRafs[o]);delete r.currentRafs[o];p(e,i.scissorX,i.scissorY,i.scissorWidth,i.viewBoxSize[1])}if(r.clearOnly){return}i.count=2*u;i.offset=2*l*n;t(i);if(l*n+u<a){r.currentRafs[o]=window.requestAnimationFrame((function(){s(l+1)}))}r.drawCompleted=false}if(!r.drawCompleted){h(e);r.drawCompleted=true}s(0)}function g(e){return Math.max(l,Math.min(1-l,e))}function y(e,t){var r=new Array(256);for(var n=0;n<256;n++){r[n]=e(n/255).concat(t)}return r}function m(e,t){return(e>>>8*t)%256/255}function x(e,t,r){var n=new Array(e*(o+4));var a=0;for(var i=0;i<e;i++){for(var s=0;s<o;s++){n[a++]=s<t.length?t[s].paddedUnitValues[i]:.5}n[a++]=m(i,2);n[a++]=m(i,1);n[a++]=m(i,0);n[a++]=g(r[i])}return n}function b(e,t,r){var n=new Array(t*8);var a=0;for(var i=0;i<t;i++){for(var o=0;o<2;o++){for(var s=0;s<4;s++){var l=e*4+s;var u=r[i*64+l];if(l===63&&o===0){u*=-1}n[a++]=u}}}return n}function _(e){var t="0"+e;return t.substr(t.length-2)}function w(e){return e<o?"p"+_(e+1)+"_"+_(e+4):"colors"}function T(e,t,r){for(var n=0;n<=o;n+=4){e[w(n)](b(n/4,t,r))}}function k(e){var t={};for(var r=0;r<=o;r+=4){t[w(r)]=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)})}return t}function A(e,t,r,n,a,i,o,l,u,f,c,v,h,p){var d=[[],[]];for(var g=0;g<64;g++){d[0][g]=g===a?1:0;d[1][g]=g===i?1:0}o*=p;l*=p;u*=p;f*=p;var y=e.lines.canvasOverdrag*p;var m=e.domain;var x=e.canvasWidth*p;var b=e.canvasHeight*p;var _=e.pad.l*p;var w=e.pad.b*p;var T=e.layoutHeight*p;var k=e.layoutWidth*p;var A=e.deselectedLines.color;var M=e.deselectedLines.opacity;var S=s.extendFlat({key:c,resolution:[x,b],viewBoxPos:[o+y,l],viewBoxSize:[u,f],i0:a,i1:i,dim0A:d[0].slice(0,16),dim0B:d[0].slice(16,32),dim0C:d[0].slice(32,48),dim0D:d[0].slice(48,64),dim1A:d[1].slice(0,16),dim1B:d[1].slice(16,32),dim1C:d[1].slice(32,48),dim1D:d[1].slice(48,64),drwLayer:v,contextColor:[A[0]/255,A[1]/255,A[2]/255,M!=="auto"?A[3]*M:Math.max(1/255,Math.pow(1/e.lines.color.length,1/3))],scissorX:(n===t?0:o+y)+(_-y)+k*m.x[0],scissorWidth:(n===r?x-o+y:u+.5)+(n===t?o+y:0),scissorY:l+w+T*m.y[0],scissorHeight:f,viewportX:_-y+k*m.x[0],viewportY:w+T*m.y[0],viewportWidth:x,viewportHeight:b},h);return S}function M(e){var t=u-1;var r=Math.max(0,Math.floor(e[0]*t),0);var n=Math.min(t,Math.ceil(e[1]*t),t);return[Math.min(r,n),Math.max(r,n)]}e.exports=function(e,t){var r=t.context;var n=t.pick;var o=t.regl;var l=o._gl;var f=l.getParameter(l.ALIASED_LINE_WIDTH_RANGE);var h=Math.max(f[0],Math.min(f[1],t.viewModel.plotGlPixelRatio));var g={currentRafs:{},drawCompleted:true,clearOnly:false};var m;var b;var _;var w;var S=k(o);var E;var L=o.texture(v);var C=[];P(t);var I=o({profile:false,blend:{enable:r,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!r,mask:true,func:"less",range:[0,1]},cull:{enable:true,face:"back"},scissor:{enable:true,box:{x:o.prop("scissorX"),y:o.prop("scissorY"),width:o.prop("scissorWidth"),height:o.prop("scissorHeight")}},viewport:{x:o.prop("viewportX"),y:o.prop("viewportY"),width:o.prop("viewportWidth"),height:o.prop("viewportHeight")},dither:false,vert:a,frag:i,primitive:"lines",lineWidth:h,attributes:S,uniforms:{resolution:o.prop("resolution"),viewBoxPos:o.prop("viewBoxPos"),viewBoxSize:o.prop("viewBoxSize"),dim0A:o.prop("dim0A"),dim1A:o.prop("dim1A"),dim0B:o.prop("dim0B"),dim1B:o.prop("dim1B"),dim0C:o.prop("dim0C"),dim1C:o.prop("dim1C"),dim0D:o.prop("dim0D"),dim1D:o.prop("dim1D"),loA:o.prop("loA"),hiA:o.prop("hiA"),loB:o.prop("loB"),hiB:o.prop("hiB"),loC:o.prop("loC"),hiC:o.prop("hiC"),loD:o.prop("loD"),hiD:o.prop("hiD"),palette:L,contextColor:o.prop("contextColor"),maskTexture:o.prop("maskTexture"),drwLayer:o.prop("drwLayer"),maskHeight:o.prop("maskHeight")},offset:o.prop("offset"),count:o.prop("count")});function P(e){m=e.model;b=e.viewModel;_=b.dimensions.slice();w=_[0]?_[0].values.length:0;var t=m.lines;var a=n?t.color.map((function(e,r){return r/t.color.length})):t.color;var i=x(w,_,a);T(S,w,i);if(!r&&!n){L=o.texture(s.extendFlat({data:y(m.unitToColor,255)},v))}}function O(e){var t,r,n;var a=[[],[]];for(n=0;n<64;n++){var i=!e&&n<_.length?_[n].brush.filter.getBounds():[-Infinity,Infinity];a[0][n]=i[0];a[1][n]=i[1]}var s=u*8;var l=new Array(s);for(t=0;t<s;t++){l[t]=255}if(!e){for(t=0;t<_.length;t++){var f=t%8;var c=(t-f)/8;var v=Math.pow(2,f);var h=_[t];var p=h.brush.filter.get();if(p.length<2)continue;var d=M(p[0])[1];for(r=1;r<p.length;r++){var g=M(p[r]);for(n=d+1;n<g[0];n++){l[n*8+c]&=~v}d=Math.max(d,g[1])}}}var y={shape:[8,u],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:l};if(E)E(y);else E=o.texture(y);return{maskTexture:E,maskHeight:u,loA:a[0].slice(0,16),loB:a[0].slice(16,32),loC:a[0].slice(32,48),loD:a[0].slice(48,64),hiA:a[1].slice(0,16),hiB:a[1].slice(16,32),hiC:a[1].slice(32,48),hiD:a[1].slice(48,64)}}function D(e,t,a){var i=e.length;var s;var l;var u;var f=Infinity;var c=-Infinity;for(s=0;s<i;s++){if(e[s].dim0.canvasX<f){f=e[s].dim0.canvasX;l=s}if(e[s].dim1.canvasX>c){c=e[s].dim1.canvasX;u=s}}if(i===0){p(o,0,0,m.canvasWidth,m.canvasHeight)}var v=O(r);for(s=0;s<i;s++){var h=e[s];var y=h.dim0.crossfilterDimensionIndex;var x=h.dim1.crossfilterDimensionIndex;var b=h.canvasX;var _=h.canvasY;var T=b+h.panelSizeX;var k=h.plotGlPixelRatio;if(t||!C[y]||C[y][0]!==b||C[y][1]!==T){C[y]=[b,T];var M=A(m,l,u,s,y,x,b,_,h.panelSizeX,h.panelSizeY,h.dim0.crossfilterDimensionIndex,r?0:n?2:1,v,k);g.clearOnly=a;var S=t?m.lines.blockLineCount:w;d(o,I,g,S,w,M)}}}function z(e,t){o.read({x:e,y:t,width:1,height:1,data:c});return c}function R(e,t,r,n){var a=new Uint8Array(4*r*n);o.read({x:e,y:t,width:r,height:n,data:a});return a}function F(){e.style["pointer-events"]="none";L.destroy();if(E)E.destroy();for(var t in S)S[t].destroy()}return{render:D,readPixel:z,readPixels:R,destroy:F,update:P}}},94397:function(e){"use strict";e.exports=function(e,t,r,n){if(!n)n=Infinity;var a,i;for(a=0;a<t.length;a++){i=t[a];if(i.visible)n=Math.min(n,i[r].length)}if(n===Infinity)n=0;e._length=n;for(a=0;a<t.length;a++){i=t[a];if(i.visible)i._length=n}return n}},17171:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);var i=a.numberFormat;var o=r(36652);var s=r(89298);var l=a.strRotate;var u=a.strTranslate;var f=r(63893);var c=r(91424);var v=r(21081);var h=r(28984);var p=h.keyFun;var d=h.repeat;var g=h.unwrap;var y=r(1602);var m=r(25706);var x=r(57920);var b=r(83398);function _(e,t,r){return a.aggNums(e,null,t,r)}function w(e,t){return k(_(Math.min,e,t),_(Math.max,e,t))}function T(e){var t=e.range;return t?k(t[0],t[1]):w(e.values,e._length)}function k(e,t){if(isNaN(e)||!isFinite(e)){e=0}if(isNaN(t)||!isFinite(t)){t=0}if(e===t){if(e===0){e-=1;t+=1}else{e*=.9;t*=1.1}}return[e,t]}function A(e,t){if(t){return function(r,n){var a=t[n];if(a===null||a===undefined)return e(r);return a}}return e}function M(e,t,r,a,o){var s=T(r);if(a){return n.scale.ordinal().domain(a.map(A(i(r.tickformat),o))).range(a.map((function(r){var n=(r-s[0])/(s[1]-s[0]);return e-t+n*(2*t-e)})))}return n.scale.linear().domain(s).range([e-t,t])}function S(e,t){return n.scale.linear().range([t,e-t])}function E(e,t){return n.scale.linear().domain(T(e)).range([t,1-t])}function L(e){if(!e.tickvals)return;var t=T(e);return n.scale.ordinal().domain(e.tickvals).range(e.tickvals.map((function(e){return(e-t[0])/(t[1]-t[0])})))}function C(e){var t=e.map((function(e){return e[0]}));var r=e.map((function(e){var t=o(e[1]);return n.rgb("rgb("+t[0]+","+t[1]+","+t[2]+")")}));var a=function(e){return function(t){return t[e]}};var i="rgb".split("").map((function(e){return n.scale.linear().clamp(true).domain(t).range(r.map(a(e)))}));return function(e){return i.map((function(t){return t(e)}))}}function I(e){return e.dimensions.some((function(e){return e.brush.filterSpecified}))}function P(e,t,r){var i=g(t);var s=i.trace;var l=y.convertTypedArray(i.lineColor);var u=s.line;var f={color:o(s.unselected.line.color),opacity:s.unselected.line.opacity};var c=v.extractOpts(u);var h=c.reversescale?v.flipScale(i.cscale):i.cscale;var p=s.domain;var d=s.dimensions;var x=e.width;var b=s.labelangle;var _=s.labelside;var w=s.labelfont;var k=s.tickfont;var A=s.rangefont;var M=a.extendDeepNoArrays({},u,{color:l.map(n.scale.linear().domain(T({values:l,range:[c.min,c.max],_length:s._length}))),blockLineCount:m.blockLineCount,canvasOverdrag:m.overdrag*m.canvasPixelRatio});var S=Math.floor(x*(p.x[1]-p.x[0]));var E=Math.floor(e.height*(p.y[1]-p.y[0]));var L=e.margin||{l:80,r:80,t:100,b:80};var I=S;var P=E;return{key:r,colCount:d.filter(y.isVisible).length,dimensions:d,tickDistance:m.tickDistance,unitToColor:C(h),lines:M,deselectedLines:f,labelAngle:b,labelSide:_,labelFont:w,tickFont:k,rangeFont:A,layoutWidth:x,layoutHeight:e.height,domain:p,translateX:p.x[0]*x,translateY:e.height-p.y[1]*e.height,pad:L,canvasWidth:I*m.canvasPixelRatio+2*M.canvasOverdrag,canvasHeight:P*m.canvasPixelRatio,width:I,height:P,canvasPixelRatio:m.canvasPixelRatio}}function O(e,t,r){var n=r.width;var o=r.height;var s=r.dimensions;var l=r.canvasPixelRatio;var u=function(e){return n*e/Math.max(1,r.colCount-1)};var f=m.verticalPadding/o;var c=S(o,m.verticalPadding);var v={key:r.key,xScale:u,model:r,inBrushDrag:false};var h={};v.dimensions=s.filter(y.isVisible).map((function(n,s){var p=E(n,f);var d=h[n.label];h[n.label]=(d||0)+1;var g=n.label+(d?"__"+d:"");var b=n.constraintrange;var _=b&&b.length;if(_&&!Array.isArray(b[0])){b=[b]}var w=_?b.map((function(e){return e.map(p)})):[[-Infinity,Infinity]];var T=function(){var t=v;t.focusLayer&&t.focusLayer.render(t.panels,true);var r=I(t);if(!e.contextShown()&&r){t.contextLayer&&t.contextLayer.render(t.panels,true);e.contextShown(true)}else if(e.contextShown()&&!r){t.contextLayer&&t.contextLayer.render(t.panels,true,true);e.contextShown(false)}};var k=n.values;if(k.length>n._length){k=k.slice(0,n._length)}var A=n.tickvals;var S;function C(e,t){return{val:e,text:S[t]}}function P(e,t){return e.val-t.val}if(Array.isArray(A)&&A.length){S=n.ticktext;if(!Array.isArray(S)||!S.length){S=A.map(i(n.tickformat))}else if(S.length>A.length){S=S.slice(0,A.length)}else if(A.length>S.length){A=A.slice(0,S.length)}for(var O=1;O<A.length;O++){if(A[O]<A[O-1]){var D=A.map(C).sort(P);for(var z=0;z<A.length;z++){A[z]=D[z].val;S[z]=D[z].text}break}}}else A=undefined;k=y.convertTypedArray(k);return{key:g,label:n.label,tickFormat:n.tickformat,tickvals:A,ticktext:S,ordinal:y.isOrdinal(n),multiselect:n.multiselect,xIndex:s,crossfilterDimensionIndex:s,visibleIndex:n._index,height:o,values:k,paddedUnitValues:k.map(p),unitTickvals:A&&A.map(p),xScale:u,x:u(s),canvasX:u(s)*l,unitToPaddedPx:c,domainScale:M(o,m.verticalPadding,n,A,S),ordinalScale:L(n),parent:v,model:r,brush:x.makeBrush(e,_,w,(function(){e.linePickActive(false)}),T,(function(r){v.focusLayer.render(v.panels,true);v.pickLayer&&v.pickLayer.render(v.panels,true);e.linePickActive(true);if(t&&t.filterChanged){var i=p.invert;var o=r.map((function(e){return e.map(i).sort(a.sorterAsc)})).sort((function(e,t){return e[0]-t[0]}));t.filterChanged(v.key,n._index,o)}}))}}));return v}function D(e){e.classed(m.cn.axisExtentText,true).attr("text-anchor","middle").style("cursor","default")}function z(){var e=true;var t=false;return{linePickActive:function(t){return arguments.length?e=!!t:e},contextShown:function(e){return arguments.length?t=!!e:t}}}function R(e,t){var r=t==="top"?1:-1;var n=e*Math.PI/180;var a=Math.sin(n);var i=Math.cos(n);return{dir:r,dx:a,dy:i,degrees:e}}function F(e,t,r){var n=t.panels||(t.panels=[]);var a=e.data();for(var i=0;i<a.length-1;i++){var o=n[i]||(n[i]={});var s=a[i];var l=a[i+1];o.dim0=s;o.dim1=l;o.canvasX=s.canvasX;o.panelSizeX=l.canvasX-s.canvasX;o.panelSizeY=t.model.canvasHeight;o.y=0;o.canvasY=0;o.plotGlPixelRatio=r}}function B(e){for(var t=0;t<e.length;t++){for(var r=0;r<e[t].length;r++){var n=e[t][r].trace;var a=n.dimensions;for(var i=0;i<a.length;i++){var o=a[i].values;var l=a[i]._ax;if(l){if(!l.range){l.range=w(o,n._length)}else{l.range=k(l.range[0],l.range[1])}if(!l.dtick){l.dtick=.01*(Math.abs(l.range[1]-l.range[0])||1)}l.tickformat=a[i].tickformat;s.calcTicks(l);l.cleanRange()}}}}}function N(e,t){return s.tickText(e._ax,t,false).text}function j(e,t){if(e.ordinal)return"";var r=e.domainScale.domain();var n=r[t?r.length-1:0];return N(e.model.dimensions[e.visibleIndex],n)}e.exports=function e(t,r,i,o){var s=t._context.staticPlot;var v=t._fullLayout;var h=v._toppaper;var _=v._glcontainer;var w=t._context.plotGlPixelRatio;var T=t._fullLayout.paper_bgcolor;B(r);var k=z();var A=r.filter((function(e){return g(e).trace.visible})).map(P.bind(0,i)).map(O.bind(0,k,o));_.each((function(e,t){return a.extendFlat(e,A[t])}));var M=_.selectAll(".gl-canvas").each((function(e){e.viewModel=A[0];e.viewModel.plotGlPixelRatio=w;e.viewModel.paperColor=T;e.model=e.viewModel?e.viewModel.model:null}));var S=null;var E=M.filter((function(e){return e.pick}));E.style("pointer-events",s?"none":"auto").on("mousemove",(function(e){if(k.linePickActive()&&e.lineLayer&&o&&o.hover){var t=n.event;var r=this.width;var a=this.height;var i=n.mouse(this);var s=i[0];var l=i[1];if(s<0||l<0||s>=r||l>=a){return}var u=e.lineLayer.readPixel(s,a-1-l);var f=u[3]!==0;var c=f?u[2]+256*(u[1]+256*u[0]):null;var v={x:s,y:l,clientX:t.clientX,clientY:t.clientY,dataIndex:e.model.key,curveNumber:c};if(c!==S){if(f){o.hover(v)}else if(o.unhover){o.unhover(v)}S=c}}}));M.style("opacity",(function(e){return e.pick?0:1}));h.style("background","rgba(255, 255, 255, 0)");var L=h.selectAll("."+m.cn.parcoords).data(A,p);L.exit().remove();L.enter().append("g").classed(m.cn.parcoords,true).style("shape-rendering","crispEdges").style("pointer-events","none");L.attr("transform",(function(e){return u(e.model.translateX,e.model.translateY)}));var C=L.selectAll("."+m.cn.parcoordsControlView).data(d,p);C.enter().append("g").classed(m.cn.parcoordsControlView,true);C.attr("transform",(function(e){return u(e.model.pad.l,e.model.pad.t)}));var U=C.selectAll("."+m.cn.yAxis).data((function(e){return e.dimensions}),p);U.enter().append("g").classed(m.cn.yAxis,true);C.each((function(e){F(U,e,w)}));M.each((function(e){if(e.viewModel){if(!e.lineLayer||o){e.lineLayer=b(this,e)}else e.lineLayer.update(e);if(e.key||e.key===0)e.viewModel[e.key]=e.lineLayer;var t=!e.context||o;e.lineLayer.render(e.viewModel.panels,t)}}));U.attr("transform",(function(e){return u(e.xScale(e.xIndex),0)}));U.call(n.behavior.drag().origin((function(e){return e})).on("drag",(function(e){var t=e.parent;k.linePickActive(false);e.x=Math.max(-m.overdrag,Math.min(e.model.width+m.overdrag,n.event.x));e.canvasX=e.x*e.model.canvasPixelRatio;U.sort((function(e,t){return e.x-t.x})).each((function(t,r){t.xIndex=r;t.x=e===t?t.x:t.xScale(t.xIndex);t.canvasX=t.x*t.model.canvasPixelRatio}));F(U,t,w);U.filter((function(t){return Math.abs(e.xIndex-t.xIndex)!==0})).attr("transform",(function(e){return u(e.xScale(e.xIndex),0)}));n.select(this).attr("transform",u(e.x,0));U.each((function(r,n,a){if(a===e.parent.key)t.dimensions[n]=r}));t.contextLayer&&t.contextLayer.render(t.panels,false,!I(t));t.focusLayer.render&&t.focusLayer.render(t.panels)})).on("dragend",(function(e){var t=e.parent;e.x=e.xScale(e.xIndex);e.canvasX=e.x*e.model.canvasPixelRatio;F(U,t,w);n.select(this).attr("transform",(function(e){return u(e.x,0)}));t.contextLayer&&t.contextLayer.render(t.panels,false,!I(t));t.focusLayer&&t.focusLayer.render(t.panels);t.pickLayer&&t.pickLayer.render(t.panels,true);k.linePickActive(true);if(o&&o.axesMoved){o.axesMoved(t.key,t.dimensions.map((function(e){return e.crossfilterDimensionIndex})))}})));U.exit().remove();var V=U.selectAll("."+m.cn.axisOverlays).data(d,p);V.enter().append("g").classed(m.cn.axisOverlays,true);V.selectAll("."+m.cn.axis).remove();var H=V.selectAll("."+m.cn.axis).data(d,p);H.enter().append("g").classed(m.cn.axis,true);H.each((function(e){var t=e.model.height/e.model.tickDistance;var r=e.domainScale;var a=r.domain();n.select(this).call(n.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(t,e.tickFormat).tickValues(e.ordinal?a:null).tickFormat((function(t){return y.isOrdinal(e)?t:N(e.model.dimensions[e.visibleIndex],t)})).scale(r));c.font(H.selectAll("text"),e.model.tickFont)}));H.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px");H.selectAll("text").style("text-shadow",f.makeTextShadow(T)).style("cursor","default");var q=V.selectAll("."+m.cn.axisHeading).data(d,p);q.enter().append("g").classed(m.cn.axisHeading,true);var G=q.selectAll("."+m.cn.axisTitle).data(d,p);G.enter().append("text").classed(m.cn.axisTitle,true).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",s?"none":"auto");G.text((function(e){return e.label})).each((function(e){var r=n.select(this);c.font(r,e.model.labelFont);f.convertToTspans(r,t)})).attr("transform",(function(e){var t=R(e.model.labelAngle,e.model.labelSide);var r=m.axisTitleOffset;return(t.dir>0?"":u(0,2*r+e.model.height))+l(t.degrees)+u(-r*t.dx,-r*t.dy)})).attr("text-anchor",(function(e){var t=R(e.model.labelAngle,e.model.labelSide);var r=Math.abs(t.dx);var n=Math.abs(t.dy);if(2*r>n){return t.dir*t.dx<0?"start":"end"}else{return"middle"}}));var Z=V.selectAll("."+m.cn.axisExtent).data(d,p);Z.enter().append("g").classed(m.cn.axisExtent,true);var Y=Z.selectAll("."+m.cn.axisExtentTop).data(d,p);Y.enter().append("g").classed(m.cn.axisExtentTop,true);Y.attr("transform",u(0,-m.axisExtentOffset));var W=Y.selectAll("."+m.cn.axisExtentTopText).data(d,p);W.enter().append("text").classed(m.cn.axisExtentTopText,true).call(D);W.text((function(e){return j(e,true)})).each((function(e){c.font(n.select(this),e.model.rangeFont)}));var X=Z.selectAll("."+m.cn.axisExtentBottom).data(d,p);X.enter().append("g").classed(m.cn.axisExtentBottom,true);X.attr("transform",(function(e){return u(0,e.model.height+m.axisExtentOffset)}));var J=X.selectAll("."+m.cn.axisExtentBottomText).data(d,p);J.enter().append("text").classed(m.cn.axisExtentBottomText,true).attr("dy","0.75em").call(D);J.text((function(e){return j(e,false)})).each((function(e){c.font(n.select(this),e.model.rangeFont)}));x.ensureAxisBrush(V,T,t)}},21341:function(e,t,r){"use strict";var n=r(17171);var a=r(79749);var i=r(1602).isVisible;var o={};function s(e,t,r){var n=t.indexOf(r);var a=e.indexOf(n);if(a===-1){a+=t.length}return a}function l(e,t){return function r(n,a){return s(e,t,n)-s(e,t,a)}}var u=e.exports=function e(t,r){var s=t._fullLayout;var u=a(t,[],o);if(!u)return;var f={};var c={};var v={};var h={};var p=s._size;r.forEach((function(e,r){var n=e[0].trace;v[r]=n.index;var a=h[r]=n._fullInput.index;f[r]=t.data[a].dimensions;c[r]=t.data[a].dimensions.slice()}));var d=function(e,r,n){var a=c[e][r];var i=n.map((function(e){return e.slice()}));var o="dimensions["+r+"].constraintrange";var l=s._tracePreGUI[t._fullData[v[e]]._fullInput.uid];if(l[o]===undefined){var u=a.constraintrange;l[o]=u||null}var f=t._fullData[v[e]].dimensions[r];if(!i.length){delete a.constraintrange;delete f.constraintrange;i=null}else{if(i.length===1)i=i[0];a.constraintrange=i;f.constraintrange=i.slice();i=[i]}var p={};p[o]=i;t.emit("plotly_restyle",[p,[h[e]]])};var g=function(e){t.emit("plotly_hover",e)};var y=function(e){t.emit("plotly_unhover",e)};var m=function(e,r){var n=l(r,c[e].filter(i));f[e].sort(n);c[e].filter((function(e){return!i(e)})).sort((function(t){return c[e].indexOf(t)})).forEach((function(t){f[e].splice(f[e].indexOf(t),1);f[e].splice(c[e].indexOf(t),0,t)}));t.emit("plotly_restyle",[{dimensions:[f[e]]},[h[e]]])};n(t,r,{width:p.w,height:p.h,margin:{t:p.t,r:p.r,b:p.b,l:p.l}},{filterChanged:d,hover:g,unhover:y,axesMoved:m})};u.reglPrecompiled=o},34e3:function(e,t,r){"use strict";var n=r(9012);var a=r(27670).Y;var i=r(41940);var o=r(22399);var s=r(5386).fF;var l=r(5386).si;var u=r(1426).extendFlat;var f=r(79952).u;var c=i({editType:"plot",arrayOk:true,colorEditType:"plot"});e.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:true,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:true,editType:"style"},editType:"calc"},pattern:f,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:true,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:u({},n.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:s({},{keys:["label","color","value","percent","text"]}),texttemplate:l({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:true,editType:"plot"},textfont:u({},c,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:u({},c,{}),outsidetextfont:u({},c,{}),automargin:{valType:"boolean",dflt:false,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:u({},c,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:a({name:"pie",trace:true,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:true,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:true,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:u({},c,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},13584:function(e,t,r){"use strict";var n=r(74875);t.name="pie";t.plot=function(e,r,a,i){n.plotBasePlot(t.name,e,r,a,i)};t.clean=function(e,r,a,i){n.cleanBasePlot(t.name,e,r,a,i)}},32354:function(e,t,r){"use strict";var n=r(92770);var a=r(84267);var i=r(7901);var o={};function s(e,t){var r=[];var a=e._fullLayout;var i=a.hiddenlabels||[];var o=t.labels;var s=t.marker.colors||[];var u=t.values;var f=t._length;var c=t._hasValues&&f;var v,h;if(t.dlabel){o=new Array(f);for(v=0;v<f;v++){o[v]=String(t.label0+v*t.dlabel)}}var p={};var d=l(a["_"+t.type+"colormap"]);var g=0;var y=false;for(v=0;v<f;v++){var m,x,b;if(c){m=u[v];if(!n(m))continue;m=+m}else m=1;x=o[v];if(x===undefined||x==="")x=v;x=String(x);var _=p[x];if(_===undefined){p[x]=r.length;b=i.indexOf(x)!==-1;if(!b)g+=m;r.push({v:m,label:x,color:d(s[v],x),i:v,pts:[v],hidden:b})}else{y=true;h=r[_];h.v+=m;h.pts.push(v);if(!h.hidden)g+=m;if(h.color===false&&s[v]){h.color=d(s[v],x)}}}r=r.filter((function(e){return e.v>=0}));var w=t.type==="funnelarea"?y:t.sort;if(w)r.sort((function(e,t){return t.v-e.v}));if(r[0])r[0].vTotal=g;return r}function l(e){return function t(r,n){if(!r)return false;r=a(r);if(!r.isValid())return false;r=i.addOpacity(r,r.getAlpha());if(!e[n])e[n]=r;return r}}function u(e,t){var r=(t||{}).type;if(!r)r="pie";var n=e._fullLayout;var a=e.calcdata;var i=n[r+"colorway"];var s=n["_"+r+"colormap"];if(n["extend"+r+"colors"]){i=f(i,o)}var l=0;for(var u=0;u<a.length;u++){var c=a[u];var v=c[0].trace.type;if(v!==r)continue;for(var h=0;h<c.length;h++){var p=c[h];if(p.color===false){if(s[p.label]){p.color=s[p.label]}else{s[p.label]=p.color=i[l%i.length];l++}}}}}function f(e,t){var r;var n=JSON.stringify(e);var i=t[n];if(!i){i=e.slice();for(r=0;r<e.length;r++){i.push(a(e[r]).lighten(20).toHexString())}for(r=0;r<e.length;r++){i.push(a(e[r]).darken(20).toHexString())}t[n]=i}return i}e.exports={calc:s,crossTraceCalc:u,makePullColorFn:l,generateExtendedColors:f}},37434:function(e,t,r){"use strict";var n=r(92770);var a=r(71828);var i=r(34e3);var o=r(27670).c;var s=r(90769).handleText;var l=r(71828).coercePattern;function u(e,t){var r=Array.isArray(e);var i=a.isArrayOrTypedArray(t);var o=Math.min(r?e.length:Infinity,i?t.length:Infinity);if(!isFinite(o))o=0;if(o&&i){var s;for(var l=0;l<o;l++){var u=t[l];if(n(u)&&u>0){s=true;break}}if(!s)o=0}return{hasLabels:r,hasValues:i,len:o}}function f(e,t,r,n,a){var i=n("marker.line.width");if(i){n("marker.line.color",a?undefined:r.paper_bgcolor)}var o=n("marker.colors");l(n,"marker.pattern",o);if(e.marker&&!t.marker.pattern.fgcolor)t.marker.pattern.fgcolor=e.marker.colors;if(!t.marker.pattern.bgcolor)t.marker.pattern.bgcolor=r.paper_bgcolor}function c(e,t,r,n){function l(r,n){return a.coerce(e,t,i,r,n)}var c=l("labels");var v=l("values");var h=u(c,v);var p=h.len;t._hasLabels=h.hasLabels;t._hasValues=h.hasValues;if(!t._hasLabels&&t._hasValues){l("label0");l("dlabel")}if(!p){t.visible=false;return}t._length=p;f(e,t,n,l,true);l("scalegroup");var d=l("text");var g=l("texttemplate");var y;if(!g)y=l("textinfo",Array.isArray(d)?"text+percent":"percent");l("hovertext");l("hovertemplate");if(g||y&&y!=="none"){var m=l("textposition");s(e,t,n,l,m,{moduleHasSelected:false,moduleHasUnselected:false,moduleHasConstrain:false,moduleHasCliponaxis:false,moduleHasTextangle:false,moduleHasInsideanchor:false});var x=Array.isArray(m)||m==="auto";var b=x||m==="outside";if(b){l("automargin")}if(m==="inside"||m==="auto"||Array.isArray(m)){l("insidetextorientation")}}o(t,n,l);var _=l("hole");var w=l("title.text");if(w){var T=l("title.position",_?"middle center":"top center");if(!_&&T==="middle center")t.title.position="top center";a.coerceFont(l,"title.font",n.font)}l("sort");l("direction");l("rotation");l("pull")}e.exports={handleLabelsAndValues:u,handleMarkerDefaults:f,supplyDefaults:c}},20007:function(e,t,r){"use strict";var n=r(23469).appendArrayMultiPointValues;e.exports=function e(t,r){var a={curveNumber:r.index,pointNumbers:t.pts,data:r._input,fullData:r,label:t.label,color:t.color,value:t.v,percent:t.percent,text:t.text,bbox:t.bbox,v:t.v};if(t.pts.length===1)a.pointNumber=a.i=t.pts[0];n(a,r,t.pts);if(r.type==="funnelarea"){delete a.v;delete a.i}return a}},22209:function(e,t,r){"use strict";var n=r(91424);var a=r(7901);e.exports=function e(t,r,i,o){var s=i.marker.pattern;if(s&&s.shape){n.pointStyle(t,i,o,r)}else{a.fill(t,r.color)}}},53581:function(e,t,r){"use strict";var n=r(71828);function a(e){return e.indexOf("e")!==-1?e.replace(/[.]?0+e/,"e"):e.indexOf(".")!==-1?e.replace(/[.]?0+$/,""):e}t.formatPiePercent=function e(t,r){var i=a((t*100).toPrecision(3));return n.numSeparate(i,r)+"%"};t.formatPieValue=function e(t,r){var i=a(t.toPrecision(10));return n.numSeparate(i,r)};t.getFirstFilled=function e(t,r){if(!Array.isArray(t))return;for(var n=0;n<r.length;n++){var a=t[r[n]];if(a||a===0||a==="")return a}};t.castOption=function e(r,n){if(Array.isArray(r))return t.getFirstFilled(r,n);else if(r)return r};t.getRotationAngle=function(e){return(e==="auto"?0:e)*Math.PI/180}},58810:function(e,t,r){"use strict";e.exports={attributes:r(34e3),supplyDefaults:r(37434).supplyDefaults,supplyLayoutDefaults:r(92097),layoutAttributes:r(92774),calc:r(32354).calc,crossTraceCalc:r(32354).crossTraceCalc,plot:r(14575).plot,style:r(68357),styleOne:r(63463),moduleType:"trace",name:"pie",basePlotModule:r(13584),categories:["pie-like","pie","showLegend"],meta:{}}},92774:function(e){"use strict";e.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:true,editType:"calc"}}},92097:function(e,t,r){"use strict";var n=r(71828);var a=r(92774);e.exports=function e(t,r){function i(e,i){return n.coerce(t,r,a,e,i)}i("hiddenlabels");i("piecolorway",r.colorway);i("extendpiecolors")}},14575:function(e,t,r){"use strict";var n=r(39898);var a=r(74875);var i=r(30211);var o=r(7901);var s=r(91424);var l=r(71828);var u=l.strScale;var f=l.strTranslate;var c=r(63893);var v=r(72597);var h=v.recordMinTextSize;var p=v.clearMinTextSize;var d=r(97313).TEXTPAD;var g=r(53581);var y=r(20007);var m=r(71828).isValidTextValue;function x(e,t){var r=e._context.staticPlot;var i=e._fullLayout;var o=i._size;p("pie",i);k(t,e);j(t,o);var v=l.makeTraceGroups(i._pielayer,t,"trace").each((function(t){var v=n.select(this);var p=t[0];var d=p.trace;V(t);v.attr("stroke-linejoin","round");v.each((function(){var y=n.select(this).selectAll("g.slice").data(t);y.enter().append("g").classed("slice",true);y.exit().remove();var m=[[[],[]],[[],[]]];var x=false;y.each((function(a,o){if(a.hidden){n.select(this).selectAll("path,g").remove();return}a.pointNumber=a.i;a.curveNumber=d.index;m[a.pxmid[1]<0?0:1][a.pxmid[0]<0?0:1].push(a);var u=p.cx;var f=p.cy;var v=n.select(this);var y=v.selectAll("path.surface").data([a]);y.enter().append("path").classed("surface",true).style({"pointer-events":r?"none":"all"});v.call(_,e,t);if(d.pull){var b=+g.castOption(d.pull,a.pts)||0;if(b>0){u+=b*a.pxmid[0];f+=b*a.pxmid[1]}}a.cxFinal=u;a.cyFinal=f;function k(e,t,r,n){var i=n*(t[0]-e[0]);var o=n*(t[1]-e[1]);return"a"+n*p.r+","+n*p.r+" 0 "+a.largeArc+(r?" 1 ":" 0 ")+i+","+o}var M=d.hole;if(a.v===p.vTotal){var S="M"+(u+a.px0[0])+","+(f+a.px0[1])+k(a.px0,a.pxmid,true,1)+k(a.pxmid,a.px0,true,1)+"Z";if(M){y.attr("d","M"+(u+M*a.px0[0])+","+(f+M*a.px0[1])+k(a.px0,a.pxmid,false,M)+k(a.pxmid,a.px0,false,M)+"Z"+S)}else y.attr("d",S)}else{var E=k(a.px0,a.px1,true,1);if(M){var L=1-M;y.attr("d","M"+(u+M*a.px1[0])+","+(f+M*a.px1[1])+k(a.px1,a.px0,false,M)+"l"+L*a.px0[0]+","+L*a.px0[1]+E+"Z")}else{y.attr("d","M"+u+","+f+"l"+a.px0[0]+","+a.px0[1]+E+"Z")}}q(e,a,p);var C=g.castOption(d.textposition,a.pts);var I=v.selectAll("g.slicetext").data(a.text&&C!=="none"?[0]:[]);I.enter().append("g").classed("slicetext",true);I.exit().remove();I.each((function(){var r=l.ensureSingle(n.select(this),"text","",(function(e){e.attr("data-notex",1)}));var v=l.ensureUniformFontSize(e,C==="outside"?w(d,a,i.font):T(d,a,i.font));r.text(a.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(s.font,v).call(c.convertToTspans,e);var g=s.bBox(r.node());var y;if(C==="outside"){y=O(g,a)}else{y=A(g,a,p);if(C==="auto"&&y.scale<1){var m=l.ensureUniformFontSize(e,d.outsidetextfont);r.call(s.font,m);g=s.bBox(r.node());y=O(g,a)}}var b=y.textPosAngle;var _=b===undefined?a.pxmid:H(p.r,b);y.targetX=u+_[0]*y.rCenter+(y.x||0);y.targetY=f+_[1]*y.rCenter+(y.y||0);G(y,g);if(y.outside){var k=y.targetY;a.yLabelMin=k-g.height/2;a.yLabelMid=k;a.yLabelMax=k+g.height/2;a.labelExtraX=0;a.labelExtraY=0;x=true}y.fontSize=v.size;h(d.type,y,i);t[o].transform=y;l.setTransormAndDisplay(r,y)}))}));var k=n.select(this).selectAll("g.titletext").data(d.title.text?[0]:[]);k.enter().append("g").classed("titletext",true);k.exit().remove();k.each((function(){var t=l.ensureSingle(n.select(this),"text","",(function(e){e.attr("data-notex",1)}));var r=d.title.text;if(d._meta){r=l.templateString(r,d._meta)}t.text(r).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(s.font,d.title.font).call(c.convertToTspans,e);var a;if(d.title.position==="middle center"){a=D(p)}else{a=z(p,o)}t.attr("transform",f(a.x,a.y)+u(Math.min(1,a.scale))+f(a.tx,a.ty))}));if(x)N(m,d);b(y,d);if(x&&d.automargin){var M=s.bBox(v.node());var S=d.domain;var E=o.w*(S.x[1]-S.x[0]);var L=o.h*(S.y[1]-S.y[0]);var C=(.5*E-p.r)/o.w;var I=(.5*L-p.r)/o.h;a.autoMargin(e,"pie."+d.uid+".automargin",{xl:S.x[0]-C,xr:S.x[1]+C,yb:S.y[0]-I,yt:S.y[1]+I,l:Math.max(p.cx-p.r-M.left,0),r:Math.max(M.right-(p.cx+p.r),0),b:Math.max(M.bottom-(p.cy+p.r),0),t:Math.max(p.cy-p.r-M.top,0),pad:5})}}))}));setTimeout((function(){v.selectAll("tspan").each((function(){var e=n.select(this);if(e.attr("dy"))e.attr("dy",e.attr("dy"))}))}),0)}function b(e,t){e.each((function(e){var r=n.select(this);if(!e.labelExtraX&&!e.labelExtraY){r.select("path.textline").remove();return}var a=r.select("g.slicetext text");e.transform.targetX+=e.labelExtraX;e.transform.targetY+=e.labelExtraY;l.setTransormAndDisplay(a,e.transform);var i=e.cxFinal+e.pxmid[0];var s=e.cyFinal+e.pxmid[1];var u="M"+i+","+s;var f=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4;if(e.labelExtraX){var c=e.labelExtraX*e.pxmid[1]/e.pxmid[0];var v=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]);if(Math.abs(c)>Math.abs(v)){u+="l"+v*e.pxmid[0]/e.pxmid[1]+","+v+"H"+(i+e.labelExtraX+f)}else{u+="l"+e.labelExtraX+","+c+"v"+(v-c)+"h"+f}}else{u+="V"+(e.yLabelMid+e.labelExtraY)+"h"+f}l.ensureSingle(r,"path","textline").call(o.stroke,t.outsidetextfont.color).attr({"stroke-width":Math.min(2,t.outsidetextfont.size/8),d:u,fill:"none"})}))}function _(e,t,r){var a=r[0];var o=a.cx;var s=a.cy;var u=a.trace;var f=u.type==="funnelarea";if(!("_hasHoverLabel"in u))u._hasHoverLabel=false;if(!("_hasHoverEvent"in u))u._hasHoverEvent=false;e.on("mouseover",(function(e){var r=t._fullLayout;var c=t._fullData[u.index];if(t._dragging||r.hovermode===false)return;var v=c.hoverinfo;if(Array.isArray(v)){v=i.castHoverinfo({hoverinfo:[g.castOption(v,e.pts)],_module:u._module},r,0)}if(v==="all")v="label+text+value+percent+name";if(c.hovertemplate||v!=="none"&&v!=="skip"&&v){var h=e.rInscribed||0;var p=o+e.pxmid[0]*(1-h);var d=s+e.pxmid[1]*(1-h);var m=r.separators;var x=[];if(v&&v.indexOf("label")!==-1)x.push(e.label);e.text=g.castOption(c.hovertext||c.text,e.pts);if(v&&v.indexOf("text")!==-1){var b=e.text;if(l.isValidTextValue(b))x.push(b)}e.value=e.v;e.valueLabel=g.formatPieValue(e.v,m);if(v&&v.indexOf("value")!==-1)x.push(e.valueLabel);e.percent=e.v/a.vTotal;e.percentLabel=g.formatPiePercent(e.percent,m);if(v&&v.indexOf("percent")!==-1)x.push(e.percentLabel);var _=c.hoverlabel;var w=_.font;var T=[];i.loneHover({trace:u,x0:p-h*a.r,x1:p+h*a.r,y:d,_x0:f?o+e.TL[0]:p-h*a.r,_x1:f?o+e.TR[0]:p+h*a.r,_y0:f?s+e.TL[1]:d-h*a.r,_y1:f?s+e.BL[1]:d+h*a.r,text:x.join("<br>"),name:c.hovertemplate||v.indexOf("name")!==-1?c.name:undefined,idealAlign:e.pxmid[0]<0?"left":"right",color:g.castOption(_.bgcolor,e.pts)||e.color,borderColor:g.castOption(_.bordercolor,e.pts),fontFamily:g.castOption(w.family,e.pts),fontSize:g.castOption(w.size,e.pts),fontColor:g.castOption(w.color,e.pts),nameLength:g.castOption(_.namelength,e.pts),textAlign:g.castOption(_.align,e.pts),hovertemplate:g.castOption(c.hovertemplate,e.pts),hovertemplateLabels:e,eventData:[y(e,c)]},{container:r._hoverlayer.node(),outerContainer:r._paper.node(),gd:t,inOut_bbox:T});e.bbox=T[0];u._hasHoverLabel=true}u._hasHoverEvent=true;t.emit("plotly_hover",{points:[y(e,c)],event:n.event})}));e.on("mouseout",(function(e){var r=t._fullLayout;var a=t._fullData[u.index];var o=n.select(this).datum();if(u._hasHoverEvent){e.originalEvent=n.event;t.emit("plotly_unhover",{points:[y(o,a)],event:n.event});u._hasHoverEvent=false}if(u._hasHoverLabel){i.loneUnhover(r._hoverlayer.node());u._hasHoverLabel=false}}));e.on("click",(function(e){var r=t._fullLayout;var a=t._fullData[u.index];if(t._dragging||r.hovermode===false)return;t._hoverdata=[y(e,a)];i.click(t,n.event)}))}function w(e,t,r){var n=g.castOption(e.outsidetextfont.color,t.pts)||g.castOption(e.textfont.color,t.pts)||r.color;var a=g.castOption(e.outsidetextfont.family,t.pts)||g.castOption(e.textfont.family,t.pts)||r.family;var i=g.castOption(e.outsidetextfont.size,t.pts)||g.castOption(e.textfont.size,t.pts)||r.size;return{color:n,family:a,size:i}}function T(e,t,r){var n=g.castOption(e.insidetextfont.color,t.pts);if(!n&&e._input.textfont){n=g.castOption(e._input.textfont.color,t.pts)}var a=g.castOption(e.insidetextfont.family,t.pts)||g.castOption(e.textfont.family,t.pts)||r.family;var i=g.castOption(e.insidetextfont.size,t.pts)||g.castOption(e.textfont.size,t.pts)||r.size;return{color:n||o.contrast(t.color),family:a,size:i}}function k(e,t){var r,n;for(var a=0;a<e.length;a++){r=e[a][0];n=r.trace;if(n.title.text){var i=n.title.text;if(n._meta){i=l.templateString(i,n._meta)}var o=s.tester.append("text").attr("data-notex",1).text(i).call(s.font,n.title.font).call(c.convertToTspans,t);var u=s.bBox(o.node(),true);r.titleBox={width:u.width,height:u.height};o.remove()}}}function A(e,t,r){var n=r.r||t.rpx1;var a=t.rInscribed;var i=t.startangle===t.stopangle;if(i){return{rCenter:1-a,scale:0,rotate:0,textPosAngle:0}}var o=t.ring;var s=o===1&&Math.abs(t.startangle-t.stopangle)===Math.PI*2;var l=t.halfangle;var u=t.midangle;var f=r.trace.insidetextorientation;var c=f==="horizontal";var v=f==="tangential";var h=f==="radial";var p=f==="auto";var d=[];var g;if(!p){var y=function(r,a){if(M(t,r)){var i=Math.abs(r-t.startangle);var s=Math.abs(r-t.stopangle);var l=i<s?i:s;if(a==="tan"){g=E(e,n,o,l,0)}else{g=S(e,n,o,l,Math.PI/2)}g.textPosAngle=r;d.push(g)}};var m;if(c||v){for(m=4;m>=-4;m-=2)y(Math.PI*m,"tan");for(m=4;m>=-4;m-=2)y(Math.PI*(m+1),"tan")}if(c||h){for(m=4;m>=-4;m-=2)y(Math.PI*(m+1.5),"rad");for(m=4;m>=-4;m-=2)y(Math.PI*(m+.5),"rad")}}if(s||p||c){var x=Math.sqrt(e.width*e.width+e.height*e.height);g={scale:a*n*2/x,rCenter:1-a,rotate:0};g.textPosAngle=(t.startangle+t.stopangle)/2;if(g.scale>=1)return g;d.push(g)}if(p||h){g=S(e,n,o,l,u);g.textPosAngle=(t.startangle+t.stopangle)/2;d.push(g)}if(p||v){g=E(e,n,o,l,u);g.textPosAngle=(t.startangle+t.stopangle)/2;d.push(g)}var b=0;var _=0;for(var w=0;w<d.length;w++){var T=d[w].scale;if(_<T){_=T;b=w}if(!p&&_>=1){break}}return d[b]}function M(e,t){var r=e.startangle;var n=e.stopangle;return r>t&&t>n||r<t&&t<n}function S(e,t,r,n,a){t=Math.max(0,t-2*d);var i=e.width/e.height;var o=I(i,n,t,r);return{scale:o*2/e.height,rCenter:L(i,o/t),rotate:C(a)}}function E(e,t,r,n,a){t=Math.max(0,t-2*d);var i=e.height/e.width;var o=I(i,n,t,r);return{scale:o*2/e.width,rCenter:L(i,o/t),rotate:C(a+Math.PI/2)}}function L(e,t){return Math.cos(t)-e*t}function C(e){return(180/Math.PI*e+720)%180-90}function I(e,t,r,n){var a=e+1/(2*Math.tan(t));return r*Math.min(1/(Math.sqrt(a*a+.5)+a),n/(Math.sqrt(e*e+n/2)+e))}function P(e,t){if(e.v===t.vTotal&&!t.trace.hole)return 1;return Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2)}function O(e,t){var r=t.pxmid[0];var n=t.pxmid[1];var a=e.width/2;var i=e.height/2;if(r<0)a*=-1;if(n<0)i*=-1;return{scale:1,rCenter:1,rotate:0,x:a+Math.abs(i)*(a>0?1:-1)/2,y:i/(1+r*r/(n*n)),outside:true}}function D(e){var t=Math.sqrt(e.titleBox.width*e.titleBox.width+e.titleBox.height*e.titleBox.height);return{x:e.cx,y:e.cy,scale:e.trace.hole*e.r*2/t,tx:0,ty:-e.titleBox.height/2+e.trace.title.font.size}}function z(e,t){var r=1;var n=1;var a;var i=e.trace;var o={x:e.cx,y:e.cy};var s={tx:0,ty:0};s.ty+=i.title.font.size;a=B(i);if(i.title.position.indexOf("top")!==-1){o.y-=(1+a)*e.r;s.ty-=e.titleBox.height}else if(i.title.position.indexOf("bottom")!==-1){o.y+=(1+a)*e.r}var l=R(e.r,e.trace.aspectratio);var u=t.w*(i.domain.x[1]-i.domain.x[0])/2;if(i.title.position.indexOf("left")!==-1){u=u+l;o.x-=(1+a)*l;s.tx+=e.titleBox.width/2}else if(i.title.position.indexOf("center")!==-1){u*=2}else if(i.title.position.indexOf("right")!==-1){u=u+l;o.x+=(1+a)*l;s.tx-=e.titleBox.width/2}r=u/e.titleBox.width;n=F(e,t)/e.titleBox.height;return{x:o.x,y:o.y,scale:Math.min(r,n),tx:s.tx,ty:s.ty}}function R(e,t){return e/(t===undefined?1:t)}function F(e,t){var r=e.trace;var n=t.h*(r.domain.y[1]-r.domain.y[0]);return Math.min(e.titleBox.height,n/2)}function B(e){var t=e.pull;if(!t)return 0;var r;if(Array.isArray(t)){t=0;for(r=0;r<e.pull.length;r++){if(e.pull[r]>t)t=e.pull[r]}}return t}function N(e,t){var r,n,a,i,o,s,l,u,f,c,v,h,p;function d(e,t){return e.pxmid[1]-t.pxmid[1]}function y(e,t){return t.pxmid[1]-e.pxmid[1]}function m(e,r){if(!r)r={};var a=r.labelExtraY+(n?r.yLabelMax:r.yLabelMin);var u=n?e.yLabelMin:e.yLabelMax;var f=n?e.yLabelMax:e.yLabelMin;var v=e.cyFinal+o(e.px0[1],e.px1[1]);var h=a-u;var p,d,y,m,x,b;if(h*l>0)e.labelExtraY=h;if(!Array.isArray(t.pull))return;for(d=0;d<c.length;d++){y=c[d];if(y===e||(g.castOption(t.pull,e.pts)||0)>=(g.castOption(t.pull,y.pts)||0)){continue}if((e.pxmid[1]-y.pxmid[1])*l>0){m=y.cyFinal+o(y.px0[1],y.px1[1]);h=m-u-e.labelExtraY;if(h*l>0)e.labelExtraY+=h}else if((f+e.labelExtraY-v)*l>0){p=3*s*Math.abs(d-c.indexOf(e));x=y.cxFinal+i(y.px0[0],y.px1[0]);b=x+p-(e.cxFinal+e.pxmid[0])-e.labelExtraX;if(b*s>0)e.labelExtraX+=b}}}for(n=0;n<2;n++){a=n?d:y;o=n?Math.max:Math.min;l=n?1:-1;for(r=0;r<2;r++){i=r?Math.max:Math.min;s=r?1:-1;u=e[n][r];u.sort(a);f=e[1-n][r];c=f.concat(u);h=[];for(v=0;v<u.length;v++){if(u[v].yLabelMid!==undefined)h.push(u[v])}p=false;for(v=0;n&&v<f.length;v++){if(f[v].yLabelMid!==undefined){p=f[v];break}}for(v=0;v<h.length;v++){var x=v&&h[v-1];if(p&&!v)x=p;m(h[v],x)}}}}function j(e,t){var r=[];for(var n=0;n<e.length;n++){var a=e[n][0];var i=a.trace;var o=i.domain;var s=t.w*(o.x[1]-o.x[0]);var l=t.h*(o.y[1]-o.y[0]);if(i.title.text&&i.title.position!=="middle center"){l-=F(a,t)}var u=s/2;var f=l/2;if(i.type==="funnelarea"&&!i.scalegroup){f/=i.aspectratio}a.r=Math.min(u,f)/(1+B(i));a.cx=t.l+t.w*(i.domain.x[1]+i.domain.x[0])/2;a.cy=t.t+t.h*(1-i.domain.y[0])-l/2;if(i.title.text&&i.title.position.indexOf("bottom")!==-1){a.cy-=F(a,t)}if(i.scalegroup&&r.indexOf(i.scalegroup)===-1){r.push(i.scalegroup)}}U(e,r)}function U(e,t){var r,n,a;for(var i=0;i<t.length;i++){var o=Infinity;var s=t[i];for(n=0;n<e.length;n++){r=e[n][0];a=r.trace;if(a.scalegroup===s){var l;if(a.type==="pie"){l=r.r*r.r}else if(a.type==="funnelarea"){var u,f;if(a.aspectratio>1){u=r.r;f=u/a.aspectratio}else{f=r.r;u=f*a.aspectratio}u*=(1+a.baseratio)/2;l=u*f}o=Math.min(o,l/r.vTotal)}}for(n=0;n<e.length;n++){r=e[n][0];a=r.trace;if(a.scalegroup===s){var c=o*r.vTotal;if(a.type==="funnelarea"){c/=(1+a.baseratio)/2;c/=a.aspectratio}r.r=Math.sqrt(c)}}}}function V(e){var t=e[0];var r=t.r;var n=t.trace;var a=g.getRotationAngle(n.rotation);var i=2*Math.PI/t.vTotal;var o="px0";var s="px1";var l,u,f;if(n.direction==="counterclockwise"){for(l=0;l<e.length;l++){if(!e[l].hidden)break}if(l===e.length)return;a+=i*e[l].v;i*=-1;o="px1";s="px0"}f=H(r,a);for(l=0;l<e.length;l++){u=e[l];if(u.hidden)continue;u[o]=f;u.startangle=a;a+=i*u.v/2;u.pxmid=H(r,a);u.midangle=a;a+=i*u.v/2;f=H(r,a);u.stopangle=a;u[s]=f;u.largeArc=u.v>t.vTotal/2?1:0;u.halfangle=Math.PI*Math.min(u.v/t.vTotal,.5);u.ring=1-n.hole;u.rInscribed=P(u,t)}}function H(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}function q(e,t,r){var n=e._fullLayout;var a=r.trace;var i=a.texttemplate;var o=a.textinfo;if(!i&&o&&o!=="none"){var s=o.split("+");var u=function(e){return s.indexOf(e)!==-1};var f=u("label");var c=u("text");var v=u("value");var h=u("percent");var p=n.separators;var d;d=f?[t.label]:[];if(c){var y=g.getFirstFilled(a.text,t.pts);if(m(y))d.push(y)}if(v)d.push(g.formatPieValue(t.v,p));if(h)d.push(g.formatPiePercent(t.v/r.vTotal,p));t.text=d.join("<br>")}function x(e){return{label:e.label,value:e.v,valueLabel:g.formatPieValue(e.v,n.separators),percent:e.v/r.vTotal,percentLabel:g.formatPiePercent(e.v/r.vTotal,n.separators),color:e.color,text:e.text,customdata:l.castOption(a,e.i,"customdata")}}if(i){var b=l.castOption(a,t.i,"texttemplate");if(!b){t.text=""}else{var _=x(t);var w=g.getFirstFilled(a.text,t.pts);if(m(w)||w==="")_.text=w;t.text=l.texttemplateString(b,_,e._fullLayout._d3locale,_,a._meta||{})}}}function G(e,t){var r=e.rotate*Math.PI/180;var n=Math.cos(r);var a=Math.sin(r);var i=(t.left+t.right)/2;var o=(t.top+t.bottom)/2;e.textX=i*n-o*a;e.textY=i*a+o*n;e.noCenter=true}e.exports={plot:x,formatSliceLabel:q,transformInsideText:A,determineInsideTextFont:T,positionTitleOutside:z,prerenderTitles:k,layoutAreas:j,attachFxHandlers:_,computeTransform:G}},68357:function(e,t,r){"use strict";var n=r(39898);var a=r(63463);var i=r(72597).resizeText;e.exports=function e(t){var r=t._fullLayout._pielayer.selectAll(".trace");i(t,r,"pie");r.each((function(e){var r=e[0];var i=r.trace;var o=n.select(this);o.style({opacity:i.opacity});o.selectAll("path.surface").each((function(e){n.select(this).call(a,e,i,t)}))}))}},63463:function(e,t,r){"use strict";var n=r(7901);var a=r(53581).castOption;var i=r(22209);e.exports=function e(t,r,o,s){var l=o.marker.line;var u=a(l.color,r.pts)||n.defaultLine;var f=a(l.width,r.pts)||0;t.call(i,r,o,s).style("stroke-width",f).call(n.stroke,u)}},10959:function(e,t,r){"use strict";var n=r(82196);e.exports={x:n.x,y:n.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:n.text,marker:{color:{valType:"color",arrayOk:false,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:false,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:false,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:undefined}},42743:function(e,t,r){"use strict";var n=r(9330).gl_pointcloud2d;var a=r(78614);var i=r(71739).findExtremes;var o=r(34603);function s(e,t){this.scene=e;this.uid=t;this.type="pointcloud";this.pickXData=[];this.pickYData=[];this.xData=[];this.yData=[];this.textLabels=[];this.color="rgb(0, 0, 0)";this.name="";this.hoverinfo="all";this.idToIndex=new Int32Array(0);this.bounds=[0,0,0,0];this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]};this.pointcloud=n(e.glplot,this.pointcloudOptions);this.pointcloud._trace=this}var l=s.prototype;l.handlePick=function(e){var t=this.idToIndex[e.pointId];return{trace:this,dataCoord:e.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[t*2],this.pickXYData[t*2+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:Array.isArray(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}};l.update=function(e){this.index=e.index;this.textLabels=e.text;this.name=e.name;this.hoverinfo=e.hoverinfo;this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.updateFast(e);this.color=o(e,{})};l.updateFast=function(e){var t=this.xData=this.pickXData=e.x;var r=this.yData=this.pickYData=e.y;var n=this.pickXYData=e.xy;var o=e.xbounds&&e.ybounds;var s=e.indices;var l;var u;var f;var c=this.bounds;var v,h,p;if(n){f=n;l=n.length>>>1;if(o){c[0]=e.xbounds[0];c[2]=e.xbounds[1];c[1]=e.ybounds[0];c[3]=e.ybounds[1]}else{for(p=0;p<l;p++){v=f[p*2];h=f[p*2+1];if(v<c[0])c[0]=v;if(v>c[2])c[2]=v;if(h<c[1])c[1]=h;if(h>c[3])c[3]=h}}if(s){u=s}else{u=new Int32Array(l);for(p=0;p<l;p++){u[p]=p}}}else{l=t.length;f=new Float32Array(2*l);u=new Int32Array(l);for(p=0;p<l;p++){v=t[p];h=r[p];u[p]=p;f[p*2]=v;f[p*2+1]=h;if(v<c[0])c[0]=v;if(v>c[2])c[2]=v;if(h<c[1])c[1]=h;if(h>c[3])c[3]=h}}this.idToIndex=u;this.pointcloudOptions.idToIndex=u;this.pointcloudOptions.positions=f;var d=a(e.marker.color);var g=a(e.marker.border.color);var y=e.opacity*e.marker.opacity;d[3]*=y;this.pointcloudOptions.color=d;var m=e.marker.blend;if(m===null){var x=100;m=t.length<x||r.length<x}this.pointcloudOptions.blend=m;g[3]*=y;this.pointcloudOptions.borderColor=g;var b=e.marker.sizemin;var _=Math.max(e.marker.sizemax,e.marker.sizemin);this.pointcloudOptions.sizeMin=b;this.pointcloudOptions.sizeMax=_;this.pointcloudOptions.areaRatio=e.marker.border.arearatio;this.pointcloud.update(this.pointcloudOptions);var w=this.scene.xaxis;var T=this.scene.yaxis;var k=_/2||.5;e._extremes[w._id]=i(w,[c[0],c[2]],{ppad:k});e._extremes[T._id]=i(T,[c[1],c[3]],{ppad:k})};l.dispose=function(){this.pointcloud.dispose()};function u(e,t){var r=new s(e,t.uid);r.update(t);return r}e.exports=u},33876:function(e,t,r){"use strict";var n=r(71828);var a=r(10959);e.exports=function e(t,r,i){function o(e,i){return n.coerce(t,r,a,e,i)}o("x");o("y");o("xbounds");o("ybounds");if(t.xy&&t.xy instanceof Float32Array){r.xy=t.xy}if(t.indices&&t.indices instanceof Int32Array){r.indices=t.indices}o("text");o("marker.color",i);o("marker.opacity");o("marker.blend");o("marker.sizemin");o("marker.sizemax");o("marker.border.color",i);o("marker.border.arearatio");r._length=null}},20593:function(e,t,r){"use strict";var n=["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" ");e.exports={attributes:r(10959),supplyDefaults:r(33876),calc:r(36563),plot:r(42743),moduleType:"trace",name:"pointcloud",basePlotModule:r(4796),categories:["gl","gl2d","showLegend"],meta:{}}},39953:function(e,t,r){"use strict";var n=r(41940);var a=r(9012);var i=r(22399);var o=r(77914);var s=r(27670).Y;var l=r(5386).fF;var u=r(50693);var f=r(44467).templatedArray;var c=r(12663).descriptionOnlyNumbers;var v=r(1426).extendFlat;var h=r(30962).overrideAll;var p=e.exports=h({hoverinfo:v({},a.hoverinfo,{flags:[],arrayOk:false}),hoverlabel:o.hoverlabel,domain:s({name:"sankey",trace:true}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:c("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:n({}),customdata:undefined,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:true,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:true},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:i.defaultLine,arrayOk:true},width:{valType:"number",min:0,dflt:.5,arrayOk:true}},pad:{valType:"number",arrayOk:false,min:0,dflt:20},thickness:{valType:"number",arrayOk:false,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:o.hoverlabel,hovertemplate:l({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:true},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:i.defaultLine,arrayOk:true},width:{valType:"number",min:0,dflt:0,arrayOk:true}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:o.hoverlabel,hovertemplate:l({},{keys:["value","label"]}),colorscales:f("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:v(u().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");p.transforms=undefined},75536:function(e,t,r){"use strict";var n=r(30962).overrideAll;var a=r(27659).a0;var i=r(60436);var o=r(528);var s=r(6964);var l=r(28569);var u=r(47322).prepSelect;var f=r(71828);var c=r(73972);var v="sankey";t.name=v;t.baseLayoutAttrOverrides=n({hoverlabel:o.hoverlabel},"plot","nested");t.plot=function(e){var r=a(e.calcdata,v)[0];i(e,r);t.updateFx(e)};t.clean=function(e,t,r,n){var a=n._has&&n._has(v);var i=t._has&&t._has(v);if(a&&!i){n._paperdiv.selectAll(".sankey").remove();n._paperdiv.selectAll(".bgsankey").remove()}};t.updateFx=function(e){for(var t=0;t<e._fullData.length;t++){h(e,t)}};function h(e,t){var r=e._fullData[t];var n=e._fullLayout;var a=n.dragmode;var i=n.dragmode==="pan"?"move":"crosshair";var o=r._bgRect;if(!o)return;if(a==="pan"||a==="zoom")return;s(o,i);var v={_id:"x",c2p:f.identity,_offset:r._sankey.translateX,_length:r._sankey.width};var h={_id:"y",c2p:f.identity,_offset:r._sankey.translateY,_length:r._sankey.height};var p={gd:e,element:o.node(),plotinfo:{id:t,xaxis:v,yaxis:h,fillRangeItems:f.noop},subplot:t,xaxes:[v],yaxes:[h],doneFnCompleted:function(r){var n=e._fullData[t];var a;var i=n.node.groups.slice();var o=[];function s(e){var t=n._sankey.graph.nodes;for(var r=0;r<t.length;r++){if(t[r].pointNumber===e)return t[r]}}for(var l=0;l<r.length;l++){var u=s(r[l].pointNumber);if(!u)continue;if(u.group){for(var f=0;f<u.childrenNodes.length;f++){o.push(u.childrenNodes[f].pointNumber)}i[u.pointNumber-n.node._count]=false}else{o.push(u.pointNumber)}}a=i.filter(Boolean).concat([o]);c.call("_guiRestyle",e,{"node.groups":[a]},t)}};p.prepFn=function(e,t,r){u(e,t,r,p,a)};l.init(p)}},92930:function(e,t,r){"use strict";var n=r(68664);var a=r(71828);var i=r(28984).wrap;var o=a.isArrayOrTypedArray;var s=a.isIndex;var l=r(21081);function u(e){var t=e.node;var r=e.link;var n=[];var i=o(r.color);var u=o(r.customdata);var c={};var v={};var h=r.colorscales.length;var p;for(p=0;p<h;p++){var d=r.colorscales[p];var g=l.extractScale(d,{cLetter:"c"});var y=l.makeColorScaleFunc(g);v[d.label]=y}var m=0;for(p=0;p<r.value.length;p++){if(r.source[p]>m)m=r.source[p];if(r.target[p]>m)m=r.target[p]}var x=m+1;e.node._count=x;var b;var _=e.node.groups;var w={};for(p=0;p<_.length;p++){var T=_[p];for(b=0;b<T.length;b++){var k=T[b];var A=x+p;if(w.hasOwnProperty(k)){a.warn("Node "+k+" is already part of a group.")}else{w[k]=A}}}var M={source:[],target:[]};for(p=0;p<r.value.length;p++){var S=r.value[p];var E=r.source[p];var L=r.target[p];if(!(S>0&&s(E,x)&&s(L,x))){continue}if(w.hasOwnProperty(E)&&w.hasOwnProperty(L)&&w[E]===w[L]){continue}if(w.hasOwnProperty(L)){L=w[L]}if(w.hasOwnProperty(E)){E=w[E]}E=+E;L=+L;c[E]=c[L]=true;var C="";if(r.label&&r.label[p])C=r.label[p];var I=null;if(C&&v.hasOwnProperty(C))I=v[C];n.push({pointNumber:p,label:C,color:i?r.color[p]:r.color,customdata:u?r.customdata[p]:r.customdata,concentrationscale:I,source:E,target:L,value:+S});M.source.push(E);M.target.push(L)}var P=x+_.length;var O=o(t.color);var D=o(t.customdata);var z=[];for(p=0;p<P;p++){if(!c[p])continue;var R=t.label[p];z.push({group:p>x-1,childrenNodes:[],pointNumber:p,label:R,color:O?t.color[p]:t.color,customdata:D?t.customdata[p]:t.customdata})}var F=false;if(f(P,M.source,M.target)){F=true}return{circular:F,links:n,nodes:z,groups:_,groupLookup:w}}function f(e,t,r){var i=a.init2dArray(e,0);for(var o=0;o<Math.min(t.length,r.length);o++){if(a.isIndex(t[o],e)&&a.isIndex(r[o],e)){if(t[o]===r[o]){return true}i[t[o]].push(r[o])}}var s=n(i);return s.components.some((function(e){return e.length>1}))}e.exports=function e(t,r){var n=u(r);return i({circular:n.circular,_nodes:n.nodes,_links:n.links,_groups:n.groups,_groupLookup:n.groupLookup})}},85247:function(e){"use strict";e.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},26857:function(e,t,r){"use strict";var n=r(71828);var a=r(39953);var i=r(7901);var o=r(84267);var s=r(27670).c;var l=r(38048);var u=r(44467);var f=r(85501);e.exports=function e(t,r,v,h){function p(e,i){return n.coerce(t,r,a,e,i)}var d=n.extendDeep(h.hoverlabel,t.hoverlabel);var g=t.node;var y=u.newContainer(r,"node");function m(e,t){return n.coerce(g,y,a.node,e,t)}m("label");m("groups");m("x");m("y");m("pad");m("thickness");m("line.color");m("line.width");m("hoverinfo",t.hoverinfo);l(g,y,m,d);m("hovertemplate");var x=h.colorway;var b=function(e){return x[e%x.length]};m("color",y.label.map((function(e,t){return i.addOpacity(b(t),.8)})));m("customdata");var _=t.link||{};var w=u.newContainer(r,"link");function T(e,t){return n.coerce(_,w,a.link,e,t)}T("label");T("arrowlen");T("source");T("target");T("value");T("line.color");T("line.width");T("hoverinfo",t.hoverinfo);l(_,w,T,d);T("hovertemplate");var k=o(h.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";T("color",n.repeat(k,w.value.length));T("customdata");f(_,w,{name:"colorscales",handleItemDefaults:c});s(r,h,p);p("orientation");p("valueformat");p("valuesuffix");var A;if(y.x.length&&y.y.length){A="freeform"}p("arrangement",A);n.coerceFont(p,"textfont",n.extendFlat({},h.font));r._length=null};function c(e,t){function r(r,i){return n.coerce(e,t,a.link.colorscales,r,i)}r("label");r("cmin");r("cmax");r("colorscale")}},29396:function(e,t,r){"use strict";e.exports={attributes:r(39953),supplyDefaults:r(26857),calc:r(92930),plot:r(60436),moduleType:"trace",name:"sankey",basePlotModule:r(75536),selectPoints:r(84564),categories:["noOpacity"],meta:{}}},60436:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);var i=a.numberFormat;var o=r(3393);var s=r(30211);var l=r(7901);var u=r(85247).cn;var f=a._;function c(e){return e!==""}function v(e,t){return e.filter((function(e){return e.key===t.traceId}))}function h(e,t){n.select(e).select("path").style("fill-opacity",t);n.select(e).select("rect").style("fill-opacity",t)}function p(e){n.select(e).select("text.name").style("fill","black")}function d(e){return function(t){return e.node.sourceLinks.indexOf(t.link)!==-1||e.node.targetLinks.indexOf(t.link)!==-1}}function g(e){return function(t){return t.node.sourceLinks.indexOf(e.link)!==-1||t.node.targetLinks.indexOf(e.link)!==-1}}function y(e,t,r){if(t&&r){v(r,t).selectAll("."+u.sankeyLink).filter(d(t)).call(x.bind(0,t,r,false))}}function m(e,t,r){if(t&&r){v(r,t).selectAll("."+u.sankeyLink).filter(d(t)).call(b.bind(0,t,r,false))}}function x(e,t,r,n){var a=n.datum().link.label;n.style("fill-opacity",(function(e){if(!e.link.concentrationscale){return.4}}));if(a){v(t,e).selectAll("."+u.sankeyLink).filter((function(e){return e.link.label===a})).style("fill-opacity",(function(e){if(!e.link.concentrationscale){return.4}}))}if(r){v(t,e).selectAll("."+u.sankeyNode).filter(g(e)).call(y)}}function b(e,t,r,n){var a=n.datum().link.label;n.style("fill-opacity",(function(e){return e.tinyColorAlpha}));if(a){v(t,e).selectAll("."+u.sankeyLink).filter((function(e){return e.link.label===a})).style("fill-opacity",(function(e){return e.tinyColorAlpha}))}if(r){v(t,e).selectAll(u.sankeyNode).filter(g(e)).call(m)}}function _(e,t){var r=e.hoverlabel||{};var n=a.nestedProperty(r,t).get();return Array.isArray(n)?false:n}e.exports=function e(t,r){var a=t._fullLayout;var v=a._paper;var d=a._size;for(var g=0;g<t._fullData.length;g++){if(!t._fullData[g].visible)continue;if(t._fullData[g].type!==u.sankey)continue;if(!t._fullData[g]._viewInitial){var w=t._fullData[g].node;t._fullData[g]._viewInitial={node:{groups:w.groups.slice(),x:w.x.slice(),y:w.y.slice()}}}}var T=function(e,r){var a=r.link;a.originalEvent=n.event;t._hoverdata=[a];s.click(t,{target:true})};var k=function(e,r,a){if(t._fullLayout.hovermode===false)return;n.select(e).call(x.bind(0,r,a,true));if(r.link.trace.link.hoverinfo!=="skip"){r.link.fullData=r.link.trace;t.emit("plotly_hover",{event:n.event,points:[r.link]})}};var A=f(t,"source:")+" ";var M=f(t,"target:")+" ";var S=f(t,"concentration:")+" ";var E=f(t,"incoming flow count:")+" ";var L=f(t,"outgoing flow count:")+" ";var C=function(e,r){if(t._fullLayout.hovermode===false)return;var o=r.link.trace.link;if(o.hoverinfo==="none"||o.hoverinfo==="skip")return;var u=[];function f(e){var t,n;if(e.circular){t=(e.circularPathData.leftInnerExtent+e.circularPathData.rightInnerExtent)/2;n=e.circularPathData.verticalFullExtent}else{t=(e.source.x1+e.target.x0)/2;n=(e.y0+e.y1)/2}var a=[t,n];if(e.trace.orientation==="v")a.reverse();a[0]+=r.parent.translateX;a[1]+=r.parent.translateY;return a}var v=0;for(var d=0;d<r.flow.links.length;d++){var g=r.flow.links[d];if(t._fullLayout.hovermode==="closest"&&r.link.pointNumber!==g.pointNumber)continue;if(r.link.pointNumber===g.pointNumber)v=d;g.fullData=g.trace;o=r.link.trace.link;var y=f(g);var m={valueLabel:i(r.valueFormat)(g.value)+r.valueSuffix};u.push({x:y[0],y:y[1],name:m.valueLabel,text:[g.label||"",A+g.source.label,M+g.target.label,g.concentrationscale?S+i("%0.2f")(g.flow.labelConcentration):""].filter(c).join("<br>"),color:_(o,"bgcolor")||l.addOpacity(g.color,1),borderColor:_(o,"bordercolor"),fontFamily:_(o,"font.family"),fontSize:_(o,"font.size"),fontColor:_(o,"font.color"),nameLength:_(o,"namelength"),textAlign:_(o,"align"),idealAlign:n.event.x<y[0]?"right":"left",hovertemplate:o.hovertemplate,hovertemplateLabels:m,eventData:[g]})}var x=s.loneHover(u,{container:a._hoverlayer.node(),outerContainer:a._paper.node(),gd:t,anchorIndex:v});x.each((function(){var e=this;if(!r.link.concentrationscale){h(e,.65)}p(e)}))};var I=function(e,r,i){if(t._fullLayout.hovermode===false)return;n.select(e).call(b.bind(0,r,i,true));if(r.link.trace.link.hoverinfo!=="skip"){r.link.fullData=r.link.trace;t.emit("plotly_unhover",{event:n.event,points:[r.link]})}s.loneUnhover(a._hoverlayer.node())};var P=function(e,r,a){var i=r.node;i.originalEvent=n.event;t._hoverdata=[i];n.select(e).call(m,r,a);s.click(t,{target:true})};var O=function(e,r,a){if(t._fullLayout.hovermode===false)return;n.select(e).call(y,r,a);if(r.node.trace.node.hoverinfo!=="skip"){r.node.fullData=r.node.trace;t.emit("plotly_hover",{event:n.event,points:[r.node]})}};var D=function(e,r){if(t._fullLayout.hovermode===false)return;var o=r.node.trace.node;if(o.hoverinfo==="none"||o.hoverinfo==="skip")return;var l=n.select(e).select("."+u.nodeRect);var f=t._fullLayout._paperdiv.node().getBoundingClientRect();var v=l.node().getBoundingClientRect();var d=v.left-2-f.left;var g=v.right+2-f.left;var y=v.top+v.height/4-f.top;var m={valueLabel:i(r.valueFormat)(r.node.value)+r.valueSuffix};r.node.fullData=r.node.trace;t._fullLayout._calcInverseTransform(t);var x=t._fullLayout._invScaleX;var b=t._fullLayout._invScaleY;var w=s.loneHover({x0:x*d,x1:x*g,y:b*y,name:i(r.valueFormat)(r.node.value)+r.valueSuffix,text:[r.node.label,E+r.node.targetLinks.length,L+r.node.sourceLinks.length].filter(c).join("<br>"),color:_(o,"bgcolor")||r.tinyColorHue,borderColor:_(o,"bordercolor"),fontFamily:_(o,"font.family"),fontSize:_(o,"font.size"),fontColor:_(o,"font.color"),nameLength:_(o,"namelength"),textAlign:_(o,"align"),idealAlign:"left",hovertemplate:o.hovertemplate,hovertemplateLabels:m,eventData:[r.node]},{container:a._hoverlayer.node(),outerContainer:a._paper.node(),gd:t});h(w,.85);p(w)};var z=function(e,r,i){if(t._fullLayout.hovermode===false)return;n.select(e).call(m,r,i);if(r.node.trace.node.hoverinfo!=="skip"){r.node.fullData=r.node.trace;t.emit("plotly_unhover",{event:n.event,points:[r.node]})}s.loneUnhover(a._hoverlayer.node())};o(t,v,r,{width:d.w,height:d.h,margin:{t:d.t,r:d.r,b:d.b,l:d.l}},{linkEvents:{hover:k,follow:C,unhover:I,select:T},nodeEvents:{hover:O,follow:D,unhover:z,select:P}})}},3393:function(e,t,r){"use strict";var n=r(49887);var a=r(81684).k4;var i=r(39898);var o=r(30838);var s=r(86781);var l=r(85247);var u=r(84267);var f=r(7901);var c=r(91424);var v=r(71828);var h=v.strTranslate;var p=v.strRotate;var d=r(28984);var g=d.keyFun;var y=d.repeat;var m=d.unwrap;var x=r(63893);var b=r(73972);var _=r(18783);var w=_.CAP_SHIFT;var T=_.LINE_SPACING;var k=3;function A(e,t,r){var n=m(t);var a=n.trace;var i=a.domain;var f=a.orientation==="h";var c=a.node.pad;var h=a.node.thickness;var p=e.width*(i.x[1]-i.x[0]);var d=e.height*(i.y[1]-i.y[0]);var g=n._nodes;var y=n._links;var x=n.circular;var b;if(x){b=s.sankeyCircular().circularLinkGap(0)}else{b=o.sankey()}b.iterations(l.sankeyIterations).size(f?[p,d]:[d,p]).nodeWidth(h).nodePadding(c).nodeId((function(e){return e.pointNumber})).nodes(g).links(y);var _=b();if(b.nodePadding()<c){v.warn("node.pad was reduced to ",b.nodePadding()," to fit within the figure.")}var w,T,k;for(var A in n._groupLookup){var M=parseInt(n._groupLookup[A]);var S;for(w=0;w<_.nodes.length;w++){if(_.nodes[w].pointNumber===M){S=_.nodes[w];break}}if(!S)continue;var E={pointNumber:parseInt(A),x0:S.x0,x1:S.x1,y0:S.y0,y1:S.y1,partOfGroup:true,sourceLinks:[],targetLinks:[]};_.nodes.unshift(E);S.childrenNodes.unshift(E)}function L(){for(w=0;w<_.nodes.length;w++){var e=_.nodes[w];var t={};var r;var n;for(T=0;T<e.targetLinks.length;T++){n=e.targetLinks[T];r=n.source.pointNumber+":"+n.target.pointNumber;if(!t.hasOwnProperty(r))t[r]=[];t[r].push(n)}var a=Object.keys(t);for(T=0;T<a.length;T++){r=a[T];var i=t[r];var o=0;var s={};for(k=0;k<i.length;k++){n=i[k];if(!s[n.label])s[n.label]=0;s[n.label]+=n.value;o+=n.value}for(k=0;k<i.length;k++){n=i[k];n.flow={value:o,labelConcentration:s[n.label]/o,concentration:n.value/o,links:i};if(n.concentrationscale){n.color=u(n.concentrationscale(n.flow.labelConcentration))}}}var l=0;for(T=0;T<e.sourceLinks.length;T++){l+=e.sourceLinks[T].value}for(T=0;T<e.sourceLinks.length;T++){n=e.sourceLinks[T];n.concentrationOut=n.value/l}var f=0;for(T=0;T<e.targetLinks.length;T++){f+=e.targetLinks[T].value}for(T=0;T<e.targetLinks.length;T++){n=e.targetLinks[T];n.concenrationIn=n.value/f}}}L();function C(e){e.forEach((function(e){var t;var r;var n=0;var a=e.length;var i;e.sort((function(e,t){return e.y0-t.y0}));for(i=0;i<a;++i){t=e[i];if(t.y0>=n){}else{r=n-t.y0;if(r>1e-6)t.y0+=r,t.y1+=r}n=t.y1+c}}))}function I(e){var t=e.map((function(e,t){return{x0:e.x0,index:t}})).sort((function(e,t){return e.x0-t.x0}));var r=[];var n=-1;var a;var i=-Infinity;var o;for(w=0;w<t.length;w++){var s=e[t[w].index];if(s.x0>i+h){n+=1;a=s.x0}i=s.x0;if(!r[n])r[n]=[];r[n].push(s);o=a-s.x0;s.x0+=o,s.x1+=o}return r}if(a.node.x.length&&a.node.y.length){for(w=0;w<Math.min(a.node.x.length,a.node.y.length,_.nodes.length);w++){if(a.node.x[w]&&a.node.y[w]){var P=[a.node.x[w]*p,a.node.y[w]*d];_.nodes[w].x0=P[0]-h/2;_.nodes[w].x1=P[0]+h/2;var O=_.nodes[w].y1-_.nodes[w].y0;_.nodes[w].y0=P[1]-O/2;_.nodes[w].y1=P[1]+O/2}}if(a.arrangement==="snap"){g=_.nodes;var D=I(g);C(D)}b.update(_)}return{circular:x,key:r,trace:a,guid:v.randstr(),horizontal:f,width:p,height:d,nodePad:a.node.pad,nodeLineColor:a.node.line.color,nodeLineWidth:a.node.line.width,linkLineColor:a.link.line.color,linkLineWidth:a.link.line.width,linkArrowLength:a.link.arrowlen,valueFormat:a.valueformat,valueSuffix:a.valuesuffix,textFont:a.textfont,translateX:i.x[0]*e.width+e.margin.l,translateY:e.height-i.y[1]*e.height+e.margin.t,dragParallel:f?d:p,dragPerpendicular:f?p:d,arrangement:a.arrangement,sankey:b,graph:_,forceLayouts:{},interactionState:{dragInProgress:false,hovered:false}}}function M(e,t,r){var n=u(t.color);var a=t.source.label+"|"+t.target.label;var i=a+"__"+r;t.trace=e.trace;t.curveNumber=e.trace.index;return{circular:e.circular,key:i,traceId:e.key,pointNumber:t.pointNumber,link:t,tinyColorHue:f.tinyRGB(n),tinyColorAlpha:n.getAlpha(),linkPath:E,linkLineColor:e.linkLineColor,linkLineWidth:e.linkLineWidth,linkArrowLength:e.linkArrowLength,valueFormat:e.valueFormat,valueSuffix:e.valueSuffix,sankey:e.sankey,parent:e,interactionState:e.interactionState,flow:t.flow}}function S(e,t){var r="";var n=e.width/2;var a=e.circularPathData;if(e.circularLinkType==="top"){r="M "+(a.targetX-t)+" "+(a.targetY+n)+" "+"L"+(a.rightInnerExtent-t)+" "+(a.targetY+n)+"A"+(a.rightLargeArcRadius+n)+" "+(a.rightSmallArcRadius+n)+" 0 0 1 "+(a.rightFullExtent-n-t)+" "+(a.targetY-a.rightSmallArcRadius)+"L"+(a.rightFullExtent-n-t)+" "+a.verticalRightInnerExtent+"A"+(a.rightLargeArcRadius+n)+" "+(a.rightLargeArcRadius+n)+" 0 0 1 "+(a.rightInnerExtent-t)+" "+(a.verticalFullExtent-n)+"L"+a.leftInnerExtent+" "+(a.verticalFullExtent-n)+"A"+(a.leftLargeArcRadius+n)+" "+(a.leftLargeArcRadius+n)+" 0 0 1 "+(a.leftFullExtent+n)+" "+a.verticalLeftInnerExtent+"L"+(a.leftFullExtent+n)+" "+(a.sourceY-a.leftSmallArcRadius)+"A"+(a.leftLargeArcRadius+n)+" "+(a.leftSmallArcRadius+n)+" 0 0 1 "+a.leftInnerExtent+" "+(a.sourceY+n)+"L"+a.sourceX+" "+(a.sourceY+n)+"L"+a.sourceX+" "+(a.sourceY-n)+"L"+a.leftInnerExtent+" "+(a.sourceY-n)+"A"+(a.leftLargeArcRadius-n)+" "+(a.leftSmallArcRadius-n)+" 0 0 0 "+(a.leftFullExtent-n)+" "+(a.sourceY-a.leftSmallArcRadius)+"L"+(a.leftFullExtent-n)+" "+a.verticalLeftInnerExtent+"A"+(a.leftLargeArcRadius-n)+" "+(a.leftLargeArcRadius-n)+" 0 0 0 "+a.leftInnerExtent+" "+(a.verticalFullExtent+n)+"L"+(a.rightInnerExtent-t)+" "+(a.verticalFullExtent+n)+"A"+(a.rightLargeArcRadius-n)+" "+(a.rightLargeArcRadius-n)+" 0 0 0 "+(a.rightFullExtent+n-t)+" "+a.verticalRightInnerExtent+"L"+(a.rightFullExtent+n-t)+" "+(a.targetY-a.rightSmallArcRadius)+"A"+(a.rightLargeArcRadius-n)+" "+(a.rightSmallArcRadius-n)+" 0 0 0 "+(a.rightInnerExtent-t)+" "+(a.targetY-n)+"L"+(a.targetX-t)+" "+(a.targetY-n)+(t>0?"L"+a.targetX+" "+a.targetY:"")+"Z"}else{r="M "+(a.targetX-t)+" "+(a.targetY-n)+" "+"L"+(a.rightInnerExtent-t)+" "+(a.targetY-n)+"A"+(a.rightLargeArcRadius+n)+" "+(a.rightSmallArcRadius+n)+" 0 0 0 "+(a.rightFullExtent-n-t)+" "+(a.targetY+a.rightSmallArcRadius)+"L"+(a.rightFullExtent-n-t)+" "+a.verticalRightInnerExtent+"A"+(a.rightLargeArcRadius+n)+" "+(a.rightLargeArcRadius+n)+" 0 0 0 "+(a.rightInnerExtent-t)+" "+(a.verticalFullExtent+n)+"L"+a.leftInnerExtent+" "+(a.verticalFullExtent+n)+"A"+(a.leftLargeArcRadius+n)+" "+(a.leftLargeArcRadius+n)+" 0 0 0 "+(a.leftFullExtent+n)+" "+a.verticalLeftInnerExtent+"L"+(a.leftFullExtent+n)+" "+(a.sourceY+a.leftSmallArcRadius)+"A"+(a.leftLargeArcRadius+n)+" "+(a.leftSmallArcRadius+n)+" 0 0 0 "+a.leftInnerExtent+" "+(a.sourceY-n)+"L"+a.sourceX+" "+(a.sourceY-n)+"L"+a.sourceX+" "+(a.sourceY+n)+"L"+a.leftInnerExtent+" "+(a.sourceY+n)+"A"+(a.leftLargeArcRadius-n)+" "+(a.leftSmallArcRadius-n)+" 0 0 1 "+(a.leftFullExtent-n)+" "+(a.sourceY+a.leftSmallArcRadius)+"L"+(a.leftFullExtent-n)+" "+a.verticalLeftInnerExtent+"A"+(a.leftLargeArcRadius-n)+" "+(a.leftLargeArcRadius-n)+" 0 0 1 "+a.leftInnerExtent+" "+(a.verticalFullExtent-n)+"L"+(a.rightInnerExtent-t)+" "+(a.verticalFullExtent-n)+"A"+(a.rightLargeArcRadius-n)+" "+(a.rightLargeArcRadius-n)+" 0 0 1 "+(a.rightFullExtent+n-t)+" "+a.verticalRightInnerExtent+"L"+(a.rightFullExtent+n-t)+" "+(a.targetY+a.rightSmallArcRadius)+"A"+(a.rightLargeArcRadius-n)+" "+(a.rightSmallArcRadius-n)+" 0 0 1 "+(a.rightInnerExtent-t)+" "+(a.targetY+n)+"L"+(a.targetX-t)+" "+(a.targetY+n)+(t>0?"L"+a.targetX+" "+a.targetY:"")+"Z"}return r}function E(){var e=.5;function t(t){var r=t.linkArrowLength;if(t.link.circular){return S(t.link,r)}else{var n=Math.abs((t.link.target.x0-t.link.source.x1)/2);if(r>n){r=n}var i=t.link.source.x1;var o=t.link.target.x0-r;var s=a(i,o);var l=s(e);var u=s(1-e);var f=t.link.y0-t.link.width/2;var c=t.link.y0+t.link.width/2;var v=t.link.y1-t.link.width/2;var h=t.link.y1+t.link.width/2;var p="M"+i+","+f;var d="C"+l+","+f+" "+u+","+v+" "+o+","+v;var g="C"+u+","+h+" "+l+","+c+" "+i+","+c;var y=r>0?"L"+(o+r)+","+(v+t.link.width/2):"";y+="L"+o+","+h;return p+d+y+g+"Z"}}return t}function L(e,t){var r=u(t.color);var n=l.nodePadAcross;var a=e.nodePad/2;t.dx=t.x1-t.x0;t.dy=t.y1-t.y0;var i=t.dx;var o=Math.max(.5,t.dy);var s="node_"+t.pointNumber;if(t.group){s=v.randstr()}t.trace=e.trace;t.curveNumber=e.trace.index;return{index:t.pointNumber,key:s,partOfGroup:t.partOfGroup||false,group:t.group,traceId:e.key,trace:e.trace,node:t,nodePad:e.nodePad,nodeLineColor:e.nodeLineColor,nodeLineWidth:e.nodeLineWidth,textFont:e.textFont,size:e.horizontal?e.height:e.width,visibleWidth:Math.ceil(i),visibleHeight:o,zoneX:-n,zoneY:-a,zoneWidth:i+2*n,zoneHeight:o+2*a,labelY:e.horizontal?t.dy/2+1:t.dx/2+1,left:t.originalLayer===1,sizeAcross:e.width,forceLayouts:e.forceLayouts,horizontal:e.horizontal,darkBackground:r.getBrightness()<=128,tinyColorHue:f.tinyRGB(r),tinyColorAlpha:r.getAlpha(),valueFormat:e.valueFormat,valueSuffix:e.valueSuffix,sankey:e.sankey,graph:e.graph,arrangement:e.arrangement,uniqueNodeLabelPathId:[e.guid,e.key,s].join("_"),interactionState:e.interactionState,figure:e}}function C(e){e.attr("transform",(function(e){return h(e.node.x0.toFixed(3),e.node.y0.toFixed(3))}))}function I(e){e.call(C)}function P(e,t){e.call(I);t.attr("d",E())}function O(e){e.attr("width",(function(e){return e.node.x1-e.node.x0})).attr("height",(function(e){return e.visibleHeight}))}function D(e){return e.link.width>1||e.linkLineWidth>0}function z(e){var t=h(e.translateX,e.translateY);return t+(e.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function R(e,t,r){e.on(".basic",null).on("mouseover.basic",(function(e){if(!e.interactionState.dragInProgress&&!e.partOfGroup){r.hover(this,e,t);e.interactionState.hovered=[this,e]}})).on("mousemove.basic",(function(e){if(!e.interactionState.dragInProgress&&!e.partOfGroup){r.follow(this,e);e.interactionState.hovered=[this,e]}})).on("mouseout.basic",(function(e){if(!e.interactionState.dragInProgress&&!e.partOfGroup){r.unhover(this,e,t);e.interactionState.hovered=false}})).on("click.basic",(function(e){if(e.interactionState.hovered){r.unhover(this,e,t);e.interactionState.hovered=false}if(!e.interactionState.dragInProgress&&!e.partOfGroup){r.select(this,e,t)}}))}function F(e,t,r,n){var a=i.behavior.drag().origin((function(e){return{x:e.node.x0+e.visibleWidth/2,y:e.node.y0+e.visibleHeight/2}})).on("dragstart",(function(a){if(a.arrangement==="fixed")return;v.ensureSingle(n._fullLayout._infolayer,"g","dragcover",(function(e){n._fullLayout._dragCover=e}));v.raiseToTop(this);a.interactionState.dragInProgress=a.node;H(a.node);if(a.interactionState.hovered){r.nodeEvents.unhover.apply(0,a.interactionState.hovered);a.interactionState.hovered=false}if(a.arrangement==="snap"){var i=a.traceId+"|"+a.key;if(a.forceLayouts[i]){a.forceLayouts[i].alpha(1)}else{B(e,i,a,n)}N(e,t,a,i,n)}})).on("drag",(function(r){if(r.arrangement==="fixed")return;var n=i.event.x;var a=i.event.y;if(r.arrangement==="snap"){r.node.x0=n-r.visibleWidth/2;r.node.x1=n+r.visibleWidth/2;r.node.y0=a-r.visibleHeight/2;r.node.y1=a+r.visibleHeight/2}else{if(r.arrangement==="freeform"){r.node.x0=n-r.visibleWidth/2;r.node.x1=n+r.visibleWidth/2}a=Math.max(0,Math.min(r.size-r.visibleHeight/2,a));r.node.y0=a-r.visibleHeight/2;r.node.y1=a+r.visibleHeight/2}H(r.node);if(r.arrangement!=="snap"){r.sankey.update(r.graph);P(e.filter(q(r)),t)}})).on("dragend",(function(e){if(e.arrangement==="fixed")return;e.interactionState.dragInProgress=false;for(var t=0;t<e.node.childrenNodes.length;t++){e.node.childrenNodes[t].x=e.node.x;e.node.childrenNodes[t].y=e.node.y}if(e.arrangement!=="snap")U(e,n)}));e.on(".drag",null).call(a)}function B(e,t,r,a){G(r.graph.nodes);var i=r.graph.nodes.filter((function(e){return e.originalX===r.node.originalX})).filter((function(e){return!e.partOfGroup}));r.forceLayouts[t]=n.forceSimulation(i).alphaDecay(0).force("collide",n.forceCollide().radius((function(e){return e.dy/2+r.nodePad/2})).strength(1).iterations(l.forceIterations)).force("constrain",j(e,t,i,r,a)).stop()}function N(e,t,r,n,a){window.requestAnimationFrame((function i(){var o;for(o=0;o<l.forceTicksPerFrame;o++){r.forceLayouts[n].tick()}var s=r.graph.nodes;Z(s);r.sankey.update(r.graph);P(e.filter(q(r)),t);if(r.forceLayouts[n].alpha()>0){window.requestAnimationFrame(i)}else{var u=r.node.originalX;r.node.x0=u-r.visibleWidth/2;r.node.x1=u+r.visibleWidth/2;U(r,a)}}))}function j(e,t,r,n){return function e(){var a=0;for(var i=0;i<r.length;i++){var o=r[i];if(o===n.interactionState.dragInProgress){o.x=o.lastDraggedX;o.y=o.lastDraggedY}else{o.vx=(o.originalX-o.x)/l.forceTicksPerFrame;o.y=Math.min(n.size-o.dy/2,Math.max(o.dy/2,o.y))}a=Math.max(a,Math.abs(o.vx),Math.abs(o.vy))}if(!n.interactionState.dragInProgress&&a<.1&&n.forceLayouts[t].alpha()>0){n.forceLayouts[t].alpha(0)}}}function U(e,t){var r=[];var n=[];for(var a=0;a<e.graph.nodes.length;a++){var i=(e.graph.nodes[a].x0+e.graph.nodes[a].x1)/2;var o=(e.graph.nodes[a].y0+e.graph.nodes[a].y1)/2;r.push(i/e.figure.width);n.push(o/e.figure.height)}b.call("_guiRestyle",t,{"node.x":[r],"node.y":[n]},e.trace.index).then((function(){if(t._fullLayout._dragCover)t._fullLayout._dragCover.remove()}))}function V(e){var t=[];var r;for(r=0;r<e.length;r++){e[r].originalX=(e[r].x0+e[r].x1)/2;e[r].originalY=(e[r].y0+e[r].y1)/2;if(t.indexOf(e[r].originalX)===-1){t.push(e[r].originalX)}}t.sort((function(e,t){return e-t}));for(r=0;r<e.length;r++){e[r].originalLayerIndex=t.indexOf(e[r].originalX);e[r].originalLayer=e[r].originalLayerIndex/(t.length-1)}}function H(e){e.lastDraggedX=e.x0+e.dx/2;e.lastDraggedY=e.y0+e.dy/2}function q(e){return function(t){return t.node.originalX===e.node.originalX}}function G(e){for(var t=0;t<e.length;t++){e[t].y=(e[t].y0+e[t].y1)/2;e[t].x=(e[t].x0+e[t].x1)/2}}function Z(e){for(var t=0;t<e.length;t++){e[t].y0=e[t].y-e[t].dy/2;e[t].y1=e[t].y0+e[t].dy;e[t].x0=e[t].x-e[t].dx/2;e[t].x1=e[t].x0+e[t].dx}}e.exports=function(e,t,r,n,a){var o=e._context.staticPlot;var s=false;v.ensureSingle(e._fullLayout._infolayer,"g","first-render",(function(){s=true}));var d=e._fullLayout._dragCover;var b=r.filter((function(e){return m(e).trace.visible})).map(A.bind(null,n));var _=t.selectAll("."+l.cn.sankey).data(b,g);_.exit().remove();_.enter().append("g").classed(l.cn.sankey,true).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",o?"none":"auto").attr("transform",z);_.each((function(t,r){e._fullData[r]._sankey=t;var n="bgsankey-"+t.trace.uid+"-"+r;v.ensureSingle(e._fullLayout._draggers,"rect",n);e._fullData[r]._bgRect=i.select("."+n);e._fullData[r]._bgRect.style("pointer-events",o?"none":"all").attr("width",t.width).attr("height",t.height).attr("x",t.translateX).attr("y",t.translateY).classed("bgsankey",true).style({fill:"transparent","stroke-width":0})}));_.transition().ease(l.ease).duration(l.duration).attr("transform",z);var S=_.selectAll("."+l.cn.sankeyLinks).data(y,g);S.enter().append("g").classed(l.cn.sankeyLinks,true).style("fill","none");var I=S.selectAll("."+l.cn.sankeyLink).data((function(e){var t=e.graph.links;return t.filter((function(e){return e.value})).map(M.bind(null,e))}),g);I.enter().append("path").classed(l.cn.sankeyLink,true).call(R,_,a.linkEvents);I.style("stroke",(function(e){return D(e)?f.tinyRGB(u(e.linkLineColor)):e.tinyColorHue})).style("stroke-opacity",(function(e){return D(e)?f.opacity(e.linkLineColor):e.tinyColorAlpha})).style("fill",(function(e){return e.tinyColorHue})).style("fill-opacity",(function(e){return e.tinyColorAlpha})).style("stroke-width",(function(e){return D(e)?e.linkLineWidth:1})).attr("d",E());I.style("opacity",(function(){return e._context.staticPlot||s||d?1:0})).transition().ease(l.ease).duration(l.duration).style("opacity",1);I.exit().transition().ease(l.ease).duration(l.duration).style("opacity",0).remove();var P=_.selectAll("."+l.cn.sankeyNodeSet).data(y,g);P.enter().append("g").classed(l.cn.sankeyNodeSet,true);P.style("cursor",(function(e){switch(e.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}}));var B=P.selectAll("."+l.cn.sankeyNode).data((function(e){var t=e.graph.nodes;V(t);return t.map(L.bind(null,e))}),g);B.enter().append("g").classed(l.cn.sankeyNode,true).call(C).style("opacity",(function(t){return(e._context.staticPlot||s)&&!t.partOfGroup?1:0}));B.call(R,_,a.nodeEvents).call(F,I,a,e);B.transition().ease(l.ease).duration(l.duration).call(C).style("opacity",(function(e){return e.partOfGroup?0:1}));B.exit().transition().ease(l.ease).duration(l.duration).style("opacity",0).remove();var N=B.selectAll("."+l.cn.nodeRect).data(y);N.enter().append("rect").classed(l.cn.nodeRect,true).call(O);N.style("stroke-width",(function(e){return e.nodeLineWidth})).style("stroke",(function(e){return f.tinyRGB(u(e.nodeLineColor))})).style("stroke-opacity",(function(e){return f.opacity(e.nodeLineColor)})).style("fill",(function(e){return e.tinyColorHue})).style("fill-opacity",(function(e){return e.tinyColorAlpha}));N.transition().ease(l.ease).duration(l.duration).call(O);var j=B.selectAll("."+l.cn.nodeLabel).data(y);j.enter().append("text").classed(l.cn.nodeLabel,true).style("cursor","default");j.attr("data-notex",1).text((function(e){return e.node.label})).each((function(t){var r=i.select(this);c.font(r,t.textFont);x.convertToTspans(r,e)})).style("text-shadow",x.makeTextShadow(e._fullLayout.paper_bgcolor)).attr("text-anchor",(function(e){return e.horizontal&&e.left?"end":"start"})).attr("transform",(function(e){var t=i.select(this);var r=x.lineCount(t);var n=e.textFont.size*((r-1)*T-w);var a=e.nodeLineWidth/2+k;var o=((e.horizontal?e.visibleHeight:e.visibleWidth)-n)/2;if(e.horizontal){if(e.left){a=-a}else{a+=e.visibleWidth}}var s=e.horizontal?"":"scale(-1,1)"+p(90);return h(e.horizontal?a:o,e.horizontal?o:a)+s}));j.transition().ease(l.ease).duration(l.duration)}},84564:function(e){"use strict";e.exports=function e(t,r){var n=t.cd;var a=[];var i=n[0].trace;var o=i._sankey.graph.nodes;for(var s=0;s<o.length;s++){var l=o[s];if(l.partOfGroup)continue;var u=[(l.x0+l.x1)/2,(l.y0+l.y1)/2];if(i.orientation==="v")u.reverse();if(r&&r.contains(u,false,s,t)){a.push({pointNumber:l.pointNumber})}}return a}},75225:function(e,t,r){"use strict";var n=r(71828);e.exports=function e(t,r){for(var a=0;a<t.length;a++)t[a].i=a;n.mergeArray(r.text,t,"tx");n.mergeArray(r.texttemplate,t,"txt");n.mergeArray(r.hovertext,t,"htx");n.mergeArray(r.customdata,t,"data");n.mergeArray(r.textposition,t,"tp");if(r.textfont){n.mergeArrayCastPositive(r.textfont.size,t,"ts");n.mergeArray(r.textfont.color,t,"tc");n.mergeArray(r.textfont.family,t,"tf")}var i=r.marker;if(i){n.mergeArrayCastPositive(i.size,t,"ms");n.mergeArrayCastPositive(i.opacity,t,"mo");n.mergeArray(i.symbol,t,"mx");n.mergeArray(i.angle,t,"ma");n.mergeArray(i.standoff,t,"mf");n.mergeArray(i.color,t,"mc");var o=i.line;if(i.line){n.mergeArray(o.color,t,"mlc");n.mergeArrayCastPositive(o.width,t,"mlw")}var s=i.gradient;if(s&&s.type!=="none"){n.mergeArray(s.type,t,"mgt");n.mergeArray(s.color,t,"mgc")}}}},82196:function(e,t,r){"use strict";var n=r(12663).axisHoverFormat;var a=r(5386).si;var i=r(5386).fF;var o=r(50693);var s=r(41940);var l=r(79952).P;var u=r(79952).u;var f=r(91424);var c=r(47581);var v=r(1426).extendFlat;function h(e){return{valType:"any",dflt:0,editType:"calc"}}function p(e){return{valType:"any",editType:"calc"}}function d(e){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}e.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:true},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:true},dx:{valType:"number",dflt:1,editType:"calc",anim:true},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:true},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:true},dy:{valType:"number",dflt:1,editType:"calc",anim:true},xperiod:h("x"),yperiod:h("y"),xperiod0:p("x0"),yperiod0:p("y0"),xperiodalignment:d("x"),yperiodalignment:d("y"),xhoverformat:n("x"),yhoverformat:n("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:true,editType:"calc"},texttemplate:a({},{}),hovertext:{valType:"string",dflt:"",arrayOk:true,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:i({},{keys:c.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:true},width:{valType:"number",min:0,dflt:2,editType:"style",anim:true},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:v({},l,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:true,editType:"plot"},simplify:{valType:"boolean",dflt:true,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:false,editType:"calc"},cliponaxis:{valType:"boolean",dflt:true,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:true},fillpattern:u,marker:v({symbol:{valType:"enumerated",values:f.symbolList,dflt:"circle",arrayOk:true,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:true,editType:"style",anim:true},angle:{valType:"angle",dflt:0,arrayOk:true,editType:"plot",anim:false},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:false},standoff:{valType:"number",min:0,dflt:0,arrayOk:true,editType:"plot",anim:true},size:{valType:"number",min:0,dflt:6,arrayOk:true,editType:"calc",anim:true},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:v({width:{valType:"number",min:0,arrayOk:true,editType:"style",anim:true},editType:"calc"},o("marker.line",{anim:true})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:true,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:true,editType:"calc"},editType:"calc"},editType:"calc"},o("marker",{anim:true})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:true,editType:"calc"},textfont:s({editType:"calc",colorEditType:"style",arrayOk:true})}},47761:function(e,t,r){"use strict";var n=r(92770);var a=r(71828);var i=r(89298);var o=r(42973);var s=r(50606).BADNUM;var l=r(34098);var u=r(36922);var f=r(75225);var c=r(66279);function v(e,t){var r=e._fullLayout;var l=t._xA=i.getFromId(e,t.xaxis||"x","x");var v=t._yA=i.getFromId(e,t.yaxis||"y","y");var g=l.makeCalcdata(t,"x");var m=v.makeCalcdata(t,"y");var x=o(t,l,"x",g);var b=o(t,v,"y",m);var _=x.vals;var w=b.vals;var T=t._length;var k=new Array(T);var A=t.ids;var M=y(t,r,l,v);var S=false;var E,L,C,I,P,O;d(r,t);var D="x";var z="y";var R;if(M){a.pushUnique(M.traceIndices,t._expandedIndex);E=M.orientation==="v";if(E){z="s";R="x"}else{D="s";R="y"}P=M.stackgaps==="interpolate"}else{var F=p(t,T);h(e,t,l,v,_,w,F)}var B=!!t.xperiodalignment;var N=!!t.yperiodalignment;for(L=0;L<T;L++){var j=k[L]={};var U=n(_[L]);var V=n(w[L]);if(U&&V){j[D]=_[L];j[z]=w[L];if(B){j.orig_x=g[L];j.xEnd=x.ends[L];j.xStart=x.starts[L]}if(N){j.orig_y=m[L];j.yEnd=b.ends[L];j.yStart=b.starts[L]}}else if(M&&(E?U:V)){j[R]=E?_[L]:w[L];j.gap=true;if(P){j.s=s;S=true}else{j.s=0}}else{j[D]=j[z]=s}if(A){j.id=String(A[L])}}f(k,t);u(e,t);c(k,t);if(M){L=0;while(L<k.length){if(k[L][R]===s){k.splice(L,1)}else L++}a.sort(k,(function(e,t){return e[R]-t[R]||e.i-t.i}));if(S){L=0;while(L<k.length-1&&k[L].gap){L++}O=k[L].s;if(!O)O=k[L].s=0;for(C=0;C<L;C++){k[C].s=O}I=k.length-1;while(I>L&&k[I].gap){I--}O=k[I].s;for(C=k.length-1;C>I;C--){k[C].s=O}while(L<I){L++;if(k[L].gap){C=L+1;while(k[C].gap){C++}var H=k[L-1][R];var q=k[L-1].s;var G=(k[C].s-q)/(k[C][R]-H);while(L<C){k[L].s=q+(k[L][R]-H)*G;L++}}}}}return k}function h(e,t,r,n,a,o,s){var u=t._length;var f=e._fullLayout;var c=r._id;var v=n._id;var h=f._firstScatter[g(t)]===t.uid;var p=(y(t,f,r,n)||{}).orientation;var d=t.fill;r._minDtick=0;n._minDtick=0;var m={padded:true};var x={padded:true};if(s){m.ppad=x.ppad=s}var b=u<2||a[0]!==a[u-1]||o[0]!==o[u-1];if(b&&(d==="tozerox"||d==="tonextx"&&(h||p==="h"))){m.tozero=true}else if(!(t.error_y||{}).visible&&(d==="tonexty"||d==="tozeroy"||!l.hasMarkers(t)&&!l.hasText(t))){m.padded=false;m.ppad=0}if(b&&(d==="tozeroy"||d==="tonexty"&&(h||p==="v"))){x.tozero=true}else if(d==="tonextx"||d==="tozerox"){x.padded=false}if(c)t._extremes[c]=i.findExtremes(r,a,m);if(v)t._extremes[v]=i.findExtremes(n,o,x)}function p(e,t){if(!l.hasMarkers(e))return;var r=e.marker;var n=1.6*(e.marker.sizeref||1);var o;if(e.marker.sizemode==="area"){o=function(e){return Math.max(Math.sqrt((e||0)/n),3)}}else{o=function(e){return Math.max((e||0)/n,3)}}if(a.isArrayOrTypedArray(r.size)){var s={type:"linear"};i.setConvert(s);var u=s.makeCalcdata(e.marker,"size");var f=new Array(t);for(var c=0;c<t;c++){f[c]=o(u[c])}return f}else{return o(r.size)}}function d(e,t){var r=g(t);var n=e._firstScatter;if(!n[r])n[r]=t.uid}function g(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function y(e,t,r,n){var a=e.stackgroup;if(!a)return;var i=t._scatterStackOpts[r._id+n._id][a];var o=i.orientation==="v"?n:r;if(o.type==="linear"||o.type==="log")return i}e.exports={calc:v,calcMarkerSize:p,calcAxisExpansion:h,setFirstScatter:d,getStackOpts:y}},66279:function(e,t,r){"use strict";var n=r(71828);e.exports=function e(t,r){if(n.isArrayOrTypedArray(r.selectedpoints)){n.tagSelected(t,r)}}},36922:function(e,t,r){"use strict";var n=r(52075).hasColorscale;var a=r(78803);var i=r(34098);e.exports=function e(t,r){if(i.hasLines(r)&&n(r,"line")){a(t,r,{vals:r.line.color,containerStr:"line",cLetter:"c"})}if(i.hasMarkers(r)){if(n(r,"marker")){a(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"})}if(n(r,"marker.line")){a(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"})}}}},47581:function(e){"use strict";e.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},72626:function(e,t,r){"use strict";var n=r(47761);var a=r(11661).setGroupPositions;function i(e,t){var r=t.xaxis;var n=t.yaxis;var i=e._fullLayout;var o=e._fullData;var s=e.calcdata;var l=[];var u=[];for(var f=0;f<o.length;f++){var c=o[f];if(c.visible===true&&c.type==="scatter"&&c.xaxis===r._id&&c.yaxis===n._id){if(c.orientation==="h"){l.push(s[f])}else if(c.orientation==="v"){u.push(s[f])}}}var v={mode:i.scattermode,gap:i.scattergap};a(e,r,n,u,v);a(e,n,r,l,v)}e.exports=function e(t,r){if(t._fullLayout.scattermode==="group"){i(t,r)}var a=r.xaxis;var s=r.yaxis;var l=a._id+s._id;var u=t._fullLayout._scatterStackOpts[l];if(!u)return;var f=t.calcdata;var c,v,h,p,d,g,y,m,x;var b,_,w,T,k;var A;for(var M in u){b=u[M];var S=b.traceIndices;if(!S.length)continue;_=b.stackgaps==="interpolate";w=b.groupnorm;if(b.orientation==="v"){T="x";k="y"}else{T="y";k="x"}A=new Array(S.length);for(c=0;c<A.length;c++){A[c]=false}g=f[S[0]];var E=new Array(g.length);for(c=0;c<g.length;c++){E[c]=g[c][T]}for(c=1;c<S.length;c++){d=f[S[c]];for(v=h=0;v<d.length;v++){y=d[v][T];for(;y>E[h]&&h<E.length;h++){o(d,v,E[h],c,A,_,T);v++}if(y!==E[h]){for(p=0;p<c;p++){o(f[S[p]],h,y,p,A,_,T)}E.splice(h,0,y)}h++}for(;h<E.length;h++){o(d,v,E[h],c,A,_,T);v++}}var L=E.length;for(v=0;v<g.length;v++){m=g[v][k]=g[v].s;for(c=1;c<S.length;c++){d=f[S[c]];d[0].trace._rawLength=d[0].trace._length;d[0].trace._length=L;m+=d[v].s;d[v][k]=m}if(w){x=(w==="fraction"?m:m/100)||1;for(c=0;c<S.length;c++){var C=f[S[c]][v];C[k]/=x;C.sNorm=C.s/x}}}for(c=0;c<S.length;c++){d=f[S[c]];var I=d[0].trace;var P=n.calcMarkerSize(I,I._rawLength);var O=Array.isArray(P);if(P&&A[c]||O){var D=P;P=new Array(L);for(v=0;v<L;v++){P[v]=d[v].gap?0:O?D[d[v].i]:D}}var z=new Array(L);var R=new Array(L);for(v=0;v<L;v++){z[v]=d[v].x;R[v]=d[v].y}n.calcAxisExpansion(t,I,a,s,z,R,P);d[0].t.orientation=b.orientation}}};function o(e,t,r,n,a,i,o){a[n]=true;var l={i:null,gap:true,s:0};l[o]=r;e.splice(t,0,l);if(t&&r===e[t-1][o]){var u=e[t-1];l.s=u.s;l.i=u.i;l.gap=u.gap}else if(i){l.s=s(e,t,r,o)}if(!t){e[0].t=e[1].t;e[0].trace=e[1].trace;delete e[1].t;delete e[1].trace}}function s(e,t,r,n){var a=e[t-1];var i=e[t+1];if(!i)return a.s;if(!a)return i.s;return a.s+(i.s-a.s)*(r-a[n])/(i[n]-a[n])}},34936:function(e,t,r){"use strict";var n=r(71828);var a=r(26125);var i=r(82196);e.exports=function e(t,r){var o,s,l;function u(e){return n.coerce(s._input,s,i,e)}if(r.scattermode==="group"){for(l=0;l<t.length;l++){s=t[l];if(s.type==="scatter"){o=s._input;a(o,s,r,u)}}}for(l=0;l<t.length;l++){var f=t[l];if(f.type!=="scatter")continue;var c=f.fill;if(c==="none"||c==="toself")continue;f.opacity=undefined;if(c==="tonexty"||c==="tonextx"){for(var v=l-1;v>=0;v--){var h=t[v];if(h.type==="scatter"&&h.xaxis===f.xaxis&&h.yaxis===f.yaxis){h.opacity=undefined;break}}}}}},17438:function(e,t,r){"use strict";var n=r(71828);var a=r(73972);var i=r(82196);var o=r(47581);var s=r(34098);var l=r(67513);var u=r(73927);var f=r(565);var c=r(49508);var v=r(11058);var h=r(94039);var p=r(82410);var d=r(28908);var g=r(71828).coercePattern;e.exports=function e(t,r,y,m){function x(e,a){return n.coerce(t,r,i,e,a)}var b=l(t,r,m,x);if(!b)r.visible=false;if(!r.visible)return;u(t,r,m,x);x("xhoverformat");x("yhoverformat");var _=f(t,r,m,x);if(m.scattermode==="group"&&r.orientation===undefined){x("orientation","v")}var w=!_&&b<o.PTS_LINESONLY?"lines+markers":"lines";x("text");x("hovertext");x("mode",w);if(s.hasLines(r)){v(t,r,y,m,x,{backoff:true});h(t,r,x);x("connectgaps");x("line.simplify")}if(s.hasMarkers(r)){c(t,r,y,m,x,{gradient:true})}if(s.hasText(r)){x("texttemplate");p(t,r,m,x)}var T=[];if(s.hasMarkers(r)||s.hasText(r)){x("cliponaxis");x("marker.maxdisplayed");T.push("points")}x("fill",_?_.fillDflt:"none");if(r.fill!=="none"){d(t,r,y,x);if(!s.hasLines(r))h(t,r,x);g(x,"fillpattern",r.fillcolor,false)}var k=(r.line||{}).color;var A=(r.marker||{}).color;if(r.fill==="tonext"||r.fill==="toself"){T.push("fills")}x("hoveron",T.join("+")||"points");if(r.hoveron!=="fills")x("hovertemplate");var M=a.getComponentMethod("errorbars","supplyDefaults");M(t,r,k||A||y,{axis:"y"});M(t,r,k||A||y,{axis:"x",inherit:"y"});n.coerceSelectionMarkerOpacity(r,x)}},28908:function(e,t,r){"use strict";var n=r(7901);var a=r(71828).isArrayOrTypedArray;e.exports=function e(t,r,i,o){var s=false;if(r.marker){var l=r.marker.color;var u=(r.marker.line||{}).color;if(l&&!a(l)){s=l}else if(u&&!a(u)){s=u}}o("fillcolor",n.addOpacity((r.line||{}).color||s||i,.5))}},8225:function(e,t,r){"use strict";var n=r(89298);e.exports=function e(t,r,a){var i={};var o={_fullLayout:a};var s=n.getFromTrace(o,r,"x");var l=n.getFromTrace(o,r,"y");var u=t.orig_x;if(u===undefined)u=t.x;var f=t.orig_y;if(f===undefined)f=t.y;i.xLabel=n.tickText(s,s.c2l(u),true).text;i.yLabel=n.tickText(l,l.c2l(f),true).text;return i}},34603:function(e,t,r){"use strict";var n=r(7901);var a=r(34098);e.exports=function e(t,r){var i,o;if(t.mode==="lines"){i=t.line.color;return i&&n.opacity(i)?i:t.fillcolor}else if(t.mode==="none"){return t.fill?t.fillcolor:""}else{var s=r.mcc||(t.marker||{}).color;var l=r.mlcc||((t.marker||{}).line||{}).color;o=s&&n.opacity(s)?s:l&&n.opacity(l)&&(r.mlw||((t.marker||{}).line||{}).width)?l:"";if(o){if(n.opacity(o)<.3){return n.addOpacity(o,.3)}else return o}else{i=(t.line||{}).color;return i&&n.opacity(i)&&a.hasLines(t)&&t.line.width?i:t.fillcolor}}}},26125:function(e,t,r){"use strict";var n=r(99082).getAxisGroup;e.exports=function e(t,r,a,i){var o=r.orientation;var s=r[{v:"x",h:"y"}[o]+"axis"];var l=n(a,s)+o;var u=a._alignmentOpts||{};var f=i("alignmentgroup");var c=u[l];if(!c)c=u[l]={};var v=c[f];if(v){v.traces.push(r)}else{v=c[f]={traces:[r],alignmentIndex:Object.keys(c).length,offsetGroups:{}}}var h=i("offsetgroup");var p=v.offsetGroups;var d=p[h];if(h){if(!d){d=p[h]={offsetIndex:Object.keys(p).length}}r._offsetIndex=d.offsetIndex}}},33720:function(e,t,r){"use strict";var n=r(71828);var a=r(30211);var i=r(73972);var o=r(34603);var s=r(7901);var l=n.fillText;e.exports=function e(t,r,u,f){var c=t.cd;var v=c[0].trace;var h=t.xa;var p=t.ya;var d=h.c2p(r);var g=p.c2p(u);var y=[d,g];var m=v.hoveron||"";var x=v.mode.indexOf("markers")!==-1?3:.5;var b=!!v.xperiodalignment;var _=!!v.yperiodalignment;if(m.indexOf("points")!==-1){var w=function(e){if(b){var t=h.c2p(e.xStart);var r=h.c2p(e.xEnd);return d>=Math.min(t,r)&&d<=Math.max(t,r)?0:Infinity}var n=Math.max(3,e.mrc||0);var a=1-1/n;var i=Math.abs(h.c2p(e.x)-d);return i<n?a*i/n:i-n+a};var T=function(e){if(_){var t=p.c2p(e.yStart);var r=p.c2p(e.yEnd);return g>=Math.min(t,r)&&g<=Math.max(t,r)?0:Infinity}var n=Math.max(3,e.mrc||0);var a=1-1/n;var i=Math.abs(p.c2p(e.y)-g);return i<n?a*i/n:i-n+a};var k=function(e){var t=Math.max(x,e.mrc||0);var r=h.c2p(e.x)-d;var n=p.c2p(e.y)-g;return Math.max(Math.sqrt(r*r+n*n)-t,1-x/t)};var A=a.getDistanceFunction(f,w,T,k);a.getClosest(c,A,t);if(t.index!==false){var M=c[t.index];var S=h.c2p(M.x,true);var E=p.c2p(M.y,true);var L=M.mrc||1;t.index=M.i;var C=c[0].t.orientation;var I=C&&(M.sNorm||M.s);var P=C==="h"?I:M.orig_x!==undefined?M.orig_x:M.x;var O=C==="v"?I:M.orig_y!==undefined?M.orig_y:M.y;n.extendFlat(t,{color:o(v,M),x0:S-L,x1:S+L,xLabelVal:P,y0:E-L,y1:E+L,yLabelVal:O,spikeDistance:k(M),hovertemplate:v.hovertemplate});l(M,v,t);i.getComponentMethod("errorbars","hoverInfo")(M,v,t);return[t]}}if(m.indexOf("fills")!==-1&&v._polygons){var D=v._polygons;var z=[];var R=false;var F=Infinity;var B=-Infinity;var N=Infinity;var j=-Infinity;var U,V,H,q,G,Z,Y,W,X;for(U=0;U<D.length;U++){H=D[U];if(H.contains(y)){R=!R;z.push(H);N=Math.min(N,H.ymin);j=Math.max(j,H.ymax)}}if(R){N=Math.max(N,0);j=Math.min(j,p._length);var J=(N+j)/2;for(U=0;U<z.length;U++){q=z[U].pts;for(V=1;V<q.length;V++){W=q[V-1][1];X=q[V][1];if(W>J!==X>=J){Z=q[V-1][0];Y=q[V][0];if(X-W){G=Z+(Y-Z)*(J-W)/(X-W);F=Math.min(F,G);B=Math.max(B,G)}}}}F=Math.max(F,0);B=Math.min(B,h._length);var K=s.defaultLine;if(s.opacity(v.fillcolor))K=v.fillcolor;else if(s.opacity((v.line||{}).color)){K=v.line.color}n.extendFlat(t,{distance:t.maxHoverDistance,x0:F,x1:B,y0:J,y1:J,color:K,hovertemplate:false});delete t.index;if(v.text&&!Array.isArray(v.text)){t.text=String(v.text)}else t.text=v.name;return[t]}}}},67368:function(e,t,r){"use strict";var n=r(34098);e.exports={hasLines:n.hasLines,hasMarkers:n.hasMarkers,hasText:n.hasText,isBubble:n.isBubble,attributes:r(82196),layoutAttributes:r(21479),supplyDefaults:r(17438),crossTraceDefaults:r(34936),supplyLayoutDefaults:r(79334),calc:r(47761).calc,crossTraceCalc:r(72626),arraysToCalcdata:r(75225),plot:r(32663),colorbar:r(4898),formatLabels:r(8225),style:r(16296).style,styleOnSelect:r(16296).styleOnSelect,hoverPoints:r(33720),selectPoints:r(98002),animatable:true,moduleType:"trace",name:"scatter",basePlotModule:r(93612),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},21479:function(e){"use strict";e.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},79334:function(e,t,r){"use strict";var n=r(71828);var a=r(21479);e.exports=function(e,t){function r(r,i){return n.coerce(e,t,a,r,i)}var i=t.barmode==="group";if(t.scattermode==="group"){r("scattergap",i?t.bargap:.2)}}},11058:function(e,t,r){"use strict";var n=r(71828).isArrayOrTypedArray;var a=r(52075).hasColorscale;var i=r(1586);e.exports=function e(t,r,o,s,l,u){if(!u)u={};var f=(t.marker||{}).color;l("line.color",o);if(a(t,"line")){i(t,r,s,l,{prefix:"line.",cLetter:"c"})}else{var c=(n(f)?false:f)||o;l("line.color",c)}l("line.width");if(!u.noDash)l("line.dash");if(u.backoff)l("line.backoff")}},34621:function(e,t,r){"use strict";var n=r(91424);var a=r(50606);var i=a.BADNUM;var o=a.LOG_CLIP;var s=o+.5;var l=o-.5;var u=r(71828);var f=u.segmentsIntersect;var c=u.constrain;var v=r(47581);e.exports=function e(t,r){var a=r.trace||{};var o=r.xaxis;var h=r.yaxis;var p=o.type==="log";var d=h.type==="log";var g=o._length;var y=h._length;var m=r.backoff;var x=a.marker;var b=r.connectGaps;var _=r.baseTolerance;var w=r.shape;var T=w==="linear";var k=a.fill&&a.fill!=="none";var A=[];var M=v.minTolerance;var S=t.length;var E=new Array(S);var L=0;var C;var I,P,O,D;var z;var R;var F;var B;var N,j,U,V;var H,q,G;function Z(e){var n=t[e];if(!n)return false;var a=r.linearized?o.l2p(n.x):o.c2p(n.x);var u=r.linearized?h.l2p(n.y):h.c2p(n.y);if(a===i){if(p)a=o.c2p(n.x,true);if(a===i)return false;if(d&&u===i){a*=Math.abs(o._m*y*(o._m>0?s:l)/(h._m*g*(h._m>0?s:l)))}a*=1e3}if(u===i){if(d)u=h.c2p(n.y,true);if(u===i)return false;u*=1e3}return[a,u]}function Y(e,t,r,n){var a=r-e;var i=n-t;var o=.5-e;var s=.5-t;var l=a*a+i*i;var u=a*o+i*s;if(u>0&&u<l){var f=o*i-s*a;if(f*f<l)return true}}var W,X;function J(e,t){var r=e[0]/g;var n=e[1]/y;var a=Math.max(0,-r,r-1,-n,n-1);if(a&&W!==undefined&&Y(r,n,W,X)){a=0}if(a&&t&&Y(r,n,t[0]/g,t[1]/y)){a=0}return(1+v.toleranceGrowth*a)*_}function K(e,t){var r=e[0]-t[0];var n=e[1]-t[1];return Math.sqrt(r*r+n*n)}var $=v.maxScreensAway;var Q=-g*$;var ee=g*(1+$);var te=-y*$;var re=y*(1+$);var ne=[[Q,te,ee,te],[ee,te,ee,re],[ee,re,Q,re],[Q,re,Q,te]];var ae,ie,oe,se,le,ue;function fe(e,t){var r=[];var n=0;for(var a=0;a<4;a++){var i=ne[a];var o=f(e[0],e[1],t[0],t[1],i[0],i[1],i[2],i[3]);if(o&&(!n||Math.abs(o.x-r[0][0])>1||Math.abs(o.y-r[0][1])>1)){o=[o.x,o.y];if(n&&K(o,e)<K(r[0],e))r.unshift(o);else r.push(o);n++}}return r}function ce(e){if(e[0]<Q||e[0]>ee||e[1]<te||e[1]>re){return[c(e[0],Q,ee),c(e[1],te,re)]}}function ve(e,t){if(e[0]===t[0]&&(e[0]===Q||e[0]===ee))return true;if(e[1]===t[1]&&(e[1]===te||e[1]===re))return true}function he(e,t){var r=[];var n=ce(e);var a=ce(t);if(n&&a&&ve(n,a))return r;if(n)r.push(n);if(a)r.push(a);return r}function pe(e,t,r){return function(n,a){var i=ce(n);var o=ce(a);var s=[];if(i&&o&&ve(i,o))return s;if(i)s.push(i);if(o)s.push(o);var l=2*u.constrain((n[e]+a[e])/2,t,r)-((i||n)[e]+(o||a)[e]);if(l){var f;if(i&&o){f=l>0===i[e]>o[e]?i:o}else f=i||o;f[e]+=l}return s}}var de;if(w==="linear"||w==="spline"){de=fe}else if(w==="hv"||w==="vh"){de=he}else if(w==="hvh")de=pe(0,Q,ee);else if(w==="vhv")de=pe(1,te,re);function ge(e,t){var r=t[0]-e[0];var n=(t[1]-e[1])/r;var a=(e[1]*t[0]-t[1]*e[0])/r;if(a>0)return[n>0?Q:ee,re];else return[n>0?ee:Q,te]}function ye(e){var t=e[0];var r=e[1];var n=t===E[L-1][0];var a=r===E[L-1][1];if(n&&a)return;if(L>1){var i=t===E[L-2][0];var o=r===E[L-2][1];if(n&&(t===Q||t===ee)&&i){if(o)L--;else E[L-1]=e}else if(a&&(r===te||r===re)&&o){if(i)L--;else E[L-1]=e}else E[L++]=e}else E[L++]=e}function me(e){if(E[L-1][0]!==e[0]&&E[L-1][1]!==e[1]){ye([oe,se])}ye(e);le=null;oe=se=0}var xe=u.isArrayOrTypedArray(x);function be(e){if(e&&m){e.i=C;e.d=t;e.trace=a;e.marker=xe?x[e.i]:x;e.backoff=m}W=e[0]/g;X=e[1]/y;ae=e[0]<Q?Q:e[0]>ee?ee:0;ie=e[1]<te?te:e[1]>re?re:0;if(ae||ie){if(!L){E[L++]=[ae||e[0],ie||e[1]]}else if(le){var r=de(le,e);if(r.length>1){me(r[0]);E[L++]=r[1]}}else{ue=de(E[L-1],e)[0];E[L++]=ue}var n=E[L-1];if(ae&&ie&&(n[0]!==ae||n[1]!==ie)){if(le){if(oe!==ae&&se!==ie){if(oe&&se){ye(ge(le,e))}else{ye([oe||ae,se||ie])}}else if(oe&&se){ye([oe,se])}}ye([ae,ie])}else if(oe-ae&&se-ie){ye([ae||oe,ie||se])}le=e;oe=ae;se=ie}else{if(le){me(de(le,e)[0])}E[L++]=e}}for(C=0;C<S;C++){I=Z(C);if(!I)continue;L=0;le=null;be(I);for(C++;C<S;C++){O=Z(C);if(!O){if(b)continue;else break}if(!T||!r.simplify){be(O);continue}var _e=Z(C+1);N=K(O,I);if(!(k&&(L===0||L===S-1))&&N<J(O,_e)*M)continue;F=[(O[0]-I[0])/N,(O[1]-I[1])/N];D=I;j=N;U=H=q=0;R=false;P=O;for(C++;C<t.length;C++){z=_e;_e=Z(C+1);if(!z){if(b)continue;else break}B=[z[0]-I[0],z[1]-I[1]];G=B[0]*F[1]-B[1]*F[0];H=Math.min(H,G);q=Math.max(q,G);if(q-H>J(z,_e))break;P=z;V=B[0]*F[0]+B[1]*F[1];if(V>j){j=V;O=z;R=false}else if(V<U){U=V;D=z;R=true}}if(R){be(O);if(P!==D)be(D)}else{if(D!==I)be(D);if(P!==O)be(O)}be(P);if(C>=t.length||!z)break;be(z);I=z}if(le)ye([oe||le[0],se||le[1]]);A.push(E.slice(0,L))}var we=w.slice(w.length-1);if(m&&we!=="h"&&we!=="v"){var Te=false;var ke=-1;var Ae=[];for(var Me=0;Me<A.length;Me++){for(var Se=0;Se<A[Me].length-1;Se++){var Ee=A[Me][Se];var Le=A[Me][Se+1];var Ce=n.applyBackoff(Le,Ee);if(Ce[0]!==Le[0]||Ce[1]!==Le[1]){Te=true}if(!Ae[ke+1]){ke++;Ae[ke]=[Ee,[Ce[0],Ce[1]]]}}}return Te?Ae:A}return A}},94039:function(e){"use strict";e.exports=function e(t,r,n){var a=n("line.shape");if(a==="spline")n("line.smoothing")}},68687:function(e){"use strict";var t={tonextx:1,tonexty:1,tonext:1};e.exports=function e(r,n,a){var i,o,s,l,u;var f={};var c=false;var v=-1;var h=0;var p=-1;for(o=0;o<a.length;o++){i=a[o][0].trace;s=i.stackgroup||"";if(s){if(s in f){u=f[s]}else{u=f[s]=h;h++}}else if(i.fill in t&&p>=0){u=p}else{u=p=h;h++}if(u<v)c=true;i._groupIndex=v=u}var d=a.slice();if(c){d.sort((function(e,t){var r=e[0].trace;var n=t[0].trace;return r._groupIndex-n._groupIndex||r.index-n.index}))}var g={};for(o=0;o<d.length;o++){i=d[o][0].trace;s=i.stackgroup||"";if(i.visible===true){i._nexttrace=null;if(i.fill in t){l=g[s];i._prevtrace=l||null;if(l){l._nexttrace=i}}i._ownfill=i.fill&&(i.fill.substr(0,6)==="tozero"||i.fill==="toself"||i.fill.substr(0,2)==="to"&&!i._prevtrace);g[s]=i}else{i._prevtrace=i._nexttrace=i._ownfill=null}}return d}},39984:function(e,t,r){"use strict";var n=r(92770);e.exports=function e(t,r){if(!r){r=2}var a=t.marker;var i=a.sizeref||1;var o=a.sizemin||0;var s=a.sizemode==="area"?function(e){return Math.sqrt(e/i)}:function(e){return e/i};return function(e){var t=s(e/r);return n(t)&&t>0?Math.max(t,o):0}}},4898:function(e){"use strict";e.exports={container:"marker",min:"cmin",max:"cmax"}},49508:function(e,t,r){"use strict";var n=r(7901);var a=r(52075).hasColorscale;var i=r(1586);var o=r(34098);e.exports=function e(t,r,s,l,u,f){var c=o.isBubble(t);var v=(t.line||{}).color;var h;f=f||{};if(v)s=v;u("marker.symbol");u("marker.opacity",c?.7:1);u("marker.size");if(!f.noAngle){u("marker.angle");if(!f.noAngleRef){u("marker.angleref")}if(!f.noStandOff){u("marker.standoff")}}u("marker.color",s);if(a(t,"marker")){i(t,r,l,u,{prefix:"marker.",cLetter:"c"})}if(!f.noSelect){u("selected.marker.color");u("unselected.marker.color");u("selected.marker.size");u("unselected.marker.size")}if(!f.noLine){if(v&&!Array.isArray(v)&&r.marker.color!==v){h=v}else if(c)h=n.background;else h=n.defaultLine;u("marker.line.color",h);if(a(t,"marker.line")){i(t,r,l,u,{prefix:"marker.line.",cLetter:"c"})}u("marker.line.width",c?1:0)}if(c){u("marker.sizeref");u("marker.sizemin");u("marker.sizemode")}if(f.gradient){var p=u("marker.gradient.type");if(p!=="none"){u("marker.gradient.color")}}}},73927:function(e,t,r){"use strict";var n=r(71828).dateTick0;var a=r(50606);var i=a.ONEWEEK;function o(e,t){if(e%i===0){return n(t,1)}return n(t,0)}e.exports=function e(t,r,n,a,i){if(!i){i={x:true,y:true}}if(i.x){var s=a("xperiod");if(s){a("xperiod0",o(s,r.xcalendar));a("xperiodalignment")}}if(i.y){var l=a("yperiod");if(l){a("yperiod0",o(l,r.ycalendar));a("yperiodalignment")}}}},32663:function(e,t,r){"use strict";var n=r(39898);var a=r(73972);var i=r(71828);var o=i.ensureSingle;var s=i.identity;var l=r(91424);var u=r(34098);var f=r(34621);var c=r(68687);var v=r(61082).tester;e.exports=function e(t,r,a,i,o,s){var l,u;var f=!o;var v=!!o&&o.duration>0;var d=c(t,r,a);l=i.selectAll("g.trace").data(d,(function(e){return e[0].trace.uid}));l.enter().append("g").attr("class",(function(e){return"trace scatter trace"+e[0].trace.uid})).style("stroke-miterlimit",2);l.order();h(t,l,r);if(v){if(s){u=s()}var g=n.transition().duration(o.duration).ease(o.easing).each("end",(function(){u&&u()})).each("interrupt",(function(){u&&u()}));g.each((function(){i.selectAll("g.trace").each((function(e,n){p(t,n,r,e,d,this,o)}))}))}else{l.each((function(e,n){p(t,n,r,e,d,this,o)}))}if(f){l.exit().remove()}i.selectAll("path:not([d])").remove()};function h(e,t,r){t.each((function(t){var a=o(n.select(this),"g","fills");l.setClipUrl(a,r.layerClipId,e);var i=t[0].trace;var u=[];if(i._ownfill)u.push("_ownFill");if(i._nexttrace)u.push("_nextFill");var f=a.selectAll("g").data(u,s);f.enter().append("g");f.exit().each((function(e){i[e]=null})).remove();f.order().each((function(e){i[e]=o(n.select(this),"path","js-fill")}))}))}function p(e,t,r,c,h,p,g){var y=e._context.staticPlot;var m;d(e,t,r,c,h);var x=!!g&&g.duration>0;function b(e){return x?e.transition():e}var _=r.xaxis;var w=r.yaxis;var T=c[0].trace;var k=T.line;var A=n.select(p);var M=o(A,"g","errorbars");var S=o(A,"g","lines");var E=o(A,"g","points");var L=o(A,"g","text");a.getComponentMethod("errorbars","plot")(e,M,r,g);if(T.visible!==true)return;b(A).style("opacity",T.opacity);var C,I;var P=T.fill.charAt(T.fill.length-1);if(P!=="x"&&P!=="y")P="";c[0][r.isRangePlot?"nodeRangePlot3":"node3"]=A;var O="";var D=[];var z=T._prevtrace;if(z){O=z._prevRevpath||"";I=z._nextFill;D=z._polygons}var R;var F;var B="";var N="";var j,U,V;var H,q,G,Z;var Y=[];var W=i.noop;C=T._ownFill;if(u.hasLines(T)||T.fill!=="none"){if(I){I.datum(c)}if(["hv","vh","hvh","vhv"].indexOf(k.shape)!==-1){j=l.steps(k.shape);U=l.steps(k.shape.split("").reverse().join(""))}else if(k.shape==="spline"){j=U=function(e){var t=e[e.length-1];if(e.length>1&&e[0][0]===t[0]&&e[0][1]===t[1]){return l.smoothclosed(e.slice(1),k.smoothing)}else{return l.smoothopen(e,k.smoothing)}}}else{j=U=function(e){return"M"+e.join("L")}}V=function(e){return U(e.reverse())};Y=f(c,{xaxis:_,yaxis:w,trace:T,connectGaps:T.connectgaps,baseTolerance:Math.max(k.width||1,3)/4,shape:k.shape,backoff:k.backoff,simplify:k.simplify,fill:T.fill});Z=T._polygons=new Array(Y.length);for(m=0;m<Y.length;m++){T._polygons[m]=v(Y[m])}if(Y.length){H=Y[0][0];q=Y[Y.length-1];G=q[q.length-1]}W=function(e){return function(t){R=j(t);F=V(t);if(!B){B=R;N=F}else if(P){B+="L"+R.substr(1);N=F+("L"+N.substr(1))}else{B+="Z"+R;N=F+"Z"+N}if(u.hasLines(T)){var r=n.select(this);r.datum(c);if(e){b(r.style("opacity",0).attr("d",R).call(l.lineGroupStyle)).style("opacity",1)}else{var a=b(r);a.attr("d",R);l.singleLineStyle(c,a)}}}}}var X=S.selectAll(".js-line").data(Y);b(X.exit()).style("opacity",0).remove();X.each(W(false));X.enter().append("path").classed("js-line",true).style("vector-effect",y?"none":"non-scaling-stroke").call(l.lineGroupStyle).each(W(true));l.setClipUrl(X,r.layerClipId,e);function J(e){b(e).attr("d","M0,0Z")}if(Y.length){if(C){C.datum(c);if(H&&G){if(P){if(P==="y"){H[1]=G[1]=w.c2p(0,true)}else if(P==="x"){H[0]=G[0]=_.c2p(0,true)}b(C).attr("d","M"+G+"L"+H+"L"+B.substr(1)).call(l.singleFillStyle,e)}else{b(C).attr("d",B+"Z").call(l.singleFillStyle,e)}}}else if(I){if(T.fill.substr(0,6)==="tonext"&&B&&O){if(T.fill==="tonext"){b(I).attr("d",B+"Z"+O+"Z").call(l.singleFillStyle,e)}else{b(I).attr("d",B+"L"+O.substr(1)+"Z").call(l.singleFillStyle,e)}T._polygons=T._polygons.concat(D)}else{J(I);T._polygons=null}}T._prevRevpath=N;T._prevPolygons=Z}else{if(C)J(C);else if(I)J(I);T._polygons=T._prevRevpath=T._prevPolygons=null}function K(e){return e.filter((function(e){return!e.gap&&e.vis}))}function $(e){return e.filter((function(e){return e.vis}))}function Q(e){return e.filter((function(e){return!e.gap}))}function ee(e){return e.id}function te(e){if(e.ids){return ee}}function re(){return false}function ne(t,a,i){var o,f,c;var v=i[0].trace;var h=u.hasMarkers(v);var p=u.hasText(v);var d=te(v);var g=re;var y=re;if(h||p){var m=s;var T=v.stackgroup;var k=T&&e._fullLayout._scatterStackOpts[_._id+w._id][T].stackgaps==="infer zero";if(v.marker.maxdisplayed||v._needsCull){m=k?$:K}else if(T&&!k){m=Q}if(h)g=m;if(p)y=m}f=t.selectAll("path.point");o=f.data(g,d);var A=o.enter().append("path").classed("point",true);if(x){A.call(l.pointStyle,v,e).call(l.translatePoints,_,w).style("opacity",0).transition().style("opacity",1)}o.order();var M;if(h){M=l.makePointStyleFns(v)}o.each((function(t){var a=n.select(this);var i=b(a);c=l.translatePoint(t,i,_,w);if(c){l.singlePointStyle(t,i,v,M,e);if(r.layerClipId){l.hideOutsideRangePoint(t,i,_,w,v.xcalendar,v.ycalendar)}if(v.customdata){a.classed("plotly-customdata",t.data!==null&&t.data!==undefined)}}else{i.remove()}}));if(x){o.exit().transition().style("opacity",0).remove()}else{o.exit().remove()}f=a.selectAll("g");o=f.data(y,d);o.enter().append("g").classed("textpoint",true).append("text");o.order();o.each((function(e){var t=n.select(this);var a=b(t.select("text"));c=l.translatePoint(e,a,_,w);if(c){if(r.layerClipId){l.hideOutsideRangePoint(e,t,_,w,v.xcalendar,v.ycalendar)}}else{t.remove()}}));o.selectAll("text").call(l.textPointStyle,v,e).each((function(e){var t=_.c2p(e.x);var r=w.c2p(e.y);n.select(this).selectAll("tspan.line").each((function(){b(n.select(this)).attr({x:t,y:r})}))}));o.exit().remove()}E.datum(c);L.datum(c);ne(E,L,c);var ae=T.cliponaxis===false;var ie=ae?null:r.layerClipId;l.setClipUrl(E,ie,e);l.setClipUrl(L,ie,e)}function d(e,t,r,a,o){var s=r.xaxis;var l=r.yaxis;var f=n.extent(i.simpleMap(s.range,s.r2c));var c=n.extent(i.simpleMap(l.range,l.r2c));var v=a[0].trace;if(!u.hasMarkers(v))return;var h=v.marker.maxdisplayed;if(h===0)return;var p=a.filter((function(e){return e.x>=f[0]&&e.x<=f[1]&&e.y>=c[0]&&e.y<=c[1]}));var d=Math.ceil(p.length/h);var g=0;o.forEach((function(e,r){var n=e[0].trace;if(u.hasMarkers(n)&&n.marker.maxdisplayed>0&&r<t){g++}}));var y=Math.round(g*d/3+Math.floor(g/3)*d/7.1);a.forEach((function(e){delete e.vis}));p.forEach((function(e,t){if(Math.round((t+y)%d)===0)e.vis=true}))}},98002:function(e,t,r){"use strict";var n=r(34098);e.exports=function e(t,r){var a=t.cd;var i=t.xaxis;var o=t.yaxis;var s=[];var l=a[0].trace;var u;var f;var c;var v;var h=!n.hasMarkers(l)&&!n.hasText(l);if(h)return[];if(r===false){for(u=0;u<a.length;u++){a[u].selected=0}}else{for(u=0;u<a.length;u++){f=a[u];c=i.c2p(f.x);v=o.c2p(f.y);if(f.i!==null&&r.contains([c,v],false,u,t)){s.push({pointNumber:f.i,x:i.c2d(f.x),y:o.c2d(f.y)});f.selected=1}else{f.selected=0}}}return s}},565:function(e){"use strict";var t=["orientation","groupnorm","stackgaps"];e.exports=function e(r,n,a,i){var o=a._scatterStackOpts;var s=i("stackgroup");if(s){var l=n.xaxis+n.yaxis;var u=o[l];if(!u)u=o[l]={};var f=u[s];var c=false;if(f){f.traces.push(n)}else{f=u[s]={traceIndices:[],traces:[n]};c=true}var v={orientation:n.x&&!n.y?"h":"v"};for(var h=0;h<t.length;h++){var p=t[h];var d=p+"Found";if(!f[d]){var g=r[p]!==undefined;var y=p==="orientation";if(g||c){f[p]=i(p,v[p]);if(y){f.fillDflt=f[p]==="h"?"tonextx":"tonexty"}if(g){f[d]=true;if(!c){delete f.traces[0][p];if(y){for(var m=0;m<f.traces.length-1;m++){var x=f.traces[m];if(x._input.fill!==x.fill){x.fill=f.fillDflt}}}}}}}}return f}}},16296:function(e,t,r){"use strict";var n=r(39898);var a=r(91424);var i=r(73972);function o(e){var t=n.select(e).selectAll("g.trace.scatter");t.style("opacity",(function(e){return e[0].trace.opacity}));t.selectAll("g.points").each((function(t){var r=n.select(this);var a=t.trace||t[0].trace;s(r,a,e)}));t.selectAll("g.text").each((function(t){var r=n.select(this);var a=t.trace||t[0].trace;l(r,a,e)}));t.selectAll("g.trace path.js-line").call(a.lineGroupStyle);t.selectAll("g.trace path.js-fill").call(a.fillGroupStyle,e);i.getComponentMethod("errorbars","style")(t)}function s(e,t,r){a.pointStyle(e.selectAll("path.point"),t,r)}function l(e,t,r){a.textPointStyle(e.selectAll("text"),t,r)}function u(e,t,r){var n=t[0].trace;if(n.selectedpoints){a.selectedPointStyle(r.selectAll("path.point"),n);a.selectedTextStyle(r.selectAll("text"),n)}else{s(r,n,e);l(r,n,e)}}e.exports={style:o,stylePoints:s,styleText:l,styleOnSelect:u}},34098:function(e,t,r){"use strict";var n=r(71828);e.exports={hasLines:function(e){return e.visible&&e.mode&&e.mode.indexOf("lines")!==-1},hasMarkers:function(e){return e.visible&&(e.mode&&e.mode.indexOf("markers")!==-1||e.type==="splom")},hasText:function(e){return e.visible&&e.mode&&e.mode.indexOf("text")!==-1},isBubble:function(e){return n.isPlainObject(e.marker)&&n.isArrayOrTypedArray(e.marker.size)}}},82410:function(e,t,r){"use strict";var n=r(71828);e.exports=function(e,t,r,a,i){i=i||{};a("textposition");n.coerceFont(a,"textfont",i.font||r.font);if(!i.noSelect){a("selected.textfont.color");a("unselected.textfont.color")}}},67513:function(e,t,r){"use strict";var n=r(71828);var a=r(73972);e.exports=function e(t,r,i,o){var s=o("x");var l=o("y");var u;var f=a.getComponentMethod("calendars","handleTraceDefaults");f(t,r,["x","y"],i);if(s){var c=n.minRowLength(s);if(l){u=Math.min(c,n.minRowLength(l))}else{u=c;o("y0");o("dy")}}else{if(!l)return 0;u=n.minRowLength(l);o("x0");o("dx")}r._length=u;return u}},44542:function(e,t,r){"use strict";var n=r(82196);var a=r(50693);var i=r(12663).axisHoverFormat;var o=r(5386).fF;var s=r(5386).si;var l=r(9012);var u=r(29659);var f=r(87381);var c=r(1426).extendFlat;var v=r(30962).overrideAll;var h=r(78607);var p=n.line;var d=n.marker;var g=d.line;var y=c({width:p.width,dash:{valType:"enumerated",values:h(u),dflt:"solid"}},a("line"));function m(e){return{show:{valType:"boolean",dflt:false},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var x=e.exports=v({x:n.x,y:n.y,z:{valType:"data_array"},text:c({},n.text,{}),texttemplate:s({},{}),hovertext:c({},n.hovertext,{}),hovertemplate:o(),xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z"),mode:c({},n.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:m("x"),y:m("y"),z:m("z")},connectgaps:n.connectgaps,line:y,marker:c({symbol:{valType:"enumerated",values:h(f),dflt:"circle",arrayOk:true},size:c({},d.size,{dflt:8}),sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,opacity:c({},d.opacity,{arrayOk:false}),colorbar:d.colorbar,line:c({width:c({},g.width,{arrayOk:false})},a("marker.line"))},a("marker")),textposition:c({},n.textposition,{dflt:"top center"}),textfont:{color:n.textfont.color,size:n.textfont.size,family:c({},n.textfont.family,{arrayOk:false})},opacity:l.opacity,hoverinfo:c({},l.hoverinfo)},"calc","nested");x.x.editType=x.y.editType=x.z.editType="calc+clearAxisTypes"},36563:function(e,t,r){"use strict";var n=r(75225);var a=r(36922);e.exports=function e(t,r){var i=[{x:false,y:false,trace:r,t:{}}];n(i,r);a(t,r);return i}},67336:function(e,t,r){"use strict";var n=r(73972);function a(e,t,r,a){if(!t||!t.visible)return null;var i=n.getComponentMethod("errorbars","makeComputeError")(t);var o=new Array(e.length);for(var s=0;s<e.length;s++){var l=i(+e[s],s);if(a.type==="log"){var u=a.c2l(e[s]);var f=e[s]-l[0];var c=e[s]+l[1];o[s]=[(a.c2l(f,true)-u)*r,(a.c2l(c,true)-u)*r];if(f>0){var v=a.c2l(f);if(!a._lowerLogErrorBound)a._lowerLogErrorBound=v;a._lowerErrorBound=Math.min(a._lowerLogErrorBound,v)}}else{o[s]=[-l[0]*r,l[1]*r]}}return o}function i(e){for(var t=0;t<e.length;t++){if(e[t])return e[t].length}return 0}function o(e,t,r){var n=[a(e.x,e.error_x,t[0],r.xaxis),a(e.y,e.error_y,t[1],r.yaxis),a(e.z,e.error_z,t[2],r.zaxis)];var o=i(n);if(o===0)return null;var s=new Array(o);for(var l=0;l<o;l++){var u=[[0,0,0],[0,0,0]];for(var f=0;f<3;f++){if(n[f]){for(var c=0;c<2;c++){u[c][f]=n[f][l][c]}}}s[l]=u}return s}e.exports=o},58925:function(e,t,r){"use strict";var n=r(9330).gl_line3d;var a=r(9330).gl_scatter3d;var i=r(9330).gl_error3d;var o=r(9330).gl_mesh3d;var s=r(9330).delaunay_triangulate;var l=r(71828);var u=r(78614);var f=r(81697).formatColor;var c=r(39984);var v=r(29659);var h=r(87381);var p=r(89298);var d=r(23469).appendArrayPointValue;var g=r(67336);function y(e,t){this.scene=e;this.uid=t;this.linePlot=null;this.scatterPlot=null;this.errorBars=null;this.textMarkers=null;this.delaunayMesh=null;this.color=null;this.mode="";this.dataPoints=[];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.textLabels=null;this.data=null}var m=y.prototype;m.handlePick=function(e){if(e.object&&(e.object===this.linePlot||e.object===this.delaunayMesh||e.object===this.textMarkers||e.object===this.scatterPlot)){var t=e.index=e.data.index;if(e.object.highlight){e.object.highlight(null)}if(this.scatterPlot){e.object=this.scatterPlot;this.scatterPlot.highlight(e.data)}e.textLabel="";if(this.textLabels){if(Array.isArray(this.textLabels)){if(this.textLabels[t]||this.textLabels[t]===0){e.textLabel=this.textLabels[t]}}else{e.textLabel=this.textLabels}}e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]];return true}};function x(e,t,r){var n=(r+1)%3;var a=(r+2)%3;var i=[];var o=[];var l;for(l=0;l<e.length;++l){var u=e[l];if(isNaN(u[n])||!isFinite(u[n])||isNaN(u[a])||!isFinite(u[a])){continue}i.push([u[n],u[a]]);o.push(l)}var f=s(i);for(l=0;l<f.length;++l){var c=f[l];for(var v=0;v<c.length;++v){c[v]=o[c[v]]}}return{positions:e,cells:f,meshColor:t}}function b(e){var t=[0,0,0];var r=[[0,0,0],[0,0,0],[0,0,0]];var n=[1,1,1];for(var a=0;a<3;a++){var i=e[a];if(i&&i.copy_zstyle!==false&&e[2].visible!==false)i=e[2];if(!i||!i.visible)continue;t[a]=i.width/2;r[a]=u(i.color);n[a]=i.thickness}return{capSize:t,color:r,lineWidth:n}}function _(e){if(e===null||e===undefined)return 0;return e.indexOf("left")>-1?-1:e.indexOf("right")>-1?1:0}function w(e){if(e===null||e===undefined)return 0;return e.indexOf("top")>-1?-1:e.indexOf("bottom")>-1?1:0}function T(e){var t=0;var r=0;var n=[t,r];if(Array.isArray(e)){for(var a=0;a<e.length;a++){n[a]=[t,r];if(e[a]){n[a][0]=_(e[a]);n[a][1]=w(e[a])}}}else{n[0]=_(e);n[1]=w(e)}return n}function k(e,t){return t(e*4)}function A(e){return h[e]}function M(e,t,r,n,a){var i=null;if(l.isArrayOrTypedArray(e)){i=[];for(var o=0;o<t;o++){if(e[o]===undefined)i[o]=n;else i[o]=r(e[o],a)}}else i=r(e,l.identity);return i}function S(e,t){var r=[];var n=e.fullSceneLayout;var a=e.dataScale;var i=n.xaxis;var o=n.yaxis;var s=n.zaxis;var v=t.marker;var h=t.line;var y=t.x||[];var m=t.y||[];var x=t.z||[];var _=y.length;var w=t.xcalendar;var S=t.ycalendar;var E=t.zcalendar;var L,C,I;var P,O;var D;for(O=0;O<_;O++){L=i.d2l(y[O],0,w)*a[0];C=o.d2l(m[O],0,S)*a[1];I=s.d2l(x[O],0,E)*a[2];r[O]=[L,C,I]}if(Array.isArray(t.text))D=t.text;else if(t.text!==undefined){D=new Array(_);for(O=0;O<_;O++)D[O]=t.text}function z(e,t){var r=n[e];return p.tickText(r,r.d2l(t),true).text}var R=t.texttemplate;if(R){var F=e.fullLayout;var B=F._d3locale;var N=Array.isArray(R);var j=N?Math.min(R.length,_):_;var U=N?function(e){return R[e]}:function(){return R};D=new Array(j);for(O=0;O<j;O++){var V={x:y[O],y:m[O],z:x[O]};var H={xLabel:z("xaxis",y[O]),yLabel:z("yaxis",m[O]),zLabel:z("zaxis",x[O])};var q={};d(q,t,O);var G=t._meta||{};D[O]=l.texttemplateString(U(O),H,B,q,V,G)}}P={position:r,mode:t.mode,text:D};if("line"in t){P.lineColor=f(h,1,_);P.lineWidth=h.width;P.lineDashes=h.dash}if("marker"in t){var Z=c(t);P.scatterColor=f(v,1,_);P.scatterSize=M(v.size,_,k,20,Z);P.scatterMarker=M(v.symbol,_,A,"");P.scatterLineWidth=v.line.width;P.scatterLineColor=f(v.line,1,_);P.scatterAngle=0}if("textposition"in t){P.textOffset=T(t.textposition);P.textColor=f(t.textfont,1,_);P.textSize=M(t.textfont.size,_,l.identity,12);P.textFont=t.textfont.family;P.textAngle=0}var Y=["x","y","z"];P.project=[false,false,false];P.projectScale=[1,1,1];P.projectOpacity=[1,1,1];for(O=0;O<3;++O){var W=t.projection[Y[O]];if(P.project[O]=W.show){P.projectOpacity[O]=W.opacity;P.projectScale[O]=W.scale}}P.errorBounds=g(t,a,n);var X=b([t.error_x,t.error_y,t.error_z]);P.errorColor=X.color;P.errorLineWidth=X.lineWidth;P.errorCapSize=X.capSize;P.delaunayAxis=t.surfaceaxis;P.delaunayColor=u(t.surfacecolor);return P}function E(e){if(l.isArrayOrTypedArray(e)){var t=e[0];if(l.isArrayOrTypedArray(t))e=t;return"rgb("+e.slice(0,3).map((function(e){return Math.round(e*255)}))+")"}return null}function L(e){if(!l.isArrayOrTypedArray(e)){return null}if(e.length===4&&typeof e[0]==="number"){return E(e)}return e.map(E)}m.update=function(e){var t=this.scene.glplot.gl;var r;var s;var l;var u;var f=v.solid;this.data=e;var c=S(this.scene,e);if("mode"in c){this.mode=c.mode}if("lineDashes"in c){if(c.lineDashes in v){f=v[c.lineDashes]}}this.color=L(c.scatterColor)||L(c.lineColor);this.dataPoints=c.position;r={gl:this.scene.glplot.gl,position:c.position,color:c.lineColor,lineWidth:c.lineWidth||1,dashes:f[0],dashScale:f[1],opacity:e.opacity,connectGaps:e.connectgaps};if(this.mode.indexOf("lines")!==-1){if(this.linePlot)this.linePlot.update(r);else{this.linePlot=n(r);this.linePlot._trace=this;this.scene.glplot.add(this.linePlot)}}else if(this.linePlot){this.scene.glplot.remove(this.linePlot);this.linePlot.dispose();this.linePlot=null}var h=e.opacity;if(e.marker&&e.marker.opacity!==undefined)h*=e.marker.opacity;s={gl:this.scene.glplot.gl,position:c.position,color:c.scatterColor,size:c.scatterSize,glyph:c.scatterMarker,opacity:h,orthographic:true,lineWidth:c.scatterLineWidth,lineColor:c.scatterLineColor,project:c.project,projectScale:c.projectScale,projectOpacity:c.projectOpacity};if(this.mode.indexOf("markers")!==-1){if(this.scatterPlot)this.scatterPlot.update(s);else{this.scatterPlot=a(s);this.scatterPlot._trace=this;this.scatterPlot.highlightScale=1;this.scene.glplot.add(this.scatterPlot)}}else if(this.scatterPlot){this.scene.glplot.remove(this.scatterPlot);this.scatterPlot.dispose();this.scatterPlot=null}u={gl:this.scene.glplot.gl,position:c.position,glyph:c.text,color:c.textColor,size:c.textSize,angle:c.textAngle,alignment:c.textOffset,font:c.textFont,orthographic:true,lineWidth:0,project:false,opacity:e.opacity};this.textLabels=e.hovertext||e.text;if(this.mode.indexOf("text")!==-1){if(this.textMarkers)this.textMarkers.update(u);else{this.textMarkers=a(u);this.textMarkers._trace=this;this.textMarkers.highlightScale=1;this.scene.glplot.add(this.textMarkers)}}else if(this.textMarkers){this.scene.glplot.remove(this.textMarkers);this.textMarkers.dispose();this.textMarkers=null}l={gl:this.scene.glplot.gl,position:c.position,color:c.errorColor,error:c.errorBounds,lineWidth:c.errorLineWidth,capSize:c.errorCapSize,opacity:e.opacity};if(this.errorBars){if(c.errorBounds){this.errorBars.update(l)}else{this.scene.glplot.remove(this.errorBars);this.errorBars.dispose();this.errorBars=null}}else if(c.errorBounds){this.errorBars=i(l);this.errorBars._trace=this;this.scene.glplot.add(this.errorBars)}if(c.delaunayAxis>=0){var p=x(c.position,c.delaunayColor,c.delaunayAxis);p.opacity=e.opacity;if(this.delaunayMesh){this.delaunayMesh.update(p)}else{p.gl=t;this.delaunayMesh=o(p);this.delaunayMesh._trace=this;this.scene.glplot.add(this.delaunayMesh)}}else if(this.delaunayMesh){this.scene.glplot.remove(this.delaunayMesh);this.delaunayMesh.dispose();this.delaunayMesh=null}};m.dispose=function(){if(this.linePlot){this.scene.glplot.remove(this.linePlot);this.linePlot.dispose()}if(this.scatterPlot){this.scene.glplot.remove(this.scatterPlot);this.scatterPlot.dispose()}if(this.errorBars){this.scene.glplot.remove(this.errorBars);this.errorBars.dispose()}if(this.textMarkers){this.scene.glplot.remove(this.textMarkers);this.textMarkers.dispose()}if(this.delaunayMesh){this.scene.glplot.remove(this.delaunayMesh);this.delaunayMesh.dispose()}};function C(e,t){var r=new y(e,t.uid);r.update(t);return r}e.exports=C},21428:function(e,t,r){"use strict";var n=r(73972);var a=r(71828);var i=r(34098);var o=r(49508);var s=r(11058);var l=r(82410);var u=r(44542);e.exports=function e(t,r,c,v){function h(e,n){return a.coerce(t,r,u,e,n)}var p=f(t,r,h,v);if(!p){r.visible=false;return}h("text");h("hovertext");h("hovertemplate");h("xhoverformat");h("yhoverformat");h("zhoverformat");h("mode");if(i.hasLines(r)){h("connectgaps");s(t,r,c,v,h)}if(i.hasMarkers(r)){o(t,r,c,v,h,{noSelect:true,noAngle:true})}if(i.hasText(r)){h("texttemplate");l(t,r,v,h,{noSelect:true})}var d=(r.line||{}).color;var g=(r.marker||{}).color;if(h("surfaceaxis")>=0)h("surfacecolor",d||g);var y=["x","y","z"];for(var m=0;m<3;++m){var x="projection."+y[m];if(h(x+".show")){h(x+".opacity");h(x+".scale")}}var b=n.getComponentMethod("errorbars","supplyDefaults");b(t,r,d||g||c,{axis:"z"});b(t,r,d||g||c,{axis:"y",inherit:"z"});b(t,r,d||g||c,{axis:"x",inherit:"z"})};function f(e,t,r,a){var i=0;var o=r("x");var s=r("y");var l=r("z");var u=n.getComponentMethod("calendars","handleTraceDefaults");u(e,t,["x","y","z"],a);if(o&&s&&l){i=Math.min(o.length,s.length,l.length);t._length=t._xlength=t._ylength=t._zlength=i}return i}},13551:function(e,t,r){"use strict";e.exports={plot:r(58925),attributes:r(44542),markerSymbols:r(87381),supplyDefaults:r(21428),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:r(36563),moduleType:"trace",name:"scatter3d",basePlotModule:r(58547),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},97001:function(e,t,r){"use strict";var n=r(82196);var a=r(9012);var i=r(5386).fF;var o=r(5386).si;var s=r(50693);var l=r(1426).extendFlat;var u=n.marker;var f=n.line;var c=u.line;e.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:l({},n.mode,{dflt:"markers"}),text:l({},n.text,{}),texttemplate:o({editType:"plot"},{keys:["a","b","text"]}),hovertext:l({},n.hovertext,{}),line:{color:f.color,width:f.width,dash:f.dash,backoff:f.backoff,shape:l({},f.shape,{values:["linear","spline"]}),smoothing:f.smoothing,editType:"calc"},connectgaps:n.connectgaps,fill:l({},n.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:n.fillcolor,marker:l({symbol:u.symbol,opacity:u.opacity,maxdisplayed:u.maxdisplayed,angle:u.angle,angleref:u.angleref,standoff:u.standoff,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,line:l({width:c.width,editType:"calc"},s("marker.line")),gradient:u.gradient,editType:"calc"},s("marker")),textfont:n.textfont,textposition:n.textposition,selected:n.selected,unselected:n.unselected,hoverinfo:l({},a.hoverinfo,{flags:["a","b","text","name"]}),hoveron:n.hoveron,hovertemplate:i()}},34618:function(e,t,r){"use strict";var n=r(92770);var a=r(36922);var i=r(75225);var o=r(66279);var s=r(47761).calcMarkerSize;var l=r(22882);e.exports=function e(t,r){var u=r._carpetTrace=l(t,r);if(!u||!u.visible||u.visible==="legendonly")return;var f;r.xaxis=u.xaxis;r.yaxis=u.yaxis;var c=r._length;var v=new Array(c);var h,p;var d=false;for(f=0;f<c;f++){h=r.a[f];p=r.b[f];if(n(h)&&n(p)){var g=u.ab2xy(+h,+p,true);var y=u.isVisible(+h,+p);if(!y)d=true;v[f]={x:g[0],y:g[1],a:h,b:p,vis:y}}else v[f]={x:false,y:false}}r._needsCull=d;v[0].carpet=u;v[0].trace=r;s(r,c);a(t,r);i(v,r);o(v,r);return v}},98965:function(e,t,r){"use strict";var n=r(71828);var a=r(47581);var i=r(34098);var o=r(49508);var s=r(11058);var l=r(94039);var u=r(82410);var f=r(28908);var c=r(97001);e.exports=function e(t,r,v,h){function p(e,a){return n.coerce(t,r,c,e,a)}p("carpet");r.xaxis="x";r.yaxis="y";var d=p("a");var g=p("b");var y=Math.min(d.length,g.length);if(!y){r.visible=false;return}r._length=y;p("text");p("texttemplate");p("hovertext");var m=y<a.PTS_LINESONLY?"lines+markers":"lines";p("mode",m);if(i.hasLines(r)){s(t,r,v,h,p,{backoff:true});l(t,r,p);p("connectgaps")}if(i.hasMarkers(r)){o(t,r,v,h,p,{gradient:true})}if(i.hasText(r)){u(t,r,h,p)}var x=[];if(i.hasMarkers(r)||i.hasText(r)){p("marker.maxdisplayed");x.push("points")}p("fill");if(r.fill!=="none"){f(t,r,v,p);if(!i.hasLines(r))l(t,r,p)}if(r.fill==="tonext"||r.fill==="toself"){x.push("fills")}var b=p("hoveron",x.join("+")||"points");if(b!=="fills")p("hovertemplate");n.coerceSelectionMarkerOpacity(r,p)}},16165:function(e){"use strict";e.exports=function e(t,r,n,a,i){var o=a[i];t.a=o.a;t.b=o.b;t.y=o.y;return t}},48953:function(e){"use strict";e.exports=function e(t,r){var n={};var a=r._carpet;var i=a.ab2ij([t.a,t.b]);var o=Math.floor(i[0]);var s=i[0]-o;var l=Math.floor(i[1]);var u=i[1]-l;var f=a.evalxy([],o,l,s,u);n.yLabel=f[1].toFixed(3);return n}},22931:function(e,t,r){"use strict";var n=r(33720);var a=r(71828).fillText;e.exports=function e(t,r,i,o){var s=n(t,r,i,o);if(!s||s[0].index===false)return;var l=s[0];if(l.index===undefined){var u=1-l.y0/t.ya._length;var f=t.xa._length;var c=f*u/2;var v=f-c;l.x0=Math.max(Math.min(l.x0,v),c);l.x1=Math.max(Math.min(l.x1,v),c);return s}var h=l.cd[l.index];l.a=h.a;l.b=h.b;l.xLabelVal=undefined;l.yLabelVal=undefined;var p=l.trace;var d=p._carpet;var g=p._module.formatLabels(h,p);l.yLabel=g.yLabel;delete l.text;var y=[];function m(e,t){var r;if(e.labelprefix&&e.labelprefix.length>0){r=e.labelprefix.replace(/ = $/,"")}else{r=e._hovertitle}y.push(r+": "+t.toFixed(3)+e.labelsuffix)}if(!p.hovertemplate){var x=h.hi||p.hoverinfo;var b=x.split("+");if(b.indexOf("all")!==-1)b=["a","b","text"];if(b.indexOf("a")!==-1)m(d.aaxis,h.a);if(b.indexOf("b")!==-1)m(d.baxis,h.b);y.push("y: "+l.yLabel);if(b.indexOf("text")!==-1){a(h,p,y)}l.extraText=y.join("<br>")}return s}},46858:function(e,t,r){"use strict";e.exports={attributes:r(97001),supplyDefaults:r(98965),colorbar:r(4898),formatLabels:r(48953),calc:r(34618),plot:r(1913),style:r(16296).style,styleOnSelect:r(16296).styleOnSelect,hoverPoints:r(22931),selectPoints:r(98002),eventData:r(16165),moduleType:"trace",name:"scattercarpet",basePlotModule:r(93612),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},1913:function(e,t,r){"use strict";var n=r(32663);var a=r(89298);var i=r(91424);e.exports=function e(t,r,o,s){var l,u,f;var c=o[0][0].carpet;var v=a.getFromId(t,c.xaxis||"x");var h=a.getFromId(t,c.yaxis||"y");var p={xaxis:v,yaxis:h,plot:r.plot};for(l=0;l<o.length;l++){u=o[l][0].trace;u._xA=v;u._yA=h}n(t,p,o,s);for(l=0;l<o.length;l++){u=o[l][0].trace;f=s.selectAll("g.trace"+u.uid+" .js-line");i.setClipUrl(f,o[l][0].carpet._clipPathId,t)}}},19316:function(e,t,r){"use strict";var n=r(5386).fF;var a=r(5386).si;var i=r(82196);var o=r(9012);var s=r(50693);var l=r(79952).P;var u=r(1426).extendFlat;var f=r(30962).overrideAll;var c=i.marker;var v=i.line;var h=c.line;e.exports=f({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:u({},i.mode,{dflt:"markers"}),text:u({},i.text,{}),texttemplate:a({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:u({},i.hovertext,{}),textfont:i.textfont,textposition:i.textposition,line:{color:v.color,width:v.width,dash:l},connectgaps:i.connectgaps,marker:u({symbol:c.symbol,opacity:c.opacity,angle:c.angle,angleref:u({},c.angleref,{values:["previous","up","north"]}),standoff:c.standoff,size:c.size,sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,colorbar:c.colorbar,line:u({width:h.width},s("marker.line")),gradient:c.gradient},s("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:i.fillcolor,selected:i.selected,unselected:i.unselected,hoverinfo:u({},o.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:n()},"calc","nested")},84622:function(e,t,r){"use strict";var n=r(92770);var a=r(50606).BADNUM;var i=r(36922);var o=r(75225);var s=r(66279);var l=r(71828)._;function u(e){return e&&typeof e==="string"}e.exports=function e(t,r){var f=Array.isArray(r.locations);var c=f?r.locations.length:r._length;var v=new Array(c);var h;if(r.geojson){h=function(e){return u(e)||n(e)}}else{h=u}for(var p=0;p<c;p++){var d=v[p]={};if(f){var g=r.locations[p];d.loc=h(g)?g:null}else{var y=r.lon[p];var m=r.lat[p];if(n(y)&&n(m))d.lonlat=[+y,+m];else d.lonlat=[a,a]}}o(v,r);i(t,r);s(v,r);if(c){v[0].t={labels:{lat:l(t,"lat:")+" ",lon:l(t,"lon:")+" "}}}return v}},10659:function(e,t,r){"use strict";var n=r(71828);var a=r(34098);var i=r(49508);var o=r(11058);var s=r(82410);var l=r(28908);var u=r(19316);e.exports=function e(t,r,f,c){function v(e,a){return n.coerce(t,r,u,e,a)}var h=v("locations");var p;if(h&&h.length){var d=v("geojson");var g;if(typeof d==="string"&&d!==""||n.isPlainObject(d)){g="geojson-id"}var y=v("locationmode",g);if(y==="geojson-id"){v("featureidkey")}p=h.length}else{var m=v("lon")||[];var x=v("lat")||[];p=Math.min(m.length,x.length)}if(!p){r.visible=false;return}r._length=p;v("text");v("hovertext");v("hovertemplate");v("mode");if(a.hasLines(r)){o(t,r,f,c,v);v("connectgaps")}if(a.hasMarkers(r)){i(t,r,f,c,v,{gradient:true})}if(a.hasText(r)){v("texttemplate");s(t,r,c,v)}v("fill");if(r.fill!=="none"){l(t,r,f,v)}n.coerceSelectionMarkerOpacity(r,v)}},84084:function(e){"use strict";e.exports=function e(t,r,n,a,i){t.lon=r.lon;t.lat=r.lat;t.location=r.loc?r.loc:null;var o=a[i];if(o.fIn&&o.fIn.properties){t.properties=o.fIn.properties}return t}},82719:function(e,t,r){"use strict";var n=r(89298);e.exports=function e(t,r,a){var i={};var o=a[r.geo]._subplot;var s=o.mockAxis;var l=t.lonlat;i.lonLabel=n.tickText(s,s.c2l(l[0]),true).text;i.latLabel=n.tickText(s,s.c2l(l[1]),true).text;return i}},14977:function(e,t,r){"use strict";var n=r(30211);var a=r(50606).BADNUM;var i=r(34603);var o=r(71828).fillText;var s=r(19316);e.exports=function e(t,r,o){var s=t.cd;var u=s[0].trace;var f=t.xa;var c=t.ya;var v=t.subplot;var h=v.projection.isLonLatOverEdges;var p=v.project;function d(e){var t=e.lonlat;if(t[0]===a)return Infinity;if(h(t))return Infinity;var n=p(t);var i=p([r,o]);var s=Math.abs(n[0]-i[0]);var l=Math.abs(n[1]-i[1]);var u=Math.max(3,e.mrc||0);return Math.max(Math.sqrt(s*s+l*l)-u,1-3/u)}n.getClosest(s,d,t);if(t.index===false)return;var g=s[t.index];var y=g.lonlat;var m=[f.c2p(y),c.c2p(y)];var x=g.mrc||1;t.x0=m[0]-x;t.x1=m[0]+x;t.y0=m[1]-x;t.y1=m[1]+x;t.loc=g.loc;t.lon=y[0];t.lat=y[1];var b={};b[u.geo]={_subplot:v};var _=u._module.formatLabels(g,u,b);t.lonLabel=_.lonLabel;t.latLabel=_.latLabel;t.color=i(u,g);t.extraText=l(u,g,t,s[0].t.labels);t.hovertemplate=u.hovertemplate;return[t]};function l(e,t,r,n){if(e.hovertemplate)return;var a=t.hi||e.hoverinfo;var i=a==="all"?s.hoverinfo.flags:a.split("+");var l=i.indexOf("location")!==-1&&Array.isArray(e.locations);var u=i.indexOf("lon")!==-1;var f=i.indexOf("lat")!==-1;var c=i.indexOf("text")!==-1;var v=[];function h(e){return e+""}if(l){v.push(t.loc)}else if(u&&f){v.push("("+h(r.latLabel)+", "+h(r.lonLabel)+")")}else if(u){v.push(n.lon+h(r.lonLabel))}else if(f){v.push(n.lat+h(r.latLabel))}if(c){o(t,e,v)}return v.join("<br>")}},17988:function(e,t,r){"use strict";e.exports={attributes:r(19316),supplyDefaults:r(10659),colorbar:r(4898),formatLabels:r(82719),calc:r(84622),calcGeoJSON:r(89171).calcGeoJSON,plot:r(89171).plot,style:r(33095),styleOnSelect:r(16296).styleOnSelect,hoverPoints:r(14977),eventData:r(84084),selectPoints:r(20548),moduleType:"trace",name:"scattergeo",basePlotModule:r(44622),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},89171:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);var i=r(90973).getTopojsonFeatures;var o=r(18214);var s=r(41327);var l=r(71739).findExtremes;var u=r(50606).BADNUM;var f=r(47761).calcMarkerSize;var c=r(34098);var v=r(33095);function h(e,t,r){var i=t.layers.frontplot.select(".scatterlayer");var s=a.makeTraceGroups(i,r,"trace scattergeo");function l(e,t){if(e.lonlat[0]===u){n.select(t).remove()}}s.selectAll("*").remove();s.each((function(t){var r=n.select(this);var i=t[0].trace;if(c.hasLines(i)||i.fill!=="none"){var s=o.calcTraceToLineCoords(t);var u=i.fill!=="none"?o.makePolygon(s):o.makeLine(s);r.selectAll("path.js-line").data([{geojson:u,trace:i}]).enter().append("path").classed("js-line",true).style("stroke-miterlimit",2)}if(c.hasMarkers(i)){r.selectAll("path.point").data(a.identity).enter().append("path").classed("point",true).each((function(e){l(e,this)}))}if(c.hasText(i)){r.selectAll("g").data(a.identity).enter().append("g").append("text").each((function(e){l(e,this)}))}v(e,t)}))}function p(e,t){var r=e[0].trace;var n=t[r.geo];var a=n._subplot;var o=r._length;var c,v;if(Array.isArray(r.locations)){var h=r.locationmode;var p=h==="geojson-id"?s.extractTraceFeature(e):i(r,a.topojson);for(c=0;c<o;c++){v=e[c];var d=h==="geojson-id"?v.fOut:s.locationToFeature(h,v.loc,p);v.lonlat=d?d.properties.ct:[u,u]}}var g={padded:true};var y;var m;if(n.fitbounds==="geojson"&&r.locationmode==="geojson-id"){var x=s.computeBbox(s.getTraceGeojson(r));y=[x[0],x[2]];m=[x[1],x[3]]}else{y=new Array(o);m=new Array(o);for(c=0;c<o;c++){v=e[c];y[c]=v.lonlat[0];m[c]=v.lonlat[1]}g.ppad=f(r,o)}r._extremes.lon=l(n.lonaxis._ax,y,g);r._extremes.lat=l(n.lataxis._ax,m,g)}e.exports={calcGeoJSON:p,plot:h}},20548:function(e,t,r){"use strict";var n=r(34098);var a=r(50606).BADNUM;e.exports=function e(t,r){var i=t.cd;var o=t.xaxis;var s=t.yaxis;var l=[];var u=i[0].trace;var f,c,v,h,p;var d=!n.hasMarkers(u)&&!n.hasText(u);if(d)return[];if(r===false){for(p=0;p<i.length;p++){i[p].selected=0}}else{for(p=0;p<i.length;p++){f=i[p];c=f.lonlat;if(c[0]===a)continue;v=o.c2p(c);h=s.c2p(c);if(r.contains([v,h],null,p,t)){l.push({pointNumber:p,lon:c[0],lat:c[1]});f.selected=1}else{f.selected=0}}}return l}},33095:function(e,t,r){"use strict";var n=r(39898);var a=r(91424);var i=r(7901);var o=r(16296);var s=o.stylePoints;var l=o.styleText;e.exports=function e(t,r){if(r)u(t,r)};function u(e,t){var r=t[0].trace;var o=t[0].node3;o.style("opacity",t[0].trace.opacity);s(o,r,e);l(o,r,e);o.selectAll("path.js-line").style("fill","none").each((function(e){var t=n.select(this);var r=e.trace;var o=r.line||{};t.call(i.stroke,o.color).call(a.dashLine,o.dash||"",o.width||0);if(r.fill!=="none"){t.call(i.fill,r.fillcolor)}}))}},42341:function(e,t,r){"use strict";var n=r(9012);var a=r(82196);var i=r(12663).axisHoverFormat;var o=r(50693);var s=r(78607);var l=r(1426).extendFlat;var u=r(30962).overrideAll;var f=r(78232).DASHES;var c=a.line;var v=a.marker;var h=v.line;var p=e.exports=u({x:a.x,x0:a.x0,dx:a.dx,y:a.y,y0:a.y0,dy:a.dy,xperiod:a.xperiod,yperiod:a.yperiod,xperiod0:a.xperiod0,yperiod0:a.yperiod0,xperiodalignment:a.xperiodalignment,yperiodalignment:a.yperiodalignment,xhoverformat:i("x"),yhoverformat:i("y"),text:a.text,hovertext:a.hovertext,textposition:a.textposition,textfont:a.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:c.color,width:c.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:s(f),dflt:"solid"}},marker:l({},o("marker"),{symbol:v.symbol,angle:v.angle,size:v.size,sizeref:v.sizeref,sizemin:v.sizemin,sizemode:v.sizemode,opacity:v.opacity,colorbar:v.colorbar,line:l({},o("marker.line"),{width:h.width})}),connectgaps:a.connectgaps,fill:l({},a.fill,{dflt:"none"}),fillcolor:a.fillcolor,selected:{marker:a.selected.marker,textfont:a.selected.textfont},unselected:{marker:a.unselected.marker,textfont:a.unselected.textfont},opacity:n.opacity},"calc","nested");p.x.editType=p.y.editType=p.x0.editType=p.y0.editType="calc+clearAxisTypes";p.hovertemplate=a.hovertemplate;p.texttemplate=a.texttemplate},72156:function(e,t,r){"use strict";var n=r(20794);e.exports={moduleType:"trace",name:"scattergl",basePlotModule:r(93612),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:r(42341),supplyDefaults:r(47148),crossTraceDefaults:r(34936),colorbar:r(4898),formatLabels:r(68101),calc:r(45032),hoverPoints:n.hoverPoints,selectPoints:r(58147),meta:{}}},45032:function(e,t,r){"use strict";var n=r(88294);var a=r(71828);var i=r(41675);var o=r(71739).findExtremes;var s=r(42973);var l=r(47761);var u=l.calcMarkerSize;var f=l.calcAxisExpansion;var c=l.setFirstScatter;var v=r(36922);var h=r(19635);var p=r(38967);var d=r(50606).BADNUM;var g=r(78232).TOO_MANY_POINTS;e.exports=function e(t,r){var a=t._fullLayout;var o=r._xA=i.getFromId(t,r.xaxis,"x");var l=r._yA=i.getFromId(t,r.yaxis,"y");var h=a._plots[r.xaxis+r.yaxis];var x=r._length;var b=x>=g;var _=x*2;var w={};var T;var k=o.makeCalcdata(r,"x");var A=l.makeCalcdata(r,"y");var M=s(r,o,"x",k);var S=s(r,l,"y",A);var E=M.vals;var L=S.vals;r._x=E;r._y=L;if(r.xperiodalignment){r._origX=k;r._xStarts=M.starts;r._xEnds=M.ends}if(r.yperiodalignment){r._origY=A;r._yStarts=S.starts;r._yEnds=S.ends}var C=new Array(_);var I=new Array(x);for(T=0;T<x;T++){C[T*2]=E[T]===d?NaN:E[T];C[T*2+1]=L[T]===d?NaN:L[T];I[T]=T}if(o.type==="log"){for(T=0;T<_;T+=2){C[T]=o.c2l(C[T])}}if(l.type==="log"){for(T=1;T<_;T+=2){C[T]=l.c2l(C[T])}}if(b&&o.type!=="log"&&l.type!=="log"){w.tree=n(C)}else{w.ids=I}v(t,r);var P=m(t,h,r,C,E,L);var O=p(t,h);c(a,r);var D;if(!b){D=u(r,x)}else if(P.marker){D=P.marker.sizeAvg||Math.max(P.marker.size,3)}f(t,r,o,l,E,L,D);if(P.errorX)y(r,o,P.errorX);if(P.errorY)y(r,l,P.errorY);if(P.fill&&!O.fill2d)O.fill2d=true;if(P.marker&&!O.scatter2d)O.scatter2d=true;if(P.line&&!O.line2d)O.line2d=true;if((P.errorX||P.errorY)&&!O.error2d)O.error2d=true;if(P.text&&!O.glText)O.glText=true;if(P.marker)P.marker.snap=x;O.lineOptions.push(P.line);O.errorXOptions.push(P.errorX);O.errorYOptions.push(P.errorY);O.fillOptions.push(P.fill);O.markerOptions.push(P.marker);O.markerSelectedOptions.push(P.markerSel);O.markerUnselectedOptions.push(P.markerUnsel);O.textOptions.push(P.text);O.textSelectedOptions.push(P.textSel);O.textUnselectedOptions.push(P.textUnsel);O.selectBatch.push([]);O.unselectBatch.push([]);w._scene=O;w.index=O.count;w.x=E;w.y=L;w.positions=C;O.count++;return[{x:false,y:false,t:w,trace:r}]};function y(e,t,r){var n=e._extremes[t._id];var a=o(t,r._bnds,{padded:true});n.min=n.min.concat(a.min);n.max=n.max.concat(a.max)}function m(e,t,r,n,i,o){var s=h.style(e,r);if(s.marker){s.marker.positions=n}if(s.line&&n.length>1){a.extendFlat(s.line,h.linePositions(e,r,n))}if(s.errorX||s.errorY){var l=h.errorBarPositions(e,r,n,i,o);if(s.errorX){a.extendFlat(s.errorX,l.x)}if(s.errorY){a.extendFlat(s.errorY,l.y)}}if(s.text){a.extendFlat(s.text,{positions:n},h.textPosition(e,r,s.text,s.marker));a.extendFlat(s.textSel,{positions:n},h.textPosition(e,r,s.text,s.markerSel));a.extendFlat(s.textUnsel,{positions:n},h.textPosition(e,r,s.text,s.markerUnsel))}return s}},78232:function(e){"use strict";var t=20;e.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:t,SYMBOL_STROKE:t/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},19635:function(e,t,r){"use strict";var n=r(92770);var a=r(82019);var i=r(25075);var o=r(73972);var s=r(71828);var l=r(91424);var u=r(41675);var f=r(81697).formatColor;var c=r(34098);var v=r(39984);var h=r(68645);var p=r(78232);var d=r(37822).DESELECTDIM;var g={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1};var y=r(23469).appendArrayPointValue;function m(e,t){var r;var n={marker:undefined,markerSel:undefined,markerUnsel:undefined,line:undefined,fill:undefined,errorX:undefined,errorY:undefined,text:undefined,textSel:undefined,textUnsel:undefined};var a=e._context.plotGlPixelRatio;if(t.visible!==true)return n;if(c.hasText(t)){n.text=x(e,t);n.textSel=w(e,t,t.selected);n.textUnsel=w(e,t,t.unselected)}if(c.hasMarkers(t)){n.marker=b(e,t);n.markerSel=_(e,t,t.selected);n.markerUnsel=_(e,t,t.unselected);if(!t.unselected&&s.isArrayOrTypedArray(t.marker.opacity)){var i=t.marker.opacity;n.markerUnsel.opacity=new Array(i.length);for(r=0;r<i.length;r++){n.markerUnsel.opacity[r]=d*i[r]}}}if(c.hasLines(t)){n.line={overlay:true,thickness:t.line.width*a,color:t.line.color,opacity:t.opacity};var o=(p.DASHES[t.line.dash]||[1]).slice();for(r=0;r<o.length;++r){o[r]*=t.line.width*a}n.line.dashes=o}if(t.error_x&&t.error_x.visible){n.errorX=T(t,t.error_x,a)}if(t.error_y&&t.error_y.visible){n.errorY=T(t,t.error_y,a)}if(!!t.fill&&t.fill!=="none"){n.fill={closed:true,fill:t.fillcolor,thickness:0}}return n}function x(e,t){var r=e._fullLayout;var a=t._length;var i=t.textfont;var o=t.textposition;var l=Array.isArray(o)?o:[o];var u=i.color;var f=i.size;var c=i.family;var v={};var h;var p=e._context.plotGlPixelRatio;var d=t.texttemplate;if(d){v.text=[];var g=r._d3locale;var m=Array.isArray(d);var x=m?Math.min(d.length,a):a;var b=m?function(e){return d[e]}:function(){return d};for(h=0;h<x;h++){var _={i:h};var w=t._module.formatLabels(_,t,r);var T={};y(T,t,h);var k=t._meta||{};v.text.push(s.texttemplateString(b(h),w,g,T,_,k))}}else{if(Array.isArray(t.text)&&t.text.length<a){v.text=t.text.slice()}else{v.text=t.text}}if(Array.isArray(v.text)){for(h=v.text.length;h<a;h++){v.text[h]=""}}v.opacity=t.opacity;v.font={};v.align=[];v.baseline=[];for(h=0;h<l.length;h++){var A=l[h].split(/\s+/);switch(A[1]){case"left":v.align.push("right");break;case"right":v.align.push("left");break;default:v.align.push(A[1])}switch(A[0]){case"top":v.baseline.push("bottom");break;case"bottom":v.baseline.push("top");break;default:v.baseline.push(A[0])}}if(Array.isArray(u)){v.color=new Array(a);for(h=0;h<a;h++){v.color[h]=u[h]}}else{v.color=u}if(s.isArrayOrTypedArray(f)||Array.isArray(c)){v.font=new Array(a);for(h=0;h<a;h++){var M=v.font[h]={};M.size=(s.isTypedArray(f)?f[h]:Array.isArray(f)?n(f[h])?f[h]:0:f)*p;M.family=Array.isArray(c)?c[h]:c}}else{v.font={size:f*p,family:c}}return v}function b(e,t){var r=t._length;var n=t.marker;var a={};var o;var l=s.isArrayOrTypedArray(n.symbol);var u=s.isArrayOrTypedArray(n.angle);var c=s.isArrayOrTypedArray(n.color);var p=s.isArrayOrTypedArray(n.line.color);var d=s.isArrayOrTypedArray(n.opacity);var g=s.isArrayOrTypedArray(n.size);var y=s.isArrayOrTypedArray(n.line.width);var m;if(!l)m=h.isOpenSymbol(n.symbol);if(l||c||p||d||u){a.symbols=new Array(r);a.angles=new Array(r);a.colors=new Array(r);a.borderColors=new Array(r);var x=n.symbol;var b=n.angle;var _=f(n,n.opacity,r);var w=f(n.line,n.opacity,r);if(!Array.isArray(w[0])){var T=w;w=Array(r);for(o=0;o<r;o++){w[o]=T}}if(!Array.isArray(_[0])){var k=_;_=Array(r);for(o=0;o<r;o++){_[o]=k}}if(!Array.isArray(x)){var A=x;x=Array(r);for(o=0;o<r;o++){x[o]=A}}if(!Array.isArray(b)){var M=b;b=Array(r);for(o=0;o<r;o++){b[o]=M}}a.symbols=x;a.angles=b;a.colors=_;a.borderColors=w;for(o=0;o<r;o++){if(l){m=h.isOpenSymbol(n.symbol[o])}if(m){w[o]=_[o].slice();_[o]=_[o].slice();_[o][3]=0}}a.opacity=t.opacity;a.markers=new Array(r);for(o=0;o<r;o++){a.markers[o]=L({mx:a.symbols[o],ma:a.angles[o]},t)}}else{if(m){a.color=i(n.color,"uint8");a.color[3]=0;a.borderColor=i(n.color,"uint8")}else{a.color=i(n.color,"uint8");a.borderColor=i(n.line.color,"uint8")}a.opacity=t.opacity*n.opacity;a.marker=L({mx:n.symbol,ma:n.angle},t)}var S=1;var E=v(t,S);var C;if(g||y){var I=a.sizes=new Array(r);var P=a.borderSizes=new Array(r);var O=0;var D;if(g){for(o=0;o<r;o++){I[o]=E(n.size[o]);O+=I[o]}D=O/r}else{C=E(n.size);for(o=0;o<r;o++){I[o]=C}}if(y){for(o=0;o<r;o++){P[o]=n.line.width[o]}}else{C=n.line.width;for(o=0;o<r;o++){P[o]=C}}a.sizeAvg=D}else{a.size=E(n&&n.size||10);a.borderSizes=E(n.line.width)}return a}function _(e,t,r){var n=t.marker;var a={};if(!r)return a;if(r.marker&&r.marker.symbol){a=b(e,s.extendFlat({},n,r.marker))}else if(r.marker){if(r.marker.size)a.size=r.marker.size;if(r.marker.color)a.colors=r.marker.color;if(r.marker.opacity!==undefined)a.opacity=r.marker.opacity}return a}function w(e,t,r){var n={};if(!r)return n;if(r.textfont){var a={opacity:1,text:t.text,texttemplate:t.texttemplate,textposition:t.textposition,textfont:s.extendFlat({},t.textfont)};if(r.textfont){s.extendFlat(a.textfont,r.textfont)}n=x(e,a)}return n}function T(e,t,r){var n={capSize:t.width*2*r,lineWidth:t.thickness*r,color:t.color};if(t.copy_ystyle){n=e.error_y}return n}var k=p.SYMBOL_SDF_SIZE;var A=p.SYMBOL_SIZE;var M=p.SYMBOL_STROKE;var S={};var E=l.symbolFuncs[0](A*.05);function L(e,t){var r=e.mx;if(r==="circle")return null;var n,i;var o=l.symbolNumber(r);var s=l.symbolFuncs[o%100];var u=!!l.symbolNoDot[o%100];var f=!!l.symbolNoFill[o%100];var c=h.isDotSymbol(r);if(e.ma)r+="_"+e.ma;if(S[r])return S[r];var v=l.getMarkerAngle(e,t);if(c&&!u){n=s(A*1.1,v)+E}else{n=s(A,v)}i=a(n,{w:k,h:k,viewBox:[-A,-A,A,A],stroke:f?M:-M});S[r]=i;return i||null}function C(e,t,r){var n=r.length;var a=n/2;var i;var o;if(c.hasLines(t)&&a){if(t.line.shape==="hv"){i=[];for(o=0;o<a-1;o++){if(isNaN(r[o*2])||isNaN(r[o*2+1])){i.push(NaN,NaN,NaN,NaN)}else{i.push(r[o*2],r[o*2+1]);if(!isNaN(r[o*2+2])&&!isNaN(r[o*2+3])){i.push(r[o*2+2],r[o*2+1])}else{i.push(NaN,NaN)}}}i.push(r[n-2],r[n-1])}else if(t.line.shape==="hvh"){i=[];for(o=0;o<a-1;o++){if(isNaN(r[o*2])||isNaN(r[o*2+1])||isNaN(r[o*2+2])||isNaN(r[o*2+3])){if(!isNaN(r[o*2])&&!isNaN(r[o*2+1])){i.push(r[o*2],r[o*2+1])}else{i.push(NaN,NaN)}i.push(NaN,NaN)}else{var s=(r[o*2]+r[o*2+2])/2;i.push(r[o*2],r[o*2+1],s,r[o*2+1],s,r[o*2+3])}}i.push(r[n-2],r[n-1])}else if(t.line.shape==="vhv"){i=[];for(o=0;o<a-1;o++){if(isNaN(r[o*2])||isNaN(r[o*2+1])||isNaN(r[o*2+2])||isNaN(r[o*2+3])){if(!isNaN(r[o*2])&&!isNaN(r[o*2+1])){i.push(r[o*2],r[o*2+1])}else{i.push(NaN,NaN)}i.push(NaN,NaN)}else{var l=(r[o*2+1]+r[o*2+3])/2;i.push(r[o*2],r[o*2+1],r[o*2],l,r[o*2+2],l)}}i.push(r[n-2],r[n-1])}else if(t.line.shape==="vh"){i=[];for(o=0;o<a-1;o++){if(isNaN(r[o*2])||isNaN(r[o*2+1])){i.push(NaN,NaN,NaN,NaN)}else{i.push(r[o*2],r[o*2+1]);if(!isNaN(r[o*2+2])&&!isNaN(r[o*2+3])){i.push(r[o*2],r[o*2+3])}else{i.push(NaN,NaN)}}}i.push(r[n-2],r[n-1])}else{i=r}}var u=false;for(o=0;o<i.length;o++){if(isNaN(i[o])){u=true;break}}var f=u||i.length>p.TOO_MANY_POINTS?"rect":c.hasMarkers(t)?"rect":"round";if(u&&t.connectgaps){var v=i[0];var h=i[1];for(o=0;o<i.length;o+=2){if(isNaN(i[o])||isNaN(i[o+1])){i[o]=v;i[o+1]=h}else{v=i[o];h=i[o+1]}}}return{join:f,positions:i}}function I(e,t,r,a,i){var s=o.getComponentMethod("errorbars","makeComputeError");var l=u.getFromId(e,t.xaxis,"x");var f=u.getFromId(e,t.yaxis,"y");var c=r.length/2;var v={};function h(e,a){var i=a._id.charAt(0);var o=t["error_"+i];if(o&&o.visible&&(a.type==="linear"||a.type==="log")){var l=s(o);var u={x:0,y:1}[i];var f={x:[0,1,2,3],y:[2,3,0,1]}[i];var h=new Float64Array(4*c);var p=Infinity;var d=-Infinity;for(var g=0,y=0;g<c;g++,y+=4){var m=e[g];if(n(m)){var x=r[g*2+u];var b=l(m,g);var _=b[0];var w=b[1];if(n(_)&&n(w)){var T=m-_;var k=m+w;h[y+f[0]]=x-a.c2l(T);h[y+f[1]]=a.c2l(k)-x;h[y+f[2]]=0;h[y+f[3]]=0;p=Math.min(p,m-_);d=Math.max(d,m+w)}}}v[i]={positions:r,errors:h,_bnds:[p,d]}}}h(a,l);h(i,f);return v}function P(e,t,r,n){var a=t._length;var i={};var o;if(c.hasMarkers(t)){var s=r.font;var l=r.align;var u=r.baseline;i.offset=new Array(a);for(o=0;o<a;o++){var f=n.sizes?n.sizes[o]:n.size;var v=Array.isArray(s)?s[o].size:s.size;var h=Array.isArray(l)?l.length>1?l[o]:l[0]:l;var p=Array.isArray(u)?u.length>1?u[o]:u[0]:u;var d=g[h];var y=g[p];var m=f?f/.8+1:0;var x=-y*m-y*.5;i.offset[o]=[d*m/v,x/v]}}return i}e.exports={style:m,markerStyle:b,markerSelection:_,linePositions:C,errorBarPositions:I,textPosition:P}},47148:function(e,t,r){"use strict";var n=r(71828);var a=r(73972);var i=r(68645);var o=r(42341);var s=r(47581);var l=r(34098);var u=r(67513);var f=r(73927);var c=r(49508);var v=r(11058);var h=r(28908);var p=r(82410);e.exports=function e(t,r,d,g){function y(e,a){return n.coerce(t,r,o,e,a)}var m=t.marker?i.isOpenSymbol(t.marker.symbol):false;var x=l.isBubble(t);var b=u(t,r,g,y);if(!b){r.visible=false;return}f(t,r,g,y);y("xhoverformat");y("yhoverformat");var _=b<s.PTS_LINESONLY?"lines+markers":"lines";y("text");y("hovertext");y("hovertemplate");y("mode",_);if(l.hasLines(r)){y("connectgaps");v(t,r,d,g,y);y("line.shape")}if(l.hasMarkers(r)){c(t,r,d,g,y,{noAngleRef:true,noStandOff:true});y("marker.line.width",m||x?1:0)}if(l.hasText(r)){y("texttemplate");p(t,r,g,y)}var w=(r.line||{}).color;var T=(r.marker||{}).color;y("fill");if(r.fill!=="none"){h(t,r,d,y)}var k=a.getComponentMethod("errorbars","supplyDefaults");k(t,r,w||T||d,{axis:"y"});k(t,r,w||T||d,{axis:"x",inherit:"y"});n.coerceSelectionMarkerOpacity(r,y)}},5345:function(e,t,r){"use strict";var n=r(71828);var a=r(7901);var i=r(37822).DESELECTDIM;function o(e){var t=e[0];var r=t.trace;var o=t.t;var s=o._scene;var l=o.index;var u=s.selectBatch[l];var f=s.unselectBatch[l];var c=s.textOptions[l];var v=s.textSelectedOptions[l]||{};var h=s.textUnselectedOptions[l]||{};var p=n.extendFlat({},c);var d,g;if(u.length||f.length){var y=v.color;var m=h.color;var x=c.color;var b=Array.isArray(x);p.color=new Array(r._length);for(d=0;d<u.length;d++){g=u[d];p.color[g]=y||(b?x[g]:x)}for(d=0;d<f.length;d++){g=f[d];var _=b?x[g]:x;p.color[g]=m?m:y?_:a.addOpacity(_,i)}}s.glText[l].update(p)}e.exports={styleTextSelection:o}},68101:function(e,t,r){"use strict";var n=r(8225);e.exports=function e(t,r,a){var i=t.i;if(!("x"in t))t.x=r._x[i];if(!("y"in t))t.y=r._y[i];return n(t,r,a)}},68645:function(e,t,r){"use strict";var n=r(78232);t.isOpenSymbol=function(e){return typeof e==="string"?n.OPEN_RE.test(e):e%200>100};t.isDotSymbol=function(e){return typeof e==="string"?n.DOT_RE.test(e):e>200}},20794:function(e,t,r){"use strict";var n=r(73972);var a=r(71828);var i=r(34603);function o(e,t,r,n){var a=e.cd;var i=a[0].t;var o=a[0].trace;var l=e.xa;var u=e.ya;var f=i.x;var c=i.y;var v=l.c2p(t);var h=u.c2p(r);var p=e.distance;var d;if(i.tree){var g=l.p2c(v-p);var y=l.p2c(v+p);var m=u.p2c(h-p);var x=u.p2c(h+p);if(n==="x"){d=i.tree.range(Math.min(g,y),Math.min(u._rl[0],u._rl[1]),Math.max(g,y),Math.max(u._rl[0],u._rl[1]))}else{d=i.tree.range(Math.min(g,y),Math.min(m,x),Math.max(g,y),Math.max(m,x))}}else{d=i.ids}var b,_,w,T,k,A,M,S,E;var L=p;if(n==="x"){var C=!!o.xperiodalignment;var I=!!o.yperiodalignment;for(k=0;k<d.length;k++){b=d[k];w=f[b];A=Math.abs(l.c2p(w)-v);if(C){var P=l.c2p(o._xStarts[b]);var O=l.c2p(o._xEnds[b]);A=v>=Math.min(P,O)&&v<=Math.max(P,O)?0:Infinity}if(A<L){L=A;T=c[b];M=u.c2p(T)-h;if(I){var D=u.c2p(o._yStarts[b]);var z=u.c2p(o._yEnds[b]);M=h>=Math.min(D,z)&&h<=Math.max(D,z)?0:Infinity}E=Math.sqrt(A*A+M*M);_=d[k]}}}else{for(k=d.length-1;k>-1;k--){b=d[k];w=f[b];T=c[b];A=l.c2p(w)-v;M=u.c2p(T)-h;S=Math.sqrt(A*A+M*M);if(S<L){L=E=S;_=b}}}e.index=_;e.distance=L;e.dxy=E;if(_===undefined)return[e];return[s(e,f,c,o)]}function s(e,t,r,o){var s=e.xa;var l=e.ya;var u=e.distance;var f=e.dxy;var c=e.index;var v={pointNumber:c,x:t[c],y:r[c]};v.tx=Array.isArray(o.text)?o.text[c]:o.text;v.htx=Array.isArray(o.hovertext)?o.hovertext[c]:o.hovertext;v.data=Array.isArray(o.customdata)?o.customdata[c]:o.customdata;v.tp=Array.isArray(o.textposition)?o.textposition[c]:o.textposition;var h=o.textfont;if(h){v.ts=a.isArrayOrTypedArray(h.size)?h.size[c]:h.size;v.tc=Array.isArray(h.color)?h.color[c]:h.color;v.tf=Array.isArray(h.family)?h.family[c]:h.family}var p=o.marker;if(p){v.ms=a.isArrayOrTypedArray(p.size)?p.size[c]:p.size;v.mo=a.isArrayOrTypedArray(p.opacity)?p.opacity[c]:p.opacity;v.mx=a.isArrayOrTypedArray(p.symbol)?p.symbol[c]:p.symbol;v.ma=a.isArrayOrTypedArray(p.angle)?p.angle[c]:p.angle;v.mc=a.isArrayOrTypedArray(p.color)?p.color[c]:p.color}var d=p&&p.line;if(d){v.mlc=Array.isArray(d.color)?d.color[c]:d.color;v.mlw=a.isArrayOrTypedArray(d.width)?d.width[c]:d.width}var g=p&&p.gradient;if(g&&g.type!=="none"){v.mgt=Array.isArray(g.type)?g.type[c]:g.type;v.mgc=Array.isArray(g.color)?g.color[c]:g.color}var y=s.c2p(v.x,true);var m=l.c2p(v.y,true);var x=v.mrc||1;var b=o.hoverlabel;if(b){v.hbg=Array.isArray(b.bgcolor)?b.bgcolor[c]:b.bgcolor;v.hbc=Array.isArray(b.bordercolor)?b.bordercolor[c]:b.bordercolor;v.hts=a.isArrayOrTypedArray(b.font.size)?b.font.size[c]:b.font.size;v.htc=Array.isArray(b.font.color)?b.font.color[c]:b.font.color;v.htf=Array.isArray(b.font.family)?b.font.family[c]:b.font.family;v.hnl=a.isArrayOrTypedArray(b.namelength)?b.namelength[c]:b.namelength}var _=o.hoverinfo;if(_){v.hi=Array.isArray(_)?_[c]:_}var w=o.hovertemplate;if(w){v.ht=Array.isArray(w)?w[c]:w}var T={};T[e.index]=v;var k=o._origX;var A=o._origY;var M=a.extendFlat({},e,{color:i(o,v),x0:y-x,x1:y+x,xLabelVal:k?k[c]:v.x,y0:m-x,y1:m+x,yLabelVal:A?A[c]:v.y,cd:T,distance:u,spikeDistance:f,hovertemplate:v.ht});if(v.htx)M.text=v.htx;else if(v.tx)M.text=v.tx;else if(o.text)M.text=o.text;a.fillText(v,o,M);n.getComponentMethod("errorbars","hoverInfo")(v,o,M);return M}e.exports={hoverPoints:o,calcHover:s}},68868:function(e,t,r){"use strict";var n=r(72156);n.plot=r(26787);e.exports=n},26787:function(e,t,r){"use strict";var n=r(11870);var a=r(46075);var i=r(3593);var o=r(42505);var s=r(71828);var l=r(64505).selectMode;var u=r(79749);var f=r(34098);var c=r(68687);var v=r(5345).styleTextSelection;var h={};function p(e,t,r,n){var a=e._size;var i=e.width*n;var o=e.height*n;var s=a.l*n;var l=a.b*n;var u=a.r*n;var f=a.t*n;var c=a.w*n;var v=a.h*n;return[s+t.domain[0]*c,l+r.domain[0]*v,i-u-(1-t.domain[1])*c,o-f-(1-r.domain[1])*v]}var d=e.exports=function e(t,r,d){if(!d.length)return;var g=t._fullLayout;var y=r._scene;var m=r.xaxis;var x=r.yaxis;var b,_;if(!y)return;var w=u(t,["ANGLE_instanced_arrays","OES_element_index_uint"],h);if(!w){y.init();return}var T=y.count;var k=g._glcanvas.data()[0].regl;c(t,r,d);if(y.dirty){if(y.error2d===true){y.error2d=i(k)}if(y.line2d===true){y.line2d=a(k)}if(y.scatter2d===true){y.scatter2d=n(k)}if(y.fill2d===true){y.fill2d=a(k)}if(y.glText===true){y.glText=new Array(T);for(b=0;b<T;b++){y.glText[b]=new o(k)}}if(y.glText){if(T>y.glText.length){var A=T-y.glText.length;for(b=0;b<A;b++){y.glText.push(new o(k))}}else if(T<y.glText.length){var M=y.glText.length-T;var S=y.glText.splice(T,M);S.forEach((function(e){e.destroy()}))}for(b=0;b<T;b++){y.glText[b].update(y.textOptions[b])}}if(y.line2d){y.line2d.update(y.lineOptions);y.lineOptions=y.lineOptions.map((function(e){if(e&&e.positions){var t=e.positions;var r=0;while(r<t.length&&(isNaN(t[r])||isNaN(t[r+1]))){r+=2}var n=t.length-2;while(n>r&&(isNaN(t[n])||isNaN(t[n+1]))){n-=2}e.positions=t.slice(r,n+2)}return e}));y.line2d.update(y.lineOptions)}if(y.error2d){var E=(y.errorXOptions||[]).concat(y.errorYOptions||[]);y.error2d.update(E)}if(y.scatter2d){y.scatter2d.update(y.markerOptions)}y.fillOrder=s.repeat(null,T);if(y.fill2d){y.fillOptions=y.fillOptions.map((function(e,t){var r=d[t];if(!e||!r||!r[0]||!r[0].trace)return;var n=r[0];var a=n.trace;var i=n.t;var o=y.lineOptions[t];var s,l;var u=[];if(a._ownfill)u.push(t);if(a._nexttrace)u.push(t+1);if(u.length)y.fillOrder[t]=u;var f=[];var c=o&&o.positions||i.positions;var v,h;if(a.fill==="tozeroy"){v=0;while(v<c.length&&isNaN(c[v+1])){v+=2}h=c.length-2;while(h>v&&isNaN(c[h+1])){h-=2}if(c[v+1]!==0){f=[c[v],0]}f=f.concat(c.slice(v,h+2));if(c[h+1]!==0){f=f.concat([c[h],0])}}else if(a.fill==="tozerox"){v=0;while(v<c.length&&isNaN(c[v])){v+=2}h=c.length-2;while(h>v&&isNaN(c[h])){h-=2}if(c[v]!==0){f=[0,c[v+1]]}f=f.concat(c.slice(v,h+2));if(c[h]!==0){f=f.concat([0,c[h+1]])}}else if(a.fill==="toself"||a.fill==="tonext"){f=[];s=0;e.splitNull=true;for(l=0;l<c.length;l+=2){if(isNaN(c[l])||isNaN(c[l+1])){f=f.concat(c.slice(s,l));f.push(c[s],c[s+1]);f.push(null,null);s=l+2}}f=f.concat(c.slice(s));if(s){f.push(c[s],c[s+1])}}else{var p=a._nexttrace;if(p){var g=y.lineOptions[t+1];if(g){var m=g.positions;if(a.fill==="tonexty"){f=c.slice();for(t=Math.floor(m.length/2);t--;){var x=m[t*2];var b=m[t*2+1];if(isNaN(x)||isNaN(b))continue;f.push(x,b)}e.fill=p.fillcolor}}}}if(a._prevtrace&&a._prevtrace.fill==="tonext"){var _=y.lineOptions[t-1].positions;var w=f.length/2;s=w;var T=[s];for(l=0;l<_.length;l+=2){if(isNaN(_[l])||isNaN(_[l+1])){T.push(l/2+w+1);s=l+2}}f=f.concat(_);e.hole=T}e.fillmode=a.fill;e.opacity=a.opacity;e.positions=f;return e}));y.fill2d.update(y.fillOptions)}}var L=g.dragmode;var C=l(L);var I=g.clickmode.indexOf("select")>-1;for(b=0;b<T;b++){var P=d[b][0];var O=P.trace;var D=P.t;var z=D.index;var R=O._length;var F=D.x;var B=D.y;if(O.selectedpoints||C||I){if(!C)C=true;if(O.selectedpoints){var N=y.selectBatch[z]=s.selIndices2selPoints(O);var j={};for(_=0;_<N.length;_++){j[N[_]]=1}var U=[];for(_=0;_<R;_++){if(!j[_])U.push(_)}y.unselectBatch[z]=U}var V=D.xpx=new Array(R);var H=D.ypx=new Array(R);for(_=0;_<R;_++){V[_]=m.c2p(F[_]);H[_]=x.c2p(B[_])}}else{D.xpx=D.ypx=null}}if(C){if(!y.select2d){y.select2d=n(g._glcanvas.data()[1].regl)}if(y.scatter2d){var q=new Array(T);for(b=0;b<T;b++){q[b]=y.selectBatch[b].length||y.unselectBatch[b].length?y.markerUnselectedOptions[b]:{}}y.scatter2d.update(q)}if(y.select2d){y.select2d.update(y.markerOptions);y.select2d.update(y.markerSelectedOptions)}if(y.glText){d.forEach((function(e){var t=((e||[])[0]||{}).trace||{};if(f.hasText(t)){v(e)}}))}}else{if(y.scatter2d){y.scatter2d.update(y.markerOptions)}}var G={viewport:p(g,m,x,t._context.plotGlPixelRatio),range:[(m._rl||m.range)[0],(x._rl||x.range)[0],(m._rl||m.range)[1],(x._rl||x.range)[1]]};var Z=s.repeat(G,y.count);if(y.fill2d){y.fill2d.update(Z)}if(y.line2d){y.line2d.update(Z)}if(y.error2d){y.error2d.update(Z.concat(Z))}if(y.scatter2d){y.scatter2d.update(Z)}if(y.select2d){y.select2d.update(Z)}if(y.glText){y.glText.forEach((function(e){e.update(G)}))}};d.reglPrecompiled=h},38967:function(e,t,r){"use strict";var n=r(71828);e.exports=function e(t,r){var a=r._scene;var i={count:0,dirty:true,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]};var o={fill2d:false,scatter2d:false,error2d:false,line2d:false,glText:false,select2d:false};if(!r._scene){a=r._scene={};a.init=function e(){n.extendFlat(a,o,i)};a.init();a.update=function e(t){var r=n.repeat(t,a.count);if(a.fill2d)a.fill2d.update(r);if(a.scatter2d)a.scatter2d.update(r);if(a.line2d)a.line2d.update(r);if(a.error2d)a.error2d.update(r.concat(r));if(a.select2d)a.select2d.update(r);if(a.glText){for(var i=0;i<a.count;i++){a.glText[i].update(t)}}};a.draw=function e(){var t=a.count;var r=a.fill2d;var i=a.error2d;var o=a.line2d;var s=a.scatter2d;var l=a.glText;var u=a.select2d;var f=a.selectBatch;var c=a.unselectBatch;for(var v=0;v<t;v++){if(r&&a.fillOrder[v]){r.draw(a.fillOrder[v])}if(o&&a.lineOptions[v]){o.draw(v)}if(i){if(a.errorXOptions[v])i.draw(v);if(a.errorYOptions[v])i.draw(v+t)}if(s&&a.markerOptions[v]){if(c[v].length){var h=n.repeat([],a.count);h[v]=c[v];s.draw(h)}else if(!f[v].length){s.draw(v)}}if(l[v]&&a.textOptions[v]){l[v].render()}}if(u){u.draw(f)}a.dirty=false};a.destroy=function e(){if(a.fill2d&&a.fill2d.destroy)a.fill2d.destroy();if(a.scatter2d&&a.scatter2d.destroy)a.scatter2d.destroy();if(a.error2d&&a.error2d.destroy)a.error2d.destroy();if(a.line2d&&a.line2d.destroy)a.line2d.destroy();if(a.select2d&&a.select2d.destroy)a.select2d.destroy();if(a.glText){a.glText.forEach((function(e){if(e.destroy)e.destroy()}))}a.lineOptions=null;a.fillOptions=null;a.markerOptions=null;a.markerSelectedOptions=null;a.markerUnselectedOptions=null;a.errorXOptions=null;a.errorYOptions=null;a.textOptions=null;a.textSelectedOptions=null;a.textUnselectedOptions=null;a.selectBatch=null;a.unselectBatch=null;r._scene=null}}if(!a.dirty){n.extendFlat(a,i)}return a}},58147:function(e,t,r){"use strict";var n=r(34098);var a=r(5345).styleTextSelection;e.exports=function e(t,r){var i=t.cd;var o=t.xaxis;var s=t.yaxis;var l=[];var u=i[0].trace;var f=i[0].t;var c=u._length;var v=f.x;var h=f.y;var p=f._scene;var d=f.index;if(!p)return l;var g=n.hasText(u);var y=n.hasMarkers(u);var m=!y&&!g;if(u.visible!==true||m)return l;var x=[];var b=[];if(r!==false&&!r.degenerate){for(var _=0;_<c;_++){if(r.contains([f.xpx[_],f.ypx[_]],false,_,t)){x.push(_);l.push({pointNumber:_,x:o.c2d(v[_]),y:s.c2d(h[_])})}else{b.push(_)}}}if(y){var w=p.scatter2d;if(!x.length&&!b.length){var T=new Array(p.count);T[d]=p.markerOptions[d];w.update.apply(w,T)}else if(!p.selectBatch[d].length&&!p.unselectBatch[d].length){var k=new Array(p.count);k[d]=p.markerUnselectedOptions[d];w.update.apply(w,k)}}p.selectBatch[d]=x;p.unselectBatch[d]=b;if(g){a(i)}return l}},99181:function(e,t,r){"use strict";var n=r(5386).fF;var a=r(5386).si;var i=r(19316);var o=r(82196);var s=r(23585);var l=r(9012);var u=r(50693);var f=r(1426).extendFlat;var c=r(30962).overrideAll;var v=r(23585);var h=i.line;var p=i.marker;e.exports=c({lon:i.lon,lat:i.lat,cluster:{enabled:{valType:"boolean"},maxzoom:f({},v.layers.maxzoom,{}),step:{valType:"number",arrayOk:true,dflt:-1,min:-1},size:{valType:"number",arrayOk:true,dflt:20,min:0},color:{valType:"color",arrayOk:true},opacity:f({},p.opacity,{dflt:1})},mode:f({},o.mode,{dflt:"markers"}),text:f({},o.text,{}),texttemplate:a({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:f({},o.hovertext,{}),line:{color:h.color,width:h.width},connectgaps:o.connectgaps,marker:f({symbol:{valType:"string",dflt:"circle",arrayOk:true},angle:{valType:"number",dflt:"auto",arrayOk:true},allowoverlap:{valType:"boolean",dflt:false},opacity:p.opacity,size:p.size,sizeref:p.sizeref,sizemin:p.sizemin,sizemode:p.sizemode},u("marker")),fill:i.fill,fillcolor:o.fillcolor,textfont:s.layers.symbol.textfont,textposition:s.layers.symbol.textposition,below:{valType:"string"},selected:{marker:o.selected.marker},unselected:{marker:o.unselected.marker},hoverinfo:f({},l.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:n()},"calc","nested")},15790:function(e,t,r){"use strict";var n=r(92770);var a=r(71828);var i=r(50606).BADNUM;var o=r(18214);var s=r(21081);var l=r(91424);var u=r(39984);var f=r(34098);var c=r(13056);var v=r(23469).appendArrayPointValue;var h=r(63893).NEWLINES;var p=r(63893).BR_TAG_ALL;e.exports=function e(t,r){var n=r[0].trace;var i=n.visible===true&&n._length!==0;var s=n.fill!=="none";var l=f.hasLines(n);var u=f.hasMarkers(n);var v=f.hasText(n);var h=u&&n.marker.symbol==="circle";var p=u&&n.marker.symbol!=="circle";var m=n.cluster&&n.cluster.enabled;var x=d("fill");var b=d("line");var w=d("circle");var T=d("symbol");var k={fill:x,line:b,circle:w,symbol:T};if(!i)return k;var A;if(s||l){A=o.calcTraceToLineCoords(r)}if(s){x.geojson=o.makePolygon(A);x.layout.visibility="visible";a.extendFlat(x.paint,{"fill-color":n.fillcolor})}if(l){b.geojson=o.makeLine(A);b.layout.visibility="visible";a.extendFlat(b.paint,{"line-width":n.line.width,"line-color":n.line.color,"line-opacity":n.opacity})}if(h){var M=g(r);w.geojson=M.geojson;w.layout.visibility="visible";if(m){w.filter=["!",["has","point_count"]];k.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":_(n.cluster.color,n.cluster.step),"circle-radius":_(n.cluster.size,n.cluster.step),"circle-opacity":_(n.cluster.opacity,n.cluster.step)}};k.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}}a.extendFlat(w.paint,{"circle-color":M.mcc,"circle-radius":M.mrc,"circle-opacity":M.mo})}if(h&&m){w.filter=["!",["has","point_count"]]}if(p||v){T.geojson=y(r,t);a.extendFlat(T.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"});if(p){a.extendFlat(T.layout,{"icon-size":n.marker.size/10});if("angle"in n.marker&&n.marker.angle!=="auto"){a.extendFlat(T.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"})}T.layout["icon-allow-overlap"]=n.marker.allowoverlap;a.extendFlat(T.paint,{"icon-opacity":n.opacity*n.marker.opacity,"icon-color":n.marker.color})}if(v){var S=(n.marker||{}).size;var E=c(n.textposition,S);a.extendFlat(T.layout,{"text-size":n.textfont.size,"text-anchor":E.anchor,"text-offset":E.offset,"text-font":n.textfont.family.split(", ")});a.extendFlat(T.paint,{"text-color":n.textfont.color,"text-opacity":n.opacity})}}return k};function d(e){return{type:e,geojson:o.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function g(e){var t=e[0].trace;var r=t.marker;var i=t.selectedpoints;var o=a.isArrayOrTypedArray(r.color);var f=a.isArrayOrTypedArray(r.size);var c=a.isArrayOrTypedArray(r.opacity);var v;function h(e){return t.opacity*e}function p(e){return e/2}var d;if(o){if(s.hasColorscale(t,"marker")){d=s.makeColorScaleFuncFromTrace(r)}else{d=a.identity}}var g;if(f){g=u(t)}var y;if(c){y=function(e){var t=n(e)?+a.constrain(e,0,1):0;return h(t)}}var m=[];for(v=0;v<e.length;v++){var x=e[v];var _=x.lonlat;if(b(_))continue;var w={};if(d)w.mcc=x.mcc=d(x.mc);if(g)w.mrc=x.mrc=g(x.ms);if(y)w.mo=y(x.mo);if(i)w.selected=x.selected||0;m.push({type:"Feature",id:v+1,geometry:{type:"Point",coordinates:_},properties:w})}var T;if(i){T=l.makeSelectedPointStyleFns(t);for(v=0;v<m.length;v++){var k=m[v].properties;if(T.selectedOpacityFn){k.mo=h(T.selectedOpacityFn(k))}if(T.selectedColorFn){k.mcc=T.selectedColorFn(k)}if(T.selectedSizeFn){k.mrc=T.selectedSizeFn(k)}}}return{geojson:{type:"FeatureCollection",features:m},mcc:o||T&&T.selectedColorFn?{type:"identity",property:"mcc"}:r.color,mrc:f||T&&T.selectedSizeFn?{type:"identity",property:"mrc"}:p(r.size),mo:c||T&&T.selectedOpacityFn?{type:"identity",property:"mo"}:h(r.opacity)}}function y(e,t){var r=t._fullLayout;var n=e[0].trace;var i=n.marker||{};var o=i.symbol;var s=i.angle;var l=o!=="circle"?m(o):x;var u=s!=="auto"?m(s,true):x;var c=f.hasText(n)?m(n.text):x;var d=[];for(var g=0;g<e.length;g++){var y=e[g];if(b(y.lonlat))continue;var _=n.texttemplate;var w;if(_){var T=Array.isArray(_)?_[g]||"":_;var k=n._module.formatLabels(y,n,r);var A={};v(A,n,y.i);var M=n._meta||{};w=a.texttemplateString(T,k,r._d3locale,A,y,M)}else{w=c(g)}if(w){w=w.replace(h,"").replace(p,"\n")}d.push({type:"Feature",geometry:{type:"Point",coordinates:y.lonlat},properties:{symbol:l(g),angle:u(g),text:w}})}return{type:"FeatureCollection",features:d}}function m(e,t){if(a.isArrayOrTypedArray(e)){if(t){return function(t){return n(e[t])?+e[t]:0}}return function(t){return e[t]}}else if(e){return function(){return e}}else{return x}}function x(){return""}function b(e){return e[0]===i}function _(e,t){var r;if(a.isArrayOrTypedArray(e)&&a.isArrayOrTypedArray(t)){r=["step",["get","point_count"],e[0]];for(var n=1;n<e.length;n++){r.push(t[n-1],e[n])}}else{r=e}return r}},76645:function(e,t,r){"use strict";var n=r(71828);var a=r(34098);var i=r(49508);var o=r(11058);var s=r(82410);var l=r(28908);var u=r(99181);var f=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extra Bold Italic","Open Sans Extra Bold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];e.exports=function e(t,r,v,h){function p(e,a){return n.coerce(t,r,u,e,a)}function d(e,a){return n.coerce2(t,r,u,e,a)}var g=c(t,r,p);if(!g){r.visible=false;return}p("text");p("texttemplate");p("hovertext");p("hovertemplate");p("mode");p("below");if(a.hasLines(r)){o(t,r,v,h,p,{noDash:true});p("connectgaps")}if(a.hasMarkers(r)){i(t,r,v,h,p,{noLine:true,noAngle:true});p("marker.allowoverlap");p("marker.angle");var y=r.marker;if(y.symbol!=="circle"){if(n.isArrayOrTypedArray(y.size))y.size=y.size[0];if(n.isArrayOrTypedArray(y.color))y.color=y.color[0]}}var m=d("cluster.maxzoom");var x=d("cluster.step");var b=d("cluster.color",r.marker&&r.marker.color||v);var _=d("cluster.size");var w=d("cluster.opacity");var T=m!==false||x!==false||b!==false||_!==false||w!==false;p("cluster.enabled",T);if(a.hasText(r)){s(t,r,h,p,{noSelect:true,font:{family:f.indexOf(h.font.family)!==-1?h.font.family:"Open Sans Regular",size:h.font.size,color:h.font.color}})}p("fill");if(r.fill!=="none"){l(t,r,v,p)}n.coerceSelectionMarkerOpacity(r,p)};function c(e,t,r){var n=r("lon")||[];var a=r("lat")||[];var i=Math.min(n.length,a.length);t._length=i;return i}},53353:function(e){"use strict";e.exports=function e(t,r){t.lon=r.lon;t.lat=r.lat;return t}},15636:function(e,t,r){"use strict";var n=r(89298);e.exports=function e(t,r,a){var i={};var o=a[r.subplot]._subplot;var s=o.mockAxis;var l=t.lonlat;i.lonLabel=n.tickText(s,s.c2l(l[0]),true).text;i.latLabel=n.tickText(s,s.c2l(l[1]),true).text;return i}},28178:function(e,t,r){"use strict";var n=r(30211);var a=r(71828);var i=r(34603);var o=a.fillText;var s=r(50606).BADNUM;var l=r(77734).traceLayerPrefix;function u(e,t,r){var o=e.cd;var u=o[0].trace;var c=e.xa;var v=e.ya;var h=e.subplot;var p=[];var d=l+u.uid+"-circle";var g=u.cluster&&u.cluster.enabled;if(g){var y=h.map.queryRenderedFeatures(null,{layers:[d]});p=y.map((function(e){return e.id}))}var m=t>=0?Math.floor((t+180)/360):Math.ceil((t-180)/360);var x=m*360;var b=t-x;function _(e){var t=e.lonlat;if(t[0]===s)return Infinity;if(g&&p.indexOf(e.i+1)===-1)return Infinity;var n=a.modHalf(t[0],360);var i=t[1];var o=h.project([n,i]);var l=o.x-c.c2p([b,i]);var u=o.y-v.c2p([n,r]);var f=Math.max(3,e.mrc||0);return Math.max(Math.sqrt(l*l+u*u)-f,1-3/f)}n.getClosest(o,_,e);if(e.index===false)return;var w=o[e.index];var T=w.lonlat;var k=[a.modHalf(T[0],360)+x,T[1]];var A=c.c2p(k);var M=v.c2p(k);var S=w.mrc||1;e.x0=A-S;e.x1=A+S;e.y0=M-S;e.y1=M+S;var E={};E[u.subplot]={_subplot:h};var L=u._module.formatLabels(w,u,E);e.lonLabel=L.lonLabel;e.latLabel=L.latLabel;e.color=i(u,w);e.extraText=f(u,w,o[0].t.labels);e.hovertemplate=u.hovertemplate;return[e]}function f(e,t,r){if(e.hovertemplate)return;var n=t.hi||e.hoverinfo;var a=n.split("+");var i=a.indexOf("all")!==-1;var s=a.indexOf("lon")!==-1;var l=a.indexOf("lat")!==-1;var u=t.lonlat;var f=[];function c(e){return e+""}if(i||s&&l){f.push("("+c(u[1])+", "+c(u[0])+")")}else if(s){f.push(r.lon+c(u[0]))}else if(l){f.push(r.lat+c(u[1]))}if(i||a.indexOf("text")!==-1){o(t,e,f)}return f.join("<br>")}e.exports={hoverPoints:u,getExtraText:f}},20467:function(e,t,r){"use strict";e.exports={attributes:r(99181),supplyDefaults:r(76645),colorbar:r(4898),formatLabels:r(15636),calc:r(84622),plot:r(86951),hoverPoints:r(28178).hoverPoints,eventData:r(53353),selectPoints:r(86387),styleOnSelect:function(e,t){if(t){var r=t[0].trace;r._glTrace.update(t)}},moduleType:"trace",name:"scattermapbox",basePlotModule:r(50101),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},86951:function(e,t,r){"use strict";var n=r(71828);var a=r(15790);var i=r(77734).traceLayerPrefix;var o={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function s(e,t,r,n){this.type="scattermapbox";this.subplot=e;this.uid=t;this.clusterEnabled=r;this.isHidden=n;this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"};this.layerIds={fill:i+t+"-fill",line:i+t+"-line",circle:i+t+"-circle",symbol:i+t+"-symbol",cluster:i+t+"-cluster",clusterCount:i+t+"-cluster-count"};this.below=null}var l=s.prototype;l.addSource=function(e,t,r){var a={type:"geojson",data:t.geojson};if(r&&r.enabled){n.extendFlat(a,{cluster:true,clusterMaxZoom:r.maxzoom})}var i=this.subplot.map.getSource(this.sourceIds[e]);if(i){i.setData(t.geojson)}else{this.subplot.map.addSource(this.sourceIds[e],a)}};l.setSourceData=function(e,t){this.subplot.map.getSource(this.sourceIds[e]).setData(t.geojson)};l.addLayer=function(e,t,r){var n={type:t.type,id:this.layerIds[e],source:this.sourceIds[e],layout:t.layout,paint:t.paint};if(t.filter){n.filter=t.filter}var a=this.layerIds[e];var i;var o=this.subplot.getMapLayers();for(var s=0;s<o.length;s++){if(o[s].id===a){i=true;break}}if(i){this.subplot.setOptions(a,"setLayoutProperty",n.layout);if(n.layout.visibility==="visible"){this.subplot.setOptions(a,"setPaintProperty",n.paint)}}else{this.subplot.addLayer(n,r)}};l.update=function e(t){var r=t[0].trace;var n=this.subplot;var i=n.map;var s=a(n.gd,t);var l=n.belowLookup["trace-"+this.uid];var u=!!(r.cluster&&r.cluster.enabled);var f=!!this.clusterEnabled;var c=this;function v(e){if(!e)c.addSource("circle",s.circle,r.cluster);var t=o.cluster;for(var n=0;n<t.length;n++){var a=t[n];var i=s[a];c.addLayer(a,i,l)}}function h(e){var t=o.cluster;for(var r=t.length-1;r>=0;r--){var n=t[r];i.removeLayer(c.layerIds[n])}if(!e)i.removeSource(c.sourceIds.circle)}function p(e){var t=o.nonCluster;for(var r=0;r<t.length;r++){var n=t[r];var a=s[n];if(!e)c.addSource(n,a);c.addLayer(n,a,l)}}function d(e){var t=o.nonCluster;for(var r=t.length-1;r>=0;r--){var n=t[r];i.removeLayer(c.layerIds[n]);if(!e)i.removeSource(c.sourceIds[n])}}function g(e){if(f)h(e);else d(e)}function y(e){if(u)v(e);else p(e)}function m(){var e=u?o.cluster:o.nonCluster;for(var t=0;t<e.length;t++){var r=e[t];var a=s[r];if(!a)continue;n.setOptions(c.layerIds[r],"setLayoutProperty",a.layout);if(a.layout.visibility==="visible"){if(r!=="cluster"){c.setSourceData(r,a)}n.setOptions(c.layerIds[r],"setPaintProperty",a.paint)}}}var x=this.isHidden;var b=r.visible!==true;if(b){if(!x)g()}else if(x){if(!b)y()}else if(f!==u){g();y()}else if(this.below!==l){g(true);y(true);m()}else{m()}this.clusterEnabled=u;this.isHidden=b;this.below=l;t[0].trace._glTrace=this};l.dispose=function e(){var t=this.subplot.map;var r=this.clusterEnabled?o.cluster:o.nonCluster;for(var n=r.length-1;n>=0;n--){var a=r[n];t.removeLayer(this.layerIds[a]);t.removeSource(this.sourceIds[a])}};e.exports=function e(t,r){var n=r[0].trace;var i=n.cluster&&n.cluster.enabled;var l=n.visible!==true;var u=new s(t,n.uid,i,l);var f=a(t.gd,r);var c=u.below=t.belowLookup["trace-"+n.uid];var v,h,p;if(i){u.addSource("circle",f.circle,n.cluster);for(v=0;v<o.cluster.length;v++){h=o.cluster[v];p=f[h];u.addLayer(h,p,c)}}else{for(v=0;v<o.nonCluster.length;v++){h=o.nonCluster[v];p=f[h];u.addSource(h,p,n.cluster);u.addLayer(h,p,c)}}r[0].trace._glTrace=u;return u}},86387:function(e,t,r){"use strict";var n=r(71828);var a=r(34098);var i=r(50606).BADNUM;e.exports=function e(t,r){var o=t.cd;var s=t.xaxis;var l=t.yaxis;var u=[];var f=o[0].trace;var c;if(!a.hasMarkers(f))return[];if(r===false){for(c=0;c<o.length;c++){o[c].selected=0}}else{for(c=0;c<o.length;c++){var v=o[c];var h=v.lonlat;if(h[0]!==i){var p=[n.modHalf(h[0],360),h[1]];var d=[s.c2p(p),l.c2p(p)];if(r.contains(d,null,c,t)){u.push({pointNumber:c,lon:h[0],lat:h[1]});v.selected=1}else{v.selected=0}}}}return u}},81245:function(e,t,r){"use strict";var n=r(5386).fF;var a=r(5386).si;var i=r(1426).extendFlat;var o=r(82196);var s=r(9012);var l=o.line;e.exports={mode:o.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:o.text,texttemplate:a({editType:"plot"},{keys:["r","theta","text"]}),hovertext:o.hovertext,line:{color:l.color,width:l.width,dash:l.dash,backoff:l.backoff,shape:i({},l.shape,{values:["linear","spline"]}),smoothing:l.smoothing,editType:"calc"},connectgaps:o.connectgaps,marker:o.marker,cliponaxis:i({},o.cliponaxis,{dflt:false}),textposition:o.textposition,textfont:o.textfont,fill:i({},o.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:o.fillcolor,hoverinfo:i({},s.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:o.hoveron,hovertemplate:n(),selected:o.selected,unselected:o.unselected}},26442:function(e,t,r){"use strict";var n=r(92770);var a=r(50606).BADNUM;var i=r(89298);var o=r(36922);var s=r(75225);var l=r(66279);var u=r(47761).calcMarkerSize;e.exports=function e(t,r){var f=t._fullLayout;var c=r.subplot;var v=f[c].radialaxis;var h=f[c].angularaxis;var p=v.makeCalcdata(r,"r");var d=h.makeCalcdata(r,"theta");var g=r._length;var y=new Array(g);for(var m=0;m<g;m++){var x=p[m];var b=d[m];var _=y[m]={};if(n(x)&&n(b)){_.r=x;_.theta=b}else{_.r=a}}var w=u(r,g);r._extremes.x=i.findExtremes(v,p,{ppad:w});o(t,r);s(y,r);l(y,r);return y}},22184:function(e,t,r){"use strict";var n=r(71828);var a=r(34098);var i=r(49508);var o=r(11058);var s=r(94039);var l=r(82410);var u=r(28908);var f=r(47581).PTS_LINESONLY;var c=r(81245);function v(e,t,r,v){function p(r,a){return n.coerce(e,t,c,r,a)}var d=h(e,t,v,p);if(!d){t.visible=false;return}p("thetaunit");p("mode",d<f?"lines+markers":"lines");p("text");p("hovertext");if(t.hoveron!=="fills")p("hovertemplate");if(a.hasLines(t)){o(e,t,r,v,p,{backoff:true});s(e,t,p);p("connectgaps")}if(a.hasMarkers(t)){i(e,t,r,v,p,{gradient:true})}if(a.hasText(t)){p("texttemplate");l(e,t,v,p)}var g=[];if(a.hasMarkers(t)||a.hasText(t)){p("cliponaxis");p("marker.maxdisplayed");g.push("points")}p("fill");if(t.fill!=="none"){u(e,t,r,p);if(!a.hasLines(t))s(e,t,p)}if(t.fill==="tonext"||t.fill==="toself"){g.push("fills")}p("hoveron",g.join("+")||"points");n.coerceSelectionMarkerOpacity(t,p)}function h(e,t,r,n){var a=n("r");var i=n("theta");var o;if(a){if(i){o=Math.min(a.length,i.length)}else{o=a.length;n("theta0");n("dtheta")}}else{if(!i)return 0;o=t.theta.length;n("r0");n("dr")}t._length=o;return o}e.exports={handleRThetaDefaults:h,supplyDefaults:v}},98608:function(e,t,r){"use strict";var n=r(71828);var a=r(89298);e.exports=function e(t,r,i){var o={};var s=i[r.subplot]._subplot;var l;var u;if(!s){s=i[r.subplot];l=s.radialaxis;u=s.angularaxis}else{l=s.radialAxis;u=s.angularAxis}var f=l.c2l(t.r);o.rLabel=a.tickText(l,f,true).text;var c=u.thetaunit==="degrees"?n.rad2deg(t.theta):t.theta;o.thetaLabel=a.tickText(u,c,true).text;return o}},59150:function(e,t,r){"use strict";var n=r(33720);function a(e,t,r,a){var o=n(e,t,r,a);if(!o||o[0].index===false)return;var s=o[0];if(s.index===undefined){return o}var l=e.subplot;var u=s.cd[s.index];var f=s.trace;if(!l.isPtInside(u))return;s.xLabelVal=undefined;s.yLabelVal=undefined;i(u,f,l,s);s.hovertemplate=f.hovertemplate;return o}function i(e,t,r,n){var a=r.radialAxis;var i=r.angularAxis;a._hovertitle="r";i._hovertitle="";var o={};o[t.subplot]={_subplot:r};var s=t._module.formatLabels(e,t,o);n.rLabel=s.rLabel;n.thetaLabel=s.thetaLabel;var l=e.hi||t.hoverinfo;var u=[];function f(e,t){u.push(e._hovertitle+": "+t)}if(!t.hovertemplate){var c=l.split("+");if(c.indexOf("all")!==-1)c=["r","theta","text"];if(c.indexOf("r")!==-1)f(a,n.rLabel);if(c.indexOf("theta")!==-1)f(i,n.thetaLabel);if(c.indexOf("text")!==-1&&n.text){u.push(n.text);delete n.text}n.extraText=u.join("<br>")}}e.exports={hoverPoints:a,makeHoverPointText:i}},91271:function(e,t,r){"use strict";e.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:r(23580),categories:["polar","symbols","showLegend","scatter-like"],attributes:r(81245),supplyDefaults:r(22184).supplyDefaults,colorbar:r(4898),formatLabels:r(98608),calc:r(26442),plot:r(45162),style:r(16296).style,styleOnSelect:r(16296).styleOnSelect,hoverPoints:r(59150).hoverPoints,selectPoints:r(98002),meta:{}}},45162:function(e,t,r){"use strict";var n=r(32663);var a=r(50606).BADNUM;e.exports=function e(t,r,i){var o=r.layers.frontplot.select("g.scatterlayer");var s=r.xaxis;var l=r.yaxis;var u={xaxis:s,yaxis:l,plot:r.framework,layerClipId:r._hasClipOnAxisFalse?r.clipIds.forTraces:null};var f=r.radialAxis;var c=r.angularAxis;for(var v=0;v<i.length;v++){var h=i[v];for(var p=0;p<h.length;p++){if(p===0){h[0].trace._xA=s;h[0].trace._yA=l}var d=h[p];var g=d.r;if(g===a){d.x=d.y=a}else{var y=f.c2g(g);var m=c.c2g(d.theta);d.x=y*Math.cos(m);d.y=y*Math.sin(m)}}}n(t,u,i,o)}},53286:function(e,t,r){"use strict";var n=r(81245);var a=r(42341);var i=r(5386).si;e.exports={mode:n.mode,r:n.r,theta:n.theta,r0:n.r0,dr:n.dr,theta0:n.theta0,dtheta:n.dtheta,thetaunit:n.thetaunit,text:n.text,texttemplate:i({editType:"plot"},{keys:["r","theta","text"]}),hovertext:n.hovertext,hovertemplate:n.hovertemplate,line:a.line,connectgaps:a.connectgaps,marker:a.marker,fill:a.fill,fillcolor:a.fillcolor,textposition:a.textposition,textfont:a.textfont,hoverinfo:n.hoverinfo,selected:n.selected,unselected:n.unselected}},65746:function(e,t,r){"use strict";e.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:r(23580),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:r(53286),supplyDefaults:r(75485),colorbar:r(4898),formatLabels:r(46255),calc:r(37499),hoverPoints:r(29347).hoverPoints,selectPoints:r(58147),meta:{}}},37499:function(e,t,r){"use strict";var n=r(36922);var a=r(47761).calcMarkerSize;var i=r(19635);var o=r(89298);var s=r(78232).TOO_MANY_POINTS;e.exports=function e(t,r){var l=t._fullLayout;var u=r.subplot;var f=l[u].radialaxis;var c=l[u].angularaxis;var v=r._r=f.makeCalcdata(r,"r");var h=r._theta=c.makeCalcdata(r,"theta");var p=r._length;var d={};if(p<v.length)v=v.slice(0,p);if(p<h.length)h=h.slice(0,p);d.r=v;d.theta=h;n(t,r);var g=d.opts=i.style(t,r);var y;if(p<s){y=a(r,p)}else if(g.marker){y=2*(g.marker.sizeAvg||Math.max(g.marker.size,3))}r._extremes.x=o.findExtremes(f,v,{ppad:y});return[{x:false,y:false,t:d,trace:r}]}},75485:function(e,t,r){"use strict";var n=r(71828);var a=r(34098);var i=r(22184).handleRThetaDefaults;var o=r(49508);var s=r(11058);var l=r(82410);var u=r(28908);var f=r(47581).PTS_LINESONLY;var c=r(53286);e.exports=function e(t,r,v,h){function p(e,a){return n.coerce(t,r,c,e,a)}var d=i(t,r,h,p);if(!d){r.visible=false;return}p("thetaunit");p("mode",d<f?"lines+markers":"lines");p("text");p("hovertext");if(r.hoveron!=="fills")p("hovertemplate");if(a.hasLines(r)){s(t,r,v,h,p);p("connectgaps")}if(a.hasMarkers(r)){o(t,r,v,h,p,{noAngleRef:true,noStandOff:true})}if(a.hasText(r)){p("texttemplate");l(t,r,h,p)}p("fill");if(r.fill!=="none"){u(t,r,v,p)}n.coerceSelectionMarkerOpacity(r,p)}},46255:function(e,t,r){"use strict";var n=r(98608);e.exports=function e(t,r,a){var i=t.i;if(!("r"in t))t.r=r._r[i];if(!("theta"in t))t.theta=r._theta[i];return n(t,r,a)}},29347:function(e,t,r){"use strict";var n=r(20794);var a=r(59150).makeHoverPointText;function i(e,t,r,i){var o=e.cd;var s=o[0].t;var l=s.r;var u=s.theta;var f=n.hoverPoints(e,t,r,i);if(!f||f[0].index===false)return;var c=f[0];if(c.index===undefined){return f}var v=e.subplot;var h=c.cd[c.index];var p=c.trace;h.r=l[c.index];h.theta=u[c.index];if(!v.isPtInside(h))return;c.xLabelVal=undefined;c.yLabelVal=undefined;a(h,p,v,c);return f}e.exports={hoverPoints:i}},21461:function(e,t,r){"use strict";var n=r(65746);n.plot=r(49741);e.exports=n},49741:function(e,t,r){"use strict";var n=r(88294);var a=r(92770);var i=r(26787);var o=r(38967);var s=r(19635);var l=r(71828);var u=r(78232).TOO_MANY_POINTS;var f={};e.exports=function e(t,r,f){if(!f.length)return;var c=r.radialAxis;var v=r.angularAxis;var h=o(t,r);f.forEach((function(e){if(!e||!e[0]||!e[0].trace)return;var i=e[0];var o=i.trace;var f=i.t;var p=o._length;var d=f.r;var g=f.theta;var y=f.opts;var m;var x=d.slice();var b=g.slice();for(m=0;m<d.length;m++){if(!r.isPtInside({r:d[m],theta:g[m]})){x[m]=NaN;b[m]=NaN}}var _=new Array(p*2);var w=Array(p);var T=Array(p);for(m=0;m<p;m++){var k=x[m];var A,M;if(a(k)){var S=c.c2g(k);var E=v.c2g(b[m],o.thetaunit);A=S*Math.cos(E);M=S*Math.sin(E)}else{A=M=NaN}w[m]=_[m*2]=A;T[m]=_[m*2+1]=M}f.tree=n(_);if(y.marker&&p>=u){y.marker.cluster=f.tree}if(y.marker){y.markerSel.positions=y.markerUnsel.positions=y.marker.positions=_}if(y.line&&_.length>1){l.extendFlat(y.line,s.linePositions(t,o,_))}if(y.text){l.extendFlat(y.text,{positions:_},s.textPosition(t,o,y.text,y.marker));l.extendFlat(y.textSel,{positions:_},s.textPosition(t,o,y.text,y.markerSel));l.extendFlat(y.textUnsel,{positions:_},s.textPosition(t,o,y.text,y.markerUnsel))}if(y.fill&&!h.fill2d)h.fill2d=true;if(y.marker&&!h.scatter2d)h.scatter2d=true;if(y.line&&!h.line2d)h.line2d=true;if(y.text&&!h.glText)h.glText=true;h.lineOptions.push(y.line);h.fillOptions.push(y.fill);h.markerOptions.push(y.marker);h.markerSelectedOptions.push(y.markerSel);h.markerUnselectedOptions.push(y.markerUnsel);h.textOptions.push(y.text);h.textSelectedOptions.push(y.textSel);h.textUnselectedOptions.push(y.textUnsel);h.selectBatch.push([]);h.unselectBatch.push([]);f.x=w;f.y=T;f.rawx=w;f.rawy=T;f.r=d;f.theta=g;f.positions=_;f._scene=h;f.index=h.count;h.count++}));return i(t,r,f)};e.exports.reglPrecompiled=f},48300:function(e,t,r){"use strict";var n=r(5386).fF;var a=r(5386).si;var i=r(1426).extendFlat;var o=r(82196);var s=r(9012);var l=o.line;e.exports={mode:o.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:o.text,texttemplate:a({editType:"plot"},{keys:["real","imag","text"]}),hovertext:o.hovertext,line:{color:l.color,width:l.width,dash:l.dash,backoff:l.backoff,shape:i({},l.shape,{values:["linear","spline"]}),smoothing:l.smoothing,editType:"calc"},connectgaps:o.connectgaps,marker:o.marker,cliponaxis:i({},o.cliponaxis,{dflt:false}),textposition:o.textposition,textfont:o.textfont,fill:i({},o.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:o.fillcolor,hoverinfo:i({},s.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:o.hoveron,hovertemplate:n(),selected:o.selected,unselected:o.unselected}},30621:function(e,t,r){"use strict";var n=r(92770);var a=r(50606).BADNUM;var i=r(36922);var o=r(75225);var s=r(66279);var l=r(47761).calcMarkerSize;e.exports=function e(t,r){var u=t._fullLayout;var f=r.subplot;var c=u[f].realaxis;var v=u[f].imaginaryaxis;var h=c.makeCalcdata(r,"real");var p=v.makeCalcdata(r,"imag");var d=r._length;var g=new Array(d);for(var y=0;y<d;y++){var m=h[y];var x=p[y];var b=g[y]={};if(n(m)&&n(x)){b.real=m;b.imag=x}else{b.real=a}}l(r,d);i(t,r);o(g,r);s(g,r);return g}},65269:function(e,t,r){"use strict";var n=r(71828);var a=r(34098);var i=r(49508);var o=r(11058);var s=r(94039);var l=r(82410);var u=r(28908);var f=r(47581).PTS_LINESONLY;var c=r(48300);e.exports=function e(t,r,h,p){function d(e,a){return n.coerce(t,r,c,e,a)}var g=v(t,r,p,d);if(!g){r.visible=false;return}d("mode",g<f?"lines+markers":"lines");d("text");d("hovertext");if(r.hoveron!=="fills")d("hovertemplate");if(a.hasLines(r)){o(t,r,h,p,d,{backoff:true});s(t,r,d);d("connectgaps")}if(a.hasMarkers(r)){i(t,r,h,p,d,{gradient:true})}if(a.hasText(r)){d("texttemplate");l(t,r,p,d)}var y=[];if(a.hasMarkers(r)||a.hasText(r)){d("cliponaxis");d("marker.maxdisplayed");y.push("points")}d("fill");if(r.fill!=="none"){u(t,r,h,d);if(!a.hasLines(r))s(t,r,d)}if(r.fill==="tonext"||r.fill==="toself"){y.push("fills")}d("hoveron",y.join("+")||"points");n.coerceSelectionMarkerOpacity(r,d)};function v(e,t,r,n){var a=n("real");var i=n("imag");var o;if(a&&i){o=Math.min(a.length,i.length)}t._length=o;return o}},62047:function(e,t,r){"use strict";var n=r(89298);e.exports=function e(t,r,a){var i={};var o=a[r.subplot]._subplot;i.realLabel=n.tickText(o.radialAxis,t.real,true).text;i.imagLabel=n.tickText(o.angularAxis,t.imag,true).text;return i}},11350:function(e,t,r){"use strict";var n=r(33720);function a(e,t,r,a){var o=n(e,t,r,a);if(!o||o[0].index===false)return;var s=o[0];if(s.index===undefined){return o}var l=e.subplot;var u=s.cd[s.index];var f=s.trace;if(!l.isPtInside(u))return;s.xLabelVal=undefined;s.yLabelVal=undefined;i(u,f,l,s);s.hovertemplate=f.hovertemplate;return o}function i(e,t,r,n){var a=r.radialAxis;var i=r.angularAxis;a._hovertitle="real";i._hovertitle="imag";var o={};o[t.subplot]={_subplot:r};var s=t._module.formatLabels(e,t,o);n.realLabel=s.realLabel;n.imagLabel=s.imagLabel;var l=e.hi||t.hoverinfo;var u=[];function f(e,t){u.push(e._hovertitle+": "+t)}if(!t.hovertemplate){var c=l.split("+");if(c.indexOf("all")!==-1)c=["real","imag","text"];if(c.indexOf("real")!==-1)f(a,n.realLabel);if(c.indexOf("imag")!==-1)f(i,n.imagLabel);if(c.indexOf("text")!==-1&&n.text){u.push(n.text);delete n.text}n.extraText=u.join("<br>")}}e.exports={hoverPoints:a,makeHoverPointText:i}},85956:function(e,t,r){"use strict";e.exports={moduleType:"trace",name:"scattersmith",basePlotModule:r(7504),categories:["smith","symbols","showLegend","scatter-like"],attributes:r(48300),supplyDefaults:r(65269),colorbar:r(4898),formatLabels:r(62047),calc:r(30621),plot:r(12480),style:r(16296).style,styleOnSelect:r(16296).styleOnSelect,hoverPoints:r(11350).hoverPoints,selectPoints:r(98002),meta:{}}},12480:function(e,t,r){"use strict";var n=r(32663);var a=r(50606).BADNUM;var i=r(23893);var o=i.smith;e.exports=function e(t,r,i){var s=r.layers.frontplot.select("g.scatterlayer");var l=r.xaxis;var u=r.yaxis;var f={xaxis:l,yaxis:u,plot:r.framework,layerClipId:r._hasClipOnAxisFalse?r.clipIds.forTraces:null};for(var c=0;c<i.length;c++){var v=i[c];for(var h=0;h<v.length;h++){if(h===0){v[0].trace._xA=l;v[0].trace._yA=u}var p=v[h];var d=p.real;if(d===a){p.x=p.y=a}else{var g=o([d,p.imag]);p.x=g[0];p.y=g[1]}}}n(t,f,i,s)}},50413:function(e,t,r){"use strict";var n=r(5386).fF;var a=r(5386).si;var i=r(82196);var o=r(9012);var s=r(50693);var l=r(79952).P;var u=r(1426).extendFlat;var f=i.marker;var c=i.line;var v=f.line;e.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:u({},i.mode,{dflt:"markers"}),text:u({},i.text,{}),texttemplate:a({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:u({},i.hovertext,{}),line:{color:c.color,width:c.width,dash:l,backoff:c.backoff,shape:u({},c.shape,{values:["linear","spline"]}),smoothing:c.smoothing,editType:"calc"},connectgaps:i.connectgaps,cliponaxis:i.cliponaxis,fill:u({},i.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:i.fillcolor,marker:u({symbol:f.symbol,opacity:f.opacity,angle:f.angle,angleref:f.angleref,standoff:f.standoff,maxdisplayed:f.maxdisplayed,size:f.size,sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,line:u({width:v.width,editType:"calc"},s("marker.line")),gradient:f.gradient,editType:"calc"},s("marker")),textfont:i.textfont,textposition:i.textposition,selected:i.selected,unselected:i.unselected,hoverinfo:u({},o.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:i.hoveron,hovertemplate:n()}},54337:function(e,t,r){"use strict";var n=r(92770);var a=r(36922);var i=r(75225);var o=r(66279);var s=r(47761).calcMarkerSize;var l=["a","b","c"];var u={a:["b","c"],b:["a","c"],c:["a","b"]};e.exports=function e(t,r){var f=t._fullLayout[r.subplot];var c=f.sum;var v=r.sum||c;var h={a:r.a,b:r.b,c:r.c};var p,d,g,y,m,x;for(p=0;p<l.length;p++){g=l[p];if(h[g])continue;m=h[u[g][0]];x=h[u[g][1]];y=new Array(m.length);for(d=0;d<m.length;d++){y[d]=v-m[d]-x[d]}h[g]=y}var b=r._length;var _=new Array(b);var w,T,k,A,M,S;for(p=0;p<b;p++){w=h.a[p];T=h.b[p];k=h.c[p];if(n(w)&&n(T)&&n(k)){w=+w;T=+T;k=+k;A=c/(w+T+k);if(A!==1){w*=A;T*=A;k*=A}S=w;M=k-T;_[p]={x:M,y:S,a:w,b:T,c:k}}else _[p]={x:false,y:false}}s(r,b);a(t,r);i(_,r);o(_,r);return _}},46008:function(e,t,r){"use strict";var n=r(71828);var a=r(47581);var i=r(34098);var o=r(49508);var s=r(11058);var l=r(94039);var u=r(82410);var f=r(28908);var c=r(50413);e.exports=function e(t,r,v,h){function p(e,a){return n.coerce(t,r,c,e,a)}var d=p("a");var g=p("b");var y=p("c");var m;if(d){m=d.length;if(g){m=Math.min(m,g.length);if(y)m=Math.min(m,y.length)}else if(y)m=Math.min(m,y.length);else m=0}else if(g&&y){m=Math.min(g.length,y.length)}if(!m){r.visible=false;return}r._length=m;p("sum");p("text");p("hovertext");if(r.hoveron!=="fills")p("hovertemplate");var x=m<a.PTS_LINESONLY?"lines+markers":"lines";p("mode",x);if(i.hasLines(r)){s(t,r,v,h,p,{backoff:true});l(t,r,p);p("connectgaps")}if(i.hasMarkers(r)){o(t,r,v,h,p,{gradient:true})}if(i.hasText(r)){p("texttemplate");u(t,r,h,p)}var b=[];if(i.hasMarkers(r)||i.hasText(r)){p("cliponaxis");p("marker.maxdisplayed");b.push("points")}p("fill");if(r.fill!=="none"){f(t,r,v,p);if(!i.hasLines(r))l(t,r,p)}if(r.fill==="tonext"||r.fill==="toself"){b.push("fills")}p("hoveron",b.join("+")||"points");n.coerceSelectionMarkerOpacity(r,p)}},4524:function(e){"use strict";e.exports=function e(t,r,n,a,i){if(r.xa)t.xaxis=r.xa;if(r.ya)t.yaxis=r.ya;if(a[i]){var o=a[i];t.a=o.a;t.b=o.b;t.c=o.c}else{t.a=r.a;t.b=r.b;t.c=r.c}return t}},93645:function(e,t,r){"use strict";var n=r(89298);e.exports=function e(t,r,a){var i={};var o=a[r.subplot]._subplot;i.aLabel=n.tickText(o.aaxis,t.a,true).text;i.bLabel=n.tickText(o.baxis,t.b,true).text;i.cLabel=n.tickText(o.caxis,t.c,true).text;return i}},47250:function(e,t,r){"use strict";var n=r(33720);e.exports=function e(t,r,a,i){var o=n(t,r,a,i);if(!o||o[0].index===false)return;var s=o[0];if(s.index===undefined){var l=1-s.y0/t.ya._length;var u=t.xa._length;var f=u*l/2;var c=u-f;s.x0=Math.max(Math.min(s.x0,c),f);s.x1=Math.max(Math.min(s.x1,c),f);return o}var v=s.cd[s.index];var h=s.trace;var p=s.subplot;s.a=v.a;s.b=v.b;s.c=v.c;s.xLabelVal=undefined;s.yLabelVal=undefined;var d={};d[h.subplot]={_subplot:p};var g=h._module.formatLabels(v,h,d);s.aLabel=g.aLabel;s.bLabel=g.bLabel;s.cLabel=g.cLabel;var y=v.hi||h.hoverinfo;var m=[];function x(e,t){m.push(e._hovertitle+": "+t)}if(!h.hovertemplate){var b=y.split("+");if(b.indexOf("all")!==-1)b=["a","b","c"];if(b.indexOf("a")!==-1)x(p.aaxis,s.aLabel);if(b.indexOf("b")!==-1)x(p.baxis,s.bLabel);if(b.indexOf("c")!==-1)x(p.caxis,s.cLabel)}s.extraText=m.join("<br>");s.hovertemplate=h.hovertemplate;return o}},52979:function(e,t,r){"use strict";e.exports={attributes:r(50413),supplyDefaults:r(46008),colorbar:r(4898),formatLabels:r(93645),calc:r(54337),plot:r(7507),style:r(16296).style,styleOnSelect:r(16296).styleOnSelect,hoverPoints:r(47250),selectPoints:r(98002),eventData:r(4524),moduleType:"trace",name:"scatterternary",basePlotModule:r(61639),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},7507:function(e,t,r){"use strict";var n=r(32663);e.exports=function e(t,r,a){var i=r.plotContainer;i.select(".scatterlayer").selectAll("*").remove();var o=r.xaxis;var s=r.yaxis;var l={xaxis:o,yaxis:s,plot:i,layerClipId:r._hasClipOnAxisFalse?r.clipIdRelative:null};var u=r.layers.frontplot.select("g.scatterlayer");for(var f=0;f<a.length;f++){var c=a[f];if(c.length){c[0].trace._xA=o;c[0].trace._yA=s}}n(t,l,a,u)}},46880:function(e,t,r){"use strict";var n=r(82196);var a=r(50693);var i=r(12663).axisHoverFormat;var o=r(5386).fF;var s=r(42341);var l=r(85555).idRegex;var u=r(44467).templatedArray;var f=r(1426).extendFlat;var c=n.marker;var v=c.line;var h=f(a("marker.line",{editTypeOverride:"calc"}),{width:f({},v.width,{editType:"calc"}),editType:"calc"});var p=f(a("marker"),{symbol:c.symbol,angle:c.angle,size:f({},c.size,{editType:"markerSize"}),sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,opacity:c.opacity,colorbar:c.colorbar,line:h,editType:"calc"});p.color.editType=p.cmin.editType=p.cmax.editType="style";function d(e){return{valType:"info_array",freeLength:true,editType:"calc",items:{valType:"subplotid",regex:l[e],editType:"plot"}}}e.exports={dimensions:u("dimension",{visible:{valType:"boolean",dflt:true,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:false,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:f({},s.text,{}),hovertext:f({},s.hovertext,{}),hovertemplate:o(),xhoverformat:i("x"),yhoverformat:i("y"),marker:p,xaxes:d("x"),yaxes:d("y"),diagonal:{visible:{valType:"boolean",dflt:true,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:true,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:true,editType:"calc"},selected:{marker:s.selected.marker,editType:"calc"},unselected:{marker:s.unselected.marker,editType:"calc"},opacity:s.opacity}},65017:function(e,t,r){"use strict";var n=r(73972);var a=r(83312);e.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:r(46880),supplyDefaults:r(25784),colorbar:r(4898),calc:r(87625),plot:r(79410),hoverPoints:r(8567).hoverPoints,selectPoints:r(8689),editStyle:r(28801),meta:{}};n.register(a)},16947:function(e,t,r){"use strict";var n=r(46075);var a=r(73972);var i=r(79749);var o=r(27659).a0;var s=r(93612);var l=r(41675).getFromId;var u=r(89298).shouldShowZeroLine;var f="splom";var c={};function v(e){var t=e._fullLayout;var r=a.getModule(f);var n=o(e.calcdata,r)[0];var s=i(e,["ANGLE_instanced_arrays","OES_element_index_uint"],c);if(!s)return;if(t._hasOnlyLargeSploms){d(e)}r.plot(e,{},n)}function h(e){var t=e.calcdata;var r=e._fullLayout;if(r._hasOnlyLargeSploms){d(e)}for(var n=0;n<t.length;n++){var a=t[n][0];var i=a.trace;var o=r._splomScenes[i.uid];if(i.type==="splom"&&o&&o.matrix){p(e,i,o)}}}function p(e,t,r){var n=r.matrixOptions.data.length;var a=t._visibleDims;var i=r.viewOpts.ranges=new Array(n);for(var o=0;o<a.length;o++){var s=a[o];var u=i[o]=new Array(4);var f=l(e,t._diag[s][0]);if(f){u[0]=f.r2l(f.range[0]);u[2]=f.r2l(f.range[1])}var c=l(e,t._diag[s][1]);if(c){u[1]=c.r2l(c.range[0]);u[3]=c.r2l(c.range[1])}}if(r.selectBatch.length||r.unselectBatch.length){r.matrix.update({ranges:i},{ranges:i})}else{r.matrix.update({ranges:i})}}function d(e){var t=e._fullLayout;var r=t._glcanvas.data()[0].regl;var a=t._splomGrid;if(!a){a=t._splomGrid=n(r)}a.update(g(e))}function g(e){var t=e._context.plotGlPixelRatio;var r=e._fullLayout;var n=r._size;var a=[0,0,r.width*t,r.height*t];var i={};var o;function s(e,r,n,o,s,l){n*=t;o*=t;s*=t;l*=t;var u=r[e+"color"];var f=r[e+"width"];var c=String(u+f);if(c in i){i[c].data.push(NaN,NaN,n,o,s,l)}else{i[c]={data:[n,o,s,l],join:"rect",thickness:f*t,color:u,viewport:a,range:a,overlay:false}}}for(o in r._splomSubplots){var l=r._plots[o];var f=l.xaxis;var c=l.yaxis;var v=f._gridVals;var h=c._gridVals;var p=f._offset;var d=f._length;var g=c._length;var y=n.b+c.domain[0]*n.h;var m=-c._m;var x=-m*c.r2l(c.range[0],c.calendar);var b,_;if(f.showgrid){for(o=0;o<v.length;o++){b=p+f.l2p(v[o].x);s("grid",f,b,y,b,y+g)}}if(c.showgrid){for(o=0;o<h.length;o++){_=y+x+m*h[o].x;s("grid",c,p,_,p+d,_)}}if(u(e,f,c)){b=p+f.l2p(0);s("zeroline",f,b,y,b,y+g)}if(u(e,c,f)){_=y+x+0;s("zeroline",c,p,_,p+d,_)}}var w=[];for(o in i){w.push(i[o])}return w}function y(e,t,r,n){var a={};var i;if(n._splomScenes){for(i=0;i<e.length;i++){var o=e[i];if(o.type==="splom"){a[o.uid]=1}}for(i=0;i<r.length;i++){var l=r[i];if(!a[l.uid]){var u=n._splomScenes[l.uid];if(u&&u.destroy)u.destroy();n._splomScenes[l.uid]=null;delete n._splomScenes[l.uid]}}}if(Object.keys(n._splomScenes||{}).length===0){delete n._splomScenes}if(n._splomGrid&&!t._hasOnlyLargeSploms&&n._hasOnlyLargeSploms){n._splomGrid.destroy();n._splomGrid=null;delete n._splomGrid}s.clean(e,t,r,n)}e.exports={name:f,attr:s.attr,attrRegex:s.attrRegex,layoutAttributes:s.layoutAttributes,supplyLayoutDefaults:s.supplyLayoutDefaults,drawFramework:s.drawFramework,plot:v,drag:h,updateGrid:d,clean:y,updateFx:s.updateFx,toSVG:s.toSVG,reglPrecompiled:c}},87625:function(e,t,r){"use strict";var n=r(71828);var a=r(41675);var i=r(47761).calcMarkerSize;var o=r(47761).calcAxisExpansion;var s=r(36922);var l=r(19635).markerSelection;var u=r(19635).markerStyle;var f=r(10164);var c=r(50606).BADNUM;var v=r(78232).TOO_MANY_POINTS;e.exports=function e(t,r){var h=r.dimensions;var p=r._length;var d={};var g=d.cdata=[];var y=d.data=[];var m=r._visibleDims=[];var x,b,_,w,T;function k(e,t){var a=e.makeCalcdata({v:t.values,vcalendar:r.calendar},"v");for(var i=0;i<a.length;i++){a[i]=a[i]===c?NaN:a[i]}g.push(a);y.push(e.type==="log"?n.simpleMap(a,e.c2l):a)}for(x=0;x<h.length;x++){_=h[x];if(_.visible){w=a.getFromId(t,r._diag[x][0]);T=a.getFromId(t,r._diag[x][1]);if(w&&T&&w.type!==T.type){n.log("Skipping splom dimension "+x+" with conflicting axis types");continue}if(w){k(w,_);if(T&&T.type==="category"){T._categories=w._categories.slice()}}else{k(T,_)}m.push(x)}}s(t,r);n.extendFlat(d,u(t,r));var A=g.length;var M=A*p>v;var S;if(M){S=d.sizeAvg||Math.max(d.size,3)}else{S=i(r,p)}for(b=0;b<m.length;b++){x=m[b];_=h[x];w=a.getFromId(t,r._diag[x][0])||{};T=a.getFromId(t,r._diag[x][1])||{};o(t,r,w,T,g[b],g[b],S)}var E=f(t,r);if(!E.matrix)E.matrix=true;E.matrixOptions=d;E.selectedOptions=l(t,r,r.selected);E.unselectedOptions=l(t,r,r.unselected);return[{x:false,y:false,t:{},trace:r}]}},25784:function(e,t,r){"use strict";var n=r(71828);var a=r(85501);var i=r(46880);var o=r(34098);var s=r(49508);var l=r(94397);var u=r(68645).isOpenSymbol;e.exports=function e(t,r,v,h){function p(e,a){return n.coerce(t,r,i,e,a)}var d=a(t,r,{name:"dimensions",handleItemDefaults:f});var g=p("diagonal.visible");var y=p("showupperhalf");var m=p("showlowerhalf");var x=l(r,d,"values");if(!x||!g&&!y&&!m){r.visible=false;return}p("text");p("hovertext");p("hovertemplate");p("xhoverformat");p("yhoverformat");s(t,r,v,h,p,{noAngleRef:true,noStandOff:true});var b=u(r.marker.symbol);var _=o.isBubble(r);p("marker.line.width",b||_?1:0);c(t,r,h,p);n.coerceSelectionMarkerOpacity(r,p)};function f(e,t){function r(r,a){return n.coerce(e,t,i.dimensions,r,a)}r("label");var a=r("values");if(!(a&&a.length))t.visible=false;else r("visible");r("axis.type");r("axis.matches")}function c(e,t,r,n){var a=t.dimensions;var i=a.length;var o=t.showupperhalf;var s=t.showlowerhalf;var l=t.diagonal.visible;var u,f;var c=new Array(i);var v=new Array(i);for(u=0;u<i;u++){var h=u?u+1:"";c[u]="x"+h;v[u]="y"+h}var p=n("xaxes",c);var d=n("yaxes",v);var g=t._diag=new Array(i);t._xaxes={};t._yaxes={};var y=[];var m=[];function x(e,n,a,i){if(!e)return;var o=e.charAt(0);var s=r._splomAxes[o];t["_"+o+"axes"][e]=1;i.push(e);if(!(e in s)){var l=s[e]={};if(a){l.label=a.label||"";if(a.visible&&a.axis){if(a.axis.type)l.type=a.axis.type;if(a.axis.matches)l.matches=n}}}}var b=!l&&!s;var _=!l&&!o;t._axesDim={};for(u=0;u<i;u++){var w=a[u];var T=u===0;var k=u===i-1;var A=T&&b||k&&_?undefined:p[u];var M=T&&_||k&&b?undefined:d[u];x(A,M,w,y);x(M,A,w,m);g[u]=[A,M];t._axesDim[A]=u;t._axesDim[M]=u}for(u=0;u<y.length;u++){for(f=0;f<m.length;f++){var S=y[u]+m[f];if(u>f&&o){r._splomSubplots[S]=1}else if(u<f&&s){r._splomSubplots[S]=1}else if(u===f&&(l||!s||!o)){r._splomSubplots[S]=1}}}if(!s||!l&&o&&s){r._splomGridDflt.xside="bottom";r._splomGridDflt.yside="left"}}},28801:function(e,t,r){"use strict";var n=r(71828);var a=r(36922);var i=r(19635).markerStyle;e.exports=function e(t,r){var o=r.trace;var s=t._fullLayout._splomScenes[o.uid];if(s){a(t,o);n.extendFlat(s.matrixOptions,i(t,o));var l=n.extendFlat({},s.matrixOptions,s.viewOpts);s.matrix.update(l,null)}}},35948:function(e,t){"use strict";t.getDimIndex=function e(t,r){var n=r._id;var a=n.charAt(0);var i={x:0,y:1}[a];var o=t._visibleDims;for(var s=0;s<o.length;s++){var l=o[s];if(t._diag[l][i]===n)return s}return false}},8567:function(e,t,r){"use strict";var n=r(35948);var a=r(20794).calcHover;function i(e,t,r){var i=e.cd;var o=i[0].trace;var s=e.scene;var l=s.matrixOptions.cdata;var u=e.xa;var f=e.ya;var c=u.c2p(t);var v=f.c2p(r);var h=e.distance;var p=n.getDimIndex(o,u);var d=n.getDimIndex(o,f);if(p===false||d===false)return[e];var g=l[p];var y=l[d];var m,x;var b=h;for(var _=0;_<g.length;_++){var w=g[_];var T=y[_];var k=u.c2p(w)-c;var A=f.c2p(T)-v;var M=Math.sqrt(k*k+A*A);if(M<b){b=x=M;m=_}}e.index=m;e.distance=b;e.dxy=x;if(m===undefined)return[e];return[a(e,g,y,o)]}e.exports={hoverPoints:i}},6419:function(e,t,r){"use strict";var n=r(65017);n.basePlotModule=r(16947),e.exports=n},79410:function(e,t,r){"use strict";var n=r(60487);var a=r(71828);var i=r(41675);var o=r(64505).selectMode;e.exports=function e(t,r,n){if(!n.length)return;for(var a=0;a<n.length;a++){s(t,n[a][0])}};function s(e,t){var r=e._fullLayout;var s=r._size;var l=t.trace;var u=t.t;var f=r._splomScenes[l.uid];var c=f.matrixOptions;var v=c.cdata;var h=r._glcanvas.data()[0].regl;var p=r.dragmode;var d,g;var y,m,x;if(v.length===0)return;c.lower=l.showupperhalf;c.upper=l.showlowerhalf;c.diagonal=l.diagonal.visible;var b=l._visibleDims;var _=v.length;var w=f.viewOpts={};w.ranges=new Array(_);w.domains=new Array(_);for(x=0;x<b.length;x++){y=b[x];var T=w.ranges[x]=new Array(4);var k=w.domains[x]=new Array(4);d=i.getFromId(e,l._diag[y][0]);if(d){T[0]=d._rl[0];T[2]=d._rl[1];k[0]=d.domain[0];k[2]=d.domain[1]}g=i.getFromId(e,l._diag[y][1]);if(g){T[1]=g._rl[0];T[3]=g._rl[1];k[1]=g.domain[0];k[3]=g.domain[1]}}var A=e._context.plotGlPixelRatio;var M=s.l*A;var S=s.b*A;var E=s.w*A;var L=s.h*A;w.viewport=[M,S,E+M,L+S];if(f.matrix===true){f.matrix=n(h)}var C=r.clickmode.indexOf("select")>-1;var I=o(p)||!!l.selectedpoints||C;var P=true;if(I){var O=l._length;if(l.selectedpoints){f.selectBatch=l.selectedpoints;var D=l.selectedpoints;var z={};for(y=0;y<D.length;y++){z[D[y]]=true}var R=[];for(y=0;y<O;y++){if(!z[y])R.push(y)}f.unselectBatch=R}var F=u.xpx=new Array(_);var B=u.ypx=new Array(_);for(x=0;x<b.length;x++){y=b[x];d=i.getFromId(e,l._diag[y][0]);if(d){F[x]=new Array(O);for(m=0;m<O;m++){F[x][m]=d.c2p(v[x][m])}}g=i.getFromId(e,l._diag[y][1]);if(g){B[x]=new Array(O);for(m=0;m<O;m++){B[x][m]=g.c2p(v[x][m])}}}if(f.selectBatch.length||f.unselectBatch.length){var N=a.extendFlat({},c,f.unselectedOptions,w);var j=a.extendFlat({},c,f.selectedOptions,w);f.matrix.update(N,j);P=false}}else{u.xpx=u.ypx=null}if(P){var U=a.extendFlat({},c,w);f.matrix.update(U,null)}}},10164:function(e,t,r){"use strict";var n=r(71828);e.exports=function e(t,r){var a=t._fullLayout;var i=r.uid;var o=a._splomScenes;if(!o)o=a._splomScenes={};var s={dirty:true,selectBatch:[],unselectBatch:[]};var l={matrix:false,selectBatch:[],unselectBatch:[]};var u=o[r.uid];if(!u){u=o[i]=n.extendFlat({},s,l);u.draw=function e(){if(u.matrix&&u.matrix.draw){if(u.selectBatch.length||u.unselectBatch.length){u.matrix.draw(u.unselectBatch,u.selectBatch)}else{u.matrix.draw()}}u.dirty=false};u.destroy=function e(){if(u.matrix&&u.matrix.destroy){u.matrix.destroy()}u.matrixOptions=null;u.selectBatch=null;u.unselectBatch=null;u=null}}if(!u.dirty){n.extendFlat(u,s)}return u}},8689:function(e,t,r){"use strict";var n=r(71828);var a=n.pushUnique;var i=r(34098);var o=r(35948);e.exports=function e(t,r){var s=t.cd;var l=s[0].trace;var u=s[0].t;var f=t.scene;var c=f.matrixOptions.cdata;var v=t.xaxis;var h=t.yaxis;var p=[];if(!f)return p;var d=!i.hasMarkers(l)&&!i.hasText(l);if(l.visible!==true||d)return p;var g=o.getDimIndex(l,v);var y=o.getDimIndex(l,h);if(g===false||y===false)return p;var m=u.xpx[g];var x=u.ypx[y];var b=c[g];var _=c[y];var w=(t.scene.selectBatch||[]).slice();var T=[];if(r!==false&&!r.degenerate){for(var k=0;k<b.length;k++){if(r.contains([m[k],x[k]],null,k,t)){p.push({pointNumber:k,x:b[k],y:_[k]});a(w,k)}else if(w.indexOf(k)!==-1){a(w,k)}else{T.push(k)}}}var A=f.matrixOptions;if(!w.length&&!T.length){f.matrix.update(A,null)}else if(!f.selectBatch.length&&!f.unselectBatch.length){f.matrix.update(f.unselectedOptions,n.extendFlat({},A,f.selectedOptions,f.viewOpts))}f.selectBatch=w;f.unselectBatch=T;return p}},21850:function(e,t,r){"use strict";var n=r(50693);var a=r(12663).axisHoverFormat;var i=r(5386).fF;var o=r(2418);var s=r(9012);var l=r(1426).extendFlat;var u={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:i({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:a("u",1),vhoverformat:a("v",1),whoverformat:a("w",1),xhoverformat:a("x"),yhoverformat:a("y"),zhoverformat:a("z"),showlegend:l({},s.showlegend,{dflt:false})};l(u,n("",{colorAttr:"u/v/w norm",showScaleDflt:true,editTypeOverride:"calc"}));var f=["opacity","lightposition","lighting"];f.forEach((function(e){u[e]=o[e]}));u.hoverinfo=l({},s.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"});u.transforms=undefined;e.exports=u},88489:function(e,t,r){"use strict";var n=r(71828);var a=r(78803);function i(e,t){t._len=Math.min(t.u.length,t.v.length,t.w.length,t.x.length,t.y.length,t.z.length);t._u=l(t.u,t._len);t._v=l(t.v,t._len);t._w=l(t.w,t._len);t._x=l(t.x,t._len);t._y=l(t.y,t._len);t._z=l(t.z,t._len);var r=o(t);t._gridFill=r.fill;t._Xs=r.Xs;t._Ys=r.Ys;t._Zs=r.Zs;t._len=r.len;var n=0;var i,s,u;if(t.starts){i=l(t.starts.x||[]);s=l(t.starts.y||[]);u=l(t.starts.z||[]);n=Math.min(i.length,s.length,u.length)}t._startsX=i||[];t._startsY=s||[];t._startsZ=u||[];var f=0;var c=Infinity;var v;for(v=0;v<t._len;v++){var h=t._u[v];var p=t._v[v];var d=t._w[v];var g=Math.sqrt(h*h+p*p+d*d);f=Math.max(f,g);c=Math.min(c,g)}a(e,t,{vals:[c,f],containerStr:"",cLetter:"c"});for(v=0;v<n;v++){var y=i[v];r.xMax=Math.max(r.xMax,y);r.xMin=Math.min(r.xMin,y);var m=s[v];r.yMax=Math.max(r.yMax,m);r.yMin=Math.min(r.yMin,m);var x=u[v];r.zMax=Math.max(r.zMax,x);r.zMin=Math.min(r.zMin,x)}t._slen=n;t._normMax=f;t._xbnds=[r.xMin,r.xMax];t._ybnds=[r.yMin,r.yMax];t._zbnds=[r.zMin,r.zMax]}function o(e){var t=e._x;var r=e._y;var a=e._z;var i=e._len;var o,l,u;var f=-Infinity;var c=Infinity;var v=-Infinity;var h=Infinity;var p=-Infinity;var d=Infinity;var g="";var y;var m;var x;var b,_;var w,T;var k,A;if(i){b=t[0];w=r[0];k=a[0]}if(i>1){_=t[i-1];T=r[i-1];A=a[i-1]}for(o=0;o<i;o++){f=Math.max(f,t[o]);c=Math.min(c,t[o]);v=Math.max(v,r[o]);h=Math.min(h,r[o]);p=Math.max(p,a[o]);d=Math.min(d,a[o]);if(!y&&t[o]!==b){y=true;g+="x"}if(!m&&r[o]!==w){m=true;g+="y"}if(!x&&a[o]!==k){x=true;g+="z"}}if(!y)g+="x";if(!m)g+="y";if(!x)g+="z";var M=s(e._x);var S=s(e._y);var E=s(e._z);g=g.replace("x",(b>_?"-":"+")+"x");g=g.replace("y",(w>T?"-":"+")+"y");g=g.replace("z",(k>A?"-":"+")+"z");var L=function(){i=0;M=[];S=[];E=[]};if(!i||i<M.length*S.length*E.length)L();var C=function(e){return e==="x"?t:e==="y"?r:a};var I=function(e){return e==="x"?M:e==="y"?S:E};var P=function(e){return e[i-1]<e[0]?-1:1};var O=C(g[1]);var D=C(g[3]);var z=C(g[5]);var R=I(g[1]).length;var F=I(g[3]).length;var B=I(g[5]).length;var N=false;var j=function(e,t,r){return R*(F*e+t)+r};var U=P(C(g[1]));var V=P(C(g[3]));var H=P(C(g[5]));for(o=0;o<B-1;o++){for(l=0;l<F-1;l++){for(u=0;u<R-1;u++){var q=j(o,l,u);var G=j(o,l,u+1);var Z=j(o,l+1,u);var Y=j(o+1,l,u);if(!(O[q]*U<O[G]*U)||!(D[q]*V<D[Z]*V)||!(z[q]*H<z[Y]*H)){N=true}if(N)break}if(N)break}if(N)break}if(N){n.warn("Encountered arbitrary coordinates! Unable to input data grid.");L()}return{xMin:c,yMin:h,zMin:d,xMax:f,yMax:v,zMax:p,Xs:M,Ys:S,Zs:E,len:i,fill:g}}function s(e){return n.distinctVals(e).vals}function l(e,t){if(t===undefined)t=e.length;if(n.isTypedArray(e))return e.subarray(0,t);var r=[];for(var a=0;a<t;a++){r[a]=+e[a]}return r}e.exports={calc:i,filter:l,processGrid:o}},90154:function(e,t,r){"use strict";var n=r(9330).gl_streamtube3d;var a=n.createTubeMesh;var i=r(71828);var o=r(81697).parseColorScale;var s=r(21081).extractOpts;var l=r(90060);var u={xaxis:0,yaxis:1,zaxis:2};function f(e,t){this.scene=e;this.uid=t;this.mesh=null;this.data=null}var c=f.prototype;c.handlePick=function(e){var t=this.scene.fullSceneLayout;var r=this.scene.dataScale;function n(e,n){var a=t[n];var i=r[u[n]];return a.l2c(e)/i}if(e.object===this.mesh){var a=e.data.position;var i=e.data.velocity;e.traceCoordinate=[n(a[0],"xaxis"),n(a[1],"yaxis"),n(a[2],"zaxis"),n(i[0],"xaxis"),n(i[1],"yaxis"),n(i[2],"zaxis"),e.data.intensity*this.data._normMax,e.data.divergence];e.textLabel=this.data.hovertext||this.data.text;return true}};function v(e){var t=e.length;var r;if(t>2){r=e.slice(1,t-1)}else if(t===2){r=[(e[0]+e[1])/2]}else{r=e}return r}function h(e){var t=e.length;if(t===1){return[.5,.5]}else{return[e[1]-e[0],e[t-1]-e[t-2]]}}function p(e,t){var r=e.fullSceneLayout;var a=e.dataScale;var f=t._len;var c={};function p(e,t){var n=r[t];var o=a[u[t]];return i.simpleMap(e,(function(e){return n.d2l(e)*o}))}c.vectors=l(p(t._u,"xaxis"),p(t._v,"yaxis"),p(t._w,"zaxis"),f);if(!f){return{positions:[],cells:[]}}var d=p(t._Xs,"xaxis");var g=p(t._Ys,"yaxis");var y=p(t._Zs,"zaxis");c.meshgrid=[d,g,y];c.gridFill=t._gridFill;var m=t._slen;if(m){c.startingPositions=l(p(t._startsX,"xaxis"),p(t._startsY,"yaxis"),p(t._startsZ,"zaxis"))}else{var x=g[0];var b=v(d);var _=v(y);var w=new Array(b.length*_.length);var T=0;for(var k=0;k<b.length;k++){for(var A=0;A<_.length;A++){w[T++]=[b[k],x,_[A]]}}c.startingPositions=w}c.colormap=o(t);c.tubeSize=t.sizeref;c.maxLength=t.maxdisplayed;var M=p(t._xbnds,"xaxis");var S=p(t._ybnds,"yaxis");var E=p(t._zbnds,"zaxis");var L=h(d);var C=h(g);var I=h(y);var P=[[M[0]-L[0],S[0]-C[0],E[0]-I[0]],[M[1]+L[1],S[1]+C[1],E[1]+I[1]]];var O=n(c,P);var D=s(t);O.vertexIntensityBounds=[D.min/t._normMax,D.max/t._normMax];var z=t.lightposition;O.lightPosition=[z.x,z.y,z.z];O.ambient=t.lighting.ambient;O.diffuse=t.lighting.diffuse;O.specular=t.lighting.specular;O.roughness=t.lighting.roughness;O.fresnel=t.lighting.fresnel;O.opacity=t.opacity;t._pad=O.tubeScale*t.sizeref*2;return O}c.update=function(e){this.data=e;var t=p(this.scene,e);this.mesh.update(t)};c.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};function d(e,t){var r=e.glplot.gl;var n=p(e,t);var i=a(r,n);var o=new f(e,t.uid);o.mesh=i;o.data=t;i._trace=o;e.glplot.add(i);return o}e.exports=d},22459:function(e,t,r){"use strict";var n=r(71828);var a=r(1586);var i=r(21850);e.exports=function e(t,r,o,s){function l(e,a){return n.coerce(t,r,i,e,a)}var u=l("u");var f=l("v");var c=l("w");var v=l("x");var h=l("y");var p=l("z");if(!u||!u.length||!f||!f.length||!c||!c.length||!v||!v.length||!h||!h.length||!p||!p.length){r.visible=false;return}l("starts.x");l("starts.y");l("starts.z");l("maxdisplayed");l("sizeref");l("lighting.ambient");l("lighting.diffuse");l("lighting.specular");l("lighting.roughness");l("lighting.fresnel");l("lightposition.x");l("lightposition.y");l("lightposition.z");a(t,r,s,l,{prefix:"",cLetter:"c"});l("text");l("hovertext");l("hovertemplate");l("uhoverformat");l("vhoverformat");l("whoverformat");l("xhoverformat");l("yhoverformat");l("zhoverformat");r._length=null}},61510:function(e,t,r){"use strict";e.exports={moduleType:"trace",name:"streamtube",basePlotModule:r(58547),categories:["gl3d","showLegend"],attributes:r(21850),supplyDefaults:r(22459),colorbar:{min:"cmin",max:"cmax"},calc:r(88489).calc,plot:r(90154),eventData:function(e,t){e.tubex=e.x;e.tubey=e.y;e.tubez=e.z;e.tubeu=t.traceCoordinate[3];e.tubev=t.traceCoordinate[4];e.tubew=t.traceCoordinate[5];e.norm=t.traceCoordinate[6];e.divergence=t.traceCoordinate[7];delete e.x;delete e.y;delete e.z;return e},meta:{}}},57564:function(e,t,r){"use strict";var n=r(9012);var a=r(5386).fF;var i=r(5386).si;var o=r(50693);var s=r(27670).Y;var l=r(34e3);var u=r(7055);var f=r(1426).extendFlat;var c=r(79952).u;e.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:true},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:f({colors:{valType:"data_array",editType:"calc"},line:{color:f({},l.marker.line.color,{dflt:null}),width:f({},l.marker.line.width,{dflt:1}),editType:"calc"},pattern:c,editType:"calc"},o("marker",{colorAttr:"colors",anim:false})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:l.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:i({editType:"plot"},{keys:u.eventDataKeys.concat(["label","value"])}),hovertext:l.hovertext,hoverinfo:f({},n.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:a({},{keys:u.eventDataKeys}),textfont:l.textfont,insidetextorientation:l.insidetextorientation,insidetextfont:l.insidetextfont,outsidetextfont:f({},l.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:l.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:s({name:"sunburst",trace:true,editType:"calc"})}},66888:function(e,t,r){"use strict";var n=r(74875);t.name="sunburst";t.plot=function(e,r,a,i){n.plotBasePlot(t.name,e,r,a,i)};t.clean=function(e,r,a,i){n.cleanBasePlot(t.name,e,r,a,i)}},52147:function(e,t,r){"use strict";var n=r(674);var a=r(92770);var i=r(71828);var o=r(21081).makeColorScaleFuncFromTrace;var s=r(32354).makePullColorFn;var l=r(32354).generateExtendedColors;var u=r(21081).calc;var f=r(50606).ALMOST_EQUAL;var c={};var v={};var h={};t.calc=function(e,t){var r=e._fullLayout;var l=t.ids;var c=i.isArrayOrTypedArray(l);var v=t.labels;var h=t.parents;var d=t.values;var g=i.isArrayOrTypedArray(d);var y=[];var m={};var x={};var b=function(e,t){if(m[e])m[e].push(t);else m[e]=[t];x[t]=1};var _=function(e){return e||typeof e==="number"};var w=function(e){return!g||a(d[e])&&d[e]>=0};var T;var k;var A;if(c){T=Math.min(l.length,h.length);k=function(e){return _(l[e])&&w(e)};A=function(e){return String(l[e])}}else{T=Math.min(v.length,h.length);k=function(e){return _(v[e])&&w(e)};A=function(e){return String(v[e])}}if(g)T=Math.min(T,d.length);for(var M=0;M<T;M++){if(k(M)){var S=A(M);var E=_(h[M])?String(h[M]):"";var L={i:M,id:S,pid:E,label:_(v[M])?String(v[M]):""};if(g)L.v=+d[M];y.push(L);b(E,S)}}if(!m[""]){var C=[];var I;for(I in m){if(!x[I]){C.push(I)}}if(C.length===1){I=C[0];y.unshift({hasImpliedRoot:true,id:I,pid:"",label:I})}else{return i.warn(["Multiple implied roots, cannot build",t.type,"hierarchy of",t.name+".","These roots include:",C.join(", ")].join(" "))}}else if(m[""].length>1){var P=i.randstr();for(var O=0;O<y.length;O++){if(y[O].pid===""){y[O].pid=P}}y.unshift({hasMultipleRoots:true,id:P,pid:"",label:""})}var D;try{D=n.stratify().id((function(e){return e.id})).parentId((function(e){return e.pid}))(y)}catch(U){return i.warn(["Failed to build",t.type,"hierarchy of",t.name+".","Error:",U.message].join(" "))}var z=n.hierarchy(D);var R=false;if(g){switch(t.branchvalues){case"remainder":z.sum((function(e){return e.data.v}));break;case"total":z.each((function(e){var r=e.data.data;var n=r.v;if(e.children){var a=e.children.reduce((function(e,t){return e+t.data.data.v}),0);if(r.hasImpliedRoot||r.hasMultipleRoots){n=a}if(n<a*f){R=true;return i.warn(["Total value for node",e.data.data.id,"of",t.name,"is smaller than the sum of its children.","\nparent value =",n,"\nchildren sum =",a].join(" "))}}e.value=n}));break}}else{p(z,t,{branches:t.count.indexOf("branches")!==-1,leaves:t.count.indexOf("leaves")!==-1})}if(R)return;if(t.sort){z.sort((function(e,t){return t.value-e.value}))}var F;var B;var N=t.marker.colors||[];var j=!!N.length;if(t._hasColorscale){if(!j){N=g?t.values:t._values}u(e,t,{vals:N,containerStr:"marker",cLetter:"c"});B=o(t.marker)}else{F=s(r["_"+t.type+"colormap"])}z.each((function(e){var r=e.data.data;r.color=t._hasColorscale?B(N[r.i]):F(N[r.i],r.id)}));y[0].hierarchy=z;return y};t._runCrossTraceCalc=function(e,t){var r=t._fullLayout;var n=t.calcdata;var a=r[e+"colorway"];var i=r["_"+e+"colormap"];if(r["extend"+e+"colors"]){a=l(a,e==="icicle"?h:e==="treemap"?v:c)}var o=0;var s;function u(e){var t=e.data.data;var r=t.id;if(t.color===false){if(i[r]){t.color=i[r]}else if(e.parent){if(e.parent.parent){t.color=e.parent.data.data.color}else{i[r]=t.color=a[o%a.length];o++}}else{t.color=s}}}for(var f=0;f<n.length;f++){var p=n[f];var d=p[0];if(d.trace.type===e&&d.hierarchy){s=d.trace.root.color;d.hierarchy.each(u)}}};t.crossTraceCalc=function(e){return t._runCrossTraceCalc("sunburst",e)};function p(e,t,r){var n=0;var a=e.children;if(a){var i=a.length;for(var o=0;o<i;o++){n+=p(a[o],t,r)}if(r.branches)n++}else{if(r.leaves)n++}e.value=e.data.data.value=n;if(!t._values)t._values=[];t._values[e.data.data.i]=n;return n}},7055:function(e){"use strict";e.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},17094:function(e,t,r){"use strict";var n=r(71828);var a=r(57564);var i=r(27670).c;var o=r(90769).handleText;var s=r(37434).handleMarkerDefaults;var l=r(21081);var u=l.hasColorscale;var f=l.handleDefaults;e.exports=function e(t,r,l,c){function v(e,i){return n.coerce(t,r,a,e,i)}var h=v("labels");var p=v("parents");if(!h||!h.length||!p||!p.length){r.visible=false;return}var d=v("values");if(d&&d.length){v("branchvalues")}else{v("count")}v("level");v("maxdepth");s(t,r,c,v);var g=r._hasColorscale=u(t,"marker","colors")||(t.marker||{}).coloraxis;if(g){f(t,r,c,v,{prefix:"marker.",cLetter:"c"})}v("leaf.opacity",g?1:.7);var y=v("text");v("texttemplate");if(!r.texttemplate)v("textinfo",Array.isArray(y)?"text+label":"label");v("hovertext");v("hovertemplate");var m="auto";o(t,r,c,v,m,{moduleHasSelected:false,moduleHasUnselected:false,moduleHasConstrain:false,moduleHasCliponaxis:false,moduleHasTextangle:false,moduleHasInsideanchor:false});v("insidetextorientation");v("sort");v("rotation");v("root.color");i(r,c,v);r._length=null}},43467:function(e,t,r){"use strict";var n=r(91424);var a=r(7901);e.exports=function e(t,r,i,o,s){var l=r.data.data;var u=l.i;var f=s||l.color;if(u>=0){r.i=l.i;var c=i.marker;if(c.pattern){if(!c.colors||!c.pattern.shape){c.color=f;r.color=f}}else{c.color=f;r.color=f}n.pointStyle(t,i,o,r)}else{a.fill(t,f)}}},83523:function(e,t,r){"use strict";var n=r(39898);var a=r(73972);var i=r(23469).appendArrayPointValue;var o=r(30211);var s=r(71828);var l=r(11086);var u=r(2791);var f=r(53581);var c=f.formatPieValue;e.exports=function e(t,r,i,f,h){var p=f[0];var d=p.trace;var g=p.hierarchy;var y=d.type==="sunburst";var m=d.type==="treemap"||d.type==="icicle";if(!("_hasHoverLabel"in d))d._hasHoverLabel=false;if(!("_hasHoverEvent"in d))d._hasHoverEvent=false;var x=function(e){var a=i._fullLayout;if(i._dragging||a.hovermode===false)return;var l=i._fullData[d.index];var f=e.data.data;var x=f.i;var b=u.isHierarchyRoot(e);var _=u.getParent(g,e);var w=u.getValue(e);var T=function(e){return s.castOption(l,x,e)};var k=T("hovertemplate");var A=o.castHoverinfo(l,a,x);var M=a.separators;var S;if(k||A&&A!=="none"&&A!=="skip"){var E;var L;if(y){E=p.cx+e.pxmid[0]*(1-e.rInscribed);L=p.cy+e.pxmid[1]*(1-e.rInscribed)}if(m){E=e._hoverX;L=e._hoverY}var C={};var I=[];var P=[];var O=function(e){return I.indexOf(e)!==-1};if(A){I=A==="all"?l._module.attributes.hoverinfo.flags:A.split("+")}C.label=f.label;if(O("label")&&C.label)P.push(C.label);if(f.hasOwnProperty("v")){C.value=f.v;C.valueLabel=c(C.value,M);if(O("value"))P.push(C.valueLabel)}C.currentPath=e.currentPath=u.getPath(e.data);if(O("current path")&&!b){P.push(C.currentPath)}var D;var z=[];var R=function(){if(z.indexOf(D)===-1){P.push(D);z.push(D)}};C.percentParent=e.percentParent=w/u.getValue(_);C.parent=e.parentString=u.getPtLabel(_);if(O("percent parent")){D=u.formatPercent(C.percentParent,M)+" of "+C.parent;R()}C.percentEntry=e.percentEntry=w/u.getValue(r);C.entry=e.entry=u.getPtLabel(r);if(O("percent entry")&&!b&&!e.onPathbar){D=u.formatPercent(C.percentEntry,M)+" of "+C.entry;R()}C.percentRoot=e.percentRoot=w/u.getValue(g);C.root=e.root=u.getPtLabel(g);if(O("percent root")&&!b){D=u.formatPercent(C.percentRoot,M)+" of "+C.root;R()}C.text=T("hovertext")||T("text");if(O("text")){D=C.text;if(s.isValidTextValue(D))P.push(D)}S=[v(e,l,h.eventDataKeys)];var F={trace:l,y:L,_x0:e._x0,_x1:e._x1,_y0:e._y0,_y1:e._y1,text:P.join("<br>"),name:k||O("name")?l.name:undefined,color:T("hoverlabel.bgcolor")||f.color,borderColor:T("hoverlabel.bordercolor"),fontFamily:T("hoverlabel.font.family"),fontSize:T("hoverlabel.font.size"),fontColor:T("hoverlabel.font.color"),nameLength:T("hoverlabel.namelength"),textAlign:T("hoverlabel.align"),hovertemplate:k,hovertemplateLabels:C,eventData:S};if(y){F.x0=E-e.rInscribed*e.rpx1;F.x1=E+e.rInscribed*e.rpx1;F.idealAlign=e.pxmid[0]<0?"left":"right"}if(m){F.x=E;F.idealAlign=E<0?"left":"right"}var B=[];o.loneHover(F,{container:a._hoverlayer.node(),outerContainer:a._paper.node(),gd:i,inOut_bbox:B});S[0].bbox=B[0];d._hasHoverLabel=true}if(m){var N=t.select("path.surface");h.styleOne(N,e,l,i,{hovered:true})}d._hasHoverEvent=true;i.emit("plotly_hover",{points:S||[v(e,l,h.eventDataKeys)],event:n.event})};var b=function(e){var r=i._fullLayout;var a=i._fullData[d.index];var s=n.select(this).datum();if(d._hasHoverEvent){e.originalEvent=n.event;i.emit("plotly_unhover",{points:[v(s,a,h.eventDataKeys)],event:n.event});d._hasHoverEvent=false}if(d._hasHoverLabel){o.loneUnhover(r._hoverlayer.node());d._hasHoverLabel=false}if(m){var l=t.select("path.surface");h.styleOne(l,s,a,i,{hovered:false})}};var _=function(e){var t=i._fullLayout;var r=i._fullData[d.index];var s=y&&(u.isHierarchyRoot(e)||u.isLeaf(e));var f=u.getPtId(e);var c=u.isEntry(e)?u.findEntryWithChild(g,f):u.findEntryWithLevel(g,f);var p=u.getPtId(c);var m={points:[v(e,r,h.eventDataKeys)],event:n.event};if(!s)m.nextLevel=p;var x=l.triggerHandler(i,"plotly_"+d.type+"click",m);if(x!==false&&t.hovermode){i._hoverdata=[v(e,r,h.eventDataKeys)];o.click(i,n.event)}if(s)return;if(x===false)return;if(i._dragging)return;if(i._transitioning)return;a.call("_storeDirectGUIEdit",r,t._tracePreGUI[r.uid],{level:r.level});var b={data:[{level:p}],traces:[d.index]};var _={frame:{redraw:false,duration:h.transitionTime},transition:{duration:h.transitionTime,easing:h.transitionEasing},mode:"immediate",fromcurrent:true};o.loneUnhover(t._hoverlayer.node());a.call("animate",i,b,_)};t.on("mouseover",x);t.on("mouseout",b);t.on("click",_)};function v(e,t,r){var n=e.data.data;var a={curveNumber:t.index,pointNumber:n.i,data:t._input,fullData:t};for(var o=0;o<r.length;o++){var s=r[o];if(s in e)a[s]=e[s]}if("parentString"in e&&!u.isHierarchyRoot(e))a.parent=e.parentString;i(a,t,n.i);return a}},2791:function(e,t,r){"use strict";var n=r(71828);var a=r(7901);var i=r(6964);var o=r(53581);t.findEntryWithLevel=function(e,r){var n;if(r){e.eachAfter((function(e){if(t.getPtId(e)===r){return n=e.copy()}}))}return n||e};t.findEntryWithChild=function(e,r){var n;e.eachAfter((function(e){var a=e.children||[];for(var i=0;i<a.length;i++){var o=a[i];if(t.getPtId(o)===r){return n=e.copy()}}}));return n||e};t.isEntry=function(e){return!e.parent};t.isLeaf=function(e){return!e.children};t.getPtId=function(e){return e.data.data.id};t.getPtLabel=function(e){return e.data.data.label};t.getValue=function(e){return e.value};t.isHierarchyRoot=function(e){return u(e)===""};t.setSliceCursor=function(e,r,n){var a=n.isTransitioning;if(!a){var o=e.datum();a=n.hideOnRoot&&t.isHierarchyRoot(o)||n.hideOnLeaves&&t.isLeaf(o)}i(e,a?null:"pointer")};function s(e,r,n){return{color:t.getOutsideTextFontKey("color",e,r,n),family:t.getOutsideTextFontKey("family",e,r,n),size:t.getOutsideTextFontKey("size",e,r,n)}}function l(e,r,i,o){var s=(o||{}).onPathbar;var l=r.data.data;var u=l.i;var f=n.castOption(e,u,(s?"pathbar.textfont":"insidetextfont")+".color");if(!f&&e._input.textfont){f=n.castOption(e._input,u,"textfont.color")}return{color:f||a.contrast(l.color),family:t.getInsideTextFontKey("family",e,r,i,o),size:t.getInsideTextFontKey("size",e,r,i,o)}}t.getInsideTextFontKey=function(e,t,r,a,i){var o=(i||{}).onPathbar;var s=o?"pathbar.textfont":"insidetextfont";var l=r.data.data.i;return n.castOption(t,l,s+"."+e)||n.castOption(t,l,"textfont."+e)||a.size};t.getOutsideTextFontKey=function(e,t,r,a){var i=r.data.data.i;return n.castOption(t,i,"outsidetextfont."+e)||n.castOption(t,i,"textfont."+e)||a.size};t.isOutsideText=function(e,r){return!e._hasColorscale&&t.isHierarchyRoot(r)};t.determineTextFont=function(e,r,n,a){return t.isOutsideText(e,r)?s(e,r,n):l(e,r,n,a)};t.hasTransition=function(e){return!!(e&&e.duration>0)};t.getMaxDepth=function(e){return e.maxdepth>=0?e.maxdepth:Infinity};t.isHeader=function(e,r){return!(t.isLeaf(e)||e.depth===r._maxDepth-1)};function u(e){return e.data.data.pid}t.getParent=function(e,r){return t.findEntryWithLevel(e,u(r))};t.listPath=function(e,r){var n=e.parent;if(!n)return[];var a=r?[n.data[r]]:[n];return t.listPath(n,r).concat(a)};t.getPath=function(e){return t.listPath(e,"label").join("/")+"/"};t.formatValue=o.formatPieValue;t.formatPercent=function(e,t){var r=n.formatPercent(e,0);if(r==="0%")r=o.formatPiePercent(e,t);return r}},87619:function(e,t,r){"use strict";e.exports={moduleType:"trace",name:"sunburst",basePlotModule:r(66888),categories:[],animatable:true,attributes:r(57564),layoutAttributes:r(2654),supplyDefaults:r(17094),supplyLayoutDefaults:r(57034),calc:r(52147).calc,crossTraceCalc:r(52147).crossTraceCalc,plot:r(24714).plot,style:r(29969).style,colorbar:r(4898),meta:{}}},2654:function(e){"use strict";e.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:true,editType:"calc"}}},57034:function(e,t,r){"use strict";var n=r(71828);var a=r(2654);e.exports=function e(t,r){function i(e,i){return n.coerce(t,r,a,e,i)}i("sunburstcolorway",r.colorway);i("extendsunburstcolors")}},24714:function(e,t,r){"use strict";var n=r(39898);var a=r(674);var i=r(81684).sX;var o=r(91424);var s=r(71828);var l=r(63893);var u=r(72597);var f=u.recordMinTextSize;var c=u.clearMinTextSize;var v=r(14575);var h=r(53581).getRotationAngle;var p=v.computeTransform;var d=v.transformInsideText;var g=r(29969).styleOne;var y=r(16688).resizeText;var m=r(83523);var x=r(7055);var b=r(2791);t.plot=function(e,t,r,a){var i=e._fullLayout;var o=i._sunburstlayer;var s,l;var u=!r;var f=!i.uniformtext.mode&&b.hasTransition(r);c("sunburst",i);s=o.selectAll("g.trace.sunburst").data(t,(function(e){return e[0].trace.uid}));s.enter().append("g").classed("trace",true).classed("sunburst",true).attr("stroke-linejoin","round");s.order();if(f){if(a){l=a()}var v=n.transition().duration(r.duration).ease(r.easing).each("end",(function(){l&&l()})).each("interrupt",(function(){l&&l()}));v.each((function(){o.selectAll("g.trace").each((function(t){_(e,t,this,r)}))}))}else{s.each((function(t){_(e,t,this,r)}));if(i.uniformtext.mode){y(e,i._sunburstlayer.selectAll(".trace"),"sunburst")}}if(u){s.exit().remove()}};function _(e,r,a,u){var c=e._context.staticPlot;var v=e._fullLayout;var y=!v.uniformtext.mode&&b.hasTransition(u);var _=n.select(a);var A=_.selectAll("g.slice");var M=r[0];var S=M.trace;var E=M.hierarchy;var L=b.findEntryWithLevel(E,S.level);var C=b.getMaxDepth(S);var I=v._size;var P=S.domain;var O=I.w*(P.x[1]-P.x[0]);var D=I.h*(P.y[1]-P.y[0]);var z=.5*Math.min(O,D);var R=M.cx=I.l+I.w*(P.x[1]+P.x[0])/2;var F=M.cy=I.t+I.h*(1-P.y[0])-D/2;if(!L){return A.remove()}var B=null;var N={};if(y){A.each((function(e){N[b.getPtId(e)]={rpx0:e.rpx0,rpx1:e.rpx1,x0:e.x0,x1:e.x1,transform:e.transform};if(!B&&b.isEntry(e)){B=e}}))}var j=w(L).descendants();var U=L.height+1;var V=0;var H=C;if(M.hasMultipleRoots&&b.isHierarchyRoot(L)){j=j.slice(1);U-=1;V=1;H+=1}j=j.filter((function(e){return e.y1<=H}));var q=h(S.rotation);if(q){j.forEach((function(e){e.x0+=q;e.x1+=q}))}var G=Math.min(U,C);var Z=function(e){return(e-V)/G*z};var Y=function(e,t){return[e*Math.cos(t),-e*Math.sin(t)]};var W=function(e){return s.pathAnnulus(e.rpx0,e.rpx1,e.x0,e.x1,R,F)};var X=function(e){return R+k(e)[0]*(e.transform.rCenter||0)+(e.transform.x||0)};var J=function(e){return F+k(e)[1]*(e.transform.rCenter||0)+(e.transform.y||0)};A=A.data(j,b.getPtId);A.enter().append("g").classed("slice",true);if(y){A.exit().transition().each((function(){var e=n.select(this);var t=e.select("path.surface");t.transition().attrTween("d",(function(e){var t=ee(e);return function(e){return W(t(e))}}));var r=e.select("g.slicetext");r.attr("opacity",0)})).remove()}else{A.exit().remove()}A.order();var K=null;if(y&&B){var $=b.getPtId(B);A.each((function(e){if(K===null&&b.getPtId(e)===$){K=e.x1}}))}var Q=A;if(y){Q=Q.transition().each("end",(function(){var t=n.select(this);b.setSliceCursor(t,e,{hideOnRoot:true,hideOnLeaves:true,isTransitioning:false})}))}Q.each((function(a){var i=n.select(this);var u=s.ensureSingle(i,"path","surface",(function(e){e.style("pointer-events",c?"none":"all")}));a.rpx0=Z(a.y0);a.rpx1=Z(a.y1);a.xmid=(a.x0+a.x1)/2;a.pxmid=Y(a.rpx1,a.xmid);a.midangle=-(a.xmid-Math.PI/2);a.startangle=-(a.x0-Math.PI/2);a.stopangle=-(a.x1-Math.PI/2);a.halfangle=.5*Math.min(s.angleDelta(a.x0,a.x1)||Math.PI,Math.PI);a.ring=1-a.rpx0/a.rpx1;a.rInscribed=T(a,S);if(y){u.transition().attrTween("d",(function(e){var t=te(e);return function(e){return W(t(e))}}))}else{u.attr("d",W)}i.call(m,L,e,r,{eventDataKeys:x.eventDataKeys,transitionTime:x.CLICK_TRANSITION_TIME,transitionEasing:x.CLICK_TRANSITION_EASING}).call(b.setSliceCursor,e,{hideOnRoot:true,hideOnLeaves:true,isTransitioning:e._transitioning});u.call(g,a,S,e);var h=s.ensureSingle(i,"g","slicetext");var _=s.ensureSingle(h,"text","",(function(e){e.attr("data-notex",1)}));var w=s.ensureUniformFontSize(e,b.determineTextFont(S,a,v.font));_.text(t.formatSliceLabel(a,L,S,r,v)).classed("slicetext",true).attr("text-anchor","middle").call(o.font,w).call(l.convertToTspans,e);var k=o.bBox(_.node());a.transform=d(k,a,M);a.transform.targetX=X(a);a.transform.targetY=J(a);var A=function(e,t){var r=e.transform;p(r,t);r.fontSize=w.size;f(S.type,r,v);return s.getTextTransform(r)};if(y){_.transition().attrTween("transform",(function(e){var t=re(e);return function(e){return A(t(e),k)}}))}else{_.attr("transform",A(a,k))}}));function ee(e){var t=b.getPtId(e);var r=N[t];var n=N[b.getPtId(L)];var a;if(n){var o=(e.x1>n.x1?2*Math.PI:0)+q;a=e.rpx1<n.rpx1?{x0:e.x0,x1:e.x1,rpx0:0,rpx1:0}:{x0:o,x1:o,rpx0:e.rpx0,rpx1:e.rpx1}}else{var s;var l=b.getPtId(e.parent);A.each((function(e){if(b.getPtId(e)===l){return s=e}}));var u=s.children;var f;u.forEach((function(e,r){if(b.getPtId(e)===t){return f=r}}));var c=u.length;var v=i(s.x0,s.x1);a={rpx0:z,rpx1:z,x0:v(f/c),x1:v((f+1)/c)}}return i(r,a)}function te(e){var t=N[b.getPtId(e)];var r;var n={x0:e.x0,x1:e.x1,rpx0:e.rpx0,rpx1:e.rpx1};if(t){r=t}else{if(B){if(e.parent){if(K){var a=(e.x1>K?2*Math.PI:0)+q;r={x0:a,x1:a}}else{r={rpx0:z,rpx1:z};s.extendFlat(r,ne(e))}}else{r={rpx0:0,rpx1:0}}}else{r={x0:q,x1:q}}}return i(r,n)}function re(e){var t=N[b.getPtId(e)];var r;var n=e.transform;if(t){r=t}else{r={rpx1:e.rpx1,transform:{textPosAngle:n.textPosAngle,scale:0,rotate:n.rotate,rCenter:n.rCenter,x:n.x,y:n.y}};if(B){if(e.parent){if(K){var a=e.x1>K?2*Math.PI:0;r.x0=r.x1=a}else{s.extendFlat(r,ne(e))}}else{r.x0=r.x1=q}}else{r.x0=r.x1=q}}var o=i(r.transform.textPosAngle,e.transform.textPosAngle);var l=i(r.rpx1,e.rpx1);var u=i(r.x0,e.x0);var c=i(r.x1,e.x1);var h=i(r.transform.scale,n.scale);var p=i(r.transform.rotate,n.rotate);var d=n.rCenter===0?3:r.transform.rCenter===0?1/3:1;var g=i(r.transform.rCenter,n.rCenter);var y=function(e){return g(Math.pow(e,d))};return function(e){var t=l(e);var r=u(e);var a=c(e);var i=y(e);var s=Y(t,(r+a)/2);var d=o(e);var g={pxmid:s,rpx1:t,transform:{textPosAngle:d,rCenter:i,x:n.x,y:n.y}};f(S.type,n,v);return{transform:{targetX:X(g),targetY:J(g),scale:h(e),rotate:p(e),rCenter:i}}}}function ne(e){var t=e.parent;var r=N[b.getPtId(t)];var n={};if(r){var a=t.children;var o=a.indexOf(e);var s=a.length;var l=i(r.x0,r.x1);n.x0=l(o/s);n.x1=l(o/s)}else{n.x0=n.x1=0}return n}}function w(e){return a.partition().size([2*Math.PI,e.height+1])(e)}t.formatSliceLabel=function(e,t,r,n,a){var i=r.texttemplate;var o=r.textinfo;if(!i&&(!o||o==="none")){return""}var l=a.separators;var u=n[0];var f=e.data.data;var c=u.hierarchy;var v=b.isHierarchyRoot(e);var h=b.getParent(c,e);var p=b.getValue(e);if(!i){var d=o.split("+");var g=function(e){return d.indexOf(e)!==-1};var y=[];var m;if(g("label")&&f.label){y.push(f.label)}if(f.hasOwnProperty("v")&&g("value")){y.push(b.formatValue(f.v,l))}if(!v){if(g("current path")){y.push(b.getPath(e.data))}var x=0;if(g("percent parent"))x++;if(g("percent entry"))x++;if(g("percent root"))x++;var _=x>1;if(x){var w;var T=function(e){m=b.formatPercent(w,l);if(_)m+=" of "+e;y.push(m)};if(g("percent parent")&&!v){w=p/b.getValue(h);T("parent")}if(g("percent entry")){w=p/b.getValue(t);T("entry")}if(g("percent root")){w=p/b.getValue(c);T("root")}}}if(g("text")){m=s.castOption(r,f.i,"text");if(s.isValidTextValue(m))y.push(m)}return y.join("<br>")}var k=s.castOption(r,f.i,"texttemplate");if(!k)return"";var A={};if(f.label)A.label=f.label;if(f.hasOwnProperty("v")){A.value=f.v;A.valueLabel=b.formatValue(f.v,l)}A.currentPath=b.getPath(e.data);if(!v){A.percentParent=p/b.getValue(h);A.percentParentLabel=b.formatPercent(A.percentParent,l);A.parent=b.getPtLabel(h)}A.percentEntry=p/b.getValue(t);A.percentEntryLabel=b.formatPercent(A.percentEntry,l);A.entry=b.getPtLabel(t);A.percentRoot=p/b.getValue(c);A.percentRootLabel=b.formatPercent(A.percentRoot,l);A.root=b.getPtLabel(c);if(f.hasOwnProperty("color")){A.color=f.color}var M=s.castOption(r,f.i,"text");if(s.isValidTextValue(M)||M==="")A.text=M;A.customdata=s.castOption(r,f.i,"customdata");return s.texttemplateString(k,A,a._d3locale,A,r._meta||{})};function T(e){if(e.rpx0===0&&s.isFullCircle([e.x0,e.x1])){return 1}else{return Math.max(0,Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2))}}function k(e){return A(e.rpx1,e.transform.textPosAngle)}function A(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}},29969:function(e,t,r){"use strict";var n=r(39898);var a=r(7901);var i=r(71828);var o=r(72597).resizeText;var s=r(43467);function l(e){var t=e._fullLayout._sunburstlayer.selectAll(".trace");o(e,t,"sunburst");t.each((function(t){var r=n.select(this);var a=t[0];var i=a.trace;r.style("opacity",i.opacity);r.selectAll("path.surface").each((function(t){n.select(this).call(u,t,i,e)}))}))}function u(e,t,r,n){var o=t.data.data;var l=!t.children;var u=o.i;var f=i.castOption(r,u,"marker.line.color")||a.defaultLine;var c=i.castOption(r,u,"marker.line.width")||0;e.call(s,t,r,n).style("stroke-width",c).call(a.stroke,f).style("opacity",l?r.leaf.opacity:null)}e.exports={style:l,styleOne:u}},54532:function(e,t,r){"use strict";var n=r(7901);var a=r(50693);var i=r(12663).axisHoverFormat;var o=r(5386).fF;var s=r(9012);var l=r(1426).extendFlat;var u=r(30962).overrideAll;function f(e){return{valType:"boolean",dflt:false}}function c(e){return{show:{valType:"boolean",dflt:false},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:f("x"),y:f("y"),z:f("z")},color:{valType:"color",dflt:n.defaultLine},usecolormap:{valType:"boolean",dflt:false},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:true},highlightcolor:{valType:"color",dflt:n.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var v=e.exports=u(l({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:true},hovertext:{valType:"string",dflt:"",arrayOk:true},hovertemplate:o(),xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z"),connectgaps:{valType:"boolean",dflt:false,editType:"calc"},surfacecolor:{valType:"data_array"}},a("",{colorAttr:"z or surfacecolor",showScaleDflt:true,autoColorDflt:false,editTypeOverride:"calc"}),{contours:{x:c("x"),y:c("y"),z:c("z")},hidesurface:{valType:"boolean",dflt:false},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:l({},a.zauto,{}),zmin:l({},a.zmin,{}),zmax:l({},a.zmax,{})},hoverinfo:l({},s.hoverinfo),showlegend:l({},s.showlegend,{dflt:false})}),"calc","nested");v.x.editType=v.y.editType=v.z.editType="calc+clearAxisTypes";v.transforms=undefined},18396:function(e,t,r){"use strict";var n=r(78803);e.exports=function e(t,r){if(r.surfacecolor){n(t,r,{vals:r.surfacecolor,containerStr:"",cLetter:"c"})}else{n(t,r,{vals:r.z,containerStr:"",cLetter:"c"})}}},43768:function(e,t,r){"use strict";var n=r(9330).gl_surface3d;var a=r(9330).ndarray;var i=r(9330).ndarray_linear_interpolate.d2;var o=r(824);var s=r(43907);var l=r(71828).isArrayOrTypedArray;var u=r(81697).parseColorScale;var f=r(78614);var c=r(21081).extractOpts;function v(e,t,r){this.scene=e;this.uid=r;this.surface=t;this.data=null;this.showContour=[false,false,false];this.contourStart=[null,null,null];this.contourEnd=[null,null,null];this.contourSize=[0,0,0];this.minValues=[Infinity,Infinity,Infinity];this.maxValues=[-Infinity,-Infinity,-Infinity];this.dataScaleX=1;this.dataScaleY=1;this.refineData=true;this.objectOffset=[0,0,0]}var h=v.prototype;h.getXat=function(e,t,r,n){var a=!l(this.data.x)?e:l(this.data.x[0])?this.data.x[t][e]:this.data.x[e];return r===undefined?a:n.d2l(a,0,r)};h.getYat=function(e,t,r,n){var a=!l(this.data.y)?t:l(this.data.y[0])?this.data.y[t][e]:this.data.y[t];return r===undefined?a:n.d2l(a,0,r)};h.getZat=function(e,t,r,n){var a=this.data.z[t][e];if(a===null&&this.data.connectgaps&&this.data._interpolatedZ){a=this.data._interpolatedZ[t][e]}return r===undefined?a:n.d2l(a,0,r)};h.handlePick=function(e){if(e.object===this.surface){var t=(e.data.index[0]-1)/this.dataScaleX-1;var r=(e.data.index[1]-1)/this.dataScaleY-1;var n=Math.max(Math.min(Math.round(t),this.data.z[0].length-1),0);var a=Math.max(Math.min(Math.round(r),this.data._ylength-1),0);e.index=[n,a];e.traceCoordinate=[this.getXat(n,a),this.getYat(n,a),this.getZat(n,a)];e.dataCoordinate=[this.getXat(n,a,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(n,a,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(n,a,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var i=0;i<3;i++){var o=e.dataCoordinate[i];if(o!==null&&o!==undefined){e.dataCoordinate[i]*=this.scene.dataScale[i]}}var s=this.data.hovertext||this.data.text;if(Array.isArray(s)&&s[a]&&s[a][n]!==undefined){e.textLabel=s[a][n]}else if(s){e.textLabel=s}else{e.textLabel=""}e.data.dataCoordinate=e.dataCoordinate.slice();this.surface.highlight(e.data);this.scene.glplot.spikes.position=e.dataCoordinate;return true}};function p(e){var t=e[0].rgb;var r=e[e.length-1].rgb;return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}var d=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function g(e,t){if(e<t)return 0;var r=0;while(Math.floor(e%t)===0){e/=t;r++}return r}function y(e){var t=[];for(var r=0;r<d.length;r++){var n=d[r];t.push(g(e,n))}return t}function m(e){var t=y(e);var r=e;for(var n=0;n<d.length;n++){if(t[n]>0){r=d[n];break}}return r}function x(e,t){if(e<1||t<1)return undefined;var r=y(e);var n=y(t);var a=1;for(var i=0;i<d.length;i++){a*=Math.pow(d[i],Math.max(r[i],n[i]))}return a}function b(e){if(e.length===0)return undefined;var t=1;for(var r=0;r<e.length;r++){t=x(t,e[r])}return t}h.calcXnums=function(e){var t;var r=[];for(t=1;t<e;t++){var n=this.getXat(t-1,0);var a=this.getXat(t,0);if(a!==n&&n!==undefined&&n!==null&&a!==undefined&&a!==null){r[t-1]=Math.abs(a-n)}else{r[t-1]=0}}var i=0;for(t=1;t<e;t++){i+=r[t-1]}for(t=1;t<e;t++){if(r[t-1]===0){r[t-1]=1}else{r[t-1]=Math.round(i/r[t-1])}}return r};h.calcYnums=function(e){var t;var r=[];for(t=1;t<e;t++){var n=this.getYat(0,t-1);var a=this.getYat(0,t);if(a!==n&&n!==undefined&&n!==null&&a!==undefined&&a!==null){r[t-1]=Math.abs(a-n)}else{r[t-1]=0}}var i=0;for(t=1;t<e;t++){i+=r[t-1]}for(t=1;t<e;t++){if(r[t-1]===0){r[t-1]=1}else{r[t-1]=Math.round(i/r[t-1])}}return r};var _=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260];var w=_[9];var T=_[13];h.estimateScale=function(e,t){var r=t===0?this.calcXnums(e):this.calcYnums(e);var n=1+b(r);while(n<w){n*=2}while(n>T){n--;n/=m(n);n++;if(n<w){n=T}}var a=Math.round(n/e);return a>1?a:1};function k(e,t,r){var n=r[8]+r[2]*t[0]+r[5]*t[1];e[0]=(r[6]+r[0]*t[0]+r[3]*t[1])/n;e[1]=(r[7]+r[1]*t[0]+r[4]*t[1])/n;return e}function A(e,t,r){M(e,t,k,r);return e}function M(e,t,r,n){var a=[0,0];var o=e.shape[0];var s=e.shape[1];for(var l=0;l<o;l++){for(var u=0;u<s;u++){r(a,[l,u],n);e.set(l,u,i(t,a[0],a[1]))}}return e}h.refineCoords=function(e){var t=this.dataScaleX;var r=this.dataScaleY;var n=e[0].shape[0];var i=e[0].shape[1];var o=Math.floor(e[0].shape[0]*t+1)|0;var s=Math.floor(e[0].shape[1]*r+1)|0;var l=1+n+1;var u=1+i+1;var f=a(new Float32Array(l*u),[l,u]);var c=[1/t,0,0,0,1/r,0,0,0,1];for(var v=0;v<e.length;++v){this.surface.padField(f,e[v]);var h=a(new Float32Array(o*s),[o,s]);A(h,f,c);e[v]=h}};function S(e,t){var r=false;for(var n=0;n<e.length;n++){if(t===e[n]){r=true;break}}if(r===false)e.push(t)}h.setContourLevels=function(){var e=[[],[],[]];var t=[false,false,false];var r=false;var n,a,i;for(n=0;n<3;++n){if(this.showContour[n]){r=true;if(this.contourSize[n]>0&&this.contourStart[n]!==null&&this.contourEnd[n]!==null&&this.contourEnd[n]>this.contourStart[n]){t[n]=true;for(a=this.contourStart[n];a<this.contourEnd[n];a+=this.contourSize[n]){i=a*this.scene.dataScale[n];S(e[n],i)}}}}if(r){var o=[[],[],[]];for(n=0;n<3;++n){if(this.showContour[n]){o[n]=t[n]?e[n]:this.scene.contourLevels[n]}}this.surface.update({levels:o})}};h.update=function(e){var t=this.scene;var r=t.fullSceneLayout;var n=this.surface;var i=u(e);var l=t.dataScale;var v=e.z[0].length;var h=e._ylength;var d=t.contourLevels;this.data=e;var g,y,m,x;var b=[];for(g=0;g<3;g++){b[g]=[];for(y=0;y<v;y++){b[g][y]=[]}}for(y=0;y<v;y++){for(m=0;m<h;m++){b[0][y][m]=this.getXat(y,m,e.xcalendar,r.xaxis);b[1][y][m]=this.getYat(y,m,e.ycalendar,r.yaxis);b[2][y][m]=this.getZat(y,m,e.zcalendar,r.zaxis)}}if(e.connectgaps){e._emptypoints=s(b[2]);o(b[2],e._emptypoints);e._interpolatedZ=[];for(y=0;y<v;y++){e._interpolatedZ[y]=[];for(m=0;m<h;m++){e._interpolatedZ[y][m]=b[2][y][m]}}}for(g=0;g<3;g++){for(y=0;y<v;y++){for(m=0;m<h;m++){x=b[g][y][m];if(x===null||x===undefined){b[g][y][m]=NaN}else{x=b[g][y][m]*=l[g]}}}}for(g=0;g<3;g++){for(y=0;y<v;y++){for(m=0;m<h;m++){x=b[g][y][m];if(x!==null&&x!==undefined){if(this.minValues[g]>x){this.minValues[g]=x}if(this.maxValues[g]<x){this.maxValues[g]=x}}}}}for(g=0;g<3;g++){this.objectOffset[g]=.5*(this.minValues[g]+this.maxValues[g])}for(g=0;g<3;g++){for(y=0;y<v;y++){for(m=0;m<h;m++){x=b[g][y][m];if(x!==null&&x!==undefined){b[g][y][m]-=this.objectOffset[g]}}}}var _=[a(new Float32Array(v*h),[v,h]),a(new Float32Array(v*h),[v,h]),a(new Float32Array(v*h),[v,h])];for(g=0;g<3;g++){for(y=0;y<v;y++){for(m=0;m<h;m++){_[g].set(y,m,b[g][y][m])}}}b=[];var w={colormap:i,levels:[[],[],[]],showContour:[true,true,true],showSurface:!e.hidesurface,contourProject:[[false,false,false],[false,false,false],[false,false,false]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:e.opacityscale,opacity:e.opacity};var k=c(e);w.intensityBounds=[k.min,k.max];if(e.surfacecolor){var A=a(new Float32Array(v*h),[v,h]);for(y=0;y<v;y++){for(m=0;m<h;m++){A.set(y,m,e.surfacecolor[m][y])}}_.push(A)}else{w.intensityBounds[0]*=l[2];w.intensityBounds[1]*=l[2]}if(T<_[0].shape[0]||T<_[0].shape[1]){this.refineData=false}if(this.refineData===true){this.dataScaleX=this.estimateScale(_[0].shape[0],0);this.dataScaleY=this.estimateScale(_[0].shape[1],1);if(this.dataScaleX!==1||this.dataScaleY!==1){this.refineCoords(_)}}if(e.surfacecolor){w.intensity=_.pop()}var M=[true,true,true];var S=["x","y","z"];for(g=0;g<3;++g){var E=e.contours[S[g]];M[g]=E.highlight;w.showContour[g]=E.show||E.highlight;if(!w.showContour[g])continue;w.contourProject[g]=[E.project.x,E.project.y,E.project.z];if(E.show){this.showContour[g]=true;w.levels[g]=d[g];n.highlightColor[g]=w.contourColor[g]=f(E.color);if(E.usecolormap){n.highlightTint[g]=w.contourTint[g]=0}else{n.highlightTint[g]=w.contourTint[g]=1}w.contourWidth[g]=E.width;this.contourStart[g]=E.start;this.contourEnd[g]=E.end;this.contourSize[g]=E.size}else{this.showContour[g]=false;this.contourStart[g]=null;this.contourEnd[g]=null;this.contourSize[g]=0}if(E.highlight){w.dynamicColor[g]=f(E.highlightcolor);w.dynamicWidth[g]=E.highlightwidth}}if(p(i)){w.vertexColor=true}w.objectOffset=this.objectOffset;w.coords=_;n.update(w);n.visible=e.visible;n.enableDynamic=M;n.enableHighlight=M;n.snapToData=true;if("lighting"in e){n.ambientLight=e.lighting.ambient;n.diffuseLight=e.lighting.diffuse;n.specularLight=e.lighting.specular;n.roughness=e.lighting.roughness;n.fresnel=e.lighting.fresnel}if("lightposition"in e){n.lightPosition=[e.lightposition.x,e.lightposition.y,e.lightposition.z]}};h.dispose=function(){this.scene.glplot.remove(this.surface);this.surface.dispose()};function E(e,t){var r=e.glplot.gl;var a=n({gl:r});var i=new v(e,a,t.uid);a._trace=i;i.update(t);e.glplot.add(a);return i}e.exports=E},91831:function(e,t,r){"use strict";var n=r(73972);var a=r(71828);var i=r(1586);var o=r(54532);var s=.1;function l(e,t){var r=[];var n=32;for(var a=0;a<n;a++){var i=a/(n-1);var o=t+(1-t)*(1-Math.pow(Math.sin(e*i*Math.PI),2));r.push([i,Math.max(0,Math.min(1,o))])}return r}function u(e){var t=0;if(!Array.isArray(e)||e.length<2)return false;if(!e[0]||!e[e.length-1])return false;if(+e[0][0]!==0||+e[e.length-1][0]!==1)return false;for(var r=0;r<e.length;r++){var n=e[r];if(n.length!==2||+n[0]<t){return false}t=+n[0]}return true}function f(e,t,r,s){var l,u;function f(r,n){return a.coerce(e,t,o,r,n)}var h=f("x");var p=f("y");var d=f("z");if(!d||!d.length||(h?h.length<1:false)||(p?p.length<1:false)){t.visible=false;return}t._xlength=Array.isArray(h)&&a.isArrayOrTypedArray(h[0])?d.length:d[0].length;t._ylength=d.length;var g=n.getComponentMethod("calendars","handleTraceDefaults");g(e,t,["x","y","z"],s);f("text");f("hovertext");f("hovertemplate");f("xhoverformat");f("yhoverformat");f("zhoverformat");["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach((function(e){f(e)}));var y=f("surfacecolor");var m=["x","y","z"];for(l=0;l<3;++l){var x="contours."+m[l];var b=f(x+".show");var _=f(x+".highlight");if(b||_){for(u=0;u<3;++u){f(x+".project."+m[u])}}if(b){f(x+".color");f(x+".width");f(x+".usecolormap")}if(_){f(x+".highlightcolor");f(x+".highlightwidth")}f(x+".start");f(x+".end");f(x+".size")}if(!y){v(e,"zmin","cmin");v(e,"zmax","cmax");v(e,"zauto","cauto")}i(e,t,s,f,{prefix:"",cLetter:"c"});c(e,t,s,f);t._length=null}function c(e,t,r,n){var a=n("opacityscale");if(a==="max"){t.opacityscale=[[0,s],[1,1]]}else if(a==="min"){t.opacityscale=[[0,1],[1,s]]}else if(a==="extremes"){t.opacityscale=l(1,s)}else if(!u(a)){t.opacityscale=undefined}}function v(e,t,r){if(t in e&&!(r in e)){e[r]=e[t]}}e.exports={supplyDefaults:f,opacityscaleDefaults:c}},93601:function(e,t,r){"use strict";e.exports={attributes:r(54532),supplyDefaults:r(91831).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:r(18396),plot:r(43768),moduleType:"trace",name:"surface",basePlotModule:r(58547),categories:["gl3d","2dMap","showLegend"],meta:{}}},44464:function(e,t,r){"use strict";var n=r(50215);var a=r(1426).extendFlat;var i=r(30962).overrideAll;var o=r(41940);var s=r(27670).Y;var l=r(12663).descriptionOnlyNumbers;var u=e.exports=i({domain:s({name:"table",trace:true}),columnwidth:{valType:"number",arrayOk:true,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:l("cell value")},prefix:{valType:"string",arrayOk:true,dflt:null},suffix:{valType:"string",arrayOk:true,dflt:null},height:{valType:"number",dflt:28},align:a({},n.align,{arrayOk:true}),line:{width:{valType:"number",arrayOk:true,dflt:1},color:{valType:"color",arrayOk:true,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:true,dflt:"white"}},font:a({},o({arrayOk:true}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:l("cell value")},prefix:{valType:"string",arrayOk:true,dflt:null},suffix:{valType:"string",arrayOk:true,dflt:null},height:{valType:"number",dflt:20},align:a({},n.align,{arrayOk:true}),line:{width:{valType:"number",arrayOk:true,dflt:1},color:{valType:"color",arrayOk:true,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:true,dflt:"white"}},font:a({},o({arrayOk:true}))}},"calc","from-root");u.transforms=undefined},99469:function(e,t,r){"use strict";var n=r(27659).a0;var a=r(36736);var i="table";t.name=i;t.plot=function(e){var t=n(e.calcdata,i)[0];if(t.length)a(e,t)};t.clean=function(e,t,r,n){var a=n._has&&n._has(i);var o=t._has&&t._has(i);if(a&&!o){n._paperdiv.selectAll(".table").remove()}}},76333:function(e,t,r){"use strict";var n=r(28984).wrap;e.exports=function e(){return n({})}},49850:function(e){"use strict";e.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},51018:function(e,t,r){"use strict";var n=r(49850);var a=r(1426).extendFlat;var i=r(92770);e.exports=function e(t,r){var h=l(r.cells.values);var p=function(e){return e.slice(r.header.values.length,e.length)};var d=l(r.header.values);if(d.length&&!d[0].length){d[0]=[""];d=l(d)}var g=d.concat(p(h).map((function(){return u((d[0]||[""]).length)})));var y=r.domain;var m=Math.floor(t._fullLayout._size.w*(y.x[1]-y.x[0]));var x=Math.floor(t._fullLayout._size.h*(y.y[1]-y.y[0]));var b=r.header.values.length?g[0].map((function(){return r.header.height})):[n.emptyHeaderHeight];var _=h.length?h[0].map((function(){return r.cells.height})):[];var w=b.reduce(s,0);var T=x-w;var k=T+n.uplift;var A=v(_,k);var M=v(b,w);var S=c(M,[]);var E=c(A,S);var L={};var C=r._fullInput.columnorder.concat(p(h.map((function(e,t){return t}))));var I=g.map((function(e,t){var n=Array.isArray(r.columnwidth)?r.columnwidth[Math.min(t,r.columnwidth.length-1)]:r.columnwidth;return i(n)?Number(n):1}));var P=I.reduce(s,0);I=I.map((function(e){return e/P*m}));var O=Math.max(o(r.header.line.width),o(r.cells.line.width));var D={key:r.uid+t._context.staticPlot,translateX:y.x[0]*t._fullLayout._size.w,translateY:t._fullLayout._size.h*(1-y.y[1]),size:t._fullLayout._size,width:m,maxLineWidth:O,height:x,columnOrder:C,groupHeight:x,rowBlocks:E,headerRowBlocks:S,scrollY:0,cells:a({},r.cells,{values:h}),headerCells:a({},r.header,{values:g}),gdColumns:g.map((function(e){return e[0]})),gdColumnsOriginalOrder:g.map((function(e){return e[0]})),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:false},columns:g.map((function(e,t){var r=L[e];L[e]=(r||0)+1;var n=e+"__"+L[e];return{key:n,label:e,specIndex:t,xIndex:C[t],xScale:f,x:undefined,calcdata:undefined,columnWidth:I[t]}}))};D.columns.forEach((function(e){e.calcdata=D;e.x=f(e)}));return D};function o(e){if(Array.isArray(e)){var t=0;for(var r=0;r<e.length;r++){t=Math.max(t,o(e[r]))}return t}return e}function s(e,t){return e+t}function l(e){var t=e.slice();var r=Infinity;var n=0;var a;for(a=0;a<t.length;a++){if(!Array.isArray(t[a]))t[a]=[t[a]];r=Math.min(r,t[a].length);n=Math.max(n,t[a].length)}if(r!==n){for(a=0;a<t.length;a++){var i=n-t[a].length;if(i)t[a]=t[a].concat(u(i))}}return t}function u(e){var t=new Array(e);for(var r=0;r<e;r++)t[r]="";return t}function f(e){return e.calcdata.columns.reduce((function(t,r){return r.xIndex<e.xIndex?t+r.columnWidth:t}),0)}function c(e,t){var r=Object.keys(e);return r.map((function(r){return a({},e[r],{auxiliaryBlocks:t})}))}function v(e,t){var r={};var n;var a=0;var i=0;var o=h();var s=0;var l=0;for(var u=0;u<e.length;u++){n=e[u];o.rows.push({rowIndex:u,rowHeight:n});i+=n;if(i>=t||u===e.length-1){r[a]=o;o.key=l++;o.firstRowIndex=s;o.lastRowIndex=u;o=h();a+=i;s=u+1;i=0}}return r}function h(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},56269:function(e,t,r){"use strict";var n=r(1426).extendFlat;t.splitToPanels=function(e){var t=[0,0];var r=n({},e,{key:"header",type:"header",page:0,prevPages:t,currentRepaint:[null,null],dragHandle:true,values:e.calcdata.headerCells.values[e.specIndex],rowBlocks:e.calcdata.headerRowBlocks,calcdata:n({},e.calcdata,{cells:e.calcdata.headerCells})});var a=n({},e,{key:"cells1",type:"cells",page:0,prevPages:t,currentRepaint:[null,null],dragHandle:false,values:e.calcdata.cells.values[e.specIndex],rowBlocks:e.calcdata.rowBlocks});var i=n({},e,{key:"cells2",type:"cells",page:1,prevPages:t,currentRepaint:[null,null],dragHandle:false,values:e.calcdata.cells.values[e.specIndex],rowBlocks:e.calcdata.rowBlocks});return[a,i,r]};t.splitToCells=function(e){var t=a(e);return(e.values||[]).slice(t[0],t[1]).map((function(r,n){var a=typeof r==="string"&&r.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:n+a,key:t[0]+n,column:e,calcdata:e.calcdata,page:e.page,rowBlocks:e.rowBlocks,value:r}}))};function a(e){var t=e.rowBlocks[e.page];var r=t?t.rows[0].rowIndex:0;var n=t?r+t.rows.length:0;return[r,n]}},39754:function(e,t,r){"use strict";var n=r(71828);var a=r(44464);var i=r(27670).c;function o(e,t){var r=e.columnorder||[];var n=e.header.values.length;var a=r.slice(0,n);var i=a.slice().sort((function(e,t){return e-t}));var o=a.map((function(e){return i.indexOf(e)}));for(var s=o.length;s<n;s++){o.push(s)}t("columnorder",o)}e.exports=function e(t,r,s,l){function u(e,i){return n.coerce(t,r,a,e,i)}i(r,l,u);u("columnwidth");u("header.values");u("header.format");u("header.align");u("header.prefix");u("header.suffix");u("header.height");u("header.line.width");u("header.line.color");u("header.fill.color");n.coerceFont(u,"header.font",n.extendFlat({},l.font));o(r,u);u("cells.values");u("cells.format");u("cells.align");u("cells.prefix");u("cells.suffix");u("cells.height");u("cells.line.width");u("cells.line.color");u("cells.fill.color");n.coerceFont(u,"cells.font",n.extendFlat({},l.font));r._length=null}},96595:function(e,t,r){"use strict";e.exports={attributes:r(44464),supplyDefaults:r(39754),calc:r(76333),plot:r(36736),moduleType:"trace",name:"table",basePlotModule:r(99469),categories:["noOpacity"],meta:{}}},36736:function(e,t,r){"use strict";var n=r(49850);var a=r(39898);var i=r(71828);var o=i.numberFormat;var s=r(28984);var l=r(91424);var u=r(63893);var f=r(71828).raiseToTop;var c=r(71828).strTranslate;var v=r(71828).cancelTransition;var h=r(51018);var p=r(56269);var d=r(7901);e.exports=function e(t,r){var i=!t._context.staticPlot;var o=t._fullLayout._paper.selectAll("."+n.cn.table).data(r.map((function(e){var r=s.unwrap(e);var n=r.trace;return h(t,n)})),s.keyFun);o.exit().remove();o.enter().append("g").classed(n.cn.table,true).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all");o.attr("width",(function(e){return e.width+e.size.l+e.size.r})).attr("height",(function(e){return e.height+e.size.t+e.size.b})).attr("transform",(function(e){return c(e.translateX,e.translateY)}));var u=o.selectAll("."+n.cn.tableControlView).data(s.repeat,s.keyFun);var d=u.enter().append("g").classed(n.cn.tableControlView,true).style("box-sizing","content-box");if(i){var w="onwheel"in document?"wheel":"mousewheel";d.on("mousemove",(function(e){u.filter((function(t){return e===t})).call(b,t)})).on(w,(function(e){if(e.scrollbarState.wheeling)return;e.scrollbarState.wheeling=true;var r=e.scrollY+a.event.deltaY;var n=U(t,u,null,r)(e);if(!n){a.event.stopPropagation();a.event.preventDefault()}e.scrollbarState.wheeling=false})).call(b,t,true)}u.attr("transform",(function(e){return c(e.size.l,e.size.t)}));var T=u.selectAll("."+n.cn.scrollBackground).data(s.repeat,s.keyFun);T.enter().append("rect").classed(n.cn.scrollBackground,true).attr("fill","none");T.attr("width",(function(e){return e.width})).attr("height",(function(e){return e.height}));u.each((function(e){l.setClipUrl(a.select(this),y(t,e),t)}));var k=u.selectAll("."+n.cn.yColumn).data((function(e){return e.columns}),s.keyFun);k.enter().append("g").classed(n.cn.yColumn,true);k.exit().remove();k.attr("transform",(function(e){return c(e.x,0)}));if(i){k.call(a.behavior.drag().origin((function(e){var r=a.select(this);z(r,e,-n.uplift);f(this);e.calcdata.columnDragInProgress=true;b(u.filter((function(t){return e.calcdata.key===t.key})),t);return e})).on("drag",(function(e){var t=a.select(this);var r=function(t){return(e===t?a.event.x:t.x)+t.columnWidth/2};e.x=Math.max(-n.overdrag,Math.min(e.calcdata.width+n.overdrag-e.columnWidth,a.event.x));var i=x(k).filter((function(t){return t.calcdata.key===e.calcdata.key}));var o=i.sort((function(e,t){return r(e)-r(t)}));o.forEach((function(t,r){t.xIndex=r;t.x=e===t?t.x:t.xScale(t)}));k.filter((function(t){return e!==t})).transition().ease(n.transitionEase).duration(n.transitionDuration).attr("transform",(function(e){return c(e.x,0)}));t.call(v).attr("transform",c(e.x,-n.uplift))})).on("dragend",(function(e){var r=a.select(this);var n=e.calcdata;e.x=e.xScale(e);e.calcdata.columnDragInProgress=false;z(r,e,0);O(t,n,n.columns.map((function(e){return e.xIndex})))})))}k.each((function(e){l.setClipUrl(a.select(this),m(t,e),t)}));var A=k.selectAll("."+n.cn.columnBlock).data(p.splitToPanels,s.keyFun);A.enter().append("g").classed(n.cn.columnBlock,true).attr("id",(function(e){return e.key}));A.style("cursor",(function(e){return e.dragHandle?"ew-resize":e.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"}));var M=A.filter(F);var S=A.filter(R);if(i){S.call(a.behavior.drag().origin((function(e){a.event.stopPropagation();return e})).on("drag",U(t,u,-1)).on("dragend",(function(){})))}_(t,u,M,A);_(t,u,S,A);var E=u.selectAll("."+n.cn.scrollAreaClip).data(s.repeat,s.keyFun);E.enter().append("clipPath").classed(n.cn.scrollAreaClip,true).attr("id",(function(e){return y(t,e)}));var L=E.selectAll("."+n.cn.scrollAreaClipRect).data(s.repeat,s.keyFun);L.enter().append("rect").classed(n.cn.scrollAreaClipRect,true).attr("x",-n.overdrag).attr("y",-n.uplift).attr("fill","none");L.attr("width",(function(e){return e.width+2*n.overdrag})).attr("height",(function(e){return e.height+n.uplift}));var C=k.selectAll("."+n.cn.columnBoundary).data(s.repeat,s.keyFun);C.enter().append("g").classed(n.cn.columnBoundary,true);var I=k.selectAll("."+n.cn.columnBoundaryClippath).data(s.repeat,s.keyFun);I.enter().append("clipPath").classed(n.cn.columnBoundaryClippath,true);I.attr("id",(function(e){return m(t,e)}));var P=I.selectAll("."+n.cn.columnBoundaryRect).data(s.repeat,s.keyFun);P.enter().append("rect").classed(n.cn.columnBoundaryRect,true).attr("fill","none");P.attr("width",(function(e){return e.columnWidth+2*g(e)})).attr("height",(function(e){return e.calcdata.height+2*g(e)+n.uplift})).attr("x",(function(e){return-g(e)})).attr("y",(function(e){return-g(e)}));j(null,S,u)};function g(e){return Math.ceil(e.calcdata.maxLineWidth/2)}function y(e,t){return"clip"+e._fullLayout._uid+"_scrollAreaBottomClip_"+t.key}function m(e,t){return"clip"+e._fullLayout._uid+"_columnBoundaryClippath_"+t.calcdata.key+"_"+t.specIndex}function x(e){return[].concat.apply([],e.map((function(e){return e}))).map((function(e){return e.__data__}))}function b(e,t,r){function i(e){var t=e.rowBlocks;return Y(t,t.length-1)+(t.length?W(t[t.length-1],Infinity):1)}var o=e.selectAll("."+n.cn.scrollbarKit).data(s.repeat,s.keyFun);o.enter().append("g").classed(n.cn.scrollbarKit,true).style("shape-rendering","geometricPrecision");o.each((function(e){var t=e.scrollbarState;t.totalHeight=i(e);t.scrollableAreaHeight=e.groupHeight-B(e);t.currentlyVisibleHeight=Math.min(t.totalHeight,t.scrollableAreaHeight);t.ratio=t.currentlyVisibleHeight/t.totalHeight;t.barLength=Math.max(t.ratio*t.currentlyVisibleHeight,n.goldenRatio*n.scrollbarWidth);t.barWiggleRoom=t.currentlyVisibleHeight-t.barLength;t.wiggleRoom=Math.max(0,t.totalHeight-t.scrollableAreaHeight);t.topY=t.barWiggleRoom===0?0:e.scrollY/t.wiggleRoom*t.barWiggleRoom;t.bottomY=t.topY+t.barLength;t.dragMultiplier=t.wiggleRoom/t.barWiggleRoom})).attr("transform",(function(e){var t=e.width+n.scrollbarWidth/2+n.scrollbarOffset;return c(t,B(e))}));var l=o.selectAll("."+n.cn.scrollbar).data(s.repeat,s.keyFun);l.enter().append("g").classed(n.cn.scrollbar,true);var u=l.selectAll("."+n.cn.scrollbarSlider).data(s.repeat,s.keyFun);u.enter().append("g").classed(n.cn.scrollbarSlider,true);u.attr("transform",(function(e){return c(0,e.scrollbarState.topY||0)}));var f=u.selectAll("."+n.cn.scrollbarGlyph).data(s.repeat,s.keyFun);f.enter().append("line").classed(n.cn.scrollbarGlyph,true).attr("stroke","black").attr("stroke-width",n.scrollbarWidth).attr("stroke-linecap","round").attr("y1",n.scrollbarWidth/2);f.attr("y2",(function(e){return e.scrollbarState.barLength-n.scrollbarWidth/2})).attr("stroke-opacity",(function(e){return e.columnDragInProgress||!e.scrollbarState.barWiggleRoom||r?0:.4}));f.transition().delay(0).duration(0);f.transition().delay(n.scrollbarHideDelay).duration(n.scrollbarHideDuration).attr("stroke-opacity",0);var v=l.selectAll("."+n.cn.scrollbarCaptureZone).data(s.repeat,s.keyFun);v.enter().append("line").classed(n.cn.scrollbarCaptureZone,true).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",n.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",(function(r){var n=a.event.y;var i=this.getBoundingClientRect();var o=r.scrollbarState;var s=n-i.top;var l=a.scale.linear().domain([0,o.scrollableAreaHeight]).range([0,o.totalHeight]).clamp(true);if(!(o.topY<=s&&s<=o.bottomY)){U(t,e,null,l(s-o.barLength/2))(r)}})).call(a.behavior.drag().origin((function(e){a.event.stopPropagation();e.scrollbarState.scrollbarScrollInProgress=true;return e})).on("drag",U(t,e)).on("dragend",(function(){})));v.attr("y2",(function(e){return e.scrollbarState.scrollableAreaHeight}));if(t._context.staticPlot){f.remove();v.remove()}}function _(e,t,r,n){var a=w(r);var i=T(a);S(i);var o=k(i);L(o);var s=M(i);var l=A(s);E(l);C(l,t,n,e);Z(i)}function w(e){var t=e.selectAll("."+n.cn.columnCells).data(s.repeat,s.keyFun);t.enter().append("g").classed(n.cn.columnCells,true);t.exit().remove();return t}function T(e){var t=e.selectAll("."+n.cn.columnCell).data(p.splitToCells,(function(e){return e.keyWithinBlock}));t.enter().append("g").classed(n.cn.columnCell,true);t.exit().remove();return t}function k(e){var t=e.selectAll("."+n.cn.cellRect).data(s.repeat,(function(e){return e.keyWithinBlock}));t.enter().append("rect").classed(n.cn.cellRect,true);return t}function A(e){var t=e.selectAll("."+n.cn.cellText).data(s.repeat,(function(e){return e.keyWithinBlock}));t.enter().append("text").classed(n.cn.cellText,true).style("cursor",(function(){return"auto"})).on("mousedown",(function(){a.event.stopPropagation()}));return t}function M(e){var t=e.selectAll("."+n.cn.cellTextHolder).data(s.repeat,(function(e){return e.keyWithinBlock}));t.enter().append("g").classed(n.cn.cellTextHolder,true).style("shape-rendering","geometricPrecision");return t}function S(e){e.each((function(e,t){var r=e.calcdata.cells.font;var n=e.column.specIndex;var a={size:D(r.size,n,t),color:D(r.color,n,t),family:D(r.family,n,t)};e.rowNumber=e.key;e.align=D(e.calcdata.cells.align,n,t);e.cellBorderWidth=D(e.calcdata.cells.line.width,n,t);e.font=a}))}function E(e){e.each((function(e){l.font(a.select(this),e.font)}))}function L(e){e.attr("width",(function(e){return e.column.columnWidth})).attr("stroke-width",(function(e){return e.cellBorderWidth})).each((function(e){var t=a.select(this);d.stroke(t,D(e.calcdata.cells.line.color,e.column.specIndex,e.rowNumber));d.fill(t,D(e.calcdata.cells.fill.color,e.column.specIndex,e.rowNumber))}))}function C(e,t,r,i){e.text((function(e){var t=e.column.specIndex;var r=e.rowNumber;var a=e.value;var i=typeof a==="string";var s=i&&a.match(/<br>/i);var l=!i||s;e.mayHaveMarkup=i&&a.match(/[<&>]/);var u=I(a);e.latex=u;var f=u?"":D(e.calcdata.cells.prefix,t,r)||"";var c=u?"":D(e.calcdata.cells.suffix,t,r)||"";var v=u?null:D(e.calcdata.cells.format,t,r)||null;var h=f+(v?o(v)(e.value):e.value)+c;var p;e.wrappingNeeded=!e.wrapped&&!l&&!u&&(p=P(h));e.cellHeightMayIncrease=s||u||e.mayHaveMarkup||(p===void 0?P(h):p);e.needsConvertToTspans=e.mayHaveMarkup||e.wrappingNeeded||e.latex;var d;if(e.wrappingNeeded){var g=n.wrapSplitCharacter===" "?h.replace(/<a href=/gi,"<a_href="):h;var y=g.split(n.wrapSplitCharacter);var m=n.wrapSplitCharacter===" "?y.map((function(e){return e.replace(/<a_href=/gi,"<a href=")})):y;e.fragments=m.map((function(e){return{text:e,width:null}}));e.fragments.push({fragment:n.wrapSpacer,width:null});d=m.join(n.lineBreaker)+n.lineBreaker+n.wrapSpacer}else{delete e.fragments;d=h}return d})).attr("dy",(function(e){return e.needsConvertToTspans?0:"0.75em"})).each((function(e){var o=this;var s=a.select(o);var l=e.wrappingNeeded?H:q;if(e.needsConvertToTspans){u.convertToTspans(s,i,l(r,o,t,i,e))}else{a.select(o.parentNode).attr("transform",(function(e){return c(G(e),n.cellPad)})).attr("text-anchor",(function(e){return{left:"start",center:"middle",right:"end"}[e.align]}))}}))}function I(e){return typeof e==="string"&&e.match(n.latexCheck)}function P(e){return e.indexOf(n.wrapSplitCharacter)!==-1}function O(e,t,r){var n=t.gdColumnsOriginalOrder;t.gdColumns.sort((function(e,t){return r[n.indexOf(e)]-r[n.indexOf(t)]}));t.columnorder=r;e.emit("plotly_restyle")}function D(e,t,r){if(Array.isArray(e)){var n=e[Math.min(t,e.length-1)];if(Array.isArray(n)){return n[Math.min(r,n.length-1)]}else{return n}}else{return e}}function z(e,t,r){e.transition().ease(n.releaseTransitionEase).duration(n.releaseTransitionDuration).attr("transform",c(t.x,r))}function R(e){return e.type==="cells"}function F(e){return e.type==="header"}function B(e){var t=e.rowBlocks.length?e.rowBlocks[0].auxiliaryBlocks:[];return t.reduce((function(e,t){return e+W(t,Infinity)}),0)}function N(e,t,r){var n=[];var a=0;for(var i=0;i<e.length;i++){var o=e[i];var s=o.rows;var l=0;for(var u=0;u<s.length;u++){l+=s[u].rowHeight}o.allRowsHeight=l;var f=a+l;var c=t;var v=c+r;if(c<f&&v>a){n.push(i)}a+=l}return n}function j(e,t,r){var n=x(t)[0];if(n===undefined)return;var a=n.rowBlocks;var i=n.calcdata;var o=Y(a,a.length);var s=n.calcdata.groupHeight-B(n);var l=i.scrollY=Math.max(0,Math.min(o-s,i.scrollY));var u=N(a,l,s);if(u.length===1){if(u[0]===a.length-1){u.unshift(u[0]-1)}else{u.push(u[0]+1)}}if(u[0]%2){u.reverse()}t.each((function(e,t){e.page=u[t];e.scrollY=l}));t.attr("transform",(function(e){var t=Y(e.rowBlocks,e.page)-e.scrollY;return c(0,t)}));if(e){V(e,r,t,u,n.prevPages,n,0);V(e,r,t,u,n.prevPages,n,1);b(r,e)}}function U(e,t,r,i){return function o(s){var l=s.calcdata?s.calcdata:s;var u=t.filter((function(e){return l.key===e.key}));var f=r||l.scrollbarState.dragMultiplier;var c=l.scrollY;l.scrollY=i===void 0?l.scrollY+f*a.event.dy:i;var v=u.selectAll("."+n.cn.yColumn).selectAll("."+n.cn.columnBlock).filter(R);j(e,v,u);return l.scrollY===c}}function V(e,t,r,n,a,i,o){var s=n[o]!==a[o];if(s){clearTimeout(i.currentRepaint[o]);i.currentRepaint[o]=setTimeout((function(){var i=r.filter((function(e,t){return t===o&&n[t]!==a[t]}));_(e,t,i,r);a[o]=n[o]}))}}function H(e,t,r,i){return function o(){var s=a.select(t.parentNode);s.each((function(e){var t=e.fragments;s.selectAll("tspan.line").each((function(e,r){t[r].width=this.getComputedTextLength()}));var r=t[t.length-1].width;var a=t.slice(0,-1);var i=[];var o,l;var u=0;var f=e.column.columnWidth-2*n.cellPad;e.value="";while(a.length){o=a.shift();l=o.width+r;if(u+l>f){e.value+=i.join(n.wrapSpacer)+n.lineBreaker;i=[];u=0}i.push(o.text);u+=l}if(u){e.value+=i.join(n.wrapSpacer)}e.wrapped=true}));s.selectAll("tspan.line").remove();C(s.select("."+n.cn.cellText),r,e,i);a.select(t.parentNode.parentNode).call(Z)}}function q(e,t,r,i,o){return function s(){if(o.settledY)return;var l=a.select(t.parentNode);var u=J(o);var f=o.key-u.firstRowIndex;var v=u.rows[f].rowHeight;var h=o.cellHeightMayIncrease?t.parentNode.getBoundingClientRect().height+2*n.cellPad:v;var p=Math.max(h,v);var d=p-u.rows[f].rowHeight;if(d){u.rows[f].rowHeight=p;e.selectAll("."+n.cn.columnCell).call(Z);j(null,e.filter(R),0);b(r,i,true)}l.attr("transform",(function(){var e=this;var t=e.parentNode;var r=t.getBoundingClientRect();var i=a.select(e.parentNode).select("."+n.cn.cellRect).node().getBoundingClientRect();var s=e.transform.baseVal.consolidate();var l=i.top-r.top+(s?s.matrix.f:n.cellPad);return c(G(o,a.select(e.parentNode).select("."+n.cn.cellTextHolder).node().getBoundingClientRect().width),l)}));o.settledY=true}}function G(e,t){switch(e.align){case"left":return n.cellPad;case"right":return e.column.columnWidth-(t||0)-n.cellPad;case"center":return(e.column.columnWidth-(t||0))/2;default:return n.cellPad}}function Z(e){e.attr("transform",(function(e){var t=e.rowBlocks[0].auxiliaryBlocks.reduce((function(e,t){return e+W(t,Infinity)}),0);var r=J(e);var n=W(r,e.key);var a=n+t;return c(0,a)})).selectAll("."+n.cn.cellRect).attr("height",(function(e){return K(J(e),e.key).rowHeight}))}function Y(e,t){var r=0;for(var n=t-1;n>=0;n--){r+=X(e[n])}return r}function W(e,t){var r=0;for(var n=0;n<e.rows.length&&e.rows[n].rowIndex<t;n++){r+=e.rows[n].rowHeight}return r}function X(e){var t=e.allRowsHeight;if(t!==void 0){return t}var r=0;for(var n=0;n<e.rows.length;n++){r+=e.rows[n].rowHeight}e.allRowsHeight=r;return r}function J(e){return e.rowBlocks[e.page]}function K(e,t){return e.rows[t-e.firstRowIndex]}},45802:function(e,t,r){"use strict";var n=r(5386).fF;var a=r(5386).si;var i=r(50693);var o=r(27670).Y;var s=r(34e3);var l=r(57564);var u=r(43473);var f=r(1426).extendFlat;var c=r(79952).u;e.exports={labels:l.labels,parents:l.parents,values:l.values,branchvalues:l.branchvalues,count:l.count,level:l.level,maxdepth:l.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:f({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:l.marker.colors,pattern:c,depthfade:{valType:"enumerated",values:[true,false,"reversed"],editType:"style"},line:l.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},i("marker",{colorAttr:"colors",anim:false})),pathbar:{visible:{valType:"boolean",dflt:true,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:f({},s.textfont,{}),editType:"calc"},text:s.text,textinfo:l.textinfo,texttemplate:a({editType:"plot"},{keys:u.eventDataKeys.concat(["label","value"])}),hovertext:s.hovertext,hoverinfo:l.hoverinfo,hovertemplate:n({},{keys:u.eventDataKeys}),textfont:s.textfont,insidetextfont:s.insidetextfont,outsidetextfont:f({},s.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:s.sort,root:l.root,domain:o({name:"treemap",trace:true,editType:"calc"})}},78018:function(e,t,r){"use strict";var n=r(74875);t.name="treemap";t.plot=function(e,r,a,i){n.plotBasePlot(t.name,e,r,a,i)};t.clean=function(e,r,a,i){n.cleanBasePlot(t.name,e,r,a,i)}},65039:function(e,t,r){"use strict";var n=r(52147);t.y=function(e,t){return n.calc(e,t)};t.T=function(e){return n._runCrossTraceCalc("treemap",e)}},43473:function(e){"use strict";e.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},91174:function(e,t,r){"use strict";var n=r(71828);var a=r(45802);var i=r(7901);var o=r(27670).c;var s=r(90769).handleText;var l=r(97313).TEXTPAD;var u=r(37434).handleMarkerDefaults;var f=r(21081);var c=f.hasColorscale;var v=f.handleDefaults;e.exports=function e(t,r,f,h){function p(e,i){return n.coerce(t,r,a,e,i)}var d=p("labels");var g=p("parents");if(!d||!d.length||!g||!g.length){r.visible=false;return}var y=p("values");if(y&&y.length){p("branchvalues")}else{p("count")}p("level");p("maxdepth");var m=p("tiling.packing");if(m==="squarify"){p("tiling.squarifyratio")}p("tiling.flip");p("tiling.pad");var x=p("text");p("texttemplate");if(!r.texttemplate)p("textinfo",Array.isArray(x)?"text+label":"label");p("hovertext");p("hovertemplate");var b=p("pathbar.visible");var _="auto";s(t,r,h,p,_,{hasPathbar:b,moduleHasSelected:false,moduleHasUnselected:false,moduleHasConstrain:false,moduleHasCliponaxis:false,moduleHasTextangle:false,moduleHasInsideanchor:false});p("textposition");var w=r.textposition.indexOf("bottom")!==-1;u(t,r,h,p);var T=r._hasColorscale=c(t,"marker","colors")||(t.marker||{}).coloraxis;if(T){v(t,r,h,p,{prefix:"marker.",cLetter:"c"})}else{p("marker.depthfade",!(r.marker.colors||[]).length)}var k=r.textfont.size*2;p("marker.pad.t",w?k/4:k);p("marker.pad.l",k/4);p("marker.pad.r",k/4);p("marker.pad.b",w?k:k/4);p("marker.cornerradius");r._hovered={marker:{line:{width:2,color:i.contrast(h.paper_bgcolor)}}};if(b){p("pathbar.thickness",r.pathbar.textfont.size+2*l);p("pathbar.side");p("pathbar.edgeshape")}p("sort");p("root.color");o(r,h,p);r._length=null}},80694:function(e,t,r){"use strict";var n=r(39898);var a=r(2791);var i=r(72597);var o=i.clearMinTextSize;var s=r(16688).resizeText;var l=r(46650);e.exports=function e(t,r,i,u,f){var c=f.type;var v=f.drawDescendants;var h=t._fullLayout;var p=h["_"+c+"layer"];var d,g;var y=!i;o(c,h);d=p.selectAll("g.trace."+c).data(r,(function(e){return e[0].trace.uid}));d.enter().append("g").classed("trace",true).classed(c,true);d.order();if(!h.uniformtext.mode&&a.hasTransition(i)){if(u){g=u()}var m=n.transition().duration(i.duration).ease(i.easing).each("end",(function(){g&&g()})).each("interrupt",(function(){g&&g()}));m.each((function(){p.selectAll("g.trace").each((function(e){l(t,e,this,i,v)}))}))}else{d.each((function(e){l(t,e,this,i,v)}));if(h.uniformtext.mode){s(t,p.selectAll(".trace"),c)}}if(y){d.exit().remove()}}},66209:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);var i=r(91424);var o=r(63893);var s=r(37210);var l=r(96362).styleOne;var u=r(43473);var f=r(2791);var c=r(83523);var v=true;e.exports=function e(t,r,h,p,d){var g=d.barDifY;var y=d.width;var m=d.height;var x=d.viewX;var b=d.viewY;var _=d.pathSlice;var w=d.toMoveInsideSlice;var T=d.strTransform;var k=d.hasTransition;var A=d.handleSlicesExit;var M=d.makeUpdateSliceInterpolator;var S=d.makeUpdateTextInterpolator;var E={};var L=t._context.staticPlot;var C=t._fullLayout;var I=r[0];var P=I.trace;var O=I.hierarchy;var D=y/P._entryDepth;var z=f.listPath(h.data,"id");var R=s(O.copy(),[y,m],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();R=R.filter((function(e){var t=z.indexOf(e.data.id);if(t===-1)return false;e.x0=D*t;e.x1=D*(t+1);e.y0=g;e.y1=g+m;e.onPathbar=true;return true}));R.reverse();p=p.data(R,f.getPtId);p.enter().append("g").classed("pathbar",true);A(p,v,E,[y,m],_);p.order();var F=p;if(k){F=F.transition().each("end",(function(){var e=n.select(this);f.setSliceCursor(e,t,{hideOnRoot:false,hideOnLeaves:false,isTransitioning:false})}))}F.each((function(e){e._x0=x(e.x0);e._x1=x(e.x1);e._y0=b(e.y0);e._y1=b(e.y1);e._hoverX=x(e.x1-Math.min(y,m)/2);e._hoverY=b(e.y1-m/2);var s=n.select(this);var p=a.ensureSingle(s,"path","surface",(function(e){e.style("pointer-events",L?"none":"all")}));if(k){p.transition().attrTween("d",(function(e){var t=M(e,v,E,[y,m]);return function(e){return _(t(e))}}))}else{p.attr("d",_)}s.call(c,h,t,r,{styleOne:l,eventDataKeys:u.eventDataKeys,transitionTime:u.CLICK_TRANSITION_TIME,transitionEasing:u.CLICK_TRANSITION_EASING}).call(f.setSliceCursor,t,{hideOnRoot:false,hideOnLeaves:false,isTransitioning:t._transitioning});p.call(l,e,P,t,{hovered:false});e._text=(f.getPtLabel(e)||"").split("<br>").join(" ")||"";var d=a.ensureSingle(s,"g","slicetext");var g=a.ensureSingle(d,"text","",(function(e){e.attr("data-notex",1)}));var A=a.ensureUniformFontSize(t,f.determineTextFont(P,e,C.font,{onPathbar:true}));g.text(e._text||" ").classed("slicetext",true).attr("text-anchor","start").call(i.font,A).call(o.convertToTspans,t);e.textBB=i.bBox(g.node());e.transform=w(e,{fontSize:A.size,onPathbar:true});e.transform.fontSize=A.size;if(k){g.transition().attrTween("transform",(function(e){var t=S(e,v,E,[y,m]);return function(e){return T(t(e))}}))}else{g.attr("transform",T(e))}}))}},52583:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);var i=r(91424);var o=r(63893);var s=r(37210);var l=r(96362).styleOne;var u=r(43473);var f=r(2791);var c=r(83523);var v=r(24714).formatSliceLabel;var h=false;e.exports=function e(t,r,p,d,g){var y=g.width;var m=g.height;var x=g.viewX;var b=g.viewY;var _=g.pathSlice;var w=g.toMoveInsideSlice;var T=g.strTransform;var k=g.hasTransition;var A=g.handleSlicesExit;var M=g.makeUpdateSliceInterpolator;var S=g.makeUpdateTextInterpolator;var E=g.prevEntry;var L={};var C=t._context.staticPlot;var I=t._fullLayout;var P=r[0];var O=P.trace;var D=O.textposition.indexOf("left")!==-1;var z=O.textposition.indexOf("right")!==-1;var R=O.textposition.indexOf("bottom")!==-1;var F=!R&&!O.marker.pad.t||R&&!O.marker.pad.b;var B=s(p,[y,m],{packing:O.tiling.packing,squarifyratio:O.tiling.squarifyratio,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,pad:{inner:O.tiling.pad,top:O.marker.pad.t,left:O.marker.pad.l,right:O.marker.pad.r,bottom:O.marker.pad.b}});var N=B.descendants();var j=Infinity;var U=-Infinity;N.forEach((function(e){var t=e.depth;if(t>=O._maxDepth){e.x0=e.x1=(e.x0+e.x1)/2;e.y0=e.y1=(e.y0+e.y1)/2}else{j=Math.min(j,t);U=Math.max(U,t)}}));d=d.data(N,f.getPtId);O._maxVisibleLayers=isFinite(U)?U-j+1:0;d.enter().append("g").classed("slice",true);A(d,h,L,[y,m],_);d.order();var V=null;if(k&&E){var H=f.getPtId(E);d.each((function(e){if(V===null&&f.getPtId(e)===H){V={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1}}}))}var q=function(){return V||{x0:0,x1:y,y0:0,y1:m}};var G=d;if(k){G=G.transition().each("end",(function(){var e=n.select(this);f.setSliceCursor(e,t,{hideOnRoot:true,hideOnLeaves:false,isTransitioning:false})}))}G.each((function(e){var s=f.isHeader(e,O);e._x0=x(e.x0);e._x1=x(e.x1);e._y0=b(e.y0);e._y1=b(e.y1);e._hoverX=x(e.x1-O.marker.pad.r),e._hoverY=R?b(e.y1-O.marker.pad.b/2):b(e.y0+O.marker.pad.t/2);var d=n.select(this);var g=a.ensureSingle(d,"path","surface",(function(e){e.style("pointer-events",C?"none":"all")}));if(k){g.transition().attrTween("d",(function(e){var t=M(e,h,q(),[y,m]);return function(e){return _(t(e))}}))}else{g.attr("d",_)}d.call(c,p,t,r,{styleOne:l,eventDataKeys:u.eventDataKeys,transitionTime:u.CLICK_TRANSITION_TIME,transitionEasing:u.CLICK_TRANSITION_EASING}).call(f.setSliceCursor,t,{isTransitioning:t._transitioning});g.call(l,e,O,t,{hovered:false});if(e.x0===e.x1||e.y0===e.y1){e._text=""}else{if(s){e._text=F?"":f.getPtLabel(e)||""}else{e._text=v(e,p,O,r,I)||""}}var A=a.ensureSingle(d,"g","slicetext");var E=a.ensureSingle(A,"text","",(function(e){e.attr("data-notex",1)}));var L=a.ensureUniformFontSize(t,f.determineTextFont(O,e,I.font));E.text(e._text||" ").classed("slicetext",true).attr("text-anchor",z?"end":D||s?"start":"middle").call(i.font,L).call(o.convertToTspans,t);e.textBB=i.bBox(E.node());e.transform=w(e,{fontSize:L.size,isHeader:s});e.transform.fontSize=L.size;if(k){E.transition().attrTween("transform",(function(e){var t=S(e,h,q(),[y,m]);return function(e){return T(t(e))}}))}else{E.attr("transform",T(e))}}));return V}},14102:function(e){"use strict";e.exports=function e(t,r,n){var a;if(n.swapXY){a=t.x0;t.x0=t.y0;t.y0=a;a=t.x1;t.x1=t.y1;t.y1=a}if(n.flipX){a=t.x0;t.x0=r[0]-t.x1;t.x1=r[0]-a}if(n.flipY){a=t.y0;t.y0=r[1]-t.y1;t.y1=r[1]-a}var i=t.children;if(i){for(var o=0;o<i.length;o++){e(i[o],r,n)}}}},70954:function(e,t,r){"use strict";e.exports={moduleType:"trace",name:"treemap",basePlotModule:r(78018),categories:[],animatable:true,attributes:r(45802),layoutAttributes:r(55479),supplyDefaults:r(91174),supplyLayoutDefaults:r(77182),calc:r(65039).y,crossTraceCalc:r(65039).T,plot:r(5893),style:r(96362).style,colorbar:r(4898),meta:{}}},55479:function(e){"use strict";e.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:true,editType:"calc"}}},77182:function(e,t,r){"use strict";var n=r(71828);var a=r(55479);e.exports=function e(t,r){function i(e,i){return n.coerce(t,r,a,e,i)}i("treemapcolorway",r.colorway);i("extendtreemapcolors")}},37210:function(e,t,r){"use strict";var n=r(674);var a=r(14102);e.exports=function e(t,r,o){var s=o.flipX;var l=o.flipY;var u=o.packing==="dice-slice";var f=o.pad[l?"bottom":"top"];var c=o.pad[s?"right":"left"];var v=o.pad[s?"left":"right"];var h=o.pad[l?"top":"bottom"];var p;if(u){p=c;c=f;f=p;p=v;v=h;h=p}var d=n.treemap().tile(i(o.packing,o.squarifyratio)).paddingInner(o.pad.inner).paddingLeft(c).paddingRight(v).paddingTop(f).paddingBottom(h).size(u?[r[1],r[0]]:r)(t);if(u||s||l){a(d,r,{swapXY:u,flipX:s,flipY:l})}return d};function i(e,t){switch(e){case"squarify":return n.treemapSquarify.ratio(t);case"binary":return n.treemapBinary;case"dice":return n.treemapDice;case"slice":return n.treemapSlice;default:return n.treemapSliceDice}}},5893:function(e,t,r){"use strict";var n=r(80694);var a=r(52583);e.exports=function e(t,r,i,o){return n(t,r,i,o,{type:"treemap",drawDescendants:a})}},46650:function(e,t,r){"use strict";var n=r(39898);var a=r(81684).sX;var i=r(2791);var o=r(71828);var s=r(97313).TEXTPAD;var l=r(17295);var u=l.toMoveInsideBar;var f=r(72597);var c=f.recordMinTextSize;var v=r(43473);var h=r(66209);function p(e){return i.isHierarchyRoot(e)?"":i.getPtId(e)}e.exports=function e(t,r,l,f,d){var g=t._fullLayout;var y=r[0];var m=y.trace;var x=m.type;var b=x==="icicle";var _=y.hierarchy;var w=i.findEntryWithLevel(_,m.level);var T=n.select(l);var k=T.selectAll("g.pathbar");var A=T.selectAll("g.slice");if(!w){k.remove();A.remove();return}var M=i.isHierarchyRoot(w);var S=!g.uniformtext.mode&&i.hasTransition(f);var E=i.getMaxDepth(m);var L=function(e){return e.data.depth-w.data.depth<E};var C=g._size;var I=m.domain;var P=C.w*(I.x[1]-I.x[0]);var O=C.h*(I.y[1]-I.y[0]);var D=P;var z=m.pathbar.thickness;var R=m.marker.line.width+v.gapWithPathbar;var F=!m.pathbar.visible?0:m.pathbar.side.indexOf("bottom")>-1?O+R:-(z+R);var B={x0:D,x1:D,y0:F,y1:F+z};var N=function(e,t,r){var n=m.tiling.pad;var a=function(e){return e-n<=t.x0};var i=function(e){return e+n>=t.x1};var o=function(e){return e-n<=t.y0};var s=function(e){return e+n>=t.y1};if(e.x0===t.x0&&e.x1===t.x1&&e.y0===t.y0&&e.y1===t.y1){return{x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1}}return{x0:a(e.x0-n)?0:i(e.x0-n)?r[0]:e.x0,x1:a(e.x1+n)?0:i(e.x1+n)?r[0]:e.x1,y0:o(e.y0-n)?0:s(e.y0-n)?r[1]:e.y0,y1:o(e.y1+n)?0:s(e.y1+n)?r[1]:e.y1}};var j=null;var U={};var V={};var H=null;var q=function(e,t){return t?U[p(e)]:V[p(e)]};var G=function(e,t,r,n){if(t){return U[p(_)]||B}else{var a=V[m.level]||r;if(L(e)){return N(e,a,n)}}return{}};if(y.hasMultipleRoots&&M){E++}m._maxDepth=E;m._backgroundColor=g.paper_bgcolor;m._entryDepth=w.data.depth;m._atRootLevel=M;var Z=-P/2+C.l+C.w*(I.x[1]+I.x[0])/2;var Y=-O/2+C.t+C.h*(1-(I.y[1]+I.y[0])/2);var W=function(e){return Z+e};var X=function(e){return Y+e};var J=X(0);var K=W(0);var $=function(e){return K+e};var Q=function(e){return J+e};function ee(e,t){return e+","+t}var te=$(0);var re=function(e){e.x=Math.max(te,e.x)};var ne=m.pathbar.edgeshape;var ae=function(e){var t=$(Math.max(Math.min(e.x0,e.x0),0));var r=$(Math.min(Math.max(e.x1,e.x1),D));var n=Q(e.y0);var a=Q(e.y1);var i=z/2;var o={};var s={};o.x=t;s.x=r;o.y=s.y=(n+a)/2;var l={x:t,y:n};var u={x:r,y:n};var f={x:r,y:a};var c={x:t,y:a};if(ne===">"){l.x-=i;u.x-=i;f.x-=i;c.x-=i}else if(ne==="/"){f.x-=i;c.x-=i;o.x-=i/2;s.x-=i/2}else if(ne==="\\"){l.x-=i;u.x-=i;o.x-=i/2;s.x-=i/2}else if(ne==="<"){o.x-=i;s.x-=i}re(l);re(c);re(o);re(u);re(f);re(s);return"M"+ee(l.x,l.y)+"L"+ee(u.x,u.y)+"L"+ee(s.x,s.y)+"L"+ee(f.x,f.y)+"L"+ee(c.x,c.y)+"L"+ee(o.x,o.y)+"Z"};var ie=m[b?"tiling":"marker"].pad;var oe=function(e){return m.textposition.indexOf(e)!==-1};var se=oe("top");var le=oe("left");var ue=oe("right");var fe=oe("bottom");var ce=function(e){var t=W(e.x0);var r=W(e.x1);var n=X(e.y0);var a=X(e.y1);var i=r-t;var o=a-n;if(!i||!o)return"";var s=m.marker.cornerradius||0;var l=Math.min(s,i/2,o/2);if(l&&e.data&&e.data.data&&e.data.data.label){if(se)l=Math.min(l,ie.t);if(le)l=Math.min(l,ie.l);if(ue)l=Math.min(l,ie.r);if(fe)l=Math.min(l,ie.b)}var u=function(e,t){return l?"a"+ee(l,l)+" 0 0 1 "+ee(e,t):""};return"M"+ee(t,n+l)+u(l,-l)+"L"+ee(r-l,n)+u(l,l)+"L"+ee(r,a-l)+u(-l,l)+"L"+ee(t+l,a)+u(-l,-l)+"Z"};var ve=function(e,t){var r=e.x0;var n=e.x1;var a=e.y0;var i=e.y1;var o=e.textBB;var l=se||t.isHeader&&!fe;var f=l?"start":fe?"end":"middle";var v=oe("right");var h=oe("left")||t.onPathbar;var p=h?-1:v?1:0;if(t.isHeader){r+=(b?ie:ie.l)-s;n-=(b?ie:ie.r)-s;if(r>=n){var d=(r+n)/2;r=d;n=d}var y;if(fe){y=i-(b?ie:ie.b);if(a<y&&y<i)a=y}else{y=a+(b?ie:ie.t);if(a<y&&y<i)i=y}}var x=u(r,n,a,i,o,{isHorizontal:false,constrained:true,angle:0,anchor:f,leftToRight:p});x.fontSize=t.fontSize;x.targetX=W(x.targetX);x.targetY=X(x.targetY);if(isNaN(x.targetX)||isNaN(x.targetY)){return{}}if(r!==n&&a!==i){c(m.type,x,g)}return{scale:x.scale,rotate:x.rotate,textX:x.textX,textY:x.textY,anchorX:x.anchorX,anchorY:x.anchorY,targetX:x.targetX,targetY:x.targetY}};var he=function(e,t){var r;var n=0;var a=e;while(!r&&n<E){n++;a=a.parent;if(a){r=q(a,t)}else n=E}return r||{}};var pe=function(e,t,r,n){var i=q(e,t);var o;if(t){o=B}else{var s=q(w,t);if(s){o=N(e,s,n)}else{o={}}}return a(i,o)};var de=function(e,t,r,n,i){var s=q(e,t);var l;if(s){l=s}else{if(t){l=B}else{if(j){if(e.parent){var u=H||r;if(u&&!t){l=N(e,u,n)}else{l={};o.extendFlat(l,he(e,t))}}else{l=o.extendFlat({},e);if(b){if(i.orientation==="h"){if(i.flipX)l.x0=e.x1;else l.x1=0}else{if(i.flipY)l.y0=e.y1;else l.y1=0}}}}else{l={}}}}return a(l,{x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1})};var ge=function(e,t,r,n){var s=q(e,t);var l={};var u=G(e,t,r,n);o.extendFlat(l,{transform:ve({x0:u.x0,x1:u.x1,y0:u.y0,y1:u.y1,textBB:e.textBB,_text:e._text},{isHeader:i.isHeader(e,m)})});if(s){l=s}else{if(e.parent){o.extendFlat(l,he(e,t))}}var f=e.transform;if(e.x0!==e.x1&&e.y0!==e.y1){c(m.type,f,g)}return a(l,{transform:{scale:f.scale,rotate:f.rotate,textX:f.textX,textY:f.textY,anchorX:f.anchorX,anchorY:f.anchorY,targetX:f.targetX,targetY:f.targetY}})};var ye=function(e,t,r,a,i){var o=a[0];var s=a[1];if(S){e.exit().transition().each((function(){var e=n.select(this);var a=e.select("path.surface");a.transition().attrTween("d",(function(e){var n=pe(e,t,r,[o,s]);return function(e){return i(n(e))}}));var l=e.select("g.slicetext");l.attr("opacity",0)})).remove()}else{e.exit().remove()}};var me=function(e){var t=e.transform;if(e.x0!==e.x1&&e.y0!==e.y1){c(m.type,t,g)}return o.getTextTransform({textX:t.textX,textY:t.textY,anchorX:t.anchorX,anchorY:t.anchorY,targetX:t.targetX,targetY:t.targetY,scale:t.scale,rotate:t.rotate})};if(S){k.each((function(e){U[p(e)]={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1};if(e.transform){U[p(e)].transform={textX:e.transform.textX,textY:e.transform.textY,anchorX:e.transform.anchorX,anchorY:e.transform.anchorY,targetX:e.transform.targetX,targetY:e.transform.targetY,scale:e.transform.scale,rotate:e.transform.rotate}}}));A.each((function(e){V[p(e)]={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1};if(e.transform){V[p(e)].transform={textX:e.transform.textX,textY:e.transform.textY,anchorX:e.transform.anchorX,anchorY:e.transform.anchorY,targetX:e.transform.targetX,targetY:e.transform.targetY,scale:e.transform.scale,rotate:e.transform.rotate}}if(!j&&i.isEntry(e)){j=e}}))}H=d(t,r,w,A,{width:P,height:O,viewX:W,viewY:X,pathSlice:ce,toMoveInsideSlice:ve,prevEntry:j,makeUpdateSliceInterpolator:de,makeUpdateTextInterpolator:ge,handleSlicesExit:ye,hasTransition:S,strTransform:me});if(m.pathbar.visible){h(t,r,w,k,{barDifY:F,width:D,height:z,viewX:$,viewY:Q,pathSlice:ae,toMoveInsideSlice:ve,makeUpdateSliceInterpolator:de,makeUpdateTextInterpolator:ge,handleSlicesExit:ye,hasTransition:S,strTransform:me})}else{k.remove()}}},96362:function(e,t,r){"use strict";var n=r(39898);var a=r(7901);var i=r(71828);var o=r(2791);var s=r(72597).resizeText;var l=r(43467);function u(e){var t=e._fullLayout._treemaplayer.selectAll(".trace");s(e,t,"treemap");t.each((function(t){var r=n.select(this);var a=t[0];var i=a.trace;r.style("opacity",i.opacity);r.selectAll("path.surface").each((function(t){n.select(this).call(f,t,i,e,{hovered:false})}))}))}function f(e,t,r,n,s){var u=(s||{}).hovered;var f=t.data.data;var c=f.i;var v;var h;var p=f.color;var d=o.isHierarchyRoot(t);var g=1;if(u){v=r._hovered.marker.line.color;h=r._hovered.marker.line.width}else{if(d&&p===r.root.color){g=100;v="rgba(0,0,0,0)";h=0}else{v=i.castOption(r,c,"marker.line.color")||a.defaultLine;h=i.castOption(r,c,"marker.line.width")||0;if(!r._hasColorscale&&!t.onPathbar){var y=r.marker.depthfade;if(y){var m=a.combine(a.addOpacity(r._backgroundColor,.75),p);var x;if(y===true){var b=o.getMaxDepth(r);if(isFinite(b)){if(o.isLeaf(t)){x=0}else{x=r._maxVisibleLayers-(t.data.depth-r._entryDepth)}}else{x=t.data.height+1}}else{x=t.data.depth-r._entryDepth;if(!r._atRootLevel)x++}if(x>0){for(var _=0;_<x;_++){var w=.5*_/x;p=a.combine(a.addOpacity(m,w),p)}}}}}}e.call(l,t,r,n,p).style("stroke-width",h).call(a.stroke,v).style("opacity",g)}e.exports={style:u,styleOne:f}},68875:function(e,t,r){"use strict";var n=r(53522);var a=r(1426).extendFlat;var i=r(12663).axisHoverFormat;e.exports={y:n.y,x:n.x,x0:n.x0,y0:n.y0,xhoverformat:i("x"),yhoverformat:i("y"),name:a({},n.name,{}),orientation:a({},n.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:n.fillcolor,points:a({},n.boxpoints,{}),jitter:a({},n.jitter,{}),pointpos:a({},n.pointpos,{}),width:a({},n.width,{}),marker:n.marker,text:n.text,hovertext:n.hovertext,hovertemplate:n.hovertemplate,quartilemethod:n.quartilemethod,box:{visible:{valType:"boolean",dflt:false,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:false,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:n.offsetgroup,alignmentgroup:n.alignmentgroup,selected:n.selected,unselected:n.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},38603:function(e,t,r){"use strict";var n=r(71828);var a=r(89298);var i=r(48518);var o=r(60168);var s=r(50606).BADNUM;e.exports=function e(t,r){var s=i(t,r);if(s[0].t.empty)return s;var l=t._fullLayout;var c=a.getFromId(t,r[r.orientation==="h"?"xaxis":"yaxis"]);var v=Infinity;var h=-Infinity;var p=0;var d=0;for(var g=0;g<s.length;g++){var y=s[g];var m=y.pts.map(o.extractVal);var x=y.bandwidth=u(r,y,m);var b=y.span=f(r,y,c,x);if(y.min===y.max&&x===0){b=y.span=[y.min,y.max];y.density=[{v:1,t:b[0]}];y.bandwidth=x;p=Math.max(p,1)}else{var _=b[1]-b[0];var w=Math.ceil(_/(x/3));var T=_/w;if(!isFinite(T)||!isFinite(w)){n.error("Something went wrong with computing the violin span");s[0].t.empty=true;return s}var k=o.makeKDE(y,r,m);y.density=new Array(w);for(var A=0,M=b[0];M<b[1]+T/2;A++,M+=T){var S=k(M);y.density[A]={v:S,t:M};p=Math.max(p,S)}}d=Math.max(d,m.length);v=Math.min(v,b[0]);h=Math.max(h,b[1])}var E=a.findExtremes(c,[v,h],{padded:true});r._extremes[c._id]=E;if(r.width){s[0].t.maxKDE=p}else{var L=l._violinScaleGroupStats;var C=r.scalegroup;var I=L[C];if(I){I.maxKDE=Math.max(I.maxKDE,p);I.maxCount=Math.max(I.maxCount,d)}else{L[C]={maxKDE:p,maxCount:d}}}s[0].t.labels.kde=n._(t,"kde:");return s};function l(e,t,r){var n=Math.min(t,r/1.349);return 1.059*n*Math.pow(e,-.2)}function u(e,t,r){var a=t.max-t.min;if(!a){if(e.bandwidth){return e.bandwidth}else{return 0}}if(e.bandwidth){return Math.max(e.bandwidth,a/1e4)}else{var i=r.length;var o=n.stdev(r,i-1,t.mean);return Math.max(l(i,o,t.q3-t.q1),a/100)}}function f(e,t,r,n){var i=e.spanmode;var o=e.span||[];var l=[t.min,t.max];var u=[t.min-2*n,t.max+2*n];var f;function c(n){var a=o[n];var i=r.type==="multicategory"?r.r2c(a):r.d2c(a,0,e[t.valLetter+"calendar"]);return i===s?u[n]:i}if(i==="soft"){f=u}else if(i==="hard"){f=l}else{f=[c(0),c(1)]}var v={type:"linear",range:f};a.setConvert(v);v.cleanRange();return f}},86403:function(e,t,r){"use strict";var n=r(37188).setPositionOffset;var a=["v","h"];e.exports=function e(t,r){var i=t.calcdata;var o=r.xaxis;var s=r.yaxis;for(var l=0;l<a.length;l++){var u=a[l];var f=u==="h"?s:o;var c=[];for(var v=0;v<i.length;v++){var h=i[v];var p=h[0].t;var d=h[0].trace;if(d.visible===true&&d.type==="violin"&&!p.empty&&d.orientation===u&&d.xaxis===o._id&&d.yaxis===s._id){c.push(v)}}n("violin",t,c,f)}}},15899:function(e,t,r){"use strict";var n=r(71828);var a=r(7901);var i=r(36411);var o=r(68875);e.exports=function e(t,r,s,l){function u(e,a){return n.coerce(t,r,o,e,a)}function f(e,a){return n.coerce2(t,r,o,e,a)}i.handleSampleDefaults(t,r,u,l);if(r.visible===false)return;u("bandwidth");u("side");var c=u("width");if(!c){u("scalegroup",r.name);u("scalemode")}var v=u("span");var h;if(Array.isArray(v))h="manual";u("spanmode",h);var p=u("line.color",(t.marker||{}).color||s);var d=u("line.width");var g=u("fillcolor",a.addOpacity(r.line.color,.5));i.handlePointsDefaults(t,r,u,{prefix:""});var y=f("box.width");var m=f("box.fillcolor",g);var x=f("box.line.color",p);var b=f("box.line.width",d);var _=u("box.visible",Boolean(y||m||x||b));if(!_)r.box={visible:false};var w=f("meanline.color",p);var T=f("meanline.width",d);var k=u("meanline.visible",Boolean(w||T));if(!k)r.meanline={visible:false};u("quartilemethod")}},60168:function(e,t,r){"use strict";var n=r(71828);var a={gaussian:function(e){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*e*e)}};t.makeKDE=function(e,t,r){var n=r.length;var i=a.gaussian;var o=e.bandwidth;var s=1/(n*o);return function(e){var t=0;for(var a=0;a<n;a++){t+=i((e-r[a])/o)}return s*t}};t.getPositionOnKdePath=function(e,t,r){var a,i;if(t.orientation==="h"){a="y";i="x"}else{a="x";i="y"}var o=n.findPointOnPath(e.path,r,i,{pathLength:e.pathLength});var s=e.posCenterPx;var l=o[a];var u=t.side==="both"?2*s-l:s;return[l,u]};t.getKdeValue=function(e,r,n){var a=e.pts.map(t.extractVal);var i=t.makeKDE(e,r,a);return i(n)/e.posDensityScale};t.extractVal=function(e){return e.v}},57634:function(e,t,r){"use strict";var n=r(7901);var a=r(71828);var i=r(89298);var o=r(41868);var s=r(60168);e.exports=function e(t,r,l,u,f){if(!f)f={};var c=f.hoverLayer;var v=t.cd;var h=v[0].trace;var p=h.hoveron;var d=p.indexOf("violins")!==-1;var g=p.indexOf("kde")!==-1;var y=[];var m;var x;if(d||g){var b=o.hoverOnBoxes(t,r,l,u);if(g&&b.length>0){var _=t.xa;var w=t.ya;var T,k,A,M,S;if(h.orientation==="h"){S=r;T="y";A=w;k="x";M=_}else{S=l;T="x";A=_;k="y";M=w}var E=v[t.index];if(S>=E.span[0]&&S<=E.span[1]){var L=a.extendFlat({},t);var C=M.c2p(S,true);var I=s.getKdeValue(E,h,S);var P=s.getPositionOnKdePath(E,h,C);var O=A._offset;var D=A._length;L[T+"0"]=P[0];L[T+"1"]=P[1];L[k+"0"]=L[k+"1"]=C;L[k+"Label"]=k+": "+i.hoverLabelText(M,S,h[k+"hoverformat"])+", "+v[0].t.labels.kde+" "+I.toFixed(3);var z=0;for(var R=0;R<b.length;R++){if(b[R].attr==="med"){z=R;break}}L.spikeDistance=b[z].spikeDistance;var F=T+"Spike";L[F]=b[z][F];b[z].spikeDistance=undefined;b[z][F]=undefined;L.hovertemplate=false;y.push(L);x={};x[T+"1"]=a.constrain(O+P[0],O,O+D);x[T+"2"]=a.constrain(O+P[1],O,O+D);x[k+"1"]=x[k+"2"]=M._offset+C}}if(d){y=y.concat(b)}}if(p.indexOf("points")!==-1){m=o.hoverOnPoints(t,r,l)}var B=c.selectAll(".violinline-"+h.uid).data(x?[0]:[]);B.enter().append("line").classed("violinline-"+h.uid,true).attr("stroke-width",1.5);B.exit().remove();B.attr(x).call(n.stroke,t.color);if(u==="closest"){if(m)return[m];return y}if(m){y.push(m);return y}return y}},47462:function(e,t,r){"use strict";e.exports={attributes:r(68875),layoutAttributes:r(9228),supplyDefaults:r(15899),crossTraceDefaults:r(36411).crossTraceDefaults,supplyLayoutDefaults:r(33598),calc:r(38603),crossTraceCalc:r(86403),plot:r(28443),style:r(31847),styleOnSelect:r(16296).styleOnSelect,hoverPoints:r(57634),selectPoints:r(24626),moduleType:"trace",name:"violin",basePlotModule:r(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},9228:function(e,t,r){"use strict";var n=r(40094);var a=r(71828).extendFlat;e.exports={violinmode:a({},n.boxmode,{}),violingap:a({},n.boxgap,{}),violingroupgap:a({},n.boxgroupgap,{})}},33598:function(e,t,r){"use strict";var n=r(71828);var a=r(9228);var i=r(4199);e.exports=function e(t,r,o){function s(e,i){return n.coerce(t,r,a,e,i)}i._supply(t,r,o,s,"violin")}},28443:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);var i=r(91424);var o=r(86047);var s=r(34621);var l=r(60168);e.exports=function e(t,r,u,f){var c=t._context.staticPlot;var v=t._fullLayout;var h=r.xaxis;var p=r.yaxis;function d(e,t){var r=s(e,{xaxis:h,yaxis:p,trace:t,connectGaps:true,baseTolerance:.75,shape:"spline",simplify:true,linearized:true});return i.smoothopen(r[0],1)}a.makeTraceGroups(f,u,"trace violins").each((function(e){var t=n.select(this);var i=e[0];var s=i.t;var u=i.trace;if(u.visible!==true||s.empty){t.remove();return}var f=s.bPos;var g=s.bdPos;var y=r[s.valLetter+"axis"];var m=r[s.posLetter+"axis"];var x=u.side==="both";var b=x||u.side==="positive";var _=x||u.side==="negative";var w=t.selectAll("path.violin").data(a.identity);w.enter().append("path").style("vector-effect",c?"none":"non-scaling-stroke").attr("class","violin");w.exit().remove();w.each((function(e){var t=n.select(this);var r=e.density;var a=r.length;var i=m.c2l(e.pos+f,true);var o=m.l2p(i);var l;if(u.width){l=s.maxKDE/g}else{var c=v._violinScaleGroupStats[u.scalegroup];l=u.scalemode==="count"?c.maxKDE/g*(c.maxCount/e.pts.length):c.maxKDE/g}var h,p,w;var T,k,A,M;if(b){A=new Array(a);for(T=0;T<a;T++){M=A[T]={};M[s.posLetter]=i+r[T].v/l;M[s.valLetter]=y.c2l(r[T].t,true)}h=d(A,u)}if(_){A=new Array(a);for(k=0,T=a-1;k<a;k++,T--){M=A[k]={};M[s.posLetter]=i-r[T].v/l;M[s.valLetter]=y.c2l(r[T].t,true)}p=d(A,u)}if(x){w=h+"L"+p.substr(1)+"Z"}else{var S=[o,y.c2p(r[0].t)];var E=[o,y.c2p(r[a-1].t)];if(u.orientation==="h"){S.reverse();E.reverse()}if(b){w="M"+S+"L"+h.substr(1)+"L"+E}else{w="M"+E+"L"+p.substr(1)+"L"+S}}t.attr("d",w);e.posCenterPx=o;e.posDensityScale=l*g;e.path=t.node();e.pathLength=e.path.getTotalLength()/(x?2:1)}));var T=u.box;var k=T.width;var A=(T.line||{}).width;var M;var S;if(x){M=g*k;S=0}else if(b){M=[0,g*k/2];S=A*{x:1,y:-1}[s.posLetter]}else{M=[g*k/2,0];S=A*{x:-1,y:1}[s.posLetter]}o.plotBoxAndWhiskers(t,{pos:m,val:y},u,{bPos:f,bdPos:M,bPosPxOffset:S});o.plotBoxMean(t,{pos:m,val:y},u,{bPos:f,bdPos:M,bPosPxOffset:S});var E;if(!u.box.visible&&u.meanline.visible){E=a.identity}var L=t.selectAll("path.meanline").data(E||[]);L.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",c?"none":"non-scaling-stroke");L.exit().remove();L.each((function(e){var t=y.c2p(e.mean,true);var r=l.getPositionOnKdePath(e,u,t);n.select(this).attr("d",u.orientation==="h"?"M"+t+","+r[0]+"V"+r[1]:"M"+r[0]+","+t+"H"+r[1])}));o.plotPoints(t,{x:h,y:p},u,s)}))}},31847:function(e,t,r){"use strict";var n=r(39898);var a=r(7901);var i=r(16296).stylePoints;e.exports=function e(t){var r=n.select(t).selectAll("g.trace.violins");r.style("opacity",(function(e){return e[0].trace.opacity}));r.each((function(e){var r=e[0].trace;var o=n.select(this);var s=r.box||{};var l=s.line||{};var u=r.meanline||{};var f=u.width;o.selectAll("path.violin").style("stroke-width",r.line.width+"px").call(a.stroke,r.line.color).call(a.fill,r.fillcolor);o.selectAll("path.box").style("stroke-width",l.width+"px").call(a.stroke,l.color).call(a.fill,s.fillcolor);var c={"stroke-width":f+"px","stroke-dasharray":2*f+"px,"+f+"px"};o.selectAll("path.mean").style(c).call(a.stroke,u.color);o.selectAll("path.meanline").style(c).call(a.stroke,u.color);i(o,r,t)}))}},16336:function(e,t,r){"use strict";var n=r(50693);var a=r(16249);var i=r(54532);var o=r(9012);var s=r(1426).extendFlat;var l=r(30962).overrideAll;var u=e.exports=l(s({x:a.x,y:a.y,z:a.z,value:a.value,isomin:a.isomin,isomax:a.isomax,surface:a.surface,spaceframe:{show:{valType:"boolean",dflt:false},fill:{valType:"number",min:0,max:1,dflt:1}},slices:a.slices,caps:a.caps,text:a.text,hovertext:a.hovertext,xhoverformat:a.xhoverformat,yhoverformat:a.yhoverformat,zhoverformat:a.zhoverformat,valuehoverformat:a.valuehoverformat,hovertemplate:a.hovertemplate},n("",{colorAttr:"`value`",showScaleDflt:true,editTypeOverride:"calc"}),{colorbar:a.colorbar,opacity:a.opacity,opacityscale:i.opacityscale,lightposition:a.lightposition,lighting:a.lighting,flatshading:a.flatshading,contour:a.contour,hoverinfo:s({},o.hoverinfo),showlegend:s({},o.showlegend,{dflt:false})}),"calc","nested");u.x.editType=u.y.editType=u.z.editType=u.value.editType="calc+clearAxisTypes";u.transforms=undefined},64809:function(e,t,r){"use strict";var n=r(9330).gl_mesh3d;var a=r(81697).parseColorScale;var i=r(78614);var o=r(21081).extractOpts;var s=r(90060);var l=r(22674).findNearestOnAxis;var u=r(22674).generateIsoMeshes;function f(e,t,r){this.scene=e;this.uid=r;this.mesh=t;this.name="";this.data=null;this.showContour=false}var c=f.prototype;c.handlePick=function(e){if(e.object===this.mesh){var t=e.data.index;var r=this.data._meshX[t];var n=this.data._meshY[t];var a=this.data._meshZ[t];var i=this.data._Ys.length;var o=this.data._Zs.length;var s=l(r,this.data._Xs).id;var u=l(n,this.data._Ys).id;var f=l(a,this.data._Zs).id;var c=e.index=f+o*u+o*i*s;e.traceCoordinate=[this.data._meshX[c],this.data._meshY[c],this.data._meshZ[c],this.data._value[c]];var v=this.data.hovertext||this.data.text;if(Array.isArray(v)&&v[c]!==undefined){e.textLabel=v[c]}else if(v){e.textLabel=v}return true}};c.update=function(e){var t=this.scene;var r=t.fullSceneLayout;this.data=u(e);function n(e,t,r,n){return t.map((function(t){return e.d2l(t,0,n)*r}))}var l=s(n(r.xaxis,e._meshX,t.dataScale[0],e.xcalendar),n(r.yaxis,e._meshY,t.dataScale[1],e.ycalendar),n(r.zaxis,e._meshZ,t.dataScale[2],e.zcalendar));var f=s(e._meshI,e._meshJ,e._meshK);var c={positions:l,cells:f,lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,opacityscale:e.opacityscale,contourEnable:e.contour.show,contourColor:i(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading};var v=o(e);c.vertexIntensity=e._meshIntensity;c.vertexIntensityBounds=[v.min,v.max];c.colormap=a(e);this.mesh.update(c)};c.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};function v(e,t){var r=e.glplot.gl;var a=n({gl:r});var i=new f(e,a,t.uid);a._trace=i;i.update(t);e.glplot.add(a);return i}e.exports=v},47651:function(e,t,r){"use strict";var n=r(71828);var a=r(16336);var i=r(82738).supplyIsoDefaults;var o=r(91831).opacityscaleDefaults;e.exports=function e(t,r,s,l){function u(e,i){return n.coerce(t,r,a,e,i)}i(t,r,s,l,u);o(t,r,l,u)}},17659:function(e,t,r){"use strict";e.exports={attributes:r(16336),supplyDefaults:r(47651),calc:r(56959),colorbar:{min:"cmin",max:"cmax"},plot:r(64809),moduleType:"trace",name:"volume",basePlotModule:r(58547),categories:["gl3d","showLegend"],meta:{}}},43037:function(e,t,r){"use strict";var n=r(1486);var a=r(82196).line;var i=r(9012);var o=r(12663).axisHoverFormat;var s=r(5386).fF;var l=r(5386).si;var u=r(48334);var f=r(1426).extendFlat;var c=r(7901);function v(e){return{marker:{color:f({},n.marker.color,{arrayOk:false,editType:"style"}),line:{color:f({},n.marker.line.color,{arrayOk:false,editType:"style"}),width:f({},n.marker.line.width,{arrayOk:false,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}e.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:false,editType:"calc"},x:n.x,x0:n.x0,dx:n.dx,y:n.y,y0:n.y0,dy:n.dy,xperiod:n.xperiod,yperiod:n.yperiod,xperiod0:n.xperiod0,yperiod0:n.yperiod0,xperiodalignment:n.xperiodalignment,yperiodalignment:n.yperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),hovertext:n.hovertext,hovertemplate:s({},{keys:u.eventDataKeys}),hoverinfo:f({},i.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:false},texttemplate:l({editType:"plot"},{keys:u.eventDataKeys.concat(["label"])}),text:n.text,textposition:n.textposition,insidetextanchor:n.insidetextanchor,textangle:n.textangle,textfont:n.textfont,insidetextfont:n.insidetextfont,outsidetextfont:n.outsidetextfont,constraintext:n.constraintext,cliponaxis:n.cliponaxis,orientation:n.orientation,offset:n.offset,width:n.width,increasing:v("increasing"),decreasing:v("decreasing"),totals:v("intermediate sums and total"),connector:{line:{color:f({},a.color,{dflt:c.defaultLine}),width:f({},a.width,{editType:"plot"}),dash:a.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:true,editType:"plot"},editType:"plot"},offsetgroup:n.offsetgroup,alignmentgroup:n.alignmentgroup}},52752:function(e,t,r){"use strict";var n=r(89298);var a=r(42973);var i=r(71828).mergeArray;var o=r(66279);var s=r(50606).BADNUM;function l(e){return e==="a"||e==="absolute"}function u(e){return e==="t"||e==="total"}e.exports=function e(t,r){var f=n.getFromId(t,r.xaxis||"x");var c=n.getFromId(t,r.yaxis||"y");var v,h,p,d,g,y;if(r.orientation==="h"){v=f.makeCalcdata(r,"x");p=c.makeCalcdata(r,"y");d=a(r,c,"y",p);g=!!r.yperiodalignment;y="y"}else{v=c.makeCalcdata(r,"y");p=f.makeCalcdata(r,"x");d=a(r,f,"x",p);g=!!r.xperiodalignment;y="x"}h=d.vals;var m=Math.min(h.length,v.length);var x=new Array(m);var b=0;var _;var w=false;for(var T=0;T<m;T++){var k=v[T]||0;var A=false;if(v[T]!==s||u(r.measure[T])||l(r.measure[T])){if(T+1<m&&(v[T+1]!==s||u(r.measure[T+1])||l(r.measure[T+1]))){A=true}}var M=x[T]={i:T,p:h[T],s:k,rawS:k,cNext:A};if(l(r.measure[T])){b=M.s;M.isSum=true;M.dir="totals";M.s=b}else if(u(r.measure[T])){M.isSum=true;M.dir="totals";M.s=b}else{M.isSum=false;M.dir=M.rawS<0?"decreasing":"increasing";_=M.s;M.s=b+_;b+=_}if(M.dir==="totals"){w=true}if(g){x[T].orig_p=p[T];x[T][y+"End"]=d.ends[T];x[T][y+"Start"]=d.starts[T]}if(r.ids){M.id=String(r.ids[T])}M.v=(r.base||0)+b}if(x.length)x[0].hasTotals=w;i(r.text,x,"tx");i(r.hovertext,x,"htx");o(x,r);return x}},48334:function(e){"use strict";e.exports={eventDataKeys:["initial","delta","final"]}},70766:function(e,t,r){"use strict";var n=r(11661).setGroupPositions;e.exports=function e(t,r){var a=t._fullLayout;var i=t._fullData;var o=t.calcdata;var s=r.xaxis;var l=r.yaxis;var u=[];var f=[];var c=[];var v,h;for(h=0;h<i.length;h++){var p=i[h];if(p.visible===true&&p.xaxis===s._id&&p.yaxis===l._id&&p.type==="waterfall"){v=o[h];if(p.orientation==="h"){c.push(v)}else{f.push(v)}u.push(v)}}var d={mode:a.waterfallmode,norm:a.waterfallnorm,gap:a.waterfallgap,groupgap:a.waterfallgroupgap};n(t,s,l,f,d);n(t,l,s,c,d);for(h=0;h<u.length;h++){v=u[h];for(var g=0;g<v.length;g++){var y=v[g];if(y.isSum===false){y.s0+=g===0?0:v[g-1].s}if(g+1<v.length){v[g].nextP0=v[g+1].p0;v[g].nextS0=v[g+1].s0}}}}},83266:function(e,t,r){"use strict";var n=r(71828);var a=r(26125);var i=r(90769).handleText;var o=r(67513);var s=r(73927);var l=r(43037);var u=r(7901);var f=r(22372);var c=f.INCREASING.COLOR;var v=f.DECREASING.COLOR;var h="#4499FF";function p(e,t,r){e(t+".marker.color",r);e(t+".marker.line.color",u.defaultLine);e(t+".marker.line.width")}function d(e,t,r,a){function u(r,a){return n.coerce(e,t,l,r,a)}var f=o(e,t,a,u);if(!f){t.visible=false;return}s(e,t,a,u);u("xhoverformat");u("yhoverformat");u("measure");u("orientation",t.x&&!t.y?"h":"v");u("base");u("offset");u("width");u("text");u("hovertext");u("hovertemplate");var d=u("textposition");i(e,t,a,u,d,{moduleHasSelected:false,moduleHasUnselected:false,moduleHasConstrain:true,moduleHasCliponaxis:true,moduleHasTextangle:true,moduleHasInsideanchor:true});if(t.textposition!=="none"){u("texttemplate");if(!t.texttemplate)u("textinfo")}p(u,"increasing",c);p(u,"decreasing",v);p(u,"totals",h);var g=u("connector.visible");if(g){u("connector.mode");var y=u("connector.line.width");if(y){u("connector.line.color");u("connector.line.dash")}}}function g(e,t){var r,i;function o(e){return n.coerce(i._input,i,l,e)}if(t.waterfallmode==="group"){for(var s=0;s<e.length;s++){i=e[s];r=i._input;a(r,i,t,o)}}}e.exports={supplyDefaults:d,crossTraceDefaults:g}},58593:function(e){"use strict";e.exports=function e(t,r){t.x="xVal"in r?r.xVal:r.x;t.y="yVal"in r?r.yVal:r.y;if("initial"in r)t.initial=r.initial;if("delta"in r)t.delta=r.delta;if("final"in r)t.final=r.final;if(r.xa)t.xaxis=r.xa;if(r.ya)t.yaxis=r.ya;return t}},61326:function(e,t,r){"use strict";var n=r(89298).hoverLabelText;var a=r(7901).opacity;var i=r(95423).hoverOnBars;var o=r(22372);var s={increasing:o.INCREASING.SYMBOL,decreasing:o.DECREASING.SYMBOL};e.exports=function e(t,r,a,o,u){var f=i(t,r,a,o,u);if(!f)return;var c=f.cd;var v=c[0].trace;var h=v.orientation==="h";var p=h?"x":"y";var d=h?t.xa:t.ya;function g(e){return n(d,e,v[p+"hoverformat"])}var y=f.index;var m=c[y];var x=m.isSum?m.b+m.s:m.rawS;f.initial=m.b+m.s-x;f.delta=x;f.final=f.initial+f.delta;var b=g(Math.abs(f.delta));f.deltaLabel=x<0?"("+b+")":b;f.finalLabel=g(f.final);f.initialLabel=g(f.initial);var _=m.hi||v.hoverinfo;var w=[];if(_&&_!=="none"&&_!=="skip"){var T=_==="all";var k=_.split("+");var A=function(e){return T||k.indexOf(e)!==-1};if(!m.isSum){if(A("final")&&(h?!A("x"):!A("y"))){w.push(f.finalLabel)}if(A("delta")){if(x<0){w.push(f.deltaLabel+" "+s.decreasing)}else{w.push(f.deltaLabel+" "+s.increasing)}}if(A("initial")){w.push("Initial: "+f.initialLabel)}}}if(w.length)f.extraText=w.join("<br>");f.color=l(v,m);return[f]};function l(e,t){var r=e[t.dir].marker;var n=r.color;var i=r.line.color;var o=r.line.width;if(a(n))return n;else if(a(i)&&o)return i}},19990:function(e,t,r){"use strict";e.exports={attributes:r(43037),layoutAttributes:r(13494),supplyDefaults:r(83266).supplyDefaults,crossTraceDefaults:r(83266).crossTraceDefaults,supplyLayoutDefaults:r(5176),calc:r(52752),crossTraceCalc:r(70766),plot:r(30436),style:r(55750).style,hoverPoints:r(61326),eventData:r(58593),selectPoints:r(81974),moduleType:"trace",name:"waterfall",basePlotModule:r(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},13494:function(e){"use strict";e.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},5176:function(e,t,r){"use strict";var n=r(71828);var a=r(13494);e.exports=function(e,t,r){var i=false;function o(r,i){return n.coerce(e,t,a,r,i)}for(var s=0;s<r.length;s++){var l=r[s];if(l.visible&&l.type==="waterfall"){i=true;break}}if(i){o("waterfallmode");o("waterfallgap",.2);o("waterfallgroupgap")}}},30436:function(e,t,r){"use strict";var n=r(39898);var a=r(71828);var i=r(91424);var o=r(50606).BADNUM;var s=r(17295);var l=r(72597).clearMinTextSize;e.exports=function e(t,r,n,a){var i=t._fullLayout;l("waterfall",i);s.plot(t,r,n,a,{mode:i.waterfallmode,norm:i.waterfallmode,gap:i.waterfallgap,groupgap:i.waterfallgroupgap});u(t,r,n,a)};function u(e,t,r,s){var l=t.xaxis;var u=t.yaxis;a.makeTraceGroups(s,r,"trace bars").each((function(r){var s=n.select(this);var c=r[0].trace;var v=a.ensureSingle(s,"g","lines");if(!c.connector||!c.connector.visible){v.remove();return}var h=c.orientation==="h";var p=c.connector.mode;var d=v.selectAll("g.line").data(a.identity);d.enter().append("g").classed("line",true);d.exit().remove();var g=d.size();d.each((function(r,s){if(s!==g-1&&!r.cNext)return;var c=f(r,l,u,h);var v=c[0];var d=c[1];var y="";if(v[0]!==o&&d[0]!==o&&v[1]!==o&&d[1]!==o){if(p==="spanning"){if(!r.isSum&&s>0){if(h){y+="M"+v[0]+","+d[1]+"V"+d[0]}else{y+="M"+v[1]+","+d[0]+"H"+v[0]}}}if(p!=="between"){if(r.isSum||s<g-1){if(h){y+="M"+v[1]+","+d[0]+"V"+d[1]}else{y+="M"+v[0]+","+d[1]+"H"+v[1]}}}if(v[2]!==o&&d[2]!==o){if(h){y+="M"+v[1]+","+d[1]+"V"+d[2]}else{y+="M"+v[1]+","+d[1]+"H"+v[2]}}}if(y==="")y="M0,0Z";a.ensureSingle(n.select(this),"path").attr("d",y).call(i.setClipUrl,t.layerClipId,e)}))}))}function f(e,t,r,n){var a=[];var i=[];var o=n?t:r;var s=n?r:t;a[0]=o.c2p(e.s0,true);i[0]=s.c2p(e.p0,true);a[1]=o.c2p(e.s1,true);i[1]=s.c2p(e.p1,true);a[2]=o.c2p(e.nextS0,true);i[2]=s.c2p(e.nextP0,true);return n?[a,i]:[i,a]}},55750:function(e,t,r){"use strict";var n=r(39898);var a=r(91424);var i=r(7901);var o=r(37822).DESELECTDIM;var s=r(16688);var l=r(72597).resizeText;var u=s.styleTextPoints;function f(e,t,r){var s=r?r:n.select(e).selectAll("g.waterfalllayer").selectAll("g.trace");l(e,s,"waterfall");s.style("opacity",(function(e){return e[0].trace.opacity}));s.each((function(t){var r=n.select(this);var s=t[0].trace;r.selectAll(".point > path").each((function(e){if(!e.isBlank){var t=s[e.dir].marker;n.select(this).call(i.fill,t.color).call(i.stroke,t.line.color).call(a.dashLine,t.line.dash,t.line.width).style("opacity",s.selectedpoints&&!e.selected?o:1)}}));u(r,s,e);r.selectAll(".lines").each((function(){var e=s.connector.line;a.lineGroupStyle(n.select(this).selectAll("path"),e.width,e.color,e.dash)}))}))}e.exports={style:f}},82887:function(e,t,r){"use strict";var n=r(89298);var a=r(71828);var i=r(86281);var o=r(79344).p;var s=r(50606).BADNUM;t.moduleType="transform";t.name="aggregate";var l=t.attributes={enabled:{valType:"boolean",dflt:true,editType:"calc"},groups:{valType:"string",strict:true,noBlank:true,arrayOk:true,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:true,editType:"calc"},editType:"calc"},editType:"calc"};var u=l.aggregations;t.supplyDefaults=function(e,t){var r={};var n;function o(t,n){return a.coerce(e,r,l,t,n)}var s=o("enabled");if(!s)return r;var f=i.findArrayAttributes(t);var c={};for(n=0;n<f.length;n++)c[f[n]]=1;var v=o("groups");if(!Array.isArray(v)){if(!c[v]){r.enabled=false;return r}c[v]=0}var h=e.aggregations||[];var p=r.aggregations=new Array(h.length);var d;function g(e,t){return a.coerce(h[n],d,u,e,t)}for(n=0;n<h.length;n++){d={_index:n};var y=g("target");var m=g("func");var x=g("enabled");if(x&&y&&(c[y]||m==="count"&&c[y]===undefined)){if(m==="stddev")g("funcmode");c[y]=0;p[n]=d}else p[n]={enabled:false,_index:n}}for(n=0;n<f.length;n++){if(c[f[n]]){p.push({target:f[n],func:u.func.dflt,enabled:true,_index:-1})}}return r};t.calcTransform=function(e,t,r){if(!r.enabled)return;var n=r.groups;var i=a.getTargetArray(t,{target:n});if(!i)return;var s,l,u,c;var v={};var h={};var p=[];var d=o(t.transforms,r);var g=i.length;if(t._length)g=Math.min(g,t._length);for(s=0;s<g;s++){l=i[s];u=v[l];if(u===undefined){v[l]=p.length;c=[s];p.push(c);h[v[l]]=d(s)}else{p[u].push(s);h[v[l]]=(h[v[l]]||[]).concat(d(s))}}r._indexToPoints=h;var y=r.aggregations;for(s=0;s<y.length;s++){f(e,t,p,y[s])}if(typeof n==="string"){f(e,t,p,{target:n,func:"first",enabled:true})}t._length=p.length};function f(e,t,r,i){if(!i.enabled)return;var o=i.target;var s=a.nestedProperty(t,o);var l=s.get();var u=n.getDataConversions(e,t,o,l);var f=c(i,u);var v=new Array(r.length);for(var h=0;h<r.length;h++){v[h]=f(l,r[h])}s.set(v);if(i.func==="count"){a.pushUnique(t._arrayAttrs,o)}}function c(e,t){var r=e.func;var n=t.d2c;var i=t.c2d;switch(r){case"count":return v;case"first":return h;case"last":return p;case"sum":return function(e,t){var r=0;for(var a=0;a<t.length;a++){var o=n(e[t[a]]);if(o!==s)r+=o}return i(r)};case"avg":return function(e,t){var r=0;var a=0;for(var o=0;o<t.length;o++){var l=n(e[t[o]]);if(l!==s){r+=l;a++}}return a?i(r/a):s};case"min":return function(e,t){var r=Infinity;for(var a=0;a<t.length;a++){var o=n(e[t[a]]);if(o!==s)r=Math.min(r,o)}return r===Infinity?s:i(r)};case"max":return function(e,t){var r=-Infinity;for(var a=0;a<t.length;a++){var o=n(e[t[a]]);if(o!==s)r=Math.max(r,o)}return r===-Infinity?s:i(r)};case"range":return function(e,t){var r=Infinity;var a=-Infinity;for(var o=0;o<t.length;o++){var l=n(e[t[o]]);if(l!==s){r=Math.min(r,l);a=Math.max(a,l)}}return a===-Infinity||r===Infinity?s:i(a-r)};case"change":return function(e,t){var r=n(e[t[0]]);var a=n(e[t[t.length-1]]);return r===s||a===s?s:i(a-r)};case"median":return function(e,t){var r=[];for(var o=0;o<t.length;o++){var l=n(e[t[o]]);if(l!==s)r.push(l)}if(!r.length)return s;r.sort(a.sorterAsc);var u=(r.length-1)/2;return i((r[Math.floor(u)]+r[Math.ceil(u)])/2)};case"mode":return function(e,t){var r={};var a=0;var o=s;for(var l=0;l<t.length;l++){var u=n(e[t[l]]);if(u!==s){var f=r[u]=(r[u]||0)+1;if(f>a){a=f;o=u}}}return a?i(o):s};case"rms":return function(e,t){var r=0;var a=0;for(var o=0;o<t.length;o++){var l=n(e[t[o]]);if(l!==s){r+=l*l;a++}}return a?i(Math.sqrt(r/a)):s};case"stddev":return function(t,r){var a=0;var i=0;var o=1;var l=s;var u;for(u=0;u<r.length&&l===s;u++){l=n(t[r[u]])}if(l===s)return s;for(;u<r.length;u++){var f=n(t[r[u]]);if(f!==s){var c=f-l;a+=c;i+=c*c;o++}}var v=e.funcmode==="sample"?o-1:o;if(!v)return 0;return Math.sqrt((i-a*a/o)/v)}}}function v(e,t){return t.length}function h(e,t){return e[t[0]]}function p(e,t){return e[t[t.length-1]]}},14382:function(e,t,r){"use strict";var n=r(71828);var a=r(73972);var i=r(89298);var o=r(79344).p;var s=r(74808);var l=s.COMPARISON_OPS;var u=s.INTERVAL_OPS;var f=s.SET_OPS;t.moduleType="transform";t.name="filter";t.attributes={enabled:{valType:"boolean",dflt:true,editType:"calc"},target:{valType:"string",strict:true,noBlank:true,arrayOk:true,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(l).concat(u).concat(f),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:false,editType:"calc"},editType:"calc"};t.supplyDefaults=function(e){var r={};function i(a,i){return n.coerce(e,r,t.attributes,a,i)}var o=i("enabled");if(o){var s=i("target");if(n.isArrayOrTypedArray(s)&&s.length===0){r.enabled=false;return r}i("preservegaps");i("operation");i("value");var l=a.getComponentMethod("calendars","handleDefaults");l(e,r,"valuecalendar",null);l(e,r,"targetcalendar",null)}return r};t.calcTransform=function(e,t,r){if(!r.enabled)return;var a=n.getTargetArray(t,r);if(!a)return;var s=r.target;var l=a.length;if(t._length)l=Math.min(l,t._length);var u=r.targetcalendar;var f=t._arrayAttrs;var v=r.preservegaps;if(typeof s==="string"){var h=n.nestedProperty(t,s+"calendar").get();if(h)u=h}var p=i.getDataToCoordFunc(e,t,s,a);var d=c(r,p,u);var g={};var y={};var m=0;function x(e,r){for(var a=0;a<f.length;a++){var i=n.nestedProperty(t,f[a]);e(i,r)}}var b;var _;if(v){b=function(e){g[e.astr]=n.extendDeep([],e.get());e.set(new Array(l))};_=function(e,t){var r=g[e.astr][t];e.get()[t]=r}}else{b=function(e){g[e.astr]=n.extendDeep([],e.get());e.set([])};_=function(e,t){var r=g[e.astr][t];e.get().push(r)}}x(b);var w=o(t.transforms,r);for(var T=0;T<l;T++){var k=d(a[T]);if(k){x(_,T);y[m++]=w(T)}else if(v)m++}r._indexToPoints=y;t._length=m};function c(e,t,r){var n=e.operation;var a=e.value;var i=Array.isArray(a);function o(e){return e.indexOf(n)!==-1}var s=function(r){return t(r,0,e.valuecalendar)};var c=function(e){return t(e,0,r)};var v;if(o(l)){v=i?s(a[0]):s(a)}else if(o(u)){v=i?[s(a[0]),s(a[1])]:[s(a),s(a)]}else if(o(f)){v=i?a.map(s):[s(a)]}switch(n){case"=":return function(e){return c(e)===v};case"!=":return function(e){return c(e)!==v};case"<":return function(e){return c(e)<v};case"<=":return function(e){return c(e)<=v};case">":return function(e){return c(e)>v};case">=":return function(e){return c(e)>=v};case"[]":return function(e){var t=c(e);return t>=v[0]&&t<=v[1]};case"()":return function(e){var t=c(e);return t>v[0]&&t<v[1]};case"[)":return function(e){var t=c(e);return t>=v[0]&&t<v[1]};case"(]":return function(e){var t=c(e);return t>v[0]&&t<=v[1]};case"][":return function(e){var t=c(e);return t<=v[0]||t>=v[1]};case")(":return function(e){var t=c(e);return t<v[0]||t>v[1]};case"](":return function(e){var t=c(e);return t<=v[0]||t>v[1]};case")[":return function(e){var t=c(e);return t<v[0]||t>=v[1]};case"{}":return function(e){return v.indexOf(c(e))!==-1};case"}{":return function(e){return v.indexOf(c(e))===-1}}}},43102:function(e,t,r){"use strict";var n=r(71828);var a=r(86281);var i=r(74875);var o=r(79344).p;t.moduleType="transform";t.name="groupby";t.attributes={enabled:{valType:"boolean",dflt:true,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:true},editType:"calc"},editType:"calc"};t.supplyDefaults=function(e,r,a){var i;var o={};function s(r,a){return n.coerce(e,o,t.attributes,r,a)}var l=s("enabled");if(!l)return o;s("groups");s("nameformat",a._dataLength>1?"%{group} (%{trace})":"%{group}");var u=e.styles;var f=o.styles=[];if(u){for(i=0;i<u.length;i++){var c=f[i]={};n.coerce(u[i],f[i],t.attributes.styles,"target");var v=n.coerce(u[i],f[i],t.attributes.styles,"value");if(n.isPlainObject(v))c.value=n.extendDeep({},v);else if(v)delete c.value}}return o};t.transform=function(e,t){var r,n,a;var i=[];for(n=0;n<e.length;n++){r=s(e[n],t);for(a=0;a<r.length;a++){i.push(r[a])}}return i};function s(e,t){var r,s,l,u,f,c,v,h,p;var d;var g=t.transform;var y=t.transformIndex;var m=e.transforms[y].groups;var x=o(e.transforms,g);if(!n.isArrayOrTypedArray(m)||m.length===0){return[e]}var b=n.filterUnique(m);var _=new Array(b.length);var w=m.length;var T=a.findArrayAttributes(e);var k=g.styles||[];var A={};for(r=0;r<k.length;r++){A[k[r].target]=k[r].value}if(g.styles){d=n.keyedContainer(g,"styles","target","value.name")}var M={};var S={};for(r=0;r<b.length;r++){c=b[r];M[c]=r;S[c]=0;v=_[r]=n.extendDeepNoArrays({},e);v._group=c;v.transforms[y]._indexToPoints={};var E=null;if(d){E=d.get(c)}if(E||E===""){v.name=E}else{v.name=n.templateString(g.nameformat,{trace:e.name,group:c})}h=v.transforms;v.transforms=[];for(s=0;s<h.length;s++){v.transforms[s]=n.extendDeepNoArrays({},h[s])}for(s=0;s<T.length;s++){n.nestedProperty(v,T[s]).set([])}}for(l=0;l<T.length;l++){u=T[l];for(s=0,p=[];s<b.length;s++){p[s]=n.nestedProperty(_[s],u).get()}f=n.nestedProperty(e,u).get();for(s=0;s<w;s++){p[M[m[s]]].push(f[s])}}for(s=0;s<w;s++){v=_[M[m[s]]];var L=v.transforms[y]._indexToPoints;L[S[m[s]]]=x(s);S[m[s]]++}for(r=0;r<b.length;r++){c=b[r];v=_[r];i.clearExpandedTraceDefaultColors(v);v=n.extendDeepNoArrays(v,A[c]||{})}return _}},79344:function(e,t){"use strict";t.p=function(e,t){var r;var n;for(var a=0;a<e.length;a++){r=e[a];if(r===t)break;if(!r._indexToPoints||r.enabled===false)continue;n=r._indexToPoints}var i=n?function(e){return n[e]}:function(e){return[e]};return i}},32275:function(e,t,r){"use strict";var n=r(71828);var a=r(89298);var i=r(79344).p;var o=r(50606).BADNUM;t.moduleType="transform";t.name="sort";t.attributes={enabled:{valType:"boolean",dflt:true,editType:"calc"},target:{valType:"string",strict:true,noBlank:true,arrayOk:true,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"};t.supplyDefaults=function(e){var r={};function a(a,i){return n.coerce(e,r,t.attributes,a,i)}var i=a("enabled");if(i){a("target");a("order")}return r};t.calcTransform=function(e,t,r){if(!r.enabled)return;var o=n.getTargetArray(t,r);if(!o)return;var l=r.target;var u=o.length;if(t._length)u=Math.min(u,t._length);var f=t._arrayAttrs;var c=a.getDataToCoordFunc(e,t,l,o);var v=s(r,o,c,u);var h=i(t.transforms,r);var p={};var d,g;for(d=0;d<f.length;d++){var y=n.nestedProperty(t,f[d]);var m=y.get();var x=new Array(u);for(g=0;g<u;g++){x[g]=m[v[g]]}y.set(x)}for(g=0;g<u;g++){p[g]=h(v[g])}r._indexToPoints=p;t._length=u};function s(e,t,r,n){var a=new Array(n);var i=new Array(n);var o;for(o=0;o<n;o++){a[o]={v:t[o],i:o}}a.sort(l(e,r));for(o=0;o<n;o++){i[o]=a[o].i}return i}function l(e,t){switch(e.order){case"ascending":return function(e,r){var n=t(e.v);var a=t(r.v);if(n===o){return 1}if(a===o){return-1}return n-a};case"descending":return function(e,r){var n=t(e.v);var a=t(r.v);if(n===o){return 1}if(a===o){return-1}return a-n}}}},11506:function(e,t){"use strict";t.version="2.27.1"},9330:function(e,t,r){var n=r(90386);(function t(r,n){if(true)e.exports=n();else{}})(self,(function(){return function(){var e={7386:function(e,t,r){e.exports={alpha_shape:r(2350),convex_hull:r(5537),delaunay_triangulate:r(4419),gl_cone3d:r(1140),gl_error3d:r(3110),gl_heatmap2d:r(6386),gl_line3d:r(6086),gl_mesh3d:r(8116),gl_plot2d:r(2117),gl_plot3d:r(1059),gl_pointcloud2d:r(8271),gl_scatter3d:r(2182),gl_select_box:r(6623),gl_spikes2d:r(3050),gl_streamtube3d:r(7307),gl_surface3d:r(3754),ndarray:r(5050),ndarray_linear_interpolate:r(3581)}},2146:function(e,t,r){"use strict";var n;function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function o(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});if(t)l(e,t)}function l(e,t){l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,r){t.__proto__=r;return t};return l(e,t)}function u(e){var t=v();return function r(){var n=h(e),a;if(t){var i=h(this).constructor;a=Reflect.construct(n,arguments,i)}else{a=n.apply(this,arguments)}return f(this,a)}}function f(e,t){if(t&&(p(t)==="object"||typeof t==="function")){return t}else if(t!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return c(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function v(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function p(e){"@babel/helpers - typeof";return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var d=r(3910);var g=r(3187);var y=typeof Symbol==="function"&&typeof Symbol["for"]==="function"?Symbol["for"]("nodejs.util.inspect.custom"):null;t.lW=_;n=P;t.h2=50;var m=2147483647;n=m;_.TYPED_ARRAY_SUPPORT=x();if(!_.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function x(){try{var e=new Uint8Array(1);var t={foo:function e(){return 42}};Object.setPrototypeOf(t,Uint8Array.prototype);Object.setPrototypeOf(e,t);return e.foo()===42}catch(r){return false}}Object.defineProperty(_.prototype,"parent",{enumerable:true,get:function e(){if(!_.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(_.prototype,"offset",{enumerable:true,get:function e(){if(!_.isBuffer(this))return undefined;return this.byteOffset}});function b(e){if(e>m){throw new RangeError('The value "'+e+'" is invalid for option "size"')}var t=new Uint8Array(e);Object.setPrototypeOf(t,_.prototype);return t}function _(e,t,r){if(typeof e==="number"){if(typeof t==="string"){throw new TypeError('The "string" argument must be of type string. Received type number')}return A(e)}return w(e,t,r)}_.poolSize=8192;function w(e,t,r){if(typeof e==="string"){return M(e,t)}if(ArrayBuffer.isView(e)){return E(e)}if(e==null){throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+p(e))}if(me(e,ArrayBuffer)||e&&me(e.buffer,ArrayBuffer)){return L(e,t,r)}if(typeof SharedArrayBuffer!=="undefined"&&(me(e,SharedArrayBuffer)||e&&me(e.buffer,SharedArrayBuffer))){return L(e,t,r)}if(typeof e==="number"){throw new TypeError('The "value" argument must not be of type number. Received type number')}var n=e.valueOf&&e.valueOf();if(n!=null&&n!==e){return _.from(n,t,r)}var a=C(e);if(a)return a;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]==="function"){return _.from(e[Symbol.toPrimitive]("string"),t,r)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+p(e))}_.from=function(e,t,r){return w(e,t,r)};Object.setPrototypeOf(_.prototype,Uint8Array.prototype);Object.setPrototypeOf(_,Uint8Array);function T(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be of type number')}else if(e<0){throw new RangeError('The value "'+e+'" is invalid for option "size"')}}function k(e,t,r){T(e);if(e<=0){return b(e)}if(t!==undefined){return typeof r==="string"?b(e).fill(t,r):b(e).fill(t)}return b(e)}_.alloc=function(e,t,r){return k(e,t,r)};function A(e){T(e);return b(e<0?0:I(e)|0)}_.allocUnsafe=function(e){return A(e)};_.allocUnsafeSlow=function(e){return A(e)};function M(e,t){if(typeof t!=="string"||t===""){t="utf8"}if(!_.isEncoding(t)){throw new TypeError("Unknown encoding: "+t)}var r=O(e,t)|0;var n=b(r);var a=n.write(e,t);if(a!==r){n=n.slice(0,a)}return n}function S(e){var t=e.length<0?0:I(e.length)|0;var r=b(t);for(var n=0;n<t;n+=1){r[n]=e[n]&255}return r}function E(e){if(me(e,Uint8Array)){var t=new Uint8Array(e);return L(t.buffer,t.byteOffset,t.byteLength)}return S(e)}function L(e,t,r){if(t<0||e.byteLength<t){throw new RangeError('"offset" is outside of buffer bounds')}if(e.byteLength<t+(r||0)){throw new RangeError('"length" is outside of buffer bounds')}var n;if(t===undefined&&r===undefined){n=new Uint8Array(e)}else if(r===undefined){n=new Uint8Array(e,t)}else{n=new Uint8Array(e,t,r)}Object.setPrototypeOf(n,_.prototype);return n}function C(e){if(_.isBuffer(e)){var t=I(e.length)|0;var r=b(t);if(r.length===0){return r}e.copy(r,0,0,t);return r}if(e.length!==undefined){if(typeof e.length!=="number"||xe(e.length)){return b(0)}return S(e)}if(e.type==="Buffer"&&Array.isArray(e.data)){return S(e.data)}}function I(e){if(e>=m){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+m.toString(16)+" bytes")}return e|0}function P(e){if(+e!=e){e=0}return _.alloc(+e)}_.isBuffer=function e(t){return t!=null&&t._isBuffer===true&&t!==_.prototype};_.compare=function e(t,r){if(me(t,Uint8Array))t=_.from(t,t.offset,t.byteLength);if(me(r,Uint8Array))r=_.from(r,r.offset,r.byteLength);if(!_.isBuffer(t)||!_.isBuffer(r)){throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array')}if(t===r)return 0;var n=t.length;var a=r.length;for(var i=0,o=Math.min(n,a);i<o;++i){if(t[i]!==r[i]){n=t[i];a=r[i];break}}if(n<a)return-1;if(a<n)return 1;return 0};_.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};_.concat=function e(t,r){if(!Array.isArray(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return _.alloc(0)}var n;if(r===undefined){r=0;for(n=0;n<t.length;++n){r+=t[n].length}}var a=_.allocUnsafe(r);var i=0;for(n=0;n<t.length;++n){var o=t[n];if(me(o,Uint8Array)){if(i+o.length>a.length){if(!_.isBuffer(o))o=_.from(o);o.copy(a,i)}else{Uint8Array.prototype.set.call(a,o,i)}}else if(!_.isBuffer(o)){throw new TypeError('"list" argument must be an Array of Buffers')}else{o.copy(a,i)}i+=o.length}return a};function O(e,t){if(_.isBuffer(e)){return e.length}if(ArrayBuffer.isView(e)||me(e,ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. '+"Received type "+p(e))}var r=e.length;var n=arguments.length>2&&arguments[2]===true;if(!n&&r===0)return 0;var a=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return he(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return ge(e).length;default:if(a){return n?-1:he(e).length}t=(""+t).toLowerCase();a=true}}}_.byteLength=O;function D(e,t,r){var n=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;t>>>=0;if(r<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return X(this,t,r);case"utf8":case"utf-8":return q(this,t,r);case"ascii":return Y(this,t,r);case"latin1":case"binary":return W(this,t,r);case"base64":return H(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true}}}_.prototype._isBuffer=true;function z(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}_.prototype.swap16=function e(){var t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var r=0;r<t;r+=2){z(this,r,r+1)}return this};_.prototype.swap32=function e(){var t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var r=0;r<t;r+=4){z(this,r,r+3);z(this,r+1,r+2)}return this};_.prototype.swap64=function e(){var t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var r=0;r<t;r+=8){z(this,r,r+7);z(this,r+1,r+6);z(this,r+2,r+5);z(this,r+3,r+4)}return this};_.prototype.toString=function e(){var t=this.length;if(t===0)return"";if(arguments.length===0)return q(this,0,t);return D.apply(this,arguments)};_.prototype.toLocaleString=_.prototype.toString;_.prototype.equals=function e(t){if(!_.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return _.compare(this,t)===0};_.prototype.inspect=function e(){var r="";var n=t.h2;r=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim();if(this.length>n)r+=" ... ";return"<Buffer "+r+">"};if(y){_.prototype[y]=_.prototype.inspect}_.prototype.compare=function e(t,r,n,a,i){if(me(t,Uint8Array)){t=_.from(t,t.offset,t.byteLength)}if(!_.isBuffer(t)){throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. '+"Received type "+p(t))}if(r===undefined){r=0}if(n===undefined){n=t?t.length:0}if(a===undefined){a=0}if(i===undefined){i=this.length}if(r<0||n>t.length||a<0||i>this.length){throw new RangeError("out of range index")}if(a>=i&&r>=n){return 0}if(a>=i){return-1}if(r>=n){return 1}r>>>=0;n>>>=0;a>>>=0;i>>>=0;if(this===t)return 0;var o=i-a;var s=n-r;var l=Math.min(o,s);var u=this.slice(a,i);var f=t.slice(r,n);for(var c=0;c<l;++c){if(u[c]!==f[c]){o=u[c];s=f[c];break}}if(o<s)return-1;if(s<o)return 1;return 0};function R(e,t,r,n,a){if(e.length===0)return-1;if(typeof r==="string"){n=r;r=0}else if(r>2147483647){r=2147483647}else if(r<-2147483648){r=-2147483648}r=+r;if(xe(r)){r=a?0:e.length-1}if(r<0)r=e.length+r;if(r>=e.length){if(a)return-1;else r=e.length-1}else if(r<0){if(a)r=0;else return-1}if(typeof t==="string"){t=_.from(t,n)}if(_.isBuffer(t)){if(t.length===0){return-1}return F(e,t,r,n,a)}else if(typeof t==="number"){t=t&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(a){return Uint8Array.prototype.indexOf.call(e,t,r)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,r)}}return F(e,[t],r,n,a)}throw new TypeError("val must be string, number or Buffer")}function F(e,t,r,n,a){var i=1;var o=e.length;var s=t.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(e.length<2||t.length<2){return-1}i=2;o/=2;s/=2;r/=2}}function l(e,t){if(i===1){return e[t]}else{return e.readUInt16BE(t*i)}}var u;if(a){var f=-1;for(u=r;u<o;u++){if(l(e,u)===l(t,f===-1?0:u-f)){if(f===-1)f=u;if(u-f+1===s)return f*i}else{if(f!==-1)u-=u-f;f=-1}}}else{if(r+s>o)r=o-s;for(u=r;u>=0;u--){var c=true;for(var v=0;v<s;v++){if(l(e,u+v)!==l(t,v)){c=false;break}}if(c)return u}}return-1}_.prototype.includes=function e(t,r,n){return this.indexOf(t,r,n)!==-1};_.prototype.indexOf=function e(t,r,n){return R(this,t,r,n,true)};_.prototype.lastIndexOf=function e(t,r,n){return R(this,t,r,n,false)};function B(e,t,r,n){r=Number(r)||0;var a=e.length-r;if(!n){n=a}else{n=Number(n);if(n>a){n=a}}var i=t.length;if(n>i/2){n=i/2}var o;for(o=0;o<n;++o){var s=parseInt(t.substr(o*2,2),16);if(xe(s))return o;e[r+o]=s}return o}function N(e,t,r,n){return ye(he(t,e.length-r),e,r,n)}function j(e,t,r,n){return ye(pe(t),e,r,n)}function U(e,t,r,n){return ye(ge(t),e,r,n)}function V(e,t,r,n){return ye(de(t,e.length-r),e,r,n)}_.prototype.write=function e(t,r,n,a){if(r===undefined){a="utf8";n=this.length;r=0}else if(n===undefined&&typeof r==="string"){a=r;n=this.length;r=0}else if(isFinite(r)){r=r>>>0;if(isFinite(n)){n=n>>>0;if(a===undefined)a="utf8"}else{a=n;n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var i=this.length-r;if(n===undefined||n>i)n=i;if(t.length>0&&(n<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!a)a="utf8";var o=false;for(;;){switch(a){case"hex":return B(this,t,r,n);case"utf8":case"utf-8":return N(this,t,r,n);case"ascii":case"latin1":case"binary":return j(this,t,r,n);case"base64":return U(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,t,r,n);default:if(o)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();o=true}}};_.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function H(e,t,r){if(t===0&&r===e.length){return d.fromByteArray(e)}else{return d.fromByteArray(e.slice(t,r))}}function q(e,t,r){r=Math.min(e.length,r);var n=[];var a=t;while(a<r){var i=e[a];var o=null;var s=i>239?4:i>223?3:i>191?2:1;if(a+s<=r){var l=void 0,u=void 0,f=void 0,c=void 0;switch(s){case 1:if(i<128){o=i}break;case 2:l=e[a+1];if((l&192)===128){c=(i&31)<<6|l&63;if(c>127){o=c}}break;case 3:l=e[a+1];u=e[a+2];if((l&192)===128&&(u&192)===128){c=(i&15)<<12|(l&63)<<6|u&63;if(c>2047&&(c<55296||c>57343)){o=c}}break;case 4:l=e[a+1];u=e[a+2];f=e[a+3];if((l&192)===128&&(u&192)===128&&(f&192)===128){c=(i&15)<<18|(l&63)<<12|(u&63)<<6|f&63;if(c>65535&&c<1114112){o=c}}}}if(o===null){o=65533;s=1}else if(o>65535){o-=65536;n.push(o>>>10&1023|55296);o=56320|o&1023}n.push(o);a+=s}return Z(n)}var G=4096;function Z(e){var t=e.length;if(t<=G){return String.fromCharCode.apply(String,e)}var r="";var n=0;while(n<t){r+=String.fromCharCode.apply(String,e.slice(n,n+=G))}return r}function Y(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a){n+=String.fromCharCode(e[a]&127)}return n}function W(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a){n+=String.fromCharCode(e[a])}return n}function X(e,t,r){var n=e.length;if(!t||t<0)t=0;if(!r||r<0||r>n)r=n;var a="";for(var i=t;i<r;++i){a+=be[e[i]]}return a}function J(e,t,r){var n=e.slice(t,r);var a="";for(var i=0;i<n.length-1;i+=2){a+=String.fromCharCode(n[i]+n[i+1]*256)}return a}_.prototype.slice=function e(t,r){var n=this.length;t=~~t;r=r===undefined?n:~~r;if(t<0){t+=n;if(t<0)t=0}else if(t>n){t=n}if(r<0){r+=n;if(r<0)r=0}else if(r>n){r=n}if(r<t)r=t;var a=this.subarray(t,r);Object.setPrototypeOf(a,_.prototype);return a};function K(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}_.prototype.readUintLE=_.prototype.readUIntLE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)K(t,r,this.length);var a=this[t];var i=1;var o=0;while(++o<r&&(i*=256)){a+=this[t+o]*i}return a};_.prototype.readUintBE=_.prototype.readUIntBE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n){K(t,r,this.length)}var a=this[t+--r];var i=1;while(r>0&&(i*=256)){a+=this[t+--r]*i}return a};_.prototype.readUint8=_.prototype.readUInt8=function e(t,r){t=t>>>0;if(!r)K(t,1,this.length);return this[t]};_.prototype.readUint16LE=_.prototype.readUInt16LE=function e(t,r){t=t>>>0;if(!r)K(t,2,this.length);return this[t]|this[t+1]<<8};_.prototype.readUint16BE=_.prototype.readUInt16BE=function e(t,r){t=t>>>0;if(!r)K(t,2,this.length);return this[t]<<8|this[t+1]};_.prototype.readUint32LE=_.prototype.readUInt32LE=function e(t,r){t=t>>>0;if(!r)K(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};_.prototype.readUint32BE=_.prototype.readUInt32BE=function e(t,r){t=t>>>0;if(!r)K(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};_.prototype.readBigUInt64LE=_e((function e(t){t=t>>>0;ue(t,"offset");var r=this[t];var n=this[t+7];if(r===undefined||n===undefined){fe(t,this.length-8)}var a=r+this[++t]*Math.pow(2,8)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,24);var i=this[++t]+this[++t]*Math.pow(2,8)+this[++t]*Math.pow(2,16)+n*Math.pow(2,24);return BigInt(a)+(BigInt(i)<<BigInt(32))}));_.prototype.readBigUInt64BE=_e((function e(t){t=t>>>0;ue(t,"offset");var r=this[t];var n=this[t+7];if(r===undefined||n===undefined){fe(t,this.length-8)}var a=r*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+this[++t];var i=this[++t]*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+n;return(BigInt(a)<<BigInt(32))+BigInt(i)}));_.prototype.readIntLE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)K(t,r,this.length);var a=this[t];var i=1;var o=0;while(++o<r&&(i*=256)){a+=this[t+o]*i}i*=128;if(a>=i)a-=Math.pow(2,8*r);return a};_.prototype.readIntBE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)K(t,r,this.length);var a=r;var i=1;var o=this[t+--a];while(a>0&&(i*=256)){o+=this[t+--a]*i}i*=128;if(o>=i)o-=Math.pow(2,8*r);return o};_.prototype.readInt8=function e(t,r){t=t>>>0;if(!r)K(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};_.prototype.readInt16LE=function e(t,r){t=t>>>0;if(!r)K(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};_.prototype.readInt16BE=function e(t,r){t=t>>>0;if(!r)K(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};_.prototype.readInt32LE=function e(t,r){t=t>>>0;if(!r)K(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};_.prototype.readInt32BE=function e(t,r){t=t>>>0;if(!r)K(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};_.prototype.readBigInt64LE=_e((function e(t){t=t>>>0;ue(t,"offset");var r=this[t];var n=this[t+7];if(r===undefined||n===undefined){fe(t,this.length-8)}var a=this[t+4]+this[t+5]*Math.pow(2,8)+this[t+6]*Math.pow(2,16)+(n<<24);return(BigInt(a)<<BigInt(32))+BigInt(r+this[++t]*Math.pow(2,8)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,24))}));_.prototype.readBigInt64BE=_e((function e(t){t=t>>>0;ue(t,"offset");var r=this[t];var n=this[t+7];if(r===undefined||n===undefined){fe(t,this.length-8)}var a=(r<<24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+this[++t];return(BigInt(a)<<BigInt(32))+BigInt(this[++t]*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+n)}));_.prototype.readFloatLE=function e(t,r){t=t>>>0;if(!r)K(t,4,this.length);return g.read(this,t,true,23,4)};_.prototype.readFloatBE=function e(t,r){t=t>>>0;if(!r)K(t,4,this.length);return g.read(this,t,false,23,4)};_.prototype.readDoubleLE=function e(t,r){t=t>>>0;if(!r)K(t,8,this.length);return g.read(this,t,true,52,8)};_.prototype.readDoubleBE=function e(t,r){t=t>>>0;if(!r)K(t,8,this.length);return g.read(this,t,false,52,8)};function $(e,t,r,n,a,i){if(!_.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}_.prototype.writeUintLE=_.prototype.writeUIntLE=function e(t,r,n,a){t=+t;r=r>>>0;n=n>>>0;if(!a){var i=Math.pow(2,8*n)-1;$(this,t,r,n,i,0)}var o=1;var s=0;this[r]=t&255;while(++s<n&&(o*=256)){this[r+s]=t/o&255}return r+n};_.prototype.writeUintBE=_.prototype.writeUIntBE=function e(t,r,n,a){t=+t;r=r>>>0;n=n>>>0;if(!a){var i=Math.pow(2,8*n)-1;$(this,t,r,n,i,0)}var o=n-1;var s=1;this[r+o]=t&255;while(--o>=0&&(s*=256)){this[r+o]=t/s&255}return r+n};_.prototype.writeUint8=_.prototype.writeUInt8=function e(t,r,n){t=+t;r=r>>>0;if(!n)$(this,t,r,1,255,0);this[r]=t&255;return r+1};_.prototype.writeUint16LE=_.prototype.writeUInt16LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)$(this,t,r,2,65535,0);this[r]=t&255;this[r+1]=t>>>8;return r+2};_.prototype.writeUint16BE=_.prototype.writeUInt16BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)$(this,t,r,2,65535,0);this[r]=t>>>8;this[r+1]=t&255;return r+2};_.prototype.writeUint32LE=_.prototype.writeUInt32LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)$(this,t,r,4,4294967295,0);this[r+3]=t>>>24;this[r+2]=t>>>16;this[r+1]=t>>>8;this[r]=t&255;return r+4};_.prototype.writeUint32BE=_.prototype.writeUInt32BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)$(this,t,r,4,4294967295,0);this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};function Q(e,t,r,n,a){le(t,n,a,e,r,7);var i=Number(t&BigInt(4294967295));e[r++]=i;i=i>>8;e[r++]=i;i=i>>8;e[r++]=i;i=i>>8;e[r++]=i;var o=Number(t>>BigInt(32)&BigInt(4294967295));e[r++]=o;o=o>>8;e[r++]=o;o=o>>8;e[r++]=o;o=o>>8;e[r++]=o;return r}function ee(e,t,r,n,a){le(t,n,a,e,r,7);var i=Number(t&BigInt(4294967295));e[r+7]=i;i=i>>8;e[r+6]=i;i=i>>8;e[r+5]=i;i=i>>8;e[r+4]=i;var o=Number(t>>BigInt(32)&BigInt(4294967295));e[r+3]=o;o=o>>8;e[r+2]=o;o=o>>8;e[r+1]=o;o=o>>8;e[r]=o;return r+8}_.prototype.writeBigUInt64LE=_e((function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return Q(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))}));_.prototype.writeBigUInt64BE=_e((function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return ee(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))}));_.prototype.writeIntLE=function e(t,r,n,a){t=+t;r=r>>>0;if(!a){var i=Math.pow(2,8*n-1);$(this,t,r,n,i-1,-i)}var o=0;var s=1;var l=0;this[r]=t&255;while(++o<n&&(s*=256)){if(t<0&&l===0&&this[r+o-1]!==0){l=1}this[r+o]=(t/s>>0)-l&255}return r+n};_.prototype.writeIntBE=function e(t,r,n,a){t=+t;r=r>>>0;if(!a){var i=Math.pow(2,8*n-1);$(this,t,r,n,i-1,-i)}var o=n-1;var s=1;var l=0;this[r+o]=t&255;while(--o>=0&&(s*=256)){if(t<0&&l===0&&this[r+o+1]!==0){l=1}this[r+o]=(t/s>>0)-l&255}return r+n};_.prototype.writeInt8=function e(t,r,n){t=+t;r=r>>>0;if(!n)$(this,t,r,1,127,-128);if(t<0)t=255+t+1;this[r]=t&255;return r+1};_.prototype.writeInt16LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)$(this,t,r,2,32767,-32768);this[r]=t&255;this[r+1]=t>>>8;return r+2};_.prototype.writeInt16BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)$(this,t,r,2,32767,-32768);this[r]=t>>>8;this[r+1]=t&255;return r+2};_.prototype.writeInt32LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)$(this,t,r,4,2147483647,-2147483648);this[r]=t&255;this[r+1]=t>>>8;this[r+2]=t>>>16;this[r+3]=t>>>24;return r+4};_.prototype.writeInt32BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)$(this,t,r,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};_.prototype.writeBigInt64LE=_e((function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return Q(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}));_.prototype.writeBigInt64BE=_e((function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return ee(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}));function te(e,t,r,n,a,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function re(e,t,r,n,a){t=+t;r=r>>>0;if(!a){te(e,t,r,4,34028234663852886e22,-34028234663852886e22)}g.write(e,t,r,n,23,4);return r+4}_.prototype.writeFloatLE=function e(t,r,n){return re(this,t,r,true,n)};_.prototype.writeFloatBE=function e(t,r,n){return re(this,t,r,false,n)};function ne(e,t,r,n,a){t=+t;r=r>>>0;if(!a){te(e,t,r,8,17976931348623157e292,-17976931348623157e292)}g.write(e,t,r,n,52,8);return r+8}_.prototype.writeDoubleLE=function e(t,r,n){return ne(this,t,r,true,n)};_.prototype.writeDoubleBE=function e(t,r,n){return ne(this,t,r,false,n)};_.prototype.copy=function e(t,r,n,a){if(!_.isBuffer(t))throw new TypeError("argument should be a Buffer");if(!n)n=0;if(!a&&a!==0)a=this.length;if(r>=t.length)r=t.length;if(!r)r=0;if(a>0&&a<n)a=n;if(a===n)return 0;if(t.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("sourceEnd out of bounds");if(a>this.length)a=this.length;if(t.length-r<a-n){a=t.length-r+n}var i=a-n;if(this===t&&typeof Uint8Array.prototype.copyWithin==="function"){this.copyWithin(r,n,a)}else{Uint8Array.prototype.set.call(t,this.subarray(n,a),r)}return i};_.prototype.fill=function e(t,r,n,a){if(typeof t==="string"){if(typeof r==="string"){a=r;r=0;n=this.length}else if(typeof n==="string"){a=n;n=this.length}if(a!==undefined&&typeof a!=="string"){throw new TypeError("encoding must be a string")}if(typeof a==="string"&&!_.isEncoding(a)){throw new TypeError("Unknown encoding: "+a)}if(t.length===1){var i=t.charCodeAt(0);if(a==="utf8"&&i<128||a==="latin1"){t=i}}}else if(typeof t==="number"){t=t&255}else if(typeof t==="boolean"){t=Number(t)}if(r<0||this.length<r||this.length<n){throw new RangeError("Out of range index")}if(n<=r){return this}r=r>>>0;n=n===undefined?this.length:n>>>0;if(!t)t=0;var o;if(typeof t==="number"){for(o=r;o<n;++o){this[o]=t}}else{var s=_.isBuffer(t)?t:_.from(t,a);var l=s.length;if(l===0){throw new TypeError('The value "'+t+'" is invalid for argument "value"')}for(o=0;o<n-r;++o){this[o+r]=s[o%l]}}return this};var ae={};function ie(e,t,r){ae[e]=function(r){s(i,r);var n=u(i);function i(){var r;a(this,i);r=n.call(this);Object.defineProperty(c(r),"message",{value:t.apply(c(r),arguments),writable:true,configurable:true});r.name="".concat(r.name," [").concat(e,"]");r.stack;delete r.name;return r}o(i,[{key:"code",get:function t(){return e},set:function e(t){Object.defineProperty(this,"code",{configurable:true,enumerable:true,value:t,writable:true})}},{key:"toString",value:function t(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]);return i}(r)}ie("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){if(e){return"".concat(e," is outside of buffer bounds")}return"Attempt to access memory outside buffer bounds"}),RangeError);ie("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(p(t))}),TypeError);ie("ERR_OUT_OF_RANGE",(function(e,t,r){var n='The value of "'.concat(e,'" is out of range.');var a=r;if(Number.isInteger(r)&&Math.abs(r)>Math.pow(2,32)){a=oe(String(r))}else if(typeof r==="bigint"){a=String(r);if(r>Math.pow(BigInt(2),BigInt(32))||r<-Math.pow(BigInt(2),BigInt(32))){a=oe(a)}a+="n"}n+=" It must be ".concat(t,". Received ").concat(a);return n}),RangeError);function oe(e){var t="";var r=e.length;var n=e[0]==="-"?1:0;for(;r>=n+4;r-=3){t="_".concat(e.slice(r-3,r)).concat(t)}return"".concat(e.slice(0,r)).concat(t)}function se(e,t,r){ue(t,"offset");if(e[t]===undefined||e[t+r]===undefined){fe(t,e.length-(r+1))}}function le(e,t,r,n,a,i){if(e>r||e<t){var o=typeof t==="bigint"?"n":"";var s;if(i>3){if(t===0||t===BigInt(0)){s=">= 0".concat(o," and < 2").concat(o," ** ").concat((i+1)*8).concat(o)}else{s=">= -(2".concat(o," ** ").concat((i+1)*8-1).concat(o,") and < 2 ** ")+"".concat((i+1)*8-1).concat(o)}}else{s=">= ".concat(t).concat(o," and <= ").concat(r).concat(o)}throw new ae.ERR_OUT_OF_RANGE("value",s,e)}se(n,a,i)}function ue(e,t){if(typeof e!=="number"){throw new ae.ERR_INVALID_ARG_TYPE(t,"number",e)}}function fe(e,t,r){if(Math.floor(e)!==e){ue(e,r);throw new ae.ERR_OUT_OF_RANGE(r||"offset","an integer",e)}if(t<0){throw new ae.ERR_BUFFER_OUT_OF_BOUNDS}throw new ae.ERR_OUT_OF_RANGE(r||"offset",">= ".concat(r?1:0," and <= ").concat(t),e)}var ce=/[^+/0-9A-Za-z-_]/g;function ve(e){e=e.split("=")[0];e=e.trim().replace(ce,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function he(e,t){t=t||Infinity;var r;var n=e.length;var a=null;var i=[];for(var o=0;o<n;++o){r=e.charCodeAt(o);if(r>55295&&r<57344){if(!a){if(r>56319){if((t-=3)>-1)i.push(239,191,189);continue}else if(o+1===n){if((t-=3)>-1)i.push(239,191,189);continue}a=r;continue}if(r<56320){if((t-=3)>-1)i.push(239,191,189);a=r;continue}r=(a-55296<<10|r-56320)+65536}else if(a){if((t-=3)>-1)i.push(239,191,189)}a=null;if(r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return i}function pe(e){var t=[];for(var r=0;r<e.length;++r){t.push(e.charCodeAt(r)&255)}return t}function de(e,t){var r,n,a;var i=[];for(var o=0;o<e.length;++o){if((t-=2)<0)break;r=e.charCodeAt(o);n=r>>8;a=r%256;i.push(a);i.push(n)}return i}function ge(e){return d.toByteArray(ve(e))}function ye(e,t,r,n){var a;for(a=0;a<n;++a){if(a+r>=t.length||a>=e.length)break;t[a+r]=e[a]}return a}function me(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function xe(e){return e!==e}var be=function(){var e="0123456789abcdef";var t=new Array(256);for(var r=0;r<16;++r){var n=r*16;for(var a=0;a<16;++a){t[n+a]=e[r]+e[a]}}return t}();function _e(e){return typeof BigInt==="undefined"?we:e}function we(){throw new Error("BigInt not supported")}},2321:function(e){"use strict";e.exports=a;e.exports.isMobile=a;e.exports["default"]=a;var t=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i;var r=/CrOS/;var n=/android|ipad|playbook|silk/i;function a(e){if(!e)e={};var a=e.ua;if(!a&&typeof navigator!=="undefined")a=navigator.userAgent;if(a&&a.headers&&typeof a.headers["user-agent"]==="string"){a=a.headers["user-agent"]}if(typeof a!=="string")return false;var i=t.test(a)&&!r.test(a)||!!e.tablet&&n.test(a);if(!i&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&a.indexOf("Macintosh")!==-1&&a.indexOf("Safari")!==-1){i=true}return i}},3910:function(e,t){"use strict";t.byteLength=u;t.toByteArray=c;t.fromByteArray=p;var r=[];var n=[];var a=typeof Uint8Array!=="undefined"?Uint8Array:Array;var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var o=0,s=i.length;o<s;++o){r[o]=i[o];n[i.charCodeAt(o)]=o}n["-".charCodeAt(0)]=62;n["_".charCodeAt(0)]=63;function l(e){var t=e.length;if(t%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var r=e.indexOf("=");if(r===-1)r=t;var n=r===t?0:4-r%4;return[r,n]}function u(e){var t=l(e);var r=t[0];var n=t[1];return(r+n)*3/4-n}function f(e,t,r){return(t+r)*3/4-r}function c(e){var t;var r=l(e);var i=r[0];var o=r[1];var s=new a(f(e,i,o));var u=0;var c=o>0?i-4:i;var v;for(v=0;v<c;v+=4){t=n[e.charCodeAt(v)]<<18|n[e.charCodeAt(v+1)]<<12|n[e.charCodeAt(v+2)]<<6|n[e.charCodeAt(v+3)];s[u++]=t>>16&255;s[u++]=t>>8&255;s[u++]=t&255}if(o===2){t=n[e.charCodeAt(v)]<<2|n[e.charCodeAt(v+1)]>>4;s[u++]=t&255}if(o===1){t=n[e.charCodeAt(v)]<<10|n[e.charCodeAt(v+1)]<<4|n[e.charCodeAt(v+2)]>>2;s[u++]=t>>8&255;s[u++]=t&255}return s}function v(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[e&63]}function h(e,t,r){var n;var a=[];for(var i=t;i<r;i+=3){n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255);a.push(v(n))}return a.join("")}function p(e){var t;var n=e.length;var a=n%3;var i=[];var o=16383;for(var s=0,l=n-a;s<l;s+=o){i.push(h(e,s,s+o>l?l:s+o))}if(a===1){t=e[n-1];i.push(r[t>>2]+r[t<<4&63]+"==")}else if(a===2){t=(e[n-2]<<8)+e[n-1];i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")}return i.join("")}},3187:function(e,t){t.read=function(e,t,r,n,a){var i,o;var s=a*8-n-1;var l=(1<<s)-1;var u=l>>1;var f=-7;var c=r?a-1:0;var v=r?-1:1;var h=e[t+c];c+=v;i=h&(1<<-f)-1;h>>=-f;f+=s;for(;f>0;i=i*256+e[t+c],c+=v,f-=8){}o=i&(1<<-f)-1;i>>=-f;f+=n;for(;f>0;o=o*256+e[t+c],c+=v,f-=8){}if(i===0){i=1-u}else if(i===l){return o?NaN:(h?-1:1)*Infinity}else{o=o+Math.pow(2,n);i=i-u}return(h?-1:1)*o*Math.pow(2,i-n)};t.write=function(e,t,r,n,a,i){var o,s,l;var u=i*8-a-1;var f=(1<<u)-1;var c=f>>1;var v=a===23?Math.pow(2,-24)-Math.pow(2,-77):0;var h=n?0:i-1;var p=n?1:-1;var d=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){s=isNaN(t)?1:0;o=f}else{o=Math.floor(Math.log(t)/Math.LN2);if(t*(l=Math.pow(2,-o))<1){o--;l*=2}if(o+c>=1){t+=v/l}else{t+=v*Math.pow(2,1-c)}if(t*l>=2){o++;l/=2}if(o+c>=f){s=0;o=f}else if(o+c>=1){s=(t*l-1)*Math.pow(2,a);o=o+c}else{s=t*Math.pow(2,c-1)*Math.pow(2,a);o=0}}for(;a>=8;e[r+h]=s&255,h+=p,s/=256,a-=8){}o=o<<a|s;u+=a;for(;u>0;e[r+h]=o&255,h+=p,o/=256,u-=8){}e[r+h-p]|=d*128}},1152:function(e,t,r){"use strict";e.exports=l;var n=r(3440);var a=r(7774);var i=r(9298);function o(e,t){this._controllerNames=Object.keys(e);this._controllerList=this._controllerNames.map((function(t){return e[t]}));this._mode=t;this._active=e[t];if(!this._active){this._mode="turntable";this._active=e.turntable}this.modes=this._controllerNames;this.computedMatrix=this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}var s=o.prototype;s.flush=function(e){var t=this._controllerList;for(var r=0;r<t.length;++r){t[r].flush(e)}};s.idle=function(e){var t=this._controllerList;for(var r=0;r<t.length;++r){t[r].idle(e)}};s.lookAt=function(e,t,r,n){var a=this._controllerList;for(var i=0;i<a.length;++i){a[i].lookAt(e,t,r,n)}};s.rotate=function(e,t,r,n){var a=this._controllerList;for(var i=0;i<a.length;++i){a[i].rotate(e,t,r,n)}};s.pan=function(e,t,r,n){var a=this._controllerList;for(var i=0;i<a.length;++i){a[i].pan(e,t,r,n)}};s.translate=function(e,t,r,n){var a=this._controllerList;for(var i=0;i<a.length;++i){a[i].translate(e,t,r,n)}};s.setMatrix=function(e,t){var r=this._controllerList;for(var n=0;n<r.length;++n){r[n].setMatrix(e,t)}};s.setDistanceLimits=function(e,t){var r=this._controllerList;for(var n=0;n<r.length;++n){r[n].setDistanceLimits(e,t)}};s.setDistance=function(e,t){var r=this._controllerList;for(var n=0;n<r.length;++n){r[n].setDistance(e,t)}};s.recalcMatrix=function(e){this._active.recalcMatrix(e)};s.getDistance=function(e){return this._active.getDistance(e)};s.getDistanceLimits=function(e){return this._active.getDistanceLimits(e)};s.lastT=function(){return this._active.lastT()};s.setMode=function(e){if(e===this._mode){return}var t=this._controllerNames.indexOf(e);if(t<0){return}var r=this._active;var n=this._controllerList[t];var a=Math.max(r.lastT(),n.lastT());r.recalcMatrix(a);n.setMatrix(a,r.computedMatrix);this._active=n;this._mode=e;this.computedMatrix=this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius};s.getMode=function(){return this._mode};function l(e){e=e||{};var t=e.eye||[0,0,1];var r=e.center||[0,0,0];var s=e.up||[0,1,0];var l=e.distanceLimits||[0,Infinity];var u=e.mode||"turntable";var f=n();var c=a();var v=i();f.setDistanceLimits(l[0],l[1]);f.lookAt(0,t,r,s);c.setDistanceLimits(l[0],l[1]);c.lookAt(0,t,r,s);v.setDistanceLimits(l[0],l[1]);v.lookAt(0,t,r,s);return new o({turntable:f,orbit:c,matrix:v},u)}},8126:function(e,t,r){"use strict";var n=typeof WeakMap==="undefined"?r(5346):WeakMap;var a=r(5827);var i=r(2944);var o=new n;function s(e){var t=o.get(e);var r=t&&(t._triangleBuffer.handle||t._triangleBuffer.buffer);if(!r||!e.isBuffer(r)){var n=a(e,new Float32Array([-1,-1,-1,4,4,-1]));t=i(e,[{buffer:n,type:e.FLOAT,size:2}]);t._triangleBuffer=n;o.set(e,t)}t.bind();e.drawArrays(e.TRIANGLES,0,3);t.unbind()}e.exports=s},8008:function(e,t,r){var n=r(4930);e.exports=a;function a(e,t,r){t=typeof t==="number"?t:1;r=r||": ";var a=e.split(/\r?\n/);var i=String(a.length+t-1).length;return a.map((function(e,a){var o=a+t;var s=String(o).length;var l=n(o,i-s);return l+r+e})).join("\n")}},2153:function(e,t,r){"use strict";e.exports=i;var n=r(417);function a(e,t){var r=new Array(t+1);for(var a=0;a<e.length;++a){r[a]=e[a]}for(var a=0;a<=e.length;++a){for(var i=e.length;i<=t;++i){var o=new Array(t);for(var s=0;s<t;++s){o[s]=Math.pow(i+1-a,s)}r[i]=o}var l=n.apply(void 0,r);if(l){return true}}return false}function i(e){var t=e.length;if(t===0){return[]}if(t===1){return[0]}var r=e[0].length;var n=[e[0]];var i=[0];for(var o=1;o<t;++o){n.push(e[o]);if(!a(n,r)){n.pop();continue}i.push(o);if(i.length===r+1){return i}}return i}},4653:function(e,t,r){"use strict";e.exports=i;var n=r(4419);var a=r(1778);function i(e,t){return n(t).filter((function(r){var n=new Array(r.length);for(var i=0;i<r.length;++i){n[i]=t[r[i]]}return a(n)*e<1}))}},2350:function(e,t,r){e.exports=i;var n=r(4653);var a=r(8691);function i(e,t){return a(n(e,t))}},7896:function(e){e.exports=function e(t){return atob(t)}},957:function(e,t,r){"use strict";e.exports=i;var n=r(6606);function a(e){var t=0;for(var r=0;r<e.length;++r){t+=e[r]}return t}function i(e,t){var r=t.length;var i=new Array(r+1);for(var o=0;o<r;++o){var s=new Array(r+1);for(var l=0;l<=r;++l){s[l]=e[l][o]}i[o]=s}i[r]=new Array(r+1);for(var o=0;o<=r;++o){i[r][o]=1}var u=new Array(r+1);for(var o=0;o<r;++o){u[o]=t[o]}u[r]=1;var f=n(i,u);var c=a(f[r+1]);if(c===0){c=1}var v=new Array(r+1);for(var o=0;o<=r;++o){v[o]=a(f[o])/c}return v}},1539:function(e,t,r){"use strict";var n=r(8524);e.exports=a;function a(e,t){return n(e[0].mul(t[1]).add(t[0].mul(e[1])),e[1].mul(t[1]))}},8846:function(e){"use strict";e.exports=t;function t(e,t){return e[0].mul(t[1]).cmp(t[0].mul(e[1]))}},9189:function(e,t,r){"use strict";var n=r(8524);e.exports=a;function a(e,t){return n(e[0].mul(t[1]),e[1].mul(t[0]))}},5125:function(e,t,r){"use strict";var n=r(234);var a=r(3218);var i=r(5514);var o=r(2813);var s=r(8524);var l=r(9189);e.exports=u;function u(e,t){if(n(e)){if(t){return l(e,u(t))}return[e[0].clone(),e[1].clone()]}var r=0;var f,c;if(a(e)){f=e.clone()}else if(typeof e==="string"){f=o(e)}else if(e===0){return[i(0),i(1)]}else if(e===Math.floor(e)){f=i(e)}else{while(e!==Math.floor(e)){e=e*Math.pow(2,256);r-=256}f=i(e)}if(n(t)){f.mul(t[1]);c=t[0].clone()}else if(a(t)){c=t.clone()}else if(typeof t==="string"){c=o(t)}else if(!t){c=i(1)}else if(t===Math.floor(t)){c=i(t)}else{while(t!==Math.floor(t)){t=t*Math.pow(2,256);r+=256}c=i(t)}if(r>0){f=f.ushln(r)}else if(r<0){c=c.ushln(-r)}return s(f,c)}},234:function(e,t,r){"use strict";var n=r(3218);e.exports=a;function a(e){return Array.isArray(e)&&e.length===2&&n(e[0])&&n(e[1])}},4275:function(e,t,r){"use strict";var n=r(1928);e.exports=a;function a(e){return e.cmp(new n(0))}},9958:function(e,t,r){"use strict";var n=r(4275);e.exports=a;function a(e){var t=e.length;var r=e.words;var a=0;if(t===1){a=r[0]}else if(t===2){a=r[0]+r[1]*67108864}else{for(var i=0;i<t;i++){var o=r[i];a+=o*Math.pow(67108864,i)}}return n(e)*a}},1112:function(e,t,r){"use strict";var n=r(8362);var a=r(2288).countTrailingZeros;e.exports=i;function i(e){var t=a(n.lo(e));if(t<32){return t}var r=a(n.hi(e));if(r>20){return 52}return r+32}},3218:function(e,t,r){"use strict";var n=r(1928);e.exports=a;function a(e){return e&&typeof e==="object"&&Boolean(e.words)}},5514:function(e,t,r){"use strict";var n=r(1928);var a=r(8362);e.exports=i;function i(e){var t=a.exponent(e);if(t<52){return new n(e)}else{return new n(e*Math.pow(2,52-t)).ushln(t-52)}}},8524:function(e,t,r){"use strict";var n=r(5514);var a=r(4275);e.exports=i;function i(e,t){var r=a(e);var i=a(t);if(r===0){return[n(0),n(1)]}if(i===0){return[n(0),n(0)]}if(i<0){e=e.neg();t=t.neg()}var o=e.gcd(t);if(o.cmpn(1)){return[e.div(o),t.div(o)]}return[e,t]}},2813:function(e,t,r){"use strict";var n=r(1928);e.exports=a;function a(e){return new n(e)}},3962:function(e,t,r){"use strict";var n=r(8524);e.exports=a;function a(e,t){return n(e[0].mul(t[0]),e[1].mul(t[1]))}},4951:function(e,t,r){"use strict";var n=r(4275);e.exports=a;function a(e){return n(e[0])*n(e[1])}},4354:function(e,t,r){"use strict";var n=r(8524);e.exports=a;function a(e,t){return n(e[0].mul(t[1]).sub(e[1].mul(t[0])),e[1].mul(t[1]))}},7999:function(e,t,r){"use strict";var n=r(9958);var a=r(1112);e.exports=i;function i(e){var t=e[0];var r=e[1];if(t.cmpn(0)===0){return 0}var i=t.abs().divmod(r.abs());var o=i.div;var s=n(o);var l=i.mod;var u=t.negative!==r.negative?-1:1;if(l.cmpn(0)===0){return u*s}if(s){var f=a(s)+4;var c=n(l.ushln(f).divRound(r));return u*(s+c*Math.pow(2,-f))}else{var v=r.bitLength()-l.bitLength()+53;var c=n(l.ushln(v).divRound(r));if(v<1023){return u*c*Math.pow(2,-v)}c*=Math.pow(2,-1023);return u*c*Math.pow(2,1023-v)}}},5070:function(e){"use strict";function t(e,t,r,n,a){var i=a+1;while(n<=a){var o=n+a>>>1,s=e[o];var l=r!==undefined?r(s,t):s-t;if(l>=0){i=o;a=o-1}else{n=o+1}}return i}function r(e,t,r,n,a){var i=a+1;while(n<=a){var o=n+a>>>1,s=e[o];var l=r!==undefined?r(s,t):s-t;if(l>0){i=o;a=o-1}else{n=o+1}}return i}function n(e,t,r,n,a){var i=n-1;while(n<=a){var o=n+a>>>1,s=e[o];var l=r!==undefined?r(s,t):s-t;if(l<0){i=o;n=o+1}else{a=o-1}}return i}function a(e,t,r,n,a){var i=n-1;while(n<=a){var o=n+a>>>1,s=e[o];var l=r!==undefined?r(s,t):s-t;if(l<=0){i=o;n=o+1}else{a=o-1}}return i}function i(e,t,r,n,a){while(n<=a){var i=n+a>>>1,o=e[i];var s=r!==undefined?r(o,t):o-t;if(s===0){return i}if(s<=0){n=i+1}else{a=i-1}}return-1}function o(e,t,r,n,a,i){if(typeof r==="function"){return i(e,t,r,n===undefined?0:n|0,a===undefined?e.length-1:a|0)}return i(e,t,undefined,r===undefined?0:r|0,n===undefined?e.length-1:n|0)}e.exports={ge:function(e,r,n,a,i){return o(e,r,n,a,i,t)},gt:function(e,t,n,a,i){return o(e,t,n,a,i,r)},lt:function(e,t,r,a,i){return o(e,t,r,a,i,n)},le:function(e,t,r,n,i){return o(e,t,r,n,i,a)},eq:function(e,t,r,n,a){return o(e,t,r,n,a,i)}}},2288:function(e,t){"use strict";"use restrict";var r=32;t.INT_BITS=r;t.INT_MAX=2147483647;t.INT_MIN=-1<<r-1;t.sign=function(e){return(e>0)-(e<0)};t.abs=function(e){var t=e>>r-1;return(e^t)-t};t.min=function(e,t){return t^(e^t)&-(e<t)};t.max=function(e,t){return e^(e^t)&-(e<t)};t.isPow2=function(e){return!(e&e-1)&&!!e};t.log2=function(e){var t,r;t=(e>65535)<<4;e>>>=t;r=(e>255)<<3;e>>>=r;t|=r;r=(e>15)<<2;e>>>=r;t|=r;r=(e>3)<<1;e>>>=r;t|=r;return t|e>>1};t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0};t.popCount=function(e){e=e-(e>>>1&1431655765);e=(e&858993459)+(e>>>2&858993459);return(e+(e>>>4)&252645135)*16843009>>>24};function n(e){var t=32;e&=-e;if(e)t--;if(e&65535)t-=16;if(e&16711935)t-=8;if(e&252645135)t-=4;if(e&858993459)t-=2;if(e&1431655765)t-=1;return t}t.countTrailingZeros=n;t.nextPow2=function(e){e+=e===0;--e;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;return e+1};t.prevPow2=function(e){e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;return e-(e>>>1)};t.parity=function(e){e^=e>>>16;e^=e>>>8;e^=e>>>4;e&=15;return 27030>>>e&1};var a=new Array(256);(function(e){for(var t=0;t<256;++t){var r=t,n=t,a=7;for(r>>>=1;r;r>>>=1){n<<=1;n|=r&1;--a}e[t]=n<<a&255}})(a);t.reverse=function(e){return a[e&255]<<24|a[e>>>8&255]<<16|a[e>>>16&255]<<8|a[e>>>24&255]};t.interleave2=function(e,t){e&=65535;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;e=(e|e<<1)&1431655765;t&=65535;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;t=(t|t<<1)&1431655765;return e|t<<1};t.deinterleave2=function(e,t){e=e>>>t&1431655765;e=(e|e>>>1)&858993459;e=(e|e>>>2)&252645135;e=(e|e>>>4)&16711935;e=(e|e>>>16)&65535;return e<<16>>16};t.interleave3=function(e,t,r){e&=1023;e=(e|e<<16)&4278190335;e=(e|e<<8)&251719695;e=(e|e<<4)&3272356035;e=(e|e<<2)&1227133513;t&=1023;t=(t|t<<16)&4278190335;t=(t|t<<8)&251719695;t=(t|t<<4)&3272356035;t=(t|t<<2)&1227133513;e|=t<<1;r&=1023;r=(r|r<<16)&4278190335;r=(r|r<<8)&251719695;r=(r|r<<4)&3272356035;r=(r|r<<2)&1227133513;return e|r<<2};t.deinterleave3=function(e,t){e=e>>>t&1227133513;e=(e|e>>>2)&3272356035;e=(e|e>>>4)&251719695;e=(e|e>>>8)&4278190335;e=(e|e>>>16)&1023;return e<<22>>22};t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},1928:function(e,t,r){e=r.nmd(e);(function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function a(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype;e.prototype=new r;e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e)){return e}this.negative=0;this.words=null;this.length=0;this.red=null;if(e!==null){if(t==="le"||t==="be"){r=t;t=10}this._init(e||0,t||10,r||"be")}}if(typeof e==="object"){e.exports=i}else{t.BN=i}i.BN=i;i.wordSize=26;var o;try{if(typeof window!=="undefined"&&typeof window.Buffer!=="undefined"){o=window.Buffer}else{o=r(6601).Buffer}}catch(S){}i.isBN=function e(t){if(t instanceof i){return true}return t!==null&&typeof t==="object"&&t.constructor.wordSize===i.wordSize&&Array.isArray(t.words)};i.max=function e(t,r){if(t.cmp(r)>0)return t;return r};i.min=function e(t,r){if(t.cmp(r)<0)return t;return r};i.prototype._init=function e(t,r,a){if(typeof t==="number"){return this._initNumber(t,r,a)}if(typeof t==="object"){return this._initArray(t,r,a)}if(r==="hex"){r=16}n(r===(r|0)&&r>=2&&r<=36);t=t.toString().replace(/\s+/g,"");var i=0;if(t[0]==="-"){i++;this.negative=1}if(i<t.length){if(r===16){this._parseHex(t,i,a)}else{this._parseBase(t,r,i);if(a==="le"){this._initArray(this.toArray(),r,a)}}}};i.prototype._initNumber=function e(t,r,a){if(t<0){this.negative=1;t=-t}if(t<67108864){this.words=[t&67108863];this.length=1}else if(t<4503599627370496){this.words=[t&67108863,t/67108864&67108863];this.length=2}else{n(t<9007199254740992);this.words=[t&67108863,t/67108864&67108863,1];this.length=3}if(a!=="le")return;this._initArray(this.toArray(),r,a)};i.prototype._initArray=function e(t,r,a){n(typeof t.length==="number");if(t.length<=0){this.words=[0];this.length=1;return this}this.length=Math.ceil(t.length/3);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0}var o,s;var l=0;if(a==="be"){for(i=t.length-1,o=0;i>=0;i-=3){s=t[i]|t[i-1]<<8|t[i-2]<<16;this.words[o]|=s<<l&67108863;this.words[o+1]=s>>>26-l&67108863;l+=24;if(l>=26){l-=26;o++}}}else if(a==="le"){for(i=0,o=0;i<t.length;i+=3){s=t[i]|t[i+1]<<8|t[i+2]<<16;this.words[o]|=s<<l&67108863;this.words[o+1]=s>>>26-l&67108863;l+=24;if(l>=26){l-=26;o++}}}return this.strip()};function s(e,t){var r=e.charCodeAt(t);if(r>=65&&r<=70){return r-55}else if(r>=97&&r<=102){return r-87}else{return r-48&15}}function l(e,t,r){var n=s(e,r);if(r-1>=t){n|=s(e,r-1)<<4}return n}i.prototype._parseHex=function e(t,r,n){this.length=Math.ceil((t.length-r)/6);this.words=new Array(this.length);for(var a=0;a<this.length;a++){this.words[a]=0}var i=0;var o=0;var s;if(n==="be"){for(a=t.length-1;a>=r;a-=2){s=l(t,r,a)<<i;this.words[o]|=s&67108863;if(i>=18){i-=18;o+=1;this.words[o]|=s>>>26}else{i+=8}}}else{var u=t.length-r;for(a=u%2===0?r+1:r;a<t.length;a+=2){s=l(t,r,a)<<i;this.words[o]|=s&67108863;if(i>=18){i-=18;o+=1;this.words[o]|=s>>>26}else{i+=8}}}this.strip()};function u(e,t,r,n){var a=0;var i=Math.min(e.length,r);for(var o=t;o<i;o++){var s=e.charCodeAt(o)-48;a*=n;if(s>=49){a+=s-49+10}else if(s>=17){a+=s-17+10}else{a+=s}}return a}i.prototype._parseBase=function e(t,r,n){this.words=[0];this.length=1;for(var a=0,i=1;i<=67108863;i*=r){a++}a--;i=i/r|0;var o=t.length-n;var s=o%a;var l=Math.min(o,o-s)+n;var f=0;for(var c=n;c<l;c+=a){f=u(t,c,c+a,r);this.imuln(i);if(this.words[0]+f<67108864){this.words[0]+=f}else{this._iaddn(f)}}if(s!==0){var v=1;f=u(t,c,t.length,r);for(c=0;c<s;c++){v*=r}this.imuln(v);if(this.words[0]+f<67108864){this.words[0]+=f}else{this._iaddn(f)}}this.strip()};i.prototype.copy=function e(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++){t.words[r]=this.words[r]}t.length=this.length;t.negative=this.negative;t.red=this.red};i.prototype.clone=function e(){var t=new i(null);this.copy(t);return t};i.prototype._expand=function e(t){while(this.length<t){this.words[this.length++]=0}return this};i.prototype.strip=function e(){while(this.length>1&&this.words[this.length-1]===0){this.length--}return this._normSign()};i.prototype._normSign=function e(){if(this.length===1&&this.words[0]===0){this.negative=0}return this};i.prototype.inspect=function e(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"];var c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function e(t,r){t=t||10;r=r|0||1;var a;if(t===16||t==="hex"){a="";var i=0;var o=0;for(var s=0;s<this.length;s++){var l=this.words[s];var u=((l<<i|o)&16777215).toString(16);o=l>>>24-i&16777215;if(o!==0||s!==this.length-1){a=f[6-u.length]+u+a}else{a=u+a}i+=2;if(i>=26){i-=26;s--}}if(o!==0){a=o.toString(16)+a}while(a.length%r!==0){a="0"+a}if(this.negative!==0){a="-"+a}return a}if(t===(t|0)&&t>=2&&t<=36){var h=c[t];var p=v[t];a="";var d=this.clone();d.negative=0;while(!d.isZero()){var g=d.modn(p).toString(t);d=d.idivn(p);if(!d.isZero()){a=f[h-g.length]+g+a}else{a=g+a}}if(this.isZero()){a="0"+a}while(a.length%r!==0){a="0"+a}if(this.negative!==0){a="-"+a}return a}n(false,"Base should be between 2 and 36")};i.prototype.toNumber=function e(){var t=this.words[0];if(this.length===2){t+=this.words[1]*67108864}else if(this.length===3&&this.words[2]===1){t+=4503599627370496+this.words[1]*67108864}else if(this.length>2){n(false,"Number can only safely store up to 53 bits")}return this.negative!==0?-t:t};i.prototype.toJSON=function e(){return this.toString(16)};i.prototype.toBuffer=function e(t,r){n(typeof o!=="undefined");return this.toArrayLike(o,t,r)};i.prototype.toArray=function e(t,r){return this.toArrayLike(Array,t,r)};i.prototype.toArrayLike=function e(t,r,a){var i=this.byteLength();var o=a||Math.max(1,i);n(i<=o,"byte array longer than desired length");n(o>0,"Requested array length <= 0");this.strip();var s=r==="le";var l=new t(o);var u,f;var c=this.clone();if(!s){for(f=0;f<o-i;f++){l[f]=0}for(f=0;!c.isZero();f++){u=c.andln(255);c.iushrn(8);l[o-f-1]=u}}else{for(f=0;!c.isZero();f++){u=c.andln(255);c.iushrn(8);l[f]=u}for(;f<o;f++){l[f]=0}}return l};if(Math.clz32){i.prototype._countBits=function e(t){return 32-Math.clz32(t)}}else{i.prototype._countBits=function e(t){var r=t;var n=0;if(r>=4096){n+=13;r>>>=13}if(r>=64){n+=7;r>>>=7}if(r>=8){n+=4;r>>>=4}if(r>=2){n+=2;r>>>=2}return n+r}}i.prototype._zeroBits=function e(t){if(t===0)return 26;var r=t;var n=0;if((r&8191)===0){n+=13;r>>>=13}if((r&127)===0){n+=7;r>>>=7}if((r&15)===0){n+=4;r>>>=4}if((r&3)===0){n+=2;r>>>=2}if((r&1)===0){n++}return n};i.prototype.bitLength=function e(){var t=this.words[this.length-1];var r=this._countBits(t);return(this.length-1)*26+r};function h(e){var t=new Array(e.bitLength());for(var r=0;r<t.length;r++){var n=r/26|0;var a=r%26;t[r]=(e.words[n]&1<<a)>>>a}return t}i.prototype.zeroBits=function e(){if(this.isZero())return 0;var t=0;for(var r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);t+=n;if(n!==26)break}return t};i.prototype.byteLength=function e(){return Math.ceil(this.bitLength()/8)};i.prototype.toTwos=function e(t){if(this.negative!==0){return this.abs().inotn(t).iaddn(1)}return this.clone()};i.prototype.fromTwos=function e(t){if(this.testn(t-1)){return this.notn(t).iaddn(1).ineg()}return this.clone()};i.prototype.isNeg=function e(){return this.negative!==0};i.prototype.neg=function e(){return this.clone().ineg()};i.prototype.ineg=function e(){if(!this.isZero()){this.negative^=1}return this};i.prototype.iuor=function e(t){while(this.length<t.length){this.words[this.length++]=0}for(var r=0;r<t.length;r++){this.words[r]=this.words[r]|t.words[r]}return this.strip()};i.prototype.ior=function e(t){n((this.negative|t.negative)===0);return this.iuor(t)};i.prototype.or=function e(t){if(this.length>t.length)return this.clone().ior(t);return t.clone().ior(this)};i.prototype.uor=function e(t){if(this.length>t.length)return this.clone().iuor(t);return t.clone().iuor(this)};i.prototype.iuand=function e(t){var r;if(this.length>t.length){r=t}else{r=this}for(var n=0;n<r.length;n++){this.words[n]=this.words[n]&t.words[n]}this.length=r.length;return this.strip()};i.prototype.iand=function e(t){n((this.negative|t.negative)===0);return this.iuand(t)};i.prototype.and=function e(t){if(this.length>t.length)return this.clone().iand(t);return t.clone().iand(this)};i.prototype.uand=function e(t){if(this.length>t.length)return this.clone().iuand(t);return t.clone().iuand(this)};i.prototype.iuxor=function e(t){var r;var n;if(this.length>t.length){r=this;n=t}else{r=t;n=this}for(var a=0;a<n.length;a++){this.words[a]=r.words[a]^n.words[a]}if(this!==r){for(;a<r.length;a++){this.words[a]=r.words[a]}}this.length=r.length;return this.strip()};i.prototype.ixor=function e(t){n((this.negative|t.negative)===0);return this.iuxor(t)};i.prototype.xor=function e(t){if(this.length>t.length)return this.clone().ixor(t);return t.clone().ixor(this)};i.prototype.uxor=function e(t){if(this.length>t.length)return this.clone().iuxor(t);return t.clone().iuxor(this)};i.prototype.inotn=function e(t){n(typeof t==="number"&&t>=0);var r=Math.ceil(t/26)|0;var a=t%26;this._expand(r);if(a>0){r--}for(var i=0;i<r;i++){this.words[i]=~this.words[i]&67108863}if(a>0){this.words[i]=~this.words[i]&67108863>>26-a}return this.strip()};i.prototype.notn=function e(t){return this.clone().inotn(t)};i.prototype.setn=function e(t,r){n(typeof t==="number"&&t>=0);var a=t/26|0;var i=t%26;this._expand(a+1);if(r){this.words[a]=this.words[a]|1<<i}else{this.words[a]=this.words[a]&~(1<<i)}return this.strip()};i.prototype.iadd=function e(t){var r;if(this.negative!==0&&t.negative===0){this.negative=0;r=this.isub(t);this.negative^=1;return this._normSign()}else if(this.negative===0&&t.negative!==0){t.negative=0;r=this.isub(t);t.negative=1;return r._normSign()}var n,a;if(this.length>t.length){n=this;a=t}else{n=t;a=this}var i=0;for(var o=0;o<a.length;o++){r=(n.words[o]|0)+(a.words[o]|0)+i;this.words[o]=r&67108863;i=r>>>26}for(;i!==0&&o<n.length;o++){r=(n.words[o]|0)+i;this.words[o]=r&67108863;i=r>>>26}this.length=n.length;if(i!==0){this.words[this.length]=i;this.length++}else if(n!==this){for(;o<n.length;o++){this.words[o]=n.words[o]}}return this};i.prototype.add=function e(t){var r;if(t.negative!==0&&this.negative===0){t.negative=0;r=this.sub(t);t.negative^=1;return r}else if(t.negative===0&&this.negative!==0){this.negative=0;r=t.sub(this);this.negative=1;return r}if(this.length>t.length)return this.clone().iadd(t);return t.clone().iadd(this)};i.prototype.isub=function e(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);t.negative=1;return r._normSign()}else if(this.negative!==0){this.negative=0;this.iadd(t);this.negative=1;return this._normSign()}var n=this.cmp(t);if(n===0){this.negative=0;this.length=1;this.words[0]=0;return this}var a,i;if(n>0){a=this;i=t}else{a=t;i=this}var o=0;for(var s=0;s<i.length;s++){r=(a.words[s]|0)-(i.words[s]|0)+o;o=r>>26;this.words[s]=r&67108863}for(;o!==0&&s<a.length;s++){r=(a.words[s]|0)+o;o=r>>26;this.words[s]=r&67108863}if(o===0&&s<a.length&&a!==this){for(;s<a.length;s++){this.words[s]=a.words[s]}}this.length=Math.max(this.length,s);if(a!==this){this.negative=1}return this.strip()};i.prototype.sub=function e(t){return this.clone().isub(t)};function p(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n;n=n-1|0;var a=e.words[0]|0;var i=t.words[0]|0;var o=a*i;var s=o&67108863;var l=o/67108864|0;r.words[0]=s;for(var u=1;u<n;u++){var f=l>>>26;var c=l&67108863;var v=Math.min(u,t.length-1);for(var h=Math.max(0,u-e.length+1);h<=v;h++){var p=u-h|0;a=e.words[p]|0;i=t.words[h]|0;o=a*i+c;f+=o/67108864|0;c=o&67108863}r.words[u]=c|0;l=f|0}if(l!==0){r.words[u]=l|0}else{r.length--}return r.strip()}var d=function e(t,r,n){var a=t.words;var i=r.words;var o=n.words;var s=0;var l;var u;var f;var c=a[0]|0;var v=c&8191;var h=c>>>13;var p=a[1]|0;var d=p&8191;var g=p>>>13;var y=a[2]|0;var m=y&8191;var x=y>>>13;var b=a[3]|0;var _=b&8191;var w=b>>>13;var T=a[4]|0;var k=T&8191;var A=T>>>13;var M=a[5]|0;var S=M&8191;var E=M>>>13;var L=a[6]|0;var C=L&8191;var I=L>>>13;var P=a[7]|0;var O=P&8191;var D=P>>>13;var z=a[8]|0;var R=z&8191;var F=z>>>13;var B=a[9]|0;var N=B&8191;var j=B>>>13;var U=i[0]|0;var V=U&8191;var H=U>>>13;var q=i[1]|0;var G=q&8191;var Z=q>>>13;var Y=i[2]|0;var W=Y&8191;var X=Y>>>13;var J=i[3]|0;var K=J&8191;var $=J>>>13;var Q=i[4]|0;var ee=Q&8191;var te=Q>>>13;var re=i[5]|0;var ne=re&8191;var ae=re>>>13;var ie=i[6]|0;var oe=ie&8191;var se=ie>>>13;var le=i[7]|0;var ue=le&8191;var fe=le>>>13;var ce=i[8]|0;var ve=ce&8191;var he=ce>>>13;var pe=i[9]|0;var de=pe&8191;var ge=pe>>>13;n.negative=t.negative^r.negative;n.length=19;l=Math.imul(v,V);u=Math.imul(v,H);u=u+Math.imul(h,V)|0;f=Math.imul(h,H);var ye=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(ye>>>26)|0;ye&=67108863;l=Math.imul(d,V);u=Math.imul(d,H);u=u+Math.imul(g,V)|0;f=Math.imul(g,H);l=l+Math.imul(v,G)|0;u=u+Math.imul(v,Z)|0;u=u+Math.imul(h,G)|0;f=f+Math.imul(h,Z)|0;var me=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(me>>>26)|0;me&=67108863;l=Math.imul(m,V);u=Math.imul(m,H);u=u+Math.imul(x,V)|0;f=Math.imul(x,H);l=l+Math.imul(d,G)|0;u=u+Math.imul(d,Z)|0;u=u+Math.imul(g,G)|0;f=f+Math.imul(g,Z)|0;l=l+Math.imul(v,W)|0;u=u+Math.imul(v,X)|0;u=u+Math.imul(h,W)|0;f=f+Math.imul(h,X)|0;var xe=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(xe>>>26)|0;xe&=67108863;l=Math.imul(_,V);u=Math.imul(_,H);u=u+Math.imul(w,V)|0;f=Math.imul(w,H);l=l+Math.imul(m,G)|0;u=u+Math.imul(m,Z)|0;u=u+Math.imul(x,G)|0;f=f+Math.imul(x,Z)|0;l=l+Math.imul(d,W)|0;u=u+Math.imul(d,X)|0;u=u+Math.imul(g,W)|0;f=f+Math.imul(g,X)|0;l=l+Math.imul(v,K)|0;u=u+Math.imul(v,$)|0;u=u+Math.imul(h,K)|0;f=f+Math.imul(h,$)|0;var be=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(be>>>26)|0;be&=67108863;l=Math.imul(k,V);u=Math.imul(k,H);u=u+Math.imul(A,V)|0;f=Math.imul(A,H);l=l+Math.imul(_,G)|0;u=u+Math.imul(_,Z)|0;u=u+Math.imul(w,G)|0;f=f+Math.imul(w,Z)|0;l=l+Math.imul(m,W)|0;u=u+Math.imul(m,X)|0;u=u+Math.imul(x,W)|0;f=f+Math.imul(x,X)|0;l=l+Math.imul(d,K)|0;u=u+Math.imul(d,$)|0;u=u+Math.imul(g,K)|0;f=f+Math.imul(g,$)|0;l=l+Math.imul(v,ee)|0;u=u+Math.imul(v,te)|0;u=u+Math.imul(h,ee)|0;f=f+Math.imul(h,te)|0;var _e=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(_e>>>26)|0;_e&=67108863;l=Math.imul(S,V);u=Math.imul(S,H);u=u+Math.imul(E,V)|0;f=Math.imul(E,H);l=l+Math.imul(k,G)|0;u=u+Math.imul(k,Z)|0;u=u+Math.imul(A,G)|0;f=f+Math.imul(A,Z)|0;l=l+Math.imul(_,W)|0;u=u+Math.imul(_,X)|0;u=u+Math.imul(w,W)|0;f=f+Math.imul(w,X)|0;l=l+Math.imul(m,K)|0;u=u+Math.imul(m,$)|0;u=u+Math.imul(x,K)|0;f=f+Math.imul(x,$)|0;l=l+Math.imul(d,ee)|0;u=u+Math.imul(d,te)|0;u=u+Math.imul(g,ee)|0;f=f+Math.imul(g,te)|0;l=l+Math.imul(v,ne)|0;u=u+Math.imul(v,ae)|0;u=u+Math.imul(h,ne)|0;f=f+Math.imul(h,ae)|0;var we=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(we>>>26)|0;we&=67108863;l=Math.imul(C,V);u=Math.imul(C,H);u=u+Math.imul(I,V)|0;f=Math.imul(I,H);l=l+Math.imul(S,G)|0;u=u+Math.imul(S,Z)|0;u=u+Math.imul(E,G)|0;f=f+Math.imul(E,Z)|0;l=l+Math.imul(k,W)|0;u=u+Math.imul(k,X)|0;u=u+Math.imul(A,W)|0;f=f+Math.imul(A,X)|0;l=l+Math.imul(_,K)|0;u=u+Math.imul(_,$)|0;u=u+Math.imul(w,K)|0;f=f+Math.imul(w,$)|0;l=l+Math.imul(m,ee)|0;u=u+Math.imul(m,te)|0;u=u+Math.imul(x,ee)|0;f=f+Math.imul(x,te)|0;l=l+Math.imul(d,ne)|0;u=u+Math.imul(d,ae)|0;u=u+Math.imul(g,ne)|0;f=f+Math.imul(g,ae)|0;l=l+Math.imul(v,oe)|0;u=u+Math.imul(v,se)|0;u=u+Math.imul(h,oe)|0;f=f+Math.imul(h,se)|0;var Te=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(Te>>>26)|0;Te&=67108863;l=Math.imul(O,V);u=Math.imul(O,H);u=u+Math.imul(D,V)|0;f=Math.imul(D,H);l=l+Math.imul(C,G)|0;u=u+Math.imul(C,Z)|0;u=u+Math.imul(I,G)|0;f=f+Math.imul(I,Z)|0;l=l+Math.imul(S,W)|0;u=u+Math.imul(S,X)|0;u=u+Math.imul(E,W)|0;f=f+Math.imul(E,X)|0;l=l+Math.imul(k,K)|0;u=u+Math.imul(k,$)|0;u=u+Math.imul(A,K)|0;f=f+Math.imul(A,$)|0;l=l+Math.imul(_,ee)|0;u=u+Math.imul(_,te)|0;u=u+Math.imul(w,ee)|0;f=f+Math.imul(w,te)|0;l=l+Math.imul(m,ne)|0;u=u+Math.imul(m,ae)|0;u=u+Math.imul(x,ne)|0;f=f+Math.imul(x,ae)|0;l=l+Math.imul(d,oe)|0;u=u+Math.imul(d,se)|0;u=u+Math.imul(g,oe)|0;f=f+Math.imul(g,se)|0;l=l+Math.imul(v,ue)|0;u=u+Math.imul(v,fe)|0;u=u+Math.imul(h,ue)|0;f=f+Math.imul(h,fe)|0;var ke=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(ke>>>26)|0;ke&=67108863;l=Math.imul(R,V);u=Math.imul(R,H);u=u+Math.imul(F,V)|0;f=Math.imul(F,H);l=l+Math.imul(O,G)|0;u=u+Math.imul(O,Z)|0;u=u+Math.imul(D,G)|0;f=f+Math.imul(D,Z)|0;l=l+Math.imul(C,W)|0;u=u+Math.imul(C,X)|0;u=u+Math.imul(I,W)|0;f=f+Math.imul(I,X)|0;l=l+Math.imul(S,K)|0;u=u+Math.imul(S,$)|0;u=u+Math.imul(E,K)|0;f=f+Math.imul(E,$)|0;l=l+Math.imul(k,ee)|0;u=u+Math.imul(k,te)|0;u=u+Math.imul(A,ee)|0;f=f+Math.imul(A,te)|0;l=l+Math.imul(_,ne)|0;u=u+Math.imul(_,ae)|0;u=u+Math.imul(w,ne)|0;f=f+Math.imul(w,ae)|0;l=l+Math.imul(m,oe)|0;u=u+Math.imul(m,se)|0;u=u+Math.imul(x,oe)|0;f=f+Math.imul(x,se)|0;l=l+Math.imul(d,ue)|0;u=u+Math.imul(d,fe)|0;u=u+Math.imul(g,ue)|0;f=f+Math.imul(g,fe)|0;l=l+Math.imul(v,ve)|0;u=u+Math.imul(v,he)|0;u=u+Math.imul(h,ve)|0;f=f+Math.imul(h,he)|0;var Ae=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(Ae>>>26)|0;Ae&=67108863;l=Math.imul(N,V);u=Math.imul(N,H);u=u+Math.imul(j,V)|0;f=Math.imul(j,H);l=l+Math.imul(R,G)|0;u=u+Math.imul(R,Z)|0;u=u+Math.imul(F,G)|0;f=f+Math.imul(F,Z)|0;l=l+Math.imul(O,W)|0;u=u+Math.imul(O,X)|0;u=u+Math.imul(D,W)|0;f=f+Math.imul(D,X)|0;l=l+Math.imul(C,K)|0;u=u+Math.imul(C,$)|0;u=u+Math.imul(I,K)|0;f=f+Math.imul(I,$)|0;l=l+Math.imul(S,ee)|0;u=u+Math.imul(S,te)|0;u=u+Math.imul(E,ee)|0;f=f+Math.imul(E,te)|0;l=l+Math.imul(k,ne)|0;u=u+Math.imul(k,ae)|0;u=u+Math.imul(A,ne)|0;f=f+Math.imul(A,ae)|0;l=l+Math.imul(_,oe)|0;u=u+Math.imul(_,se)|0;u=u+Math.imul(w,oe)|0;f=f+Math.imul(w,se)|0;l=l+Math.imul(m,ue)|0;u=u+Math.imul(m,fe)|0;u=u+Math.imul(x,ue)|0;f=f+Math.imul(x,fe)|0;l=l+Math.imul(d,ve)|0;u=u+Math.imul(d,he)|0;u=u+Math.imul(g,ve)|0;f=f+Math.imul(g,he)|0;l=l+Math.imul(v,de)|0;u=u+Math.imul(v,ge)|0;u=u+Math.imul(h,de)|0;f=f+Math.imul(h,ge)|0;var Me=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(Me>>>26)|0;Me&=67108863;l=Math.imul(N,G);u=Math.imul(N,Z);u=u+Math.imul(j,G)|0;f=Math.imul(j,Z);l=l+Math.imul(R,W)|0;u=u+Math.imul(R,X)|0;u=u+Math.imul(F,W)|0;f=f+Math.imul(F,X)|0;l=l+Math.imul(O,K)|0;u=u+Math.imul(O,$)|0;u=u+Math.imul(D,K)|0;f=f+Math.imul(D,$)|0;l=l+Math.imul(C,ee)|0;u=u+Math.imul(C,te)|0;u=u+Math.imul(I,ee)|0;f=f+Math.imul(I,te)|0;l=l+Math.imul(S,ne)|0;u=u+Math.imul(S,ae)|0;u=u+Math.imul(E,ne)|0;f=f+Math.imul(E,ae)|0;l=l+Math.imul(k,oe)|0;u=u+Math.imul(k,se)|0;u=u+Math.imul(A,oe)|0;f=f+Math.imul(A,se)|0;l=l+Math.imul(_,ue)|0;u=u+Math.imul(_,fe)|0;u=u+Math.imul(w,ue)|0;f=f+Math.imul(w,fe)|0;l=l+Math.imul(m,ve)|0;u=u+Math.imul(m,he)|0;u=u+Math.imul(x,ve)|0;f=f+Math.imul(x,he)|0;l=l+Math.imul(d,de)|0;u=u+Math.imul(d,ge)|0;u=u+Math.imul(g,de)|0;f=f+Math.imul(g,ge)|0;var Se=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(Se>>>26)|0;Se&=67108863;l=Math.imul(N,W);u=Math.imul(N,X);u=u+Math.imul(j,W)|0;f=Math.imul(j,X);l=l+Math.imul(R,K)|0;u=u+Math.imul(R,$)|0;u=u+Math.imul(F,K)|0;f=f+Math.imul(F,$)|0;l=l+Math.imul(O,ee)|0;u=u+Math.imul(O,te)|0;u=u+Math.imul(D,ee)|0;f=f+Math.imul(D,te)|0;l=l+Math.imul(C,ne)|0;u=u+Math.imul(C,ae)|0;u=u+Math.imul(I,ne)|0;f=f+Math.imul(I,ae)|0;l=l+Math.imul(S,oe)|0;u=u+Math.imul(S,se)|0;u=u+Math.imul(E,oe)|0;f=f+Math.imul(E,se)|0;l=l+Math.imul(k,ue)|0;u=u+Math.imul(k,fe)|0;u=u+Math.imul(A,ue)|0;f=f+Math.imul(A,fe)|0;l=l+Math.imul(_,ve)|0;u=u+Math.imul(_,he)|0;u=u+Math.imul(w,ve)|0;f=f+Math.imul(w,he)|0;l=l+Math.imul(m,de)|0;u=u+Math.imul(m,ge)|0;u=u+Math.imul(x,de)|0;f=f+Math.imul(x,ge)|0;var Ee=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(Ee>>>26)|0;Ee&=67108863;l=Math.imul(N,K);u=Math.imul(N,$);u=u+Math.imul(j,K)|0;f=Math.imul(j,$);l=l+Math.imul(R,ee)|0;u=u+Math.imul(R,te)|0;u=u+Math.imul(F,ee)|0;f=f+Math.imul(F,te)|0;l=l+Math.imul(O,ne)|0;u=u+Math.imul(O,ae)|0;u=u+Math.imul(D,ne)|0;f=f+Math.imul(D,ae)|0;l=l+Math.imul(C,oe)|0;u=u+Math.imul(C,se)|0;u=u+Math.imul(I,oe)|0;f=f+Math.imul(I,se)|0;l=l+Math.imul(S,ue)|0;u=u+Math.imul(S,fe)|0;u=u+Math.imul(E,ue)|0;f=f+Math.imul(E,fe)|0;l=l+Math.imul(k,ve)|0;u=u+Math.imul(k,he)|0;u=u+Math.imul(A,ve)|0;f=f+Math.imul(A,he)|0;l=l+Math.imul(_,de)|0;u=u+Math.imul(_,ge)|0;u=u+Math.imul(w,de)|0;f=f+Math.imul(w,ge)|0;var Le=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(Le>>>26)|0;Le&=67108863;l=Math.imul(N,ee);u=Math.imul(N,te);u=u+Math.imul(j,ee)|0;f=Math.imul(j,te);l=l+Math.imul(R,ne)|0;u=u+Math.imul(R,ae)|0;u=u+Math.imul(F,ne)|0;f=f+Math.imul(F,ae)|0;l=l+Math.imul(O,oe)|0;u=u+Math.imul(O,se)|0;u=u+Math.imul(D,oe)|0;f=f+Math.imul(D,se)|0;l=l+Math.imul(C,ue)|0;u=u+Math.imul(C,fe)|0;u=u+Math.imul(I,ue)|0;f=f+Math.imul(I,fe)|0;l=l+Math.imul(S,ve)|0;u=u+Math.imul(S,he)|0;u=u+Math.imul(E,ve)|0;f=f+Math.imul(E,he)|0;l=l+Math.imul(k,de)|0;u=u+Math.imul(k,ge)|0;u=u+Math.imul(A,de)|0;f=f+Math.imul(A,ge)|0;var Ce=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(Ce>>>26)|0;Ce&=67108863;l=Math.imul(N,ne);u=Math.imul(N,ae);u=u+Math.imul(j,ne)|0;f=Math.imul(j,ae);l=l+Math.imul(R,oe)|0;u=u+Math.imul(R,se)|0;u=u+Math.imul(F,oe)|0;f=f+Math.imul(F,se)|0;l=l+Math.imul(O,ue)|0;u=u+Math.imul(O,fe)|0;u=u+Math.imul(D,ue)|0;f=f+Math.imul(D,fe)|0;l=l+Math.imul(C,ve)|0;u=u+Math.imul(C,he)|0;u=u+Math.imul(I,ve)|0;f=f+Math.imul(I,he)|0;l=l+Math.imul(S,de)|0;u=u+Math.imul(S,ge)|0;u=u+Math.imul(E,de)|0;f=f+Math.imul(E,ge)|0;var Ie=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(Ie>>>26)|0;Ie&=67108863;l=Math.imul(N,oe);u=Math.imul(N,se);u=u+Math.imul(j,oe)|0;f=Math.imul(j,se);l=l+Math.imul(R,ue)|0;u=u+Math.imul(R,fe)|0;u=u+Math.imul(F,ue)|0;f=f+Math.imul(F,fe)|0;l=l+Math.imul(O,ve)|0;u=u+Math.imul(O,he)|0;u=u+Math.imul(D,ve)|0;f=f+Math.imul(D,he)|0;l=l+Math.imul(C,de)|0;u=u+Math.imul(C,ge)|0;u=u+Math.imul(I,de)|0;f=f+Math.imul(I,ge)|0;var Pe=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(Pe>>>26)|0;Pe&=67108863;l=Math.imul(N,ue);u=Math.imul(N,fe);u=u+Math.imul(j,ue)|0;f=Math.imul(j,fe);l=l+Math.imul(R,ve)|0;u=u+Math.imul(R,he)|0;u=u+Math.imul(F,ve)|0;f=f+Math.imul(F,he)|0;l=l+Math.imul(O,de)|0;u=u+Math.imul(O,ge)|0;u=u+Math.imul(D,de)|0;f=f+Math.imul(D,ge)|0;var Oe=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(Oe>>>26)|0;Oe&=67108863;l=Math.imul(N,ve);u=Math.imul(N,he);u=u+Math.imul(j,ve)|0;f=Math.imul(j,he);l=l+Math.imul(R,de)|0;u=u+Math.imul(R,ge)|0;u=u+Math.imul(F,de)|0;f=f+Math.imul(F,ge)|0;var De=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(De>>>26)|0;De&=67108863;l=Math.imul(N,de);u=Math.imul(N,ge);u=u+Math.imul(j,de)|0;f=Math.imul(j,ge);var ze=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(ze>>>26)|0;ze&=67108863;o[0]=ye;o[1]=me;o[2]=xe;o[3]=be;o[4]=_e;o[5]=we;o[6]=Te;o[7]=ke;o[8]=Ae;o[9]=Me;o[10]=Se;o[11]=Ee;o[12]=Le;o[13]=Ce;o[14]=Ie;o[15]=Pe;o[16]=Oe;o[17]=De;o[18]=ze;if(s!==0){o[19]=s;n.length++}return n};if(!Math.imul){d=p}function g(e,t,r){r.negative=t.negative^e.negative;r.length=e.length+t.length;var n=0;var a=0;for(var i=0;i<r.length-1;i++){var o=a;a=0;var s=n&67108863;var l=Math.min(i,t.length-1);for(var u=Math.max(0,i-e.length+1);u<=l;u++){var f=i-u;var c=e.words[f]|0;var v=t.words[u]|0;var h=c*v;var p=h&67108863;o=o+(h/67108864|0)|0;p=p+s|0;s=p&67108863;o=o+(p>>>26)|0;a+=o>>>26;o&=67108863}r.words[i]=s;n=o;o=a}if(n!==0){r.words[i]=n}else{r.length--}return r.strip()}function y(e,t,r){var n=new m;return n.mulp(e,t,r)}i.prototype.mulTo=function e(t,r){var n;var a=this.length+t.length;if(this.length===10&&t.length===10){n=d(this,t,r)}else if(a<63){n=p(this,t,r)}else if(a<1024){n=g(this,t,r)}else{n=y(this,t,r)}return n};function m(e,t){this.x=e;this.y=t}m.prototype.makeRBT=function e(t){var r=new Array(t);var n=i.prototype._countBits(t)-1;for(var a=0;a<t;a++){r[a]=this.revBin(a,n,t)}return r};m.prototype.revBin=function e(t,r,n){if(t===0||t===n-1)return t;var a=0;for(var i=0;i<r;i++){a|=(t&1)<<r-i-1;t>>=1}return a};m.prototype.permute=function e(t,r,n,a,i,o){for(var s=0;s<o;s++){a[s]=r[t[s]];i[s]=n[t[s]]}};m.prototype.transform=function e(t,r,n,a,i,o){this.permute(o,t,r,n,a,i);for(var s=1;s<i;s<<=1){var l=s<<1;var u=Math.cos(2*Math.PI/l);var f=Math.sin(2*Math.PI/l);for(var c=0;c<i;c+=l){var v=u;var h=f;for(var p=0;p<s;p++){var d=n[c+p];var g=a[c+p];var y=n[c+p+s];var m=a[c+p+s];var x=v*y-h*m;m=v*m+h*y;y=x;n[c+p]=d+y;a[c+p]=g+m;n[c+p+s]=d-y;a[c+p+s]=g-m;if(p!==l){x=u*v-f*h;h=u*h+f*v;v=x}}}}};m.prototype.guessLen13b=function e(t,r){var n=Math.max(r,t)|1;var a=n&1;var i=0;for(n=n/2|0;n;n=n>>>1){i++}return 1<<i+1+a};m.prototype.conjugate=function e(t,r,n){if(n<=1)return;for(var a=0;a<n/2;a++){var i=t[a];t[a]=t[n-a-1];t[n-a-1]=i;i=r[a];r[a]=-r[n-a-1];r[n-a-1]=-i}};m.prototype.normalize13b=function e(t,r){var n=0;for(var a=0;a<r/2;a++){var i=Math.round(t[2*a+1]/r)*8192+Math.round(t[2*a]/r)+n;t[a]=i&67108863;if(i<67108864){n=0}else{n=i/67108864|0}}return t};m.prototype.convert13b=function e(t,r,a,i){var o=0;for(var s=0;s<r;s++){o=o+(t[s]|0);a[2*s]=o&8191;o=o>>>13;a[2*s+1]=o&8191;o=o>>>13}for(s=2*r;s<i;++s){a[s]=0}n(o===0);n((o&~8191)===0)};m.prototype.stub=function e(t){var r=new Array(t);for(var n=0;n<t;n++){r[n]=0}return r};m.prototype.mulp=function e(t,r,n){var a=2*this.guessLen13b(t.length,r.length);var i=this.makeRBT(a);var o=this.stub(a);var s=new Array(a);var l=new Array(a);var u=new Array(a);var f=new Array(a);var c=new Array(a);var v=new Array(a);var h=n.words;h.length=a;this.convert13b(t.words,t.length,s,a);this.convert13b(r.words,r.length,f,a);this.transform(s,o,l,u,a,i);this.transform(f,o,c,v,a,i);for(var p=0;p<a;p++){var d=l[p]*c[p]-u[p]*v[p];u[p]=l[p]*v[p]+u[p]*c[p];l[p]=d}this.conjugate(l,u,a);this.transform(l,u,h,o,a,i);this.conjugate(h,o,a);this.normalize13b(h,a);n.negative=t.negative^r.negative;n.length=t.length+r.length;return n.strip()};i.prototype.mul=function e(t){var r=new i(null);r.words=new Array(this.length+t.length);return this.mulTo(t,r)};i.prototype.mulf=function e(t){var r=new i(null);r.words=new Array(this.length+t.length);return y(this,t,r)};i.prototype.imul=function e(t){return this.clone().mulTo(t,this)};i.prototype.imuln=function e(t){n(typeof t==="number");n(t<67108864);var r=0;for(var a=0;a<this.length;a++){var i=(this.words[a]|0)*t;var o=(i&67108863)+(r&67108863);r>>=26;r+=i/67108864|0;r+=o>>>26;this.words[a]=o&67108863}if(r!==0){this.words[a]=r;this.length++}return this};i.prototype.muln=function e(t){return this.clone().imuln(t)};i.prototype.sqr=function e(){return this.mul(this)};i.prototype.isqr=function e(){return this.imul(this.clone())};i.prototype.pow=function e(t){var r=h(t);if(r.length===0)return new i(1);var n=this;for(var a=0;a<r.length;a++,n=n.sqr()){if(r[a]!==0)break}if(++a<r.length){for(var o=n.sqr();a<r.length;a++,o=o.sqr()){if(r[a]===0)continue;n=n.mul(o)}}return n};i.prototype.iushln=function e(t){n(typeof t==="number"&&t>=0);var r=t%26;var a=(t-r)/26;var i=67108863>>>26-r<<26-r;var o;if(r!==0){var s=0;for(o=0;o<this.length;o++){var l=this.words[o]&i;var u=(this.words[o]|0)-l<<r;this.words[o]=u|s;s=l>>>26-r}if(s){this.words[o]=s;this.length++}}if(a!==0){for(o=this.length-1;o>=0;o--){this.words[o+a]=this.words[o]}for(o=0;o<a;o++){this.words[o]=0}this.length+=a}return this.strip()};i.prototype.ishln=function e(t){n(this.negative===0);return this.iushln(t)};i.prototype.iushrn=function e(t,r,a){n(typeof t==="number"&&t>=0);var i;if(r){i=(r-r%26)/26}else{i=0}var o=t%26;var s=Math.min((t-o)/26,this.length);var l=67108863^67108863>>>o<<o;var u=a;i-=s;i=Math.max(0,i);if(u){for(var f=0;f<s;f++){u.words[f]=this.words[f]}u.length=s}if(s===0){}else if(this.length>s){this.length-=s;for(f=0;f<this.length;f++){this.words[f]=this.words[f+s]}}else{this.words[0]=0;this.length=1}var c=0;for(f=this.length-1;f>=0&&(c!==0||f>=i);f--){var v=this.words[f]|0;this.words[f]=c<<26-o|v>>>o;c=v&l}if(u&&c!==0){u.words[u.length++]=c}if(this.length===0){this.words[0]=0;this.length=1}return this.strip()};i.prototype.ishrn=function e(t,r,a){n(this.negative===0);return this.iushrn(t,r,a)};i.prototype.shln=function e(t){return this.clone().ishln(t)};i.prototype.ushln=function e(t){return this.clone().iushln(t)};i.prototype.shrn=function e(t){return this.clone().ishrn(t)};i.prototype.ushrn=function e(t){return this.clone().iushrn(t)};i.prototype.testn=function e(t){n(typeof t==="number"&&t>=0);var r=t%26;var a=(t-r)/26;var i=1<<r;if(this.length<=a)return false;var o=this.words[a];return!!(o&i)};i.prototype.imaskn=function e(t){n(typeof t==="number"&&t>=0);var r=t%26;var a=(t-r)/26;n(this.negative===0,"imaskn works only with positive numbers");if(this.length<=a){return this}if(r!==0){a++}this.length=Math.min(a,this.length);if(r!==0){var i=67108863^67108863>>>r<<r;this.words[this.length-1]&=i}return this.strip()};i.prototype.maskn=function e(t){return this.clone().imaskn(t)};i.prototype.iaddn=function e(t){n(typeof t==="number");n(t<67108864);if(t<0)return this.isubn(-t);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<t){this.words[0]=t-(this.words[0]|0);this.negative=0;return this}this.negative=0;this.isubn(t);this.negative=1;return this}return this._iaddn(t)};i.prototype._iaddn=function e(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++){this.words[r]-=67108864;if(r===this.length-1){this.words[r+1]=1}else{this.words[r+1]++}}this.length=Math.max(this.length,r+1);return this};i.prototype.isubn=function e(t){n(typeof t==="number");n(t<67108864);if(t<0)return this.iaddn(-t);if(this.negative!==0){this.negative=0;this.iaddn(t);this.negative=1;return this}this.words[0]-=t;if(this.length===1&&this.words[0]<0){this.words[0]=-this.words[0];this.negative=1}else{for(var r=0;r<this.length&&this.words[r]<0;r++){this.words[r]+=67108864;this.words[r+1]-=1}}return this.strip()};i.prototype.addn=function e(t){return this.clone().iaddn(t)};i.prototype.subn=function e(t){return this.clone().isubn(t)};i.prototype.iabs=function e(){this.negative=0;return this};i.prototype.abs=function e(){return this.clone().iabs()};i.prototype._ishlnsubmul=function e(t,r,a){var i=t.length+a;var o;this._expand(i);var s;var l=0;for(o=0;o<t.length;o++){s=(this.words[o+a]|0)+l;var u=(t.words[o]|0)*r;s-=u&67108863;l=(s>>26)-(u/67108864|0);this.words[o+a]=s&67108863}for(;o<this.length-a;o++){s=(this.words[o+a]|0)+l;l=s>>26;this.words[o+a]=s&67108863}if(l===0)return this.strip();n(l===-1);l=0;for(o=0;o<this.length;o++){s=-(this.words[o]|0)+l;l=s>>26;this.words[o]=s&67108863}this.negative=1;return this.strip()};i.prototype._wordDiv=function e(t,r){var n=this.length-t.length;var a=this.clone();var o=t;var s=o.words[o.length-1]|0;var l=this._countBits(s);n=26-l;if(n!==0){o=o.ushln(n);a.iushln(n);s=o.words[o.length-1]|0}var u=a.length-o.length;var f;if(r!=="mod"){f=new i(null);f.length=u+1;f.words=new Array(f.length);for(var c=0;c<f.length;c++){f.words[c]=0}}var v=a.clone()._ishlnsubmul(o,1,u);if(v.negative===0){a=v;if(f){f.words[u]=1}}for(var h=u-1;h>=0;h--){var p=(a.words[o.length+h]|0)*67108864+(a.words[o.length+h-1]|0);p=Math.min(p/s|0,67108863);a._ishlnsubmul(o,p,h);while(a.negative!==0){p--;a.negative=0;a._ishlnsubmul(o,1,h);if(!a.isZero()){a.negative^=1}}if(f){f.words[h]=p}}if(f){f.strip()}a.strip();if(r!=="div"&&n!==0){a.iushrn(n)}return{div:f||null,mod:a}};i.prototype.divmod=function e(t,r,a){n(!t.isZero());if(this.isZero()){return{div:new i(0),mod:new i(0)}}var o,s,l;if(this.negative!==0&&t.negative===0){l=this.neg().divmod(t,r);if(r!=="mod"){o=l.div.neg()}if(r!=="div"){s=l.mod.neg();if(a&&s.negative!==0){s.iadd(t)}}return{div:o,mod:s}}if(this.negative===0&&t.negative!==0){l=this.divmod(t.neg(),r);if(r!=="mod"){o=l.div.neg()}return{div:o,mod:l.mod}}if((this.negative&t.negative)!==0){l=this.neg().divmod(t.neg(),r);if(r!=="div"){s=l.mod.neg();if(a&&s.negative!==0){s.isub(t)}}return{div:l.div,mod:s}}if(t.length>this.length||this.cmp(t)<0){return{div:new i(0),mod:this}}if(t.length===1){if(r==="div"){return{div:this.divn(t.words[0]),mod:null}}if(r==="mod"){return{div:null,mod:new i(this.modn(t.words[0]))}}return{div:this.divn(t.words[0]),mod:new i(this.modn(t.words[0]))}}return this._wordDiv(t,r)};i.prototype.div=function e(t){return this.divmod(t,"div",false).div};i.prototype.mod=function e(t){return this.divmod(t,"mod",false).mod};i.prototype.umod=function e(t){return this.divmod(t,"mod",true).mod};i.prototype.divRound=function e(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=r.div.negative!==0?r.mod.isub(t):r.mod;var a=t.ushrn(1);var i=t.andln(1);var o=n.cmp(a);if(o<0||i===1&&o===0)return r.div;return r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)};i.prototype.modn=function e(t){n(t<=67108863);var r=(1<<26)%t;var a=0;for(var i=this.length-1;i>=0;i--){a=(r*a+(this.words[i]|0))%t}return a};i.prototype.idivn=function e(t){n(t<=67108863);var r=0;for(var a=this.length-1;a>=0;a--){var i=(this.words[a]|0)+r*67108864;this.words[a]=i/t|0;r=i%t}return this.strip()};i.prototype.divn=function e(t){return this.clone().idivn(t)};i.prototype.egcd=function e(t){n(t.negative===0);n(!t.isZero());var r=this;var a=t.clone();if(r.negative!==0){r=r.umod(t)}else{r=r.clone()}var o=new i(1);var s=new i(0);var l=new i(0);var u=new i(1);var f=0;while(r.isEven()&&a.isEven()){r.iushrn(1);a.iushrn(1);++f}var c=a.clone();var v=r.clone();while(!r.isZero()){for(var h=0,p=1;(r.words[0]&p)===0&&h<26;++h,p<<=1);if(h>0){r.iushrn(h);while(h-- >0){if(o.isOdd()||s.isOdd()){o.iadd(c);s.isub(v)}o.iushrn(1);s.iushrn(1)}}for(var d=0,g=1;(a.words[0]&g)===0&&d<26;++d,g<<=1);if(d>0){a.iushrn(d);while(d-- >0){if(l.isOdd()||u.isOdd()){l.iadd(c);u.isub(v)}l.iushrn(1);u.iushrn(1)}}if(r.cmp(a)>=0){r.isub(a);o.isub(l);s.isub(u)}else{a.isub(r);l.isub(o);u.isub(s)}}return{a:l,b:u,gcd:a.iushln(f)}};i.prototype._invmp=function e(t){n(t.negative===0);n(!t.isZero());var r=this;var a=t.clone();if(r.negative!==0){r=r.umod(t)}else{r=r.clone()}var o=new i(1);var s=new i(0);var l=a.clone();while(r.cmpn(1)>0&&a.cmpn(1)>0){for(var u=0,f=1;(r.words[0]&f)===0&&u<26;++u,f<<=1);if(u>0){r.iushrn(u);while(u-- >0){if(o.isOdd()){o.iadd(l)}o.iushrn(1)}}for(var c=0,v=1;(a.words[0]&v)===0&&c<26;++c,v<<=1);if(c>0){a.iushrn(c);while(c-- >0){if(s.isOdd()){s.iadd(l)}s.iushrn(1)}}if(r.cmp(a)>=0){r.isub(a);o.isub(s)}else{a.isub(r);s.isub(o)}}var h;if(r.cmpn(1)===0){h=o}else{h=s}if(h.cmpn(0)<0){h.iadd(t)}return h};i.prototype.gcd=function e(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone();var n=t.clone();r.negative=0;n.negative=0;for(var a=0;r.isEven()&&n.isEven();a++){r.iushrn(1);n.iushrn(1)}do{while(r.isEven()){r.iushrn(1)}while(n.isEven()){n.iushrn(1)}var i=r.cmp(n);if(i<0){var o=r;r=n;n=o}else if(i===0||n.cmpn(1)===0){break}r.isub(n)}while(true);return n.iushln(a)};i.prototype.invm=function e(t){return this.egcd(t).a.umod(t)};i.prototype.isEven=function e(){return(this.words[0]&1)===0};i.prototype.isOdd=function e(){return(this.words[0]&1)===1};i.prototype.andln=function e(t){return this.words[0]&t};i.prototype.bincn=function e(t){n(typeof t==="number");var r=t%26;var a=(t-r)/26;var i=1<<r;if(this.length<=a){this._expand(a+1);this.words[a]|=i;return this}var o=i;for(var s=a;o!==0&&s<this.length;s++){var l=this.words[s]|0;l+=o;o=l>>>26;l&=67108863;this.words[s]=l}if(o!==0){this.words[s]=o;this.length++}return this};i.prototype.isZero=function e(){return this.length===1&&this.words[0]===0};i.prototype.cmpn=function e(t){var r=t<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var a;if(this.length>1){a=1}else{if(r){t=-t}n(t<=67108863,"Number is too big");var i=this.words[0]|0;a=i===t?0:i<t?-1:1}if(this.negative!==0)return-a|0;return a};i.prototype.cmp=function e(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);if(this.negative!==0)return-r|0;return r};i.prototype.ucmp=function e(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;var r=0;for(var n=this.length-1;n>=0;n--){var a=this.words[n]|0;var i=t.words[n]|0;if(a===i)continue;if(a<i){r=-1}else if(a>i){r=1}break}return r};i.prototype.gtn=function e(t){return this.cmpn(t)===1};i.prototype.gt=function e(t){return this.cmp(t)===1};i.prototype.gten=function e(t){return this.cmpn(t)>=0};i.prototype.gte=function e(t){return this.cmp(t)>=0};i.prototype.ltn=function e(t){return this.cmpn(t)===-1};i.prototype.lt=function e(t){return this.cmp(t)===-1};i.prototype.lten=function e(t){return this.cmpn(t)<=0};i.prototype.lte=function e(t){return this.cmp(t)<=0};i.prototype.eqn=function e(t){return this.cmpn(t)===0};i.prototype.eq=function e(t){return this.cmp(t)===0};i.red=function e(t){return new A(t)};i.prototype.toRed=function e(t){n(!this.red,"Already a number in reduction context");n(this.negative===0,"red works only with positives");return t.convertTo(this)._forceRed(t)};i.prototype.fromRed=function e(){n(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};i.prototype._forceRed=function e(t){this.red=t;return this};i.prototype.forceRed=function e(t){n(!this.red,"Already a number in reduction context");return this._forceRed(t)};i.prototype.redAdd=function e(t){n(this.red,"redAdd works only with red numbers");return this.red.add(this,t)};i.prototype.redIAdd=function e(t){n(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,t)};i.prototype.redSub=function e(t){n(this.red,"redSub works only with red numbers");return this.red.sub(this,t)};i.prototype.redISub=function e(t){n(this.red,"redISub works only with red numbers");return this.red.isub(this,t)};i.prototype.redShl=function e(t){n(this.red,"redShl works only with red numbers");return this.red.shl(this,t)};i.prototype.redMul=function e(t){n(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.mul(this,t)};i.prototype.redIMul=function e(t){n(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.imul(this,t)};i.prototype.redSqr=function e(){n(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};i.prototype.redISqr=function e(){n(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};i.prototype.redSqrt=function e(){n(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};i.prototype.redInvm=function e(){n(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};i.prototype.redNeg=function e(){n(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};i.prototype.redPow=function e(t){n(this.red&&!t.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,t)};var x={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e;this.p=new i(t,16);this.n=this.p.bitLength();this.k=new i(1).iushln(this.n).isub(this.p);this.tmp=this._tmp()}b.prototype._tmp=function e(){var t=new i(null);t.words=new Array(Math.ceil(this.n/13));return t};b.prototype.ireduce=function e(t){var r=t;var n;do{this.split(r,this.tmp);r=this.imulK(r);r=r.iadd(this.tmp);n=r.bitLength()}while(n>this.n);var a=n<this.n?-1:r.ucmp(this.p);if(a===0){r.words[0]=0;r.length=1}else if(a>0){r.isub(this.p)}else{if(r.strip!==undefined){r.strip()}else{r._strip()}}return r};b.prototype.split=function e(t,r){t.iushrn(this.n,0,r)};b.prototype.imulK=function e(t){return t.imul(this.k)};function _(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}a(_,b);_.prototype.split=function e(t,r){var n=4194303;var a=Math.min(t.length,9);for(var i=0;i<a;i++){r.words[i]=t.words[i]}r.length=a;if(t.length<=9){t.words[0]=0;t.length=1;return}var o=t.words[9];r.words[r.length++]=o&n;for(i=10;i<t.length;i++){var s=t.words[i]|0;t.words[i-10]=(s&n)<<4|o>>>22;o=s}o>>>=22;t.words[i-10]=o;if(o===0&&t.length>10){t.length-=10}else{t.length-=9}};_.prototype.imulK=function e(t){t.words[t.length]=0;t.words[t.length+1]=0;t.length+=2;var r=0;for(var n=0;n<t.length;n++){var a=t.words[n]|0;r+=a*977;t.words[n]=r&67108863;r=a*64+(r/67108864|0)}if(t.words[t.length-1]===0){t.length--;if(t.words[t.length-1]===0){t.length--}}return t};function w(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}a(w,b);function T(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}a(T,b);function k(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}a(k,b);k.prototype.imulK=function e(t){var r=0;for(var n=0;n<t.length;n++){var a=(t.words[n]|0)*19+r;var i=a&67108863;a>>>=26;t.words[n]=i;r=a}if(r!==0){t.words[t.length++]=r}return t};i._prime=function e(t){if(x[t])return x[t];var e;if(t==="k256"){e=new _}else if(t==="p224"){e=new w}else if(t==="p192"){e=new T}else if(t==="p25519"){e=new k}else{throw new Error("Unknown prime "+t)}x[t]=e;return e};function A(e){if(typeof e==="string"){var t=i._prime(e);this.m=t.p;this.prime=t}else{n(e.gtn(1),"modulus must be greater than 1");this.m=e;this.prime=null}}A.prototype._verify1=function e(t){n(t.negative===0,"red works only with positives");n(t.red,"red works only with red numbers")};A.prototype._verify2=function e(t,r){n((t.negative|r.negative)===0,"red works only with positives");n(t.red&&t.red===r.red,"red works only with red numbers")};A.prototype.imod=function e(t){if(this.prime)return this.prime.ireduce(t)._forceRed(this);return t.umod(this.m)._forceRed(this)};A.prototype.neg=function e(t){if(t.isZero()){return t.clone()}return this.m.sub(t)._forceRed(this)};A.prototype.add=function e(t,r){this._verify2(t,r);var n=t.add(r);if(n.cmp(this.m)>=0){n.isub(this.m)}return n._forceRed(this)};A.prototype.iadd=function e(t,r){this._verify2(t,r);var n=t.iadd(r);if(n.cmp(this.m)>=0){n.isub(this.m)}return n};A.prototype.sub=function e(t,r){this._verify2(t,r);var n=t.sub(r);if(n.cmpn(0)<0){n.iadd(this.m)}return n._forceRed(this)};A.prototype.isub=function e(t,r){this._verify2(t,r);var n=t.isub(r);if(n.cmpn(0)<0){n.iadd(this.m)}return n};A.prototype.shl=function e(t,r){this._verify1(t);return this.imod(t.ushln(r))};A.prototype.imul=function e(t,r){this._verify2(t,r);return this.imod(t.imul(r))};A.prototype.mul=function e(t,r){this._verify2(t,r);return this.imod(t.mul(r))};A.prototype.isqr=function e(t){return this.imul(t,t.clone())};A.prototype.sqr=function e(t){return this.mul(t,t)};A.prototype.sqrt=function e(t){if(t.isZero())return t.clone();var r=this.m.andln(3);n(r%2===1);if(r===3){var a=this.m.add(new i(1)).iushrn(2);return this.pow(t,a)}var o=this.m.subn(1);var s=0;while(!o.isZero()&&o.andln(1)===0){s++;o.iushrn(1)}n(!o.isZero());var l=new i(1).toRed(this);var u=l.redNeg();var f=this.m.subn(1).iushrn(1);var c=this.m.bitLength();c=new i(2*c*c).toRed(this);while(this.pow(c,f).cmp(u)!==0){c.redIAdd(u)}var v=this.pow(c,o);var h=this.pow(t,o.addn(1).iushrn(1));var p=this.pow(t,o);var d=s;while(p.cmp(l)!==0){var g=p;for(var y=0;g.cmp(l)!==0;y++){g=g.redSqr()}n(y<d);var m=this.pow(v,new i(1).iushln(d-y-1));h=h.redMul(m);v=m.redSqr();p=p.redMul(v);d=y}return h};A.prototype.invm=function e(t){var r=t._invmp(this.m);if(r.negative!==0){r.negative=0;return this.imod(r).redNeg()}else{return this.imod(r)}};A.prototype.pow=function e(t,r){if(r.isZero())return new i(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var n=4;var a=new Array(1<<n);a[0]=new i(1).toRed(this);a[1]=t;for(var o=2;o<a.length;o++){a[o]=this.mul(a[o-1],t)}var s=a[0];var l=0;var u=0;var f=r.bitLength()%26;if(f===0){f=26}for(o=r.length-1;o>=0;o--){var c=r.words[o];for(var v=f-1;v>=0;v--){var h=c>>v&1;if(s!==a[0]){s=this.sqr(s)}if(h===0&&l===0){u=0;continue}l<<=1;l|=h;u++;if(u!==n&&(o!==0||v!==0))continue;s=this.mul(s,a[l]);u=0;l=0}f=26}return s};A.prototype.convertTo=function e(t){var r=t.umod(this.m);return r===t?r.clone():r};A.prototype.convertFrom=function e(t){var r=t.clone();r.red=null;return r};i.mont=function e(t){return new M(t)};function M(e){A.call(this,e);this.shift=this.m.bitLength();if(this.shift%26!==0){this.shift+=26-this.shift%26}this.r=new i(1).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}a(M,A);M.prototype.convertTo=function e(t){return this.imod(t.ushln(this.shift))};M.prototype.convertFrom=function e(t){var r=this.imod(t.mul(this.rinv));r.red=null;return r};M.prototype.imul=function e(t,r){if(t.isZero()||r.isZero()){t.words[0]=0;t.length=1;return t}var n=t.imul(r);var a=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var i=n.isub(a).iushrn(this.shift);var o=i;if(i.cmp(this.m)>=0){o=i.isub(this.m)}else if(i.cmpn(0)<0){o=i.iadd(this.m)}return o._forceRed(this)};M.prototype.mul=function e(t,r){if(t.isZero()||r.isZero())return new i(0)._forceRed(this);var n=t.mul(r);var a=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var o=n.isub(a).iushrn(this.shift);var s=o;if(o.cmp(this.m)>=0){s=o.isub(this.m)}else if(o.cmpn(0)<0){s=o.iadd(this.m)}return s._forceRed(this)};M.prototype.invm=function e(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(false||e,this)},2692:function(e){"use strict";e.exports=t;function t(e){var t,r,n;var a=e.length;var i=0;for(t=0;t<a;++t){i+=e[t].length}var o=new Array(i);var s=0;for(t=0;t<a;++t){var l=e[t];var u=l.length;for(r=0;r<u;++r){var f=o[s++]=new Array(u-1);var c=0;for(n=0;n<u;++n){if(n===r){continue}f[c++]=l[n]}if(r&1){var v=f[1];f[1]=f[0];f[0]=v}}}return o}},2569:function(e,t,r){"use strict";e.exports=h;var n=r(5306);var a=r(1390);var i=r(2337);function o(e,t){for(var r=0;r<e;++r){if(!(t[r]<=t[r+e])){return true}}return false}function s(e,t,r,n){var a=0;var i=0;for(var s=0,l=e.length;s<l;++s){var u=e[s];if(o(t,u)){continue}for(var f=0;f<2*t;++f){r[a++]=u[f]}n[i++]=s}return i}function l(e,t,r,o){var l=e.length;var u=t.length;if(l<=0||u<=0){return}var f=e[0].length>>>1;if(f<=0){return}var c;var v=n.mallocDouble(2*f*l);var h=n.mallocInt32(l);l=s(e,f,v,h);if(l>0){if(f===1&&o){a.init(l);c=a.sweepComplete(f,r,0,l,v,h,0,l,v,h)}else{var p=n.mallocDouble(2*f*u);var d=n.mallocInt32(u);u=s(t,f,p,d);if(u>0){a.init(l+u);if(f===1){c=a.sweepBipartite(f,r,0,l,v,h,0,u,p,d)}else{c=i(f,r,o,l,v,h,u,p,d)}n.free(p);n.free(d)}}n.free(v);n.free(h)}return c}var u;function f(e,t){u.push([e,t])}function c(e){u=[];l(e,e,f,true);return u}function v(e,t){u=[];l(e,t,f,false);return u}function h(e,t,r){switch(arguments.length){case 1:return c(e);case 2:if(typeof t==="function"){return l(e,e,t,true)}else{return v(e,t)}case 3:return l(e,t,r,false);default:throw new Error("box-intersect: Invalid arguments")}}},7333:function(e,t){"use strict";function r(){function e(e,t,r,n,a,i,o,s,l,u,f){var c=2*e;for(var v=n,h=c*n;v<a;++v,h+=c){var p=i[t+h],d=i[t+h+e],g=o[v];e:for(var y=s,m=c*s;y<l;++y,m+=c){var x=u[t+m],b=u[t+m+e],_=f[y];if(b<p||d<x)continue;for(var w=t+1;w<e;++w){var T=i[w+h],k=i[w+e+h],A=u[w+m],M=u[w+e+m];if(k<A||M<T)continue e}var S=r(g,_);if(S!==void 0)return S}}}function t(e,t,r,n,a,i,o,s,l,u,f){var c=2*e;for(var v=s,h=c*s;v<l;++v,h+=c){var p=u[t+h],d=u[t+h+e],g=f[v];e:for(var y=n,m=c*n;y<a;++y,m+=c){var x=i[t+m],b=i[t+m+e],_=o[y];if(d<x||b<p)continue;for(var w=t+1;w<e;++w){var T=i[w+m],k=i[w+e+m],A=u[w+h],M=u[w+e+h];if(k<A||M<T)continue e}var S=r(_,g);if(S!==void 0)return S}}}function r(r,n,a,i,o,s,l,u,f,c,v){if(o-i>f-u){return e(r,n,a,i,o,s,l,u,f,c,v)}else{return t(r,n,a,i,o,s,l,u,f,c,v)}}return r}function n(){function e(e,t,r,n,a,i,o,s,l,u,f){var c=2*e;for(var v=n,h=c*n;v<a;++v,h+=c){var p=i[t+h],d=i[t+h+e],g=o[v];e:for(var y=s,m=c*s;y<l;++y,m+=c){var x=u[t+m],b=f[y];if(x<=p||d<x)continue;for(var _=t+1;_<e;++_){var w=i[_+h],T=i[_+e+h],k=u[_+m],A=u[_+e+m];if(T<k||A<w)continue e}var M=r(b,g);if(M!==void 0)return M}}}function t(e,t,r,n,a,i,o,s,l,u,f){var c=2*e;for(var v=n,h=c*n;v<a;++v,h+=c){var p=i[t+h],d=i[t+h+e],g=o[v];e:for(var y=s,m=c*s;y<l;++y,m+=c){var x=u[t+m],b=f[y];if(x<p||d<x)continue;for(var _=t+1;_<e;++_){var w=i[_+h],T=i[_+e+h],k=u[_+m],A=u[_+e+m];if(T<k||A<w)continue e}var M=r(g,b);if(M!==void 0)return M}}}function r(e,t,r,n,a,i,o,s,l,u,f){var c=2*e;for(var v=s,h=c*s;v<l;++v,h+=c){var p=u[t+h],d=f[v];e:for(var g=n,y=c*n;g<a;++g,y+=c){var m=i[t+y],x=i[t+y+e],b=o[g];if(p<=m||x<p)continue;for(var _=t+1;_<e;++_){var w=i[_+y],T=i[_+e+y],k=u[_+h],A=u[_+e+h];if(T<k||A<w)continue e}var M=r(d,b);if(M!==void 0)return M}}}function n(e,t,r,n,a,i,o,s,l,u,f){var c=2*e;for(var v=s,h=c*s;v<l;++v,h+=c){var p=u[t+h],d=f[v];e:for(var g=n,y=c*n;g<a;++g,y+=c){var m=i[t+y],x=i[t+y+e],b=o[g];if(p<m||x<p)continue;for(var _=t+1;_<e;++_){var w=i[_+y],T=i[_+e+y],k=u[_+h],A=u[_+e+h];if(T<k||A<w)continue e}var M=r(b,d);if(M!==void 0)return M}}}function a(a,i,o,s,l,u,f,c,v,h,p,d){if(u-l>h-v){if(s){return e(a,i,o,l,u,f,c,v,h,p,d)}else{return t(a,i,o,l,u,f,c,v,h,p,d)}}else{if(s){return r(a,i,o,l,u,f,c,v,h,p,d)}else{return n(a,i,o,l,u,f,c,v,h,p,d)}}}return a}function a(e){return e?r():n()}t.partial=a(false);t.full=a(true)},2337:function(e,t,r){"use strict";e.exports=L;var n=r(5306);var a=r(2288);var i=r(7333);var o=i.partial;var s=i.full;var l=r(1390);var u=r(2464);var f=r(122);var c=128;var v=1<<22;var h=1<<22;var p=f("!(lo>=p0)&&!(p1>=hi)");var d=f("lo===p0");var g=f("lo<p0");var y=f("hi<=p0");var m=f("lo<=p0&&p0<=hi");var x=f("lo<p0&&p0<=hi");var b=6;var _=2;var w=1024;var T=n.mallocInt32(w);var k=n.mallocDouble(w);function A(e,t){var r=8*a.log2(t+1)*(e+1)|0;var i=a.nextPow2(b*r);if(T.length<i){n.free(T);T=n.mallocInt32(i)}var o=a.nextPow2(_*r);if(k.length<o){n.free(k);k=n.mallocDouble(o)}}function M(e,t,r,n,a,i,o,s,l){var u=b*e;T[u]=t;T[u+1]=r;T[u+2]=n;T[u+3]=a;T[u+4]=i;T[u+5]=o;var f=_*e;k[f]=s;k[f+1]=l}function S(e,t,r,n,a,i,o,s,l,u,f){var c=2*e;var v=l*c;var h=u[v+t];e:for(var p=a,d=a*c;p<i;++p,d+=c){var g=o[d+t];var y=o[d+t+e];if(h<g||y<h){continue}if(n&&h===g){continue}var m=s[p];for(var x=t+1;x<e;++x){var g=o[d+x];var y=o[d+x+e];var b=u[v+x];var _=u[v+x+e];if(y<b||_<g){continue e}}var w;if(n){w=r(f,m)}else{w=r(m,f)}if(w!==void 0){return w}}}function E(e,t,r,n,a,i,o,s,l,u){var f=2*e;var c=s*f;var v=l[c+t];e:for(var h=n,p=n*f;h<a;++h,p+=f){var d=o[h];if(d===u){continue}var g=i[p+t];var y=i[p+t+e];if(v<g||y<v){continue}for(var m=t+1;m<e;++m){var g=i[p+m];var y=i[p+m+e];var x=l[c+m];var b=l[c+m+e];if(y<x||b<g){continue e}}var _=r(d,u);if(_!==void 0){return _}}}function L(e,t,r,n,a,i,f,w,L){A(e,n+f);var C=0;var I=2*e;var P;M(C++,0,0,n,0,f,r?16:0,-Infinity,Infinity);if(!r){M(C++,0,0,f,0,n,1,-Infinity,Infinity)}while(C>0){C-=1;var O=C*b;var D=T[O];var z=T[O+1];var R=T[O+2];var F=T[O+3];var B=T[O+4];var N=T[O+5];var j=C*_;var U=k[j];var V=k[j+1];var H=N&1;var q=!!(N&16);var G=a;var Z=i;var Y=w;var W=L;if(H){G=w;Z=L;Y=a;W=i}if(N&2){R=g(e,D,z,R,G,Z,V);if(z>=R){continue}}if(N&4){z=y(e,D,z,R,G,Z,U);if(z>=R){continue}}var X=R-z;var J=B-F;if(q){if(e*X*(X+J)<h){P=l.scanComplete(e,D,t,z,R,G,Z,F,B,Y,W);if(P!==void 0){return P}continue}}else{if(e*Math.min(X,J)<c){P=o(e,D,t,H,z,R,G,Z,F,B,Y,W);if(P!==void 0){return P}continue}else if(e*X*J<v){P=l.scanBipartite(e,D,t,H,z,R,G,Z,F,B,Y,W);if(P!==void 0){return P}continue}}var K=p(e,D,z,R,G,Z,U,V);if(z<K){if(e*(K-z)<c){P=s(e,D+1,t,z,K,G,Z,F,B,Y,W);if(P!==void 0){return P}}else if(D===e-2){if(H){P=l.sweepBipartite(e,t,F,B,Y,W,z,K,G,Z)}else{P=l.sweepBipartite(e,t,z,K,G,Z,F,B,Y,W)}if(P!==void 0){return P}}else{M(C++,D+1,z,K,F,B,H,-Infinity,Infinity);M(C++,D+1,F,B,z,K,H^1,-Infinity,Infinity)}}if(K<R){var $=u(e,D,F,B,Y,W);var Q=Y[I*$+D];var ee=d(e,D,$,B,Y,W,Q);if(ee<B){M(C++,D,K,R,ee,B,(H|4)+(q?16:0),Q,V)}if(F<$){M(C++,D,K,R,F,$,(H|2)+(q?16:0),U,Q)}if($+1===ee){if(q){P=E(e,D,t,K,R,G,Z,$,Y,W[$])}else{P=S(e,D,t,H,K,R,G,Z,$,Y,W[$])}if(P!==void 0){return P}}else if($<ee){var te;if(q){te=m(e,D,K,R,G,Z,Q);if(K<te){var re=d(e,D,K,te,G,Z,Q);if(D===e-2){if(K<re){P=l.sweepComplete(e,t,K,re,G,Z,$,ee,Y,W);if(P!==void 0){return P}}if(re<te){P=l.sweepBipartite(e,t,re,te,G,Z,$,ee,Y,W);if(P!==void 0){return P}}}else{if(K<re){M(C++,D+1,K,re,$,ee,16,-Infinity,Infinity)}if(re<te){M(C++,D+1,re,te,$,ee,0,-Infinity,Infinity);M(C++,D+1,$,ee,re,te,1,-Infinity,Infinity)}}}}else{if(H){te=x(e,D,K,R,G,Z,Q)}else{te=m(e,D,K,R,G,Z,Q)}if(K<te){if(D===e-2){if(H){P=l.sweepBipartite(e,t,$,ee,Y,W,K,te,G,Z)}else{P=l.sweepBipartite(e,t,K,te,G,Z,$,ee,Y,W)}}else{M(C++,D+1,K,te,$,ee,H,-Infinity,Infinity);M(C++,D+1,$,ee,K,te,H^1,-Infinity,Infinity)}}}}}}}},2464:function(e,t,r){"use strict";e.exports=s;var n=r(122);var a=n("lo<p0");var i=8;function o(e,t,r,n,a,i){var o=2*e;var s=o*(r+1)+t;for(var l=r+1;l<n;++l,s+=o){var u=a[s];for(var f=l,c=o*(l-1);f>r&&a[c+t]>u;--f,c-=o){var v=c;var h=c+o;for(var p=0;p<o;++p,++v,++h){var d=a[v];a[v]=a[h];a[h]=d}var g=i[f];i[f]=i[f-1];i[f-1]=g}}}function s(e,t,r,n,s,l){if(n<=r+1){return r}var u=r;var f=n;var c=n+r>>>1;var v=2*e;var h=c;var p=s[v*c+t];while(u<f){if(f-u<i){o(e,t,u,f,s,l);p=s[v*c+t];break}var d=f-u;var g=Math.random()*d+u|0;var y=s[v*g+t];var m=Math.random()*d+u|0;var x=s[v*m+t];var b=Math.random()*d+u|0;var _=s[v*b+t];if(y<=x){if(_>=x){h=m;p=x}else if(y>=_){h=g;p=y}else{h=b;p=_}}else{if(x>=_){h=m;p=x}else if(_>=y){h=g;p=y}else{h=b;p=_}}var w=v*(f-1);var T=v*h;for(var k=0;k<v;++k,++w,++T){var A=s[w];s[w]=s[T];s[T]=A}var M=l[f-1];l[f-1]=l[h];l[h]=M;h=a(e,t,u,f-1,s,l,p);var w=v*(f-1);var T=v*h;for(var k=0;k<v;++k,++w,++T){var A=s[w];s[w]=s[T];s[T]=A}var M=l[f-1];l[f-1]=l[h];l[h]=M;if(c<h){f=h-1;while(u<f&&s[v*(f-1)+t]===p){f-=1}f+=1}else if(h<c){u=h+1;while(u<f&&s[v*u+t]===p){u+=1}}else{break}}return a(e,t,r,c,s,l,s[v*c+t])}},122:function(e){"use strict";e.exports=r;var t={"lo===p0":n,"lo<p0":a,"lo<=p0":i,"hi<=p0":o,"lo<p0&&p0<=hi":l,"lo<=p0&&p0<=hi":s,"!(lo>=p0)&&!(p1>=hi)":u};function r(e){return t[e]}function n(e,t,r,n,a,i,o){for(var s=2*e,l=s*r,u=l,f=r,c=t,v=e+t,h=r;n>h;++h,l+=s){var p=a[l+c];if(p===o)if(f===h)f+=1,u+=s;else{for(var d=0;s>d;++d){var g=a[l+d];a[l+d]=a[u],a[u++]=g}var y=i[h];i[h]=i[f],i[f++]=y}}return f}function a(e,t,r,n,a,i,o){for(var s=2*e,l=s*r,u=l,f=r,c=t,v=e+t,h=r;n>h;++h,l+=s){var p=a[l+c];if(p<o)if(f===h)f+=1,u+=s;else{for(var d=0;s>d;++d){var g=a[l+d];a[l+d]=a[u],a[u++]=g}var y=i[h];i[h]=i[f],i[f++]=y}}return f}function i(e,t,r,n,a,i,o){for(var s=2*e,l=s*r,u=l,f=r,c=t,v=e+t,h=r;n>h;++h,l+=s){var p=a[l+v];if(p<=o)if(f===h)f+=1,u+=s;else{for(var d=0;s>d;++d){var g=a[l+d];a[l+d]=a[u],a[u++]=g}var y=i[h];i[h]=i[f],i[f++]=y}}return f}function o(e,t,r,n,a,i,o){for(var s=2*e,l=s*r,u=l,f=r,c=t,v=e+t,h=r;n>h;++h,l+=s){var p=a[l+v];if(p<=o)if(f===h)f+=1,u+=s;else{for(var d=0;s>d;++d){var g=a[l+d];a[l+d]=a[u],a[u++]=g}var y=i[h];i[h]=i[f],i[f++]=y}}return f}function s(e,t,r,n,a,i,o){for(var s=2*e,l=s*r,u=l,f=r,c=t,v=e+t,h=r;n>h;++h,l+=s){var p=a[l+c],d=a[l+v];if(p<=o&&o<=d)if(f===h)f+=1,u+=s;else{for(var g=0;s>g;++g){var y=a[l+g];a[l+g]=a[u],a[u++]=y}var m=i[h];i[h]=i[f],i[f++]=m}}return f}function l(e,t,r,n,a,i,o){for(var s=2*e,l=s*r,u=l,f=r,c=t,v=e+t,h=r;n>h;++h,l+=s){var p=a[l+c],d=a[l+v];if(p<o&&o<=d)if(f===h)f+=1,u+=s;else{for(var g=0;s>g;++g){var y=a[l+g];a[l+g]=a[u],a[u++]=y}var m=i[h];i[h]=i[f],i[f++]=m}}return f}function u(e,t,r,n,a,i,o,s){for(var l=2*e,u=l*r,f=u,c=r,v=t,h=e+t,p=r;n>p;++p,u+=l){var d=a[u+v],g=a[u+h];if(!(d>=o)&&!(s>=g))if(c===p)c+=1,f+=l;else{for(var y=0;l>y;++y){var m=a[u+y];a[u+y]=a[f],a[f++]=m}var x=i[p];i[p]=i[c],i[c++]=x}}return c}},309:function(e){"use strict";e.exports=r;var t=32;function r(e,r){if(r<=4*t){n(0,r-1,e)}else{f(0,r-1,e)}}function n(e,t,r){var n=2*(e+1);for(var a=e+1;a<=t;++a){var i=r[n++];var o=r[n++];var s=a;var l=n-2;while(s-- >e){var u=r[l-2];var f=r[l-1];if(u<i){break}else if(u===i&&f<o){break}r[l]=u;r[l+1]=f;l-=2}r[l]=i;r[l+1]=o}}function a(e,t,r){e*=2;t*=2;var n=r[e];var a=r[e+1];r[e]=r[t];r[e+1]=r[t+1];r[t]=n;r[t+1]=a}function i(e,t,r){e*=2;t*=2;r[e]=r[t];r[e+1]=r[t+1]}function o(e,t,r,n){e*=2;t*=2;r*=2;var a=n[e];var i=n[e+1];n[e]=n[t];n[e+1]=n[t+1];n[t]=n[r];n[t+1]=n[r+1];n[r]=a;n[r+1]=i}function s(e,t,r,n,a){e*=2;t*=2;a[e]=a[t];a[t]=r;a[e+1]=a[t+1];a[t+1]=n}function l(e,t,r){e*=2;t*=2;var n=r[e],a=r[t];if(n<a){return false}else if(n===a){return r[e+1]>r[t+1]}return true}function u(e,t,r,n){e*=2;var a=n[e];if(a<t){return true}else if(a===t){return n[e+1]<r}return false}function f(e,r,c){var v=(r-e+1)/6|0,h=e+v,p=r-v,d=e+r>>1,g=d-v,y=d+v,m=h,x=g,b=d,_=y,w=p,T=e+1,k=r-1,A=0;if(l(m,x,c)){A=m;m=x;x=A}if(l(_,w,c)){A=_;_=w;w=A}if(l(m,b,c)){A=m;m=b;b=A}if(l(x,b,c)){A=x;x=b;b=A}if(l(m,_,c)){A=m;m=_;_=A}if(l(b,_,c)){A=b;b=_;_=A}if(l(x,w,c)){A=x;x=w;w=A}if(l(x,b,c)){A=x;x=b;b=A}if(l(_,w,c)){A=_;_=w;w=A}var M=c[2*x];var S=c[2*x+1];var E=c[2*_];var L=c[2*_+1];var C=2*m;var I=2*b;var P=2*w;var O=2*h;var D=2*d;var z=2*p;for(var R=0;R<2;++R){var F=c[C+R];var B=c[I+R];var N=c[P+R];c[O+R]=F;c[D+R]=B;c[z+R]=N}i(g,e,c);i(y,r,c);for(var j=T;j<=k;++j){if(u(j,M,S,c)){if(j!==T){a(j,T,c)}++T}else{if(!u(j,E,L,c)){while(true){if(!u(k,E,L,c)){if(--k<j){break}continue}else{if(u(k,M,S,c)){o(j,T,k,c);++T;--k}else{a(j,k,c);--k}break}}}}}s(e,T-1,M,S,c);s(r,k+1,E,L,c);if(T-2-e<=t){n(e,T-2,c)}else{f(e,T-2,c)}if(r-(k+2)<=t){n(k+2,r,c)}else{f(k+2,r,c)}if(k-T<=t){n(T,k,c)}else{f(T,k,c)}}},1390:function(e,t,r){"use strict";e.exports={init:d,sweepBipartite:m,sweepComplete:x,scanBipartite:b,scanComplete:_};var n=r(5306);var a=r(2288);var i=r(309);var o=1<<28;var s=1024;var l=n.mallocInt32(s);var u=n.mallocInt32(s);var f=n.mallocInt32(s);var c=n.mallocInt32(s);var v=n.mallocInt32(s);var h=n.mallocInt32(s);var p=n.mallocDouble(s*8);function d(e){var t=a.nextPow2(e);if(l.length<t){n.free(l);l=n.mallocInt32(t)}if(u.length<t){n.free(u);u=n.mallocInt32(t)}if(f.length<t){n.free(f);f=n.mallocInt32(t)}if(c.length<t){n.free(c);c=n.mallocInt32(t)}if(v.length<t){n.free(v);v=n.mallocInt32(t)}if(h.length<t){n.free(h);h=n.mallocInt32(t)}var r=8*t;if(p.length<r){n.free(p);p=n.mallocDouble(r)}}function g(e,t,r,n){var a=t[n];var i=e[r-1];e[a]=i;t[i]=a}function y(e,t,r,n){e[r]=n;t[n]=r}function m(e,t,r,n,a,s,v,h,d,m){var x=0;var b=2*e;var _=e-1;var w=b-1;for(var T=r;T<n;++T){var k=s[T];var A=b*T;p[x++]=a[A+_];p[x++]=-(k+1);p[x++]=a[A+w];p[x++]=k}for(var T=v;T<h;++T){var k=m[T]+o;var M=b*T;p[x++]=d[M+_];p[x++]=-k;p[x++]=d[M+w];p[x++]=k}var S=x>>>1;i(p,S);var E=0;var L=0;for(var T=0;T<S;++T){var C=p[2*T+1]|0;if(C>=o){C=C-o|0;g(f,c,L--,C)}else if(C>=0){g(l,u,E--,C)}else if(C<=-o){C=-C-o|0;for(var I=0;I<E;++I){var P=t(l[I],C);if(P!==void 0){return P}}y(f,c,L++,C)}else{C=-C-1|0;for(var I=0;I<L;++I){var P=t(C,f[I]);if(P!==void 0){return P}}y(l,u,E++,C)}}}function x(e,t,r,n,a,o,s,d,m,x){var b=0;var _=2*e;var w=e-1;var T=_-1;for(var k=r;k<n;++k){var A=o[k]+1<<1;var M=_*k;p[b++]=a[M+w];p[b++]=-A;p[b++]=a[M+T];p[b++]=A}for(var k=s;k<d;++k){var A=x[k]+1<<1;var S=_*k;p[b++]=m[S+w];p[b++]=-A|1;p[b++]=m[S+T];p[b++]=A|1}var E=b>>>1;i(p,E);var L=0;var C=0;var I=0;for(var k=0;k<E;++k){var P=p[2*k+1]|0;var O=P&1;if(k<E-1&&P>>1===p[2*k+3]>>1){O=2;k+=1}if(P<0){var D=-(P>>1)-1;for(var z=0;z<I;++z){var R=t(v[z],D);if(R!==void 0){return R}}if(O!==0){for(var z=0;z<L;++z){var R=t(l[z],D);if(R!==void 0){return R}}}if(O!==1){for(var z=0;z<C;++z){var R=t(f[z],D);if(R!==void 0){return R}}}if(O===0){y(l,u,L++,D)}else if(O===1){y(f,c,C++,D)}else if(O===2){y(v,h,I++,D)}}else{var D=(P>>1)-1;if(O===0){g(l,u,L--,D)}else if(O===1){g(f,c,C--,D)}else if(O===2){g(v,h,I--,D)}}}}function b(e,t,r,n,a,s,f,c,v,h,d,m){var x=0;var b=2*e;var _=t;var w=t+e;var T=1;var k=1;if(n){k=o}else{T=o}for(var A=a;A<s;++A){var M=A+T;var S=b*A;p[x++]=f[S+_];p[x++]=-M;p[x++]=f[S+w];p[x++]=M}for(var A=v;A<h;++A){var M=A+k;var E=b*A;p[x++]=d[E+_];p[x++]=-M}var L=x>>>1;i(p,L);var C=0;for(var A=0;A<L;++A){var I=p[2*A+1]|0;if(I<0){var M=-I;var P=false;if(M>=o){P=!n;M-=o}else{P=!!n;M-=1}if(P){y(l,u,C++,M)}else{var O=m[M];var D=b*M;var z=d[D+t+1];var R=d[D+t+1+e];e:for(var F=0;F<C;++F){var B=l[F];var N=b*B;if(R<f[N+t+1]||f[N+t+1+e]<z){continue}for(var j=t+2;j<e;++j){if(d[D+j+e]<f[N+j]||f[N+j+e]<d[D+j]){continue e}}var U=c[B];var V;if(n){V=r(O,U)}else{V=r(U,O)}if(V!==void 0){return V}}}}else{g(l,u,C--,I-T)}}}function _(e,t,r,n,a,s,u,f,c,v,h){var d=0;var g=2*e;var y=t;var m=t+e;for(var x=n;x<a;++x){var b=x+o;var _=g*x;p[d++]=s[_+y];p[d++]=-b;p[d++]=s[_+m];p[d++]=b}for(var x=f;x<c;++x){var b=x+1;var w=g*x;p[d++]=v[w+y];p[d++]=-b}var T=d>>>1;i(p,T);var k=0;for(var x=0;x<T;++x){var A=p[2*x+1]|0;if(A<0){var b=-A;if(b>=o){l[k++]=b-o}else{b-=1;var M=h[b];var S=g*b;var E=v[S+t+1];var L=v[S+t+1+e];e:for(var C=0;C<k;++C){var I=l[C];var P=u[I];if(P===M){break}var O=g*I;if(L<s[O+t+1]||s[O+t+1+e]<E){continue}for(var D=t+2;D<e;++D){if(v[S+D+e]<s[O+D]||s[O+D+e]<v[S+D]){continue e}}var z=r(P,M);if(z!==void 0){return z}}}}else{var b=A-o;for(var C=k-1;C>=0;--C){if(l[C]===b){for(var D=C+1;D<k;++D){l[D-1]=l[D]}break}}--k}}}},7761:function(e,t,r){"use strict";var n=r(9971);var a=r(743);var i=r(2161);var o=r(7098);e.exports=c;function s(e){return[Math.min(e[0],e[1]),Math.max(e[0],e[1])]}function l(e,t){return e[0]-t[0]||e[1]-t[1]}function u(e){return e.map(s).sort(l)}function f(e,t,r){if(t in e){return e[t]}return r}function c(e,t,r){if(!Array.isArray(t)){r=t||{};t=[]}else{r=r||{};t=t||[]}var s=!!f(r,"delaunay",true);var l=!!f(r,"interior",true);var c=!!f(r,"exterior",true);var v=!!f(r,"infinity",false);if(!l&&!c||e.length===0){return[]}var h=n(e,t);if(s||l!==c||v){var p=a(e.length,u(t));for(var d=0;d<h.length;++d){var g=h[d];p.addTriangle(g[0],g[1],g[2])}if(s){i(e,p)}if(!c){return o(p,-1)}else if(!l){return o(p,1,v)}else if(v){return o(p,0,v)}else{return p.cells()}}else{return h}}},2161:function(e,t,r){"use strict";var n=r(2227)[4];var a=r(5070);e.exports=o;function i(e,t,r,a,i,o){var s=t.opposite(a,i);if(s<0){return}if(i<a){var l=a;a=i;i=l;l=o;o=s;s=l}if(t.isConstraint(a,i)){return}if(n(e[a],e[i],e[o],e[s])<0){r.push(a,i)}}function o(e,t){var r=[];var a=e.length;var o=t.stars;for(var s=0;s<a;++s){var l=o[s];for(var u=1;u<l.length;u+=2){var f=l[u];if(f<s){continue}if(t.isConstraint(s,f)){continue}var c=l[u-1],v=-1;for(var h=1;h<l.length;h+=2){if(l[h-1]===f){v=l[h];break}}if(v<0){continue}if(n(e[s],e[f],e[c],e[v])<0){r.push(s,f)}}}while(r.length>0){var f=r.pop();var s=r.pop();var c=-1,v=-1;var l=o[s];for(var p=1;p<l.length;p+=2){var d=l[p-1];var g=l[p];if(d===f){v=g}else if(g===f){c=d}}if(c<0||v<0){continue}if(n(e[s],e[f],e[c],e[v])>=0){continue}t.flip(s,f);i(e,t,r,c,s,v);i(e,t,r,s,v,c);i(e,t,r,v,f,c);i(e,t,r,f,c,v)}}},7098:function(e,t,r){"use strict";var n=r(5070);e.exports=u;function a(e,t,r,n,a,i,o){this.cells=e;this.neighbor=t;this.flags=n;this.constraint=r;this.active=a;this.next=i;this.boundary=o}var i=a.prototype;function o(e,t){return e[0]-t[0]||e[1]-t[1]||e[2]-t[2]}i.locate=function(){var e=[0,0,0];return function(t,r,a){var i=t,s=r,l=a;if(r<a){if(r<t){i=r;s=a;l=t}}else if(a<t){i=a;s=t;l=r}if(i<0){return-1}e[0]=i;e[1]=s;e[2]=l;return n.eq(this.cells,e,o)}}();function s(e,t){var r=e.cells();var n=r.length;for(var i=0;i<n;++i){var s=r[i];var l=s[0],u=s[1],f=s[2];if(u<f){if(u<l){s[0]=u;s[1]=f;s[2]=l}}else if(f<l){s[0]=f;s[1]=l;s[2]=u}}r.sort(o);var c=new Array(n);for(var i=0;i<c.length;++i){c[i]=0}var v=[];var h=[];var p=new Array(3*n);var d=new Array(3*n);var g=null;if(t){g=[]}var y=new a(r,p,d,c,v,h,g);for(var i=0;i<n;++i){var s=r[i];for(var m=0;m<3;++m){var l=s[m],u=s[(m+1)%3];var x=p[3*i+m]=y.locate(u,l,e.opposite(u,l));var b=d[3*i+m]=e.isConstraint(l,u);if(x<0){if(b){h.push(i)}else{v.push(i);c[i]=1}if(t){g.push([u,l,-1])}}}}return y}function l(e,t,r){var n=0;for(var a=0;a<e.length;++a){if(t[a]===r){e[n++]=e[a]}}e.length=n;return e}function u(e,t,r){var n=s(e,r);if(t===0){if(r){return n.cells.concat(n.boundary)}else{return n.cells}}var a=1;var i=n.active;var o=n.next;var u=n.flags;var f=n.cells;var c=n.constraint;var v=n.neighbor;while(i.length>0||o.length>0){while(i.length>0){var h=i.pop();if(u[h]===-a){continue}u[h]=a;var p=f[h];for(var d=0;d<3;++d){var g=v[3*h+d];if(g>=0&&u[g]===0){if(c[3*h+d]){o.push(g)}else{i.push(g);u[g]=a}}}}var y=o;o=i;i=y;o.length=0;a=-a}var m=l(f,u,t);if(r){return m.concat(n.boundary)}return m}},9971:function(e,t,r){"use strict";var n=r(5070);var a=r(417)[3];var i=0;var o=1;var s=2;e.exports=g;function l(e,t,r,n,a){this.a=e;this.b=t;this.idx=r;this.lowerIds=n;this.upperIds=a}function u(e,t,r,n){this.a=e;this.b=t;this.type=r;this.idx=n}function f(e,t){var r=e.a[0]-t.a[0]||e.a[1]-t.a[1]||e.type-t.type;if(r){return r}if(e.type!==i){r=a(e.a,e.b,t.b);if(r){return r}}return e.idx-t.idx}function c(e,t){return a(e.a,e.b,t)}function v(e,t,r,i,o){var s=n.lt(t,i,c);var l=n.gt(t,i,c);for(var u=s;u<l;++u){var f=t[u];var v=f.lowerIds;var h=v.length;while(h>1&&a(r[v[h-2]],r[v[h-1]],i)>0){e.push([v[h-1],v[h-2],o]);h-=1}v.length=h;v.push(o);var p=f.upperIds;var h=p.length;while(h>1&&a(r[p[h-2]],r[p[h-1]],i)<0){e.push([p[h-2],p[h-1],o]);h-=1}p.length=h;p.push(o)}}function h(e,t){var r;if(e.a[0]<t.a[0]){r=a(e.a,e.b,t.a)}else{r=a(t.b,t.a,e.a)}if(r){return r}if(t.b[0]<e.b[0]){r=a(e.a,e.b,t.b)}else{r=a(t.b,t.a,e.b)}return r||e.idx-t.idx}function p(e,t,r){var a=n.le(e,r,h);var i=e[a];var o=i.upperIds;var s=o[o.length-1];i.upperIds=[s];e.splice(a+1,0,new l(r.a,r.b,r.idx,[s],o))}function d(e,t,r){var a=r.a;r.a=r.b;r.b=a;var i=n.eq(e,r,h);var o=e[i];var s=e[i-1];s.upperIds=o.upperIds;e.splice(i,1)}function g(e,t){var r=e.length;var n=t.length;var a=[];for(var c=0;c<r;++c){a.push(new u(e[c],null,i,c))}for(var c=0;c<n;++c){var h=t[c];var g=e[h[0]];var y=e[h[1]];if(g[0]<y[0]){a.push(new u(g,y,s,c),new u(y,g,o,c))}else if(g[0]>y[0]){a.push(new u(y,g,s,c),new u(g,y,o,c))}}a.sort(f);var m=a[0].a[0]-(1+Math.abs(a[0].a[0]))*Math.pow(2,-52);var x=[new l([m,1],[m,0],-1,[],[],[],[])];var b=[];for(var c=0,_=a.length;c<_;++c){var w=a[c];var T=w.type;if(T===i){v(b,x,e,w.a,w.idx)}else if(T===s){p(x,e,w)}else{d(x,e,w)}}return b}},743:function(e,t,r){"use strict";var n=r(5070);e.exports=s;function a(e,t){this.stars=e;this.edges=t}var i=a.prototype;function o(e,t,r){for(var n=1,a=e.length;n<a;n+=2){if(e[n-1]===t&&e[n]===r){e[n-1]=e[a-2];e[n]=e[a-1];e.length=a-2;return}}}i.isConstraint=function(){var e=[0,0];function t(e,t){return e[0]-t[0]||e[1]-t[1]}return function(r,a){e[0]=Math.min(r,a);e[1]=Math.max(r,a);return n.eq(this.edges,e,t)>=0}}();i.removeTriangle=function(e,t,r){var n=this.stars;o(n[e],t,r);o(n[t],r,e);o(n[r],e,t)};i.addTriangle=function(e,t,r){var n=this.stars;n[e].push(t,r);n[t].push(r,e);n[r].push(e,t)};i.opposite=function(e,t){var r=this.stars[t];for(var n=1,a=r.length;n<a;n+=2){if(r[n]===e){return r[n-1]}}return-1};i.flip=function(e,t){var r=this.opposite(e,t);var n=this.opposite(t,e);this.removeTriangle(e,t,r);this.removeTriangle(t,e,n);this.addTriangle(e,n,r);this.addTriangle(t,r,n)};i.edges=function(){var e=this.stars;var t=[];for(var r=0,n=e.length;r<n;++r){var a=e[r];for(var i=0,o=a.length;i<o;i+=2){t.push([a[i],a[i+1]])}}return t};i.cells=function(){var e=this.stars;var t=[];for(var r=0,n=e.length;r<n;++r){var a=e[r];for(var i=0,o=a.length;i<o;i+=2){var s=a[i];var l=a[i+1];if(r<Math.min(s,l)){t.push([r,s,l])}}}return t};function s(e,t){var r=new Array(e);for(var n=0;n<e;++n){r[n]=[]}return new a(r,t)}},9887:function(e){"use strict";e.exports=t;function t(e){var t=1;for(var r=1;r<e.length;++r){for(var n=0;n<r;++n){if(e[r]<e[n]){t=-t}else if(e[n]===e[r]){return 0}}}return t}},9243:function(e,t,r){"use strict";var n=r(3094);var a=r(6606);function i(e,t){var r=0;var n=e.length;for(var a=0;a<n;++a){r+=e[a]*t[a]}return r}function o(e){var t=e.length;if(t===0){return[]}var r=e[0].length;var o=n([e.length+1,e.length+1],1);var s=n([e.length+1],1);o[t][t]=0;for(var l=0;l<t;++l){for(var u=0;u<=l;++u){o[u][l]=o[l][u]=2*i(e[l],e[u])}s[l]=i(e[l],e[l])}var f=a(o,s);var c=0;var v=f[t+1];for(var l=0;l<v.length;++l){c+=v[l]}var h=new Array(t);for(var l=0;l<t;++l){var v=f[l];var p=0;for(var u=0;u<v.length;++u){p+=v[u]}h[l]=p/c}return h}function s(e){if(e.length===0){return[]}var t=e[0].length;var r=n([t]);var a=o(e);for(var i=0;i<e.length;++i){for(var s=0;s<t;++s){r[s]+=e[i][s]*a[i]}}return r}s.barycenetric=o;e.exports=s},1778:function(e,t,r){e.exports=a;var n=r(9243);function a(e){var t=n(e);var r=0;for(var a=0;a<e.length;++a){var i=e[a];for(var o=0;o<t.length;++o){r+=Math.pow(i[o]-t[o],2)}}return Math.sqrt(r/e.length)}},197:function(e,t,r){"use strict";e.exports=k;var n=r(1731);var a=r(2569);var i=r(4434);var o=r(5125);var s=r(8846);var l=r(7999);var u=r(2826);var f=r(8551);var c=r(5528);function v(e){var t=l(e);return[f(t,-Infinity),f(t,Infinity)]}function h(e,t){var r=new Array(t.length);for(var n=0;n<t.length;++n){var a=t[n];var i=e[a[0]];var o=e[a[1]];r[n]=[f(Math.min(i[0],o[0]),-Infinity),f(Math.min(i[1],o[1]),-Infinity),f(Math.max(i[0],o[0]),Infinity),f(Math.max(i[1],o[1]),Infinity)]}return r}function p(e){var t=new Array(e.length);for(var r=0;r<e.length;++r){var n=e[r];t[r]=[f(n[0],-Infinity),f(n[1],-Infinity),f(n[0],Infinity),f(n[1],Infinity)]}return t}function d(e,t,r){var n=[];a(r,(function(r,a){var o=t[r];var s=t[a];if(o[0]===s[0]||o[0]===s[1]||o[1]===s[0]||o[1]===s[1]){return}var l=e[o[0]];var u=e[o[1]];var f=e[s[0]];var c=e[s[1]];if(i(l,u,f,c)){n.push([r,a])}}));return n}function g(e,t,r,n){var o=[];a(r,n,(function(r,n){var a=t[r];if(a[0]===n||a[1]===n){return}var s=e[n];var l=e[a[0]];var u=e[a[1]];if(i(l,u,s,s)){o.push([r,n])}}));return o}function y(e,t,r,n,a){var i,f;var v=e.map((function(e){return[o(e[0]),o(e[1])]}));for(i=0;i<r.length;++i){var h=r[i];f=h[0];var p=h[1];var d=t[f];var g=t[p];var y=c(u(e[d[0]]),u(e[d[1]]),u(e[g[0]]),u(e[g[1]]));if(!y){continue}var m=e.length;e.push([l(y[0]),l(y[1])]);v.push(y);n.push([f,m],[p,m])}n.sort((function(e,t){if(e[0]!==t[0]){return e[0]-t[0]}var r=v[e[1]];var n=v[t[1]];return s(r[0],n[0])||s(r[1],n[1])}));for(i=n.length-1;i>=0;--i){var x=n[i];f=x[0];var b=t[f];var _=b[0];var w=b[1];var T=e[_];var k=e[w];if((T[0]-k[0]||T[1]-k[1])<0){var A=_;_=w;w=A}b[0]=_;var M=b[1]=x[1];var S;if(a){S=b[2]}while(i>0&&n[i-1][0]===f){var x=n[--i];var E=x[1];if(a){t.push([M,E,S])}else{t.push([M,E])}M=E}if(a){t.push([M,w,S])}else{t.push([M,w])}}return v}function m(e,t,r){var i=t.length;var o=new n(i);var s=[];for(var l=0;l<t.length;++l){var u=t[l];var c=v(u[0]);var h=v(u[1]);s.push([f(c[0],-Infinity),f(h[0],-Infinity),f(c[1],Infinity),f(h[1],Infinity)])}a(s,(function(e,t){o.link(e,t)}));var p=true;var d=new Array(i);for(var l=0;l<i;++l){var g=o.find(l);if(g!==l){p=false;e[g]=[Math.min(e[l][0],e[g][0]),Math.min(e[l][1],e[g][1])]}}if(p){return null}var y=0;for(var l=0;l<i;++l){var g=o.find(l);if(g===l){d[l]=y;e[y++]=e[l]}else{d[l]=-1}}e.length=y;for(var l=0;l<i;++l){if(d[l]<0){d[l]=d[o.find(l)]}}return d}function x(e,t){return e[0]-t[0]||e[1]-t[1]}function b(e,t){var r=e[0]-t[0]||e[1]-t[1];if(r){return r}if(e[2]<t[2]){return-1}else if(e[2]>t[2]){return 1}return 0}function _(e,t,r){if(e.length===0){return}if(t){for(var n=0;n<e.length;++n){var a=e[n];var i=t[a[0]];var o=t[a[1]];a[0]=Math.min(i,o);a[1]=Math.max(i,o)}}else{for(var n=0;n<e.length;++n){var a=e[n];var i=a[0];var o=a[1];a[0]=Math.min(i,o);a[1]=Math.max(i,o)}}if(r){e.sort(b)}else{e.sort(x)}var s=1;for(var n=1;n<e.length;++n){var l=e[n-1];var u=e[n];if(u[0]===l[0]&&u[1]===l[1]&&(!r||u[2]===l[2])){continue}e[s++]=u}e.length=s}function w(e,t,r){var n=m(e,[],p(e));_(t,n,r);return!!n}function T(e,t,r){var n=h(e,t);var a=d(e,t,n);var i=p(e);var o=g(e,t,n,i);var s=y(e,t,a,o,r);var l=m(e,s,i);_(t,l,r);if(!l){return a.length>0||o.length>0}return true}function k(e,t,r){var n;if(r){n=t;var a=new Array(t.length);for(var i=0;i<t.length;++i){var o=t[i];a[i]=[o[0],o[1],r[i]]}t=a}var s=w(e,t,!!r);while(T(e,t,!!r)){s=true}if(!!r&&s){n.length=0;r.length=0;for(var i=0;i<t.length;++i){var o=t[i];n.push([o[0],o[1]]);r.push(o[2])}}return s}},5528:function(e,t,r){"use strict";e.exports=c;var n=r(3962);var a=r(9189);var i=r(4354);var o=r(4951);var s=r(6695);var l=r(7584);var u=r(4469);function f(e,t){return i(n(e[0],t[1]),n(e[1],t[0]))}function c(e,t,r,n){var i=s(t,e);var c=s(n,r);var v=f(i,c);if(o(v)===0){return null}var h=s(e,r);var p=f(c,h);var d=a(p,v);var g=u(i,d);var y=l(e,g);return y}},5692:function(e){e.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(e,t,r){"use strict";var n=r(5692);var a=r(3578);e.exports=i;function i(e){var t,r,i,u,f,c,v,h,p,d,g;if(!e)e={};h=(e.nshades||72)-1;v=e.format||"hex";c=e.colormap;if(!c)c="jet";if(typeof c==="string"){c=c.toLowerCase();if(!n[c]){throw Error(c+" not a supported colorscale")}f=n[c]}else if(Array.isArray(c)){f=c.slice()}else{throw Error("unsupported colormap option",c)}if(f.length>h+1){throw new Error(c+" map requires nshades to be at least size "+f.length)}if(!Array.isArray(e.alpha)){if(typeof e.alpha==="number"){d=[e.alpha,e.alpha]}else{d=[1,1]}}else if(e.alpha.length!==2){d=[1,1]}else{d=e.alpha.slice()}t=f.map((function(e){return Math.round(e.index*h)}));d[0]=Math.min(Math.max(d[0],0),1);d[1]=Math.min(Math.max(d[1],0),1);var y=f.map((function(e,t){var r=f[t].index;var n=f[t].rgb.slice();if(n.length===4&&n[3]>=0&&n[3]<=1){return n}n[3]=d[0]+(d[1]-d[0])*r;return n}));var p=[];for(g=0;g<t.length-1;++g){u=t[g+1]-t[g];r=y[g];i=y[g+1];for(var m=0;m<u;m++){var x=m/u;p.push([Math.round(a(r[0],i[0],x)),Math.round(a(r[1],i[1],x)),Math.round(a(r[2],i[2],x)),a(r[3],i[3],x)])}}p.push(f[f.length-1].rgb.concat(d[1]));if(v==="hex")p=p.map(s);else if(v==="rgbaString")p=p.map(l);else if(v==="float")p=p.map(o);return p}function o(e){return[e[0]/255,e[1]/255,e[2]/255,e[3]]}function s(e){var t,r="#";for(var n=0;n<3;++n){t=e[n];t=t.toString(16);r+=("00"+t).substr(t.length)}return r}function l(e){return"rgba("+e.join(",")+")"}},9398:function(e,t,r){"use strict";e.exports=u;var n=r(417);var a=r(7538);var i=r(87);var o=r(2019);var s=r(9662);function l(e,t,r){var n=i(e[0],-t[0]);var a=i(e[1],-t[1]);var l=i(r[0],-t[0]);var u=i(r[1],-t[1]);var f=s(o(n,l),o(a,u));return f[f.length-1]>=0}function u(e,t,r,i){var o=n(t,r,i);if(o===0){var s=a(n(e,t,r));var u=a(n(e,t,i));if(s===u){if(s===0){var f=l(e,t,r);var c=l(e,t,i);if(f===c){return 0}else if(f){return 1}else{return-1}}return 0}else if(u===0){if(s>0){return-1}else if(l(e,t,i)){return-1}else{return 1}}else if(s===0){if(u>0){return 1}else if(l(e,t,r)){return 1}else{return-1}}return a(u-s)}var v=n(e,t,r);if(v>0){if(o>0&&n(e,t,i)>0){return 1}return-1}else if(v<0){if(o>0||n(e,t,i)>0){return 1}return-1}else{var h=n(e,t,i);if(h>0){return 1}else{if(l(e,t,r)){return 1}else{return-1}}}}},7538:function(e){"use strict";e.exports=function e(t){if(t<0){return-1}if(t>0){return 1}return 0}},9209:function(e){e.exports=n;var t=Math.min;function r(e,t){return e-t}function n(e,n){var a=e.length,i=e.length-n.length;if(i){return i}switch(a){case 0:return 0;case 1:return e[0]-n[0];case 2:return e[0]+e[1]-n[0]-n[1]||t(e[0],e[1])-t(n[0],n[1]);case 3:var o=e[0]+e[1],s=n[0]+n[1];i=o+e[2]-(s+n[2]);if(i){return i}var l=t(e[0],e[1]),u=t(n[0],n[1]);return t(l,e[2])-t(u,n[2])||t(l+e[2],o)-t(u+n[2],s);case 4:var f=e[0],c=e[1],v=e[2],h=e[3],p=n[0],d=n[1],g=n[2],y=n[3];return f+c+v+h-(p+d+g+y)||t(f,c,v,h)-t(p,d,g,y,p)||t(f+c,f+v,f+h,c+v,c+h,v+h)-t(p+d,p+g,p+y,d+g,d+y,g+y)||t(f+c+v,f+c+h,f+v+h,c+v+h)-t(p+d+g,p+d+y,p+g+y,d+g+y);default:var m=e.slice().sort(r);var x=n.slice().sort(r);for(var b=0;b<a;++b){i=m[b]-x[b];if(i){return i}}return 0}}},1284:function(e,t,r){"use strict";var n=r(9209);var a=r(9887);e.exports=i;function i(e,t){return n(e,t)||a(e)-a(t)}},5537:function(e,t,r){"use strict";var n=r(8950);var a=r(8722);var i=r(3332);e.exports=o;function o(e){var t=e.length;if(t===0){return[]}else if(t===1){return[[0]]}var r=e[0].length;if(r===0){return[]}else if(r===1){return n(e)}else if(r===2){return a(e)}return i(e,r)}},8950:function(e){"use strict";e.exports=t;function t(e){var t=0;var r=0;for(var n=1;n<e.length;++n){if(e[n][0]<e[t][0]){t=n}if(e[n][0]>e[r][0]){r=n}}if(t<r){return[[t],[r]]}else if(t>r){return[[r],[t]]}else{return[[t]]}}},8722:function(e,t,r){"use strict";e.exports=a;var n=r(3266);function a(e){var t=n(e);var r=t.length;if(r<=2){return[]}var a=new Array(r);var i=t[r-1];for(var o=0;o<r;++o){var s=t[o];a[o]=[i,s];i=s}return a}},3332:function(e,t,r){"use strict";e.exports=s;var n=r(2183);var a=r(2153);function i(e,t){var r=e.length;var n=new Array(r);for(var a=0;a<t.length;++a){n[a]=e[t[a]]}var i=t.length;for(var a=0;a<r;++a){if(t.indexOf(a)<0){n[i++]=e[a]}}return n}function o(e,t){var r=e.length;var n=t.length;for(var a=0;a<r;++a){var i=e[a];for(var o=0;o<i.length;++o){var s=i[o];if(s<n){i[o]=t[s]}else{s=s-n;for(var l=0;l<n;++l){if(s>=t[l]){s+=1}}i[o]=s}}}return e}function s(e,t){try{return n(e,true)}catch(u){var r=a(e);if(r.length<=t){return[]}var s=i(e,r);var l=n(s,true);return o(l,r)}}},9680:function(e){"use strict";function t(e,t,r,n,a,i){var o=6*a*a-6*a,s=3*a*a-4*a+1,l=-6*a*a+6*a,u=3*a*a-2*a;if(e.length){if(!i){i=new Array(e.length)}for(var f=e.length-1;f>=0;--f){i[f]=o*e[f]+s*t[f]+l*r[f]+u*n[f]}return i}return o*e+s*t+l*r[f]+u*n}function r(e,t,r,n,a,i){var o=a-1,s=a*a,l=o*o,u=(1+2*a)*l,f=a*l,c=s*(3-2*a),v=s*o;if(e.length){if(!i){i=new Array(e.length)}for(var h=e.length-1;h>=0;--h){i[h]=u*e[h]+f*t[h]+c*r[h]+v*n[h]}return i}return u*e+f*t+c*r+v*n}e.exports=r;e.exports.derivative=t},4419:function(e,t,r){"use strict";var n=r(2183);var a=r(1215);e.exports=l;function i(e,t){this.point=e;this.index=t}function o(e,t){var r=e.point;var n=t.point;var a=r.length;for(var i=0;i<a;++i){var o=n[i]-r[i];if(o){return o}}return 0}function s(e,t,r){if(e===1){if(r){return[[-1,0]]}else{return[]}}var n=t.map((function(e,t){return[e[0],t]}));n.sort((function(e,t){return e[0]-t[0]}));var a=new Array(e-1);for(var i=1;i<e;++i){var o=n[i-1];var s=n[i];a[i-1]=[o[1],s[1]]}if(r){a.push([-1,a[0][1]],[a[e-1][1],-1])}return a}function l(e,t){var r=e.length;if(r===0){return[]}var l=e[0].length;if(l<1){return[]}if(l===1){return s(r,e,t)}var u=new Array(r);var f=1;for(var c=0;c<r;++c){var v=e[c];var h=new Array(l+1);var p=0;for(var d=0;d<l;++d){var g=v[d];h[d]=g;p+=g*g}h[l]=p;u[c]=new i(h,c);f=Math.max(p,f)}a(u,o);r=u.length;var y=new Array(r+l+1);var m=new Array(r+l+1);var x=(l+1)*(l+1)*f;var b=new Array(l+1);for(var c=0;c<=l;++c){b[c]=0}b[l]=x;y[0]=b.slice();m[0]=-1;for(var c=0;c<=l;++c){var h=b.slice();h[c]=1;y[c+1]=h;m[c+1]=-1}for(var c=0;c<r;++c){var _=u[c];y[c+l+1]=_.point;m[c+l+1]=_.index}var w=n(y,false);if(t){w=w.filter((function(e){var t=0;for(var r=0;r<=l;++r){var n=m[e[r]];if(n<0){if(++t>=2){return false}}e[r]=n}return true}))}else{w=w.filter((function(e){for(var t=0;t<=l;++t){var r=m[e[t]];if(r<0){return false}e[t]=r}return true}))}if(l&1){for(var c=0;c<w.length;++c){var _=w[c];var h=_[0];_[0]=_[1];_[1]=h}}return w}},8362:function(e){var t=false;if(typeof Float64Array!=="undefined"){var r=new Float64Array(1),n=new Uint32Array(r.buffer);r[0]=1;t=true;if(n[1]===1072693248){e.exports=function e(t){r[0]=t;return[n[0],n[1]]};function a(e,t){n[0]=e;n[1]=t;return r[0]}e.exports.pack=a;function i(e){r[0]=e;return n[0]}e.exports.lo=i;function o(e){r[0]=e;return n[1]}e.exports.hi=o}else if(n[0]===1072693248){e.exports=function e(t){r[0]=t;return[n[1],n[0]]};function s(e,t){n[1]=e;n[0]=t;return r[0]}e.exports.pack=s;function l(e){r[0]=e;return n[1]}e.exports.lo=l;function u(e){r[0]=e;return n[0]}e.exports.hi=u}else{t=false}}if(!t){var f=new Buffer(8);e.exports=function e(t){f.writeDoubleLE(t,0,true);return[f.readUInt32LE(0,true),f.readUInt32LE(4,true)]};function c(e,t){f.writeUInt32LE(e,0,true);f.writeUInt32LE(t,4,true);return f.readDoubleLE(0,true)}e.exports.pack=c;function v(e){f.writeDoubleLE(e,0,true);return f.readUInt32LE(0,true)}e.exports.lo=v;function h(e){f.writeDoubleLE(e,0,true);return f.readUInt32LE(4,true)}e.exports.hi=h}e.exports.sign=function(t){return e.exports.hi(t)>>>31};e.exports.exponent=function(t){var r=e.exports.hi(t);return(r<<1>>>21)-1023};e.exports.fraction=function(t){var r=e.exports.lo(t);var n=e.exports.hi(t);var a=n&(1<<20)-1;if(n&2146435072){a+=1<<20}return[r,a]};e.exports.denormalized=function(t){var r=e.exports.hi(t);return!(r&2146435072)}},3094:function(e){"use strict";function t(e,r,n){var a=e[n]|0;if(a<=0){return[]}var i=new Array(a),o;if(n===e.length-1){for(o=0;o<a;++o){i[o]=r}}else{for(o=0;o<a;++o){i[o]=t(e,r,n+1)}}return i}function r(e,t){var r,n;r=new Array(e);for(n=0;n<e;++n){r[n]=t}return r}function n(e,n){if(typeof n==="undefined"){n=0}switch(typeof e){case"number":if(e>0){return r(e|0,n)}break;case"object":if(typeof e.length==="number"){return t(e,n,0)}break}return[]}e.exports=n},8348:function(e,t,r){"use strict";e.exports=a;var n=r(1215);function a(e,t){var r=e.length;if(typeof t!=="number"){t=0;for(var a=0;a<r;++a){var i=e[a];t=Math.max(t,i[0],i[1])}t=(t|0)+1}t=t|0;var o=new Array(t);for(var a=0;a<t;++a){o[a]=[]}for(var a=0;a<r;++a){var i=e[a];o[i[0]].push(i[1]);o[i[1]].push(i[0])}for(var s=0;s<t;++s){n(o[s],(function(e,t){return e-t}))}return o}},5795:function(e){"use strict";e.exports=t;function t(e,t,r){var n=t||0;var a=r||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[n*e[12]+e[8],n*e[13]+e[9],n*e[14]+e[10],n*e[15]+e[11]],[a*e[12]-e[8],a*e[13]-e[9],a*e[14]-e[10],a*e[15]-e[11]]]}},8444:function(e,t,r){"use strict";e.exports=u;var n=r(9680);var a=r(5070);function i(e,t,r){return Math.min(t,Math.max(e,r))}function o(e,t,r){this.dimension=e.length;this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var n=0;n<this.dimension;++n){this.bounds[0][n]=-Infinity;this.bounds[1][n]=Infinity}this._state=e.slice().reverse();this._velocity=t.slice().reverse();this._time=[r];this._scratch=[e.slice(),e.slice(),e.slice(),e.slice(),e.slice()]}var s=o.prototype;s.flush=function(e){var t=a.gt(this._time,e)-1;if(t<=0){return}this._time.splice(0,t);this._state.splice(0,t*this.dimension);this._velocity.splice(0,t*this.dimension)};s.curve=function(e){var t=this._time;var r=t.length;var o=a.le(t,e);var s=this._scratch[0];var l=this._state;var u=this._velocity;var f=this.dimension;var c=this.bounds;if(o<0){var v=f-1;for(var h=0;h<f;++h,--v){s[h]=l[v]}}else if(o>=r-1){var v=l.length-1;var p=e-t[r-1];for(var h=0;h<f;++h,--v){s[h]=l[v]+p*u[v]}}else{var v=f*(o+1)-1;var d=t[o];var g=t[o+1];var y=g-d||1;var m=this._scratch[1];var x=this._scratch[2];var b=this._scratch[3];var _=this._scratch[4];var w=true;for(var h=0;h<f;++h,--v){m[h]=l[v];b[h]=u[v]*y;x[h]=l[v+f];_[h]=u[v+f]*y;w=w&&m[h]===x[h]&&b[h]===_[h]&&b[h]===0}if(w){for(var h=0;h<f;++h){s[h]=m[h]}}else{n(m,b,x,_,(e-d)/y,s)}}var T=c[0];var k=c[1];for(var h=0;h<f;++h){s[h]=i(T[h],k[h],s[h])}return s};s.dcurve=function(e){var t=this._time;var r=t.length;var i=a.le(t,e);var o=this._scratch[0];var s=this._state;var l=this._velocity;var u=this.dimension;if(i>=r-1){var f=s.length-1;var c=e-t[r-1];for(var v=0;v<u;++v,--f){o[v]=l[f]}}else{var f=u*(i+1)-1;var h=t[i];var p=t[i+1];var d=p-h||1;var g=this._scratch[1];var y=this._scratch[2];var m=this._scratch[3];var x=this._scratch[4];var b=true;for(var v=0;v<u;++v,--f){g[v]=s[f];m[v]=l[f]*d;y[v]=s[f+u];x[v]=l[f+u]*d;b=b&&g[v]===y[v]&&m[v]===x[v]&&m[v]===0}if(b){for(var v=0;v<u;++v){o[v]=0}}else{n.derivative(g,m,y,x,(e-h)/d,o);for(var v=0;v<u;++v){o[v]/=d}}}return o};s.lastT=function(){var e=this._time;return e[e.length-1]};s.stable=function(){var e=this._velocity;var t=e.length;for(var r=this.dimension-1;r>=0;--r){if(e[--t]){return false}}return true};s.jump=function(e){var t=this.lastT();var r=this.dimension;if(e<t||arguments.length!==r+1){return}var n=this._state;var a=this._velocity;var o=n.length-this.dimension;var s=this.bounds;var l=s[0];var u=s[1];this._time.push(t,e);for(var f=0;f<2;++f){for(var c=0;c<r;++c){n.push(n[o++]);a.push(0)}}this._time.push(e);for(var c=r;c>0;--c){n.push(i(l[c-1],u[c-1],arguments[c]));a.push(0)}};s.push=function(e){var t=this.lastT();var r=this.dimension;if(e<t||arguments.length!==r+1){return}var n=this._state;var a=this._velocity;var o=n.length-this.dimension;var s=e-t;var l=this.bounds;var u=l[0];var f=l[1];var c=s>1e-6?1/s:0;this._time.push(e);for(var v=r;v>0;--v){var h=i(u[v-1],f[v-1],arguments[v]);n.push(h);a.push((h-n[o++])*c)}};s.set=function(e){var t=this.dimension;if(e<this.lastT()||arguments.length!==t+1){return}var r=this._state;var n=this._velocity;var a=this.bounds;var o=a[0];var s=a[1];this._time.push(e);for(var l=t;l>0;--l){r.push(i(o[l-1],s[l-1],arguments[l]));n.push(0)}};s.move=function(e){var t=this.lastT();var r=this.dimension;if(e<=t||arguments.length!==r+1){return}var n=this._state;var a=this._velocity;var o=n.length-this.dimension;var s=this.bounds;var l=s[0];var u=s[1];var f=e-t;var c=f>1e-6?1/f:0;this._time.push(e);for(var v=r;v>0;--v){var h=arguments[v];n.push(i(l[v-1],u[v-1],n[o++]+h));a.push(h*c)}};s.idle=function(e){var t=this.lastT();if(e<t){return}var r=this.dimension;var n=this._state;var a=this._velocity;var o=n.length-r;var s=this.bounds;var l=s[0];var u=s[1];var f=e-t;this._time.push(e);for(var c=r-1;c>=0;--c){n.push(i(l[c],u[c],n[o]+f*a[o]));a.push(0);o+=1}};function l(e){var t=new Array(e);for(var r=0;r<e;++r){t[r]=0}return t}function u(e,t,r){switch(arguments.length){case 0:return new o([0],[0],0);case 1:if(typeof e==="number"){var n=l(e);return new o(n,n,0)}else{return new o(e,l(e.length),0)}case 2:if(typeof t==="number"){var n=l(e.length);return new o(e,n,+t)}else{r=0}case 3:if(e.length!==t.length){throw new Error("state and velocity lengths must match")}return new o(e,t,r)}}},7080:function(e){"use strict";e.exports=y;var t=0;var r=1;function n(e,t,r,n,a,i){this._color=e;this.key=t;this.value=r;this.left=n;this.right=a;this._count=i}function a(e){return new n(e._color,e.key,e.value,e.left,e.right,e._count)}function i(e,t){return new n(e,t.key,t.value,t.left,t.right,t._count)}function o(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function s(e,t){this._compare=e;this.root=t}var l=s.prototype;Object.defineProperty(l,"keys",{get:function(){var e=[];this.forEach((function(t,r){e.push(t)}));return e}});Object.defineProperty(l,"values",{get:function(){var e=[];this.forEach((function(t,r){e.push(r)}));return e}});Object.defineProperty(l,"length",{get:function(){if(this.root){return this.root._count}return 0}});l.insert=function(e,a){var l=this._compare;var u=this.root;var f=[];var c=[];while(u){var v=l(e,u.key);f.push(u);c.push(v);if(v<=0){u=u.left}else{u=u.right}}f.push(new n(t,e,a,null,null,1));for(var h=f.length-2;h>=0;--h){var u=f[h];if(c[h]<=0){f[h]=new n(u._color,u.key,u.value,f[h+1],u.right,u._count+1)}else{f[h]=new n(u._color,u.key,u.value,u.left,f[h+1],u._count+1)}}for(var h=f.length-1;h>1;--h){var p=f[h-1];var u=f[h];if(p._color===r||u._color===r){break}var d=f[h-2];if(d.left===p){if(p.left===u){var g=d.right;if(g&&g._color===t){p._color=r;d.right=i(r,g);d._color=t;h-=1}else{d._color=t;d.left=p.right;p._color=r;p.right=d;f[h-2]=p;f[h-1]=u;o(d);o(p);if(h>=3){var y=f[h-3];if(y.left===d){y.left=p}else{y.right=p}}break}}else{var g=d.right;if(g&&g._color===t){p._color=r;d.right=i(r,g);d._color=t;h-=1}else{p.right=u.left;d._color=t;d.left=u.right;u._color=r;u.left=p;u.right=d;f[h-2]=u;f[h-1]=p;o(d);o(p);o(u);if(h>=3){var y=f[h-3];if(y.left===d){y.left=u}else{y.right=u}}break}}}else{if(p.right===u){var g=d.left;if(g&&g._color===t){p._color=r;d.left=i(r,g);d._color=t;h-=1}else{d._color=t;d.right=p.left;p._color=r;p.left=d;f[h-2]=p;f[h-1]=u;o(d);o(p);if(h>=3){var y=f[h-3];if(y.right===d){y.right=p}else{y.left=p}}break}}else{var g=d.left;if(g&&g._color===t){p._color=r;d.left=i(r,g);d._color=t;h-=1}else{p.left=u.right;d._color=t;d.right=u.left;u._color=r;u.right=p;u.left=d;f[h-2]=u;f[h-1]=p;o(d);o(p);o(u);if(h>=3){var y=f[h-3];if(y.right===d){y.right=u}else{y.left=u}}break}}}}f[0]._color=r;return new s(l,f[0])};function u(e,t){if(t.left){var r=u(e,t.left);if(r){return r}}var r=e(t.key,t.value);if(r){return r}if(t.right){return u(e,t.right)}}function f(e,t,r,n){var a=t(e,n.key);if(a<=0){if(n.left){var i=f(e,t,r,n.left);if(i){return i}}var i=r(n.key,n.value);if(i){return i}}if(n.right){return f(e,t,r,n.right)}}function c(e,t,r,n,a){var i=r(e,a.key);var o=r(t,a.key);var s;if(i<=0){if(a.left){s=c(e,t,r,n,a.left);if(s){return s}}if(o>0){s=n(a.key,a.value);if(s){return s}}}if(o>0&&a.right){return c(e,t,r,n,a.right)}}l.forEach=function e(t,r,n){if(!this.root){return}switch(arguments.length){case 1:return u(t,this.root);break;case 2:return f(r,this._compare,t,this.root);break;case 3:if(this._compare(r,n)>=0){return}return c(r,n,this._compare,t,this.root);break}};Object.defineProperty(l,"begin",{get:function(){var e=[];var t=this.root;while(t){e.push(t);t=t.left}return new v(this,e)}});Object.defineProperty(l,"end",{get:function(){var e=[];var t=this.root;while(t){e.push(t);t=t.right}return new v(this,e)}});l.at=function(e){if(e<0){return new v(this,[])}var t=this.root;var r=[];while(true){r.push(t);if(t.left){if(e<t.left._count){t=t.left;continue}e-=t.left._count}if(!e){return new v(this,r)}e-=1;if(t.right){if(e>=t.right._count){break}t=t.right}else{break}}return new v(this,[])};l.ge=function(e){var t=this._compare;var r=this.root;var n=[];var a=0;while(r){var i=t(e,r.key);n.push(r);if(i<=0){a=n.length}if(i<=0){r=r.left}else{r=r.right}}n.length=a;return new v(this,n)};l.gt=function(e){var t=this._compare;var r=this.root;var n=[];var a=0;while(r){var i=t(e,r.key);n.push(r);if(i<0){a=n.length}if(i<0){r=r.left}else{r=r.right}}n.length=a;return new v(this,n)};l.lt=function(e){var t=this._compare;var r=this.root;var n=[];var a=0;while(r){var i=t(e,r.key);n.push(r);if(i>0){a=n.length}if(i<=0){r=r.left}else{r=r.right}}n.length=a;return new v(this,n)};l.le=function(e){var t=this._compare;var r=this.root;var n=[];var a=0;while(r){var i=t(e,r.key);n.push(r);if(i>=0){a=n.length}if(i<0){r=r.left}else{r=r.right}}n.length=a;return new v(this,n)};l.find=function(e){var t=this._compare;var r=this.root;var n=[];while(r){var a=t(e,r.key);n.push(r);if(a===0){return new v(this,n)}if(a<=0){r=r.left}else{r=r.right}}return new v(this,[])};l.remove=function(e){var t=this.find(e);if(t){return t.remove()}return this};l.get=function(e){var t=this._compare;var r=this.root;while(r){var n=t(e,r.key);if(n===0){return r.value}if(n<=0){r=r.left}else{r=r.right}}return};function v(e,t){this.tree=e;this._stack=t}var h=v.prototype;Object.defineProperty(h,"valid",{get:function(){return this._stack.length>0}});Object.defineProperty(h,"node",{get:function(){if(this._stack.length>0){return this._stack[this._stack.length-1]}return null},enumerable:true});h.clone=function(){return new v(this.tree,this._stack.slice())};function p(e,t){e.key=t.key;e.value=t.value;e.left=t.left;e.right=t.right;e._color=t._color;e._count=t._count}function d(e){var n,s,l,u;for(var f=e.length-1;f>=0;--f){n=e[f];if(f===0){n._color=r;return}s=e[f-1];if(s.left===n){l=s.right;if(l.right&&l.right._color===t){l=s.right=a(l);u=l.right=a(l.right);s.right=l.left;l.left=s;l.right=u;l._color=s._color;n._color=r;s._color=r;u._color=r;o(s);o(l);if(f>1){var c=e[f-2];if(c.left===s){c.left=l}else{c.right=l}}e[f-1]=l;return}else if(l.left&&l.left._color===t){l=s.right=a(l);u=l.left=a(l.left);s.right=u.left;l.left=u.right;u.left=s;u.right=l;u._color=s._color;s._color=r;l._color=r;n._color=r;o(s);o(l);o(u);if(f>1){var c=e[f-2];if(c.left===s){c.left=u}else{c.right=u}}e[f-1]=u;return}if(l._color===r){if(s._color===t){s._color=r;s.right=i(t,l);return}else{s.right=i(t,l);continue}}else{l=a(l);s.right=l.left;l.left=s;l._color=s._color;s._color=t;o(s);o(l);if(f>1){var c=e[f-2];if(c.left===s){c.left=l}else{c.right=l}}e[f-1]=l;e[f]=s;if(f+1<e.length){e[f+1]=n}else{e.push(n)}f=f+2}}else{l=s.left;if(l.left&&l.left._color===t){l=s.left=a(l);u=l.left=a(l.left);s.left=l.right;l.right=s;l.left=u;l._color=s._color;n._color=r;s._color=r;u._color=r;o(s);o(l);if(f>1){var c=e[f-2];if(c.right===s){c.right=l}else{c.left=l}}e[f-1]=l;return}else if(l.right&&l.right._color===t){l=s.left=a(l);u=l.right=a(l.right);s.left=u.right;l.right=u.left;u.right=s;u.left=l;u._color=s._color;s._color=r;l._color=r;n._color=r;o(s);o(l);o(u);if(f>1){var c=e[f-2];if(c.right===s){c.right=u}else{c.left=u}}e[f-1]=u;return}if(l._color===r){if(s._color===t){s._color=r;s.left=i(t,l);return}else{s.left=i(t,l);continue}}else{l=a(l);s.left=l.right;l.right=s;l._color=s._color;s._color=t;o(s);o(l);if(f>1){var c=e[f-2];if(c.right===s){c.right=l}else{c.left=l}}e[f-1]=l;e[f]=s;if(f+1<e.length){e[f+1]=n}else{e.push(n)}f=f+2}}}}h.remove=function(){var e=this._stack;if(e.length===0){return this.tree}var a=new Array(e.length);var i=e[e.length-1];a[a.length-1]=new n(i._color,i.key,i.value,i.left,i.right,i._count);for(var o=e.length-2;o>=0;--o){var i=e[o];if(i.left===e[o+1]){a[o]=new n(i._color,i.key,i.value,a[o+1],i.right,i._count)}else{a[o]=new n(i._color,i.key,i.value,i.left,a[o+1],i._count)}}i=a[a.length-1];if(i.left&&i.right){var l=a.length;i=i.left;while(i.right){a.push(i);i=i.right}var u=a[l-1];a.push(new n(i._color,u.key,u.value,i.left,i.right,i._count));a[l-1].key=i.key;a[l-1].value=i.value;for(var o=a.length-2;o>=l;--o){i=a[o];a[o]=new n(i._color,i.key,i.value,i.left,a[o+1],i._count)}a[l-1].left=a[l]}i=a[a.length-1];if(i._color===t){var f=a[a.length-2];if(f.left===i){f.left=null}else if(f.right===i){f.right=null}a.pop();for(var o=0;o<a.length;++o){a[o]._count--}return new s(this.tree._compare,a[0])}else{if(i.left||i.right){if(i.left){p(i,i.left)}else if(i.right){p(i,i.right)}i._color=r;for(var o=0;o<a.length-1;++o){a[o]._count--}return new s(this.tree._compare,a[0])}else if(a.length===1){return new s(this.tree._compare,null)}else{for(var o=0;o<a.length;++o){a[o]._count--}var c=a[a.length-2];d(a);if(c.left===i){c.left=null}else{c.right=null}}}return new s(this.tree._compare,a[0])};Object.defineProperty(h,"key",{get:function(){if(this._stack.length>0){return this._stack[this._stack.length-1].key}return},enumerable:true});Object.defineProperty(h,"value",{get:function(){if(this._stack.length>0){return this._stack[this._stack.length-1].value}return},enumerable:true});Object.defineProperty(h,"index",{get:function(){var e=0;var t=this._stack;if(t.length===0){var r=this.tree.root;if(r){return r._count}return 0}else if(t[t.length-1].left){e=t[t.length-1].left._count}for(var n=t.length-2;n>=0;--n){if(t[n+1]===t[n].right){++e;if(t[n].left){e+=t[n].left._count}}}return e},enumerable:true});h.next=function(){var e=this._stack;if(e.length===0){return}var t=e[e.length-1];if(t.right){t=t.right;while(t){e.push(t);t=t.left}}else{e.pop();while(e.length>0&&e[e.length-1].right===t){t=e[e.length-1];e.pop()}}};Object.defineProperty(h,"hasNext",{get:function(){var e=this._stack;if(e.length===0){return false}if(e[e.length-1].right){return true}for(var t=e.length-1;t>0;--t){if(e[t-1].left===e[t]){return true}}return false}});h.update=function(e){var t=this._stack;if(t.length===0){throw new Error("Can't update empty node!")}var r=new Array(t.length);var a=t[t.length-1];r[r.length-1]=new n(a._color,a.key,e,a.left,a.right,a._count);for(var i=t.length-2;i>=0;--i){a=t[i];if(a.left===t[i+1]){r[i]=new n(a._color,a.key,a.value,r[i+1],a.right,a._count)}else{r[i]=new n(a._color,a.key,a.value,a.left,r[i+1],a._count)}}return new s(this.tree._compare,r[0])};h.prev=function(){var e=this._stack;if(e.length===0){return}var t=e[e.length-1];if(t.left){t=t.left;while(t){e.push(t);t=t.right}}else{e.pop();while(e.length>0&&e[e.length-1].left===t){t=e[e.length-1];e.pop()}}};Object.defineProperty(h,"hasPrev",{get:function(){var e=this._stack;if(e.length===0){return false}if(e[e.length-1].left){return true}for(var t=e.length-1;t>0;--t){if(e[t-1].right===e[t]){return true}}return false}});function g(e,t){if(e<t){return-1}if(e>t){return 1}return 0}function y(e){return new s(e||g,null)}},7453:function(e,t,r){"use strict";e.exports=_;var n=r(9557);var a=r(1681);var i=r(1011);var o=r(2864);var s=r(8468);var l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function u(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];return e}function f(e){this.gl=e;this.pixelRatio=1;this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.autoTicks=true;this.tickSpacing=[1,1,1];this.tickEnable=[true,true,true];this.tickFont=["sans-serif","sans-serif","sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickAlign=["auto","auto","auto"];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[10,10,10];this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]};this.labels=["x","y","z"];this.labelEnable=[true,true,true];this.labelFont="sans-serif";this.labelSize=[20,20,20];this.labelAngle=[0,0,0];this.labelAlign=["auto","auto","auto"];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[10,10,10];this.lineEnable=[true,true,true];this.lineMirror=[false,false,false];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[true,true,true];this.lineTickMirror=[false,false,false];this.lineTickLength=[0,0,0];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[true,true,true];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[true,true,true];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[false,false,false];this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._firstInit=true;this._text=null;this._lines=null;this._background=i(e)}var c=f.prototype;c.update=function(e){e=e||{};function t(t,r,n){if(n in e){var a=e[n];var i=this[n];var o;if(t?Array.isArray(a)&&Array.isArray(a[0]):Array.isArray(a)){this[n]=o=[r(a[0]),r(a[1]),r(a[2])]}else{this[n]=o=[r(a),r(a),r(a)]}for(var s=0;s<3;++s){if(o[s]!==i[s]){return true}}}return false}var r=t.bind(this,false,Number);var i=t.bind(this,false,Boolean);var o=t.bind(this,false,String);var l=t.bind(this,true,(function(e){if(Array.isArray(e)){if(e.length===3){return[+e[0],+e[1],+e[2],1]}else if(e.length===4){return[+e[0],+e[1],+e[2],+e[3]]}}return[0,0,0,1]}));var u;var f=false;var c=false;if("bounds"in e){var v=e.bounds;e:for(var h=0;h<2;++h){for(var p=0;p<3;++p){if(v[h][p]!==this.bounds[h][p]){c=true}this.bounds[h][p]=v[h][p]}}}if("ticks"in e){u=e.ticks;f=true;this.autoTicks=false;for(var h=0;h<3;++h){this.tickSpacing[h]=0}}else if(r("tickSpacing")){this.autoTicks=true;c=true}if(this._firstInit){if(!("ticks"in e||"tickSpacing"in e)){this.autoTicks=true}c=true;f=true;this._firstInit=false}if(c&&this.autoTicks){u=s.create(this.bounds,this.tickSpacing);f=true}if(f){for(var h=0;h<3;++h){u[h].sort((function(e,t){return e.x-t.x}))}if(s.equal(u,this.ticks)){f=false}else{this.ticks=u}}i("tickEnable");if(o("tickFont")){f=true}r("tickSize");r("tickAngle");r("tickPad");l("tickColor");var d=o("labels");if(o("labelFont")){d=true}i("labelEnable");r("labelSize");r("labelPad");l("labelColor");i("lineEnable");i("lineMirror");r("lineWidth");l("lineColor");i("lineTickEnable");i("lineTickMirror");r("lineTickLength");r("lineTickWidth");l("lineTickColor");i("gridEnable");r("gridWidth");l("gridColor");i("zeroEnable");l("zeroLineColor");r("zeroLineWidth");i("backgroundEnable");l("backgroundColor");if(!this._text){this._text=n(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont)}else if(this._text&&(d||f)){this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont)}if(this._lines&&f){this._lines.dispose();this._lines=null}if(!this._lines){this._lines=a(this.gl,this.bounds,this.ticks)}};function v(){this.primalOffset=[0,0,0];this.primalMinor=[0,0,0];this.mirrorOffset=[0,0,0];this.mirrorMinor=[0,0,0]}var h=[new v,new v,new v];function p(e,t,r,n,a){var i=e.primalOffset;var o=e.primalMinor;var s=e.mirrorOffset;var l=e.mirrorMinor;var u=n[t];for(var f=0;f<3;++f){if(t===f){continue}var c=i,v=s,h=o,p=l;if(u&1<<f){c=s;v=i;h=l;p=o}c[f]=r[0][f];v[f]=r[1][f];if(a[f]>0){h[f]=-1;p[f]=0}else{h[f]=0;p[f]=+1}}}var d=[0,0,0];var g={model:l,view:l,projection:l,_ortho:false};c.isOpaque=function(){return true};c.isTransparent=function(){return false};c.drawTransparent=function(e){};var y=0;var m=[0,0,0];var x=[0,0,0];var b=[0,0,0];c.draw=function(e){e=e||g;var t=this.gl;var r=e.model||l;var n=e.view||l;var a=e.projection||l;var i=this.bounds;var s=e._ortho||false;var f=o(r,n,a,i,s);var c=f.cubeEdges;var v=f.axis;var _=n[12];var w=n[13];var T=n[14];var k=n[15];var A=s?2:1;var M=A*this.pixelRatio*(a[3]*_+a[7]*w+a[11]*T+a[15]*k)/t.drawingBufferHeight;for(var S=0;S<3;++S){this.lastCubeProps.cubeEdges[S]=c[S];this.lastCubeProps.axis[S]=v[S]}var E=h;for(var S=0;S<3;++S){p(h[S],S,this.bounds,c,v)}var t=this.gl;var L=d;for(var S=0;S<3;++S){if(this.backgroundEnable[S]){L[S]=v[S]}else{L[S]=0}}this._background.draw(r,n,a,i,L,this.backgroundColor);this._lines.bind(r,n,a,this);for(var S=0;S<3;++S){var C=[0,0,0];if(v[S]>0){C[S]=i[1][S]}else{C[S]=i[0][S]}for(var I=0;I<2;++I){var P=(S+1+I)%3;var O=(S+1+(I^1))%3;if(this.gridEnable[P]){this._lines.drawGrid(P,O,this.bounds,C,this.gridColor[P],this.gridWidth[P]*this.pixelRatio)}}for(var I=0;I<2;++I){var P=(S+1+I)%3;var O=(S+1+(I^1))%3;if(this.zeroEnable[O]){if(Math.min(i[0][O],i[1][O])<=0&&Math.max(i[0][O],i[1][O])>=0){this._lines.drawZero(P,O,this.bounds,C,this.zeroLineColor[O],this.zeroLineWidth[O]*this.pixelRatio)}}}}for(var S=0;S<3;++S){if(this.lineEnable[S]){this._lines.drawAxisLine(S,this.bounds,E[S].primalOffset,this.lineColor[S],this.lineWidth[S]*this.pixelRatio)}if(this.lineMirror[S]){this._lines.drawAxisLine(S,this.bounds,E[S].mirrorOffset,this.lineColor[S],this.lineWidth[S]*this.pixelRatio)}var D=u(m,E[S].primalMinor);var z=u(x,E[S].mirrorMinor);var R=this.lineTickLength;for(var I=0;I<3;++I){var F=M/r[5*I];D[I]*=R[I]*F;z[I]*=R[I]*F}if(this.lineTickEnable[S]){this._lines.drawAxisTicks(S,E[S].primalOffset,D,this.lineTickColor[S],this.lineTickWidth[S]*this.pixelRatio)}if(this.lineTickMirror[S]){this._lines.drawAxisTicks(S,E[S].mirrorOffset,z,this.lineTickColor[S],this.lineTickWidth[S]*this.pixelRatio)}}this._lines.unbind();this._text.bind(r,n,a,this.pixelRatio);var B;var N=.5;var j;var U;function V(e){U=[0,0,0];U[e]=1}function H(e,t,r){var n=(e+1)%3;var a=(e+2)%3;var i=t[n];var o=t[a];var s=r[n];var l=r[a];if(i>0&&l>0){V(n);return}else if(i>0&&l<0){V(n);return}else if(i<0&&l>0){V(n);return}else if(i<0&&l<0){V(n);return}else if(o>0&&s>0){V(a);return}else if(o>0&&s<0){V(a);return}else if(o<0&&s>0){V(a);return}else if(o<0&&s<0){V(a);return}}for(var S=0;S<3;++S){var q=E[S].primalMinor;var G=E[S].mirrorMinor;var Z=u(b,E[S].primalOffset);for(var I=0;I<3;++I){if(this.lineTickEnable[S]){Z[I]+=M*q[I]*Math.max(this.lineTickLength[I],0)/r[5*I]}}var Y=[0,0,0];Y[S]=1;if(this.tickEnable[S]){if(this.tickAngle[S]===-3600){this.tickAngle[S]=0;this.tickAlign[S]="auto"}else{this.tickAlign[S]=-1}j=1;B=[this.tickAlign[S],N,j];if(B[0]==="auto")B[0]=y;else B[0]=parseInt(""+B[0]);U=[0,0,0];H(S,q,G);for(var I=0;I<3;++I){Z[I]+=M*q[I]*this.tickPad[I]/r[5*I]}this._text.drawTicks(S,this.tickSize[S],this.tickAngle[S],Z,this.tickColor[S],Y,U,B)}if(this.labelEnable[S]){j=0;U=[0,0,0];if(this.labels[S].length>4){V(S);j=1}B=[this.labelAlign[S],N,j];if(B[0]==="auto")B[0]=y;else B[0]=parseInt(""+B[0]);for(var I=0;I<3;++I){Z[I]+=M*q[I]*this.labelPad[I]/r[5*I]}Z[S]+=.5*(i[0][S]+i[1][S]);this._text.drawLabel(S,this.labelSize[S],this.labelAngle[S],Z,this.labelColor[S],[0,0,0],U,B)}}this._text.unbind()};c.dispose=function(){this._text.dispose();this._lines.dispose();this._background.dispose();this._lines=null;this._text=null;this._background=null;this.gl=null};function _(e,t){var r=new f(e);r.update(t);return r}},1011:function(e,t,r){"use strict";e.exports=l;var n=r(5827);var a=r(2944);var i=r(1943).bg;function o(e,t,r,n){this.gl=e;this.buffer=t;this.vao=r;this.shader=n}var s=o.prototype;s.draw=function(e,t,r,n,a,i){var o=false;for(var s=0;s<3;++s){o=o||a[s]}if(!o){return}var l=this.gl;l.enable(l.POLYGON_OFFSET_FILL);l.polygonOffset(1,2);this.shader.bind();this.shader.uniforms={model:e,view:t,projection:r,bounds:n,enable:a,colors:i};this.vao.bind();this.vao.draw(this.gl.TRIANGLES,36);this.vao.unbind();l.disable(l.POLYGON_OFFSET_FILL)};s.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()};function l(e){var t=[];var r=[];var s=0;for(var l=0;l<3;++l){var u=(l+1)%3;var f=(l+2)%3;var c=[0,0,0];var v=[0,0,0];for(var h=-1;h<=1;h+=2){r.push(s,s+2,s+1,s+1,s+2,s+3);c[l]=h;v[l]=h;for(var p=-1;p<=1;p+=2){c[u]=p;for(var d=-1;d<=1;d+=2){c[f]=d;t.push(c[0],c[1],c[2],v[0],v[1],v[2]);s+=1}}var g=u;u=f;f=g}}var y=n(e,new Float32Array(t));var m=n(e,new Uint16Array(r),e.ELEMENT_ARRAY_BUFFER);var x=a(e,[{buffer:y,type:e.FLOAT,size:3,offset:0,stride:24},{buffer:y,type:e.FLOAT,size:3,offset:12,stride:24}],m);var b=i(e);b.attributes.position.location=0;b.attributes.normal.location=1;return new o(e,y,x,b)}},2864:function(e,t,r){"use strict";e.exports=m;var n=r(2288);var a=r(104);var i=r(4670);var o=r(417);var s=new Array(16);var l=new Array(8);var u=new Array(8);var f=new Array(3);var c=[0,0,0];(function(){for(var e=0;e<8;++e){l[e]=[1,1,1,1];u[e]=[1,1,1]}})();function v(e,t,r){for(var n=0;n<4;++n){e[n]=r[12+n];for(var a=0;a<3;++a){e[n]+=t[a]*r[4*a+n]}}}var h=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function p(e){for(var t=0;t<h.length;++t){e=i.positive(e,h[t]);if(e.length<3){return 0}}var r=e[0];var n=r[0]/r[3];var a=r[1]/r[3];var o=0;for(var t=1;t+1<e.length;++t){var s=e[t];var l=e[t+1];var u=s[0]/s[3];var f=s[1]/s[3];var c=l[0]/l[3];var v=l[1]/l[3];var p=u-n;var d=f-a;var g=c-n;var y=v-a;o+=Math.abs(p*y-d*g)}return o}var d=[1,1,1];var g=[0,0,0];var y={cubeEdges:d,axis:g};function m(e,t,r,i,h){a(s,t,e);a(s,r,s);var m=0;for(var x=0;x<2;++x){f[2]=i[x][2];for(var b=0;b<2;++b){f[1]=i[b][1];for(var _=0;_<2;++_){f[0]=i[_][0];v(l[m],f,s);m+=1}}}var w=-1;for(var x=0;x<8;++x){var T=l[x][3];for(var k=0;k<3;++k){u[x][k]=l[x][k]/T}if(h)u[x][2]*=-1;if(T<0){if(w<0){w=x}else if(u[x][2]<u[w][2]){w=x}}}if(w<0){w=0;for(var A=0;A<3;++A){var M=(A+2)%3;var S=(A+1)%3;var E=-1;var L=-1;for(var C=0;C<2;++C){var I=C<<A;var P=I+(C<<M)+(1-C<<S);var O=I+(1-C<<M)+(C<<S);if(o(u[I],u[P],u[O],c)<0){continue}if(C){E=1}else{L=1}}if(E<0||L<0){if(L>E){w|=1<<A}continue}for(var C=0;C<2;++C){var I=C<<A;var P=I+(C<<M)+(1-C<<S);var O=I+(1-C<<M)+(C<<S);var D=p([l[I],l[P],l[O],l[I+(1<<M)+(1<<S)]]);if(C){E=D}else{L=D}}if(L>E){w|=1<<A;continue}}}var z=7^w;var R=-1;for(var x=0;x<8;++x){if(x===w||x===z){continue}if(R<0){R=x}else if(u[R][1]>u[x][1]){R=x}}var F=-1;for(var x=0;x<3;++x){var B=R^1<<x;if(B===w||B===z){continue}if(F<0){F=B}var S=u[B];if(S[0]<u[F][0]){F=B}}var N=-1;for(var x=0;x<3;++x){var B=R^1<<x;if(B===w||B===z||B===F){continue}if(N<0){N=B}var S=u[B];if(S[0]>u[N][0]){N=B}}var j=d;j[0]=j[1]=j[2]=0;j[n.log2(F^R)]=R&F;j[n.log2(R^N)]=R&N;var U=N^7;if(U===w||U===z){U=F^7;j[n.log2(N^U)]=U&N}else{j[n.log2(F^U)]=U&F}var V=g;var H=w;for(var A=0;A<3;++A){if(H&1<<A){V[A]=-1}else{V[A]=1}}return y}},1681:function(e,t,r){"use strict";e.exports=d;var n=r(5827);var a=r(2944);var i=r(1943).j;var o=[0,0,0];var s=[0,0,0];var l=[0,0,0];var u=[0,0,0];var f=[1,1];function c(e){e[0]=e[1]=e[2]=0;return e}function v(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];return e}function h(e,t,r,n,a,i,o,s){this.gl=e;this.vertBuffer=t;this.vao=r;this.shader=n;this.tickCount=a;this.tickOffset=i;this.gridCount=o;this.gridOffset=s}var p=h.prototype;p.bind=function(e,t,r){this.shader.bind();this.shader.uniforms.model=e;this.shader.uniforms.view=t;this.shader.uniforms.projection=r;f[0]=this.gl.drawingBufferWidth;f[1]=this.gl.drawingBufferHeight;this.shader.uniforms.screenShape=f;this.vao.bind()};p.unbind=function(){this.vao.unbind()};p.drawAxisLine=function(e,t,r,n,a){var i=c(s);this.shader.uniforms.majorAxis=s;i[e]=t[1][e]-t[0][e];this.shader.uniforms.minorAxis=i;var o=v(u,r);o[e]+=t[0][e];this.shader.uniforms.offset=o;this.shader.uniforms.lineWidth=a;this.shader.uniforms.color=n;var f=c(l);f[(e+2)%3]=1;this.shader.uniforms.screenAxis=f;this.vao.draw(this.gl.TRIANGLES,6);var f=c(l);f[(e+1)%3]=1;this.shader.uniforms.screenAxis=f;this.vao.draw(this.gl.TRIANGLES,6)};p.drawAxisTicks=function(e,t,r,n,a){if(!this.tickCount[e]){return}var i=c(o);i[e]=1;this.shader.uniforms.majorAxis=i;this.shader.uniforms.offset=t;this.shader.uniforms.minorAxis=r;this.shader.uniforms.color=n;this.shader.uniforms.lineWidth=a;var s=c(l);s[e]=1;this.shader.uniforms.screenAxis=s;this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e])};p.drawGrid=function(e,t,r,n,a,i){if(!this.gridCount[e]){return}var f=c(s);f[t]=r[1][t]-r[0][t];this.shader.uniforms.minorAxis=f;var h=v(u,n);h[t]+=r[0][t];this.shader.uniforms.offset=h;var p=c(o);p[e]=1;this.shader.uniforms.majorAxis=p;var d=c(l);d[e]=1;this.shader.uniforms.screenAxis=d;this.shader.uniforms.lineWidth=i;this.shader.uniforms.color=a;this.vao.draw(this.gl.TRIANGLES,this.gridCount[e],this.gridOffset[e])};p.drawZero=function(e,t,r,n,a,i){var o=c(s);this.shader.uniforms.majorAxis=o;o[e]=r[1][e]-r[0][e];this.shader.uniforms.minorAxis=o;var f=v(u,n);f[e]+=r[0][e];this.shader.uniforms.offset=f;var h=c(l);h[t]=1;this.shader.uniforms.screenAxis=h;this.shader.uniforms.lineWidth=i;this.shader.uniforms.color=a;this.vao.draw(this.gl.TRIANGLES,6)};p.dispose=function(){this.vao.dispose();this.vertBuffer.dispose();this.shader.dispose()};function d(e,t,r){var o=[];var s=[0,0,0];var l=[0,0,0];var u=[0,0,0];var f=[0,0,0];o.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var c=0;c<3;++c){var v=o.length/3|0;for(var p=0;p<r[c].length;++p){var d=+r[c][p].x;o.push(d,0,1,d,1,1,d,0,-1,d,0,-1,d,1,1,d,1,-1)}var g=o.length/3|0;s[c]=v;l[c]=g-v;var v=o.length/3|0;for(var y=0;y<r[c].length;++y){var d=+r[c][y].x;o.push(d,0,1,d,1,1,d,0,-1,d,0,-1,d,1,1,d,1,-1)}var g=o.length/3|0;u[c]=v;f[c]=g-v}var m=n(e,new Float32Array(o));var x=a(e,[{buffer:m,type:e.FLOAT,size:3,stride:0,offset:0}]);var b=i(e);b.attributes.position.location=0;return new h(e,m,x,b,l,s,f,u)}},1943:function(e,t,r){"use strict";var n=r(6832);var a=r(5158);var i=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]);var o=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);t.j=function(e){return a(e,i,o,null,[{name:"position",type:"vec3"}])};var s=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]);var l=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);t.f=function(e){return a(e,s,l,null,[{name:"position",type:"vec3"}])};var u=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]);var f=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);t.bg=function(e){return a(e,u,f,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(e,t,r){"use strict";e.exports=d;var a=r(5827);var i=r(2944);var o=r(875);var s=r(1943).f;var l=window||n.global||{};var u=l.__TEXT_CACHE||{};l.__TEXT_CACHE={};var f=3;function c(e,t,r,n){this.gl=e;this.shader=t;this.buffer=r;this.vao=n;this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var v=c.prototype;var h=[0,0];v.bind=function(e,t,r,n){this.vao.bind();this.shader.bind();var a=this.shader.uniforms;a.model=e;a.view=t;a.projection=r;a.pixelScale=n;h[0]=this.gl.drawingBufferWidth;h[1]=this.gl.drawingBufferHeight;this.shader.uniforms.resolution=h};v.unbind=function(){this.vao.unbind()};v.update=function(e,t,r,n,a){var i=[];function o(e,t,r,n,a,o){var s=u[r];if(!s){s=u[r]={}}var l=s[t];if(!l){l=s[t]=p(t,{triangles:true,font:r,textAlign:"center",textBaseline:"middle",lineSpacing:a,styletags:o})}var f=(n||12)/12;var c=l.positions;var v=l.cells;for(var h=0,d=v.length;h<d;++h){var g=v[h];for(var y=2;y>=0;--y){var m=c[g[y]];i.push(f*m[0],-f*m[1],e)}}}var s=[0,0,0];var l=[0,0,0];var c=[0,0,0];var v=[0,0,0];var h=1.25;var d={breaklines:true,bolds:true,italics:true,subscripts:true,superscripts:true};for(var g=0;g<3;++g){c[g]=i.length/f|0;o(.5*(e[0][g]+e[1][g]),t[g],r[g],12,h,d);v[g]=(i.length/f|0)-c[g];s[g]=i.length/f|0;for(var y=0;y<n[g].length;++y){if(!n[g][y].text){continue}o(n[g][y].x,n[g][y].text,n[g][y].font||a,n[g][y].fontSize||12,h,d)}l[g]=(i.length/f|0)-s[g]}this.buffer.update(i);this.tickOffset=s;this.tickCount=l;this.labelOffset=c;this.labelCount=v};v.drawTicks=function(e,t,r,n,a,i,o,s){if(!this.tickCount[e]){return}this.shader.uniforms.axis=i;this.shader.uniforms.color=a;this.shader.uniforms.angle=r;this.shader.uniforms.scale=t;this.shader.uniforms.offset=n;this.shader.uniforms.alignDir=o;this.shader.uniforms.alignOpt=s;this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e])};v.drawLabel=function(e,t,r,n,a,i,o,s){if(!this.labelCount[e]){return}this.shader.uniforms.axis=i;this.shader.uniforms.color=a;this.shader.uniforms.angle=r;this.shader.uniforms.scale=t;this.shader.uniforms.offset=n;this.shader.uniforms.alignDir=o;this.shader.uniforms.alignOpt=s;this.vao.draw(this.gl.TRIANGLES,this.labelCount[e],this.labelOffset[e])};v.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()};function p(e,t){try{return o(e,t)}catch(r){console.warn('error vectorizing text:"'+e+'" error:',r);return{cells:[],positions:[]}}}function d(e,t,r,n,o,l){var u=a(e);var f=i(e,[{buffer:u,size:3}]);var v=s(e);v.attributes.position.location=0;var h=new c(e,v,u,f);h.update(t,r,n,o,l);return h}},8468:function(e,t){"use strict";t.create=n;t.equal=a;function r(e,t){var r=e+"";var n=r.indexOf(".");var a=0;if(n>=0){a=r.length-n-1}var i=Math.pow(10,a);var o=Math.round(e*t*i);var s=o+"";if(s.indexOf("e")>=0){return s}var l=o/i,u=o%i;if(o<0){l=-Math.ceil(l)|0;u=-u|0}else{l=Math.floor(l)|0;u=u|0}var f=""+l;if(o<0){f="-"+f}if(a){var c=""+u;while(c.length<a){c="0"+c}return f+"."+c}else{return f}}function n(e,t){var n=[];for(var a=0;a<3;++a){var i=[];var o=.5*(e[0][a]+e[1][a]);for(var s=0;s*t[a]<=e[1][a];++s){i.push({x:s*t[a],text:r(t[a],s)})}for(var s=-1;s*t[a]>=e[0][a];--s){i.push({x:s*t[a],text:r(t[a],s)})}n.push(i)}return n}function a(e,t){for(var r=0;r<3;++r){if(e[r].length!==t[r].length){return false}for(var n=0;n<e[r].length;++n){var a=e[r][n];var i=t[r][n];if(a.x!==i.x||a.text!==i.text||a.font!==i.font||a.fontColor!==i.fontColor||a.fontSize!==i.fontSize||a.dx!==i.dx||a.dy!==i.dy){return false}}}return true}},2771:function(e,t,r){"use strict";e.exports=y;var n=r(5795);var a=r(4670);var i=r(2864);var o=r(104);var s=r(2142);var l=r(6342);var u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);var f=new Float32Array(16);function c(e,t,r){this.lo=e;this.hi=t;this.pixelsPerDataUnit=r}var v=[0,0,0,1];var h=[0,0,0,1];function p(e,t,r,n,a){for(var i=0;i<3;++i){var o=v;var s=h;for(var u=0;u<3;++u){s[u]=o[u]=r[u]}s[3]=o[3]=1;s[i]+=1;l(s,s,t);if(s[3]<0){e[i]=Infinity}o[i]-=1;l(o,o,t);if(o[3]<0){e[i]=Infinity}var f=(o[0]/o[3]-s[0]/s[3])*n;var c=(o[1]/o[3]-s[1]/s[3])*a;e[i]=.25*Math.sqrt(f*f+c*c)}return e}var d=[new c(Infinity,-Infinity,Infinity),new c(Infinity,-Infinity,Infinity),new c(Infinity,-Infinity,Infinity)];var g=[0,0,0];function y(e,t,r,l,c){var v=t.model||u;var h=t.view||u;var y=t.projection||u;var m=t._ortho||false;var x=e.bounds;var c=c||i(v,h,y,x,m);var b=c.axis;o(f,h,v);o(f,y,f);var _=d;for(var w=0;w<3;++w){_[w].lo=Infinity;_[w].hi=-Infinity;_[w].pixelsPerDataUnit=Infinity}var T=n(s(f,f));s(f,f);for(var k=0;k<3;++k){var A=(k+1)%3;var M=(k+2)%3;var S=g;e:for(var w=0;w<2;++w){var E=[];if(b[k]<0===!!w){continue}S[k]=x[w][k];for(var L=0;L<2;++L){S[A]=x[L^w][A];for(var C=0;C<2;++C){S[M]=x[C^L^w][M];E.push(S.slice())}}var I=m?5:4;for(var L=I;L===I;++L){if(E.length===0){continue e}E=a.positive(E,T[L])}for(var L=0;L<E.length;++L){var M=E[L];var P=p(g,f,M,r,l);for(var C=0;C<3;++C){_[C].lo=Math.min(_[C].lo,M[C]);_[C].hi=Math.max(_[C].hi,M[C]);if(C!==k){_[C].pixelsPerDataUnit=Math.min(_[C].pixelsPerDataUnit,Math.abs(P[C]))}}}}}return _}},5827:function(e,t,r){"use strict";var n=r(5306);var a=r(7498);var i=r(5050);var o=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function s(e,t,r,n,a){this.gl=e;this.type=t;this.handle=r;this.length=n;this.usage=a}var l=s.prototype;l.bind=function(){this.gl.bindBuffer(this.type,this.handle)};l.unbind=function(){this.gl.bindBuffer(this.type,null)};l.dispose=function(){this.gl.deleteBuffer(this.handle)};function u(e,t,r,n,a,i){var o=a.length*a.BYTES_PER_ELEMENT;if(i<0){e.bufferData(t,a,n);return o}if(o+i>r){throw new Error("gl-buffer: If resizing buffer, must not specify offset")}e.bufferSubData(t,i,a);return r}function f(e,t){var r=n.malloc(e.length,t);var a=e.length;for(var i=0;i<a;++i){r[i]=e[i]}return r}function c(e,t){var r=1;for(var n=t.length-1;n>=0;--n){if(t[n]!==r){return false}r*=e[n]}return true}l.update=function(e,t){if(typeof t!=="number"){t=-1}this.bind();if(typeof e==="object"&&typeof e.shape!=="undefined"){var r=e.dtype;if(o.indexOf(r)<0){r="float32"}if(this.type===this.gl.ELEMENT_ARRAY_BUFFER){var s=gl.getExtension("OES_element_index_uint");if(s&&r!=="uint16"){r="uint32"}else{r="uint16"}}if(r===e.dtype&&c(e.shape,e.stride)){if(e.offset===0&&e.data.length===e.shape[0]){this.length=u(this.gl,this.type,this.length,this.usage,e.data,t)}else{this.length=u(this.gl,this.type,this.length,this.usage,e.data.subarray(e.offset,e.shape[0]),t)}}else{var l=n.malloc(e.size,r);var v=i(l,e.shape);a.assign(v,e);if(t<0){this.length=u(this.gl,this.type,this.length,this.usage,l,t)}else{this.length=u(this.gl,this.type,this.length,this.usage,l.subarray(0,e.size),t)}n.free(l)}}else if(Array.isArray(e)){var h;if(this.type===this.gl.ELEMENT_ARRAY_BUFFER){h=f(e,"uint16")}else{h=f(e,"float32")}if(t<0){this.length=u(this.gl,this.type,this.length,this.usage,h,t)}else{this.length=u(this.gl,this.type,this.length,this.usage,h.subarray(0,e.length),t)}n.free(h)}else if(typeof e==="object"&&typeof e.length==="number"){this.length=u(this.gl,this.type,this.length,this.usage,e,t)}else if(typeof e==="number"||e===undefined){if(t>=0){throw new Error("gl-buffer: Cannot specify offset when resizing buffer")}e=e|0;if(e<=0){e=1}this.gl.bufferData(this.type,e|0,this.usage);this.length=e}else{throw new Error("gl-buffer: Invalid data type")}};function v(e,t,r,n){r=r||e.ARRAY_BUFFER;n=n||e.DYNAMIC_DRAW;if(r!==e.ARRAY_BUFFER&&r!==e.ELEMENT_ARRAY_BUFFER){throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER")}if(n!==e.DYNAMIC_DRAW&&n!==e.STATIC_DRAW&&n!==e.STREAM_DRAW){throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW")}var a=e.createBuffer();var i=new s(e,r,a,0,n);i.update(t);return i}e.exports=v},1140:function(e,t,r){"use strict";var n=r(2858);e.exports=function(e,t){var r=e.positions;var a=e.vectors;var i={positions:[],vertexIntensity:[],vertexIntensityBounds:e.vertexIntensityBounds,vectors:[],cells:[],coneOffset:e.coneOffset,colormap:e.colormap};if(e.positions.length===0){if(t){t[0]=[0,0,0];t[1]=[0,0,0]}return i}var o=0;var s=Infinity,l=-Infinity;var u=Infinity,f=-Infinity;var c=Infinity,v=-Infinity;var h=null;var p=null;var d=[];var g=Infinity;var y=false;for(var m=0;m<r.length;m++){var x=r[m];s=Math.min(x[0],s);l=Math.max(x[0],l);u=Math.min(x[1],u);f=Math.max(x[1],f);c=Math.min(x[2],c);v=Math.max(x[2],v);var b=a[m];if(n.length(b)>o){o=n.length(b)}if(m){var _=2*n.distance(h,x)/(n.length(p)+n.length(b));if(_){g=Math.min(g,_);y=false}else{y=true}}if(!y){h=x;p=b}d.push(b)}var w=[s,u,c];var T=[l,f,v];if(t){t[0]=w;t[1]=T}if(o===0){o=1}var k=1/o;if(!isFinite(g)){g=1}i.vectorScale=g;var A=e.coneSize||.5;if(e.absoluteConeSize){A=e.absoluteConeSize*k}i.coneScale=A;for(var m=0,M=0;m<r.length;m++){var x=r[m];var S=x[0],E=x[1],L=x[2];var C=d[m];var I=n.length(C)*k;for(var P=0,O=8;P<O;P++){i.positions.push([S,E,L,M++]);i.positions.push([S,E,L,M++]);i.positions.push([S,E,L,M++]);i.positions.push([S,E,L,M++]);i.positions.push([S,E,L,M++]);i.positions.push([S,E,L,M++]);i.vectors.push(C);i.vectors.push(C);i.vectors.push(C);i.vectors.push(C);i.vectors.push(C);i.vectors.push(C);i.vertexIntensity.push(I,I,I);i.vertexIntensity.push(I,I,I);var D=i.positions.length;i.cells.push([D-6,D-5,D-4],[D-3,D-2,D-1])}}return i};var a=r(7234);e.exports.createMesh=r(5028);e.exports.createConeMesh=function(t,r){return e.exports.createMesh(t,r,{shaders:a,traceType:"cone"})}},5028:function(e,t,r){"use strict";var n=r(5158);var a=r(5827);var i=r(2944);var o=r(8931);var s=r(104);var l=r(7437);var u=r(5050);var f=r(9156);var c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(e,t,r,n,a,i,o,s,l,u,f){this.gl=e;this.pixelRatio=1;this.cells=[];this.positions=[];this.intensity=[];this.texture=t;this.dirty=true;this.triShader=r;this.pickShader=n;this.trianglePositions=a;this.triangleVectors=i;this.triangleColors=s;this.triangleUVs=l;this.triangleIds=o;this.triangleVAO=u;this.triangleCount=0;this.pickId=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1e5,1e5,0];this.ambientLight=.8;this.diffuseLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.opacity=1;this.traceType=f;this.tubeScale=1;this.coneScale=2;this.vectorScale=1;this.coneOffset=.25;this._model=c;this._view=c;this._projection=c;this._resolution=[1,1]}var h=v.prototype;h.isOpaque=function(){return this.opacity>=1};h.isTransparent=function(){return this.opacity<1};h.pickSlots=1;h.setPickBase=function(e){this.pickId=e};function p(e){var t=f({colormap:e,nshades:256,format:"rgba"});var r=new Uint8Array(256*4);for(var n=0;n<256;++n){var a=t[n];for(var i=0;i<3;++i){r[4*n+i]=a[i]}r[4*n+3]=a[3]*255}return u(r,[256,256,4],[4,0,1])}function d(e){var t=e.length;var r=new Array(t);for(var n=0;n<t;++n){r[n]=e[n][2]}return r}h.update=function(e){e=e||{};var t=this.gl;this.dirty=true;if("lightPosition"in e){this.lightPosition=e.lightPosition}if("opacity"in e){this.opacity=e.opacity}if("ambient"in e){this.ambientLight=e.ambient}if("diffuse"in e){this.diffuseLight=e.diffuse}if("specular"in e){this.specularLight=e.specular}if("roughness"in e){this.roughness=e.roughness}if("fresnel"in e){this.fresnel=e.fresnel}if(e.tubeScale!==undefined){this.tubeScale=e.tubeScale}if(e.vectorScale!==undefined){this.vectorScale=e.vectorScale}if(e.coneScale!==undefined){this.coneScale=e.coneScale}if(e.coneOffset!==undefined){this.coneOffset=e.coneOffset}if(e.colormap){this.texture.shape=[256,256];this.texture.minFilter=t.LINEAR_MIPMAP_LINEAR;this.texture.magFilter=t.LINEAR;this.texture.setPixels(p(e.colormap));this.texture.generateMipmap()}var r=e.cells;var n=e.positions;var a=e.vectors;if(!n||!r||!a){return}var i=[];var o=[];var s=[];var l=[];var u=[];this.cells=r;this.positions=n;this.vectors=a;var f=e.meshColor||[1,1,1,1];var c=e.vertexIntensity;var v=Infinity;var h=-Infinity;if(c){if(e.vertexIntensityBounds){v=+e.vertexIntensityBounds[0];h=+e.vertexIntensityBounds[1]}else{for(var g=0;g<c.length;++g){var y=c[g];v=Math.min(v,y);h=Math.max(h,y)}}}else{for(var g=0;g<n.length;++g){var y=n[g][2];v=Math.min(v,y);h=Math.max(h,y)}}if(c){this.intensity=c}else{this.intensity=d(n)}this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(var g=0;g<n.length;++g){var m=n[g];for(var x=0;x<3;++x){if(isNaN(m[x])||!isFinite(m[x])){continue}this.bounds[0][x]=Math.min(this.bounds[0][x],m[x]);this.bounds[1][x]=Math.max(this.bounds[1][x],m[x])}}var b=0;e:for(var g=0;g<r.length;++g){var _=r[g];switch(_.length){case 3:for(var x=0;x<3;++x){var w=_[x];var m=n[w];for(var T=0;T<3;++T){if(isNaN(m[T])||!isFinite(m[T])){continue e}}}for(var x=0;x<3;++x){var w=_[2-x];var m=n[w];i.push(m[0],m[1],m[2],m[3]);var k=a[w];o.push(k[0],k[1],k[2],k[3]||0);var A=f;if(A.length===3){s.push(A[0],A[1],A[2],1)}else{s.push(A[0],A[1],A[2],A[3])}var M;if(c){M=[(c[w]-v)/(h-v),0]}else{M=[(m[2]-v)/(h-v),0]}l.push(M[0],M[1]);u.push(g)}b+=1;break;default:break}}this.triangleCount=b;this.trianglePositions.update(i);this.triangleVectors.update(o);this.triangleColors.update(s);this.triangleUVs.update(l);this.triangleIds.update(new Uint32Array(u))};h.drawTransparent=h.draw=function(e){e=e||{};var t=this.gl;var r=e.model||c;var n=e.view||c;var a=e.projection||c;var i=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]];for(var o=0;o<3;++o){i[0][o]=Math.max(i[0][o],this.clipBounds[0][o]);i[1][o]=Math.min(i[1][o],this.clipBounds[1][o])}var u={model:r,view:n,projection:a,inverseModel:c.slice(),clipBounds:i,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};u.inverseModel=l(u.inverseModel,u.model);t.disable(t.CULL_FACE);this.texture.bind(0);var f=new Array(16);s(f,u.view,u.model);s(f,u.projection,f);l(f,f);for(var o=0;o<3;++o){u.eyePosition[o]=f[12+o]/f[15]}var v=f[15];for(var o=0;o<3;++o){v+=this.lightPosition[o]*f[4*o+3]}for(var o=0;o<3;++o){var h=f[12+o];for(var p=0;p<3;++p){h+=f[4*p+o]*this.lightPosition[p]}u.lightPosition[o]=h/v}if(this.triangleCount>0){var d=this.triShader;d.bind();d.uniforms=u;this.triangleVAO.bind();t.drawArrays(t.TRIANGLES,0,this.triangleCount*3);this.triangleVAO.unbind()}};h.drawPick=function(e){e=e||{};var t=this.gl;var r=e.model||c;var n=e.view||c;var a=e.projection||c;var i=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]];for(var o=0;o<3;++o){i[0][o]=Math.max(i[0][o],this.clipBounds[0][o]);i[1][o]=Math.min(i[1][o],this.clipBounds[1][o])}this._model=[].slice.call(r);this._view=[].slice.call(n);this._projection=[].slice.call(a);this._resolution=[t.drawingBufferWidth,t.drawingBufferHeight];var s={model:r,view:n,projection:a,clipBounds:i,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255};var l=this.pickShader;l.bind();l.uniforms=s;if(this.triangleCount>0){this.triangleVAO.bind();t.drawArrays(t.TRIANGLES,0,this.triangleCount*3);this.triangleVAO.unbind()}};h.pick=function(e){if(!e){return null}if(e.id!==this.pickId){return null}var t=e.value[0]+256*e.value[1]+65536*e.value[2];var r=this.cells[t];var n=this.positions[r[1]].slice(0,3);var a={position:n,dataCoordinate:n,index:Math.floor(r[1]/48)};if(this.traceType==="cone"){a.index=Math.floor(r[1]/48)}else if(this.traceType==="streamtube"){a.intensity=this.intensity[r[1]];a.velocity=this.vectors[r[1]].slice(0,3);a.divergence=this.vectors[r[1]][3];a.index=t}return a};h.dispose=function(){this.texture.dispose();this.triShader.dispose();this.pickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleVectors.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();this.triangleIds.dispose()};function g(e,t){var r=n(e,t.meshShader.vertex,t.meshShader.fragment,null,t.meshShader.attributes);r.attributes.position.location=0;r.attributes.color.location=2;r.attributes.uv.location=3;r.attributes.vector.location=4;return r}function y(e,t){var r=n(e,t.pickShader.vertex,t.pickShader.fragment,null,t.pickShader.attributes);r.attributes.position.location=0;r.attributes.id.location=1;r.attributes.vector.location=4;return r}function m(e,t,r){var n=r.shaders;if(arguments.length===1){t=e;e=t.gl}var s=g(e,n);var l=y(e,n);var f=o(e,u(new Uint8Array([255,255,255,255]),[1,1,4]));f.generateMipmap();f.minFilter=e.LINEAR_MIPMAP_LINEAR;f.magFilter=e.LINEAR;var c=a(e);var h=a(e);var p=a(e);var d=a(e);var m=a(e);var x=i(e,[{buffer:c,type:e.FLOAT,size:4},{buffer:m,type:e.UNSIGNED_BYTE,size:4,normalized:true},{buffer:p,type:e.FLOAT,size:4},{buffer:d,type:e.FLOAT,size:2},{buffer:h,type:e.FLOAT,size:4}]);var b=new v(e,f,s,l,c,h,m,p,d,x,r.traceType||"cone");b.update(t);return b}e.exports=m},7234:function(e,t,r){var n=r(6832);var a=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]);var i=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]);var o=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]);var s=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);t.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]};t.pickShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(e){e.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(e,t,r){var n=r(1950);e.exports=function e(t){return n[t]}},3110:function(e,t,r){"use strict";e.exports=v;var n=r(5827);var a=r(2944);var i=r(7667);var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(e,t,r,n){this.gl=e;this.shader=n;this.buffer=t;this.vao=r;this.pixelRatio=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lineWidth=[1,1,1];this.capSize=[10,10,10];this.lineCount=[0,0,0];this.lineOffset=[0,0,0];this.opacity=1;this.hasAlpha=false}var l=s.prototype;l.isOpaque=function(){return!this.hasAlpha};l.isTransparent=function(){return this.hasAlpha};l.drawTransparent=l.draw=function(e){var t=this.gl;var r=this.shader.uniforms;this.shader.bind();var n=r.view=e.view||o;var a=r.projection=e.projection||o;r.model=e.model||o;r.clipBounds=this.clipBounds;r.opacity=this.opacity;var i=n[12];var s=n[13];var l=n[14];var u=n[15];var f=e._ortho||false;var c=f?2:1;var v=c*this.pixelRatio*(a[3]*i+a[7]*s+a[11]*l+a[15]*u)/t.drawingBufferHeight;this.vao.bind();for(var h=0;h<3;++h){t.lineWidth(this.lineWidth[h]*this.pixelRatio);r.capSize=this.capSize[h]*v;if(this.lineCount[h]){t.drawArrays(t.LINES,this.lineOffset[h],this.lineCount[h])}}this.vao.unbind()};function u(e,t){for(var r=0;r<3;++r){e[0][r]=Math.min(e[0][r],t[r]);e[1][r]=Math.max(e[1][r],t[r])}}var f=function(){var e=new Array(3);for(var t=0;t<3;++t){var r=[];for(var n=1;n<=2;++n){for(var a=-1;a<=1;a+=2){var i=(n+t)%3;var o=[0,0,0];o[i]=a;r.push(o)}}e[t]=r}return e}();function c(e,t,r,n){var a=f[n];for(var i=0;i<a.length;++i){var o=a[i];e.push(t[0],t[1],t[2],r[0],r[1],r[2],r[3],o[0],o[1],o[2])}return a.length}l.update=function(e){e=e||{};if("lineWidth"in e){this.lineWidth=e.lineWidth;if(!Array.isArray(this.lineWidth)){this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth]}}if("capSize"in e){this.capSize=e.capSize;if(!Array.isArray(this.capSize)){this.capSize=[this.capSize,this.capSize,this.capSize]}}this.hasAlpha=false;if("opacity"in e){this.opacity=+e.opacity;if(this.opacity<1){this.hasAlpha=true}}var t=e.color||[[0,0,0],[0,0,0],[0,0,0]];var r=e.position;var n=e.error;if(!Array.isArray(t[0])){t=[t,t,t]}if(r&&n){var a=[];var i=r.length;var o=0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.lineCount=[0,0,0];for(var s=0;s<3;++s){this.lineOffset[s]=o;e:for(var l=0;l<i;++l){var f=r[l];for(var v=0;v<3;++v){if(isNaN(f[v])||!isFinite(f[v])){continue e}}var h=n[l];var p=t[s];if(Array.isArray(p[0])){p=t[l]}if(p.length===3){p=[p[0],p[1],p[2],1]}else if(p.length===4){p=[p[0],p[1],p[2],p[3]];if(!this.hasAlpha&&p[3]<1)this.hasAlpha=true}if(isNaN(h[0][s])||isNaN(h[1][s])){continue}if(h[0][s]<0){var d=f.slice();d[s]+=h[0][s];a.push(f[0],f[1],f[2],p[0],p[1],p[2],p[3],0,0,0,d[0],d[1],d[2],p[0],p[1],p[2],p[3],0,0,0);u(this.bounds,d);o+=2+c(a,d,p,s)}if(h[1][s]>0){var d=f.slice();d[s]+=h[1][s];a.push(f[0],f[1],f[2],p[0],p[1],p[2],p[3],0,0,0,d[0],d[1],d[2],p[0],p[1],p[2],p[3],0,0,0);u(this.bounds,d);o+=2+c(a,d,p,s)}}this.lineCount[s]=o-this.lineOffset[s]}this.buffer.update(a)}};l.dispose=function(){this.shader.dispose();this.buffer.dispose();this.vao.dispose()};function v(e){var t=e.gl;var r=n(t);var o=a(t,[{buffer:r,type:t.FLOAT,size:3,offset:0,stride:40},{buffer:r,type:t.FLOAT,size:4,offset:12,stride:40},{buffer:r,type:t.FLOAT,size:3,offset:28,stride:40}]);var l=i(t);l.attributes.position.location=0;l.attributes.color.location=1;l.attributes.offset.location=2;var u=new s(t,r,o,l);u.update(e);return u}},7667:function(e,t,r){"use strict";var n=r(6832);var a=r(5158);var i=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]);var o=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);e.exports=function(e){return a(e,i,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(e,t,r){"use strict";var n=r(8931);e.exports=x;var a=null;var i;var o;var s;var l;function u(e){var t=e.getParameter(e.FRAMEBUFFER_BINDING);var r=e.getParameter(e.RENDERBUFFER_BINDING);var n=e.getParameter(e.TEXTURE_BINDING_2D);return[t,r,n]}function f(e,t){e.bindFramebuffer(e.FRAMEBUFFER,t[0]);e.bindRenderbuffer(e.RENDERBUFFER,t[1]);e.bindTexture(e.TEXTURE_2D,t[2])}function c(e,t){var r=e.getParameter(t.MAX_COLOR_ATTACHMENTS_WEBGL);a=new Array(r+1);for(var n=0;n<=r;++n){var i=new Array(r);for(var o=0;o<n;++o){i[o]=e.COLOR_ATTACHMENT0+o}for(var o=n;o<r;++o){i[o]=e.NONE}a[n]=i}}function v(e){switch(e){case i:throw new Error("gl-fbo: Framebuffer unsupported");case o:throw new Error("gl-fbo: Framebuffer incomplete attachment");case s:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case l:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function h(e,t,r,a,i,o){if(!a){return null}var s=n(e,t,r,i,a);s.magFilter=e.NEAREST;s.minFilter=e.NEAREST;s.mipSamples=1;s.bind();e.framebufferTexture2D(e.FRAMEBUFFER,o,e.TEXTURE_2D,s.handle,0);return s}function p(e,t,r,n,a){var i=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,i);e.renderbufferStorage(e.RENDERBUFFER,n,t,r);e.framebufferRenderbuffer(e.FRAMEBUFFER,a,e.RENDERBUFFER,i);return i}function d(e){var t=u(e.gl);var r=e.gl;var n=e.handle=r.createFramebuffer();var i=e._shape[0];var o=e._shape[1];var s=e.color.length;var l=e._ext;var c=e._useStencil;var d=e._useDepth;var g=e._colorType;r.bindFramebuffer(r.FRAMEBUFFER,n);for(var y=0;y<s;++y){e.color[y]=h(r,i,o,g,r.RGBA,r.COLOR_ATTACHMENT0+y)}if(s===0){e._color_rb=p(r,i,o,r.RGBA4,r.COLOR_ATTACHMENT0);if(l){l.drawBuffersWEBGL(a[0])}}else if(s>1){l.drawBuffersWEBGL(a[s])}var m=r.getExtension("WEBGL_depth_texture");if(m){if(c){e.depth=h(r,i,o,m.UNSIGNED_INT_24_8_WEBGL,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT)}else if(d){e.depth=h(r,i,o,r.UNSIGNED_SHORT,r.DEPTH_COMPONENT,r.DEPTH_ATTACHMENT)}}else{if(d&&c){e._depth_rb=p(r,i,o,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT)}else if(d){e._depth_rb=p(r,i,o,r.DEPTH_COMPONENT16,r.DEPTH_ATTACHMENT)}else if(c){e._depth_rb=p(r,i,o,r.STENCIL_INDEX,r.STENCIL_ATTACHMENT)}}var x=r.checkFramebufferStatus(r.FRAMEBUFFER);if(x!==r.FRAMEBUFFER_COMPLETE){e._destroyed=true;r.bindFramebuffer(r.FRAMEBUFFER,null);r.deleteFramebuffer(e.handle);e.handle=null;if(e.depth){e.depth.dispose();e.depth=null}if(e._depth_rb){r.deleteRenderbuffer(e._depth_rb);e._depth_rb=null}for(var y=0;y<e.color.length;++y){e.color[y].dispose();e.color[y]=null}if(e._color_rb){r.deleteRenderbuffer(e._color_rb);e._color_rb=null}f(r,t);v(x)}f(r,t)}function g(e,t,r,n,a,i,o,s){this.gl=e;this._shape=[t|0,r|0];this._destroyed=false;this._ext=s;this.color=new Array(a);for(var l=0;l<a;++l){this.color[l]=null}this._color_rb=null;this.depth=null;this._depth_rb=null;this._colorType=n;this._useDepth=i;this._useStencil=o;var u=this;var f=[t|0,r|0];Object.defineProperties(f,{0:{get:function(){return u._shape[0]},set:function(e){return u.width=e}},1:{get:function(){return u._shape[1]},set:function(e){return u.height=e}}});this._shapeVector=f;d(this)}var y=g.prototype;function m(e,t,r){if(e._destroyed){throw new Error("gl-fbo: Can't resize destroyed FBO")}if(e._shape[0]===t&&e._shape[1]===r){return}var n=e.gl;var a=n.getParameter(n.MAX_RENDERBUFFER_SIZE);if(t<0||t>a||r<0||r>a){throw new Error("gl-fbo: Can't resize FBO, invalid dimensions")}e._shape[0]=t;e._shape[1]=r;var i=u(n);for(var o=0;o<e.color.length;++o){e.color[o].shape=e._shape}if(e._color_rb){n.bindRenderbuffer(n.RENDERBUFFER,e._color_rb);n.renderbufferStorage(n.RENDERBUFFER,n.RGBA4,e._shape[0],e._shape[1])}if(e.depth){e.depth.shape=e._shape}if(e._depth_rb){n.bindRenderbuffer(n.RENDERBUFFER,e._depth_rb);if(e._useDepth&&e._useStencil){n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e._shape[0],e._shape[1])}else if(e._useDepth){n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e._shape[0],e._shape[1])}else if(e._useStencil){n.renderbufferStorage(n.RENDERBUFFER,n.STENCIL_INDEX,e._shape[0],e._shape[1])}}n.bindFramebuffer(n.FRAMEBUFFER,e.handle);var s=n.checkFramebufferStatus(n.FRAMEBUFFER);if(s!==n.FRAMEBUFFER_COMPLETE){e.dispose();f(n,i);v(s)}f(n,i)}Object.defineProperties(y,{shape:{get:function(){if(this._destroyed){return[0,0]}return this._shapeVector},set:function(e){if(!Array.isArray(e)){e=[e|0,e|0]}if(e.length!==2){throw new Error("gl-fbo: Shape vector must be length 2")}var t=e[0]|0;var r=e[1]|0;m(this,t,r);return[t,r]},enumerable:false},width:{get:function(){if(this._destroyed){return 0}return this._shape[0]},set:function(e){e=e|0;m(this,e,this._shape[1]);return e},enumerable:false},height:{get:function(){if(this._destroyed){return 0}return this._shape[1]},set:function(e){e=e|0;m(this,this._shape[0],e);return e},enumerable:false}});y.bind=function(){if(this._destroyed){return}var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.handle);e.viewport(0,0,this._shape[0],this._shape[1])};y.dispose=function(){if(this._destroyed){return}this._destroyed=true;var e=this.gl;e.deleteFramebuffer(this.handle);this.handle=null;if(this.depth){this.depth.dispose();this.depth=null}if(this._depth_rb){e.deleteRenderbuffer(this._depth_rb);this._depth_rb=null}for(var t=0;t<this.color.length;++t){this.color[t].dispose();this.color[t]=null}if(this._color_rb){e.deleteRenderbuffer(this._color_rb);this._color_rb=null}};function x(e,t,r,n){if(!i){i=e.FRAMEBUFFER_UNSUPPORTED;o=e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT;s=e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS;l=e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT}var u=e.getExtension("WEBGL_draw_buffers");if(!a&&u){c(e,u)}if(Array.isArray(t)){n=r;r=t[1]|0;t=t[0]|0}if(typeof t!=="number"){throw new Error("gl-fbo: Missing shape parameter")}var f=e.getParameter(e.MAX_RENDERBUFFER_SIZE);if(t<0||t>f||r<0||r>f){throw new Error("gl-fbo: Parameters are too large for FBO")}n=n||{};var v=1;if("color"in n){v=Math.max(n.color|0,0);if(v<0){throw new Error("gl-fbo: Must specify a nonnegative number of colors")}if(v>1){if(!u){throw new Error("gl-fbo: Multiple draw buffer extension not supported")}else if(v>e.getParameter(u.MAX_COLOR_ATTACHMENTS_WEBGL)){throw new Error("gl-fbo: Context does not support "+v+" draw buffers")}}}var h=e.UNSIGNED_BYTE;var p=e.getExtension("OES_texture_float");if(n.float&&v>0){if(!p){throw new Error("gl-fbo: Context does not support floating point textures")}h=e.FLOAT}else if(n.preferFloat&&v>0){if(p){h=e.FLOAT}}var d=true;if("depth"in n){d=!!n.depth}var y=false;if("stencil"in n){y=!!n.stencil}return new g(e,t,r,h,v,d,y,u)}},3530:function(e,t,r){var n=r(8974).sprintf;var a=r(6603);var i=r(9365);var o=r(8008);e.exports=s;function s(e,t,r){"use strict";var s=i(t)||"of unknown name (see npm glsl-shader-name)";var l="unknown type";if(r!==undefined){l=r===a.FRAGMENT_SHADER?"fragment":"vertex"}var u=n("Error compiling %s shader %s:\n",l,s);var f=n("%s%s",u,e);var c=e.split("\n");var v={};for(var h=0;h<c.length;h++){var p=c[h];if(p===""||p==="\0")continue;var d=parseInt(p.split(":")[2]);if(isNaN(d)){throw new Error(n("Could not parse error: %s",p))}v[d]=p}var g=o(t).split("\n");for(var h=0;h<g.length;h++){if(!v[h+3]&&!v[h+2]&&!v[h+1])continue;var y=g[h];u+=y+"\n";if(v[h+1]){var m=v[h+1];m=m.substr(m.split(":",3).join(":").length+1).trim();u+=n("^^^ %s\n\n",m)}}return{long:u.trim(),short:f.trim()}}},6386:function(e,t,r){"use strict";e.exports=v;var n=r(5070);var a=r(9560);var i=r(5306);var o=r(5158);var s=r(5827);var l=r(1292);function u(e,t,r,n,a,i,o){this.plot=e;this.shader=t;this.pickShader=r;this.positionBuffer=n;this.weightBuffer=a;this.colorBuffer=i;this.idBuffer=o;this.xData=[];this.yData=[];this.shape=[0,0];this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.pickOffset=0}var f=u.prototype;var c=[0,0,1,0,0,1,1,0,1,1,0,1];f.draw=function(){var e=[1,0,0,0,1,0,0,0,1];return function(){var t=this.plot;var r=this.shader;var n=this.bounds;var a=this.numVertices;if(a<=0){return}var i=t.gl;var o=t.dataBox;var s=n[2]-n[0];var l=n[3]-n[1];var u=o[2]-o[0];var f=o[3]-o[1];e[0]=2*s/u;e[4]=2*l/f;e[6]=2*(n[0]-o[0])/u-1;e[7]=2*(n[1]-o[1])/f-1;r.bind();var c=r.uniforms;c.viewTransform=e;c.shape=this.shape;var v=r.attributes;this.positionBuffer.bind();v.position.pointer();this.weightBuffer.bind();v.weight.pointer(i.UNSIGNED_BYTE,false);this.colorBuffer.bind();v.color.pointer(i.UNSIGNED_BYTE,true);i.drawArrays(i.TRIANGLES,0,a)}}();f.drawPick=function(){var e=[1,0,0,0,1,0,0,0,1];var t=[0,0,0,0];return function(r){var n=this.plot;var a=this.pickShader;var i=this.bounds;var o=this.numVertices;if(o<=0){return}var s=n.gl;var l=n.dataBox;var u=i[2]-i[0];var f=i[3]-i[1];var c=l[2]-l[0];var v=l[3]-l[1];e[0]=2*u/c;e[4]=2*f/v;e[6]=2*(i[0]-l[0])/c-1;e[7]=2*(i[1]-l[1])/v-1;for(var h=0;h<4;++h){t[h]=r>>h*8&255}this.pickOffset=r;a.bind();var p=a.uniforms;p.viewTransform=e;p.pickOffset=t;p.shape=this.shape;var d=a.attributes;this.positionBuffer.bind();d.position.pointer();this.weightBuffer.bind();d.weight.pointer(s.UNSIGNED_BYTE,false);this.idBuffer.bind();d.pickId.pointer(s.UNSIGNED_BYTE,false);s.drawArrays(s.TRIANGLES,0,o);return r+this.shape[0]*this.shape[1]}}();f.pick=function(e,t,r){var n=this.pickOffset;var a=this.shape[0]*this.shape[1];if(r<n||r>=n+a){return null}var i=r-n;var o=this.xData;var s=this.yData;return{object:this,pointId:i,dataCoord:[o[i%this.shape[0]],s[i/this.shape[0]|0]]}};f.update=function(e){e=e||{};var t=e.shape||[0,0];var r=e.x||a(t[0]);var o=e.y||a(t[1]);var s=e.z||new Float32Array(t[0]*t[1]);var l=e.zsmooth!==false;this.xData=r;this.yData=o;var u=e.colorLevels||[0];var f=e.colorValues||[0,0,0,1];var v=u.length;var h=this.bounds;var p,d,g,y;if(l){p=h[0]=r[0];d=h[1]=o[0];g=h[2]=r[r.length-1];y=h[3]=o[o.length-1]}else{p=h[0]=r[0]+(r[1]-r[0])/2;d=h[1]=o[0]+(o[1]-o[0])/2;g=h[2]=r[r.length-1]+(r[r.length-1]-r[r.length-2])/2;y=h[3]=o[o.length-1]+(o[o.length-1]-o[o.length-2])/2}var m=1/(g-p);var x=1/(y-d);var b=t[0];var _=t[1];this.shape=[b,_];var w=(l?(b-1)*(_-1):b*_)*(c.length>>>1);this.numVertices=w;var T=i.mallocUint8(w*4);var k=i.mallocFloat32(w*2);var A=i.mallocUint8(w*2);var M=i.mallocUint32(w);var S=0;var E=l?b-1:b;var L=l?_-1:_;for(var C=0;C<L;++C){var I,P;if(l){I=x*(o[C]-d);P=x*(o[C+1]-d)}else{I=C<_-1?x*(o[C]-(o[C+1]-o[C])/2-d):x*(o[C]-(o[C]-o[C-1])/2-d);P=C<_-1?x*(o[C]+(o[C+1]-o[C])/2-d):x*(o[C]+(o[C]-o[C-1])/2-d)}for(var O=0;O<E;++O){var D,z;if(l){D=m*(r[O]-p);z=m*(r[O+1]-p)}else{D=O<b-1?m*(r[O]-(r[O+1]-r[O])/2-p):m*(r[O]-(r[O]-r[O-1])/2-p);z=O<b-1?m*(r[O]+(r[O+1]-r[O])/2-p):m*(r[O]+(r[O]-r[O-1])/2-p)}for(var R=0;R<c.length;R+=2){var F=c[R];var B=c[R+1];var N=l?(C+B)*b+(O+F):C*b+O;var j=s[N];var U=n.le(u,j);var V,H,q,G;if(U<0){V=f[0];H=f[1];q=f[2];G=f[3]}else if(U===v-1){V=f[4*v-4];H=f[4*v-3];q=f[4*v-2];G=f[4*v-1]}else{var Z=(j-u[U])/(u[U+1]-u[U]);var Y=1-Z;var W=4*U;var X=4*(U+1);V=Y*f[W]+Z*f[X];H=Y*f[W+1]+Z*f[X+1];q=Y*f[W+2]+Z*f[X+2];G=Y*f[W+3]+Z*f[X+3]}T[4*S]=255*V;T[4*S+1]=255*H;T[4*S+2]=255*q;T[4*S+3]=255*G;k[2*S]=D*.5+z*.5;k[2*S+1]=I*.5+P*.5;A[2*S]=F;A[2*S+1]=B;M[S]=C*b+O;S+=1}}}this.positionBuffer.update(k);this.weightBuffer.update(A);this.colorBuffer.update(T);this.idBuffer.update(M);i.free(k);i.free(T);i.free(A);i.free(M)};f.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.positionBuffer.dispose();this.weightBuffer.dispose();this.colorBuffer.dispose();this.idBuffer.dispose();this.plot.removeObject(this)};function v(e,t){var r=e.gl;var n=o(r,l.vertex,l.fragment);var a=o(r,l.pickVertex,l.pickFragment);var i=s(r);var f=s(r);var c=s(r);var v=s(r);var h=new u(e,n,a,i,f,c,v);h.update(t);e.addObject(h);return h}},1292:function(e,t,r){"use strict";var n=r(6832);e.exports={fragment:n(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:n(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},248:function(e,t,r){var n=r(6832);var a=r(5158);var i=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]);var o=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]);var s=n(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]);var l=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];t.createShader=function(e){return a(e,i,o,null,l)};t.createPickShader=function(e){return a(e,i,s,null,l)}},6086:function(e,t,r){"use strict";e.exports=b;var n=r(5827);var a=r(2944);var i=r(8931);var o=new Uint8Array(4);var s=new Float32Array(o.buffer);function l(e,t,r,n){o[0]=n;o[1]=r;o[2]=t;o[3]=e;return s[0]}var u=r(5070);var f=r(5050);var c=r(248);var v=c.createShader;var h=c.createPickShader;var p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(e,t){var r=0;for(var n=0;n<3;++n){var a=e[n]-t[n];r+=a*a}return Math.sqrt(r)}function g(e){var t=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]];for(var r=0;r<3;++r){t[0][r]=Math.max(e[0][r],t[0][r]);t[1][r]=Math.min(e[1][r],t[1][r])}return t}function y(e,t,r,n){this.arcLength=e;this.position=t;this.index=r;this.dataCoordinate=n}function m(e,t,r,n,a,i){this.gl=e;this.shader=t;this.pickShader=r;this.buffer=n;this.vao=a;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.points=[];this.arcLength=[];this.vertexCount=0;this.bounds=[[0,0,0],[0,0,0]];this.pickId=0;this.lineWidth=1;this.texture=i;this.dashScale=1;this.opacity=1;this.hasAlpha=false;this.dirty=true;this.pixelRatio=1}var x=m.prototype;x.isTransparent=function(){return this.hasAlpha};x.isOpaque=function(){return!this.hasAlpha};x.pickSlots=1;x.setPickBase=function(e){this.pickId=e};x.drawTransparent=x.draw=function(e){if(!this.vertexCount)return;var t=this.gl;var r=this.shader;var n=this.vao;r.bind();r.uniforms={model:e.model||p,view:e.view||p,projection:e.projection||p,clipBounds:g(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio};n.bind();n.draw(t.TRIANGLE_STRIP,this.vertexCount);n.unbind()};x.drawPick=function(e){if(!this.vertexCount)return;var t=this.gl;var r=this.pickShader;var n=this.vao;r.bind();r.uniforms={model:e.model||p,view:e.view||p,projection:e.projection||p,pickId:this.pickId,clipBounds:g(this.clipBounds),screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio};n.bind();n.draw(t.TRIANGLE_STRIP,this.vertexCount);n.unbind()};x.update=function(e){var t,r;this.dirty=true;var n=!!e.connectGaps;if("dashScale"in e){this.dashScale=e.dashScale}this.hasAlpha=false;if("opacity"in e){this.opacity=+e.opacity;if(this.opacity<1){this.hasAlpha=true}}var a=[];var i=[];var o=[];var s=0;var l=0;var c=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];var v=e.position||e.positions;if(v){var h=e.color||e.colors||[0,0,0,1];var p=e.lineWidth||1;var g=false;e:for(t=1;t<v.length;++t){var y=v[t-1];var m=v[t];i.push(s);o.push(y.slice());for(r=0;r<3;++r){if(isNaN(y[r])||isNaN(m[r])||!isFinite(y[r])||!isFinite(m[r])){if(!n&&a.length>0){for(var x=0;x<24;++x){a.push(a[a.length-12])}l+=2;g=true}continue e}c[0][r]=Math.min(c[0][r],y[r],m[r]);c[1][r]=Math.max(c[1][r],y[r],m[r])}var b,_;if(Array.isArray(h[0])){b=h.length>t-1?h[t-1]:h.length>0?h[h.length-1]:[0,0,0,1];_=h.length>t?h[t]:h.length>0?h[h.length-1]:[0,0,0,1]}else{b=_=h}if(b.length===3){b=[b[0],b[1],b[2],1]}if(_.length===3){_=[_[0],_[1],_[2],1]}if(!this.hasAlpha&&b[3]<1)this.hasAlpha=true;var w;if(Array.isArray(p)){w=p.length>t-1?p[t-1]:p.length>0?p[p.length-1]:[0,0,0,1]}else{w=p}var T=s;s+=d(y,m);if(g){for(r=0;r<2;++r){a.push(y[0],y[1],y[2],m[0],m[1],m[2],T,w,b[0],b[1],b[2],b[3])}l+=2;g=false}a.push(y[0],y[1],y[2],m[0],m[1],m[2],T,w,b[0],b[1],b[2],b[3],y[0],y[1],y[2],m[0],m[1],m[2],T,-w,b[0],b[1],b[2],b[3],m[0],m[1],m[2],y[0],y[1],y[2],s,-w,_[0],_[1],_[2],_[3],m[0],m[1],m[2],y[0],y[1],y[2],s,w,_[0],_[1],_[2],_[3]);l+=4}}this.buffer.update(a);i.push(s);o.push(v[v.length-1].slice());this.bounds=c;this.vertexCount=l;this.points=o;this.arcLength=i;if("dashes"in e){var k=e.dashes;var A=k.slice();A.unshift(0);for(t=1;t<A.length;++t){A[t]=A[t-1]+A[t]}var M=f(new Array(256*4),[256,1,4]);for(t=0;t<256;++t){for(r=0;r<4;++r){M.set(t,0,r,0)}if(u.le(A,A[A.length-1]*t/255)&1){M.set(t,0,0,0)}else{M.set(t,0,0,255)}}this.texture.setPixels(M)}};x.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()};x.pick=function(e){if(!e){return null}if(e.id!==this.pickId){return null}var t=l(e.value[0],e.value[1],e.value[2],0);var r=u.le(this.arcLength,t);if(r<0){return null}if(r===this.arcLength.length-1){return new y(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),r)}var n=this.points[r];var a=this.points[Math.min(r+1,this.points.length-1)];var i=(t-this.arcLength[r])/(this.arcLength[r+1]-this.arcLength[r]);var o=1-i;var s=[0,0,0];for(var f=0;f<3;++f){s[f]=o*n[f]+i*a[f]}var c=Math.min(i<.5?r:r+1,this.points.length-1);return new y(t,s,c,this.points[c])};function b(e){var t=e.gl||e.scene&&e.scene.gl;var r=v(t);r.attributes.position.location=0;r.attributes.nextPosition.location=1;r.attributes.arcLength.location=2;r.attributes.lineWidth.location=3;r.attributes.color.location=4;var o=h(t);o.attributes.position.location=0;o.attributes.nextPosition.location=1;o.attributes.arcLength.location=2;o.attributes.lineWidth.location=3;o.attributes.color.location=4;var s=n(t);var l=a(t,[{buffer:s,size:3,offset:0,stride:48},{buffer:s,size:3,offset:12,stride:48},{buffer:s,size:1,offset:24,stride:48},{buffer:s,size:1,offset:28,stride:48},{buffer:s,size:4,offset:32,stride:48}]);var u=f(new Array(256*4),[256,1,4]);for(var c=0;c<256*4;++c){u.data[c]=255}var p=i(t,u);p.wrap=t.REPEAT;var d=new m(t,r,o,s,l,p);d.update(e);return d}},7332:function(e){e.exports=t;function t(e){var t=new Float32Array(16);t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];return t}},9823:function(e){e.exports=t;function t(){var e=new Float32Array(16);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},7787:function(e){e.exports=t;function t(e){var t=e[0],r=e[1],n=e[2],a=e[3],i=e[4],o=e[5],s=e[6],l=e[7],u=e[8],f=e[9],c=e[10],v=e[11],h=e[12],p=e[13],d=e[14],g=e[15],y=t*o-r*i,m=t*s-n*i,x=t*l-a*i,b=r*s-n*o,_=r*l-a*o,w=n*l-a*s,T=u*p-f*h,k=u*d-c*h,A=u*g-v*h,M=f*d-c*p,S=f*g-v*p,E=c*g-v*d;return y*E-m*S+x*M+b*A-_*k+w*T}},5950:function(e){e.exports=t;function t(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=r+r,s=n+n,l=a+a,u=r*o,f=n*o,c=n*s,v=a*o,h=a*s,p=a*l,d=i*o,g=i*s,y=i*l;e[0]=1-c-p;e[1]=f+y;e[2]=v-g;e[3]=0;e[4]=f-y;e[5]=1-u-p;e[6]=h+d;e[7]=0;e[8]=v+g;e[9]=h-d;e[10]=1-u-c;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},7280:function(e){e.exports=t;function t(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3],s=n+n,l=a+a,u=i+i,f=n*s,c=n*l,v=n*u,h=a*l,p=a*u,d=i*u,g=o*s,y=o*l,m=o*u;e[0]=1-(h+d);e[1]=c+m;e[2]=v-y;e[3]=0;e[4]=c-m;e[5]=1-(f+d);e[6]=p+g;e[7]=0;e[8]=v+y;e[9]=p-g;e[10]=1-(f+h);e[11]=0;e[12]=r[0];e[13]=r[1];e[14]=r[2];e[15]=1;return e}},9947:function(e){e.exports=t;function t(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},7437:function(e){e.exports=t;function t(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],f=t[8],c=t[9],v=t[10],h=t[11],p=t[12],d=t[13],g=t[14],y=t[15],m=r*s-n*o,x=r*l-a*o,b=r*u-i*o,_=n*l-a*s,w=n*u-i*s,T=a*u-i*l,k=f*d-c*p,A=f*g-v*p,M=f*y-h*p,S=c*g-v*d,E=c*y-h*d,L=v*y-h*g,C=m*L-x*E+b*S+_*M-w*A+T*k;if(!C){return null}C=1/C;e[0]=(s*L-l*E+u*S)*C;e[1]=(a*E-n*L-i*S)*C;e[2]=(d*T-g*w+y*_)*C;e[3]=(v*w-c*T-h*_)*C;e[4]=(l*M-o*L-u*A)*C;e[5]=(r*L-a*M+i*A)*C;e[6]=(g*b-p*T-y*x)*C;e[7]=(f*T-v*b+h*x)*C;e[8]=(o*E-s*M+u*k)*C;e[9]=(n*M-r*E-i*k)*C;e[10]=(p*w-d*b+y*m)*C;e[11]=(c*b-f*w-h*m)*C;e[12]=(s*A-o*S-l*k)*C;e[13]=(r*S-n*A+a*k)*C;e[14]=(d*x-p*_-g*m)*C;e[15]=(f*_-c*x+v*m)*C;return e}},3012:function(e,t,r){var n=r(9947);e.exports=a;function a(e,t,r,a){var i,o,s,l,u,f,c,v,h,p,d=t[0],g=t[1],y=t[2],m=a[0],x=a[1],b=a[2],_=r[0],w=r[1],T=r[2];if(Math.abs(d-_)<1e-6&&Math.abs(g-w)<1e-6&&Math.abs(y-T)<1e-6){return n(e)}c=d-_;v=g-w;h=y-T;p=1/Math.sqrt(c*c+v*v+h*h);c*=p;v*=p;h*=p;i=x*h-b*v;o=b*c-m*h;s=m*v-x*c;p=Math.sqrt(i*i+o*o+s*s);if(!p){i=0;o=0;s=0}else{p=1/p;i*=p;o*=p;s*=p}l=v*s-h*o;u=h*i-c*s;f=c*o-v*i;p=Math.sqrt(l*l+u*u+f*f);if(!p){l=0;u=0;f=0}else{p=1/p;l*=p;u*=p;f*=p}e[0]=i;e[1]=l;e[2]=c;e[3]=0;e[4]=o;e[5]=u;e[6]=v;e[7]=0;e[8]=s;e[9]=f;e[10]=h;e[11]=0;e[12]=-(i*d+o*g+s*y);e[13]=-(l*d+u*g+f*y);e[14]=-(c*d+v*g+h*y);e[15]=1;return e}},104:function(e){e.exports=t;function t(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=t[6],f=t[7],c=t[8],v=t[9],h=t[10],p=t[11],d=t[12],g=t[13],y=t[14],m=t[15];var x=r[0],b=r[1],_=r[2],w=r[3];e[0]=x*n+b*s+_*c+w*d;e[1]=x*a+b*l+_*v+w*g;e[2]=x*i+b*u+_*h+w*y;e[3]=x*o+b*f+_*p+w*m;x=r[4];b=r[5];_=r[6];w=r[7];e[4]=x*n+b*s+_*c+w*d;e[5]=x*a+b*l+_*v+w*g;e[6]=x*i+b*u+_*h+w*y;e[7]=x*o+b*f+_*p+w*m;x=r[8];b=r[9];_=r[10];w=r[11];e[8]=x*n+b*s+_*c+w*d;e[9]=x*a+b*l+_*v+w*g;e[10]=x*i+b*u+_*h+w*y;e[11]=x*o+b*f+_*p+w*m;x=r[12];b=r[13];_=r[14];w=r[15];e[12]=x*n+b*s+_*c+w*d;e[13]=x*a+b*l+_*v+w*g;e[14]=x*i+b*u+_*h+w*y;e[15]=x*o+b*f+_*p+w*m;return e}},5268:function(e){e.exports=t;function t(e,t,r,n,a,i,o){var s=1/(t-r),l=1/(n-a),u=1/(i-o);e[0]=-2*s;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=-2*l;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=2*u;e[11]=0;e[12]=(t+r)*s;e[13]=(a+n)*l;e[14]=(o+i)*u;e[15]=1;return e}},1120:function(e){e.exports=t;function t(e,t,r,n,a){var i=1/Math.tan(t/2),o=1/(n-a);e[0]=i/r;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=i;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=(a+n)*o;e[11]=-1;e[12]=0;e[13]=0;e[14]=2*a*n*o;e[15]=0;return e}},4422:function(e){e.exports=t;function t(e,t,r,n){var a=n[0],i=n[1],o=n[2],s=Math.sqrt(a*a+i*i+o*o),l,u,f,c,v,h,p,d,g,y,m,x,b,_,w,T,k,A,M,S,E,L,C,I;if(Math.abs(s)<1e-6){return null}s=1/s;a*=s;i*=s;o*=s;l=Math.sin(r);u=Math.cos(r);f=1-u;c=t[0];v=t[1];h=t[2];p=t[3];d=t[4];g=t[5];y=t[6];m=t[7];x=t[8];b=t[9];_=t[10];w=t[11];T=a*a*f+u;k=i*a*f+o*l;A=o*a*f-i*l;M=a*i*f-o*l;S=i*i*f+u;E=o*i*f+a*l;L=a*o*f+i*l;C=i*o*f-a*l;I=o*o*f+u;e[0]=c*T+d*k+x*A;e[1]=v*T+g*k+b*A;e[2]=h*T+y*k+_*A;e[3]=p*T+m*k+w*A;e[4]=c*M+d*S+x*E;e[5]=v*M+g*S+b*E;e[6]=h*M+y*S+_*E;e[7]=p*M+m*S+w*E;e[8]=c*L+d*C+x*I;e[9]=v*L+g*C+b*I;e[10]=h*L+y*C+_*I;e[11]=p*L+m*C+w*I;if(t!==e){e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}return e}},6109:function(e){e.exports=t;function t(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[4],o=t[5],s=t[6],l=t[7],u=t[8],f=t[9],c=t[10],v=t[11];if(t!==e){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[4]=i*a+u*n;e[5]=o*a+f*n;e[6]=s*a+c*n;e[7]=l*a+v*n;e[8]=u*a-i*n;e[9]=f*a-o*n;e[10]=c*a-s*n;e[11]=v*a-l*n;return e}},7115:function(e){e.exports=t;function t(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[0],o=t[1],s=t[2],l=t[3],u=t[8],f=t[9],c=t[10],v=t[11];if(t!==e){e[4]=t[4];e[5]=t[5];e[6]=t[6];e[7]=t[7];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[0]=i*a-u*n;e[1]=o*a-f*n;e[2]=s*a-c*n;e[3]=l*a-v*n;e[8]=i*n+u*a;e[9]=o*n+f*a;e[10]=s*n+c*a;e[11]=l*n+v*a;return e}},5240:function(e){e.exports=t;function t(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[0],o=t[1],s=t[2],l=t[3],u=t[4],f=t[5],c=t[6],v=t[7];if(t!==e){e[8]=t[8];e[9]=t[9];e[10]=t[10];e[11]=t[11];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[0]=i*a+u*n;e[1]=o*a+f*n;e[2]=s*a+c*n;e[3]=l*a+v*n;e[4]=u*a-i*n;e[5]=f*a-o*n;e[6]=c*a-s*n;e[7]=v*a-l*n;return e}},3668:function(e){e.exports=t;function t(e,t,r){var n=r[0],a=r[1],i=r[2];e[0]=t[0]*n;e[1]=t[1]*n;e[2]=t[2]*n;e[3]=t[3]*n;e[4]=t[4]*a;e[5]=t[5]*a;e[6]=t[6]*a;e[7]=t[7]*a;e[8]=t[8]*i;e[9]=t[9]*i;e[10]=t[10]*i;e[11]=t[11]*i;e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15];return e}},998:function(e){e.exports=t;function t(e,t,r){var n=r[0],a=r[1],i=r[2],o,s,l,u,f,c,v,h,p,d,g,y;if(t===e){e[12]=t[0]*n+t[4]*a+t[8]*i+t[12];e[13]=t[1]*n+t[5]*a+t[9]*i+t[13];e[14]=t[2]*n+t[6]*a+t[10]*i+t[14];e[15]=t[3]*n+t[7]*a+t[11]*i+t[15]}else{o=t[0];s=t[1];l=t[2];u=t[3];f=t[4];c=t[5];v=t[6];h=t[7];p=t[8];d=t[9];g=t[10];y=t[11];e[0]=o;e[1]=s;e[2]=l;e[3]=u;e[4]=f;e[5]=c;e[6]=v;e[7]=h;e[8]=p;e[9]=d;e[10]=g;e[11]=y;e[12]=o*n+f*a+p*i+t[12];e[13]=s*n+c*a+d*i+t[13];e[14]=l*n+v*a+g*i+t[14];e[15]=u*n+h*a+y*i+t[15]}return e}},2142:function(e){e.exports=t;function t(e,t){if(e===t){var r=t[1],n=t[2],a=t[3],i=t[6],o=t[7],s=t[11];e[1]=t[4];e[2]=t[8];e[3]=t[12];e[4]=r;e[6]=t[9];e[7]=t[13];e[8]=n;e[9]=i;e[11]=t[14];e[12]=a;e[13]=o;e[14]=s}else{e[0]=t[0];e[1]=t[4];e[2]=t[8];e[3]=t[12];e[4]=t[1];e[5]=t[5];e[6]=t[9];e[7]=t[13];e[8]=t[2];e[9]=t[6];e[10]=t[10];e[11]=t[14];e[12]=t[3];e[13]=t[7];e[14]=t[11];e[15]=t[15]}return e}},4340:function(e,t,r){"use strict";var n=r(957);var a=r(7309);e.exports=u;function i(e,t){var r=[0,0,0,0];for(var n=0;n<4;++n){for(var a=0;a<4;++a){r[a]+=e[4*n+a]*t[n]}}return r}function o(e,t,r,n,a){var o=i(n,i(r,i(t,[e[0],e[1],e[2],1])));for(var s=0;s<3;++s){o[s]/=o[3]}return[.5*a[0]*(1+o[0]),.5*a[1]*(1-o[1])]}function s(e,t){if(e.length===2){var r=0;var i=0;for(var o=0;o<2;++o){r+=Math.pow(t[o]-e[0][o],2);i+=Math.pow(t[o]-e[1][o],2)}r=Math.sqrt(r);i=Math.sqrt(i);if(r+i<1e-6){return[1,0]}return[i/(r+i),r/(i+r)]}else if(e.length===3){var s=[0,0];a(e[0],e[1],e[2],t,s);return n(e,s)}return[]}function l(e,t){var r=[0,0,0];for(var n=0;n<e.length;++n){var a=e[n];var i=t[n];for(var o=0;o<3;++o){r[o]+=i*a[o]}}return r}function u(e,t,r,n,a,i){if(e.length===1){return[0,e[0].slice()]}var u=new Array(e.length);for(var f=0;f<e.length;++f){u[f]=o(e[f],r,n,a,i)}var c=0;var v=Infinity;for(var f=0;f<u.length;++f){var h=0;for(var p=0;p<2;++p){h+=Math.pow(u[f][p]-t[p],2)}if(h<v){v=h;c=f}}var d=s(u,t);var g=0;for(var f=0;f<3;++f){if(d[f]<-.001||d[f]>1.0001){return null}g+=d[f]}if(Math.abs(g-1)>.001){return null}return[c,l(e,d),d]}},2056:function(e,t,r){var n=r(6832);var a=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]);var i=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]);var o=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]);var s=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]);var l=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]);var u=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]);var f=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]);var c=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);var v=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]);var h=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]);var p=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);t.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};t.wireShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};t.pointShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]};t.pickShader={vertex:f,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]};t.pointPickShader={vertex:v,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]};t.contourShader={vertex:h,fragment:p,attributes:[{name:"position",type:"vec3"}]}},8116:function(e,t,r){"use strict";var n=1e-6;var a=1e-6;var i=r(5158);var o=r(5827);var s=r(2944);var l=r(8931);var u=r(115);var f=r(104);var c=r(7437);var v=r(5050);var h=r(9156);var p=r(7212);var d=r(5306);var g=r(2056);var y=r(4340);var m=g.meshShader;var x=g.wireShader;var b=g.pointShader;var _=g.pickShader;var w=g.pointPickShader;var T=g.contourShader;var k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function A(e,t,r,n,a,i,o,s,l,u,f,c,v,h,p,d,g,y,m,x,b,_,w,T,A,M,S){this.gl=e;this.pixelRatio=1;this.cells=[];this.positions=[];this.intensity=[];this.texture=t;this.dirty=true;this.triShader=r;this.lineShader=n;this.pointShader=a;this.pickShader=i;this.pointPickShader=o;this.contourShader=s;this.trianglePositions=l;this.triangleColors=f;this.triangleNormals=v;this.triangleUVs=c;this.triangleIds=u;this.triangleVAO=h;this.triangleCount=0;this.lineWidth=1;this.edgePositions=p;this.edgeColors=g;this.edgeUVs=y;this.edgeIds=d;this.edgeVAO=m;this.edgeCount=0;this.pointPositions=x;this.pointColors=_;this.pointUVs=w;this.pointSizes=T;this.pointIds=b;this.pointVAO=A;this.pointCount=0;this.contourLineWidth=1;this.contourPositions=M;this.contourVAO=S;this.contourCount=0;this.contourColor=[0,0,0];this.contourEnable=true;this.pickVertex=true;this.pickId=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1e5,1e5,0];this.ambientLight=.8;this.diffuseLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.opacity=1;this.hasAlpha=false;this.opacityscale=false;this._model=k;this._view=k;this._projection=k;this._resolution=[1,1]}var M=A.prototype;M.isOpaque=function(){return!this.hasAlpha};M.isTransparent=function(){return this.hasAlpha};M.pickSlots=1;M.setPickBase=function(e){this.pickId=e};function S(e,t){if(!t)return 1;if(!t.length)return 1;for(var r=0;r<t.length;++r){if(t.length<2)return 1;if(t[r][0]===e)return t[r][1];if(t[r][0]>e&&r>0){var n=(t[r][0]-e)/(t[r][0]-t[r-1][0]);return t[r][1]*(1-n)+n*t[r-1][1]}}return 1}function E(e,t){var r=h({colormap:e,nshades:256,format:"rgba"});var n=new Uint8Array(256*4);for(var a=0;a<256;++a){var i=r[a];for(var o=0;o<3;++o){n[4*a+o]=i[o]}if(!t){n[4*a+3]=255*i[3]}else{n[4*a+3]=255*S(a/255,t)}}return v(n,[256,256,4],[4,0,1])}function L(e){var t=e.length;var r=new Array(t);for(var n=0;n<t;++n){r[n]=e[n][2]}return r}M.highlight=function(e){if(!e||!this.contourEnable){this.contourCount=0;return}var t=p(this.cells,this.intensity,e.intensity);var r=t.cells;var n=t.vertexIds;var a=t.vertexWeights;var i=r.length;var o=d.mallocFloat32(2*3*i);var s=0;for(var l=0;l<i;++l){var u=r[l];for(var f=0;f<2;++f){var c=u[0];if(u.length===2){c=u[f]}var v=n[c][0];var h=n[c][1];var g=a[c];var y=1-g;var m=this.positions[v];var x=this.positions[h];for(var b=0;b<3;++b){o[s++]=g*m[b]+y*x[b]}}}this.contourCount=s/3|0;this.contourPositions.update(o.subarray(0,s));d.free(o)};M.update=function(e){e=e||{};var t=this.gl;this.dirty=true;if("contourEnable"in e){this.contourEnable=e.contourEnable}if("contourColor"in e){this.contourColor=e.contourColor}if("lineWidth"in e){this.lineWidth=e.lineWidth}if("lightPosition"in e){this.lightPosition=e.lightPosition}this.hasAlpha=false;if("opacity"in e){this.opacity=e.opacity;if(this.opacity<1){this.hasAlpha=true}}if("opacityscale"in e){this.opacityscale=e.opacityscale;this.hasAlpha=true}if("ambient"in e){this.ambientLight=e.ambient}if("diffuse"in e){this.diffuseLight=e.diffuse}if("specular"in e){this.specularLight=e.specular}if("roughness"in e){this.roughness=e.roughness}if("fresnel"in e){this.fresnel=e.fresnel}if(e.texture){this.texture.dispose();this.texture=l(t,e.texture)}else if(e.colormap){this.texture.shape=[256,256];this.texture.minFilter=t.LINEAR_MIPMAP_LINEAR;this.texture.magFilter=t.LINEAR;this.texture.setPixels(E(e.colormap,this.opacityscale));this.texture.generateMipmap()}var r=e.cells;var i=e.positions;if(!i||!r){return}var o=[];var s=[];var f=[];var c=[];var v=[];var h=[];var p=[];var d=[];var g=[];var y=[];var m=[];var x=[];var b=[];var _=[];this.cells=r;this.positions=i;var w=e.vertexNormals;var T=e.cellNormals;var k=e.vertexNormalsEpsilon===void 0?n:e.vertexNormalsEpsilon;var A=e.faceNormalsEpsilon===void 0?a:e.faceNormalsEpsilon;if(e.useFacetNormals&&!T){T=u.faceNormals(r,i,A)}if(!T&&!w){w=u.vertexNormals(r,i,k)}var M=e.vertexColors;var C=e.cellColors;var I=e.meshColor||[1,1,1,1];var P=e.vertexUVs;var O=e.vertexIntensity;var D=e.cellUVs;var z=e.cellIntensity;var R=Infinity;var F=-Infinity;if(!P&&!D){if(O){if(e.vertexIntensityBounds){R=+e.vertexIntensityBounds[0];F=+e.vertexIntensityBounds[1]}else{for(var B=0;B<O.length;++B){var N=O[B];R=Math.min(R,N);F=Math.max(F,N)}}}else if(z){if(e.cellIntensityBounds){R=+e.cellIntensityBounds[0];F=+e.cellIntensityBounds[1]}else{for(var B=0;B<z.length;++B){var N=z[B];R=Math.min(R,N);F=Math.max(F,N)}}}else{for(var B=0;B<i.length;++B){var N=i[B][2];R=Math.min(R,N);F=Math.max(F,N)}}}if(O){this.intensity=O}else if(z){this.intensity=z}else{this.intensity=L(i)}this.pickVertex=!(z||C);var j=e.pointSizes;var U=e.pointSize||1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(var B=0;B<i.length;++B){var V=i[B];for(var H=0;H<3;++H){if(isNaN(V[H])||!isFinite(V[H])){continue}this.bounds[0][H]=Math.min(this.bounds[0][H],V[H]);this.bounds[1][H]=Math.max(this.bounds[1][H],V[H])}}var q=0;var G=0;var Z=0;e:for(var B=0;B<r.length;++B){var Y=r[B];switch(Y.length){case 1:var W=Y[0];var V=i[W];for(var H=0;H<3;++H){if(isNaN(V[H])||!isFinite(V[H])){continue e}}y.push(V[0],V[1],V[2]);var X;if(M){X=M[W]}else if(C){X=C[B]}else{X=I}if(this.opacityscale&&O){s.push(X[0],X[1],X[2],this.opacity*S((O[W]-R)/(F-R),this.opacityscale))}else if(X.length===3){m.push(X[0],X[1],X[2],this.opacity)}else{m.push(X[0],X[1],X[2],X[3]*this.opacity);if(X[3]<1)this.hasAlpha=true}var J;if(P){J=P[W]}else if(O){J=[(O[W]-R)/(F-R),0]}else if(D){J=D[B]}else if(z){J=[(z[B]-R)/(F-R),0]}else{J=[(V[2]-R)/(F-R),0]}x.push(J[0],J[1]);if(j){b.push(j[W])}else{b.push(U)}_.push(B);Z+=1;break;case 2:for(var H=0;H<2;++H){var W=Y[H];var V=i[W];for(var K=0;K<3;++K){if(isNaN(V[K])||!isFinite(V[K])){continue e}}}for(var H=0;H<2;++H){var W=Y[H];var V=i[W];h.push(V[0],V[1],V[2]);var X;if(M){X=M[W]}else if(C){X=C[B]}else{X=I}if(this.opacityscale&&O){s.push(X[0],X[1],X[2],this.opacity*S((O[W]-R)/(F-R),this.opacityscale))}else if(X.length===3){p.push(X[0],X[1],X[2],this.opacity)}else{p.push(X[0],X[1],X[2],X[3]*this.opacity);if(X[3]<1)this.hasAlpha=true}var J;if(P){J=P[W]}else if(O){J=[(O[W]-R)/(F-R),0]}else if(D){J=D[B]}else if(z){J=[(z[B]-R)/(F-R),0]}else{J=[(V[2]-R)/(F-R),0]}d.push(J[0],J[1]);g.push(B)}G+=1;break;case 3:for(var H=0;H<3;++H){var W=Y[H];var V=i[W];for(var K=0;K<3;++K){if(isNaN(V[K])||!isFinite(V[K])){continue e}}}for(var H=0;H<3;++H){var W=Y[2-H];var V=i[W];o.push(V[0],V[1],V[2]);var X;if(M){X=M[W]}else if(C){X=C[B]}else{X=I}if(!X){s.push(.5,.5,.5,1)}else if(this.opacityscale&&O){s.push(X[0],X[1],X[2],this.opacity*S((O[W]-R)/(F-R),this.opacityscale))}else if(X.length===3){s.push(X[0],X[1],X[2],this.opacity)}else{s.push(X[0],X[1],X[2],X[3]*this.opacity);if(X[3]<1)this.hasAlpha=true}var J;if(P){J=P[W]}else if(O){J=[(O[W]-R)/(F-R),0]}else if(D){J=D[B]}else if(z){J=[(z[B]-R)/(F-R),0]}else{J=[(V[2]-R)/(F-R),0]}c.push(J[0],J[1]);var $;if(w){$=w[W]}else{$=T[B]}f.push($[0],$[1],$[2]);v.push(B)}q+=1;break;default:break}}this.pointCount=Z;this.edgeCount=G;this.triangleCount=q;this.pointPositions.update(y);this.pointColors.update(m);this.pointUVs.update(x);this.pointSizes.update(b);this.pointIds.update(new Uint32Array(_));this.edgePositions.update(h);this.edgeColors.update(p);this.edgeUVs.update(d);this.edgeIds.update(new Uint32Array(g));this.trianglePositions.update(o);this.triangleColors.update(s);this.triangleUVs.update(c);this.triangleNormals.update(f);this.triangleIds.update(new Uint32Array(v))};M.drawTransparent=M.draw=function(e){e=e||{};var t=this.gl;var r=e.model||k;var n=e.view||k;var a=e.projection||k;var i=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]];for(var o=0;o<3;++o){i[0][o]=Math.max(i[0][o],this.clipBounds[0][o]);i[1][o]=Math.min(i[1][o],this.clipBounds[1][o])}var s={model:r,view:n,projection:a,inverseModel:k.slice(),clipBounds:i,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};s.inverseModel=c(s.inverseModel,s.model);t.disable(t.CULL_FACE);this.texture.bind(0);var l=new Array(16);f(l,s.view,s.model);f(l,s.projection,l);c(l,l);for(var o=0;o<3;++o){s.eyePosition[o]=l[12+o]/l[15]}var u=l[15];for(var o=0;o<3;++o){u+=this.lightPosition[o]*l[4*o+3]}for(var o=0;o<3;++o){var v=l[12+o];for(var h=0;h<3;++h){v+=l[4*h+o]*this.lightPosition[h]}s.lightPosition[o]=v/u}if(this.triangleCount>0){var p=this.triShader;p.bind();p.uniforms=s;this.triangleVAO.bind();t.drawArrays(t.TRIANGLES,0,this.triangleCount*3);this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var p=this.lineShader;p.bind();p.uniforms=s;this.edgeVAO.bind();t.lineWidth(this.lineWidth*this.pixelRatio);t.drawArrays(t.LINES,0,this.edgeCount*2);this.edgeVAO.unbind()}if(this.pointCount>0){var p=this.pointShader;p.bind();p.uniforms=s;this.pointVAO.bind();t.drawArrays(t.POINTS,0,this.pointCount);this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var p=this.contourShader;p.bind();p.uniforms=s;this.contourVAO.bind();t.drawArrays(t.LINES,0,this.contourCount);this.contourVAO.unbind()}};M.drawPick=function(e){e=e||{};var t=this.gl;var r=e.model||k;var n=e.view||k;var a=e.projection||k;var i=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]];for(var o=0;o<3;++o){i[0][o]=Math.max(i[0][o],this.clipBounds[0][o]);i[1][o]=Math.min(i[1][o],this.clipBounds[1][o])}this._model=[].slice.call(r);this._view=[].slice.call(n);this._projection=[].slice.call(a);this._resolution=[t.drawingBufferWidth,t.drawingBufferHeight];var s={model:r,view:n,projection:a,clipBounds:i,pickId:this.pickId/255};var l=this.pickShader;l.bind();l.uniforms=s;if(this.triangleCount>0){this.triangleVAO.bind();t.drawArrays(t.TRIANGLES,0,this.triangleCount*3);this.triangleVAO.unbind()}if(this.edgeCount>0){this.edgeVAO.bind();t.lineWidth(this.lineWidth*this.pixelRatio);t.drawArrays(t.LINES,0,this.edgeCount*2);this.edgeVAO.unbind()}if(this.pointCount>0){var l=this.pointPickShader;l.bind();l.uniforms=s;this.pointVAO.bind();t.drawArrays(t.POINTS,0,this.pointCount);this.pointVAO.unbind()}};M.pick=function(e){if(!e){return null}if(e.id!==this.pickId){return null}var t=e.value[0]+256*e.value[1]+65536*e.value[2];var r=this.cells[t];var n=this.positions;var a=new Array(r.length);for(var i=0;i<r.length;++i){a[i]=n[r[i]]}var o=e.coord[0];var s=e.coord[1];if(!this.pickVertex){var l=this.positions[r[0]];var u=this.positions[r[1]];var f=this.positions[r[2]];var c=[(l[0]+u[0]+f[0])/3,(l[1]+u[1]+f[1])/3,(l[2]+u[2]+f[2])/3];return{_cellCenter:true,position:[o,s],index:t,cell:r,cellId:t,intensity:this.intensity[t],dataCoordinate:c}}var v=y(a,[o*this.pixelRatio,this._resolution[1]-s*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!v){return null}var h=v[2];var p=0;for(var i=0;i<r.length;++i){p+=h[i]*this.intensity[r[i]]}return{position:v[1],index:r[v[0]],cell:r,cellId:t,intensity:p,dataCoordinate:this.positions[r[v[0]]]}};M.dispose=function(){this.texture.dispose();this.triShader.dispose();this.lineShader.dispose();this.pointShader.dispose();this.pickShader.dispose();this.pointPickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();this.triangleNormals.dispose();this.triangleIds.dispose();this.edgeVAO.dispose();this.edgePositions.dispose();this.edgeColors.dispose();this.edgeUVs.dispose();this.edgeIds.dispose();this.pointVAO.dispose();this.pointPositions.dispose();this.pointColors.dispose();this.pointUVs.dispose();this.pointSizes.dispose();this.pointIds.dispose();this.contourVAO.dispose();this.contourPositions.dispose();this.contourShader.dispose()};function C(e){var t=i(e,m.vertex,m.fragment);t.attributes.position.location=0;t.attributes.color.location=2;t.attributes.uv.location=3;t.attributes.normal.location=4;return t}function I(e){var t=i(e,x.vertex,x.fragment);t.attributes.position.location=0;t.attributes.color.location=2;t.attributes.uv.location=3;return t}function P(e){var t=i(e,b.vertex,b.fragment);t.attributes.position.location=0;t.attributes.color.location=2;t.attributes.uv.location=3;t.attributes.pointSize.location=4;return t}function O(e){var t=i(e,_.vertex,_.fragment);t.attributes.position.location=0;t.attributes.id.location=1;return t}function D(e){var t=i(e,w.vertex,w.fragment);t.attributes.position.location=0;t.attributes.id.location=1;t.attributes.pointSize.location=4;return t}function z(e){var t=i(e,T.vertex,T.fragment);t.attributes.position.location=0;return t}function R(e,t){if(arguments.length===1){t=e;e=t.gl}var r=e.getExtension("OES_standard_derivatives")||e.getExtension("MOZ_OES_standard_derivatives")||e.getExtension("WEBKIT_OES_standard_derivatives");if(!r)throw new Error("derivatives not supported");var n=C(e);var a=I(e);var i=P(e);var u=O(e);var f=D(e);var c=z(e);var h=l(e,v(new Uint8Array([255,255,255,255]),[1,1,4]));h.generateMipmap();h.minFilter=e.LINEAR_MIPMAP_LINEAR;h.magFilter=e.LINEAR;var p=o(e);var d=o(e);var g=o(e);var y=o(e);var m=o(e);var x=s(e,[{buffer:p,type:e.FLOAT,size:3},{buffer:m,type:e.UNSIGNED_BYTE,size:4,normalized:true},{buffer:d,type:e.FLOAT,size:4},{buffer:g,type:e.FLOAT,size:2},{buffer:y,type:e.FLOAT,size:3}]);var b=o(e);var _=o(e);var w=o(e);var T=o(e);var k=s(e,[{buffer:b,type:e.FLOAT,size:3},{buffer:T,type:e.UNSIGNED_BYTE,size:4,normalized:true},{buffer:_,type:e.FLOAT,size:4},{buffer:w,type:e.FLOAT,size:2}]);var M=o(e);var S=o(e);var E=o(e);var L=o(e);var R=o(e);var F=s(e,[{buffer:M,type:e.FLOAT,size:3},{buffer:R,type:e.UNSIGNED_BYTE,size:4,normalized:true},{buffer:S,type:e.FLOAT,size:4},{buffer:E,type:e.FLOAT,size:2},{buffer:L,type:e.FLOAT,size:1}]);var B=o(e);var N=s(e,[{buffer:B,type:e.FLOAT,size:3}]);var j=new A(e,h,n,a,i,u,f,c,p,m,d,g,y,x,b,T,_,w,k,M,R,S,E,L,F,B,N);j.update(t);return j}e.exports=R},4554:function(e,t,r){"use strict";e.exports=l;var n=r(5827);var a=r(5158);var i=r(2709);function o(e,t,r){this.plot=e;this.vbo=t;this.shader=r}var s=o.prototype;s.bind=function(){var e=this.shader;this.vbo.bind();this.shader.bind();e.attributes.coord.pointer();e.uniforms.screenBox=this.plot.screenBox};s.drawBox=function(){var e=[0,0];var t=[0,0];return function(r,n,a,i,o){var s=this.plot;var l=this.shader;var u=s.gl;e[0]=r;e[1]=n;t[0]=a;t[1]=i;l.uniforms.lo=e;l.uniforms.hi=t;l.uniforms.color=o;u.drawArrays(u.TRIANGLE_STRIP,0,4)}}();s.dispose=function(){this.vbo.dispose();this.shader.dispose()};function l(e){var t=e.gl;var r=n(t,[0,0,0,1,1,0,1,1]);var s=a(t,i.boxVert,i.lineFrag);return new o(e,r,s)}},3016:function(e,t,r){"use strict";e.exports=f;var n=r(5827);var a=r(5158);var i=r(5070);var o=r(2709);function s(e,t,r,n){this.plot=e;this.vbo=t;this.shader=r;this.tickShader=n;this.ticks=[[],[]]}function l(e,t){return e-t}var u=s.prototype;u.draw=function(){var e=[0,0];var t=[0,0];var r=[0,0];return function(){var n=this.plot;var a=this.vbo;var i=this.shader;var o=this.ticks;var s=n.gl;var l=n._tickBounds;var u=n.dataBox;var f=n.viewBox;var c=n.gridLineWidth;var v=n.gridLineColor;var h=n.gridLineEnable;var p=n.pixelRatio;for(var d=0;d<2;++d){var g=l[d];var y=l[d+2];var m=y-g;var x=.5*(u[d+2]+u[d]);var b=u[d+2]-u[d];t[d]=2*m/b;e[d]=2*(g-x)/b}i.bind();a.bind();i.attributes.dataCoord.pointer();i.uniforms.dataShift=e;i.uniforms.dataScale=t;var _=0;for(var d=0;d<2;++d){r[0]=r[1]=0;r[d]=1;i.uniforms.dataAxis=r;i.uniforms.lineWidth=c[d]/(f[d+2]-f[d])*p;i.uniforms.color=v[d];var w=o[d].length*6;if(h[d]&&w){s.drawArrays(s.TRIANGLES,_,w)}_+=w}}}();u.drawTickMarks=function(){var e=[0,0];var t=[0,0];var r=[1,0];var n=[0,1];var a=[0,0];var o=[0,0];return function(){var s=this.plot;var u=this.vbo;var f=this.tickShader;var c=this.ticks;var v=s.gl;var h=s._tickBounds;var p=s.dataBox;var d=s.viewBox;var g=s.pixelRatio;var y=s.screenBox;var m=y[2]-y[0];var x=y[3]-y[1];var b=d[2]-d[0];var _=d[3]-d[1];for(var w=0;w<2;++w){var T=h[w];var k=h[w+2];var A=k-T;var M=.5*(p[w+2]+p[w]);var S=p[w+2]-p[w];t[w]=2*A/S;e[w]=2*(T-M)/S}t[0]*=b/m;e[0]*=b/m;t[1]*=_/x;e[1]*=_/x;f.bind();u.bind();f.attributes.dataCoord.pointer();var E=f.uniforms;E.dataShift=e;E.dataScale=t;var L=s.tickMarkLength;var C=s.tickMarkWidth;var I=s.tickMarkColor;var P=0;var O=c[0].length*6;var D=Math.min(i.ge(c[0],(p[0]-h[0])/(h[2]-h[0]),l),c[0].length);var z=Math.min(i.gt(c[0],(p[2]-h[0])/(h[2]-h[0]),l),c[0].length);var R=P+6*D;var F=6*Math.max(0,z-D);var B=Math.min(i.ge(c[1],(p[1]-h[1])/(h[3]-h[1]),l),c[1].length);var N=Math.min(i.gt(c[1],(p[3]-h[1])/(h[3]-h[1]),l),c[1].length);var j=O+6*B;var U=6*Math.max(0,N-B);a[0]=2*(d[0]-L[1])/m-1;a[1]=(d[3]+d[1])/x-1;o[0]=L[1]*g/m;o[1]=C[1]*g/x;if(U){E.color=I[1];E.tickScale=o;E.dataAxis=n;E.screenOffset=a;v.drawArrays(v.TRIANGLES,j,U)}a[0]=(d[2]+d[0])/m-1;a[1]=2*(d[1]-L[0])/x-1;o[0]=C[0]*g/m;o[1]=L[0]*g/x;if(F){E.color=I[0];E.tickScale=o;E.dataAxis=r;E.screenOffset=a;v.drawArrays(v.TRIANGLES,R,F)}a[0]=2*(d[2]+L[3])/m-1;a[1]=(d[3]+d[1])/x-1;o[0]=L[3]*g/m;o[1]=C[3]*g/x;if(U){E.color=I[3];E.tickScale=o;E.dataAxis=n;E.screenOffset=a;v.drawArrays(v.TRIANGLES,j,U)}a[0]=(d[2]+d[0])/m-1;a[1]=2*(d[3]+L[2])/x-1;o[0]=C[2]*g/m;o[1]=L[2]*g/x;if(F){E.color=I[2];E.tickScale=o;E.dataAxis=r;E.screenOffset=a;v.drawArrays(v.TRIANGLES,R,F)}}}();u.update=function(){var e=[1,1,-1,-1,1,-1];var t=[1,-1,1,1,-1,-1];return function(r){var n=r.ticks;var a=r.bounds;var i=new Float32Array(6*3*(n[0].length+n[1].length));var o=this.plot.zeroLineEnable;var s=0;var l=[[],[]];for(var u=0;u<2;++u){var f=l[u];var c=n[u];var v=a[u];var h=a[u+2];for(var p=0;p<c.length;++p){var d=(c[p].x-v)/(h-v);f.push(d);for(var g=0;g<6;++g){i[s++]=d;i[s++]=e[g];i[s++]=t[g]}}}this.ticks=l;this.vbo.update(i)}}();u.dispose=function(){this.vbo.dispose();this.shader.dispose();this.tickShader.dispose()};function f(e){var t=e.gl;var r=n(t);var i=a(t,o.gridVert,o.gridFrag);var l=a(t,o.tickVert,o.gridFrag);var u=new s(e,r,i,l);return u}},1154:function(e,t,r){"use strict";e.exports=l;var n=r(5827);var a=r(5158);var i=r(2709);function o(e,t,r){this.plot=e;this.vbo=t;this.shader=r}var s=o.prototype;s.bind=function(){var e=this.shader;this.vbo.bind();this.shader.bind();e.attributes.coord.pointer();e.uniforms.screenBox=this.plot.screenBox};s.drawLine=function(){var e=[0,0];var t=[0,0];return function(r,n,a,i,o,s){var l=this.plot;var u=this.shader;var f=l.gl;e[0]=r;e[1]=n;t[0]=a;t[1]=i;u.uniforms.start=e;u.uniforms.end=t;u.uniforms.width=o*l.pixelRatio;u.uniforms.color=s;f.drawArrays(f.TRIANGLE_STRIP,0,4)}}();s.dispose=function(){this.vbo.dispose();this.shader.dispose()};function l(e){var t=e.gl;var r=n(t,[-1,-1,-1,1,1,-1,1,1]);var s=a(t,i.lineVert,i.lineFrag);var l=new o(e,r,s);return l}},2709:function(e,t,r){"use strict";var n=r(6832);var a=n(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);e.exports={lineVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:a,textVert:n(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:a,gridVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:a,boxVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},5613:function(e,t,r){"use strict";e.exports=f;var n=r(5827);var a=r(5158);var i=r(6946);var o=r(5070);var s=r(2709);function l(e,t,r){this.plot=e;this.vbo=t;this.shader=r;this.tickOffset=[[],[]];this.tickX=[[],[]];this.labelOffset=[0,0];this.labelCount=[0,0]}var u=l.prototype;u.drawTicks=function(){var e=[0,0];var t=[0,0];var r=[0,0];return function(n){var a=this.plot;var i=this.shader;var s=this.tickX[n];var l=this.tickOffset[n];var u=a.gl;var f=a.viewBox;var c=a.dataBox;var v=a.screenBox;var h=a.pixelRatio;var p=a.tickEnable;var d=a.tickPad;var g=a.tickColor;var y=a.tickAngle;var m=a.labelEnable;var x=a.labelPad;var b=a.labelColor;var _=a.labelAngle;var w=this.labelOffset[n];var T=this.labelCount[n];var k=o.lt(s,c[n]);var A=o.le(s,c[n+2]);e[0]=e[1]=0;e[n]=1;t[n]=(f[2+n]+f[n])/(v[2+n]-v[n])-1;var M=2/v[2+(n^1)]-v[n^1];t[n^1]=M*f[n^1]-1;if(p[n]){t[n^1]-=M*h*d[n];if(k<A&&l[A]>l[k]){i.uniforms.dataAxis=e;i.uniforms.screenOffset=t;i.uniforms.color=g[n];i.uniforms.angle=y[n];u.drawArrays(u.TRIANGLES,l[k],l[A]-l[k])}}if(m[n]&&T){t[n^1]-=M*h*x[n];i.uniforms.dataAxis=r;i.uniforms.screenOffset=t;i.uniforms.color=b[n];i.uniforms.angle=_[n];u.drawArrays(u.TRIANGLES,w,T)}t[n^1]=M*f[2+(n^1)]-1;if(p[n+2]){t[n^1]+=M*h*d[n+2];if(k<A&&l[A]>l[k]){i.uniforms.dataAxis=e;i.uniforms.screenOffset=t;i.uniforms.color=g[n+2];i.uniforms.angle=y[n+2];u.drawArrays(u.TRIANGLES,l[k],l[A]-l[k])}}if(m[n+2]&&T){t[n^1]+=M*h*x[n+2];i.uniforms.dataAxis=r;i.uniforms.screenOffset=t;i.uniforms.color=b[n+2];i.uniforms.angle=_[n+2];u.drawArrays(u.TRIANGLES,w,T)}}}();u.drawTitle=function(){var e=[0,0];var t=[0,0];return function(){var r=this.plot;var n=this.shader;var a=r.gl;var i=r.screenBox;var o=r.titleCenter;var s=r.titleAngle;var l=r.titleColor;var u=r.pixelRatio;if(!this.titleCount){return}for(var f=0;f<2;++f){t[f]=2*(o[f]*u-i[f])/(i[2+f]-i[f])-1}n.bind();n.uniforms.dataAxis=e;n.uniforms.screenOffset=t;n.uniforms.angle=s;n.uniforms.color=l;a.drawArrays(a.TRIANGLES,this.titleOffset,this.titleCount)}}();u.bind=function(){var e=[0,0];var t=[0,0];var r=[0,0];return function(){var n=this.plot;var a=this.shader;var i=n._tickBounds;var o=n.dataBox;var s=n.screenBox;var l=n.viewBox;a.bind();for(var u=0;u<2;++u){var f=i[u];var c=i[u+2];var v=c-f;var h=.5*(o[u+2]+o[u]);var p=o[u+2]-o[u];var d=l[u];var g=l[u+2];var y=g-d;var m=s[u];var x=s[u+2];var b=x-m;t[u]=2*v/p*y/b;e[u]=2*(f-h)/p*y/b}r[1]=2*n.pixelRatio/(s[3]-s[1]);r[0]=r[1]*(s[3]-s[1])/(s[2]-s[0]);a.uniforms.dataScale=t;a.uniforms.dataShift=e;a.uniforms.textScale=r;this.vbo.bind();a.attributes.textCoordinate.pointer()}}();u.update=function(e){var t=[];var r=e.ticks;var n=e.bounds;var a,o,s,l,u,f;for(f=0;f<2;++f){var c=[Math.floor(t.length/3)],v=[-Infinity];var h=r[f];for(a=0;a<h.length;++a){var p=h[a];var d=p.x;var g=p.text;var y=p.font||"sans-serif";u=p.fontSize||12;var m=1/(n[f+2]-n[f]);var x=n[f];var b=g.split("\n");for(var _=0;_<b.length;_++){l=i(y,b[_]).data;for(o=0;o<l.length;o+=2){t.push(l[o]*u,-l[o+1]*u-_*u*1.2,(d-x)*m)}}c.push(Math.floor(t.length/3));v.push(d)}this.tickOffset[f]=c;this.tickX[f]=v}for(f=0;f<2;++f){this.labelOffset[f]=Math.floor(t.length/3);l=i(e.labelFont[f],e.labels[f],{textAlign:"center"}).data;u=e.labelSize[f];for(a=0;a<l.length;a+=2){t.push(l[a]*u,-l[a+1]*u,0)}this.labelCount[f]=Math.floor(t.length/3)-this.labelOffset[f]}this.titleOffset=Math.floor(t.length/3);l=i(e.titleFont,e.title).data;u=e.titleSize;for(a=0;a<l.length;a+=2){t.push(l[a]*u,-l[a+1]*u,0)}this.titleCount=Math.floor(t.length/3)-this.titleOffset;this.vbo.update(t)};u.dispose=function(){this.vbo.dispose();this.shader.dispose()};function f(e){var t=e.gl;var r=n(t);var i=a(t,s.textVert,s.textFrag);var o=new l(e,r,i);return o}},2117:function(e,t,r){"use strict";e.exports=h;var n=r(2611);var a=r(3016);var i=r(5613);var o=r(1154);var s=r(4554);function l(e,t){this.gl=e;this.pickBuffer=t;this.screenBox=[0,0,e.drawingBufferWidth,e.drawingBufferHeight];this.viewBox=[0,0,0,0];this.dataBox=[-10,-10,10,10];this.gridLineEnable=[true,true];this.gridLineWidth=[1,1];this.gridLineColor=[[0,0,0,1],[0,0,0,1]];this.pixelRatio=1;this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickEnable=[true,true,true,true];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[15,15,15,15];this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2];this.labelEnable=[true,true,true,true];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.titleCenter=[0,0];this.titleEnable=true;this.titleAngle=0;this.titleColor=[0,0,0,1];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.zeroLineEnable=[true,true];this.zeroLineWidth=[4,4];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderLineEnable=[true,true,true,true];this.borderLineWidth=[2,2,2,2];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.grid=null;this.text=null;this.line=null;this.box=null;this.objects=[];this.overlays=[];this._tickBounds=[Infinity,Infinity,-Infinity,-Infinity];this.static=false;this.dirty=false;this.pickDirty=false;this.pickDelay=120;this.pickRadius=10;this._pickTimeout=null;this._drawPick=this.drawPick.bind(this);this._depthCounter=0}var u=l.prototype;u.setDirty=function(){this.dirty=this.pickDirty=true};u.setOverlayDirty=function(){this.dirty=true};u.nextDepthValue=function(){return this._depthCounter++/65536};function f(e,t,r){var n=.5*(r+1);return Math.floor((1-n)*e+n*t)|0}u.draw=function(){var e=[0,0,0,0];return function(){var e=this.gl;var t=this.screenBox;var r=this.viewBox;var n=this.dataBox;var a=this.pixelRatio;var i=this.grid;var o=this.line;var s=this.text;var l=this.objects;this._depthCounter=0;if(this.pickDirty){if(this._pickTimeout){clearTimeout(this._pickTimeout)}this.pickDirty=false;this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)}if(!this.dirty){return}this.dirty=false;e.bindFramebuffer(e.FRAMEBUFFER,null);e.enable(e.SCISSOR_TEST);e.disable(e.DEPTH_TEST);e.depthFunc(e.LESS);e.depthMask(false);e.enable(e.BLEND);e.blendEquation(e.FUNC_ADD,e.FUNC_ADD);e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA);if(this.borderColor){e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]);var u=this.borderColor;e.clearColor(u[0]*u[3],u[1]*u[3],u[2]*u[3],u[3]);e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}e.scissor(r[0],r[1],r[2]-r[0],r[3]-r[1]);e.viewport(r[0],r[1],r[2]-r[0],r[3]-r[1]);var f=this.backgroundColor;e.clearColor(f[0]*f[3],f[1]*f[3],f[2]*f[3],f[3]);e.clear(e.COLOR_BUFFER_BIT);i.draw();var c=this.zeroLineEnable;var v=this.zeroLineColor;var h=this.zeroLineWidth;if(c[0]||c[1]){o.bind();for(var p=0;p<2;++p){if(!c[p]||!(n[p]<=0&&n[p+2]>=0)){continue}var d=t[p]-n[p]*(t[p+2]-t[p])/(n[p+2]-n[p]);if(p===0){o.drawLine(d,t[1],d,t[3],h[p],v[p])}else{o.drawLine(t[0],d,t[2],d,h[p],v[p])}}}for(var p=0;p<l.length;++p){l[p].draw()}e.viewport(t[0],t[1],t[2]-t[0],t[3]-t[1]);e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]);this.grid.drawTickMarks();o.bind();var g=this.borderLineEnable;var y=this.borderLineWidth;var m=this.borderLineColor;if(g[1]){o.drawLine(r[0],r[1]-.5*y[1]*a,r[0],r[3]+.5*y[3]*a,y[1],m[1])}if(g[0]){o.drawLine(r[0]-.5*y[0]*a,r[1],r[2]+.5*y[2]*a,r[1],y[0],m[0])}if(g[3]){o.drawLine(r[2],r[1]-.5*y[1]*a,r[2],r[3]+.5*y[3]*a,y[3],m[3])}if(g[2]){o.drawLine(r[0]-.5*y[0]*a,r[3],r[2]+.5*y[2]*a,r[3],y[2],m[2])}s.bind();for(var p=0;p<2;++p){s.drawTicks(p)}if(this.titleEnable){s.drawTitle()}var x=this.overlays;for(var p=0;p<x.length;++p){x[p].draw()}e.disable(e.SCISSOR_TEST);e.disable(e.BLEND);e.depthMask(true)}}();u.drawPick=function(){return function(){if(this.static)return;var e=this.pickBuffer;var t=this.gl;this._pickTimeout=null;e.begin();var r=1;var n=this.objects;for(var a=0;a<n.length;++a){r=n[a].drawPick(r)}e.end()}}();u.pick=function(){return function(e,t){if(this.static)return;var r=this.pixelRatio;var n=this.pickPixelRatio;var a=this.viewBox;var i=Math.round((e-a[0]/r)*n)|0;var o=Math.round((t-a[1]/r)*n)|0;var s=this.pickBuffer.query(i,o,this.pickRadius);if(!s){return null}var l=s.id+(s.value[0]<<8)+(s.value[1]<<16)+(s.value[2]<<24);var u=this.objects;for(var f=0;f<u.length;++f){var c=u[f].pick(i,o,l);if(c){return c}}return null}}();function c(e){var t=e.slice();for(var r=0;r<t.length;++r){t[r]=t[r].slice()}return t}function v(e,t){return e.x-t.x}u.setScreenBox=function(e){var t=this.screenBox;var r=this.pixelRatio;t[0]=Math.round(e[0]*r)|0;t[1]=Math.round(e[1]*r)|0;t[2]=Math.round(e[2]*r)|0;t[3]=Math.round(e[3]*r)|0;this.setDirty()};u.setDataBox=function(e){var t=this.dataBox;var r=t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3];if(r){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];this.setDirty()}};u.setViewBox=function(e){var t=this.pixelRatio;var r=this.viewBox;r[0]=Math.round(e[0]*t)|0;r[1]=Math.round(e[1]*t)|0;r[2]=Math.round(e[2]*t)|0;r[3]=Math.round(e[3]*t)|0;var n=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((e[2]-e[0])*n)|0,Math.round((e[3]-e[1])*n)|0];this.setDirty()};u.update=function(e){e=e||{};var t=this.gl;this.pixelRatio=e.pixelRatio||1;var r=this.pixelRatio;this.pickPixelRatio=Math.max(r,1);this.setScreenBox(e.screenBox||[0,0,t.drawingBufferWidth/r,t.drawingBufferHeight/r]);var n=this.screenBox;this.setViewBox(e.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/r,.125*(this.screenBox[3]-this.screenBox[1])/r,.875*(this.screenBox[2]-this.screenBox[0])/r,.875*(this.screenBox[3]-this.screenBox[1])/r]);var a=this.viewBox;var i=(a[2]-a[0])/(a[3]-a[1]);this.setDataBox(e.dataBox||[-10,-10/i,10,10/i]);this.borderColor=e.borderColor!==false?(e.borderColor||[0,0,0,0]).slice():false;this.backgroundColor=(e.backgroundColor||[0,0,0,0]).slice();this.gridLineEnable=(e.gridLineEnable||[true,true]).slice();this.gridLineWidth=(e.gridLineWidth||[1,1]).slice();this.gridLineColor=c(e.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]);this.zeroLineEnable=(e.zeroLineEnable||[true,true]).slice();this.zeroLineWidth=(e.zeroLineWidth||[4,4]).slice();this.zeroLineColor=c(e.zeroLineColor||[[0,0,0,1],[0,0,0,1]]);this.tickMarkLength=(e.tickMarkLength||[0,0,0,0]).slice();this.tickMarkWidth=(e.tickMarkWidth||[0,0,0,0]).slice();this.tickMarkColor=c(e.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.titleCenter=(e.titleCenter||[.5*(a[0]+a[2])/r,(a[3]+120)/r]).slice();this.titleEnable=!("titleEnable"in e)||!!e.titleEnable;this.titleAngle=e.titleAngle||0;this.titleColor=(e.titleColor||[0,0,0,1]).slice();this.labelPad=(e.labelPad||[15,15,15,15]).slice();this.labelAngle=(e.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice();this.labelEnable=(e.labelEnable||[true,true,true,true]).slice();this.labelColor=c(e.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.tickPad=(e.tickPad||[15,15,15,15]).slice();this.tickAngle=(e.tickAngle||[0,0,0,0]).slice();this.tickEnable=(e.tickEnable||[true,true,true,true]).slice();this.tickColor=c(e.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.borderLineEnable=(e.borderLineEnable||[true,true,true,true]).slice();this.borderLineWidth=(e.borderLineWidth||[2,2,2,2]).slice();this.borderLineColor=c(e.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var o=e.ticks||[[],[]];var s=this._tickBounds;s[0]=s[1]=Infinity;s[2]=s[3]=-Infinity;for(var l=0;l<2;++l){var u=o[l].slice(0);if(u.length===0){continue}u.sort(v);s[l]=Math.min(s[l],u[0].x);s[l+2]=Math.max(s[l+2],u[u.length-1].x)}this.grid.update({bounds:s,ticks:o});this.text.update({bounds:s,ticks:o,labels:e.labels||["x","y"],labelSize:e.labelSize||[12,12],labelFont:e.labelFont||["sans-serif","sans-serif"],title:e.title||"",titleSize:e.titleSize||18,titleFont:e.titleFont||"sans-serif"});this.static=!!e.static;this.setDirty()};u.dispose=function(){this.box.dispose();this.grid.dispose();this.text.dispose();this.line.dispose();for(var e=this.objects.length-1;e>=0;--e){this.objects[e].dispose()}this.objects.length=0;for(var e=this.overlays.length-1;e>=0;--e){this.overlays[e].dispose()}this.overlays.length=0;this.gl=null};u.addObject=function(e){if(this.objects.indexOf(e)<0){this.objects.push(e);this.setDirty()}};u.removeObject=function(e){var t=this.objects;for(var r=0;r<t.length;++r){if(t[r]===e){t.splice(r,1);this.setDirty();break}}};u.addOverlay=function(e){if(this.overlays.indexOf(e)<0){this.overlays.push(e);this.setOverlayDirty()}};u.removeOverlay=function(e){var t=this.overlays;for(var r=0;r<t.length;++r){if(t[r]===e){t.splice(r,1);this.setOverlayDirty();break}}};function h(e){var t=e.gl;var r=n(t,[t.drawingBufferWidth,t.drawingBufferHeight]);var u=new l(t,r);u.grid=a(u);u.text=i(u);u.line=o(u);u.box=s(u);u.update(e);return u}},4296:function(e,t,r){"use strict";e.exports=u;var n=r(8161);var a=r(1152);var i=r(6145);var o=r(6475);var s=r(2565);var l=r(5233);function u(e,t){e=e||document.body;t=t||{};var r=[.01,Infinity];if("distanceLimits"in t){r[0]=t.distanceLimits[0];r[1]=t.distanceLimits[1]}if("zoomMin"in t){r[0]=t.zoomMin}if("zoomMax"in t){r[1]=t.zoomMax}var u=a({center:t.center||[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:r});var f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var c=0;var v=e.clientWidth;var h=e.clientHeight;var p={keyBindingMode:"rotate",enableWheel:true,view:u,element:e,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:u.modes,_ortho:t._ortho||t.projection&&t.projection.type==="orthographic"||false,tick:function(){var t=n();var r=this.delay;var a=t-2*r;u.idle(t-r);u.recalcMatrix(a);u.flush(t-(100+r*2));var i=true;var o=u.computedMatrix;for(var s=0;s<16;++s){i=i&&f[s]===o[s];f[s]=o[s]}var l=e.clientWidth===v&&e.clientHeight===h;v=e.clientWidth;h=e.clientHeight;if(i){return!l}c=Math.exp(u.computedRadius[0]);return true},lookAt:function(e,t,r){u.lookAt(u.lastT(),e,t,r)},rotate:function(e,t,r){u.rotate(u.lastT(),e,t,r)},pan:function(e,t,r){u.pan(u.lastT(),e,t,r)},translate:function(e,t,r){u.translate(u.lastT(),e,t,r)}};Object.defineProperties(p,{matrix:{get:function(){return u.computedMatrix},set:function(e){u.setMatrix(u.lastT(),e);return u.computedMatrix},enumerable:true},mode:{get:function(){return u.getMode()},set:function(e){var t=u.computedUp.slice();var r=u.computedEye.slice();var a=u.computedCenter.slice();u.setMode(e);if(e==="turntable"){var i=n();u._active.lookAt(i,r,a,t);u._active.lookAt(i+500,r,a,[0,0,1]);u._active.flush(i)}return u.getMode()},enumerable:true},center:{get:function(){return u.computedCenter},set:function(e){u.lookAt(u.lastT(),null,e);return u.computedCenter},enumerable:true},eye:{get:function(){return u.computedEye},set:function(e){u.lookAt(u.lastT(),e);return u.computedEye},enumerable:true},up:{get:function(){return u.computedUp},set:function(e){u.lookAt(u.lastT(),null,null,e);return u.computedUp},enumerable:true},distance:{get:function(){return c},set:function(e){u.setDistance(u.lastT(),e);return e},enumerable:true},distanceLimits:{get:function(){return u.getDistanceLimits(r)},set:function(e){u.setDistanceLimits(e);return e},enumerable:true}});e.addEventListener("contextmenu",(function(e){e.preventDefault();return false}));p._lastX=-1;p._lastY=-1;p._lastMods={shift:false,control:false,alt:false,meta:false};p.enableMouseListeners=function(){p.mouseListener=i(e,t);e.addEventListener("touchstart",(function(r){var n=s(r.changedTouches[0],e);t(0,n[0],n[1],p._lastMods);t(1,n[0],n[1],p._lastMods)}),l?{passive:true}:false);e.addEventListener("touchmove",(function(r){var n=s(r.changedTouches[0],e);t(1,n[0],n[1],p._lastMods);r.preventDefault()}),l?{passive:false}:false);e.addEventListener("touchend",(function(e){t(0,p._lastX,p._lastY,p._lastMods)}),l?{passive:true}:false);function t(t,r,a,i){var o=p.keyBindingMode;if(o===false)return;var s=o==="rotate";var l=o==="pan";var f=o==="zoom";var v=!!i.control;var h=!!i.alt;var d=!!i.shift;var g=!!(t&1);var y=!!(t&2);var m=!!(t&4);var x=1/e.clientHeight;var b=x*(r-p._lastX);var _=x*(a-p._lastY);var w=p.flipX?1:-1;var T=p.flipY?1:-1;var k=Math.PI*p.rotateSpeed;var A=n();if(p._lastX!==-1&&p._lastY!==-1){if(s&&g&&!v&&!h&&!d||g&&!v&&!h&&d){u.rotate(A,w*k*b,-T*k*_,0)}if(l&&g&&!v&&!h&&!d||y||g&&v&&!h&&!d){u.pan(A,-p.translateSpeed*b*c,p.translateSpeed*_*c,0)}if(f&&g&&!v&&!h&&!d||m||g&&!v&&h&&!d){var M=-p.zoomSpeed*_/window.innerHeight*(A-u.lastT())*100;u.pan(A,0,0,c*(Math.exp(M)-1))}}p._lastX=r;p._lastY=a;p._lastMods=i;return true}p.wheelListener=o(e,(function(e,t){if(p.keyBindingMode===false)return;if(!p.enableWheel)return;var r=p.flipX?1:-1;var a=p.flipY?1:-1;var i=n();if(Math.abs(e)>Math.abs(t)){u.rotate(i,0,0,-e*r*Math.PI*p.rotateSpeed/window.innerWidth)}else{if(!p._ortho){var o=-p.zoomSpeed*a*t/window.innerHeight*(i-u.lastT())/20;u.pan(i,0,0,c*(Math.exp(o)-1))}}}),true)};p.enableMouseListeners();return p}},8245:function(e,t,r){var n=r(6832);var a=r(5158);var i=n(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]);var o=n(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);e.exports=function(e){return a(e,i,o,null,[{name:"position",type:"vec2"}])}},1059:function(e,t,r){"use strict";var n=r(4296);var a=r(7453);var i=r(2771);var o=r(6496);var s=r(2611);var l=r(4234);var u=r(8126);var f=r(6145);var c=r(1120);var v=r(5268);var h=r(8245);var p=r(2321)({tablet:true,featureDetect:true});e.exports={createScene:x,createCamera:n};function d(){this.mouse=[-1,-1];this.screen=null;this.distance=Infinity;this.index=null;this.dataCoordinate=null;this.dataPosition=null;this.object=null;this.data=null}function g(e,t){var r=null;try{r=e.getContext("webgl",t);if(!r){r=e.getContext("experimental-webgl",t)}}catch(n){return null}return r}function y(e){var t=Math.round(Math.log(Math.abs(e))/Math.log(10));if(t<0){var r=Math.round(Math.pow(10,-t));return Math.ceil(e*r)/r}else if(t>0){var r=Math.round(Math.pow(10,t));return Math.ceil(e/r)*r}return Math.ceil(e)}function m(e){if(typeof e==="boolean"){return e}return true}function x(e){e=e||{};e.camera=e.camera||{};var t=e.canvas;if(!t){t=document.createElement("canvas");if(e.container){var r=e.container;r.appendChild(t)}else{document.body.appendChild(t)}}var c=e.gl;if(!c){if(e.glOptions){p=!!e.glOptions.preserveDrawingBuffer}c=g(t,e.glOptions||{premultipliedAlpha:true,antialias:true,preserveDrawingBuffer:p})}if(!c){throw new Error("webgl not supported")}var v=e.bounds||[[-10,-10,-10],[10,10,10]];var x=new d;var _=l(c,c.drawingBufferWidth,c.drawingBufferHeight,{preferFloat:!p});var w=h(c);var T=e.cameraObject&&e.cameraObject._ortho===true||e.camera.projection&&e.camera.projection.type==="orthographic"||false;var k={eye:e.camera.eye||[2,0,0],center:e.camera.center||[0,0,0],up:e.camera.up||[0,1,0],zoomMin:e.camera.zoomMax||.1,zoomMax:e.camera.zoomMin||100,mode:e.camera.mode||"turntable",_ortho:T};var A=e.axes||{};var M=a(c,A);M.enable=!A.disable;var S=e.spikes||{};var E=o(c,S);var L=[];var C=[];var I=[];var P=[];var O=true;var D=true;var z=new Array(16);var R=new Array(16);var F={view:null,projection:z,model:R,_ortho:false};var D=true;var B=[c.drawingBufferWidth,c.drawingBufferHeight];var N=e.cameraObject||n(t,k);var j={gl:c,contextLost:false,pixelRatio:e.pixelRatio||1,canvas:t,selection:x,camera:N,axes:M,axesPixels:null,spikes:E,bounds:v,objects:L,shape:B,aspect:e.aspectRatio||[1,1,1],pickRadius:e.pickRadius||10,zNear:e.zNear||.01,zFar:e.zFar||1e3,fovy:e.fovy||Math.PI/4,clearColor:e.clearColor||[0,0,0,0],autoResize:m(e.autoResize),autoBounds:m(e.autoBounds),autoScale:!!e.autoScale,autoCenter:m(e.autoCenter),clipToBounds:m(e.clipToBounds),snapToData:!!e.snapToData,onselect:e.onselect||null,onrender:e.onrender||null,onclick:e.onclick||null,cameraParams:F,oncontextloss:null,mouseListener:null,_stopped:false,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(e){this.aspect[0]=e.x;this.aspect[1]=e.y;this.aspect[2]=e.z;D=true},setBounds:function(e,t){this.bounds[0][e]=t.min;this.bounds[1][e]=t.max},setClearColor:function(e){this.clearColor=e},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]);this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}};var U=[c.drawingBufferWidth/j.pixelRatio|0,c.drawingBufferHeight/j.pixelRatio|0];function V(){if(j._stopped){return}if(!j.autoResize){return}var e=t.parentNode;var r=1;var n=1;if(e&&e!==document.body){r=e.clientWidth;n=e.clientHeight}else{r=window.innerWidth;n=window.innerHeight}var a=Math.ceil(r*j.pixelRatio)|0;var i=Math.ceil(n*j.pixelRatio)|0;if(a!==t.width||i!==t.height){t.width=a;t.height=i;var o=t.style;o.position=o.position||"absolute";o.left="0px";o.top="0px";o.width=r+"px";o.height=n+"px";O=true}}if(j.autoResize){V()}window.addEventListener("resize",V);function H(){var e=L.length;var t=P.length;for(var r=0;r<t;++r){I[r]=0}e:for(var r=0;r<e;++r){var n=L[r];var a=n.pickSlots;if(!a){C[r]=-1;continue}for(var i=0;i<t;++i){if(I[i]+a<255){C[r]=i;n.setPickBase(I[i]+1);I[i]+=a;continue e}}var o=s(c,B);C[r]=t;P.push(o);I.push(a);n.setPickBase(1);t+=1}while(t>0&&I[t-1]===0){I.pop();P.pop().dispose()}}j.update=function(e){if(j._stopped){return}e=e||{};O=true;D=true};j.add=function(e){if(j._stopped){return}e.axes=M;L.push(e);C.push(-1);O=true;D=true;H()};j.remove=function(e){if(j._stopped){return}var t=L.indexOf(e);if(t<0){return}L.splice(t,1);C.pop();O=true;D=true;H()};j.dispose=function(){if(j._stopped){return}j._stopped=true;window.removeEventListener("resize",V);t.removeEventListener("webglcontextlost",q);j.mouseListener.enabled=false;if(j.contextLost){return}M.dispose();E.dispose();for(var e=0;e<L.length;++e){L[e].dispose()}_.dispose();for(var e=0;e<P.length;++e){P[e].dispose()}w.dispose();c=null;M=null;E=null;L=[]};j._mouseRotating=false;j._prevButtons=0;j.enableMouseListeners=function(){j.mouseListener=f(t,(function(e,t,r){if(j._stopped){return}var n=P.length;var a=L.length;var i=x.object;x.distance=Infinity;x.mouse[0]=t;x.mouse[1]=r;x.object=null;x.screen=null;x.dataCoordinate=x.dataPosition=null;var o=false;if(e&&j._prevButtons){j._mouseRotating=true}else{if(j._mouseRotating){D=true}j._mouseRotating=false;for(var s=0;s<n;++s){var l=P[s].query(t,U[1]-r-1,j.pickRadius);if(l){if(l.distance>x.distance){continue}for(var u=0;u<a;++u){var f=L[u];if(C[u]!==s){continue}var c=f.pick(l);if(c){x.buttons=e;x.screen=l.coord;x.distance=l.distance;x.object=f;x.index=c.distance;x.dataPosition=c.position;x.dataCoordinate=c.dataCoordinate;x.data=c;o=true}}}}}if(i&&i!==x.object){if(i.highlight){i.highlight(null)}O=true}if(x.object){if(x.object.highlight){x.object.highlight(x.data)}O=true}o=o||x.object!==i;if(o&&j.onselect){j.onselect(x)}if(e&1&&!(j._prevButtons&1)&&j.onclick){j.onclick(x)}j._prevButtons=e}))};function q(){if(j.contextLost){return true}if(c.isContextLost()){j.contextLost=true;j.mouseListener.enabled=false;j.selection.object=null;if(j.oncontextloss){j.oncontextloss()}}}t.addEventListener("webglcontextlost",q);function G(){if(q()){return}c.colorMask(true,true,true,true);c.depthMask(true);c.disable(c.BLEND);c.enable(c.DEPTH_TEST);c.depthFunc(c.LEQUAL);var e=L.length;var t=P.length;for(var r=0;r<t;++r){var n=P[r];n.shape=U;n.begin();for(var a=0;a<e;++a){if(C[a]!==r){continue}var i=L[a];if(i.drawPick){i.pixelRatio=1;i.drawPick(F)}}n.end()}}var Z=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];var Y=[Z[0].slice(),Z[1].slice()];function W(){if(q()){return}V();var e=j.camera.tick();F.view=j.camera.matrix;O=O||e;D=D||e;M.pixelRatio=j.pixelRatio;E.pixelRatio=j.pixelRatio;var t=L.length;var r=Z[0];var n=Z[1];r[0]=r[1]=r[2]=Infinity;n[0]=n[1]=n[2]=-Infinity;for(var a=0;a<t;++a){var o=L[a];o.pixelRatio=j.pixelRatio;o.axes=j.axes;O=O||!!o.dirty;D=D||!!o.dirty;var s=o.bounds;if(s){var l=s[0];var f=s[1];for(var v=0;v<3;++v){r[v]=Math.min(r[v],l[v]);n[v]=Math.max(n[v],f[v])}}}var h=j.bounds;if(j.autoBounds){for(var v=0;v<3;++v){if(n[v]<r[v]){r[v]=-1;n[v]=1}else{if(r[v]===n[v]){r[v]-=1;n[v]+=1}var p=.05*(n[v]-r[v]);r[v]=r[v]-p;n[v]=n[v]+p}h[0][v]=r[v];h[1][v]=n[v]}}var d=false;for(var v=0;v<3;++v){d=d||Y[0][v]!==h[0][v]||Y[1][v]!==h[1][v];Y[0][v]=h[0][v];Y[1][v]=h[1][v]}D=D||d;O=O||d;if(!O){return}if(d){var g=[0,0,0];for(var a=0;a<3;++a){g[a]=y((h[1][a]-h[0][a])/10)}if(M.autoTicks){M.update({bounds:h,tickSpacing:g})}else{M.update({bounds:h})}}var m=c.drawingBufferWidth;var k=c.drawingBufferHeight;B[0]=m;B[1]=k;U[0]=Math.max(m/j.pixelRatio,1)|0;U[1]=Math.max(k/j.pixelRatio,1)|0;b(j,T);for(var a=0;a<t;++a){var o=L[a];o.axesBounds=h;if(j.clipToBounds){o.clipBounds=h}}if(x.object){if(j.snapToData){E.position=x.dataCoordinate}else{E.position=x.dataPosition}E.bounds=h}if(D){D=false;G()}j.axesPixels=i(j.axes,F,m,k);if(j.onrender){j.onrender()}c.bindFramebuffer(c.FRAMEBUFFER,null);c.viewport(0,0,m,k);j.clearRGBA();c.depthMask(true);c.colorMask(true,true,true,true);c.enable(c.DEPTH_TEST);c.depthFunc(c.LEQUAL);c.disable(c.BLEND);c.disable(c.CULL_FACE);var A=false;if(M.enable){A=A||M.isTransparent();M.draw(F)}E.axes=M;if(x.object){E.draw(F)}c.disable(c.CULL_FACE);for(var a=0;a<t;++a){var o=L[a];o.axes=M;o.pixelRatio=j.pixelRatio;if(o.isOpaque&&o.isOpaque()){o.draw(F)}if(o.isTransparent&&o.isTransparent()){A=true}}if(A){_.shape=B;_.bind();c.clear(c.DEPTH_BUFFER_BIT);c.colorMask(false,false,false,false);c.depthMask(true);c.depthFunc(c.LESS);if(M.enable&&M.isTransparent()){M.drawTransparent(F)}for(var a=0;a<t;++a){var o=L[a];if(o.isOpaque&&o.isOpaque()){o.draw(F)}}c.enable(c.BLEND);c.blendEquation(c.FUNC_ADD);c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA);c.colorMask(true,true,true,true);c.depthMask(false);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);if(M.isTransparent()){M.drawTransparent(F)}for(var a=0;a<t;++a){var o=L[a];if(o.isTransparent&&o.isTransparent()){o.drawTransparent(F)}}c.bindFramebuffer(c.FRAMEBUFFER,null);c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA);c.disable(c.DEPTH_TEST);w.bind();_.color[0].bind(0);w.uniforms.accumBuffer=0;u(c);c.disable(c.BLEND)}O=false;for(var a=0;a<t;++a){L[a].dirty=false}}function X(){if(j._stopped||j.contextLost){return}W();requestAnimationFrame(X)}j.enableMouseListeners();X();j.redraw=function(){if(j._stopped){return}O=true;W()};return j}function b(e,t){var r=e.bounds;var n=e.cameraParams;var a=n.projection;var i=n.model;var o=e.gl.drawingBufferWidth;var s=e.gl.drawingBufferHeight;var l=e.zNear;var u=e.zFar;var f=e.fovy;var h=o/s;if(t){v(a,-h,h,-1,1,l,u);n._ortho=true}else{c(a,f,h,l,u);n._ortho=false}for(var p=0;p<16;++p){i[p]=0}i[15]=1;var d=0;for(var p=0;p<3;++p){d=Math.max(d,r[1][p]-r[0][p])}for(var p=0;p<3;++p){if(e.autoScale){i[5*p]=e.aspect[p]/(r[1][p]-r[0][p])}else{i[5*p]=1/d}if(e.autoCenter){i[12+p]=-i[5*p]*.5*(r[0][p]+r[1][p])}}}},8023:function(e,t,r){var n=r(6832);t.pointVertex=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]);t.pointFragment=n(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]);t.pickVertex=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]);t.pickFragment=n(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},8271:function(e,t,r){"use strict";var n=r(5158);var a=r(5827);var i=r(5306);var o=r(8023);e.exports=f;function s(e,t,r,n,a){this.plot=e;this.offsetBuffer=t;this.pickBuffer=r;this.shader=n;this.pickShader=a;this.sizeMin=.5;this.sizeMinCap=2;this.sizeMax=20;this.areaRatio=1;this.pointCount=0;this.color=[1,0,0,1];this.borderColor=[0,0,0,1];this.blend=false;this.pickOffset=0;this.points=null}var l=s.prototype;l.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.offsetBuffer.dispose();this.pickBuffer.dispose();this.plot.removeObject(this)};l.update=function(e){var t;e=e||{};function r(t,r){if(t in e){return e[t]}return r}this.sizeMin=r("sizeMin",.5);this.sizeMax=r("sizeMax",20);this.color=r("color",[1,0,0,1]).slice();this.areaRatio=r("areaRatio",1);this.borderColor=r("borderColor",[0,0,0,1]).slice();this.blend=r("blend",false);var n=e.positions.length>>>1;var a=e.positions instanceof Float32Array;var o=e.idToIndex instanceof Int32Array&&e.idToIndex.length>=n;var s=e.positions;var l=a?s:i.mallocFloat32(s.length);var u=o?e.idToIndex:i.mallocInt32(n);if(!a){l.set(s)}if(!o){l.set(s);for(t=0;t<n;t++){u[t]=t}}this.points=s;this.offsetBuffer.update(l);this.pickBuffer.update(u);if(!a){i.free(l)}if(!o){i.free(u)}this.pointCount=n;this.pickOffset=0};function u(e,t){var r=0;var n=e.length>>>1;var a;for(a=0;a<n;a++){var i=e[a*2];var o=e[a*2+1];if(i>=t[0]&&i<=t[2]&&o>=t[1]&&o<=t[3])r++}return r}l.unifiedDraw=function(){var e=[1,0,0,0,1,0,0,0,1];var t=[0,0,0,0];return function(r){var n=r!==void 0;var a=n?this.pickShader:this.shader;var i=this.plot.gl;var o=this.plot.dataBox;if(this.pointCount===0){return r}var s=o[2]-o[0];var l=o[3]-o[1];var f=u(this.points,o);var c=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(f,.33333)));e[0]=2/s;e[4]=2/l;e[6]=-2*o[0]/s-1;e[7]=-2*o[1]/l-1;this.offsetBuffer.bind();a.bind();a.attributes.position.pointer();a.uniforms.matrix=e;a.uniforms.color=this.color;a.uniforms.borderColor=this.borderColor;a.uniforms.pointCloud=c<5;a.uniforms.pointSize=c;a.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio)));if(n){t[0]=r&255;t[1]=r>>8&255;t[2]=r>>16&255;t[3]=r>>24&255;this.pickBuffer.bind();a.attributes.pickId.pointer(i.UNSIGNED_BYTE);a.uniforms.pickOffset=t;this.pickOffset=r}var v=i.getParameter(i.BLEND);var h=i.getParameter(i.DITHER);if(v&&!this.blend)i.disable(i.BLEND);if(h)i.disable(i.DITHER);i.drawArrays(i.POINTS,0,this.pointCount);if(v&&!this.blend)i.enable(i.BLEND);if(h)i.enable(i.DITHER);return r+this.pointCount}}();l.draw=l.unifiedDraw;l.drawPick=l.unifiedDraw;l.pick=function(e,t,r){var n=this.pickOffset;var a=this.pointCount;if(r<n||r>=n+a){return null}var i=r-n;var o=this.points;return{object:this,pointId:i,dataCoord:[o[2*i],o[2*i+1]]}};function f(e,t){var r=e.gl;var i=a(r);var l=a(r);var u=n(r,o.pointVertex,o.pointFragment);var f=n(r,o.pickVertex,o.pickFragment);var c=new s(e,i,l,u,f);c.update(t);e.addObject(c);return c}},6093:function(e){e.exports=t;function t(e,t,r,n){var a=t[0],i=t[1],o=t[2],s=t[3],l=r[0],u=r[1],f=r[2],c=r[3];var v,h,p,d,g;h=a*l+i*u+o*f+s*c;if(h<0){h=-h;l=-l;u=-u;f=-f;c=-c}if(1-h>1e-6){v=Math.acos(h);p=Math.sin(v);d=Math.sin((1-n)*v)/p;g=Math.sin(n*v)/p}else{d=1-n;g=n}e[0]=d*a+g*l;e[1]=d*i+g*u;e[2]=d*o+g*f;e[3]=d*s+g*c;return e}},8240:function(e){"use strict";e.exports=function(e){return!e&&e!==0?"":e.toString()}},4123:function(e,t,r){"use strict";var n=r(875);e.exports=i;var a={};function i(e,t,r){var i=a[t];if(!i){i=a[t]={}}if(e in i){return i[e]}var o={textAlign:"center",textBaseline:"middle",lineHeight:1,font:t,lineSpacing:1.25,styletags:{breaklines:true,bolds:true,italics:true,subscripts:true,superscripts:true}};o.triangles=true;var s=n(e,o);o.triangles=false;var l=n(e,o);var u,f;if(r&&r!==1){for(u=0;u<s.positions.length;++u){for(f=0;f<s.positions[u].length;++f){s.positions[u][f]/=r}}for(u=0;u<l.positions.length;++u){for(f=0;f<l.positions[u].length;++f){l.positions[u][f]/=r}}}var c=[[Infinity,Infinity],[-Infinity,-Infinity]];var v=l.positions.length;for(u=0;u<v;++u){var h=l.positions[u];for(f=0;f<2;++f){c[0][f]=Math.min(c[0][f],h[f]);c[1][f]=Math.max(c[1][f],h[f])}}return i[e]=[s,l,c]}},9282:function(e,t,r){var n=r(5158);var a=r(6832);var i=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]);var o=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]);var s=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]);var l=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]);var u=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]);var f=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}];var c={vertex:i,fragment:l,attributes:f},v={vertex:o,fragment:l,attributes:f},h={vertex:s,fragment:l,attributes:f},p={vertex:i,fragment:u,attributes:f},d={vertex:o,fragment:u,attributes:f},g={vertex:s,fragment:u,attributes:f};function y(e,t){var r=n(e,t);var a=r.attributes;a.position.location=0;a.color.location=1;a.glyph.location=2;a.id.location=3;return r}t.createPerspective=function(e){return y(e,c)};t.createOrtho=function(e){return y(e,v)};t.createProject=function(e){return y(e,h)};t.createPickPerspective=function(e){return y(e,p)};t.createPickOrtho=function(e){return y(e,d)};t.createPickProject=function(e){return y(e,g)}},2182:function(e,t,r){"use strict";var n=r(3596);var a=r(5827);var i=r(2944);var o=r(5306);var s=r(104);var l=r(9282);var u=r(4123);var f=r(8240);var c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];e.exports=R;function v(e,t){var r=e[0];var n=e[1];var a=e[2];var i=e[3];e[0]=t[0]*r+t[4]*n+t[8]*a+t[12]*i;e[1]=t[1]*r+t[5]*n+t[9]*a+t[13]*i;e[2]=t[2]*r+t[6]*n+t[10]*a+t[14]*i;e[3]=t[3]*r+t[7]*n+t[11]*a+t[15]*i;return e}function h(e,t,r,n){v(n,n,r);v(n,n,t);return v(n,n,e)}function p(e,t){this.index=e;this.dataCoordinate=this.position=t}function d(e){if(e===true)return 1;if(e>1)return 1;return e}function g(e,t,r,n,a,i,o,s,l,u,f,c){this.gl=e;this.pixelRatio=1;this.shader=t;this.orthoShader=r;this.projectShader=n;this.pointBuffer=a;this.colorBuffer=i;this.glyphBuffer=o;this.idBuffer=s;this.vao=l;this.vertexCount=0;this.lineVertexCount=0;this.opacity=1;this.hasAlpha=false;this.lineWidth=0;this.projectScale=[2/3,2/3,2/3];this.projectOpacity=[1,1,1];this.projectHasAlpha=false;this.pickId=0;this.pickPerspectiveShader=u;this.pickOrthoShader=f;this.pickProjectShader=c;this.points=[];this._selectResult=new p(0,[0,0,0]);this.useOrtho=true;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.axesProject=[true,true,true];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.highlightId=[1,1,1,1];this.highlightScale=2;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.dirty=true}var y=g.prototype;y.pickSlots=1;y.setPickBase=function(e){this.pickId=e};y.isTransparent=function(){if(this.hasAlpha){return true}for(var e=0;e<3;++e){if(this.axesProject[e]&&this.projectHasAlpha){return true}}return false};y.isOpaque=function(){if(!this.hasAlpha){return true}for(var e=0;e<3;++e){if(this.axesProject[e]&&!this.projectHasAlpha){return true}}return false};var m=[0,0];var x=[0,0,0];var b=[0,0,0];var _=[0,0,0,1];var w=[0,0,0,1];var T=c.slice();var k=[0,0,0];var A=[[0,0,0],[0,0,0]];function M(e){e[0]=e[1]=e[2]=0;return e}function S(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=1;return e}function E(e,t,r,n){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[r]=n;return e}function L(e){var t=A;for(var r=0;r<2;++r){for(var n=0;n<3;++n){t[r][n]=Math.max(Math.min(e[r][n],1e8),-1e8)}}return t}function C(e,t,r,n){var a=t.axesProject;var i=t.gl;var o=e.uniforms;var l=r.model||c;var u=r.view||c;var f=r.projection||c;var v=t.axesBounds;var p=L(t.clipBounds);var d;if(t.axes&&t.axes.lastCubeProps){d=t.axes.lastCubeProps.axis}else{d=[1,1,1]}m[0]=2/i.drawingBufferWidth;m[1]=2/i.drawingBufferHeight;e.bind();o.view=u;o.projection=f;o.screenSize=m;o.highlightId=t.highlightId;o.highlightScale=t.highlightScale;o.clipBounds=p;o.pickGroup=t.pickId/255;o.pixelRatio=n;for(var g=0;g<3;++g){if(!a[g]){continue}o.scale=t.projectScale[g];o.opacity=t.projectOpacity[g];var y=T;for(var A=0;A<16;++A){y[A]=0}for(var A=0;A<4;++A){y[5*A]=1}y[5*g]=0;if(d[g]<0){y[12+g]=v[0][g]}else{y[12+g]=v[1][g]}s(y,l,y);o.model=y;var C=(g+1)%3;var I=(g+2)%3;var P=M(x);var O=M(b);P[C]=1;O[I]=1;var D=h(f,u,l,S(_,P));var z=h(f,u,l,S(w,O));if(Math.abs(D[1])>Math.abs(z[1])){var R=D;D=z;z=R;R=P;P=O;O=R;var F=C;C=I;I=F}if(D[0]<0){P[C]=-1}if(z[1]>0){O[I]=-1}var B=0;var N=0;for(var A=0;A<4;++A){B+=Math.pow(l[4*C+A],2);N+=Math.pow(l[4*I+A],2)}P[C]/=Math.sqrt(B);O[I]/=Math.sqrt(N);o.axes[0]=P;o.axes[1]=O;o.fragClipBounds[0]=E(k,p[0],g,-1e8);o.fragClipBounds[1]=E(k,p[1],g,1e8);t.vao.bind();t.vao.draw(i.TRIANGLES,t.vertexCount);if(t.lineWidth>0){i.lineWidth(t.lineWidth*n);t.vao.draw(i.LINES,t.lineVertexCount,t.vertexCount)}t.vao.unbind()}}var I=[-1e8,-1e8,-1e8];var P=[1e8,1e8,1e8];var O=[I,P];function D(e,t,r,n,a,i,o){var s=r.gl;if(i===r.projectHasAlpha||o){C(t,r,n,a)}if(i===r.hasAlpha||o){e.bind();var l=e.uniforms;l.model=n.model||c;l.view=n.view||c;l.projection=n.projection||c;m[0]=2/s.drawingBufferWidth;m[1]=2/s.drawingBufferHeight;l.screenSize=m;l.highlightId=r.highlightId;l.highlightScale=r.highlightScale;l.fragClipBounds=O;l.clipBounds=r.axes.bounds;l.opacity=r.opacity;l.pickGroup=r.pickId/255;l.pixelRatio=a;r.vao.bind();r.vao.draw(s.TRIANGLES,r.vertexCount);if(r.lineWidth>0){s.lineWidth(r.lineWidth*a);r.vao.draw(s.LINES,r.lineVertexCount,r.vertexCount)}r.vao.unbind()}}y.draw=function(e){var t=this.useOrtho?this.orthoShader:this.shader;D(t,this.projectShader,this,e,this.pixelRatio,false,false)};y.drawTransparent=function(e){var t=this.useOrtho?this.orthoShader:this.shader;D(t,this.projectShader,this,e,this.pixelRatio,true,false)};y.drawPick=function(e){var t=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;D(t,this.pickProjectShader,this,e,1,true,true)};y.pick=function(e){if(!e){return null}if(e.id!==this.pickId){return null}var t=e.value[2]+(e.value[1]<<8)+(e.value[0]<<16);if(t>=this.pointCount||t<0){return null}var r=this.points[t];var n=this._selectResult;n.index=t;for(var a=0;a<3;++a){n.position[a]=n.dataCoordinate[a]=r[a]}return n};y.highlight=function(e){if(!e){this.highlightId=[1,1,1,1]}else{var t=e.index;var r=t&255;var n=t>>8&255;var a=t>>16&255;this.highlightId=[r/255,n/255,a/255,0]}};function z(e,t,r,a){var i;if(Array.isArray(e)){if(t<e.length){i=e[t]}else{i=undefined}}else{i=e}i=f(i);var o=true;if(n(i)){i="";o=false}var s=u(i,r,a);return{mesh:s[0],lines:s[1],bounds:s[2],visible:o}}y.update=function(e){e=e||{};if("perspective"in e){this.useOrtho=!e.perspective}if("orthographic"in e){this.useOrtho=!!e.orthographic}if("lineWidth"in e){this.lineWidth=e.lineWidth}if("project"in e){if(Array.isArray(e.project)){this.axesProject=e.project}else{var t=!!e.project;this.axesProject=[t,t,t]}}if("projectScale"in e){if(Array.isArray(e.projectScale)){this.projectScale=e.projectScale.slice()}else{var r=+e.projectScale;this.projectScale=[r,r,r]}}this.projectHasAlpha=false;if("projectOpacity"in e){if(Array.isArray(e.projectOpacity)){this.projectOpacity=e.projectOpacity.slice()}else{var r=+e.projectOpacity;this.projectOpacity=[r,r,r]}for(var n=0;n<3;++n){this.projectOpacity[n]=d(this.projectOpacity[n]);if(this.projectOpacity[n]<1){this.projectHasAlpha=true}}}this.hasAlpha=false;if("opacity"in e){this.opacity=d(e.opacity);if(this.opacity<1){this.hasAlpha=true}}this.dirty=true;var a=e.position;var i=e.font||"normal";var s=e.alignment||[0,0];var l;var u;if(s.length===2){l=s[0];u=s[1]}else{l=[];u=[];for(var n=0;n<s.length;++n){l[n]=s[n][0];u[n]=s[n][1]}}var f=[Infinity,Infinity,Infinity];var c=[-Infinity,-Infinity,-Infinity];var v=e.glyph;var h=e.color;var p=e.size;var g=e.angle;var y=e.lineColor;var m=-1;var x=0;var b=0;var _=0;if(a.length){_=a.length;e:for(var n=0;n<_;++n){var w=a[n];for(var T=0;T<3;++T){if(isNaN(w[T])||!isFinite(w[T])){continue e}}var k=z(v,n,i,this.pixelRatio);var A=k.mesh;var M=k.lines;var S=k.bounds;x+=A.cells.length*3;b+=M.edges.length*2}}var E=x+b;var L=o.mallocFloat(3*E);var C=o.mallocFloat(4*E);var I=o.mallocFloat(2*E);var P=o.mallocUint32(E);if(E>0){var O=0;var D=x;var R=[0,0,0,1];var F=[0,0,0,1];var B=Array.isArray(h)&&Array.isArray(h[0]);var N=Array.isArray(y)&&Array.isArray(y[0]);e:for(var n=0;n<_;++n){m+=1;var w=a[n];for(var T=0;T<3;++T){if(isNaN(w[T])||!isFinite(w[T])){continue e}c[T]=Math.max(c[T],w[T]);f[T]=Math.min(f[T],w[T])}var k=z(v,n,i,this.pixelRatio);var A=k.mesh;var M=k.lines;var S=k.bounds;var j=k.visible;if(!j)R=[1,1,1,0];else if(Array.isArray(h)){var U;if(B){if(n<h.length){U=h[n]}else{U=[0,0,0,0]}}else{U=h}if(U.length===3){for(var T=0;T<3;++T){R[T]=U[T]}R[3]=1}else if(U.length===4){for(var T=0;T<4;++T){R[T]=U[T]}if(!this.hasAlpha&&U[3]<1)this.hasAlpha=true}}else{R[0]=R[1]=R[2]=0;R[3]=1}if(!j)F=[1,1,1,0];else if(Array.isArray(y)){var U;if(N){if(n<y.length){U=y[n]}else{U=[0,0,0,0]}}else{U=y}if(U.length===3){for(var T=0;T<3;++T){F[T]=U[T]}F[T]=1}else if(U.length===4){for(var T=0;T<4;++T){F[T]=U[T]}if(!this.hasAlpha&&U[3]<1)this.hasAlpha=true}}else{F[0]=F[1]=F[2]=0;F[3]=1}var V=.5;if(!j)V=0;else if(Array.isArray(p)){if(n<p.length){V=+p[n]}else{V=12}}else if(p){V=+p}else if(this.useOrtho){V=12}var H=0;if(Array.isArray(g)){if(n<g.length){H=+g[n]}else{H=0}}else if(g){H=+g}var q=Math.cos(H);var G=Math.sin(H);var w=a[n];for(var T=0;T<3;++T){c[T]=Math.max(c[T],w[T]);f[T]=Math.min(f[T],w[T])}var Z=l;var Y=u;var Z=0;if(Array.isArray(l)){if(n<l.length){Z=l[n]}else{Z=0}}else if(l){Z=l}var Y=0;if(Array.isArray(u)){if(n<u.length){Y=u[n]}else{Y=0}}else if(u){Y=u}Z*=Z>0?1-S[0][0]:Z<0?1+S[1][0]:1;Y*=Y>0?1-S[0][1]:Y<0?1+S[1][1]:1;var W=[Z,Y];var X=A.cells||[];var J=A.positions||[];for(var T=0;T<X.length;++T){var K=X[T];for(var $=0;$<3;++$){for(var Q=0;Q<3;++Q){L[3*O+Q]=w[Q]}for(var Q=0;Q<4;++Q){C[4*O+Q]=R[Q]}P[O]=m;var ee=J[K[$]];I[2*O]=V*(q*ee[0]-G*ee[1]+W[0]);I[2*O+1]=V*(G*ee[0]+q*ee[1]+W[1]);O+=1}}var X=M.edges;var J=M.positions;for(var T=0;T<X.length;++T){var K=X[T];for(var $=0;$<2;++$){for(var Q=0;Q<3;++Q){L[3*D+Q]=w[Q]}for(var Q=0;Q<4;++Q){C[4*D+Q]=F[Q]}P[D]=m;var ee=J[K[$]];I[2*D]=V*(q*ee[0]-G*ee[1]+W[0]);I[2*D+1]=V*(G*ee[0]+q*ee[1]+W[1]);D+=1}}}}this.bounds=[f,c];this.points=a;this.pointCount=a.length;this.vertexCount=x;this.lineVertexCount=b;this.pointBuffer.update(L);this.colorBuffer.update(C);this.glyphBuffer.update(I);this.idBuffer.update(P);o.free(L);o.free(C);o.free(I);o.free(P)};y.dispose=function(){this.shader.dispose();this.orthoShader.dispose();this.pickPerspectiveShader.dispose();this.pickOrthoShader.dispose();this.vao.dispose();this.pointBuffer.dispose();this.colorBuffer.dispose();this.glyphBuffer.dispose();this.idBuffer.dispose()};function R(e){var t=e.gl;var r=l.createPerspective(t);var n=l.createOrtho(t);var o=l.createProject(t);var s=l.createPickPerspective(t);var u=l.createPickOrtho(t);var f=l.createPickProject(t);var c=a(t);var v=a(t);var h=a(t);var p=a(t);var d=i(t,[{buffer:c,size:3,type:t.FLOAT},{buffer:v,size:4,type:t.FLOAT},{buffer:h,size:2,type:t.FLOAT},{buffer:p,size:4,type:t.UNSIGNED_BYTE,normalized:true}]);var y=new g(t,r,n,o,c,v,h,p,d,s,u,f);y.update(e);return y}},1884:function(e,t,r){"use strict";var n=r(6832);t.boxVertex=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]);t.boxFragment=n(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},6623:function(e,t,r){"use strict";var n=r(5158);var a=r(5827);var i=r(1884);e.exports=l;function o(e,t,r){this.plot=e;this.boxBuffer=t;this.boxShader=r;this.enabled=true;this.selectBox=[Infinity,Infinity,-Infinity,-Infinity];this.borderColor=[0,0,0,1];this.innerFill=false;this.innerColor=[0,0,0,.25];this.outerFill=true;this.outerColor=[0,0,0,.5];this.borderWidth=10}var s=o.prototype;s.draw=function(){if(!this.enabled){return}var e=this.plot;var t=this.selectBox;var r=this.borderWidth;var n=this.innerFill;var a=this.innerColor;var i=this.outerFill;var o=this.outerColor;var s=this.borderColor;var l=e.box;var u=e.screenBox;var f=e.dataBox;var c=e.viewBox;var v=e.pixelRatio;var h=(t[0]-f[0])*(c[2]-c[0])/(f[2]-f[0])+c[0];var p=(t[1]-f[1])*(c[3]-c[1])/(f[3]-f[1])+c[1];var d=(t[2]-f[0])*(c[2]-c[0])/(f[2]-f[0])+c[0];var g=(t[3]-f[1])*(c[3]-c[1])/(f[3]-f[1])+c[1];h=Math.max(h,c[0]);p=Math.max(p,c[1]);d=Math.min(d,c[2]);g=Math.min(g,c[3]);if(d<h||g<p){return}l.bind();var y=u[2]-u[0];var m=u[3]-u[1];if(this.outerFill){l.drawBox(0,0,y,p,o);l.drawBox(0,p,h,g,o);l.drawBox(0,g,y,m,o);l.drawBox(d,p,y,g,o)}if(this.innerFill){l.drawBox(h,p,d,g,a)}if(r>0){var x=r*v;l.drawBox(h-x,p-x,d+x,p+x,s);l.drawBox(h-x,g-x,d+x,g+x,s);l.drawBox(h-x,p-x,h+x,g+x,s);l.drawBox(d-x,p-x,d+x,g+x,s)}};s.update=function(e){e=e||{};this.innerFill=!!e.innerFill;this.outerFill=!!e.outerFill;this.innerColor=(e.innerColor||[0,0,0,.5]).slice();this.outerColor=(e.outerColor||[0,0,0,.5]).slice();this.borderColor=(e.borderColor||[0,0,0,1]).slice();this.borderWidth=e.borderWidth||0;this.selectBox=(e.selectBox||this.selectBox).slice()};s.dispose=function(){this.boxBuffer.dispose();this.boxShader.dispose();this.plot.removeOverlay(this)};function l(e,t){var r=e.gl;var s=a(r,[0,0,0,1,1,0,1,1]);var l=n(r,i.boxVertex,i.boxFragment);var u=new o(e,s,l);u.update(t);e.addOverlay(u);return u}},2611:function(e,t,r){"use strict";e.exports=c;var n=r(4234);var a=r(5306);var i=r(5050);var o=r(2288).nextPow2;var s=function(e,t,r){var n=1e8;var a=-1;var i=-1;var o=e.shape[0];var s=e.shape[1];for(var l=0;l<o;l++){for(var u=0;u<s;u++){var f=e.get(l,u,0);var c=e.get(l,u,1);var v=e.get(l,u,2);var h=e.get(l,u,3);if(f<255||c<255||v<255||h<255){var p=t-l;var d=r-u;var g=p*p+d*d;if(g<n){n=g;a=l;i=u}}}}return[a,i,n]};function l(e,t,r,n,a){this.coord=[e,t];this.id=r;this.value=n;this.distance=a}function u(e,t,r){this.gl=e;this.fbo=t;this.buffer=r;this._readTimeout=null;var n=this;this._readCallback=function(){if(!n.gl){return}t.bind();e.readPixels(0,0,t.shape[0],t.shape[1],e.RGBA,e.UNSIGNED_BYTE,n.buffer);n._readTimeout=null}}var f=u.prototype;Object.defineProperty(f,"shape",{get:function(){if(!this.gl){return[0,0]}return this.fbo.shape.slice()},set:function(e){if(!this.gl){return}this.fbo.shape=e;var t=this.fbo.shape[0];var r=this.fbo.shape[1];if(r*t*4>this.buffer.length){a.free(this.buffer);var n=this.buffer=a.mallocUint8(o(r*t*4));for(var i=0;i<r*t*4;++i){n[i]=255}}return e}});f.begin=function(){var e=this.gl;var t=this.shape;if(!e){return}this.fbo.bind();e.clearColor(1,1,1,1);e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)};f.end=function(){var e=this.gl;if(!e){return}e.bindFramebuffer(e.FRAMEBUFFER,null);if(!this._readTimeout){clearTimeout(this._readTimeout)}this._readTimeout=setTimeout(this._readCallback,1)};f.query=function(e,t,r){if(!this.gl){return null}var n=this.fbo.shape.slice();e=e|0;t=t|0;if(typeof r!=="number"){r=1}var a=Math.min(Math.max(e-r,0),n[0])|0;var o=Math.min(Math.max(e+r,0),n[0])|0;var u=Math.min(Math.max(t-r,0),n[1])|0;var f=Math.min(Math.max(t+r,0),n[1])|0;if(o<=a||f<=u){return null}var c=[o-a,f-u];var v=i(this.buffer,[c[0],c[1],4],[4,n[0]*4,1],4*(a+n[0]*u));var h=s(v.hi(c[0],c[1],1),r,r);var p=h[0];var d=h[1];if(p<0||Math.pow(this.radius,2)<h[2]){return null}var g=v.get(p,d,0);var y=v.get(p,d,1);var m=v.get(p,d,2);var x=v.get(p,d,3);return new l(p+a|0,d+u|0,g,[y,m,x],Math.sqrt(h[2]))};f.dispose=function(){if(!this.gl){return}this.fbo.dispose();a.free(this.buffer);this.gl=null;if(this._readTimeout){clearTimeout(this._readTimeout)}};function c(e,t){var r=t[0];var i=t[1];var o={};var s=n(e,r,i,o);var l=a.mallocUint8(r*i*4);return new u(e,s,l)}},5158:function(e,t,r){"use strict";var n=r(9016);var a=r(4280);var i=r(3984);var o=r(1628);var s=r(2631);var l=r(9068);function u(e){this.gl=e;this.gl.lastAttribCount=0;this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var f=u.prototype;f.bind=function(){if(!this.program){this._relink()}var e;var t=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);var r=this.gl.lastAttribCount;if(t>r){for(e=r;e<t;e++){this.gl.enableVertexAttribArray(e)}}else if(r>t){for(e=t;e<r;e++){this.gl.disableVertexAttribArray(e)}}this.gl.lastAttribCount=t;this.gl.useProgram(this.program)};f.dispose=function(){var e=this.gl.lastAttribCount;for(var t=0;t<e;t++){this.gl.disableVertexAttribArray(t)}this.gl.lastAttribCount=0;if(this._fref){this._fref.dispose()}if(this._vref){this._vref.dispose()}this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function c(e,t){if(e.name<t.name){return-1}return 1}f.update=function(e,t,r,u){if(!t||arguments.length===1){var f=e;e=f.vertex;t=f.fragment;r=f.uniforms;u=f.attributes}var v=this;var h=v.gl;var p=v._vref;v._vref=o.shader(h,h.VERTEX_SHADER,e);if(p){p.dispose()}v.vertShader=v._vref.shader;var d=this._fref;v._fref=o.shader(h,h.FRAGMENT_SHADER,t);if(d){d.dispose()}v.fragShader=v._fref.shader;if(!r||!u){var g=h.createProgram();h.attachShader(g,v.fragShader);h.attachShader(g,v.vertShader);h.linkProgram(g);if(!h.getProgramParameter(g,h.LINK_STATUS)){var y=h.getProgramInfoLog(g);throw new l(y,"Error linking program:"+y)}r=r||s.uniforms(h,g);u=u||s.attributes(h,g);h.deleteProgram(g)}u=u.slice();u.sort(c);var m=[];var x=[];var b=[];var _;for(_=0;_<u.length;++_){var w=u[_];if(w.type.indexOf("mat")>=0){var T=w.type.charAt(w.type.length-1)|0;var k=new Array(T);for(var A=0;A<T;++A){k[A]=b.length;x.push(w.name+"["+A+"]");if(typeof w.location==="number"){b.push(w.location+A)}else if(Array.isArray(w.location)&&w.location.length===T&&typeof w.location[A]==="number"){b.push(w.location[A]|0)}else{b.push(-1)}}m.push({name:w.name,type:w.type,locations:k})}else{m.push({name:w.name,type:w.type,locations:[b.length]});x.push(w.name);if(typeof w.location==="number"){b.push(w.location|0)}else{b.push(-1)}}}var M=0;for(_=0;_<b.length;++_){if(b[_]<0){while(b.indexOf(M)>=0){M+=1}b[_]=M}}var S=new Array(r.length);function E(){v.program=o.program(h,v._vref,v._fref,x,b);for(var e=0;e<r.length;++e){S[e]=h.getUniformLocation(v.program,r[e].name)}}E();v._relink=E;v.types={uniforms:i(r),attributes:i(u)};v.attributes=a(h,v,m,b);Object.defineProperty(v,"uniforms",n(h,v,r,S))};function v(e,t,r,n,a){var i=new u(e);i.update(t,r,n,a);return i}e.exports=v},9068:function(e){function t(e,t,r){this.shortMessage=t||"";this.longMessage=r||"";this.rawError=e||"";this.message="gl-shader: "+(t||e||"")+(r?"\n"+r:"");this.stack=(new Error).stack}t.prototype=new Error;t.prototype.name="GLError";t.prototype.constructor=t;e.exports=t},4280:function(e,t,r){"use strict";e.exports=u;var n=r(9068);function a(e,t,r,n,a,i){this._gl=e;this._wrapper=t;this._index=r;this._locations=n;this._dimension=a;this._constFunc=i}var i=a.prototype;i.pointer=function e(t,r,n,a){var i=this;var o=i._gl;var s=i._locations[i._index];o.vertexAttribPointer(s,i._dimension,t||o.FLOAT,!!r,n||0,a||0);o.enableVertexAttribArray(s)};i.set=function(e,t,r,n){return this._constFunc(this._locations[this._index],e,t,r,n)};Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(e){if(e!==this._locations[this._index]){this._locations[this._index]=e|0;this._wrapper.program=null}return e|0}});var o=[function(e,t,r){if(r.length===undefined){return e.vertexAttrib1f(t,r)}else{return e.vertexAttrib1fv(t,r)}},function(e,t,r,n){if(r.length===undefined){return e.vertexAttrib2f(t,r,n)}else{return e.vertexAttrib2fv(t,r)}},function(e,t,r,n,a){if(r.length===undefined){return e.vertexAttrib3f(t,r,n,a)}else{return e.vertexAttrib3fv(t,r)}},function(e,t,r,n,a,i){if(r.length===undefined){return e.vertexAttrib4f(t,r,n,a,i)}else{return e.vertexAttrib4fv(t,r)}}];function s(e,t,r,n,i,s,l){var u=o[i];var f=new a(e,t,r,n,i,u);Object.defineProperty(s,l,{set:function(t){e.disableVertexAttribArray(n[r]);u(e,n[r],t);return t},get:function(){return f},enumerable:true})}function l(e,t,r,n,a,i,o){var l=new Array(a);var u=new Array(a);for(var f=0;f<a;++f){s(e,t,r[f],n,a,l,f);u[f]=l[f]}Object.defineProperty(l,"location",{set:function(e){if(Array.isArray(e)){for(var t=0;t<a;++t){u[t].location=e[t]}}else{for(var t=0;t<a;++t){u[t].location=e+t}}return e},get:function(){var e=new Array(a);for(var t=0;t<a;++t){e[t]=n[r[t]]}return e},enumerable:true});l.pointer=function(t,i,o,s){t=t||e.FLOAT;i=!!i;o=o||a*a;s=s||0;for(var l=0;l<a;++l){var u=n[r[l]];e.vertexAttribPointer(u,a,t,i,o,s+l*a);e.enableVertexAttribArray(u)}};var c=new Array(a);var v=e["vertexAttrib"+a+"fv"];Object.defineProperty(i,o,{set:function(t){for(var i=0;i<a;++i){var o=n[r[i]];e.disableVertexAttribArray(o);if(Array.isArray(t[0])){v.call(e,o,t[i])}else{for(var s=0;s<a;++s){c[s]=t[a*i+s]}v.call(e,o,c)}}return t},get:function(){return l},enumerable:true})}function u(e,t,r,a){var i={};for(var o=0,u=r.length;o<u;++o){var f=r[o];var c=f.name;var v=f.type;var h=f.locations;switch(v){case"bool":case"int":case"float":s(e,t,h[0],a,1,i,c);break;default:if(v.indexOf("vec")>=0){var p=v.charCodeAt(v.length-1)-48;if(p<2||p>4){throw new n("","Invalid data type for attribute "+c+": "+v)}s(e,t,h[0],a,p,i,c)}else if(v.indexOf("mat")>=0){var p=v.charCodeAt(v.length-1)-48;if(p<2||p>4){throw new n("","Invalid data type for attribute "+c+": "+v)}l(e,t,h,a,p,i,c)}else{throw new n("","Unknown data type for attribute "+c+": "+v)}break}}return i}},9016:function(e,t,r){"use strict";var n=r(3984);var a=r(9068);e.exports=s;function i(e){return function(){return e}}function o(e,t){var r=new Array(e);for(var n=0;n<e;++n){r[n]=t}return r}function s(e,t,r,s){function l(e){return function(t,r,n){return t.getUniform(r.program,n[e])}}function u(t){return function n(i){var o=f("",t);for(var l=0;l<o.length;++l){var u=o[l];var c=u[0];var v=u[1];if(s[v]){var h=i;if(typeof c==="string"&&(c.indexOf(".")===0||c.indexOf("[")===0)){var p=c;if(c.indexOf(".")===0){p=c.slice(1)}if(p.indexOf("]")===p.length-1){var d=p.indexOf("[");var g=p.slice(0,d);var y=p.slice(d+1,p.length-1);h=g?i[g][y]:i[y]}else{h=i[p]}}var m=r[v].type;var x;switch(m){case"bool":case"int":case"sampler2D":case"samplerCube":e.uniform1i(s[v],h);break;case"float":e.uniform1f(s[v],h);break;default:var b=m.indexOf("vec");if(0<=b&&b<=1&&m.length===4+b){x=m.charCodeAt(m.length-1)-48;if(x<2||x>4){throw new a("","Invalid data type")}switch(m.charAt(0)){case"b":case"i":e["uniform"+x+"iv"](s[v],h);break;case"v":e["uniform"+x+"fv"](s[v],h);break;default:throw new a("","Unrecognized data type for vector "+name+": "+m)}}else if(m.indexOf("mat")===0&&m.length===4){x=m.charCodeAt(m.length-1)-48;if(x<2||x>4){throw new a("","Invalid uniform dimension type for matrix "+name+": "+m)}e["uniformMatrix"+x+"fv"](s[v],false,h);break}else{throw new a("","Unknown uniform data type for "+name+": "+m)}}}}}}function f(e,t){if(typeof t!=="object"){return[[e,t]]}var r=[];for(var n in t){var a=t[n];var i=e;if(parseInt(n)+""===n){i+="["+n+"]"}else{i+="."+n}if(typeof a==="object"){r.push.apply(r,f(i,a))}else{r.push([i,a])}}return r}function c(e){switch(e){case"bool":return false;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var t=e.indexOf("vec");if(0<=t&&t<=1&&e.length===4+t){var r=e.charCodeAt(e.length-1)-48;if(r<2||r>4){throw new a("","Invalid data type")}if(e.charAt(0)==="b"){return o(r,false)}return o(r,0)}else if(e.indexOf("mat")===0&&e.length===4){var r=e.charCodeAt(e.length-1)-48;if(r<2||r>4){throw new a("","Invalid uniform dimension type for matrix "+name+": "+e)}return o(r*r,0)}else{throw new a("","Unknown uniform data type for "+name+": "+e)}}}function v(e,t,n){if(typeof n==="object"){var a=h(n);Object.defineProperty(e,t,{get:i(a),set:u(n),enumerable:true,configurable:false})}else{if(s[n]){Object.defineProperty(e,t,{get:l(n),set:u(n),enumerable:true,configurable:false})}else{e[t]=c(r[n].type)}}}function h(e){var t;if(Array.isArray(e)){t=new Array(e.length);for(var r=0;r<e.length;++r){v(t,r,e[r])}}else{t={};for(var n in e){v(t,n,e[n])}}return t}var p=n(r,true);return{get:i(h(p)),set:u(p),enumerable:true,configurable:true}}},3984:function(e){"use strict";e.exports=t;function t(e,t){var r={};for(var n=0;n<e.length;++n){var a=e[n].name;var i=a.split(".");var o=r;for(var s=0;s<i.length;++s){var l=i[s].split("[");if(l.length>1){if(!(l[0]in o)){o[l[0]]=[]}o=o[l[0]];for(var u=1;u<l.length;++u){var f=parseInt(l[u]);if(u<l.length-1||s<i.length-1){if(!(f in o)){if(u<l.length-1){o[f]=[]}else{o[f]={}}}o=o[f]}else{if(t){o[f]=n}else{o[f]=e[n].type}}}}else if(s<i.length-1){if(!(l[0]in o)){o[l[0]]={}}o=o[l[0]]}else{if(t){o[l[0]]=n}else{o[l[0]]=e[n].type}}}}return r}},2631:function(e,t){"use strict";t.uniforms=i;t.attributes=o;var r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"};var n=null;function a(e,t){if(!n){var a=Object.keys(r);n={};for(var i=0;i<a.length;++i){var o=a[i];n[e[o]]=r[o]}}return n[t]}function i(e,t){var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);var n=[];for(var i=0;i<r;++i){var o=e.getActiveUniform(t,i);if(o){var s=a(e,o.type);if(o.size>1){for(var l=0;l<o.size;++l){n.push({name:o.name.replace("[0]","["+l+"]"),type:s})}}else{n.push({name:o.name,type:s})}}}return n}function o(e,t){var r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);var n=[];for(var i=0;i<r;++i){var o=e.getActiveAttrib(t,i);if(o){n.push({name:o.name,type:a(e,o.type)})}}return n}},1628:function(e,t,r){"use strict";t.shader=p;t.program=d;var n=r(9068);var a=r(3530);var i=typeof WeakMap==="undefined"?r(4037):WeakMap;var o=new i;var s=0;function l(e,t,r,n,a,i,o){this.id=e;this.src=t;this.type=r;this.shader=n;this.count=i;this.programs=[];this.cache=o}l.prototype.dispose=function(){if(--this.count===0){var e=this.cache;var t=e.gl;var r=this.programs;for(var n=0,a=r.length;n<a;++n){var i=e.programs[r[n]];if(i){delete e.programs[n];t.deleteProgram(i)}}t.deleteShader(this.shader);delete e.shaders[this.type===t.FRAGMENT_SHADER|0][this.src]}};function u(e){this.gl=e;this.shaders=[{},{}];this.programs={}}var f=u.prototype;function c(e,t,r){var i=e.createShader(t);e.shaderSource(i,r);e.compileShader(i);if(!e.getShaderParameter(i,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(i);try{var s=a(o,r,t)}catch(l){console.warn("Failed to format compiler error: "+l);throw new n(o,"Error compiling shader:\n"+o)}throw new n(o,s.short,s.long)}return i}f.getShaderReference=function(e,t){var r=this.gl;var n=this.shaders[e===r.FRAGMENT_SHADER|0];var a=n[t];if(!a||!r.isShader(a.shader)){var i=c(r,e,t);a=n[t]=new l(s++,t,e,i,[],1,this)}else{a.count+=1}return a};function v(e,t,r,a,i){var o=e.createProgram();e.attachShader(o,t);e.attachShader(o,r);for(var s=0;s<a.length;++s){e.bindAttribLocation(o,i[s],a[s])}e.linkProgram(o);if(!e.getProgramParameter(o,e.LINK_STATUS)){var l=e.getProgramInfoLog(o);throw new n(l,"Error linking program: "+l)}return o}f.getProgram=function(e,t,r,n){var a=[e.id,t.id,r.join(":"),n.join(":")].join("@");var i=this.programs[a];if(!i||!this.gl.isProgram(i)){this.programs[a]=i=v(this.gl,e.shader,t.shader,r,n);e.programs.push(a);t.programs.push(a)}return i};function h(e){var t=o.get(e);if(!t){t=new u(e);o.set(e,t)}return t}function p(e,t,r){return h(e).getShaderReference(t,r)}function d(e,t,r,n,a){return h(e).getProgram(t,r,n,a)}},3050:function(e){"use strict";e.exports=n;function t(e){this.plot=e;this.enable=[true,true,false,false];this.width=[1,1,1,1];this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.center=[Infinity,Infinity]}var r=t.prototype;r.update=function(e){e=e||{};this.enable=(e.enable||[true,true,false,false]).slice();this.width=(e.width||[1,1,1,1]).slice();this.color=(e.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map((function(e){return e.slice()}));this.center=(e.center||[Infinity,Infinity]).slice();this.plot.setOverlayDirty()};r.draw=function(){var e=this.enable;var t=this.width;var r=this.color;var n=this.center;var a=this.plot;var i=a.line;var o=a.dataBox;var s=a.viewBox;i.bind();if(o[0]<=n[0]&&n[0]<=o[2]&&o[1]<=n[1]&&n[1]<=o[3]){var l=s[0]+(n[0]-o[0])/(o[2]-o[0])*(s[2]-s[0]);var u=s[1]+(n[1]-o[1])/(o[3]-o[1])*(s[3]-s[1]);if(e[0]){i.drawLine(l,u,s[0],u,t[0],r[0])}if(e[1]){i.drawLine(l,u,l,s[1],t[1],r[1])}if(e[2]){i.drawLine(l,u,s[2],u,t[2],r[2])}if(e[3]){i.drawLine(l,u,l,s[3],t[3],r[3])}}};r.dispose=function(){this.plot.removeOverlay(this)};function n(e,r){var n=new t(e);n.update(r);e.addOverlay(n);return n}},3540:function(e,t,r){"use strict";var n=r(6832);var a=r(5158);var i=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]);var o=n(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);e.exports=function(e){return a(e,i,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(e,t,r){"use strict";var n=r(5827);var a=r(2944);var i=r(3540);e.exports=v;var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(e,t,r,n){this.gl=e;this.buffer=t;this.vao=r;this.shader=n;this.pixelRatio=1;this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]];this.position=[0,0,0];this.lineWidth=[2,2,2];this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.enabled=[true,true,true];this.drawSides=[true,true,true];this.axes=null}var l=s.prototype;var u=[0,0,0];var f=[0,0,0];var c=[0,0];l.isTransparent=function(){return false};l.drawTransparent=function(e){};l.draw=function(e){var t=this.gl;var r=this.vao;var n=this.shader;r.bind();n.bind();var a=e.model||o;var i=e.view||o;var s=e.projection||o;var l;if(this.axes){l=this.axes.lastCubeProps.axis}var v=u;var h=f;for(var p=0;p<3;++p){if(l&&l[p]<0){v[p]=this.bounds[0][p];h[p]=this.bounds[1][p]}else{v[p]=this.bounds[1][p];h[p]=this.bounds[0][p]}}c[0]=t.drawingBufferWidth;c[1]=t.drawingBufferHeight;n.uniforms.model=a;n.uniforms.view=i;n.uniforms.projection=s;n.uniforms.coordinates=[this.position,v,h];n.uniforms.colors=this.colors;n.uniforms.screenShape=c;for(var p=0;p<3;++p){n.uniforms.lineWidth=this.lineWidth[p]*this.pixelRatio;if(this.enabled[p]){r.draw(t.TRIANGLES,6,6*p);if(this.drawSides[p]){r.draw(t.TRIANGLES,12,18+12*p)}}}r.unbind()};l.update=function(e){if(!e){return}if("bounds"in e){this.bounds=e.bounds}if("position"in e){this.position=e.position}if("lineWidth"in e){this.lineWidth=e.lineWidth}if("colors"in e){this.colors=e.colors}if("enabled"in e){this.enabled=e.enabled}if("drawSides"in e){this.drawSides=e.drawSides}};l.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()};function v(e,t){var r=[];function o(e,t,n,a,i,o){var s=[e,t,n,0,0,0,1];s[a+3]=1;s[a]=i;r.push.apply(r,s);s[6]=-1;r.push.apply(r,s);s[a]=o;r.push.apply(r,s);r.push.apply(r,s);s[6]=1;r.push.apply(r,s);s[a]=i;r.push.apply(r,s)}o(0,0,0,0,0,1);o(0,0,0,1,0,1);o(0,0,0,2,0,1);o(1,0,0,1,-1,1);o(1,0,0,2,-1,1);o(0,1,0,0,-1,1);o(0,1,0,2,-1,1);o(0,0,1,0,-1,1);o(0,0,1,1,-1,1);var l=n(e,r);var u=a(e,[{type:e.FLOAT,buffer:l,size:3,offset:0,stride:28},{type:e.FLOAT,buffer:l,size:3,offset:12,stride:28},{type:e.FLOAT,buffer:l,size:1,offset:24,stride:28}]);var f=i(e);f.attributes.position.location=0;f.attributes.color.location=1;f.attributes.weight.location=2;var c=new s(e,l,u,f);c.update(t);return c}},9578:function(e,t,r){var n=r(6832);var a=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]);var i=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]);var o=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]);var s=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);t.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]};t.pickShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(e,t,r){"use strict";var n=r(2858);var a=r(4020);var i=["xyz","xzy","yxz","yzx","zxy","zyx"];var o=function(e,t,r,i){var o=e.points;var s=e.velocities;var l=e.divergences;var u=[];var f=[];var c=[];var v=[];var h=[];var p=[];var d=0;var g=0;var y=a.create();var m=a.create();var x=8;for(var b=0;b<o.length;b++){var _=o[b];var w=s[b];var T=l[b];if(t===0){T=r*.05}g=n.length(w)/i;y=a.create();n.copy(y,w);y[3]=T;for(var k=0;k<x;k++){h[k]=[_[0],_[1],_[2],k]}if(v.length>0){for(var k=0;k<x;k++){var A=(k+1)%x;u.push(v[k],h[k],h[A],h[A],v[A],v[k]);c.push(m,y,y,y,m,m);p.push(d,g,g,g,d,d);var M=u.length;f.push([M-6,M-5,M-4],[M-3,M-2,M-1])}}var S=v;v=h;h=S;var E=m;m=y;y=E;var L=d;d=g;g=L}return{positions:u,cells:f,vectors:c,vertexIntensity:p}};var s=function(e,t,r,a){var i=0;for(var s=0;s<e.length;s++){var l=e[s].velocities;for(var u=0;u<l.length;u++){i=Math.max(i,n.length(l[u]))}}var f=e.map((function(e){return o(e,r,a,i)}));var c=[];var v=[];var h=[];var p=[];for(var s=0;s<f.length;s++){var d=f[s];var g=c.length;c=c.concat(d.positions);h=h.concat(d.vectors);p=p.concat(d.vertexIntensity);for(var u=0;u<d.cells.length;u++){var y=d.cells[u];var m=[];v.push(m);for(var x=0;x<y.length;x++){m.push(y[x]+g)}}}return{positions:c,cells:v,vectors:h,vertexIntensity:p,colormap:t}};var l=function(e,t){var r=e.length;var n;for(n=0;n<r;n++){var a=e[n];if(a===t)return n;else if(a>t)return n-1}return n};var u=function(e,t,r){return e<t?t:e>r?r:e};var f=function(e,t,r){var a=t.vectors;var i=t.meshgrid;var o=e[0];var s=e[1];var f=e[2];var c=i[0].length;var v=i[1].length;var h=i[2].length;var p=l(i[0],o);var d=l(i[1],s);var g=l(i[2],f);var y=p+1;var m=d+1;var x=g+1;p=u(p,0,c-1);y=u(y,0,c-1);d=u(d,0,v-1);m=u(m,0,v-1);g=u(g,0,h-1);x=u(x,0,h-1);if(p<0||d<0||g<0||y>c-1||m>v-1||x>h-1){return n.create()}var b=i[0][p];var _=i[0][y];var w=i[1][d];var T=i[1][m];var k=i[2][g];var A=i[2][x];var M=(o-b)/(_-b);var S=(s-w)/(T-w);var E=(f-k)/(A-k);if(!isFinite(M))M=.5;if(!isFinite(S))S=.5;if(!isFinite(E))E=.5;var L;var C;var I;var P;var O;var D;if(r.reversedX){p=c-1-p;y=c-1-y}if(r.reversedY){d=v-1-d;m=v-1-m}if(r.reversedZ){g=h-1-g;x=h-1-x}switch(r.filled){case 5:O=g;D=x;I=d*h;P=m*h;L=p*h*v;C=y*h*v;break;case 4:O=g;D=x;L=p*h;C=y*h;I=d*h*c;P=m*h*c;break;case 3:I=d;P=m;O=g*v;D=x*v;L=p*v*h;C=y*v*h;break;case 2:I=d;P=m;L=p*v;C=y*v;O=g*v*c;D=x*v*c;break;case 1:L=p;C=y;O=g*c;D=x*c;I=d*c*h;P=m*c*h;break;default:L=p;C=y;I=d*c;P=m*c;O=g*c*v;D=x*c*v;break}var z=a[L+I+O];var R=a[L+I+D];var F=a[L+P+O];var B=a[L+P+D];var N=a[C+I+O];var j=a[C+I+D];var U=a[C+P+O];var V=a[C+P+D];var H=n.create();var q=n.create();var G=n.create();var Z=n.create();n.lerp(H,z,N,M);n.lerp(q,R,j,M);n.lerp(G,F,U,M);n.lerp(Z,B,V,M);var Y=n.create();var W=n.create();n.lerp(Y,H,G,S);n.lerp(W,q,Z,S);var X=n.create();n.lerp(X,Y,W,E);return X};var c=function(e,t){var r=t[0];var n=t[1];var a=t[2];e[0]=r<0?-r:r;e[1]=n<0?-n:n;e[2]=a<0?-a:a;return e};var v=function(e){var t=Infinity;e.sort((function(e,t){return e-t}));var r=e.length;for(var n=1;n<r;n++){var a=Math.abs(e[n]-e[n-1]);if(a<t){t=a}}return t};var h=function(e){var t=[],r=[],n=[];var a={},i={},o={};var s=e.length;for(var l=0;l<s;l++){var u=e[l];var f=u[0],c=u[1],h=u[2];if(!a[f]){t.push(f);a[f]=true}if(!i[c]){r.push(c);i[c]=true}if(!o[h]){n.push(h);o[h]=true}}var p=v(t);var d=v(r);var g=v(n);var y=Math.min(p,d,g);return isFinite(y)?y:1};e.exports=function(e,t){var r=e.startingPositions;var a=e.maxLength||1e3;var o=e.tubeSize||1;var l=e.absoluteTubeSize;var u=e.gridFill||"+x+y+z";var c={};if(u.indexOf("-x")!==-1){c.reversedX=true}if(u.indexOf("-y")!==-1){c.reversedY=true}if(u.indexOf("-z")!==-1){c.reversedZ=true}c.filled=i.indexOf(u.replace(/-/g,"").replace(/\+/g,""));var v=e.getVelocity||function(t){return f(t,e,c)};var p=e.getDivergence||function(e,t){var r=n.create();var a=1e-4;n.add(r,e,[a,0,0]);var i=v(r);n.subtract(i,i,t);n.scale(i,i,1/a);n.add(r,e,[0,a,0]);var o=v(r);n.subtract(o,o,t);n.scale(o,o,1/a);n.add(r,e,[0,0,a]);var s=v(r);n.subtract(s,s,t);n.scale(s,s,1/a);n.add(r,i,o);n.add(r,r,s);return r};var d=[];var g=t[0][0],y=t[0][1],m=t[0][2];var x=t[1][0],b=t[1][1],_=t[1][2];var w=function(e){var t=e[0];var r=e[1];var n=e[2];return!(t<g||t>x||r<y||r>b||n<m||n>_)};var T=n.distance(t[0],t[1]);var k=10*T/a;var A=k*k;var M=1;var S=0;var E=r.length;if(E>1){M=h(r)}for(var L=0;L<E;L++){var C=n.create();n.copy(C,r[L]);var I=[C];var P=[];var O=v(C);var D=C;P.push(O);var z=[];var R=p(C,O);var F=n.length(R);if(isFinite(F)&&F>S){S=F}z.push(F);d.push({points:I,velocities:P,divergences:z});var B=0;while(B<a*100&&I.length<a&&w(C)){B++;var N=n.clone(O);var j=n.squaredLength(N);if(j===0){break}else if(j>A){n.scale(N,N,k/Math.sqrt(j))}n.add(N,N,C);O=v(N);if(n.squaredDistance(D,N)-A>-1e-4*A){I.push(N);D=N;P.push(O);var R=p(N,O);var F=n.length(R);if(isFinite(F)&&F>S){S=F}z.push(F)}C=N}}var U=s(d,e.colormap,S,M);if(l){U.tubeScale=l}else{if(S===0){S=1}U.tubeScale=o*.5*M/S}return U};var p=r(9578);var d=r(1140).createMesh;e.exports.createTubeMesh=function(e,t){return d(e,t,{shaders:p,traceType:"streamtube"})}},9054:function(e,t,r){var n=r(5158);var a=r(6832);var i=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]);var o=a(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color  in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]);var s=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]);var l=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);t.createShader=function(e){var t=n(e,i,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);t.attributes.uv.location=0;t.attributes.f.location=1;t.attributes.normal.location=2;return t};t.createPickShader=function(e){var t=n(e,i,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);t.attributes.uv.location=0;t.attributes.f.location=1;t.attributes.normal.location=2;return t};t.createContourShader=function(e){var t=n(e,s,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);t.attributes.uv.location=0;t.attributes.f.location=1;return t};t.createPickContourShader=function(e){var t=n(e,s,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);t.attributes.uv.location=0;t.attributes.f.location=1;return t}},3754:function(e,t,r){"use strict";e.exports=V;var n=r(2288);var a=r(5827);var i=r(2944);var o=r(8931);var s=r(5306);var l=r(9156);var u=r(7498);var f=r(7382);var c=r(5050);var v=r(4162);var h=r(104);var p=r(7437);var d=r(5070);var g=r(9144);var y=r(9054);var m=y.createShader;var x=y.createContourShader;var b=y.createPickShader;var _=y.createPickContourShader;var w=4*(4+3+3);var T=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var k=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]];var A=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var e=0;e<3;++e){var t=A[e];var r=(e+1)%3;var n=(e+2)%3;t[r+0]=1;t[n+3]=1;t[e+6]=1}})();function M(e,t,r,n,a){this.position=e;this.index=t;this.uv=r;this.level=n;this.dataCoordinate=a}var S=256;function E(e,t,r,n,a,i,o,l,u,f,v,h,p,d,g){this.gl=e;this.shape=t;this.bounds=r;this.objectOffset=g;this.intensityBounds=[];this._shader=n;this._pickShader=a;this._coordinateBuffer=i;this._vao=o;this._colorMap=l;this._contourShader=u;this._contourPickShader=f;this._contourBuffer=v;this._contourVAO=h;this._contourOffsets=[[],[],[]];this._contourCounts=[[],[],[]];this._vertexCount=0;this._pickResult=new M([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]);this._dynamicBuffer=p;this._dynamicVAO=d;this._dynamicOffsets=[0,0,0];this._dynamicCounts=[0,0,0];this.contourWidth=[1,1,1];this.contourLevels=[[1],[1],[1]];this.contourTint=[0,0,0];this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]];this.showContour=true;this.showSurface=true;this.enableHighlight=[true,true,true];this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.highlightTint=[1,1,1];this.highlightLevel=[-1,-1,-1];this.enableDynamic=[true,true,true];this.dynamicLevel=[NaN,NaN,NaN];this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.dynamicTint=[1,1,1];this.dynamicWidth=[1,1,1];this.axesBounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.surfaceProject=[false,false,false];this.contourProject=[[false,false,false],[false,false,false],[false,false,false]];this.colorBounds=[false,false];this._field=[c(s.mallocFloat(1024),[0,0]),c(s.mallocFloat(1024),[0,0]),c(s.mallocFloat(1024),[0,0])];this.pickId=1;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.snapToData=false;this.pixelRatio=1;this.opacity=1;this.lightPosition=[10,1e4,0];this.ambientLight=.8;this.diffuseLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.vertexColor=0;this.dirty=true}var L=E.prototype;L.genColormap=function(e,t){var r=false;var n=f([l({colormap:e,nshades:S,format:"rgba"}).map((function(e,n){var a=t?C(n/255,t):e[3];if(a<1)r=true;return[e[0],e[1],e[2],255*a]}))]);u.divseq(n,255);this.hasAlphaScale=r;return n};L.isTransparent=function(){return this.opacity<1||this.hasAlphaScale};L.isOpaque=function(){return!this.isTransparent()};L.pickSlots=1;L.setPickBase=function(e){this.pickId=e};function C(e,t){if(!t)return 1;if(!t.length)return 1;for(var r=0;r<t.length;++r){if(t.length<2)return 1;if(t[r][0]===e)return t[r][1];if(t[r][0]>e&&r>0){var n=(t[r][0]-e)/(t[r][0]-t[r-1][0]);return t[r][1]*(1-n)+n*t[r-1][1]}}return 1}var I=[0,0,0];var P={showSurface:false,showContour:false,projections:[T.slice(),T.slice(),T.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function O(e,t){var r,n,a;var i=t.axes&&t.axes.lastCubeProps.axis||I;var o=t.showSurface;var s=t.showContour;for(r=0;r<3;++r){o=o||t.surfaceProject[r];for(n=0;n<3;++n){s=s||t.contourProject[r][n]}}for(r=0;r<3;++r){var l=P.projections[r];for(n=0;n<16;++n){l[n]=0}for(n=0;n<4;++n){l[5*n]=1}l[5*r]=0;l[12+r]=t.axesBounds[+(i[r]>0)][r];h(l,e.model,l);var u=P.clipBounds[r];for(a=0;a<2;++a){for(n=0;n<3;++n){u[a][n]=e.clipBounds[a][n]}}u[0][r]=-1e8;u[1][r]=1e8}P.showSurface=o;P.showContour=s;return P}var D={model:T,view:T,projection:T,inverseModel:T.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0};var z=T.slice();var R=[1,0,0,0,1,0,0,0,1];function F(e,t){e=e||{};var r=this.gl;r.disable(r.CULL_FACE);this._colorMap.bind(0);var n=D;n.model=e.model||T;n.view=e.view||T;n.projection=e.projection||T;n.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]];n.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]];n.objectOffset=this.objectOffset;n.contourColor=this.contourColor[0];n.inverseModel=p(n.inverseModel,n.model);for(var a=0;a<2;++a){var i=n.clipBounds[a];for(var o=0;o<3;++o){i[o]=Math.min(Math.max(this.clipBounds[a][o],-1e8),1e8)}}n.kambient=this.ambientLight;n.kdiffuse=this.diffuseLight;n.kspecular=this.specularLight;n.roughness=this.roughness;n.fresnel=this.fresnel;n.opacity=this.opacity;n.height=0;n.permutation=R;n.vertexColor=this.vertexColor;var s=z;h(s,n.view,n.model);h(s,n.projection,s);p(s,s);for(a=0;a<3;++a){n.eyePosition[a]=s[12+a]/s[15]}var l=s[15];for(a=0;a<3;++a){l+=this.lightPosition[a]*s[4*a+3]}for(a=0;a<3;++a){var u=s[12+a];for(o=0;o<3;++o){u+=s[4*o+a]*this.lightPosition[o]}n.lightPosition[a]=u/l}var f=O(n,this);if(f.showSurface){this._shader.bind();this._shader.uniforms=n;this._vao.bind();if(this.showSurface&&this._vertexCount){this._vao.draw(r.TRIANGLES,this._vertexCount)}for(a=0;a<3;++a){if(!this.surfaceProject[a]||!this.vertexCount){continue}this._shader.uniforms.model=f.projections[a];this._shader.uniforms.clipBounds=f.clipBounds[a];this._vao.draw(r.TRIANGLES,this._vertexCount)}this._vao.unbind()}if(f.showContour){var c=this._contourShader;n.kambient=1;n.kdiffuse=0;n.kspecular=0;n.opacity=1;c.bind();c.uniforms=n;var v=this._contourVAO;v.bind();for(a=0;a<3;++a){c.uniforms.permutation=A[a];r.lineWidth(this.contourWidth[a]*this.pixelRatio);for(o=0;o<this.contourLevels[a].length;++o){if(o===this.highlightLevel[a]){c.uniforms.contourColor=this.highlightColor[a];c.uniforms.contourTint=this.highlightTint[a]}else if(o===0||o-1===this.highlightLevel[a]){c.uniforms.contourColor=this.contourColor[a];c.uniforms.contourTint=this.contourTint[a]}if(!this._contourCounts[a][o]){continue}c.uniforms.height=this.contourLevels[a][o];v.draw(r.LINES,this._contourCounts[a][o],this._contourOffsets[a][o])}}for(a=0;a<3;++a){c.uniforms.model=f.projections[a];c.uniforms.clipBounds=f.clipBounds[a];for(o=0;o<3;++o){if(!this.contourProject[a][o]){continue}c.uniforms.permutation=A[o];r.lineWidth(this.contourWidth[o]*this.pixelRatio);for(var d=0;d<this.contourLevels[o].length;++d){if(d===this.highlightLevel[o]){c.uniforms.contourColor=this.highlightColor[o];c.uniforms.contourTint=this.highlightTint[o]}else if(d===0||d-1===this.highlightLevel[o]){c.uniforms.contourColor=this.contourColor[o];c.uniforms.contourTint=this.contourTint[o]}if(!this._contourCounts[o][d]){continue}c.uniforms.height=this.contourLevels[o][d];v.draw(r.LINES,this._contourCounts[o][d],this._contourOffsets[o][d])}}}v.unbind();v=this._dynamicVAO;v.bind();for(a=0;a<3;++a){if(this._dynamicCounts[a]===0){continue}c.uniforms.model=n.model;c.uniforms.clipBounds=n.clipBounds;c.uniforms.permutation=A[a];r.lineWidth(this.dynamicWidth[a]*this.pixelRatio);c.uniforms.contourColor=this.dynamicColor[a];c.uniforms.contourTint=this.dynamicTint[a];c.uniforms.height=this.dynamicLevel[a];v.draw(r.LINES,this._dynamicCounts[a],this._dynamicOffsets[a]);for(o=0;o<3;++o){if(!this.contourProject[o][a]){continue}c.uniforms.model=f.projections[o];c.uniforms.clipBounds=f.clipBounds[o];v.draw(r.LINES,this._dynamicCounts[a],this._dynamicOffsets[a])}}v.unbind()}}L.draw=function(e){return F.call(this,e,false)};L.drawTransparent=function(e){return F.call(this,e,true)};var B={model:T,view:T,projection:T,inverseModel:T,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};L.drawPick=function(e){e=e||{};var t=this.gl;t.disable(t.CULL_FACE);var r=B;r.model=e.model||T;r.view=e.view||T;r.projection=e.projection||T;r.shape=this._field[2].shape;r.pickId=this.pickId/255;r.lowerBound=this.bounds[0];r.upperBound=this.bounds[1];r.objectOffset=this.objectOffset;r.permutation=R;for(var n=0;n<2;++n){var a=r.clipBounds[n];for(var i=0;i<3;++i){a[i]=Math.min(Math.max(this.clipBounds[n][i],-1e8),1e8)}}var o=O(r,this);if(o.showSurface){this._pickShader.bind();this._pickShader.uniforms=r;this._vao.bind();this._vao.draw(t.TRIANGLES,this._vertexCount);for(n=0;n<3;++n){if(!this.surfaceProject[n]){continue}this._pickShader.uniforms.model=o.projections[n];this._pickShader.uniforms.clipBounds=o.clipBounds[n];this._vao.draw(t.TRIANGLES,this._vertexCount)}this._vao.unbind()}if(o.showContour){var s=this._contourPickShader;s.bind();s.uniforms=r;var l=this._contourVAO;l.bind();for(i=0;i<3;++i){t.lineWidth(this.contourWidth[i]*this.pixelRatio);s.uniforms.permutation=A[i];for(n=0;n<this.contourLevels[i].length;++n){if(this._contourCounts[i][n]){s.uniforms.height=this.contourLevels[i][n];l.draw(t.LINES,this._contourCounts[i][n],this._contourOffsets[i][n])}}}for(n=0;n<3;++n){s.uniforms.model=o.projections[n];s.uniforms.clipBounds=o.clipBounds[n];for(i=0;i<3;++i){if(!this.contourProject[n][i]){continue}s.uniforms.permutation=A[i];t.lineWidth(this.contourWidth[i]*this.pixelRatio);for(var u=0;u<this.contourLevels[i].length;++u){if(this._contourCounts[i][u]){s.uniforms.height=this.contourLevels[i][u];l.draw(t.LINES,this._contourCounts[i][u],this._contourOffsets[i][u])}}}}l.unbind()}};L.pick=function(e){if(!e){return null}if(e.id!==this.pickId){return null}var t=this._field[2].shape;var r=this._pickResult;var n=t[0]*(e.value[0]+(e.value[2]>>4)/16)/255;var a=Math.floor(n);var i=n-a;var o=t[1]*(e.value[1]+(e.value[2]&15)/16)/255;var s=Math.floor(o);var l=o-s;a+=1;s+=1;var u=r.position;u[0]=u[1]=u[2]=0;for(var f=0;f<2;++f){var c=f?i:1-i;for(var v=0;v<2;++v){var h=v?l:1-l;var p=a+f;var g=s+v;var y=c*h;for(var m=0;m<3;++m){u[m]+=this._field[m].get(p,g)*y}}}var x=this._pickResult.level;for(var b=0;b<3;++b){x[b]=d.le(this.contourLevels[b],u[b]);if(x[b]<0){if(this.contourLevels[b].length>0){x[b]=0}}else if(x[b]<this.contourLevels[b].length-1){var _=this.contourLevels[b][x[b]];var w=this.contourLevels[b][x[b]+1];if(Math.abs(_-u[b])>Math.abs(w-u[b])){x[b]+=1}}}r.index[0]=i<.5?a:a+1;r.index[1]=l<.5?s:s+1;r.uv[0]=n/t[0];r.uv[1]=o/t[1];for(m=0;m<3;++m){r.dataCoordinate[m]=this._field[m].get(r.index[0],r.index[1])}return r};L.padField=function(e,t){var r=t.shape.slice();var n=e.shape.slice();u.assign(e.lo(1,1).hi(r[0],r[1]),t);u.assign(e.lo(1).hi(r[0],1),t.hi(r[0],1));u.assign(e.lo(1,n[1]-1).hi(r[0],1),t.lo(0,r[1]-1).hi(r[0],1));u.assign(e.lo(0,1).hi(1,r[1]),t.hi(1));u.assign(e.lo(n[0]-1,1).hi(1,r[1]),t.lo(r[0]-1));e.set(0,0,t.get(0,0));e.set(0,n[1]-1,t.get(0,r[1]-1));e.set(n[0]-1,0,t.get(r[0]-1,0));e.set(n[0]-1,n[1]-1,t.get(r[0]-1,r[1]-1))};function N(e,t){if(Array.isArray(e)){return[t(e[0]),t(e[1]),t(e[2])]}return[t(e),t(e),t(e)]}function j(e){if(Array.isArray(e)){if(e.length===3){return[e[0],e[1],e[2],1]}return[e[0],e[1],e[2],e[3]]}return[0,0,0,1]}function U(e){if(Array.isArray(e)){if(Array.isArray(e)){return[j(e[0]),j(e[1]),j(e[2])]}else{var t=j(e);return[t.slice(),t.slice(),t.slice()]}}}L.update=function(e){e=e||{};this.objectOffset=e.objectOffset||this.objectOffset;this.dirty=true;if("contourWidth"in e){this.contourWidth=N(e.contourWidth,Number)}if("showContour"in e){this.showContour=N(e.showContour,Boolean)}if("showSurface"in e){this.showSurface=!!e.showSurface}if("contourTint"in e){this.contourTint=N(e.contourTint,Boolean)}if("contourColor"in e){this.contourColor=U(e.contourColor)}if("contourProject"in e){this.contourProject=N(e.contourProject,(function(e){return N(e,Boolean)}))}if("surfaceProject"in e){this.surfaceProject=e.surfaceProject}if("dynamicColor"in e){this.dynamicColor=U(e.dynamicColor)}if("dynamicTint"in e){this.dynamicTint=N(e.dynamicTint,Number)}if("dynamicWidth"in e){this.dynamicWidth=N(e.dynamicWidth,Number)}if("opacity"in e){this.opacity=e.opacity}if("opacityscale"in e){this.opacityscale=e.opacityscale}if("colorBounds"in e){this.colorBounds=e.colorBounds}if("vertexColor"in e){this.vertexColor=e.vertexColor?1:0}if("colormap"in e){this._colorMap.setPixels(this.genColormap(e.colormap,this.opacityscale))}var t=e.field||e.coords&&e.coords[2]||null;var r=false;if(!t){if(this._field[2].shape[0]||this._field[2].shape[2]){t=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2)}else{t=this._field[2].hi(0,0)}}if("field"in e||"coords"in e){var a=(t.shape[0]+2)*(t.shape[1]+2);if(a>this._field[2].data.length){s.freeFloat(this._field[2].data);this._field[2].data=s.mallocFloat(n.nextPow2(a))}this._field[2]=c(this._field[2].data,[t.shape[0]+2,t.shape[1]+2]);this.padField(this._field[2],t);this.shape=t.shape.slice();var i=this.shape;for(var o=0;o<2;++o){if(this._field[2].size>this._field[o].data.length){s.freeFloat(this._field[o].data);this._field[o].data=s.mallocFloat(this._field[2].size)}this._field[o]=c(this._field[o].data,[i[0]+2,i[1]+2])}if(e.coords){var l=e.coords;if(!Array.isArray(l)||l.length!==3){throw new Error("gl-surface: invalid coordinates for x/y")}for(o=0;o<2;++o){var u=l[o];for(y=0;y<2;++y){if(u.shape[y]!==i[y]){throw new Error("gl-surface: coords have incorrect shape")}}this.padField(this._field[o],u)}}else if(e.ticks){var f=e.ticks;if(!Array.isArray(f)||f.length!==2){throw new Error("gl-surface: invalid ticks")}for(o=0;o<2;++o){var h=f[o];if(Array.isArray(h)||h.length){h=c(h)}if(h.shape[0]!==i[o]){throw new Error("gl-surface: invalid tick length")}var p=c(h.data,i);p.stride[o]=h.stride[0];p.stride[o^1]=0;this.padField(this._field[o],p)}}else{for(o=0;o<2;++o){var d=[0,0];d[o]=1;this._field[o]=c(this._field[o].data,[i[0]+2,i[1]+2],d,0)}this._field[0].set(0,0,0);for(var y=0;y<i[0];++y){this._field[0].set(y+1,0,y)}this._field[0].set(i[0]+1,0,i[0]-1);this._field[1].set(0,0,0);for(y=0;y<i[1];++y){this._field[1].set(0,y+1,y)}this._field[1].set(0,i[1]+1,i[1]-1)}var m=this._field;var x=c(s.mallocFloat(m[2].size*3*2),[3,i[0]+2,i[1]+2,2]);for(o=0;o<3;++o){g(x.pick(o),m[o],"mirror")}var b=c(s.mallocFloat(m[2].size*3),[i[0]+2,i[1]+2,3]);for(o=0;o<i[0]+2;++o){for(y=0;y<i[1]+2;++y){var _=x.get(0,o,y,0);var w=x.get(0,o,y,1);var T=x.get(1,o,y,0);var A=x.get(1,o,y,1);var M=x.get(2,o,y,0);var S=x.get(2,o,y,1);var E=T*S-A*M;var L=M*w-S*_;var C=_*A-w*T;var I=Math.sqrt(E*E+L*L+C*C);if(I<1e-8){I=Math.max(Math.abs(E),Math.abs(L),Math.abs(C));if(I<1e-8){C=1;L=E=0;I=1}else{I=1/I}}else{I=1/Math.sqrt(I)}b.set(o,y,0,E*I);b.set(o,y,1,L*I);b.set(o,y,2,C*I)}}s.free(x.data);var P=[Infinity,Infinity,Infinity];var O=[-Infinity,-Infinity,-Infinity];var D=Infinity;var z=-Infinity;var R=(i[0]-1)*(i[1]-1)*6;var F=s.mallocFloat(n.nextPow2(10*R));var B=0;var j=0;for(o=0;o<i[0]-1;++o){e:for(y=0;y<i[1]-1;++y){for(var V=0;V<2;++V){for(var H=0;H<2;++H){for(var q=0;q<3;++q){var G=this._field[q].get(1+o+V,1+y+H);if(isNaN(G)||!isFinite(G)){continue e}}}}for(q=0;q<6;++q){var Z=o+k[q][0];var Y=y+k[q][1];var W=this._field[0].get(Z+1,Y+1);var X=this._field[1].get(Z+1,Y+1);G=this._field[2].get(Z+1,Y+1);E=b.get(Z+1,Y+1,0);L=b.get(Z+1,Y+1,1);C=b.get(Z+1,Y+1,2);if(e.intensity){J=e.intensity.get(Z,Y)}var J=e.intensity?e.intensity.get(Z,Y):G+this.objectOffset[2];F[B++]=Z;F[B++]=Y;F[B++]=W;F[B++]=X;F[B++]=G;F[B++]=0;F[B++]=J;F[B++]=E;F[B++]=L;F[B++]=C;P[0]=Math.min(P[0],W+this.objectOffset[0]);P[1]=Math.min(P[1],X+this.objectOffset[1]);P[2]=Math.min(P[2],G+this.objectOffset[2]);D=Math.min(D,J);O[0]=Math.max(O[0],W+this.objectOffset[0]);O[1]=Math.max(O[1],X+this.objectOffset[1]);O[2]=Math.max(O[2],G+this.objectOffset[2]);z=Math.max(z,J);j+=1}}}if(e.intensityBounds){D=+e.intensityBounds[0];z=+e.intensityBounds[1]}for(o=6;o<B;o+=10){F[o]=(F[o]-D)/(z-D)}this._vertexCount=j;this._coordinateBuffer.update(F.subarray(0,B));s.freeFloat(F);s.free(b.data);this.bounds=[P,O];this.intensity=e.intensity||this._field[2];if(this.intensityBounds[0]!==D||this.intensityBounds[1]!==z){r=true}this.intensityBounds=[D,z]}if("levels"in e){var K=e.levels;if(!Array.isArray(K[0])){K=[[],[],K]}else{K=K.slice()}for(o=0;o<3;++o){K[o]=K[o].slice();K[o].sort((function(e,t){return e-t}))}for(o=0;o<3;++o){for(y=0;y<K[o].length;++y){K[o][y]-=this.objectOffset[o]}}e:for(o=0;o<3;++o){if(K[o].length!==this.contourLevels[o].length){r=true;break}for(y=0;y<K[o].length;++y){if(K[o][y]!==this.contourLevels[o][y]){r=true;break e}}}this.contourLevels=K}if(r){m=this._field;i=this.shape;var $=[];for(var Q=0;Q<3;++Q){var ee=this.contourLevels[Q];var te=[];var re=[];var ne=[0,0,0];for(o=0;o<ee.length;++o){var ae=v(this._field[Q],ee[o]);te.push($.length/5|0);j=0;e:for(y=0;y<ae.cells.length;++y){var ie=ae.cells[y];for(q=0;q<2;++q){var oe=ae.positions[ie[q]];var se=oe[0];var le=Math.floor(se)|0;var ue=se-le;var fe=oe[1];var ce=Math.floor(fe)|0;var ve=fe-ce;var he=false;t:for(var pe=0;pe<3;++pe){ne[pe]=0;var de=(Q+pe+1)%3;for(V=0;V<2;++V){var ge=V?ue:1-ue;Z=Math.min(Math.max(le+V,0),i[0])|0;for(H=0;H<2;++H){var ye=H?ve:1-ve;Y=Math.min(Math.max(ce+H,0),i[1])|0;if(pe<2){G=this._field[de].get(Z,Y)}else{G=(this.intensity.get(Z,Y)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0])}if(!isFinite(G)||isNaN(G)){he=true;break t}var me=ge*ye;ne[pe]+=me*G}}}if(!he){$.push(ne[0],ne[1],oe[0],oe[1],ne[2]);j+=1}else{if(q>0){for(var xe=0;xe<5;++xe){$.pop()}j-=1}continue e}}}re.push(j)}this._contourOffsets[Q]=te;this._contourCounts[Q]=re}var be=s.mallocFloat($.length);for(o=0;o<$.length;++o){be[o]=$[o]}this._contourBuffer.update(be);s.freeFloat(be)}};L.dispose=function(){this._shader.dispose();this._vao.dispose();this._coordinateBuffer.dispose();this._colorMap.dispose();this._contourBuffer.dispose();this._contourVAO.dispose();this._contourShader.dispose();this._contourPickShader.dispose();this._dynamicBuffer.dispose();this._dynamicVAO.dispose();for(var e=0;e<3;++e){s.freeFloat(this._field[e].data)}};L.highlight=function(e){var t;if(!e){this._dynamicCounts=[0,0,0];this.dyanamicLevel=[NaN,NaN,NaN];this.highlightLevel=[-1,-1,-1];return}for(t=0;t<3;++t){if(this.enableHighlight[t]){this.highlightLevel[t]=e.level[t]}else{this.highlightLevel[t]=-1}}var r;if(this.snapToData){r=e.dataCoordinate}else{r=e.position}for(t=0;t<3;++t){r[t]-=this.objectOffset[t]}if((!this.enableDynamic[0]||r[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||r[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||r[2]===this.dynamicLevel[2])){return}var n=0;var a=this.shape;var i=s.mallocFloat(12*a[0]*a[1]);for(var o=0;o<3;++o){if(!this.enableDynamic[o]){this.dynamicLevel[o]=NaN;this._dynamicCounts[o]=0;continue}this.dynamicLevel[o]=r[o];var l=(o+1)%3;var u=(o+2)%3;var f=this._field[o];var c=this._field[l];var h=this._field[u];var p=v(f,r[o]);var d=p.cells;var g=p.positions;this._dynamicOffsets[o]=n;for(t=0;t<d.length;++t){var y=d[t];for(var m=0;m<2;++m){var x=g[y[m]];var b=+x[0];var _=b|0;var w=Math.min(_+1,a[0])|0;var T=b-_;var k=1-T;var A=+x[1];var M=A|0;var S=Math.min(M+1,a[1])|0;var E=A-M;var L=1-E;var C=k*L;var I=k*E;var P=T*L;var O=T*E;var D=C*c.get(_,M)+I*c.get(_,S)+P*c.get(w,M)+O*c.get(w,S);var z=C*h.get(_,M)+I*h.get(_,S)+P*h.get(w,M)+O*h.get(w,S);if(isNaN(D)||isNaN(z)){if(m){n-=1}break}i[2*n+0]=D;i[2*n+1]=z;n+=1}}this._dynamicCounts[o]=n-this._dynamicOffsets[o]}this._dynamicBuffer.update(i.subarray(0,2*n));s.freeFloat(i)};function V(e){var t=e.gl;var r=m(t);var n=b(t);var s=x(t);var l=_(t);var u=a(t);var f=i(t,[{buffer:u,size:4,stride:w,offset:0},{buffer:u,size:3,stride:w,offset:16},{buffer:u,size:3,stride:w,offset:28}]);var c=a(t);var v=i(t,[{buffer:c,size:4,stride:20,offset:0},{buffer:c,size:1,stride:20,offset:16}]);var h=a(t);var p=i(t,[{buffer:h,size:2,type:t.FLOAT}]);var d=o(t,1,S,t.RGBA,t.UNSIGNED_BYTE);d.minFilter=t.LINEAR;d.magFilter=t.LINEAR;var g=new E(t,[0,0],[[0,0,0],[0,0,0]],r,n,u,f,d,s,l,c,v,h,p,[0,0,0]);var y={levels:[[],[],[]]};for(var T in e){y[T]=e[T]}y.colormap=y.colormap||"jet";g.update(y);return g}},8931:function(e,t,r){"use strict";var n=r(5050);var a=r(7498);var i=r(5306);e.exports=_;var o=null;var s=null;var l=null;function u(e){o=[e.LINEAR,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_NEAREST];s=[e.NEAREST,e.LINEAR,e.NEAREST_MIPMAP_NEAREST,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_LINEAR];l=[e.REPEAT,e.CLAMP_TO_EDGE,e.MIRRORED_REPEAT]}function f(e){return"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&e instanceof ImageData}var c=function(e,t){a.muls(e,t,255)};function v(e,t,r){var n=e.gl;var a=n.getParameter(n.MAX_TEXTURE_SIZE);if(t<0||t>a||r<0||r>a){throw new Error("gl-texture2d: Invalid texture size")}e._shape=[t,r];e.bind();n.texImage2D(n.TEXTURE_2D,0,e.format,t,r,0,e.format,e.type,null);e._mipLevels=[0];return e}function h(e,t,r,n,a,i){this.gl=e;this.handle=t;this.format=a;this.type=i;this._shape=[r,n];this._mipLevels=[0];this._magFilter=e.NEAREST;this._minFilter=e.NEAREST;this._wrapS=e.CLAMP_TO_EDGE;this._wrapT=e.CLAMP_TO_EDGE;this._anisoSamples=1;var o=this;var s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return o._wrapS},set:function(e){return o.wrapS=e}},{get:function(){return o._wrapT},set:function(e){return o.wrapT=e}}]);this._wrapVector=s;var l=[this._shape[0],this._shape[1]];Object.defineProperties(l,[{get:function(){return o._shape[0]},set:function(e){return o.width=e}},{get:function(){return o._shape[1]},set:function(e){return o.height=e}}]);this._shapeVector=l}var p=h.prototype;Object.defineProperties(p,{minFilter:{get:function(){return this._minFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&o.indexOf(e)>=0){if(!t.getExtension("OES_texture_float_linear")){e=t.NEAREST}}if(s.indexOf(e)<0){throw new Error("gl-texture2d: Unknown filter mode "+e)}t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e);return this._minFilter=e}},magFilter:{get:function(){return this._magFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&o.indexOf(e)>=0){if(!t.getExtension("OES_texture_float_linear")){e=t.NEAREST}}if(s.indexOf(e)<0){throw new Error("gl-texture2d: Unknown filter mode "+e)}t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e);return this._magFilter=e}},mipSamples:{get:function(){return this._anisoSamples},set:function(e){var t=this._anisoSamples;this._anisoSamples=Math.max(e,1)|0;if(t!==this._anisoSamples){var r=this.gl.getExtension("EXT_texture_filter_anisotropic");if(r){this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(e){this.bind();if(l.indexOf(e)<0){throw new Error("gl-texture2d: Unknown wrap mode "+e)}this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,e);return this._wrapS=e}},wrapT:{get:function(){return this._wrapT},set:function(e){this.bind();if(l.indexOf(e)<0){throw new Error("gl-texture2d: Unknown wrap mode "+e)}this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,e);return this._wrapT=e}},wrap:{get:function(){return this._wrapVector},set:function(e){if(!Array.isArray(e)){e=[e,e]}if(e.length!==2){throw new Error("gl-texture2d: Must specify wrap mode for rows and columns")}for(var t=0;t<2;++t){if(l.indexOf(e[t])<0){throw new Error("gl-texture2d: Unknown wrap mode "+e)}}this._wrapS=e[0];this._wrapT=e[1];var r=this.gl;this.bind();r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT);return e}},shape:{get:function(){return this._shapeVector},set:function(e){if(!Array.isArray(e)){e=[e|0,e|0]}else{if(e.length!==2){throw new Error("gl-texture2d: Invalid texture shape")}}v(this,e[0]|0,e[1]|0);return[e[0]|0,e[1]|0]}},width:{get:function(){return this._shape[0]},set:function(e){e=e|0;v(this,e,this._shape[1]);return e}},height:{get:function(){return this._shape[1]},set:function(e){e=e|0;v(this,this._shape[0],e);return e}}});p.bind=function(e){var t=this.gl;if(e!==undefined){t.activeTexture(t.TEXTURE0+(e|0))}t.bindTexture(t.TEXTURE_2D,this.handle);if(e!==undefined){return e|0}return t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0};p.dispose=function(){this.gl.deleteTexture(this.handle)};p.generateMipmap=function(){this.bind();this.gl.generateMipmap(this.gl.TEXTURE_2D);var e=Math.min(this._shape[0],this._shape[1]);for(var t=0;e>0;++t,e>>>=1){if(this._mipLevels.indexOf(t)<0){this._mipLevels.push(t)}}};p.setPixels=function(e,t,r,n){var a=this.gl;this.bind();if(Array.isArray(t)){n=r;r=t[1]|0;t=t[0]|0}else{t=t||0;r=r||0}n=n||0;var i=f(e)?e:e.raw;if(i){var o=this._mipLevels.indexOf(n)<0;if(o){a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,this.type,i);this._mipLevels.push(n)}else{a.texSubImage2D(a.TEXTURE_2D,n,t,r,this.format,this.type,i)}}else if(e.shape&&e.stride&&e.data){if(e.shape.length<2||t+e.shape[1]>this._shape[1]>>>n||r+e.shape[0]>this._shape[0]>>>n||t<0||r<0){throw new Error("gl-texture2d: Texture dimensions are out of bounds")}g(a,t,r,n,this.format,this.type,this._mipLevels,e)}else{throw new Error("gl-texture2d: Unsupported data type")}};function d(e,t){if(e.length===3){return t[2]===1&&t[1]===e[0]*e[2]&&t[0]===e[2]}return t[0]===1&&t[1]===e[0]}function g(e,t,r,o,s,l,u,f){var v=f.dtype;var h=f.shape.slice();if(h.length<2||h.length>3){throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d")}var p=0,g=0;var y=d(h,f.stride.slice());if(v==="float32"){p=e.FLOAT}else if(v==="float64"){p=e.FLOAT;y=false;v="float32"}else if(v==="uint8"){p=e.UNSIGNED_BYTE}else{p=e.UNSIGNED_BYTE;y=false;v="uint8"}var m=1;if(h.length===2){g=e.LUMINANCE;h=[h[0],h[1],1];f=n(f.data,h,[f.stride[0],f.stride[1],1],f.offset)}else if(h.length===3){if(h[2]===1){g=e.ALPHA}else if(h[2]===2){g=e.LUMINANCE_ALPHA}else if(h[2]===3){g=e.RGB}else if(h[2]===4){g=e.RGBA}else{throw new Error("gl-texture2d: Invalid shape for pixel coords")}m=h[2]}else{throw new Error("gl-texture2d: Invalid shape for texture")}if((g===e.LUMINANCE||g===e.ALPHA)&&(s===e.LUMINANCE||s===e.ALPHA)){g=s}if(g!==s){throw new Error("gl-texture2d: Incompatible texture format for setPixels")}var x=f.size;var b=u.indexOf(o)<0;if(b){u.push(o)}if(p===l&&y){if(f.offset===0&&f.data.length===x){if(b){e.texImage2D(e.TEXTURE_2D,o,s,h[0],h[1],0,s,l,f.data)}else{e.texSubImage2D(e.TEXTURE_2D,o,t,r,h[0],h[1],s,l,f.data)}}else{if(b){e.texImage2D(e.TEXTURE_2D,o,s,h[0],h[1],0,s,l,f.data.subarray(f.offset,f.offset+x))}else{e.texSubImage2D(e.TEXTURE_2D,o,t,r,h[0],h[1],s,l,f.data.subarray(f.offset,f.offset+x))}}}else{var _;if(l===e.FLOAT){_=i.mallocFloat32(x)}else{_=i.mallocUint8(x)}var w=n(_,h,[h[2],h[2]*h[0],1]);if(p===e.FLOAT&&l===e.UNSIGNED_BYTE){c(w,f)}else{a.assign(w,f)}if(b){e.texImage2D(e.TEXTURE_2D,o,s,h[0],h[1],0,s,l,_.subarray(0,x))}else{e.texSubImage2D(e.TEXTURE_2D,o,t,r,h[0],h[1],s,l,_.subarray(0,x))}if(l===e.FLOAT){i.freeFloat32(_)}else{i.freeUint8(_)}}}function y(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);return t}function m(e,t,r,n,a){var i=e.getParameter(e.MAX_TEXTURE_SIZE);if(t<0||t>i||r<0||r>i){throw new Error("gl-texture2d: Invalid texture shape")}if(a===e.FLOAT&&!e.getExtension("OES_texture_float")){throw new Error("gl-texture2d: Floating point textures not supported on this platform")}var o=y(e);e.texImage2D(e.TEXTURE_2D,0,n,t,r,0,n,a,null);return new h(e,o,t,r,n,a)}function x(e,t,r,n,a,i){var o=y(e);e.texImage2D(e.TEXTURE_2D,0,a,a,i,t);return new h(e,o,r,n,a,i)}function b(e,t){var r=t.dtype;var o=t.shape.slice();var s=e.getParameter(e.MAX_TEXTURE_SIZE);if(o[0]<0||o[0]>s||o[1]<0||o[1]>s){throw new Error("gl-texture2d: Invalid texture size")}var l=d(o,t.stride.slice());var u=0;if(r==="float32"){u=e.FLOAT}else if(r==="float64"){u=e.FLOAT;l=false;r="float32"}else if(r==="uint8"){u=e.UNSIGNED_BYTE}else{u=e.UNSIGNED_BYTE;l=false;r="uint8"}var f=0;if(o.length===2){f=e.LUMINANCE;o=[o[0],o[1],1];t=n(t.data,o,[t.stride[0],t.stride[1],1],t.offset)}else if(o.length===3){if(o[2]===1){f=e.ALPHA}else if(o[2]===2){f=e.LUMINANCE_ALPHA}else if(o[2]===3){f=e.RGB}else if(o[2]===4){f=e.RGBA}else{throw new Error("gl-texture2d: Invalid shape for pixel coords")}}else{throw new Error("gl-texture2d: Invalid shape for texture")}if(u===e.FLOAT&&!e.getExtension("OES_texture_float")){u=e.UNSIGNED_BYTE;l=false}var v,p;var g=t.size;if(!l){var m=[o[2],o[2]*o[0],1];p=i.malloc(g,r);var x=n(p,o,m,0);if((r==="float32"||r==="float64")&&u===e.UNSIGNED_BYTE){c(x,t)}else{a.assign(x,t)}v=p.subarray(0,g)}else if(t.offset===0&&t.data.length===g){v=t.data}else{v=t.data.subarray(t.offset,t.offset+g)}var b=y(e);e.texImage2D(e.TEXTURE_2D,0,f,o[0],o[1],0,f,u,v);if(!l){i.free(p)}return new h(e,b,o[0],o[1],f,u)}function _(e){if(arguments.length<=1){throw new Error("gl-texture2d: Missing arguments for texture2d constructor")}if(!o){u(e)}if(typeof arguments[1]==="number"){return m(e,arguments[1],arguments[2],arguments[3]||e.RGBA,arguments[4]||e.UNSIGNED_BYTE)}if(Array.isArray(arguments[1])){return m(e,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE)}if(typeof arguments[1]==="object"){var t=arguments[1];var r=f(t)?t:t.raw;if(r){return x(e,r,t.width|0,t.height|0,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE)}else if(t.shape&&t.data&&t.stride){return b(e,t)}}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},3056:function(e){"use strict";function t(e,t,r){if(t){t.bind()}else{e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}var n=e.getParameter(e.MAX_VERTEX_ATTRIBS)|0;if(r){if(r.length>n){throw new Error("gl-vao: Too many vertex attributes")}for(var a=0;a<r.length;++a){var i=r[a];if(i.buffer){var o=i.buffer;var s=i.size||4;var l=i.type||e.FLOAT;var u=!!i.normalized;var f=i.stride||0;var c=i.offset||0;o.bind();e.enableVertexAttribArray(a);e.vertexAttribPointer(a,s,l,u,f,c)}else{if(typeof i==="number"){e.vertexAttrib1f(a,i)}else if(i.length===1){e.vertexAttrib1f(a,i[0])}else if(i.length===2){e.vertexAttrib2f(a,i[0],i[1])}else if(i.length===3){e.vertexAttrib3f(a,i[0],i[1],i[2])}else if(i.length===4){e.vertexAttrib4f(a,i[0],i[1],i[2],i[3])}else{throw new Error("gl-vao: Invalid vertex attribute")}e.disableVertexAttribArray(a)}}for(;a<n;++a){e.disableVertexAttribArray(a)}}else{e.bindBuffer(e.ARRAY_BUFFER,null);for(var a=0;a<n;++a){e.disableVertexAttribArray(a)}}}e.exports=t},7220:function(e,t,r){"use strict";var n=r(3056);function a(e){this.gl=e;this._elements=null;this._attributes=null;this._elementsType=e.UNSIGNED_SHORT}a.prototype.bind=function(){n(this.gl,this._elements,this._attributes)};a.prototype.update=function(e,t,r){this._elements=t;this._attributes=e;this._elementsType=r||this.gl.UNSIGNED_SHORT};a.prototype.dispose=function(){};a.prototype.unbind=function(){};a.prototype.draw=function(e,t,r){r=r||0;var n=this.gl;if(this._elements){n.drawElements(e,t,this._elementsType,r)}else{n.drawArrays(e,r,t)}};function i(e){return new a(e)}e.exports=i},3778:function(e,t,r){"use strict";var n=r(3056);function a(e,t,r,n,a,i){this.location=e;this.dimension=t;this.a=r;this.b=n;this.c=a;this.d=i}a.prototype.bind=function(e){switch(this.dimension){case 1:e.vertexAttrib1f(this.location,this.a);break;case 2:e.vertexAttrib2f(this.location,this.a,this.b);break;case 3:e.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:e.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function i(e,t,r){this.gl=e;this._ext=t;this.handle=r;this._attribs=[];this._useElements=false;this._elementsType=e.UNSIGNED_SHORT}i.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var e=0;e<this._attribs.length;++e){this._attribs[e].bind(this.gl)}};i.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)};i.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)};i.prototype.update=function(e,t,r){this.bind();n(this.gl,t,e);this.unbind();this._attribs.length=0;if(e)for(var i=0;i<e.length;++i){var o=e[i];if(typeof o==="number"){this._attribs.push(new a(i,1,o))}else if(Array.isArray(o)){this._attribs.push(new a(i,o.length,o[0],o[1],o[2],o[3]))}}this._useElements=!!t;this._elementsType=r||this.gl.UNSIGNED_SHORT};i.prototype.draw=function(e,t,r){r=r||0;var n=this.gl;if(this._useElements){n.drawElements(e,t,this._elementsType,r)}else{n.drawArrays(e,r,t)}};function o(e,t){return new i(e,t,t.createVertexArrayOES())}e.exports=o},2944:function(e,t,r){"use strict";var n=r(3778);var a=r(7220);function i(e){this.bindVertexArrayOES=e.bindVertexArray.bind(e);this.createVertexArrayOES=e.createVertexArray.bind(e);this.deleteVertexArrayOES=e.deleteVertexArray.bind(e)}function o(e,t,r,o){var s=e.createVertexArray?new i(e):e.getExtension("OES_vertex_array_object");var l;if(s){l=n(e,s)}else{l=a(e)}l.update(t,r,o);return l}e.exports=o},2598:function(e){e.exports=t;function t(e,t,r){e[0]=t[0]+r[0];e[1]=t[1]+r[1];e[2]=t[2]+r[2];return e}},5879:function(e,t,r){e.exports=o;var n=r(5415);var a=r(899);var i=r(9305);function o(e,t){var r=n(e[0],e[1],e[2]);var o=n(t[0],t[1],t[2]);a(r,r);a(o,o);var s=i(r,o);if(s>1){return 0}else{return Math.acos(s)}}},8827:function(e){e.exports=t;function t(e,t){e[0]=Math.ceil(t[0]);e[1]=Math.ceil(t[1]);e[2]=Math.ceil(t[2]);return e}},7622:function(e){e.exports=t;function t(e){var t=new Float32Array(3);t[0]=e[0];t[1]=e[1];t[2]=e[2];return t}},8782:function(e){e.exports=t;function t(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];return e}},8501:function(e){e.exports=t;function t(){var e=new Float32Array(3);e[0]=0;e[1]=0;e[2]=0;return e}},903:function(e){e.exports=t;function t(e,t,r){var n=t[0],a=t[1],i=t[2],o=r[0],s=r[1],l=r[2];e[0]=a*l-i*s;e[1]=i*o-n*l;e[2]=n*s-a*o;return e}},5981:function(e,t,r){e.exports=r(8288)},8288:function(e){e.exports=t;function t(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2];return Math.sqrt(r*r+n*n+a*a)}},8629:function(e,t,r){e.exports=r(7979)},7979:function(e){e.exports=t;function t(e,t,r){e[0]=t[0]/r[0];e[1]=t[1]/r[1];e[2]=t[2]/r[2];return e}},9305:function(e){e.exports=t;function t(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},154:function(e){e.exports=1e-6},4932:function(e,t,r){e.exports=a;var n=r(154);function a(e,t){var r=e[0];var a=e[1];var i=e[2];var o=t[0];var s=t[1];var l=t[2];return Math.abs(r-o)<=n*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-s)<=n*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-l)<=n*Math.max(1,Math.abs(i),Math.abs(l))}},5777:function(e){e.exports=t;function t(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}},3306:function(e){e.exports=t;function t(e,t){e[0]=Math.floor(t[0]);e[1]=Math.floor(t[1]);e[2]=Math.floor(t[2]);return e}},7447:function(e,t,r){e.exports=a;var n=r(8501)();function a(e,t,r,a,i,o){var s,l;if(!t){t=3}if(!r){r=0}if(a){l=Math.min(a*t+r,e.length)}else{l=e.length}for(s=r;s<l;s+=t){n[0]=e[s];n[1]=e[s+1];n[2]=e[s+2];i(n,n,o);e[s]=n[0];e[s+1]=n[1];e[s+2]=n[2]}return e}},5415:function(e){e.exports=t;function t(e,t,r){var n=new Float32Array(3);n[0]=e;n[1]=t;n[2]=r;return n}},2858:function(e,t,r){e.exports={EPSILON:r(154),create:r(8501),clone:r(7622),angle:r(5879),fromValues:r(5415),copy:r(8782),set:r(831),equals:r(4932),exactEquals:r(5777),add:r(2598),subtract:r(911),sub:r(8921),multiply:r(105),mul:r(5733),divide:r(7979),div:r(8629),min:r(3605),max:r(1716),floor:r(3306),ceil:r(8827),round:r(1624),scale:r(5685),scaleAndAdd:r(6722),distance:r(8288),dist:r(5981),squaredDistance:r(6403),sqrDist:r(5294),length:r(4693),len:r(1468),squaredLength:r(4337),sqrLen:r(3303),negate:r(435),inverse:r(2073),normalize:r(899),dot:r(9305),cross:r(903),lerp:r(1868),random:r(6660),transformMat4:r(3255),transformMat3:r(9908),transformQuat:r(6568),rotateX:r(392),rotateY:r(3222),rotateZ:r(3388),forEach:r(7447)}},2073:function(e){e.exports=t;function t(e,t){e[0]=1/t[0];e[1]=1/t[1];e[2]=1/t[2];return e}},1468:function(e,t,r){e.exports=r(4693)},4693:function(e){e.exports=t;function t(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}},1868:function(e){e.exports=t;function t(e,t,r,n){var a=t[0],i=t[1],o=t[2];e[0]=a+n*(r[0]-a);e[1]=i+n*(r[1]-i);e[2]=o+n*(r[2]-o);return e}},1716:function(e){e.exports=t;function t(e,t,r){e[0]=Math.max(t[0],r[0]);e[1]=Math.max(t[1],r[1]);e[2]=Math.max(t[2],r[2]);return e}},3605:function(e){e.exports=t;function t(e,t,r){e[0]=Math.min(t[0],r[0]);e[1]=Math.min(t[1],r[1]);e[2]=Math.min(t[2],r[2]);return e}},5733:function(e,t,r){e.exports=r(105)},105:function(e){e.exports=t;function t(e,t,r){e[0]=t[0]*r[0];e[1]=t[1]*r[1];e[2]=t[2]*r[2];return e}},435:function(e){e.exports=t;function t(e,t){e[0]=-t[0];e[1]=-t[1];e[2]=-t[2];return e}},899:function(e){e.exports=t;function t(e,t){var r=t[0],n=t[1],a=t[2];var i=r*r+n*n+a*a;if(i>0){i=1/Math.sqrt(i);e[0]=t[0]*i;e[1]=t[1]*i;e[2]=t[2]*i}return e}},6660:function(e){e.exports=t;function t(e,t){t=t||1;var r=Math.random()*2*Math.PI;var n=Math.random()*2-1;var a=Math.sqrt(1-n*n)*t;e[0]=Math.cos(r)*a;e[1]=Math.sin(r)*a;e[2]=n*t;return e}},392:function(e){e.exports=t;function t(e,t,r,n){var a=r[1];var i=r[2];var o=t[1]-a;var s=t[2]-i;var l=Math.sin(n);var u=Math.cos(n);e[0]=t[0];e[1]=a+o*u-s*l;e[2]=i+o*l+s*u;return e}},3222:function(e){e.exports=t;function t(e,t,r,n){var a=r[0];var i=r[2];var o=t[0]-a;var s=t[2]-i;var l=Math.sin(n);var u=Math.cos(n);e[0]=a+s*l+o*u;e[1]=t[1];e[2]=i+s*u-o*l;return e}},3388:function(e){e.exports=t;function t(e,t,r,n){var a=r[0];var i=r[1];var o=t[0]-a;var s=t[1]-i;var l=Math.sin(n);var u=Math.cos(n);e[0]=a+o*u-s*l;e[1]=i+o*l+s*u;e[2]=t[2];return e}},1624:function(e){e.exports=t;function t(e,t){e[0]=Math.round(t[0]);e[1]=Math.round(t[1]);e[2]=Math.round(t[2]);return e}},5685:function(e){e.exports=t;function t(e,t,r){e[0]=t[0]*r;e[1]=t[1]*r;e[2]=t[2]*r;return e}},6722:function(e){e.exports=t;function t(e,t,r,n){e[0]=t[0]+r[0]*n;e[1]=t[1]+r[1]*n;e[2]=t[2]+r[2]*n;return e}},831:function(e){e.exports=t;function t(e,t,r,n){e[0]=t;e[1]=r;e[2]=n;return e}},5294:function(e,t,r){e.exports=r(6403)},3303:function(e,t,r){e.exports=r(4337)},6403:function(e){e.exports=t;function t(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2];return r*r+n*n+a*a}},4337:function(e){e.exports=t;function t(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}},8921:function(e,t,r){e.exports=r(911)},911:function(e){e.exports=t;function t(e,t,r){e[0]=t[0]-r[0];e[1]=t[1]-r[1];e[2]=t[2]-r[2];return e}},9908:function(e){e.exports=t;function t(e,t,r){var n=t[0],a=t[1],i=t[2];e[0]=n*r[0]+a*r[3]+i*r[6];e[1]=n*r[1]+a*r[4]+i*r[7];e[2]=n*r[2]+a*r[5]+i*r[8];return e}},3255:function(e){e.exports=t;function t(e,t,r){var n=t[0],a=t[1],i=t[2],o=r[3]*n+r[7]*a+r[11]*i+r[15];o=o||1;e[0]=(r[0]*n+r[4]*a+r[8]*i+r[12])/o;e[1]=(r[1]*n+r[5]*a+r[9]*i+r[13])/o;e[2]=(r[2]*n+r[6]*a+r[10]*i+r[14])/o;return e}},6568:function(e){e.exports=t;function t(e,t,r){var n=t[0],a=t[1],i=t[2],o=r[0],s=r[1],l=r[2],u=r[3],f=u*n+s*i-l*a,c=u*a+l*n-o*i,v=u*i+o*a-s*n,h=-o*n-s*a-l*i;e[0]=f*u+h*-o+c*-l-v*-s;e[1]=c*u+h*-s+v*-o-f*-l;e[2]=v*u+h*-l+f*-s-c*-o;return e}},3433:function(e){e.exports=t;function t(e,t,r){e[0]=t[0]+r[0];e[1]=t[1]+r[1];e[2]=t[2]+r[2];e[3]=t[3]+r[3];return e}},1413:function(e){e.exports=t;function t(e){var t=new Float32Array(4);t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];return t}},3470:function(e){e.exports=t;function t(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];return e}},5313:function(e){e.exports=t;function t(){var e=new Float32Array(4);e[0]=0;e[1]=0;e[2]=0;e[3]=0;return e}},5446:function(e){e.exports=t;function t(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2],i=t[3]-e[3];return Math.sqrt(r*r+n*n+a*a+i*i)}},205:function(e){e.exports=t;function t(e,t,r){e[0]=t[0]/r[0];e[1]=t[1]/r[1];e[2]=t[2]/r[2];e[3]=t[3]/r[3];return e}},4242:function(e){e.exports=t;function t(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}},5680:function(e){e.exports=t;function t(e,t,r,n){var a=new Float32Array(4);a[0]=e;a[1]=t;a[2]=r;a[3]=n;return a}},4020:function(e,t,r){e.exports={create:r(5313),clone:r(1413),fromValues:r(5680),copy:r(3470),set:r(6453),add:r(3433),subtract:r(2705),multiply:r(746),divide:r(205),min:r(2170),max:r(3030),scale:r(5510),scaleAndAdd:r(4224),distance:r(5446),squaredDistance:r(1542),length:r(8177),squaredLength:r(9037),negate:r(6459),inverse:r(8057),normalize:r(381),dot:r(4242),lerp:r(8746),random:r(3770),transformMat4:r(6342),transformQuat:r(5022)}},8057:function(e){e.exports=t;function t(e,t){e[0]=1/t[0];e[1]=1/t[1];e[2]=1/t[2];e[3]=1/t[3];return e}},8177:function(e){e.exports=t;function t(e){var t=e[0],r=e[1],n=e[2],a=e[3];return Math.sqrt(t*t+r*r+n*n+a*a)}},8746:function(e){e.exports=t;function t(e,t,r,n){var a=t[0],i=t[1],o=t[2],s=t[3];e[0]=a+n*(r[0]-a);e[1]=i+n*(r[1]-i);e[2]=o+n*(r[2]-o);e[3]=s+n*(r[3]-s);return e}},3030:function(e){e.exports=t;function t(e,t,r){e[0]=Math.max(t[0],r[0]);e[1]=Math.max(t[1],r[1]);e[2]=Math.max(t[2],r[2]);e[3]=Math.max(t[3],r[3]);return e}},2170:function(e){e.exports=t;function t(e,t,r){e[0]=Math.min(t[0],r[0]);e[1]=Math.min(t[1],r[1]);e[2]=Math.min(t[2],r[2]);e[3]=Math.min(t[3],r[3]);return e}},746:function(e){e.exports=t;function t(e,t,r){e[0]=t[0]*r[0];e[1]=t[1]*r[1];e[2]=t[2]*r[2];e[3]=t[3]*r[3];return e}},6459:function(e){e.exports=t;function t(e,t){e[0]=-t[0];e[1]=-t[1];e[2]=-t[2];e[3]=-t[3];return e}},381:function(e){e.exports=t;function t(e,t){var r=t[0],n=t[1],a=t[2],i=t[3];var o=r*r+n*n+a*a+i*i;if(o>0){o=1/Math.sqrt(o);e[0]=r*o;e[1]=n*o;e[2]=a*o;e[3]=i*o}return e}},3770:function(e,t,r){var n=r(381);var a=r(5510);e.exports=i;function i(e,t){t=t||1;e[0]=Math.random();e[1]=Math.random();e[2]=Math.random();e[3]=Math.random();n(e,e);a(e,e,t);return e}},5510:function(e){e.exports=t;function t(e,t,r){e[0]=t[0]*r;e[1]=t[1]*r;e[2]=t[2]*r;e[3]=t[3]*r;return e}},4224:function(e){e.exports=t;function t(e,t,r,n){e[0]=t[0]+r[0]*n;e[1]=t[1]+r[1]*n;e[2]=t[2]+r[2]*n;e[3]=t[3]+r[3]*n;return e}},6453:function(e){e.exports=t;function t(e,t,r,n,a){e[0]=t;e[1]=r;e[2]=n;e[3]=a;return e}},1542:function(e){e.exports=t;function t(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2],i=t[3]-e[3];return r*r+n*n+a*a+i*i}},9037:function(e){e.exports=t;function t(e){var t=e[0],r=e[1],n=e[2],a=e[3];return t*t+r*r+n*n+a*a}},2705:function(e){e.exports=t;function t(e,t,r){e[0]=t[0]-r[0];e[1]=t[1]-r[1];e[2]=t[2]-r[2];e[3]=t[3]-r[3];return e}},6342:function(e){e.exports=t;function t(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3];e[0]=r[0]*n+r[4]*a+r[8]*i+r[12]*o;e[1]=r[1]*n+r[5]*a+r[9]*i+r[13]*o;e[2]=r[2]*n+r[6]*a+r[10]*i+r[14]*o;e[3]=r[3]*n+r[7]*a+r[11]*i+r[15]*o;return e}},5022:function(e){e.exports=t;function t(e,t,r){var n=t[0],a=t[1],i=t[2],o=r[0],s=r[1],l=r[2],u=r[3],f=u*n+s*i-l*a,c=u*a+l*n-o*i,v=u*i+o*a-s*n,h=-o*n-s*a-l*i;e[0]=f*u+h*-o+c*-l-v*-s;e[1]=c*u+h*-s+v*-o-f*-l;e[2]=v*u+h*-l+f*-s-c*-o;e[3]=t[3];return e}},9365:function(e,t,r){var n=r(8096);var a=r(7896);e.exports=i;function i(e){var t=Array.isArray(e)?e:n(e);for(var r=0;r<t.length;r++){var i=t[r];if(i.type!=="preprocessor")continue;var o=i.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!o)continue;if(!o[2])continue;var s=o[1];var l=o[2];return(s?a(l):l).trim()}}},3193:function(e,t,r){e.exports=T;var n=r(399),a=r(9746),i=r(9525),o=r(9458),s=r(3585);var l=999,u=9999,f=0,c=1,v=2,h=3,p=4,d=5,g=6,y=7,m=8,x=9,b=10,_=11;var w=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function T(e){var t=0,r=0,T=l,k,A,M=[],S=[],E=0,L=0,C=1,I=0,P=0,O=false,D=false,z="",R;e=e||{};var F=i;var B=n;if(e.version==="300 es"){F=s;B=o}var N={},j={};for(var t=0;t<F.length;t++){N[F[t]]=true}for(var t=0;t<B.length;t++){j[B[t]]=true}return function(e){S=[];if(e!==null)return V(e);return H()};function U(e){if(e.length){S.push({type:w[T],data:e,position:P,line:C,column:I})}}function V(e){t=0;if(e.toString)e=e.toString();z+=e.replace(/\r\n/g,"\n");R=z.length;var n;while(k=z[t],t<R){n=t;switch(T){case f:t=W();break;case c:t=Y();break;case v:t=Z();break;case h:t=X();break;case p:t=$();break;case _:t=K();break;case d:t=Q();break;case u:t=ee();break;case x:t=G();break;case l:t=q();break}if(n!==t){switch(z[n]){case"\n":I=0;++C;break;default:++I;break}}}r+=t;z=z.slice(t);return S}function H(e){if(M.length){U(M.join(""))}T=b;U("(eof)");return S}function q(){M=M.length?[]:M;if(A==="/"&&k==="*"){P=r+t-1;T=f;A=k;return t+1}if(A==="/"&&k==="/"){P=r+t-1;T=c;A=k;return t+1}if(k==="#"){T=v;P=r+t;return t}if(/\s/.test(k)){T=x;P=r+t;return t}O=/\d/.test(k);D=/[^\w_]/.test(k);P=r+t;T=O?p:D?h:u;return t}function G(){if(/[^\s]/g.test(k)){U(M.join(""));T=l;return t}M.push(k);A=k;return t+1}function Z(){if((k==="\r"||k==="\n")&&A!=="\\"){U(M.join(""));T=l;return t}M.push(k);A=k;return t+1}function Y(){return Z()}function W(){if(k==="/"&&A==="*"){M.push(k);U(M.join(""));T=l;return t+1}M.push(k);A=k;return t+1}function X(){if(A==="."&&/\d/.test(k)){T=d;return t}if(A==="/"&&k==="*"){T=f;return t}if(A==="/"&&k==="/"){T=c;return t}if(k==="."&&M.length){while(J(M));T=d;return t}if(k===";"||k===")"||k==="("){if(M.length)while(J(M));U(k);T=l;return t+1}var e=M.length===2&&k!=="=";if(/[\w_\d\s]/.test(k)||e){while(J(M));T=l;return t}M.push(k);A=k;return t+1}function J(e){var t=0,r,n;do{r=a.indexOf(e.slice(0,e.length+t).join(""));n=a[r];if(r===-1){if(t--+e.length>0)continue;n=e.slice(0,1).join("")}U(n);P+=n.length;M=M.slice(n.length);return M.length}while(1)}function K(){if(/[^a-fA-F0-9]/.test(k)){U(M.join(""));T=l;return t}M.push(k);A=k;return t+1}function $(){if(k==="."){M.push(k);T=d;A=k;return t+1}if(/[eE]/.test(k)){M.push(k);T=d;A=k;return t+1}if(k==="x"&&M.length===1&&M[0]==="0"){T=_;M.push(k);A=k;return t+1}if(/[^\d]/.test(k)){U(M.join(""));T=l;return t}M.push(k);A=k;return t+1}function Q(){if(k==="f"){M.push(k);A=k;t+=1}if(/[eE]/.test(k)){M.push(k);A=k;return t+1}if((k==="-"||k==="+")&&/[eE]/.test(A)){M.push(k);A=k;return t+1}if(/[^\d]/.test(k)){U(M.join(""));T=l;return t}M.push(k);A=k;return t+1}function ee(){if(/[^\d\w_]/.test(k)){var e=M.join("");if(j[e]){T=m}else if(N[e]){T=y}else{T=g}U(M.join(""));T=l;return t}M.push(k);A=k;return t+1}}},3585:function(e,t,r){var n=r(9525);n=n.slice().filter((function(e){return!/^(gl\_|texture)/.test(e)}));e.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(e){e.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(e,t,r){var n=r(399);e.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(e){e.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(e){e.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(e,t,r){var n=r(3193);e.exports=a;function a(e,t){var r=n(t);var a=[];a=a.concat(r(e));a=a.concat(r(null));return a}},6832:function(e){e.exports=function(e){if(typeof e==="string")e=[e];var t=[].slice.call(arguments,1);var r=[];for(var n=0;n<e.length-1;n++){r.push(e[n],t[n]||"")}r.push(e[n]);return r.join("")}},5233:function(e,t,r){"use strict";var n=r(4846);function a(){var e=false;try{var t=Object.defineProperty({},"passive",{get:function(){e=true}});window.addEventListener("test",null,t);window.removeEventListener("test",null,t)}catch(r){e=false}return e}e.exports=n&&a()},2183:function(e,t,r){"use strict";e.exports=h;var n=r(417);var a=r(8211).H;function i(e,t,r){this.vertices=e;this.adjacent=t;this.boundary=r;this.lastVisited=-1}i.prototype.flip=function(){var e=this.vertices[0];this.vertices[0]=this.vertices[1];this.vertices[1]=e;var t=this.adjacent[0];this.adjacent[0]=this.adjacent[1];this.adjacent[1]=t};function o(e,t,r){this.vertices=e;this.cell=t;this.index=r}function s(e,t){return a(e.vertices,t.vertices)}function l(e){return function(){var t=this.tuple;return e.apply(this,t)}}function u(e){var t=n[e+1];if(!t){t=n}return l(t)}var f=[];function c(e,t,r){this.dimension=e;this.vertices=t;this.simplices=r;this.interior=r.filter((function(e){return!e.boundary}));this.tuple=new Array(e+1);for(var n=0;n<=e;++n){this.tuple[n]=this.vertices[n]}var a=f[e];if(!a){a=f[e]=u(e)}this.orient=a}var v=c.prototype;v.handleBoundaryDegeneracy=function(e,t){var r=this.dimension;var n=this.vertices.length-1;var a=this.tuple;var i=this.vertices;var o=[e];e.lastVisited=-n;while(o.length>0){e=o.pop();var s=e.adjacent;for(var l=0;l<=r;++l){var u=s[l];if(!u.boundary||u.lastVisited<=-n){continue}var f=u.vertices;for(var c=0;c<=r;++c){var v=f[c];if(v<0){a[c]=t}else{a[c]=i[v]}}var h=this.orient();if(h>0){return u}u.lastVisited=-n;if(h===0){o.push(u)}}}return null};v.walk=function(e,t){var r=this.vertices.length-1;var n=this.dimension;var a=this.vertices;var i=this.tuple;var o=t?this.interior.length*Math.random()|0:this.interior.length-1;var s=this.interior[o];e:while(!s.boundary){var l=s.vertices;var u=s.adjacent;for(var f=0;f<=n;++f){i[f]=a[l[f]]}s.lastVisited=r;for(var f=0;f<=n;++f){var c=u[f];if(c.lastVisited>=r){continue}var v=i[f];i[f]=e;var h=this.orient();i[f]=v;if(h<0){s=c;continue e}else{if(!c.boundary){c.lastVisited=r}else{c.lastVisited=-r}}}return}return s};v.addPeaks=function(e,t){var r=this.vertices.length-1;var n=this.dimension;var a=this.vertices;var l=this.tuple;var u=this.interior;var f=this.simplices;var c=[t];t.lastVisited=r;t.vertices[t.vertices.indexOf(-1)]=r;t.boundary=false;u.push(t);var v=[];while(c.length>0){var t=c.pop();var h=t.vertices;var p=t.adjacent;var d=h.indexOf(r);if(d<0){continue}for(var g=0;g<=n;++g){if(g===d){continue}var y=p[g];if(!y.boundary||y.lastVisited>=r){continue}var m=y.vertices;if(y.lastVisited!==-r){var x=0;for(var b=0;b<=n;++b){if(m[b]<0){x=b;l[b]=e}else{l[b]=a[m[b]]}}var _=this.orient();if(_>0){m[x]=r;y.boundary=false;u.push(y);c.push(y);y.lastVisited=r;continue}else{y.lastVisited=-r}}var w=y.adjacent;var T=h.slice();var k=p.slice();var A=new i(T,k,true);f.push(A);var M=w.indexOf(t);if(M<0){continue}w[M]=A;k[d]=y;T[g]=-1;k[g]=t;p[g]=A;A.flip();for(var b=0;b<=n;++b){var S=T[b];if(S<0||S===r){continue}var E=new Array(n-1);var L=0;for(var C=0;C<=n;++C){var I=T[C];if(I<0||C===b){continue}E[L++]=I}v.push(new o(E,A,b))}}}v.sort(s);for(var g=0;g+1<v.length;g+=2){var P=v[g];var O=v[g+1];var D=P.index;var z=O.index;if(D<0||z<0){continue}P.cell.adjacent[P.index]=O.cell;O.cell.adjacent[O.index]=P.cell}};v.insert=function(e,t){var r=this.vertices;r.push(e);var n=this.walk(e,t);if(!n){return}var a=this.dimension;var i=this.tuple;for(var o=0;o<=a;++o){var s=n.vertices[o];if(s<0){i[o]=e}else{i[o]=r[s]}}var l=this.orient(i);if(l<0){return}else if(l===0){n=this.handleBoundaryDegeneracy(n,e);if(!n){return}}this.addPeaks(e,n)};v.boundary=function(){var e=this.dimension;var t=[];var r=this.simplices;var n=r.length;for(var a=0;a<n;++a){var i=r[a];if(i.boundary){var o=new Array(e);var s=i.vertices;var l=0;var u=0;for(var f=0;f<=e;++f){if(s[f]>=0){o[l++]=s[f]}else{u=f&1}}if(u===(e&1)){var c=o[0];o[0]=o[1];o[1]=c}t.push(o)}}return t};function h(e,t){var r=e.length;if(r===0){throw new Error("Must have at least d+1 points")}var a=e[0].length;if(r<=a){throw new Error("Must input at least d+1 points")}var o=e.slice(0,a+1);var s=n.apply(void 0,o);if(s===0){throw new Error("Input not in general position")}var l=new Array(a+1);for(var u=0;u<=a;++u){l[u]=u}if(s<0){l[0]=1;l[1]=0}var f=new i(l,new Array(a+1),false);var v=f.adjacent;var h=new Array(a+2);for(var u=0;u<=a;++u){var p=l.slice();for(var d=0;d<=a;++d){if(d===u){p[d]=-1}}var g=p[0];p[0]=p[1];p[1]=g;var y=new i(p,new Array(a+1),true);v[u]=y;h[u]=y}h[a+1]=f;for(var u=0;u<=a;++u){var p=v[u].vertices;var m=v[u].adjacent;for(var d=0;d<=a;++d){var x=p[d];if(x<0){m[d]=f;continue}for(var b=0;b<=a;++b){if(v[b].vertices.indexOf(x)<0){m[d]=v[b]}}}}var _=new c(a,o,h);var w=!!t;for(var u=a+1;u<r;++u){_.insert(e[u],w)}return _.boundary()}},9014:function(e,t,r){"use strict";var n=r(5070);var a=0;var i=1;var o=2;e.exports=w;function s(e,t,r,n,a){this.mid=e;this.left=t;this.right=r;this.leftPoints=n;this.rightPoints=a;this.count=(t?t.count:0)+(r?r.count:0)+n.length}var l=s.prototype;function u(e,t){e.mid=t.mid;e.left=t.left;e.right=t.right;e.leftPoints=t.leftPoints;e.rightPoints=t.rightPoints;e.count=t.count}function f(e,t){var r=x(t);e.mid=r.mid;e.left=r.left;e.right=r.right;e.leftPoints=r.leftPoints;e.rightPoints=r.rightPoints;e.count=r.count}function c(e,t){var r=e.intervals([]);r.push(t);f(e,r)}function v(e,t){var r=e.intervals([]);var n=r.indexOf(t);if(n<0){return a}r.splice(n,1);f(e,r);return i}l.intervals=function(e){e.push.apply(e,this.leftPoints);if(this.left){this.left.intervals(e)}if(this.right){this.right.intervals(e)}return e};l.insert=function(e){var t=this.count-this.leftPoints.length;this.count+=1;if(e[1]<this.mid){if(this.left){if(4*(this.left.count+1)>3*(t+1)){c(this,e)}else{this.left.insert(e)}}else{this.left=x([e])}}else if(e[0]>this.mid){if(this.right){if(4*(this.right.count+1)>3*(t+1)){c(this,e)}else{this.right.insert(e)}}else{this.right=x([e])}}else{var r=n.ge(this.leftPoints,e,y);var a=n.ge(this.rightPoints,e,m);this.leftPoints.splice(r,0,e);this.rightPoints.splice(a,0,e)}};l.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left){return a}var r=this.right?this.right.count:0;if(4*r>3*(t-1)){return v(this,e)}var s=this.left.remove(e);if(s===o){this.left=null;this.count-=1;return i}else if(s===i){this.count-=1}return s}else if(e[0]>this.mid){if(!this.right){return a}var l=this.left?this.left.count:0;if(4*l>3*(t-1)){return v(this,e)}var s=this.right.remove(e);if(s===o){this.right=null;this.count-=1;return i}else if(s===i){this.count-=1}return s}else{if(this.count===1){if(this.leftPoints[0]===e){return o}else{return a}}if(this.leftPoints.length===1&&this.leftPoints[0]===e){if(this.left&&this.right){var f=this;var c=this.left;while(c.right){f=c;c=c.right}if(f===this){c.right=this.right}else{var h=this.left;var s=this.right;f.count-=c.count;f.right=c.left;c.left=h;c.right=s}u(this,c);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else if(this.left){u(this,this.left)}else{u(this,this.right)}return i}for(var h=n.ge(this.leftPoints,e,y);h<this.leftPoints.length;++h){if(this.leftPoints[h][0]!==e[0]){break}if(this.leftPoints[h]===e){this.count-=1;this.leftPoints.splice(h,1);for(var s=n.ge(this.rightPoints,e,m);s<this.rightPoints.length;++s){if(this.rightPoints[s][1]!==e[1]){break}else if(this.rightPoints[s]===e){this.rightPoints.splice(s,1);return i}}}}return a}};function h(e,t,r){for(var n=0;n<e.length&&e[n][0]<=t;++n){var a=r(e[n]);if(a){return a}}}function p(e,t,r){for(var n=e.length-1;n>=0&&e[n][1]>=t;--n){var a=r(e[n]);if(a){return a}}}function d(e,t){for(var r=0;r<e.length;++r){var n=t(e[r]);if(n){return n}}}l.queryPoint=function(e,t){if(e<this.mid){if(this.left){var r=this.left.queryPoint(e,t);if(r){return r}}return h(this.leftPoints,e,t)}else if(e>this.mid){if(this.right){var r=this.right.queryPoint(e,t);if(r){return r}}return p(this.rightPoints,e,t)}else{return d(this.leftPoints,t)}};l.queryInterval=function(e,t,r){if(e<this.mid&&this.left){var n=this.left.queryInterval(e,t,r);if(n){return n}}if(t>this.mid&&this.right){var n=this.right.queryInterval(e,t,r);if(n){return n}}if(t<this.mid){return h(this.leftPoints,t,r)}else if(e>this.mid){return p(this.rightPoints,e,r)}else{return d(this.leftPoints,r)}};function g(e,t){return e-t}function y(e,t){var r=e[0]-t[0];if(r){return r}return e[1]-t[1]}function m(e,t){var r=e[1]-t[1];if(r){return r}return e[0]-t[0]}function x(e){if(e.length===0){return null}var t=[];for(var r=0;r<e.length;++r){t.push(e[r][0],e[r][1])}t.sort(g);var n=t[t.length>>1];var a=[];var i=[];var o=[];for(var r=0;r<e.length;++r){var l=e[r];if(l[1]<n){a.push(l)}else if(n<l[0]){i.push(l)}else{o.push(l)}}var u=o;var f=o.slice();u.sort(y);f.sort(m);return new s(n,x(a),x(i),u,f)}function b(e){this.root=e}var _=b.prototype;_.insert=function(e){if(this.root){this.root.insert(e)}else{this.root=new s(e[0],null,null,[e],[e])}};_.remove=function(e){if(this.root){var t=this.root.remove(e);if(t===o){this.root=null}return t!==a}return false};_.queryPoint=function(e,t){if(this.root){return this.root.queryPoint(e,t)}};_.queryInterval=function(e,t,r){if(e<=t&&this.root){return this.root.queryInterval(e,t,r)}};Object.defineProperty(_,"count",{get:function(){if(this.root){return this.root.count}return 0}});Object.defineProperty(_,"intervals",{get:function(){if(this.root){return this.root.intervals([])}return[]}});function w(e){if(!e||e.length===0){return new b(null)}return new b(x(e))}},9560:function(e){"use strict";function t(e){var t=new Array(e);for(var r=0;r<e;++r){t[r]=r}return t}e.exports=t},4846:function(e){e.exports=true},4780:function(e){e.exports=function(e){return e!=null&&(t(e)||r(e)||!!e._isBuffer)};function t(e){return!!e.constructor&&typeof e.constructor.isBuffer==="function"&&e.constructor.isBuffer(e)}function r(e){return typeof e.readFloatLE==="function"&&typeof e.slice==="function"&&t(e.slice(0,0))}},3596:function(e){"use strict";e.exports=function(e){var t=e.length,r;for(var n=0;n<t;n++){r=e.charCodeAt(n);if((r<9||r>13)&&r!==32&&r!==133&&r!==160&&r!==5760&&r!==6158&&(r<8192||r>8205)&&r!==8232&&r!==8233&&r!==8239&&r!==8287&&r!==8288&&r!==12288&&r!==65279){return false}}return true}},3578:function(e){function t(e,t,r){return e*(1-r)+t*r}e.exports=t},7191:function(e,t,r){var n=r(4690);var a=r(9823);var i=r(7332);var o=r(7787);var s=r(7437);var l=r(2142);var u={length:r(4693),normalize:r(899),dot:r(9305),cross:r(903)};var f=a();var c=a();var v=[0,0,0,0];var h=[[0,0,0],[0,0,0],[0,0,0]];var p=[0,0,0];e.exports=function e(t,r,a,m,x,b){if(!r)r=[0,0,0];if(!a)a=[0,0,0];if(!m)m=[0,0,0];if(!x)x=[0,0,0,1];if(!b)b=[0,0,0,1];if(!n(f,t))return false;i(c,f);c[3]=0;c[7]=0;c[11]=0;c[15]=1;if(Math.abs(o(c)<1e-8))return false;var _=f[3],w=f[7],T=f[11],k=f[12],A=f[13],M=f[14],S=f[15];if(_!==0||w!==0||T!==0){v[0]=_;v[1]=w;v[2]=T;v[3]=S;var E=s(c,c);if(!E)return false;l(c,c);d(x,v,c)}else{x[0]=x[1]=x[2]=0;x[3]=1}r[0]=k;r[1]=A;r[2]=M;g(h,f);a[0]=u.length(h[0]);u.normalize(h[0],h[0]);m[0]=u.dot(h[0],h[1]);y(h[1],h[1],h[0],1,-m[0]);a[1]=u.length(h[1]);u.normalize(h[1],h[1]);m[0]/=a[1];m[1]=u.dot(h[0],h[2]);y(h[2],h[2],h[0],1,-m[1]);m[2]=u.dot(h[1],h[2]);y(h[2],h[2],h[1],1,-m[2]);a[2]=u.length(h[2]);u.normalize(h[2],h[2]);m[1]/=a[2];m[2]/=a[2];u.cross(p,h[1],h[2]);if(u.dot(h[0],p)<0){for(var L=0;L<3;L++){a[L]*=-1;h[L][0]*=-1;h[L][1]*=-1;h[L][2]*=-1}}b[0]=.5*Math.sqrt(Math.max(1+h[0][0]-h[1][1]-h[2][2],0));b[1]=.5*Math.sqrt(Math.max(1-h[0][0]+h[1][1]-h[2][2],0));b[2]=.5*Math.sqrt(Math.max(1-h[0][0]-h[1][1]+h[2][2],0));b[3]=.5*Math.sqrt(Math.max(1+h[0][0]+h[1][1]+h[2][2],0));if(h[2][1]>h[1][2])b[0]=-b[0];if(h[0][2]>h[2][0])b[1]=-b[1];if(h[1][0]>h[0][1])b[2]=-b[2];return true};function d(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3];e[0]=r[0]*n+r[4]*a+r[8]*i+r[12]*o;e[1]=r[1]*n+r[5]*a+r[9]*i+r[13]*o;e[2]=r[2]*n+r[6]*a+r[10]*i+r[14]*o;e[3]=r[3]*n+r[7]*a+r[11]*i+r[15]*o;return e}function g(e,t){e[0][0]=t[0];e[0][1]=t[1];e[0][2]=t[2];e[1][0]=t[4];e[1][1]=t[5];e[1][2]=t[6];e[2][0]=t[8];e[2][1]=t[9];e[2][2]=t[10]}function y(e,t,r,n,a){e[0]=t[0]*n+r[0]*a;e[1]=t[1]*n+r[1]*a;e[2]=t[2]*n+r[2]*a}},4690:function(e){e.exports=function e(t,r){var n=r[15];if(n===0)return false;var a=1/n;for(var i=0;i<16;i++)t[i]=r[i]*a;return true}},7649:function(e,t,r){var n=r(1868);var a=r(1102);var i=r(7191);var o=r(7787);var s=r(1116);var l=v();var u=v();var f=v();e.exports=c;function c(e,t,r,c){if(o(t)===0||o(r)===0)return false;var v=i(t,l.translate,l.scale,l.skew,l.perspective,l.quaternion);var h=i(r,u.translate,u.scale,u.skew,u.perspective,u.quaternion);if(!v||!h)return false;n(f.translate,l.translate,u.translate,c);n(f.skew,l.skew,u.skew,c);n(f.scale,l.scale,u.scale,c);n(f.perspective,l.perspective,u.perspective,c);s(f.quaternion,l.quaternion,u.quaternion,c);a(e,f.translate,f.scale,f.skew,f.perspective,f.quaternion);return true}function v(){return{translate:h(),scale:h(1),skew:h(),perspective:p(),quaternion:p()}}function h(e){return[e||0,e||0,e||0]}function p(){return[0,0,0,1]}},1102:function(e,t,r){var n={identity:r(9947),translate:r(998),multiply:r(104),create:r(9823),scale:r(3668),fromRotationTranslation:r(7280)};var a=n.create();var i=n.create();e.exports=function e(t,r,a,o,s,l){n.identity(t);n.fromRotationTranslation(t,l,r);t[3]=s[0];t[7]=s[1];t[11]=s[2];t[15]=s[3];n.identity(i);if(o[2]!==0){i[9]=o[2];n.multiply(t,t,i)}if(o[1]!==0){i[9]=0;i[8]=o[1];n.multiply(t,t,i)}if(o[0]!==0){i[8]=0;i[4]=o[0];n.multiply(t,t,i)}n.scale(t,t,a);return t}},9298:function(e,t,r){"use strict";var n=r(5070);var a=r(7649);var i=r(7437);var o=r(6109);var s=r(7115);var l=r(5240);var u=r(3012);var f=r(998);var c=r(3668);var v=r(899);var h=[0,0,0];e.exports=y;function p(e){this._components=e.slice();this._time=[0];this.prevMatrix=e.slice();this.nextMatrix=e.slice();this.computedMatrix=e.slice();this.computedInverse=e.slice();this.computedEye=[0,0,0];this.computedUp=[0,0,0];this.computedCenter=[0,0,0];this.computedRadius=[0];this._limits=[-Infinity,Infinity]}var d=p.prototype;d.recalcMatrix=function(e){var t=this._time;var r=n.le(t,e);var o=this.computedMatrix;if(r<0){return}var s=this._components;if(r===t.length-1){var l=16*r;for(var u=0;u<16;++u){o[u]=s[l++]}}else{var f=t[r+1]-t[r];var l=16*r;var c=this.prevMatrix;var h=true;for(var u=0;u<16;++u){c[u]=s[l++]}var p=this.nextMatrix;for(var u=0;u<16;++u){p[u]=s[l++];h=h&&c[u]===p[u]}if(f<1e-6||h){for(var u=0;u<16;++u){o[u]=c[u]}}else{a(o,c,p,(e-t[r])/f)}}var d=this.computedUp;d[0]=o[1];d[1]=o[5];d[2]=o[9];v(d,d);var g=this.computedInverse;i(g,o);var y=this.computedEye;var m=g[15];y[0]=g[12]/m;y[1]=g[13]/m;y[2]=g[14]/m;var x=this.computedCenter;var b=Math.exp(this.computedRadius[0]);for(var u=0;u<3;++u){x[u]=y[u]-o[2+4*u]*b}};d.idle=function(e){if(e<this.lastT()){return}var t=this._components;var r=t.length-16;for(var n=0;n<16;++n){t.push(t[r++])}this._time.push(e)};d.flush=function(e){var t=n.gt(this._time,e)-2;if(t<0){return}this._time.splice(0,t);this._components.splice(0,16*t)};d.lastT=function(){return this._time[this._time.length-1]};d.lookAt=function(e,t,r,n){this.recalcMatrix(e);t=t||this.computedEye;r=r||h;n=n||this.computedUp;this.setMatrix(e,u(this.computedMatrix,t,r,n));var a=0;for(var i=0;i<3;++i){a+=Math.pow(r[i]-t[i],2)}a=Math.log(Math.sqrt(a));this.computedRadius[0]=a};d.rotate=function(e,t,r,n){this.recalcMatrix(e);var a=this.computedInverse;if(t)s(a,a,t);if(r)o(a,a,r);if(n)l(a,a,n);this.setMatrix(e,i(this.computedMatrix,a))};var g=[0,0,0];d.pan=function(e,t,r,n){g[0]=-(t||0);g[1]=-(r||0);g[2]=-(n||0);this.recalcMatrix(e);var a=this.computedInverse;f(a,a,g);this.setMatrix(e,i(a,a))};d.translate=function(e,t,r,n){g[0]=t||0;g[1]=r||0;g[2]=n||0;this.recalcMatrix(e);var a=this.computedMatrix;f(a,a,g);this.setMatrix(e,a)};d.setMatrix=function(e,t){if(e<this.lastT()){return}this._time.push(e);for(var r=0;r<16;++r){this._components.push(t[r])}};d.setDistance=function(e,t){this.computedRadius[0]=t};d.setDistanceLimits=function(e,t){var r=this._limits;r[0]=e;r[1]=t};d.getDistanceLimits=function(e){var t=this._limits;if(e){e[0]=t[0];e[1]=t[1];return e}return t};function y(e){e=e||{};var t=e.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new p(t)}},3266:function(e,t,r){"use strict";e.exports=a;var n=r(417)[3];function a(e){var t=e.length;if(t<3){var r=new Array(t);for(var a=0;a<t;++a){r[a]=a}if(t===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]){return[0]}return r}var i=new Array(t);for(var a=0;a<t;++a){i[a]=a}i.sort((function(t,r){var n=e[t][0]-e[r][0];if(n){return n}return e[t][1]-e[r][1]}));var o=[i[0],i[1]];var s=[i[0],i[1]];for(var a=2;a<t;++a){var l=i[a];var u=e[l];var f=o.length;while(f>1&&n(e[o[f-2]],e[o[f-1]],u)<=0){f-=1;o.pop()}o.push(l);f=s.length;while(f>1&&n(e[s[f-2]],e[s[f-1]],u)>=0){f-=1;s.pop()}s.push(l)}var r=new Array(s.length+o.length-2);var c=0;for(var a=0,v=o.length;a<v;++a){r[c++]=o[a]}for(var h=s.length-2;h>0;--h){r[c++]=s[h]}return r}},6145:function(e,t,r){"use strict";e.exports=a;var n=r(4110);function a(e,t){if(!t){t=e;e=window}var r=0;var a=0;var i=0;var o={shift:false,alt:false,control:false,meta:false};var s=false;function l(e){var t=false;if("altKey"in e){t=t||e.altKey!==o.alt;o.alt=!!e.altKey}if("shiftKey"in e){t=t||e.shiftKey!==o.shift;o.shift=!!e.shiftKey}if("ctrlKey"in e){t=t||e.ctrlKey!==o.control;o.control=!!e.ctrlKey}if("metaKey"in e){t=t||e.metaKey!==o.meta;o.meta=!!e.metaKey}return t}function u(e,s){var u=n.x(s);var f=n.y(s);if("buttons"in s){e=s.buttons|0}if(e!==r||u!==a||f!==i||l(s)){r=e|0;a=u||0;i=f||0;t&&t(r,a,i,o)}}function f(e){u(0,e)}function c(){if(r||a||i||o.shift||o.alt||o.meta||o.control){a=i=0;r=0;o.shift=o.alt=o.control=o.meta=false;t&&t(0,0,0,o)}}function v(e){if(l(e)){t&&t(r,a,i,o)}}function h(e){if(n.buttons(e)===0){u(0,e)}else{u(r,e)}}function p(e){u(r|n.buttons(e),e)}function d(e){u(r&~n.buttons(e),e)}function g(){if(s){return}s=true;e.addEventListener("mousemove",h);e.addEventListener("mousedown",p);e.addEventListener("mouseup",d);e.addEventListener("mouseleave",f);e.addEventListener("mouseenter",f);e.addEventListener("mouseout",f);e.addEventListener("mouseover",f);e.addEventListener("blur",c);e.addEventListener("keyup",v);e.addEventListener("keydown",v);e.addEventListener("keypress",v);if(e!==window){window.addEventListener("blur",c);window.addEventListener("keyup",v);window.addEventListener("keydown",v);window.addEventListener("keypress",v)}}function y(){if(!s){return}s=false;e.removeEventListener("mousemove",h);e.removeEventListener("mousedown",p);e.removeEventListener("mouseup",d);e.removeEventListener("mouseleave",f);e.removeEventListener("mouseenter",f);e.removeEventListener("mouseout",f);e.removeEventListener("mouseover",f);e.removeEventListener("blur",c);e.removeEventListener("keyup",v);e.removeEventListener("keydown",v);e.removeEventListener("keypress",v);if(e!==window){window.removeEventListener("blur",c);window.removeEventListener("keyup",v);window.removeEventListener("keydown",v);window.removeEventListener("keypress",v)}}g();var m={element:e};Object.defineProperties(m,{enabled:{get:function(){return s},set:function(e){if(e){g()}else{y()}},enumerable:true},buttons:{get:function(){return r},enumerable:true},x:{get:function(){return a},enumerable:true},y:{get:function(){return i},enumerable:true},mods:{get:function(){return o},enumerable:true}});return m}},2565:function(e){var t={left:0,top:0};e.exports=r;function r(e,t,r){t=t||e.currentTarget||e.srcElement;if(!Array.isArray(r)){r=[0,0]}var a=e.clientX||0;var i=e.clientY||0;var o=n(t);r[0]=a-o.left;r[1]=i-o.top;return r}function n(e){if(e===window||e===document||e===document.body){return t}else{return e.getBoundingClientRect()}}},4110:function(e,t){"use strict";function r(e){if(typeof e==="object"){if("buttons"in e){return e.buttons}else if("which"in e){var t=e.which;if(t===2){return 4}else if(t===3){return 2}else if(t>0){return 1<<t-1}}else if("button"in e){var t=e.button;if(t===1){return 4}else if(t===2){return 2}else if(t>=0){return 1<<t}}}return 0}t.buttons=r;function n(e){return e.target||e.srcElement||window}t.element=n;function a(e){if(typeof e==="object"){if("offsetX"in e){return e.offsetX}var t=n(e);var r=t.getBoundingClientRect();return e.clientX-r.left}return 0}t.x=a;function i(e){if(typeof e==="object"){if("offsetY"in e){return e.offsetY}var t=n(e);var r=t.getBoundingClientRect();return e.clientY-r.top}return 0}t.y=i},6475:function(e,t,r){"use strict";var n=r(14);e.exports=a;function a(e,t,r){if(typeof e==="function"){r=!!t;t=e;e=window}var a=n("ex",e);var i=function(e){if(r){e.preventDefault()}var n=e.deltaX||0;var i=e.deltaY||0;var o=e.deltaZ||0;var s=e.deltaMode;var l=1;switch(s){case 1:l=a;break;case 2:l=window.innerHeight;break}n*=l;i*=l;o*=l;if(n||i||o){return t(n,i,o,e)}};e.addEventListener("wheel",i);return i}},9284:function(e,t,r){"use strict";var n=r(5306);e.exports=o;var a={"false,0,1":function e(t,r,n,a,i){return function e(o,s,l,u){var f=o.shape[0]|0,c=o.shape[1]|0,v=o.data,h=o.offset|0,p=o.stride[0]|0,d=o.stride[1]|0,g=h,y,m=-p|0,x=0,b=-d|0,_=0,w=-p-d|0,T=0,k=p|0,A=d-p*f|0,M=0,S=0,E=0,L=2*f|0,C=a(L),I=a(L),P=0,O=0,D=-1|0,z=-1|0,R=0,F=-f|0,B=f|0,N=0,j=-f-1|0,U=f-1|0,V=0,H=0,q=0;for(M=0;M<f;++M){C[P++]=n(v[g],s,l,u);g+=k}g+=A;if(c>0){S=1;C[P++]=n(v[g],s,l,u);g+=k;if(f>0){M=1;y=v[g];O=C[P]=n(y,s,l,u);R=C[P+D];N=C[P+F];V=C[P+j];if(O!==R||O!==N||O!==V){x=v[g+m];_=v[g+b];T=v[g+w];t(M,S,y,x,_,T,O,R,N,V,s,l,u);H=I[P]=E++}P+=1;g+=k;for(M=2;M<f;++M){y=v[g];O=C[P]=n(y,s,l,u);R=C[P+D];N=C[P+F];V=C[P+j];if(O!==R||O!==N||O!==V){x=v[g+m];_=v[g+b];T=v[g+w];t(M,S,y,x,_,T,O,R,N,V,s,l,u);H=I[P]=E++;if(V!==R){r(I[P+D],H,T,x,V,R,s,l,u)}}P+=1;g+=k}}g+=A;P=0;q=D;D=z;z=q;q=F;F=B;B=q;q=j;j=U;U=q;for(S=2;S<c;++S){C[P++]=n(v[g],s,l,u);g+=k;if(f>0){M=1;y=v[g];O=C[P]=n(y,s,l,u);R=C[P+D];N=C[P+F];V=C[P+j];if(O!==R||O!==N||O!==V){x=v[g+m];_=v[g+b];T=v[g+w];t(M,S,y,x,_,T,O,R,N,V,s,l,u);H=I[P]=E++;if(V!==N){r(I[P+F],H,_,T,N,V,s,l,u)}}P+=1;g+=k;for(M=2;M<f;++M){y=v[g];O=C[P]=n(y,s,l,u);R=C[P+D];N=C[P+F];V=C[P+j];if(O!==R||O!==N||O!==V){x=v[g+m];_=v[g+b];T=v[g+w];t(M,S,y,x,_,T,O,R,N,V,s,l,u);H=I[P]=E++;if(V!==N){r(I[P+F],H,_,T,N,V,s,l,u)}if(V!==R){r(I[P+D],H,T,x,V,R,s,l,u)}}P+=1;g+=k}}if(S&1){P=0}q=D;D=z;z=q;q=F;F=B;B=q;q=j;j=U;U=q;g+=A}}i(I);i(C)}},"false,1,0":function e(t,r,n,a,i){return function e(o,s,l,u){var f=o.shape[0]|0,c=o.shape[1]|0,v=o.data,h=o.offset|0,p=o.stride[0]|0,d=o.stride[1]|0,g=h,y,m=-p|0,x=0,b=-d|0,_=0,w=-p-d|0,T=0,k=d|0,A=p-d*c|0,M=0,S=0,E=0,L=2*c|0,C=a(L),I=a(L),P=0,O=0,D=-1|0,z=-1|0,R=0,F=-c|0,B=c|0,N=0,j=-c-1|0,U=c-1|0,V=0,H=0,q=0;for(S=0;S<c;++S){C[P++]=n(v[g],s,l,u);g+=k}g+=A;if(f>0){M=1;C[P++]=n(v[g],s,l,u);g+=k;if(c>0){S=1;y=v[g];O=C[P]=n(y,s,l,u);N=C[P+F];R=C[P+D];V=C[P+j];if(O!==N||O!==R||O!==V){x=v[g+m];_=v[g+b];T=v[g+w];t(M,S,y,x,_,T,O,N,R,V,s,l,u);H=I[P]=E++}P+=1;g+=k;for(S=2;S<c;++S){y=v[g];O=C[P]=n(y,s,l,u);N=C[P+F];R=C[P+D];V=C[P+j];if(O!==N||O!==R||O!==V){x=v[g+m];_=v[g+b];T=v[g+w];t(M,S,y,x,_,T,O,N,R,V,s,l,u);H=I[P]=E++;if(V!==R){r(I[P+D],H,_,T,R,V,s,l,u)}}P+=1;g+=k}}g+=A;P=0;q=F;F=B;B=q;q=D;D=z;z=q;q=j;j=U;U=q;for(M=2;M<f;++M){C[P++]=n(v[g],s,l,u);g+=k;if(c>0){S=1;y=v[g];O=C[P]=n(y,s,l,u);N=C[P+F];R=C[P+D];V=C[P+j];if(O!==N||O!==R||O!==V){x=v[g+m];_=v[g+b];T=v[g+w];t(M,S,y,x,_,T,O,N,R,V,s,l,u);H=I[P]=E++;if(V!==N){r(I[P+F],H,T,x,V,N,s,l,u)}}P+=1;g+=k;for(S=2;S<c;++S){y=v[g];O=C[P]=n(y,s,l,u);N=C[P+F];R=C[P+D];V=C[P+j];if(O!==N||O!==R||O!==V){x=v[g+m];_=v[g+b];T=v[g+w];t(M,S,y,x,_,T,O,N,R,V,s,l,u);H=I[P]=E++;if(V!==R){r(I[P+D],H,_,T,R,V,s,l,u)}if(V!==N){r(I[P+F],H,T,x,V,N,s,l,u)}}P+=1;g+=k}}if(M&1){P=0}q=F;F=B;B=q;q=D;D=z;z=q;q=j;j=U;U=q;g+=A}}i(I);i(C)}}};function i(e,t,r,i,o,s){var l=[s,o].join(",");var u=a[l];return u(e,t,r,n.mallocUint32,n.freeUint32)}function o(e){function t(e){throw new Error("ndarray-extract-contour: "+e)}if(typeof e!=="object"){t("Must specify arguments")}var r=e.order;if(!Array.isArray(r)){t("Must specify order")}var n=e.arrayArguments||1;if(n<1){t("Must have at least one array argument")}var a=e.scalarArguments||0;if(a<0){t("Scalar arg count must be > 0")}if(typeof e.vertex!=="function"){t("Must specify vertex creation function")}if(typeof e.cell!=="function"){t("Must specify cell creation function")}if(typeof e.phase!=="function"){t("Must specify phase function")}var o=e.getters||[];var s=new Array(n);for(var l=0;l<n;++l){if(o.indexOf(l)>=0){s[l]=true}else{s[l]=false}}return i(e.vertex,e.cell,e.phase,a,r,s)}},9144:function(e,t,r){"use strict";var n=r(3094);var a={zero:function(e,t,r,n){var a=e[0],i=r[0];n|=0;var o=0,s=i;for(o=0;o<a;++o){t[n]=0;n+=s}},fdTemplate1:function(e,t,r,n,a,i,o){var s=e[0],l=r[0],u=i[0],f=-1*l,c=l;n|=0;o|=0;var v=0,h=l,p=u;for(v=0;v<s;++v){a[o]=.5*(t[n+f]-t[n+c]);n+=h;o+=p}},fdTemplate2:function(e,t,r,n,a,i,o,s,l,u){var f=e[0],c=e[1],v=r[0],h=r[1],p=i[0],d=i[1],g=l[0],y=l[1],m=-1*v,x=v,b=-1*h,_=h;n|=0;o|=0;u|=0;var w=0,T=0,k=h,A=v-c*h,M=d,S=p-c*d,E=y,L=g-c*y;for(T=0;T<f;++T){for(w=0;w<c;++w){a[o]=.5*(t[n+m]-t[n+x]);s[u]=.5*(t[n+b]-t[n+_]);n+=k;o+=M;u+=E}n+=A;o+=S;u+=L}}};var i={cdiff:function(e){var t={};return function r(n,a,i){var o=n.dtype,s=n.order,l=a.dtype,u=a.order,f=i.dtype,c=i.order,v=[o,s.join(),l,u.join(),f,c.join()].join(),h=t[v];if(!h){t[v]=h=e([o,s,l,u,f,c])}return h(n.shape.slice(0),n.data,n.stride,n.offset|0,a.data,a.stride,a.offset|0,i.data,i.stride,i.offset|0)}},zero:function(e){var t={};return function r(n){var a=n.dtype,i=n.order,o=[a,i.join()].join(),s=t[o];if(!s){t[o]=s=e([a,i])}return s(n.shape.slice(0),n.data,n.stride,n.offset|0)}},fdTemplate1:function(e){var t={};return function r(n,a){var i=n.dtype,o=n.order,s=a.dtype,l=a.order,u=[i,o.join(),s,l.join()].join(),f=t[u];if(!f){t[u]=f=e([i,o,s,l])}return f(n.shape.slice(0),n.data,n.stride,n.offset|0,a.data,a.stride,a.offset|0)}},fdTemplate2:function(e){var t={};return function r(n,a,i){var o=n.dtype,s=n.order,l=a.dtype,u=a.order,f=i.dtype,c=i.order,v=[o,s.join(),l,u.join(),f,c.join()].join(),h=t[v];if(!h){t[v]=h=e([o,s,l,u,f,c])}return h(n.shape.slice(0),n.data,n.stride,n.offset|0,a.data,a.stride,a.offset|0,i.data,i.stride,i.offset|0)}}};function o(e){var t=i[e.funcName];return t(s.bind(undefined,e))}function s(e){return a[e.funcName]}function l(e){return o({funcName:e.funcName})}var u={};var f={};var c={body:"",args:[],thisVars:[],localVars:[]};var v=l({funcName:"cdiff"});var h=l({funcName:"zero"});function p(e){if(e in u){return u[e]}return u[e]=l({funcName:"fdTemplate"+e})}function d(e,t,r,n){return function(e,a){var i=a.shape.slice();if(true&&i[0]>2&&i[1]>2){n(a.pick(-1,-1).lo(1,1).hi(i[0]-2,i[1]-2),e.pick(-1,-1,0).lo(1,1).hi(i[0]-2,i[1]-2),e.pick(-1,-1,1).lo(1,1).hi(i[0]-2,i[1]-2))}if(true&&i[1]>2){r(a.pick(0,-1).lo(1).hi(i[1]-2),e.pick(0,-1,1).lo(1).hi(i[1]-2));t(e.pick(0,-1,0).lo(1).hi(i[1]-2))}if(true&&i[1]>2){r(a.pick(i[0]-1,-1).lo(1).hi(i[1]-2),e.pick(i[0]-1,-1,1).lo(1).hi(i[1]-2));t(e.pick(i[0]-1,-1,0).lo(1).hi(i[1]-2))}if(true&&i[0]>2){r(a.pick(-1,0).lo(1).hi(i[0]-2),e.pick(-1,0,0).lo(1).hi(i[0]-2));t(e.pick(-1,0,1).lo(1).hi(i[0]-2))}if(true&&i[0]>2){r(a.pick(-1,i[1]-1).lo(1).hi(i[0]-2),e.pick(-1,i[1]-1,0).lo(1).hi(i[0]-2));t(e.pick(-1,i[1]-1,1).lo(1).hi(i[0]-2))}e.set(0,0,0,0);e.set(0,0,1,0);e.set(i[0]-1,0,0,0);e.set(i[0]-1,0,1,0);e.set(0,i[1]-1,0,0);e.set(0,i[1]-1,1,0);e.set(i[0]-1,i[1]-1,0,0);e.set(i[0]-1,i[1]-1,1,0);return e}}function g(e){var t=e.join();var r=f[t];if(r){return r}var n=e.length;var a=[v,h];for(var i=1;i<=n;++i){a.push(p(i))}var o=d;var r=o.apply(void 0,a);f[t]=r;return r}e.exports=function e(t,r,a){if(!Array.isArray(a)){if(typeof a==="string"){a=n(r.dimension,a)}else{a=n(r.dimension,"clamp")}}if(r.size===0){return t}if(r.dimension===0){t.set(0);return t}var i=g(a);return i(t,r)}},3581:function(e){"use strict";function t(e,t){var r=Math.floor(t),n=t-r,a=0<=r&&r<e.shape[0],i=0<=r+1&&r+1<e.shape[0],o=a?+e.get(r):0,s=i?+e.get(r+1):0;return(1-n)*o+n*s}function r(e,t,r){var n=Math.floor(t),a=t-n,i=0<=n&&n<e.shape[0],o=0<=n+1&&n+1<e.shape[0],s=Math.floor(r),l=r-s,u=0<=s&&s<e.shape[1],f=0<=s+1&&s+1<e.shape[1],c=i&&u?e.get(n,s):0,v=i&&f?e.get(n,s+1):0,h=o&&u?e.get(n+1,s):0,p=o&&f?e.get(n+1,s+1):0;return(1-l)*((1-a)*c+a*h)+l*((1-a)*v+a*p)}function n(e,t,r,n){var a=Math.floor(t),i=t-a,o=0<=a&&a<e.shape[0],s=0<=a+1&&a+1<e.shape[0],l=Math.floor(r),u=r-l,f=0<=l&&l<e.shape[1],c=0<=l+1&&l+1<e.shape[1],v=Math.floor(n),h=n-v,p=0<=v&&v<e.shape[2],d=0<=v+1&&v+1<e.shape[2],g=o&&f&&p?e.get(a,l,v):0,y=o&&c&&p?e.get(a,l+1,v):0,m=s&&f&&p?e.get(a+1,l,v):0,x=s&&c&&p?e.get(a+1,l+1,v):0,b=o&&f&&d?e.get(a,l,v+1):0,_=o&&c&&d?e.get(a,l+1,v+1):0,w=s&&f&&d?e.get(a+1,l,v+1):0,T=s&&c&&d?e.get(a+1,l+1,v+1):0;return(1-h)*((1-u)*((1-i)*g+i*m)+u*((1-i)*y+i*x))+h*((1-u)*((1-i)*b+i*w)+u*((1-i)*_+i*T))}function a(e){var t=e.shape.length|0,r=new Array(t),n=new Array(t),a=new Array(t),i=new Array(t),o,s;for(o=0;o<t;++o){s=+arguments[o+1];r[o]=Math.floor(s);n[o]=s-r[o];a[o]=0<=r[o]&&r[o]<e.shape[o];i[o]=0<=r[o]+1&&r[o]+1<e.shape[o]}var l=0,u,f,c;e:for(o=0;o<1<<t;++o){f=1;c=e.offset;for(u=0;u<t;++u){if(o&1<<u){if(!i[u]){continue e}f*=n[u];c+=e.stride[u]*(r[u]+1)}else{if(!a[u]){continue e}f*=1-n[u];c+=e.stride[u]*r[u]}}l+=f*e.data[c]}return l}function i(e,i,o,s){switch(e.shape.length){case 0:return 0;case 1:return t(e,i);case 2:return r(e,i,o);case 3:return n(e,i,o,s);default:return a.apply(undefined,arguments)}}e.exports=i;e.exports.d1=t;e.exports.d2=r;e.exports.d3=n},7498:function(e,t){"use strict";var r={"float64,2,1,0":function(){return function e(t,r,n,a,i){var o=t[0],s=t[1],l=t[2],u=n[0],f=n[1],c=n[2];a|=0;var v=0,h=0,p=0,d=c,g=f-l*c,y=u-s*f;for(p=0;p<o;++p){for(h=0;h<s;++h){for(v=0;v<l;++v){r[a]/=i;a+=d}a+=g}a+=y}}},"uint8,2,0,1,float64,2,1,0":function(){return function e(t,r,n,a,i,o,s,l){var u=t[0],f=t[1],c=t[2],v=n[0],h=n[1],p=n[2],d=o[0],g=o[1],y=o[2];a|=0;s|=0;var m=a;var x=s;for(var b=t[0]|0;b>0;){if(b<64){u=b;b=0}else{u=64;b-=64}for(var _=t[1]|0;_>0;){if(_<64){f=_;_=0}else{f=64;_-=64}a=m+b*v+_*h;s=x+b*d+_*g;var w=0,T=0,k=0,A=p,M=v-c*p,S=h-u*v,E=y,L=d-c*y,C=g-u*d;for(k=0;k<f;++k){for(T=0;T<u;++T){for(w=0;w<c;++w){r[a]=i[s]*l;a+=A;s+=E}a+=M;s+=L}a+=S;s+=C}}}}},"float32,1,0,float32,1,0":function(){return function e(t,r,n,a,i,o,s){var l=t[0],u=t[1],f=n[0],c=n[1],v=o[0],h=o[1];a|=0;s|=0;var p=0,d=0,g=c,y=f-u*c,m=h,x=v-u*h;for(d=0;d<l;++d){for(p=0;p<u;++p){r[a]=i[s];a+=g;s+=m}a+=y;s+=x}}},"float32,1,0,float32,0,1":function(){return function e(t,r,n,a,i,o,s){var l=t[0],u=t[1],f=n[0],c=n[1],v=o[0],h=o[1];a|=0;s|=0;var p=a;var d=s;for(var g=t[1]|0;g>0;){if(g<64){u=g;g=0}else{u=64;g-=64}for(var y=t[0]|0;y>0;){if(y<64){l=y;y=0}else{l=64;y-=64}a=p+g*c+y*f;s=d+g*h+y*v;var m=0,x=0,b=c,_=f-u*c,w=h,T=v-u*h;for(x=0;x<l;++x){for(m=0;m<u;++m){r[a]=i[s];a+=b;s+=w}a+=_;s+=T}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function e(t,r,n,a,i,o,s){var l=t[0],u=t[1],f=t[2],c=n[0],v=n[1],h=n[2],p=o[0],d=o[1],g=o[2];a|=0;s|=0;var y=a;var m=s;for(var x=t[2]|0;x>0;){if(x<64){f=x;x=0}else{f=64;x-=64}for(var b=t[0]|0;b>0;){if(b<64){l=b;b=0}else{l=64;b-=64}for(var _=t[1]|0;_>0;){if(_<64){u=_;_=0}else{u=64;_-=64}a=y+x*h+b*c+_*v;s=m+x*g+b*p+_*d;var w=0,T=0,k=0,A=h,M=c-f*h,S=v-l*c,E=g,L=p-f*g,C=d-l*p;for(k=0;k<u;++k){for(T=0;T<l;++T){for(w=0;w<f;++w){r[a]=i[s];a+=A;s+=E}a+=M;s+=L}a+=S;s+=C}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function e(t,r,n,a,i,o,s){var l=t[0],u=t[1],f=t[2],c=n[0],v=n[1],h=n[2],p=o[0],d=o[1],g=o[2];a|=0;s|=0;var y=0,m=0,x=0,b=h,_=c-f*h,w=v-l*c,T=g,k=p-f*g,A=d-l*p;for(x=0;x<u;++x){for(m=0;m<l;++m){for(y=0;y<f;++y){r[a]=i[s];a+=b;s+=T}a+=_;s+=k}a+=w;s+=A}}}};function n(e,t){var n=t.join(",");var a=r[n];return a()}var a=n;var i={mul:function(e){var t={};return function r(n,a,i){var o=n.dtype,s=n.order,l=a.dtype,u=a.order,f=i.dtype,c=i.order,v=[o,s.join(),l,u.join(),f,c.join()].join(),h=t[v];if(!h){t[v]=h=e([o,s,l,u,f,c])}return h(n.shape.slice(0),n.data,n.stride,n.offset|0,a.data,a.stride,a.offset|0,i.data,i.stride,i.offset|0)}},muls:function(e){var t={};return function r(n,a,i){var o=n.dtype,s=n.order,l=a.dtype,u=a.order,f=[o,s.join(),l,u.join()].join(),c=t[f];if(!c){t[f]=c=e([o,s,l,u])}return c(n.shape.slice(0),n.data,n.stride,n.offset|0,a.data,a.stride,a.offset|0,i)}},mulseq:function(e){var t={};return function r(n,a){var i=n.dtype,o=n.order,s=[i,o.join()].join(),l=t[s];if(!l){t[s]=l=e([i,o])}return l(n.shape.slice(0),n.data,n.stride,n.offset|0,a)}},div:function(e){var t={};return function r(n,a,i){var o=n.dtype,s=n.order,l=a.dtype,u=a.order,f=i.dtype,c=i.order,v=[o,s.join(),l,u.join(),f,c.join()].join(),h=t[v];if(!h){t[v]=h=e([o,s,l,u,f,c])}return h(n.shape.slice(0),n.data,n.stride,n.offset|0,a.data,a.stride,a.offset|0,i.data,i.stride,i.offset|0)}},divs:function(e){var t={};return function r(n,a,i){var o=n.dtype,s=n.order,l=a.dtype,u=a.order,f=[o,s.join(),l,u.join()].join(),c=t[f];if(!c){t[f]=c=e([o,s,l,u])}return c(n.shape.slice(0),n.data,n.stride,n.offset|0,a.data,a.stride,a.offset|0,i)}},divseq:function(e){var t={};return function r(n,a){var i=n.dtype,o=n.order,s=[i,o.join()].join(),l=t[s];if(!l){t[s]=l=e([i,o])}return l(n.shape.slice(0),n.data,n.stride,n.offset|0,a)}},assign:function(e){var t={};return function r(n,a){var i=n.dtype,o=n.order,s=a.dtype,l=a.order,u=[i,o.join(),s,l.join()].join(),f=t[u];if(!f){t[u]=f=e([i,o,s,l])}return f(n.shape.slice(0),n.data,n.stride,n.offset|0,a.data,a.stride,a.offset|0)}}};function o(e){var t=i[e.funcName];return t(a.bind(undefined,e))}function s(e){return o({funcName:e.funcName})}var l={mul:"*",div:"/"};(function(){for(var e in l){t[e]=s({funcName:e});t[e+"s"]=s({funcName:e+"s"});t[e+"seq"]=s({funcName:e+"seq"})}})();t.assign=s({funcName:"assign"})},7382:function(e,t,r){"use strict";var n=r(5050);var a=r(9262);e.exports=function e(t,r){var i=[],o=t,s=1;while(Array.isArray(o)){i.push(o.length);s*=o.length;o=o[0]}if(i.length===0){return n()}if(!r){r=n(new Float64Array(s),i)}a(r,t);return r}},9262:function(e){"use strict";function t(){return function(e,t,r,n,a){var i=e[0],o=e[1],s=e[2],l=r[0],u=r[1],f=r[2],c=[0,0,0];n|=0;var v=0,h=0,p=0,d=f,g=u-s*f,y=l-o*u;for(p=0;p<i;++p){for(h=0;h<o;++h){for(v=0;v<s;++v){{var m=a,x;for(x=0;x<c.length-1;++x){m=m[c[x]]}t[n]=m[c[c.length-1]]}n+=d;++c[2]}n+=g;c[2]-=s;++c[1]}n+=y;c[1]-=o;++c[0]}}}function r(){return t()}var n=r;function a(e){var t={};return function r(n,a){var i=n.dtype,o=n.order,s=[i,o.join()].join(),l=t[s];if(!l){t[s]=l=e([i,o])}return l(n.shape.slice(0),n.data,n.stride,n.offset|0,a)}}function i(e){return a(n.bind(undefined,e))}function o(e){return i({funcName:e.funcName})}e.exports=o({funcName:"convert"})},8139:function(e,t,r){"use strict";var n=r(5306);function a(e){switch(e){case"uint32":return[n.mallocUint32,n.freeUint32];default:return null}}var i={"uint32,1,0":function(e,t){return function r(n,a,i,o,s,l,u,f,c,v,h){var p,d,g,y=n*s+o,m,x=e(f),b,_,w,T;for(p=n+1;p<=a;++p){d=p;y+=s;g=y;b=0;_=y;for(m=0;m<f;++m){x[b++]=i[_];_+=c}e:while(d-- >n){b=0;_=g-s;t:for(m=0;m<f;++m){w=i[_];T=x[b];if(w<T){break e}if(w>T){break t}_+=v;b+=h}b=g;_=g-s;for(m=0;m<f;++m){i[b]=i[_];b+=c;_+=c}g-=s}b=g;_=0;for(m=0;m<f;++m){i[b]=x[_++];b+=c}}t(x)}}};function o(e,t){var r=a(t);var n=[t,e].join(",");var o=i[n];if(r){return o(r[0],r[1])}else{return o()}}var s={"uint32,1,0":function(e,t,r){return function n(a,i,o,s,l,u,f,c,v,h,p){var d=(i-a+1)/6|0,g=a+d,y=i-d,m=a+i>>1,x=m-d,b=m+d,_=g,w=x,T=m,k=b,A=y,M=a+1,S=i-1,E=true,L,C,I,P,O,D,z,R,F,B=0,N=0,j=0,U,V,H,q,G,Z,Y,W,X,J,K,$,Q,ee,te,re,ne=c,ae=t(ne),ie=t(ne);V=l*_;H=l*w;re=s;e:for(U=0;U<c;++U){z=V+re;R=H+re;j=o[z]-o[R];if(j>0){C=_;_=w;w=C;break e}if(j<0){break e}re+=h}V=l*k;H=l*A;re=s;e:for(U=0;U<c;++U){z=V+re;R=H+re;j=o[z]-o[R];if(j>0){C=k;k=A;A=C;break e}if(j<0){break e}re+=h}V=l*_;H=l*T;re=s;e:for(U=0;U<c;++U){z=V+re;R=H+re;j=o[z]-o[R];if(j>0){C=_;_=T;T=C;break e}if(j<0){break e}re+=h}V=l*w;H=l*T;re=s;e:for(U=0;U<c;++U){z=V+re;R=H+re;j=o[z]-o[R];if(j>0){C=w;w=T;T=C;break e}if(j<0){break e}re+=h}V=l*_;H=l*k;re=s;e:for(U=0;U<c;++U){z=V+re;R=H+re;j=o[z]-o[R];if(j>0){C=_;_=k;k=C;break e}if(j<0){break e}re+=h}V=l*T;H=l*k;re=s;e:for(U=0;U<c;++U){z=V+re;R=H+re;j=o[z]-o[R];if(j>0){C=T;T=k;k=C;break e}if(j<0){break e}re+=h}V=l*w;H=l*A;re=s;e:for(U=0;U<c;++U){z=V+re;R=H+re;j=o[z]-o[R];if(j>0){C=w;w=A;A=C;break e}if(j<0){break e}re+=h}V=l*w;H=l*T;re=s;e:for(U=0;U<c;++U){z=V+re;R=H+re;j=o[z]-o[R];if(j>0){C=w;w=T;T=C;break e}if(j<0){break e}re+=h}V=l*k;H=l*A;re=s;e:for(U=0;U<c;++U){z=V+re;R=H+re;j=o[z]-o[R];if(j>0){C=k;k=A;A=C;break e}if(j<0){break e}re+=h}V=l*_;H=l*w;q=l*T;G=l*k;Z=l*A;Y=l*g;W=l*m;X=l*y;te=0;re=s;for(U=0;U<c;++U){z=V+re;R=H+re;F=q+re;J=G+re;K=Z+re;$=Y+re;Q=W+re;ee=X+re;ae[te]=o[R];ie[te]=o[J];E=E&&ae[te]===ie[te];I=o[z];P=o[F];O=o[K];o[$]=I;o[Q]=P;o[ee]=O;++te;re+=v}V=l*x;H=l*a;re=s;for(U=0;U<c;++U){z=V+re;R=H+re;o[z]=o[R];re+=v}V=l*b;H=l*i;re=s;for(U=0;U<c;++U){z=V+re;R=H+re;o[z]=o[R];re+=v}if(E){for(D=M;D<=S;++D){z=s+D*l;te=0;e:for(U=0;U<c;++U){j=o[z]-ae[te];if(j!==0){break e}te+=p;z+=h}if(j===0){continue}if(j<0){if(D!==M){V=l*D;H=l*M;re=s;for(U=0;U<c;++U){z=V+re;R=H+re;L=o[z];o[z]=o[R];o[R]=L;re+=v}}++M}else{while(true){z=s+S*l;te=0;e:for(U=0;U<c;++U){j=o[z]-ae[te];if(j!==0){break e}te+=p;z+=h}if(j>0){S--}else if(j<0){V=l*D;H=l*M;q=l*S;re=s;for(U=0;U<c;++U){z=V+re;R=H+re;F=q+re;L=o[z];o[z]=o[R];o[R]=o[F];o[F]=L;re+=v}++M;--S;break}else{V=l*D;H=l*S;re=s;for(U=0;U<c;++U){z=V+re;R=H+re;L=o[z];o[z]=o[R];o[R]=L;re+=v}--S;break}}}}}else{for(D=M;D<=S;++D){z=s+D*l;te=0;e:for(U=0;U<c;++U){B=o[z]-ae[te];if(B!==0){break e}te+=p;z+=h}if(B<0){if(D!==M){V=l*D;H=l*M;re=s;for(U=0;U<c;++U){z=V+re;R=H+re;L=o[z];o[z]=o[R];o[R]=L;re+=v}}++M}else{z=s+D*l;te=0;e:for(U=0;U<c;++U){N=o[z]-ie[te];if(N!==0){break e}te+=p;z+=h}if(N>0){while(true){z=s+S*l;te=0;e:for(U=0;U<c;++U){j=o[z]-ie[te];if(j!==0){break e}te+=p;z+=h}if(j>0){if(--S<D){break}continue}else{z=s+S*l;te=0;e:for(U=0;U<c;++U){j=o[z]-ae[te];if(j!==0){break e}te+=p;z+=h}if(j<0){V=l*D;H=l*M;q=l*S;re=s;for(U=0;U<c;++U){z=V+re;R=H+re;F=q+re;L=o[z];o[z]=o[R];o[R]=o[F];o[F]=L;re+=v}++M;--S}else{V=l*D;H=l*S;re=s;for(U=0;U<c;++U){z=V+re;R=H+re;L=o[z];o[z]=o[R];o[R]=L;re+=v}--S}break}}}}}}V=l*a;H=l*(M-1);te=0;re=s;for(U=0;U<c;++U){z=V+re;R=H+re;o[z]=o[R];o[R]=ae[te];++te;re+=v}V=l*i;H=l*(S+1);te=0;re=s;for(U=0;U<c;++U){z=V+re;R=H+re;o[z]=o[R];o[R]=ie[te];++te;re+=v}if(M-2-a<=32){e(a,M-2,o,s,l,u,f,c,v,h,p)}else{n(a,M-2,o,s,l,u,f,c,v,h,p)}if(i-(S+2)<=32){e(S+2,i,o,s,l,u,f,c,v,h,p)}else{n(S+2,i,o,s,l,u,f,c,v,h,p)}if(E){r(ae);r(ie);return}if(M<g&&S>y){e:while(true){z=s+M*l;te=0;re=s;for(U=0;U<c;++U){if(o[z]!==ae[te]){break e}++te;z+=v}++M}e:while(true){z=s+S*l;te=0;re=s;for(U=0;U<c;++U){if(o[z]!==ie[te]){break e}++te;z+=v}--S}for(D=M;D<=S;++D){z=s+D*l;te=0;e:for(U=0;U<c;++U){B=o[z]-ae[te];if(B!==0){break e}te+=p;z+=h}if(B===0){if(D!==M){V=l*D;H=l*M;re=s;for(U=0;U<c;++U){z=V+re;R=H+re;L=o[z];o[z]=o[R];o[R]=L;re+=v}}++M}else{z=s+D*l;te=0;e:for(U=0;U<c;++U){N=o[z]-ie[te];if(N!==0){break e}te+=p;z+=h}if(N===0){while(true){z=s+S*l;te=0;e:for(U=0;U<c;++U){j=o[z]-ie[te];if(j!==0){break e}te+=p;z+=h}if(j===0){if(--S<D){break}continue}else{z=s+S*l;te=0;e:for(U=0;U<c;++U){j=o[z]-ae[te];if(j!==0){break e}te+=p;z+=h}if(j<0){V=l*D;H=l*M;q=l*S;re=s;for(U=0;U<c;++U){z=V+re;R=H+re;F=q+re;L=o[z];o[z]=o[R];o[R]=o[F];o[F]=L;re+=v}++M;--S}else{V=l*D;H=l*S;re=s;for(U=0;U<c;++U){z=V+re;R=H+re;L=o[z];o[z]=o[R];o[R]=L;re+=v}--S}break}}}}}}r(ae);r(ie);if(S-M<=32){e(M,S,o,s,l,u,f,c,v,h,p)}else{n(M,S,o,s,l,u,f,c,v,h,p)}}}};function l(e,t,r){var n=a(t);var i=[t,e].join(",");var o=s[i];if(e.length>1&&n){return o(r,n[0],n[1])}else{return o(r)}}var u={"uint32,1,0":function(e,t){return function(r){var n=r.data,a=r.offset|0,i=r.shape,o=r.stride,s=o[0]|0,l=i[0]|0,u=o[1]|0,f=i[1]|0,c=u,v=u,h=1;if(l<=32){e(0,l-1,n,a,s,u,l,f,c,v,h)}else{t(0,l-1,n,a,s,u,l,f,c,v,h)}}}};function f(e,t){var r=[t,e].join(",");var n=u[r];var a=o(e,t);var i=l(e,t,a);return n(a,i)}e.exports=f},8729:function(e,t,r){"use strict";var n=r(8139);var a={};function i(e){var t=e.order;var r=e.dtype;var i=[t,r];var o=i.join(":");var s=a[o];if(!s){a[o]=s=n(t,r)}s(e);return e}e.exports=i},5050:function(e,t,r){var n=r(4780);var a=typeof Float64Array!=="undefined";function i(e,t){return e[0]-t[0]}function o(){var e=this.stride;var t=new Array(e.length);var r;for(r=0;r<t.length;++r){t[r]=[Math.abs(e[r]),r]}t.sort(i);var n=new Array(t.length);for(r=0;r<n.length;++r){n[r]=t[r][1]}return n}var s={T:function(e){function t(e){this.data=e}var r=t.prototype;r.dtype=e;r.index=function(){return-1};r.size=0;r.dimension=-1;r.shape=r.stride=r.order=[];r.lo=r.hi=r.transpose=r.step=function(){return new t(this.data)};r.get=r.set=function(){};r.pick=function(){return null};return function e(r){return new t(r)}},0:function(e,t){function r(e,t){this.data=e;this.offset=t}var n=r.prototype;n.dtype=e;n.index=function(){return this.offset};n.dimension=0;n.size=1;n.shape=n.stride=n.order=[];n.lo=n.hi=n.transpose=n.step=function e(){return new r(this.data,this.offset)};n.pick=function e(){return t(this.data)};n.valueOf=n.get=function t(){return e==="generic"?this.data.get(this.offset):this.data[this.offset]};n.set=function t(r){return e==="generic"?this.data.set(this.offset,r):this.data[this.offset]=r};return function e(t,n,a,i){return new r(t,i)}},1:function(e,t,r){function n(e,t,r,n){this.data=e;this.shape=[t];this.stride=[r];this.offset=n|0}var a=n.prototype;a.dtype=e;a.dimension=1;Object.defineProperty(a,"size",{get:function e(){return this.shape[0]}});a.order=[0];a.set=function t(r,n){return e==="generic"?this.data.set(this.offset+this.stride[0]*r,n):this.data[this.offset+this.stride[0]*r]=n};a.get=function t(r){return e==="generic"?this.data.get(this.offset+this.stride[0]*r):this.data[this.offset+this.stride[0]*r]};a.index=function e(t){return this.offset+this.stride[0]*t};a.hi=function e(t){return new n(this.data,typeof t!=="number"||t<0?this.shape[0]:t|0,this.stride[0],this.offset)};a.lo=function e(t){var r=this.offset,a=0,i=this.shape[0],o=this.stride[0];if(typeof t==="number"&&t>=0){a=t|0;r+=o*a;i-=a}return new n(this.data,i,o,r)};a.step=function e(t){var r=this.shape[0],a=this.stride[0],i=this.offset,o=0,s=Math.ceil;if(typeof t==="number"){o=t|0;if(o<0){i+=a*(r-1);r=s(-r/o)}else{r=s(r/o)}a*=o}return new n(this.data,r,a,i)};a.transpose=function e(t){t=t===undefined?0:t|0;var r=this.shape,a=this.stride;return new n(this.data,r[t],a[t],this.offset)};a.pick=function e(r){var n=[],a=[],i=this.offset;if(typeof r==="number"&&r>=0){i=i+this.stride[0]*r|0}else{n.push(this.shape[0]);a.push(this.stride[0])}var o=t[n.length+1];return o(this.data,n,a,i)};return function e(t,r,a,i){return new n(t,r[0],a[0],i)}},2:function(e,t,r){function n(e,t,r,n,a,i){this.data=e;this.shape=[t,r];this.stride=[n,a];this.offset=i|0}var a=n.prototype;a.dtype=e;a.dimension=2;Object.defineProperty(a,"size",{get:function e(){return this.shape[0]*this.shape[1]}});Object.defineProperty(a,"order",{get:function e(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}});a.set=function t(r,n,a){return e==="generic"?this.data.set(this.offset+this.stride[0]*r+this.stride[1]*n,a):this.data[this.offset+this.stride[0]*r+this.stride[1]*n]=a};a.get=function t(r,n){return e==="generic"?this.data.get(this.offset+this.stride[0]*r+this.stride[1]*n):this.data[this.offset+this.stride[0]*r+this.stride[1]*n]};a.index=function e(t,r){return this.offset+this.stride[0]*t+this.stride[1]*r};a.hi=function e(t,r){return new n(this.data,typeof t!=="number"||t<0?this.shape[0]:t|0,typeof r!=="number"||r<0?this.shape[1]:r|0,this.stride[0],this.stride[1],this.offset)};a.lo=function e(t,r){var a=this.offset,i=0,o=this.shape[0],s=this.shape[1],l=this.stride[0],u=this.stride[1];if(typeof t==="number"&&t>=0){i=t|0;a+=l*i;o-=i}if(typeof r==="number"&&r>=0){i=r|0;a+=u*i;s-=i}return new n(this.data,o,s,l,u,a)};a.step=function e(t,r){var a=this.shape[0],i=this.shape[1],o=this.stride[0],s=this.stride[1],l=this.offset,u=0,f=Math.ceil;if(typeof t==="number"){u=t|0;if(u<0){l+=o*(a-1);a=f(-a/u)}else{a=f(a/u)}o*=u}if(typeof r==="number"){u=r|0;if(u<0){l+=s*(i-1);i=f(-i/u)}else{i=f(i/u)}s*=u}return new n(this.data,a,i,o,s,l)};a.transpose=function e(t,r){t=t===undefined?0:t|0;r=r===undefined?1:r|0;var a=this.shape,i=this.stride;return new n(this.data,a[t],a[r],i[t],i[r],this.offset)};a.pick=function e(r,n){var a=[],i=[],o=this.offset;if(typeof r==="number"&&r>=0){o=o+this.stride[0]*r|0}else{a.push(this.shape[0]);i.push(this.stride[0])}if(typeof n==="number"&&n>=0){o=o+this.stride[1]*n|0}else{a.push(this.shape[1]);i.push(this.stride[1])}var s=t[a.length+1];return s(this.data,a,i,o)};return function e(t,r,a,i){return new n(t,r[0],r[1],a[0],a[1],i)}},3:function(e,t,r){function n(e,t,r,n,a,i,o,s){this.data=e;this.shape=[t,r,n];this.stride=[a,i,o];this.offset=s|0}var a=n.prototype;a.dtype=e;a.dimension=3;Object.defineProperty(a,"size",{get:function e(){return this.shape[0]*this.shape[1]*this.shape[2]}});Object.defineProperty(a,"order",{get:function e(){var t=Math.abs(this.stride[0]),r=Math.abs(this.stride[1]),n=Math.abs(this.stride[2]);if(t>r){if(r>n){return[2,1,0]}else if(t>n){return[1,2,0]}else{return[1,0,2]}}else if(t>n){return[2,0,1]}else if(n>r){return[0,1,2]}else{return[0,2,1]}}});a.set=function t(r,n,a,i){return e==="generic"?this.data.set(this.offset+this.stride[0]*r+this.stride[1]*n+this.stride[2]*a,i):this.data[this.offset+this.stride[0]*r+this.stride[1]*n+this.stride[2]*a]=i};a.get=function t(r,n,a){return e==="generic"?this.data.get(this.offset+this.stride[0]*r+this.stride[1]*n+this.stride[2]*a):this.data[this.offset+this.stride[0]*r+this.stride[1]*n+this.stride[2]*a]};a.index=function e(t,r,n){return this.offset+this.stride[0]*t+this.stride[1]*r+this.stride[2]*n};a.hi=function e(t,r,a){return new n(this.data,typeof t!=="number"||t<0?this.shape[0]:t|0,typeof r!=="number"||r<0?this.shape[1]:r|0,typeof a!=="number"||a<0?this.shape[2]:a|0,this.stride[0],this.stride[1],this.stride[2],this.offset)};a.lo=function e(t,r,a){var i=this.offset,o=0,s=this.shape[0],l=this.shape[1],u=this.shape[2],f=this.stride[0],c=this.stride[1],v=this.stride[2];if(typeof t==="number"&&t>=0){o=t|0;i+=f*o;s-=o}if(typeof r==="number"&&r>=0){o=r|0;i+=c*o;l-=o}if(typeof a==="number"&&a>=0){o=a|0;i+=v*o;u-=o}return new n(this.data,s,l,u,f,c,v,i)};a.step=function e(t,r,a){var i=this.shape[0],o=this.shape[1],s=this.shape[2],l=this.stride[0],u=this.stride[1],f=this.stride[2],c=this.offset,v=0,h=Math.ceil;if(typeof t==="number"){v=t|0;if(v<0){c+=l*(i-1);i=h(-i/v)}else{i=h(i/v)}l*=v}if(typeof r==="number"){v=r|0;if(v<0){c+=u*(o-1);o=h(-o/v)}else{o=h(o/v)}u*=v}if(typeof a==="number"){v=a|0;if(v<0){c+=f*(s-1);s=h(-s/v)}else{s=h(s/v)}f*=v}return new n(this.data,i,o,s,l,u,f,c)};a.transpose=function e(t,r,a){t=t===undefined?0:t|0;r=r===undefined?1:r|0;a=a===undefined?2:a|0;var i=this.shape,o=this.stride;return new n(this.data,i[t],i[r],i[a],o[t],o[r],o[a],this.offset)};a.pick=function e(r,n,a){var i=[],o=[],s=this.offset;if(typeof r==="number"&&r>=0){s=s+this.stride[0]*r|0}else{i.push(this.shape[0]);o.push(this.stride[0])}if(typeof n==="number"&&n>=0){s=s+this.stride[1]*n|0}else{i.push(this.shape[1]);o.push(this.stride[1])}if(typeof a==="number"&&a>=0){s=s+this.stride[2]*a|0}else{i.push(this.shape[2]);o.push(this.stride[2])}var l=t[i.length+1];return l(this.data,i,o,s)};return function e(t,r,a,i){return new n(t,r[0],r[1],r[2],a[0],a[1],a[2],i)}},4:function(e,t,r){function n(e,t,r,n,a,i,o,s,l,u){this.data=e;this.shape=[t,r,n,a];this.stride=[i,o,s,l];this.offset=u|0}var a=n.prototype;a.dtype=e;a.dimension=4;Object.defineProperty(a,"size",{get:function e(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}});Object.defineProperty(a,"order",{get:r});a.set=function t(r,n,a,i,o){return e==="generic"?this.data.set(this.offset+this.stride[0]*r+this.stride[1]*n+this.stride[2]*a+this.stride[3]*i,o):this.data[this.offset+this.stride[0]*r+this.stride[1]*n+this.stride[2]*a+this.stride[3]*i]=o};a.get=function t(r,n,a,i){return e==="generic"?this.data.get(this.offset+this.stride[0]*r+this.stride[1]*n+this.stride[2]*a+this.stride[3]*i):this.data[this.offset+this.stride[0]*r+this.stride[1]*n+this.stride[2]*a+this.stride[3]*i]};a.index=function e(t,r,n,a){return this.offset+this.stride[0]*t+this.stride[1]*r+this.stride[2]*n+this.stride[3]*a};a.hi=function e(t,r,a,i){return new n(this.data,typeof t!=="number"||t<0?this.shape[0]:t|0,typeof r!=="number"||r<0?this.shape[1]:r|0,typeof a!=="number"||a<0?this.shape[2]:a|0,typeof i!=="number"||i<0?this.shape[3]:i|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)};a.lo=function e(t,r,a,i){var o=this.offset,s=0,l=this.shape[0],u=this.shape[1],f=this.shape[2],c=this.shape[3],v=this.stride[0],h=this.stride[1],p=this.stride[2],d=this.stride[3];if(typeof t==="number"&&t>=0){s=t|0;o+=v*s;l-=s}if(typeof r==="number"&&r>=0){s=r|0;o+=h*s;u-=s}if(typeof a==="number"&&a>=0){s=a|0;o+=p*s;f-=s}if(typeof i==="number"&&i>=0){s=i|0;o+=d*s;c-=s}return new n(this.data,l,u,f,c,v,h,p,d,o)};a.step=function e(t,r,a,i){var o=this.shape[0],s=this.shape[1],l=this.shape[2],u=this.shape[3],f=this.stride[0],c=this.stride[1],v=this.stride[2],h=this.stride[3],p=this.offset,d=0,g=Math.ceil;if(typeof t==="number"){d=t|0;if(d<0){p+=f*(o-1);o=g(-o/d)}else{o=g(o/d)}f*=d}if(typeof r==="number"){d=r|0;if(d<0){p+=c*(s-1);s=g(-s/d)}else{s=g(s/d)}c*=d}if(typeof a==="number"){d=a|0;if(d<0){p+=v*(l-1);l=g(-l/d)}else{l=g(l/d)}v*=d}if(typeof i==="number"){d=i|0;if(d<0){p+=h*(u-1);u=g(-u/d)}else{u=g(u/d)}h*=d}return new n(this.data,o,s,l,u,f,c,v,h,p)};a.transpose=function e(t,r,a,i){t=t===undefined?0:t|0;r=r===undefined?1:r|0;a=a===undefined?2:a|0;i=i===undefined?3:i|0;var o=this.shape,s=this.stride;return new n(this.data,o[t],o[r],o[a],o[i],s[t],s[r],s[a],s[i],this.offset)};a.pick=function e(r,n,a,i){var o=[],s=[],l=this.offset;if(typeof r==="number"&&r>=0){l=l+this.stride[0]*r|0}else{o.push(this.shape[0]);s.push(this.stride[0])}if(typeof n==="number"&&n>=0){l=l+this.stride[1]*n|0}else{o.push(this.shape[1]);s.push(this.stride[1])}if(typeof a==="number"&&a>=0){l=l+this.stride[2]*a|0}else{o.push(this.shape[2]);s.push(this.stride[2])}if(typeof i==="number"&&i>=0){l=l+this.stride[3]*i|0}else{o.push(this.shape[3]);s.push(this.stride[3])}var u=t[o.length+1];return u(this.data,o,s,l)};return function e(t,r,a,i){return new n(t,r[0],r[1],r[2],r[3],a[0],a[1],a[2],a[3],i)}},5:function e(t,r,n){function a(e,t,r,n,a,i,o,s,l,u,f,c){this.data=e;this.shape=[t,r,n,a,i];this.stride=[o,s,l,u,f];this.offset=c|0}var i=a.prototype;i.dtype=t;i.dimension=5;Object.defineProperty(i,"size",{get:function e(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}});Object.defineProperty(i,"order",{get:n});i.set=function e(r,n,a,i,o,s){return t==="generic"?this.data.set(this.offset+this.stride[0]*r+this.stride[1]*n+this.stride[2]*a+this.stride[3]*i+this.stride[4]*o,s):this.data[this.offset+this.stride[0]*r+this.stride[1]*n+this.stride[2]*a+this.stride[3]*i+this.stride[4]*o]=s};i.get=function e(r,n,a,i,o){return t==="generic"?this.data.get(this.offset+this.stride[0]*r+this.stride[1]*n+this.stride[2]*a+this.stride[3]*i+this.stride[4]*o):this.data[this.offset+this.stride[0]*r+this.stride[1]*n+this.stride[2]*a+this.stride[3]*i+this.stride[4]*o]};i.index=function e(t,r,n,a,i){return this.offset+this.stride[0]*t+this.stride[1]*r+this.stride[2]*n+this.stride[3]*a+this.stride[4]*i};i.hi=function e(t,r,n,i,o){return new a(this.data,typeof t!=="number"||t<0?this.shape[0]:t|0,typeof r!=="number"||r<0?this.shape[1]:r|0,typeof n!=="number"||n<0?this.shape[2]:n|0,typeof i!=="number"||i<0?this.shape[3]:i|0,typeof o!=="number"||o<0?this.shape[4]:o|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)};i.lo=function e(t,r,n,i,o){var s=this.offset,l=0,u=this.shape[0],f=this.shape[1],c=this.shape[2],v=this.shape[3],h=this.shape[4],p=this.stride[0],d=this.stride[1],g=this.stride[2],y=this.stride[3],m=this.stride[4];if(typeof t==="number"&&t>=0){l=t|0;s+=p*l;u-=l}if(typeof r==="number"&&r>=0){l=r|0;s+=d*l;f-=l}if(typeof n==="number"&&n>=0){l=n|0;s+=g*l;c-=l}if(typeof i==="number"&&i>=0){l=i|0;s+=y*l;v-=l}if(typeof o==="number"&&o>=0){l=o|0;s+=m*l;h-=l}return new a(this.data,u,f,c,v,h,p,d,g,y,m,s)};i.step=function e(t,r,n,i,o){var s=this.shape[0],l=this.shape[1],u=this.shape[2],f=this.shape[3],c=this.shape[4],v=this.stride[0],h=this.stride[1],p=this.stride[2],d=this.stride[3],g=this.stride[4],y=this.offset,m=0,x=Math.ceil;if(typeof t==="number"){m=t|0;if(m<0){y+=v*(s-1);s=x(-s/m)}else{s=x(s/m)}v*=m}if(typeof r==="number"){m=r|0;if(m<0){y+=h*(l-1);l=x(-l/m)}else{l=x(l/m)}h*=m}if(typeof n==="number"){m=n|0;if(m<0){y+=p*(u-1);u=x(-u/m)}else{u=x(u/m)}p*=m}if(typeof i==="number"){m=i|0;if(m<0){y+=d*(f-1);f=x(-f/m)}else{f=x(f/m)}d*=m}if(typeof o==="number"){m=o|0;if(m<0){y+=g*(c-1);c=x(-c/m)}else{c=x(c/m)}g*=m}return new a(this.data,s,l,u,f,c,v,h,p,d,g,y)};i.transpose=function e(t,r,n,i,o){t=t===undefined?0:t|0;r=r===undefined?1:r|0;n=n===undefined?2:n|0;i=i===undefined?3:i|0;o=o===undefined?4:o|0;var s=this.shape,l=this.stride;return new a(this.data,s[t],s[r],s[n],s[i],s[o],l[t],l[r],l[n],l[i],l[o],this.offset)};i.pick=function e(t,n,a,i,o){var s=[],l=[],u=this.offset;if(typeof t==="number"&&t>=0){u=u+this.stride[0]*t|0}else{s.push(this.shape[0]);l.push(this.stride[0])}if(typeof n==="number"&&n>=0){u=u+this.stride[1]*n|0}else{s.push(this.shape[1]);l.push(this.stride[1])}if(typeof a==="number"&&a>=0){u=u+this.stride[2]*a|0}else{s.push(this.shape[2]);l.push(this.stride[2])}if(typeof i==="number"&&i>=0){u=u+this.stride[3]*i|0}else{s.push(this.shape[3]);l.push(this.stride[3])}if(typeof o==="number"&&o>=0){u=u+this.stride[4]*o|0}else{s.push(this.shape[4]);l.push(this.stride[4])}var f=r[s.length+1];return f(this.data,s,l,u)};return function e(t,r,n,i){return new a(t,r[0],r[1],r[2],r[3],r[4],n[0],n[1],n[2],n[3],n[4],i)}}};function l(e,t){var r=t===-1?"T":String(t);var n=s[r];if(t===-1){return n(e)}else if(t===0){return n(e,f[e][0])}return n(e,f[e],o)}function u(e){if(n(e)){return"buffer"}if(a){switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}}if(Array.isArray(e)){return"array"}return"generic"}var f={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};(function(){for(var e in f){f[e].push(l(e,-1))}});function c(e,t,r,n){if(e===undefined){var a=f.array[0];return a([])}else if(typeof e==="number"){e=[e]}if(t===undefined){t=[e.length]}var i=t.length;if(r===undefined){r=new Array(i);for(var o=i-1,s=1;o>=0;--o){r[o]=s;s*=t[o]}}if(n===undefined){n=0;for(var o=0;o<i;++o){if(r[o]<0){n-=(t[o]-1)*r[o]}}}var c=u(e);var v=f[c];while(v.length<=i+1){v.push(l(c,v.length-1))}var a=v[i+1];return a(e,t,r,n)}e.exports=c},8551:function(e,t,r){"use strict";var n=r(8362);var a=Math.pow(2,-1074);var i=-1>>>0;e.exports=o;function o(e,t){if(isNaN(e)||isNaN(t)){return NaN}if(e===t){return e}if(e===0){if(t<0){return-a}else{return a}}var r=n.hi(e);var o=n.lo(e);if(t>e===e>0){if(o===i){r+=1;o=0}else{o+=1}}else{if(o===0){o=i;r-=1}else{o-=1}}return n.pack(o,r)}},115:function(e,t){var r=1e-6;var n=1e-6;t.vertexNormals=function(e,t,n){var a=t.length;var i=new Array(a);var o=n===void 0?r:n;for(var s=0;s<a;++s){i[s]=[0,0,0]}for(var s=0;s<e.length;++s){var l=e[s];var u=0;var f=l[l.length-1];var c=l[0];for(var v=0;v<l.length;++v){u=f;f=c;c=l[(v+1)%l.length];var h=t[u];var p=t[f];var d=t[c];var g=new Array(3);var y=0;var m=new Array(3);var x=0;for(var b=0;b<3;++b){g[b]=h[b]-p[b];y+=g[b]*g[b];m[b]=d[b]-p[b];x+=m[b]*m[b]}if(y*x>o){var _=i[f];var w=1/Math.sqrt(y*x);for(var b=0;b<3;++b){var T=(b+1)%3;var k=(b+2)%3;_[b]+=w*(m[T]*g[k]-m[k]*g[T])}}}}for(var s=0;s<a;++s){var _=i[s];var A=0;for(var b=0;b<3;++b){A+=_[b]*_[b]}if(A>o){var w=1/Math.sqrt(A);for(var b=0;b<3;++b){_[b]*=w}}else{for(var b=0;b<3;++b){_[b]=0}}}return i};t.faceNormals=function(e,t,r){var a=e.length;var i=new Array(a);var o=r===void 0?n:r;for(var s=0;s<a;++s){var l=e[s];var u=new Array(3);for(var f=0;f<3;++f){u[f]=t[l[f]]}var c=new Array(3);var v=new Array(3);for(var f=0;f<3;++f){c[f]=u[1][f]-u[0][f];v[f]=u[2][f]-u[0][f]}var h=new Array(3);var p=0;for(var f=0;f<3;++f){var d=(f+1)%3;var g=(f+2)%3;h[f]=c[d]*v[g]-c[g]*v[d];p+=h[f]*h[f]}if(p>o){p=1/Math.sqrt(p)}else{p=0}for(var f=0;f<3;++f){h[f]*=p}i[s]=h}return i}},567:function(e){"use strict";e.exports=t;function t(e,t,r,n,a,i,o,s,l,u){var f=t+i+u;if(c>0){var c=Math.sqrt(f+1);e[0]=.5*(o-l)/c;e[1]=.5*(s-n)/c;e[2]=.5*(r-i)/c;e[3]=.5*c}else{var v=Math.max(t,i,u);var c=Math.sqrt(2*v-f+1);if(t>=v){e[0]=.5*c;e[1]=.5*(a+r)/c;e[2]=.5*(s+n)/c;e[3]=.5*(o-l)/c}else if(i>=v){e[0]=.5*(r+a)/c;e[1]=.5*c;e[2]=.5*(l+o)/c;e[3]=.5*(s-n)/c}else{e[0]=.5*(n+s)/c;e[1]=.5*(o+l)/c;e[2]=.5*c;e[3]=.5*(r-a)/c}}return e}},7774:function(e,t,r){"use strict";e.exports=h;var n=r(8444);var a=r(3012);var i=r(5950);var o=r(7437);var s=r(567);function l(e,t,r){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(r,2))}function u(e,t,r,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(r,2)+Math.pow(n,2))}function f(e,t){var r=t[0];var n=t[1];var a=t[2];var i=t[3];var o=u(r,n,a,i);if(o>1e-6){e[0]=r/o;e[1]=n/o;e[2]=a/o;e[3]=i/o}else{e[0]=e[1]=e[2]=0;e[3]=1}}function c(e,t,r){this.radius=n([r]);this.center=n(t);this.rotation=n(e);this.computedRadius=this.radius.curve(0);this.computedCenter=this.center.curve(0);this.computedRotation=this.rotation.curve(0);this.computedUp=[.1,0,0];this.computedEye=[.1,0,0];this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.recalcMatrix(0)}var v=c.prototype;v.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())};v.recalcMatrix=function(e){this.radius.curve(e);this.center.curve(e);this.rotation.curve(e);var t=this.computedRotation;f(t,t);var r=this.computedMatrix;i(r,t);var n=this.computedCenter;var a=this.computedEye;var o=this.computedUp;var s=Math.exp(this.computedRadius[0]);a[0]=n[0]+s*r[2];a[1]=n[1]+s*r[6];a[2]=n[2]+s*r[10];o[0]=r[1];o[1]=r[5];o[2]=r[9];for(var l=0;l<3;++l){var u=0;for(var c=0;c<3;++c){u+=r[l+4*c]*a[c]}r[12+l]=-u}};v.getMatrix=function(e,t){this.recalcMatrix(e);var r=this.computedMatrix;if(t){for(var n=0;n<16;++n){t[n]=r[n]}return t}return r};v.idle=function(e){this.center.idle(e);this.radius.idle(e);this.rotation.idle(e)};v.flush=function(e){this.center.flush(e);this.radius.flush(e);this.rotation.flush(e)};v.pan=function(e,t,r,n){t=t||0;r=r||0;n=n||0;this.recalcMatrix(e);var a=this.computedMatrix;var i=a[1];var o=a[5];var s=a[9];var u=l(i,o,s);i/=u;o/=u;s/=u;var f=a[0];var c=a[4];var v=a[8];var h=f*i+c*o+v*s;f-=i*h;c-=o*h;v-=s*h;var p=l(f,c,v);f/=p;c/=p;v/=p;var d=a[2];var g=a[6];var y=a[10];var m=d*i+g*o+y*s;var x=d*f+g*c+y*v;d-=m*i+x*f;g-=m*o+x*c;y-=m*s+x*v;var b=l(d,g,y);d/=b;g/=b;y/=b;var _=f*t+i*r;var w=c*t+o*r;var T=v*t+s*r;this.center.move(e,_,w,T);var k=Math.exp(this.computedRadius[0]);k=Math.max(1e-4,k+n);this.radius.set(e,Math.log(k))};v.rotate=function(e,t,r,n){this.recalcMatrix(e);t=t||0;r=r||0;var a=this.computedMatrix;var i=a[0];var o=a[4];var s=a[8];var f=a[1];var c=a[5];var v=a[9];var h=a[2];var p=a[6];var d=a[10];var g=t*i+r*f;var y=t*o+r*c;var m=t*s+r*v;var x=-(p*m-d*y);var b=-(d*g-h*m);var _=-(h*y-p*g);var w=Math.sqrt(Math.max(0,1-Math.pow(x,2)-Math.pow(b,2)-Math.pow(_,2)));var T=u(x,b,_,w);if(T>1e-6){x/=T;b/=T;_/=T;w/=T}else{x=b=_=0;w=1}var k=this.computedRotation;var A=k[0];var M=k[1];var S=k[2];var E=k[3];var L=A*w+E*x+M*_-S*b;var C=M*w+E*b+S*x-A*_;var I=S*w+E*_+A*b-M*x;var P=E*w-A*x-M*b-S*_;if(n){x=h;b=p;_=d;var O=Math.sin(n)/l(x,b,_);x*=O;b*=O;_*=O;w=Math.cos(t);L=L*w+P*x+C*_-I*b;C=C*w+P*b+I*x-L*_;I=I*w+P*_+L*b-C*x;P=P*w-L*x-C*b-I*_}var D=u(L,C,I,P);if(D>1e-6){L/=D;C/=D;I/=D;P/=D}else{L=C=I=0;P=1}this.rotation.set(e,L,C,I,P)};v.lookAt=function(e,t,r,n){this.recalcMatrix(e);r=r||this.computedCenter;t=t||this.computedEye;n=n||this.computedUp;var i=this.computedMatrix;a(i,t,r,n);var o=this.computedRotation;s(o,i[0],i[1],i[2],i[4],i[5],i[6],i[8],i[9],i[10]);f(o,o);this.rotation.set(e,o[0],o[1],o[2],o[3]);var l=0;for(var u=0;u<3;++u){l+=Math.pow(r[u]-t[u],2)}this.radius.set(e,.5*Math.log(Math.max(l,1e-6)));this.center.set(e,r[0],r[1],r[2])};v.translate=function(e,t,r,n){this.center.move(e,t||0,r||0,n||0)};v.setMatrix=function(e,t){var r=this.computedRotation;s(r,t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]);f(r,r);this.rotation.set(e,r[0],r[1],r[2],r[3]);var n=this.computedMatrix;o(n,t);var a=n[15];if(Math.abs(a)>1e-6){var i=n[12]/a;var l=n[13]/a;var u=n[14]/a;this.recalcMatrix(e);var c=Math.exp(this.computedRadius[0]);this.center.set(e,i-n[2]*c,l-n[6]*c,u-n[10]*c);this.radius.idle(e)}else{this.center.idle(e);this.radius.idle(e)}};v.setDistance=function(e,t){if(t>0){this.radius.set(e,Math.log(t))}};v.setDistanceLimits=function(e,t){if(e>0){e=Math.log(e)}else{e=-Infinity}if(t>0){t=Math.log(t)}else{t=Infinity}t=Math.max(t,e);this.radius.bounds[0][0]=e;this.radius.bounds[1][0]=t};v.getDistanceLimits=function(e){var t=this.radius.bounds;if(e){e[0]=Math.exp(t[0][0]);e[1]=Math.exp(t[1][0]);return e}return[Math.exp(t[0][0]),Math.exp(t[1][0])]};v.toJSON=function(){this.recalcMatrix(this.lastT());return{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}};v.fromJSON=function(e){var t=this.lastT();var r=e.center;if(r){this.center.set(t,r[0],r[1],r[2])}var n=e.rotation;if(n){this.rotation.set(t,n[0],n[1],n[2],n[3])}var a=e.distance;if(a&&a>0){this.radius.set(t,Math.log(a))}this.setDistanceLimits(e.zoomMin,e.zoomMax)};function h(e){e=e||{};var t=e.center||[0,0,0];var r=e.rotation||[0,0,0,1];var n=e.radius||1;t=[].slice.call(t,0,3);r=[].slice.call(r,0,4);f(r,r);var a=new c(r,t,Math.log(n));a.setDistanceLimits(e.zoomMin,e.zoomMax);if("eye"in e||"up"in e){a.lookAt(0,e.eye,e.center,e.up)}return a}},4930:function(e,t,r){"use strict";var n=r(6184);e.exports=function e(t,r,a){a=typeof a!=="undefined"?a+"":" ";return n(a,r)+t}},4405:function(e){e.exports=function e(t,r){if(!r)r=[0,""];t=String(t);var n=parseFloat(t,10);r[0]=n;r[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return r}},4166:function(e,t,r){"use strict";e.exports=a;var n=r(9398);function a(e,t){var r=t.length|0;var a=e.length;var i=[new Array(r),new Array(r)];for(var o=0;o<r;++o){i[0][o]=[];i[1][o]=[]}for(var o=0;o<a;++o){var s=e[o];i[0][s[0]].push(s);i[1][s[1]].push(s)}var l=[];for(var o=0;o<r;++o){if(i[0][o].length+i[1][o].length===0){l.push([o])}}function u(e,t){var r=i[t][e[t]];r.splice(r.indexOf(e),1)}function f(e,r,a){var o,s,l;for(var f=0;f<2;++f){if(i[f][r].length>0){o=i[f][r][0];l=f;break}}s=o[l^1];for(var c=0;c<2;++c){var v=i[c][r];for(var h=0;h<v.length;++h){var p=v[h];var d=p[c^1];var g=n(t[e],t[r],t[s],t[d]);if(g>0){o=p;s=d;l=c}}}if(a){return s}if(o){u(o,l)}return s}function c(e,r){var a=i[r][e][0];var o=[e];u(a,r);var s=a[r^1];var l=r;while(true){while(s!==e){o.push(s);s=f(o[o.length-2],s,false)}if(i[0][e].length+i[1][e].length===0){break}var c=o[o.length-1];var v=e;var h=o[1];var p=f(c,v,true);if(n(t[c],t[v],t[h],t[p])<0){break}o.push(e);s=f(c,v)}return o}function v(e,t){return t[1]===t[t.length-1]}for(var o=0;o<r;++o){for(var h=0;h<2;++h){var p=[];while(i[h][o].length>0){var d=i[0][o].length;var g=c(o,h);if(v(p,g)){p.push.apply(p,g)}else{if(p.length>0){l.push(p)}p=g}}if(p.length>0){l.push(p)}}}return l}},3959:function(e,t,r){"use strict";e.exports=a;var n=r(8348);function a(e,t){var r=n(e,t.length);var a=new Array(t.length);var i=new Array(t.length);var o=[];for(var s=0;s<t.length;++s){var l=r[s].length;i[s]=l;a[s]=true;if(l<=1){o.push(s)}}while(o.length>0){var u=o.pop();a[u]=false;var f=r[u];for(var s=0;s<f.length;++s){var c=f[s];if(--i[c]===0){o.push(c)}}}var v=new Array(t.length);var h=[];for(var s=0;s<t.length;++s){if(a[s]){var u=h.length;v[s]=u;h.push(t[s])}else{v[s]=-1}}var p=[];for(var s=0;s<e.length;++s){var d=e[s];if(a[d[0]]&&a[d[1]]){p.push([v[d[0]],v[d[1]]])}}return[p,h]}},8040:function(e,t,r){"use strict";e.exports=v;var n=r(8348);var a=r(4166);var i=r(211);var o=r(9660);var s=r(9662);var l=r(1215);var u=r(3959);function f(e,t){var r=new Array(e);for(var n=0;n<e;++n){r[n]=t}return r}function c(e){var t=new Array(e);for(var r=0;r<e;++r){t[r]=[]}return t}function v(e,t){var r=u(e,t);e=r[0];t=r[1];var v=t.length;var h=e.length;var p=n(e,t.length);for(var d=0;d<v;++d){if(p[d].length%2===1){throw new Error("planar-graph-to-polyline: graph must be manifold")}}var g=a(e,t);function y(e){var r=e.length;var n=[0];for(var a=0;a<r;++a){var i=t[e[a]];var l=t[e[(a+1)%r]];var u=o(-i[0],i[1]);var f=o(-i[0],l[1]);var c=o(l[0],i[1]);var v=o(l[0],l[1]);n=s(n,s(s(u,f),s(c,v)))}return n[n.length-1]>0}g=g.filter(y);var m=g.length;var x=new Array(m);var b=new Array(m);for(var d=0;d<m;++d){x[d]=d;var _=new Array(m);var w=g[d].map((function(e){return t[e]}));var T=i([w]);var k=0;e:for(var A=0;A<m;++A){_[A]=0;if(d===A){continue}var M=g[A];var S=M.length;for(var E=0;E<S;++E){var L=T(t[M[E]]);if(L!==0){if(L<0){_[A]=1;k+=1}continue e}}_[A]=1;k+=1}b[d]=[k,d,_]}b.sort((function(e,t){return t[0]-e[0]}));for(var d=0;d<m;++d){var _=b[d];var C=_[1];var I=_[2];for(var A=0;A<m;++A){if(I[A]){x[A]=C}}}var P=c(m);for(var d=0;d<m;++d){P[d].push(x[d]);P[x[d]].push(d)}var O={};var D=f(v,false);for(var d=0;d<m;++d){var M=g[d];var S=M.length;for(var A=0;A<S;++A){var z=M[A];var R=M[(A+1)%S];var F=Math.min(z,R)+":"+Math.max(z,R);if(F in O){var B=O[F];P[B].push(d);P[d].push(B);D[z]=D[R]=true}else{O[F]=d}}}function N(e){var t=e.length;for(var r=0;r<t;++r){if(!D[e[r]]){return false}}return true}var j=[];var U=f(m,-1);for(var d=0;d<m;++d){if(x[d]===d&&!N(g[d])){j.push(d);U[d]=0}else{U[d]=-1}}var r=[];while(j.length>0){var V=j.pop();var H=P[V];l(H,(function(e,t){return e-t}));var q=H.length;var G=U[V];var Z;if(G===0){var M=g[V];Z=[M]}for(var d=0;d<q;++d){var Y=H[d];if(U[Y]>=0){continue}U[Y]=G^1;j.push(Y);if(G===0){var M=g[Y];if(!N(M)){M.reverse();Z.push(M)}}}if(G===0){r.push(Z)}}return r}},211:function(e,t,r){e.exports=p;var n=r(417)[3];var a=r(4385);var i=r(9014);var o=r(5070);function s(){return true}function l(e){return function(t,r){var n=e[t];if(n){return!!n.queryPoint(r,s)}return false}}function u(e){var t={};for(var r=0;r<e.length;++r){var n=e[r];var a=n[0][0];var o=n[0][1];var s=n[1][1];var u=[Math.min(o,s),Math.max(o,s)];if(a in t){t[a].push(u)}else{t[a]=[u]}}var f={};var c=Object.keys(t);for(var r=0;r<c.length;++r){var v=t[c[r]];f[c[r]]=i(v)}return l(f)}function f(e,t){return function(r){var a=o.le(t,r[0]);if(a<0){return 1}var i=e[a];if(!i){if(a>0&&t[a]===r[0]){i=e[a-1]}else{return 1}}var s=1;while(i){var l=i.key;var u=n(r,l[0],l[1]);if(l[0][0]<l[1][0]){if(u<0){i=i.left}else if(u>0){s=-1;i=i.right}else{return 0}}else{if(u>0){i=i.left}else if(u<0){s=1;i=i.right}else{return 0}}}return s}}function c(e){return 1}function v(e){return function t(r){if(e(r[0],r[1])){return 0}return 1}}function h(e,t){return function r(n){if(e(n[0],n[1])){return 0}return t(n)}}function p(e){var t=e.length;var r=[];var n=[];var i=0;for(var o=0;o<t;++o){var s=e[o];var l=s.length;for(var p=l-1,d=0;d<l;p=d++){var g=s[p];var y=s[d];if(g[0]===y[0]){n.push([g,y])}else{r.push([g,y])}}}if(r.length===0){if(n.length===0){return c}else{return v(u(n))}}var m=a(r);var x=f(m.slabs,m.coordinates);if(n.length===0){return x}else{return h(u(n),x)}}},7309:function(e){"use strict";var t=new Float64Array(4);var r=new Float64Array(4);var n=new Float64Array(4);function a(e,a,i,o,s){if(t.length<o.length){t=new Float64Array(o.length);r=new Float64Array(o.length);n=new Float64Array(o.length)}for(var l=0;l<o.length;++l){t[l]=e[l]-o[l];r[l]=a[l]-e[l];n[l]=i[l]-e[l]}var u=0,f=0,c=0,v=0,h=0,p=0;for(var l=0;l<o.length;++l){var d=r[l],g=n[l],y=t[l];u+=d*d;f+=d*g;c+=g*g;v+=y*d;h+=y*g;p+=y*y}var m=Math.abs(u*c-f*f);var x=f*h-c*v;var b=f*v-u*h;var _;if(x+b<=m){if(x<0){if(b<0){if(v<0){b=0;if(-v>=u){x=1;_=u+2*v+p}else{x=-v/u;_=v*x+p}}else{x=0;if(h>=0){b=0;_=p}else if(-h>=c){b=1;_=c+2*h+p}else{b=-h/c;_=h*b+p}}}else{x=0;if(h>=0){b=0;_=p}else if(-h>=c){b=1;_=c+2*h+p}else{b=-h/c;_=h*b+p}}}else if(b<0){b=0;if(v>=0){x=0;_=p}else if(-v>=u){x=1;_=u+2*v+p}else{x=-v/u;_=v*x+p}}else{var w=1/m;x*=w;b*=w;_=x*(u*x+f*b+2*v)+b*(f*x+c*b+2*h)+p}}else{var T,k,A,M;if(x<0){T=f+v;k=c+h;if(k>T){A=k-T;M=u-2*f+c;if(A>=M){x=1;b=0;_=u+2*v+p}else{x=A/M;b=1-x;_=x*(u*x+f*b+2*v)+b*(f*x+c*b+2*h)+p}}else{x=0;if(k<=0){b=1;_=c+2*h+p}else if(h>=0){b=0;_=p}else{b=-h/c;_=h*b+p}}}else if(b<0){T=f+h;k=u+v;if(k>T){A=k-T;M=u-2*f+c;if(A>=M){b=1;x=0;_=c+2*h+p}else{b=A/M;x=1-b;_=x*(u*x+f*b+2*v)+b*(f*x+c*b+2*h)+p}}else{b=0;if(k<=0){x=1;_=u+2*v+p}else if(v>=0){x=0;_=p}else{x=-v/u;_=v*x+p}}}else{A=c+h-f-v;if(A<=0){x=0;b=1;_=c+2*h+p}else{M=u-2*f+c;if(A>=M){x=1;b=0;_=u+2*v+p}else{x=A/M;b=1-x;_=x*(u*x+f*b+2*v)+b*(f*x+c*b+2*h)+p}}}}var S=1-x-b;for(var l=0;l<o.length;++l){s[l]=S*e[l]+x*a[l]+b*i[l]}if(_<0){return 0}return _}e.exports=a},1116:function(e,t,r){e.exports=r(6093)},7584:function(e,t,r){"use strict";var n=r(1539);e.exports=a;function a(e,t){var r=e.length;var a=new Array(r);for(var i=0;i<r;++i){a[i]=n(e[i],t[i])}return a}},2826:function(e,t,r){"use strict";e.exports=a;var n=r(5125);function a(e){var t=new Array(e.length);for(var r=0;r<e.length;++r){t[r]=n(e[r])}return t}},4469:function(e,t,r){"use strict";var n=r(5125);var a=r(3962);e.exports=i;function i(e,t){var r=n(t);var i=e.length;var o=new Array(i);for(var s=0;s<i;++s){o[s]=a(e[s],r)}return o}},6695:function(e,t,r){"use strict";var n=r(4354);e.exports=a;function a(e,t){var r=e.length;var a=new Array(r);for(var i=0;i<r;++i){a[i]=n(e[i],t[i])}return a}},7037:function(e,t,r){"use strict";var n=r(9209);var a=r(1284);var i=r(9887);e.exports=o;function o(e){e.sort(a);var t=e.length;var r=0;for(var o=0;o<t;++o){var s=e[o];var l=i(s);if(l===0){continue}if(r>0){var u=e[r-1];if(n(s,u)===0&&i(u)!==l){r-=1;continue}}e[r++]=s}e.length=r;return e}},6184:function(e){"use strict";var t="";var r;e.exports=n;function n(e,n){if(typeof e!=="string"){throw new TypeError("expected a string")}if(n===1)return e;if(n===2)return e+e;var a=e.length*n;if(r!==e||typeof r==="undefined"){r=e;t=""}else if(t.length>=a){return t.substr(0,a)}while(a>t.length&&n>1){if(n&1){t+=e}n>>=1;e+=e}t+=e;t=t.substr(0,a);return t}},8161:function(e,t,r){e.exports=r.g.performance&&r.g.performance.now?function e(){return performance.now()}:Date.now||function e(){return+new Date}},402:function(e){"use strict";e.exports=t;function t(e){var t=e.length;var r=e[e.length-1];var n=t;for(var a=t-2;a>=0;--a){var i=r;var o=e[a];r=i+o;var s=r-i;var l=o-s;if(l){e[--n]=r;r=l}}var u=0;for(var a=n;a<t;++a){var i=e[a];var o=r;r=i+o;var s=r-i;var l=o-s;if(l){e[u++]=l}}e[u++]=r;e.length=u;return e}},8167:function(e,t,r){"use strict";var n=r(9660);var a=r(9662);var i=r(8289);var o=r(402);var s=6;function l(e,t,r,n){return function t(a){return n(e(r(a[0][0],a[1][1]),r(-a[0][1],a[1][0])))}}function u(e,t,r,n){return function a(i){return n(e(t(e(r(i[1][1],i[2][2]),r(-i[1][2],i[2][1])),i[0][0]),e(t(e(r(i[1][0],i[2][2]),r(-i[1][2],i[2][0])),-i[0][1]),t(e(r(i[1][0],i[2][1]),r(-i[1][1],i[2][0])),i[0][2]))))}}function f(e,t,r,n){return function a(i){return n(e(e(t(e(t(e(r(i[2][2],i[3][3]),r(-i[2][3],i[3][2])),i[1][1]),e(t(e(r(i[2][1],i[3][3]),r(-i[2][3],i[3][1])),-i[1][2]),t(e(r(i[2][1],i[3][2]),r(-i[2][2],i[3][1])),i[1][3]))),i[0][0]),t(e(t(e(r(i[2][2],i[3][3]),r(-i[2][3],i[3][2])),i[1][0]),e(t(e(r(i[2][0],i[3][3]),r(-i[2][3],i[3][0])),-i[1][2]),t(e(r(i[2][0],i[3][2]),r(-i[2][2],i[3][0])),i[1][3]))),-i[0][1])),e(t(e(t(e(r(i[2][1],i[3][3]),r(-i[2][3],i[3][1])),i[1][0]),e(t(e(r(i[2][0],i[3][3]),r(-i[2][3],i[3][0])),-i[1][1]),t(e(r(i[2][0],i[3][1]),r(-i[2][1],i[3][0])),i[1][3]))),i[0][2]),t(e(t(e(r(i[2][1],i[3][2]),r(-i[2][2],i[3][1])),i[1][0]),e(t(e(r(i[2][0],i[3][2]),r(-i[2][2],i[3][0])),-i[1][1]),t(e(r(i[2][0],i[3][1]),r(-i[2][1],i[3][0])),i[1][2]))),-i[0][3]))))}}function c(e,t,r,n){return function a(i){return n(e(e(t(e(e(t(e(t(e(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][2]),e(t(e(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),-i[2][3]),t(e(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][4]))),i[1][1]),t(e(t(e(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][1]),e(t(e(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),-i[2][3]),t(e(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),i[2][4]))),-i[1][2])),e(t(e(t(e(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),i[2][1]),e(t(e(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),-i[2][2]),t(e(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][4]))),i[1][3]),t(e(t(e(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][1]),e(t(e(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),-i[2][2]),t(e(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][3]))),-i[1][4]))),i[0][0]),t(e(e(t(e(t(e(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][2]),e(t(e(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),-i[2][3]),t(e(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][4]))),i[1][0]),t(e(t(e(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][0]),e(t(e(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][3]),t(e(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),i[2][4]))),-i[1][2])),e(t(e(t(e(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),i[2][0]),e(t(e(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][2]),t(e(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),i[2][4]))),i[1][3]),t(e(t(e(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][0]),e(t(e(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),-i[2][2]),t(e(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),i[2][3]))),-i[1][4]))),-i[0][1])),e(t(e(e(t(e(t(e(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][1]),e(t(e(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),-i[2][3]),t(e(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),i[2][4]))),i[1][0]),t(e(t(e(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][0]),e(t(e(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][3]),t(e(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),i[2][4]))),-i[1][1])),e(t(e(t(e(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),i[2][0]),e(t(e(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][1]),t(e(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][4]))),i[1][3]),t(e(t(e(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),i[2][0]),e(t(e(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),-i[2][1]),t(e(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][3]))),-i[1][4]))),i[0][2]),e(t(e(e(t(e(t(e(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),i[2][1]),e(t(e(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),-i[2][2]),t(e(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][4]))),i[1][0]),t(e(t(e(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),i[2][0]),e(t(e(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][2]),t(e(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),i[2][4]))),-i[1][1])),e(t(e(t(e(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),i[2][0]),e(t(e(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][1]),t(e(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][4]))),i[1][2]),t(e(t(e(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][0]),e(t(e(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),-i[2][1]),t(e(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][2]))),-i[1][4]))),-i[0][3]),t(e(e(t(e(t(e(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][1]),e(t(e(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),-i[2][2]),t(e(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][3]))),i[1][0]),t(e(t(e(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][0]),e(t(e(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),-i[2][2]),t(e(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),i[2][3]))),-i[1][1])),e(t(e(t(e(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),i[2][0]),e(t(e(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),-i[2][1]),t(e(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][3]))),i[1][2]),t(e(t(e(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][0]),e(t(e(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),-i[2][1]),t(e(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][2]))),-i[1][3]))),i[0][4])))))}}function v(e){var t=e===2?l:e===3?u:e===4?f:e===5?c:undefined;return t(a,i,n,o)}var h=[function e(){return[0]},function e(t){return[t[0][0]]}];function p(e,t,r,n,a,i,o,s){return function l(u){switch(u.length){case 0:return e(u);case 1:return t(u);case 2:return r(u);case 3:return n(u);case 4:return a(u);case 5:return i(u)}var f=o[u.length];if(!f)f=o[u.length]=s(u.length);return f(u)}}function d(){while(h.length<s){h.push(v(h.length))}e.exports=p.apply(undefined,h.concat([h,v]));for(var t=0;t<h.length;++t){e.exports[t]=h[t]}}d()},9130:function(e,t,r){"use strict";var n=r(9660);var a=r(9662);e.exports=i;function i(e,t){var r=n(e[0],t[0]);for(var i=1;i<e.length;++i){r=a(r,n(e[i],t[i]))}return r}},2227:function(e,t,r){"use strict";var n=r(9660);var a=r(9662);var i=r(4078);var o=r(8289);var s=6;function l(e){var t=e===3?v:e===4?h:e===5?p:d;return t(a,i,n,o)}function u(){return 0}function f(){return 0}function c(){return 0}function v(e,t,r,n){function a(a,i,o){var s=r(a[0],a[0]);var l=n(s,i[0]);var u=n(s,o[0]);var f=r(i[0],i[0]);var c=n(f,a[0]);var v=n(f,o[0]);var h=r(o[0],o[0]);var p=n(h,a[0]);var d=n(h,i[0]);var g=e(t(d,v),t(c,l));var y=t(p,u);var m=t(g,y);return m[m.length-1]}return a}function h(e,t,r,n){function a(a,i,o,s){var l=e(r(a[0],a[0]),r(a[1],a[1]));var u=n(l,i[0]);var f=n(l,o[0]);var c=n(l,s[0]);var v=e(r(i[0],i[0]),r(i[1],i[1]));var h=n(v,a[0]);var p=n(v,o[0]);var d=n(v,s[0]);var g=e(r(o[0],o[0]),r(o[1],o[1]));var y=n(g,a[0]);var m=n(g,i[0]);var x=n(g,s[0]);var b=e(r(s[0],s[0]),r(s[1],s[1]));var _=n(b,a[0]);var w=n(b,i[0]);var T=n(b,o[0]);var k=e(e(n(t(T,x),i[1]),e(n(t(w,d),-o[1]),n(t(m,p),s[1]))),e(n(t(w,d),a[1]),e(n(t(_,c),-i[1]),n(t(h,u),s[1]))));var A=e(e(n(t(T,x),a[1]),e(n(t(_,c),-o[1]),n(t(y,f),s[1]))),e(n(t(m,p),a[1]),e(n(t(y,f),-i[1]),n(t(h,u),o[1]))));var M=t(k,A);return M[M.length-1]}return a}function p(e,t,r,n){function a(a,i,o,s,l){var u=e(r(a[0],a[0]),e(r(a[1],a[1]),r(a[2],a[2])));var f=n(u,i[0]);var c=n(u,o[0]);var v=n(u,s[0]);var h=n(u,l[0]);var p=e(r(i[0],i[0]),e(r(i[1],i[1]),r(i[2],i[2])));var d=n(p,a[0]);var g=n(p,o[0]);var y=n(p,s[0]);var m=n(p,l[0]);var x=e(r(o[0],o[0]),e(r(o[1],o[1]),r(o[2],o[2])));var b=n(x,a[0]);var _=n(x,i[0]);var w=n(x,s[0]);var T=n(x,l[0]);var k=e(r(s[0],s[0]),e(r(s[1],s[1]),r(s[2],s[2])));var A=n(k,a[0]);var M=n(k,i[0]);var S=n(k,o[0]);var E=n(k,l[0]);var L=e(r(l[0],l[0]),e(r(l[1],l[1]),r(l[2],l[2])));var C=n(L,a[0]);var I=n(L,i[0]);var P=n(L,o[0]);var O=n(L,s[0]);var D=e(e(e(n(e(n(t(O,E),o[1]),e(n(t(P,T),-s[1]),n(t(S,w),l[1]))),i[2]),e(n(e(n(t(O,E),i[1]),e(n(t(I,m),-s[1]),n(t(M,y),l[1]))),-o[2]),n(e(n(t(P,T),i[1]),e(n(t(I,m),-o[1]),n(t(_,g),l[1]))),s[2]))),e(n(e(n(t(S,w),i[1]),e(n(t(M,y),-o[1]),n(t(_,g),s[1]))),-l[2]),e(n(e(n(t(O,E),i[1]),e(n(t(I,m),-s[1]),n(t(M,y),l[1]))),a[2]),n(e(n(t(O,E),a[1]),e(n(t(C,h),-s[1]),n(t(A,v),l[1]))),-i[2])))),e(e(n(e(n(t(I,m),a[1]),e(n(t(C,h),-i[1]),n(t(d,f),l[1]))),s[2]),e(n(e(n(t(M,y),a[1]),e(n(t(A,v),-i[1]),n(t(d,f),s[1]))),-l[2]),n(e(n(t(S,w),i[1]),e(n(t(M,y),-o[1]),n(t(_,g),s[1]))),a[2]))),e(n(e(n(t(S,w),a[1]),e(n(t(A,v),-o[1]),n(t(b,c),s[1]))),-i[2]),e(n(e(n(t(M,y),a[1]),e(n(t(A,v),-i[1]),n(t(d,f),s[1]))),o[2]),n(e(n(t(_,g),a[1]),e(n(t(b,c),-i[1]),n(t(d,f),o[1]))),-s[2])))));var z=e(e(e(n(e(n(t(O,E),o[1]),e(n(t(P,T),-s[1]),n(t(S,w),l[1]))),a[2]),n(e(n(t(O,E),a[1]),e(n(t(C,h),-s[1]),n(t(A,v),l[1]))),-o[2])),e(n(e(n(t(P,T),a[1]),e(n(t(C,h),-o[1]),n(t(b,c),l[1]))),s[2]),n(e(n(t(S,w),a[1]),e(n(t(A,v),-o[1]),n(t(b,c),s[1]))),-l[2]))),e(e(n(e(n(t(P,T),i[1]),e(n(t(I,m),-o[1]),n(t(_,g),l[1]))),a[2]),n(e(n(t(P,T),a[1]),e(n(t(C,h),-o[1]),n(t(b,c),l[1]))),-i[2])),e(n(e(n(t(I,m),a[1]),e(n(t(C,h),-i[1]),n(t(d,f),l[1]))),o[2]),n(e(n(t(_,g),a[1]),e(n(t(b,c),-i[1]),n(t(d,f),o[1]))),-l[2]))));var R=t(D,z);return R[R.length-1]}return a}function d(e,t,r,n){function a(a,i,o,s,l,u){var f=e(e(r(a[0],a[0]),r(a[1],a[1])),e(r(a[2],a[2]),r(a[3],a[3])));var c=n(f,i[0]);var v=n(f,o[0]);var h=n(f,s[0]);var p=n(f,l[0]);var d=n(f,u[0]);var g=e(e(r(i[0],i[0]),r(i[1],i[1])),e(r(i[2],i[2]),r(i[3],i[3])));var y=n(g,a[0]);var m=n(g,o[0]);var x=n(g,s[0]);var b=n(g,l[0]);var _=n(g,u[0]);var w=e(e(r(o[0],o[0]),r(o[1],o[1])),e(r(o[2],o[2]),r(o[3],o[3])));var T=n(w,a[0]);var k=n(w,i[0]);var A=n(w,s[0]);var M=n(w,l[0]);var S=n(w,u[0]);var E=e(e(r(s[0],s[0]),r(s[1],s[1])),e(r(s[2],s[2]),r(s[3],s[3])));var L=n(E,a[0]);var C=n(E,i[0]);var I=n(E,o[0]);var P=n(E,l[0]);var O=n(E,u[0]);var D=e(e(r(l[0],l[0]),r(l[1],l[1])),e(r(l[2],l[2]),r(l[3],l[3])));var z=n(D,a[0]);var R=n(D,i[0]);var F=n(D,o[0]);var B=n(D,s[0]);var N=n(D,u[0]);var j=e(e(r(u[0],u[0]),r(u[1],u[1])),e(r(u[2],u[2]),r(u[3],u[3])));var U=n(j,a[0]);var V=n(j,i[0]);var H=n(j,o[0]);var q=n(j,s[0]);var G=n(j,l[0]);var Z=e(e(e(n(e(e(n(e(n(t(G,N),s[1]),e(n(t(q,O),-l[1]),n(t(B,P),u[1]))),o[2]),n(e(n(t(G,N),o[1]),e(n(t(H,S),-l[1]),n(t(F,M),u[1]))),-s[2])),e(n(e(n(t(q,O),o[1]),e(n(t(H,S),-s[1]),n(t(I,A),u[1]))),l[2]),n(e(n(t(B,P),o[1]),e(n(t(F,M),-s[1]),n(t(I,A),l[1]))),-u[2]))),i[3]),e(n(e(e(n(e(n(t(G,N),s[1]),e(n(t(q,O),-l[1]),n(t(B,P),u[1]))),i[2]),n(e(n(t(G,N),i[1]),e(n(t(V,_),-l[1]),n(t(R,b),u[1]))),-s[2])),e(n(e(n(t(q,O),i[1]),e(n(t(V,_),-s[1]),n(t(C,x),u[1]))),l[2]),n(e(n(t(B,P),i[1]),e(n(t(R,b),-s[1]),n(t(C,x),l[1]))),-u[2]))),-o[3]),n(e(e(n(e(n(t(G,N),o[1]),e(n(t(H,S),-l[1]),n(t(F,M),u[1]))),i[2]),n(e(n(t(G,N),i[1]),e(n(t(V,_),-l[1]),n(t(R,b),u[1]))),-o[2])),e(n(e(n(t(H,S),i[1]),e(n(t(V,_),-o[1]),n(t(k,m),u[1]))),l[2]),n(e(n(t(F,M),i[1]),e(n(t(R,b),-o[1]),n(t(k,m),l[1]))),-u[2]))),s[3]))),e(e(n(e(e(n(e(n(t(q,O),o[1]),e(n(t(H,S),-s[1]),n(t(I,A),u[1]))),i[2]),n(e(n(t(q,O),i[1]),e(n(t(V,_),-s[1]),n(t(C,x),u[1]))),-o[2])),e(n(e(n(t(H,S),i[1]),e(n(t(V,_),-o[1]),n(t(k,m),u[1]))),s[2]),n(e(n(t(I,A),i[1]),e(n(t(C,x),-o[1]),n(t(k,m),s[1]))),-u[2]))),-l[3]),n(e(e(n(e(n(t(B,P),o[1]),e(n(t(F,M),-s[1]),n(t(I,A),l[1]))),i[2]),n(e(n(t(B,P),i[1]),e(n(t(R,b),-s[1]),n(t(C,x),l[1]))),-o[2])),e(n(e(n(t(F,M),i[1]),e(n(t(R,b),-o[1]),n(t(k,m),l[1]))),s[2]),n(e(n(t(I,A),i[1]),e(n(t(C,x),-o[1]),n(t(k,m),s[1]))),-l[2]))),u[3])),e(n(e(e(n(e(n(t(G,N),s[1]),e(n(t(q,O),-l[1]),n(t(B,P),u[1]))),i[2]),n(e(n(t(G,N),i[1]),e(n(t(V,_),-l[1]),n(t(R,b),u[1]))),-s[2])),e(n(e(n(t(q,O),i[1]),e(n(t(V,_),-s[1]),n(t(C,x),u[1]))),l[2]),n(e(n(t(B,P),i[1]),e(n(t(R,b),-s[1]),n(t(C,x),l[1]))),-u[2]))),a[3]),n(e(e(n(e(n(t(G,N),s[1]),e(n(t(q,O),-l[1]),n(t(B,P),u[1]))),a[2]),n(e(n(t(G,N),a[1]),e(n(t(U,d),-l[1]),n(t(z,p),u[1]))),-s[2])),e(n(e(n(t(q,O),a[1]),e(n(t(U,d),-s[1]),n(t(L,h),u[1]))),l[2]),n(e(n(t(B,P),a[1]),e(n(t(z,p),-s[1]),n(t(L,h),l[1]))),-u[2]))),-i[3])))),e(e(e(n(e(e(n(e(n(t(G,N),i[1]),e(n(t(V,_),-l[1]),n(t(R,b),u[1]))),a[2]),n(e(n(t(G,N),a[1]),e(n(t(U,d),-l[1]),n(t(z,p),u[1]))),-i[2])),e(n(e(n(t(V,_),a[1]),e(n(t(U,d),-i[1]),n(t(y,c),u[1]))),l[2]),n(e(n(t(R,b),a[1]),e(n(t(z,p),-i[1]),n(t(y,c),l[1]))),-u[2]))),s[3]),n(e(e(n(e(n(t(q,O),i[1]),e(n(t(V,_),-s[1]),n(t(C,x),u[1]))),a[2]),n(e(n(t(q,O),a[1]),e(n(t(U,d),-s[1]),n(t(L,h),u[1]))),-i[2])),e(n(e(n(t(V,_),a[1]),e(n(t(U,d),-i[1]),n(t(y,c),u[1]))),s[2]),n(e(n(t(C,x),a[1]),e(n(t(L,h),-i[1]),n(t(y,c),s[1]))),-u[2]))),-l[3])),e(n(e(e(n(e(n(t(B,P),i[1]),e(n(t(R,b),-s[1]),n(t(C,x),l[1]))),a[2]),n(e(n(t(B,P),a[1]),e(n(t(z,p),-s[1]),n(t(L,h),l[1]))),-i[2])),e(n(e(n(t(R,b),a[1]),e(n(t(z,p),-i[1]),n(t(y,c),l[1]))),s[2]),n(e(n(t(C,x),a[1]),e(n(t(L,h),-i[1]),n(t(y,c),s[1]))),-l[2]))),u[3]),n(e(e(n(e(n(t(q,O),o[1]),e(n(t(H,S),-s[1]),n(t(I,A),u[1]))),i[2]),n(e(n(t(q,O),i[1]),e(n(t(V,_),-s[1]),n(t(C,x),u[1]))),-o[2])),e(n(e(n(t(H,S),i[1]),e(n(t(V,_),-o[1]),n(t(k,m),u[1]))),s[2]),n(e(n(t(I,A),i[1]),e(n(t(C,x),-o[1]),n(t(k,m),s[1]))),-u[2]))),a[3]))),e(e(n(e(e(n(e(n(t(q,O),o[1]),e(n(t(H,S),-s[1]),n(t(I,A),u[1]))),a[2]),n(e(n(t(q,O),a[1]),e(n(t(U,d),-s[1]),n(t(L,h),u[1]))),-o[2])),e(n(e(n(t(H,S),a[1]),e(n(t(U,d),-o[1]),n(t(T,v),u[1]))),s[2]),n(e(n(t(I,A),a[1]),e(n(t(L,h),-o[1]),n(t(T,v),s[1]))),-u[2]))),-i[3]),n(e(e(n(e(n(t(q,O),i[1]),e(n(t(V,_),-s[1]),n(t(C,x),u[1]))),a[2]),n(e(n(t(q,O),a[1]),e(n(t(U,d),-s[1]),n(t(L,h),u[1]))),-i[2])),e(n(e(n(t(V,_),a[1]),e(n(t(U,d),-i[1]),n(t(y,c),u[1]))),s[2]),n(e(n(t(C,x),a[1]),e(n(t(L,h),-i[1]),n(t(y,c),s[1]))),-u[2]))),o[3])),e(n(e(e(n(e(n(t(H,S),i[1]),e(n(t(V,_),-o[1]),n(t(k,m),u[1]))),a[2]),n(e(n(t(H,S),a[1]),e(n(t(U,d),-o[1]),n(t(T,v),u[1]))),-i[2])),e(n(e(n(t(V,_),a[1]),e(n(t(U,d),-i[1]),n(t(y,c),u[1]))),o[2]),n(e(n(t(k,m),a[1]),e(n(t(T,v),-i[1]),n(t(y,c),o[1]))),-u[2]))),-s[3]),n(e(e(n(e(n(t(I,A),i[1]),e(n(t(C,x),-o[1]),n(t(k,m),s[1]))),a[2]),n(e(n(t(I,A),a[1]),e(n(t(L,h),-o[1]),n(t(T,v),s[1]))),-i[2])),e(n(e(n(t(C,x),a[1]),e(n(t(L,h),-i[1]),n(t(y,c),s[1]))),o[2]),n(e(n(t(k,m),a[1]),e(n(t(T,v),-i[1]),n(t(y,c),o[1]))),-s[2]))),u[3])))));var Y=e(e(e(n(e(e(n(e(n(t(G,N),s[1]),e(n(t(q,O),-l[1]),n(t(B,P),u[1]))),o[2]),n(e(n(t(G,N),o[1]),e(n(t(H,S),-l[1]),n(t(F,M),u[1]))),-s[2])),e(n(e(n(t(q,O),o[1]),e(n(t(H,S),-s[1]),n(t(I,A),u[1]))),l[2]),n(e(n(t(B,P),o[1]),e(n(t(F,M),-s[1]),n(t(I,A),l[1]))),-u[2]))),a[3]),e(n(e(e(n(e(n(t(G,N),s[1]),e(n(t(q,O),-l[1]),n(t(B,P),u[1]))),a[2]),n(e(n(t(G,N),a[1]),e(n(t(U,d),-l[1]),n(t(z,p),u[1]))),-s[2])),e(n(e(n(t(q,O),a[1]),e(n(t(U,d),-s[1]),n(t(L,h),u[1]))),l[2]),n(e(n(t(B,P),a[1]),e(n(t(z,p),-s[1]),n(t(L,h),l[1]))),-u[2]))),-o[3]),n(e(e(n(e(n(t(G,N),o[1]),e(n(t(H,S),-l[1]),n(t(F,M),u[1]))),a[2]),n(e(n(t(G,N),a[1]),e(n(t(U,d),-l[1]),n(t(z,p),u[1]))),-o[2])),e(n(e(n(t(H,S),a[1]),e(n(t(U,d),-o[1]),n(t(T,v),u[1]))),l[2]),n(e(n(t(F,M),a[1]),e(n(t(z,p),-o[1]),n(t(T,v),l[1]))),-u[2]))),s[3]))),e(e(n(e(e(n(e(n(t(q,O),o[1]),e(n(t(H,S),-s[1]),n(t(I,A),u[1]))),a[2]),n(e(n(t(q,O),a[1]),e(n(t(U,d),-s[1]),n(t(L,h),u[1]))),-o[2])),e(n(e(n(t(H,S),a[1]),e(n(t(U,d),-o[1]),n(t(T,v),u[1]))),s[2]),n(e(n(t(I,A),a[1]),e(n(t(L,h),-o[1]),n(t(T,v),s[1]))),-u[2]))),-l[3]),n(e(e(n(e(n(t(B,P),o[1]),e(n(t(F,M),-s[1]),n(t(I,A),l[1]))),a[2]),n(e(n(t(B,P),a[1]),e(n(t(z,p),-s[1]),n(t(L,h),l[1]))),-o[2])),e(n(e(n(t(F,M),a[1]),e(n(t(z,p),-o[1]),n(t(T,v),l[1]))),s[2]),n(e(n(t(I,A),a[1]),e(n(t(L,h),-o[1]),n(t(T,v),s[1]))),-l[2]))),u[3])),e(n(e(e(n(e(n(t(G,N),o[1]),e(n(t(H,S),-l[1]),n(t(F,M),u[1]))),i[2]),n(e(n(t(G,N),i[1]),e(n(t(V,_),-l[1]),n(t(R,b),u[1]))),-o[2])),e(n(e(n(t(H,S),i[1]),e(n(t(V,_),-o[1]),n(t(k,m),u[1]))),l[2]),n(e(n(t(F,M),i[1]),e(n(t(R,b),-o[1]),n(t(k,m),l[1]))),-u[2]))),a[3]),n(e(e(n(e(n(t(G,N),o[1]),e(n(t(H,S),-l[1]),n(t(F,M),u[1]))),a[2]),n(e(n(t(G,N),a[1]),e(n(t(U,d),-l[1]),n(t(z,p),u[1]))),-o[2])),e(n(e(n(t(H,S),a[1]),e(n(t(U,d),-o[1]),n(t(T,v),u[1]))),l[2]),n(e(n(t(F,M),a[1]),e(n(t(z,p),-o[1]),n(t(T,v),l[1]))),-u[2]))),-i[3])))),e(e(e(n(e(e(n(e(n(t(G,N),i[1]),e(n(t(V,_),-l[1]),n(t(R,b),u[1]))),a[2]),n(e(n(t(G,N),a[1]),e(n(t(U,d),-l[1]),n(t(z,p),u[1]))),-i[2])),e(n(e(n(t(V,_),a[1]),e(n(t(U,d),-i[1]),n(t(y,c),u[1]))),l[2]),n(e(n(t(R,b),a[1]),e(n(t(z,p),-i[1]),n(t(y,c),l[1]))),-u[2]))),o[3]),n(e(e(n(e(n(t(H,S),i[1]),e(n(t(V,_),-o[1]),n(t(k,m),u[1]))),a[2]),n(e(n(t(H,S),a[1]),e(n(t(U,d),-o[1]),n(t(T,v),u[1]))),-i[2])),e(n(e(n(t(V,_),a[1]),e(n(t(U,d),-i[1]),n(t(y,c),u[1]))),o[2]),n(e(n(t(k,m),a[1]),e(n(t(T,v),-i[1]),n(t(y,c),o[1]))),-u[2]))),-l[3])),e(n(e(e(n(e(n(t(F,M),i[1]),e(n(t(R,b),-o[1]),n(t(k,m),l[1]))),a[2]),n(e(n(t(F,M),a[1]),e(n(t(z,p),-o[1]),n(t(T,v),l[1]))),-i[2])),e(n(e(n(t(R,b),a[1]),e(n(t(z,p),-i[1]),n(t(y,c),l[1]))),o[2]),n(e(n(t(k,m),a[1]),e(n(t(T,v),-i[1]),n(t(y,c),o[1]))),-l[2]))),u[3]),n(e(e(n(e(n(t(B,P),o[1]),e(n(t(F,M),-s[1]),n(t(I,A),l[1]))),i[2]),n(e(n(t(B,P),i[1]),e(n(t(R,b),-s[1]),n(t(C,x),l[1]))),-o[2])),e(n(e(n(t(F,M),i[1]),e(n(t(R,b),-o[1]),n(t(k,m),l[1]))),s[2]),n(e(n(t(I,A),i[1]),e(n(t(C,x),-o[1]),n(t(k,m),s[1]))),-l[2]))),a[3]))),e(e(n(e(e(n(e(n(t(B,P),o[1]),e(n(t(F,M),-s[1]),n(t(I,A),l[1]))),a[2]),n(e(n(t(B,P),a[1]),e(n(t(z,p),-s[1]),n(t(L,h),l[1]))),-o[2])),e(n(e(n(t(F,M),a[1]),e(n(t(z,p),-o[1]),n(t(T,v),l[1]))),s[2]),n(e(n(t(I,A),a[1]),e(n(t(L,h),-o[1]),n(t(T,v),s[1]))),-l[2]))),-i[3]),n(e(e(n(e(n(t(B,P),i[1]),e(n(t(R,b),-s[1]),n(t(C,x),l[1]))),a[2]),n(e(n(t(B,P),a[1]),e(n(t(z,p),-s[1]),n(t(L,h),l[1]))),-i[2])),e(n(e(n(t(R,b),a[1]),e(n(t(z,p),-i[1]),n(t(y,c),l[1]))),s[2]),n(e(n(t(C,x),a[1]),e(n(t(L,h),-i[1]),n(t(y,c),s[1]))),-l[2]))),o[3])),e(n(e(e(n(e(n(t(F,M),i[1]),e(n(t(R,b),-o[1]),n(t(k,m),l[1]))),a[2]),n(e(n(t(F,M),a[1]),e(n(t(z,p),-o[1]),n(t(T,v),l[1]))),-i[2])),e(n(e(n(t(R,b),a[1]),e(n(t(z,p),-i[1]),n(t(y,c),l[1]))),o[2]),n(e(n(t(k,m),a[1]),e(n(t(T,v),-i[1]),n(t(y,c),o[1]))),-l[2]))),-s[3]),n(e(e(n(e(n(t(I,A),i[1]),e(n(t(C,x),-o[1]),n(t(k,m),s[1]))),a[2]),n(e(n(t(I,A),a[1]),e(n(t(L,h),-o[1]),n(t(T,v),s[1]))),-i[2])),e(n(e(n(t(C,x),a[1]),e(n(t(L,h),-i[1]),n(t(y,c),s[1]))),o[2]),n(e(n(t(k,m),a[1]),e(n(t(T,v),-i[1]),n(t(y,c),o[1]))),-s[2]))),l[3])))));var W=t(Z,Y);return W[W.length-1]}return a}var g=[u,f,c];function y(e){var t=g[e.length];if(!t){t=g[e.length]=l(e.length)}return t.apply(undefined,e)}function m(e,t,r,n,a,i,o,s){function l(t,r,l,u,f,c){switch(arguments.length){case 0:case 1:return 0;case 2:return n(t,r);case 3:return a(t,r,l);case 4:return i(t,r,l,u);case 5:return o(t,r,l,u,f);case 6:return s(t,r,l,u,f,c)}var v=new Array(arguments.length);for(var h=0;h<arguments.length;++h){v[h]=arguments[h]}return e(v)}return l}function x(){while(g.length<=s){g.push(l(g.length))}e.exports=m.apply(undefined,[y].concat(g));for(var t=0;t<=s;++t){e.exports[t]=g[t]}}x()},6606:function(e,t,r){"use strict";var n=r(8167);var a=6;function i(e){var t=e===2?l:e===3?u:e===4?f:e===5?c:v;if(e<6){return t(n[e])}return t(n)}function o(){return[[0]]}function s(e,t){return[[t[0]],[e[0][0]]]}function l(e){return function t(r,n){return[e([[+n[0],+r[0][1]],[+n[1],+r[1][1]]]),e([[+r[0][0],+n[0]],[+r[1][0],+n[1]]]),e(r)]}}function u(e){return function t(r,n){return[e([[+n[0],+r[0][1],+r[0][2]],[+n[1],+r[1][1],+r[1][2]],[+n[2],+r[2][1],+r[2][2]]]),e([[+r[0][0],+n[0],+r[0][2]],[+r[1][0],+n[1],+r[1][2]],[+r[2][0],+n[2],+r[2][2]]]),e([[+r[0][0],+r[0][1],+n[0]],[+r[1][0],+r[1][1],+n[1]],[+r[2][0],+r[2][1],+n[2]]]),e(r)]}}function f(e){return function t(r,n){return[e([[+n[0],+r[0][1],+r[0][2],+r[0][3]],[+n[1],+r[1][1],+r[1][2],+r[1][3]],[+n[2],+r[2][1],+r[2][2],+r[2][3]],[+n[3],+r[3][1],+r[3][2],+r[3][3]]]),e([[+r[0][0],+n[0],+r[0][2],+r[0][3]],[+r[1][0],+n[1],+r[1][2],+r[1][3]],[+r[2][0],+n[2],+r[2][2],+r[2][3]],[+r[3][0],+n[3],+r[3][2],+r[3][3]]]),e([[+r[0][0],+r[0][1],+n[0],+r[0][3]],[+r[1][0],+r[1][1],+n[1],+r[1][3]],[+r[2][0],+r[2][1],+n[2],+r[2][3]],[+r[3][0],+r[3][1],+n[3],+r[3][3]]]),e([[+r[0][0],+r[0][1],+r[0][2],+n[0]],[+r[1][0],+r[1][1],+r[1][2],+n[1]],[+r[2][0],+r[2][1],+r[2][2],+n[2]],[+r[3][0],+r[3][1],+r[3][2],+n[3]]]),e(r)]}}function c(e){return function t(r,n){return[e([[+n[0],+r[0][1],+r[0][2],+r[0][3],+r[0][4]],[+n[1],+r[1][1],+r[1][2],+r[1][3],+r[1][4]],[+n[2],+r[2][1],+r[2][2],+r[2][3],+r[2][4]],[+n[3],+r[3][1],+r[3][2],+r[3][3],+r[3][4]],[+n[4],+r[4][1],+r[4][2],+r[4][3],+r[4][4]]]),e([[+r[0][0],+n[0],+r[0][2],+r[0][3],+r[0][4]],[+r[1][0],+n[1],+r[1][2],+r[1][3],+r[1][4]],[+r[2][0],+n[2],+r[2][2],+r[2][3],+r[2][4]],[+r[3][0],+n[3],+r[3][2],+r[3][3],+r[3][4]],[+r[4][0],+n[4],+r[4][2],+r[4][3],+r[4][4]]]),e([[+r[0][0],+r[0][1],+n[0],+r[0][3],+r[0][4]],[+r[1][0],+r[1][1],+n[1],+r[1][3],+r[1][4]],[+r[2][0],+r[2][1],+n[2],+r[2][3],+r[2][4]],[+r[3][0],+r[3][1],+n[3],+r[3][3],+r[3][4]],[+r[4][0],+r[4][1],+n[4],+r[4][3],+r[4][4]]]),e([[+r[0][0],+r[0][1],+r[0][2],+n[0],+r[0][4]],[+r[1][0],+r[1][1],+r[1][2],+n[1],+r[1][4]],[+r[2][0],+r[2][1],+r[2][2],+n[2],+r[2][4]],[+r[3][0],+r[3][1],+r[3][2],+n[3],+r[3][4]],[+r[4][0],+r[4][1],+r[4][2],+n[4],+r[4][4]]]),e([[+r[0][0],+r[0][1],+r[0][2],+r[0][3],+n[0]],[+r[1][0],+r[1][1],+r[1][2],+r[1][3],+n[1]],[+r[2][0],+r[2][1],+r[2][2],+r[2][3],+n[2]],[+r[3][0],+r[3][1],+r[3][2],+r[3][3],+n[3]],[+r[4][0],+r[4][1],+r[4][2],+r[4][3],+n[4]]]),e(r)]}}function v(e){return function t(r,n){return[e([[+n[0],+r[0][1],+r[0][2],+r[0][3],+r[0][4],+r[0][5]],[+n[1],+r[1][1],+r[1][2],+r[1][3],+r[1][4],+r[1][5]],[+n[2],+r[2][1],+r[2][2],+r[2][3],+r[2][4],+r[2][5]],[+n[3],+r[3][1],+r[3][2],+r[3][3],+r[3][4],+r[3][5]],[+n[4],+r[4][1],+r[4][2],+r[4][3],+r[4][4],+r[4][5]],[+n[5],+r[5][1],+r[5][2],+r[5][3],+r[5][4],+r[5][5]]]),e([[+r[0][0],+n[0],+r[0][2],+r[0][3],+r[0][4],+r[0][5]],[+r[1][0],+n[1],+r[1][2],+r[1][3],+r[1][4],+r[1][5]],[+r[2][0],+n[2],+r[2][2],+r[2][3],+r[2][4],+r[2][5]],[+r[3][0],+n[3],+r[3][2],+r[3][3],+r[3][4],+r[3][5]],[+r[4][0],+n[4],+r[4][2],+r[4][3],+r[4][4],+r[4][5]],[+r[5][0],+n[5],+r[5][2],+r[5][3],+r[5][4],+r[5][5]]]),e([[+r[0][0],+r[0][1],+n[0],+r[0][3],+r[0][4],+r[0][5]],[+r[1][0],+r[1][1],+n[1],+r[1][3],+r[1][4],+r[1][5]],[+r[2][0],+r[2][1],+n[2],+r[2][3],+r[2][4],+r[2][5]],[+r[3][0],+r[3][1],+n[3],+r[3][3],+r[3][4],+r[3][5]],[+r[4][0],+r[4][1],+n[4],+r[4][3],+r[4][4],+r[4][5]],[+r[5][0],+r[5][1],+n[5],+r[5][3],+r[5][4],+r[5][5]]]),e([[+r[0][0],+r[0][1],+r[0][2],+n[0],+r[0][4],+r[0][5]],[+r[1][0],+r[1][1],+r[1][2],+n[1],+r[1][4],+r[1][5]],[+r[2][0],+r[2][1],+r[2][2],+n[2],+r[2][4],+r[2][5]],[+r[3][0],+r[3][1],+r[3][2],+n[3],+r[3][4],+r[3][5]],[+r[4][0],+r[4][1],+r[4][2],+n[4],+r[4][4],+r[4][5]],[+r[5][0],+r[5][1],+r[5][2],+n[5],+r[5][4],+r[5][5]]]),e([[+r[0][0],+r[0][1],+r[0][2],+r[0][3],+n[0],+r[0][5]],[+r[1][0],+r[1][1],+r[1][2],+r[1][3],+n[1],+r[1][5]],[+r[2][0],+r[2][1],+r[2][2],+r[2][3],+n[2],+r[2][5]],[+r[3][0],+r[3][1],+r[3][2],+r[3][3],+n[3],+r[3][5]],[+r[4][0],+r[4][1],+r[4][2],+r[4][3],+n[4],+r[4][5]],[+r[5][0],+r[5][1],+r[5][2],+r[5][3],+n[5],+r[5][5]]]),e([[+r[0][0],+r[0][1],+r[0][2],+r[0][3],+r[0][4],+n[0]],[+r[1][0],+r[1][1],+r[1][2],+r[1][3],+r[1][4],+n[1]],[+r[2][0],+r[2][1],+r[2][2],+r[2][3],+r[2][4],+n[2]],[+r[3][0],+r[3][1],+r[3][2],+r[3][3],+r[3][4],+n[3]],[+r[4][0],+r[4][1],+r[4][2],+r[4][3],+r[4][4],+n[4]],[+r[5][0],+r[5][1],+r[5][2],+r[5][3],+r[5][4],+n[5]]]),e(r)]}}var h=[o,s];function p(e,t,r,n,a,i,o,s){return function l(u,f){switch(u.length){case 0:return e(u,f);case 1:return t(u,f);case 2:return r(u,f);case 3:return n(u,f);case 4:return a(u,f);case 5:return i(u,f)}var c=o[u.length];if(!c)c=o[u.length]=s(u.length);return c(u,f)}}function d(){while(h.length<a){h.push(i(h.length))}e.exports=p.apply(undefined,h.concat([h,i]));for(var t=0;t<a;++t){e.exports[t]=h[t]}}d()},417:function(e,t,r){"use strict";var n=r(9660);var a=r(9662);var i=r(8289);var o=r(4078);var s=5;var l=11102230246251565e-32;var u=(3+16*l)*l;var f=(7+56*l)*l;function c(e,t,r,n){return function r(a,i,o){var s=e(e(t(i[1],o[0]),t(-o[1],i[0])),e(t(a[1],i[0]),t(-i[1],a[0])));var l=e(t(a[1],o[0]),t(-o[1],a[0]));var u=n(s,l);return u[u.length-1]}}function v(e,t,r,n){return function a(i,o,s,l){var u=e(e(r(e(t(s[1],l[0]),t(-l[1],s[0])),o[2]),e(r(e(t(o[1],l[0]),t(-l[1],o[0])),-s[2]),r(e(t(o[1],s[0]),t(-s[1],o[0])),l[2]))),e(r(e(t(o[1],l[0]),t(-l[1],o[0])),i[2]),e(r(e(t(i[1],l[0]),t(-l[1],i[0])),-o[2]),r(e(t(i[1],o[0]),t(-o[1],i[0])),l[2]))));var f=e(e(r(e(t(s[1],l[0]),t(-l[1],s[0])),i[2]),e(r(e(t(i[1],l[0]),t(-l[1],i[0])),-s[2]),r(e(t(i[1],s[0]),t(-s[1],i[0])),l[2]))),e(r(e(t(o[1],s[0]),t(-s[1],o[0])),i[2]),e(r(e(t(i[1],s[0]),t(-s[1],i[0])),-o[2]),r(e(t(i[1],o[0]),t(-o[1],i[0])),s[2]))));var c=n(u,f);return c[c.length-1]}}function h(e,t,r,n){return function a(i,o,s,l,u){var f=e(e(e(r(e(r(e(t(l[1],u[0]),t(-u[1],l[0])),s[2]),e(r(e(t(s[1],u[0]),t(-u[1],s[0])),-l[2]),r(e(t(s[1],l[0]),t(-l[1],s[0])),u[2]))),o[3]),e(r(e(r(e(t(l[1],u[0]),t(-u[1],l[0])),o[2]),e(r(e(t(o[1],u[0]),t(-u[1],o[0])),-l[2]),r(e(t(o[1],l[0]),t(-l[1],o[0])),u[2]))),-s[3]),r(e(r(e(t(s[1],u[0]),t(-u[1],s[0])),o[2]),e(r(e(t(o[1],u[0]),t(-u[1],o[0])),-s[2]),r(e(t(o[1],s[0]),t(-s[1],o[0])),u[2]))),l[3]))),e(r(e(r(e(t(s[1],l[0]),t(-l[1],s[0])),o[2]),e(r(e(t(o[1],l[0]),t(-l[1],o[0])),-s[2]),r(e(t(o[1],s[0]),t(-s[1],o[0])),l[2]))),-u[3]),e(r(e(r(e(t(l[1],u[0]),t(-u[1],l[0])),o[2]),e(r(e(t(o[1],u[0]),t(-u[1],o[0])),-l[2]),r(e(t(o[1],l[0]),t(-l[1],o[0])),u[2]))),i[3]),r(e(r(e(t(l[1],u[0]),t(-u[1],l[0])),i[2]),e(r(e(t(i[1],u[0]),t(-u[1],i[0])),-l[2]),r(e(t(i[1],l[0]),t(-l[1],i[0])),u[2]))),-o[3])))),e(e(r(e(r(e(t(o[1],u[0]),t(-u[1],o[0])),i[2]),e(r(e(t(i[1],u[0]),t(-u[1],i[0])),-o[2]),r(e(t(i[1],o[0]),t(-o[1],i[0])),u[2]))),l[3]),e(r(e(r(e(t(o[1],l[0]),t(-l[1],o[0])),i[2]),e(r(e(t(i[1],l[0]),t(-l[1],i[0])),-o[2]),r(e(t(i[1],o[0]),t(-o[1],i[0])),l[2]))),-u[3]),r(e(r(e(t(s[1],l[0]),t(-l[1],s[0])),o[2]),e(r(e(t(o[1],l[0]),t(-l[1],o[0])),-s[2]),r(e(t(o[1],s[0]),t(-s[1],o[0])),l[2]))),i[3]))),e(r(e(r(e(t(s[1],l[0]),t(-l[1],s[0])),i[2]),e(r(e(t(i[1],l[0]),t(-l[1],i[0])),-s[2]),r(e(t(i[1],s[0]),t(-s[1],i[0])),l[2]))),-o[3]),e(r(e(r(e(t(o[1],l[0]),t(-l[1],o[0])),i[2]),e(r(e(t(i[1],l[0]),t(-l[1],i[0])),-o[2]),r(e(t(i[1],o[0]),t(-o[1],i[0])),l[2]))),s[3]),r(e(r(e(t(o[1],s[0]),t(-s[1],o[0])),i[2]),e(r(e(t(i[1],s[0]),t(-s[1],i[0])),-o[2]),r(e(t(i[1],o[0]),t(-o[1],i[0])),s[2]))),-l[3])))));var c=e(e(e(r(e(r(e(t(l[1],u[0]),t(-u[1],l[0])),s[2]),e(r(e(t(s[1],u[0]),t(-u[1],s[0])),-l[2]),r(e(t(s[1],l[0]),t(-l[1],s[0])),u[2]))),i[3]),r(e(r(e(t(l[1],u[0]),t(-u[1],l[0])),i[2]),e(r(e(t(i[1],u[0]),t(-u[1],i[0])),-l[2]),r(e(t(i[1],l[0]),t(-l[1],i[0])),u[2]))),-s[3])),e(r(e(r(e(t(s[1],u[0]),t(-u[1],s[0])),i[2]),e(r(e(t(i[1],u[0]),t(-u[1],i[0])),-s[2]),r(e(t(i[1],s[0]),t(-s[1],i[0])),u[2]))),l[3]),r(e(r(e(t(s[1],l[0]),t(-l[1],s[0])),i[2]),e(r(e(t(i[1],l[0]),t(-l[1],i[0])),-s[2]),r(e(t(i[1],s[0]),t(-s[1],i[0])),l[2]))),-u[3]))),e(e(r(e(r(e(t(s[1],u[0]),t(-u[1],s[0])),o[2]),e(r(e(t(o[1],u[0]),t(-u[1],o[0])),-s[2]),r(e(t(o[1],s[0]),t(-s[1],o[0])),u[2]))),i[3]),r(e(r(e(t(s[1],u[0]),t(-u[1],s[0])),i[2]),e(r(e(t(i[1],u[0]),t(-u[1],i[0])),-s[2]),r(e(t(i[1],s[0]),t(-s[1],i[0])),u[2]))),-o[3])),e(r(e(r(e(t(o[1],u[0]),t(-u[1],o[0])),i[2]),e(r(e(t(i[1],u[0]),t(-u[1],i[0])),-o[2]),r(e(t(i[1],o[0]),t(-o[1],i[0])),u[2]))),s[3]),r(e(r(e(t(o[1],s[0]),t(-s[1],o[0])),i[2]),e(r(e(t(i[1],s[0]),t(-s[1],i[0])),-o[2]),r(e(t(i[1],o[0]),t(-o[1],i[0])),s[2]))),-u[3]))));var v=n(f,c);return v[v.length-1]}}function p(e){var t=e===3?c:e===4?v:h;return t(a,n,i,o)}var d=p(3);var g=p(4);var y=[function e(){return 0},function e(){return 0},function e(t,r){return r[0]-t[0]},function e(t,r,n){var a=(t[1]-n[1])*(r[0]-n[0]);var i=(t[0]-n[0])*(r[1]-n[1]);var o=a-i;var s;if(a>0){if(i<=0){return o}else{s=a+i}}else if(a<0){if(i>=0){return o}else{s=-(a+i)}}else{return o}var l=u*s;if(o>=l||o<=-l){return o}return d(t,r,n)},function e(t,r,n,a){var i=t[0]-a[0];var o=r[0]-a[0];var s=n[0]-a[0];var l=t[1]-a[1];var u=r[1]-a[1];var c=n[1]-a[1];var v=t[2]-a[2];var h=r[2]-a[2];var p=n[2]-a[2];var d=o*c;var y=s*u;var m=s*l;var x=i*c;var b=i*u;var _=o*l;var w=v*(d-y)+h*(m-x)+p*(b-_);var T=(Math.abs(d)+Math.abs(y))*Math.abs(v)+(Math.abs(m)+Math.abs(x))*Math.abs(h)+(Math.abs(b)+Math.abs(_))*Math.abs(p);var k=f*T;if(w>k||-w>k){return w}return g(t,r,n,a)}];function m(e){var t=y[e.length];if(!t){t=y[e.length]=p(e.length)}return t.apply(undefined,e)}function x(e,t,r,n,a,i,o){return function t(r,s,l,u,f){switch(arguments.length){case 0:case 1:return 0;case 2:return n(r,s);case 3:return a(r,s,l);case 4:return i(r,s,l,u);case 5:return o(r,s,l,u,f)}var c=new Array(arguments.length);for(var v=0;v<arguments.length;++v){c[v]=arguments[v]}return e(c)}}function b(){while(y.length<=s){y.push(p(y.length))}e.exports=x.apply(undefined,[m].concat(y));for(var t=0;t<=s;++t){e.exports[t]=y[t]}}b()},2019:function(e,t,r){"use strict";var n=r(9662);var a=r(8289);e.exports=i;function i(e,t){if(e.length===1){return a(t,e[0])}if(t.length===1){return a(e,t[0])}if(e.length===0||t.length===0){return[0]}var r=[0];if(e.length<t.length){for(var i=0;i<e.length;++i){r=n(r,a(t,e[i]))}}else{for(var i=0;i<t.length;++i){r=n(r,a(e,t[i]))}}return r}},8289:function(e,t,r){"use strict";var n=r(9660);var a=r(87);e.exports=i;function i(e,t){var r=e.length;if(r===1){var i=n(e[0],t);if(i[0]){return i}return[i[1]]}var o=new Array(2*r);var s=[.1,.1];var l=[.1,.1];var u=0;n(e[0],t,s);if(s[0]){o[u++]=s[0]}for(var f=1;f<r;++f){n(e[f],t,l);var c=s[1];a(c,l[0],s);if(s[0]){o[u++]=s[0]}var v=l[1];var h=s[1];var p=v+h;var d=p-v;var g=h-d;s[1]=p;if(g){o[u++]=g}}if(s[1]){o[u++]=s[1]}if(u===0){o[u++]=0}o.length=u;return o}},4434:function(e,t,r){"use strict";e.exports=i;var n=r(417)[3];function a(e,t,r,n){for(var a=0;a<2;++a){var i=e[a];var o=t[a];var s=Math.min(i,o);var l=Math.max(i,o);var u=r[a];var f=n[a];var c=Math.min(u,f);var v=Math.max(u,f);if(v<s||l<c){return false}}return true}function i(e,t,r,i){var o=n(e,r,i);var s=n(t,r,i);if(o>0&&s>0||o<0&&s<0){return false}var l=n(r,e,t);var u=n(i,e,t);if(l>0&&u>0||l<0&&u<0){return false}if(o===0&&s===0&&l===0&&u===0){return a(e,t,r,i)}return true}},4078:function(e){"use strict";e.exports=r;function t(e,t){var r=e+t;var n=r-e;var a=r-n;var i=t-n;var o=e-a;var s=o+i;if(s){return[s,r]}return[r]}function r(e,r){var n=e.length|0;var a=r.length|0;if(n===1&&a===1){return t(e[0],-r[0])}var i=n+a;var o=new Array(i);var s=0;var l=0;var u=0;var f=Math.abs;var c=e[l];var v=f(c);var h=-r[u];var p=f(h);var d,g;if(v<p){g=c;l+=1;if(l<n){c=e[l];v=f(c)}}else{g=h;u+=1;if(u<a){h=-r[u];p=f(h)}}if(l<n&&v<p||u>=a){d=c;l+=1;if(l<n){c=e[l];v=f(c)}}else{d=h;u+=1;if(u<a){h=-r[u];p=f(h)}}var y=d+g;var m=y-d;var x=g-m;var b=x;var _=y;var w,T,k,A,M;while(l<n&&u<a){if(v<p){d=c;l+=1;if(l<n){c=e[l];v=f(c)}}else{d=h;u+=1;if(u<a){h=-r[u];p=f(h)}}g=b;y=d+g;m=y-d;x=g-m;if(x){o[s++]=x}w=_+y;T=w-_;k=w-T;A=y-T;M=_-k;b=M+A;_=w}while(l<n){d=c;g=b;y=d+g;m=y-d;x=g-m;if(x){o[s++]=x}w=_+y;T=w-_;k=w-T;A=y-T;M=_-k;b=M+A;_=w;l+=1;if(l<n){c=e[l]}}while(u<a){d=h;g=b;y=d+g;m=y-d;x=g-m;if(x){o[s++]=x}w=_+y;T=w-_;k=w-T;A=y-T;M=_-k;b=M+A;_=w;u+=1;if(u<a){h=-r[u]}}if(b){o[s++]=b}if(_){o[s++]=_}if(!s){o[s++]=0}o.length=s;return o}},9662:function(e){"use strict";e.exports=r;function t(e,t){var r=e+t;var n=r-e;var a=r-n;var i=t-n;var o=e-a;var s=o+i;if(s){return[s,r]}return[r]}function r(e,r){var n=e.length|0;var a=r.length|0;if(n===1&&a===1){return t(e[0],r[0])}var i=n+a;var o=new Array(i);var s=0;var l=0;var u=0;var f=Math.abs;var c=e[l];var v=f(c);var h=r[u];var p=f(h);var d,g;if(v<p){g=c;l+=1;if(l<n){c=e[l];v=f(c)}}else{g=h;u+=1;if(u<a){h=r[u];p=f(h)}}if(l<n&&v<p||u>=a){d=c;l+=1;if(l<n){c=e[l];v=f(c)}}else{d=h;u+=1;if(u<a){h=r[u];p=f(h)}}var y=d+g;var m=y-d;var x=g-m;var b=x;var _=y;var w,T,k,A,M;while(l<n&&u<a){if(v<p){d=c;l+=1;if(l<n){c=e[l];v=f(c)}}else{d=h;u+=1;if(u<a){h=r[u];p=f(h)}}g=b;y=d+g;m=y-d;x=g-m;if(x){o[s++]=x}w=_+y;T=w-_;k=w-T;A=y-T;M=_-k;b=M+A;_=w}while(l<n){d=c;g=b;y=d+g;m=y-d;x=g-m;if(x){o[s++]=x}w=_+y;T=w-_;k=w-T;A=y-T;M=_-k;b=M+A;_=w;l+=1;if(l<n){c=e[l]}}while(u<a){d=h;g=b;y=d+g;m=y-d;x=g-m;if(x){o[s++]=x}w=_+y;T=w-_;k=w-T;A=y-T;M=_-k;b=M+A;_=w;u+=1;if(u<a){h=r[u]}}if(b){o[s++]=b}if(_){o[s++]=_}if(!s){o[s++]=0}o.length=s;return o}},8691:function(e,t,r){"use strict";e.exports=i;var n=r(2692);var a=r(7037);function i(e){return a(n(e))}},7212:function(e,t,r){"use strict";e.exports=h;var n=r(5050);var a=r(5306);var i=r(8729);var o=r(1168);function s(e){var t=e.length;var r=0;for(var n=0;n<t;++n){r=Math.max(r,e[n].length)|0}return r-1}function l(e,t){var r=e.length;var n=a.mallocUint8(r);for(var i=0;i<r;++i){n[i]=e[i]<t|0}return n}function u(e,t){var r=e.length;var o=t*(t+1)/2*r|0;var s=a.mallocUint32(o*2);var l=0;for(var u=0;u<r;++u){var f=e[u];var t=f.length;for(var c=0;c<t;++c){for(var v=0;v<c;++v){var h=f[v];var p=f[c];s[l++]=Math.min(h,p)|0;s[l++]=Math.max(h,p)|0}}}var d=l/2|0;i(n(s,[d,2]));var g=2;for(var u=2;u<l;u+=2){if(s[u-2]===s[u]&&s[u-1]===s[u+1]){continue}s[g++]=s[u];s[g++]=s[u+1]}return n(s,[g/2|0,2])}function f(e,t,r,i){var o=e.data;var s=e.shape[0];var l=a.mallocDouble(s);var u=0;for(var f=0;f<s;++f){var c=o[2*f];var v=o[2*f+1];if(r[c]===r[v]){continue}var h=t[c];var p=t[v];o[2*u]=c;o[2*u+1]=v;l[u++]=(p-i)/(p-h)}e.shape[0]=u;return n(l,[u])}function c(e,t){var r=a.mallocInt32(t*2);var n=e.shape[0];var i=e.data;r[0]=0;var o=0;for(var s=0;s<n;++s){var l=i[2*s];if(l!==o){r[2*o+1]=s;while(++o<l){r[2*o]=s;r[2*o+1]=s}r[2*o]=s}}r[2*o+1]=n;while(++o<t){r[2*o]=r[2*o+1]=n}return r}function v(e){var t=e.shape[0]|0;var r=e.data;var n=new Array(t);for(var a=0;a<t;++a){n[a]=[r[2*a],r[2*a+1]]}return n}function h(e,t,r,n){r=r||0;if(typeof n==="undefined"){n=s(e)}var i=e.length;if(i===0||n<1){return{cells:[],vertexIds:[],vertexWeights:[]}}var h=l(t,+r);var p=u(e,n);var d=f(p,t,h,+r);var g=c(p,t.length|0);var y=o(n)(e,p.data,g,h);var m=v(p);var x=[].slice.call(d.data,0,d.shape[0]);a.free(h);a.free(p.data);a.free(d.data);a.free(g);return{cells:y,vertexIds:m,vertexWeights:x}}},1168:function(e){"use strict";e.exports=r;var t=[function e(){function t(e,t,r,n){var a=Math.min(r,n)|0,i=Math.max(r,n)|0,o=e[2*a],s=e[2*a+1];while(o<s){var l=o+s>>1,u=t[2*l+1];if(u===i){return l}if(i<u){s=l}else{o=l+1}}return o}function r(e,t,r,n){var a=e.length,i=[];for(var o=0;o<a;++o){var s=e[o],l=s.length}return i}return r},function e(){function t(e,t,r,n){var a=Math.min(r,n)|0,i=Math.max(r,n)|0,o=e[2*a],s=e[2*a+1];while(o<s){var l=o+s>>1,u=t[2*l+1];if(u===i){return l}if(i<u){s=l}else{o=l+1}}return o}function r(e,r,n,a){var i=e.length,o=[];for(var s=0;s<i;++s){var l=e[s],u=l.length;if(u===2){var f=(a[l[0]]<<0)+(a[l[1]]<<1);if(f===0||f===3){continue}switch(f){case 0:break;case 1:o.push([t(n,r,l[0],l[1])]);break;case 2:o.push([t(n,r,l[1],l[0])]);break;case 3:break}}}return o}return r},function e(){function t(e,t,r,n){var a=Math.min(r,n)|0,i=Math.max(r,n)|0,o=e[2*a],s=e[2*a+1];while(o<s){var l=o+s>>1,u=t[2*l+1];if(u===i){return l}if(i<u){s=l}else{o=l+1}}return o}function r(e,r,n,a){var i=e.length,o=[];for(var s=0;s<i;++s){var l=e[s],u=l.length;if(u===3){var f=(a[l[0]]<<0)+(a[l[1]]<<1)+(a[l[2]]<<2);if(f===0||f===7){continue}switch(f){case 0:break;case 1:o.push([t(n,r,l[0],l[2]),t(n,r,l[0],l[1])]);break;case 2:o.push([t(n,r,l[1],l[0]),t(n,r,l[1],l[2])]);break;case 3:o.push([t(n,r,l[0],l[2]),t(n,r,l[1],l[2])]);break;case 4:o.push([t(n,r,l[2],l[1]),t(n,r,l[2],l[0])]);break;case 5:o.push([t(n,r,l[2],l[1]),t(n,r,l[0],l[1])]);break;case 6:o.push([t(n,r,l[1],l[0]),t(n,r,l[2],l[0])]);break;case 7:break}}else if(u===2){var f=(a[l[0]]<<0)+(a[l[1]]<<1);if(f===0||f===3){continue}switch(f){case 0:break;case 1:o.push([t(n,r,l[0],l[1])]);break;case 2:o.push([t(n,r,l[1],l[0])]);break;case 3:break}}}return o}return r},function e(){function t(e,t,r,n){var a=Math.min(r,n)|0,i=Math.max(r,n)|0,o=e[2*a],s=e[2*a+1];while(o<s){var l=o+s>>1,u=t[2*l+1];if(u===i){return l}if(i<u){s=l}else{o=l+1}}return o}function r(e,r,n,a){var i=e.length,o=[];for(var s=0;s<i;++s){var l=e[s],u=l.length;if(u===4){var f=(a[l[0]]<<0)+(a[l[1]]<<1)+(a[l[2]]<<2)+(a[l[3]]<<3);if(f===0||f===15){continue}switch(f){case 0:break;case 1:o.push([t(n,r,l[0],l[1]),t(n,r,l[0],l[2]),t(n,r,l[0],l[3])]);break;case 2:o.push([t(n,r,l[1],l[2]),t(n,r,l[1],l[0]),t(n,r,l[1],l[3])]);break;case 3:o.push([t(n,r,l[1],l[2]),t(n,r,l[0],l[2]),t(n,r,l[0],l[3])],[t(n,r,l[1],l[3]),t(n,r,l[1],l[2]),t(n,r,l[0],l[3])]);break;case 4:o.push([t(n,r,l[2],l[0]),t(n,r,l[2],l[1]),t(n,r,l[2],l[3])]);break;case 5:o.push([t(n,r,l[0],l[1]),t(n,r,l[2],l[1]),t(n,r,l[0],l[3])],[t(n,r,l[2],l[1]),t(n,r,l[2],l[3]),t(n,r,l[0],l[3])]);break;case 6:o.push([t(n,r,l[2],l[0]),t(n,r,l[1],l[0]),t(n,r,l[1],l[3])],[t(n,r,l[2],l[3]),t(n,r,l[2],l[0]),t(n,r,l[1],l[3])]);break;case 7:o.push([t(n,r,l[0],l[3]),t(n,r,l[1],l[3]),t(n,r,l[2],l[3])]);break;case 8:o.push([t(n,r,l[3],l[1]),t(n,r,l[3],l[0]),t(n,r,l[3],l[2])]);break;case 9:o.push([t(n,r,l[3],l[1]),t(n,r,l[0],l[1]),t(n,r,l[0],l[2])],[t(n,r,l[3],l[2]),t(n,r,l[3],l[1]),t(n,r,l[0],l[2])]);break;case 10:o.push([t(n,r,l[1],l[0]),t(n,r,l[3],l[0]),t(n,r,l[1],l[2])],[t(n,r,l[3],l[0]),t(n,r,l[3],l[2]),t(n,r,l[1],l[2])]);break;case 11:o.push([t(n,r,l[1],l[2]),t(n,r,l[0],l[2]),t(n,r,l[3],l[2])]);break;case 12:o.push([t(n,r,l[3],l[0]),t(n,r,l[2],l[0]),t(n,r,l[2],l[1])],[t(n,r,l[3],l[1]),t(n,r,l[3],l[0]),t(n,r,l[2],l[1])]);break;case 13:o.push([t(n,r,l[0],l[1]),t(n,r,l[2],l[1]),t(n,r,l[3],l[1])]);break;case 14:o.push([t(n,r,l[2],l[0]),t(n,r,l[1],l[0]),t(n,r,l[3],l[0])]);break;case 15:break}}else if(u===3){var f=(a[l[0]]<<0)+(a[l[1]]<<1)+(a[l[2]]<<2);if(f===0||f===7){continue}switch(f){case 0:break;case 1:o.push([t(n,r,l[0],l[2]),t(n,r,l[0],l[1])]);break;case 2:o.push([t(n,r,l[1],l[0]),t(n,r,l[1],l[2])]);break;case 3:o.push([t(n,r,l[0],l[2]),t(n,r,l[1],l[2])]);break;case 4:o.push([t(n,r,l[2],l[1]),t(n,r,l[2],l[0])]);break;case 5:o.push([t(n,r,l[2],l[1]),t(n,r,l[0],l[1])]);break;case 6:o.push([t(n,r,l[1],l[0]),t(n,r,l[2],l[0])]);break;case 7:break}}else if(u===2){var f=(a[l[0]]<<0)+(a[l[1]]<<1);if(f===0||f===3){continue}switch(f){case 0:break;case 1:o.push([t(n,r,l[0],l[1])]);break;case 2:o.push([t(n,r,l[1],l[0])]);break;case 3:break}}}return o}return r}];function r(e){return t[e]()}},8211:function(e,t,r){"use strict";var n;"use restrict";var a=r(2288),i=r(1731);function o(e){var t=0,r=Math.max;for(var n=0,a=e.length;n<a;++n){t=r(t,e[n].length)}return t-1}n=o;function s(e){var t=-1,r=Math.max;for(var n=0,a=e.length;n<a;++n){var i=e[n];for(var o=0,s=i.length;o<s;++o){t=r(t,i[o])}}return t+1}n=s;function l(e){var t=new Array(e.length);for(var r=0,n=e.length;r<n;++r){t[r]=e[r].slice(0)}return t}n=l;function u(e,t){var r=e.length,n=e.length-t.length,a=Math.min;if(n){return n}switch(r){case 0:return 0;case 1:return e[0]-t[0];case 2:var i=e[0]+e[1]-t[0]-t[1];if(i){return i}return a(e[0],e[1])-a(t[0],t[1]);case 3:var o=e[0]+e[1],s=t[0]+t[1];i=o+e[2]-(s+t[2]);if(i){return i}var l=a(e[0],e[1]),u=a(t[0],t[1]),i=a(l,e[2])-a(u,t[2]);if(i){return i}return a(l+e[2],o)-a(u+t[2],s);default:var f=e.slice(0);f.sort();var c=t.slice(0);c.sort();for(var v=0;v<r;++v){n=f[v]-c[v];if(n){return n}}return 0}}t.H=u;function f(e,t){return u(e[0],t[0])}function c(e,t){if(t){var r=e.length;var n=new Array(r);for(var a=0;a<r;++a){n[a]=[e[a],t[a]]}n.sort(f);for(var a=0;a<r;++a){e[a]=n[a][0];t[a]=n[a][1]}return e}else{e.sort(u);return e}}n=c;function v(e){if(e.length===0){return[]}var t=1,r=e.length;for(var n=1;n<r;++n){var a=e[n];if(u(a,e[n-1])){if(n===t){t++;continue}e[t++]=a}}e.length=t;return e}n=v;function h(e,t){var r=0,n=e.length-1,a=-1;while(r<=n){var i=r+n>>1,o=u(e[i],t);if(o<=0){if(o===0){a=i}r=i+1}else if(o>0){n=i-1}}return a}n=h;function p(e,t){var r=new Array(e.length);for(var n=0,i=r.length;n<i;++n){r[n]=[]}var o=[];for(var n=0,s=t.length;n<s;++n){var l=t[n];var f=l.length;for(var c=1,v=1<<f;c<v;++c){o.length=a.popCount(c);var p=0;for(var d=0;d<f;++d){if(c&1<<d){o[p++]=l[d]}}var g=h(e,o);if(g<0){continue}while(true){r[g++].push(n);if(g>=e.length||u(e[g],o)!==0){break}}}}return r}n=p;function d(e,t){if(!t){return p(v(y(e,0)),e,0)}var r=new Array(t);for(var n=0;n<t;++n){r[n]=[]}for(var n=0,a=e.length;n<a;++n){var i=e[n];for(var o=0,s=i.length;o<s;++o){r[i[o]].push(n)}}return r}n=d;function g(e){var t=[];for(var r=0,n=e.length;r<n;++r){var a=e[r],i=a.length|0;for(var o=1,s=1<<i;o<s;++o){var l=[];for(var u=0;u<i;++u){if(o>>>u&1){l.push(a[u])}}t.push(l)}}return c(t)}n=g;function y(e,t){if(t<0){return[]}var r=[],n=(1<<t+1)-1;for(var i=0;i<e.length;++i){var o=e[i];for(var s=n;s<1<<o.length;s=a.nextCombination(s)){var l=new Array(t+1),u=0;for(var f=0;f<o.length;++f){if(s&1<<f){l[u++]=o[f]}}r.push(l)}}return c(r)}n=y;function m(e){var t=[];for(var r=0,n=e.length;r<n;++r){var a=e[r];for(var i=0,o=a.length;i<o;++i){var s=new Array(a.length-1);for(var l=0,u=0;l<o;++l){if(l!==i){s[u++]=a[l]}}t.push(s)}}return c(t)}n=m;function x(e,t){var r=new i(t);for(var n=0;n<e.length;++n){var a=e[n];for(var o=0;o<a.length;++o){for(var s=o+1;s<a.length;++s){r.link(a[o],a[s])}}}var l=[],u=r.ranks;for(var n=0;n<u.length;++n){u[n]=-1}for(var n=0;n<e.length;++n){var f=r.find(e[n][0]);if(u[f]<0){u[f]=l.length;l.push([e[n].slice(0)])}else{l[u[f]].push(e[n].slice(0))}}return l}function b(e){var t=v(c(y(e,0))),r=new i(t.length);for(var n=0;n<e.length;++n){var a=e[n];for(var o=0;o<a.length;++o){var s=h(t,[a[o]]);for(var l=o+1;l<a.length;++l){r.link(s,h(t,[a[l]]))}}}var u=[],f=r.ranks;for(var n=0;n<f.length;++n){f[n]=-1}for(var n=0;n<e.length;++n){var p=r.find(h(t,[e[n][0]]));if(f[p]<0){f[p]=u.length;u.push([e[n].slice(0)])}else{u[f[p]].push(e[n].slice(0))}}return u}function _(e,t){if(t){return x(e,t)}return b(e)}n=_},9392:function(e,t){"use strict";"use restrict";var r=32;t.INT_BITS=r;t.INT_MAX=2147483647;t.INT_MIN=-1<<r-1;t.sign=function(e){return(e>0)-(e<0)};t.abs=function(e){var t=e>>r-1;return(e^t)-t};t.min=function(e,t){return t^(e^t)&-(e<t)};t.max=function(e,t){return e^(e^t)&-(e<t)};t.isPow2=function(e){return!(e&e-1)&&!!e};t.log2=function(e){var t,r;t=(e>65535)<<4;e>>>=t;r=(e>255)<<3;e>>>=r;t|=r;r=(e>15)<<2;e>>>=r;t|=r;r=(e>3)<<1;e>>>=r;t|=r;return t|e>>1};t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0};t.popCount=function(e){e=e-(e>>>1&1431655765);e=(e&858993459)+(e>>>2&858993459);return(e+(e>>>4)&252645135)*16843009>>>24};function n(e){var t=32;e&=-e;if(e)t--;if(e&65535)t-=16;if(e&16711935)t-=8;if(e&252645135)t-=4;if(e&858993459)t-=2;if(e&1431655765)t-=1;return t}t.countTrailingZeros=n;t.nextPow2=function(e){e+=e===0;--e;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;return e+1};t.prevPow2=function(e){e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;return e-(e>>>1)};t.parity=function(e){e^=e>>>16;e^=e>>>8;e^=e>>>4;e&=15;return 27030>>>e&1};var a=new Array(256);(function(e){for(var t=0;t<256;++t){var r=t,n=t,a=7;for(r>>>=1;r;r>>>=1){n<<=1;n|=r&1;--a}e[t]=n<<a&255}})(a);t.reverse=function(e){return a[e&255]<<24|a[e>>>8&255]<<16|a[e>>>16&255]<<8|a[e>>>24&255]};t.interleave2=function(e,t){e&=65535;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;e=(e|e<<1)&1431655765;t&=65535;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;t=(t|t<<1)&1431655765;return e|t<<1};t.deinterleave2=function(e,t){e=e>>>t&1431655765;e=(e|e>>>1)&858993459;e=(e|e>>>2)&252645135;e=(e|e>>>4)&16711935;e=(e|e>>>16)&65535;return e<<16>>16};t.interleave3=function(e,t,r){e&=1023;e=(e|e<<16)&4278190335;e=(e|e<<8)&251719695;e=(e|e<<4)&3272356035;e=(e|e<<2)&1227133513;t&=1023;t=(t|t<<16)&4278190335;t=(t|t<<8)&251719695;t=(t|t<<4)&3272356035;t=(t|t<<2)&1227133513;e|=t<<1;r&=1023;r=(r|r<<16)&4278190335;r=(r|r<<8)&251719695;r=(r|r<<4)&3272356035;r=(r|r<<2)&1227133513;return e|r<<2};t.deinterleave3=function(e,t){e=e>>>t&1227133513;e=(e|e>>>2)&3272356035;e=(e|e>>>4)&251719695;e=(e|e>>>8)&4278190335;e=(e|e>>>16)&1023;return e<<22>>22};t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},6656:function(e,t,r){"use strict";"use restrict";var n=r(9392),a=r(9521);function i(e){var t=0,r=Math.max;for(var n=0,a=e.length;n<a;++n){t=r(t,e[n].length)}return t-1}t.dimension=i;function o(e){var t=-1,r=Math.max;for(var n=0,a=e.length;n<a;++n){var i=e[n];for(var o=0,s=i.length;o<s;++o){t=r(t,i[o])}}return t+1}t.countVertices=o;function s(e){var t=new Array(e.length);for(var r=0,n=e.length;r<n;++r){t[r]=e[r].slice(0)}return t}t.cloneCells=s;function l(e,t){var r=e.length,n=e.length-t.length,a=Math.min;if(n){return n}switch(r){case 0:return 0;case 1:return e[0]-t[0];case 2:var i=e[0]+e[1]-t[0]-t[1];if(i){return i}return a(e[0],e[1])-a(t[0],t[1]);case 3:var o=e[0]+e[1],s=t[0]+t[1];i=o+e[2]-(s+t[2]);if(i){return i}var l=a(e[0],e[1]),u=a(t[0],t[1]),i=a(l,e[2])-a(u,t[2]);if(i){return i}return a(l+e[2],o)-a(u+t[2],s);default:var f=e.slice(0);f.sort();var c=t.slice(0);c.sort();for(var v=0;v<r;++v){n=f[v]-c[v];if(n){return n}}return 0}}t.compareCells=l;function u(e,t){return l(e[0],t[0])}function f(e,t){if(t){var r=e.length;var n=new Array(r);for(var a=0;a<r;++a){n[a]=[e[a],t[a]]}n.sort(u);for(var a=0;a<r;++a){e[a]=n[a][0];t[a]=n[a][1]}return e}else{e.sort(l);return e}}t.normalize=f;function c(e){if(e.length===0){return[]}var t=1,r=e.length;for(var n=1;n<r;++n){var a=e[n];if(l(a,e[n-1])){if(n===t){t++;continue}e[t++]=a}}e.length=t;return e}t.unique=c;function v(e,t){var r=0,n=e.length-1,a=-1;while(r<=n){var i=r+n>>1,o=l(e[i],t);if(o<=0){if(o===0){a=i}r=i+1}else if(o>0){n=i-1}}return a}t.findCell=v;function h(e,t){var r=new Array(e.length);for(var a=0,i=r.length;a<i;++a){r[a]=[]}var o=[];for(var a=0,s=t.length;a<s;++a){var u=t[a];var f=u.length;for(var c=1,h=1<<f;c<h;++c){o.length=n.popCount(c);var p=0;for(var d=0;d<f;++d){if(c&1<<d){o[p++]=u[d]}}var g=v(e,o);if(g<0){continue}while(true){r[g++].push(a);if(g>=e.length||l(e[g],o)!==0){break}}}}return r}t.incidence=h;function p(e,t){if(!t){return h(c(g(e,0)),e,0)}var r=new Array(t);for(var n=0;n<t;++n){r[n]=[]}for(var n=0,a=e.length;n<a;++n){var i=e[n];for(var o=0,s=i.length;o<s;++o){r[i[o]].push(n)}}return r}t.dual=p;function d(e){var t=[];for(var r=0,n=e.length;r<n;++r){var a=e[r],i=a.length|0;for(var o=1,s=1<<i;o<s;++o){var l=[];for(var u=0;u<i;++u){if(o>>>u&1){l.push(a[u])}}t.push(l)}}return f(t)}t.explode=d;function g(e,t){if(t<0){return[]}var r=[],a=(1<<t+1)-1;for(var i=0;i<e.length;++i){var o=e[i];for(var s=a;s<1<<o.length;s=n.nextCombination(s)){var l=new Array(t+1),u=0;for(var c=0;c<o.length;++c){if(s&1<<c){l[u++]=o[c]}}r.push(l)}}return f(r)}t.skeleton=g;function y(e){var t=[];for(var r=0,n=e.length;r<n;++r){var a=e[r];for(var i=0,o=a.length;i<o;++i){var s=new Array(a.length-1);for(var l=0,u=0;l<o;++l){if(l!==i){s[u++]=a[l]}}t.push(s)}}return f(t)}t.boundary=y;function m(e,t){var r=new a(t);for(var n=0;n<e.length;++n){var i=e[n];for(var o=0;o<i.length;++o){for(var s=o+1;s<i.length;++s){r.link(i[o],i[s])}}}var l=[],u=r.ranks;for(var n=0;n<u.length;++n){u[n]=-1}for(var n=0;n<e.length;++n){var f=r.find(e[n][0]);if(u[f]<0){u[f]=l.length;l.push([e[n].slice(0)])}else{l[u[f]].push(e[n].slice(0))}}return l}function x(e){var t=c(f(g(e,0))),r=new a(t.length);for(var n=0;n<e.length;++n){var i=e[n];for(var o=0;o<i.length;++o){var s=v(t,[i[o]]);for(var l=o+1;l<i.length;++l){r.link(s,v(t,[i[l]]))}}}var u=[],h=r.ranks;for(var n=0;n<h.length;++n){h[n]=-1}for(var n=0;n<e.length;++n){var p=r.find(v(t,[e[n][0]]));if(h[p]<0){h[p]=u.length;u.push([e[n].slice(0)])}else{u[h[p]].push(e[n].slice(0))}}return u}function b(e,t){if(t){return m(e,t)}return x(e)}t.connectedComponents=b},9521:function(e){"use strict";"use restrict";e.exports=t;function t(e){this.roots=new Array(e);this.ranks=new Array(e);for(var t=0;t<e;++t){this.roots[t]=t;this.ranks[t]=0}}t.prototype.length=function(){return this.roots.length};t.prototype.makeSet=function(){var e=this.roots.length;this.roots.push(e);this.ranks.push(0);return e};t.prototype.find=function(e){var t=this.roots;while(t[e]!==e){var r=t[e];t[e]=t[r];e=r}return e};t.prototype.link=function(e,t){var r=this.find(e),n=this.find(t);if(r===n){return}var a=this.ranks,i=this.roots,o=a[r],s=a[n];if(o<s){i[r]=n}else if(s<o){i[n]=r}else{i[n]=r;++a[r]}}},8243:function(e,t,r){"use strict";e.exports=o;var n=r(417);var a=r(6656);function i(e,t,r){var a=Math.abs(n(e,t,r));var i=Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2));return a/i}function o(e,t,r){var n=t.length;var o=e.length;var s=new Array(n);var l=new Array(n);var u=new Array(n);var f=new Array(n);for(var c=0;c<n;++c){s[c]=l[c]=-1;u[c]=Infinity;f[c]=false}for(var c=0;c<o;++c){var v=e[c];if(v.length!==2){throw new Error("Input must be a graph")}var h=v[1];var p=v[0];if(l[p]!==-1){l[p]=-2}else{l[p]=h}if(s[h]!==-1){s[h]=-2}else{s[h]=p}}function d(e){if(f[e]){return Infinity}var r=s[e];var n=l[e];if(r<0||n<0){return Infinity}else{return i(t[e],t[r],t[n])}}function g(e,t){var r=k[e];var n=k[t];k[e]=n;k[t]=r;A[r]=t;A[n]=e}function y(e){return u[k[e]]}function m(e){if(e&1){return e-1>>1}return(e>>1)-1}function x(e){var t=y(e);while(true){var r=t;var n=2*e+1;var a=2*(e+1);var i=e;if(n<S){var o=y(n);if(o<r){i=n;r=o}}if(a<S){var s=y(a);if(s<r){i=a}}if(i===e){return e}g(e,i);e=i}}function b(e){var t=y(e);while(e>0){var r=m(e);if(r>=0){var n=y(r);if(t<n){g(e,r);e=r;continue}}return e}}function _(){if(S>0){var e=k[0];g(0,S-1);S-=1;x(0);return e}return-1}function w(e,t){var r=k[e];if(u[r]===t){return e}u[r]=-Infinity;b(e);_();u[r]=t;S+=1;return b(S-1)}function T(e){if(f[e]){return}f[e]=true;var t=s[e];var r=l[e];if(s[r]>=0){s[r]=t}if(l[t]>=0){l[t]=r}if(A[t]>=0){w(A[t],d(t))}if(A[r]>=0){w(A[r],d(r))}}var k=[];var A=new Array(n);for(var c=0;c<n;++c){var M=u[c]=d(c);if(M<Infinity){A[c]=k.length;k.push(c)}else{A[c]=-1}}var S=k.length;for(var c=S>>1;c>=0;--c){x(c)}while(true){var E=_();if(E<0||u[E]>r){break}T(E)}var L=[];for(var c=0;c<n;++c){if(!f[c]){A[c]=L.length;L.push(t[c].slice())}}var C=L.length;function I(e,t){if(e[t]<0){return t}var r=t;var n=t;do{var a=e[n];if(!f[n]||a<0||a===n){break}n=a;a=e[n];if(!f[n]||a<0||a===n){break}n=a;r=e[r]}while(r!==n);for(var i=t;i!==n;i=e[i]){e[i]=n}return n}var P=[];e.forEach((function(e){var t=I(s,e[0]);var r=I(l,e[1]);if(t>=0&&r>=0&&t!==r){var n=A[t];var a=A[r];if(n!==a){P.push([n,a])}}}));a.unique(a.normalize(P));return{positions:L,edges:P}}},6638:function(e,t,r){"use strict";e.exports=i;var n=r(417);function a(e,t){var r,a;if(t[0][0]<t[1][0]){r=t[0];a=t[1]}else if(t[0][0]>t[1][0]){r=t[1];a=t[0]}else{var i=Math.min(e[0][1],e[1][1]);var o=Math.max(e[0][1],e[1][1]);var s=Math.min(t[0][1],t[1][1]);var l=Math.max(t[0][1],t[1][1]);if(o<s){return o-s}if(i>l){return i-l}return o-l}var u,f;if(e[0][1]<e[1][1]){u=e[0];f=e[1]}else{u=e[1];f=e[0]}var c=n(a,r,u);if(c){return c}c=n(a,r,f);if(c){return c}return f-a}function i(e,t){var r,i;if(t[0][0]<t[1][0]){r=t[0];i=t[1]}else if(t[0][0]>t[1][0]){r=t[1];i=t[0]}else{return a(t,e)}var o,s;if(e[0][0]<e[1][0]){o=e[0];s=e[1]}else if(e[0][0]>e[1][0]){o=e[1];s=e[0]}else{return-a(e,t)}var l=n(r,i,s);var u=n(r,i,o);if(l<0){if(u<=0){return l}}else if(l>0){if(u>=0){return l}}else if(u){return u}l=n(s,o,i);u=n(s,o,r);if(l<0){if(u<=0){return l}}else if(l>0){if(u>=0){return l}}else if(u){return u}return i[0]-s[0]}},4385:function(e,t,r){"use strict";e.exports=h;var n=r(5070);var a=r(7080);var i=r(417);var o=r(6638);function s(e,t,r){this.slabs=e;this.coordinates=t;this.horizontal=r}var l=s.prototype;function u(e,t){return e.y-t}function f(e,t){var r=null;while(e){var n=e.key;var a,o;if(n[0][0]<n[1][0]){a=n[0];o=n[1]}else{a=n[1];o=n[0]}var s=i(a,o,t);if(s<0){e=e.left}else if(s>0){if(t[0]!==n[1][0]){r=e;e=e.right}else{var l=f(e.right,t);if(l){return l}e=e.left}}else{if(t[0]!==n[1][0]){return e}else{var l=f(e.right,t);if(l){return l}e=e.left}}}return r}l.castUp=function(e){var t=n.le(this.coordinates,e[0]);if(t<0){return-1}var r=this.slabs[t];var a=f(this.slabs[t],e);var s=-1;if(a){s=a.value}if(this.coordinates[t]===e[0]){var l=null;if(a){l=a.key}if(t>0){var c=f(this.slabs[t-1],e);if(c){if(l){if(o(c.key,l)>0){l=c.key;s=c.value}}else{s=c.value;l=c.key}}}var v=this.horizontal[t];if(v.length>0){var h=n.ge(v,e[1],u);if(h<v.length){var p=v[h];if(e[1]===p.y){if(p.closed){return p.index}else{while(h<v.length-1&&v[h+1].y===e[1]){h=h+1;p=v[h];if(p.closed){return p.index}}if(p.y===e[1]&&!p.start){h=h+1;if(h>=v.length){return s}p=v[h]}}}if(p.start){if(l){var d=i(l[0],l[1],[e[0],p.y]);if(l[0][0]>l[1][0]){d=-d}if(d>0){s=p.index}}else{s=p.index}}else if(p.y!==e[1]){s=p.index}}}}return s};function c(e,t,r,n){this.y=e;this.index=t;this.start=r;this.closed=n}function v(e,t,r,n){this.x=e;this.segment=t;this.create=r;this.index=n}function h(e){var t=e.length;var r=2*t;var n=new Array(r);for(var i=0;i<t;++i){var l=e[i];var u=l[0][0]<l[1][0];n[2*i]=new v(l[0][0],l,u,i);n[2*i+1]=new v(l[1][0],l,!u,i)}n.sort((function(e,t){var r=e.x-t.x;if(r){return r}r=e.create-t.create;if(r){return r}return Math.min(e.segment[0][1],e.segment[1][1])-Math.min(t.segment[0][1],t.segment[1][1])}));var f=a(o);var h=[];var p=[];var d=[];var g=-Infinity;for(var i=0;i<r;){var y=n[i].x;var m=[];while(i<r){var x=n[i];if(x.x!==y){break}i+=1;if(x.segment[0][0]===x.x&&x.segment[1][0]===x.x){if(x.create){if(x.segment[0][1]<x.segment[1][1]){m.push(new c(x.segment[0][1],x.index,true,true));m.push(new c(x.segment[1][1],x.index,false,false))}else{m.push(new c(x.segment[1][1],x.index,true,false));m.push(new c(x.segment[0][1],x.index,false,true))}}}else{if(x.create){f=f.insert(x.segment,x.index)}else{f=f.remove(x.segment)}}}h.push(f.root);p.push(y);d.push(m)}return new s(h,p,d)}},4670:function(e,t,r){"use strict";var n=r(9130);var a=r(9662);e.exports=s;e.exports.positive=l;e.exports.negative=u;function i(e,t){var r=a(n(e,t),[t[t.length-1]]);return r[r.length-1]}function o(e,t,r,n){var a=n-t;var i=-t/a;if(i<0){i=0}else if(i>1){i=1}var o=1-i;var s=e.length;var l=new Array(s);for(var u=0;u<s;++u){l[u]=i*e[u]+o*r[u]}return l}function s(e,t){var r=[];var n=[];var a=i(e[e.length-1],t);for(var s=e[e.length-1],l=e[0],u=0;u<e.length;++u,s=l){l=e[u];var f=i(l,t);if(a<0&&f>0||a>0&&f<0){var c=o(s,f,l,a);r.push(c);n.push(c.slice())}if(f<0){n.push(l.slice())}else if(f>0){r.push(l.slice())}else{r.push(l.slice());n.push(l.slice())}a=f}return{positive:r,negative:n}}function l(e,t){var r=[];var n=i(e[e.length-1],t);for(var a=e[e.length-1],s=e[0],l=0;l<e.length;++l,a=s){s=e[l];var u=i(s,t);if(n<0&&u>0||n>0&&u<0){r.push(o(a,u,s,n))}if(u>=0){r.push(s.slice())}n=u}return r}function u(e,t){var r=[];var n=i(e[e.length-1],t);for(var a=e[e.length-1],s=e[0],l=0;l<e.length;++l,a=s){s=e[l];var u=i(s,t);if(n<0&&u>0||n>0&&u<0){r.push(o(a,u,s,n))}if(u<=0){r.push(s.slice())}n=u}return r}},8974:function(e,t,r){var n;!function(){"use strict";var a={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function i(e){return s(u(e),arguments)}function o(e,t){return i.apply(null,[e].concat(t||[]))}function s(e,t){var r=1,n=e.length,o,s="",l,u,f,c,v,h,p,d;for(l=0;l<n;l++){if(typeof e[l]==="string"){s+=e[l]}else if(typeof e[l]==="object"){f=e[l];if(f.keys){o=t[r];for(u=0;u<f.keys.length;u++){if(o==undefined){throw new Error(i('[sprintf] Cannot access property "%s" of undefined value "%s"',f.keys[u],f.keys[u-1]))}o=o[f.keys[u]]}}else if(f.param_no){o=t[f.param_no]}else{o=t[r++]}if(a.not_type.test(f.type)&&a.not_primitive.test(f.type)&&o instanceof Function){o=o()}if(a.numeric_arg.test(f.type)&&typeof o!=="number"&&isNaN(o)){throw new TypeError(i("[sprintf] expecting number but found %T",o))}if(a.number.test(f.type)){p=o>=0}switch(f.type){case"b":o=parseInt(o,10).toString(2);break;case"c":o=String.fromCharCode(parseInt(o,10));break;case"d":case"i":o=parseInt(o,10);break;case"j":o=JSON.stringify(o,null,f.width?parseInt(f.width):0);break;case"e":o=f.precision?parseFloat(o).toExponential(f.precision):parseFloat(o).toExponential();break;case"f":o=f.precision?parseFloat(o).toFixed(f.precision):parseFloat(o);break;case"g":o=f.precision?String(Number(o.toPrecision(f.precision))):parseFloat(o);break;case"o":o=(parseInt(o,10)>>>0).toString(8);break;case"s":o=String(o);o=f.precision?o.substring(0,f.precision):o;break;case"t":o=String(!!o);o=f.precision?o.substring(0,f.precision):o;break;case"T":o=Object.prototype.toString.call(o).slice(8,-1).toLowerCase();o=f.precision?o.substring(0,f.precision):o;break;case"u":o=parseInt(o,10)>>>0;break;case"v":o=o.valueOf();o=f.precision?o.substring(0,f.precision):o;break;case"x":o=(parseInt(o,10)>>>0).toString(16);break;case"X":o=(parseInt(o,10)>>>0).toString(16).toUpperCase();break}if(a.json.test(f.type)){s+=o}else{if(a.number.test(f.type)&&(!p||f.sign)){d=p?"+":"-";o=o.toString().replace(a.sign,"")}else{d=""}v=f.pad_char?f.pad_char==="0"?"0":f.pad_char.charAt(1):" ";h=f.width-(d+o).length;c=f.width?h>0?v.repeat(h):"":"";s+=f.align?d+o+c:v==="0"?d+c+o:c+d+o}}}return s}var l=Object.create(null);function u(e){if(l[e]){return l[e]}var t=e,r,n=[],i=0;while(t){if((r=a.text.exec(t))!==null){n.push(r[0])}else if((r=a.modulo.exec(t))!==null){n.push("%")}else if((r=a.placeholder.exec(t))!==null){if(r[2]){i|=1;var o=[],s=r[2],u=[];if((u=a.key.exec(s))!==null){o.push(u[1]);while((s=s.substring(u[0].length))!==""){if((u=a.key_access.exec(s))!==null){o.push(u[1])}else if((u=a.index_access.exec(s))!==null){o.push(u[1])}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}}}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}r[2]=o}else{i|=2}if(i===3){throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported")}n.push({placeholder:r[0],param_no:r[1],keys:r[2],sign:r[3],pad_char:r[4],align:r[5],width:r[6],precision:r[7],type:r[8]})}else{throw new SyntaxError("[sprintf] unexpected placeholder")}t=t.substring(r[0].length)}return l[e]=n}if(true){t.sprintf=i;t.vsprintf=o}if(typeof window!=="undefined"){window["sprintf"]=i;window["vsprintf"]=o;if(true){!(n=function(){return{sprintf:i,vsprintf:o}}.call(t,r,t,e),n!==undefined&&(e.exports=n))}}}()},4162:function(e,t,r){"use strict";e.exports=u;var n=r(9284);var a=r(9584);var i={"2d":function(e,t,r){var n=e({order:t,scalarArguments:3,getters:r==="generic"?[0]:undefined,phase:function e(t,r,n,a){return t>a|0},vertex:function e(t,r,n,a,i,o,s,l,u,f,c,v,h){var p=(s<<0)+(l<<1)+(u<<2)+(f<<3)|0;if(p===0||p===15){return}switch(p){case 0:c.push([t-.5,r-.5]);break;case 1:c.push([t-.25-.25*(a+n-2*h)/(n-a),r-.25-.25*(i+n-2*h)/(n-i)]);break;case 2:c.push([t-.75-.25*(-a-n+2*h)/(a-n),r-.25-.25*(o+a-2*h)/(a-o)]);break;case 3:c.push([t-.5,r-.5-.5*(i+n+o+a-4*h)/(n-i+a-o)]);break;case 4:c.push([t-.25-.25*(o+i-2*h)/(i-o),r-.75-.25*(-i-n+2*h)/(i-n)]);break;case 5:c.push([t-.5-.5*(a+n+o+i-4*h)/(n-a+i-o),r-.5]);break;case 6:c.push([t-.5-.25*(-a-n+o+i)/(a-n+i-o),r-.5-.25*(-i-n+o+a)/(i-n+a-o)]);break;case 7:c.push([t-.75-.25*(o+i-2*h)/(i-o),r-.75-.25*(o+a-2*h)/(a-o)]);break;case 8:c.push([t-.75-.25*(-o-i+2*h)/(o-i),r-.75-.25*(-o-a+2*h)/(o-a)]);break;case 9:c.push([t-.5-.25*(a+n+-o-i)/(n-a+o-i),r-.5-.25*(i+n+-o-a)/(n-i+o-a)]);break;case 10:c.push([t-.5-.5*(-a-n+-o-i+4*h)/(a-n+o-i),r-.5]);break;case 11:c.push([t-.25-.25*(-o-i+2*h)/(o-i),r-.75-.25*(i+n-2*h)/(n-i)]);break;case 12:c.push([t-.5,r-.5-.5*(-i-n+-o-a+4*h)/(i-n+o-a)]);break;case 13:c.push([t-.75-.25*(a+n-2*h)/(n-a),r-.25-.25*(-o-a+2*h)/(o-a)]);break;case 14:c.push([t-.25-.25*(-a-n+2*h)/(a-n),r-.25-.25*(-i-n+2*h)/(i-n)]);break;case 15:c.push([t-.5,r-.5]);break}},cell:function e(t,r,n,a,i,o,s,l,u){if(i){l.push([t,r])}else{l.push([r,t])}}});return function(e,t){var r=[],a=[];n(e,r,a,t);return{positions:r,cells:a}}}};function o(e,t){var r=e.length+"d";var a=i[r];if(a)return a(n,e,t)}function s(e,t){var r=a(e,t);var n=r.length;var i=new Array(n);var o=new Array(n);for(var s=0;s<n;++s){i[s]=[r[s]];o[s]=[s]}return{positions:i,cells:o}}var l={};function u(e,t){if(e.dimension<=0){return{positions:[],cells:[]}}else if(e.dimension===1){return s(e,t)}var r=e.order.join()+"-"+e.dtype;var n=l[r];var t=+t||0;if(!n){n=l[r]=o(e.order,e.dtype)}return n(e,t)}},6946:function(e,t,r){"use strict";e.exports=l;var a=r(875);var i=window||n.global||{};var o=i.__TEXT_CACHE||{};i.__TEXT_CACHE={};function s(e){var t=e.cells;var r=e.positions;var n=new Float32Array(t.length*6);var a=0;var i=0;for(var o=0;o<t.length;++o){var s=t[o];for(var l=0;l<3;++l){var u=r[s[l]];n[a++]=u[0];n[a++]=u[1]+1.4;i=Math.max(u[0],i)}}return{data:n,shape:i}}function l(e,t,r){var r=r||{};var n=o[e];if(!n){n=o[e]={" ":{data:new Float32Array(0),shape:.2}}}var i=n[t];if(!i){if(t.length<=1||!/\d/.test(t)){i=n[t]=s(a(t,{triangles:true,font:e,textAlign:r.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:true,bolds:true,italics:true,subscripts:true,superscripts:true}}))}else{var u=t.split(/(\d|\s)/);var f=new Array(u.length);var c=0;var v=0;for(var h=0;h<u.length;++h){f[h]=l(e,u[h]);c+=f[h].data.length;v+=f[h].shape;if(h>0){v+=.02}}var p=new Float32Array(c);var d=0;var g=-.5*v;for(var h=0;h<f.length;++h){var y=f[h].data;for(var m=0;m<y.length;m+=2){p[d++]=y[m]+g;p[d++]=y[m+1]}g+=f[h].shape+.02}i=n[t]={data:p,shape:v}}}return i}},14:function(e,t,r){"use strict";var n=r(4405);e.exports=s;var a=96;function i(e,t){var r=n(getComputedStyle(e).getPropertyValue(t));return r[0]*s(r[1],e)}function o(e,t){var r=document.createElement("div");r.style["font-size"]="128"+e;t.appendChild(r);var n=i(r,"font-size")/128;t.removeChild(r);return n}function s(e,t){t=t||document.body;e=(e||"px").trim().toLowerCase();if(t===window||t===document){t=document.body}switch(e){case"%":return t.clientHeight/100;case"ch":case"ex":return o(e,t);case"em":return i(t,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return a;case"cm":return a/2.54;case"mm":return a/25.4;case"pt":return a/72;case"pc":return a/6}return 1}},3440:function(e,t,r){"use strict";e.exports=d;var n=r(8444);var a=r(7437);var i=r(4422);var o=r(903);var s=r(899);var l=r(9305);function u(e,t,r){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(r,2))}function f(e){return Math.min(1,Math.max(-1,e))}function c(e){var t=Math.abs(e[0]);var r=Math.abs(e[1]);var n=Math.abs(e[2]);var a=[0,0,0];if(t>Math.max(r,n)){a[2]=1}else if(r>Math.max(t,n)){a[0]=1}else{a[1]=1}var i=0;var o=0;for(var l=0;l<3;++l){i+=e[l]*e[l];o+=a[l]*e[l]}for(var l=0;l<3;++l){a[l]-=o/i*e[l]}s(a,a);return a}function v(e,t,r,a,i,o,s,l){this.center=n(r);this.up=n(a);this.right=n(i);this.radius=n([o]);this.angle=n([s,l]);this.angle.bounds=[[-Infinity,-Math.PI/2],[Infinity,Math.PI/2]];this.setDistanceLimits(e,t);this.computedCenter=this.center.curve(0);this.computedUp=this.up.curve(0);this.computedRight=this.right.curve(0);this.computedRadius=this.radius.curve(0);this.computedAngle=this.angle.curve(0);this.computedToward=[0,0,0];this.computedEye=[0,0,0];this.computedMatrix=new Array(16);for(var u=0;u<16;++u){this.computedMatrix[u]=.5}this.recalcMatrix(0)}var h=v.prototype;h.setDistanceLimits=function(e,t){if(e>0){e=Math.log(e)}else{e=-Infinity}if(t>0){t=Math.log(t)}else{t=Infinity}t=Math.max(t,e);this.radius.bounds[0][0]=e;this.radius.bounds[1][0]=t};h.getDistanceLimits=function(e){var t=this.radius.bounds[0];if(e){e[0]=Math.exp(t[0][0]);e[1]=Math.exp(t[1][0]);return e}return[Math.exp(t[0][0]),Math.exp(t[1][0])]};h.recalcMatrix=function(e){this.center.curve(e);this.up.curve(e);this.right.curve(e);this.radius.curve(e);this.angle.curve(e);var t=this.computedUp;var r=this.computedRight;var n=0;var a=0;for(var i=0;i<3;++i){a+=t[i]*r[i];n+=t[i]*t[i]}var l=Math.sqrt(n);var f=0;for(var i=0;i<3;++i){r[i]-=t[i]*a/n;f+=r[i]*r[i];t[i]/=l}var c=Math.sqrt(f);for(var i=0;i<3;++i){r[i]/=c}var v=this.computedToward;o(v,t,r);s(v,v);var h=Math.exp(this.computedRadius[0]);var p=this.computedAngle[0];var d=this.computedAngle[1];var g=Math.cos(p);var y=Math.sin(p);var m=Math.cos(d);var x=Math.sin(d);var b=this.computedCenter;var _=g*m;var w=y*m;var T=x;var k=-g*x;var A=-y*x;var M=m;var S=this.computedEye;var E=this.computedMatrix;for(var i=0;i<3;++i){var L=_*r[i]+w*v[i]+T*t[i];E[4*i+1]=k*r[i]+A*v[i]+M*t[i];E[4*i+2]=L;E[4*i+3]=0}var C=E[1];var I=E[5];var P=E[9];var O=E[2];var D=E[6];var z=E[10];var R=I*z-P*D;var F=P*O-C*z;var B=C*D-I*O;var N=u(R,F,B);R/=N;F/=N;B/=N;E[0]=R;E[4]=F;E[8]=B;for(var i=0;i<3;++i){S[i]=b[i]+E[2+4*i]*h}for(var i=0;i<3;++i){var f=0;for(var j=0;j<3;++j){f+=E[i+4*j]*S[j]}E[12+i]=-f}E[15]=1};h.getMatrix=function(e,t){this.recalcMatrix(e);var r=this.computedMatrix;if(t){for(var n=0;n<16;++n){t[n]=r[n]}return t}return r};var p=[0,0,0];h.rotate=function(e,t,r,n){this.angle.move(e,t,r);if(n){this.recalcMatrix(e);var a=this.computedMatrix;p[0]=a[2];p[1]=a[6];p[2]=a[10];var o=this.computedUp;var s=this.computedRight;var l=this.computedToward;for(var u=0;u<3;++u){a[4*u]=o[u];a[4*u+1]=s[u];a[4*u+2]=l[u]}i(a,a,n,p);for(var u=0;u<3;++u){o[u]=a[4*u];s[u]=a[4*u+1]}this.up.set(e,o[0],o[1],o[2]);this.right.set(e,s[0],s[1],s[2])}};h.pan=function(e,t,r,n){t=t||0;r=r||0;n=n||0;this.recalcMatrix(e);var a=this.computedMatrix;var i=Math.exp(this.computedRadius[0]);var o=a[1];var s=a[5];var l=a[9];var f=u(o,s,l);o/=f;s/=f;l/=f;var c=a[0];var v=a[4];var h=a[8];var p=c*o+v*s+h*l;c-=o*p;v-=s*p;h-=l*p;var d=u(c,v,h);c/=d;v/=d;h/=d;var g=c*t+o*r;var y=v*t+s*r;var m=h*t+l*r;this.center.move(e,g,y,m);var x=Math.exp(this.computedRadius[0]);x=Math.max(1e-4,x+n);this.radius.set(e,Math.log(x))};h.translate=function(e,t,r,n){this.center.move(e,t||0,r||0,n||0)};h.setMatrix=function(e,t,r,n){var i=1;if(typeof r==="number"){i=r|0}if(i<0||i>3){i=1}var o=(i+2)%3;var s=(i+1)%3;if(!t){this.recalcMatrix(e);t=this.computedMatrix}var l=t[i];var c=t[i+4];var v=t[i+8];if(!n){var h=u(l,c,v);l/=h;c/=h;v/=h}else{var p=Math.abs(l);var d=Math.abs(c);var g=Math.abs(v);var y=Math.max(p,d,g);if(p===y){l=l<0?-1:1;c=v=0}else if(g===y){v=v<0?-1:1;l=c=0}else{c=c<0?-1:1;l=v=0}}var m=t[o];var x=t[o+4];var b=t[o+8];var _=m*l+x*c+b*v;m-=l*_;x-=c*_;b-=v*_;var w=u(m,x,b);m/=w;x/=w;b/=w;var T=c*b-v*x;var k=v*m-l*b;var A=l*x-c*m;var M=u(T,k,A);T/=M;k/=M;A/=M;this.center.jump(e,G,Z,Y);this.radius.idle(e);this.up.jump(e,l,c,v);this.right.jump(e,m,x,b);var S,E;if(i===2){var L=t[1];var C=t[5];var I=t[9];var P=L*m+C*x+I*b;var O=L*T+C*k+I*A;if(F<0){S=-Math.PI/2}else{S=Math.PI/2}E=Math.atan2(O,P)}else{var D=t[2];var z=t[6];var R=t[10];var F=D*l+z*c+R*v;var B=D*m+z*x+R*b;var N=D*T+z*k+R*A;S=Math.asin(f(F));E=Math.atan2(N,B)}this.angle.jump(e,E,S);this.recalcMatrix(e);var j=t[2];var U=t[6];var V=t[10];var H=this.computedMatrix;a(H,t);var q=H[15];var G=H[12]/q;var Z=H[13]/q;var Y=H[14]/q;var W=Math.exp(this.computedRadius[0]);this.center.jump(e,G-j*W,Z-U*W,Y-V*W)};h.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())};h.idle=function(e){this.center.idle(e);this.up.idle(e);this.right.idle(e);this.radius.idle(e);this.angle.idle(e)};h.flush=function(e){this.center.flush(e);this.up.flush(e);this.right.flush(e);this.radius.flush(e);this.angle.flush(e)};h.setDistance=function(e,t){if(t>0){this.radius.set(e,Math.log(t))}};h.lookAt=function(e,t,r,n){this.recalcMatrix(e);t=t||this.computedEye;r=r||this.computedCenter;n=n||this.computedUp;var a=n[0];var i=n[1];var o=n[2];var s=u(a,i,o);if(s<1e-6){return}a/=s;i/=s;o/=s;var l=t[0]-r[0];var c=t[1]-r[1];var v=t[2]-r[2];var h=u(l,c,v);if(h<1e-6){return}l/=h;c/=h;v/=h;var p=this.computedRight;var d=p[0];var g=p[1];var y=p[2];var m=a*d+i*g+o*y;d-=m*a;g-=m*i;y-=m*o;var x=u(d,g,y);if(x<.01){d=i*v-o*c;g=o*l-a*v;y=a*c-i*l;x=u(d,g,y);if(x<1e-6){return}}d/=x;g/=x;y/=x;this.up.set(e,a,i,o);this.right.set(e,d,g,y);this.center.set(e,r[0],r[1],r[2]);this.radius.set(e,Math.log(h));var b=i*y-o*g;var _=o*d-a*y;var w=a*g-i*d;var T=u(b,_,w);b/=T;_/=T;w/=T;var k=a*l+i*c+o*v;var A=d*l+g*c+y*v;var M=b*l+_*c+w*v;var S=Math.asin(f(k));var E=Math.atan2(M,A);var L=this.angle._state;var C=L[L.length-1];var I=L[L.length-2];C=C%(2*Math.PI);var P=Math.abs(C+2*Math.PI-E);var O=Math.abs(C-E);var D=Math.abs(C-2*Math.PI-E);if(P<O){C+=2*Math.PI}if(D<O){C-=2*Math.PI}this.angle.jump(this.angle.lastT(),C,I);this.angle.set(e,E,S)};function d(e){e=e||{};var t=e.center||[0,0,0];var r=e.up||[0,1,0];var n=e.right||c(r);var a=e.radius||1;var i=e.theta||0;var f=e.phi||0;t=[].slice.call(t,0,3);r=[].slice.call(r,0,3);s(r,r);n=[].slice.call(n,0,3);s(n,n);if("eye"in e){var h=e.eye;var p=[h[0]-t[0],h[1]-t[1],h[2]-t[2]];o(n,p,r);if(u(n[0],n[1],n[2])<1e-6){n=c(r)}else{s(n,n)}a=u(p[0],p[1],p[2]);var d=l(r,p)/a;var g=l(n,p)/a;f=Math.acos(d);i=Math.acos(g)}a=Math.log(a);return new v(e.zoomMin,e.zoomMax,t,r,n,a,i,f)}},9660:function(e){"use strict";e.exports=r;var t=+(Math.pow(2,27)+1);function r(e,r,n){var a=e*r;var i=t*e;var o=i-e;var s=i-o;var l=e-s;var u=t*r;var f=u-r;var c=u-f;var v=r-c;var h=a-s*c;var p=h-l*c;var d=p-s*v;var g=l*v-d;if(n){n[0]=g;n[1]=a;return n}return[g,a]}},87:function(e){"use strict";e.exports=t;function t(e,t,r){var n=e+t;var a=n-e;var i=n-a;var o=t-a;var s=e-i;if(r){r[0]=s+o;r[1]=n;return r}return[s+o,n]}},5306:function(e,t,r){"use strict";var n=r(2288);var a=r(3094);var i=r(2146).lW;if(!r.g.__TYPEDARRAY_POOL){r.g.__TYPEDARRAY_POOL={UINT8:a([32,0]),UINT16:a([32,0]),UINT32:a([32,0]),BIGUINT64:a([32,0]),INT8:a([32,0]),INT16:a([32,0]),INT32:a([32,0]),BIGINT64:a([32,0]),FLOAT:a([32,0]),DOUBLE:a([32,0]),DATA:a([32,0]),UINT8C:a([32,0]),BUFFER:a([32,0])}}var o=typeof Uint8ClampedArray!=="undefined";var s=typeof BigUint64Array!=="undefined";var l=typeof BigInt64Array!=="undefined";var u=r.g.__TYPEDARRAY_POOL;if(!u.UINT8C){u.UINT8C=a([32,0])}if(!u.BIGUINT64){u.BIGUINT64=a([32,0])}if(!u.BIGINT64){u.BIGINT64=a([32,0])}if(!u.BUFFER){u.BUFFER=a([32,0])}var f=u.DATA,c=u.BUFFER;t.free=function e(t){if(i.isBuffer(t)){c[n.log2(t.length)].push(t)}else{if(Object.prototype.toString.call(t)!=="[object ArrayBuffer]"){t=t.buffer}if(!t){return}var r=t.length||t.byteLength;var a=n.log2(r)|0;f[a].push(t)}};function v(e){if(!e){return}var t=e.length||e.byteLength;var r=n.log2(t);f[r].push(e)}function h(e){v(e.buffer)}t.freeUint8=t.freeUint16=t.freeUint32=t.freeBigUint64=t.freeInt8=t.freeInt16=t.freeInt32=t.freeBigInt64=t.freeFloat32=t.freeFloat=t.freeFloat64=t.freeDouble=t.freeUint8Clamped=t.freeDataView=h;t.freeArrayBuffer=v;t.freeBuffer=function e(t){c[n.log2(t.length)].push(t)};t.malloc=function e(t,r){if(r===undefined||r==="arraybuffer"){return p(t)}else{switch(r){case"uint8":return d(t);case"uint16":return g(t);case"uint32":return y(t);case"int8":return m(t);case"int16":return x(t);case"int32":return b(t);case"float":case"float32":return _(t);case"double":case"float64":return w(t);case"uint8_clamped":return T(t);case"bigint64":return A(t);case"biguint64":return k(t);case"buffer":return S(t);case"data":case"dataview":return M(t);default:return null}}return null};function p(e){var e=n.nextPow2(e);var t=n.log2(e);var r=f[t];if(r.length>0){return r.pop()}return new ArrayBuffer(e)}t.mallocArrayBuffer=p;function d(e){return new Uint8Array(p(e),0,e)}t.mallocUint8=d;function g(e){return new Uint16Array(p(2*e),0,e)}t.mallocUint16=g;function y(e){return new Uint32Array(p(4*e),0,e)}t.mallocUint32=y;function m(e){return new Int8Array(p(e),0,e)}t.mallocInt8=m;function x(e){return new Int16Array(p(2*e),0,e)}t.mallocInt16=x;function b(e){return new Int32Array(p(4*e),0,e)}t.mallocInt32=b;function _(e){return new Float32Array(p(4*e),0,e)}t.mallocFloat32=t.mallocFloat=_;function w(e){return new Float64Array(p(8*e),0,e)}t.mallocFloat64=t.mallocDouble=w;function T(e){if(o){return new Uint8ClampedArray(p(e),0,e)}else{return d(e)}}t.mallocUint8Clamped=T;function k(e){if(s){return new BigUint64Array(p(8*e),0,e)}else{return null}}t.mallocBigUint64=k;function A(e){if(l){return new BigInt64Array(p(8*e),0,e)}else{return null}}t.mallocBigInt64=A;function M(e){return new DataView(p(e),0,e)}t.mallocDataView=M;function S(e){e=n.nextPow2(e);var t=n.log2(e);var r=c[t];if(r.length>0){return r.pop()}return new i(e)}t.mallocBuffer=S;t.clearCache=function e(){for(var t=0;t<32;++t){u.UINT8[t].length=0;u.UINT16[t].length=0;u.UINT32[t].length=0;u.INT8[t].length=0;u.INT16[t].length=0;u.INT32[t].length=0;u.FLOAT[t].length=0;u.DOUBLE[t].length=0;u.BIGUINT64[t].length=0;u.BIGINT64[t].length=0;u.UINT8C[t].length=0;f[t].length=0;c[t].length=0}}},1731:function(e){"use strict";"use restrict";e.exports=t;function t(e){this.roots=new Array(e);this.ranks=new Array(e);for(var t=0;t<e;++t){this.roots[t]=t;this.ranks[t]=0}}var r=t.prototype;Object.defineProperty(r,"length",{get:function(){return this.roots.length}});r.makeSet=function(){var e=this.roots.length;this.roots.push(e);this.ranks.push(0);return e};r.find=function(e){var t=e;var r=this.roots;while(r[e]!==e){e=r[e]}while(r[t]!==e){var n=r[t];r[t]=e;t=n}return e};r.link=function(e,t){var r=this.find(e),n=this.find(t);if(r===n){return}var a=this.ranks,i=this.roots,o=a[r],s=a[n];if(o<s){i[r]=n}else if(s<o){i[n]=r}else{i[n]=r;++a[r]}}},1215:function(e){"use strict";function t(e,t){var r=1,n=e.length,a=e[0],i=e[0];for(var o=1;o<n;++o){i=a;a=e[o];if(t(a,i)){if(o===r){r++;continue}e[r++]=a}}e.length=r;return e}function r(e){var t=1,r=e.length,n=e[0],a=e[0];for(var i=1;i<r;++i,a=n){a=n;n=e[i];if(n!==a){if(i===t){t++;continue}e[t++]=n}}e.length=t;return e}function n(e,n,a){if(e.length===0){return e}if(n){if(!a){e.sort(n)}return t(e,n)}if(!a){e.sort()}return r(e)}e.exports=n},875:function(e,t,r){"use strict";e.exports=o;var n=r(712);var a=null;var i=null;if(typeof document!=="undefined"){a=document.createElement("canvas");a.width=8192;a.height=1024;i=a.getContext("2d")}function o(e,t){if(typeof t!=="object"||t===null){t={}}return n(e,t.canvas||a,t.context||i,t)}},712:function(e,t,r){e.exports=A;e.exports.processPixels=k;var n=r(4162);var a=r(5050);var i=r(8243);var o=r(197);var s=r(7761);var l=r(8040);var u="b";var f="b|";var c="i";var v="i|";var h="sup";var p="+";var d="+1";var g="sub";var y="-";var m="-1";function x(e,t,r,n){var a="<"+e+">";var i="</"+e+">";var o=a.length;var s=i.length;var l=t[0]===p||t[0]===y;var u=0;var f=-s;while(u>-1){u=r.indexOf(a,u);if(u===-1)break;f=r.indexOf(i,u+o);if(f===-1)break;if(f<=u)break;for(var c=u;c<f+s;++c){if(c<u+o||c>=f){n[c]=null;r=r.substr(0,c)+" "+r.substr(c+1)}else{if(n[c]!==null){var v=n[c].indexOf(t[0]);if(v===-1){n[c]+=t}else{if(l){n[c]=n[c].substr(0,v+1)+(1+parseInt(n[c][v+1]))+n[c].substr(v+2)}}}}}var h=u+o;var d=r.substr(h,f-h);var g=d.indexOf(a);if(g!==-1)u=g;else u=f+s}return n}function b(e,t,r){var n=t.textAlign||"start";var a=t.textBaseline||"alphabetic";var i=[1<<30,1<<30];var o=[0,0];var s=e.length;for(var l=0;l<s;++l){var u=e[l];for(var f=0;f<2;++f){i[f]=Math.min(i[f],u[f])|0;o[f]=Math.max(o[f],u[f])|0}}var c=0;switch(n){case"center":c=-.5*(i[0]+o[0]);break;case"right":case"end":c=-o[0];break;case"left":case"start":c=-i[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+n+"'")}var v=0;switch(a){case"hanging":case"top":v=-i[1];break;case"middle":v=-.5*(i[1]+o[1]);break;case"alphabetic":case"ideographic":v=-3*r;break;case"bottom":v=-o[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+a+"'")}var h=1/r;if("lineHeight"in t){h*=+t.lineHeight}else if("width"in t){h=t.width/(o[0]-i[0])}else if("height"in t){h=t.height/(o[1]-i[1])}return e.map((function(e){return[h*(e[0]+c),h*(e[1]+v)]}))}function _(e,t,r,n,i,o){r=r.replace(/\n/g,"");if(o.breaklines===true){r=r.replace(/\<br\>/g,"\n")}else{r=r.replace(/\<br\>/g," ")}var s="";var l=[];for(C=0;C<r.length;++C){l[C]=s}if(o.bolds===true)l=x(u,f,r,l);if(o.italics===true)l=x(c,v,r,l);if(o.superscripts===true)l=x(h,d,r,l);if(o.subscripts===true)l=x(g,m,r,l);var b=[];var _="";for(C=0;C<r.length;++C){if(l[C]!==null){_+=r[C];b.push(l[C])}}var w=_.split("\n");var T=w.length;var k=Math.round(i*n);var A=n;var M=n*2;var S=0;var E=T*k+M;if(e.height<E){e.height=E}t.fillStyle="#000";t.fillRect(0,0,e.width,e.height);t.fillStyle="#fff";var L,C,I,P,O;var D=0;var z="";function R(){if(z!==""){var e=t.measureText(z).width;t.fillText(z,A+I,M+P);I+=e}}function F(){return""+Math.round(O)+"px "}function B(e,r){var n=""+t.font;if(o.subscripts===true){var a=e.indexOf(y);var i=r.indexOf(y);var s=a>-1?parseInt(e[1+a]):0;var l=i>-1?parseInt(r[1+i]):0;if(s!==l){n=n.replace(F(),"?px ");O*=Math.pow(.75,l-s);n=n.replace("?px ",F())}P+=.25*k*(l-s)}if(o.superscripts===true){var u=e.indexOf(p);var c=r.indexOf(p);var h=u>-1?parseInt(e[1+u]):0;var d=c>-1?parseInt(r[1+c]):0;if(h!==d){n=n.replace(F(),"?px ");O*=Math.pow(.75,d-h);n=n.replace("?px ",F())}P-=.25*k*(d-h)}if(o.bolds===true){var g=e.indexOf(f)>-1;var m=r.indexOf(f)>-1;if(!g&&m){if(x){n=n.replace("italic ","italic bold ")}else{n="bold "+n}}if(g&&!m){n=n.replace("bold ","")}}if(o.italics===true){var x=e.indexOf(v)>-1;var b=r.indexOf(v)>-1;if(!x&&b){n="italic "+n}if(x&&!b){n=n.replace("italic ","")}}t.font=n}for(L=0;L<T;++L){var N=w[L]+"\n";I=0;P=L*k;O=n;z="";for(C=0;C<N.length;++C){var j=C+D<b.length?b[C+D]:b[b.length-1];if(s===j){z+=N[C]}else{R();z=N[C];if(j!==undefined){B(s,j);s=j}}}R();D+=N.length;var U=Math.round(I+2*A)|0;if(S<U)S=U}var V=S;var H=M+k*T;var q=a(t.getImageData(0,0,V,H).data,[H,V,4]);return q.pick(-1,-1,0).transpose(1,0)}function w(e,t){var r=n(e,128);if(t){return i(r.cells,r.positions,.25)}return{edges:r.cells,positions:r.positions}}function T(e,t,r,n){var a=w(e,n);var i=b(a.positions,t,r);var u=a.edges;var f="ccw"===t.orientation;o(i,u);if(t.polygons||t.polygon||t.polyline){var c=l(u,i);var v=new Array(c.length);for(var h=0;h<c.length;++h){var p=c[h];var d=new Array(p.length);for(var g=0;g<p.length;++g){var y=p[g];var m=new Array(y.length);for(var x=0;x<y.length;++x){m[x]=i[y[x]].slice()}if(f){m.reverse()}d[g]=m}v[h]=d}return v}else if(t.triangles||t.triangulate||t.triangle){return{cells:s(i,u,{delaunay:false,exterior:false,interior:true}),positions:i}}else{return{edges:u,positions:i}}}function k(e,t,r){try{return T(e,t,r,true)}catch(n){}try{return T(e,t,r,false)}catch(n){}if(t.polygons||t.polyline||t.polygon){return[]}if(t.triangles||t.triangulate||t.triangle){return{cells:[],positions:[]}}return{edges:[],positions:[]}}function A(e,t,r,n){var a=64;var i=1.25;var o={breaklines:false,bolds:false,italics:false,subscripts:false,superscripts:false};if(n){if(n.size&&n.size>0)a=n.size;if(n.lineSpacing&&n.lineSpacing>0)i=n.lineSpacing;if(n.styletags&&n.styletags.breaklines)o.breaklines=n.styletags.breaklines?true:false;if(n.styletags&&n.styletags.bolds)o.bolds=n.styletags.bolds?true:false;if(n.styletags&&n.styletags.italics)o.italics=n.styletags.italics?true:false;if(n.styletags&&n.styletags.subscripts)o.subscripts=n.styletags.subscripts?true:false;if(n.styletags&&n.styletags.superscripts)o.superscripts=n.styletags.superscripts?true:false}r.font=[n.fontStyle,n.fontVariant,n.fontWeight,a+"px",n.font].filter((function(e){return e})).join(" ");r.textAlign="start";r.textBaseline="alphabetic";r.direction="ltr";var s=_(t,r,e,a,i,o);return k(s,n,a)}},5346:function(e){(function t(){"use strict";if(typeof ses!=="undefined"&&ses.ok&&!ses.ok()){return}function r(e){if(e.permitHostObjects___){e.permitHostObjects___(r)}}if(typeof ses!=="undefined"){ses.weakMapPermitHostObjects=r}var n=false;if(typeof WeakMap==="function"){var a=WeakMap;if(typeof navigator!=="undefined"&&/Firefox/.test(navigator.userAgent)){}else{var i=new a;var o=Object.freeze({});i.set(o,1);if(i.get(o)!==1){n=true}else{e.exports=WeakMap;return}}}var s=Object.prototype.hasOwnProperty;var l=Object.getOwnPropertyNames;var u=Object.defineProperty;var f=Object.isExtensible;var c="weakmap:";var v=c+"ident:"+Math.random()+"___";if(typeof crypto!=="undefined"&&typeof crypto.getRandomValues==="function"&&typeof ArrayBuffer==="function"&&typeof Uint8Array==="function"){var h=new ArrayBuffer(25);var p=new Uint8Array(h);crypto.getRandomValues(p);v=c+"rand:"+Array.prototype.map.call(p,(function(e){return(e%36).toString(36)})).join("")+"___"}function d(e){return!(e.substr(0,c.length)==c&&e.substr(e.length-3)==="___")}u(Object,"getOwnPropertyNames",{value:function e(t){return l(t).filter(d)}});if("getPropertyNames"in Object){var g=Object.getPropertyNames;u(Object,"getPropertyNames",{value:function e(t){return g(t).filter(d)}})}function y(e){if(e!==Object(e)){throw new TypeError("Not an object: "+e)}var t=e[v];if(t&&t.key===e){return t}if(!f(e)){return void 0}t={key:e};try{u(e,v,{value:t,writable:false,enumerable:false,configurable:false});return t}catch(r){return void 0}}(function(){var e=Object.freeze;u(Object,"freeze",{value:function t(r){y(r);return e(r)}});var t=Object.seal;u(Object,"seal",{value:function e(r){y(r);return t(r)}});var r=Object.preventExtensions;u(Object,"preventExtensions",{value:function e(t){y(t);return r(t)}})})();function m(e){e.prototype=null;return Object.freeze(e)}var x=false;function b(){if(!x&&typeof console!=="undefined"){x=true;console.warn("WeakMap should be invoked as new WeakMap(), not "+"WeakMap(). This will be an error in the future.")}}var _=0;var w=function(){if(!(this instanceof w)){b()}var e=[];var t=[];var r=_++;function n(n,a){var i;var o=y(n);if(o){return r in o?o[r]:a}else{i=e.indexOf(n);return i>=0?t[i]:a}}function a(t){var n=y(t);if(n){return r in n}else{return e.indexOf(t)>=0}}function i(n,a){var i;var o=y(n);if(o){o[r]=a}else{i=e.indexOf(n);if(i>=0){t[i]=a}else{i=e.length;t[i]=a;e[i]=n}}return this}function o(n){var a=y(n);var i,o;if(a){return r in a&&delete a[r]}else{i=e.indexOf(n);if(i<0){return false}o=e.length-1;e[i]=void 0;t[i]=t[o];e[i]=e[o];e.length=o;t.length=o;return true}}return Object.create(w.prototype,{get___:{value:m(n)},has___:{value:m(a)},set___:{value:m(i)},delete___:{value:m(o)}})};w.prototype=Object.create(Object.prototype,{get:{value:function e(t,r){return this.get___(t,r)},writable:true,configurable:true},has:{value:function e(t){return this.has___(t)},writable:true,configurable:true},set:{value:function e(t,r){return this.set___(t,r)},writable:true,configurable:true},delete:{value:function e(t){return this.delete___(t)},writable:true,configurable:true}});if(typeof a==="function"){(function(){if(n&&typeof Proxy!=="undefined"){Proxy=undefined}function t(){if(!(this instanceof w)){b()}var e=new a;var t=undefined;var i=false;function o(r,n){if(t){return e.has(r)?e.get(r):t.get___(r,n)}else{return e.get(r,n)}}function s(r){return e.has(r)||(t?t.has___(r):false)}var l;if(n){l=function(r,n){e.set(r,n);if(!e.has(r)){if(!t){t=new w}t.set(r,n)}return this}}else{l=function(r,n){if(i){try{e.set(r,n)}catch(a){if(!t){t=new w}t.set___(r,n)}}else{e.set(r,n)}return this}}function u(r){var n=!!e["delete"](r);if(t){return t.delete___(r)||n}return n}return Object.create(w.prototype,{get___:{value:m(o)},has___:{value:m(s)},set___:{value:m(l)},delete___:{value:m(u)},permitHostObjects___:{value:m((function(e){if(e===r){i=true}else{throw new Error("bogus call to permitHostObjects___")}}))}})}t.prototype=w.prototype;e.exports=t;Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:false,configurable:true,writable:true})})()}else{if(typeof Proxy!=="undefined"){Proxy=undefined}e.exports=w}})()},9222:function(e,t,r){var n=r(7178);e.exports=a;function a(){var e={};return function(t){if((typeof t!=="object"||t===null)&&typeof t!=="function"){throw new Error("Weakmap-shim: Key must be object")}var r=t.valueOf(e);return r&&r.identity===e?r:n(t,e)}}},7178:function(e){e.exports=t;function t(e,t){var r={identity:t};var n=e.valueOf;Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?n.apply(this,arguments):r},writable:true});return r}},4037:function(e,t,r){var n=r(9222);e.exports=a;function a(){var e=n();return{get:function(t,r){var n=e(t);return n.hasOwnProperty("value")?n.value:r},set:function(t,r){e(t).value=r;return this},has:function(t){return"value"in e(t)},delete:function(t){return delete e(t).value}}}},6183:function(e){"use strict";function t(){return function(e,t,r,n,a,i){var o=e[0],s=r[0],l=[0],u=s;n|=0;var f=0,c=s;for(f=0;f<o;++f){{var v=t[n]-i;var h=t[n+u]-i;if(v>=0!==h>=0){a.push(l[0]+.5+.5*(v+h)/(v-h))}}n+=c;++l[0]}}}function r(){return t()}var n=r;function a(e){var t={};return function r(n,a,i){var o=n.dtype,s=n.order,l=[o,s.join()].join(),u=t[l];if(!u){t[l]=u=e([o,s])}return u(n.shape.slice(0),n.data,n.stride,n.offset|0,a,i)}}function i(e){return a(n.bind(undefined,e))}function o(e){return i({funcName:e.funcName})}e.exports=o({funcName:"zeroCrossings"})},9584:function(e,t,r){"use strict";e.exports=a;var n=r(6183);function a(e,t){var r=[];t=+t||0;n(e.hi(e.shape[0]-1),r,t);return r}},6601:function(){}};var t={};function r(n){var a=t[n];if(a!==undefined){return a.exports}var i=t[n]={id:n,loaded:false,exports:{}};e[n].call(i.exports,i,i.exports,r);i.loaded=true;return i.exports}!function(){r.g=function(){if(typeof globalThis==="object")return globalThis;try{return this||new Function("return this")()}catch(e){if(typeof window==="object")return window}}()}();!function(){r.nmd=function(e){e.paths=[];if(!e.children)e.children=[];return e}}();var a=r(7386);return a}()}))},12856:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,o(n.key),n)}}function i(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function o(e){var t=s(e,"string");return d(t)==="symbol"?t:String(t)}function s(e,t){if(d(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if(d(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});if(t)u(e,t)}function u(e,t){u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,r){t.__proto__=r;return t};return u(e,t)}function f(e){var t=h();return function r(){var n=p(e),a;if(t){var i=p(this).constructor;a=Reflect.construct(n,arguments,i)}else{a=n.apply(this,arguments)}return c(this,a)}}function c(e,t){if(t&&(d(t)==="object"||typeof t==="function")){return t}else if(t!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return v(e)}function v(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function d(e){"@babel/helpers - typeof";return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}var g=r(95341);var y=r(95280);var m=typeof Symbol==="function"&&typeof Symbol["for"]==="function"?Symbol["for"]("nodejs.util.inspect.custom"):null;t.Buffer=w;t.SlowBuffer=O;t.INSPECT_MAX_BYTES=50;var x=2147483647;t.kMaxLength=x;w.TYPED_ARRAY_SUPPORT=b();if(!w.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function b(){try{var e=new Uint8Array(1);var t={foo:function e(){return 42}};Object.setPrototypeOf(t,Uint8Array.prototype);Object.setPrototypeOf(e,t);return e.foo()===42}catch(r){return false}}Object.defineProperty(w.prototype,"parent",{enumerable:true,get:function e(){if(!w.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(w.prototype,"offset",{enumerable:true,get:function e(){if(!w.isBuffer(this))return undefined;return this.byteOffset}});function _(e){if(e>x){throw new RangeError('The value "'+e+'" is invalid for option "size"')}var t=new Uint8Array(e);Object.setPrototypeOf(t,w.prototype);return t}function w(e,t,r){if(typeof e==="number"){if(typeof t==="string"){throw new TypeError('The "string" argument must be of type string. Received type number')}return M(e)}return T(e,t,r)}w.poolSize=8192;function T(e,t,r){if(typeof e==="string"){return S(e,t)}if(ArrayBuffer.isView(e)){return L(e)}if(e==null){throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+d(e))}if(xe(e,ArrayBuffer)||e&&xe(e.buffer,ArrayBuffer)){return C(e,t,r)}if(typeof SharedArrayBuffer!=="undefined"&&(xe(e,SharedArrayBuffer)||e&&xe(e.buffer,SharedArrayBuffer))){return C(e,t,r)}if(typeof e==="number"){throw new TypeError('The "value" argument must not be of type number. Received type number')}var n=e.valueOf&&e.valueOf();if(n!=null&&n!==e){return w.from(n,t,r)}var a=I(e);if(a)return a;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]==="function"){return w.from(e[Symbol.toPrimitive]("string"),t,r)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+d(e))}w.from=function(e,t,r){return T(e,t,r)};Object.setPrototypeOf(w.prototype,Uint8Array.prototype);Object.setPrototypeOf(w,Uint8Array);function k(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be of type number')}else if(e<0){throw new RangeError('The value "'+e+'" is invalid for option "size"')}}function A(e,t,r){k(e);if(e<=0){return _(e)}if(t!==undefined){return typeof r==="string"?_(e).fill(t,r):_(e).fill(t)}return _(e)}w.alloc=function(e,t,r){return A(e,t,r)};function M(e){k(e);return _(e<0?0:P(e)|0)}w.allocUnsafe=function(e){return M(e)};w.allocUnsafeSlow=function(e){return M(e)};function S(e,t){if(typeof t!=="string"||t===""){t="utf8"}if(!w.isEncoding(t)){throw new TypeError("Unknown encoding: "+t)}var r=D(e,t)|0;var n=_(r);var a=n.write(e,t);if(a!==r){n=n.slice(0,a)}return n}function E(e){var t=e.length<0?0:P(e.length)|0;var r=_(t);for(var n=0;n<t;n+=1){r[n]=e[n]&255}return r}function L(e){if(xe(e,Uint8Array)){var t=new Uint8Array(e);return C(t.buffer,t.byteOffset,t.byteLength)}return E(e)}function C(e,t,r){if(t<0||e.byteLength<t){throw new RangeError('"offset" is outside of buffer bounds')}if(e.byteLength<t+(r||0)){throw new RangeError('"length" is outside of buffer bounds')}var n;if(t===undefined&&r===undefined){n=new Uint8Array(e)}else if(r===undefined){n=new Uint8Array(e,t)}else{n=new Uint8Array(e,t,r)}Object.setPrototypeOf(n,w.prototype);return n}function I(e){if(w.isBuffer(e)){var t=P(e.length)|0;var r=_(t);if(r.length===0){return r}e.copy(r,0,0,t);return r}if(e.length!==undefined){if(typeof e.length!=="number"||be(e.length)){return _(0)}return E(e)}if(e.type==="Buffer"&&Array.isArray(e.data)){return E(e.data)}}function P(e){if(e>=x){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+x.toString(16)+" bytes")}return e|0}function O(e){if(+e!=e){e=0}return w.alloc(+e)}w.isBuffer=function e(t){return t!=null&&t._isBuffer===true&&t!==w.prototype};w.compare=function e(t,r){if(xe(t,Uint8Array))t=w.from(t,t.offset,t.byteLength);if(xe(r,Uint8Array))r=w.from(r,r.offset,r.byteLength);if(!w.isBuffer(t)||!w.isBuffer(r)){throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array')}if(t===r)return 0;var n=t.length;var a=r.length;for(var i=0,o=Math.min(n,a);i<o;++i){if(t[i]!==r[i]){n=t[i];a=r[i];break}}if(n<a)return-1;if(a<n)return 1;return 0};w.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};w.concat=function e(t,r){if(!Array.isArray(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return w.alloc(0)}var n;if(r===undefined){r=0;for(n=0;n<t.length;++n){r+=t[n].length}}var a=w.allocUnsafe(r);var i=0;for(n=0;n<t.length;++n){var o=t[n];if(xe(o,Uint8Array)){if(i+o.length>a.length){if(!w.isBuffer(o))o=w.from(o);o.copy(a,i)}else{Uint8Array.prototype.set.call(a,o,i)}}else if(!w.isBuffer(o)){throw new TypeError('"list" argument must be an Array of Buffers')}else{o.copy(a,i)}i+=o.length}return a};function D(e,t){if(w.isBuffer(e)){return e.length}if(ArrayBuffer.isView(e)||xe(e,ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. '+"Received type "+d(e))}var r=e.length;var n=arguments.length>2&&arguments[2]===true;if(!n&&r===0)return 0;var a=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return pe(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return ye(e).length;default:if(a){return n?-1:pe(e).length}t=(""+t).toLowerCase();a=true}}}w.byteLength=D;function z(e,t,r){var n=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;t>>>=0;if(r<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return J(this,t,r);case"utf8":case"utf-8":return G(this,t,r);case"ascii":return W(this,t,r);case"latin1":case"binary":return X(this,t,r);case"base64":return q(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true}}}w.prototype._isBuffer=true;function R(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}w.prototype.swap16=function e(){var t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var r=0;r<t;r+=2){R(this,r,r+1)}return this};w.prototype.swap32=function e(){var t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var r=0;r<t;r+=4){R(this,r,r+3);R(this,r+1,r+2)}return this};w.prototype.swap64=function e(){var t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var r=0;r<t;r+=8){R(this,r,r+7);R(this,r+1,r+6);R(this,r+2,r+5);R(this,r+3,r+4)}return this};w.prototype.toString=function e(){var t=this.length;if(t===0)return"";if(arguments.length===0)return G(this,0,t);return z.apply(this,arguments)};w.prototype.toLocaleString=w.prototype.toString;w.prototype.equals=function e(t){if(!w.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return w.compare(this,t)===0};w.prototype.inspect=function e(){var r="";var n=t.INSPECT_MAX_BYTES;r=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim();if(this.length>n)r+=" ... ";return"<Buffer "+r+">"};if(m){w.prototype[m]=w.prototype.inspect}w.prototype.compare=function e(t,r,n,a,i){if(xe(t,Uint8Array)){t=w.from(t,t.offset,t.byteLength)}if(!w.isBuffer(t)){throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. '+"Received type "+d(t))}if(r===undefined){r=0}if(n===undefined){n=t?t.length:0}if(a===undefined){a=0}if(i===undefined){i=this.length}if(r<0||n>t.length||a<0||i>this.length){throw new RangeError("out of range index")}if(a>=i&&r>=n){return 0}if(a>=i){return-1}if(r>=n){return 1}r>>>=0;n>>>=0;a>>>=0;i>>>=0;if(this===t)return 0;var o=i-a;var s=n-r;var l=Math.min(o,s);var u=this.slice(a,i);var f=t.slice(r,n);for(var c=0;c<l;++c){if(u[c]!==f[c]){o=u[c];s=f[c];break}}if(o<s)return-1;if(s<o)return 1;return 0};function F(e,t,r,n,a){if(e.length===0)return-1;if(typeof r==="string"){n=r;r=0}else if(r>2147483647){r=2147483647}else if(r<-2147483648){r=-2147483648}r=+r;if(be(r)){r=a?0:e.length-1}if(r<0)r=e.length+r;if(r>=e.length){if(a)return-1;else r=e.length-1}else if(r<0){if(a)r=0;else return-1}if(typeof t==="string"){t=w.from(t,n)}if(w.isBuffer(t)){if(t.length===0){return-1}return B(e,t,r,n,a)}else if(typeof t==="number"){t=t&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(a){return Uint8Array.prototype.indexOf.call(e,t,r)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,r)}}return B(e,[t],r,n,a)}throw new TypeError("val must be string, number or Buffer")}function B(e,t,r,n,a){var i=1;var o=e.length;var s=t.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(e.length<2||t.length<2){return-1}i=2;o/=2;s/=2;r/=2}}function l(e,t){if(i===1){return e[t]}else{return e.readUInt16BE(t*i)}}var u;if(a){var f=-1;for(u=r;u<o;u++){if(l(e,u)===l(t,f===-1?0:u-f)){if(f===-1)f=u;if(u-f+1===s)return f*i}else{if(f!==-1)u-=u-f;f=-1}}}else{if(r+s>o)r=o-s;for(u=r;u>=0;u--){var c=true;for(var v=0;v<s;v++){if(l(e,u+v)!==l(t,v)){c=false;break}}if(c)return u}}return-1}w.prototype.includes=function e(t,r,n){return this.indexOf(t,r,n)!==-1};w.prototype.indexOf=function e(t,r,n){return F(this,t,r,n,true)};w.prototype.lastIndexOf=function e(t,r,n){return F(this,t,r,n,false)};function N(e,t,r,n){r=Number(r)||0;var a=e.length-r;if(!n){n=a}else{n=Number(n);if(n>a){n=a}}var i=t.length;if(n>i/2){n=i/2}var o;for(o=0;o<n;++o){var s=parseInt(t.substr(o*2,2),16);if(be(s))return o;e[r+o]=s}return o}function j(e,t,r,n){return me(pe(t,e.length-r),e,r,n)}function U(e,t,r,n){return me(de(t),e,r,n)}function V(e,t,r,n){return me(ye(t),e,r,n)}function H(e,t,r,n){return me(ge(t,e.length-r),e,r,n)}w.prototype.write=function e(t,r,n,a){if(r===undefined){a="utf8";n=this.length;r=0}else if(n===undefined&&typeof r==="string"){a=r;n=this.length;r=0}else if(isFinite(r)){r=r>>>0;if(isFinite(n)){n=n>>>0;if(a===undefined)a="utf8"}else{a=n;n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var i=this.length-r;if(n===undefined||n>i)n=i;if(t.length>0&&(n<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!a)a="utf8";var o=false;for(;;){switch(a){case"hex":return N(this,t,r,n);case"utf8":case"utf-8":return j(this,t,r,n);case"ascii":case"latin1":case"binary":return U(this,t,r,n);case"base64":return V(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,t,r,n);default:if(o)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();o=true}}};w.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function q(e,t,r){if(t===0&&r===e.length){return g.fromByteArray(e)}else{return g.fromByteArray(e.slice(t,r))}}function G(e,t,r){r=Math.min(e.length,r);var n=[];var a=t;while(a<r){var i=e[a];var o=null;var s=i>239?4:i>223?3:i>191?2:1;if(a+s<=r){var l=void 0,u=void 0,f=void 0,c=void 0;switch(s){case 1:if(i<128){o=i}break;case 2:l=e[a+1];if((l&192)===128){c=(i&31)<<6|l&63;if(c>127){o=c}}break;case 3:l=e[a+1];u=e[a+2];if((l&192)===128&&(u&192)===128){c=(i&15)<<12|(l&63)<<6|u&63;if(c>2047&&(c<55296||c>57343)){o=c}}break;case 4:l=e[a+1];u=e[a+2];f=e[a+3];if((l&192)===128&&(u&192)===128&&(f&192)===128){c=(i&15)<<18|(l&63)<<12|(u&63)<<6|f&63;if(c>65535&&c<1114112){o=c}}}}if(o===null){o=65533;s=1}else if(o>65535){o-=65536;n.push(o>>>10&1023|55296);o=56320|o&1023}n.push(o);a+=s}return Y(n)}var Z=4096;function Y(e){var t=e.length;if(t<=Z){return String.fromCharCode.apply(String,e)}var r="";var n=0;while(n<t){r+=String.fromCharCode.apply(String,e.slice(n,n+=Z))}return r}function W(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a){n+=String.fromCharCode(e[a]&127)}return n}function X(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a){n+=String.fromCharCode(e[a])}return n}function J(e,t,r){var n=e.length;if(!t||t<0)t=0;if(!r||r<0||r>n)r=n;var a="";for(var i=t;i<r;++i){a+=_e[e[i]]}return a}function K(e,t,r){var n=e.slice(t,r);var a="";for(var i=0;i<n.length-1;i+=2){a+=String.fromCharCode(n[i]+n[i+1]*256)}return a}w.prototype.slice=function e(t,r){var n=this.length;t=~~t;r=r===undefined?n:~~r;if(t<0){t+=n;if(t<0)t=0}else if(t>n){t=n}if(r<0){r+=n;if(r<0)r=0}else if(r>n){r=n}if(r<t)r=t;var a=this.subarray(t,r);Object.setPrototypeOf(a,w.prototype);return a};function $(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}w.prototype.readUintLE=w.prototype.readUIntLE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)$(t,r,this.length);var a=this[t];var i=1;var o=0;while(++o<r&&(i*=256)){a+=this[t+o]*i}return a};w.prototype.readUintBE=w.prototype.readUIntBE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n){$(t,r,this.length)}var a=this[t+--r];var i=1;while(r>0&&(i*=256)){a+=this[t+--r]*i}return a};w.prototype.readUint8=w.prototype.readUInt8=function e(t,r){t=t>>>0;if(!r)$(t,1,this.length);return this[t]};w.prototype.readUint16LE=w.prototype.readUInt16LE=function e(t,r){t=t>>>0;if(!r)$(t,2,this.length);return this[t]|this[t+1]<<8};w.prototype.readUint16BE=w.prototype.readUInt16BE=function e(t,r){t=t>>>0;if(!r)$(t,2,this.length);return this[t]<<8|this[t+1]};w.prototype.readUint32LE=w.prototype.readUInt32LE=function e(t,r){t=t>>>0;if(!r)$(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};w.prototype.readUint32BE=w.prototype.readUInt32BE=function e(t,r){t=t>>>0;if(!r)$(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};w.prototype.readBigUInt64LE=we((function e(t){t=t>>>0;fe(t,"offset");var r=this[t];var n=this[t+7];if(r===undefined||n===undefined){ce(t,this.length-8)}var a=r+this[++t]*Math.pow(2,8)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,24);var i=this[++t]+this[++t]*Math.pow(2,8)+this[++t]*Math.pow(2,16)+n*Math.pow(2,24);return BigInt(a)+(BigInt(i)<<BigInt(32))}));w.prototype.readBigUInt64BE=we((function e(t){t=t>>>0;fe(t,"offset");var r=this[t];var n=this[t+7];if(r===undefined||n===undefined){ce(t,this.length-8)}var a=r*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+this[++t];var i=this[++t]*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+n;return(BigInt(a)<<BigInt(32))+BigInt(i)}));w.prototype.readIntLE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)$(t,r,this.length);var a=this[t];var i=1;var o=0;while(++o<r&&(i*=256)){a+=this[t+o]*i}i*=128;if(a>=i)a-=Math.pow(2,8*r);return a};w.prototype.readIntBE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)$(t,r,this.length);var a=r;var i=1;var o=this[t+--a];while(a>0&&(i*=256)){o+=this[t+--a]*i}i*=128;if(o>=i)o-=Math.pow(2,8*r);return o};w.prototype.readInt8=function e(t,r){t=t>>>0;if(!r)$(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};w.prototype.readInt16LE=function e(t,r){t=t>>>0;if(!r)$(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};w.prototype.readInt16BE=function e(t,r){t=t>>>0;if(!r)$(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};w.prototype.readInt32LE=function e(t,r){t=t>>>0;if(!r)$(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};w.prototype.readInt32BE=function e(t,r){t=t>>>0;if(!r)$(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};w.prototype.readBigInt64LE=we((function e(t){t=t>>>0;fe(t,"offset");var r=this[t];var n=this[t+7];if(r===undefined||n===undefined){ce(t,this.length-8)}var a=this[t+4]+this[t+5]*Math.pow(2,8)+this[t+6]*Math.pow(2,16)+(n<<24);return(BigInt(a)<<BigInt(32))+BigInt(r+this[++t]*Math.pow(2,8)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,24))}));w.prototype.readBigInt64BE=we((function e(t){t=t>>>0;fe(t,"offset");var r=this[t];var n=this[t+7];if(r===undefined||n===undefined){ce(t,this.length-8)}var a=(r<<24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+this[++t];return(BigInt(a)<<BigInt(32))+BigInt(this[++t]*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+n)}));w.prototype.readFloatLE=function e(t,r){t=t>>>0;if(!r)$(t,4,this.length);return y.read(this,t,true,23,4)};w.prototype.readFloatBE=function e(t,r){t=t>>>0;if(!r)$(t,4,this.length);return y.read(this,t,false,23,4)};w.prototype.readDoubleLE=function e(t,r){t=t>>>0;if(!r)$(t,8,this.length);return y.read(this,t,true,52,8)};w.prototype.readDoubleBE=function e(t,r){t=t>>>0;if(!r)$(t,8,this.length);return y.read(this,t,false,52,8)};function Q(e,t,r,n,a,i){if(!w.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}w.prototype.writeUintLE=w.prototype.writeUIntLE=function e(t,r,n,a){t=+t;r=r>>>0;n=n>>>0;if(!a){var i=Math.pow(2,8*n)-1;Q(this,t,r,n,i,0)}var o=1;var s=0;this[r]=t&255;while(++s<n&&(o*=256)){this[r+s]=t/o&255}return r+n};w.prototype.writeUintBE=w.prototype.writeUIntBE=function e(t,r,n,a){t=+t;r=r>>>0;n=n>>>0;if(!a){var i=Math.pow(2,8*n)-1;Q(this,t,r,n,i,0)}var o=n-1;var s=1;this[r+o]=t&255;while(--o>=0&&(s*=256)){this[r+o]=t/s&255}return r+n};w.prototype.writeUint8=w.prototype.writeUInt8=function e(t,r,n){t=+t;r=r>>>0;if(!n)Q(this,t,r,1,255,0);this[r]=t&255;return r+1};w.prototype.writeUint16LE=w.prototype.writeUInt16LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)Q(this,t,r,2,65535,0);this[r]=t&255;this[r+1]=t>>>8;return r+2};w.prototype.writeUint16BE=w.prototype.writeUInt16BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)Q(this,t,r,2,65535,0);this[r]=t>>>8;this[r+1]=t&255;return r+2};w.prototype.writeUint32LE=w.prototype.writeUInt32LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)Q(this,t,r,4,4294967295,0);this[r+3]=t>>>24;this[r+2]=t>>>16;this[r+1]=t>>>8;this[r]=t&255;return r+4};w.prototype.writeUint32BE=w.prototype.writeUInt32BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)Q(this,t,r,4,4294967295,0);this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};function ee(e,t,r,n,a){ue(t,n,a,e,r,7);var i=Number(t&BigInt(4294967295));e[r++]=i;i=i>>8;e[r++]=i;i=i>>8;e[r++]=i;i=i>>8;e[r++]=i;var o=Number(t>>BigInt(32)&BigInt(4294967295));e[r++]=o;o=o>>8;e[r++]=o;o=o>>8;e[r++]=o;o=o>>8;e[r++]=o;return r}function te(e,t,r,n,a){ue(t,n,a,e,r,7);var i=Number(t&BigInt(4294967295));e[r+7]=i;i=i>>8;e[r+6]=i;i=i>>8;e[r+5]=i;i=i>>8;e[r+4]=i;var o=Number(t>>BigInt(32)&BigInt(4294967295));e[r+3]=o;o=o>>8;e[r+2]=o;o=o>>8;e[r+1]=o;o=o>>8;e[r]=o;return r+8}w.prototype.writeBigUInt64LE=we((function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return ee(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))}));w.prototype.writeBigUInt64BE=we((function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return te(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))}));w.prototype.writeIntLE=function e(t,r,n,a){t=+t;r=r>>>0;if(!a){var i=Math.pow(2,8*n-1);Q(this,t,r,n,i-1,-i)}var o=0;var s=1;var l=0;this[r]=t&255;while(++o<n&&(s*=256)){if(t<0&&l===0&&this[r+o-1]!==0){l=1}this[r+o]=(t/s>>0)-l&255}return r+n};w.prototype.writeIntBE=function e(t,r,n,a){t=+t;r=r>>>0;if(!a){var i=Math.pow(2,8*n-1);Q(this,t,r,n,i-1,-i)}var o=n-1;var s=1;var l=0;this[r+o]=t&255;while(--o>=0&&(s*=256)){if(t<0&&l===0&&this[r+o+1]!==0){l=1}this[r+o]=(t/s>>0)-l&255}return r+n};w.prototype.writeInt8=function e(t,r,n){t=+t;r=r>>>0;if(!n)Q(this,t,r,1,127,-128);if(t<0)t=255+t+1;this[r]=t&255;return r+1};w.prototype.writeInt16LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)Q(this,t,r,2,32767,-32768);this[r]=t&255;this[r+1]=t>>>8;return r+2};w.prototype.writeInt16BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)Q(this,t,r,2,32767,-32768);this[r]=t>>>8;this[r+1]=t&255;return r+2};w.prototype.writeInt32LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)Q(this,t,r,4,2147483647,-2147483648);this[r]=t&255;this[r+1]=t>>>8;this[r+2]=t>>>16;this[r+3]=t>>>24;return r+4};w.prototype.writeInt32BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)Q(this,t,r,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};w.prototype.writeBigInt64LE=we((function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return ee(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}));w.prototype.writeBigInt64BE=we((function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return te(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}));function re(e,t,r,n,a,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function ne(e,t,r,n,a){t=+t;r=r>>>0;if(!a){re(e,t,r,4,34028234663852886e22,-34028234663852886e22)}y.write(e,t,r,n,23,4);return r+4}w.prototype.writeFloatLE=function e(t,r,n){return ne(this,t,r,true,n)};w.prototype.writeFloatBE=function e(t,r,n){return ne(this,t,r,false,n)};function ae(e,t,r,n,a){t=+t;r=r>>>0;if(!a){re(e,t,r,8,17976931348623157e292,-17976931348623157e292)}y.write(e,t,r,n,52,8);return r+8}w.prototype.writeDoubleLE=function e(t,r,n){return ae(this,t,r,true,n)};w.prototype.writeDoubleBE=function e(t,r,n){return ae(this,t,r,false,n)};w.prototype.copy=function e(t,r,n,a){if(!w.isBuffer(t))throw new TypeError("argument should be a Buffer");if(!n)n=0;if(!a&&a!==0)a=this.length;if(r>=t.length)r=t.length;if(!r)r=0;if(a>0&&a<n)a=n;if(a===n)return 0;if(t.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("sourceEnd out of bounds");if(a>this.length)a=this.length;if(t.length-r<a-n){a=t.length-r+n}var i=a-n;if(this===t&&typeof Uint8Array.prototype.copyWithin==="function"){this.copyWithin(r,n,a)}else{Uint8Array.prototype.set.call(t,this.subarray(n,a),r)}return i};w.prototype.fill=function e(t,r,n,a){if(typeof t==="string"){if(typeof r==="string"){a=r;r=0;n=this.length}else if(typeof n==="string"){a=n;n=this.length}if(a!==undefined&&typeof a!=="string"){throw new TypeError("encoding must be a string")}if(typeof a==="string"&&!w.isEncoding(a)){throw new TypeError("Unknown encoding: "+a)}if(t.length===1){var i=t.charCodeAt(0);if(a==="utf8"&&i<128||a==="latin1"){t=i}}}else if(typeof t==="number"){t=t&255}else if(typeof t==="boolean"){t=Number(t)}if(r<0||this.length<r||this.length<n){throw new RangeError("Out of range index")}if(n<=r){return this}r=r>>>0;n=n===undefined?this.length:n>>>0;if(!t)t=0;var o;if(typeof t==="number"){for(o=r;o<n;++o){this[o]=t}}else{var s=w.isBuffer(t)?t:w.from(t,a);var l=s.length;if(l===0){throw new TypeError('The value "'+t+'" is invalid for argument "value"')}for(o=0;o<n-r;++o){this[o+r]=s[o%l]}}return this};var ie={};function oe(e,t,r){ie[e]=function(r){l(o,r);var a=f(o);function o(){var r;n(this,o);r=a.call(this);Object.defineProperty(v(r),"message",{value:t.apply(v(r),arguments),writable:true,configurable:true});r.name="".concat(r.name," [").concat(e,"]");r.stack;delete r.name;return r}i(o,[{key:"code",get:function t(){return e},set:function e(t){Object.defineProperty(this,"code",{configurable:true,enumerable:true,value:t,writable:true})}},{key:"toString",value:function t(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]);return o}(r)}oe("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){if(e){return"".concat(e," is outside of buffer bounds")}return"Attempt to access memory outside buffer bounds"}),RangeError);oe("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(d(t))}),TypeError);oe("ERR_OUT_OF_RANGE",(function(e,t,r){var n='The value of "'.concat(e,'" is out of range.');var a=r;if(Number.isInteger(r)&&Math.abs(r)>Math.pow(2,32)){a=se(String(r))}else if(typeof r==="bigint"){a=String(r);if(r>Math.pow(BigInt(2),BigInt(32))||r<-Math.pow(BigInt(2),BigInt(32))){a=se(a)}a+="n"}n+=" It must be ".concat(t,". Received ").concat(a);return n}),RangeError);function se(e){var t="";var r=e.length;var n=e[0]==="-"?1:0;for(;r>=n+4;r-=3){t="_".concat(e.slice(r-3,r)).concat(t)}return"".concat(e.slice(0,r)).concat(t)}function le(e,t,r){fe(t,"offset");if(e[t]===undefined||e[t+r]===undefined){ce(t,e.length-(r+1))}}function ue(e,t,r,n,a,i){if(e>r||e<t){var o=typeof t==="bigint"?"n":"";var s;if(i>3){if(t===0||t===BigInt(0)){s=">= 0".concat(o," and < 2").concat(o," ** ").concat((i+1)*8).concat(o)}else{s=">= -(2".concat(o," ** ").concat((i+1)*8-1).concat(o,") and < 2 ** ")+"".concat((i+1)*8-1).concat(o)}}else{s=">= ".concat(t).concat(o," and <= ").concat(r).concat(o)}throw new ie.ERR_OUT_OF_RANGE("value",s,e)}le(n,a,i)}function fe(e,t){if(typeof e!=="number"){throw new ie.ERR_INVALID_ARG_TYPE(t,"number",e)}}function ce(e,t,r){if(Math.floor(e)!==e){fe(e,r);throw new ie.ERR_OUT_OF_RANGE(r||"offset","an integer",e)}if(t<0){throw new ie.ERR_BUFFER_OUT_OF_BOUNDS}throw new ie.ERR_OUT_OF_RANGE(r||"offset",">= ".concat(r?1:0," and <= ").concat(t),e)}var ve=/[^+/0-9A-Za-z-_]/g;function he(e){e=e.split("=")[0];e=e.trim().replace(ve,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function pe(e,t){t=t||Infinity;var r;var n=e.length;var a=null;var i=[];for(var o=0;o<n;++o){r=e.charCodeAt(o);if(r>55295&&r<57344){if(!a){if(r>56319){if((t-=3)>-1)i.push(239,191,189);continue}else if(o+1===n){if((t-=3)>-1)i.push(239,191,189);continue}a=r;continue}if(r<56320){if((t-=3)>-1)i.push(239,191,189);a=r;continue}r=(a-55296<<10|r-56320)+65536}else if(a){if((t-=3)>-1)i.push(239,191,189)}a=null;if(r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return i}function de(e){var t=[];for(var r=0;r<e.length;++r){t.push(e.charCodeAt(r)&255)}return t}function ge(e,t){var r,n,a;var i=[];for(var o=0;o<e.length;++o){if((t-=2)<0)break;r=e.charCodeAt(o);n=r>>8;a=r%256;i.push(a);i.push(n)}return i}function ye(e){return g.toByteArray(he(e))}function me(e,t,r,n){var a;for(a=0;a<n;++a){if(a+r>=t.length||a>=e.length)break;t[a+r]=e[a]}return a}function xe(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function be(e){return e!==e}var _e=function(){var e="0123456789abcdef";var t=new Array(256);for(var r=0;r<16;++r){var n=r*16;for(var a=0;a<16;++a){t[n+a]=e[r]+e[a]}}return t}();function we(e){return typeof BigInt==="undefined"?Te:e}function Te(){throw new Error("BigInt not supported")}},35791:function(e){"use strict";e.exports=a;e.exports.isMobile=a;e.exports["default"]=a;var t=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i;var r=/CrOS/;var n=/android|ipad|playbook|silk/i;function a(e){if(!e)e={};var a=e.ua;if(!a&&typeof navigator!=="undefined")a=navigator.userAgent;if(a&&a.headers&&typeof a.headers["user-agent"]==="string"){a=a.headers["user-agent"]}if(typeof a!=="string")return false;var i=t.test(a)&&!r.test(a)||!!e.tablet&&n.test(a);if(!i&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&a.indexOf("Macintosh")!==-1&&a.indexOf("Safari")!==-1){i=true}return i}},86781:function(e,t,r){"use strict";r.r(t);r.d(t,{sankeyCenter:function(){return v},sankeyCircular:function(){return C},sankeyJustify:function(){return c},sankeyLeft:function(){return u},sankeyRight:function(){return f}});var n=r(33064);var a=r(15140);var i=r(45879);var o=r(2502);var s=r.n(o);function l(e){return e.target.depth}function u(e){return e.depth}function f(e,t){return t-1-e.height}function c(e,t){return e.sourceLinks.length?e.depth:t-1}function v(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?(0,n.VV)(e.sourceLinks,l)-1:0}function h(e){return function(){return e}}var p=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function d(e,t){return y(e.source,t.source)||e.index-t.index}function g(e,t){return y(e.target,t.target)||e.index-t.index}function y(e,t){if(e.partOfCycle===t.partOfCycle){return e.y0-t.y0}else{if(e.circularLinkType==="top"||t.circularLinkType==="bottom"){return-1}else{return 1}}}function m(e){return e.value}function x(e){return(e.y0+e.y1)/2}function b(e){return x(e.source)}function _(e){return x(e.target)}function w(e){return e.index}function T(e){return e.nodes}function k(e){return e.links}function A(e,t){var r=e.get(t);if(!r)throw new Error("missing: "+t);return r}function M(e,t){return t(e)}var S=25;var E=10;var L=.3;function C(){var e=0,t=0,r=1,i=1,o=24,s,l=w,u=c,f=T,v=k,M=32,C=2,O,D=null;function R(){var e={nodes:f.apply(null,arguments),links:v.apply(null,arguments)};F(e);I(e,l,D);N(e);V(e);P(e,l);H(e,M,l);q(e);var r=4;for(var n=0;n<r;n++){$(e,i,l);Q(e,i,l);X(e,t,i,l);$(e,i,l);Q(e,i,l)}ne(e,t,i);B(e,C,i,l);return e}R.nodeId=function(e){return arguments.length?(l=typeof e==="function"?e:h(e),R):l};R.nodeAlign=function(e){return arguments.length?(u=typeof e==="function"?e:h(e),R):u};R.nodeWidth=function(e){return arguments.length?(o=+e,R):o};R.nodePadding=function(e){return arguments.length?(s=+e,R):s};R.nodes=function(e){return arguments.length?(f=typeof e==="function"?e:h(e),R):f};R.links=function(e){return arguments.length?(v=typeof e==="function"?e:h(e),R):v};R.size=function(n){return arguments.length?(e=t=0,r=+n[0],i=+n[1],R):[r-e,i-t]};R.extent=function(n){return arguments.length?(e=+n[0][0],r=+n[1][0],t=+n[0][1],i=+n[1][1],R):[[e,t],[r,i]]};R.iterations=function(e){return arguments.length?(M=+e,R):M};R.circularLinkGap=function(e){return arguments.length?(C=+e,R):C};R.nodePaddingRatio=function(e){return arguments.length?(O=+e,R):O};R.sortNodes=function(e){return arguments.length?(D=e,R):D};R.update=function(e){P(e,l);q(e);e.links.forEach((function(e){if(e.circular){e.circularLinkType=e.y0+e.y1<i?"top":"bottom";e.source.circularLinkType=e.circularLinkType;e.target.circularLinkType=e.circularLinkType}}));$(e,i,l,false);Q(e,i,l);B(e,C,i,l);return e};function F(e){e.nodes.forEach((function(e,t){e.index=t;e.sourceLinks=[];e.targetLinks=[]}));var t=(0,a.UI)(e.nodes,l);e.links.forEach((function(e,r){e.index=r;var n=e.source;var a=e.target;if((typeof n==="undefined"?"undefined":p(n))!=="object"){n=e.source=A(t,n)}if((typeof a==="undefined"?"undefined":p(a))!=="object"){a=e.target=A(t,a)}n.sourceLinks.push(e);a.targetLinks.push(e)}));return e}function N(e){e.nodes.forEach((function(e){e.partOfCycle=false;e.value=Math.max((0,n.Sm)(e.sourceLinks,m),(0,n.Sm)(e.targetLinks,m));e.sourceLinks.forEach((function(t){if(t.circular){e.partOfCycle=true;e.circularLinkType=t.circularLinkType}}));e.targetLinks.forEach((function(t){if(t.circular){e.partOfCycle=true;e.circularLinkType=t.circularLinkType}}))}))}function j(e){var t=0,r=0,a=0,i=0;var o=(0,n.Fp)(e.nodes,(function(e){return e.column}));e.links.forEach((function(e){if(e.circular){if(e.circularLinkType=="top"){t=t+e.width}else{r=r+e.width}if(e.target.column==0){i=i+e.width}if(e.source.column==o){a=a+e.width}}}));t=t>0?t+S+E:t;r=r>0?r+S+E:r;a=a>0?a+S+E:a;i=i>0?i+S+E:i;return{top:t,bottom:r,left:i,right:a}}function U(a,s){var l=(0,n.Fp)(a.nodes,(function(e){return e.column}));var u=r-e;var f=i-t;var c=u+s.right+s.left;var v=f+s.top+s.bottom;var h=u/c;var p=f/v;e=e*h+s.left;r=s.right==0?r:r*h;t=t*p+s.top;i=i*p;a.nodes.forEach((function(t){t.x0=e+t.column*((r-e-o)/l);t.x1=t.x0+o}));return p}function V(e){var t,r,n;for(t=e.nodes,r=[],n=0;t.length;++n,t=r,r=[]){t.forEach((function(e){e.depth=n;e.sourceLinks.forEach((function(e){if(r.indexOf(e.target)<0&&!e.circular){r.push(e.target)}}))}))}for(t=e.nodes,r=[],n=0;t.length;++n,t=r,r=[]){t.forEach((function(e){e.height=n;e.targetLinks.forEach((function(e){if(r.indexOf(e.source)<0&&!e.circular){r.push(e.source)}}))}))}e.nodes.forEach((function(e){e.column=Math.floor(u.call(null,e,n))}))}function H(e,r,o){var l=(0,a.b1)().key((function(e){return e.column})).sortKeys(n.j2).entries(e.nodes).map((function(e){return e.values}));c(o);h();for(var u=1,f=r;f>0;--f){v(u*=.99,o);h()}function c(r){if(O){var a=Infinity;l.forEach((function(e){var t=i*O/(e.length+1);a=t<a?t:a}));s=a}var o=(0,n.VV)(l,(function(e){return(i-t-(e.length-1)*s)/(0,n.Sm)(e,m)}));o=o*L;e.links.forEach((function(e){e.width=e.value*o}));var u=j(e);var f=U(e,u);o=o*f;e.links.forEach((function(e){e.width=e.value*o}));l.forEach((function(e){var n=e.length;e.forEach((function(e,a){if(e.depth==l.length-1&&n==1){e.y0=i/2-e.value*o;e.y1=e.y0+e.value*o}else if(e.depth==0&&n==1){e.y0=i/2-e.value*o;e.y1=e.y0+e.value*o}else if(e.partOfCycle){if(z(e,r)==0){e.y0=i/2+a;e.y1=e.y0+e.value*o}else if(e.circularLinkType=="top"){e.y0=t+a;e.y1=e.y0+e.value*o}else{e.y0=i-e.value*o-a;e.y1=e.y0+e.value*o}}else{if(u.top==0||u.bottom==0){e.y0=(i-t)/n*a;e.y1=e.y0+e.value*o}else{e.y0=(i-t)/2-n/2+a;e.y1=e.y0+e.value*o}}}))}))}function v(e,t){var r=l.length;l.forEach((function(a){var o=a.length;var s=a[0].depth;a.forEach((function(a){var l;if(a.sourceLinks.length||a.targetLinks.length){if(a.partOfCycle&&z(a,t)>0);else if(s==0&&o==1){l=a.y1-a.y0;a.y0=i/2-l/2;a.y1=i/2+l/2}else if(s==r-1&&o==1){l=a.y1-a.y0;a.y0=i/2-l/2;a.y1=i/2+l/2}else{var u=0;var f=(0,n.J6)(a.sourceLinks,_);var c=(0,n.J6)(a.targetLinks,b);if(f&&c){u=(f+c)/2}else{u=f||c}var v=(u-x(a))*e;a.y0+=v;a.y1+=v}}}))}))}function h(){l.forEach((function(e){var r,n,a=t,o=e.length,l;e.sort(y);for(l=0;l<o;++l){r=e[l];n=a-r.y0;if(n>0){r.y0+=n;r.y1+=n}a=r.y1+s}n=a-s-i;if(n>0){a=r.y0-=n,r.y1-=n;for(l=o-2;l>=0;--l){r=e[l];n=r.y1+s-a;if(n>0)r.y0-=n,r.y1-=n;a=r.y0}}}))}}function q(e){e.nodes.forEach((function(e){e.sourceLinks.sort(g);e.targetLinks.sort(d)}));e.nodes.forEach((function(e){var t=e.y0;var r=t;var n=e.y1;var a=n;e.sourceLinks.forEach((function(e){if(e.circular){e.y0=n-e.width/2;n=n-e.width}else{e.y0=t+e.width/2;t+=e.width}}));e.targetLinks.forEach((function(e){if(e.circular){e.y1=a-e.width/2;a=a-e.width}else{e.y1=r+e.width/2;r+=e.width}}))}))}return R}function I(e,t,r){var n=0;if(r===null){var a=[];for(var i=0;i<e.links.length;i++){var o=e.links[i];var l=o.source.index;var u=o.target.index;if(!a[l])a[l]=[];if(!a[u])a[u]=[];if(a[l].indexOf(u)===-1)a[l].push(u)}var f=s()(a);f.sort((function(e,t){return e.length-t.length}));var c={};for(i=0;i<f.length;i++){var v=f[i];var h=v.slice(-2);if(!c[h[0]])c[h[0]]={};c[h[0]][h[1]]=true}e.links.forEach((function(e){var t=e.target.index;var r=e.source.index;if(t===r||c[r]&&c[r][t]){e.circular=true;e.circularLinkID=n;n=n+1}else{e.circular=false}}))}else{e.links.forEach((function(e){if(e.source[r]<e.target[r]){e.circular=false}else{e.circular=true;e.circularLinkID=n;n=n+1}}))}}function P(e,t){var r=0;var n=0;e.links.forEach((function(a){if(a.circular){if(a.source.circularLinkType||a.target.circularLinkType){a.circularLinkType=a.source.circularLinkType?a.source.circularLinkType:a.target.circularLinkType}else{a.circularLinkType=r<n?"top":"bottom"}if(a.circularLinkType=="top"){r=r+1}else{n=n+1}e.nodes.forEach((function(e){if(M(e,t)==M(a.source,t)||M(e,t)==M(a.target,t)){e.circularLinkType=a.circularLinkType}}))}}));e.links.forEach((function(e){if(e.circular){if(e.source.circularLinkType==e.target.circularLinkType){e.circularLinkType=e.source.circularLinkType}if(re(e,t)){e.circularLinkType=e.source.circularLinkType}}}))}function O(e){var t=Math.abs(e.y1-e.y0);var r=Math.abs(e.target.x0-e.source.x1);return Math.atan(r/t)}function D(e,t){if(e.source.column<t.target.column){return false}else if(e.target.column>t.source.column){return false}else{return true}}function z(e,t){var r=0;e.sourceLinks.forEach((function(e){r=e.circular&&!re(e,t)?r+1:r}));var n=0;e.targetLinks.forEach((function(e){n=e.circular&&!re(e,t)?n+1:n}));return r+n}function R(e){var t=e.source.sourceLinks;var r=0;t.forEach((function(e){r=e.circular?r+1:r}));var n=e.target.targetLinks;var a=0;n.forEach((function(e){a=e.circular?a+1:a}));if(r>1||a>1){return false}else{return true}}function F(e,t,r){e.sort(j);e.forEach((function(n,a){var i=0;if(re(n,r)&&R(n)){n.circularPathData.verticalBuffer=i+n.width/2}else{var o=0;for(o;o<a;o++){if(D(e[a],e[o])){var s=e[o].circularPathData.verticalBuffer+e[o].width/2+t;i=s>i?s:i}}n.circularPathData.verticalBuffer=i+n.width/2}}));return e}function B(e,t,r,a){var o=5;var s=(0,n.VV)(e.links,(function(e){return e.source.y0}));e.links.forEach((function(e){if(e.circular){e.circularPathData={}}}));var l=e.links.filter((function(e){return e.circularLinkType=="top"}));F(l,t,a);var u=e.links.filter((function(e){return e.circularLinkType=="bottom"}));F(u,t,a);e.links.forEach((function(n){if(n.circular){n.circularPathData.arcRadius=n.width+E;n.circularPathData.leftNodeBuffer=o;n.circularPathData.rightNodeBuffer=o;n.circularPathData.sourceWidth=n.source.x1-n.source.x0;n.circularPathData.sourceX=n.source.x0+n.circularPathData.sourceWidth;n.circularPathData.targetX=n.target.x0;n.circularPathData.sourceY=n.y0;n.circularPathData.targetY=n.y1;if(re(n,a)&&R(n)){n.circularPathData.leftSmallArcRadius=E+n.width/2;n.circularPathData.leftLargeArcRadius=E+n.width/2;n.circularPathData.rightSmallArcRadius=E+n.width/2;n.circularPathData.rightLargeArcRadius=E+n.width/2;if(n.circularLinkType=="bottom"){n.circularPathData.verticalFullExtent=n.source.y1+S+n.circularPathData.verticalBuffer;n.circularPathData.verticalLeftInnerExtent=n.circularPathData.verticalFullExtent-n.circularPathData.leftLargeArcRadius;n.circularPathData.verticalRightInnerExtent=n.circularPathData.verticalFullExtent-n.circularPathData.rightLargeArcRadius}else{n.circularPathData.verticalFullExtent=n.source.y0-S-n.circularPathData.verticalBuffer;n.circularPathData.verticalLeftInnerExtent=n.circularPathData.verticalFullExtent+n.circularPathData.leftLargeArcRadius;n.circularPathData.verticalRightInnerExtent=n.circularPathData.verticalFullExtent+n.circularPathData.rightLargeArcRadius}}else{var l=n.source.column;var u=n.circularLinkType;var f=e.links.filter((function(e){return e.source.column==l&&e.circularLinkType==u}));if(n.circularLinkType=="bottom"){f.sort(V)}else{f.sort(U)}var c=0;f.forEach((function(e,r){if(e.circularLinkID==n.circularLinkID){n.circularPathData.leftSmallArcRadius=E+n.width/2+c;n.circularPathData.leftLargeArcRadius=E+n.width/2+r*t+c}c=c+e.width}));l=n.target.column;f=e.links.filter((function(e){return e.target.column==l&&e.circularLinkType==u}));if(n.circularLinkType=="bottom"){f.sort(q)}else{f.sort(H)}c=0;f.forEach((function(e,r){if(e.circularLinkID==n.circularLinkID){n.circularPathData.rightSmallArcRadius=E+n.width/2+c;n.circularPathData.rightLargeArcRadius=E+n.width/2+r*t+c}c=c+e.width}));if(n.circularLinkType=="bottom"){n.circularPathData.verticalFullExtent=Math.max(r,n.source.y1,n.target.y1)+S+n.circularPathData.verticalBuffer;n.circularPathData.verticalLeftInnerExtent=n.circularPathData.verticalFullExtent-n.circularPathData.leftLargeArcRadius;n.circularPathData.verticalRightInnerExtent=n.circularPathData.verticalFullExtent-n.circularPathData.rightLargeArcRadius}else{n.circularPathData.verticalFullExtent=s-S-n.circularPathData.verticalBuffer;n.circularPathData.verticalLeftInnerExtent=n.circularPathData.verticalFullExtent+n.circularPathData.leftLargeArcRadius;n.circularPathData.verticalRightInnerExtent=n.circularPathData.verticalFullExtent+n.circularPathData.rightLargeArcRadius}}n.circularPathData.leftInnerExtent=n.circularPathData.sourceX+n.circularPathData.leftNodeBuffer;n.circularPathData.rightInnerExtent=n.circularPathData.targetX-n.circularPathData.rightNodeBuffer;n.circularPathData.leftFullExtent=n.circularPathData.sourceX+n.circularPathData.leftLargeArcRadius+n.circularPathData.leftNodeBuffer;n.circularPathData.rightFullExtent=n.circularPathData.targetX-n.circularPathData.rightLargeArcRadius-n.circularPathData.rightNodeBuffer}if(n.circular){n.path=N(n)}else{var v=(0,i.h5)().source((function(e){var t=e.source.x0+(e.source.x1-e.source.x0);var r=e.y0;return[t,r]})).target((function(e){var t=e.target.x0;var r=e.y1;return[t,r]}));n.path=v(n)}}))}function N(e){var t="";if(e.circularLinkType=="top"){t="M"+e.circularPathData.sourceX+" "+e.circularPathData.sourceY+" "+"L"+e.circularPathData.leftInnerExtent+" "+e.circularPathData.sourceY+" "+"A"+e.circularPathData.leftLargeArcRadius+" "+e.circularPathData.leftSmallArcRadius+" 0 0 0 "+e.circularPathData.leftFullExtent+" "+(e.circularPathData.sourceY-e.circularPathData.leftSmallArcRadius)+" "+"L"+e.circularPathData.leftFullExtent+" "+e.circularPathData.verticalLeftInnerExtent+" "+"A"+e.circularPathData.leftLargeArcRadius+" "+e.circularPathData.leftLargeArcRadius+" 0 0 0 "+e.circularPathData.leftInnerExtent+" "+e.circularPathData.verticalFullExtent+" "+"L"+e.circularPathData.rightInnerExtent+" "+e.circularPathData.verticalFullExtent+" "+"A"+e.circularPathData.rightLargeArcRadius+" "+e.circularPathData.rightLargeArcRadius+" 0 0 0 "+e.circularPathData.rightFullExtent+" "+e.circularPathData.verticalRightInnerExtent+" "+"L"+e.circularPathData.rightFullExtent+" "+(e.circularPathData.targetY-e.circularPathData.rightSmallArcRadius)+" "+"A"+e.circularPathData.rightLargeArcRadius+" "+e.circularPathData.rightSmallArcRadius+" 0 0 0 "+e.circularPathData.rightInnerExtent+" "+e.circularPathData.targetY+" "+"L"+e.circularPathData.targetX+" "+e.circularPathData.targetY}else{t="M"+e.circularPathData.sourceX+" "+e.circularPathData.sourceY+" "+"L"+e.circularPathData.leftInnerExtent+" "+e.circularPathData.sourceY+" "+"A"+e.circularPathData.leftLargeArcRadius+" "+e.circularPathData.leftSmallArcRadius+" 0 0 1 "+e.circularPathData.leftFullExtent+" "+(e.circularPathData.sourceY+e.circularPathData.leftSmallArcRadius)+" "+"L"+e.circularPathData.leftFullExtent+" "+e.circularPathData.verticalLeftInnerExtent+" "+"A"+e.circularPathData.leftLargeArcRadius+" "+e.circularPathData.leftLargeArcRadius+" 0 0 1 "+e.circularPathData.leftInnerExtent+" "+e.circularPathData.verticalFullExtent+" "+"L"+e.circularPathData.rightInnerExtent+" "+e.circularPathData.verticalFullExtent+" "+"A"+e.circularPathData.rightLargeArcRadius+" "+e.circularPathData.rightLargeArcRadius+" 0 0 1 "+e.circularPathData.rightFullExtent+" "+e.circularPathData.verticalRightInnerExtent+" "+"L"+e.circularPathData.rightFullExtent+" "+(e.circularPathData.targetY+e.circularPathData.rightSmallArcRadius)+" "+"A"+e.circularPathData.rightLargeArcRadius+" "+e.circularPathData.rightSmallArcRadius+" 0 0 1 "+e.circularPathData.rightInnerExtent+" "+e.circularPathData.targetY+" "+"L"+e.circularPathData.targetX+" "+e.circularPathData.targetY}return t}function j(e,t){if(G(e)==G(t)){return e.circularLinkType=="bottom"?V(e,t):U(e,t)}else{return G(t)-G(e)}}function U(e,t){return e.y0-t.y0}function V(e,t){return t.y0-e.y0}function H(e,t){return e.y1-t.y1}function q(e,t){return t.y1-e.y1}function G(e){return e.target.column-e.source.column}function Z(e){return e.target.x0-e.source.x1}function Y(e,t){var r=O(e);var n=Z(t)/Math.tan(r);var a=te(e)=="up"?e.y1+n:e.y1-n;return a}function W(e,t){var r=O(e);var n=Z(t)/Math.tan(r);var a=te(e)=="up"?e.y1-n:e.y1+n;return a}function X(e,t,r,n){e.links.forEach((function(a){if(a.circular){return}if(a.target.column-a.source.column>1){var i=a.source.column+1;var o=a.target.column-1;var s=1;var l=o-i+1;for(s=1;i<=o;i++,s++){e.nodes.forEach((function(o){if(o.column==i){var u=s/(l+1);var f=Math.pow(1-u,3);var c=3*u*Math.pow(1-u,2);var v=3*Math.pow(u,2)*(1-u);var h=Math.pow(u,3);var p=f*a.y0+c*a.y0+v*a.y1+h*a.y1;var d=p-a.width/2;var g=p+a.width/2;var y;if(d>o.y0&&d<o.y1){y=o.y1-d+10;y=o.circularLinkType=="bottom"?y:-y;o=K(o,y,t,r);e.nodes.forEach((function(e){if(M(e,n)==M(o,n)||e.column!=o.column){return}if(J(o,e)){K(e,y,t,r)}}))}else if(g>o.y0&&g<o.y1){y=g-o.y0+10;o=K(o,y,t,r);e.nodes.forEach((function(e){if(M(e,n)==M(o,n)||e.column!=o.column){return}if(e.y0<o.y1&&e.y1>o.y1){K(e,y,t,r)}}))}else if(d<o.y0&&g>o.y1){y=g-o.y0+10;o=K(o,y,t,r);e.nodes.forEach((function(e){if(M(e,n)==M(o,n)||e.column!=o.column){return}if(e.y0<o.y1&&e.y1>o.y1){K(e,y,t,r)}}))}}}))}}}))}function J(e,t){if(e.y0>t.y0&&e.y0<t.y1){return true}else if(e.y1>t.y0&&e.y1<t.y1){return true}else if(e.y0<t.y0&&e.y1>t.y1){return true}else{return false}}function K(e,t,r,n){if(e.y0+t>=r&&e.y1+t<=n){e.y0=e.y0+t;e.y1=e.y1+t;e.targetLinks.forEach((function(e){e.y1=e.y1+t}));e.sourceLinks.forEach((function(e){e.y0=e.y0+t}))}return e}function $(e,t,r,n){e.nodes.forEach((function(a){if(n&&a.y+(a.y1-a.y0)>t){a.y=a.y-(a.y+(a.y1-a.y0)-t)}var i=e.links.filter((function(e){return M(e.source,r)==M(a,r)}));var o=i.length;if(o>1){i.sort((function(e,t){if(!e.circular&&!t.circular){if(e.target.column==t.target.column){return e.y1-t.y1}else if(!ee(e,t)){return e.y1-t.y1}else{if(e.target.column>t.target.column){var r=W(t,e);return e.y1-r}if(t.target.column>e.target.column){var n=W(e,t);return n-t.y1}}}if(e.circular&&!t.circular){return e.circularLinkType=="top"?-1:1}else if(t.circular&&!e.circular){return t.circularLinkType=="top"?1:-1}if(e.circular&&t.circular){if(e.circularLinkType===t.circularLinkType&&e.circularLinkType=="top"){if(e.target.column===t.target.column){return e.target.y1-t.target.y1}else{return t.target.column-e.target.column}}else if(e.circularLinkType===t.circularLinkType&&e.circularLinkType=="bottom"){if(e.target.column===t.target.column){return t.target.y1-e.target.y1}else{return e.target.column-t.target.column}}else{return e.circularLinkType=="top"?-1:1}}}))}var s=a.y0;i.forEach((function(e){e.y0=s+e.width/2;s=s+e.width}));i.forEach((function(e,t){if(e.circularLinkType=="bottom"){var r=t+1;var n=0;for(r;r<o;r++){n=n+i[r].width}e.y0=a.y1-n-e.width/2}}))}))}function Q(e,t,r){e.nodes.forEach((function(t){var n=e.links.filter((function(e){return M(e.target,r)==M(t,r)}));var a=n.length;if(a>1){n.sort((function(e,t){if(!e.circular&&!t.circular){if(e.source.column==t.source.column){return e.y0-t.y0}else if(!ee(e,t)){return e.y0-t.y0}else{if(t.source.column<e.source.column){var r=Y(t,e);return e.y0-r}if(e.source.column<t.source.column){var n=Y(e,t);return n-t.y0}}}if(e.circular&&!t.circular){return e.circularLinkType=="top"?-1:1}else if(t.circular&&!e.circular){return t.circularLinkType=="top"?1:-1}if(e.circular&&t.circular){if(e.circularLinkType===t.circularLinkType&&e.circularLinkType=="top"){if(e.source.column===t.source.column){return e.source.y1-t.source.y1}else{return e.source.column-t.source.column}}else if(e.circularLinkType===t.circularLinkType&&e.circularLinkType=="bottom"){if(e.source.column===t.source.column){return e.source.y1-t.source.y1}else{return t.source.column-e.source.column}}else{return e.circularLinkType=="top"?-1:1}}}))}var i=t.y0;n.forEach((function(e){e.y1=i+e.width/2;i=i+e.width}));n.forEach((function(e,r){if(e.circularLinkType=="bottom"){var i=r+1;var o=0;for(i;i<a;i++){o=o+n[i].width}e.y1=t.y1-o-e.width/2}}))}))}function ee(e,t){return te(e)==te(t)}function te(e){return e.y0-e.y1>0?"up":"down"}function re(e,t){return M(e.source,t)==M(e.target,t)}function ne(e,t,r){var a=e.nodes;var i=e.links;var o=false;var s=false;i.forEach((function(e){if(e.circularLinkType=="top"){o=true}else if(e.circularLinkType=="bottom"){s=true}}));if(o==false||s==false){var l=(0,n.VV)(a,(function(e){return e.y0}));var u=(0,n.Fp)(a,(function(e){return e.y1}));var f=u-l;var c=r-t;var v=c/f;a.forEach((function(e){var t=(e.y1-e.y0)*v;e.y0=(e.y0-l)*v;e.y1=e.y0+t}));i.forEach((function(e){e.y0=(e.y0-l)*v;e.y1=(e.y1-l)*v;e.width=e.width*v}))}}},30838:function(e,t,r){"use strict";r.r(t);r.d(t,{sankey:function(){return w},sankeyCenter:function(){return u},sankeyJustify:function(){return l},sankeyLeft:function(){return o},sankeyLinkHorizontal:function(){return M},sankeyRight:function(){return s}});var n=r(33064);var a=r(15140);function i(e){return e.target.depth}function o(e){return e.depth}function s(e,t){return t-1-e.height}function l(e,t){return e.sourceLinks.length?e.depth:t-1}function u(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?(0,n.VV)(e.sourceLinks,i)-1:0}function f(e){return function(){return e}}function c(e,t){return h(e.source,t.source)||e.index-t.index}function v(e,t){return h(e.target,t.target)||e.index-t.index}function h(e,t){return e.y0-t.y0}function p(e){return e.value}function d(e){return(e.y0+e.y1)/2}function g(e){return d(e.source)*e.value}function y(e){return d(e.target)*e.value}function m(e){return e.index}function x(e){return e.nodes}function b(e){return e.links}function _(e,t){var r=e.get(t);if(!r)throw new Error("missing: "+t);return r}function w(){var e=0,t=0,r=1,i=1,o=24,s=8,u=m,w=l,T=x,k=b,A=32,M=2/3;function S(){var e={nodes:T.apply(null,arguments),links:k.apply(null,arguments)};E(e);L(e);C(e);I(e,A);P(e);return e}S.update=function(e){P(e);return e};S.nodeId=function(e){return arguments.length?(u=typeof e==="function"?e:f(e),S):u};S.nodeAlign=function(e){return arguments.length?(w=typeof e==="function"?e:f(e),S):w};S.nodeWidth=function(e){return arguments.length?(o=+e,S):o};S.nodePadding=function(e){return arguments.length?(s=+e,S):s};S.nodes=function(e){return arguments.length?(T=typeof e==="function"?e:f(e),S):T};S.links=function(e){return arguments.length?(k=typeof e==="function"?e:f(e),S):k};S.size=function(n){return arguments.length?(e=t=0,r=+n[0],i=+n[1],S):[r-e,i-t]};S.extent=function(n){return arguments.length?(e=+n[0][0],r=+n[1][0],t=+n[0][1],i=+n[1][1],S):[[e,t],[r,i]]};S.iterations=function(e){return arguments.length?(A=+e,S):A};function E(e){e.nodes.forEach((function(e,t){e.index=t;e.sourceLinks=[];e.targetLinks=[]}));var t=(0,a.UI)(e.nodes,u);e.links.forEach((function(e,r){e.index=r;var n=e.source,a=e.target;if(typeof n!=="object")n=e.source=_(t,n);if(typeof a!=="object")a=e.target=_(t,a);n.sourceLinks.push(e);a.targetLinks.push(e)}))}function L(e){e.nodes.forEach((function(e){e.value=Math.max((0,n.Sm)(e.sourceLinks,p),(0,n.Sm)(e.targetLinks,p))}))}function C(t){var n,a,i;for(n=t.nodes,a=[],i=0;n.length;++i,n=a,a=[]){n.forEach((function(e){e.depth=i;e.sourceLinks.forEach((function(e){if(a.indexOf(e.target)<0){a.push(e.target)}}))}))}for(n=t.nodes,a=[],i=0;n.length;++i,n=a,a=[]){n.forEach((function(e){e.height=i;e.targetLinks.forEach((function(e){if(a.indexOf(e.source)<0){a.push(e.source)}}))}))}var s=(r-e-o)/(i-1);t.nodes.forEach((function(t){t.x1=(t.x0=e+Math.max(0,Math.min(i-1,Math.floor(w.call(null,t,i))))*s)+o}))}function I(e){var r=(0,a.b1)().key((function(e){return e.x0})).sortKeys(n.j2).entries(e.nodes).map((function(e){return e.values}));u();v();for(var o=1,l=A;l>0;--l){c(o*=.99);v();f(o);v()}function u(){var a=(0,n.Fp)(r,(function(e){return e.length}));var o=M*(i-t)/(a-1);if(s>o)s=o;var l=(0,n.VV)(r,(function(e){return(i-t-(e.length-1)*s)/(0,n.Sm)(e,p)}));r.forEach((function(e){e.forEach((function(e,t){e.y1=(e.y0=t)+e.value*l}))}));e.links.forEach((function(e){e.width=e.value*l}))}function f(e){r.forEach((function(t){t.forEach((function(t){if(t.targetLinks.length){var r=((0,n.Sm)(t.targetLinks,g)/(0,n.Sm)(t.targetLinks,p)-d(t))*e;t.y0+=r,t.y1+=r}}))}))}function c(e){r.slice().reverse().forEach((function(t){t.forEach((function(t){if(t.sourceLinks.length){var r=((0,n.Sm)(t.sourceLinks,y)/(0,n.Sm)(t.sourceLinks,p)-d(t))*e;t.y0+=r,t.y1+=r}}))}))}function v(){r.forEach((function(e){var r,n,a=t,o=e.length,l;e.sort(h);for(l=0;l<o;++l){r=e[l];n=a-r.y0;if(n>0)r.y0+=n,r.y1+=n;a=r.y1+s}n=a-s-i;if(n>0){a=r.y0-=n,r.y1-=n;for(l=o-2;l>=0;--l){r=e[l];n=r.y1+s-a;if(n>0)r.y0-=n,r.y1-=n;a=r.y0}}}))}}function P(e){e.nodes.forEach((function(e){e.sourceLinks.sort(v);e.targetLinks.sort(c)}));e.nodes.forEach((function(e){var t=e.y0,r=t;e.sourceLinks.forEach((function(e){e.y0=t+e.width/2,t+=e.width}));e.targetLinks.forEach((function(e){e.y1=r+e.width/2,r+=e.width}))}))}return S}var T=r(45879);function k(e){return[e.source.x1,e.y0]}function A(e){return[e.target.x0,e.y1]}function M(){return(0,T.h5)().source(k).target(A)}},39898:function(e,t,r){var n,a;!function(){var i={version:"3.8.0"};var o=[].slice,s=function(e){return o.call(e)};var l=self.document;function u(e){return e&&(e.ownerDocument||e.document||e).documentElement}function f(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(l){try{s(l.documentElement.childNodes)[0].nodeType}catch(co){s=function(e){var t=e.length,r=new Array(t);while(t--)r[t]=e[t];return r}}}if(!Date.now)Date.now=function(){return+new Date};if(l){try{l.createElement("DIV").style.setProperty("opacity",0,"")}catch(vo){var c=this.Element.prototype,v=c.setAttribute,h=c.setAttributeNS,p=this.CSSStyleDeclaration.prototype,d=p.setProperty;c.setAttribute=function(e,t){v.call(this,e,t+"")};c.setAttributeNS=function(e,t,r){h.call(this,e,t,r+"")};p.setProperty=function(e,t,r){d.call(this,e,t+"",r)}}}i.ascending=g;function g(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}i.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};i.min=function(e,t){var r=-1,n=e.length,a,i;if(arguments.length===1){while(++r<n)if((i=e[r])!=null&&i>=i){a=i;break}while(++r<n)if((i=e[r])!=null&&a>i)a=i}else{while(++r<n)if((i=t.call(e,e[r],r))!=null&&i>=i){a=i;break}while(++r<n)if((i=t.call(e,e[r],r))!=null&&a>i)a=i}return a};i.max=function(e,t){var r=-1,n=e.length,a,i;if(arguments.length===1){while(++r<n)if((i=e[r])!=null&&i>=i){a=i;break}while(++r<n)if((i=e[r])!=null&&i>a)a=i}else{while(++r<n)if((i=t.call(e,e[r],r))!=null&&i>=i){a=i;break}while(++r<n)if((i=t.call(e,e[r],r))!=null&&i>a)a=i}return a};i.extent=function(e,t){var r=-1,n=e.length,a,i,o;if(arguments.length===1){while(++r<n)if((i=e[r])!=null&&i>=i){a=o=i;break}while(++r<n)if((i=e[r])!=null){if(a>i)a=i;if(o<i)o=i}}else{while(++r<n)if((i=t.call(e,e[r],r))!=null&&i>=i){a=o=i;break}while(++r<n)if((i=t.call(e,e[r],r))!=null){if(a>i)a=i;if(o<i)o=i}}return[a,o]};function y(e){return e===null?NaN:+e}function m(e){return!isNaN(e)}i.sum=function(e,t){var r=0,n=e.length,a,i=-1;if(arguments.length===1){while(++i<n)if(m(a=+e[i]))r+=a}else{while(++i<n)if(m(a=+t.call(e,e[i],i)))r+=a}return r};i.mean=function(e,t){var r=0,n=e.length,a,i=-1,o=n;if(arguments.length===1){while(++i<n)if(m(a=y(e[i])))r+=a;else--o}else{while(++i<n)if(m(a=y(t.call(e,e[i],i))))r+=a;else--o}if(o)return r/o};i.quantile=function(e,t){var r=(e.length-1)*t+1,n=Math.floor(r),a=+e[n-1],i=r-n;return i?a+i*(e[n]-a):a};i.median=function(e,t){var r=[],n=e.length,a,o=-1;if(arguments.length===1){while(++o<n)if(m(a=y(e[o])))r.push(a)}else{while(++o<n)if(m(a=y(t.call(e,e[o],o))))r.push(a)}if(r.length)return i.quantile(r.sort(g),.5)};i.variance=function(e,t){var r=e.length,n=0,a,i,o=0,s=-1,l=0;if(arguments.length===1){while(++s<r){if(m(a=y(e[s]))){i=a-n;n+=i/++l;o+=i*(a-n)}}}else{while(++s<r){if(m(a=y(t.call(e,e[s],s)))){i=a-n;n+=i/++l;o+=i*(a-n)}}}if(l>1)return o/(l-1)};i.deviation=function(){var e=i.variance.apply(this,arguments);return e?Math.sqrt(e):e};function x(e){return{left:function(t,r,n,a){if(arguments.length<3)n=0;if(arguments.length<4)a=t.length;while(n<a){var i=n+a>>>1;if(e(t[i],r)<0)n=i+1;else a=i}return n},right:function(t,r,n,a){if(arguments.length<3)n=0;if(arguments.length<4)a=t.length;while(n<a){var i=n+a>>>1;if(e(t[i],r)>0)a=i;else n=i+1}return n}}}var b=x(g);i.bisectLeft=b.left;i.bisect=i.bisectRight=b.right;i.bisector=function(e){return x(e.length===1?function(t,r){return g(e(t),r)}:e)};i.shuffle=function(e,t,r){if((n=arguments.length)<3){r=e.length;if(n<2)t=0}var n=r-t,a,i;while(n){i=Math.random()*n--|0;a=e[n+t],e[n+t]=e[i+t],e[i+t]=a}return e};i.permute=function(e,t){var r=t.length,n=new Array(r);while(r--)n[r]=e[t[r]];return n};i.pairs=function(e){var t=0,r=e.length-1,n,a=e[0],i=new Array(r<0?0:r);while(t<r)i[t]=[n=a,a=e[++t]];return i};i.transpose=function(e){if(!(o=e.length))return[];for(var t=-1,r=i.min(e,_),n=new Array(r);++t<r;){for(var a=-1,o,s=n[t]=new Array(o);++a<o;){s[a]=e[a][t]}}return n};function _(e){return e.length}i.zip=function(){return i.transpose(arguments)};i.keys=function(e){var t=[];for(var r in e)t.push(r);return t};i.values=function(e){var t=[];for(var r in e)t.push(e[r]);return t};i.entries=function(e){var t=[];for(var r in e)t.push({key:r,value:e[r]});return t};i.merge=function(e){var t=e.length,r,n=-1,a=0,i,o;while(++n<t)a+=e[n].length;i=new Array(a);while(--t>=0){o=e[t];r=o.length;while(--r>=0){i[--a]=o[r]}}return i};var w=Math.abs;i.range=function(e,t,r){if(arguments.length<3){r=1;if(arguments.length<2){t=e;e=0}}if((t-e)/r===Infinity)throw new Error("infinite range");var n=[],a=T(w(r)),i=-1,o;e*=a,t*=a,r*=a;if(r<0)while((o=e+r*++i)>t)n.push(o/a);else while((o=e+r*++i)<t)n.push(o/a);return n};function T(e){var t=1;while(e*t%1)t*=10;return t}function k(e,t){for(var r in t){Object.defineProperty(e.prototype,r,{value:t[r],enumerable:false})}}i.map=function(e,t){var r=new A;if(e instanceof A){e.forEach((function(e,t){r.set(e,t)}))}else if(Array.isArray(e)){var n=-1,a=e.length,i;if(arguments.length===1)while(++n<a)r.set(n,e[n]);else while(++n<a)r.set(t.call(e,i=e[n],n),i)}else{for(var o in e)r.set(o,e[o])}return r};function A(){this._=Object.create(null)}var M="__proto__",S="\0";k(A,{has:C,get:function(e){return this._[E(e)]},set:function(e,t){return this._[E(e)]=t},remove:I,keys:P,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:L(t),value:this._[t]});return e},size:O,empty:D,forEach:function(e){for(var t in this._)e.call(this,L(t),this._[t])}});function E(e){return(e+="")===M||e[0]===S?S+e:e}function L(e){return(e+="")[0]===S?e.slice(1):e}function C(e){return E(e)in this._}function I(e){return(e=E(e))in this._&&delete this._[e]}function P(){var e=[];for(var t in this._)e.push(L(t));return e}function O(){var e=0;for(var t in this._)++e;return e}function D(){for(var e in this._)return false;return true}i.nest=function(){var e={},t=[],r=[],n,a;function o(r,i,s){if(s>=t.length)return a?a.call(e,i):n?i.sort(n):i;var l=-1,u=i.length,f=t[s++],c,v,h,p=new A,d;while(++l<u){if(d=p.get(c=f(v=i[l]))){d.push(v)}else{p.set(c,[v])}}if(r){v=r();h=function(e,t){v.set(e,o(r,t,s))}}else{v={};h=function(e,t){v[e]=o(r,t,s)}}p.forEach(h);return v}function s(e,n){if(n>=t.length)return e;var a=[],i=r[n++];e.forEach((function(e,t){a.push({key:e,values:s(t,n)})}));return i?a.sort((function(e,t){return i(e.key,t.key)})):a}e.map=function(e,t){return o(t,e,0)};e.entries=function(e){return s(o(i.map,e,0),0)};e.key=function(r){t.push(r);return e};e.sortKeys=function(n){r[t.length-1]=n;return e};e.sortValues=function(t){n=t;return e};e.rollup=function(t){a=t;return e};return e};i.set=function(e){var t=new z;if(e)for(var r=0,n=e.length;r<n;++r)t.add(e[r]);return t};function z(){this._=Object.create(null)}k(z,{has:C,add:function(e){this._[E(e+="")]=true;return e},remove:I,values:P,size:O,empty:D,forEach:function(e){for(var t in this._)e.call(this,L(t))}});i.behavior={};function R(e){return e}i.rebind=function(e,t){var r=1,n=arguments.length,a;while(++r<n)e[a=arguments[r]]=F(e,t,t[a]);return e};function F(e,t,r){return function(){var n=r.apply(t,arguments);return n===t?e:n}}function B(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var r=0,n=N.length;r<n;++r){var a=N[r]+t;if(a in e)return a}}var N=["webkit","ms","moz","Moz","o","O"];function j(){}i.dispatch=function(){var e=new U,t=-1,r=arguments.length;while(++t<r)e[arguments[t]]=V(e);return e};function U(){}U.prototype.on=function(e,t){var r=e.indexOf("."),n="";if(r>=0){n=e.slice(r+1);e=e.slice(0,r)}if(e)return arguments.length<2?this[e].on(n):this[e].on(n,t);if(arguments.length===2){if(t==null)for(e in this){if(this.hasOwnProperty(e))this[e].on(n,null)}return this}};function V(e){var t=[],r=new A;function n(){var r=t,n=-1,a=r.length,i;while(++n<a)if(i=r[n].on)i.apply(this,arguments);return e}n.on=function(n,a){var i=r.get(n),o;if(arguments.length<2)return i&&i.on;if(i){i.on=null;t=t.slice(0,o=t.indexOf(i)).concat(t.slice(o+1));r.remove(n)}if(a)t.push(r.set(n,{on:a}));return e};return n}i.event=null;function H(){i.event.preventDefault()}function q(){var e=i.event,t;while(t=e.sourceEvent)e=t;return e}function G(e){var t=new U,r=0,n=arguments.length;while(++r<n)t[arguments[r]]=V(t);t.of=function(r,n){return function(a){try{var o=a.sourceEvent=i.event;a.target=e;i.event=a;t[a.type].apply(r,n)}finally{i.event=o}}};return t}i.requote=function(e){return e.replace(Z,"\\$&")};var Z=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var Y={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)e[r]=t[r]};function W(e){Y(e,$);return e}var X=function(e,t){return t.querySelector(e)},J=function(e,t){return t.querySelectorAll(e)},K=function(e,t){var r=e.matches||e[B(e,"matchesSelector")];K=function(e,t){return r.call(e,t)};return K(e,t)};if(typeof Sizzle==="function"){X=function(e,t){return Sizzle(e,t)[0]||null};J=Sizzle;K=Sizzle.matchesSelector}i.selection=function(){return i.select(l.documentElement)};var $=i.selection.prototype=[];$.select=function(e){var t=[],r,n,a,i;e=Q(e);for(var o=-1,s=this.length;++o<s;){t.push(r=[]);r.parentNode=(a=this[o]).parentNode;for(var l=-1,u=a.length;++l<u;){if(i=a[l]){r.push(n=e.call(i,i.__data__,l,o));if(n&&"__data__"in i)n.__data__=i.__data__}else{r.push(null)}}}return W(t)};function Q(e){return typeof e==="function"?e:function(){return X(e,this)}}$.selectAll=function(e){var t=[],r,n;e=ee(e);for(var a=-1,i=this.length;++a<i;){for(var o=this[a],l=-1,u=o.length;++l<u;){if(n=o[l]){t.push(r=s(e.call(n,n.__data__,l,a)));r.parentNode=n}}}return W(t)};function ee(e){return typeof e==="function"?e:function(){return J(e,this)}}var te="http://www.w3.org/1999/xhtml";var re={svg:"http://www.w3.org/2000/svg",xhtml:te,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};i.ns={prefix:re,qualify:function(e){var t=e.indexOf(":"),r=e;if(t>=0&&(r=e.slice(0,t))!=="xmlns")e=e.slice(t+1);return re.hasOwnProperty(r)?{space:re[r],local:e}:e}};$.attr=function(e,t){if(arguments.length<2){if(typeof e==="string"){var r=this.node();e=i.ns.qualify(e);return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}for(t in e)this.each(ne(t,e[t]));return this}return this.each(ne(e,t))};function ne(e,t){e=i.ns.qualify(e);function r(){this.removeAttribute(e)}function n(){this.removeAttributeNS(e.space,e.local)}function a(){this.setAttribute(e,t)}function o(){this.setAttributeNS(e.space,e.local,t)}function s(){var r=t.apply(this,arguments);if(r==null)this.removeAttribute(e);else this.setAttribute(e,r)}function l(){var r=t.apply(this,arguments);if(r==null)this.removeAttributeNS(e.space,e.local);else this.setAttributeNS(e.space,e.local,r)}return t==null?e.local?n:r:typeof t==="function"?e.local?l:s:e.local?o:a}function ae(e){return e.trim().replace(/\s+/g," ")}$.classed=function(e,t){if(arguments.length<2){if(typeof e==="string"){var r=this.node(),n=(e=oe(e)).length,a=-1;if(t=r.classList){while(++a<n)if(!t.contains(e[a]))return false}else{t=r.getAttribute("class");while(++a<n)if(!ie(e[a]).test(t))return false}return true}for(t in e)this.each(se(t,e[t]));return this}return this.each(se(e,t))};function ie(e){return new RegExp("(?:^|\\s+)"+i.requote(e)+"(?:\\s+|$)","g")}function oe(e){return(e+"").trim().split(/^|\s+/)}function se(e,t){e=oe(e).map(le);var r=e.length;function n(){var n=-1;while(++n<r)e[n](this,t)}function a(){var n=-1,a=t.apply(this,arguments);while(++n<r)e[n](this,a)}return typeof t==="function"?a:n}function le(e){var t=ie(e);return function(r,n){if(a=r.classList)return n?a.add(e):a.remove(e);var a=r.getAttribute("class")||"";if(n){t.lastIndex=0;if(!t.test(a))r.setAttribute("class",ae(a+" "+e))}else{r.setAttribute("class",ae(a.replace(t," ")))}}}$.style=function(e,t,r){var n=arguments.length;if(n<3){if(typeof e!=="string"){if(n<2)t="";for(r in e)this.each(ue(r,e[r],t));return this}if(n<2){var a=this.node();return f(a).getComputedStyle(a,null).getPropertyValue(e)}r=""}return this.each(ue(e,t,r))};function ue(e,t,r){function n(){this.style.removeProperty(e)}function a(){this.style.setProperty(e,t,r)}function i(){var n=t.apply(this,arguments);if(n==null)this.style.removeProperty(e);else this.style.setProperty(e,n,r)}return t==null?n:typeof t==="function"?i:a}$.property=function(e,t){if(arguments.length<2){if(typeof e==="string")return this.node()[e];for(t in e)this.each(fe(t,e[t]));return this}return this.each(fe(e,t))};function fe(e,t){function r(){delete this[e]}function n(){this[e]=t}function a(){var r=t.apply(this,arguments);if(r==null)delete this[e];else this[e]=r}return t==null?r:typeof t==="function"?a:n}$.text=function(e){return arguments.length?this.each(typeof e==="function"?function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}:e==null?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent};$.html=function(e){return arguments.length?this.each(typeof e==="function"?function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML};$.append=function(e){e=ce(e);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))};function ce(e){function t(){var t=this.ownerDocument,r=this.namespaceURI;return r===te&&t.documentElement.namespaceURI===te?t.createElement(e):t.createElementNS(r,e)}function r(){return this.ownerDocument.createElementNS(e.space,e.local)}return typeof e==="function"?e:(e=i.ns.qualify(e)).local?r:t}$.insert=function(e,t){e=ce(e);t=Q(t);return this.select((function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)}))};$.remove=function(){return this.each(ve)};function ve(){var e=this.parentNode;if(e)e.removeChild(this)}$.data=function(e,t){var r=-1,n=this.length,a,i;if(!arguments.length){e=new Array(n=(a=this[0]).length);while(++r<n){if(i=a[r]){e[r]=i.__data__}}return e}function o(e,r){var n,a=e.length,i=r.length,o=Math.min(a,i),f=new Array(i),c=new Array(i),v=new Array(a),h,p;if(t){var d=new A,g=new Array(a),y;for(n=-1;++n<a;){if(h=e[n]){if(d.has(y=t.call(h,h.__data__,n))){v[n]=h}else{d.set(y,h)}g[n]=y}}for(n=-1;++n<i;){if(!(h=d.get(y=t.call(r,p=r[n],n)))){c[n]=he(p)}else if(h!==true){f[n]=h;h.__data__=p}d.set(y,true)}for(n=-1;++n<a;){if(n in g&&d.get(g[n])!==true){v[n]=e[n]}}}else{for(n=-1;++n<o;){h=e[n];p=r[n];if(h){h.__data__=p;f[n]=h}else{c[n]=he(p)}}for(;n<i;++n){c[n]=he(r[n])}for(;n<a;++n){v[n]=e[n]}}c.update=f;c.parentNode=f.parentNode=v.parentNode=e.parentNode;s.push(c);l.push(f);u.push(v)}var s=ye([]),l=W([]),u=W([]);if(typeof e==="function"){while(++r<n){o(a=this[r],e.call(a,a.parentNode.__data__,r))}}else{while(++r<n){o(a=this[r],e)}}l.enter=function(){return s};l.exit=function(){return u};return l};function he(e){return{__data__:e}}$.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")};$.filter=function(e){var t=[],r,n,a;if(typeof e!=="function")e=pe(e);for(var i=0,o=this.length;i<o;i++){t.push(r=[]);r.parentNode=(n=this[i]).parentNode;for(var s=0,l=n.length;s<l;s++){if((a=n[s])&&e.call(a,a.__data__,s,i)){r.push(a)}}}return W(t)};function pe(e){return function(){return K(this,e)}}$.order=function(){for(var e=-1,t=this.length;++e<t;){for(var r=this[e],n=r.length-1,a=r[n],i;--n>=0;){if(i=r[n]){if(a&&a!==i.nextSibling)a.parentNode.insertBefore(i,a);a=i}}}return this};$.sort=function(e){e=de.apply(this,arguments);for(var t=-1,r=this.length;++t<r;)this[t].sort(e);return this.order()};function de(e){if(!arguments.length)e=g;return function(t,r){return t&&r?e(t.__data__,r.__data__):!t-!r}}$.each=function(e){return ge(this,(function(t,r,n){e.call(t,t.__data__,r,n)}))};function ge(e,t){for(var r=0,n=e.length;r<n;r++){for(var a=e[r],i=0,o=a.length,s;i<o;i++){if(s=a[i])t(s,i,r)}}return e}$.call=function(e){var t=s(arguments);e.apply(t[0]=this,t);return this};$.empty=function(){return!this.node()};$.node=function(){for(var e=0,t=this.length;e<t;e++){for(var r=this[e],n=0,a=r.length;n<a;n++){var i=r[n];if(i)return i}}return null};$.size=function(){var e=0;ge(this,(function(){++e}));return e};function ye(e){Y(e,me);return e}var me=[];i.selection.enter=ye;i.selection.enter.prototype=me;me.append=$.append;me.empty=$.empty;me.node=$.node;me.call=$.call;me.size=$.size;me.select=function(e){var t=[],r,n,a,i,o;for(var s=-1,l=this.length;++s<l;){a=(i=this[s]).update;t.push(r=[]);r.parentNode=i.parentNode;for(var u=-1,f=i.length;++u<f;){if(o=i[u]){r.push(a[u]=n=e.call(i.parentNode,o.__data__,u,s));n.__data__=o.__data__}else{r.push(null)}}}return W(t)};me.insert=function(e,t){if(arguments.length<2)t=xe(this);return $.insert.call(this,e,t)};function xe(e){var t,r;return function(n,a,i){var o=e[i].update,s=o.length,l;if(i!=r)r=i,t=0;if(a>=t)t=a+1;while(!(l=o[t])&&++t<s);return l}}i.select=function(e){var t;if(typeof e==="string"){t=[X(e,l)];t.parentNode=l.documentElement}else{t=[e];t.parentNode=u(e)}return W([t])};i.selectAll=function(e){var t;if(typeof e==="string"){t=s(J(e,l));t.parentNode=l.documentElement}else{t=s(e);t.parentNode=null}return W([t])};$.on=function(e,t,r){var n=arguments.length;if(n<3){if(typeof e!=="string"){if(n<2)t=false;for(r in e)this.each(be(r,e[r],t));return this}if(n<2)return(n=this.node()["__on"+e])&&n._;r=false}return this.each(be(e,t,r))};function be(e,t,r){var n="__on"+e,a=e.indexOf("."),o=we;if(a>0)e=e.slice(0,a);var l=_e.get(e);if(l)e=l,o=Te;function u(){var t=this[n];if(t){this.removeEventListener(e,t,t.$);delete this[n]}}function f(){var a=o(t,s(arguments));u.call(this);this.addEventListener(e,this[n]=a,a.$=r);a._=t}function c(){var t=new RegExp("^__on([^.]+)"+i.requote(e)+"$"),r;for(var n in this){if(r=n.match(t)){var a=this[n];this.removeEventListener(r[1],a,a.$);delete this[n]}}}return a?t?f:u:t?j:c}var _e=i.map({mouseenter:"mouseover",mouseleave:"mouseout"});if(l){_e.forEach((function(e){if("on"+e in l)_e.remove(e)}))}function we(e,t){return function(r){var n=i.event;i.event=r;t[0]=this.__data__;try{e.apply(this,t)}finally{i.event=n}}}function Te(e,t){var r=we(e,t);return function(e){var t=this,n=e.relatedTarget;if(!n||n!==t&&!(n.compareDocumentPosition(t)&8)){r.call(t,e)}}}var ke,Ae=0;function Me(e){var t=".dragsuppress-"+ ++Ae,r="click"+t,n=i.select(f(e)).on("touchmove"+t,H).on("dragstart"+t,H).on("selectstart"+t,H);if(ke==null){ke="onselectstart"in e?false:B(e.style,"userSelect")}if(ke){var a=u(e).style,o=a[ke];a[ke]="none"}return function(e){n.on(t,null);if(ke)a[ke]=o;if(e){var i=function(){n.on(r,null)};n.on(r,(function(){H();i()}),true);setTimeout(i,0)}}}i.mouse=function(e){return Ee(e,q())};var Se=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ee(e,t){if(t.changedTouches)t=t.changedTouches[0];var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();if(Se<0){var a=f(e);if(a.scrollX||a.scrollY){r=i.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();Se=!(o.f||o.e);r.remove()}}if(Se)n.x=t.pageX,n.y=t.pageY;else n.x=t.clientX,n.y=t.clientY;n=n.matrixTransform(e.getScreenCTM().inverse());return[n.x,n.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}i.touch=function(e,t,r){if(arguments.length<3)r=t,t=q().changedTouches;if(t)for(var n=0,a=t.length,i;n<a;++n){if((i=t[n]).identifier===r){return Ee(e,i)}}};i.behavior.drag=function(){var e=G(a,"drag","dragstart","dragend"),t=null,r=o(j,i.mouse,f,"mousemove","mouseup"),n=o(Le,i.touch,R,"touchmove","touchend");function a(){this.on("mousedown.drag",r).on("touchstart.drag",n)}function o(r,n,a,o,s){return function(){var l=this,u=i.event.target.correspondingElement||i.event.target,f=l.parentNode,c=e.of(l,arguments),v=0,h=r(),p=".drag"+(h==null?"":"-"+h),d,g=i.select(a(u)).on(o+p,x).on(s+p,b),y=Me(u),m=n(f,h);if(t){d=t.apply(l,arguments);d=[d.x-m[0],d.y-m[1]]}else{d=[0,0]}c({type:"dragstart"});function x(){var e=n(f,h),t,r;if(!e)return;t=e[0]-m[0];r=e[1]-m[1];v|=t|r;m=e;c({type:"drag",x:e[0]+d[0],y:e[1]+d[1],dx:t,dy:r})}function b(){if(!n(f,h))return;g.on(o+p,null).on(s+p,null);y(v);c({type:"dragend"})}}}a.origin=function(e){if(!arguments.length)return t;t=e;return a};return i.rebind(a,e,"on")};function Le(){return i.event.changedTouches[0].identifier}i.touches=function(e,t){if(arguments.length<2)t=q().touches;return t?s(t).map((function(t){var r=Ee(e,t);r.identifier=t.identifier;return r})):[]};var Ce=1e-6,Ie=Ce*Ce,Pe=Math.PI,Oe=2*Pe,De=Oe-Ce,ze=Pe/2,Re=Pe/180,Fe=180/Pe;function Be(e){return e>0?1:e<0?-1:0}function Ne(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0])}function je(e){return e>1?0:e<-1?Pe:Math.acos(e)}function Ue(e){return e>1?ze:e<-1?-ze:Math.asin(e)}function Ve(e){return((e=Math.exp(e))-1/e)/2}function He(e){return((e=Math.exp(e))+1/e)/2}function qe(e){return((e=Math.exp(2*e))-1)/(e+1)}function Ge(e){return(e=Math.sin(e/2))*e}var Ze=Math.SQRT2,Ye=2,We=4;i.interpolateZoom=function(e,t){var r=e[0],n=e[1],a=e[2],i=t[0],o=t[1],s=t[2],l=i-r,u=o-n,f=l*l+u*u,c,v;if(f<Ie){v=Math.log(s/a)/Ze;c=function(e){return[r+e*l,n+e*u,a*Math.exp(Ze*e*v)]}}else{var h=Math.sqrt(f),p=(s*s-a*a+We*f)/(2*a*Ye*h),d=(s*s-a*a-We*f)/(2*s*Ye*h),g=Math.log(Math.sqrt(p*p+1)-p),y=Math.log(Math.sqrt(d*d+1)-d);v=(y-g)/Ze;c=function(e){var t=e*v,i=He(g),o=a/(Ye*h)*(i*qe(Ze*t+g)-Ve(g));return[r+o*l,n+o*u,a*i/He(Ze*t+g)]}}c.duration=v*1e3;return c};i.behavior.zoom=function(){var e={x:0,y:0,k:1},t,r,n,a=[960,500],o=Xe,s=250,u=0,c="mousedown.zoom",v="mousemove.zoom",h="mouseup.zoom",p,d="touchstart.zoom",g,y=G(w,"zoomstart","zoom","zoomend"),m,x,b,_;if(!Ke){Ke="onwheel"in l?(Je=function(){return-i.event.deltaY*(i.event.deltaMode?120:1)},"wheel"):"onmousewheel"in l?(Je=function(){return i.event.wheelDelta},"mousewheel"):(Je=function(){return-i.event.detail},"MozMousePixelScroll")}function w(e){e.on(c,P).on(Ke+".zoom",D).on("dblclick.zoom",z).on(d,O)}w.event=function(t){t.each((function(){var t=y.of(this,arguments),n=e;if(Ki){i.select(this).transition().each("start.zoom",(function(){e=this.__chart__||{x:0,y:0,k:1};L(t)})).tween("zoom:zoom",(function(){var o=a[0],s=a[1],l=r?r[0]:o/2,u=r?r[1]:s/2,f=i.interpolateZoom([(l-e.x)/e.k,(u-e.y)/e.k,o/e.k],[(l-n.x)/n.k,(u-n.y)/n.k,o/n.k]);return function(r){var n=f(r),a=o/n[2];this.__chart__=e={x:l-n[0]*a,y:u-n[1]*a,k:a};C(t)}})).each("interrupt.zoom",(function(){I(t)})).each("end.zoom",(function(){I(t)}))}else{this.__chart__=e;L(t);C(t);I(t)}}))};w.translate=function(t){if(!arguments.length)return[e.x,e.y];e={x:+t[0],y:+t[1],k:e.k};E();return w};w.scale=function(t){if(!arguments.length)return e.k;e={x:e.x,y:e.y,k:null};A(+t);E();return w};w.scaleExtent=function(e){if(!arguments.length)return o;o=e==null?Xe:[+e[0],+e[1]];return w};w.center=function(e){if(!arguments.length)return n;n=e&&[+e[0],+e[1]];return w};w.size=function(e){if(!arguments.length)return a;a=e&&[+e[0],+e[1]];return w};w.duration=function(e){if(!arguments.length)return s;s=+e;return w};w.x=function(t){if(!arguments.length)return x;x=t;m=t.copy();e={x:0,y:0,k:1};return w};w.y=function(t){if(!arguments.length)return _;_=t;b=t.copy();e={x:0,y:0,k:1};return w};function T(t){return[(t[0]-e.x)/e.k,(t[1]-e.y)/e.k]}function k(t){return[t[0]*e.k+e.x,t[1]*e.k+e.y]}function A(t){e.k=Math.max(o[0],Math.min(o[1],t))}function M(t,r){r=k(r);e.x+=t[0]-r[0];e.y+=t[1]-r[1]}function S(t,n,a,o){t.__chart__={x:e.x,y:e.y,k:e.k};A(Math.pow(2,o));M(r=n,a);t=i.select(t);if(s>0)t=t.transition().duration(s);t.call(w.event)}function E(){if(x)x.domain(m.range().map((function(t){return(t-e.x)/e.k})).map(m.invert));if(_)_.domain(b.range().map((function(t){return(t-e.y)/e.k})).map(b.invert))}function L(e){if(!u++)e({type:"zoomstart"})}function C(t){E();t({type:"zoom",scale:e.k,translate:[e.x,e.y]})}function I(e){if(!--u)e({type:"zoomend"}),r=null}function P(){var e=this,t=y.of(e,arguments),r=0,n=i.select(f(e)).on(v,s).on(h,l),a=T(i.mouse(e)),o=Me(e);Zi.call(e);L(t);function s(){r=1;M(i.mouse(e),a);C(t)}function l(){n.on(v,null).on(h,null);o(r);I(t)}}function O(){var t=this,r=y.of(t,arguments),n={},a=0,o,s=".zoom-"+i.event.changedTouches[0].identifier,l="touchmove"+s,u="touchend"+s,f=[],v=i.select(t),h=Me(t);m();L(r);v.on(c,null).on(d,m);function p(){var r=i.touches(t);o=e.k;r.forEach((function(e){if(e.identifier in n)n[e.identifier]=T(e)}));return r}function m(){var r=i.event.target;i.select(r).on(l,x).on(u,b);f.push(r);var o=i.event.changedTouches;for(var s=0,c=o.length;s<c;++s){n[o[s].identifier]=null}var v=p(),h=Date.now();if(v.length===1){if(h-g<500){var d=v[0];S(t,d,n[d.identifier],Math.floor(Math.log(e.k)/Math.LN2)+1);H()}g=h}else if(v.length>1){var d=v[0],y=v[1],m=d[0]-y[0],_=d[1]-y[1];a=m*m+_*_}}function x(){var e=i.touches(t),s,l,u,f;Zi.call(t);for(var c=0,v=e.length;c<v;++c,f=null){u=e[c];if(f=n[u.identifier]){if(l)break;s=u,l=f}}if(f){var h=(h=u[0]-s[0])*h+(h=u[1]-s[1])*h,p=a&&Math.sqrt(h/a);s=[(s[0]+u[0])/2,(s[1]+u[1])/2];l=[(l[0]+f[0])/2,(l[1]+f[1])/2];A(p*o)}g=null;M(s,l);C(r)}function b(){if(i.event.touches.length){var e=i.event.changedTouches;for(var t=0,a=e.length;t<a;++t){delete n[e[t].identifier]}for(var o in n){return void p()}}i.selectAll(f).on(s,null);v.on(c,P).on(d,O);h();I(r)}}function D(){var a=y.of(this,arguments);if(p)clearTimeout(p);else Zi.call(this),t=T(r=n||i.mouse(this)),L(a);p=setTimeout((function(){p=null;I(a)}),50);H();A(Math.pow(2,Je()*.002)*e.k);M(r,t);C(a)}function z(){var t=i.mouse(this),r=Math.log(e.k)/Math.LN2;S(this,t,T(t),i.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1)}return i.rebind(w,y,"on")};var Xe=[0,Infinity],Je,Ke;i.color=$e;function $e(){}$e.prototype.toString=function(){return this.rgb()+""};i.hsl=Qe;function Qe(e,t,r){return this instanceof Qe?void(this.h=+e,this.s=+t,this.l=+r):arguments.length<2?e instanceof Qe?new Qe(e.h,e.s,e.l):_t(""+e,wt,Qe):new Qe(e,t,r)}var et=Qe.prototype=new $e;et.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);return new Qe(this.h,this.s,this.l/e)};et.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new Qe(this.h,this.s,e*this.l)};et.rgb=function(){return tt(this.h,this.s,this.l)};function tt(e,t,r){var n,a;e=isNaN(e)?0:(e%=360)<0?e+360:e;t=isNaN(t)?0:t<0?0:t>1?1:t;r=r<0?0:r>1?1:r;a=r<=.5?r*(1+t):r+t-r*t;n=2*r-a;function i(e){if(e>360)e-=360;else if(e<0)e+=360;if(e<60)return n+(a-n)*e/60;if(e<180)return a;if(e<240)return n+(a-n)*(240-e)/60;return n}function o(e){return Math.round(i(e)*255)}return new gt(o(e+120),o(e),o(e-120))}i.hcl=rt;function rt(e,t,r){return this instanceof rt?void(this.h=+e,this.c=+t,this.l=+r):arguments.length<2?e instanceof rt?new rt(e.h,e.c,e.l):e instanceof it?vt(e.l,e.a,e.b):vt((e=Tt((e=i.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new rt(e,t,r)}var nt=rt.prototype=new $e;nt.brighter=function(e){return new rt(this.h,this.c,Math.min(100,this.l+ot*(arguments.length?e:1)))};nt.darker=function(e){return new rt(this.h,this.c,Math.max(0,this.l-ot*(arguments.length?e:1)))};nt.rgb=function(){return at(this.h,this.c,this.l).rgb()};function at(e,t,r){if(isNaN(e))e=0;if(isNaN(t))t=0;return new it(r,Math.cos(e*=Re)*t,Math.sin(e)*t)}i.lab=it;function it(e,t,r){return this instanceof it?void(this.l=+e,this.a=+t,this.b=+r):arguments.length<2?e instanceof it?new it(e.l,e.a,e.b):e instanceof rt?at(e.h,e.c,e.l):Tt((e=gt(e)).r,e.g,e.b):new it(e,t,r)}var ot=18;var st=.95047,lt=1,ut=1.08883;var ft=it.prototype=new $e;ft.brighter=function(e){return new it(Math.min(100,this.l+ot*(arguments.length?e:1)),this.a,this.b)};ft.darker=function(e){return new it(Math.max(0,this.l-ot*(arguments.length?e:1)),this.a,this.b)};ft.rgb=function(){return ct(this.l,this.a,this.b)};function ct(e,t,r){var n=(e+16)/116,a=n+t/500,i=n-r/200;a=ht(a)*st;n=ht(n)*lt;i=ht(i)*ut;return new gt(dt(3.2404542*a-1.5371385*n-.4985314*i),dt(-.969266*a+1.8760108*n+.041556*i),dt(.0556434*a-.2040259*n+1.0572252*i))}function vt(e,t,r){return e>0?new rt(Math.atan2(r,t)*Fe,Math.sqrt(t*t+r*r),e):new rt(NaN,NaN,e)}function ht(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function pt(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function dt(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}i.rgb=gt;function gt(e,t,r){return this instanceof gt?void(this.r=~~e,this.g=~~t,this.b=~~r):arguments.length<2?e instanceof gt?new gt(e.r,e.g,e.b):_t(""+e,gt,tt):new gt(e,t,r)}function yt(e){return new gt(e>>16,e>>8&255,e&255)}function mt(e){return yt(e)+""}var xt=gt.prototype=new $e;xt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,r=this.g,n=this.b,a=30;if(!t&&!r&&!n)return new gt(a,a,a);if(t&&t<a)t=a;if(r&&r<a)r=a;if(n&&n<a)n=a;return new gt(Math.min(255,t/e),Math.min(255,r/e),Math.min(255,n/e))};xt.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new gt(e*this.r,e*this.g,e*this.b)};xt.hsl=function(){return wt(this.r,this.g,this.b)};xt.toString=function(){return"#"+bt(this.r)+bt(this.g)+bt(this.b)};function bt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function _t(e,t,r){var n=0,a=0,i=0,o,s,l;o=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase());if(o){s=o[2].split(",");switch(o[1]){case"hsl":{return r(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100)}case"rgb":{return t(At(s[0]),At(s[1]),At(s[2]))}}}if(l=Mt.get(e)){return t(l.r,l.g,l.b)}if(e!=null&&e.charAt(0)==="#"&&!isNaN(l=parseInt(e.slice(1),16))){if(e.length===4){n=(l&3840)>>4;n=n>>4|n;a=l&240;a=a>>4|a;i=l&15;i=i<<4|i}else if(e.length===7){n=(l&16711680)>>16;a=(l&65280)>>8;i=l&255}}return t(n,a,i)}function wt(e,t,r){var n=Math.min(e/=255,t/=255,r/=255),a=Math.max(e,t,r),i=a-n,o,s,l=(a+n)/2;if(i){s=l<.5?i/(a+n):i/(2-a-n);if(e==a)o=(t-r)/i+(t<r?6:0);else if(t==a)o=(r-e)/i+2;else o=(e-t)/i+4;o*=60}else{o=NaN;s=l>0&&l<1?0:o}return new Qe(o,s,l)}function Tt(e,t,r){e=kt(e);t=kt(t);r=kt(r);var n=pt((.4124564*e+.3575761*t+.1804375*r)/st),a=pt((.2126729*e+.7151522*t+.072175*r)/lt),i=pt((.0193339*e+.119192*t+.9503041*r)/ut);return it(116*a-16,500*(n-a),200*(a-i))}function kt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function At(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}var Mt=i.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Mt.forEach((function(e,t){Mt.set(e,yt(t))}));function St(e){return typeof e==="function"?e:function(){return e}}i.functor=St;i.xhr=Et(R);function Et(e){return function(t,r,n){if(arguments.length===2&&typeof r==="function")n=r,r=null;return Lt(t,r,e,n)}}function Lt(e,t,r,n){var a={},o=i.dispatch("beforesend","progress","load","error"),l={},u=new XMLHttpRequest,f=null;if(self.XDomainRequest&&!("withCredentials"in u)&&/^(http(s)?:)?\/\//.test(e))u=new XDomainRequest;"onload"in u?u.onload=u.onerror=c:u.onreadystatechange=function(){u.readyState>3&&c()};function c(){var e=u.status,t;if(!e&&It(u)||e>=200&&e<300||e===304){try{t=r.call(a,u)}catch(co){o.error.call(a,co);return}o.load.call(a,t)}else{o.error.call(a,u)}}u.onprogress=function(e){var t=i.event;i.event=e;try{o.progress.call(a,u)}finally{i.event=t}};a.header=function(e,t){e=(e+"").toLowerCase();if(arguments.length<2)return l[e];if(t==null)delete l[e];else l[e]=t+"";return a};a.mimeType=function(e){if(!arguments.length)return t;t=e==null?null:e+"";return a};a.responseType=function(e){if(!arguments.length)return f;f=e;return a};a.response=function(e){r=e;return a};["get","post"].forEach((function(e){a[e]=function(){return a.send.apply(a,[e].concat(s(arguments)))}}));a.send=function(r,n,i){if(arguments.length===2&&typeof n==="function")i=n,n=null;u.open(r,e,true);if(t!=null&&!("accept"in l))l["accept"]=t+",*/*";if(u.setRequestHeader)for(var s in l)u.setRequestHeader(s,l[s]);if(t!=null&&u.overrideMimeType)u.overrideMimeType(t);if(f!=null)u.responseType=f;if(i!=null)a.on("error",i).on("load",(function(e){i(null,e)}));o.beforesend.call(a,u);u.send(n==null?null:n);return a};a.abort=function(){u.abort();return a};i.rebind(a,o,"on");return n==null?a:a.get(Ct(n))}function Ct(e){return e.length===1?function(t,r){e(t==null?r:null)}:e}function It(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}i.dsv=function(e,t){var r=new RegExp('["'+e+"\n]"),n=e.charCodeAt(0);function a(e,r,n){if(arguments.length<3)n=r,r=null;var a=Lt(e,t,r==null?i:o(r),n);a.row=function(e){return arguments.length?a.response((r=e)==null?i:o(e)):r};return a}function i(e){return a.parse(e.responseText)}function o(e){return function(t){return a.parse(t.responseText,e)}}a.parse=function(e,t){var r;return a.parseRows(e,(function(e,n){if(r)return r(e,n-1);var a=function(t){var r={};var n=e.length;for(var a=0;a<n;++a){r[e[a]]=t[a]}return r};r=t?function(e,r){return t(a(e),r)}:a}))};a.parseRows=function(e,t){var r={},a={},i=[],o=e.length,s=0,l=0,u,f;function c(){if(s>=o)return a;if(f)return f=false,r;var t=s;if(e.charCodeAt(t)===34){var i=t;while(i++<o){if(e.charCodeAt(i)===34){if(e.charCodeAt(i+1)!==34)break;++i}}s=i+2;var l=e.charCodeAt(i+1);if(l===13){f=true;if(e.charCodeAt(i+2)===10)++s}else if(l===10){f=true}return e.slice(t+1,i).replace(/""/g,'"')}while(s<o){var l=e.charCodeAt(s++),u=1;if(l===10)f=true;else if(l===13){f=true;if(e.charCodeAt(s)===10)++s,++u}else if(l!==n)continue;return e.slice(t,s-u)}return e.slice(t)}while((u=c())!==a){var v=[];while(u!==r&&u!==a){v.push(u);u=c()}if(t&&(v=t(v,l++))==null)continue;i.push(v)}return i};a.format=function(t){if(Array.isArray(t[0]))return a.formatRows(t);var r=new z,n=[];t.forEach((function(e){for(var t in e){if(!r.has(t)){n.push(r.add(t))}}}));return[n.map(l).join(e)].concat(t.map((function(t){return n.map((function(e){return l(t[e])})).join(e)}))).join("\n")};a.formatRows=function(e){return e.map(s).join("\n")};function s(t){return t.map(l).join(e)}function l(e){return r.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return a};i.csv=i.dsv(",","text/csv");i.tsv=i.dsv("\t","text/tab-separated-values");var Pt,Ot,Dt,zt,Rt=this[B(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};i.timer=function(){Ft.apply(this,arguments)};function Ft(e,t,r){var n=arguments.length;if(n<2)t=0;if(n<3)r=Date.now();var a=r+t,i={c:e,t:a,n:null};if(Ot)Ot.n=i;else Pt=i;Ot=i;if(!Dt){zt=clearTimeout(zt);Dt=1;Rt(Bt)}return i}function Bt(){var e=Nt(),t=jt()-e;if(t>24){if(isFinite(t)){clearTimeout(zt);zt=setTimeout(Bt,t)}Dt=0}else{Dt=1;Rt(Bt)}}i.timer.flush=function(){Nt();jt()};function Nt(){var e=Date.now(),t=Pt;while(t){if(e>=t.t&&t.c(e-t.t))t.c=null;t=t.n}return e}function jt(){var e,t=Pt,r=Infinity;while(t){if(t.c){if(t.t<r)r=t.t;t=(e=t).n}else{t=e?e.n=t.n:Pt=t.n}}Ot=e;return r}i.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};i.geom={};function Ut(e){return e[0]}function Vt(e){return e[1]}i.geom.hull=function(e){var t=Ut,r=Vt;if(arguments.length)return n(e);function n(e){if(e.length<3)return[];var n=St(t),a=St(r),i,o=e.length,s=[],l=[];for(i=0;i<o;i++){s.push([+n.call(this,e[i],i),+a.call(this,e[i],i),i])}s.sort(qt);for(i=0;i<o;i++)l.push([s[i][0],-s[i][1]]);var u=Ht(s),f=Ht(l);var c=f[0]===u[0],v=f[f.length-1]===u[u.length-1],h=[];for(i=u.length-1;i>=0;--i)h.push(e[s[u[i]][2]]);for(i=+c;i<f.length-v;++i)h.push(e[s[f[i]][2]]);return h}n.x=function(e){return arguments.length?(t=e,n):t};n.y=function(e){return arguments.length?(r=e,n):r};return n};function Ht(e){var t=e.length,r=[0,1],n=2;for(var a=2;a<t;a++){while(n>1&&Ne(e[r[n-2]],e[r[n-1]],e[a])<=0)--n;r[n++]=a}return r.slice(0,n)}function qt(e,t){return e[0]-t[0]||e[1]-t[1]}i.geom.polygon=function(e){Y(e,Gt);return e};var Gt=i.geom.polygon.prototype=[];Gt.area=function(){var e=-1,t=this.length,r,n=this[t-1],a=0;while(++e<t){r=n;n=this[e];a+=r[1]*n[0]-r[0]*n[1]}return a*.5};Gt.centroid=function(e){var t=-1,r=this.length,n=0,a=0,i,o=this[r-1],s;if(!arguments.length)e=-1/(6*this.area());while(++t<r){i=o;o=this[t];s=i[0]*o[1]-o[0]*i[1];n+=(i[0]+o[0])*s;a+=(i[1]+o[1])*s}return[n*e,a*e]};Gt.clip=function(e){var t,r=Wt(e),n=-1,a=this.length-Wt(this),i,o,s=this[a-1],l,u,f;while(++n<a){t=e.slice();e.length=0;l=this[n];u=t[(o=t.length-r)-1];i=-1;while(++i<o){f=t[i];if(Zt(f,s,l)){if(!Zt(u,s,l)){e.push(Yt(u,f,s,l))}e.push(f)}else if(Zt(u,s,l)){e.push(Yt(u,f,s,l))}u=f}if(r)e.push(e[0]);s=l}return e};function Zt(e,t,r){return(r[0]-t[0])*(e[1]-t[1])<(r[1]-t[1])*(e[0]-t[0])}function Yt(e,t,r,n){var a=e[0],i=r[0],o=t[0]-a,s=n[0]-i,l=e[1],u=r[1],f=t[1]-l,c=n[1]-u,v=(s*(l-u)-c*(a-i))/(c*o-s*f);return[a+v*o,l+v*f]}function Wt(e){var t=e[0],r=e[e.length-1];return!(t[0]-r[0]||t[1]-r[1])}var Xt,Jt,Kt,$t=[],Qt,er,tr=[];function rr(){kr(this);this.edge=this.site=this.circle=null}function nr(e){var t=$t.pop()||new rr;t.site=e;return t}function ar(e){pr(e);Kt.remove(e);$t.push(e);kr(e)}function ir(e){var t=e.circle,r=t.x,n=t.cy,a={x:r,y:n},i=e.P,o=e.N,s=[e];ar(e);var l=i;while(l.circle&&w(r-l.circle.x)<Ce&&w(n-l.circle.cy)<Ce){i=l.P;s.unshift(l);ar(l);l=i}s.unshift(l);pr(l);var u=o;while(u.circle&&w(r-u.circle.x)<Ce&&w(n-u.circle.cy)<Ce){o=u.N;s.push(u);ar(u);u=o}s.push(u);pr(u);var f=s.length,c;for(c=1;c<f;++c){u=s[c];l=s[c-1];_r(u.edge,l.site,u.site,a)}l=s[0];u=s[f-1];u.edge=xr(l.site,u.site,null,a);hr(l);hr(u)}function or(e){var t=e.x,r=e.y,n,a,i,o,s=Kt._;while(s){i=sr(s,r)-t;if(i>Ce)s=s.L;else{o=t-lr(s,r);if(o>Ce){if(!s.R){n=s;break}s=s.R}else{if(i>-Ce){n=s.P;a=s}else if(o>-Ce){n=s;a=s.N}else{n=a=s}break}}}var l=nr(e);Kt.insert(n,l);if(!n&&!a)return;if(n===a){pr(n);a=nr(n.site);Kt.insert(l,a);l.edge=a.edge=xr(n.site,l.site);hr(n);hr(a);return}if(!a){l.edge=xr(n.site,l.site);return}pr(n);pr(a);var u=n.site,f=u.x,c=u.y,v=e.x-f,h=e.y-c,p=a.site,d=p.x-f,g=p.y-c,y=2*(v*g-h*d),m=v*v+h*h,x=d*d+g*g,b={x:(g*m-h*x)/y+f,y:(v*x-d*m)/y+c};_r(a.edge,u,p,b);l.edge=xr(u,e,null,b);a.edge=xr(e,p,null,b);hr(n);hr(a)}function sr(e,t){var r=e.site,n=r.x,a=r.y,i=a-t;if(!i)return n;var o=e.P;if(!o)return-Infinity;r=o.site;var s=r.x,l=r.y,u=l-t;if(!u)return s;var f=s-n,c=1/i-1/u,v=f/u;if(c)return(-v+Math.sqrt(v*v-2*c*(f*f/(-2*u)-l+u/2+a-i/2)))/c+n;return(n+s)/2}function lr(e,t){var r=e.N;if(r)return sr(r,t);var n=e.site;return n.y===t?n.x:Infinity}function ur(e){this.site=e;this.edges=[]}ur.prototype.prepare=function(){var e=this.edges,t=e.length,r;while(t--){r=e[t].edge;if(!r.b||!r.a)e.splice(t,1)}e.sort(cr);return e.length};function fr(e){var t=e[0][0],r=e[1][0],n=e[0][1],a=e[1][1],i,o,s,l,u=Jt,f=u.length,c,v,h,p,d,g;while(f--){c=u[f];if(!c||!c.prepare())continue;h=c.edges;p=h.length;v=0;while(v<p){g=h[v].end(),s=g.x,l=g.y;d=h[++v%p].start(),i=d.x,o=d.y;if(w(s-i)>Ce||w(l-o)>Ce){h.splice(v,0,new wr(br(c.site,g,w(s-t)<Ce&&a-l>Ce?{x:t,y:w(i-t)<Ce?o:a}:w(l-a)<Ce&&r-s>Ce?{x:w(o-a)<Ce?i:r,y:a}:w(s-r)<Ce&&l-n>Ce?{x:r,y:w(i-r)<Ce?o:n}:w(l-n)<Ce&&s-t>Ce?{x:w(o-n)<Ce?i:t,y:n}:null),c.site,null));++p}}}}function cr(e,t){return t.angle-e.angle}function vr(){kr(this);this.x=this.y=this.arc=this.site=this.cy=null}function hr(e){var t=e.P,r=e.N;if(!t||!r)return;var n=t.site,a=e.site,i=r.site;if(n===i)return;var o=a.x,s=a.y,l=n.x-o,u=n.y-s,f=i.x-o,c=i.y-s;var v=2*(l*c-u*f);if(v>=-Ie)return;var h=l*l+u*u,p=f*f+c*c,d=(c*h-u*p)/v,g=(l*p-f*h)/v,c=g+s;var y=tr.pop()||new vr;y.arc=e;y.site=a;y.x=d+o;y.y=c+Math.sqrt(d*d+g*g);y.cy=c;e.circle=y;var m=null,x=er._;while(x){if(y.y<x.y||y.y===x.y&&y.x<=x.x){if(x.L)x=x.L;else{m=x.P;break}}else{if(x.R)x=x.R;else{m=x;break}}}er.insert(m,y);if(!m)Qt=y}function pr(e){var t=e.circle;if(t){if(!t.P)Qt=t.N;er.remove(t);tr.push(t);kr(t);e.circle=null}}function dr(e,t,r,n){return function(a){var i=a.a,o=a.b,s=i.x,l=i.y,u=o.x,f=o.y,c=0,v=1,h=u-s,p=f-l,d;d=e-s;if(!h&&d>0)return;d/=h;if(h<0){if(d<c)return;if(d<v)v=d}else if(h>0){if(d>v)return;if(d>c)c=d}d=r-s;if(!h&&d<0)return;d/=h;if(h<0){if(d>v)return;if(d>c)c=d}else if(h>0){if(d<c)return;if(d<v)v=d}d=t-l;if(!p&&d>0)return;d/=p;if(p<0){if(d<c)return;if(d<v)v=d}else if(p>0){if(d>v)return;if(d>c)c=d}d=n-l;if(!p&&d<0)return;d/=p;if(p<0){if(d>v)return;if(d>c)c=d}else if(p>0){if(d<c)return;if(d<v)v=d}if(c>0)a.a={x:s+c*h,y:l+c*p};if(v<1)a.b={x:s+v*h,y:l+v*p};return a}}function gr(e){var t=Xt,r=dr(e[0][0],e[0][1],e[1][0],e[1][1]),n=t.length,a;while(n--){a=t[n];if(!yr(a,e)||!r(a)||w(a.a.x-a.b.x)<Ce&&w(a.a.y-a.b.y)<Ce){a.a=a.b=null;t.splice(n,1)}}}function yr(e,t){var r=e.b;if(r)return true;var n=e.a,a=t[0][0],i=t[1][0],o=t[0][1],s=t[1][1],l=e.l,u=e.r,f=l.x,c=l.y,v=u.x,h=u.y,p=(f+v)/2,d=(c+h)/2,g,y;if(h===c){if(p<a||p>=i)return;if(f>v){if(!n)n={x:p,y:o};else if(n.y>=s)return;r={x:p,y:s}}else{if(!n)n={x:p,y:s};else if(n.y<o)return;r={x:p,y:o}}}else{g=(f-v)/(h-c);y=d-g*p;if(g<-1||g>1){if(f>v){if(!n)n={x:(o-y)/g,y:o};else if(n.y>=s)return;r={x:(s-y)/g,y:s}}else{if(!n)n={x:(s-y)/g,y:s};else if(n.y<o)return;r={x:(o-y)/g,y:o}}}else{if(c<h){if(!n)n={x:a,y:g*a+y};else if(n.x>=i)return;r={x:i,y:g*i+y}}else{if(!n)n={x:i,y:g*i+y};else if(n.x<a)return;r={x:a,y:g*a+y}}}}e.a=n;e.b=r;return true}function mr(e,t){this.l=e;this.r=t;this.a=this.b=null}function xr(e,t,r,n){var a=new mr(e,t);Xt.push(a);if(r)_r(a,e,t,r);if(n)_r(a,t,e,n);Jt[e.i].edges.push(new wr(a,e,t));Jt[t.i].edges.push(new wr(a,t,e));return a}function br(e,t,r){var n=new mr(e,null);n.a=t;n.b=r;Xt.push(n);return n}function _r(e,t,r,n){if(!e.a&&!e.b){e.a=n;e.l=t;e.r=r}else if(e.l===r){e.b=n}else{e.a=n}}function wr(e,t,r){var n=e.a,a=e.b;this.edge=e;this.site=t;this.angle=r?Math.atan2(r.y-t.y,r.x-t.x):e.l===t?Math.atan2(a.x-n.x,n.y-a.y):Math.atan2(n.x-a.x,a.y-n.y)}wr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function Tr(){this._=null}function kr(e){e.U=e.C=e.L=e.R=e.P=e.N=null}Tr.prototype={insert:function(e,t){var r,n,a;if(e){t.P=e;t.N=e.N;if(e.N)e.N.P=t;e.N=t;if(e.R){e=e.R;while(e.L)e=e.L;e.L=t}else{e.R=t}r=e}else if(this._){e=Sr(this._);t.P=null;t.N=e;e.P=e.L=t;r=e}else{t.P=t.N=null;this._=t;r=null}t.L=t.R=null;t.U=r;t.C=true;e=t;while(r&&r.C){n=r.U;if(r===n.L){a=n.R;if(a&&a.C){r.C=a.C=false;n.C=true;e=n}else{if(e===r.R){Ar(this,r);e=r;r=e.U}r.C=false;n.C=true;Mr(this,n)}}else{a=n.L;if(a&&a.C){r.C=a.C=false;n.C=true;e=n}else{if(e===r.L){Mr(this,r);e=r;r=e.U}r.C=false;n.C=true;Ar(this,n)}}r=e.U}this._.C=false},remove:function(e){if(e.N)e.N.P=e.P;if(e.P)e.P.N=e.N;e.N=e.P=null;var t=e.U,r,n=e.L,a=e.R,i,o;if(!n)i=a;else if(!a)i=n;else i=Sr(a);if(t){if(t.L===e)t.L=i;else t.R=i}else{this._=i}if(n&&a){o=i.C;i.C=e.C;i.L=n;n.U=i;if(i!==a){t=i.U;i.U=e.U;e=i.R;t.L=e;i.R=a;a.U=i}else{i.U=t;t=i;e=i.R}}else{o=e.C;e=i}if(e)e.U=t;if(o)return;if(e&&e.C){e.C=false;return}do{if(e===this._)break;if(e===t.L){r=t.R;if(r.C){r.C=false;t.C=true;Ar(this,t);r=t.R}if(r.L&&r.L.C||r.R&&r.R.C){if(!r.R||!r.R.C){r.L.C=false;r.C=true;Mr(this,r);r=t.R}r.C=t.C;t.C=r.R.C=false;Ar(this,t);e=this._;break}}else{r=t.L;if(r.C){r.C=false;t.C=true;Mr(this,t);r=t.L}if(r.L&&r.L.C||r.R&&r.R.C){if(!r.L||!r.L.C){r.R.C=false;r.C=true;Ar(this,r);r=t.L}r.C=t.C;t.C=r.L.C=false;Mr(this,t);e=this._;break}}r.C=true;e=t;t=t.U}while(!e.C);if(e)e.C=false}};function Ar(e,t){var r=t,n=t.R,a=r.U;if(a){if(a.L===r)a.L=n;else a.R=n}else{e._=n}n.U=a;r.U=n;r.R=n.L;if(r.R)r.R.U=r;n.L=r}function Mr(e,t){var r=t,n=t.L,a=r.U;if(a){if(a.L===r)a.L=n;else a.R=n}else{e._=n}n.U=a;r.U=n;r.L=n.R;if(r.L)r.L.U=r;n.R=r}function Sr(e){while(e.L)e=e.L;return e}function Er(e,t){var r=e.sort(Lr).pop(),n,a,i;Xt=[];Jt=new Array(e.length);Kt=new Tr;er=new Tr;while(true){i=Qt;if(r&&(!i||r.y<i.y||r.y===i.y&&r.x<i.x)){if(r.x!==n||r.y!==a){Jt[r.i]=new ur(r);or(r);n=r.x,a=r.y}r=e.pop()}else if(i){ir(i.arc)}else{break}}if(t)gr(t),fr(t);var o={cells:Jt,edges:Xt};Kt=er=Xt=Jt=null;return o}function Lr(e,t){return t.y-e.y||t.x-e.x}i.geom.voronoi=function(e){var t=Ut,r=Vt,n=t,a=r,i=Cr;if(e)return o(e);function o(e){var t=new Array(e.length),r=i[0][0],n=i[0][1],a=i[1][0],o=i[1][1];Er(s(e),i).cells.forEach((function(i,s){var l=i.edges,u=i.site,f=t[s]=l.length?l.map((function(e){var t=e.start();return[t.x,t.y]})):u.x>=r&&u.x<=a&&u.y>=n&&u.y<=o?[[r,o],[a,o],[a,n],[r,n]]:[];f.point=e[s]}));return t}function s(e){return e.map((function(e,t){return{x:Math.round(n(e,t)/Ce)*Ce,y:Math.round(a(e,t)/Ce)*Ce,i:t}}))}o.links=function(e){return Er(s(e)).edges.filter((function(e){return e.l&&e.r})).map((function(t){return{source:e[t.l.i],target:e[t.r.i]}}))};o.triangles=function(e){var t=[];Er(s(e)).cells.forEach((function(r,n){var a=r.site,i=r.edges.sort(cr),o=-1,s=i.length,l,u,f=i[s-1].edge,c=f.l===a?f.r:f.l;while(++o<s){l=f;u=c;f=i[o].edge;c=f.l===a?f.r:f.l;if(n<u.i&&n<c.i&&Ir(a,u,c)<0){t.push([e[n],e[u.i],e[c.i]])}}}));return t};o.x=function(e){return arguments.length?(n=St(t=e),o):t};o.y=function(e){return arguments.length?(a=St(r=e),o):r};o.clipExtent=function(e){if(!arguments.length)return i===Cr?null:i;i=e==null?Cr:e;return o};o.size=function(e){if(!arguments.length)return i===Cr?null:i&&i[1];return o.clipExtent(e&&[[0,0],e])};return o};var Cr=[[-1e6,-1e6],[1e6,1e6]];function Ir(e,t,r){return(e.x-r.x)*(t.y-e.y)-(e.x-t.x)*(r.y-e.y)}i.geom.delaunay=function(e){return i.geom.voronoi().triangles(e)};i.geom.quadtree=function(e,t,r,n,a){var i=Ut,o=Vt,s;if(s=arguments.length){i=Pr;o=Or;if(s===3){a=r;n=t;r=t=0}return l(e)}function l(e){var l,u=St(i),f=St(o),c,v,h,p,d,g,y,m;if(t!=null){d=t,g=r,y=n,m=a}else{y=m=-(d=g=Infinity);c=[],v=[];p=e.length;if(s)for(h=0;h<p;++h){l=e[h];if(l.x<d)d=l.x;if(l.y<g)g=l.y;if(l.x>y)y=l.x;if(l.y>m)m=l.y;c.push(l.x);v.push(l.y)}else for(h=0;h<p;++h){var x=+u(l=e[h],h),b=+f(l,h);if(x<d)d=x;if(b<g)g=b;if(x>y)y=x;if(b>m)m=b;c.push(x);v.push(b)}}var _=y-d,T=m-g;if(_>T)m=g+_;else y=d+T;function k(e,t,r,n,a,i,o,s){if(isNaN(r)||isNaN(n))return;if(e.leaf){var l=e.x,u=e.y;if(l!=null){if(w(l-r)+w(u-n)<.01){A(e,t,r,n,a,i,o,s)}else{var f=e.point;e.x=e.y=e.point=null;A(e,f,l,u,a,i,o,s);A(e,t,r,n,a,i,o,s)}}else{e.x=r,e.y=n,e.point=t}}else{A(e,t,r,n,a,i,o,s)}}function A(e,t,r,n,a,i,o,s){var l=(a+o)*.5,u=(i+s)*.5,f=r>=l,c=n>=u,v=c<<1|f;e.leaf=false;e=e.nodes[v]||(e.nodes[v]=Dr());if(f)a=l;else o=l;if(c)i=u;else s=u;k(e,t,r,n,a,i,o,s)}var M=Dr();M.add=function(e){k(M,e,+u(e,++h),+f(e,h),d,g,y,m)};M.visit=function(e){zr(e,M,d,g,y,m)};M.find=function(e){return Rr(M,e[0],e[1],d,g,y,m)};h=-1;if(t==null){while(++h<p){k(M,e[h],c[h],v[h],d,g,y,m)}--h}else e.forEach(M.add);c=v=e=l=null;return M}l.x=function(e){return arguments.length?(i=e,l):i};l.y=function(e){return arguments.length?(o=e,l):o};l.extent=function(e){if(!arguments.length)return t==null?null:[[t,r],[n,a]];if(e==null)t=r=n=a=null;else t=+e[0][0],r=+e[0][1],n=+e[1][0],a=+e[1][1];return l};l.size=function(e){if(!arguments.length)return t==null?null:[n-t,a-r];if(e==null)t=r=n=a=null;else t=r=0,n=+e[0],a=+e[1];return l};return l};function Pr(e){return e.x}function Or(e){return e.y}function Dr(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function zr(e,t,r,n,a,i){if(!e(t,r,n,a,i)){var o=(r+a)*.5,s=(n+i)*.5,l=t.nodes;if(l[0])zr(e,l[0],r,n,o,s);if(l[1])zr(e,l[1],o,n,a,s);if(l[2])zr(e,l[2],r,s,o,i);if(l[3])zr(e,l[3],o,s,a,i)}}function Rr(e,t,r,n,a,i,o){var s=Infinity,l;(function e(u,f,c,v,h){if(f>i||c>o||v<n||h<a)return;if(p=u.point){var p,d=t-u.x,g=r-u.y,y=d*d+g*g;if(y<s){var m=Math.sqrt(s=y);n=t-m,a=r-m;i=t+m,o=r+m;l=p}}var x=u.nodes,b=(f+v)*.5,_=(c+h)*.5,w=t>=b,T=r>=_;for(var k=T<<1|w,A=k+4;k<A;++k){if(u=x[k&3])switch(k&3){case 0:e(u,f,c,b,_);break;case 1:e(u,b,c,v,_);break;case 2:e(u,f,_,b,h);break;case 3:e(u,b,_,v,h);break}}})(e,n,a,i,o);return l}i.interpolateRgb=Fr;function Fr(e,t){e=i.rgb(e);t=i.rgb(t);var r=e.r,n=e.g,a=e.b,o=t.r-r,s=t.g-n,l=t.b-a;return function(e){return"#"+bt(Math.round(r+o*e))+bt(Math.round(n+s*e))+bt(Math.round(a+l*e))}}i.interpolateObject=Br;function Br(e,t){var r={},n={},a;for(a in e){if(a in t){r[a]=Hr(e[a],t[a])}else{n[a]=e[a]}}for(a in t){if(!(a in e)){n[a]=t[a]}}return function(e){for(a in r)n[a]=r[a](e);return n}}i.interpolateNumber=Nr;function Nr(e,t){e=+e,t=+t;return function(r){return e*(1-r)+t*r}}i.interpolateString=jr;function jr(e,t){var r=Ur.lastIndex=Vr.lastIndex=0,n,a,i,o=-1,s=[],l=[];e=e+"",t=t+"";while((n=Ur.exec(e))&&(a=Vr.exec(t))){if((i=a.index)>r){i=t.slice(r,i);if(s[o])s[o]+=i;else s[++o]=i}if((n=n[0])===(a=a[0])){if(s[o])s[o]+=a;else s[++o]=a}else{s[++o]=null;l.push({i:o,x:Nr(n,a)})}r=Vr.lastIndex}if(r<t.length){i=t.slice(r);if(s[o])s[o]+=i;else s[++o]=i}return s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var r=0,n;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}var Ur=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vr=new RegExp(Ur.source,"g");i.interpolate=Hr;function Hr(e,t){var r=i.interpolators.length,n;while(--r>=0&&!(n=i.interpolators[r](e,t)));return n}i.interpolators=[function(e,t){var r=typeof t;return(r==="string"?Mt.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?Fr:jr:t instanceof $e?Fr:Array.isArray(t)?qr:r==="object"&&isNaN(t)?Br:Nr)(e,t)}];i.interpolateArray=qr;function qr(e,t){var r=[],n=[],a=e.length,i=t.length,o=Math.min(e.length,t.length),s;for(s=0;s<o;++s)r.push(Hr(e[s],t[s]));for(;s<a;++s)n[s]=e[s];for(;s<i;++s)n[s]=t[s];return function(e){for(s=0;s<o;++s)n[s]=r[s](e);return n}}var Gr=function(){return R};var Zr=i.map({linear:Gr,poly:en,quad:function(){return Kr},cubic:function(){return $r},sin:function(){return tn},exp:function(){return rn},circle:function(){return nn},elastic:an,back:on,bounce:function(){return sn}});var Yr=i.map({in:R,out:Xr,"in-out":Jr,"out-in":function(e){return Jr(Xr(e))}});i.ease=function(e){var t=e.indexOf("-"),r=t>=0?e.slice(0,t):e,n=t>=0?e.slice(t+1):"in";r=Zr.get(r)||Gr;n=Yr.get(n)||R;return Wr(n(r.apply(null,o.call(arguments,1))))};function Wr(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function Xr(e){return function(t){return 1-e(1-t)}}function Jr(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Kr(e){return e*e}function $r(e){return e*e*e}function Qr(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)}function en(e){return function(t){return Math.pow(t,e)}}function tn(e){return 1-Math.cos(e*ze)}function rn(e){return Math.pow(2,10*(e-1))}function nn(e){return 1-Math.sqrt(1-e*e)}function an(e,t){var r;if(arguments.length<2)t=.45;if(arguments.length)r=t/Oe*Math.asin(1/e);else e=1,r=t/4;return function(n){return 1+e*Math.pow(2,-10*n)*Math.sin((n-r)*Oe/t)}}function on(e){if(!e)e=1.70158;return function(t){return t*t*((e+1)*t-e)}}function sn(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}i.interpolateHcl=ln;function ln(e,t){e=i.hcl(e);t=i.hcl(t);var r=e.h,n=e.c,a=e.l,o=t.h-r,s=t.c-n,l=t.l-a;if(isNaN(s))s=0,n=isNaN(n)?t.c:n;if(isNaN(o))o=0,r=isNaN(r)?t.h:r;else if(o>180)o-=360;else if(o<-180)o+=360;return function(e){return at(r+o*e,n+s*e,a+l*e)+""}}i.interpolateHsl=un;function un(e,t){e=i.hsl(e);t=i.hsl(t);var r=e.h,n=e.s,a=e.l,o=t.h-r,s=t.s-n,l=t.l-a;if(isNaN(s))s=0,n=isNaN(n)?t.s:n;if(isNaN(o))o=0,r=isNaN(r)?t.h:r;else if(o>180)o-=360;else if(o<-180)o+=360;return function(e){return tt(r+o*e,n+s*e,a+l*e)+""}}i.interpolateLab=fn;function fn(e,t){e=i.lab(e);t=i.lab(t);var r=e.l,n=e.a,a=e.b,o=t.l-r,s=t.a-n,l=t.b-a;return function(e){return ct(r+o*e,n+s*e,a+l*e)+""}}i.interpolateRound=cn;function cn(e,t){t-=e;return function(r){return Math.round(e+t*r)}}i.transform=function(e){var t=l.createElementNS(i.ns.prefix.svg,"g");return(i.transform=function(e){if(e!=null){t.setAttribute("transform",e);var r=t.transform.baseVal.consolidate()}return new vn(r?r.matrix:gn)})(e)};function vn(e){var t=[e.a,e.b],r=[e.c,e.d],n=pn(t),a=hn(t,r),i=pn(dn(r,t,-a))||0;if(t[0]*r[1]<r[0]*t[1]){t[0]*=-1;t[1]*=-1;n*=-1;a*=-1}this.rotate=(n?Math.atan2(t[1],t[0]):Math.atan2(-r[0],r[1]))*Fe;this.translate=[e.e,e.f];this.scale=[n,i];this.skew=i?Math.atan2(a,i)*Fe:0}vn.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function hn(e,t){return e[0]*t[0]+e[1]*t[1]}function pn(e){var t=Math.sqrt(hn(e,e));if(t){e[0]/=t;e[1]/=t}return t}function dn(e,t,r){e[0]+=r*t[0];e[1]+=r*t[1];return e}var gn={a:1,b:0,c:0,d:1,e:0,f:0};i.interpolateTransform=wn;function yn(e){return e.length?e.pop()+",":""}function mn(e,t,r,n){if(e[0]!==t[0]||e[1]!==t[1]){var a=r.push("translate(",null,",",null,")");n.push({i:a-4,x:Nr(e[0],t[0])},{i:a-2,x:Nr(e[1],t[1])})}else if(t[0]||t[1]){r.push("translate("+t+")")}}function xn(e,t,r,n){if(e!==t){if(e-t>180)t+=360;else if(t-e>180)e+=360;n.push({i:r.push(yn(r)+"rotate(",null,")")-2,x:Nr(e,t)})}else if(t){r.push(yn(r)+"rotate("+t+")")}}function bn(e,t,r,n){if(e!==t){n.push({i:r.push(yn(r)+"skewX(",null,")")-2,x:Nr(e,t)})}else if(t){r.push(yn(r)+"skewX("+t+")")}}function _n(e,t,r,n){if(e[0]!==t[0]||e[1]!==t[1]){var a=r.push(yn(r)+"scale(",null,",",null,")");n.push({i:a-4,x:Nr(e[0],t[0])},{i:a-2,x:Nr(e[1],t[1])})}else if(t[0]!==1||t[1]!==1){r.push(yn(r)+"scale("+t+")")}}function wn(e,t){var r=[],n=[];e=i.transform(e),t=i.transform(t);mn(e.translate,t.translate,r,n);xn(e.rotate,t.rotate,r,n);bn(e.skew,t.skew,r,n);_n(e.scale,t.scale,r,n);e=t=null;return function(e){var t=-1,a=n.length,i;while(++t<a)r[(i=n[t]).i]=i.x(e);return r.join("")}}function Tn(e,t){t=(t-=e=+e)||1/t;return function(r){return(r-e)/t}}function kn(e,t){t=(t-=e=+e)||1/t;return function(r){return Math.max(0,Math.min(1,(r-e)/t))}}i.layout={};i.layout.bundle=function(){return function(e){var t=[],r=-1,n=e.length;while(++r<n)t.push(An(e[r]));return t}};function An(e){var t=e.source,r=e.target,n=Sn(t,r),a=[t];while(t!==n){t=t.parent;a.push(t)}var i=a.length;while(r!==n){a.splice(i,0,r);r=r.parent}return a}function Mn(e){var t=[],r=e.parent;while(r!=null){t.push(e);e=r;r=r.parent}t.push(e);return t}function Sn(e,t){if(e===t)return e;var r=Mn(e),n=Mn(t),a=r.pop(),i=n.pop(),o=null;while(a===i){o=a;a=r.pop();i=n.pop()}return o}i.layout.chord=function(){var e={},t,r,n,a,o=0,s,l,u;function f(){var e={},f=[],v=i.range(a),h=[],p,d,g,y,m;t=[];r=[];p=0,y=-1;while(++y<a){d=0,m=-1;while(++m<a){d+=n[y][m]}f.push(d);h.push(i.range(a));p+=d}if(s){v.sort((function(e,t){return s(f[e],f[t])}))}if(l){h.forEach((function(e,t){e.sort((function(e,r){return l(n[t][e],n[t][r])}))}))}p=(Oe-o*a)/p;d=0,y=-1;while(++y<a){g=d,m=-1;while(++m<a){var x=v[y],b=h[x][m],_=n[x][b],w=d,T=d+=_*p;e[x+"-"+b]={index:x,subindex:b,startAngle:w,endAngle:T,value:_}}r[x]={index:x,startAngle:g,endAngle:d,value:f[x]};d+=o}y=-1;while(++y<a){m=y-1;while(++m<a){var k=e[y+"-"+m],A=e[m+"-"+y];if(k.value||A.value){t.push(k.value<A.value?{source:A,target:k}:{source:k,target:A})}}}if(u)c()}function c(){t.sort((function(e,t){return u((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)}))}e.matrix=function(i){if(!arguments.length)return n;a=(n=i)&&n.length;t=r=null;return e};e.padding=function(n){if(!arguments.length)return o;o=n;t=r=null;return e};e.sortGroups=function(n){if(!arguments.length)return s;s=n;t=r=null;return e};e.sortSubgroups=function(r){if(!arguments.length)return l;l=r;t=null;return e};e.sortChords=function(r){if(!arguments.length)return u;u=r;if(t)c();return e};e.chords=function(){if(!t)f();return t};e.groups=function(){if(!r)f();return r};return e};i.layout.force=function(){var e={},t=i.dispatch("start","tick","end"),r,n=[1,1],a,o,s=.9,l=On,u=Dn,f=-30,c=zn,v=.1,h=.64,p=[],d=[],g,y,m;function x(e){return function(t,r,n,a){if(t.point!==e){var i=t.cx-e.x,o=t.cy-e.y,s=a-r,l=i*i+o*o;if(s*s/h<l){if(l<c){var u=t.charge/l;e.px-=i*u;e.py-=o*u}return true}if(t.point&&l&&l<c){var u=t.pointCharge/l;e.px-=i*u;e.py-=o*u}}return!t.charge}}e.tick=function(){if((o*=.99)<.005){r=null;t.end({type:"end",alpha:o=0});return true}var e=p.length,a=d.length,l,u,c,h,b,_,w,T,k;for(u=0;u<a;++u){c=d[u];h=c.source;b=c.target;T=b.x-h.x;k=b.y-h.y;if(_=T*T+k*k){_=o*y[u]*((_=Math.sqrt(_))-g[u])/_;T*=_;k*=_;b.x-=T*(w=h.weight+b.weight?h.weight/(h.weight+b.weight):.5);b.y-=k*w;h.x+=T*(w=1-w);h.y+=k*w}}if(w=o*v){T=n[0]/2;k=n[1]/2;u=-1;if(w)while(++u<e){c=p[u];c.x+=(T-c.x)*w;c.y+=(k-c.y)*w}}if(f){Pn(l=i.geom.quadtree(p),o,m);u=-1;while(++u<e){if(!(c=p[u]).fixed){l.visit(x(c))}}}u=-1;while(++u<e){c=p[u];if(c.fixed){c.x=c.px;c.y=c.py}else{c.x-=(c.px-(c.px=c.x))*s;c.y-=(c.py-(c.py=c.y))*s}}t.tick({type:"tick",alpha:o})};e.nodes=function(t){if(!arguments.length)return p;p=t;return e};e.links=function(t){if(!arguments.length)return d;d=t;return e};e.size=function(t){if(!arguments.length)return n;n=t;return e};e.linkDistance=function(t){if(!arguments.length)return l;l=typeof t==="function"?t:+t;return e};e.distance=e.linkDistance;e.linkStrength=function(t){if(!arguments.length)return u;u=typeof t==="function"?t:+t;return e};e.friction=function(t){if(!arguments.length)return s;s=+t;return e};e.charge=function(t){if(!arguments.length)return f;f=typeof t==="function"?t:+t;return e};e.chargeDistance=function(t){if(!arguments.length)return Math.sqrt(c);c=t*t;return e};e.gravity=function(t){if(!arguments.length)return v;v=+t;return e};e.theta=function(t){if(!arguments.length)return Math.sqrt(h);h=t*t;return e};e.alpha=function(n){if(!arguments.length)return o;n=+n;if(o){if(n>0){o=n}else{r.c=null,r.t=NaN,r=null;t.end({type:"end",alpha:o=0})}}else if(n>0){t.start({type:"start",alpha:o=n});r=Ft(e.tick)}return e};e.start=function(){var t,r=p.length,a=d.length,i=n[0],o=n[1],s,c;for(t=0;t<r;++t){(c=p[t]).index=t;c.weight=0}for(t=0;t<a;++t){c=d[t];if(typeof c.source=="number")c.source=p[c.source];if(typeof c.target=="number")c.target=p[c.target];++c.source.weight;++c.target.weight}for(t=0;t<r;++t){c=p[t];if(isNaN(c.x))c.x=v("x",i);if(isNaN(c.y))c.y=v("y",o);if(isNaN(c.px))c.px=c.x;if(isNaN(c.py))c.py=c.y}g=[];if(typeof l==="function")for(t=0;t<a;++t)g[t]=+l.call(this,d[t],t);else for(t=0;t<a;++t)g[t]=l;y=[];if(typeof u==="function")for(t=0;t<a;++t)y[t]=+u.call(this,d[t],t);else for(t=0;t<a;++t)y[t]=u;m=[];if(typeof f==="function")for(t=0;t<r;++t)m[t]=+f.call(this,p[t],t);else for(t=0;t<r;++t)m[t]=f;function v(e,n){if(!s){s=new Array(r);for(l=0;l<r;++l){s[l]=[]}for(l=0;l<a;++l){var i=d[l];s[i.source.index].push(i.target);s[i.target.index].push(i.source)}}var o=s[t],l=-1,u=o.length,f;while(++l<u)if(!isNaN(f=o[l][e]))return f;return Math.random()*n}return e.resume()};e.resume=function(){return e.alpha(.1)};e.stop=function(){return e.alpha(0)};e.drag=function(){if(!a)a=i.behavior.drag().origin(R).on("dragstart.force",En).on("drag.force",b).on("dragend.force",Ln);if(!arguments.length)return a;this.on("mouseover.force",Cn).on("mouseout.force",In).call(a)};function b(t){t.px=i.event.x,t.py=i.event.y;e.resume()}return i.rebind(e,t,"on")};function En(e){e.fixed|=2}function Ln(e){e.fixed&=~6}function Cn(e){e.fixed|=4;e.px=e.x,e.py=e.y}function In(e){e.fixed&=~4}function Pn(e,t,r){var n=0,a=0;e.charge=0;if(!e.leaf){var i=e.nodes,o=i.length,s=-1,l;while(++s<o){l=i[s];if(l==null)continue;Pn(l,t,r);e.charge+=l.charge;n+=l.charge*l.cx;a+=l.charge*l.cy}}if(e.point){if(!e.leaf){e.point.x+=Math.random()-.5;e.point.y+=Math.random()-.5}var u=t*r[e.point.index];e.charge+=e.pointCharge=u;n+=u*e.point.x;a+=u*e.point.y}e.cx=n/e.charge;e.cy=a/e.charge}var On=20,Dn=1,zn=Infinity;i.layout.hierarchy=function(){var e=Un,t=Nn,r=jn;function n(a){var i=[a],o=[],s;a.depth=0;while((s=i.pop())!=null){o.push(s);if((u=t.call(n,s,s.depth))&&(l=u.length)){var l,u,f;while(--l>=0){i.push(f=u[l]);f.parent=s;f.depth=s.depth+1}if(r)s.value=0;s.children=u}else{if(r)s.value=+r.call(n,s,s.depth)||0;delete s.children}}Bn(a,(function(t){var n,a;if(e&&(n=t.children))n.sort(e);if(r&&(a=t.parent))a.value+=t.value}));return o}n.sort=function(t){if(!arguments.length)return e;e=t;return n};n.children=function(e){if(!arguments.length)return t;t=e;return n};n.value=function(e){if(!arguments.length)return r;r=e;return n};n.revalue=function(e){if(r){Fn(e,(function(e){if(e.children)e.value=0}));Bn(e,(function(e){var t;if(!e.children)e.value=+r.call(n,e,e.depth)||0;if(t=e.parent)t.value+=e.value}))}return e};return n};function Rn(e,t){i.rebind(e,t,"sort","children","value");e.nodes=e;e.links=Vn;return e}function Fn(e,t){var r=[e];while((e=r.pop())!=null){t(e);if((a=e.children)&&(n=a.length)){var n,a;while(--n>=0)r.push(a[n])}}}function Bn(e,t){var r=[e],n=[];while((e=r.pop())!=null){n.push(e);if((o=e.children)&&(i=o.length)){var a=-1,i,o;while(++a<i)r.push(o[a])}}while((e=n.pop())!=null){t(e)}}function Nn(e){return e.children}function jn(e){return e.value}function Un(e,t){return t.value-e.value}function Vn(e){return i.merge(e.map((function(e){return(e.children||[]).map((function(t){return{source:e,target:t}}))})))}i.layout.partition=function(){var e=i.layout.hierarchy(),t=[1,1];function r(e,t,n,a){var i=e.children;e.x=t;e.y=e.depth*a;e.dx=n;e.dy=a;if(i&&(s=i.length)){var o=-1,s,l,u;n=e.value?n/e.value:0;while(++o<s){r(l=i[o],t,u=l.value*n,a);t+=u}}}function n(e){var t=e.children,r=0;if(t&&(i=t.length)){var a=-1,i;while(++a<i)r=Math.max(r,n(t[a]))}return 1+r}function a(a,i){var o=e.call(this,a,i);r(o[0],0,t[0],t[1]/n(o[0]));return o}a.size=function(e){if(!arguments.length)return t;t=e;return a};return Rn(a,e)};i.layout.pie=function(){var e=Number,t=Hn,r=0,n=Oe,a=0;function o(s){var l=s.length,u=s.map((function(t,r){return+e.call(o,t,r)})),f=+(typeof r==="function"?r.apply(this,arguments):r),c=(typeof n==="function"?n.apply(this,arguments):n)-f,v=Math.min(Math.abs(c)/l,+(typeof a==="function"?a.apply(this,arguments):a)),h=v*(c<0?-1:1),p=i.sum(u),d=p?(c-l*h)/p:0,g=i.range(l),y=[],m;if(t!=null)g.sort(t===Hn?function(e,t){return u[t]-u[e]}:function(e,r){return t(s[e],s[r])});g.forEach((function(e){y[e]={data:s[e],value:m=u[e],startAngle:f,endAngle:f+=m*d+h,padAngle:v}}));return y}o.value=function(t){if(!arguments.length)return e;e=t;return o};o.sort=function(e){if(!arguments.length)return t;t=e;return o};o.startAngle=function(e){if(!arguments.length)return r;r=e;return o};o.endAngle=function(e){if(!arguments.length)return n;n=e;return o};o.padAngle=function(e){if(!arguments.length)return a;a=e;return o};return o};var Hn={};i.layout.stack=function(){var e=R,t=Xn,r=Jn,n=Zn,a=qn,o=Gn;function s(l,u){if(!(d=l.length))return l;var f=l.map((function(t,r){return e.call(s,t,r)}));var c=f.map((function(e){return e.map((function(e,t){return[a.call(s,e,t),o.call(s,e,t)]}))}));var v=t.call(s,c,u);f=i.permute(f,v);c=i.permute(c,v);var h=r.call(s,c,u);var p=f[0].length,d,g,y,m;for(y=0;y<p;++y){n.call(s,f[0][y],m=h[y],c[0][y][1]);for(g=1;g<d;++g){n.call(s,f[g][y],m+=c[g-1][y][1],c[g][y][1])}}return l}s.values=function(t){if(!arguments.length)return e;e=t;return s};s.order=function(e){if(!arguments.length)return t;t=typeof e==="function"?e:Yn.get(e)||Xn;return s};s.offset=function(e){if(!arguments.length)return r;r=typeof e==="function"?e:Wn.get(e)||Jn;return s};s.x=function(e){if(!arguments.length)return a;a=e;return s};s.y=function(e){if(!arguments.length)return o;o=e;return s};s.out=function(e){if(!arguments.length)return n;n=e;return s};return s};function qn(e){return e.x}function Gn(e){return e.y}function Zn(e,t,r){e.y0=t;e.y=r}var Yn=i.map({"inside-out":function(e){var t=e.length,r,n,a=e.map(Kn),o=e.map($n),s=i.range(t).sort((function(e,t){return a[e]-a[t]})),l=0,u=0,f=[],c=[];for(r=0;r<t;++r){n=s[r];if(l<u){l+=o[n];f.push(n)}else{u+=o[n];c.push(n)}}return c.reverse().concat(f)},reverse:function(e){return i.range(e.length).reverse()},default:Xn});var Wn=i.map({silhouette:function(e){var t=e.length,r=e[0].length,n=[],a=0,i,o,s,l=[];for(o=0;o<r;++o){for(i=0,s=0;i<t;i++)s+=e[i][o][1];if(s>a)a=s;n.push(s)}for(o=0;o<r;++o){l[o]=(a-n[o])/2}return l},wiggle:function(e){var t=e.length,r=e[0],n=r.length,a,i,o,s,l,u,f,c,v,h=[];h[0]=c=v=0;for(i=1;i<n;++i){for(a=0,s=0;a<t;++a)s+=e[a][i][1];for(a=0,l=0,f=r[i][0]-r[i-1][0];a<t;++a){for(o=0,u=(e[a][i][1]-e[a][i-1][1])/(2*f);o<a;++o){u+=(e[o][i][1]-e[o][i-1][1])/f}l+=u*e[a][i][1]}h[i]=c-=s?l/s*f:0;if(c<v)v=c}for(i=0;i<n;++i)h[i]-=v;return h},expand:function(e){var t=e.length,r=e[0].length,n=1/t,a,i,o,s=[];for(i=0;i<r;++i){for(a=0,o=0;a<t;a++)o+=e[a][i][1];if(o)for(a=0;a<t;a++)e[a][i][1]/=o;else for(a=0;a<t;a++)e[a][i][1]=n}for(i=0;i<r;++i)s[i]=0;return s},zero:Jn});function Xn(e){return i.range(e.length)}function Jn(e){var t=-1,r=e[0].length,n=[];while(++t<r)n[t]=0;return n}function Kn(e){var t=1,r=0,n=e[0][1],a,i=e.length;for(;t<i;++t){if((a=e[t][1])>n){r=t;n=a}}return r}function $n(e){return e.reduce(Qn,0)}function Qn(e,t){return e+t[1]}i.layout.histogram=function(){var e=true,t=Number,r=ra,n=ea;function a(a,o){var s=[],l=a.map(t,this),u=r.call(this,l,o),f=n.call(this,u,l,o),c,o=-1,v=l.length,h=f.length-1,p=e?1:1/v,d;while(++o<h){c=s[o]=[];c.dx=f[o+1]-(c.x=f[o]);c.y=0}if(h>0){o=-1;while(++o<v){d=l[o];if(d>=u[0]&&d<=u[1]){c=s[i.bisect(f,d,1,h)-1];c.y+=p;c.push(a[o])}}}return s}a.value=function(e){if(!arguments.length)return t;t=e;return a};a.range=function(e){if(!arguments.length)return r;r=St(e);return a};a.bins=function(e){if(!arguments.length)return n;n=typeof e==="number"?function(t){return ta(t,e)}:St(e);return a};a.frequency=function(t){if(!arguments.length)return e;e=!!t;return a};return a};function ea(e,t){return ta(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function ta(e,t){var r=-1,n=+e[0],a=(e[1]-n)/t,i=[];while(++r<=t)i[r]=a*r+n;return i}function ra(e){return[i.min(e),i.max(e)]}i.layout.pack=function(){var e=i.layout.hierarchy().sort(na),t=0,r=[1,1],n;function a(a,i){var o=e.call(this,a,i),s=o[0],l=r[0],u=r[1],f=n==null?Math.sqrt:typeof n==="function"?n:function(){return n};s.x=s.y=0;Bn(s,(function(e){e.r=+f(e.value)}));Bn(s,sa);if(t){var c=t*(n?1:Math.max(2*s.r/l,2*s.r/u))/2;Bn(s,(function(e){e.r+=c}));Bn(s,sa);Bn(s,(function(e){e.r-=c}))}fa(s,l/2,u/2,n?1:1/Math.max(2*s.r/l,2*s.r/u));return o}a.size=function(e){if(!arguments.length)return r;r=e;return a};a.radius=function(e){if(!arguments.length)return n;n=e==null||typeof e==="function"?e:+e;return a};a.padding=function(e){if(!arguments.length)return t;t=+e;return a};return Rn(a,e)};function na(e,t){return e.value-t.value}function aa(e,t){var r=e._pack_next;e._pack_next=t;t._pack_prev=e;t._pack_next=r;r._pack_prev=t}function ia(e,t){e._pack_next=t;t._pack_prev=e}function oa(e,t){var r=t.x-e.x,n=t.y-e.y,a=e.r+t.r;return.999*a*a>r*r+n*n}function sa(e){if(!(t=e.children)||!(v=t.length))return;var t,r=Infinity,n=-Infinity,a=Infinity,i=-Infinity,o,s,l,u,f,c,v;function h(e){r=Math.min(e.x-e.r,r);n=Math.max(e.x+e.r,n);a=Math.min(e.y-e.r,a);i=Math.max(e.y+e.r,i)}t.forEach(la);o=t[0];o.x=-o.r;o.y=0;h(o);if(v>1){s=t[1];s.x=s.r;s.y=0;h(s);if(v>2){l=t[2];ca(o,s,l);h(l);aa(o,l);o._pack_prev=l;aa(l,s);s=o._pack_next;for(u=3;u<v;u++){ca(o,s,l=t[u]);var p=0,d=1,g=1;for(f=s._pack_next;f!==s;f=f._pack_next,d++){if(oa(f,l)){p=1;break}}if(p==1){for(c=o._pack_prev;c!==f._pack_prev;c=c._pack_prev,g++){if(oa(c,l)){break}}}if(p){if(d<g||d==g&&s.r<o.r)ia(o,s=f);else ia(o=c,s);u--}else{aa(o,l);s=l;h(l)}}}}var y=(r+n)/2,m=(a+i)/2,x=0;for(u=0;u<v;u++){l=t[u];l.x-=y;l.y-=m;x=Math.max(x,l.r+Math.sqrt(l.x*l.x+l.y*l.y))}e.r=x;t.forEach(ua)}function la(e){e._pack_next=e._pack_prev=e}function ua(e){delete e._pack_next;delete e._pack_prev}function fa(e,t,r,n){var a=e.children;e.x=t+=n*e.x;e.y=r+=n*e.y;e.r*=n;if(a){var i=-1,o=a.length;while(++i<o)fa(a[i],t,r,n)}}function ca(e,t,r){var n=e.r+r.r,a=t.x-e.x,i=t.y-e.y;if(n&&(a||i)){var o=t.r+r.r,s=a*a+i*i;o*=o;n*=n;var l=.5+(n-o)/(2*s),u=Math.sqrt(Math.max(0,2*o*(n+s)-(n-=s)*n-o*o))/(2*s);r.x=e.x+l*a+u*i;r.y=e.y+l*i-u*a}else{r.x=e.x+n;r.y=e.y}}i.layout.tree=function(){var e=i.layout.hierarchy().sort(null).value(null),t=va,r=[1,1],n=null;function a(a,i){var u=e.call(this,a,i),c=u[0],v=o(c);Bn(v,s),v.parent.m=-v.z;Fn(v,l);if(n)Fn(c,f);else{var h=c,p=c,d=c;Fn(c,(function(e){if(e.x<h.x)h=e;if(e.x>p.x)p=e;if(e.depth>d.depth)d=e}));var g=t(h,p)/2-h.x,y=r[0]/(p.x+t(p,h)/2+g),m=r[1]/(d.depth||1);Fn(c,(function(e){e.x=(e.x+g)*y;e.y=e.depth*m}))}return u}function o(e){var t={A:null,children:[e]},r=[t],n;while((n=r.pop())!=null){for(var a=n.children,i,o=0,s=a.length;o<s;++o){r.push((a[o]=i={_:a[o],parent:n,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i)}}return t.children[0]}function s(e){var r=e.children,n=e.parent.children,a=e.i?n[e.i-1]:null;if(r.length){ga(e);var i=(r[0].z+r[r.length-1].z)/2;if(a){e.z=a.z+t(e._,a._);e.m=e.z-i}else{e.z=i}}else if(a){e.z=a.z+t(e._,a._)}e.parent.A=u(e,a,e.parent.A||n[0])}function l(e){e._.x=e.z+e.parent.m;e.m+=e.parent.m}function u(e,r,n){if(r){var a=e,i=e,o=r,s=a.parent.children[0],l=a.m,u=i.m,f=o.m,c=s.m,v;while(o=pa(o),a=ha(a),o&&a){s=ha(s);i=pa(i);i.a=e;v=o.z+f-a.z-l+t(o._,a._);if(v>0){da(ya(o,e,n),e,v);l+=v;u+=v}f+=o.m;l+=a.m;c+=s.m;u+=i.m}if(o&&!pa(i)){i.t=o;i.m+=f-u}if(a&&!ha(s)){s.t=a;s.m+=l-c;n=e}}return n}function f(e){e.x*=r[0];e.y=e.depth*r[1]}a.separation=function(e){if(!arguments.length)return t;t=e;return a};a.size=function(e){if(!arguments.length)return n?null:r;n=(r=e)==null?f:null;return a};a.nodeSize=function(e){if(!arguments.length)return n?r:null;n=(r=e)==null?null:f;return a};return Rn(a,e)};function va(e,t){return e.parent==t.parent?1:2}function ha(e){var t=e.children;return t.length?t[0]:e.t}function pa(e){var t=e.children,r;return(r=t.length)?t[r-1]:e.t}function da(e,t,r){var n=r/(t.i-e.i);t.c-=n;t.s+=r;e.c+=n;t.z+=r;t.m+=r}function ga(e){var t=0,r=0,n=e.children,a=n.length,i;while(--a>=0){i=n[a];i.z+=t;i.m+=t;t+=i.s+(r+=i.c)}}function ya(e,t,r){return e.a.parent===t.parent?e.a:r}i.layout.cluster=function(){var e=i.layout.hierarchy().sort(null).value(null),t=va,r=[1,1],n=false;function a(a,i){var o=e.call(this,a,i),s=o[0],l,u=0;Bn(s,(function(e){var r=e.children;if(r&&r.length){e.x=xa(r);e.y=ma(r)}else{e.x=l?u+=t(e,l):0;e.y=0;l=e}}));var f=ba(s),c=_a(s),v=f.x-t(f,c)/2,h=c.x+t(c,f)/2;Bn(s,n?function(e){e.x=(e.x-s.x)*r[0];e.y=(s.y-e.y)*r[1]}:function(e){e.x=(e.x-v)/(h-v)*r[0];e.y=(1-(s.y?e.y/s.y:1))*r[1]});return o}a.separation=function(e){if(!arguments.length)return t;t=e;return a};a.size=function(e){if(!arguments.length)return n?null:r;n=(r=e)==null;return a};a.nodeSize=function(e){if(!arguments.length)return n?r:null;n=(r=e)!=null;return a};return Rn(a,e)};function ma(e){return 1+i.max(e,(function(e){return e.y}))}function xa(e){return e.reduce((function(e,t){return e+t.x}),0)/e.length}function ba(e){var t=e.children;return t&&t.length?ba(t[0]):e}function _a(e){var t=e.children,r;return t&&(r=t.length)?_a(t[r-1]):e}i.layout.treemap=function(){var e=i.layout.hierarchy(),t=Math.round,r=[1,1],n=null,a=wa,o=false,s,l="squarify",u=.5*(1+Math.sqrt(5));function f(e,t){var r=-1,n=e.length,a,i;while(++r<n){i=(a=e[r]).value*(t<0?0:t);a.area=isNaN(i)||i<=0?0:i}}function c(e){var t=e.children;if(t&&t.length){var r=a(e),n=[],i=t.slice(),o,s=Infinity,u,v=l==="slice"?r.dx:l==="dice"?r.dy:l==="slice-dice"?e.depth&1?r.dy:r.dx:Math.min(r.dx,r.dy),d;f(i,r.dx*r.dy/e.value);n.area=0;while((d=i.length)>0){n.push(o=i[d-1]);n.area+=o.area;if(l!=="squarify"||(u=h(n,v))<=s){i.pop();s=u}else{n.area-=n.pop().area;p(n,v,r,false);v=Math.min(r.dx,r.dy);n.length=n.area=0;s=Infinity}}if(n.length){p(n,v,r,true);n.length=n.area=0}t.forEach(c)}}function v(e){var t=e.children;if(t&&t.length){var r=a(e),n=t.slice(),i,o=[];f(n,r.dx*r.dy/e.value);o.area=0;while(i=n.pop()){o.push(i);o.area+=i.area;if(i.z!=null){p(o,i.z?r.dx:r.dy,r,!n.length);o.length=o.area=0}}t.forEach(v)}}function h(e,t){var r=e.area,n,a=0,i=Infinity,o=-1,s=e.length;while(++o<s){if(!(n=e[o].area))continue;if(n<i)i=n;if(n>a)a=n}r*=r;t*=t;return r?Math.max(t*a*u/r,r/(t*i*u)):Infinity}function p(e,r,n,a){var i=-1,o=e.length,s=n.x,l=n.y,u=r?t(e.area/r):0,f;if(r==n.dx){if(a||u>n.dy)u=n.dy;while(++i<o){f=e[i];f.x=s;f.y=l;f.dy=u;s+=f.dx=Math.min(n.x+n.dx-s,u?t(f.area/u):0)}f.z=true;f.dx+=n.x+n.dx-s;n.y+=u;n.dy-=u}else{if(a||u>n.dx)u=n.dx;while(++i<o){f=e[i];f.x=s;f.y=l;f.dx=u;l+=f.dy=Math.min(n.y+n.dy-l,u?t(f.area/u):0)}f.z=false;f.dy+=n.y+n.dy-l;n.x+=u;n.dx-=u}}function d(t){var n=s||e(t),a=n[0];a.x=a.y=0;if(a.value)a.dx=r[0],a.dy=r[1];else a.dx=a.dy=0;if(s)e.revalue(a);f([a],a.dx*a.dy/a.value);(s?v:c)(a);if(o)s=n;return n}d.size=function(e){if(!arguments.length)return r;r=e;return d};d.padding=function(e){if(!arguments.length)return n;function t(t){var r=e.call(d,t,t.depth);return r==null?wa(t):Ta(t,typeof r==="number"?[r,r,r,r]:r)}function r(t){return Ta(t,e)}var i;a=(n=e)==null?wa:(i=typeof e)==="function"?t:i==="number"?(e=[e,e,e,e],r):r;return d};d.round=function(e){if(!arguments.length)return t!=Number;t=e?Math.round:Number;return d};d.sticky=function(e){if(!arguments.length)return o;o=e;s=null;return d};d.ratio=function(e){if(!arguments.length)return u;u=e;return d};d.mode=function(e){if(!arguments.length)return l;l=e+"";return d};return Rn(d,e)};function wa(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Ta(e,t){var r=e.x+t[3],n=e.y+t[0],a=e.dx-t[1]-t[3],i=e.dy-t[0]-t[2];if(a<0){r+=a/2;a=0}if(i<0){n+=i/2;i=0}return{x:r,y:n,dx:a,dy:i}}i.random={normal:function(e,t){var r=arguments.length;if(r<2)t=1;if(r<1)e=0;return function(){var r,n,a;do{r=Math.random()*2-1;n=Math.random()*2-1;a=r*r+n*n}while(!a||a>1);return e+t*r*Math.sqrt(-2*Math.log(a)/a)}},logNormal:function(){var e=i.random.normal.apply(i,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=i.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,r=0;r<e;r++)t+=Math.random();return t}}};i.scale={};function ka(e){var t=e[0],r=e[e.length-1];return t<r?[t,r]:[r,t]}function Aa(e){return e.rangeExtent?e.rangeExtent():ka(e.range())}function Ma(e,t,r,n){var a=r(e[0],e[1]),i=n(t[0],t[1]);return function(e){return i(a(e))}}function Sa(e,t){var r=0,n=e.length-1,a=e[r],i=e[n],o;if(i<a){o=r,r=n,n=o;o=a,a=i,i=o}e[r]=t.floor(a);e[n]=t.ceil(i);return e}function Ea(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:La}var La={floor:R,ceil:R};function Ca(e,t,r,n){var a=[],o=[],s=0,l=Math.min(e.length,t.length)-1;if(e[l]<e[0]){e=e.slice().reverse();t=t.slice().reverse()}while(++s<=l){a.push(r(e[s-1],e[s]));o.push(n(t[s-1],t[s]))}return function(t){var r=i.bisect(e,t,1,l)-1;return o[r](a[r](t))}}i.scale.linear=function(){return Ia([0,1],[0,1],Hr,false)};function Ia(e,t,r,n){var a,i;function o(){var o=Math.min(e.length,t.length)>2?Ca:Ma,l=n?kn:Tn;a=o(e,t,l,r);i=o(t,e,l,Hr);return s}function s(e){return a(e)}s.invert=function(e){return i(e)};s.domain=function(t){if(!arguments.length)return e;e=t.map(Number);return o()};s.range=function(e){if(!arguments.length)return t;t=e;return o()};s.rangeRound=function(e){return s.range(e).interpolate(cn)};s.clamp=function(e){if(!arguments.length)return n;n=e;return o()};s.interpolate=function(e){if(!arguments.length)return r;r=e;return o()};s.ticks=function(t){return za(e,t)};s.tickFormat=function(t,r){return d3_scale_linearTickFormat(e,t,r)};s.nice=function(t){Oa(e,t);return o()};s.copy=function(){return Ia(e,t,r,n)};return o()}function Pa(e,t){return i.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Oa(e,t){Sa(e,Ea(Da(e,t)[2]));Sa(e,Ea(Da(e,t)[2]));return e}function Da(e,t){if(t==null)t=10;var r=ka(e),n=r[1]-r[0],a=Math.pow(10,Math.floor(Math.log(n/t)/Math.LN10)),i=t/n*a;if(i<=.15)a*=10;else if(i<=.35)a*=5;else if(i<=.75)a*=2;r[0]=Math.ceil(r[0]/a)*a;r[1]=Math.floor(r[1]/a)*a+a*.5;r[2]=a;return r}function za(e,t){return i.range.apply(i,Da(e,t))}var Ra={s:1,g:1,p:1,r:1,e:1};function Fa(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function Ba(e,t){var r=Fa(t[2]);return e in Ra?Math.abs(r-Fa(Math.max(w(t[0]),w(t[1]))))+ +(e!=="e"):r-(e==="%")*2}i.scale.log=function(){return Na(i.scale.linear().domain([0,1]),10,true,[1,10])};function Na(e,t,r,n){function a(e){return(r?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function i(e){return r?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(a(t))}o.invert=function(t){return i(e.invert(t))};o.domain=function(t){if(!arguments.length)return n;r=t[0]>=0;e.domain((n=t.map(Number)).map(a));return o};o.base=function(r){if(!arguments.length)return t;t=+r;e.domain(n.map(a));return o};o.nice=function(){var t=Sa(n.map(a),r?Math:ja);e.domain(t);n=t.map(i);return o};o.ticks=function(){var e=ka(n),o=[],s=e[0],l=e[1],u=Math.floor(a(s)),f=Math.ceil(a(l)),c=t%1?2:t;if(isFinite(f-u)){if(r){for(;u<f;u++)for(var v=1;v<c;v++)o.push(i(u)*v);o.push(i(u))}else{o.push(i(u));for(;u++<f;)for(var v=c-1;v>0;v--)o.push(i(u)*v)}for(u=0;o[u]<s;u++){}for(f=o.length;o[f-1]>l;f--){}o=o.slice(u,f)}return o};o.copy=function(){return Na(e.copy(),t,r,n)};return Pa(o,e)}var ja={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};i.scale.pow=function(){return Ua(i.scale.linear(),1,[0,1])};function Ua(e,t,r){var n=Va(t),a=Va(1/t);function i(t){return e(n(t))}i.invert=function(t){return a(e.invert(t))};i.domain=function(t){if(!arguments.length)return r;e.domain((r=t.map(Number)).map(n));return i};i.ticks=function(e){return za(r,e)};i.tickFormat=function(e,t){return d3_scale_linearTickFormat(r,e,t)};i.nice=function(e){return i.domain(Oa(r,e))};i.exponent=function(o){if(!arguments.length)return t;n=Va(t=o);a=Va(1/t);e.domain(r.map(n));return i};i.copy=function(){return Ua(e.copy(),t,r)};return Pa(i,e)}function Va(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}i.scale.sqrt=function(){return i.scale.pow().exponent(.5)};i.scale.ordinal=function(){return Ha([],{t:"range",a:[[]]})};function Ha(e,t){var r,n,a;function o(a){return n[((r.get(a)||(t.t==="range"?r.set(a,e.push(a)):NaN))-1)%n.length]}function s(t,r){return i.range(e.length).map((function(e){return t+r*e}))}o.domain=function(n){if(!arguments.length)return e;e=[];r=new A;var a=-1,i=n.length,s;while(++a<i)if(!r.has(s=n[a]))r.set(s,e.push(s));return o[t.t].apply(o,t.a)};o.range=function(e){if(!arguments.length)return n;n=e;a=0;t={t:"range",a:arguments};return o};o.rangePoints=function(r,i){if(arguments.length<2)i=0;var l=r[0],u=r[1],f=e.length<2?(l=(l+u)/2,0):(u-l)/(e.length-1+i);n=s(l+f*i/2,f);a=0;t={t:"rangePoints",a:arguments};return o};o.rangeRoundPoints=function(r,i){if(arguments.length<2)i=0;var l=r[0],u=r[1],f=e.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(e.length-1+i)|0;n=s(l+Math.round(f*i/2+(u-l-(e.length-1+i)*f)/2),f);a=0;t={t:"rangeRoundPoints",a:arguments};return o};o.rangeBands=function(r,i,l){if(arguments.length<2)i=0;if(arguments.length<3)l=i;var u=r[1]<r[0],f=r[u-0],c=r[1-u],v=(c-f)/(e.length-i+2*l);n=s(f+v*l,v);if(u)n.reverse();a=v*(1-i);t={t:"rangeBands",a:arguments};return o};o.rangeRoundBands=function(r,i,l){if(arguments.length<2)i=0;if(arguments.length<3)l=i;var u=r[1]<r[0],f=r[u-0],c=r[1-u],v=Math.floor((c-f)/(e.length-i+2*l));n=s(f+Math.round((c-f-(e.length-i)*v)/2),v);if(u)n.reverse();a=Math.round(v*(1-i));t={t:"rangeRoundBands",a:arguments};return o};o.rangeBand=function(){return a};o.rangeExtent=function(){return ka(t.a[0])};o.copy=function(){return Ha(e,t)};return o.domain(e)}i.scale.category10=function(){return i.scale.ordinal().range(qa)};i.scale.category20=function(){return i.scale.ordinal().range(Ga)};i.scale.category20b=function(){return i.scale.ordinal().range(Za)};i.scale.category20c=function(){return i.scale.ordinal().range(Ya)};var qa=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(mt);var Ga=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(mt);var Za=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(mt);var Ya=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(mt);i.scale.quantile=function(){return Wa([],[])};function Wa(e,t){var r;function n(){var n=0,o=t.length;r=[];while(++n<o)r[n-1]=i.quantile(e,n/o);return a}function a(e){if(!isNaN(e=+e))return t[i.bisect(r,e)]}a.domain=function(t){if(!arguments.length)return e;e=t.map(y).filter(m).sort(g);return n()};a.range=function(e){if(!arguments.length)return t;t=e;return n()};a.quantiles=function(){return r};a.invertExtent=function(n){n=t.indexOf(n);return n<0?[NaN,NaN]:[n>0?r[n-1]:e[0],n<r.length?r[n]:e[e.length-1]]};a.copy=function(){return Wa(e,t)};return n()}i.scale.quantize=function(){return Xa(0,1,[0,1])};function Xa(e,t,r){var n,a;function i(t){return r[Math.max(0,Math.min(a,Math.floor(n*(t-e))))]}function o(){n=r.length/(t-e);a=r.length-1;return i}i.domain=function(r){if(!arguments.length)return[e,t];e=+r[0];t=+r[r.length-1];return o()};i.range=function(e){if(!arguments.length)return r;r=e;return o()};i.invertExtent=function(t){t=r.indexOf(t);t=t<0?NaN:t/n+e;return[t,t+1/n]};i.copy=function(){return Xa(e,t,r)};return o()}i.scale.threshold=function(){return Ja([.5],[0,1])};function Ja(e,t){function r(r){if(r<=r)return t[i.bisect(e,r)]}r.domain=function(t){if(!arguments.length)return e;e=t;return r};r.range=function(e){if(!arguments.length)return t;t=e;return r};r.invertExtent=function(r){r=t.indexOf(r);return[e[r-1],e[r]]};r.copy=function(){return Ja(e,t)};return r}i.scale.identity=function(){return Ka([0,1])};function Ka(e){function t(e){return+e}t.invert=t;t.domain=t.range=function(r){if(!arguments.length)return e;e=r.map(t);return t};t.ticks=function(t){return za(e,t)};t.tickFormat=function(t,r){return d3_scale_linearTickFormat(e,t,r)};t.copy=function(){return Ka(e)};return t}i.svg={};function $a(){return 0}i.svg.arc=function(){var e=ei,t=ti,r=$a,n=Qa,a=ri,i=ni,o=ai;function s(){var s=Math.max(0,+e.apply(this,arguments)),u=Math.max(0,+t.apply(this,arguments)),f=a.apply(this,arguments)-ze,c=i.apply(this,arguments)-ze,v=Math.abs(c-f),h=f>c?0:1;if(u<s)p=u,u=s,s=p;if(v>=De)return l(u,h)+(s?l(s,1-h):"")+"Z";var p,d,g,y,m=0,x=0,b,_,w,T,k,A,M,S,E=[];if(y=(+o.apply(this,arguments)||0)/2){g=n===Qa?Math.sqrt(s*s+u*u):+n.apply(this,arguments);if(!h)x*=-1;if(u)x=Ue(g/u*Math.sin(y));if(s)m=Ue(g/s*Math.sin(y))}if(u){b=u*Math.cos(f+x);_=u*Math.sin(f+x);w=u*Math.cos(c-x);T=u*Math.sin(c-x);var L=Math.abs(c-f-2*x)<=Pe?0:1;if(x&&ii(b,_,w,T)===h^L){var C=(f+c)/2;b=u*Math.cos(C);_=u*Math.sin(C);w=T=null}}else{b=_=0}if(s){k=s*Math.cos(c-m);A=s*Math.sin(c-m);M=s*Math.cos(f+m);S=s*Math.sin(f+m);var I=Math.abs(f-c+2*m)<=Pe?0:1;if(m&&ii(k,A,M,S)===1-h^I){var P=(f+c)/2;k=s*Math.cos(P);A=s*Math.sin(P);M=S=null}}else{k=A=0}if(v>Ce&&(p=Math.min(Math.abs(u-s)/2,+r.apply(this,arguments)))>.001){d=s<u^h?0:1;var O=p,D=p;if(v<Pe){var z=M==null?[k,A]:w==null?[b,_]:Yt([b,_],[M,S],[w,T],[k,A]),R=b-z[0],F=_-z[1],B=w-z[0],N=T-z[1],j=1/Math.sin(Math.acos((R*B+F*N)/(Math.sqrt(R*R+F*F)*Math.sqrt(B*B+N*N)))/2),U=Math.sqrt(z[0]*z[0]+z[1]*z[1]);D=Math.min(p,(s-U)/(j-1));O=Math.min(p,(u-U)/(j+1))}if(w!=null){var V=oi(M==null?[k,A]:[M,S],[b,_],u,O,h),H=oi([w,T],[k,A],u,O,h);if(p===O){E.push("M",V[0],"A",O,",",O," 0 0,",d," ",V[1],"A",u,",",u," 0 ",1-h^ii(V[1][0],V[1][1],H[1][0],H[1][1]),",",h," ",H[1],"A",O,",",O," 0 0,",d," ",H[0])}else{E.push("M",V[0],"A",O,",",O," 0 1,",d," ",H[0])}}else{E.push("M",b,",",_)}if(M!=null){var q=oi([b,_],[M,S],s,-D,h),G=oi([k,A],w==null?[b,_]:[w,T],s,-D,h);if(p===D){E.push("L",G[0],"A",D,",",D," 0 0,",d," ",G[1],"A",s,",",s," 0 ",h^ii(G[1][0],G[1][1],q[1][0],q[1][1]),",",1-h," ",q[1],"A",D,",",D," 0 0,",d," ",q[0])}else{E.push("L",G[0],"A",D,",",D," 0 0,",d," ",q[0])}}else{E.push("L",k,",",A)}}else{E.push("M",b,",",_);if(w!=null)E.push("A",u,",",u," 0 ",L,",",h," ",w,",",T);E.push("L",k,",",A);if(M!=null)E.push("A",s,",",s," 0 ",I,",",1-h," ",M,",",S)}E.push("Z");return E.join("")}function l(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}s.innerRadius=function(t){if(!arguments.length)return e;e=St(t);return s};s.outerRadius=function(e){if(!arguments.length)return t;t=St(e);return s};s.cornerRadius=function(e){if(!arguments.length)return r;r=St(e);return s};s.padRadius=function(e){if(!arguments.length)return n;n=e==Qa?Qa:St(e);return s};s.startAngle=function(e){if(!arguments.length)return a;a=St(e);return s};s.endAngle=function(e){if(!arguments.length)return i;i=St(e);return s};s.padAngle=function(e){if(!arguments.length)return o;o=St(e);return s};s.centroid=function(){var r=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,n=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-ze;return[Math.cos(n)*r,Math.sin(n)*r]};return s};var Qa="auto";function ei(e){return e.innerRadius}function ti(e){return e.outerRadius}function ri(e){return e.startAngle}function ni(e){return e.endAngle}function ai(e){return e&&e.padAngle}function ii(e,t,r,n){return(e-r)*t-(t-n)*e>0?0:1}function oi(e,t,r,n,a){var i=e[0]-t[0],o=e[1]-t[1],s=(a?n:-n)/Math.sqrt(i*i+o*o),l=s*o,u=-s*i,f=e[0]+l,c=e[1]+u,v=t[0]+l,h=t[1]+u,p=(f+v)/2,d=(c+h)/2,g=v-f,y=h-c,m=g*g+y*y,x=r-n,b=f*h-v*c,_=(y<0?-1:1)*Math.sqrt(Math.max(0,x*x*m-b*b)),w=(b*y-g*_)/m,T=(-b*g-y*_)/m,k=(b*y+g*_)/m,A=(-b*g+y*_)/m,M=w-p,S=T-d,E=k-p,L=A-d;if(M*M+S*S>E*E+L*L)w=k,T=A;return[[w-l,T-u],[w*r/x,T*r/x]]}function si(){return true}function li(e){var t=Ut,r=Vt,n=si,a=fi,i=a.key,o=.7;function s(i){var s=[],l=[],u=-1,f=i.length,c,v=St(t),h=St(r);function p(){s.push("M",a(e(l),o))}while(++u<f){if(n.call(this,c=i[u],u)){l.push([+v.call(this,c,u),+h.call(this,c,u)])}else if(l.length){p();l=[]}}if(l.length)p();return s.length?s.join(""):null}s.x=function(e){if(!arguments.length)return t;t=e;return s};s.y=function(e){if(!arguments.length)return r;r=e;return s};s.defined=function(e){if(!arguments.length)return n;n=e;return s};s.interpolate=function(e){if(!arguments.length)return i;if(typeof e==="function")i=a=e;else i=(a=ui.get(e)||fi).key;return s};s.tension=function(e){if(!arguments.length)return o;o=e;return s};return s}i.svg.line=function(){return li(R)};var ui=i.map({linear:fi,"linear-closed":ci,step:vi,"step-before":hi,"step-after":pi,basis:bi,"basis-open":_i,"basis-closed":wi,bundle:Ti,cardinal:yi,"cardinal-open":di,"cardinal-closed":gi,monotone:Pi});ui.forEach((function(e,t){t.key=e;t.closed=/-closed$/.test(e)}));function fi(e){return e.length>1?e.join("L"):e+"Z"}function ci(e){return e.join("L")+"Z"}function vi(e){var t=0,r=e.length,n=e[0],a=[n[0],",",n[1]];while(++t<r)a.push("H",(n[0]+(n=e[t])[0])/2,"V",n[1]);if(r>1)a.push("H",n[0]);return a.join("")}function hi(e){var t=0,r=e.length,n=e[0],a=[n[0],",",n[1]];while(++t<r)a.push("V",(n=e[t])[1],"H",n[0]);return a.join("")}function pi(e){var t=0,r=e.length,n=e[0],a=[n[0],",",n[1]];while(++t<r)a.push("H",(n=e[t])[0],"V",n[1]);return a.join("")}function di(e,t){return e.length<4?fi(e):e[1]+mi(e.slice(1,-1),xi(e,t))}function gi(e,t){return e.length<3?ci(e):e[0]+mi((e.push(e[0]),e),xi([e[e.length-2]].concat(e,[e[1]]),t))}function yi(e,t){return e.length<3?fi(e):e[0]+mi(e,xi(e,t))}function mi(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2){return fi(e)}var r=e.length!=t.length,n="",a=e[0],i=e[1],o=t[0],s=o,l=1;if(r){n+="Q"+(i[0]-o[0]*2/3)+","+(i[1]-o[1]*2/3)+","+i[0]+","+i[1];a=e[1];l=2}if(t.length>1){s=t[1];i=e[l];l++;n+="C"+(a[0]+o[0])+","+(a[1]+o[1])+","+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1];for(var u=2;u<t.length;u++,l++){i=e[l];s=t[u];n+="S"+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1]}}if(r){var f=e[l];n+="Q"+(i[0]+s[0]*2/3)+","+(i[1]+s[1]*2/3)+","+f[0]+","+f[1]}return n}function xi(e,t){var r=[],n=(1-t)/2,a,i=e[0],o=e[1],s=1,l=e.length;while(++s<l){a=i;i=o;o=e[s];r.push([n*(o[0]-a[0]),n*(o[1]-a[1])])}return r}function bi(e){if(e.length<3)return fi(e);var t=1,r=e.length,n=e[0],a=n[0],i=n[1],o=[a,a,a,(n=e[1])[0]],s=[i,i,i,n[1]],l=[a,",",i,"L",ki(Si,o),",",ki(Si,s)];e.push(e[r-1]);while(++t<=r){n=e[t];o.shift();o.push(n[0]);s.shift();s.push(n[1]);Ei(l,o,s)}e.pop();l.push("L",n);return l.join("")}function _i(e){if(e.length<4)return fi(e);var t=[],r=-1,n=e.length,a,i=[0],o=[0];while(++r<3){a=e[r];i.push(a[0]);o.push(a[1])}t.push(ki(Si,i)+","+ki(Si,o));--r;while(++r<n){a=e[r];i.shift();i.push(a[0]);o.shift();o.push(a[1]);Ei(t,i,o)}return t.join("")}function wi(e){var t,r=-1,n=e.length,a=n+4,i,o=[],s=[];while(++r<4){i=e[r%n];o.push(i[0]);s.push(i[1])}t=[ki(Si,o),",",ki(Si,s)];--r;while(++r<a){i=e[r%n];o.shift();o.push(i[0]);s.shift();s.push(i[1]);Ei(t,o,s)}return t.join("")}function Ti(e,t){var r=e.length-1;if(r){var n=e[0][0],a=e[0][1],i=e[r][0]-n,o=e[r][1]-a,s=-1,l,u;while(++s<=r){l=e[s];u=s/r;l[0]=t*l[0]+(1-t)*(n+u*i);l[1]=t*l[1]+(1-t)*(a+u*o)}}return bi(e)}function ki(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}var Ai=[0,2/3,1/3,0],Mi=[0,1/3,2/3,0],Si=[0,1/6,2/3,1/6];function Ei(e,t,r){e.push("C",ki(Ai,t),",",ki(Ai,r),",",ki(Mi,t),",",ki(Mi,r),",",ki(Si,t),",",ki(Si,r))}function Li(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Ci(e){var t=0,r=e.length-1,n=[],a=e[0],i=e[1],o=n[0]=Li(a,i);while(++t<r){n[t]=(o+(o=Li(a=i,i=e[t+1])))/2}n[t]=o;return n}function Ii(e){var t=[],r,n,a,i,o=Ci(e),s=-1,l=e.length-1;while(++s<l){r=Li(e[s],e[s+1]);if(w(r)<Ce){o[s]=o[s+1]=0}else{n=o[s]/r;a=o[s+1]/r;i=n*n+a*a;if(i>9){i=r*3/Math.sqrt(i);o[s]=i*n;o[s+1]=i*a}}}s=-1;while(++s<=l){i=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s]));t.push([i||0,o[s]*i||0])}return t}function Pi(e){return e.length<3?fi(e):e[0]+mi(e,Ii(e))}i.svg.line.radial=function(){var e=li(Oi);e.radius=e.x,delete e.x;e.angle=e.y,delete e.y;return e};function Oi(e){var t,r=-1,n=e.length,a,i;while(++r<n){t=e[r];a=t[0];i=t[1]-ze;t[0]=a*Math.cos(i);t[1]=a*Math.sin(i)}return e}function Di(e){var t=Ut,r=Ut,n=0,a=Vt,i=si,o=fi,s=o.key,l=o,u="L",f=.7;function c(s){var c=[],v=[],h=[],p=-1,d=s.length,g,y=St(t),m=St(n),x=t===r?function(){return _}:St(r),b=n===a?function(){return w}:St(a),_,w;function T(){c.push("M",o(e(h),f),u,l(e(v.reverse()),f),"Z")}while(++p<d){if(i.call(this,g=s[p],p)){v.push([_=+y.call(this,g,p),w=+m.call(this,g,p)]);h.push([+x.call(this,g,p),+b.call(this,g,p)])}else if(v.length){T();v=[];h=[]}}if(v.length)T();return c.length?c.join(""):null}c.x=function(e){if(!arguments.length)return r;t=r=e;return c};c.x0=function(e){if(!arguments.length)return t;t=e;return c};c.x1=function(e){if(!arguments.length)return r;r=e;return c};c.y=function(e){if(!arguments.length)return a;n=a=e;return c};c.y0=function(e){if(!arguments.length)return n;n=e;return c};c.y1=function(e){if(!arguments.length)return a;a=e;return c};c.defined=function(e){if(!arguments.length)return i;i=e;return c};c.interpolate=function(e){if(!arguments.length)return s;if(typeof e==="function")s=o=e;else s=(o=ui.get(e)||fi).key;l=o.reverse||o;u=o.closed?"M":"L";return c};c.tension=function(e){if(!arguments.length)return f;f=e;return c};return c}hi.reverse=pi;pi.reverse=hi;i.svg.area=function(){return Di(R)};i.svg.area.radial=function(){var e=Di(Oi);e.radius=e.x,delete e.x;e.innerRadius=e.x0,delete e.x0;e.outerRadius=e.x1,delete e.x1;e.angle=e.y,delete e.y;e.startAngle=e.y0,delete e.y0;e.endAngle=e.y1,delete e.y1;return e};function zi(e){return e.source}function Ri(e){return e.target}i.svg.chord=function(){var e=zi,t=Ri,r=Fi,n=ri,a=ni;function i(r,n){var a=o(this,e,r,n),i=o(this,t,r,n);return"M"+a.p0+l(a.r,a.p1,a.a1-a.a0)+(s(a,i)?u(a.r,a.p1,a.r,a.p0):u(a.r,a.p1,i.r,i.p0)+l(i.r,i.p1,i.a1-i.a0)+u(i.r,i.p1,a.r,a.p0))+"Z"}function o(e,t,i,o){var s=t.call(e,i,o),l=r.call(e,s,o),u=n.call(e,s,o)-ze,f=a.call(e,s,o)-ze;return{r:l,a0:u,a1:f,p0:[l*Math.cos(u),l*Math.sin(u)],p1:[l*Math.cos(f),l*Math.sin(f)]}}function s(e,t){return e.a0==t.a0&&e.a1==t.a1}function l(e,t,r){return"A"+e+","+e+" 0 "+ +(r>Pe)+",1 "+t}function u(e,t,r,n){return"Q 0,0 "+n}i.radius=function(e){if(!arguments.length)return r;r=St(e);return i};i.source=function(t){if(!arguments.length)return e;e=St(t);return i};i.target=function(e){if(!arguments.length)return t;t=St(e);return i};i.startAngle=function(e){if(!arguments.length)return n;n=St(e);return i};i.endAngle=function(e){if(!arguments.length)return a;a=St(e);return i};return i};function Fi(e){return e.radius}i.svg.diagonal=function(){var e=zi,t=Ri,r=Bi;function n(n,a){var i=e.call(this,n,a),o=t.call(this,n,a),s=(i.y+o.y)/2,l=[i,{x:i.x,y:s},{x:o.x,y:s},o];l=l.map(r);return"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}n.source=function(t){if(!arguments.length)return e;e=St(t);return n};n.target=function(e){if(!arguments.length)return t;t=St(e);return n};n.projection=function(e){if(!arguments.length)return r;r=e;return n};return n};function Bi(e){return[e.x,e.y]}i.svg.diagonal.radial=function(){var e=i.svg.diagonal(),t=Bi,r=e.projection;e.projection=function(e){return arguments.length?r(Ni(t=e)):t};return e};function Ni(e){return function(){var t=e.apply(this,arguments),r=t[0],n=t[1]-ze;return[r*Math.cos(n),r*Math.sin(n)]}}i.svg.symbol=function(){var e=Ui,t=ji;function r(r,n){return(Hi.get(e.call(this,r,n))||Vi)(t.call(this,r,n))}r.type=function(t){if(!arguments.length)return e;e=St(t);return r};r.size=function(e){if(!arguments.length)return t;t=St(e);return r};return r};function ji(){return 64}function Ui(){return"circle"}function Vi(e){var t=Math.sqrt(e/Pe);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}var Hi=i.map({circle:Vi,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Gi)),r=t*Gi;return"M0,"+-t+"L"+r+",0"+" 0,"+t+" "+-r+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/qi),r=t*qi/2;return"M0,"+r+"L"+t+","+-r+" "+-t+","+-r+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/qi),r=t*qi/2;return"M0,"+-r+"L"+t+","+r+" "+-t+","+r+"Z"}});i.svg.symbolTypes=Hi.keys();var qi=Math.sqrt(3),Gi=Math.tan(30*Re);$.transition=function(e){var t=Ki||++Ji,r=to(e),n=[],a,i,o=$i||{time:Date.now(),ease:Qr,delay:0,duration:250};for(var s=-1,l=this.length;++s<l;){n.push(a=[]);for(var u=this[s],f=-1,c=u.length;++f<c;){if(i=u[f])ro(i,f,r,t,o);a.push(i)}}return Wi(n,r,t)};$.interrupt=function(e){return this.each(e==null?Zi:Yi(to(e)))};var Zi=Yi(to());function Yi(e){return function(){var t,r,n;if((t=this[e])&&(n=t[r=t.active])){n.timer.c=null;n.timer.t=NaN;if(--t.count)delete t[r];else delete this[e];t.active+=.5;n.event&&n.event.interrupt.call(this,this.__data__,n.index)}}}function Wi(e,t,r){Y(e,Xi);e.namespace=t;e.id=r;return e}var Xi=[],Ji=0,Ki,$i;Xi.call=$.call;Xi.empty=$.empty;Xi.node=$.node;Xi.size=$.size;i.transition=function(e,t){return e&&e.transition?Ki?e.transition(t):e:i.selection().transition(e)};i.transition.prototype=Xi;Xi.select=function(e){var t=this.id,r=this.namespace,n=[],a,i,o;e=Q(e);for(var s=-1,l=this.length;++s<l;){n.push(a=[]);for(var u=this[s],f=-1,c=u.length;++f<c;){if((o=u[f])&&(i=e.call(o,o.__data__,f,s))){if("__data__"in o)i.__data__=o.__data__;ro(i,f,r,t,o[r][t]);a.push(i)}else{a.push(null)}}}return Wi(n,r,t)};Xi.selectAll=function(e){var t=this.id,r=this.namespace,n=[],a,i,o,s,l;e=ee(e);for(var u=-1,f=this.length;++u<f;){for(var c=this[u],v=-1,h=c.length;++v<h;){if(o=c[v]){l=o[r][t];i=e.call(o,o.__data__,v,u);n.push(a=[]);for(var p=-1,d=i.length;++p<d;){if(s=i[p])ro(s,p,r,t,l);a.push(s)}}}}return Wi(n,r,t)};Xi.filter=function(e){var t=[],r,n,a;if(typeof e!=="function")e=pe(e);for(var i=0,o=this.length;i<o;i++){t.push(r=[]);for(var n=this[i],s=0,l=n.length;s<l;s++){if((a=n[s])&&e.call(a,a.__data__,s,i)){r.push(a)}}}return Wi(t,this.namespace,this.id)};Xi.tween=function(e,t){var r=this.id,n=this.namespace;if(arguments.length<2)return this.node()[n][r].tween.get(e);return ge(this,t==null?function(t){t[n][r].tween.remove(e)}:function(a){a[n][r].tween.set(e,t)})};function Qi(e,t,r,n){var a=e.id,i=e.namespace;return ge(e,typeof r==="function"?function(e,o,s){e[i][a].tween.set(t,n(r.call(e,e.__data__,o,s)))}:(r=n(r),function(e){e[i][a].tween.set(t,r)}))}Xi.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var r=e=="transform"?wn:Hr,n=i.ns.qualify(e);function a(){this.removeAttribute(n)}function o(){this.removeAttributeNS(n.space,n.local)}function s(e){return e==null?a:(e+="",function(){var t=this.getAttribute(n),a;return t!==e&&(a=r(t,e),function(e){this.setAttribute(n,a(e))})})}function l(e){return e==null?o:(e+="",function(){var t=this.getAttributeNS(n.space,n.local),a;return t!==e&&(a=r(t,e),function(e){this.setAttributeNS(n.space,n.local,a(e))})})}return Qi(this,"attr."+e,t,n.local?l:s)};Xi.attrTween=function(e,t){var r=i.ns.qualify(e);function n(e,n){var a=t.call(this,e,n,this.getAttribute(r));return a&&function(e){this.setAttribute(r,a(e))}}function a(e,n){var a=t.call(this,e,n,this.getAttributeNS(r.space,r.local));return a&&function(e){this.setAttributeNS(r.space,r.local,a(e))}}return this.tween("attr."+e,r.local?a:n)};Xi.style=function(e,t,r){var n=arguments.length;if(n<3){if(typeof e!=="string"){if(n<2)t="";for(r in e)this.style(r,e[r],t);return this}r=""}function a(){this.style.removeProperty(e)}function i(t){return t==null?a:(t+="",function(){var n=f(this).getComputedStyle(this,null).getPropertyValue(e),a;return n!==t&&(a=Hr(n,t),function(t){this.style.setProperty(e,a(t),r)})})}return Qi(this,"style."+e,t,i)};Xi.styleTween=function(e,t,r){if(arguments.length<3)r="";function n(n,a){var i=t.call(this,n,a,f(this).getComputedStyle(this,null).getPropertyValue(e));return i&&function(t){this.style.setProperty(e,i(t),r)}}return this.tween("style."+e,n)};Xi.text=function(e){return Qi(this,"text",e,eo)};function eo(e){if(e==null)e="";return function(){this.textContent=e}}Xi.remove=function(){var e=this.namespace;return this.each("end.transition",(function(){var t;if(this[e].count<2&&(t=this.parentNode))t.removeChild(this)}))};Xi.ease=function(e){var t=this.id,r=this.namespace;if(arguments.length<1)return this.node()[r][t].ease;if(typeof e!=="function")e=i.ease.apply(i,arguments);return ge(this,(function(n){n[r][t].ease=e}))};Xi.delay=function(e){var t=this.id,r=this.namespace;if(arguments.length<1)return this.node()[r][t].delay;return ge(this,typeof e==="function"?function(n,a,i){n[r][t].delay=+e.call(n,n.__data__,a,i)}:(e=+e,function(n){n[r][t].delay=e}))};Xi.duration=function(e){var t=this.id,r=this.namespace;if(arguments.length<1)return this.node()[r][t].duration;return ge(this,typeof e==="function"?function(n,a,i){n[r][t].duration=Math.max(1,e.call(n,n.__data__,a,i))}:(e=Math.max(1,e),function(n){n[r][t].duration=e}))};Xi.each=function(e,t){var r=this.id,n=this.namespace;if(arguments.length<2){var a=$i,o=Ki;try{Ki=r;ge(this,(function(t,a,i){$i=t[n][r];e.call(t,t.__data__,a,i)}))}finally{$i=a;Ki=o}}else{ge(this,(function(a){var o=a[n][r];(o.event||(o.event=i.dispatch("start","end","interrupt"))).on(e,t)}))}return this};Xi.transition=function(){var e=this.id,t=++Ji,r=this.namespace,n=[],a,i,o,s;for(var l=0,u=this.length;l<u;l++){n.push(a=[]);for(var i=this[l],f=0,c=i.length;f<c;f++){if(o=i[f]){s=o[r][e];ro(o,f,r,t,{time:s.time,ease:s.ease,delay:s.delay+s.duration,duration:s.duration})}a.push(o)}}return Wi(n,r,t)};function to(e){return e==null?"__transition__":"__transition_"+e+"__"}function ro(e,t,r,n,a){var i=e[r]||(e[r]={active:0,count:0}),o=i[n],s,l,u,f,c;function v(e){var t=o.delay;l.t=t+s;if(t<=e)return h(e-t);l.c=h}function h(r){var a=i.active,v=i[a];if(v){v.timer.c=null;v.timer.t=NaN;--i.count;delete i[a];v.event&&v.event.interrupt.call(e,e.__data__,v.index)}for(var h in i){if(+h<n){var d=i[h];d.timer.c=null;d.timer.t=NaN;--i.count;delete i[h]}}l.c=p;Ft((function(){if(l.c&&p(r||1)){l.c=null;l.t=NaN}return 1}),0,s);i.active=n;o.event&&o.event.start.call(e,e.__data__,t);c=[];o.tween.forEach((function(r,n){if(n=n.call(e,e.__data__,t)){c.push(n)}}));f=o.ease;u=o.duration}function p(a){var s=a/u,l=f(s),v=c.length;while(v>0){c[--v].call(e,l)}if(s>=1){o.event&&o.event.end.call(e,e.__data__,t);if(--i.count)delete i[n];else delete e[r];return 1}}if(!o){s=a.time;l=Ft(v,0,s);o=i[n]={tween:new A,time:s,timer:l,delay:a.delay,duration:a.duration,ease:a.ease,index:t};a=null;++i.count}}i.svg.axis=function(){var e=i.scale.linear(),t=no,r=6,n=6,a=3,o=[10],l=null,u;function f(s){s.each((function(){var s=i.select(this);var f=this.__chart__||e,c=this.__chart__=e.copy();var v=l==null?c.ticks?c.ticks.apply(c,o):c.domain():l,h=u==null?c.tickFormat?c.tickFormat.apply(c,o):R:u,p=s.selectAll(".tick").data(v,c),d=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Ce),g=i.transition(p.exit()).style("opacity",Ce).remove(),y=i.transition(p.order()).style("opacity",1),m=Math.max(r,0)+a,x;var b=Aa(c),_=s.selectAll(".domain").data([0]),w=(_.enter().append("path").attr("class","domain"),i.transition(_));d.append("line");d.append("text");var T=d.select("line"),k=y.select("line"),A=p.select("text").text(h),M=d.select("text"),S=y.select("text"),E=t==="top"||t==="left"?-1:1,L,C,I,P;if(t==="bottom"||t==="top"){x=io,L="x",I="y",C="x2",P="y2";A.attr("dy",E<0?"0em":".71em").style("text-anchor","middle");w.attr("d","M"+b[0]+","+E*n+"V0H"+b[1]+"V"+E*n)}else{x=oo,L="y",I="x",C="y2",P="x2";A.attr("dy",".32em").style("text-anchor",E<0?"end":"start");w.attr("d","M"+E*n+","+b[0]+"H0V"+b[1]+"H"+E*n)}T.attr(P,E*r);M.attr(I,E*m);k.attr(C,0).attr(P,E*r);S.attr(L,0).attr(I,E*m);if(c.rangeBand){var O=c,D=O.rangeBand()/2;f=c=function(e){return O(e)+D}}else if(f.rangeBand){f=c}else{g.call(x,c,f)}d.call(x,f,c);y.call(x,c,c)}))}f.scale=function(t){if(!arguments.length)return e;e=t;return f};f.orient=function(e){if(!arguments.length)return t;t=e in ao?e+"":no;return f};f.ticks=function(){if(!arguments.length)return o;o=s(arguments);return f};f.tickValues=function(e){if(!arguments.length)return l;l=e;return f};f.tickFormat=function(e){if(!arguments.length)return u;u=e;return f};f.tickSize=function(e){var t=arguments.length;if(!t)return r;r=+e;n=+arguments[t-1];return f};f.innerTickSize=function(e){if(!arguments.length)return r;r=+e;return f};f.outerTickSize=function(e){if(!arguments.length)return n;n=+e;return f};f.tickPadding=function(e){if(!arguments.length)return a;a=+e;return f};f.tickSubdivide=function(){return arguments.length&&f};return f};var no="bottom",ao={top:1,right:1,bottom:1,left:1};function io(e,t,r){e.attr("transform",(function(e){var n=t(e);return"translate("+(isFinite(n)?n:r(e))+",0)"}))}function oo(e,t,r){e.attr("transform",(function(e){var n=t(e);return"translate(0,"+(isFinite(n)?n:r(e))+")"}))}i.svg.brush=function(){var e=G(v,"brushstart","brush","brushend"),t=null,r=null,n=[0,0],a=[0,0],o,s,l=true,u=true,c=lo[0];function v(e){e.each((function(){var e=i.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g);var n=e.selectAll(".background").data([0]);n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=e.selectAll(".resize").data(c,R);a.exit().remove();a.enter().append("g").attr("class",(function(e){return"resize "+e})).style("cursor",(function(e){return so[e]})).append("rect").attr("x",(function(e){return/[ew]$/.test(e)?-3:null})).attr("y",(function(e){return/^[ns]/.test(e)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden");a.style("display",v.empty()?"none":null);var o=i.transition(e),s=i.transition(n),l;if(t){l=Aa(t);s.attr("x",l[0]).attr("width",l[1]-l[0]);p(o)}if(r){l=Aa(r);s.attr("y",l[0]).attr("height",l[1]-l[0]);d(o)}h(o)}))}v.event=function(t){t.each((function(){var t=e.of(this,arguments),r={x:n,y:a,i:o,j:s},l=this.__chart__||r;this.__chart__=r;if(Ki){i.select(this).transition().each("start.brush",(function(){o=l.i;s=l.j;n=l.x;a=l.y;t({type:"brushstart"})})).tween("brush:brush",(function(){var e=qr(n,r.x),i=qr(a,r.y);o=s=null;return function(o){n=r.x=e(o);a=r.y=i(o);t({type:"brush",mode:"resize"})}})).each("end.brush",(function(){o=r.i;s=r.j;t({type:"brush",mode:"resize"});t({type:"brushend"})}))}else{t({type:"brushstart"});t({type:"brush",mode:"resize"});t({type:"brushend"})}}))};function h(e){e.selectAll(".resize").attr("transform",(function(e){return"translate("+n[+/e$/.test(e)]+","+a[+/^s/.test(e)]+")"}))}function p(e){e.select(".extent").attr("x",n[0]);e.selectAll(".extent,.n>rect,.s>rect").attr("width",n[1]-n[0])}function d(e){e.select(".extent").attr("y",a[0]);e.selectAll(".extent,.e>rect,.w>rect").attr("height",a[1]-a[0])}function g(){var c=this,g=i.select(i.event.target),y=e.of(c,arguments),m=i.select(c),x=g.datum(),b=!/^(n|s)$/.test(x)&&t,_=!/^(e|w)$/.test(x)&&r,w=g.classed("extent"),T=Me(c),k,A=i.mouse(c),M;var S=i.select(f(c)).on("keydown.brush",C).on("keyup.brush",I);if(i.event.changedTouches){S.on("touchmove.brush",P).on("touchend.brush",D)}else{S.on("mousemove.brush",P).on("mouseup.brush",D)}m.interrupt().selectAll("*").interrupt();if(w){A[0]=n[0]-A[0];A[1]=a[0]-A[1]}else if(x){var E=+/w$/.test(x),L=+/^n/.test(x);M=[n[1-E]-A[0],a[1-L]-A[1]];A[0]=n[E];A[1]=a[L]}else if(i.event.altKey)k=A.slice();m.style("pointer-events","none").selectAll(".resize").style("display",null);i.select("body").style("cursor",g.style("cursor"));y({type:"brushstart"});P();function C(){if(i.event.keyCode==32){if(!w){k=null;A[0]-=n[1];A[1]-=a[1];w=2}H()}}function I(){if(i.event.keyCode==32&&w==2){A[0]+=n[1];A[1]+=a[1];w=0;H()}}function P(){var e=i.mouse(c),o=false;if(M){e[0]+=M[0];e[1]+=M[1]}if(!w){if(i.event.altKey){if(!k)k=[(n[0]+n[1])/2,(a[0]+a[1])/2];A[0]=n[+(e[0]<k[0])];A[1]=a[+(e[1]<k[1])]}else k=null}if(b&&O(e,t,0)){p(m);o=true}if(_&&O(e,r,1)){d(m);o=true}if(o){h(m);y({type:"brush",mode:w?"move":"resize"})}}function O(e,t,r){var i=Aa(t),f=i[0],c=i[1],v=A[r],h=r?a:n,p=h[1]-h[0],d,g;if(w){f-=v;c-=p+v}d=(r?u:l)?Math.max(f,Math.min(c,e[r])):e[r];if(w){g=(d+=v)+p}else{if(k)v=Math.max(f,Math.min(c,2*k[r]-d));if(v<d){g=d;d=v}else{g=v}}if(h[0]!=d||h[1]!=g){if(r)s=null;else o=null;h[0]=d;h[1]=g;return true}}function D(){P();m.style("pointer-events","all").selectAll(".resize").style("display",v.empty()?"none":null);i.select("body").style("cursor",null);S.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);T();y({type:"brushend"})}}v.x=function(e){if(!arguments.length)return t;t=e;c=lo[!t<<1|!r];return v};v.y=function(e){if(!arguments.length)return r;r=e;c=lo[!t<<1|!r];return v};v.clamp=function(e){if(!arguments.length)return t&&r?[l,u]:t?l:r?u:null;if(t&&r)l=!!e[0],u=!!e[1];else if(t)l=!!e;else if(r)u=!!e;return v};v.extent=function(e){var i,l,u,f,c;if(!arguments.length){if(t){if(o){i=o[0],l=o[1]}else{i=n[0],l=n[1];if(t.invert)i=t.invert(i),l=t.invert(l);if(l<i)c=i,i=l,l=c}}if(r){if(s){u=s[0],f=s[1]}else{u=a[0],f=a[1];if(r.invert)u=r.invert(u),f=r.invert(f);if(f<u)c=u,u=f,f=c}}return t&&r?[[i,u],[l,f]]:t?[i,l]:r&&[u,f]}if(t){i=e[0],l=e[1];if(r)i=i[0],l=l[0];o=[i,l];if(t.invert)i=t(i),l=t(l);if(l<i)c=i,i=l,l=c;if(i!=n[0]||l!=n[1])n=[i,l]}if(r){u=e[0],f=e[1];if(t)u=u[1],f=f[1];s=[u,f];if(r.invert)u=r(u),f=r(f);if(f<u)c=u,u=f,f=c;if(u!=a[0]||f!=a[1])a=[u,f]}return v};v.clear=function(){if(!v.empty()){n=[0,0],a=[0,0];o=s=null}return v};v.empty=function(){return!!t&&n[0]==n[1]||!!r&&a[0]==a[1]};return i.rebind(v,e,"on")};var so={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var lo=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];i.text=Et((function(e){return e.responseText}));i.json=function(e,t){return Lt(e,"application/json",uo,t)};function uo(e){return JSON.parse(e.responseText)}i.html=function(e,t){return Lt(e,"text/html",fo,t)};function fo(e){var t=l.createRange();t.selectNode(l.body);return t.createContextualFragment(e.responseText)}i.xml=Et((function(e){return e.responseXML}));if(true)!(n=i,a=typeof n==="function"?n.call(t,r,t,e):n,a!==undefined&&(e.exports=a));else{}}.apply(self)},88294:function(e,t,r){"use strict";e.exports=r(62849)},62849:function(e,t,r){"use strict";var n=r(91358);var a=r(53435);var i=r(18863);var o=r(21527);var s=r(71299);var l=r(46775);var u=r(30120);var f=r(64941);var c=r(90660);var v=r(27084);var h=1073741824;e.exports=function e(t,r){if(!r){r={}}t=u(t,"float64");r=s(r,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var a=l(r.maxDepth,255);var d=l(r.bounds,o(t,2));if(d[0]===d[2]){d[2]++}if(d[1]===d[3]){d[3]++}var g=p(t,d);var y=t.length>>>1;var m;if(!r.dtype){r.dtype="array"}if(typeof r.dtype==="string"){m=new(c(r.dtype))(y)}else if(r.dtype){m=r.dtype;if(Array.isArray(m)){m.length=y}}for(var x=0;x<y;++x){m[x]=x}var b=[];var _=[];var w=[];var T=[];C(0,0,1,m,0,1);var k=0;for(var A=0;A<b.length;A++){var M=b[A];if(m.set){m.set(M,k)}else{for(var S=0,E=M.length;S<E;S++){m[S+k]=M[S]}}var L=k+b[A].length;T[A]=[k,L];k=L}m.range=I;return m;function C(e,t,r,n,i,o){if(!n.length){return null}var s=b[i]||(b[i]=[]);var l=w[i]||(w[i]=[]);var u=_[i]||(_[i]=[]);var f=s.length;i++;if(i>a||o>h){for(var c=0;c<n.length;c++){s.push(n[c]);l.push(o);u.push(null,null,null,null)}return f}s.push(n[0]);l.push(o);if(n.length<=1){u.push(null,null,null,null);return f}var v=r*.5;var p=e+v,d=t+v;var y=[],m=[],x=[],T=[];for(var k=1,A=n.length;k<A;k++){var M=n[k],S=g[M*2],E=g[M*2+1];S<p?E<d?y.push(M):m.push(M):E<d?x.push(M):T.push(M)}o<<=2;u.push(C(e,t,v,y,i,o),C(e,d,v,m,i,o+1),C(p,t,v,x,i,o+2),C(p,d,v,T,i,o+3));return f}function I(){var e=[],r=arguments.length;while(r--)e[r]=arguments[r];var n;if(f(e[e.length-1])){var a=e.pop();if(!e.length&&(a.x!=null||a.l!=null||a.left!=null)){e=[a];n={}}n=s(a,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else{n={}}if(!e.length){e=d}var o=i.apply(void 0,e);var u=[Math.min(o.x,o.x+o.width),Math.min(o.y,o.y+o.height),Math.max(o.x,o.x+o.width),Math.max(o.y,o.y+o.height)];var c=u[0];var h=u[1];var g=u[2];var y=u[3];var m=p([c,h,g,y],d);var x=m[0];var w=m[1];var T=m[2];var k=m[3];var A=l(n.level,b.length);if(n.d!=null){var M;if(typeof n.d==="number"){M=[n.d,n.d]}else if(n.d.length){M=n.d}A=Math.min(Math.max(Math.ceil(-v(Math.abs(M[0])/(d[2]-d[0]))),Math.ceil(-v(Math.abs(M[1])/(d[3]-d[1])))),A)}A=Math.min(A,b.length);if(n.lod){return P(x,w,T,k,A)}var S=[];E(0,0,1,0,0,1);function E(e,r,n,a,i,o){if(i===null||o===null){return}var s=e+n;var l=r+n;if(x>s||w>l||T<e||k<r){return}if(a>=A){return}if(i===o){return}var u=b[a];if(o===undefined){o=u.length}for(var f=i;f<o;f++){var v=u[f];var p=t[v*2];var d=t[v*2+1];if(p>=c&&p<=g&&d>=h&&d<=y){S.push(v)}}var m=_[a];var M=m[i*4+0];var C=m[i*4+1];var I=m[i*4+2];var P=m[i*4+3];var O=L(m,i+1);var D=n*.5;var z=a+1;E(e,r,D,z,M,C||I||P||O);E(e,r+D,D,z,C,I||P||O);E(e+D,r,D,z,I,P||O);E(e+D,r+D,D,z,P,O)}function L(e,t){var r=null,n=0;while(r===null){r=e[t*4+n];n++;if(n>e.length){return null}}return r}return S}function P(e,t,r,a,i){var o=[];for(var s=0;s<i;s++){var l=w[s];var u=T[s][0];var f=O(e,t,s);var c=O(r,a,s);var v=n.ge(l,f);var h=n.gt(l,c,v,l.length-1);o[s]=[v+u,h+u]}return o}function O(e,t,r){var n=1;var a=.5,i=.5;var o=.5;for(var s=0;s<r;s++){n<<=2;n+=e<a?t<i?0:1:t<i?2:3;o*=.5;a+=e<a?-o:o;i+=t<i?-o:o}return n}};function p(e,t){var r=t[0];var n=t[1];var i=t[2];var o=t[3];var s=1/(i-r);var l=1/(o-n);var u=new Array(e.length);for(var f=0,c=e.length/2;f<c;f++){u[2*f]=a((e[2*f]-r)*s,0,1);u[2*f+1]=a((e[2*f+1]-n)*l,0,1)}return u}},30774:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(60302);var a=6378137;function i(e){return n.geomReduce(e,(function(e,t){return e+o(t)}),0)}t["default"]=i;function o(e){var t=0;var r;switch(e.type){case"Polygon":return s(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++){t+=s(e.coordinates[r])}return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function s(e){var t=0;if(e&&e.length>0){t+=Math.abs(l(e[0]));for(var r=1;r<e.length;r++){t-=Math.abs(l(e[r]))}}return t}function l(e){var t;var r;var n;var i;var o;var s;var l;var f=0;var c=e.length;if(c>2){for(l=0;l<c;l++){if(l===c-2){i=c-2;o=c-1;s=0}else if(l===c-1){i=c-1;o=0;s=1}else{i=l;o=l+1;s=l+2}t=e[i];r=e[o];n=e[s];f+=(u(n[0])-u(t[0]))*Math.sin(u(r[1]))}f=f*a*a/2}return f}function u(e){return e*Math.PI/180}},23132:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.earthRadius=6371008.8;t.factors={centimeters:t.earthRadius*100,centimetres:t.earthRadius*100,degrees:t.earthRadius/111325,feet:t.earthRadius*3.28084,inches:t.earthRadius*39.37,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:t.earthRadius*1e3,millimetres:t.earthRadius*1e3,nauticalmiles:t.earthRadius/1852,radians:1,yards:t.earthRadius*1.0936};t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1.0936133};t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function r(e,t,r){if(r===void 0){r={}}var n={type:"Feature"};if(r.id===0||r.id){n.id=r.id}if(r.bbox){n.bbox=r.bbox}n.properties=t||{};n.geometry=e;return n}t.feature=r;function n(e,t,r){if(r===void 0){r={}}switch(e){case"Point":return a(t).geometry;case"LineString":return l(t).geometry;case"Polygon":return o(t).geometry;case"MultiPoint":return v(t).geometry;case"MultiLineString":return c(t).geometry;case"MultiPolygon":return h(t).geometry;default:throw new Error(e+" is invalid")}}t.geometry=n;function a(e,t,n){if(n===void 0){n={}}if(!e){throw new Error("coordinates is required")}if(!Array.isArray(e)){throw new Error("coordinates must be an Array")}if(e.length<2){throw new Error("coordinates must be at least 2 numbers long")}if(!k(e[0])||!k(e[1])){throw new Error("coordinates must contain numbers")}var a={type:"Point",coordinates:e};return r(a,t,n)}t.point=a;function i(e,t,r){if(r===void 0){r={}}return f(e.map((function(e){return a(e,t)})),r)}t.points=i;function o(e,t,n){if(n===void 0){n={}}for(var a=0,i=e;a<i.length;a++){var o=i[a];if(o.length<4){throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.")}for(var s=0;s<o[o.length-1].length;s++){if(o[o.length-1][s]!==o[0][s]){throw new Error("First and last Position are not equivalent.")}}}var l={type:"Polygon",coordinates:e};return r(l,t,n)}t.polygon=o;function s(e,t,r){if(r===void 0){r={}}return f(e.map((function(e){return o(e,t)})),r)}t.polygons=s;function l(e,t,n){if(n===void 0){n={}}if(e.length<2){throw new Error("coordinates must be an array of two or more positions")}var a={type:"LineString",coordinates:e};return r(a,t,n)}t.lineString=l;function u(e,t,r){if(r===void 0){r={}}return f(e.map((function(e){return l(e,t)})),r)}t.lineStrings=u;function f(e,t){if(t===void 0){t={}}var r={type:"FeatureCollection"};if(t.id){r.id=t.id}if(t.bbox){r.bbox=t.bbox}r.features=e;return r}t.featureCollection=f;function c(e,t,n){if(n===void 0){n={}}var a={type:"MultiLineString",coordinates:e};return r(a,t,n)}t.multiLineString=c;function v(e,t,n){if(n===void 0){n={}}var a={type:"MultiPoint",coordinates:e};return r(a,t,n)}t.multiPoint=v;function h(e,t,n){if(n===void 0){n={}}var a={type:"MultiPolygon",coordinates:e};return r(a,t,n)}t.multiPolygon=h;function p(e,t,n){if(n===void 0){n={}}var a={type:"GeometryCollection",geometries:e};return r(a,t,n)}t.geometryCollection=p;function d(e,t){if(t===void 0){t=0}if(t&&!(t>=0)){throw new Error("precision must be a positive number")}var r=Math.pow(10,t||0);return Math.round(e*r)/r}t.round=d;function g(e,r){if(r===void 0){r="kilometers"}var n=t.factors[r];if(!n){throw new Error(r+" units is invalid")}return e*n}t.radiansToLength=g;function y(e,r){if(r===void 0){r="kilometers"}var n=t.factors[r];if(!n){throw new Error(r+" units is invalid")}return e/n}t.lengthToRadians=y;function m(e,t){return b(y(e,t))}t.lengthToDegrees=m;function x(e){var t=e%360;if(t<0){t+=360}return t}t.bearingToAzimuth=x;function b(e){var t=e%(2*Math.PI);return t*180/Math.PI}t.radiansToDegrees=b;function _(e){var t=e%360;return t*Math.PI/180}t.degreesToRadians=_;function w(e,t,r){if(t===void 0){t="kilometers"}if(r===void 0){r="kilometers"}if(!(e>=0)){throw new Error("length must be a positive number")}return g(y(e,t),r)}t.convertLength=w;function T(e,r,n){if(r===void 0){r="meters"}if(n===void 0){n="kilometers"}if(!(e>=0)){throw new Error("area must be a positive number")}var a=t.areaFactors[r];if(!a){throw new Error("invalid original units")}var i=t.areaFactors[n];if(!i){throw new Error("invalid final units")}return e/a*i}t.convertArea=T;function k(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}t.isNumber=k;function A(e){return!!e&&e.constructor===Object}t.isObject=A;function M(e){if(!e){throw new Error("bbox is required")}if(!Array.isArray(e)){throw new Error("bbox must be an Array")}if(e.length!==4&&e.length!==6){throw new Error("bbox must be an Array of 4 or 6 numbers")}e.forEach((function(e){if(!k(e)){throw new Error("bbox must only contain numbers")}}))}t.validateBBox=M;function S(e){if(!e){throw new Error("id is required")}if(["string","number"].indexOf(typeof e)===-1){throw new Error("id must be a number or a string")}}t.validateId=S},60302:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(23132);function a(e,t,r){if(e===null)return;var n,i,o,s,l,u,f,c=0,v=0,h,p=e.type,d=p==="FeatureCollection",g=p==="Feature",y=d?e.features.length:1;for(var m=0;m<y;m++){f=d?e.features[m].geometry:g?e.geometry:e;h=f?f.type==="GeometryCollection":false;l=h?f.geometries.length:1;for(var x=0;x<l;x++){var b=0;var _=0;s=h?f.geometries[x]:f;if(s===null)continue;u=s.coordinates;var w=s.type;c=r&&(w==="Polygon"||w==="MultiPolygon")?1:0;switch(w){case null:break;case"Point":if(t(u,v,m,b,_)===false)return false;v++;b++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(t(u[n],v,m,b,_)===false)return false;v++;if(w==="MultiPoint")b++}if(w==="LineString")b++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(i=0;i<u[n].length-c;i++){if(t(u[n][i],v,m,b,_)===false)return false;v++}if(w==="MultiLineString")b++;if(w==="Polygon")_++}if(w==="Polygon")b++;break;case"MultiPolygon":for(n=0;n<u.length;n++){_=0;for(i=0;i<u[n].length;i++){for(o=0;o<u[n][i].length-c;o++){if(t(u[n][i][o],v,m,b,_)===false)return false;v++}_++}b++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(a(s.geometries[n],t,r)===false)return false;break;default:throw new Error("Unknown Geometry Type")}}}}function i(e,t,r,n){var i=r;a(e,(function(e,n,a,o,s){if(n===0&&r===undefined)i=e;else i=t(i,e,n,a,o,s)}),n);return i}function o(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length;r++){if(t(e.features[r].properties,r)===false)break}break;case"Feature":t(e.properties,0);break}}function s(e,t,r){var n=r;o(e,(function(e,a){if(a===0&&r===undefined)n=e;else n=t(n,e,a)}));return n}function l(e,t){if(e.type==="Feature"){t(e,0)}else if(e.type==="FeatureCollection"){for(var r=0;r<e.features.length;r++){if(t(e.features[r],r)===false)break}}}function u(e,t,r){var n=r;l(e,(function(e,a){if(a===0&&r===undefined)n=e;else n=t(n,e,a)}));return n}function f(e){var t=[];a(e,(function(e){t.push(e)}));return t}function c(e,t){var r,n,a,i,o,s,l,u,f,c,v=0,h=e.type==="FeatureCollection",p=e.type==="Feature",d=h?e.features.length:1;for(r=0;r<d;r++){s=h?e.features[r].geometry:p?e.geometry:e;u=h?e.features[r].properties:p?e.properties:{};f=h?e.features[r].bbox:p?e.bbox:undefined;c=h?e.features[r].id:p?e.id:undefined;l=s?s.type==="GeometryCollection":false;o=l?s.geometries.length:1;for(a=0;a<o;a++){i=l?s.geometries[a]:s;if(i===null){if(t(null,v,u,f,c)===false)return false;continue}switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(i,v,u,f,c)===false)return false;break}case"GeometryCollection":{for(n=0;n<i.geometries.length;n++){if(t(i.geometries[n],v,u,f,c)===false)return false}break}default:throw new Error("Unknown Geometry Type")}}v++}}function v(e,t,r){var n=r;c(e,(function(e,a,i,o,s){if(a===0&&r===undefined)n=e;else n=t(n,e,a,i,o,s)}));return n}function h(e,t){c(e,(function(e,r,a,i,o){var s=e===null?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":if(t(n.feature(e,a,{bbox:i,id:o}),r,0)===false)return false;return}var l;switch(s){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<e.coordinates.length;u++){var f=e.coordinates[u];var c={type:l,coordinates:f};if(t(n.feature(c,a),r,u)===false)return false}}))}function p(e,t,r){var n=r;h(e,(function(e,a,i){if(a===0&&i===0&&r===undefined)n=e;else n=t(n,e,a,i)}));return n}function d(e,t){h(e,(function(e,r,i){var o=0;if(!e.geometry)return;var s=e.geometry.type;if(s==="Point"||s==="MultiPoint")return;var l;var u=0;var f=0;var c=0;if(a(e,(function(a,s,v,h,p){if(l===undefined||r>u||h>f||p>c){l=a;u=r;f=h;c=p;o=0;return}var d=n.lineString([l,a],e.properties);if(t(d,r,i,p,o)===false)return false;o++;l=a}))===false)return false}))}function g(e,t,r){var n=r;var a=false;d(e,(function(e,i,o,s,l){if(a===false&&r===undefined)n=e;else n=t(n,e,i,o,s,l);a=true}));return n}function y(e,t){if(!e)throw new Error("geojson is required");h(e,(function(e,r,a){if(e.geometry===null)return;var i=e.geometry.type;var o=e.geometry.coordinates;switch(i){case"LineString":if(t(e,r,a,0,0)===false)return false;break;case"Polygon":for(var s=0;s<o.length;s++){if(t(n.lineString(o[s],e.properties),r,a,s)===false)return false}break}}))}function m(e,t,r){var n=r;y(e,(function(e,a,i,o){if(a===0&&r===undefined)n=e;else n=t(n,e,a,i,o)}));return n}function x(e,t){t=t||{};if(!n.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0;var a=t.multiFeatureIndex||0;var i=t.geometryIndex||0;var o=t.segmentIndex||0;var s=t.properties;var l;switch(e.type){case"FeatureCollection":if(r<0)r=e.features.length+r;s=s||e.features[r].properties;l=e.features[r].geometry;break;case"Feature":s=s||e.properties;l=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=e;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var u=l.coordinates;switch(l.type){case"Point":case"MultiPoint":return null;case"LineString":if(o<0)o=u.length+o-1;return n.lineString([u[o],u[o+1]],s,t);case"Polygon":if(i<0)i=u.length+i;if(o<0)o=u[i].length+o-1;return n.lineString([u[i][o],u[i][o+1]],s,t);case"MultiLineString":if(a<0)a=u.length+a;if(o<0)o=u[a].length+o-1;return n.lineString([u[a][o],u[a][o+1]],s,t);case"MultiPolygon":if(a<0)a=u.length+a;if(i<0)i=u[a].length+i;if(o<0)o=u[a][i].length-o-1;return n.lineString([u[a][i][o],u[a][i][o+1]],s,t)}throw new Error("geojson is invalid")}function b(e,t){t=t||{};if(!n.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0;var a=t.multiFeatureIndex||0;var i=t.geometryIndex||0;var o=t.coordIndex||0;var s=t.properties;var l;switch(e.type){case"FeatureCollection":if(r<0)r=e.features.length+r;s=s||e.features[r].properties;l=e.features[r].geometry;break;case"Feature":s=s||e.properties;l=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=e;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var u=l.coordinates;switch(l.type){case"Point":return n.point(u,s,t);case"MultiPoint":if(a<0)a=u.length+a;return n.point(u[a],s,t);case"LineString":if(o<0)o=u.length+o;return n.point(u[o],s,t);case"Polygon":if(i<0)i=u.length+i;if(o<0)o=u[i].length+o;return n.point(u[i][o],s,t);case"MultiLineString":if(a<0)a=u.length+a;if(o<0)o=u[a].length+o;return n.point(u[a][o],s,t);case"MultiPolygon":if(a<0)a=u.length+a;if(i<0)i=u[a].length+i;if(o<0)o=u[a][i].length-o;return n.point(u[a][i][o],s,t)}throw new Error("geojson is invalid")}t.coordEach=a;t.coordReduce=i;t.propEach=o;t.propReduce=s;t.featureEach=l;t.featureReduce=u;t.coordAll=f;t.geomEach=c;t.geomReduce=v;t.flattenEach=h;t.flattenReduce=p;t.segmentEach=d;t.segmentReduce=g;t.lineEach=y;t.lineReduce=m;t.findSegment=x;t.findPoint=b},85268:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(27138);function a(e){var t=[Infinity,Infinity,-Infinity,-Infinity];n.coordEach(e,(function(e){if(t[0]>e[0]){t[0]=e[0]}if(t[1]>e[1]){t[1]=e[1]}if(t[2]<e[0]){t[2]=e[0]}if(t[3]<e[1]){t[3]=e[1]}}));return t}a["default"]=a;t["default"]=a},94228:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.earthRadius=6371008.8;t.factors={centimeters:t.earthRadius*100,centimetres:t.earthRadius*100,degrees:t.earthRadius/111325,feet:t.earthRadius*3.28084,inches:t.earthRadius*39.37,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:t.earthRadius*1e3,millimetres:t.earthRadius*1e3,nauticalmiles:t.earthRadius/1852,radians:1,yards:t.earthRadius*1.0936};t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1.0936133};t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function r(e,t,r){if(r===void 0){r={}}var n={type:"Feature"};if(r.id===0||r.id){n.id=r.id}if(r.bbox){n.bbox=r.bbox}n.properties=t||{};n.geometry=e;return n}t.feature=r;function n(e,t,r){if(r===void 0){r={}}switch(e){case"Point":return a(t).geometry;case"LineString":return l(t).geometry;case"Polygon":return o(t).geometry;case"MultiPoint":return v(t).geometry;case"MultiLineString":return c(t).geometry;case"MultiPolygon":return h(t).geometry;default:throw new Error(e+" is invalid")}}t.geometry=n;function a(e,t,n){if(n===void 0){n={}}if(!e){throw new Error("coordinates is required")}if(!Array.isArray(e)){throw new Error("coordinates must be an Array")}if(e.length<2){throw new Error("coordinates must be at least 2 numbers long")}if(!k(e[0])||!k(e[1])){throw new Error("coordinates must contain numbers")}var a={type:"Point",coordinates:e};return r(a,t,n)}t.point=a;function i(e,t,r){if(r===void 0){r={}}return f(e.map((function(e){return a(e,t)})),r)}t.points=i;function o(e,t,n){if(n===void 0){n={}}for(var a=0,i=e;a<i.length;a++){var o=i[a];if(o.length<4){throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.")}for(var s=0;s<o[o.length-1].length;s++){if(o[o.length-1][s]!==o[0][s]){throw new Error("First and last Position are not equivalent.")}}}var l={type:"Polygon",coordinates:e};return r(l,t,n)}t.polygon=o;function s(e,t,r){if(r===void 0){r={}}return f(e.map((function(e){return o(e,t)})),r)}t.polygons=s;function l(e,t,n){if(n===void 0){n={}}if(e.length<2){throw new Error("coordinates must be an array of two or more positions")}var a={type:"LineString",coordinates:e};return r(a,t,n)}t.lineString=l;function u(e,t,r){if(r===void 0){r={}}return f(e.map((function(e){return l(e,t)})),r)}t.lineStrings=u;function f(e,t){if(t===void 0){t={}}var r={type:"FeatureCollection"};if(t.id){r.id=t.id}if(t.bbox){r.bbox=t.bbox}r.features=e;return r}t.featureCollection=f;function c(e,t,n){if(n===void 0){n={}}var a={type:"MultiLineString",coordinates:e};return r(a,t,n)}t.multiLineString=c;function v(e,t,n){if(n===void 0){n={}}var a={type:"MultiPoint",coordinates:e};return r(a,t,n)}t.multiPoint=v;function h(e,t,n){if(n===void 0){n={}}var a={type:"MultiPolygon",coordinates:e};return r(a,t,n)}t.multiPolygon=h;function p(e,t,n){if(n===void 0){n={}}var a={type:"GeometryCollection",geometries:e};return r(a,t,n)}t.geometryCollection=p;function d(e,t){if(t===void 0){t=0}if(t&&!(t>=0)){throw new Error("precision must be a positive number")}var r=Math.pow(10,t||0);return Math.round(e*r)/r}t.round=d;function g(e,r){if(r===void 0){r="kilometers"}var n=t.factors[r];if(!n){throw new Error(r+" units is invalid")}return e*n}t.radiansToLength=g;function y(e,r){if(r===void 0){r="kilometers"}var n=t.factors[r];if(!n){throw new Error(r+" units is invalid")}return e/n}t.lengthToRadians=y;function m(e,t){return b(y(e,t))}t.lengthToDegrees=m;function x(e){var t=e%360;if(t<0){t+=360}return t}t.bearingToAzimuth=x;function b(e){var t=e%(2*Math.PI);return t*180/Math.PI}t.radiansToDegrees=b;function _(e){var t=e%360;return t*Math.PI/180}t.degreesToRadians=_;function w(e,t,r){if(t===void 0){t="kilometers"}if(r===void 0){r="kilometers"}if(!(e>=0)){throw new Error("length must be a positive number")}return g(y(e,t),r)}t.convertLength=w;function T(e,r,n){if(r===void 0){r="meters"}if(n===void 0){n="kilometers"}if(!(e>=0)){throw new Error("area must be a positive number")}var a=t.areaFactors[r];if(!a){throw new Error("invalid original units")}var i=t.areaFactors[n];if(!i){throw new Error("invalid final units")}return e/a*i}t.convertArea=T;function k(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}t.isNumber=k;function A(e){return!!e&&e.constructor===Object}t.isObject=A;function M(e){if(!e){throw new Error("bbox is required")}if(!Array.isArray(e)){throw new Error("bbox must be an Array")}if(e.length!==4&&e.length!==6){throw new Error("bbox must be an Array of 4 or 6 numbers")}e.forEach((function(e){if(!k(e)){throw new Error("bbox must only contain numbers")}}))}t.validateBBox=M;function S(e){if(!e){throw new Error("id is required")}if(["string","number"].indexOf(typeof e)===-1){throw new Error("id must be a number or a string")}}t.validateId=S},27138:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(94228);function a(e,t,r){if(e===null)return;var n,i,o,s,l,u,f,c=0,v=0,h,p=e.type,d=p==="FeatureCollection",g=p==="Feature",y=d?e.features.length:1;for(var m=0;m<y;m++){f=d?e.features[m].geometry:g?e.geometry:e;h=f?f.type==="GeometryCollection":false;l=h?f.geometries.length:1;for(var x=0;x<l;x++){var b=0;var _=0;s=h?f.geometries[x]:f;if(s===null)continue;u=s.coordinates;var w=s.type;c=r&&(w==="Polygon"||w==="MultiPolygon")?1:0;switch(w){case null:break;case"Point":if(t(u,v,m,b,_)===false)return false;v++;b++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(t(u[n],v,m,b,_)===false)return false;v++;if(w==="MultiPoint")b++}if(w==="LineString")b++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(i=0;i<u[n].length-c;i++){if(t(u[n][i],v,m,b,_)===false)return false;v++}if(w==="MultiLineString")b++;if(w==="Polygon")_++}if(w==="Polygon")b++;break;case"MultiPolygon":for(n=0;n<u.length;n++){_=0;for(i=0;i<u[n].length;i++){for(o=0;o<u[n][i].length-c;o++){if(t(u[n][i][o],v,m,b,_)===false)return false;v++}_++}b++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(a(s.geometries[n],t,r)===false)return false;break;default:throw new Error("Unknown Geometry Type")}}}}function i(e,t,r,n){var i=r;a(e,(function(e,n,a,o,s){if(n===0&&r===undefined)i=e;else i=t(i,e,n,a,o,s)}),n);return i}function o(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length;r++){if(t(e.features[r].properties,r)===false)break}break;case"Feature":t(e.properties,0);break}}function s(e,t,r){var n=r;o(e,(function(e,a){if(a===0&&r===undefined)n=e;else n=t(n,e,a)}));return n}function l(e,t){if(e.type==="Feature"){t(e,0)}else if(e.type==="FeatureCollection"){for(var r=0;r<e.features.length;r++){if(t(e.features[r],r)===false)break}}}function u(e,t,r){var n=r;l(e,(function(e,a){if(a===0&&r===undefined)n=e;else n=t(n,e,a)}));return n}function f(e){var t=[];a(e,(function(e){t.push(e)}));return t}function c(e,t){var r,n,a,i,o,s,l,u,f,c,v=0,h=e.type==="FeatureCollection",p=e.type==="Feature",d=h?e.features.length:1;for(r=0;r<d;r++){s=h?e.features[r].geometry:p?e.geometry:e;u=h?e.features[r].properties:p?e.properties:{};f=h?e.features[r].bbox:p?e.bbox:undefined;c=h?e.features[r].id:p?e.id:undefined;l=s?s.type==="GeometryCollection":false;o=l?s.geometries.length:1;for(a=0;a<o;a++){i=l?s.geometries[a]:s;if(i===null){if(t(null,v,u,f,c)===false)return false;continue}switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(i,v,u,f,c)===false)return false;break}case"GeometryCollection":{for(n=0;n<i.geometries.length;n++){if(t(i.geometries[n],v,u,f,c)===false)return false}break}default:throw new Error("Unknown Geometry Type")}}v++}}function v(e,t,r){var n=r;c(e,(function(e,a,i,o,s){if(a===0&&r===undefined)n=e;else n=t(n,e,a,i,o,s)}));return n}function h(e,t){c(e,(function(e,r,a,i,o){var s=e===null?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":if(t(n.feature(e,a,{bbox:i,id:o}),r,0)===false)return false;return}var l;switch(s){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<e.coordinates.length;u++){var f=e.coordinates[u];var c={type:l,coordinates:f};if(t(n.feature(c,a),r,u)===false)return false}}))}function p(e,t,r){var n=r;h(e,(function(e,a,i){if(a===0&&i===0&&r===undefined)n=e;else n=t(n,e,a,i)}));return n}function d(e,t){h(e,(function(e,r,i){var o=0;if(!e.geometry)return;var s=e.geometry.type;if(s==="Point"||s==="MultiPoint")return;var l;var u=0;var f=0;var c=0;if(a(e,(function(a,s,v,h,p){if(l===undefined||r>u||h>f||p>c){l=a;u=r;f=h;c=p;o=0;return}var d=n.lineString([l,a],e.properties);if(t(d,r,i,p,o)===false)return false;o++;l=a}))===false)return false}))}function g(e,t,r){var n=r;var a=false;d(e,(function(e,i,o,s,l){if(a===false&&r===undefined)n=e;else n=t(n,e,i,o,s,l);a=true}));return n}function y(e,t){if(!e)throw new Error("geojson is required");h(e,(function(e,r,a){if(e.geometry===null)return;var i=e.geometry.type;var o=e.geometry.coordinates;switch(i){case"LineString":if(t(e,r,a,0,0)===false)return false;break;case"Polygon":for(var s=0;s<o.length;s++){if(t(n.lineString(o[s],e.properties),r,a,s)===false)return false}break}}))}function m(e,t,r){var n=r;y(e,(function(e,a,i,o){if(a===0&&r===undefined)n=e;else n=t(n,e,a,i,o)}));return n}function x(e,t){t=t||{};if(!n.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0;var a=t.multiFeatureIndex||0;var i=t.geometryIndex||0;var o=t.segmentIndex||0;var s=t.properties;var l;switch(e.type){case"FeatureCollection":if(r<0)r=e.features.length+r;s=s||e.features[r].properties;l=e.features[r].geometry;break;case"Feature":s=s||e.properties;l=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=e;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var u=l.coordinates;switch(l.type){case"Point":case"MultiPoint":return null;case"LineString":if(o<0)o=u.length+o-1;return n.lineString([u[o],u[o+1]],s,t);case"Polygon":if(i<0)i=u.length+i;if(o<0)o=u[i].length+o-1;return n.lineString([u[i][o],u[i][o+1]],s,t);case"MultiLineString":if(a<0)a=u.length+a;if(o<0)o=u[a].length+o-1;return n.lineString([u[a][o],u[a][o+1]],s,t);case"MultiPolygon":if(a<0)a=u.length+a;if(i<0)i=u[a].length+i;if(o<0)o=u[a][i].length-o-1;return n.lineString([u[a][i][o],u[a][i][o+1]],s,t)}throw new Error("geojson is invalid")}function b(e,t){t=t||{};if(!n.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0;var a=t.multiFeatureIndex||0;var i=t.geometryIndex||0;var o=t.coordIndex||0;var s=t.properties;var l;switch(e.type){case"FeatureCollection":if(r<0)r=e.features.length+r;s=s||e.features[r].properties;l=e.features[r].geometry;break;case"Feature":s=s||e.properties;l=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=e;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var u=l.coordinates;switch(l.type){case"Point":return n.point(u,s,t);case"MultiPoint":if(a<0)a=u.length+a;return n.point(u[a],s,t);case"LineString":if(o<0)o=u.length+o;return n.point(u[o],s,t);case"Polygon":if(i<0)i=u.length+i;if(o<0)o=u[i].length+o;return n.point(u[i][o],s,t);case"MultiLineString":if(a<0)a=u.length+a;if(o<0)o=u[a].length+o;return n.point(u[a][o],s,t);case"MultiPolygon":if(a<0)a=u.length+a;if(i<0)i=u[a].length+i;if(o<0)o=u[a][i].length-o;return n.point(u[a][i][o],s,t)}throw new Error("geojson is invalid")}t.coordEach=a;t.coordReduce=i;t.propEach=o;t.propReduce=s;t.featureEach=l;t.featureReduce=u;t.coordAll=f;t.geomEach=c;t.geomReduce=v;t.flattenEach=h;t.flattenReduce=p;t.segmentEach=d;t.segmentReduce=g;t.lineEach=y;t.lineReduce=m;t.findSegment=x;t.findPoint=b},29261:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(88553);var a=r(64182);function i(e,t){if(t===void 0){t={}}var r=0;var i=0;var o=0;n.coordEach(e,(function(e){r+=e[0];i+=e[1];o++}));return a.point([r/o,i/o],t.properties)}t["default"]=i},64182:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.earthRadius=6371008.8;t.factors={centimeters:t.earthRadius*100,centimetres:t.earthRadius*100,degrees:t.earthRadius/111325,feet:t.earthRadius*3.28084,inches:t.earthRadius*39.37,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:t.earthRadius*1e3,millimetres:t.earthRadius*1e3,nauticalmiles:t.earthRadius/1852,radians:1,yards:t.earthRadius/1.0936};t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1/1.0936};t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function r(e,t,r){if(r===void 0){r={}}var n={type:"Feature"};if(r.id===0||r.id){n.id=r.id}if(r.bbox){n.bbox=r.bbox}n.properties=t||{};n.geometry=e;return n}t.feature=r;function n(e,t,r){if(r===void 0){r={}}switch(e){case"Point":return a(t).geometry;case"LineString":return l(t).geometry;case"Polygon":return o(t).geometry;case"MultiPoint":return v(t).geometry;case"MultiLineString":return c(t).geometry;case"MultiPolygon":return h(t).geometry;default:throw new Error(e+" is invalid")}}t.geometry=n;function a(e,t,n){if(n===void 0){n={}}var a={type:"Point",coordinates:e};return r(a,t,n)}t.point=a;function i(e,t,r){if(r===void 0){r={}}return f(e.map((function(e){return a(e,t)})),r)}t.points=i;function o(e,t,n){if(n===void 0){n={}}for(var a=0,i=e;a<i.length;a++){var o=i[a];if(o.length<4){throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.")}for(var s=0;s<o[o.length-1].length;s++){if(o[o.length-1][s]!==o[0][s]){throw new Error("First and last Position are not equivalent.")}}}var l={type:"Polygon",coordinates:e};return r(l,t,n)}t.polygon=o;function s(e,t,r){if(r===void 0){r={}}return f(e.map((function(e){return o(e,t)})),r)}t.polygons=s;function l(e,t,n){if(n===void 0){n={}}if(e.length<2){throw new Error("coordinates must be an array of two or more positions")}var a={type:"LineString",coordinates:e};return r(a,t,n)}t.lineString=l;function u(e,t,r){if(r===void 0){r={}}return f(e.map((function(e){return l(e,t)})),r)}t.lineStrings=u;function f(e,t){if(t===void 0){t={}}var r={type:"FeatureCollection"};if(t.id){r.id=t.id}if(t.bbox){r.bbox=t.bbox}r.features=e;return r}t.featureCollection=f;function c(e,t,n){if(n===void 0){n={}}var a={type:"MultiLineString",coordinates:e};return r(a,t,n)}t.multiLineString=c;function v(e,t,n){if(n===void 0){n={}}var a={type:"MultiPoint",coordinates:e};return r(a,t,n)}t.multiPoint=v;function h(e,t,n){if(n===void 0){n={}}var a={type:"MultiPolygon",coordinates:e};return r(a,t,n)}t.multiPolygon=h;function p(e,t,n){if(n===void 0){n={}}var a={type:"GeometryCollection",geometries:e};return r(a,t,n)}t.geometryCollection=p;function d(e,t){if(t===void 0){t=0}if(t&&!(t>=0)){throw new Error("precision must be a positive number")}var r=Math.pow(10,t||0);return Math.round(e*r)/r}t.round=d;function g(e,r){if(r===void 0){r="kilometers"}var n=t.factors[r];if(!n){throw new Error(r+" units is invalid")}return e*n}t.radiansToLength=g;function y(e,r){if(r===void 0){r="kilometers"}var n=t.factors[r];if(!n){throw new Error(r+" units is invalid")}return e/n}t.lengthToRadians=y;function m(e,t){return b(y(e,t))}t.lengthToDegrees=m;function x(e){var t=e%360;if(t<0){t+=360}return t}t.bearingToAzimuth=x;function b(e){var t=e%(2*Math.PI);return t*180/Math.PI}t.radiansToDegrees=b;function _(e){var t=e%360;return t*Math.PI/180}t.degreesToRadians=_;function w(e,t,r){if(t===void 0){t="kilometers"}if(r===void 0){r="kilometers"}if(!(e>=0)){throw new Error("length must be a positive number")}return g(y(e,t),r)}t.convertLength=w;function T(e,r,n){if(r===void 0){r="meters"}if(n===void 0){n="kilometers"}if(!(e>=0)){throw new Error("area must be a positive number")}var a=t.areaFactors[r];if(!a){throw new Error("invalid original units")}var i=t.areaFactors[n];if(!i){throw new Error("invalid final units")}return e/a*i}t.convertArea=T;function k(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)&&!/^\s*$/.test(e)}t.isNumber=k;function A(e){return!!e&&e.constructor===Object}t.isObject=A;function M(e){if(!e){throw new Error("bbox is required")}if(!Array.isArray(e)){throw new Error("bbox must be an Array")}if(e.length!==4&&e.length!==6){throw new Error("bbox must be an Array of 4 or 6 numbers")}e.forEach((function(e){if(!k(e)){throw new Error("bbox must only contain numbers")}}))}t.validateBBox=M;function S(e){if(!e){throw new Error("id is required")}if(["string","number"].indexOf(typeof e)===-1){throw new Error("id must be a number or a string")}}t.validateId=S;function E(){throw new Error("method has been renamed to `radiansToDegrees`")}t.radians2degrees=E;function L(){throw new Error("method has been renamed to `degreesToRadians`")}t.degrees2radians=L;function C(){throw new Error("method has been renamed to `lengthToDegrees`")}t.distanceToDegrees=C;function I(){throw new Error("method has been renamed to `lengthToRadians`")}t.distanceToRadians=I;function P(){throw new Error("method has been renamed to `radiansToLength`")}t.radiansToDistance=P;function O(){throw new Error("method has been renamed to `bearingToAzimuth`")}t.bearingToAngle=O;function D(){throw new Error("method has been renamed to `convertLength`")}t.convertDistance=D},88553:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(64182);function a(e,t,r){if(e===null)return;var n,i,o,s,l,u,f,c=0,v=0,h,p=e.type,d=p==="FeatureCollection",g=p==="Feature",y=d?e.features.length:1;for(var m=0;m<y;m++){f=d?e.features[m].geometry:g?e.geometry:e;h=f?f.type==="GeometryCollection":false;l=h?f.geometries.length:1;for(var x=0;x<l;x++){var b=0;var _=0;s=h?f.geometries[x]:f;if(s===null)continue;u=s.coordinates;var w=s.type;c=r&&(w==="Polygon"||w==="MultiPolygon")?1:0;switch(w){case null:break;case"Point":if(t(u,v,m,b,_)===false)return false;v++;b++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(t(u[n],v,m,b,_)===false)return false;v++;if(w==="MultiPoint")b++}if(w==="LineString")b++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(i=0;i<u[n].length-c;i++){if(t(u[n][i],v,m,b,_)===false)return false;v++}if(w==="MultiLineString")b++;if(w==="Polygon")_++}if(w==="Polygon")b++;break;case"MultiPolygon":for(n=0;n<u.length;n++){_=0;for(i=0;i<u[n].length;i++){for(o=0;o<u[n][i].length-c;o++){if(t(u[n][i][o],v,m,b,_)===false)return false;v++}_++}b++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(a(s.geometries[n],t,r)===false)return false;break;default:throw new Error("Unknown Geometry Type")}}}}function i(e,t,r,n){var i=r;a(e,(function(e,n,a,o,s){if(n===0&&r===undefined)i=e;else i=t(i,e,n,a,o,s)}),n);return i}function o(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length;r++){if(t(e.features[r].properties,r)===false)break}break;case"Feature":t(e.properties,0);break}}function s(e,t,r){var n=r;o(e,(function(e,a){if(a===0&&r===undefined)n=e;else n=t(n,e,a)}));return n}function l(e,t){if(e.type==="Feature"){t(e,0)}else if(e.type==="FeatureCollection"){for(var r=0;r<e.features.length;r++){if(t(e.features[r],r)===false)break}}}function u(e,t,r){var n=r;l(e,(function(e,a){if(a===0&&r===undefined)n=e;else n=t(n,e,a)}));return n}function f(e){var t=[];a(e,(function(e){t.push(e)}));return t}function c(e,t){var r,n,a,i,o,s,l,u,f,c,v=0,h=e.type==="FeatureCollection",p=e.type==="Feature",d=h?e.features.length:1;for(r=0;r<d;r++){s=h?e.features[r].geometry:p?e.geometry:e;u=h?e.features[r].properties:p?e.properties:{};f=h?e.features[r].bbox:p?e.bbox:undefined;c=h?e.features[r].id:p?e.id:undefined;l=s?s.type==="GeometryCollection":false;o=l?s.geometries.length:1;for(a=0;a<o;a++){i=l?s.geometries[a]:s;if(i===null){if(t(null,v,u,f,c)===false)return false;continue}switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(i,v,u,f,c)===false)return false;break}case"GeometryCollection":{for(n=0;n<i.geometries.length;n++){if(t(i.geometries[n],v,u,f,c)===false)return false}break}default:throw new Error("Unknown Geometry Type")}}v++}}function v(e,t,r){var n=r;c(e,(function(e,a,i,o,s){if(a===0&&r===undefined)n=e;else n=t(n,e,a,i,o,s)}));return n}function h(e,t){c(e,(function(e,r,a,i,o){var s=e===null?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":if(t(n.feature(e,a,{bbox:i,id:o}),r,0)===false)return false;return}var l;switch(s){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<e.coordinates.length;u++){var f=e.coordinates[u];var c={type:l,coordinates:f};if(t(n.feature(c,a),r,u)===false)return false}}))}function p(e,t,r){var n=r;h(e,(function(e,a,i){if(a===0&&i===0&&r===undefined)n=e;else n=t(n,e,a,i)}));return n}function d(e,t){h(e,(function(e,r,i){var o=0;if(!e.geometry)return;var s=e.geometry.type;if(s==="Point"||s==="MultiPoint")return;var l;var u=0;var f=0;var c=0;if(a(e,(function(a,s,v,h,p){if(l===undefined||r>u||h>f||p>c){l=a;u=r;f=h;c=p;o=0;return}var d=n.lineString([l,a],e.properties);if(t(d,r,i,p,o)===false)return false;o++;l=a}))===false)return false}))}function g(e,t,r){var n=r;var a=false;d(e,(function(e,i,o,s,l){if(a===false&&r===undefined)n=e;else n=t(n,e,i,o,s,l);a=true}));return n}function y(e,t){if(!e)throw new Error("geojson is required");h(e,(function(e,r,a){if(e.geometry===null)return;var i=e.geometry.type;var o=e.geometry.coordinates;switch(i){case"LineString":if(t(e,r,a,0,0)===false)return false;break;case"Polygon":for(var s=0;s<o.length;s++){if(t(n.lineString(o[s],e.properties),r,a,s)===false)return false}break}}))}function m(e,t,r){var n=r;y(e,(function(e,a,i,o){if(a===0&&r===undefined)n=e;else n=t(n,e,a,i,o)}));return n}function x(e,t){t=t||{};if(!n.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0;var a=t.multiFeatureIndex||0;var i=t.geometryIndex||0;var o=t.segmentIndex||0;var s=t.properties;var l;switch(e.type){case"FeatureCollection":if(r<0)r=e.features.length+r;s=s||e.features[r].properties;l=e.features[r].geometry;break;case"Feature":s=s||e.properties;l=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=e;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var u=l.coordinates;switch(l.type){case"Point":case"MultiPoint":return null;case"LineString":if(o<0)o=u.length+o-1;return n.lineString([u[o],u[o+1]],s,t);case"Polygon":if(i<0)i=u.length+i;if(o<0)o=u[i].length+o-1;return n.lineString([u[i][o],u[i][o+1]],s,t);case"MultiLineString":if(a<0)a=u.length+a;if(o<0)o=u[a].length+o-1;return n.lineString([u[a][o],u[a][o+1]],s,t);case"MultiPolygon":if(a<0)a=u.length+a;if(i<0)i=u[a].length+i;if(o<0)o=u[a][i].length-o-1;return n.lineString([u[a][i][o],u[a][i][o+1]],s,t)}throw new Error("geojson is invalid")}function b(e,t){t=t||{};if(!n.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0;var a=t.multiFeatureIndex||0;var i=t.geometryIndex||0;var o=t.coordIndex||0;var s=t.properties;var l;switch(e.type){case"FeatureCollection":if(r<0)r=e.features.length+r;s=s||e.features[r].properties;l=e.features[r].geometry;break;case"Feature":s=s||e.properties;l=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=e;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var u=l.coordinates;switch(l.type){case"Point":return n.point(u,s,t);case"MultiPoint":if(a<0)a=u.length+a;return n.point(u[a],s,t);case"LineString":if(o<0)o=u.length+o;return n.point(u[o],s,t);case"Polygon":if(i<0)i=u.length+i;if(o<0)o=u[i].length+o;return n.point(u[i][o],s,t);case"MultiLineString":if(a<0)a=u.length+a;if(o<0)o=u[a].length+o;return n.point(u[a][o],s,t);case"MultiPolygon":if(a<0)a=u.length+a;if(i<0)i=u[a].length+i;if(o<0)o=u[a][i].length-o;return n.point(u[a][i][o],s,t)}throw new Error("geojson is invalid")}t.coordEach=a;t.coordReduce=i;t.propEach=o;t.propReduce=s;t.featureEach=l;t.featureReduce=u;t.coordAll=f;t.geomEach=c;t.geomReduce=v;t.flattenEach=h;t.flattenReduce=p;t.segmentEach=d;t.segmentReduce=g;t.lineEach=y;t.lineReduce=m;t.findSegment=x;t.findPoint=b},65185:function(e){e.exports=t;function t(e){var t=0;var r=0;var n=0;var a=0;return e.map((function(e){e=e.slice();var i=e[0];var o=i.toUpperCase();if(i!=o){e[0]=o;switch(i){case"a":e[6]+=n;e[7]+=a;break;case"v":e[1]+=a;break;case"h":e[1]+=n;break;default:for(var s=1;s<e.length;){e[s++]+=n;e[s++]+=a}}}switch(o){case"Z":n=t;a=r;break;case"H":n=e[1];break;case"V":a=e[1];break;case"M":n=t=e[1];a=r=e[2];break;default:n=e[e.length-2];a=e[e.length-1]}return e}))}},21527:function(e){"use strict";e.exports=t;function t(e,t){if(!e||e.length==null)throw Error("Argument should be an array");if(t==null)t=1;else t=Math.floor(t);var r=Array(t*2);for(var n=0;n<t;n++){var a=-Infinity,i=Infinity,o=n,s=e.length;for(;o<s;o+=t){if(e[o]>a)a=e[o];if(e[o]<i)i=e[o]}r[n]=i;r[t+n]=a}return r}},6851:function(e){"use strict";e.exports=function(e,t,r){if(typeof Array.prototype.findIndex==="function"){return e.findIndex(t,r)}if(typeof t!=="function"){throw new TypeError("predicate must be a function")}var n=Object(e);var a=n.length;if(a===0){return-1}for(var i=0;i<a;i++){if(t.call(r,n[i],i,n)){return i}}return-1}},54:function(e,t,r){"use strict";var n=r(21527);e.exports=a;function a(e,t,r){if(!e||e.length==null)throw Error("Argument should be an array");if(t==null)t=1;if(r==null)r=n(e,t);for(var a=0;a<t;a++){var i=r[t+a],o=r[a],s=a,l=e.length;if(i===Infinity&&o===-Infinity){for(s=a;s<l;s+=t){e[s]=e[s]===i?1:e[s]===o?0:.5}}else if(i===Infinity){for(s=a;s<l;s+=t){e[s]=e[s]===i?1:0}}else if(o===-Infinity){for(s=a;s<l;s+=t){e[s]=e[s]===o?0:1}}else{var u=i-o;for(s=a;s<l;s+=t){if(!isNaN(e[s])){e[s]=u===0?.5:(e[s]-o)/u}}}}return e}},57471:function(e){e.exports=function e(t,r){var n=typeof t==="number",a=typeof r==="number";if(n&&!a){r=t;t=0}else if(!n&&!a){t=0;r=0}t=t|0;r=r|0;var i=r-t;if(i<0)throw new Error("array length must be positive");var o=new Array(i);for(var s=0,l=t;s<i;s++,l++)o[s]=l;return o}},32791:function(e,t,r){"use strict";var n=r(90386);function a(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function e(t){return typeof t}}else{a=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return a(e)}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=r(79616),s=o.codes,l=s.ERR_AMBIGUOUS_ARGUMENT,u=s.ERR_INVALID_ARG_TYPE,f=s.ERR_INVALID_ARG_VALUE,c=s.ERR_INVALID_RETURN_VALUE,v=s.ERR_MISSING_ARGS;var h=r(73894);var p=r(43827),d=p.inspect;var g=r(43827).types,y=g.isPromise,m=g.isRegExp;var x=Object.assign?Object.assign:r(73523).assign;var b=Object.is?Object.is:r(64003);var _=new Map;var w;var T;var k;var A;var M;function S(){var e=r(74061);w=e.isDeepEqual;T=e.isDeepStrictEqual}var E=/[\x00-\x08\x0b\x0c\x0e-\x1f]/g;var L=null&&0;var C=function e(t){return L[t.charCodeAt(0)]};var I=false;var P=e.exports=F;var O={};function D(e){if(e.message instanceof Error)throw e.message;throw new h(e)}function z(e,t,r,a,i){var o=arguments.length;var s;if(o===0){s="Failed"}else if(o===1){r=e;e=undefined}else{if(I===false){I=true;var l=n.emitWarning?n.emitWarning:console.warn.bind(console);l("assert.fail() with more than one argument is deprecated. "+"Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}if(o===2)a="!="}if(r instanceof Error)throw r;var u={actual:e,expected:t,operator:a===undefined?"fail":a,stackStartFn:i||z};if(r!==undefined){u.message=r}var f=new h(u);if(s){f.message=s;f.generatedMessage=true}throw f}P.fail=z;P.AssertionError=h;function R(e,t,r,n){if(!r){var a=false;if(t===0){a=true;n="No value argument passed to `assert.ok()`"}else if(n instanceof Error){throw n}var i=new h({actual:r,expected:true,message:n,operator:"==",stackStartFn:e});i.generatedMessage=a;throw i}}function F(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}R.apply(void 0,[F,t.length].concat(t))}P.ok=F;P.equal=function e(t,r,n){if(arguments.length<2){throw new v("actual","expected")}if(t!=r){D({actual:t,expected:r,message:n,operator:"==",stackStartFn:e})}};P.notEqual=function e(t,r,n){if(arguments.length<2){throw new v("actual","expected")}if(t==r){D({actual:t,expected:r,message:n,operator:"!=",stackStartFn:e})}};P.deepEqual=function e(t,r,n){if(arguments.length<2){throw new v("actual","expected")}if(w===undefined)S();if(!w(t,r)){D({actual:t,expected:r,message:n,operator:"deepEqual",stackStartFn:e})}};P.notDeepEqual=function e(t,r,n){if(arguments.length<2){throw new v("actual","expected")}if(w===undefined)S();if(w(t,r)){D({actual:t,expected:r,message:n,operator:"notDeepEqual",stackStartFn:e})}};P.deepStrictEqual=function e(t,r,n){if(arguments.length<2){throw new v("actual","expected")}if(w===undefined)S();if(!T(t,r)){D({actual:t,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:e})}};P.notDeepStrictEqual=B;function B(e,t,r){if(arguments.length<2){throw new v("actual","expected")}if(w===undefined)S();if(T(e,t)){D({actual:e,expected:t,message:r,operator:"notDeepStrictEqual",stackStartFn:B})}}P.strictEqual=function e(t,r,n){if(arguments.length<2){throw new v("actual","expected")}if(!b(t,r)){D({actual:t,expected:r,message:n,operator:"strictEqual",stackStartFn:e})}};P.notStrictEqual=function e(t,r,n){if(arguments.length<2){throw new v("actual","expected")}if(b(t,r)){D({actual:t,expected:r,message:n,operator:"notStrictEqual",stackStartFn:e})}};var N=function e(t,r,n){var a=this;i(this,e);r.forEach((function(e){if(e in t){if(n!==undefined&&typeof n[e]==="string"&&m(t[e])&&t[e].test(n[e])){a[e]=n[e]}else{a[e]=t[e]}}}))};function j(e,t,r,n,a,i){if(!(r in e)||!T(e[r],t[r])){if(!n){var o=new N(e,a);var s=new N(t,a,e);var l=new h({actual:o,expected:s,operator:"deepStrictEqual",stackStartFn:i});l.actual=e;l.expected=t;l.operator=i.name;throw l}D({actual:e,expected:t,message:n,operator:i.name,stackStartFn:i})}}function U(e,t,r,n){if(typeof t!=="function"){if(m(t))return t.test(e);if(arguments.length===2){throw new u("expected",["Function","RegExp"],t)}if(a(e)!=="object"||e===null){var i=new h({actual:e,expected:t,message:r,operator:"deepStrictEqual",stackStartFn:n});i.operator=n.name;throw i}var o=Object.keys(t);if(t instanceof Error){o.push("name","message")}else if(o.length===0){throw new f("error",t,"may not be an empty object")}if(w===undefined)S();o.forEach((function(a){if(typeof e[a]==="string"&&m(t[a])&&t[a].test(e[a])){return}j(e,t,a,r,o,n)}));return true}if(t.prototype!==undefined&&e instanceof t){return true}if(Error.isPrototypeOf(t)){return false}return t.call({},e)===true}function V(e){if(typeof e!=="function"){throw new u("fn","Function",e)}try{e()}catch(t){return t}return O}function H(e){return y(e)||e!==null&&a(e)==="object"&&typeof e.then==="function"&&typeof e.catch==="function"}function q(e){return Promise.resolve().then((function(){var t;if(typeof e==="function"){t=e();if(!H(t)){throw new c("instance of Promise","promiseFn",t)}}else if(H(e)){t=e}else{throw new u("promiseFn",["Function","Promise"],e)}return Promise.resolve().then((function(){return t})).then((function(){return O})).catch((function(e){return e}))}))}function G(e,t,r,n){if(typeof r==="string"){if(arguments.length===4){throw new u("error",["Object","Error","Function","RegExp"],r)}if(a(t)==="object"&&t!==null){if(t.message===r){throw new l("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}}else if(t===r){throw new l("error/message",'The error "'.concat(t,'" is identical to the message.'))}n=r;r=undefined}else if(r!=null&&a(r)!=="object"&&typeof r!=="function"){throw new u("error",["Object","Error","Function","RegExp"],r)}if(t===O){var i="";if(r&&r.name){i+=" (".concat(r.name,")")}i+=n?": ".concat(n):".";var o=e.name==="rejects"?"rejection":"exception";D({actual:undefined,expected:r,operator:e.name,message:"Missing expected ".concat(o).concat(i),stackStartFn:e})}if(r&&!U(t,r,n,e)){throw t}}function Z(e,t,r,n){if(t===O)return;if(typeof r==="string"){n=r;r=undefined}if(!r||U(t,r)){var a=n?": ".concat(n):".";var i=e.name==="doesNotReject"?"rejection":"exception";D({actual:t,expected:r,operator:e.name,message:"Got unwanted ".concat(i).concat(a,"\n")+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}P.throws=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++){n[a-1]=arguments[a]}G.apply(void 0,[e,V(t)].concat(n))};P.rejects=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++){n[a-1]=arguments[a]}return q(t).then((function(t){return G.apply(void 0,[e,t].concat(n))}))};P.doesNotThrow=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++){n[a-1]=arguments[a]}Z.apply(void 0,[e,V(t)].concat(n))};P.doesNotReject=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++){n[a-1]=arguments[a]}return q(t).then((function(t){return Z.apply(void 0,[e,t].concat(n))}))};P.ifError=function e(t){if(t!==null&&t!==undefined){var r="ifError got unwanted exception: ";if(a(t)==="object"&&typeof t.message==="string"){if(t.message.length===0&&t.constructor){r+=t.constructor.name}else{r+=t.message}}else{r+=d(t)}var n=new h({actual:t,expected:null,operator:"ifError",message:r,stackStartFn:e});var i=t.stack;if(typeof i==="string"){var o=i.split("\n");o.shift();var s=n.stack.split("\n");for(var l=0;l<o.length;l++){var u=s.indexOf(o[l]);if(u!==-1){s=s.slice(0,u);break}}n.stack="".concat(s.join("\n"),"\n").concat(o.join("\n"))}throw n}};function Y(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}R.apply(void 0,[Y,t.length].concat(t))}P.strict=x(Y,P,{equal:P.strictEqual,deepEqual:P.deepStrictEqual,notEqual:P.notStrictEqual,notDeepEqual:P.notDeepStrictEqual});P.strict.strict=P.strict},73894:function(e,t,r){"use strict";var n=r(90386);function a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))}n.forEach((function(t){i(e,t,r[t])}))}return e}function i(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function l(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}function u(e,t){if(t&&(m(t)==="object"||typeof t==="function")){return t}return f(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)g(e,t)}function v(e){var t=typeof Map==="function"?new Map:undefined;v=function e(r){if(r===null||!d(r))return r;if(typeof r!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof t!=="undefined"){if(t.has(r))return t.get(r);t.set(r,n)}function n(){return p(r,arguments,y(this).constructor)}n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:false,writable:true,configurable:true}});return g(n,r)};return v(e)}function h(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function p(e,t,r){if(h()){p=Reflect.construct}else{p=function e(t,r,n){var a=[null];a.push.apply(a,r);var i=Function.bind.apply(t,a);var o=new i;if(n)g(o,n.prototype);return o}}return p.apply(null,arguments)}function d(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function g(e,t){g=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return g(e,t)}function y(e){y=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return y(e)}function m(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){m=function e(t){return typeof t}}else{m=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return m(e)}var x=r(43827),b=x.inspect;var _=r(79616),w=_.codes.ERR_INVALID_ARG_TYPE;function T(e,t,r){if(r===undefined||r>e.length){r=e.length}return e.substring(r-t.length,r)===t}function k(e,t){t=Math.floor(t);if(e.length==0||t==0)return"";var r=e.length*t;t=Math.floor(Math.log(t)/Math.log(2));while(t){e+=e;t--}e+=e.substring(0,r-e.length);return e}var A="";var M="";var S="";var E="";var L={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};var C=10;function I(e){var t=Object.keys(e);var r=Object.create(Object.getPrototypeOf(e));t.forEach((function(t){r[t]=e[t]}));Object.defineProperty(r,"message",{value:e.message});return r}function P(e){return b(e,{compact:false,customInspect:false,depth:1e3,maxArrayLength:Infinity,showHidden:false,breakLength:Infinity,showProxy:false,sorted:true,getters:true})}function O(e,t,r){var a="";var i="";var o=0;var s="";var l=false;var u=P(e);var f=u.split("\n");var c=P(t).split("\n");var v=0;var h="";if(r==="strictEqual"&&m(e)==="object"&&m(t)==="object"&&e!==null&&t!==null){r="strictEqualObject"}if(f.length===1&&c.length===1&&f[0]!==c[0]){var p=f[0].length+c[0].length;if(p<=C){if((m(e)!=="object"||e===null)&&(m(t)!=="object"||t===null)&&(e!==0||t!==0)){return"".concat(L[r],"\n\n")+"".concat(f[0]," !== ").concat(c[0],"\n")}}else if(r!=="strictEqualObject"){var d=n.stderr&&n.stderr.isTTY?n.stderr.columns:80;if(p<d){while(f[0][v]===c[0][v]){v++}if(v>2){h="\n  ".concat(k(" ",v),"^");v=0}}}}var g=f[f.length-1];var y=c[c.length-1];while(g===y){if(v++<2){s="\n  ".concat(g).concat(s)}else{a=g}f.pop();c.pop();if(f.length===0||c.length===0)break;g=f[f.length-1];y=c[c.length-1]}var x=Math.max(f.length,c.length);if(x===0){var b=u.split("\n");if(b.length>30){b[26]="".concat(A,"...").concat(E);while(b.length>27){b.pop()}}return"".concat(L.notIdentical,"\n\n").concat(b.join("\n"),"\n")}if(v>3){s="\n".concat(A,"...").concat(E).concat(s);l=true}if(a!==""){s="\n  ".concat(a).concat(s);a=""}var _=0;var w=L[r]+"\n".concat(M,"+ actual").concat(E," ").concat(S,"- expected").concat(E);var I=" ".concat(A,"...").concat(E," Lines skipped");for(v=0;v<x;v++){var O=v-o;if(f.length<v+1){if(O>1&&v>2){if(O>4){i+="\n".concat(A,"...").concat(E);l=true}else if(O>3){i+="\n  ".concat(c[v-2]);_++}i+="\n  ".concat(c[v-1]);_++}o=v;a+="\n".concat(S,"-").concat(E," ").concat(c[v]);_++}else if(c.length<v+1){if(O>1&&v>2){if(O>4){i+="\n".concat(A,"...").concat(E);l=true}else if(O>3){i+="\n  ".concat(f[v-2]);_++}i+="\n  ".concat(f[v-1]);_++}o=v;i+="\n".concat(M,"+").concat(E," ").concat(f[v]);_++}else{var D=c[v];var z=f[v];var R=z!==D&&(!T(z,",")||z.slice(0,-1)!==D);if(R&&T(D,",")&&D.slice(0,-1)===z){R=false;z+=","}if(R){if(O>1&&v>2){if(O>4){i+="\n".concat(A,"...").concat(E);l=true}else if(O>3){i+="\n  ".concat(f[v-2]);_++}i+="\n  ".concat(f[v-1]);_++}o=v;i+="\n".concat(M,"+").concat(E," ").concat(z);a+="\n".concat(S,"-").concat(E," ").concat(D);_+=2}else{i+=a;a="";if(O===1||v===0){i+="\n  ".concat(z);_++}}}if(_>20&&v<x-2){return"".concat(w).concat(I,"\n").concat(i,"\n").concat(A,"...").concat(E).concat(a,"\n")+"".concat(A,"...").concat(E)}}return"".concat(w).concat(l?I:"","\n").concat(i).concat(a).concat(s).concat(h)}var D=function(e){c(t,e);function t(e){var r;o(this,t);if(m(e)!=="object"||e===null){throw new w("options","Object",e)}var a=e.message,i=e.operator,s=e.stackStartFn;var l=e.actual,c=e.expected;var v=Error.stackTraceLimit;Error.stackTraceLimit=0;if(a!=null){r=u(this,y(t).call(this,String(a)))}else{if(n.stderr&&n.stderr.isTTY){if(n.stderr&&n.stderr.getColorDepth&&n.stderr.getColorDepth()!==1){A="[34m";M="[32m";E="[39m";S="[31m"}else{A="";M="";E="";S=""}}if(m(l)==="object"&&l!==null&&m(c)==="object"&&c!==null&&"stack"in l&&l instanceof Error&&"stack"in c&&c instanceof Error){l=I(l);c=I(c)}if(i==="deepStrictEqual"||i==="strictEqual"){r=u(this,y(t).call(this,O(l,c,i)))}else if(i==="notDeepStrictEqual"||i==="notStrictEqual"){var h=L[i];var p=P(l).split("\n");if(i==="notStrictEqual"&&m(l)==="object"&&l!==null){h=L.notStrictEqualObject}if(p.length>30){p[26]="".concat(A,"...").concat(E);while(p.length>27){p.pop()}}if(p.length===1){r=u(this,y(t).call(this,"".concat(h," ").concat(p[0])))}else{r=u(this,y(t).call(this,"".concat(h,"\n\n").concat(p.join("\n"),"\n")))}}else{var d=P(l);var g="";var x=L[i];if(i==="notDeepEqual"||i==="notEqual"){d="".concat(L[i],"\n\n").concat(d);if(d.length>1024){d="".concat(d.slice(0,1021),"...")}}else{g="".concat(P(c));if(d.length>512){d="".concat(d.slice(0,509),"...")}if(g.length>512){g="".concat(g.slice(0,509),"...")}if(i==="deepEqual"||i==="equal"){d="".concat(x,"\n\n").concat(d,"\n\nshould equal\n\n")}else{g=" ".concat(i," ").concat(g)}}r=u(this,y(t).call(this,"".concat(d).concat(g)))}}Error.stackTraceLimit=v;r.generatedMessage=!a;Object.defineProperty(f(r),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:false,writable:true,configurable:true});r.code="ERR_ASSERTION";r.actual=l;r.expected=c;r.operator=i;if(Error.captureStackTrace){Error.captureStackTrace(f(r),s)}r.stack;r.name="AssertionError";return u(r)}l(t,[{key:"toString",value:function e(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:b.custom,value:function e(t,r){return b(this,a({},r,{customInspect:false,depth:0}))}}]);return t}(v(Error));e.exports=D},79616:function(e,t,r){"use strict";function n(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){n=function e(t){return typeof t}}else{n=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return n(e)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function i(e,t){if(t&&(n(t)==="object"||typeof t==="function")){return t}return o(e)}function o(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function s(e){s=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return s(e)}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)u(e,t)}function u(e,t){u=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return u(e,t)}var f={};var c;var v;function h(e,t,r){if(!r){r=Error}function n(e,r,n){if(typeof t==="string"){return t}else{return t(e,r,n)}}var o=function(t){l(r,t);function r(t,o,l){var u;a(this,r);u=i(this,s(r).call(this,n(t,o,l)));u.code=e;return u}return r}(r);f[e]=o}function p(e,t){if(Array.isArray(e)){var r=e.length;e=e.map((function(e){return String(e)}));if(r>2){return"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]}else if(r===2){return"one of ".concat(t," ").concat(e[0]," or ").concat(e[1])}else{return"of ".concat(t," ").concat(e[0])}}else{return"of ".concat(t," ").concat(String(e))}}function d(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function g(e,t,r){if(r===undefined||r>e.length){r=e.length}return e.substring(r-t.length,r)===t}function y(e,t,r){if(typeof r!=="number"){r=0}if(r+t.length>e.length){return false}else{return e.indexOf(t,r)!==-1}}h("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError);h("ERR_INVALID_ARG_TYPE",(function(e,t,a){if(c===undefined)c=r(32791);c(typeof e==="string","'name' must be a string");var i;if(typeof t==="string"&&d(t,"not ")){i="must not be";t=t.replace(/^not /,"")}else{i="must be"}var o;if(g(e," argument")){o="The ".concat(e," ").concat(i," ").concat(p(t,"type"))}else{var s=y(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(s," ").concat(i," ").concat(p(t,"type"))}o+=". Received type ".concat(n(a));return o}),TypeError);h("ERR_INVALID_ARG_VALUE",(function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"is invalid";if(v===undefined)v=r(43827);var a=v.inspect(t);if(a.length>128){a="".concat(a.slice(0,128),"...")}return"The argument '".concat(e,"' ").concat(n,". Received ").concat(a)}),TypeError,RangeError);h("ERR_INVALID_RETURN_VALUE",(function(e,t,r){var a;if(r&&r.constructor&&r.constructor.name){a="instance of ".concat(r.constructor.name)}else{a="type ".concat(n(r))}return"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(a,".")}),TypeError);h("ERR_MISSING_ARGS",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}if(c===undefined)c=r(32791);c(t.length>0,"At least one arg needs to be specified");var a="The ";var i=t.length;t=t.map((function(e){return'"'.concat(e,'"')}));switch(i){case 1:a+="".concat(t[0]," argument");break;case 2:a+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:a+=t.slice(0,i-1).join(", ");a+=", and ".concat(t[i-1]," arguments");break}return"".concat(a," must be specified")}),TypeError);e.exports.codes=f},74061:function(e,t,r){"use strict";function n(e,t){return o(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[];var n=true;var a=false;var i=undefined;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){r.push(s.value);if(t&&r.length===t)break}}catch(l){a=true;i=l}finally{try{if(!n&&o["return"]!=null)o["return"]()}finally{if(a)throw i}}return r}function o(e){if(Array.isArray(e))return e}function s(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){s=function e(t){return typeof t}}else{s=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return s(e)}var l=/a/g.flags!==undefined;var u=function e(t){var r=[];t.forEach((function(e){return r.push(e)}));return r};var f=function e(t){var r=[];t.forEach((function(e,t){return r.push([t,e])}));return r};var c=Object.is?Object.is:r(64003);var v=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]};var h=Number.isNaN?Number.isNaN:r(15567);function p(e){return e.call.bind(e)}var d=p(Object.prototype.hasOwnProperty);var g=p(Object.prototype.propertyIsEnumerable);var y=p(Object.prototype.toString);var m=r(43827).types,x=m.isAnyArrayBuffer,b=m.isArrayBufferView,_=m.isDate,w=m.isMap,T=m.isRegExp,k=m.isSet,A=m.isNativeError,M=m.isBoxedPrimitive,S=m.isNumberObject,E=m.isStringObject,L=m.isBooleanObject,C=m.isBigIntObject,I=m.isSymbolObject,P=m.isFloat32Array,O=m.isFloat64Array;function D(e){if(e.length===0||e.length>10)return true;for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<48||r>57)return true}return e.length===10&&e>=Math.pow(2,32)}function z(e){return Object.keys(e).filter(D).concat(v(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function R(e,t){if(e===t){return 0}var r=e.length;var n=t.length;for(var a=0,i=Math.min(r,n);a<i;++a){if(e[a]!==t[a]){r=e[a];n=t[a];break}}if(r<n){return-1}if(n<r){return 1}return 0}var F=undefined;var B=true;var N=false;var j=0;var U=1;var V=2;var H=3;function q(e,t){return l?e.source===t.source&&e.flags===t.flags:RegExp.prototype.toString.call(e)===RegExp.prototype.toString.call(t)}function G(e,t){if(e.byteLength!==t.byteLength){return false}for(var r=0;r<e.byteLength;r++){if(e[r]!==t[r]){return false}}return true}function Z(e,t){if(e.byteLength!==t.byteLength){return false}return R(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))===0}function Y(e,t){return e.byteLength===t.byteLength&&R(new Uint8Array(e),new Uint8Array(t))===0}function W(e,t){if(S(e)){return S(t)&&c(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t))}if(E(e)){return E(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t)}if(L(e)){return L(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t)}if(C(e)){return C(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t)}return I(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}function X(e,t,r,n){if(e===t){if(e!==0)return true;return r?c(e,t):true}if(r){if(s(e)!=="object"){return typeof e==="number"&&h(e)&&h(t)}if(s(t)!=="object"||e===null||t===null){return false}if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)){return false}}else{if(e===null||s(e)!=="object"){if(t===null||s(t)!=="object"){return e==t}return false}if(t===null||s(t)!=="object"){return false}}var a=y(e);var i=y(t);if(a!==i){return false}if(Array.isArray(e)){if(e.length!==t.length){return false}var o=z(e,F);var l=z(t,F);if(o.length!==l.length){return false}return K(e,t,r,n,U,o)}if(a==="[object Object]"){if(!w(e)&&w(t)||!k(e)&&k(t)){return false}}if(_(e)){if(!_(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t)){return false}}else if(T(e)){if(!T(t)||!q(e,t)){return false}}else if(A(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name){return false}}else if(b(e)){if(!r&&(P(e)||O(e))){if(!G(e,t)){return false}}else if(!Z(e,t)){return false}var u=z(e,F);var f=z(t,F);if(u.length!==f.length){return false}return K(e,t,r,n,j,u)}else if(k(e)){if(!k(t)||e.size!==t.size){return false}return K(e,t,r,n,V)}else if(w(e)){if(!w(t)||e.size!==t.size){return false}return K(e,t,r,n,H)}else if(x(e)){if(!Y(e,t)){return false}}else if(M(e)&&!W(e,t)){return false}return K(e,t,r,n,j)}function J(e,t){return t.filter((function(t){return g(e,t)}))}function K(e,t,r,n,a,i){if(arguments.length===5){i=Object.keys(e);var o=Object.keys(t);if(i.length!==o.length){return false}}var s=0;for(;s<i.length;s++){if(!d(t,i[s])){return false}}if(r&&arguments.length===5){var l=v(e);if(l.length!==0){var u=0;for(s=0;s<l.length;s++){var f=l[s];if(g(e,f)){if(!g(t,f)){return false}i.push(f);u++}else if(g(t,f)){return false}}var c=v(t);if(l.length!==c.length&&J(t,c).length!==u){return false}}else{var h=v(t);if(h.length!==0&&J(t,h).length!==0){return false}}}if(i.length===0&&(a===j||a===U&&e.length===0||e.size===0)){return true}if(n===undefined){n={val1:new Map,val2:new Map,position:0}}else{var p=n.val1.get(e);if(p!==undefined){var y=n.val2.get(t);if(y!==undefined){return p===y}}n.position++}n.val1.set(e,n.position);n.val2.set(t,n.position);var m=ie(e,t,r,i,n,a);n.val1.delete(e);n.val2.delete(t);return m}function $(e,t,r,n){var a=u(e);for(var i=0;i<a.length;i++){var o=a[i];if(X(t,o,r,n)){e.delete(o);return true}}return false}function Q(e){switch(s(e)){case"undefined":return null;case"object":return undefined;case"symbol":return false;case"string":e=+e;case"number":if(h(e)){return false}}return true}function ee(e,t,r){var n=Q(r);if(n!=null)return n;return t.has(n)&&!e.has(n)}function te(e,t,r,n,a){var i=Q(r);if(i!=null){return i}var o=t.get(i);if(o===undefined&&!t.has(i)||!X(n,o,false,a)){return false}return!e.has(i)&&X(n,o,false,a)}function re(e,t,r,n){var a=null;var i=u(e);for(var o=0;o<i.length;o++){var l=i[o];if(s(l)==="object"&&l!==null){if(a===null){a=new Set}a.add(l)}else if(!t.has(l)){if(r)return false;if(!ee(e,t,l)){return false}if(a===null){a=new Set}a.add(l)}}if(a!==null){var f=u(t);for(var c=0;c<f.length;c++){var v=f[c];if(s(v)==="object"&&v!==null){if(!$(a,v,r,n))return false}else if(!r&&!e.has(v)&&!$(a,v,r,n)){return false}}return a.size===0}return true}function ne(e,t,r,n,a,i){var o=u(e);for(var s=0;s<o.length;s++){var l=o[s];if(X(r,l,a,i)&&X(n,t.get(l),a,i)){e.delete(l);return true}}return false}function ae(e,t,r,a){var i=null;var o=f(e);for(var l=0;l<o.length;l++){var u=n(o[l],2),c=u[0],v=u[1];if(s(c)==="object"&&c!==null){if(i===null){i=new Set}i.add(c)}else{var h=t.get(c);if(h===undefined&&!t.has(c)||!X(v,h,r,a)){if(r)return false;if(!te(e,t,c,v,a))return false;if(i===null){i=new Set}i.add(c)}}}if(i!==null){var p=f(t);for(var d=0;d<p.length;d++){var g=n(p[d],2),c=g[0],y=g[1];if(s(c)==="object"&&c!==null){if(!ne(i,e,c,y,r,a))return false}else if(!r&&(!e.has(c)||!X(e.get(c),y,false,a))&&!ne(i,e,c,y,false,a)){return false}}return i.size===0}return true}function ie(e,t,r,n,a,i){var o=0;if(i===V){if(!re(e,t,r,a)){return false}}else if(i===H){if(!ae(e,t,r,a)){return false}}else if(i===U){for(;o<e.length;o++){if(d(e,o)){if(!d(t,o)||!X(e[o],t[o],r,a)){return false}}else if(d(t,o)){return false}else{var s=Object.keys(e);for(;o<s.length;o++){var l=s[o];if(!d(t,l)||!X(e[l],t[l],r,a)){return false}}if(s.length!==Object.keys(t).length){return false}return true}}}for(o=0;o<n.length;o++){var u=n[o];if(!X(e[u],t[u],r,a)){return false}}return true}function oe(e,t){return X(e,t,N)}function se(e,t){return X(e,t,B)}e.exports={isDeepEqual:oe,isDeepStrictEqual:se}},95341:function(e,t){"use strict";t.byteLength=u;t.toByteArray=c;t.fromByteArray=p;var r=[];var n=[];var a=typeof Uint8Array!=="undefined"?Uint8Array:Array;var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var o=0,s=i.length;o<s;++o){r[o]=i[o];n[i.charCodeAt(o)]=o}n["-".charCodeAt(0)]=62;n["_".charCodeAt(0)]=63;function l(e){var t=e.length;if(t%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var r=e.indexOf("=");if(r===-1)r=t;var n=r===t?0:4-r%4;return[r,n]}function u(e){var t=l(e);var r=t[0];var n=t[1];return(r+n)*3/4-n}function f(e,t,r){return(t+r)*3/4-r}function c(e){var t;var r=l(e);var i=r[0];var o=r[1];var s=new a(f(e,i,o));var u=0;var c=o>0?i-4:i;var v;for(v=0;v<c;v+=4){t=n[e.charCodeAt(v)]<<18|n[e.charCodeAt(v+1)]<<12|n[e.charCodeAt(v+2)]<<6|n[e.charCodeAt(v+3)];s[u++]=t>>16&255;s[u++]=t>>8&255;s[u++]=t&255}if(o===2){t=n[e.charCodeAt(v)]<<2|n[e.charCodeAt(v+1)]>>4;s[u++]=t&255}if(o===1){t=n[e.charCodeAt(v)]<<10|n[e.charCodeAt(v+1)]<<4|n[e.charCodeAt(v+2)]>>2;s[u++]=t>>8&255;s[u++]=t&255}return s}function v(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[e&63]}function h(e,t,r){var n;var a=[];for(var i=t;i<r;i+=3){n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255);a.push(v(n))}return a.join("")}function p(e){var t;var n=e.length;var a=n%3;var i=[];var o=16383;for(var s=0,l=n-a;s<l;s+=o){i.push(h(e,s,s+o>l?l:s+o))}if(a===1){t=e[n-1];i.push(r[t>>2]+r[t<<4&63]+"==")}else if(a===2){t=(e[n-2]<<8)+e[n-1];i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")}return i.join("")}},91358:function(e){"use strict";function t(e,t,r,n,a){var i=a+1;while(n<=a){var o=n+a>>>1,s=e[o];var l=r!==undefined?r(s,t):s-t;if(l>=0){i=o;a=o-1}else{n=o+1}}return i}function r(e,t,r,n,a){var i=a+1;while(n<=a){var o=n+a>>>1,s=e[o];var l=r!==undefined?r(s,t):s-t;if(l>0){i=o;a=o-1}else{n=o+1}}return i}function n(e,t,r,n,a){var i=n-1;while(n<=a){var o=n+a>>>1,s=e[o];var l=r!==undefined?r(s,t):s-t;if(l<0){i=o;n=o+1}else{a=o-1}}return i}function a(e,t,r,n,a){var i=n-1;while(n<=a){var o=n+a>>>1,s=e[o];var l=r!==undefined?r(s,t):s-t;if(l<=0){i=o;n=o+1}else{a=o-1}}return i}function i(e,t,r,n,a){while(n<=a){var i=n+a>>>1,o=e[i];var s=r!==undefined?r(o,t):o-t;if(s===0){return i}if(s<=0){n=i+1}else{a=i-1}}return-1}function o(e,t,r,n,a,i){if(typeof r==="function"){return i(e,t,r,n===undefined?0:n|0,a===undefined?e.length-1:a|0)}return i(e,t,undefined,r===undefined?0:r|0,n===undefined?e.length-1:n|0)}e.exports={ge:function(e,r,n,a,i){return o(e,r,n,a,i,t)},gt:function(e,t,n,a,i){return o(e,t,n,a,i,r)},lt:function(e,t,r,a,i){return o(e,t,r,a,i,n)},le:function(e,t,r,n,i){return o(e,t,r,n,i,a)},eq:function(e,t,r,n,a){return o(e,t,r,n,a,i)}}},13547:function(e,t){"use strict";"use restrict";var r=32;t.INT_BITS=r;t.INT_MAX=2147483647;t.INT_MIN=-1<<r-1;t.sign=function(e){return(e>0)-(e<0)};t.abs=function(e){var t=e>>r-1;return(e^t)-t};t.min=function(e,t){return t^(e^t)&-(e<t)};t.max=function(e,t){return e^(e^t)&-(e<t)};t.isPow2=function(e){return!(e&e-1)&&!!e};t.log2=function(e){var t,r;t=(e>65535)<<4;e>>>=t;r=(e>255)<<3;e>>>=r;t|=r;r=(e>15)<<2;e>>>=r;t|=r;r=(e>3)<<1;e>>>=r;t|=r;return t|e>>1};t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0};t.popCount=function(e){e=e-(e>>>1&1431655765);e=(e&858993459)+(e>>>2&858993459);return(e+(e>>>4)&252645135)*16843009>>>24};function n(e){var t=32;e&=-e;if(e)t--;if(e&65535)t-=16;if(e&16711935)t-=8;if(e&252645135)t-=4;if(e&858993459)t-=2;if(e&1431655765)t-=1;return t}t.countTrailingZeros=n;t.nextPow2=function(e){e+=e===0;--e;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;return e+1};t.prevPow2=function(e){e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;return e-(e>>>1)};t.parity=function(e){e^=e>>>16;e^=e>>>8;e^=e>>>4;e&=15;return 27030>>>e&1};var a=new Array(256);(function(e){for(var t=0;t<256;++t){var r=t,n=t,a=7;for(r>>>=1;r;r>>>=1){n<<=1;n|=r&1;--a}e[t]=n<<a&255}})(a);t.reverse=function(e){return a[e&255]<<24|a[e>>>8&255]<<16|a[e>>>16&255]<<8|a[e>>>24&255]};t.interleave2=function(e,t){e&=65535;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;e=(e|e<<1)&1431655765;t&=65535;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;t=(t|t<<1)&1431655765;return e|t<<1};t.deinterleave2=function(e,t){e=e>>>t&1431655765;e=(e|e>>>1)&858993459;e=(e|e>>>2)&252645135;e=(e|e>>>4)&16711935;e=(e|e>>>16)&65535;return e<<16>>16};t.interleave3=function(e,t,r){e&=1023;e=(e|e<<16)&4278190335;e=(e|e<<8)&251719695;e=(e|e<<4)&3272356035;e=(e|e<<2)&1227133513;t&=1023;t=(t|t<<16)&4278190335;t=(t|t<<8)&251719695;t=(t|t<<4)&3272356035;t=(t|t<<2)&1227133513;e|=t<<1;r&=1023;r=(r|r<<16)&4278190335;r=(r|r<<8)&251719695;r=(r|r<<4)&3272356035;r=(r|r<<2)&1227133513;return e|r<<2};t.deinterleave3=function(e,t){e=e>>>t&1227133513;e=(e|e>>>2)&3272356035;e=(e|e>>>4)&251719695;e=(e|e>>>8)&4278190335;e=(e|e>>>16)&1023;return e<<22>>22};t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},44781:function(e,t,r){"use strict";var n=r(53435);e.exports=i;var a=1e20;function i(e,t){if(!t)t={};var r=t.cutoff==null?.25:t.cutoff;var i=t.radius==null?8:t.radius;var s=t.channel||0;var l,u,f,c,v,h,p,d,g,y,m;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!t.width||!t.height)throw Error("For raw data width and height should be provided by options");l=t.width,u=t.height;c=e;if(!t.stride)h=Math.floor(e.length/l/u);else h=t.stride}else{if(window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement){d=e;p=d.getContext("2d");l=d.width,u=d.height;g=p.getImageData(0,0,l,u);c=g.data;h=4}else if(window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D){d=e.canvas;p=e;l=d.width,u=d.height;g=p.getImageData(0,0,l,u);c=g.data;h=4}else if(window.ImageData&&e instanceof window.ImageData){g=e;l=e.width,u=e.height;c=g.data;h=4}}f=Math.max(l,u);if(window.Uint8ClampedArray&&c instanceof window.Uint8ClampedArray||window.Uint8Array&&c instanceof window.Uint8Array){v=c;c=Array(l*u);for(y=0,m=v.length;y<m;y++){c[y]=v[y*h+s]/255}}else{if(h!==1)throw Error("Raw data can have only 1 value per pixel")}var x=Array(l*u);var b=Array(l*u);var _=Array(f);var w=Array(f);var T=Array(f+1);var k=Array(f);for(y=0,m=l*u;y<m;y++){var A=c[y];x[y]=A===1?0:A===0?a:Math.pow(Math.max(0,.5-A),2);b[y]=A===1?a:A===0?0:Math.pow(Math.max(0,A-.5),2)}o(x,l,u,_,w,k,T);o(b,l,u,_,w,k,T);var M=window.Float32Array?new Float32Array(l*u):new Array(l*u);for(y=0,m=l*u;y<m;y++){M[y]=n(1-((x[y]-b[y])/i+r),0,1)}return M}function o(e,t,r,n,a,i,o){for(var l=0;l<t;l++){for(var u=0;u<r;u++){n[u]=e[u*t+l]}s(n,a,i,o,r);for(u=0;u<r;u++){e[u*t+l]=a[u]}}for(u=0;u<r;u++){for(l=0;l<t;l++){n[l]=e[u*t+l]}s(n,a,i,o,t);for(l=0;l<t;l++){e[u*t+l]=Math.sqrt(a[l])}}}function s(e,t,r,n,i){r[0]=0;n[0]=-a;n[1]=+a;for(var o=1,s=0;o<i;o++){var l=(e[o]+o*o-(e[r[s]]+r[s]*r[s]))/(2*o-2*r[s]);while(l<=n[s]){s--;l=(e[o]+o*o-(e[r[s]]+r[s]*r[s]))/(2*o-2*r[s])}s++;r[s]=o;n[s]=l;n[s+1]=+a}for(o=0,s=0;o<i;o++){while(n[s+1]<o)s++;t[o]=(o-r[s])*(o-r[s])+e[r[s]]}}},6614:function(e,t,r){"use strict";var n=r(68318);var a=r(68222);var i=a(n("String.prototype.indexOf"));e.exports=function e(t,r){var o=n(t,!!r);if(typeof o==="function"&&i(t,".prototype.")>-1){return a(o)}return o}},68222:function(e,t,r){"use strict";var n=r(77575);var a=r(68318);var i=a("%Function.prototype.apply%");var o=a("%Function.prototype.call%");var s=a("%Reflect.apply%",true)||n.call(o,i);var l=a("%Object.getOwnPropertyDescriptor%",true);var u=a("%Object.defineProperty%",true);var f=a("%Math.max%");if(u){try{u({},"a",{value:1})}catch(v){u=null}}e.exports=function e(t){var r=s(n,o,arguments);if(l&&u){var a=l(r,"length");if(a.configurable){u(r,"length",{value:1+f(0,t.length-(arguments.length-1))})}}return r};var c=function e(){return s(n,i,arguments)};if(u){u(e.exports,"apply",{value:c})}else{e.exports.apply=c}},53435:function(e){e.exports=t;function t(e,t,r){return t<r?e<t?t:e>r?r:e:e<r?r:e>t?t:e}},6475:function(e,t,r){"use strict";var n=r(53435);e.exports=a;e.exports.to=a;e.exports.from=i;function a(e,t){if(t==null)t=true;var r=e[0],a=e[1],i=e[2],o=e[3];if(o==null)o=t?1:255;if(t){r*=255;a*=255;i*=255;o*=255}r=n(r,0,255)&255;a=n(a,0,255)&255;i=n(i,0,255)&255;o=n(o,0,255)&255;var s=r*16777216+(a<<16)+(i<<8)+o;return s}function i(e,t){e=+e;var r=e>>>24;var n=(e&16711680)>>>16;var a=(e&65280)>>>8;var i=e&255;if(t===false)return[r,n,a,i];return[r/255,n/255,a/255,i/255]}},76857:function(e){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},25075:function(e,t,r){"use strict";var n=r(36652);var a=r(53435);var i=r(90660);e.exports=function e(t,r){if(r==="float"||!r)r="array";if(r==="uint")r="uint8";if(r==="uint_clamped")r="uint8_clamped";var s=i(r);var l=new s(4);var e=r!=="uint8"&&r!=="uint8_clamped";if(!t.length||typeof t==="string"){t=n(t);t[0]/=255;t[1]/=255;t[2]/=255}if(o(t)){l[0]=t[0];l[1]=t[1];l[2]=t[2];l[3]=t[3]!=null?t[3]:255;if(e){l[0]/=255;l[1]/=255;l[2]/=255;l[3]/=255}return l}if(!e){l[0]=a(Math.floor(t[0]*255),0,255);l[1]=a(Math.floor(t[1]*255),0,255);l[2]=a(Math.floor(t[2]*255),0,255);l[3]=t[3]==null?255:a(Math.floor(t[3]*255),0,255)}else{l[0]=t[0];l[1]=t[1];l[2]=t[2];l[3]=t[3]!=null?t[3]:1}return l};function o(e){if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return true;if(Array.isArray(e)&&(e[0]>1||e[0]===0)&&(e[1]>1||e[1]===0)&&(e[2]>1||e[2]===0)&&(!e[3]||e[3]>1))return true;return false}},90736:function(e,t,r){"use strict";var n=r(76857);var a=r(10973);var i=r(46775);e.exports=s;var o={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function s(e){var t,s=[],l=1,u;if(typeof e==="string"){if(n[e]){s=n[e].slice();u="rgb"}else if(e==="transparent"){l=0;u="rgb";s=[0,0,0]}else if(/^#[A-Fa-f0-9]+$/.test(e)){var f=e.slice(1);var c=f.length;var v=c<=4;l=1;if(v){s=[parseInt(f[0]+f[0],16),parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16)];if(c===4){l=parseInt(f[3]+f[3],16)/255}}else{s=[parseInt(f[0]+f[1],16),parseInt(f[2]+f[3],16),parseInt(f[4]+f[5],16)];if(c===8){l=parseInt(f[6]+f[7],16)/255}}if(!s[0])s[0]=0;if(!s[1])s[1]=0;if(!s[2])s[2]=0;u="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(e)){var h=t[1];var p=h==="rgb";var f=h.replace(/a$/,"");u=f;var c=f==="cmyk"?4:f==="gray"?1:3;s=t[2].trim().split(/\s*,\s*/).map((function(e,t){if(/%$/.test(e)){if(t===c)return parseFloat(e)/100;if(f==="rgb")return parseFloat(e)*255/100;return parseFloat(e)}else if(f[t]==="h"){if(/deg$/.test(e)){return parseFloat(e)}else if(o[e]!==undefined){return o[e]}}return parseFloat(e)}));if(h===f)s.push(1);l=p?1:s[c]===undefined?1:s[c];s=s.slice(0,c)}else if(e.length>10&&/[0-9](?:\s|\/)/.test(e)){s=e.match(/([0-9]+)/g).map((function(e){return parseFloat(e)}));u=e.match(/([a-z])/gi).join("").toLowerCase()}}else if(!isNaN(e)){u="rgb";s=[e>>>16,(e&65280)>>>8,e&255]}else if(a(e)){var d=i(e.r,e.red,e.R,null);if(d!==null){u="rgb";s=[d,i(e.g,e.green,e.G),i(e.b,e.blue,e.B)]}else{u="hsl";s=[i(e.h,e.hue,e.H),i(e.s,e.saturation,e.S),i(e.l,e.lightness,e.L,e.b,e.brightness)]}l=i(e.a,e.alpha,e.opacity,1);if(e.opacity!=null)l/=100}else if(Array.isArray(e)||r.g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e)){s=[e[0],e[1],e[2]];u="rgb";l=e.length===4?e[3]:1}return{space:u,values:s,alpha:l}}},36652:function(e,t,r){"use strict";var n=r(90736);var a=r(80009);var i=r(53435);e.exports=function e(t){var r,o,s;var l=n(t);if(!l.space)return[];r=Array(3);r[0]=i(l.values[0],0,255);r[1]=i(l.values[1],0,255);r[2]=i(l.values[2],0,255);if(l.space[0]==="h"){r=a.rgb(r)}r.push(i(l.alpha,0,1));return r}},80009:function(e,t,r){"use strict";var n=r(6866);e.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,a,i,o,s,l;if(r===0){l=n*255;return[l,l,l]}if(n<.5){i=n*(1+r)}else{i=n+r-n*r}a=2*n-i;s=[0,0,0];for(var u=0;u<3;u++){o=t+1/3*-(u-1);if(o<0){o++}else if(o>1){o--}if(6*o<1){l=a+(i-a)*6*o}else if(2*o<1){l=i}else if(3*o<2){l=a+(i-a)*(2/3-o)*6}else{l=a}s[u]=l*255}return s}};n.hsl=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=i-a,s,l,u;if(i===a){s=0}else if(t===i){s=(r-n)/o}else if(r===i){s=2+(n-t)/o}else if(n===i){s=4+(t-r)/o}s=Math.min(s*60,360);if(s<0){s+=360}u=(a+i)/2;if(i===a){l=0}else if(u<=.5){l=o/(i+a)}else{l=o/(2-i-a)}return[s,l*100,u*100]}},6866:function(e){"use strict";e.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},24138:function(e){e.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},72791:function(e,t,r){"use strict";e.exports={parse:r(41004),stringify:r(53313)}},63625:function(e,t,r){"use strict";var n=r(40402);e.exports={isSize:function e(t){return/^[\d\.]/.test(t)||t.indexOf("/")!==-1||n.indexOf(t)!==-1}}},41004:function(e,t,r){"use strict";var n=r(90448);var a=r(38732);var i=r(41901);var o=r(15659);var s=r(96209);var l=r(83794);var u=r(99011);var f=r(63625).isSize;e.exports=v;var c=v.cache={};function v(e){if(typeof e!=="string")throw new Error("Font argument must be a string.");if(c[e])return c[e];if(e===""){throw new Error("Cannot parse an empty string.")}if(i.indexOf(e)!==-1){return c[e]={system:e}}var t={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]};var r=u(e,/\s+/);var v;while(v=r.shift()){if(a.indexOf(v)!==-1){["style","variant","weight","stretch"].forEach((function(e){t[e]=v}));return c[e]=t}if(s.indexOf(v)!==-1){t.style=v;continue}if(v==="normal"||v==="small-caps"){t.variant=v;continue}if(l.indexOf(v)!==-1){t.stretch=v;continue}if(o.indexOf(v)!==-1){t.weight=v;continue}if(f(v)){var p=u(v,"/");t.size=p[0];if(p[1]!=null){t.lineHeight=h(p[1])}else if(r[0]==="/"){r.shift();t.lineHeight=h(r.shift())}if(!r.length){throw new Error("Missing required font-family.")}t.family=u(r.join(" "),/\s*,\s*/).map(n);return c[e]=t}throw new Error("Unknown or unsupported font token: "+v)}throw new Error("Missing required font-size.")}function h(e){var t=parseFloat(e);if(t.toString()===e){return t}return e}},53313:function(e,t,r){"use strict";var n=r(71299);var a=r(63625).isSize;var i=p(r(38732));var o=p(r(41901));var s=p(r(15659));var l=p(r(96209));var u=p(r(83794));var f={normal:1,"small-caps":1};var c={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1};var v={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};e.exports=function e(t){t=n(t,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"});if(t.system){if(t.system)h(t.system,o);return t.system}h(t.style,l);h(t.variant,f);h(t.weight,s);h(t.stretch,u);if(t.size==null)t.size=v.size;if(typeof t.size==="number")t.size+="px";if(!a)throw Error("Bad size value `"+t.size+"`");if(!t.family)t.family=v.family;if(Array.isArray(t.family)){if(!t.family.length)t.family=[v.family];t.family=t.family.map((function(e){return c[e]?e:'"'+e+'"'})).join(", ")}var r=[];r.push(t.style);if(t.variant!==t.style)r.push(t.variant);if(t.weight!==t.variant&&t.weight!==t.style)r.push(t.weight);if(t.stretch!==t.weight&&t.stretch!==t.variant&&t.stretch!==t.style)r.push(t.stretch);r.push(t.size+(t.lineHeight==null||t.lineHeight==="normal"||t.lineHeight+""==="1"?"":"/"+t.lineHeight));r.push(t.family);return r.filter(Boolean).join(" ")};function h(e,t){if(e&&!t[e]&&!i[e])throw Error("Unknown keyword `"+e+"`");return e}function p(e){var t={};for(var r=0;r<e.length;r++){t[e[r]]=1}return t}},55174:function(e,t,r){"use strict";var n=r(24582),a=r(10424),i=r(82527),o=r(19012),s=r(21780),l=r(16906);var u=Function.prototype.bind,f=Object.defineProperty,c=Object.prototype.hasOwnProperty,v;v=function(e,t,r){var n=a(t)&&i(t.value),s;s=o(t);delete s.writable;delete s.value;s.get=function(){if(!r.overwriteDefinition&&c.call(this,e))return n;t.value=u.call(n,r.resolveContext?r.resolveContext(this):this);f(this,e,t);return this[e]};return s};e.exports=function(e){var t=s(arguments[1]);if(n(t.resolveContext))i(t.resolveContext);return l(e,(function(e,r){return v(r,e,t)}))}},62072:function(e,t,r){"use strict";var n=r(24582),a=r(84985),i=r(95879),o=r(21780),s=r(66741);var l=e.exports=function(e,t){var r,a,l,u,f;if(arguments.length<2||typeof e!=="string"){u=t;t=e;e=null}else{u=arguments[2]}if(n(e)){r=s.call(e,"c");a=s.call(e,"e");l=s.call(e,"w")}else{r=l=true;a=false}f={value:t,configurable:r,enumerable:a,writable:l};return!u?f:i(o(u),f)};l.gs=function(e,t,r){var l,u,f,c;if(typeof e!=="string"){f=r;r=t;t=e;e=null}else{f=arguments[3]}if(!n(t)){t=undefined}else if(!a(t)){f=t;t=r=undefined}else if(!n(r)){r=undefined}else if(!a(r)){f=r;r=undefined}if(n(e)){l=s.call(e,"c");u=s.call(e,"e")}else{l=true;u=false}c={get:t,set:r,configurable:l,enumerable:u};return!f?c:i(o(f),c)}},33064:function(e,t,r){"use strict";r.d(t,{j2:function(){return n},Fp:function(){return _},J6:function(){return T},TS:function(){return k},VV:function(){return A},w6:function(){return M},Sm:function(){return S}});function n(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function a(e){if(e.length===1)e=i(e);return{left:function(t,r,n,a){if(n==null)n=0;if(a==null)a=t.length;while(n<a){var i=n+a>>>1;if(e(t[i],r)<0)n=i+1;else a=i}return n},right:function(t,r,n,a){if(n==null)n=0;if(a==null)a=t.length;while(n<a){var i=n+a>>>1;if(e(t[i],r)>0)a=i;else n=i+1}return n}}}function i(e){return function(t,r){return n(e(t),r)}}var o=a(n);var s=o.right;var l=o.left;var u=null&&0;var f=Array.prototype;var c=f.slice;var v=f.map;var h=Math.sqrt(50),p=Math.sqrt(10),d=Math.sqrt(2);function g(e,t,r){var n,a=-1,i,o,s;t=+t,e=+e,r=+r;if(e===t&&r>0)return[e];if(n=t<e)i=e,e=t,t=i;if((s=y(e,t,r))===0||!isFinite(s))return[];if(s>0){e=Math.ceil(e/s);t=Math.floor(t/s);o=new Array(i=Math.ceil(t-e+1));while(++a<i)o[a]=(e+a)*s}else{e=Math.floor(e*s);t=Math.ceil(t*s);o=new Array(i=Math.ceil(e-t+1));while(++a<i)o[a]=(e-a)/s}if(n)o.reverse();return o}function y(e,t,r){var n=(t-e)/Math.max(0,r),a=Math.floor(Math.log(n)/Math.LN10),i=n/Math.pow(10,a);return a>=0?(i>=h?10:i>=p?5:i>=d?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(i>=h?10:i>=p?5:i>=d?2:1)}function m(e,t,r){var n=Math.abs(t-e)/Math.max(0,r),a=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),i=n/a;if(i>=h)a*=10;else if(i>=p)a*=5;else if(i>=d)a*=2;return t<e?-a:a}function x(){var e=identity,t=extent,r=sturges;function n(n){var a,i=n.length,o,s=new Array(i);for(a=0;a<i;++a){s[a]=e(n[a],a,n)}var l=t(s),u=l[0],f=l[1],c=r(s,u,f);if(!Array.isArray(c)){c=tickStep(u,f,c);c=range(Math.ceil(u/c)*c,f,c)}var v=c.length;while(c[0]<=u)c.shift(),--v;while(c[v-1]>f)c.pop(),--v;var h=new Array(v+1),p;for(a=0;a<=v;++a){p=h[a]=[];p.x0=a>0?c[a-1]:u;p.x1=a<v?c[a]:f}for(a=0;a<i;++a){o=s[a];if(u<=o&&o<=f){h[bisect(c,o,0,v)].push(n[a])}}return h}n.value=function(t){return arguments.length?(e=typeof t==="function"?t:constant(t),n):e};n.domain=function(e){return arguments.length?(t=typeof e==="function"?e:constant([e[0],e[1]]),n):t};n.thresholds=function(e){return arguments.length?(r=typeof e==="function"?e:Array.isArray(e)?constant(slice.call(e)):constant(e),n):r};return n}function b(e,t,r){e=map.call(e,number).sort(ascending);return Math.ceil((r-t)/(2*(quantile(e,.75)-quantile(e,.25))*Math.pow(e.length,-1/3)))}function _(e,t){var r=e.length,n=-1,a,i;if(t==null){while(++n<r){if((a=e[n])!=null&&a>=a){i=a;while(++n<r){if((a=e[n])!=null&&a>i){i=a}}}}}else{while(++n<r){if((a=t(e[n],n,e))!=null&&a>=a){i=a;while(++n<r){if((a=t(e[n],n,e))!=null&&a>i){i=a}}}}}return i}function w(e){return e===null?NaN:+e}function T(e,t){var r=e.length,n=r,a=-1,i,o=0;if(t==null){while(++a<r){if(!isNaN(i=w(e[a])))o+=i;else--n}}else{while(++a<r){if(!isNaN(i=w(t(e[a],a,e))))o+=i;else--n}}if(n)return o/n}function k(e){var t=e.length,r,n=-1,a=0,i,o;while(++n<t)a+=e[n].length;i=new Array(a);while(--t>=0){o=e[t];r=o.length;while(--r>=0){i[--a]=o[r]}}return i}function A(e,t){var r=e.length,n=-1,a,i;if(t==null){while(++n<r){if((a=e[n])!=null&&a>=a){i=a;while(++n<r){if((a=e[n])!=null&&i>a){i=a}}}}}else{while(++n<r){if((a=t(e[n],n,e))!=null&&a>=a){i=a;while(++n<r){if((a=t(e[n],n,e))!=null&&i>a){i=a}}}}}return i}function M(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);while(++n<a){i[n]=e+n*r}return i}function S(e,t){var r=e.length,n=-1,a,i=0;if(t==null){while(++n<r){if(a=+e[n])i+=a}}else{while(++n<r){if(a=+t(e[n],n,e))i+=a}}return i}},15140:function(e,t,r){"use strict";r.d(t,{UI:function(){return o},b1:function(){return s}});var n="$";function a(){}a.prototype=i.prototype={constructor:a,has:function(e){return n+e in this},get:function(e){return this[n+e]},set:function(e,t){this[n+e]=t;return this},remove:function(e){var t=n+e;return t in this&&delete this[t]},clear:function(){for(var e in this)if(e[0]===n)delete this[e]},keys:function(){var e=[];for(var t in this)if(t[0]===n)e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)if(t[0]===n)e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)if(t[0]===n)e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)if(t[0]===n)++e;return e},empty:function(){for(var e in this)if(e[0]===n)return false;return true},each:function(e){for(var t in this)if(t[0]===n)e(this[t],t.slice(1),this)}};function i(e,t){var r=new a;if(e instanceof a)e.each((function(e,t){r.set(t,e)}));else if(Array.isArray(e)){var n=-1,i=e.length,o;if(t==null)while(++n<i)r.set(n,e[n]);else while(++n<i)r.set(t(o=e[n],n,e),o)}else if(e)for(var s in e)r.set(s,e[s]);return r}var o=i;function s(){var e=[],t=[],r,n,a;function i(t,a,s,l){if(a>=e.length){if(r!=null)t.sort(r);return n!=null?n(t):t}var u=-1,f=t.length,c=e[a++],v,h,p=o(),d,g=s();while(++u<f){if(d=p.get(v=c(h=t[u])+"")){d.push(h)}else{p.set(v,[h])}}p.each((function(e,t){l(g,t,i(e,a,s,l))}));return g}function s(r,a){if(++a>e.length)return r;var i,o=t[a-1];if(n!=null&&a>=e.length)i=r.entries();else i=[],r.each((function(e,t){i.push({key:t,values:s(e,a)})}));return o!=null?i.sort((function(e,t){return o(e.key,t.key)})):i}return a={object:function(e){return i(e,0,l,u)},map:function(e){return i(e,0,f,c)},entries:function(e){return s(i(e,0,f,c),0)},key:function(t){e.push(t);return a},sortKeys:function(r){t[e.length-1]=r;return a},sortValues:function(e){r=e;return a},rollup:function(e){n=e;return a}}}function l(){return{}}function u(e,t,r){e[t]=r}function f(){return o()}function c(e,t,r){e.set(t,r)}function v(){}var h=o.prototype;v.prototype=p.prototype={constructor:v,has:h.has,add:function(e){e+="";this[n+e]=e;return this},remove:h.remove,clear:h.clear,values:h.keys,size:h.size,empty:h.empty,each:h.each};function p(e,t){var r=new v;if(e instanceof v)e.each((function(e){r.add(e)}));else if(e){var n=-1,a=e.length;if(t==null)while(++n<a)r.add(e[n]);else while(++n<a)r.add(t(e[n],n,e))}return r}var d=null&&0},49887:function(e,t,r){"use strict";r.r(t);r.d(t,{forceCenter:function(){return n},forceCollide:function(){return C},forceLink:function(){return D},forceManyBody:function(){return he},forceRadial:function(){return pe},forceSimulation:function(){return ve},forceX:function(){return de},forceY:function(){return ge}});function n(e,t){var r;if(e==null)e=0;if(t==null)t=0;function n(){var n,a=r.length,i,o=0,s=0;for(n=0;n<a;++n){i=r[n],o+=i.x,s+=i.y}for(o=o/a-e,s=s/a-t,n=0;n<a;++n){i=r[n],i.x-=o,i.y-=s}}n.initialize=function(e){r=e};n.x=function(t){return arguments.length?(e=+t,n):e};n.y=function(e){return arguments.length?(t=+e,n):t};return n}function a(e){return function(){return e}}function i(){return(Math.random()-.5)*1e-6}function o(e){var t=+this._x.call(null,e),r=+this._y.call(null,e);return s(this.cover(t,r),t,r,e)}function s(e,t,r,n){if(isNaN(t)||isNaN(r))return e;var a,i=e._root,o={data:n},s=e._x0,l=e._y0,u=e._x1,f=e._y1,c,v,h,p,d,g,y,m;if(!i)return e._root=o,e;while(i.length){if(d=t>=(c=(s+u)/2))s=c;else u=c;if(g=r>=(v=(l+f)/2))l=v;else f=v;if(a=i,!(i=i[y=g<<1|d]))return a[y]=o,e}h=+e._x.call(null,i.data);p=+e._y.call(null,i.data);if(t===h&&r===p)return o.next=i,a?a[y]=o:e._root=o,e;do{a=a?a[y]=new Array(4):e._root=new Array(4);if(d=t>=(c=(s+u)/2))s=c;else u=c;if(g=r>=(v=(l+f)/2))l=v;else f=v}while((y=g<<1|d)===(m=(p>=v)<<1|h>=c));return a[m]=i,a[y]=o,e}function l(e){var t,r,n=e.length,a,i,o=new Array(n),l=new Array(n),u=Infinity,f=Infinity,c=-Infinity,v=-Infinity;for(r=0;r<n;++r){if(isNaN(a=+this._x.call(null,t=e[r]))||isNaN(i=+this._y.call(null,t)))continue;o[r]=a;l[r]=i;if(a<u)u=a;if(a>c)c=a;if(i<f)f=i;if(i>v)v=i}if(u>c||f>v)return this;this.cover(u,f).cover(c,v);for(r=0;r<n;++r){s(this,o[r],l[r],e[r])}return this}function u(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var r=this._x0,n=this._y0,a=this._x1,i=this._y1;if(isNaN(r)){a=(r=Math.floor(e))+1;i=(n=Math.floor(t))+1}else{var o=a-r,s=this._root,l,u;while(r>e||e>=a||n>t||t>=i){u=(t<n)<<1|e<r;l=new Array(4),l[u]=s,s=l,o*=2;switch(u){case 0:a=r+o,i=n+o;break;case 1:r=a-o,i=n+o;break;case 2:a=r+o,n=i-o;break;case 3:r=a-o,n=i-o;break}}if(this._root&&this._root.length)this._root=s}this._x0=r;this._y0=n;this._x1=a;this._y1=i;return this}function f(){var e=[];this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)}));return e}function c(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?undefined:[[this._x0,this._y0],[this._x1,this._y1]]}function v(e,t,r,n,a){this.node=e;this.x0=t;this.y0=r;this.x1=n;this.y1=a}function h(e,t,r){var n,a=this._x0,i=this._y0,o,s,l,u,f=this._x1,c=this._y1,h=[],p=this._root,d,g;if(p)h.push(new v(p,a,i,f,c));if(r==null)r=Infinity;else{a=e-r,i=t-r;f=e+r,c=t+r;r*=r}while(d=h.pop()){if(!(p=d.node)||(o=d.x0)>f||(s=d.y0)>c||(l=d.x1)<a||(u=d.y1)<i)continue;if(p.length){var y=(o+l)/2,m=(s+u)/2;h.push(new v(p[3],y,m,l,u),new v(p[2],o,m,y,u),new v(p[1],y,s,l,m),new v(p[0],o,s,y,m));if(g=(t>=m)<<1|e>=y){d=h[h.length-1];h[h.length-1]=h[h.length-1-g];h[h.length-1-g]=d}}else{var x=e-+this._x.call(null,p.data),b=t-+this._y.call(null,p.data),_=x*x+b*b;if(_<r){var w=Math.sqrt(r=_);a=e-w,i=t-w;f=e+w,c=t+w;n=p.data}}}return n}function p(e){if(isNaN(f=+this._x.call(null,e))||isNaN(c=+this._y.call(null,e)))return this;var t,r=this._root,n,a,i,o=this._x0,s=this._y0,l=this._x1,u=this._y1,f,c,v,h,p,d,g,y;if(!r)return this;if(r.length)while(true){if(p=f>=(v=(o+l)/2))o=v;else l=v;if(d=c>=(h=(s+u)/2))s=h;else u=h;if(!(t=r,r=r[g=d<<1|p]))return this;if(!r.length)break;if(t[g+1&3]||t[g+2&3]||t[g+3&3])n=t,y=g}while(r.data!==e)if(!(a=r,r=r.next))return this;if(i=r.next)delete r.next;if(a)return i?a.next=i:delete a.next,this;if(!t)return this._root=i,this;i?t[g]=i:delete t[g];if((r=t[0]||t[1]||t[2]||t[3])&&r===(t[3]||t[2]||t[1]||t[0])&&!r.length){if(n)n[y]=r;else this._root=r}return this}function d(e){for(var t=0,r=e.length;t<r;++t)this.remove(e[t]);return this}function g(){return this._root}function y(){var e=0;this.visit((function(t){if(!t.length)do{++e}while(t=t.next)}));return e}function m(e){var t=[],r,n=this._root,a,i,o,s,l;if(n)t.push(new v(n,this._x0,this._y0,this._x1,this._y1));while(r=t.pop()){if(!e(n=r.node,i=r.x0,o=r.y0,s=r.x1,l=r.y1)&&n.length){var u=(i+s)/2,f=(o+l)/2;if(a=n[3])t.push(new v(a,u,f,s,l));if(a=n[2])t.push(new v(a,i,f,u,l));if(a=n[1])t.push(new v(a,u,o,s,f));if(a=n[0])t.push(new v(a,i,o,u,f))}}return this}function x(e){var t=[],r=[],n;if(this._root)t.push(new v(this._root,this._x0,this._y0,this._x1,this._y1));while(n=t.pop()){var a=n.node;if(a.length){var i,o=n.x0,s=n.y0,l=n.x1,u=n.y1,f=(o+l)/2,c=(s+u)/2;if(i=a[0])t.push(new v(i,o,s,f,c));if(i=a[1])t.push(new v(i,f,s,l,c));if(i=a[2])t.push(new v(i,o,c,f,u));if(i=a[3])t.push(new v(i,f,c,l,u))}r.push(n)}while(n=r.pop()){e(n.node,n.x0,n.y0,n.x1,n.y1)}return this}function b(e){return e[0]}function _(e){return arguments.length?(this._x=e,this):this._x}function w(e){return e[1]}function T(e){return arguments.length?(this._y=e,this):this._y}function k(e,t,r){var n=new A(t==null?b:t,r==null?w:r,NaN,NaN,NaN,NaN);return e==null?n:n.addAll(e)}function A(e,t,r,n,a,i){this._x=e;this._y=t;this._x0=r;this._y0=n;this._x1=a;this._y1=i;this._root=undefined}function M(e){var t={data:e.data},r=t;while(e=e.next)r=r.next={data:e.data};return t}var S=k.prototype=A.prototype;S.copy=function(){var e=new A(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,r,n;if(!t)return e;if(!t.length)return e._root=M(t),e;r=[{source:t,target:e._root=new Array(4)}];while(t=r.pop()){for(var a=0;a<4;++a){if(n=t.source[a]){if(n.length)r.push({source:n,target:t.target[a]=new Array(4)});else t.target[a]=M(n)}}}return e};S.add=o;S.addAll=l;S.cover=u;S.data=f;S.extent=c;S.find=h;S.remove=p;S.removeAll=d;S.root=g;S.size=y;S.visit=m;S.visitAfter=x;S.x=_;S.y=T;function E(e){return e.x+e.vx}function L(e){return e.y+e.vy}function C(e){var t,r,n=1,o=1;if(typeof e!=="function")e=a(e==null?1:+e);function s(){var e,a=t.length,s,u,f,c,v,h;for(var p=0;p<o;++p){s=k(t,E,L).visitAfter(l);for(e=0;e<a;++e){u=t[e];v=r[u.index],h=v*v;f=u.x+u.vx;c=u.y+u.vy;s.visit(d)}}function d(e,t,r,a,o){var s=e.data,l=e.r,p=v+l;if(s){if(s.index>u.index){var d=f-s.x-s.vx,g=c-s.y-s.vy,y=d*d+g*g;if(y<p*p){if(d===0)d=i(),y+=d*d;if(g===0)g=i(),y+=g*g;y=(p-(y=Math.sqrt(y)))/y*n;u.vx+=(d*=y)*(p=(l*=l)/(h+l));u.vy+=(g*=y)*p;s.vx-=d*(p=1-p);s.vy-=g*p}}return}return t>f+p||a<f-p||r>c+p||o<c-p}}function l(e){if(e.data)return e.r=r[e.data.index];for(var t=e.r=0;t<4;++t){if(e[t]&&e[t].r>e.r){e.r=e[t].r}}}function u(){if(!t)return;var n,a=t.length,i;r=new Array(a);for(n=0;n<a;++n)i=t[n],r[i.index]=+e(i,n,t)}s.initialize=function(e){t=e;u()};s.iterations=function(e){return arguments.length?(o=+e,s):o};s.strength=function(e){return arguments.length?(n=+e,s):n};s.radius=function(t){return arguments.length?(e=typeof t==="function"?t:a(+t),u(),s):e};return s}var I=r(15140);function P(e){return e.index}function O(e,t){var r=e.get(t);if(!r)throw new Error("missing: "+t);return r}function D(e){var t=P,r=v,n,o=a(30),s,l,u,f,c=1;if(e==null)e=[];function v(e){return 1/Math.min(u[e.source.index],u[e.target.index])}function h(t){for(var r=0,a=e.length;r<c;++r){for(var o=0,l,u,v,h,p,d,g;o<a;++o){l=e[o],u=l.source,v=l.target;h=v.x+v.vx-u.x-u.vx||i();p=v.y+v.vy-u.y-u.vy||i();d=Math.sqrt(h*h+p*p);d=(d-s[o])/d*t*n[o];h*=d,p*=d;v.vx-=h*(g=f[o]);v.vy-=p*g;u.vx+=h*(g=1-g);u.vy+=p*g}}}function p(){if(!l)return;var r,a=l.length,i=e.length,o=(0,I.UI)(l,t),c;for(r=0,u=new Array(a);r<i;++r){c=e[r],c.index=r;if(typeof c.source!=="object")c.source=O(o,c.source);if(typeof c.target!=="object")c.target=O(o,c.target);u[c.source.index]=(u[c.source.index]||0)+1;u[c.target.index]=(u[c.target.index]||0)+1}for(r=0,f=new Array(i);r<i;++r){c=e[r],f[r]=u[c.source.index]/(u[c.source.index]+u[c.target.index])}n=new Array(i),d();s=new Array(i),g()}function d(){if(!l)return;for(var t=0,a=e.length;t<a;++t){n[t]=+r(e[t],t,e)}}function g(){if(!l)return;for(var t=0,r=e.length;t<r;++t){s[t]=+o(e[t],t,e)}}h.initialize=function(e){l=e;p()};h.links=function(t){return arguments.length?(e=t,p(),h):e};h.id=function(e){return arguments.length?(t=e,h):t};h.iterations=function(e){return arguments.length?(c=+e,h):c};h.strength=function(e){return arguments.length?(r=typeof e==="function"?e:a(+e),d(),h):r};h.distance=function(e){return arguments.length?(o=typeof e==="function"?e:a(+e),g(),h):o};return h}var z={value:function(){}};function R(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new F(r)}function F(e){this._=e}function B(e,t){return e.trim().split(/^|\s+/).map((function(e){var r="",n=e.indexOf(".");if(n>=0)r=e.slice(n+1),e=e.slice(0,n);if(e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}}))}F.prototype=R.prototype={constructor:F,on:function(e,t){var r=this._,n=B(e+"",r),a,i=-1,o=n.length;if(arguments.length<2){while(++i<o)if((a=(e=n[i]).type)&&(a=N(r[a],e.name)))return a;return}if(t!=null&&typeof t!=="function")throw new Error("invalid callback: "+t);while(++i<o){if(a=(e=n[i]).type)r[a]=j(r[a],e.name,t);else if(t==null)for(a in r)r[a]=j(r[a],e.name,null)}return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new F(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,i;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],n=0,a=i.length;n<a;++n)i[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,i=n.length;a<i;++a)n[a].value.apply(t,r)}};function N(e,t){for(var r=0,n=e.length,a;r<n;++r){if((a=e[r]).name===t){return a.value}}}function j(e,t,r){for(var n=0,a=e.length;n<a;++n){if(e[n].name===t){e[n]=z,e=e.slice(0,n).concat(e.slice(n+1));break}}if(r!=null)e.push({name:t,value:r});return e}var U=R;var V=0,H=0,q=0,G=1e3,Z,Y,W=0,X=0,J=0,K=typeof performance==="object"&&performance.now?performance:Date,$=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Q(){return X||($(ee),X=K.now()+J)}function ee(){X=0}function te(){this._call=this._time=this._next=null}te.prototype=re.prototype={constructor:te,restart:function(e,t,r){if(typeof e!=="function")throw new TypeError("callback is not a function");r=(r==null?Q():+r)+(t==null?0:+t);if(!this._next&&Y!==this){if(Y)Y._next=this;else Z=this;Y=this}this._call=e;this._time=r;se()},stop:function(){if(this._call){this._call=null;this._time=Infinity;se()}}};function re(e,t,r){var n=new te;n.restart(e,t,r);return n}function ne(){Q();++V;var e=Z,t;while(e){if((t=X-e._time)>=0)e._call.call(null,t);e=e._next}--V}function ae(){X=(W=K.now())+J;V=H=0;try{ne()}finally{V=0;oe();X=0}}function ie(){var e=K.now(),t=e-W;if(t>G)J-=t,W=e}function oe(){var e,t=Z,r,n=Infinity;while(t){if(t._call){if(n>t._time)n=t._time;e=t,t=t._next}else{r=t._next,t._next=null;t=e?e._next=r:Z=r}}Y=e;se(n)}function se(e){if(V)return;if(H)H=clearTimeout(H);var t=e-X;if(t>24){if(e<Infinity)H=setTimeout(ae,e-K.now()-J);if(q)q=clearInterval(q)}else{if(!q)W=K.now(),q=setInterval(ie,G);V=1,$(ae)}}function le(e){return e.x}function ue(e){return e.y}var fe=10,ce=Math.PI*(3-Math.sqrt(5));function ve(e){var t,r=1,n=.001,a=1-Math.pow(n,1/300),i=0,o=.6,s=(0,I.UI)(),l=re(f),u=U("tick","end");if(e==null)e=[];function f(){c();u.call("tick",t);if(r<n){l.stop();u.call("end",t)}}function c(n){var l,u=e.length,f;if(n===undefined)n=1;for(var c=0;c<n;++c){r+=(i-r)*a;s.each((function(e){e(r)}));for(l=0;l<u;++l){f=e[l];if(f.fx==null)f.x+=f.vx*=o;else f.x=f.fx,f.vx=0;if(f.fy==null)f.y+=f.vy*=o;else f.y=f.fy,f.vy=0}}return t}function v(){for(var t=0,r=e.length,n;t<r;++t){n=e[t],n.index=t;if(n.fx!=null)n.x=n.fx;if(n.fy!=null)n.y=n.fy;if(isNaN(n.x)||isNaN(n.y)){var a=fe*Math.sqrt(t),i=t*ce;n.x=a*Math.cos(i);n.y=a*Math.sin(i)}if(isNaN(n.vx)||isNaN(n.vy)){n.vx=n.vy=0}}}function h(t){if(t.initialize)t.initialize(e);return t}v();return t={tick:c,restart:function(){return l.restart(f),t},stop:function(){return l.stop(),t},nodes:function(r){return arguments.length?(e=r,v(),s.each(h),t):e},alpha:function(e){return arguments.length?(r=+e,t):r},alphaMin:function(e){return arguments.length?(n=+e,t):n},alphaDecay:function(e){return arguments.length?(a=+e,t):+a},alphaTarget:function(e){return arguments.length?(i=+e,t):i},velocityDecay:function(e){return arguments.length?(o=1-e,t):1-o},force:function(e,r){return arguments.length>1?(r==null?s.remove(e):s.set(e,h(r)),t):s.get(e)},find:function(t,r,n){var a=0,i=e.length,o,s,l,u,f;if(n==null)n=Infinity;else n*=n;for(a=0;a<i;++a){u=e[a];o=t-u.x;s=r-u.y;l=o*o+s*s;if(l<n)f=u,n=l}return f},on:function(e,r){return arguments.length>1?(u.on(e,r),t):u.on(e)}}}function he(){var e,t,r,n=a(-30),o,s=1,l=Infinity,u=.81;function f(n){var a,i=e.length,o=k(e,le,ue).visitAfter(v);for(r=n,a=0;a<i;++a)t=e[a],o.visit(h)}function c(){if(!e)return;var t,r=e.length,a;o=new Array(r);for(t=0;t<r;++t)a=e[t],o[a.index]=+n(a,t,e)}function v(e){var t=0,r,n,a=0,i,s,l;if(e.length){for(i=s=l=0;l<4;++l){if((r=e[l])&&(n=Math.abs(r.value))){t+=r.value,a+=n,i+=n*r.x,s+=n*r.y}}e.x=i/a;e.y=s/a}else{r=e;r.x=r.data.x;r.y=r.data.y;do{t+=o[r.data.index]}while(r=r.next)}e.value=t}function h(e,n,a,f){if(!e.value)return true;var c=e.x-t.x,v=e.y-t.y,h=f-n,p=c*c+v*v;if(h*h/u<p){if(p<l){if(c===0)c=i(),p+=c*c;if(v===0)v=i(),p+=v*v;if(p<s)p=Math.sqrt(s*p);t.vx+=c*e.value*r/p;t.vy+=v*e.value*r/p}return true}else if(e.length||p>=l)return;if(e.data!==t||e.next){if(c===0)c=i(),p+=c*c;if(v===0)v=i(),p+=v*v;if(p<s)p=Math.sqrt(s*p)}do{if(e.data!==t){h=o[e.data.index]*r/p;t.vx+=c*h;t.vy+=v*h}}while(e=e.next)}f.initialize=function(t){e=t;c()};f.strength=function(e){return arguments.length?(n=typeof e==="function"?e:a(+e),c(),f):n};f.distanceMin=function(e){return arguments.length?(s=e*e,f):Math.sqrt(s)};f.distanceMax=function(e){return arguments.length?(l=e*e,f):Math.sqrt(l)};f.theta=function(e){return arguments.length?(u=e*e,f):Math.sqrt(u)};return f}function pe(e,t,r){var n,i=a(.1),o,s;if(typeof e!=="function")e=a(+e);if(t==null)t=0;if(r==null)r=0;function l(e){for(var a=0,i=n.length;a<i;++a){var l=n[a],u=l.x-t||1e-6,f=l.y-r||1e-6,c=Math.sqrt(u*u+f*f),v=(s[a]-c)*o[a]*e/c;l.vx+=u*v;l.vy+=f*v}}function u(){if(!n)return;var t,r=n.length;o=new Array(r);s=new Array(r);for(t=0;t<r;++t){s[t]=+e(n[t],t,n);o[t]=isNaN(s[t])?0:+i(n[t],t,n)}}l.initialize=function(e){n=e,u()};l.strength=function(e){return arguments.length?(i=typeof e==="function"?e:a(+e),u(),l):i};l.radius=function(t){return arguments.length?(e=typeof t==="function"?t:a(+t),u(),l):e};l.x=function(e){return arguments.length?(t=+e,l):t};l.y=function(e){return arguments.length?(r=+e,l):r};return l}function de(e){var t=a(.1),r,n,i;if(typeof e!=="function")e=a(e==null?0:+e);function o(e){for(var t=0,a=r.length,o;t<a;++t){o=r[t],o.vx+=(i[t]-o.x)*n[t]*e}}function s(){if(!r)return;var a,o=r.length;n=new Array(o);i=new Array(o);for(a=0;a<o;++a){n[a]=isNaN(i[a]=+e(r[a],a,r))?0:+t(r[a],a,r)}}o.initialize=function(e){r=e;s()};o.strength=function(e){return arguments.length?(t=typeof e==="function"?e:a(+e),s(),o):t};o.x=function(t){return arguments.length?(e=typeof t==="function"?t:a(+t),s(),o):e};return o}function ge(e){var t=a(.1),r,n,i;if(typeof e!=="function")e=a(e==null?0:+e);function o(e){for(var t=0,a=r.length,o;t<a;++t){o=r[t],o.vy+=(i[t]-o.y)*n[t]*e}}function s(){if(!r)return;var a,o=r.length;n=new Array(o);i=new Array(o);for(a=0;a<o;++a){n[a]=isNaN(i[a]=+e(r[a],a,r))?0:+t(r[a],a,r)}}o.initialize=function(e){r=e;s()};o.strength=function(e){return arguments.length?(t=typeof e==="function"?e:a(+e),s(),o):t};o.y=function(t){return arguments.length?(e=typeof t==="function"?t:a(+t),s(),o):e};return o}},60721:function(e,t,r){"use strict";r.d(t,{WU:function(){return _},FF:function(){return x}});function n(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function a(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function i(e){return e=a(Math.abs(e)),e?e[1]:NaN}function o(e,t){return function(r,n){var a=r.length,i=[],o=0,s=e[0],l=0;while(a>0&&s>0){if(l+s+1>n)s=Math.max(1,n-l);i.push(r.substring(a-=s,a+s));if((l+=s+1)>n)break;s=e[o=(o+1)%e.length]}return i.reverse().join(t)}}function s(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}var l=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function u(e){if(!(t=l.exec(e)))throw new Error("invalid format: "+e);var t;return new f({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}u.prototype=f.prototype;function f(e){this.fill=e.fill===undefined?" ":e.fill+"";this.align=e.align===undefined?">":e.align+"";this.sign=e.sign===undefined?"-":e.sign+"";this.symbol=e.symbol===undefined?"":e.symbol+"";this.zero=!!e.zero;this.width=e.width===undefined?undefined:+e.width;this.comma=!!e.comma;this.precision=e.precision===undefined?undefined:+e.precision;this.trim=!!e.trim;this.type=e.type===undefined?"":e.type+""}f.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function c(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r){switch(e[r]){case".":n=a=r;break;case"0":if(n===0)n=r;a=r;break;default:if(!+e[r])break e;if(n>0)n=0;break}}return n>0?e.slice(0,n)+e.slice(a+1):e}var v;function h(e,t){var r=a(e,t);if(!r)return e+"";var n=r[0],i=r[1],o=i-(v=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return o===s?n:o>s?n+new Array(o-s+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+a(e,Math.max(0,t+o-1))[0]}function p(e,t){var r=a(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}var d={"%":function(e,t){return(e*100).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:n,e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return p(e*100,t)},r:p,s:h,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function g(e){return e}var y=Array.prototype.map,m=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function x(e){var t=e.grouping===undefined||e.thousands===undefined?g:o(y.call(e.grouping,Number),e.thousands+""),r=e.currency===undefined?"":e.currency[0]+"",n=e.currency===undefined?"":e.currency[1]+"",a=e.decimal===undefined?".":e.decimal+"",l=e.numerals===undefined?g:s(y.call(e.numerals,String)),f=e.percent===undefined?"%":e.percent+"",h=e.minus===undefined?"-":e.minus+"",p=e.nan===undefined?"NaN":e.nan+"";function x(e){e=u(e);var i=e.fill,o=e.align,s=e.sign,g=e.symbol,y=e.zero,x=e.width,b=e.comma,_=e.precision,w=e.trim,T=e.type;if(T==="n")b=true,T="g";else if(!d[T])_===undefined&&(_=12),w=true,T="g";if(y||i==="0"&&o==="=")y=true,i="0",o="=";var k=g==="$"?r:g==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",A=g==="$"?n:/[%p]/.test(T)?f:"";var M=d[T],S=/[defgprs%]/.test(T);_=_===undefined?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function E(e){var r=k,n=A,u,f,d;if(T==="c"){n=M(e)+n;e=""}else{e=+e;var g=e<0||1/e<0;e=isNaN(e)?p:M(Math.abs(e),_);if(w)e=c(e);if(g&&+e===0&&s!=="+")g=false;r=(g?s==="("?s:h:s==="-"||s==="("?"":s)+r;n=(T==="s"?m[8+v/3]:"")+n+(g&&s==="("?")":"");if(S){u=-1,f=e.length;while(++u<f){if(d=e.charCodeAt(u),48>d||d>57){n=(d===46?a+e.slice(u+1):e.slice(u))+n;e=e.slice(0,u);break}}}}if(b&&!y)e=t(e,Infinity);var E=r.length+e.length+n.length,L=E<x?new Array(x-E+1).join(i):"";if(b&&y)e=t(L+e,L.length?x-n.length:Infinity),L="";switch(o){case"<":e=r+e+n+L;break;case"=":e=r+L+e+n;break;case"^":e=L.slice(0,E=L.length>>1)+r+e+n+L.slice(E);break;default:e=L+r+e+n;break}return l(e)}E.toString=function(){return e+""};return E}function b(e,t){var r=x((e=u(e),e.type="f",e)),n=Math.max(-8,Math.min(8,Math.floor(i(t)/3)))*3,a=Math.pow(10,-n),o=m[8+n/3];return function(e){return r(a*e)+o}}return{format:x,formatPrefix:b}}var b;var _;var w;T({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function T(e){b=x(e);_=b.format;w=b.formatPrefix;return b}},65704:function(e,t,r){"use strict";r.r(t);r.d(t,{geoAiry:function(){return j},geoAiryRaw:function(){return N},geoAitoff:function(){return V},geoAitoffRaw:function(){return U},geoArmadillo:function(){return q},geoArmadilloRaw:function(){return H},geoAugust:function(){return Z},geoAugustRaw:function(){return G},geoBaker:function(){return J},geoBakerRaw:function(){return X},geoBerghaus:function(){return Q},geoBerghausRaw:function(){return $},geoBertin1953:function(){return se},geoBertin1953Raw:function(){return oe},geoBoggs:function(){return de},geoBoggsRaw:function(){return pe},geoBonne:function(){return be},geoBonneRaw:function(){return xe},geoBottomley:function(){return we},geoBottomleyRaw:function(){return _e},geoBromley:function(){return ke},geoBromleyRaw:function(){return Te},geoChamberlin:function(){return Oe},geoChamberlinAfrica:function(){return Pe},geoChamberlinRaw:function(){return Ce},geoCollignon:function(){return ze},geoCollignonRaw:function(){return De},geoCraig:function(){return Fe},geoCraigRaw:function(){return Re},geoCraster:function(){return je},geoCrasterRaw:function(){return Ne},geoCylindricalEqualArea:function(){return Ve},geoCylindricalEqualAreaRaw:function(){return Ue},geoCylindricalStereographic:function(){return qe},geoCylindricalStereographicRaw:function(){return He},geoEckert1:function(){return Ze},geoEckert1Raw:function(){return Ge},geoEckert2:function(){return We},geoEckert2Raw:function(){return Ye},geoEckert3:function(){return Je},geoEckert3Raw:function(){return Xe},geoEckert4:function(){return $e},geoEckert4Raw:function(){return Ke},geoEckert5:function(){return et},geoEckert5Raw:function(){return Qe},geoEckert6:function(){return rt},geoEckert6Raw:function(){return tt},geoEisenlohr:function(){return it},geoEisenlohrRaw:function(){return at},geoFahey:function(){return lt},geoFaheyRaw:function(){return st},geoFoucaut:function(){return ft},geoFoucautRaw:function(){return ut},geoFoucautSinusoidal:function(){return vt},geoFoucautSinusoidalRaw:function(){return ct},geoGilbert:function(){return yt},geoGingery:function(){return _t},geoGingeryRaw:function(){return mt},geoGinzburg4:function(){return kt},geoGinzburg4Raw:function(){return Tt},geoGinzburg5:function(){return Mt},geoGinzburg5Raw:function(){return At},geoGinzburg6:function(){return Et},geoGinzburg6Raw:function(){return St},geoGinzburg8:function(){return Ct},geoGinzburg8Raw:function(){return Lt},geoGinzburg9:function(){return Pt},geoGinzburg9Raw:function(){return It},geoGringorten:function(){return Ft},geoGringortenQuincuncial:function(){return Sa},geoGringortenRaw:function(){return Dt},geoGuyou:function(){return Gt},geoGuyouRaw:function(){return Vt},geoHammer:function(){return ne},geoHammerRaw:function(){return te},geoHammerRetroazimuthal:function(){return Xt},geoHammerRetroazimuthalRaw:function(){return Yt},geoHealpix:function(){return or},geoHealpixRaw:function(){return tr},geoHill:function(){return lr},geoHillRaw:function(){return sr},geoHomolosine:function(){return pr},geoHomolosineRaw:function(){return hr},geoHufnagel:function(){return gr},geoHufnagelRaw:function(){return dr},geoHyperelliptical:function(){return br},geoHyperellipticalRaw:function(){return xr},geoInterrupt:function(){return kr},geoInterruptedBoggs:function(){return Mr},geoInterruptedHomolosine:function(){return Er},geoInterruptedMollweide:function(){return Cr},geoInterruptedMollweideHemispheres:function(){return Pr},geoInterruptedQuarticAuthalic:function(){return An},geoInterruptedSinuMollweide:function(){return Dr},geoInterruptedSinusoidal:function(){return Rr},geoKavrayskiy7:function(){return Br},geoKavrayskiy7Raw:function(){return Fr},geoLagrange:function(){return jr},geoLagrangeRaw:function(){return Nr},geoLarrivee:function(){return Hr},geoLarriveeRaw:function(){return Vr},geoLaskowski:function(){return Gr},geoLaskowskiRaw:function(){return qr},geoLittrow:function(){return Yr},geoLittrowRaw:function(){return Zr},geoLoximuthal:function(){return Xr},geoLoximuthalRaw:function(){return Wr},geoMiller:function(){return Kr},geoMillerRaw:function(){return Jr},geoModifiedStereographic:function(){return fn},geoModifiedStereographicAlaska:function(){return an},geoModifiedStereographicGs48:function(){return on},geoModifiedStereographicGs50:function(){return sn},geoModifiedStereographicLee:function(){return un},geoModifiedStereographicMiller:function(){return ln},geoModifiedStereographicRaw:function(){return $r},geoMollweide:function(){return ce},geoMollweideRaw:function(){return fe},geoMtFlatPolarParabolic:function(){return pn},geoMtFlatPolarParabolicRaw:function(){return hn},geoMtFlatPolarQuartic:function(){return gn},geoMtFlatPolarQuarticRaw:function(){return dn},geoMtFlatPolarSinusoidal:function(){return mn},geoMtFlatPolarSinusoidalRaw:function(){return yn},geoNaturalEarth:function(){return xn.Z},geoNaturalEarth2:function(){return _n},geoNaturalEarth2Raw:function(){return bn},geoNaturalEarthRaw:function(){return xn.K},geoNellHammer:function(){return Tn},geoNellHammerRaw:function(){return wn},geoNicolosi:function(){return Sn},geoNicolosiRaw:function(){return Mn},geoPatterson:function(){return Bn},geoPattersonRaw:function(){return Fn},geoPeirceQuincuncial:function(){return Ea},geoPierceQuincuncial:function(){return Ea},geoPolyconic:function(){return jn},geoPolyconicRaw:function(){return Nn},geoPolyhedral:function(){return Xn},geoPolyhedralButterfly:function(){return aa},geoPolyhedralCollignon:function(){return sa},geoPolyhedralWaterman:function(){return la},geoProject:function(){return ga},geoQuantize:function(){return La},geoQuincuncial:function(){return Ma},geoRectangularPolyconic:function(){return Ia},geoRectangularPolyconicRaw:function(){return Ca},geoRobinson:function(){return Da},geoRobinsonRaw:function(){return Oa},geoSatellite:function(){return Fa},geoSatelliteRaw:function(){return Ra},geoSinuMollweide:function(){return vr},geoSinuMollweideRaw:function(){return cr},geoSinusoidal:function(){return me},geoSinusoidalRaw:function(){return ye},geoStitch:function(){return ni},geoTimes:function(){return ii},geoTimesRaw:function(){return ai},geoTwoPointAzimuthal:function(){return ui},geoTwoPointAzimuthalRaw:function(){return si},geoTwoPointAzimuthalUsa:function(){return li},geoTwoPointEquidistant:function(){return vi},geoTwoPointEquidistantRaw:function(){return fi},geoTwoPointEquidistantUsa:function(){return ci},geoVanDerGrinten:function(){return pi},geoVanDerGrinten2:function(){return gi},geoVanDerGrinten2Raw:function(){return di},geoVanDerGrinten3:function(){return mi},geoVanDerGrinten3Raw:function(){return yi},geoVanDerGrinten4:function(){return bi},geoVanDerGrinten4Raw:function(){return xi},geoVanDerGrintenRaw:function(){return hi},geoWagner:function(){return Ti},geoWagner4:function(){return Ei},geoWagner4Raw:function(){return Si},geoWagner6:function(){return Ci},geoWagner6Raw:function(){return Li},geoWagner7:function(){return ki},geoWagnerRaw:function(){return wi},geoWiechel:function(){return Pi},geoWiechelRaw:function(){return Ii},geoWinkel3:function(){return Di},geoWinkel3Raw:function(){return Oi}});var n=r(15002);var a=Math.abs;var i=Math.atan;var o=Math.atan2;var s=Math.ceil;var l=Math.cos;var u=Math.exp;var f=Math.floor;var c=Math.log;var v=Math.max;var h=Math.min;var p=Math.pow;var d=Math.round;var g=Math.sign||function(e){return e>0?1:e<0?-1:0};var y=Math.sin;var m=Math.tan;var x=1e-6;var b=1e-12;var _=Math.PI;var w=_/2;var T=_/4;var k=Math.SQRT1_2;var A=O(2);var M=O(_);var S=_*2;var E=180/_;var L=_/180;function C(e){return e?e/Math.sin(e):1}function I(e){return e>1?w:e<-1?-w:Math.asin(e)}function P(e){return e>1?0:e<-1?_:Math.acos(e)}function O(e){return e>0?Math.sqrt(e):0}function D(e){e=u(2*e);return(e-1)/(e+1)}function z(e){return(u(e)-u(-e))/2}function R(e){return(u(e)+u(-e))/2}function F(e){return c(e+O(e*e+1))}function B(e){return c(e+O(e*e-1))}function N(e){var t=m(e/2),r=2*c(l(e/2))/(t*t);function n(e,t){var n=l(e),a=l(t),i=y(t),o=a*n,s=-((1-o?c((1+o)/2)/(1-o):-.5)+r/(1+o));return[s*a*y(e),s*i]}n.invert=function(t,n){var i=O(t*t+n*n),s=-e/2,u=50,f;if(!i)return[0,0];do{var v=s/2,h=l(v),p=y(v),d=p/h,g=-c(a(h));s-=f=(2/d*g-r*d-i)/(-g/(p*p)+1-r/(2*h*h))*(h<0?.7:1)}while(a(f)>x&&--u>0);var m=y(s);return[o(t*m,i*l(s)),I(n*m/i)]};return n}function j(){var e=w,t=(0,n.r)(N),r=t(e);r.radius=function(r){return arguments.length?t(e=r*L):e*E};return r.scale(179.976).clipAngle(147)}function U(e,t){var r=l(t),n=C(P(r*l(e/=2)));return[2*r*y(e)*n,y(t)*n]}U.invert=function(e,t){if(e*e+4*t*t>_*_+x)return;var r=e,n=t,i=25;do{var o=y(r),s=y(r/2),u=l(r/2),f=y(n),c=l(n),v=y(2*n),h=f*f,p=c*c,d=s*s,g=1-p*u*u,m=g?P(c*u)*O(b=1/g):b=0,b,w=2*m*c*s-e,T=m*f-t,k=b*(p*d+m*c*u*h),A=b*(.5*o*v-m*2*f*s),M=b*.25*(v*s-m*f*p*o),S=b*(h*u+m*d*c),E=A*M-S*k;if(!E)break;var L=(T*A-w*S)/E,C=(w*M-T*k)/E;r-=L,n-=C}while((a(L)>x||a(C)>x)&&--i>0);return[r,n]};function V(){return(0,n.Z)(U).scale(152.63)}function H(e){var t=y(e),r=l(e),n=e>=0?1:-1,i=m(n*e),s=(1+t-r)/2;function u(e,a){var u=l(a),f=l(e/=2);return[(1+u)*y(e),(n*a>-o(f,i)-.001?0:-n*10)+s+y(a)*r-(1+u)*t*f]}u.invert=function(e,u){var f=0,c=0,v=50;do{var h=l(f),p=y(f),d=l(c),g=y(c),m=1+d,b=m*p-e,_=s+g*r-m*t*h-u,w=m*h/2,T=-p*g,k=t*m*p/2,A=r*d+t*h*g,M=T*k-A*w,S=(_*T-b*A)/M/2,E=(b*k-_*w)/M;if(a(E)>2)E/=2;f-=S,c-=E}while((a(S)>x||a(E)>x)&&--v>0);return n*c>-o(l(f),i)-.001?[f*2,c]:null};return u}function q(){var e=20*L,t=e>=0?1:-1,r=m(t*e),a=(0,n.r)(H),i=a(e),s=i.stream;i.parallel=function(n){if(!arguments.length)return e*E;r=m((t=(e=n*L)>=0?1:-1)*e);return a(e)};i.stream=function(n){var a=i.rotate(),u=s(n),f=(i.rotate([0,0]),s(n)),c=i.precision();i.rotate(a);u.sphere=function(){f.polygonStart(),f.lineStart();for(var n=t*-180;t*n<180;n+=t*90)f.point(n,t*90);if(e)while(t*(n-=3*t*c)>=-180){f.point(n,t*-o(l(n*L/2),r)*E)}f.lineEnd(),f.polygonEnd()};return u};return i.scale(218.695).center([0,28.0974])}function G(e,t){var r=m(t/2),n=O(1-r*r),a=1+n*l(e/=2),i=y(e)*n/a,o=r/a,s=i*i,u=o*o;return[4/3*i*(3+s-3*u),4/3*o*(3+3*s-u)]}G.invert=function(e,t){e*=3/8,t*=3/8;if(!e&&a(t)>1)return null;var r=e*e,n=t*t,i=1+r+n,s=O((i-O(i*i-4*t*t))/2),u=I(s)/3,f=s?B(a(t/s))/3:F(a(e))/3,c=l(u),v=R(f),h=v*v-c*c;return[g(e)*2*o(z(f)*c,.25-h),g(t)*2*o(v*y(u),.25+h)]};function Z(){return(0,n.Z)(G).scale(66.1603)}var Y=O(8),W=c(1+A);function X(e,t){var r=a(t);return r<T?[e,c(m(T+t/2))]:[e*l(r)*(2*A-1/y(r)),g(t)*(2*A*(r-T)-c(m(r/2)))]}X.invert=function(e,t){if((s=a(t))<W)return[e,2*i(u(t))-w];var r=T,n=25,o,s;do{var f=l(r/2),v=m(r/2);r-=o=(Y*(r-T)-c(v)-s)/(Y-f*f/(2*v))}while(a(o)>b&&--n>0);return[e/(l(r)*(Y-1/y(r))),g(t)*r]};function J(){return(0,n.Z)(X).scale(112.314)}var K=r(17889);function $(e){var t=2*_/e;function r(e,r){var n=(0,K.N)(e,r);if(a(e)>w){var i=o(n[1],n[0]),s=O(n[0]*n[0]+n[1]*n[1]),u=t*d((i-w)/t)+w,f=o(y(i-=u),2-l(i));i=u+I(_/s*y(f))-f;n[0]=s*l(i);n[1]=s*y(i)}return n}r.invert=function(e,r){var n=O(e*e+r*r);if(n>w){var a=o(r,e),s=t*d((a-w)/t)+w,u=a>s?-1:1,f=n*l(s-a),c=1/m(u*P((f-_)/O(_*(_-2*f)+n*n)));a=s+2*i((c+u*O(c*c-3))/3);e=n*l(a),r=n*y(a)}return K.N.invert(e,r)};return r}function Q(){var e=5,t=(0,n.r)($),r=t(e),a=r.stream,i=.01,s=-l(i*L),u=y(i*L);r.lobes=function(r){return arguments.length?t(e=+r):e};r.stream=function(t){var n=r.rotate(),f=a(t),c=(r.rotate([0,0]),a(t));r.rotate(n);f.sphere=function(){c.polygonStart(),c.lineStart();for(var t=0,r=360/e,n=2*_/e,a=90-180/e,f=w;t<e;++t,a-=r,f-=n){c.point(o(u*l(f),s)*E,I(u*y(f))*E);if(a<-90){c.point(-90,-180-a-i);c.point(-90,-180-a+i)}else{c.point(90,a+i);c.point(90,a-i)}}c.lineEnd(),c.polygonEnd()};return f};return r.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)}var ee=r(12956);function te(e,t){if(arguments.length<2)t=e;if(t===1)return ee.l;if(t===Infinity)return re;function r(r,n){var a=(0,ee.l)(r/t,n);a[0]*=e;return a}r.invert=function(r,n){var a=ee.l.invert(r/e,n);a[0]*=t;return a};return r}function re(e,t){return[e*l(t)/l(t/=2),2*y(t)]}re.invert=function(e,t){var r=2*I(t/2);return[e*l(r/2)/l(r),r]};function ne(){var e=2,t=(0,n.r)(te),r=t(e);r.coefficient=function(r){if(!arguments.length)return e;return t(e=+r)};return r.scale(169.529)}function ae(e,t,r){var n=100,i,o,s;r=r===undefined?0:+r;t=+t;do{o=e(r);s=e(r+x);if(o===s)s=o+x;r-=i=-1*x*(o-t)/(o-s)}while(n-- >0&&a(i)>x);return n<0?NaN:r}function ie(e,t,r){if(t===undefined)t=40;if(r===undefined)r=b;return function(n,i,o,s){var l,u,f;o=o===undefined?0:+o;s=s===undefined?0:+s;for(var c=0;c<t;c++){var v=e(o,s),h=v[0]-n,p=v[1]-i;if(a(h)<r&&a(p)<r)break;var d=h*h+p*p;if(d>l){o-=u/=2;s-=f/=2;continue}l=d;var g=(o>0?-1:1)*r,y=(s>0?-1:1)*r,m=e(o+g,s),x=e(o,s+y),b=(m[0]-v[0])/g,_=(m[1]-v[1])/g,w=(x[0]-v[0])/y,T=(x[1]-v[1])/y,k=T*b-_*w,A=(a(k)<.5?.5:1)/k;u=(p*w-h*T)*A;f=(h*_-p*b)*A;o+=u;s+=f;if(a(u)<r&&a(f)<r)break}return[o,s]}}function oe(){var e=te(1.68,2),t=1.4,r=12;function n(n,a){if(n+a<-t){var i=(n-a+1.6)*(n+a+t)/8;n+=i;a-=.8*i*y(a+_/2)}var o=e(n,a);var s=(1-l(n*a))/r;if(o[1]<0){o[0]*=1+s}if(o[1]>0){o[1]*=1+s/1.5*o[0]*o[0]}return o}n.invert=ie(n);return n}function se(){return(0,n.Z)(oe()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function le(e,t){var r=e*y(t),n=30,i;do{t-=i=(t+y(t)-r)/(1+l(t))}while(a(i)>x&&--n>0);return t/2}function ue(e,t,r){function n(n,a){return[e*n*l(a=le(r,a)),t*y(a)]}n.invert=function(n,a){return a=I(a/t),[n/(e*l(a)),I((2*a+y(2*a))/r)]};return n}var fe=ue(A/w,A,_);function ce(){return(0,n.Z)(fe).scale(169.529)}var ve=2.00276,he=1.11072;function pe(e,t){var r=le(_,t);return[ve*e/(1/l(t)+he/l(r)),(t+A*y(r))/ve]}pe.invert=function(e,t){var r=ve*t,n=t<0?-T:T,i=25,o,s;do{s=r-A*y(n);n-=o=(y(2*n)+2*n-_*y(s))/(2*l(2*n)+2+_*l(s)*A*l(n))}while(a(o)>x&&--i>0);s=r-A*y(n);return[e*(1/l(s)+he/l(n))/ve,s]};function de(){return(0,n.Z)(pe).scale(160.857)}function ge(e){var t=0,r=(0,n.r)(e),a=r(t);a.parallel=function(e){return arguments.length?r(t=e*L):t*E};return a}function ye(e,t){return[e*l(t),t]}ye.invert=function(e,t){return[e/l(t),t]};function me(){return(0,n.Z)(ye).scale(152.63)}function xe(e){if(!e)return ye;var t=1/m(e);function r(r,n){var a=t+e-n,i=a?r*l(n)/a:a;return[a*y(i),t-a*l(i)]}r.invert=function(r,n){var a=O(r*r+(n=t-n)*n),i=t+e-a;return[a/l(i)*o(r,n),i]};return r}function be(){return ge(xe).scale(123.082).center([0,26.1441]).parallel(45)}function _e(e){function t(t,r){var n=w-r,a=n?t*e*y(n)/n:n;return[n*y(a)/e,w-n*l(a)]}t.invert=function(t,r){var n=t*e,a=w-r,i=O(n*n+a*a),s=o(n,a);return[(i?i/y(i):1)*s/e,w-i]};return t}function we(){var e=.5,t=(0,n.r)(_e),r=t(e);r.fraction=function(r){return arguments.length?t(e=+r):e};return r.scale(158.837)}var Te=ue(1,4/_,_);function ke(){return(0,n.Z)(Te).scale(152.63)}var Ae=r(66624);var Me=r(49386);function Se(e,t,r,n,i,s){var u=l(s),f;if(a(e)>1||a(s)>1){f=P(r*i+t*n*u)}else{var c=y(e/2),v=y(s/2);f=2*I(O(c*c+t*n*v*v))}return a(f)>x?[f,o(n*y(s),t*i-r*n*u)]:[0,0]}function Ee(e,t,r){return P((e*e+t*t-r*r)/(2*e*t))}function Le(e){return e-2*_*f((e+_)/(2*_))}function Ce(e,t,r){var n=[[e[0],e[1],y(e[1]),l(e[1])],[t[0],t[1],y(t[1]),l(t[1])],[r[0],r[1],y(r[1]),l(r[1])]];for(var a=n[2],i,o=0;o<3;++o,a=i){i=n[o];a.v=Se(i[1]-a[1],a[3],a[2],i[3],i[2],i[0]-a[0]);a.point=[0,0]}var s=Ee(n[0].v[0],n[2].v[0],n[1].v[0]),u=Ee(n[0].v[0],n[1].v[0],n[2].v[0]),f=_-s;n[2].point[1]=0;n[0].point[0]=-(n[1].point[0]=n[0].v[0]/2);var c=[n[2].point[0]=n[0].point[0]+n[2].v[0]*l(s),2*(n[0].point[1]=n[1].point[1]=n[2].v[0]*y(s))];function v(e,t){var r=y(t),a=l(t),i=new Array(3),o;for(o=0;o<3;++o){var s=n[o];i[o]=Se(t-s[1],s[3],s[2],a,r,e-s[0]);if(!i[o][0])return s.point;i[o][1]=Le(i[o][1]-s.v[1])}var v=c.slice();for(o=0;o<3;++o){var h=o==2?0:o+1;var p=Ee(n[o].v[0],i[o][0],i[h][0]);if(i[o][1]<0)p=-p;if(!o){v[0]+=i[o][0]*l(p);v[1]-=i[o][0]*y(p)}else if(o==1){p=u-p;v[0]-=i[o][0]*l(p);v[1]-=i[o][0]*y(p)}else{p=f-p;v[0]+=i[o][0]*l(p);v[1]+=i[o][0]*y(p)}}v[0]/=3,v[1]/=3;return v}return v}function Ie(e){return e[0]*=L,e[1]*=L,e}function Pe(){return Oe([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Oe(e,t,r){var a=(0,Ae.Z)({type:"MultiPoint",coordinates:[e,t,r]}),i=[-a[0],-a[1]],o=(0,Me.Z)(i),s=Ce(Ie(o(e)),Ie(o(t)),Ie(o(r)));s.invert=ie(s);var l=(0,n.Z)(s).rotate(i),u=l.center;delete l.rotate;l.center=function(e){return arguments.length?u(o(e)):o.invert(u())};return l.clipAngle(90)}function De(e,t){var r=O(1-y(t));return[2/M*e*r,M*(1-r)]}De.invert=function(e,t){var r=(r=t/M-1)*r;return[r>0?e*O(_/r)/2:0,I(1-r)]};function ze(){return(0,n.Z)(De).scale(95.6464).center([0,30])}function Re(e){var t=m(e);function r(e,r){return[e,(e?e/y(e):1)*(y(r)*l(e)-t*l(r))]}r.invert=t?function(e,r){if(e)r*=y(e)/e;var n=l(e);return[e,2*o(O(n*n+t*t-r*r)-n,t-r)]}:function(e,t){return[e,I(e?t*m(e)/e:t)]};return r}function Fe(){return ge(Re).scale(249.828).clipAngle(90)}var Be=O(3);function Ne(e,t){return[Be*e*(2*l(2*t/3)-1)/M,Be*M*y(t/3)]}Ne.invert=function(e,t){var r=3*I(t/(Be*M));return[M*e/(Be*(2*l(2*r/3)-1)),r]};function je(){return(0,n.Z)(Ne).scale(156.19)}function Ue(e){var t=l(e);function r(e,r){return[e*t,y(r)/t]}r.invert=function(e,r){return[e/t,I(r*t)]};return r}function Ve(){return ge(Ue).parallel(38.58).scale(195.044)}function He(e){var t=l(e);function r(e,r){return[e*t,(1+t)*m(r/2)]}r.invert=function(e,r){return[e/t,i(r/(1+t))*2]};return r}function qe(){return ge(He).scale(124.75)}function Ge(e,t){var r=O(8/(3*_));return[r*e*(1-a(t)/_),r*t]}Ge.invert=function(e,t){var r=O(8/(3*_)),n=t/r;return[e/(r*(1-a(n)/_)),n]};function Ze(){return(0,n.Z)(Ge).scale(165.664)}function Ye(e,t){var r=O(4-3*y(a(t)));return[2/O(6*_)*e*r,g(t)*O(2*_/3)*(2-r)]}Ye.invert=function(e,t){var r=2-a(t)/O(2*_/3);return[e*O(6*_)/(2*r),g(t)*I((4-r*r)/3)]};function We(){return(0,n.Z)(Ye).scale(165.664)}function Xe(e,t){var r=O(_*(4+_));return[2/r*e*(1+O(1-4*t*t/(_*_))),4/r*t]}Xe.invert=function(e,t){var r=O(_*(4+_))/2;return[e*r/(1+O(1-t*t*(4+_)/(4*_))),t*r/2]};function Je(){return(0,n.Z)(Xe).scale(180.739)}function Ke(e,t){var r=(2+w)*y(t);t/=2;for(var n=0,i=Infinity;n<10&&a(i)>x;n++){var o=l(t);t-=i=(t+y(t)*(o+2)-r)/(2*o*(1+o))}return[2/O(_*(4+_))*e*(1+l(t)),2*O(_/(4+_))*y(t)]}Ke.invert=function(e,t){var r=t*O((4+_)/_)/2,n=I(r),a=l(n);return[e/(2/O(_*(4+_))*(1+a)),I((n+r*(a+2))/(2+w))]};function $e(){return(0,n.Z)(Ke).scale(180.739)}function Qe(e,t){return[e*(1+l(t))/O(2+_),2*t/O(2+_)]}Qe.invert=function(e,t){var r=O(2+_),n=t*r/2;return[r*e/(1+l(n)),n]};function et(){return(0,n.Z)(Qe).scale(173.044)}function tt(e,t){var r=(1+w)*y(t);for(var n=0,i=Infinity;n<10&&a(i)>x;n++){t-=i=(t+y(t)-r)/(1+l(t))}r=O(2+_);return[e*(1+l(t))/r,2*t/r]}tt.invert=function(e,t){var r=1+w,n=O(r/2);return[e*2*n/(1+l(t*=n)),I((t+y(t))/r)]};function rt(){return(0,n.Z)(tt).scale(173.044)}var nt=3+2*A;function at(e,t){var r=y(e/=2),n=l(e),a=O(l(t)),o=l(t/=2),s=y(t)/(o+A*n*a),u=O(2/(1+s*s)),f=O((A*o+(n+r)*a)/(A*o+(n-r)*a));return[nt*(u*(f-1/f)-2*c(f)),nt*(u*s*(f+1/f)-2*i(s))]}at.invert=function(e,t){if(!(s=G.invert(e/1.2,t*1.065)))return null;var r=s[0],n=s[1],o=20,s;e/=nt,t/=nt;do{var u=r/2,f=n/2,p=y(u),d=l(u),g=y(f),m=l(f),b=l(n),_=O(b),T=g/(m+A*d*_),M=T*T,S=O(2/(1+M)),E=A*m+(d+p)*_,L=A*m+(d-p)*_,C=E/L,I=O(C),P=I-1/I,D=I+1/I,z=S*P-2*c(I)-e,R=S*T*D-2*i(T)-t,F=g&&k*_*p*M/g,B=(A*d*m+_)/(2*(m+A*d*_)*(m+A*d*_)*_),N=-.5*T*S*S*S,j=N*F,U=N*B,V=(V=2*m+A*_*(d-p))*V*I,H=(A*d*m*_+b)/V,q=-(A*p*g)/(_*V),Z=P*j-2*H/I+S*(H+H/C),Y=P*U-2*q/I+S*(q+q/C),W=T*D*j-2*F/(1+M)+S*D*F+S*T*(H-H/C),X=T*D*U-2*B/(1+M)+S*D*B+S*T*(q-q/C),J=Y*W-X*Z;if(!J)break;var K=(R*Y-z*X)/J,$=(z*W-R*Z)/J;r-=K;n=v(-w,h(w,n-$))}while((a(K)>x||a($)>x)&&--o>0);return a(a(n)-w)<x?[0,n]:o&&[r,n]};function it(){return(0,n.Z)(at).scale(62.5271)}var ot=l(35*L);function st(e,t){var r=m(t/2);return[e*ot*O(1-r*r),(1+ot)*r]}st.invert=function(e,t){var r=t/(1+ot);return[e&&e/(ot*O(1-r*r)),2*i(r)]};function lt(){return(0,n.Z)(st).scale(137.152)}function ut(e,t){var r=t/2,n=l(r);return[2*e/M*l(t)*n*n,M*m(r)]}ut.invert=function(e,t){var r=i(t/M),n=l(r),a=2*r;return[e*M/2/(l(a)*n*n),a]};function ft(){return(0,n.Z)(ut).scale(135.264)}function ct(e){var t=1-e,r=i(_,0)[0]-i(-_,0)[0],n=i(0,w)[1]-i(0,-w)[1],a=O(2*n/r);function i(r,n){var a=l(n),i=y(n);return[a/(t+e*a)*r,t*n+e*i]}function o(e,t){var r=i(e,t);return[r[0]*a,r[1]/a]}function s(e){return o(0,e)[1]}o.invert=function(r,n){var i=ae(s,n),o=r/a*(e+t/l(i));return[o,i]};return o}function vt(){var e=.5,t=(0,n.r)(ct),r=t(e);r.alpha=function(r){return arguments.length?t(e=+r):e};return r.scale(168.725)}var ht=r(57962);var pt=r(97492);function dt(e){return[e[0]/2,I(m(e[1]/2*L))*E]}function gt(e){return[e[0]*2,2*i(y(e[1]*L))*E]}function yt(e){if(e==null)e=ht.Z;var t=e(),r=(0,pt.Z)().scale(E).precision(0).clipAngle(null).translate([0,0]);function n(e){return t(dt(e))}if(t.invert)n.invert=function(e){return gt(t.invert(e))};n.stream=function(e){var n=t.stream(e),a=r.stream({point:function(e,t){n.point(e/2,I(m(-t/2*L))*E)},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}});a.sphere=n.sphere;return a};function a(e){n[e]=function(){return arguments.length?(t[e].apply(t,arguments),n):t[e]()}}n.rotate=function(e){return arguments.length?(r.rotate(e),n):r.rotate()};n.center=function(e){return arguments.length?(t.center(dt(e)),n):gt(t.center())};a("angle");a("clipAngle");a("clipExtent");a("fitExtent");a("fitHeight");a("fitSize");a("fitWidth");a("scale");a("translate");a("precision");return n.scale(249.5)}function mt(e,t){var r=2*_/t,n=e*e;function i(t,i){var s=(0,K.N)(t,i),u=s[0],f=s[1],c=u*u+f*f;if(c>n){var v=O(c),h=o(f,u),p=r*d(h/r),g=h-p,m=e*l(g),b=(e*y(g)-g*y(m))/(w-m),T=xt(g,b),k=(_-e)/bt(T,m,_);u=v;var A=50,M;do{u-=M=(e+bt(T,m,u)*k-v)/(T(u)*k)}while(a(M)>x&&--A>0);f=g*y(u);if(u<w)f-=b*(u-w);var S=y(p),E=l(p);s[0]=u*E-f*S;s[1]=u*S+f*E}return s}i.invert=function(t,i){var s=t*t+i*i;if(s>n){var u=O(s),f=o(i,t),c=r*d(f/r),v=f-c;t=u*l(v);i=u*y(v);var h=t-w,p=y(t),g=i/p,m=t<w?Infinity:0,x=10;while(true){var T=e*y(g),k=e*l(g),A=y(k),M=w-k,S=(T-g*A)/M,E=xt(g,S);if(a(m)<b||!--x)break;g-=m=(g*p-S*h-i)/(p-h*2*(M*(k+g*T*l(k)-A)-T*(T-g*A))/(M*M))}u=e+bt(E,k,t)*(_-e)/bt(E,k,_);f=c+g;t=u*l(f);i=u*y(f)}return K.N.invert(t,i)};return i}function xt(e,t){return function(r){var n=e*l(r);if(r<w)n-=t;return O(1+n*n)}}function bt(e,t,r){var n=50,a=(r-t)/n,i=e(t)+e(r);for(var o=1,s=t;o<n;++o)i+=2*e(s+=a);return i*.5*a}function _t(){var e=6,t=30*L,r=l(t),a=y(t),i=(0,n.r)(mt),s=i(t,e),u=s.stream,f=.01,c=-l(f*L),v=y(f*L);s.radius=function(n){if(!arguments.length)return t*E;r=l(t=n*L);a=y(t);return i(t,e)};s.lobes=function(r){if(!arguments.length)return e;return i(t,e=+r)};s.stream=function(t){var n=s.rotate(),i=u(t),f=(s.rotate([0,0]),u(t));s.rotate(n);i.sphere=function(){f.polygonStart(),f.lineStart();for(var t=0,n=2*_/e,i=0;t<e;++t,i-=n){f.point(o(v*l(i),c)*E,I(v*y(i))*E);f.point(o(a*l(i-n/2),r)*E,I(a*y(i-n/2))*E)}f.lineEnd(),f.polygonEnd()};return i};return s.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)}function wt(e,t,r,n,i,o,s,u){if(arguments.length<8)u=0;function f(a,f){if(!f)return[e*a/_,0];var c=f*f,v=e+c*(t+c*(r+c*n)),h=f*(i-1+c*(o-u+c*s)),p=(v*v+h*h)/(2*h),d=a*I(v/p)/_;return[p*y(d),f*(1+c*u)+p*(1-l(d))]}f.invert=function(f,c){var v=_*f/e,h=c,p,d,g=50;do{var m=h*h,b=e+m*(t+m*(r+m*n)),w=h*(i-1+m*(o-u+m*s)),T=b*b+w*w,k=2*w,A=T/k,M=A*A,S=I(b/A)/_,E=v*S,L=b*b,C=(2*t+m*(4*r+m*6*n))*h,P=i+m*(3*o+m*5*s),D=2*(b*C+w*(P-1)),z=2*(P-1),R=(D*k-T*z)/(k*k),F=l(E),B=y(E),N=A*F,j=A*B,U=v/_*(1/O(1-L/M))*(C*A-b*R)/M,V=j-f,H=h*(1+m*u)+A-N-c,q=R*B+N*U,G=N*S,Z=1+R-(R*F-j*U),Y=j*S,W=q*Y-Z*G;if(!W)break;v-=p=(H*q-V*Z)/W;h-=d=(V*Y-H*G)/W}while((a(p)>x||a(d)>x)&&--g>0);return[v,h]};return f}var Tt=wt(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function kt(){return(0,n.Z)(Tt).scale(149.995)}var At=wt(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Mt(){return(0,n.Z)(At).scale(153.93)}var St=wt(5/6*_,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Et(){return(0,n.Z)(St).scale(130.945)}function Lt(e,t){var r=e*e,n=t*t;return[e*(1-.162388*n)*(.87-952426e-9*r*r),t*(1+n/12)]}Lt.invert=function(e,t){var r=e,n=t,i=50,o;do{var s=n*n;n-=o=(n*(1+s/12)-t)/(1+s/4)}while(a(o)>x&&--i>0);i=50;e/=1-.162388*s;do{var l=(l=r*r)*l;r-=o=(r*(.87-952426e-9*l)-e)/(.87-.00476213*l)}while(a(o)>x&&--i>0);return[r,n]};function Ct(){return(0,n.Z)(Lt).scale(131.747)}var It=wt(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Pt(){return(0,n.Z)(It).scale(131.087)}function Ot(e){var t=e(w,0)[0]-e(-w,0)[0];function r(r,n){var a=r>0?-.5:.5,i=e(r+a*_,n);i[0]-=a*t;return i}if(e.invert)r.invert=function(r,n){var a=r>0?-.5:.5,i=e.invert(r+a*t,n),o=i[0]-a*_;if(o<-_)o+=2*_;else if(o>_)o-=2*_;i[0]=o;return i};return r}function Dt(e,t){var r=g(e),n=g(t),i=l(t),s=l(e)*i,u=y(e)*i,f=y(n*t);e=a(o(u,f));t=I(s);if(a(e-w)>x)e%=w;var c=zt(e>_/4?w-e:e,t);if(e>_/4)f=c[0],c[0]=-c[1],c[1]=-f;return c[0]*=r,c[1]*=-n,c}Dt.invert=function(e,t){if(a(e)>1)e=g(e)*2-e;if(a(t)>1)t=g(t)*2-t;var r=g(e),n=g(t),i=-r*e,s=-n*t,u=s/i<1,f=Rt(u?s:i,u?i:s),c=f[0],v=f[1],h=l(v);if(u)c=-w-c;return[r*(o(y(c)*h,-y(v))+_),n*I(l(c)*h)]};function zt(e,t){if(t===w)return[0,0];var r=y(t),n=r*r,i=n*n,o=1+i,s=1+3*i,u=1-i,f=I(1/O(o)),c=u+n*o*f,v=(1-r)/c,h=O(v),p=v*o,d=O(p),g=h*u,m,b;if(e===0)return[0,-(g+n*d)];var T=l(t),k=1/T,A=2*r*T,M=(-3*n+f*s)*A,S=(-c*T-(1-r)*M)/(c*c),E=.5*S/h,L=u*E-2*n*h*A,C=n*o*S+v*s*A,P=-k*A,D=-k*C,z=-2*k*L,R=4*e/_,F;if(e>.222*_||t<_/4&&e>.175*_){m=(g+n*O(p*(1+i)-g*g))/(1+i);if(e>_/4)return[m,m];var B=m,N=.5*m;m=.5*(N+B),b=50;do{var j=O(p-m*m),U=m*(z+P*j)+D*I(m/d)-R;if(!U)break;if(U<0)N=m;else B=m;m=.5*(N+B)}while(a(B-N)>x&&--b>0)}else{m=x,b=25;do{var V=m*m,H=O(p-V),q=z+P*H,G=m*q+D*I(m/d)-R,Z=q+(D-P*V)/H;m-=F=H?G/Z:0}while(a(F)>x&&--b>0)}return[m,-g-n*O(p-m*m)]}function Rt(e,t){var r=0,n=1,i=.5,o=50;while(true){var s=i*i,u=O(i),f=I(1/O(1+s)),c=1-s+i*(1+s)*f,v=(1-u)/c,h=O(v),p=v*(1+s),d=h*(1-s),g=p-e*e,y=O(g),m=t+d+i*y;if(a(n-r)<b||--o===0||m===0)break;if(m>0)r=i;else n=i;i=.5*(r+n)}if(!o)return null;var x=I(u),w=l(x),T=1/w,k=2*u*w,A=(-3*i+f*(1+3*s))*k,M=(-c*w-(1-u)*A)/(c*c),S=.5*M/h,E=(1-s)*S-2*i*h*k,L=-2*T*E,C=-T*k,P=-T*(i*(1+s)*M+v*(1+3*s)*k);return[_/4*(e*(L+C*y)+P*I(e/O(p))),x]}function Ft(){return(0,n.Z)(Ot(Dt)).scale(239.75)}function Bt(e,t,r){var n,a,i;if(!e){a=Nt(t,1-r);return[[0,a[0]/a[1]],[1/a[1],0],[a[2]/a[1],0]]}n=Nt(e,r);if(!t)return[[n[0],0],[n[1],0],[n[2],0]];a=Nt(t,1-r);i=a[1]*a[1]+r*n[0]*n[0]*a[0]*a[0];return[[n[0]*a[2]/i,n[1]*n[2]*a[0]*a[1]/i],[n[1]*a[1]/i,-n[0]*n[2]*a[0]*a[2]/i],[n[2]*a[1]*a[2]/i,-r*n[0]*n[1]*a[0]/i]]}function Nt(e,t){var r,n,o,s,f;if(t<x){s=y(e);n=l(e);r=t*(e-s*n)/4;return[s-r*n,n+r*s,1-t*s*s/2,e-r]}if(t>=1-x){r=(1-t)/4;n=R(e);s=D(e);o=1/n;f=n*z(e);return[s+r*(f-e)/(n*n),o-r*s*o*(f-e),o+r*s*o*(f+e),2*i(u(e))-w+r*(f-e)/n]}var c=[1,0,0,0,0,0,0,0,0],v=[O(t),0,0,0,0,0,0,0,0],h=0;n=O(1-t);f=1;while(a(v[h]/c[h])>x&&h<8){r=c[h++];v[h]=(r-n)/2;c[h]=(r+n)/2;n=O(r*n);f*=2}o=f*c[h]*e;do{s=v[h]*y(n=o)/c[h];o=(I(s)+o)/2}while(--h);return[y(o),s=l(o),s/l(o-n),o]}function jt(e,t,r){var n=a(e),o=a(t),s=z(o);if(n){var l=1/y(n),u=1/(m(n)*m(n)),f=-(u+r*(s*s*l*l)-1+r),c=(r-1)*u,v=(-f+O(f*f-4*c))/2;return[Ut(i(1/O(v)),r)*g(e),Ut(i(O((v/u-1)/r)),1-r)*g(t)]}return[0,Ut(i(s),1-r)*g(t)]}function Ut(e,t){if(!t)return e;if(t===1)return c(m(e/2+T));var r=1,n=O(1-t),o=O(t);for(var s=0;a(o)>x;s++){if(e%_){var l=i(n*m(e)/r);if(l<0)l+=_;e+=l+~~(e/_)*_}else e+=e;o=(r+n)/2;n=O(r*n);o=((r=o)-n)/2}return e/(p(2,s)*r)}function Vt(e,t){var r=(A-1)/(A+1),n=O(1-r*r),i=Ut(w,n*n),o=-1,s=c(m(_/4+a(t)/2)),f=u(o*s)/O(r),v=Ht(f*l(o*e),f*y(o*e)),h=jt(v[0],v[1],n*n);return[-h[1],(t>=0?1:-1)*(.5*i-h[0])]}function Ht(e,t){var r=e*e,n=t+1,a=1-r-t*t;return[.5*((e>=0?w:-w)-o(a,2*e)),-.25*c(a*a+4*r)+.5*c(n*n+r)]}function qt(e,t){var r=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/r,(e[1]*t[0]-e[0]*t[1])/r]}Vt.invert=function(e,t){var r=(A-1)/(A+1),n=O(1-r*r),a=Ut(w,n*n),s=-1,l=Bt(.5*a-t,-e,n*n),f=qt(l[0],l[1]),v=o(f[1],f[0])/s;return[v,2*i(u(.5/s*c(r*f[0]*f[0]+r*f[1]*f[1])))-w]};function Gt(){return(0,n.Z)(Ot(Vt)).scale(151.496)}var Zt=r(7613);function Yt(e){var t=y(e),r=l(e),n=Wt(e);n.invert=Wt(-e);function i(e,i){var o=n(e,i);e=o[0],i=o[1];var s=y(i),u=l(i),f=l(e),c=P(t*s+r*u*f),v=y(c),h=a(v)>x?c/v:1;return[h*r*y(e),(a(e)>w?h:-h)*(t*u-r*s*f)]}i.invert=function(e,r){var a=O(e*e+r*r),i=-y(a),s=l(a),u=a*s,f=-r*i,c=a*t,v=O(u*u+f*f-c*c),h=o(u*c+f*v,f*c-u*v),p=(a>w?-1:1)*o(e*i,a*l(h)*s+r*y(h)*i);return n.invert(p,h)};return i}function Wt(e){var t=y(e),r=l(e);return function(e,n){var a=l(n),i=l(e)*a,s=y(e)*a,u=y(n);return[o(s,i*r-u*t),I(u*r+i*t)]}}function Xt(){var e=0,t=(0,n.r)(Yt),r=t(e),a=r.rotate,i=r.stream,o=(0,Zt.Z)();r.parallel=function(n){if(!arguments.length)return e*E;var a=r.rotate();return t(e=n*L).rotate(a)};r.rotate=function(t){if(!arguments.length)return t=a.call(r),t[1]+=e*E,t;a.call(r,[t[0],t[1]-e*E]);o.center([-t[0],-t[1]]);return r};r.stream=function(e){e=i(e);e.sphere=function(){e.polygonStart();var t=.01,r=o.radius(90-t)().coordinates[0],n=r.length-1,a=-1,i;e.lineStart();while(++a<n)e.point((i=r[a])[0],i[1]);e.lineEnd();r=o.radius(90+t)().coordinates[0];n=r.length-1;e.lineStart();while(--a>=0)e.point((i=r[a])[0],i[1]);e.lineEnd();e.polygonEnd()};return e};return r.scale(79.4187).parallel(45).clipAngle(180-.001)}var Jt=r(33064);var Kt=r(72736);var $t=3,Qt=I(1-1/$t)*E,er=Ue(0);function tr(e){var t=Qt*L,r=De(_,t)[0]-De(-_,t)[0],n=er(0,t)[1],i=De(0,t)[1],o=M-i,s=S/e,l=4/S,u=n+o*o*4/S;function c(c,p){var d,g=a(p);if(g>t){var y=h(e-1,v(0,f((c+_)/s)));c+=_*(e-1)/e-y*s;d=De(c,g);d[0]=d[0]*S/r-S*(e-1)/(2*e)+y*S/e;d[1]=n+(d[1]-i)*4*o/S;if(p<0)d[1]=-d[1]}else{d=er(c,p)}d[0]*=l,d[1]/=u;return d}c.invert=function(t,c){t/=l,c*=u;var p=a(c);if(p>n){var d=h(e-1,v(0,f((t+_)/s)));t=(t+_*(e-1)/e-d*s)*r/S;var g=De.invert(t,.25*(p-n)*S/o+i);g[0]-=_*(e-1)/e-d*s;if(c<0)g[1]=-g[1];return g}return er.invert(t,c)};return c}function rr(e,t){return[e,t&1?90-x:Qt]}function nr(e,t){return[e,t&1?-90+x:-Qt]}function ar(e){return[e[0]*(1-x),e[1]]}function ir(e){var t=[].concat((0,Jt.w6)(-180,180+e/2,e).map(rr),(0,Jt.w6)(180,-180-e/2,-e).map(nr));return{type:"Polygon",coordinates:[e===180?t.map(ar):t]}}function or(){var e=4,t=(0,n.r)(tr),r=t(e),a=r.stream;r.lobes=function(r){return arguments.length?t(e=+r):e};r.stream=function(t){var n=r.rotate(),i=a(t),o=(r.rotate([0,0]),a(t));r.rotate(n);i.sphere=function(){(0,Kt.Z)(ir(180/e),o)};return i};return r.scale(239.75)}function sr(e){var t=1+e,r=y(1/t),n=I(r),i=2*O(_/(s=_+4*n*t)),s,u=.5*i*(t+O(e*(2+e))),f=e*e,c=t*t;function v(r,v){var h=1-y(v),p,d;if(h&&h<2){var g=w-v,m=25,x;do{var T=y(g),k=l(g),A=n+o(T,t-k),M=1+c-2*t*k;g-=x=(g-f*n-t*T+M*A-.5*h*s)/(2*t*T*A)}while(a(x)>b&&--m>0);p=i*O(M);d=r*A/_}else{p=i*(e+h);d=r*n/_}return[p*y(d),u-p*l(d)]}v.invert=function(e,r){var a=e*e+(r-=u)*r,l=(1+c-a/(i*i))/(2*t),v=P(l),h=y(v),p=n+o(h,t-l);return[I(e/O(a))*_/p,I(1-2*(v-f*n-t*h+(1+c-2*t*l)*p)/s)]};return v}function lr(){var e=1,t=(0,n.r)(sr),r=t(e);r.ratio=function(r){return arguments.length?t(e=+r):e};return r.scale(167.774).center([0,18.67])}var ur=.7109889596207567;var fr=.0528035274542;function cr(e,t){return t>-ur?(e=fe(e,t),e[1]+=fr,e):ye(e,t)}cr.invert=function(e,t){return t>-ur?fe.invert(e,t-fr):ye.invert(e,t)};function vr(){return(0,n.Z)(cr).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function hr(e,t){return a(t)>ur?(e=fe(e,t),e[1]-=t>0?fr:-fr,e):ye(e,t)}hr.invert=function(e,t){return a(t)>ur?fe.invert(e,t+(t>0?fr:-fr)):ye.invert(e,t)};function pr(){return(0,n.Z)(hr).scale(152.63)}function dr(e,t,r,n){var a=O(4*_/(2*r+(1+e-t/2)*y(2*r)+(e+t)/2*y(4*r)+t/2*y(6*r))),i=O(n*y(r)*O((1+e*l(2*r)+t*l(4*r))/(1+e+t))),o=r*u(1);function s(r){return O(1+e*l(2*r)+t*l(4*r))}function u(n){var a=n*r;return(2*a+(1+e-t/2)*y(2*a)+(e+t)/2*y(4*a)+t/2*y(6*a))/r}function f(e){return s(e)*y(e)}var c=function(e,t){var n=r*ae(u,o*y(t)/r,t/_);if(isNaN(n))n=r*g(t);var f=a*s(n);return[f*i*e/_*l(n),f/i*y(n)]};c.invert=function(e,t){var n=ae(f,t*i/a);return[e*_/(l(n)*a*i*s(n)),I(r*u(n/r)/o)]};if(r===0){a=O(n/_);c=function(e,t){return[e*a,y(t)/a]};c.invert=function(e,t){return[e/a,I(t*a)]}}return c}function gr(){var e=1,t=0,r=45*L,a=2,i=(0,n.r)(dr),o=i(e,t,r,a);o.a=function(n){return arguments.length?i(e=+n,t,r,a):e};o.b=function(n){return arguments.length?i(e,t=+n,r,a):t};o.psiMax=function(n){return arguments.length?i(e,t,r=+n*L,a):r*E};o.ratio=function(n){return arguments.length?i(e,t,r,a=+n):a};return o.scale(180.739)}function yr(e,t,r,n,a,i,o,s,l,u,f){if(f.nanEncountered){return NaN}var c,v,h,p,d,g,y,m,x,b;c=r-t;v=e(t+c*.25);h=e(r-c*.25);if(isNaN(v)){f.nanEncountered=true;return}if(isNaN(h)){f.nanEncountered=true;return}p=c*(n+4*v+a)/12;d=c*(a+4*h+i)/12;g=p+d;b=(g-o)/15;if(u>l){f.maxDepthCount++;return g+b}else if(Math.abs(b)<s){return g+b}else{y=t+c*.5;m=yr(e,t,y,n,v,a,p,s*.5,l,u+1,f);if(isNaN(m)){f.nanEncountered=true;return NaN}x=yr(e,y,r,a,h,i,d,s*.5,l,u+1,f);if(isNaN(x)){f.nanEncountered=true;return NaN}return m+x}}function mr(e,t,r,n,a){var i={maxDepthCount:0,nanEncountered:false};if(n===undefined){n=1e-8}if(a===undefined){a=20}var o=e(t);var s=e(.5*(t+r));var l=e(r);var u=(o+4*s+l)*(r-t)/6;var f=yr(e,t,r,o,s,l,u,n,a,1,i);return f}function xr(e,t,r){function n(r){return e+(1-e)*p(1-p(r,t),1/t)}function i(e){return mr(n,0,e,1e-4)}var o=1/i(1),s=1e3,l=(1+1e-8)*o,u=[];for(var f=0;f<=s;f++)u.push(i(f/s)*l);function c(e){var t=0,r=s,n=s>>1;do{if(u[n]>e)r=n;else t=n;n=t+r>>1}while(n>t);var a=u[n+1]-u[n];if(a)a=(e-u[n+1])/a;return(n+1+a)/s}var v=2*c(1)/_*o/r;var h=function(e,t){var r=c(a(y(t))),i=n(r)*e;r/=v;return[i,t>=0?r:-r]};h.invert=function(e,t){var r;t*=v;if(a(t)<1)r=g(t)*I(i(a(t))*o);return[e/n(a(t)),r]};return h}function br(){var e=0,t=2.5,r=1.183136,a=(0,n.r)(xr),i=a(e,t,r);i.alpha=function(n){return arguments.length?a(e=+n,t,r):e};i.k=function(n){return arguments.length?a(e,t=+n,r):t};i.gamma=function(n){return arguments.length?a(e,t,r=+n):r};return i.scale(152.63)}function _r(e,t){return a(e[0]-t[0])<x&&a(e[1]-t[1])<x}function wr(e,t){var r=-1,n=e.length,a=e[0],i,o,s,l=[];while(++r<n){i=e[r];o=(i[0]-a[0])/t;s=(i[1]-a[1])/t;for(var u=0;u<t;++u)l.push([a[0]+u*o,a[1]+u*s]);a=i}l.push(i);return l}function Tr(e){var t=[],r,n,a,i,o,s,l,u=e[0].length;for(l=0;l<u;++l){r=e[0][l];n=r[0][0],a=r[0][1],i=r[1][1];o=r[2][0],s=r[2][1];t.push(wr([[n+x,a+x],[n+x,i-x],[o-x,i-x],[o-x,s+x]],30))}for(l=e[1].length-1;l>=0;--l){r=e[1][l];n=r[0][0],a=r[0][1],i=r[1][1];o=r[2][0],s=r[2][1];t.push(wr([[o-x,s-x],[o-x,i+x],[n+x,i+x],[n+x,a-x]],30))}return{type:"Polygon",coordinates:[(0,Jt.TS)(t)]}}function kr(e,t,r){var a,i;function o(r,n){var a=n<0?-1:+1,i=t[+(n<0)];for(var o=0,s=i.length-1;o<s&&r>i[o][2][0];++o);var l=e(r-i[o][1][0],n);l[0]+=e(i[o][1][0],a*n>a*i[o][0][1]?i[o][0][1]:n)[0];return l}if(r){o.invert=r(o)}else if(e.invert){o.invert=function(r,n){var a=i[+(n<0)],s=t[+(n<0)];for(var l=0,u=a.length;l<u;++l){var f=a[l];if(f[0][0]<=r&&r<f[1][0]&&f[0][1]<=n&&n<f[1][1]){var c=e.invert(r-e(s[l][1][0],0)[0],n);c[0]+=s[l][1][0];return _r(o(c[0],c[1]),[r,n])?c:null}}}}var s=(0,n.Z)(o),l=s.stream;s.stream=function(e){var t=s.rotate(),r=l(e),n=(s.rotate([0,0]),l(e));s.rotate(t);r.sphere=function(){(0,Kt.Z)(a,n)};return r};s.lobes=function(r){if(!arguments.length)return t.map((function(e){return e.map((function(e){return[[e[0][0]*E,e[0][1]*E],[e[1][0]*E,e[1][1]*E],[e[2][0]*E,e[2][1]*E]]}))}));a=Tr(r);t=r.map((function(e){return e.map((function(e){return[[e[0][0]*L,e[0][1]*L],[e[1][0]*L,e[1][1]*L],[e[2][0]*L,e[2][1]*L]]}))}));i=t.map((function(t){return t.map((function(t){var r=e(t[0][0],t[0][1])[0],n=e(t[2][0],t[2][1])[0],a=e(t[1][0],t[0][1])[1],i=e(t[1][0],t[1][1])[1],o;if(a>i)o=a,a=i,i=o;return[[r,a],[n,i]]}))}));return s};if(t!=null)s.lobes(t);return s}var Ar=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Mr(){return kr(pe,Ar).scale(160.857)}var Sr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Er(){return kr(hr,Sr).scale(152.63)}var Lr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Cr(){return kr(fe,Lr).scale(169.529)}var Ir=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Pr(){return kr(fe,Ir).scale(169.529).rotate([20,0])}var Or=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Dr(){return kr(cr,Or,ie).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var zr=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Rr(){return kr(ye,zr).scale(152.63).rotate([-20,0])}function Fr(e,t){return[3/S*e*O(_*_/3-t*t),t]}Fr.invert=function(e,t){return[S/3*e/O(_*_/3-t*t),t]};function Br(){return(0,n.Z)(Fr).scale(158.837)}function Nr(e){function t(t,r){if(a(a(r)-w)<x)return[0,r<0?-2:2];var n=y(r),i=p((1+n)/(1-n),e/2),o=.5*(i+1/i)+l(t*=e);return[2*y(t)/o,(i-1/i)/o]}t.invert=function(t,r){var n=a(r);if(a(n-2)<x)return t?null:[0,g(r)*w];if(n>2)return null;t/=2,r/=2;var i=t*t,s=r*r,l=2*r/(1+i+s);l=p((1+l)/(1-l),1/e);return[o(2*t,1-i-s)/e,I((l-1)/(l+1))]};return t}function jr(){var e=.5,t=(0,n.r)(Nr),r=t(e);r.spacing=function(r){return arguments.length?t(e=+r):e};return r.scale(124.75)}var Ur=_/A;function Vr(e,t){return[e*(1+O(l(t)))/2,t/(l(t/2)*l(e/6))]}Vr.invert=function(e,t){var r=a(e),n=a(t),i=x,o=w;if(n<Ur)o*=n/Ur;else i+=6*P(Ur/n);for(var s=0;s<25;s++){var u=y(o),f=O(l(o)),c=y(o/2),v=l(o/2),h=y(i/6),p=l(i/6),d=.5*i*(1+f)-r,g=o/(v*p)-n,m=f?-.25*i*u/f:0,b=.5*(1+f),_=(1+.5*o*c/v)/(v*p),T=o/v*(h/6)/(p*p),k=m*T-_*b,A=(d*T-g*b)/k,M=(g*m-d*_)/k;o-=A;i-=M;if(a(A)<x&&a(M)<x)break}return[e<0?-i:i,t<0?-o:o]};function Hr(){return(0,n.Z)(Vr).scale(97.2672)}function qr(e,t){var r=e*e,n=t*t;return[e*(.975534+n*(-.119161+r*-.0143059+n*-.0547009)),t*(1.00384+r*(.0802894+n*-.02855+r*199025e-9)+n*(.0998909+n*-.0491032))]}qr.invert=function(e,t){var r=g(e)*_,n=t/2,i=50;do{var o=r*r,s=n*n,l=r*n,u=r*(.975534+s*(-.119161+o*-.0143059+s*-.0547009))-e,f=n*(1.00384+o*(.0802894+s*-.02855+o*199025e-9)+s*(.0998909+s*-.0491032))-t,c=.975534-s*(.119161+3*o*.0143059+s*.0547009),v=-l*(2*.119161+4*.0547009*s+2*.0143059*o),h=l*(2*.0802894+4*199025e-9*o+2*-.02855*s),p=1.00384+o*(.0802894+199025e-9*o)+s*(3*(.0998909-.02855*o)-5*.0491032*s),d=v*h-p*c,y=(f*v-u*p)/d,m=(u*h-f*c)/d;r-=y,n-=m}while((a(y)>x||a(m)>x)&&--i>0);return i&&[r,n]};function Gr(){return(0,n.Z)(qr).scale(139.98)}function Zr(e,t){return[y(e)/l(t),m(t)*l(e)]}Zr.invert=function(e,t){var r=e*e,n=t*t,a=n+1,i=r+a,o=e?k*O((i-O(i*i-4*r))/r):1/O(a);return[I(e*o),g(t)*P(o)]};function Yr(){return(0,n.Z)(Zr).scale(144.049).clipAngle(90-.001)}function Wr(e){var t=l(e),r=m(T+e/2);function n(n,i){var o=i-e,s=a(o)<x?n*t:a(s=T+i/2)<x||a(a(s)-w)<x?0:n*o/c(m(s)/r);return[s,o]}n.invert=function(n,i){var o,s=i+e;return[a(i)<x?n/t:a(o=T+s/2)<x||a(a(o)-w)<x?0:n*c(m(o)/r)/i,s]};return n}function Xr(){return ge(Wr).parallel(40).scale(158.837)}function Jr(e,t){return[e,1.25*c(m(T+.4*t))]}Jr.invert=function(e,t){return[e,2.5*i(u(.8*t))-.625*_]};function Kr(){return(0,n.Z)(Jr).scale(108.318)}function $r(e){var t=e.length-1;function r(r,n){var a=l(n),i=2/(1+a*l(r)),o=i*a*y(r),s=i*y(n),u=t,f=e[u],c=f[0],v=f[1],h;while(--u>=0){f=e[u];c=f[0]+o*(h=c)-s*v;v=f[1]+o*v+s*h}c=o*(h=c)-s*v;v=o*v+s*h;return[c,v]}r.invert=function(r,n){var s=20,u=r,f=n;do{var c=t,v=e[c],h=v[0],p=v[1],d=0,g=0,m;while(--c>=0){v=e[c];d=h+u*(m=d)-f*g;g=p+u*g+f*m;h=v[0]+u*(m=h)-f*p;p=v[1]+u*p+f*m}d=h+u*(m=d)-f*g;g=p+u*g+f*m;h=u*(m=h)-f*p-r;p=u*p+f*m-n;var b=d*d+g*g,_,w;u-=_=(h*d+p*g)/b;f-=w=(p*d-h*g)/b}while(a(_)+a(w)>x*x&&--s>0);if(s){var T=O(u*u+f*f),k=2*i(T*.5),A=y(k);return[o(u*A,T*l(k)),T?I(f*A/T):0]}};return r}var Qr=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],en=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],tn=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],rn=[[.9245,0],[0,0],[.01943,0]],nn=[[.721316,0],[0,0],[-.00881625,-.00617325]];function an(){return fn(Qr,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function on(){return fn(en,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function sn(){return fn(tn,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function ln(){return fn(rn,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function un(){return fn(nn,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function fn(e,t){var r=(0,n.Z)($r(e)).rotate(t).clipAngle(90),a=(0,Me.Z)(t),i=r.center;delete r.rotate;r.center=function(e){return arguments.length?i(a(e)):a.invert(i())};return r}var cn=O(6),vn=O(7);function hn(e,t){var r=I(7*y(t)/(3*cn));return[cn*e*(2*l(2*r/3)-1)/vn,9*y(r/3)/vn]}hn.invert=function(e,t){var r=3*I(t*vn/9);return[e*vn/(cn*(2*l(2*r/3)-1)),I(y(r)*3*cn/7)]};function pn(){return(0,n.Z)(hn).scale(164.859)}function dn(e,t){var r=(1+k)*y(t),n=t;for(var i=0,o;i<25;i++){n-=o=(y(n/2)+y(n)-r)/(.5*l(n/2)+l(n));if(a(o)<x)break}return[e*(1+2*l(n)/l(n/2))/(3*A),2*O(3)*y(n/2)/O(2+A)]}dn.invert=function(e,t){var r=t*O(2+A)/(2*O(3)),n=2*I(r);return[3*A*e/(1+2*l(n)/l(n/2)),I((r+y(n))/(1+k))]};function gn(){return(0,n.Z)(dn).scale(188.209)}function yn(e,t){var r=O(6/(4+_)),n=(1+_/4)*y(t),i=t/2;for(var o=0,s;o<25;o++){i-=s=(i/2+y(i)-n)/(.5+l(i));if(a(s)<x)break}return[r*(.5+l(i))*e/1.5,r*i]}yn.invert=function(e,t){var r=O(6/(4+_)),n=t/r;if(a(a(n)-w)<x)n=n<0?-w:w;return[1.5*e/(r*(.5+l(n))),I((n/2+y(n))/(1+_/4))]};function mn(){return(0,n.Z)(yn).scale(166.518)}var xn=r(26867);function bn(e,t){var r=t*t,n=r*r,a=r*n;return[e*(.84719-.13063*r+a*a*(-.04515+.05494*r-.02326*n+.00331*a)),t*(1.01183+n*n*(-.02625+.01926*r-.00396*n))]}bn.invert=function(e,t){var r=t,n=25,i,o,s,l;do{o=r*r;s=o*o;r-=i=(r*(1.01183+s*s*(-.02625+.01926*o-.00396*s))-t)/(1.01183+s*s*(9*-.02625+11*.01926*o+13*-.00396*s))}while(a(i)>b&&--n>0);o=r*r;s=o*o;l=o*s;return[e/(.84719-.13063*o+l*l*(-.04515+.05494*o-.02326*s+.00331*l)),r]};function _n(){return(0,n.Z)(bn).scale(175.295)}function wn(e,t){return[e*(1+l(t))/2,2*(t-m(t/2))]}wn.invert=function(e,t){var r=t/2;for(var n=0,i=Infinity;n<10&&a(i)>x;++n){var o=l(t/2);t-=i=(t-m(t/2)-r)/(1-.5/(o*o))}return[2*e/(1+l(t)),t]};function Tn(){return(0,n.Z)(wn).scale(152.63)}var kn=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function An(){return kr(te(Infinity),kn).rotate([20,0]).scale(152.63)}function Mn(e,t){var r=y(t),n=l(t),i=g(e);if(e===0||a(t)===w)return[0,t];else if(t===0)return[e,0];else if(a(e)===w)return[e*n,w*r];var o=_/(2*e)-2*e/_,s=2*t/_,u=(1-s*s)/(r-s);var f=o*o,c=u*u,v=1+f/c,h=1+c/f;var p=(o*r/u-o/2)/v,d=(c*r/f+u/2)/h,m=p*p+n*n/v,x=d*d-(c*r*r/f+u*r-1)/h;return[w*(p+O(m)*i),w*(d+O(x<0?0:x)*g(-t*o)*i)]}Mn.invert=function(e,t){e/=w;t/=w;var r=e*e,n=t*t,a=r+n,i=_*_;return[e?(a-1+O((1-a)*(1-a)+4*r))/(2*e)*w:0,ae((function(e){return a*(_*y(e)-2*e)*_+4*e*e*(t-y(e))+2*_*e-i*t}),0)]};function Sn(){return(0,n.Z)(Mn).scale(127.267)}var En=1.0148,Ln=.23185,Cn=-.14499,In=.02406,Pn=En,On=5*Ln,Dn=7*Cn,zn=9*In,Rn=1.790857183;function Fn(e,t){var r=t*t;return[e,t*(En+r*r*(Ln+r*(Cn+In*r)))]}Fn.invert=function(e,t){if(t>Rn)t=Rn;else if(t<-Rn)t=-Rn;var r=t,n;do{var i=r*r;r-=n=(r*(En+i*i*(Ln+i*(Cn+In*i)))-t)/(Pn+i*i*(On+i*(Dn+zn*i)))}while(a(n)>x);return[e,r]};function Bn(){return(0,n.Z)(Fn).scale(139.319)}function Nn(e,t){if(a(t)<x)return[e,0];var r=m(t),n=e*y(t);return[y(n)/r,t+(1-l(n))/r]}Nn.invert=function(e,t){if(a(t)<x)return[e,0];var r=e*e+t*t,n=t*.5,i=10,o;do{var s=m(n),u=1/l(n),f=r-2*t*n+n*n;n-=o=(s*f+2*(n-t))/(2+f*u*u+2*(n-t)*s)}while(a(o)>x&&--i>0);s=m(n);return[(a(t)<a(n+1/s)?I(e*s):g(t)*g(e)*(P(a(e*s))+w))/y(n),n]};function jn(){return(0,n.Z)(Nn).scale(103.74)}var Un=r(77338);var Vn=r(83074);function Hn(e,t){var r=Zn(e[1],e[0]),n=Zn(t[1],t[0]),a=Wn(r,n),i=Yn(r)/Yn(n);return Gn([1,0,e[0][0],0,1,e[0][1]],Gn([i,0,0,0,i,0],Gn([l(a),y(a),0,-y(a),l(a),0],[1,0,-t[0][0],0,1,-t[0][1]])))}function qn(e){var t=1/(e[0]*e[4]-e[1]*e[3]);return[t*e[4],-t*e[1],t*(e[1]*e[5]-e[2]*e[4]),-t*e[3],t*e[0],t*(e[2]*e[3]-e[0]*e[5])]}function Gn(e,t){return[e[0]*t[0]+e[1]*t[3],e[0]*t[1]+e[1]*t[4],e[0]*t[2]+e[1]*t[5]+e[2],e[3]*t[0]+e[4]*t[3],e[3]*t[1]+e[4]*t[4],e[3]*t[2]+e[4]*t[5]+e[5]]}function Zn(e,t){return[e[0]-t[0],e[1]-t[1]]}function Yn(e){return O(e[0]*e[0]+e[1]*e[1])}function Wn(e,t){return o(e[0]*t[1]-e[1]*t[0],e[0]*t[0]+e[1]*t[1])}function Xn(e,t,r){a(e,{transform:null});function a(e,t){e.edges=Qn(e.face);if(t.face){var r=e.shared=$n(e.face,t.face),n=Hn(r.map(t.project),r.map(e.project));e.transform=t.transform?Gn(t.transform,n):n;var i=t.edges;for(var o=0,s=i.length;o<s;++o){if(Kn(r[0],i[o][1])&&Kn(r[1],i[o][0]))i[o]=e;if(Kn(r[0],i[o][0])&&Kn(r[1],i[o][1]))i[o]=e}i=e.edges;for(o=0,s=i.length;o<s;++o){if(Kn(r[0],i[o][0])&&Kn(r[1],i[o][1]))i[o]=t;if(Kn(r[0],i[o][1])&&Kn(r[1],i[o][0]))i[o]=t}}else{e.transform=t.transform}if(e.children){e.children.forEach((function(t){a(t,e)}))}return e}function i(e,r){var n=t(e,r),a=n.project([e*E,r*E]),i;if(i=n.transform){return[i[0]*a[0]+i[1]*a[1]+i[2],-(i[3]*a[0]+i[4]*a[1]+i[5])]}a[1]=-a[1];return a}if(ea(e))i.invert=function(t,r){var n=o(e,[t,-r]);return n&&(n[0]*=L,n[1]*=L,n)};function o(e,t){var r=e.project.invert,n=e.transform,a=t;if(n){n=qn(n);a=[n[0]*a[0]+n[1]*a[1]+n[2],n[3]*a[0]+n[4]*a[1]+n[5]]}if(r&&e===s(i=r(a)))return i;var i,l=e.children;for(var u=0,f=l&&l.length;u<f;++u){if(i=o(l[u],t))return i}}function s(e){return t(e[0]*L,e[1]*L)}var l=(0,n.Z)(i),u=l.stream;l.stream=function(t){var r=l.rotate(),n=u(t),a=(l.rotate([0,0]),u(t));l.rotate(r);n.sphere=function(){a.polygonStart();a.lineStart();Jn(a,e);a.lineEnd();a.polygonEnd()};return n};return l.angle(r==null?-30:r*E)}function Jn(e,t,r){var n,i=t.edges,o=i.length,s,l={type:"MultiPoint",coordinates:t.face},u=t.face.filter((function(e){return a(e[1])!==90})),f=(0,Un.Z)({type:"MultiPoint",coordinates:u}),c=false,v=-1,h=f[1][0]-f[0][0];var p=h===180||h===360?[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2]:(0,Ae.Z)(l);if(r)while(++v<o){if(i[v]===r)break}++v;for(var d=0;d<o;++d){s=i[(d+v)%o];if(Array.isArray(s)){if(!c){e.point((n=(0,Vn.Z)(s[0],p)(x))[0],n[1]);c=true}e.point((n=(0,Vn.Z)(s[1],p)(x))[0],n[1])}else{c=false;if(s!==r)Jn(e,s,t)}}}function Kn(e,t){return e&&t&&e[0]===t[0]&&e[1]===t[1]}function $n(e,t){var r,n,a=e.length,i=null;for(var o=0;o<a;++o){r=e[o];for(var s=t.length;--s>=0;){n=t[s];if(r[0]===n[0]&&r[1]===n[1]){if(i)return[i,r];i=r}}}}function Qn(e){var t=e.length,r=[];for(var n=e[t-1],a=0;a<t;++a)r.push([n,n=e[a]]);return r}function ea(e){return e.project.invert||e.children&&e.children.some(ea)}var ta=r(98936);var ra=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]];var na=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map((function(e){return e.map((function(e){return ra[e]}))}));function aa(e){e=e||function(e){var t=(0,Ae.Z)({type:"MultiPoint",coordinates:e});return(0,ta.Z)().scale(1).translate([0,0]).rotate([-t[0],-t[1]])};var t=na.map((function(t){return{face:t,project:e(t)}}));[-1,0,0,1,0,1,4,5].forEach((function(e,r){var n=t[e];n&&(n.children||(n.children=[])).push(t[r])}));return Xn(t[0],(function(e,r){return t[e<-_/2?r<0?6:4:e<0?r<0?2:0:e<_/2?r<0?3:1:r<0?7:5]})).angle(-30).scale(101.858).center([0,45])}var ia=2/O(3);function oa(e,t){var r=De(e,t);return[r[0]*ia,r[1]]}oa.invert=function(e,t){return De.invert(e/ia,t)};function sa(e){e=e||function(e){var t=(0,Ae.Z)({type:"MultiPoint",coordinates:e});return(0,n.Z)(oa).translate([0,0]).scale(1).rotate(t[1]>0?[-t[0],0]:[180-t[0],180])};var t=na.map((function(t){return{face:t,project:e(t)}}));[-1,0,0,1,0,1,4,5].forEach((function(e,r){var n=t[e];n&&(n.children||(n.children=[])).push(t[r])}));return Xn(t[0],(function(e,r){return t[e<-_/2?r<0?6:4:e<0?r<0?2:0:e<_/2?r<0?3:1:r<0?7:5]})).angle(-30).scale(121.906).center([0,48.5904])}function la(e){e=e||function(e){var t=e.length===6?(0,Ae.Z)({type:"MultiPoint",coordinates:e}):e[0];return(0,ta.Z)().scale(1).translate([0,0]).rotate([-t[0],-t[1]])};var t=na.map((function(e){var t=e.map(va),r=t.length,n=t[r-1],a,i=[];for(var o=0;o<r;++o){a=t[o];i.push(ca([n[0]*.9486832980505138+a[0]*.31622776601683794,n[1]*.9486832980505138+a[1]*.31622776601683794,n[2]*.9486832980505138+a[2]*.31622776601683794]),ca([a[0]*.9486832980505138+n[0]*.31622776601683794,a[1]*.9486832980505138+n[1]*.31622776601683794,a[2]*.9486832980505138+n[2]*.31622776601683794]));n=a}return i}));var r=[];var n=[-1,0,0,1,0,1,4,5];t.forEach((function(e,a){var i=na[a],o=i.length,s=r[a]=[];for(var l=0;l<o;++l){t.push([i[l],e[(l*2+2)%(2*o)],e[(l*2+1)%(2*o)]]);n.push(a);s.push(fa(va(e[(l*2+2)%(2*o)]),va(e[(l*2+1)%(2*o)])))}}));var a=t.map((function(t){return{project:e(t),face:t}}));n.forEach((function(e,t){var r=a[e];r&&(r.children||(r.children=[])).push(a[t])}));function i(e,t){var n=l(t),i=[n*l(e),n*y(e),y(t)];var o=e<-_/2?t<0?6:4:e<0?t<0?2:0:e<_/2?t<0?3:1:t<0?7:5;var s=r[o];return a[ua(s[0],i)<0?8+3*o:ua(s[1],i)<0?8+3*o+1:ua(s[2],i)<0?8+3*o+2:o]}return Xn(a[0],i).angle(-30).scale(110.625).center([0,45])}function ua(e,t){for(var r=0,n=e.length,a=0;r<n;++r)a+=e[r]*t[r];return a}function fa(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function ca(e){return[o(e[1],e[0])*E,I(v(-1,h(1,e[2])))*E]}function va(e){var t=e[0]*L,r=e[1]*L,n=l(r);return[n*l(t),n*y(t),y(r)]}function ha(){}function pa(e){if((r=e.length)<4)return false;var t=0,r,n=e[r-1][1]*e[0][0]-e[r-1][0]*e[0][1];while(++t<r)n+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return n<=0}function da(e,t){var r=t[0],n=t[1],a=false;for(var i=0,o=e.length,s=o-1;i<o;s=i++){var l=e[i],u=l[0],f=l[1],c=e[s],v=c[0],h=c[1];if(f>n^h>n&&r<(v-u)*(n-f)/(h-f)+u)a=!a}return a}function ga(e,t){var r=t.stream,n;if(!r)throw new Error("invalid projection");switch(e&&e.type){case"Feature":n=ma;break;case"FeatureCollection":n=ya;break;default:n=ba;break}return n(e,r)}function ya(e,t){return{type:"FeatureCollection",features:e.features.map((function(e){return ma(e,t)}))}}function ma(e,t){return{type:"Feature",id:e.id,properties:e.properties,geometry:ba(e.geometry,t)}}function xa(e,t){return{type:"GeometryCollection",geometries:e.geometries.map((function(e){return ba(e,t)}))}}function ba(e,t){if(!e)return null;if(e.type==="GeometryCollection")return xa(e,t);var r;switch(e.type){case"Point":r=Ta;break;case"MultiPoint":r=Ta;break;case"LineString":r=ka;break;case"MultiLineString":r=ka;break;case"Polygon":r=Aa;break;case"MultiPolygon":r=Aa;break;case"Sphere":r=Aa;break;default:return null}(0,Kt.Z)(e,t(r));return r.result()}var _a=[],wa=[];var Ta={point:function(e,t){_a.push([e,t])},result:function(){var e=!_a.length?null:_a.length<2?{type:"Point",coordinates:_a[0]}:{type:"MultiPoint",coordinates:_a};_a=[];return e}};var ka={lineStart:ha,point:function(e,t){_a.push([e,t])},lineEnd:function(){if(_a.length)wa.push(_a),_a=[]},result:function(){var e=!wa.length?null:wa.length<2?{type:"LineString",coordinates:wa[0]}:{type:"MultiLineString",coordinates:wa};wa=[];return e}};var Aa={polygonStart:ha,lineStart:ha,point:function(e,t){_a.push([e,t])},lineEnd:function(){var e=_a.length;if(e){do{_a.push(_a[0].slice())}while(++e<4);wa.push(_a),_a=[]}},polygonEnd:ha,result:function(){if(!wa.length)return null;var e=[],t=[];wa.forEach((function(r){if(pa(r))e.push([r]);else t.push(r)}));t.forEach((function(t){var r=t[0];e.some((function(e){if(da(e[0],r)){e.push(t);return true}}))||e.push([t])}));wa=[];return!e.length?null:e.length>1?{type:"MultiPolygon",coordinates:e}:{type:"Polygon",coordinates:e[0]}}};function Ma(e){var t=e(w,0)[0]-e(-w,0)[0];function r(r,n){var i=a(r)<w,o=e(i?r:r>0?r-_:r+_,n),s=(o[0]-o[1])*k,l=(o[0]+o[1])*k;if(i)return[s,l];var u=t*k,f=s>0^l>0?-1:1;return[f*s-g(l)*u,f*l-g(s)*u]}if(e.invert)r.invert=function(r,n){var i=(r+n)*k,o=(n-r)*k,s=a(i)<.5*t&&a(o)<.5*t;if(!s){var l=t*k,u=i>0^o>0?-1:1,f=-u*r+(o>0?1:-1)*l,c=-u*n+(i>0?1:-1)*l;i=(-f-c)*k;o=(f-c)*k}var v=e.invert(i,o);if(!s)v[0]+=i>0?_:-_;return v};return(0,n.Z)(r).rotate([-90,-90,45]).clipAngle(180-.001)}function Sa(){return Ma(Dt).scale(176.423)}function Ea(){return Ma(Vt).scale(111.48)}function La(e,t){if(!(0<=(t=+t)&&t<=20))throw new Error("invalid digits");function r(e){var r=e.length,n=2,a=new Array(r);a[0]=+e[0].toFixed(t);a[1]=+e[1].toFixed(t);while(n<r)a[n]=e[n],++n;return a}function n(e){return e.map(r)}function a(e){var t=r(e[0]);var n=[t];for(var a=1;a<e.length;a++){var i=r(e[a]);if(i.length>2||i[0]!=t[0]||i[1]!=t[1]){n.push(i);t=i}}if(n.length===1&&e.length>1){n.push(r(e[e.length-1]))}return n}function i(e){return e.map(a)}function o(e){if(e==null)return e;var t;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(o)};break;case"Point":t={type:"Point",coordinates:r(e.coordinates)};break;case"MultiPoint":t={type:e.type,coordinates:n(e.coordinates)};break;case"LineString":t={type:e.type,coordinates:a(e.coordinates)};break;case"MultiLineString":case"Polygon":t={type:e.type,coordinates:i(e.coordinates)};break;case"MultiPolygon":t={type:"MultiPolygon",coordinates:e.coordinates.map(i)};break;default:return e}if(e.bbox!=null)t.bbox=e.bbox;return t}function s(e){var t={type:"Feature",properties:e.properties,geometry:o(e.geometry)};if(e.id!=null)t.id=e.id;if(e.bbox!=null)t.bbox=e.bbox;return t}if(e!=null)switch(e.type){case"Feature":return s(e);case"FeatureCollection":{var l={type:"FeatureCollection",features:e.features.map(s)};if(e.bbox!=null)l.bbox=e.bbox;return l}default:return o(e)}return e}function Ca(e){var t=y(e);function r(r,n){var a=t?m(r*t/2)/t:r/2;if(!n)return[2*a,-e];var o=2*i(a*y(n)),s=1/m(n);return[y(o)*s,n+(1-l(o))*s-e]}r.invert=function(r,n){if(a(n+=e)<x)return[t?2*i(t*r/2)/t:r,0];var o=r*r+n*n,s=0,u=10,f;do{var c=m(s),v=1/l(s),h=o-2*n*s+s*s;s-=f=(c*h+2*(s-n))/(2+h*v*v+2*(s-n)*c)}while(a(f)>x&&--u>0);var p=r*(c=m(s)),d=m(a(n)<a(s+1/c)?I(p)*.5:P(p)*.5+_/4)/y(s);return[t?2*i(t*d)/t:2*d,s]};return r}function Ia(){return ge(Ca).scale(131.215)}var Pa=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];Pa.forEach((function(e){e[1]*=1.0144}));function Oa(e,t){var r=h(18,a(t)*36/_),n=f(r),i=r-n,o=(p=Pa[n])[0],s=p[1],l=(p=Pa[++n])[0],u=p[1],c=(p=Pa[h(19,++n)])[0],v=p[1],p;return[e*(l+i*(c-o)/2+i*i*(c-2*l+o)/2),(t>0?w:-w)*(u+i*(v-s)/2+i*i*(v-2*u+s)/2)]}Oa.invert=function(e,t){var r=t/w,n=r*90,i=h(18,a(n/5)),o=v(0,f(i));do{var s=Pa[o][1],l=Pa[o+1][1],u=Pa[h(19,o+2)][1],c=u-s,p=u-2*l+s,d=2*(a(r)-l)/c,g=p/c,y=d*(1-g*d*(1-2*g*d));if(y>=0||o===1){n=(t>=0?5:-5)*(y+i);var m=50,x;do{i=h(18,a(n)/5);o=f(i);y=i-o;s=Pa[o][1];l=Pa[o+1][1];u=Pa[h(19,o+2)][1];n-=(x=(t>=0?w:-w)*(l+y*(u-s)/2+y*y*(u-2*l+s)/2)-t)*E}while(a(x)>b&&--m>0);break}}while(--o>=0);var _=Pa[o][0],T=Pa[o+1][0],k=Pa[h(19,o+2)][0];return[e/(T+y*(k-_)/2+y*y*(k-2*T+_)/2),n*L]};function Da(){return(0,n.Z)(Oa).scale(152.63)}function za(e){function t(t,r){var n=l(r),a=(e-1)/(e-n*l(t));return[a*n*y(t),a*y(r)]}t.invert=function(t,r){var n=t*t+r*r,a=O(n),i=(e-O(1-n*(e+1)/(e-1)))/((e-1)/a+a/(e-1));return[o(t*i,a*O(1-i*i)),a?I(r*i/a):0]};return t}function Ra(e,t){var r=za(e);if(!t)return r;var n=l(t),a=y(t);function i(t,i){var o=r(t,i),s=o[1],l=s*a/(e-1)+n;return[o[0]*n/l,s/l]}i.invert=function(t,i){var o=(e-1)/(e-1-i*a);return r.invert(o*t,o*i*n)};return i}function Fa(){var e=2,t=0,r=(0,n.r)(Ra),a=r(e,t);a.distance=function(n){if(!arguments.length)return e;return r(e=+n,t)};a.tilt=function(n){if(!arguments.length)return t*E;return r(e,t=n*L)};return a.scale(432.147).clipAngle(P(1/e)*E-1e-6)}var Ba=1e-4,Na=1e4,ja=-180,Ua=ja+Ba,Va=180,Ha=Va-Ba,qa=-90,Ga=qa+Ba,Za=90,Ya=Za-Ba;function Wa(e){return e.length>0}function Xa(e){return Math.floor(e*Na)/Na}function Ja(e){return e===qa||e===Za?[0,e]:[ja,Xa(e)]}function Ka(e){var t=e[0],r=e[1],n=false;if(t<=Ua)t=ja,n=true;else if(t>=Ha)t=Va,n=true;if(r<=Ga)r=qa,n=true;else if(r>=Ya)r=Za,n=true;return n?[t,r]:e}function $a(e){return e.map(Ka)}function Qa(e,t,r){for(var n=0,a=e.length;n<a;++n){var i=e[n].slice();r.push({index:-1,polygon:t,ring:i});for(var o=0,s=i.length;o<s;++o){var l=i[o],u=l[0],f=l[1];if(u<=Ua||u>=Ha||f<=Ga||f>=Ya){i[o]=Ka(l);for(var c=o+1;c<s;++c){var v=i[c],h=v[0],p=v[1];if(h>Ua&&h<Ha&&p>Ga&&p<Ya)break}if(c===o+1)continue;if(o){var d={index:-1,polygon:t,ring:i.slice(0,o+1)};d.ring[d.ring.length-1]=Ja(f);r[r.length-1]=d}else r.pop();if(c>=s)break;r.push({index:-1,polygon:t,ring:i=i.slice(c-1)});i[0]=Ja(i[0][1]);o=-1;s=i.length}}}}function ei(e){var t,r=e.length;var n={},a={},i,o,s,l,u;for(t=0;t<r;++t){i=e[t];o=i.ring[0];l=i.ring[i.ring.length-1];if(o[0]===l[0]&&o[1]===l[1]){i.polygon.push(i.ring);e[t]=null;continue}i.index=t;n[o]=a[l]=i}for(t=0;t<r;++t){i=e[t];if(i){o=i.ring[0];l=i.ring[i.ring.length-1];s=a[o];u=n[l];delete n[o];delete a[l];if(o[0]===l[0]&&o[1]===l[1]){i.polygon.push(i.ring);continue}if(s){delete a[o];delete n[s.ring[0]];s.ring.pop();e[s.index]=null;i={index:-1,polygon:s.polygon,ring:s.ring.concat(i.ring)};if(s===u){i.polygon.push(i.ring)}else{i.index=r++;e.push(n[i.ring[0]]=a[i.ring[i.ring.length-1]]=i)}}else if(u){delete n[l];delete a[u.ring[u.ring.length-1]];i.ring.pop();i={index:r++,polygon:u.polygon,ring:i.ring.concat(u.ring)};e[u.index]=null;e.push(n[i.ring[0]]=a[i.ring[i.ring.length-1]]=i)}else{i.ring.push(i.ring[0]);i.polygon.push(i.ring)}}}}function ti(e){var t={type:"Feature",geometry:ri(e.geometry)};if(e.id!=null)t.id=e.id;if(e.bbox!=null)t.bbox=e.bbox;if(e.properties!=null)t.properties=e.properties;return t}function ri(e){if(e==null)return e;var t,r,n,a;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(ri)};break;case"Point":t={type:"Point",coordinates:Ka(e.coordinates)};break;case"MultiPoint":case"LineString":t={type:e.type,coordinates:$a(e.coordinates)};break;case"MultiLineString":t={type:"MultiLineString",coordinates:e.coordinates.map($a)};break;case"Polygon":{var i=[];Qa(e.coordinates,i,r=[]);ei(r);t={type:"Polygon",coordinates:i};break}case"MultiPolygon":{r=[],n=-1,a=e.coordinates.length;var o=new Array(a);while(++n<a)Qa(e.coordinates[n],o[n]=[],r);ei(r);t={type:"MultiPolygon",coordinates:o.filter(Wa)};break}default:return e}if(e.bbox!=null)t.bbox=e.bbox;return t}function ni(e){if(e==null)return e;switch(e.type){case"Feature":return ti(e);case"FeatureCollection":{var t={type:"FeatureCollection",features:e.features.map(ti)};if(e.bbox!=null)t.bbox=e.bbox;return t}default:return ri(e)}}function ai(e,t){var r=m(t/2),n=y(T*r);return[e*(.74482-.34588*n*n),1.70711*r]}ai.invert=function(e,t){var r=t/1.70711,n=y(T*r);return[e/(.74482-.34588*n*n),2*i(r)]};function ii(){return(0,n.Z)(ai).scale(146.153)}function oi(e,t,r){var a=(0,Vn.Z)(t,r),i=a(.5),o=(0,Me.Z)([-i[0],-i[1]])(t),s=a.distance/2,l=-I(y(o[1]*L)/y(s)),u=[-i[0],-i[1],-(o[0]>0?_-l:l)*E],f=(0,n.Z)(e(s)).rotate(u),c=(0,Me.Z)(u),v=f.center;delete f.rotate;f.center=function(e){return arguments.length?v(c(e)):c.invert(v())};return f.clipAngle(90)}function si(e){var t=l(e);function r(e,r){var n=(0,ta.M)(e,r);n[0]*=t;return n}r.invert=function(e,r){return ta.M.invert(e/t,r)};return r}function li(){return ui([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function ui(e,t){return oi(si,e,t)}function fi(e){if(!(e*=2))return K.N;var t=-e/2,r=-t,n=e*e,a=m(r),i=.5/y(r);function s(a,i){var o=P(l(i)*l(a-t)),s=P(l(i)*l(a-r)),u=i<0?-1:1;o*=o,s*=s;return[(o-s)/(2*e),u*O(4*n*s-(n-o+s)*(n-o+s))/(2*e)]}s.invert=function(e,n){var s=n*n,u=l(O(s+(c=e+t)*c)),f=l(O(s+(c=e+r)*c)),c,v;return[o(v=u-f,c=(u+f)*a),(n<0?-1:1)*P(O(c*c+v*v)*i)]};return s}function ci(){return vi([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function vi(e,t){return oi(fi,e,t)}function hi(e,t){if(a(t)<x)return[e,0];var r=a(t/w),n=I(r);if(a(e)<x||a(a(t)-w)<x)return[0,g(t)*_*m(n/2)];var i=l(n),o=a(_/e-e/_)/2,s=o*o,u=i/(r+i-1),f=u*(2/r-1),c=f*f,v=c+s,h=u-c,p=s+u;return[g(e)*_*(o*h+O(s*h*h-v*(u*u-c)))/v,g(t)*_*(f*p-o*O((s+1)*v-p*p))/v]}hi.invert=function(e,t){if(a(t)<x)return[e,0];if(a(e)<x)return[0,w*y(2*i(t/_))];var r=(e/=_)*e,n=(t/=_)*t,o=r+n,s=o*o,u=-a(t)*(1+o),f=u-2*n+r,c=-2*u+1+2*n+s,v=n/c+(2*f*f*f/(c*c*c)-9*u*f/(c*c))/27,h=(u-f*f/(3*c))/c,p=2*O(-h/3),d=P(3*v/(h*p))/3;return[_*(o-1+O(1+2*(r-n)+s))/(2*e),g(t)*_*(-p*l(d+_/3)-f/(3*c))]};function pi(){return(0,n.Z)(hi).scale(79.4183)}function di(e,t){if(a(t)<x)return[e,0];var r=a(t/w),n=I(r);if(a(e)<x||a(a(t)-w)<x)return[0,g(t)*_*m(n/2)];var i=l(n),o=a(_/e-e/_)/2,s=o*o,u=i*(O(1+s)-o*i)/(1+s*r*r);return[g(e)*_*u,g(t)*_*O(1-u*(2*o+u))]}di.invert=function(e,t){if(!e)return[0,w*y(2*i(t/_))];var r=a(e/_),n=(1-r*r-(t/=_)*t)/(2*r),s=n*n,l=O(s+1);return[g(e)*_*(l-n),g(t)*w*y(2*o(O((1-2*n*r)*(n+l)-r),O(l+n+r)))]};function gi(){return(0,n.Z)(di).scale(79.4183)}function yi(e,t){if(a(t)<x)return[e,0];var r=t/w,n=I(r);if(a(e)<x||a(a(t)-w)<x)return[0,_*m(n/2)];var i=(_/e-e/_)/2,o=r/(1+l(n));return[_*(g(e)*O(i*i+1-o*o)-i),_*o]}yi.invert=function(e,t){if(!t)return[e,0];var r=t/_,n=(_*_*(1-r*r)-e*e)/(2*_*e);return[e?_*(g(e)*O(n*n+1)-n):0,w*y(2*i(r))]};function mi(){return(0,n.Z)(yi).scale(79.4183)}function xi(e,t){if(!t)return[e,0];var r=a(t);if(!e||r===w)return[0,t];var n=r/w,i=n*n,o=(8*n-i*(i+2)-5)/(2*i*(n-1)),s=o*o,l=n*o,u=i+s+2*l,f=n+3*o,c=e/w,v=c+1/c,h=g(a(e)-w)*O(v*v-4),p=h*h,d=u*(i+s*p-1)+(1-i)*(i*(f*f+4*s)+12*l*s+4*s*s),y=(h*(u+s-1)+2*O(d))/(4*u+p);return[g(e)*w*y,g(t)*w*O(1+h*a(y)-y*y)]}xi.invert=function(e,t){var r;if(!e||!t)return[e,t];t/=_;var n=g(e)*e/w,i=(n*n-1+4*t*t)/a(n),o=i*i,s=2*t,l=50;do{var u=s*s,f=(8*s-u*(u+2)-5)/(2*u*(s-1)),c=(3*s-u*s-10)/(2*u*s),v=f*f,h=s*f,p=s+f,d=p*p,y=s+3*f,m=d*(u+v*o-1)+(1-u)*(u*(y*y+4*v)+v*(12*h+4*v)),b=-2*p*(4*h*v+(1-4*u+3*u*u)*(1+c)+v*(-6+14*u-o+(-8+8*u-2*o)*c)+h*(-8+12*u+(-10+10*u-o)*c)),T=O(m),k=i*(d+v-1)+2*T-n*(4*d+o),A=i*(2*f*c+2*p*(1+c))+b/T-8*p*(i*(-1+v+d)+2*T)*(1+c)/(o+4*d);s-=r=k/A}while(r>x&&--l>0);return[g(e)*(O(i*i+4)+i)*_/4,w*s]};function bi(){return(0,n.Z)(xi).scale(127.16)}function _i(e,t,r,n,a){function i(i,o){var s=r*y(n*o),u=O(1-s*s),f=O(2/(1+u*l(i*=a)));return[e*u*f*y(i),t*s*f]}i.invert=function(i,s){var l=i/e,u=s/t,f=O(l*l+u*u),c=2*I(f/2);return[o(i*m(c),e*f)/a,f&&I(s*y(c)/(t*r*f))/n]};return i}function wi(e,t,r,n){var a=_/3;e=v(e,x);t=v(t,x);e=h(e,w);t=h(t,_-x);r=v(r,0);r=h(r,100-x);n=v(n,x);var i=r/100+1;var o=n/100;var s=P(i*l(a))/a,u=y(e)/y(s*w),f=t/_,c=O(o*y(e/2)/y(t/2)),p=c/O(f*u*s),d=1/(c*O(f*u*s));return _i(p,d,u,s,f)}function Ti(){var e=65*L,t=60*L,r=20,a=200,i=(0,n.r)(wi),o=i(e,t,r,a);o.poleline=function(n){return arguments.length?i(e=+n*L,t,r,a):e*E};o.parallels=function(n){return arguments.length?i(e,t=+n*L,r,a):t*E};o.inflation=function(n){return arguments.length?i(e,t,r=+n,a):r};o.ratio=function(n){return arguments.length?i(e,t,r,a=+n):a};return o.scale(163.775)}function ki(){return Ti().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var Ai=4*_+3*O(3),Mi=2*O(2*_*O(3)/Ai);var Si=ue(Mi*O(3)/_,Mi,Ai/6);function Ei(){return(0,n.Z)(Si).scale(176.84)}function Li(e,t){return[e*O(1-3*t*t/(_*_)),t]}Li.invert=function(e,t){return[e/O(1-3*t*t/(_*_)),t]};function Ci(){return(0,n.Z)(Li).scale(152.63)}function Ii(e,t){var r=l(t),n=l(e)*r,a=1-n,i=l(e=o(y(e)*r,-y(t))),s=y(e);r=O(1-n*n);return[s*r-i*a,-i*r-s*a]}Ii.invert=function(e,t){var r=(e*e+t*t)/-2,n=O(-r*(2+r)),a=t*r+e*n,i=e*r-t*n,s=O(i*i+a*a);return[o(n*a,s*(1+r)),s?-I(n*i/s):0]};function Pi(){return(0,n.Z)(Ii).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)}function Oi(e,t){var r=U(e,t);return[(r[0]+e/w)/2,(r[1]+t)/2]}Oi.invert=function(e,t){var r=e,n=t,i=25;do{var o=l(n),s=y(n),u=y(2*n),f=s*s,c=o*o,v=y(r),h=l(r/2),p=y(r/2),d=p*p,g=1-c*h*h,m=g?P(o*h)*O(b=1/g):b=0,b,_=.5*(2*m*o*p+r/w)-e,T=.5*(m*s+n)-t,k=.5*b*(c*d+m*o*h*f)+.5/w,A=b*(v*u/4-m*s*p),M=.125*b*(u*p-m*s*c*v),S=.5*b*(f*h+m*d*o)+.5,E=A*M-S*k,L=(T*A-_*S)/E,C=(_*M-T*k)/E;r-=L,n-=C}while((a(L)>x||a(C)>x)&&--i>0);return[r,n]};function Di(){return(0,n.Z)(Oi).scale(158.837)}},33940:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});function n(){return new a}function a(){this.reset()}a.prototype={constructor:a,reset:function(){this.s=this.t=0},add:function(e){o(i,e,this.t);o(this,i.s,this.s);if(this.s)this.t+=i.t;else this.s=i.t},valueOf:function(){return this.s}};var i=new a;function o(e,t,r){var n=e.s=t+r,a=n-t,i=n-a;e.t=t-i+(r-a)}},97860:function(e,t,r){"use strict";r.d(t,{L9:function(){return s},ZP:function(){return x},gL:function(){return p}});var n=r(33940);var a=r(39695);var i=r(73182);var o=r(72736);var s=(0,n.Z)();var l=(0,n.Z)(),u,f,c,v,h;var p={point:i.Z,lineStart:i.Z,lineEnd:i.Z,polygonStart:function(){s.reset();p.lineStart=d;p.lineEnd=g},polygonEnd:function(){var e=+s;l.add(e<0?a.BZ+e:e);this.lineStart=this.lineEnd=this.point=i.Z},sphere:function(){l.add(a.BZ)}};function d(){p.point=y}function g(){m(u,f)}function y(e,t){p.point=m;u=e,f=t;e*=a.uR,t*=a.uR;c=e,v=(0,a.mC)(t=t/2+a.pu),h=(0,a.O$)(t)}function m(e,t){e*=a.uR,t*=a.uR;t=t/2+a.pu;var r=e-c,n=r>=0?1:-1,i=n*r,o=(0,a.mC)(t),l=(0,a.O$)(t),u=h*l,f=v*o+u*(0,a.mC)(i),p=u*n*(0,a.O$)(i);s.add((0,a.fv)(p,f));c=e,v=o,h=l}function x(e){l.reset();(0,o.Z)(e,p);return l*2}},77338:function(e,t,r){"use strict";r.d(t,{Z:function(){return C}});var n=r(33940);var a=r(97860);var i=r(7620);var o=r(39695);var s=r(72736);var l,u,f,c,v,h,p,d,g=(0,n.Z)(),y,m;var x={point:b,lineStart:w,lineEnd:T,polygonStart:function(){x.point=k;x.lineStart=A;x.lineEnd=M;g.reset();a.gL.polygonStart()},polygonEnd:function(){a.gL.polygonEnd();x.point=b;x.lineStart=w;x.lineEnd=T;if(a.L9<0)l=-(f=180),u=-(c=90);else if(g>o.Ho)c=90;else if(g<-o.Ho)u=-90;m[0]=l,m[1]=f},sphere:function(){l=-(f=180),u=-(c=90)}};function b(e,t){y.push(m=[l=e,f=e]);if(t<u)u=t;if(t>c)c=t}function _(e,t){var r=(0,i.Og)([e*o.uR,t*o.uR]);if(d){var n=(0,i.T5)(d,r),a=[n[1],-n[0],0],s=(0,i.T5)(a,n);(0,i.iJ)(s);s=(0,i.Y1)(s);var h=e-v,p=h>0?1:-1,g=s[0]*o.RW*p,x,b=(0,o.Wn)(h)>180;if(b^(p*v<g&&g<p*e)){x=s[1]*o.RW;if(x>c)c=x}else if(g=(g+360)%360-180,b^(p*v<g&&g<p*e)){x=-s[1]*o.RW;if(x<u)u=x}else{if(t<u)u=t;if(t>c)c=t}if(b){if(e<v){if(S(l,e)>S(l,f))f=e}else{if(S(e,f)>S(l,f))l=e}}else{if(f>=l){if(e<l)l=e;if(e>f)f=e}else{if(e>v){if(S(l,e)>S(l,f))f=e}else{if(S(e,f)>S(l,f))l=e}}}}else{y.push(m=[l=e,f=e])}if(t<u)u=t;if(t>c)c=t;d=r,v=e}function w(){x.point=_}function T(){m[0]=l,m[1]=f;x.point=b;d=null}function k(e,t){if(d){var r=e-v;g.add((0,o.Wn)(r)>180?r+(r>0?360:-360):r)}else{h=e,p=t}a.gL.point(e,t);_(e,t)}function A(){a.gL.lineStart()}function M(){k(h,p);a.gL.lineEnd();if((0,o.Wn)(g)>o.Ho)l=-(f=180);m[0]=l,m[1]=f;d=null}function S(e,t){return(t-=e)<0?t+360:t}function E(e,t){return e[0]-t[0]}function L(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function C(e){var t,r,n,a,i,o,v;c=f=-(l=u=Infinity);y=[];(0,s.Z)(e,x);if(r=y.length){y.sort(E);for(t=1,n=y[0],i=[n];t<r;++t){a=y[t];if(L(n,a[0])||L(n,a[1])){if(S(n[0],a[1])>S(n[0],n[1]))n[1]=a[1];if(S(a[0],n[1])>S(n[0],n[1]))n[0]=a[0]}else{i.push(n=a)}}for(o=-Infinity,r=i.length-1,t=0,n=i[r];t<=r;n=a,++t){a=i[t];if((v=S(n[1],a[0]))>o)o=v,l=a[0],f=n[1]}}y=m=null;return l===Infinity||u===Infinity?[[NaN,NaN],[NaN,NaN]]:[[l,u],[f,c]]}},7620:function(e,t,r){"use strict";r.d(t,{Og:function(){return i},T:function(){return u},T5:function(){return s},Y1:function(){return a},iJ:function(){return f},j9:function(){return o},s0:function(){return l}});var n=r(39695);function a(e){return[(0,n.fv)(e[1],e[0]),(0,n.ZR)(e[2])]}function i(e){var t=e[0],r=e[1],a=(0,n.mC)(r);return[a*(0,n.mC)(t),a*(0,n.O$)(t),(0,n.O$)(r)]}function o(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function s(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function l(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function u(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function f(e){var t=(0,n._b)(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}},66624:function(e,t,r){"use strict";r.d(t,{Z:function(){return O}});var n=r(39695);var a=r(73182);var i=r(72736);var o,s,l,u,f,c,v,h,p,d,g,y,m,x,b,_;var w={sphere:a.Z,point:T,lineStart:A,lineEnd:E,polygonStart:function(){w.lineStart=L;w.lineEnd=C},polygonEnd:function(){w.lineStart=A;w.lineEnd=E}};function T(e,t){e*=n.uR,t*=n.uR;var r=(0,n.mC)(t);k(r*(0,n.mC)(e),r*(0,n.O$)(e),(0,n.O$)(t))}function k(e,t,r){++o;l+=(e-l)/o;u+=(t-u)/o;f+=(r-f)/o}function A(){w.point=M}function M(e,t){e*=n.uR,t*=n.uR;var r=(0,n.mC)(t);x=r*(0,n.mC)(e);b=r*(0,n.O$)(e);_=(0,n.O$)(t);w.point=S;k(x,b,_)}function S(e,t){e*=n.uR,t*=n.uR;var r=(0,n.mC)(t),a=r*(0,n.mC)(e),i=r*(0,n.O$)(e),o=(0,n.O$)(t),l=(0,n.fv)((0,n._b)((l=b*o-_*i)*l+(l=_*a-x*o)*l+(l=x*i-b*a)*l),x*a+b*i+_*o);s+=l;c+=l*(x+(x=a));v+=l*(b+(b=i));h+=l*(_+(_=o));k(x,b,_)}function E(){w.point=T}function L(){w.point=I}function C(){P(y,m);w.point=T}function I(e,t){y=e,m=t;e*=n.uR,t*=n.uR;w.point=P;var r=(0,n.mC)(t);x=r*(0,n.mC)(e);b=r*(0,n.O$)(e);_=(0,n.O$)(t);k(x,b,_)}function P(e,t){e*=n.uR,t*=n.uR;var r=(0,n.mC)(t),a=r*(0,n.mC)(e),i=r*(0,n.O$)(e),o=(0,n.O$)(t),l=b*o-_*i,u=_*a-x*o,f=x*i-b*a,y=(0,n._b)(l*l+u*u+f*f),m=(0,n.ZR)(y),w=y&&-m/y;p+=w*l;d+=w*u;g+=w*f;s+=m;c+=m*(x+(x=a));v+=m*(b+(b=i));h+=m*(_+(_=o));k(x,b,_)}function O(e){o=s=l=u=f=c=v=h=p=d=g=0;(0,i.Z)(e,w);var t=p,r=d,a=g,y=t*t+r*r+a*a;if(y<n.aW){t=c,r=v,a=h;if(s<n.Ho)t=l,r=u,a=f;y=t*t+r*r+a*a;if(y<n.aW)return[NaN,NaN]}return[(0,n.fv)(r,t)*n.RW,(0,n.ZR)(a/(0,n._b)(y))*n.RW]}},7613:function(e,t,r){"use strict";r.d(t,{m:function(){return s},Z:function(){return u}});var n=r(7620);function a(e){return function(){return e}}var i=r(39695);var o=r(49386);function s(e,t,r,a,o,s){if(!r)return;var u=(0,i.mC)(t),f=(0,i.O$)(t),c=a*r;if(o==null){o=t+a*i.BZ;s=t-c/2}else{o=l(u,o);s=l(u,s);if(a>0?o<s:o>s)o+=a*i.BZ}for(var v,h=o;a>0?h>s:h<s;h-=c){v=(0,n.Y1)([u,-f*(0,i.mC)(h),-f*(0,i.O$)(h)]);e.point(v[0],v[1])}}function l(e,t){t=(0,n.Og)(t),t[0]-=e;(0,n.iJ)(t);var r=(0,i.Kh)(-t[1]);return((-t[2]<0?-r:r)+i.BZ-i.Ho)%i.BZ}function u(){var e=a([0,0]),t=a(90),r=a(6),n,l,u={point:f};function f(e,t){n.push(e=l(e,t));e[0]*=i.RW,e[1]*=i.RW}function c(){var a=e.apply(this,arguments),f=t.apply(this,arguments)*i.uR,c=r.apply(this,arguments)*i.uR;n=[];l=(0,o.I)(-a[0]*i.uR,-a[1]*i.uR,0).invert;s(u,f,c,1);a={type:"Polygon",coordinates:[n]};n=l=null;return a}c.center=function(t){return arguments.length?(e=typeof t==="function"?t:a([+t[0],+t[1]]),c):e};c.radius=function(e){return arguments.length?(t=typeof e==="function"?e:a(+e),c):t};c.precision=function(e){return arguments.length?(r=typeof e==="function"?e:a(+e),c):r};return c}},87070:function(e,t,r){"use strict";var n=r(97023);var a=r(39695);t.Z=(0,n.Z)((function(){return true}),i,s,[-a.pi,-a.ou]);function i(e){var t=NaN,r=NaN,n=NaN,i;return{lineStart:function(){e.lineStart();i=1},point:function(s,l){var u=s>0?a.pi:-a.pi,f=(0,a.Wn)(s-t);if((0,a.Wn)(f-a.pi)<a.Ho){e.point(t,r=(r+l)/2>0?a.ou:-a.ou);e.point(n,r);e.lineEnd();e.lineStart();e.point(u,r);e.point(s,r);i=0}else if(n!==u&&f>=a.pi){if((0,a.Wn)(t-n)<a.Ho)t-=n*a.Ho;if((0,a.Wn)(s-u)<a.Ho)s-=u*a.Ho;r=o(t,r,s,l);e.point(n,r);e.lineEnd();e.lineStart();e.point(u,r);i=0}e.point(t=s,r=l);n=u},lineEnd:function(){e.lineEnd();t=r=NaN},clean:function(){return 2-i}}}function o(e,t,r,n){var i,o,s=(0,a.O$)(e-r);return(0,a.Wn)(s)>a.Ho?(0,a.z4)(((0,a.O$)(t)*(o=(0,a.mC)(n))*(0,a.O$)(r)-(0,a.O$)(n)*(i=(0,a.mC)(t))*(0,a.O$)(e))/(i*o*s)):(t+n)/2}function s(e,t,r,n){var i;if(e==null){i=r*a.ou;n.point(-a.pi,i);n.point(0,i);n.point(a.pi,i);n.point(a.pi,0);n.point(a.pi,-i);n.point(0,-i);n.point(-a.pi,-i);n.point(-a.pi,0);n.point(-a.pi,i)}else if((0,a.Wn)(e[0]-t[0])>a.Ho){var o=e[0]<t[0]?a.pi:-a.pi;i=r*o/2;n.point(-o,i);n.point(0,i);n.point(o,i)}else{n.point(t[0],t[1])}}},85272:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(73182);function a(){var e=[],t;return{point:function(e,r,n){t.push([e,r,n])},lineStart:function(){e.push(t=[])},lineEnd:n.Z,rejoin:function(){if(e.length>1)e.push(e.pop().concat(e.shift()))},result:function(){var r=e;e=[];t=null;return r}}}},1457:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(7620);var a=r(7613);var i=r(39695);var o=r(67108);var s=r(97023);function l(e){var t=(0,i.mC)(e),r=6*i.uR,l=t>0,u=(0,i.Wn)(t)>i.Ho;function f(t,n,i,o){(0,a.m)(o,e,r,i,t,n)}function c(e,r){return(0,i.mC)(e)*(0,i.mC)(r)>t}function v(e){var t,r,n,a,s;return{lineStart:function(){a=n=false;s=1},point:function(f,v){var d=[f,v],g,y=c(f,v),m=l?y?0:p(f,v):y?p(f+(f<0?i.pi:-i.pi),v):0;if(!t&&(a=n=y))e.lineStart();if(y!==n){g=h(t,d);if(!g||(0,o.Z)(t,g)||(0,o.Z)(d,g))d[2]=1}if(y!==n){s=0;if(y){e.lineStart();g=h(d,t);e.point(g[0],g[1])}else{g=h(t,d);e.point(g[0],g[1],2);e.lineEnd()}t=g}else if(u&&t&&l^y){var x;if(!(m&r)&&(x=h(d,t,true))){s=0;if(l){e.lineStart();e.point(x[0][0],x[0][1]);e.point(x[1][0],x[1][1]);e.lineEnd()}else{e.point(x[1][0],x[1][1]);e.lineEnd();e.lineStart();e.point(x[0][0],x[0][1],3)}}}if(y&&(!t||!(0,o.Z)(t,d))){e.point(d[0],d[1])}t=d,n=y,r=m},lineEnd:function(){if(n)e.lineEnd();t=null},clean:function(){return s|(a&&n)<<1}}}function h(e,r,a){var o=(0,n.Og)(e),s=(0,n.Og)(r);var l=[1,0,0],u=(0,n.T5)(o,s),f=(0,n.j9)(u,u),c=u[0],v=f-c*c;if(!v)return!a&&e;var h=t*f/v,p=-t*c/v,d=(0,n.T5)(l,u),g=(0,n.T)(l,h),y=(0,n.T)(u,p);(0,n.s0)(g,y);var m=d,x=(0,n.j9)(g,m),b=(0,n.j9)(m,m),_=x*x-b*((0,n.j9)(g,g)-1);if(_<0)return;var w=(0,i._b)(_),T=(0,n.T)(m,(-x-w)/b);(0,n.s0)(T,g);T=(0,n.Y1)(T);if(!a)return T;var k=e[0],A=r[0],M=e[1],S=r[1],E;if(A<k)E=k,k=A,A=E;var L=A-k,C=(0,i.Wn)(L-i.pi)<i.Ho,I=C||L<i.Ho;if(!C&&S<M)E=M,M=S,S=E;if(I?C?M+S>0^T[1]<((0,i.Wn)(T[0]-k)<i.Ho?M:S):M<=T[1]&&T[1]<=S:L>i.pi^(k<=T[0]&&T[0]<=A)){var P=(0,n.T)(m,(-x+w)/b);(0,n.s0)(P,g);return[T,(0,n.Y1)(P)]}}function p(t,r){var n=l?e:i.pi-e,a=0;if(t<-n)a|=1;else if(t>n)a|=2;if(r<-n)a|=4;else if(r>n)a|=8;return a}return(0,s.Z)(c,v,f,l?[0,-e]:[-i.pi,e-i.pi])}},97023:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(85272);var a=r(46225);var i=r(39695);var o=r(23071);var s=r(33064);function l(e,t,r,i){return function(l){var c=t(l),v=(0,n.Z)(),h=t(v),p=false,d,g,y;var m={point:x,lineStart:_,lineEnd:w,polygonStart:function(){m.point=T;m.lineStart=k;m.lineEnd=A;g=[];d=[]},polygonEnd:function(){m.point=x;m.lineStart=_;m.lineEnd=w;g=(0,s.TS)(g);var e=(0,o.Z)(d,i);if(g.length){if(!p)l.polygonStart(),p=true;(0,a.Z)(g,f,e,r,l)}else if(e){if(!p)l.polygonStart(),p=true;l.lineStart();r(null,null,1,l);l.lineEnd()}if(p)l.polygonEnd(),p=false;g=d=null},sphere:function(){l.polygonStart();l.lineStart();r(null,null,1,l);l.lineEnd();l.polygonEnd()}};function x(t,r){if(e(t,r))l.point(t,r)}function b(e,t){c.point(e,t)}function _(){m.point=b;c.lineStart()}function w(){m.point=x;c.lineEnd()}function T(e,t){y.push([e,t]);h.point(e,t)}function k(){h.lineStart();y=[]}function A(){T(y[0][0],y[0][1]);h.lineEnd();var e=h.clean(),t=v.result(),r,n=t.length,a,i,o;y.pop();d.push(y);y=null;if(!n)return;if(e&1){i=t[0];if((a=i.length-1)>0){if(!p)l.polygonStart(),p=true;l.lineStart();for(r=0;r<a;++r)l.point((o=i[r])[0],o[1]);l.lineEnd()}return}if(n>1&&e&2)t.push(t.pop().concat(t.shift()));g.push(t.filter(u))}return m}}function u(e){return e.length>1}function f(e,t){return((e=e.x)[0]<0?e[1]-i.ou-i.Ho:i.ou-e[1])-((t=t.x)[0]<0?t[1]-i.ou-i.Ho:i.ou-t[1])}},87605:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var n=r(39695);var a=r(85272);function i(e,t,r,n,a,i){var o=e[0],s=e[1],l=t[0],u=t[1],f=0,c=1,v=l-o,h=u-s,p;p=r-o;if(!v&&p>0)return;p/=v;if(v<0){if(p<f)return;if(p<c)c=p}else if(v>0){if(p>c)return;if(p>f)f=p}p=a-o;if(!v&&p<0)return;p/=v;if(v<0){if(p>c)return;if(p>f)f=p}else if(v>0){if(p<f)return;if(p<c)c=p}p=n-s;if(!h&&p>0)return;p/=h;if(h<0){if(p<f)return;if(p<c)c=p}else if(h>0){if(p>c)return;if(p>f)f=p}p=i-s;if(!h&&p<0)return;p/=h;if(h<0){if(p>c)return;if(p>f)f=p}else if(h>0){if(p<f)return;if(p<c)c=p}if(f>0)e[0]=o+f*v,e[1]=s+f*h;if(c<1)t[0]=o+c*v,t[1]=s+c*h;return true}var o=r(46225);var s=r(33064);var l=1e9,u=-l;function f(e,t,r,f){function c(n,a){return e<=n&&n<=r&&t<=a&&a<=f}function v(n,a,i,o){var s=0,l=0;if(n==null||(s=h(n,i))!==(l=h(a,i))||d(n,a)<0^i>0){do{o.point(s===0||s===3?e:r,s>1?f:t)}while((s=(s+i+4)%4)!==l)}else{o.point(a[0],a[1])}}function h(a,i){return(0,n.Wn)(a[0]-e)<n.Ho?i>0?0:3:(0,n.Wn)(a[0]-r)<n.Ho?i>0?2:1:(0,n.Wn)(a[1]-t)<n.Ho?i>0?1:0:i>0?3:2}function p(e,t){return d(e.x,t.x)}function d(e,t){var r=h(e,1),n=h(t,1);return r!==n?r-n:r===0?t[1]-e[1]:r===1?e[0]-t[0]:r===2?e[1]-t[1]:t[0]-e[0]}return function(n){var h=n,d=(0,a.Z)(),g,y,m,x,b,_,w,T,k,A,M;var S={point:E,lineStart:P,lineEnd:O,polygonStart:C,polygonEnd:I};function E(e,t){if(c(e,t))h.point(e,t)}function L(){var t=0;for(var r=0,n=y.length;r<n;++r){for(var a=y[r],i=1,o=a.length,s=a[0],l,u,c=s[0],v=s[1];i<o;++i){l=c,u=v,s=a[i],c=s[0],v=s[1];if(u<=f){if(v>f&&(c-l)*(f-u)>(v-u)*(e-l))++t}else{if(v<=f&&(c-l)*(f-u)<(v-u)*(e-l))--t}}}return t}function C(){h=d,g=[],y=[],M=true}function I(){var e=L(),t=M&&e,r=(g=(0,s.TS)(g)).length;if(t||r){n.polygonStart();if(t){n.lineStart();v(null,null,1,n);n.lineEnd()}if(r){(0,o.Z)(g,p,e,v,n)}n.polygonEnd()}h=n,g=y=m=null}function P(){S.point=D;if(y)y.push(m=[]);A=true;k=false;w=T=NaN}function O(){if(g){D(x,b);if(_&&k)d.rejoin();g.push(d.result())}S.point=E;if(k)h.lineEnd()}function D(n,a){var o=c(n,a);if(y)m.push([n,a]);if(A){x=n,b=a,_=o;A=false;if(o){h.lineStart();h.point(n,a)}}else{if(o&&k)h.point(n,a);else{var s=[w=Math.max(u,Math.min(l,w)),T=Math.max(u,Math.min(l,T))],v=[n=Math.max(u,Math.min(l,n)),a=Math.max(u,Math.min(l,a))];if(i(s,v,e,t,r,f)){if(!k){h.lineStart();h.point(s[0],s[1])}h.point(v[0],v[1]);if(!o)h.lineEnd();M=false}else if(o){h.lineStart();h.point(n,a);M=false}}}w=n,T=a,k=o}return S}}},46225:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(67108);var a=r(39695);function i(e,t,r,n){this.x=e;this.z=t;this.o=r;this.e=n;this.v=false;this.n=this.p=null}function o(e,t,r,o,l){var u=[],f=[],c,v;e.forEach((function(e){if((t=e.length-1)<=0)return;var t,r=e[0],o=e[t],s;if((0,n.Z)(r,o)){if(!r[2]&&!o[2]){l.lineStart();for(c=0;c<t;++c)l.point((r=e[c])[0],r[1]);l.lineEnd();return}o[0]+=2*a.Ho}u.push(s=new i(r,e,null,true));f.push(s.o=new i(r,null,s,false));u.push(s=new i(o,e,null,false));f.push(s.o=new i(o,null,s,true))}));if(!u.length)return;f.sort(t);s(u);s(f);for(c=0,v=f.length;c<v;++c){f[c].e=r=!r}var h=u[0],p,d;while(1){var g=h,y=true;while(g.v)if((g=g.n)===h)return;p=g.z;l.lineStart();do{g.v=g.o.v=true;if(g.e){if(y){for(c=0,v=p.length;c<v;++c)l.point((d=p[c])[0],d[1])}else{o(g.x,g.n.x,1,l)}g=g.n}else{if(y){p=g.p.z;for(c=p.length-1;c>=0;--c)l.point((d=p[c])[0],d[1])}else{o(g.x,g.p.x,-1,l)}g=g.p}g=g.o;p=g.z;y=!y}while(!g.v);l.lineEnd()}}function s(e){if(!(t=e.length))return;var t,r=0,n=e[0],a;while(++r<t){n.n=a=e[r];a.p=n;n=a}n.n=a=e[0];a.p=n}},96059:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});function n(e,t){function r(r,n){return r=e(r,n),t(r[0],r[1])}if(e.invert&&t.invert)r.invert=function(r,n){return r=t.invert(r,n),r&&e.invert(r[0],r[1])};return r}},8593:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});function n(e){return e}},27362:function(e,t,r){"use strict";r.r(t);r.d(t,{geoAlbers:function(){return Ye},geoAlbersUsa:function(){return Je},geoArea:function(){return n.ZP},geoAzimuthalEqualArea:function(){return Ke.Z},geoAzimuthalEqualAreaRaw:function(){return Ke.l},geoAzimuthalEquidistant:function(){return $e.Z},geoAzimuthalEquidistantRaw:function(){return $e.N},geoBounds:function(){return a.Z},geoCentroid:function(){return i.Z},geoCircle:function(){return o.Z},geoClipAntimeridian:function(){return s.Z},geoClipCircle:function(){return l.Z},geoClipExtent:function(){return f},geoClipRectangle:function(){return u.Z},geoConicConformal:function(){return it},geoConicConformalRaw:function(){return at},geoConicEqualArea:function(){return Ze},geoConicEqualAreaRaw:function(){return Ge},geoConicEquidistant:function(){return lt},geoConicEquidistantRaw:function(){return st},geoContains:function(){return F},geoDistance:function(){return E},geoEqualEarth:function(){return gt},geoEqualEarthRaw:function(){return dt},geoEquirectangular:function(){return ot.Z},geoEquirectangularRaw:function(){return ot.k},geoGnomonic:function(){return yt.Z},geoGnomonicRaw:function(){return yt.M},geoGraticule:function(){return U},geoGraticule10:function(){return V},geoIdentity:function(){return xt},geoInterpolate:function(){return H.Z},geoLength:function(){return A},geoMercator:function(){return tt},geoMercatorRaw:function(){return et},geoNaturalEarth1:function(){return bt.Z},geoNaturalEarth1Raw:function(){return bt.K},geoOrthographic:function(){return _t.Z},geoOrthographicRaw:function(){return _t.I},geoPath:function(){return Ue},geoProjection:function(){return Ve.Z},geoProjectionMutator:function(){return Ve.r},geoRotation:function(){return Qe.Z},geoStereographic:function(){return kt},geoStereographicRaw:function(){return Tt},geoStream:function(){return d.Z},geoTransform:function(){return mt.Z},geoTransverseMercator:function(){return Mt},geoTransverseMercatorRaw:function(){return At}});var n=r(97860);var a=r(77338);var i=r(66624);var o=r(7613);var s=r(87070);var l=r(1457);var u=r(87605);function f(){var e=0,t=0,r=960,n=500,a,i,o;return o={stream:function(o){return a&&i===o?a:a=(0,u.Z)(e,t,r,n)(i=o)},extent:function(s){return arguments.length?(e=+s[0][0],t=+s[0][1],r=+s[1][0],n=+s[1][1],a=i=null,o):[[e,t],[r,n]]}}}var c=r(23071);var v=r(33940);var h=r(39695);var p=r(73182);var d=r(72736);var g=(0,v.Z)(),y,m,x;var b={sphere:p.Z,point:p.Z,lineStart:_,lineEnd:p.Z,polygonStart:p.Z,polygonEnd:p.Z};function _(){b.point=T;b.lineEnd=w}function w(){b.point=b.lineEnd=p.Z}function T(e,t){e*=h.uR,t*=h.uR;y=e,m=(0,h.O$)(t),x=(0,h.mC)(t);b.point=k}function k(e,t){e*=h.uR,t*=h.uR;var r=(0,h.O$)(t),n=(0,h.mC)(t),a=(0,h.Wn)(e-y),i=(0,h.mC)(a),o=(0,h.O$)(a),s=n*o,l=x*r-m*n*i,u=m*r+x*n*i;g.add((0,h.fv)((0,h._b)(s*s+l*l),u));y=e,m=r,x=n}function A(e){g.reset();(0,d.Z)(e,b);return+g}var M=[null,null],S={type:"LineString",coordinates:M};function E(e,t){M[0]=e;M[1]=t;return A(S)}var L={Feature:function(e,t){return I(e.geometry,t)},FeatureCollection:function(e,t){var r=e.features,n=-1,a=r.length;while(++n<a)if(I(r[n].geometry,t))return true;return false}};var C={Sphere:function(){return true},Point:function(e,t){return P(e.coordinates,t)},MultiPoint:function(e,t){var r=e.coordinates,n=-1,a=r.length;while(++n<a)if(P(r[n],t))return true;return false},LineString:function(e,t){return O(e.coordinates,t)},MultiLineString:function(e,t){var r=e.coordinates,n=-1,a=r.length;while(++n<a)if(O(r[n],t))return true;return false},Polygon:function(e,t){return D(e.coordinates,t)},MultiPolygon:function(e,t){var r=e.coordinates,n=-1,a=r.length;while(++n<a)if(D(r[n],t))return true;return false},GeometryCollection:function(e,t){var r=e.geometries,n=-1,a=r.length;while(++n<a)if(I(r[n],t))return true;return false}};function I(e,t){return e&&C.hasOwnProperty(e.type)?C[e.type](e,t):false}function P(e,t){return E(e,t)===0}function O(e,t){var r,n,a;for(var i=0,o=e.length;i<o;i++){n=E(e[i],t);if(n===0)return true;if(i>0){a=E(e[i],e[i-1]);if(a>0&&r<=a&&n<=a&&(r+n-a)*(1-Math.pow((r-n)/a,2))<h.aW*a)return true}r=n}return false}function D(e,t){return!!(0,c.Z)(e.map(z),R(t))}function z(e){return e=e.map(R),e.pop(),e}function R(e){return[e[0]*h.uR,e[1]*h.uR]}function F(e,t){return(e&&L.hasOwnProperty(e.type)?L[e.type]:I)(e,t)}var B=r(33064);function N(e,t,r){var n=(0,B.w6)(e,t-h.Ho,r).concat(t);return function(e){return n.map((function(t){return[e,t]}))}}function j(e,t,r){var n=(0,B.w6)(e,t-h.Ho,r).concat(t);return function(e){return n.map((function(t){return[t,e]}))}}function U(){var e,t,r,n,a,i,o,s,l=10,u=l,f=90,c=360,v,p,d,g,y=2.5;function m(){return{type:"MultiLineString",coordinates:x()}}function x(){return(0,B.w6)((0,h.mD)(n/f)*f,r,f).map(d).concat((0,B.w6)((0,h.mD)(s/c)*c,o,c).map(g)).concat((0,B.w6)((0,h.mD)(t/l)*l,e,l).filter((function(e){return(0,h.Wn)(e%f)>h.Ho})).map(v)).concat((0,B.w6)((0,h.mD)(i/u)*u,a,u).filter((function(e){return(0,h.Wn)(e%c)>h.Ho})).map(p))}m.lines=function(){return x().map((function(e){return{type:"LineString",coordinates:e}}))};m.outline=function(){return{type:"Polygon",coordinates:[d(n).concat(g(o).slice(1),d(r).reverse().slice(1),g(s).reverse().slice(1))]}};m.extent=function(e){if(!arguments.length)return m.extentMinor();return m.extentMajor(e).extentMinor(e)};m.extentMajor=function(e){if(!arguments.length)return[[n,s],[r,o]];n=+e[0][0],r=+e[1][0];s=+e[0][1],o=+e[1][1];if(n>r)e=n,n=r,r=e;if(s>o)e=s,s=o,o=e;return m.precision(y)};m.extentMinor=function(r){if(!arguments.length)return[[t,i],[e,a]];t=+r[0][0],e=+r[1][0];i=+r[0][1],a=+r[1][1];if(t>e)r=t,t=e,e=r;if(i>a)r=i,i=a,a=r;return m.precision(y)};m.step=function(e){if(!arguments.length)return m.stepMinor();return m.stepMajor(e).stepMinor(e)};m.stepMajor=function(e){if(!arguments.length)return[f,c];f=+e[0],c=+e[1];return m};m.stepMinor=function(e){if(!arguments.length)return[l,u];l=+e[0],u=+e[1];return m};m.precision=function(l){if(!arguments.length)return y;y=+l;v=N(i,a,90);p=j(t,e,y);d=N(s,o,90);g=j(n,r,y);return m};return m.extentMajor([[-180,-90+h.Ho],[180,90-h.Ho]]).extentMinor([[-180,-80-h.Ho],[180,80+h.Ho]])}function V(){return U()()}var H=r(83074);var q=r(8593);var G=(0,v.Z)(),Z=(0,v.Z)(),Y,W,X,J;var K={point:p.Z,lineStart:p.Z,lineEnd:p.Z,polygonStart:function(){K.lineStart=$;K.lineEnd=te},polygonEnd:function(){K.lineStart=K.lineEnd=K.point=p.Z;G.add((0,h.Wn)(Z));Z.reset()},result:function(){var e=G/2;G.reset();return e}};function $(){K.point=Q}function Q(e,t){K.point=ee;Y=X=e,W=J=t}function ee(e,t){Z.add(J*e-X*t);X=e,J=t}function te(){ee(Y,W)}var re=K;var ne=r(3559);var ae=0,ie=0,oe=0,se=0,le=0,ue=0,fe=0,ce=0,ve=0,he,pe,de,ge;var ye={point:me,lineStart:xe,lineEnd:we,polygonStart:function(){ye.lineStart=Te;ye.lineEnd=ke},polygonEnd:function(){ye.point=me;ye.lineStart=xe;ye.lineEnd=we},result:function(){var e=ve?[fe/ve,ce/ve]:ue?[se/ue,le/ue]:oe?[ae/oe,ie/oe]:[NaN,NaN];ae=ie=oe=se=le=ue=fe=ce=ve=0;return e}};function me(e,t){ae+=e;ie+=t;++oe}function xe(){ye.point=be}function be(e,t){ye.point=_e;me(de=e,ge=t)}function _e(e,t){var r=e-de,n=t-ge,a=(0,h._b)(r*r+n*n);se+=a*(de+e)/2;le+=a*(ge+t)/2;ue+=a;me(de=e,ge=t)}function we(){ye.point=me}function Te(){ye.point=Ae}function ke(){Me(he,pe)}function Ae(e,t){ye.point=Me;me(he=de=e,pe=ge=t)}function Me(e,t){var r=e-de,n=t-ge,a=(0,h._b)(r*r+n*n);se+=a*(de+e)/2;le+=a*(ge+t)/2;ue+=a;a=ge*e-de*t;fe+=a*(de+e);ce+=a*(ge+t);ve+=a*3;me(de=e,ge=t)}var Se=ye;function Ee(e){this._context=e}Ee.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line===0)this._context.closePath();this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t);this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t);this._context.arc(e,t,this._radius,0,h.BZ);break}}},result:p.Z};var Le=(0,v.Z)(),Ce,Ie,Pe,Oe,De;var ze={point:p.Z,lineStart:function(){ze.point=Re},lineEnd:function(){if(Ce)Fe(Ie,Pe);ze.point=p.Z},polygonStart:function(){Ce=true},polygonEnd:function(){Ce=null},result:function(){var e=+Le;Le.reset();return e}};function Re(e,t){ze.point=Fe;Ie=Oe=e,Pe=De=t}function Fe(e,t){Oe-=e,De-=t;Le.add((0,h._b)(Oe*Oe+De*De));Oe=e,De=t}var Be=ze;function Ne(){this._string=[]}Ne.prototype={_radius:4.5,_circle:je(4.5),pointRadius:function(e){if((e=+e)!==this._radius)this._radius=e,this._circle=null;return this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line===0)this._string.push("Z");this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t);this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{if(this._circle==null)this._circle=je(this._radius);this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");this._string=[];return e}else{return null}}};function je(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Ue(e,t){var r=4.5,n,a;function i(e){if(e){if(typeof r==="function")a.pointRadius(+r.apply(this,arguments));(0,d.Z)(e,n(a))}return a.result()}i.area=function(e){(0,d.Z)(e,n(re));return re.result()};i.measure=function(e){(0,d.Z)(e,n(Be));return Be.result()};i.bounds=function(e){(0,d.Z)(e,n(ne.Z));return ne.Z.result()};i.centroid=function(e){(0,d.Z)(e,n(Se));return Se.result()};i.projection=function(t){return arguments.length?(n=t==null?(e=null,q.Z):(e=t).stream,i):e};i.context=function(e){if(!arguments.length)return t;a=e==null?(t=null,new Ne):new Ee(t=e);if(typeof r!=="function")a.pointRadius(r);return i};i.pointRadius=function(e){if(!arguments.length)return r;r=typeof e==="function"?e:(a.pointRadius(+e),+e);return i};return i.projection(e).context(t)}var Ve=r(15002);function He(e){var t=0,r=h.pi/3,n=(0,Ve.r)(e),a=n(t,r);a.parallels=function(e){return arguments.length?n(t=e[0]*h.uR,r=e[1]*h.uR):[t*h.RW,r*h.RW]};return a}function qe(e){var t=(0,h.mC)(e);function r(e,r){return[e*t,(0,h.O$)(r)/t]}r.invert=function(e,r){return[e/t,(0,h.ZR)(r*t)]};return r}function Ge(e,t){var r=(0,h.O$)(e),n=(r+(0,h.O$)(t))/2;if((0,h.Wn)(n)<h.Ho)return qe(e);var a=1+r*(2*n-r),i=(0,h._b)(a)/n;function o(e,t){var r=(0,h._b)(a-2*n*(0,h.O$)(t))/n;return[r*(0,h.O$)(e*=n),i-r*(0,h.mC)(e)]}o.invert=function(e,t){var r=i-t,o=(0,h.fv)(e,(0,h.Wn)(r))*(0,h.Xx)(r);if(r*n<0)o-=h.pi*(0,h.Xx)(e)*(0,h.Xx)(r);return[o/n,(0,h.ZR)((a-(e*e+r*r)*n*n)/(2*n))]};return o}function Ze(){return He(Ge).scale(155.424).center([0,33.6442])}function Ye(){return Ze().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var We=r(47589);function Xe(e){var t=e.length;return{point:function(r,n){var a=-1;while(++a<t)e[a].point(r,n)},sphere:function(){var r=-1;while(++r<t)e[r].sphere()},lineStart:function(){var r=-1;while(++r<t)e[r].lineStart()},lineEnd:function(){var r=-1;while(++r<t)e[r].lineEnd()},polygonStart:function(){var r=-1;while(++r<t)e[r].polygonStart()},polygonEnd:function(){var r=-1;while(++r<t)e[r].polygonEnd()}}}function Je(){var e,t,r=Ye(),n,a=Ze().rotate([154,0]).center([-2,58.5]).parallels([55,65]),i,o=Ze().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,l,u={point:function(e,t){l=[e,t]}};function f(e){var t=e[0],r=e[1];return l=null,(n.point(t,r),l)||(i.point(t,r),l)||(s.point(t,r),l)}f.invert=function(e){var t=r.scale(),n=r.translate(),i=(e[0]-n[0])/t,s=(e[1]-n[1])/t;return(s>=.12&&s<.234&&i>=-.425&&i<-.214?a:s>=.166&&s<.234&&i>=-.214&&i<-.115?o:r).invert(e)};f.stream=function(n){return e&&t===n?e:e=Xe([r.stream(t=n),a.stream(n),o.stream(n)])};f.precision=function(e){if(!arguments.length)return r.precision();r.precision(e),a.precision(e),o.precision(e);return c()};f.scale=function(e){if(!arguments.length)return r.scale();r.scale(e),a.scale(e*.35),o.scale(e);return f.translate(r.translate())};f.translate=function(e){if(!arguments.length)return r.translate();var t=r.scale(),l=+e[0],f=+e[1];n=r.translate(e).clipExtent([[l-.455*t,f-.238*t],[l+.455*t,f+.238*t]]).stream(u);i=a.translate([l-.307*t,f+.201*t]).clipExtent([[l-.425*t+h.Ho,f+.12*t+h.Ho],[l-.214*t-h.Ho,f+.234*t-h.Ho]]).stream(u);s=o.translate([l-.205*t,f+.212*t]).clipExtent([[l-.214*t+h.Ho,f+.166*t+h.Ho],[l-.115*t-h.Ho,f+.234*t-h.Ho]]).stream(u);return c()};f.fitExtent=function(e,t){return(0,We.qg)(f,e,t)};f.fitSize=function(e,t){return(0,We.mF)(f,e,t)};f.fitWidth=function(e,t){return(0,We.V6)(f,e,t)};f.fitHeight=function(e,t){return(0,We.rf)(f,e,t)};function c(){e=t=null;return f}return f.scale(1070)}var Ke=r(12956);var $e=r(17889);var Qe=r(49386);function et(e,t){return[e,(0,h.cM)((0,h.OR)((h.ou+t)/2))]}et.invert=function(e,t){return[e,2*(0,h.z4)((0,h.Qq)(t))-h.ou]};function tt(){return rt(et).scale(961/h.BZ)}function rt(e){var t=(0,Ve.Z)(e),r=t.center,n=t.scale,a=t.translate,i=t.clipExtent,o=null,s,l,u;t.scale=function(e){return arguments.length?(n(e),f()):n()};t.translate=function(e){return arguments.length?(a(e),f()):a()};t.center=function(e){return arguments.length?(r(e),f()):r()};t.clipExtent=function(e){return arguments.length?(e==null?o=s=l=u=null:(o=+e[0][0],s=+e[0][1],l=+e[1][0],u=+e[1][1]),f()):o==null?null:[[o,s],[l,u]]};function f(){var r=h.pi*n(),a=t((0,Qe.Z)(t.rotate()).invert([0,0]));return i(o==null?[[a[0]-r,a[1]-r],[a[0]+r,a[1]+r]]:e===et?[[Math.max(a[0]-r,o),s],[Math.min(a[0]+r,l),u]]:[[o,Math.max(a[1]-r,s)],[l,Math.min(a[1]+r,u)]])}return f()}function nt(e){return(0,h.OR)((h.ou+e)/2)}function at(e,t){var r=(0,h.mC)(e),n=e===t?(0,h.O$)(e):(0,h.cM)(r/(0,h.mC)(t))/(0,h.cM)(nt(t)/nt(e)),a=r*(0,h.sQ)(nt(e),n)/n;if(!n)return et;function i(e,t){if(a>0){if(t<-h.ou+h.Ho)t=-h.ou+h.Ho}else{if(t>h.ou-h.Ho)t=h.ou-h.Ho}var r=a/(0,h.sQ)(nt(t),n);return[r*(0,h.O$)(n*e),a-r*(0,h.mC)(n*e)]}i.invert=function(e,t){var r=a-t,i=(0,h.Xx)(n)*(0,h._b)(e*e+r*r),o=(0,h.fv)(e,(0,h.Wn)(r))*(0,h.Xx)(r);if(r*n<0)o-=h.pi*(0,h.Xx)(e)*(0,h.Xx)(r);return[o/n,2*(0,h.z4)((0,h.sQ)(a/i,1/n))-h.ou]};return i}function it(){return He(at).scale(109.5).parallels([30,30])}var ot=r(97492);function st(e,t){var r=(0,h.mC)(e),n=e===t?(0,h.O$)(e):(r-(0,h.mC)(t))/(t-e),a=r/n+e;if((0,h.Wn)(n)<h.Ho)return ot.k;function i(e,t){var r=a-t,i=n*e;return[r*(0,h.O$)(i),a-r*(0,h.mC)(i)]}i.invert=function(e,t){var r=a-t,i=(0,h.fv)(e,(0,h.Wn)(r))*(0,h.Xx)(r);if(r*n<0)i-=h.pi*(0,h.Xx)(e)*(0,h.Xx)(r);return[i/n,a-(0,h.Xx)(n)*(0,h._b)(e*e+r*r)]};return i}function lt(){return He(st).scale(131.154).center([0,13.9389])}var ut=1.340264,ft=-.081106,ct=893e-6,vt=.003796,ht=(0,h._b)(3)/2,pt=12;function dt(e,t){var r=(0,h.ZR)(ht*(0,h.O$)(t)),n=r*r,a=n*n*n;return[e*(0,h.mC)(r)/(ht*(ut+3*ft*n+a*(7*ct+9*vt*n))),r*(ut+ft*n+a*(ct+vt*n))]}dt.invert=function(e,t){var r=t,n=r*r,a=n*n*n;for(var i=0,o,s,l;i<pt;++i){s=r*(ut+ft*n+a*(ct+vt*n))-t;l=ut+3*ft*n+a*(7*ct+9*vt*n);r-=o=s/l,n=r*r,a=n*n*n;if((0,h.Wn)(o)<h.aW)break}return[ht*e*(ut+3*ft*n+a*(7*ct+9*vt*n))/(0,h.mC)(r),(0,h.ZR)((0,h.O$)(r)/ht)]};function gt(){return(0,Ve.Z)(dt).scale(177.158)}var yt=r(98936);var mt=r(64684);function xt(){var e=1,t=0,r=0,n=1,a=1,i=0,o,s,l=null,f,c,v,p=1,d=1,g=(0,mt.l)({point:function(e,t){var r=_([e,t]);this.stream.point(r[0],r[1])}}),y=q.Z,m,x;function b(){p=e*n;d=e*a;m=x=null;return _}function _(e){var n=e[0]*p,a=e[1]*d;if(i){var l=a*o-n*s;n=n*o+a*s;a=l}return[n+t,a+r]}_.invert=function(e){var n=e[0]-t,a=e[1]-r;if(i){var l=a*o+n*s;n=n*o-a*s;a=l}return[n/p,a/d]};_.stream=function(e){return m&&x===e?m:m=g(y(x=e))};_.postclip=function(e){return arguments.length?(y=e,l=f=c=v=null,b()):y};_.clipExtent=function(e){return arguments.length?(y=e==null?(l=f=c=v=null,q.Z):(0,u.Z)(l=+e[0][0],f=+e[0][1],c=+e[1][0],v=+e[1][1]),b()):l==null?null:[[l,f],[c,v]]};_.scale=function(t){return arguments.length?(e=+t,b()):e};_.translate=function(e){return arguments.length?(t=+e[0],r=+e[1],b()):[t,r]};_.angle=function(e){return arguments.length?(i=e%360*h.uR,s=(0,h.O$)(i),o=(0,h.mC)(i),b()):i*h.RW};_.reflectX=function(e){return arguments.length?(n=e?-1:1,b()):n<0};_.reflectY=function(e){return arguments.length?(a=e?-1:1,b()):a<0};_.fitExtent=function(e,t){return(0,We.qg)(_,e,t)};_.fitSize=function(e,t){return(0,We.mF)(_,e,t)};_.fitWidth=function(e,t){return(0,We.V6)(_,e,t)};_.fitHeight=function(e,t){return(0,We.rf)(_,e,t)};return _}var bt=r(26867);var _t=r(57962);var wt=r(25382);function Tt(e,t){var r=(0,h.mC)(t),n=1+(0,h.mC)(e)*r;return[r*(0,h.O$)(e)/n,(0,h.O$)(t)/n]}Tt.invert=(0,wt.O)((function(e){return 2*(0,h.z4)(e)}));function kt(){return(0,Ve.Z)(Tt).scale(250).clipAngle(142)}function At(e,t){return[(0,h.cM)((0,h.OR)((h.ou+t)/2)),-e]}At.invert=function(e,t){return[-t,2*(0,h.z4)((0,h.Qq)(e))-h.ou]};function Mt(){var e=rt(At),t=e.center,r=e.rotate;e.center=function(e){return arguments.length?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])};e.rotate=function(e){return arguments.length?r([e[0],e[1],e.length>2?e[2]+90:90]):(e=r(),[e[0],e[1],e[2]-90])};return r([0,0,90]).scale(159.155)}},83074:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(39695);function a(e,t){var r=e[0]*n.uR,a=e[1]*n.uR,i=t[0]*n.uR,o=t[1]*n.uR,s=(0,n.mC)(a),l=(0,n.O$)(a),u=(0,n.mC)(o),f=(0,n.O$)(o),c=s*(0,n.mC)(r),v=s*(0,n.O$)(r),h=u*(0,n.mC)(i),p=u*(0,n.O$)(i),d=2*(0,n.ZR)((0,n._b)((0,n.Jy)(o-a)+s*u*(0,n.Jy)(i-r))),g=(0,n.O$)(d);var y=d?function(e){var t=(0,n.O$)(e*=d)/g,r=(0,n.O$)(d-e)/g,a=r*c+t*h,i=r*v+t*p,o=r*l+t*f;return[(0,n.fv)(i,a)*n.RW,(0,n.fv)(o,(0,n._b)(a*a+i*i))*n.RW]}:function(){return[r*n.RW,a*n.RW]};y.distance=d;return y}},39695:function(e,t,r){"use strict";r.d(t,{BZ:function(){return l},Ho:function(){return n},Jy:function(){return M},Kh:function(){return k},O$:function(){return b},OR:function(){return T},Qq:function(){return g},RW:function(){return u},Wn:function(){return c},Xx:function(){return _},ZR:function(){return A},_b:function(){return w},aW:function(){return a},cM:function(){return m},fv:function(){return h},mC:function(){return p},mD:function(){return d},ou:function(){return o},pi:function(){return i},pu:function(){return s},sQ:function(){return x},uR:function(){return f},z4:function(){return v}});var n=1e-6;var a=1e-12;var i=Math.PI;var o=i/2;var s=i/4;var l=i*2;var u=180/i;var f=i/180;var c=Math.abs;var v=Math.atan;var h=Math.atan2;var p=Math.cos;var d=Math.ceil;var g=Math.exp;var y=Math.floor;var m=Math.log;var x=Math.pow;var b=Math.sin;var _=Math.sign||function(e){return e>0?1:e<0?-1:0};var w=Math.sqrt;var T=Math.tan;function k(e){return e>1?0:e<-1?i:Math.acos(e)}function A(e){return e>1?o:e<-1?-o:Math.asin(e)}function M(e){return(e=b(e/2))*e}},73182:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});function n(){}},3559:function(e,t,r){"use strict";var n=r(73182);var a=Infinity,i=a,o=-a,s=o;var l={point:u,lineStart:n.Z,lineEnd:n.Z,polygonStart:n.Z,polygonEnd:n.Z,result:function(){var e=[[a,i],[o,s]];o=s=-(i=a=Infinity);return e}};function u(e,t){if(e<a)a=e;if(e>o)o=e;if(t<i)i=t;if(t>s)s=t}t.Z=l},67108:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(39695);function a(e,t){return(0,n.Wn)(e[0]-t[0])<n.Ho&&(0,n.Wn)(e[1]-t[1])<n.Ho}},23071:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(33940);var a=r(7620);var i=r(39695);var o=(0,n.Z)();function s(e){if((0,i.Wn)(e[0])<=i.pi)return e[0];else return(0,i.Xx)(e[0])*(((0,i.Wn)(e[0])+i.pi)%i.BZ-i.pi)}function l(e,t){var r=s(t),n=t[1],l=(0,i.O$)(n),u=[(0,i.O$)(r),-(0,i.mC)(r),0],f=0,c=0;o.reset();if(l===1)n=i.ou+i.Ho;else if(l===-1)n=-i.ou-i.Ho;for(var v=0,h=e.length;v<h;++v){if(!(d=(p=e[v]).length))continue;var p,d,g=p[d-1],y=s(g),m=g[1]/2+i.pu,x=(0,i.O$)(m),b=(0,i.mC)(m);for(var _=0;_<d;++_,y=T,x=A,b=M,g=w){var w=p[_],T=s(w),k=w[1]/2+i.pu,A=(0,i.O$)(k),M=(0,i.mC)(k),S=T-y,E=S>=0?1:-1,L=E*S,C=L>i.pi,I=x*A;o.add((0,i.fv)(I*E*(0,i.O$)(L),b*M+I*(0,i.mC)(L)));f+=C?S+E*i.BZ:S;if(C^y>=r^T>=r){var P=(0,a.T5)((0,a.Og)(g),(0,a.Og)(w));(0,a.iJ)(P);var O=(0,a.T5)(u,P);(0,a.iJ)(O);var D=(C^S>=0?-1:1)*(0,i.ZR)(O[2]);if(n>D||n===D&&(P[0]||P[1])){c+=C^S>=0?1:-1}}}}return(f<-i.Ho||f<i.Ho&&o<-i.Ho)^c&1}},25382:function(e,t,r){"use strict";r.d(t,{O:function(){return i},W:function(){return a}});var n=r(39695);function a(e){return function(t,r){var a=(0,n.mC)(t),i=(0,n.mC)(r),o=e(a*i);return[o*i*(0,n.O$)(t),o*(0,n.O$)(r)]}}function i(e){return function(t,r){var a=(0,n._b)(t*t+r*r),i=e(a),o=(0,n.O$)(i),s=(0,n.mC)(i);return[(0,n.fv)(t*o,a*s),(0,n.ZR)(a&&r*o/a)]}}},12956:function(e,t,r){"use strict";r.d(t,{Z:function(){return s},l:function(){return o}});var n=r(39695);var a=r(25382);var i=r(15002);var o=(0,a.W)((function(e){return(0,n._b)(2/(1+e))}));o.invert=(0,a.O)((function(e){return 2*(0,n.ZR)(e/2)}));function s(){return(0,i.Z)(o).scale(124.75).clipAngle(180-.001)}},17889:function(e,t,r){"use strict";r.d(t,{N:function(){return o},Z:function(){return s}});var n=r(39695);var a=r(25382);var i=r(15002);var o=(0,a.W)((function(e){return(e=(0,n.Kh)(e))&&e/(0,n.O$)(e)}));o.invert=(0,a.O)((function(e){return e}));function s(){return(0,i.Z)(o).scale(79.4188).clipAngle(180-.001)}},97492:function(e,t,r){"use strict";r.d(t,{Z:function(){return i},k:function(){return a}});var n=r(15002);function a(e,t){return[e,t]}a.invert=a;function i(){return(0,n.Z)(a).scale(152.63)}},47589:function(e,t,r){"use strict";r.d(t,{V6:function(){return l},mF:function(){return s},qg:function(){return o},rf:function(){return u}});var n=r(72736);var a=r(3559);function i(e,t,r){var i=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]);if(i!=null)e.clipExtent(null);(0,n.Z)(r,e.stream(a.Z));t(a.Z.result());if(i!=null)e.clipExtent(i);return e}function o(e,t,r){return i(e,(function(r){var n=t[1][0]-t[0][0],a=t[1][1]-t[0][1],i=Math.min(n/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),o=+t[0][0]+(n-i*(r[1][0]+r[0][0]))/2,s=+t[0][1]+(a-i*(r[1][1]+r[0][1]))/2;e.scale(150*i).translate([o,s])}),r)}function s(e,t,r){return o(e,[[0,0],t],r)}function l(e,t,r){return i(e,(function(r){var n=+t,a=n/(r[1][0]-r[0][0]),i=(n-a*(r[1][0]+r[0][0]))/2,o=-a*r[0][1];e.scale(150*a).translate([i,o])}),r)}function u(e,t,r){return i(e,(function(r){var n=+t,a=n/(r[1][1]-r[0][1]),i=-a*r[0][0],o=(n-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([i,o])}),r)}},98936:function(e,t,r){"use strict";r.d(t,{M:function(){return o},Z:function(){return s}});var n=r(39695);var a=r(25382);var i=r(15002);function o(e,t){var r=(0,n.mC)(t),a=(0,n.mC)(e)*r;return[r*(0,n.O$)(e)/a,(0,n.O$)(t)/a]}o.invert=(0,a.O)(n.z4);function s(){return(0,i.Z)(o).scale(144.049).clipAngle(60)}},15002:function(e,t,r){"use strict";r.d(t,{Z:function(){return w},r:function(){return T}});var n=r(87070);var a=r(1457);var i=r(87605);var o=r(96059);var s=r(8593);var l=r(39695);var u=r(49386);var f=r(64684);var c=r(47589);var v=r(7620);var h=16,p=(0,l.mC)(30*l.uR);function d(e,t){return+t?y(e,t):g(e)}function g(e){return(0,f.l)({point:function(t,r){t=e(t,r);this.stream.point(t[0],t[1])}})}function y(e,t){function r(n,a,i,o,s,u,f,c,v,h,d,g,y,m){var x=f-n,b=c-a,_=x*x+b*b;if(_>4*t&&y--){var w=o+h,T=s+d,k=u+g,A=(0,l._b)(w*w+T*T+k*k),M=(0,l.ZR)(k/=A),S=(0,l.Wn)((0,l.Wn)(k)-1)<l.Ho||(0,l.Wn)(i-v)<l.Ho?(i+v)/2:(0,l.fv)(T,w),E=e(S,M),L=E[0],C=E[1],I=L-n,P=C-a,O=b*I-x*P;if(O*O/_>t||(0,l.Wn)((x*I+b*P)/_-.5)>.3||o*h+s*d+u*g<p){r(n,a,i,o,s,u,L,C,S,w/=A,T/=A,k,y,m);m.point(L,C);r(L,C,S,w,T,k,f,c,v,h,d,g,y,m)}}}return function(t){var n,a,i,o,s,l,u,f,c,p,d,g;var y={point:m,lineStart:x,lineEnd:_,polygonStart:function(){t.polygonStart();y.lineStart=w},polygonEnd:function(){t.polygonEnd();y.lineStart=x}};function m(r,n){r=e(r,n);t.point(r[0],r[1])}function x(){f=NaN;y.point=b;t.lineStart()}function b(n,a){var i=(0,v.Og)([n,a]),o=e(n,a);r(f,c,u,p,d,g,f=o[0],c=o[1],u=n,p=i[0],d=i[1],g=i[2],h,t);t.point(f,c)}function _(){y.point=m;t.lineEnd()}function w(){x();y.point=T;y.lineEnd=k}function T(e,t){b(n=e,t),a=f,i=c,o=p,s=d,l=g;y.point=b}function k(){r(f,c,u,p,d,g,a,i,n,o,s,l,h,t);y.lineEnd=_;_()}return y}}var m=(0,f.l)({point:function(e,t){this.stream.point(e*l.uR,t*l.uR)}});function x(e){return(0,f.l)({point:function(t,r){var n=e(t,r);return this.stream.point(n[0],n[1])}})}function b(e,t,r,n,a){function i(i,o){i*=n;o*=a;return[t+e*i,r-e*o]}i.invert=function(i,o){return[(i-t)/e*n,(r-o)/e*a]};return i}function _(e,t,r,n,a,i){var o=(0,l.mC)(i),s=(0,l.O$)(i),u=o*e,f=s*e,c=o/e,v=s/e,h=(s*r-o*t)/e,p=(s*t+o*r)/e;function d(e,i){e*=n;i*=a;return[u*e-f*i+t,r-f*e-u*i]}d.invert=function(e,t){return[n*(c*e-v*t+h),a*(p-v*e-c*t)]};return d}function w(e){return T((function(){return e}))()}function T(e){var t,r=150,f=480,v=250,h=0,p=0,g=0,y=0,w=0,T,k=0,A=1,M=1,S=null,E=n.Z,L=null,C,I,P,O=s.Z,D=.5,z,R,F,B,N;function j(e){return F(e[0]*l.uR,e[1]*l.uR)}function U(e){e=F.invert(e[0],e[1]);return e&&[e[0]*l.RW,e[1]*l.RW]}j.stream=function(e){return B&&N===e?B:B=m(x(T)(E(z(O(N=e)))))};j.preclip=function(e){return arguments.length?(E=e,S=undefined,H()):E};j.postclip=function(e){return arguments.length?(O=e,L=C=I=P=null,H()):O};j.clipAngle=function(e){return arguments.length?(E=+e?(0,a.Z)(S=e*l.uR):(S=null,n.Z),H()):S*l.RW};j.clipExtent=function(e){return arguments.length?(O=e==null?(L=C=I=P=null,s.Z):(0,i.Z)(L=+e[0][0],C=+e[0][1],I=+e[1][0],P=+e[1][1]),H()):L==null?null:[[L,C],[I,P]]};j.scale=function(e){return arguments.length?(r=+e,V()):r};j.translate=function(e){return arguments.length?(f=+e[0],v=+e[1],V()):[f,v]};j.center=function(e){return arguments.length?(h=e[0]%360*l.uR,p=e[1]%360*l.uR,V()):[h*l.RW,p*l.RW]};j.rotate=function(e){return arguments.length?(g=e[0]%360*l.uR,y=e[1]%360*l.uR,w=e.length>2?e[2]%360*l.uR:0,V()):[g*l.RW,y*l.RW,w*l.RW]};j.angle=function(e){return arguments.length?(k=e%360*l.uR,V()):k*l.RW};j.reflectX=function(e){return arguments.length?(A=e?-1:1,V()):A<0};j.reflectY=function(e){return arguments.length?(M=e?-1:1,V()):M<0};j.precision=function(e){return arguments.length?(z=d(R,D=e*e),H()):(0,l._b)(D)};j.fitExtent=function(e,t){return(0,c.qg)(j,e,t)};j.fitSize=function(e,t){return(0,c.mF)(j,e,t)};j.fitWidth=function(e,t){return(0,c.V6)(j,e,t)};j.fitHeight=function(e,t){return(0,c.rf)(j,e,t)};function V(){var e=_(r,0,0,A,M,k).apply(null,t(h,p)),n=(k?_:b)(r,f-e[0],v-e[1],A,M,k);T=(0,u.I)(g,y,w);R=(0,o.Z)(t,n);F=(0,o.Z)(T,R);z=d(R,D);return H()}function H(){B=N=null;return j}return function(){t=e.apply(this,arguments);j.invert=t.invert&&U;return V()}}},26867:function(e,t,r){"use strict";r.d(t,{K:function(){return i},Z:function(){return o}});var n=r(15002);var a=r(39695);function i(e,t){var r=t*t,n=r*r;return[e*(.8707-.131979*r+n*(-.013791+n*(.003971*r-.001529*n))),t*(1.007226+r*(.015085+n*(-.044475+.028874*r-.005916*n)))]}i.invert=function(e,t){var r=t,n=25,i;do{var o=r*r,s=o*o;r-=i=(r*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-t)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while((0,a.Wn)(i)>a.Ho&&--n>0);return[e/(.8707+(o=r*r)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),r]};function o(){return(0,n.Z)(i).scale(175.295)}},57962:function(e,t,r){"use strict";r.d(t,{I:function(){return o},Z:function(){return s}});var n=r(39695);var a=r(25382);var i=r(15002);function o(e,t){return[(0,n.mC)(t)*(0,n.O$)(e),(0,n.O$)(t)]}o.invert=(0,a.O)(n.ZR);function s(){return(0,i.Z)(o).scale(249.5).clipAngle(90+n.Ho)}},49386:function(e,t,r){"use strict";r.d(t,{I:function(){return o},Z:function(){return f}});var n=r(96059);var a=r(39695);function i(e,t){return[(0,a.Wn)(e)>a.pi?e+Math.round(-e/a.BZ)*a.BZ:e,t]}i.invert=i;function o(e,t,r){return(e%=a.BZ)?t||r?(0,n.Z)(l(e),u(t,r)):l(e):t||r?u(t,r):i}function s(e){return function(t,r){return t+=e,[t>a.pi?t-a.BZ:t<-a.pi?t+a.BZ:t,r]}}function l(e){var t=s(e);t.invert=s(-e);return t}function u(e,t){var r=(0,a.mC)(e),n=(0,a.O$)(e),i=(0,a.mC)(t),o=(0,a.O$)(t);function s(e,t){var s=(0,a.mC)(t),l=(0,a.mC)(e)*s,u=(0,a.O$)(e)*s,f=(0,a.O$)(t),c=f*r+l*n;return[(0,a.fv)(u*i-c*o,l*r-f*n),(0,a.ZR)(c*i+u*o)]}s.invert=function(e,t){var s=(0,a.mC)(t),l=(0,a.mC)(e)*s,u=(0,a.O$)(e)*s,f=(0,a.O$)(t),c=f*i-u*o;return[(0,a.fv)(u*i+f*o,l*r+c*n),(0,a.ZR)(c*r-l*n)]};return s}function f(e){e=o(e[0]*a.uR,e[1]*a.uR,e.length>2?e[2]*a.uR:0);function t(t){t=e(t[0]*a.uR,t[1]*a.uR);return t[0]*=a.RW,t[1]*=a.RW,t}t.invert=function(t){t=e.invert(t[0]*a.uR,t[1]*a.uR);return t[0]*=a.RW,t[1]*=a.RW,t};return t}},72736:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});function n(e,t){if(e&&i.hasOwnProperty(e.type)){i[e.type](e,t)}}var a={Feature:function(e,t){n(e.geometry,t)},FeatureCollection:function(e,t){var r=e.features,a=-1,i=r.length;while(++a<i)n(r[a].geometry,t)}};var i={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates;t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){var r=e.coordinates,n=-1,a=r.length;while(++n<a)e=r[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){o(e.coordinates,t,0)},MultiLineString:function(e,t){var r=e.coordinates,n=-1,a=r.length;while(++n<a)o(r[n],t,0)},Polygon:function(e,t){s(e.coordinates,t)},MultiPolygon:function(e,t){var r=e.coordinates,n=-1,a=r.length;while(++n<a)s(r[n],t)},GeometryCollection:function(e,t){var r=e.geometries,a=-1,i=r.length;while(++a<i)n(r[a],t)}};function o(e,t,r){var n=-1,a=e.length-r,i;t.lineStart();while(++n<a)i=e[n],t.point(i[0],i[1],i[2]);t.lineEnd()}function s(e,t){var r=-1,n=e.length;t.polygonStart();while(++r<n)o(e[r],t,1);t.polygonEnd()}function l(e,t){if(e&&a.hasOwnProperty(e.type)){a[e.type](e,t)}else{n(e,t)}}},64684:function(e,t,r){"use strict";r.d(t,{Z:function(){return n},l:function(){return a}});function n(e){return{stream:a(e)}}function a(e){return function(t){var r=new i;for(var n in e)r[n]=e[n];r.stream=t;return r}}function i(){}i.prototype={constructor:i,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},674:function(e,t,r){"use strict";r.r(t);r.d(t,{cluster:function(){return f},hierarchy:function(){return k},pack:function(){return $},packEnclose:function(){return P},packSiblings:function(){return Z},partition:function(){return ae},stratify:function(){return fe},tree:function(){return xe},treemap:function(){return ke},treemapBinary:function(){return Ae},treemapDice:function(){return ne},treemapResquarify:function(){return Se},treemapSlice:function(){return be},treemapSliceDice:function(){return Me},treemapSquarify:function(){return Te}});function n(e,t){return e.parent===t.parent?1:2}function a(e){return e.reduce(i,0)/e.length}function i(e,t){return e+t.x}function o(e){return 1+e.reduce(s,0)}function s(e,t){return Math.max(e,t.y)}function l(e){var t;while(t=e.children)e=t[0];return e}function u(e){var t;while(t=e.children)e=t[t.length-1];return e}function f(){var e=n,t=1,r=1,i=false;function s(n){var s,f=0;n.eachAfter((function(t){var r=t.children;if(r){t.x=a(r);t.y=o(r)}else{t.x=s?f+=e(t,s):0;t.y=0;s=t}}));var c=l(n),v=u(n),h=c.x-e(c,v)/2,p=v.x+e(v,c)/2;return n.eachAfter(i?function(e){e.x=(e.x-n.x)*t;e.y=(n.y-e.y)*r}:function(e){e.x=(e.x-h)/(p-h)*t;e.y=(1-(n.y?e.y/n.y:1))*r})}s.separation=function(t){return arguments.length?(e=t,s):e};s.size=function(e){return arguments.length?(i=false,t=+e[0],r=+e[1],s):i?null:[t,r]};s.nodeSize=function(e){return arguments.length?(i=true,t=+e[0],r=+e[1],s):i?[t,r]:null};return s}function c(e){var t=0,r=e.children,n=r&&r.length;if(!n)t=1;else while(--n>=0)t+=r[n].value;e.value=t}function v(){return this.eachAfter(c)}function h(e){var t=this,r,n=[t],a,i,o;do{r=n.reverse(),n=[];while(t=r.pop()){e(t),a=t.children;if(a)for(i=0,o=a.length;i<o;++i){n.push(a[i])}}}while(n.length);return this}function p(e){var t=this,r=[t],n,a;while(t=r.pop()){e(t),n=t.children;if(n)for(a=n.length-1;a>=0;--a){r.push(n[a])}}return this}function d(e){var t=this,r=[t],n=[],a,i,o;while(t=r.pop()){n.push(t),a=t.children;if(a)for(i=0,o=a.length;i<o;++i){r.push(a[i])}}while(t=n.pop()){e(t)}return this}function g(e){return this.eachAfter((function(t){var r=+e(t.data)||0,n=t.children,a=n&&n.length;while(--a>=0)r+=n[a].value;t.value=r}))}function y(e){return this.eachBefore((function(t){if(t.children){t.children.sort(e)}}))}function m(e){var t=this,r=x(t,e),n=[t];while(t!==r){t=t.parent;n.push(t)}var a=n.length;while(e!==r){n.splice(a,0,e);e=e.parent}return n}function x(e,t){if(e===t)return e;var r=e.ancestors(),n=t.ancestors(),a=null;e=r.pop();t=n.pop();while(e===t){a=e;e=r.pop();t=n.pop()}return a}function b(){var e=this,t=[e];while(e=e.parent){t.push(e)}return t}function _(){var e=[];this.each((function(t){e.push(t)}));return e}function w(){var e=[];this.eachBefore((function(t){if(!t.children){e.push(t)}}));return e}function T(){var e=this,t=[];e.each((function(r){if(r!==e){t.push({source:r.parent,target:r})}}));return t}function k(e,t){var r=new L(e),n=+e.value&&(r.value=e.value),a,i=[r],o,s,l,u;if(t==null)t=M;while(a=i.pop()){if(n)a.value=+a.data.value;if((s=t(a.data))&&(u=s.length)){a.children=new Array(u);for(l=u-1;l>=0;--l){i.push(o=a.children[l]=new L(s[l]));o.parent=a;o.depth=a.depth+1}}}return r.eachBefore(E)}function A(){return k(this).eachBefore(S)}function M(e){return e.children}function S(e){e.data=e.data.data}function E(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function L(e){this.data=e;this.depth=this.height=0;this.parent=null}L.prototype=k.prototype={constructor:L,count:v,each:h,eachAfter:d,eachBefore:p,sum:g,sort:y,path:m,ancestors:b,descendants:_,leaves:w,links:T,copy:A};var C=Array.prototype.slice;function I(e){var t=e.length,r,n;while(t){n=Math.random()*t--|0;r=e[t];e[t]=e[n];e[n]=r}return e}function P(e){var t=0,r=(e=I(C.call(e))).length,n=[],a,i;while(t<r){a=e[t];if(i&&z(i,a))++t;else i=F(n=O(n,a)),t=0}return i}function O(e,t){var r,n;if(R(t,e))return[t];for(r=0;r<e.length;++r){if(D(t,e[r])&&R(N(e[r],t),e)){return[e[r],t]}}for(r=0;r<e.length-1;++r){for(n=r+1;n<e.length;++n){if(D(N(e[r],e[n]),t)&&D(N(e[r],t),e[n])&&D(N(e[n],t),e[r])&&R(j(e[r],e[n],t),e)){return[e[r],e[n],t]}}}throw new Error}function D(e,t){var r=e.r-t.r,n=t.x-e.x,a=t.y-e.y;return r<0||r*r<n*n+a*a}function z(e,t){var r=e.r-t.r+1e-6,n=t.x-e.x,a=t.y-e.y;return r>0&&r*r>n*n+a*a}function R(e,t){for(var r=0;r<t.length;++r){if(!z(e,t[r])){return false}}return true}function F(e){switch(e.length){case 1:return B(e[0]);case 2:return N(e[0],e[1]);case 3:return j(e[0],e[1],e[2])}}function B(e){return{x:e.x,y:e.y,r:e.r}}function N(e,t){var r=e.x,n=e.y,a=e.r,i=t.x,o=t.y,s=t.r,l=i-r,u=o-n,f=s-a,c=Math.sqrt(l*l+u*u);return{x:(r+i+l/c*f)/2,y:(n+o+u/c*f)/2,r:(c+a+s)/2}}function j(e,t,r){var n=e.x,a=e.y,i=e.r,o=t.x,s=t.y,l=t.r,u=r.x,f=r.y,c=r.r,v=n-o,h=n-u,p=a-s,d=a-f,g=l-i,y=c-i,m=n*n+a*a-i*i,x=m-o*o-s*s+l*l,b=m-u*u-f*f+c*c,_=h*p-v*d,w=(p*b-d*x)/(_*2)-n,T=(d*g-p*y)/_,k=(h*x-v*b)/(_*2)-a,A=(v*y-h*g)/_,M=T*T+A*A-1,S=2*(i+w*T+k*A),E=w*w+k*k-i*i,L=-(M?(S+Math.sqrt(S*S-4*M*E))/(2*M):E/S);return{x:n+w+T*L,y:a+k+A*L,r:L}}function U(e,t,r){var n=e.x-t.x,a,i,o=e.y-t.y,s,l,u=n*n+o*o;if(u){i=t.r+r.r,i*=i;l=e.r+r.r,l*=l;if(i>l){a=(u+l-i)/(2*u);s=Math.sqrt(Math.max(0,l/u-a*a));r.x=e.x-a*n-s*o;r.y=e.y-a*o+s*n}else{a=(u+i-l)/(2*u);s=Math.sqrt(Math.max(0,i/u-a*a));r.x=t.x+a*n-s*o;r.y=t.y+a*o+s*n}}else{r.x=t.x+r.r;r.y=t.y}}function V(e,t){var r=e.r+t.r-1e-6,n=t.x-e.x,a=t.y-e.y;return r>0&&r*r>n*n+a*a}function H(e){var t=e._,r=e.next._,n=t.r+r.r,a=(t.x*r.r+r.x*t.r)/n,i=(t.y*r.r+r.y*t.r)/n;return a*a+i*i}function q(e){this._=e;this.next=null;this.previous=null}function G(e){if(!(a=e.length))return 0;var t,r,n,a,i,o,s,l,u,f,c;t=e[0],t.x=0,t.y=0;if(!(a>1))return t.r;r=e[1],t.x=-r.r,r.x=t.r,r.y=0;if(!(a>2))return t.r+r.r;U(r,t,n=e[2]);t=new q(t),r=new q(r),n=new q(n);t.next=n.previous=r;r.next=t.previous=n;n.next=r.previous=t;e:for(s=3;s<a;++s){U(t._,r._,n=e[s]),n=new q(n);l=r.next,u=t.previous,f=r._.r,c=t._.r;do{if(f<=c){if(V(l._,n._)){r=l,t.next=r,r.previous=t,--s;continue e}f+=l._.r,l=l.next}else{if(V(u._,n._)){t=u,t.next=r,r.previous=t,--s;continue e}c+=u._.r,u=u.previous}}while(l!==u.next);n.previous=t,n.next=r,t.next=r.previous=r=n;i=H(t);while((n=n.next)!==r){if((o=H(n))<i){t=n,i=o}}r=t.next}t=[r._],n=r;while((n=n.next)!==r)t.push(n._);n=P(t);for(s=0;s<a;++s)t=e[s],t.x-=n.x,t.y-=n.y;return n.r}function Z(e){G(e);return e}function Y(e){return e==null?null:W(e)}function W(e){if(typeof e!=="function")throw new Error;return e}function X(){return 0}function J(e){return function(){return e}}function K(e){return Math.sqrt(e.value)}function $(){var e=null,t=1,r=1,n=X;function a(a){a.x=t/2,a.y=r/2;if(e){a.eachBefore(Q(e)).eachAfter(ee(n,.5)).eachBefore(te(1))}else{a.eachBefore(Q(K)).eachAfter(ee(X,1)).eachAfter(ee(n,a.r/Math.min(t,r))).eachBefore(te(Math.min(t,r)/(2*a.r)))}return a}a.radius=function(t){return arguments.length?(e=Y(t),a):e};a.size=function(e){return arguments.length?(t=+e[0],r=+e[1],a):[t,r]};a.padding=function(e){return arguments.length?(n=typeof e==="function"?e:J(+e),a):n};return a}function Q(e){return function(t){if(!t.children){t.r=Math.max(0,+e(t)||0)}}}function ee(e,t){return function(r){if(n=r.children){var n,a,i=n.length,o=e(r)*t||0,s;if(o)for(a=0;a<i;++a)n[a].r+=o;s=G(n);if(o)for(a=0;a<i;++a)n[a].r-=o;r.r=s+o}}}function te(e){return function(t){var r=t.parent;t.r*=e;if(r){t.x=r.x+e*t.x;t.y=r.y+e*t.y}}}function re(e){e.x0=Math.round(e.x0);e.y0=Math.round(e.y0);e.x1=Math.round(e.x1);e.y1=Math.round(e.y1)}function ne(e,t,r,n,a){var i=e.children,o,s=-1,l=i.length,u=e.value&&(n-t)/e.value;while(++s<l){o=i[s],o.y0=r,o.y1=a;o.x0=t,o.x1=t+=o.value*u}}function ae(){var e=1,t=1,r=0,n=false;function a(a){var o=a.height+1;a.x0=a.y0=r;a.x1=e;a.y1=t/o;a.eachBefore(i(t,o));if(n)a.eachBefore(re);return a}function i(e,t){return function(n){if(n.children){ne(n,n.x0,e*(n.depth+1)/t,n.x1,e*(n.depth+2)/t)}var a=n.x0,i=n.y0,o=n.x1-r,s=n.y1-r;if(o<a)a=o=(a+o)/2;if(s<i)i=s=(i+s)/2;n.x0=a;n.y0=i;n.x1=o;n.y1=s}}a.round=function(e){return arguments.length?(n=!!e,a):n};a.size=function(r){return arguments.length?(e=+r[0],t=+r[1],a):[e,t]};a.padding=function(e){return arguments.length?(r=+e,a):r};return a}var ie="$",oe={depth:-1},se={};function le(e){return e.id}function ue(e){return e.parentId}function fe(){var e=le,t=ue;function r(r){var n,a,i=r.length,o,s,l,u=new Array(i),f,c,v={};for(a=0;a<i;++a){n=r[a],l=u[a]=new L(n);if((f=e(n,a,r))!=null&&(f+="")){c=ie+(l.id=f);v[c]=c in v?se:l}}for(a=0;a<i;++a){l=u[a],f=t(r[a],a,r);if(f==null||!(f+="")){if(o)throw new Error("multiple roots");o=l}else{s=v[ie+f];if(!s)throw new Error("missing: "+f);if(s===se)throw new Error("ambiguous: "+f);if(s.children)s.children.push(l);else s.children=[l];l.parent=s}}if(!o)throw new Error("no root");o.parent=oe;o.eachBefore((function(e){e.depth=e.parent.depth+1;--i})).eachBefore(E);o.parent=null;if(i>0)throw new Error("cycle");return o}r.id=function(t){return arguments.length?(e=W(t),r):e};r.parentId=function(e){return arguments.length?(t=W(e),r):t};return r}function ce(e,t){return e.parent===t.parent?1:2}function ve(e){var t=e.children;return t?t[0]:e.t}function he(e){var t=e.children;return t?t[t.length-1]:e.t}function pe(e,t,r){var n=r/(t.i-e.i);t.c-=n;t.s+=r;e.c+=n;t.z+=r;t.m+=r}function de(e){var t=0,r=0,n=e.children,a=n.length,i;while(--a>=0){i=n[a];i.z+=t;i.m+=t;t+=i.s+(r+=i.c)}}function ge(e,t,r){return e.a.parent===t.parent?e.a:r}function ye(e,t){this._=e;this.parent=null;this.children=null;this.A=null;this.a=this;this.z=0;this.m=0;this.c=0;this.s=0;this.t=null;this.i=t}ye.prototype=Object.create(L.prototype);function me(e){var t=new ye(e,0),r,n=[t],a,i,o,s;while(r=n.pop()){if(i=r._.children){r.children=new Array(s=i.length);for(o=s-1;o>=0;--o){n.push(a=r.children[o]=new ye(i[o],o));a.parent=r}}}(t.parent=new ye(null,0)).children=[t];return t}function xe(){var e=ce,t=1,r=1,n=null;function a(a){var s=me(a);s.eachAfter(i),s.parent.m=-s.z;s.eachBefore(o);if(n)a.eachBefore(l);else{var u=a,f=a,c=a;a.eachBefore((function(e){if(e.x<u.x)u=e;if(e.x>f.x)f=e;if(e.depth>c.depth)c=e}));var v=u===f?1:e(u,f)/2,h=v-u.x,p=t/(f.x+v+h),d=r/(c.depth||1);a.eachBefore((function(e){e.x=(e.x+h)*p;e.y=e.depth*d}))}return a}function i(t){var r=t.children,n=t.parent.children,a=t.i?n[t.i-1]:null;if(r){de(t);var i=(r[0].z+r[r.length-1].z)/2;if(a){t.z=a.z+e(t._,a._);t.m=t.z-i}else{t.z=i}}else if(a){t.z=a.z+e(t._,a._)}t.parent.A=s(t,a,t.parent.A||n[0])}function o(e){e._.x=e.z+e.parent.m;e.m+=e.parent.m}function s(t,r,n){if(r){var a=t,i=t,o=r,s=a.parent.children[0],l=a.m,u=i.m,f=o.m,c=s.m,v;while(o=he(o),a=ve(a),o&&a){s=ve(s);i=he(i);i.a=t;v=o.z+f-a.z-l+e(o._,a._);if(v>0){pe(ge(o,t,n),t,v);l+=v;u+=v}f+=o.m;l+=a.m;c+=s.m;u+=i.m}if(o&&!he(i)){i.t=o;i.m+=f-u}if(a&&!ve(s)){s.t=a;s.m+=l-c;n=t}}return n}function l(e){e.x*=t;e.y=e.depth*r}a.separation=function(t){return arguments.length?(e=t,a):e};a.size=function(e){return arguments.length?(n=false,t=+e[0],r=+e[1],a):n?null:[t,r]};a.nodeSize=function(e){return arguments.length?(n=true,t=+e[0],r=+e[1],a):n?[t,r]:null};return a}function be(e,t,r,n,a){var i=e.children,o,s=-1,l=i.length,u=e.value&&(a-r)/e.value;while(++s<l){o=i[s],o.x0=t,o.x1=n;o.y0=r,o.y1=r+=o.value*u}}var _e=(1+Math.sqrt(5))/2;function we(e,t,r,n,a,i){var o=[],s=t.children,l,u,f=0,c=0,v=s.length,h,p,d=t.value,g,y,m,x,b,_,w;while(f<v){h=a-r,p=i-n;do{g=s[c++].value}while(!g&&c<v);y=m=g;_=Math.max(p/h,h/p)/(d*e);w=g*g*_;b=Math.max(m/w,w/y);for(;c<v;++c){g+=u=s[c].value;if(u<y)y=u;if(u>m)m=u;w=g*g*_;x=Math.max(m/w,w/y);if(x>b){g-=u;break}b=x}o.push(l={value:g,dice:h<p,children:s.slice(f,c)});if(l.dice)ne(l,r,n,a,d?n+=p*g/d:i);else be(l,r,n,d?r+=h*g/d:a,i);d-=g,f=c}return o}var Te=function e(t){function r(e,r,n,a,i){we(t,e,r,n,a,i)}r.ratio=function(t){return e((t=+t)>1?t:1)};return r}(_e);function ke(){var e=Te,t=false,r=1,n=1,a=[0],i=X,o=X,s=X,l=X,u=X;function f(e){e.x0=e.y0=0;e.x1=r;e.y1=n;e.eachBefore(c);a=[0];if(t)e.eachBefore(re);return e}function c(t){var r=a[t.depth],n=t.x0+r,f=t.y0+r,c=t.x1-r,v=t.y1-r;if(c<n)n=c=(n+c)/2;if(v<f)f=v=(f+v)/2;t.x0=n;t.y0=f;t.x1=c;t.y1=v;if(t.children){r=a[t.depth+1]=i(t)/2;n+=u(t)-r;f+=o(t)-r;c-=s(t)-r;v-=l(t)-r;if(c<n)n=c=(n+c)/2;if(v<f)f=v=(f+v)/2;e(t,n,f,c,v)}}f.round=function(e){return arguments.length?(t=!!e,f):t};f.size=function(e){return arguments.length?(r=+e[0],n=+e[1],f):[r,n]};f.tile=function(t){return arguments.length?(e=W(t),f):e};f.padding=function(e){return arguments.length?f.paddingInner(e).paddingOuter(e):f.paddingInner()};f.paddingInner=function(e){return arguments.length?(i=typeof e==="function"?e:J(+e),f):i};f.paddingOuter=function(e){return arguments.length?f.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):f.paddingTop()};f.paddingTop=function(e){return arguments.length?(o=typeof e==="function"?e:J(+e),f):o};f.paddingRight=function(e){return arguments.length?(s=typeof e==="function"?e:J(+e),f):s};f.paddingBottom=function(e){return arguments.length?(l=typeof e==="function"?e:J(+e),f):l};f.paddingLeft=function(e){return arguments.length?(u=typeof e==="function"?e:J(+e),f):u};return f}function Ae(e,t,r,n,a){var i=e.children,o,s=i.length,l,u=new Array(s+1);for(u[0]=l=o=0;o<s;++o){u[o+1]=l+=i[o].value}f(0,s,e.value,t,r,n,a);function f(e,t,r,n,a,o,s){if(e>=t-1){var l=i[e];l.x0=n,l.y0=a;l.x1=o,l.y1=s;return}var c=u[e],v=r/2+c,h=e+1,p=t-1;while(h<p){var d=h+p>>>1;if(u[d]<v)h=d+1;else p=d}if(v-u[h-1]<u[h]-v&&e+1<h)--h;var g=u[h]-c,y=r-g;if(o-n>s-a){var m=(n*y+o*g)/r;f(e,h,g,n,a,m,s);f(h,t,y,m,a,o,s)}else{var x=(a*y+s*g)/r;f(e,h,g,n,a,o,x);f(h,t,y,n,x,o,s)}}}function Me(e,t,r,n,a){(e.depth&1?be:ne)(e,t,r,n,a)}var Se=function e(t){function r(e,r,n,a,i){if((o=e._squarify)&&o.ratio===t){var o,s,l,u,f=-1,c,v=o.length,h=e.value;while(++f<v){s=o[f],l=s.children;for(u=s.value=0,c=l.length;u<c;++u)s.value+=l[u].value;if(s.dice)ne(s,r,n,a,n+=(i-n)*s.value/h);else be(s,r,n,r+=(a-r)*s.value/h,i);h-=s.value}}else{e._squarify=o=we(t,e,r,n,a,i);o.ratio=t}}r.ratio=function(t){return e((t=+t)>1?t:1)};return r}(_e)},45879:function(e,t,r){"use strict";r.d(t,{h5:function(){return b}});var n=Math.PI,a=2*n,i=1e-6,o=a-i;function s(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function l(){return new s}s.prototype=l.prototype={constructor:s,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){if(this._x1!==null){this._x1=this._x0,this._y1=this._y0;this._+="Z"}},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,r,n){this._+="Q"+ +e+","+ +t+","+(this._x1=+r)+","+(this._y1=+n)},bezierCurveTo:function(e,t,r,n,a,i){this._+="C"+ +e+","+ +t+","+ +r+","+ +n+","+(this._x1=+a)+","+(this._y1=+i)},arcTo:function(e,t,r,a,o){e=+e,t=+t,r=+r,a=+a,o=+o;var s=this._x1,l=this._y1,u=r-e,f=a-t,c=s-e,v=l-t,h=c*c+v*v;if(o<0)throw new Error("negative radius: "+o);if(this._x1===null){this._+="M"+(this._x1=e)+","+(this._y1=t)}else if(!(h>i));else if(!(Math.abs(v*u-f*c)>i)||!o){this._+="L"+(this._x1=e)+","+(this._y1=t)}else{var p=r-s,d=a-l,g=u*u+f*f,y=p*p+d*d,m=Math.sqrt(g),x=Math.sqrt(h),b=o*Math.tan((n-Math.acos((g+h-y)/(2*m*x)))/2),_=b/x,w=b/m;if(Math.abs(_-1)>i){this._+="L"+(e+_*c)+","+(t+_*v)}this._+="A"+o+","+o+",0,0,"+ +(v*p>c*d)+","+(this._x1=e+w*u)+","+(this._y1=t+w*f)}},arc:function(e,t,r,s,l,u){e=+e,t=+t,r=+r,u=!!u;var f=r*Math.cos(s),c=r*Math.sin(s),v=e+f,h=t+c,p=1^u,d=u?s-l:l-s;if(r<0)throw new Error("negative radius: "+r);if(this._x1===null){this._+="M"+v+","+h}else if(Math.abs(this._x1-v)>i||Math.abs(this._y1-h)>i){this._+="L"+v+","+h}if(!r)return;if(d<0)d=d%a+a;if(d>o){this._+="A"+r+","+r+",0,1,"+p+","+(e-f)+","+(t-c)+"A"+r+","+r+",0,1,"+p+","+(this._x1=v)+","+(this._y1=h)}else if(d>i){this._+="A"+r+","+r+",0,"+ +(d>=n)+","+p+","+(this._x1=e+r*Math.cos(l))+","+(this._y1=t+r*Math.sin(l))}},rect:function(e,t,r,n){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +r+"v"+ +n+"h"+-r+"Z"},toString:function(){return this._}};var u=l;var f=Array.prototype.slice;function c(e){return function t(){return e}}function v(e){return e[0]}function h(e){return e[1]}function p(e){return e.source}function d(e){return e.target}function g(e){var t=p,r=d,n=v,a=h,i=null;function o(){var o,s=f.call(arguments),l=t.apply(this,s),c=r.apply(this,s);if(!i)i=o=u();e(i,+n.apply(this,(s[0]=l,s)),+a.apply(this,s),+n.apply(this,(s[0]=c,s)),+a.apply(this,s));if(o)return i=null,o+""||null}o.source=function(e){return arguments.length?(t=e,o):t};o.target=function(e){return arguments.length?(r=e,o):r};o.x=function(e){return arguments.length?(n=typeof e==="function"?e:c(+e),o):n};o.y=function(e){return arguments.length?(a=typeof e==="function"?e:c(+e),o):a};o.context=function(e){return arguments.length?(i=e==null?null:e,o):i};return o}function y(e,t,r,n,a){e.moveTo(t,r);e.bezierCurveTo(t=(t+n)/2,r,t,a,n,a)}function m(e,t,r,n,a){e.moveTo(t,r);e.bezierCurveTo(t,r=(r+a)/2,n,r,n,a)}function x(e,t,r,n,a){var i=pointRadial(t,r),o=pointRadial(t,r=(r+a)/2),s=pointRadial(n,r),l=pointRadial(n,a);e.moveTo(i[0],i[1]);e.bezierCurveTo(o[0],o[1],s[0],s[1],l[0],l[1])}function b(){return g(y)}function _(){return g(m)}function w(){var e=g(x);e.angle=e.x,delete e.x;e.radius=e.y,delete e.y;return e}},84096:function(e,t,r){"use strict";r.d(t,{i$:function(){return Ae},Dq:function(){return v},g0:function(){return Se}});var n=r(58176);var a=r(48480);var i=r(59879);var o=r(82301);var s=r(34823);var l=r(79791);function u(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);t.setFullYear(e.y);return t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function f(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));t.setUTCFullYear(e.y);return t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function c(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function v(e){var t=e.dateTime,r=e.date,s=e.time,l=e.periods,v=e.days,p=e.shortDays,d=e.months,g=e.shortMonths;var y=x(l),m=b(l),ke=x(v),Ae=b(v),Me=x(p),Se=b(p),Ee=x(d),Le=b(d),Ce=x(g),Ie=b(g);var Pe={a:Ze,A:Ye,b:We,B:Xe,c:null,d:U,e:U,f:Z,H:V,I:H,j:q,L:G,m:Y,M:W,p:Je,q:Ke,Q:we,s:Te,S:X,u:J,U:K,V:$,w:Q,W:ee,x:null,X:null,y:te,Y:re,Z:ne,"%":_e};var Oe={a:$e,A:Qe,b:et,B:tt,c:null,d:ae,e:ae,f:ue,H:ie,I:oe,j:se,L:le,m:fe,M:ce,p:rt,q:nt,Q:we,s:Te,S:ve,u:he,U:pe,V:de,w:ge,W:ye,x:null,X:null,y:me,Y:xe,Z:be,"%":_e};var De={a:Ne,A:je,b:Ue,B:Ve,c:He,d:I,e:I,f:F,H:O,I:O,j:P,L:R,m:C,M:D,p:Be,q:L,Q:N,s:j,S:z,u:w,U:T,V:k,w:_,W:A,x:qe,X:Ge,y:S,Y:M,Z:E,"%":B};Pe.x=ze(r,Pe);Pe.X=ze(s,Pe);Pe.c=ze(t,Pe);Oe.x=ze(r,Oe);Oe.X=ze(s,Oe);Oe.c=ze(t,Oe);function ze(e,t){return function(r){var n=[],a=-1,i=0,o=e.length,s,l,u;if(!(r instanceof Date))r=new Date(+r);while(++a<o){if(e.charCodeAt(a)===37){n.push(e.slice(i,a));if((l=h[s=e.charAt(++a)])!=null)s=e.charAt(++a);else l=s==="e"?" ":"0";if(u=t[s])s=u(r,l);n.push(s);i=a+1}}n.push(e.slice(i,a));return n.join("")}}function Re(e,t){return function(r){var s=c(1900,undefined,1),l=Fe(s,e,r+="",0),v,h;if(l!=r.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(s.s*1e3+("L"in s?s.L:0));if(t&&!("Z"in s))s.Z=0;if("p"in s)s.H=s.H%12+s.p*12;if(s.m===undefined)s.m="q"in s?s.q:0;if("V"in s){if(s.V<1||s.V>53)return null;if(!("w"in s))s.w=1;if("Z"in s){v=f(c(s.y,0,1)),h=v.getUTCDay();v=h>4||h===0?n.l6.ceil(v):(0,n.l6)(v);v=a.Z.offset(v,(s.V-1)*7);s.y=v.getUTCFullYear();s.m=v.getUTCMonth();s.d=v.getUTCDate()+(s.w+6)%7}else{v=u(c(s.y,0,1)),h=v.getDay();v=h>4||h===0?i.wA.ceil(v):(0,i.wA)(v);v=o.Z.offset(v,(s.V-1)*7);s.y=v.getFullYear();s.m=v.getMonth();s.d=v.getDate()+(s.w+6)%7}}else if("W"in s||"U"in s){if(!("w"in s))s.w="u"in s?s.u%7:"W"in s?1:0;h="Z"in s?f(c(s.y,0,1)).getUTCDay():u(c(s.y,0,1)).getDay();s.m=0;s.d="W"in s?(s.w+6)%7+s.W*7-(h+5)%7:s.w+s.U*7-(h+6)%7}if("Z"in s){s.H+=s.Z/100|0;s.M+=s.Z%100;return f(s)}return u(s)}}function Fe(e,t,r,n){var a=0,i=t.length,o=r.length,s,l;while(a<i){if(n>=o)return-1;s=t.charCodeAt(a++);if(s===37){s=t.charAt(a++);l=De[s in h?t.charAt(a++):s];if(!l||(n=l(e,r,n))<0)return-1}else if(s!=r.charCodeAt(n++)){return-1}}return n}function Be(e,t,r){var n=y.exec(t.slice(r));return n?(e.p=m[n[0].toLowerCase()],r+n[0].length):-1}function Ne(e,t,r){var n=Me.exec(t.slice(r));return n?(e.w=Se[n[0].toLowerCase()],r+n[0].length):-1}function je(e,t,r){var n=ke.exec(t.slice(r));return n?(e.w=Ae[n[0].toLowerCase()],r+n[0].length):-1}function Ue(e,t,r){var n=Ce.exec(t.slice(r));return n?(e.m=Ie[n[0].toLowerCase()],r+n[0].length):-1}function Ve(e,t,r){var n=Ee.exec(t.slice(r));return n?(e.m=Le[n[0].toLowerCase()],r+n[0].length):-1}function He(e,r,n){return Fe(e,t,r,n)}function qe(e,t,n){return Fe(e,r,t,n)}function Ge(e,t,r){return Fe(e,s,t,r)}function Ze(e){return p[e.getDay()]}function Ye(e){return v[e.getDay()]}function We(e){return g[e.getMonth()]}function Xe(e){return d[e.getMonth()]}function Je(e){return l[+(e.getHours()>=12)]}function Ke(e){return 1+~~(e.getMonth()/3)}function $e(e){return p[e.getUTCDay()]}function Qe(e){return v[e.getUTCDay()]}function et(e){return g[e.getUTCMonth()]}function tt(e){return d[e.getUTCMonth()]}function rt(e){return l[+(e.getUTCHours()>=12)]}function nt(e){return 1+~~(e.getUTCMonth()/3)}return{format:function(e){var t=ze(e+="",Pe);t.toString=function(){return e};return t},parse:function(e){var t=Re(e+="",false);t.toString=function(){return e};return t},utcFormat:function(e){var t=ze(e+="",Oe);t.toString=function(){return e};return t},utcParse:function(e){var t=Re(e+="",true);t.toString=function(){return e};return t}}}var h={"-":"",_:" ",0:"0"},p=/^\s*\d+/,d=/^%/,g=/[\\^$*+?|[\]().{}]/g;function y(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function m(e){return e.replace(g,"\\$&")}function x(e){return new RegExp("^(?:"+e.map(m).join("|")+")","i")}function b(e){var t={},r=-1,n=e.length;while(++r<n)t[e[r].toLowerCase()]=r;return t}function _(e,t,r){var n=p.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function w(e,t,r){var n=p.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function T(e,t,r){var n=p.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function k(e,t,r){var n=p.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function A(e,t,r){var n=p.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function M(e,t,r){var n=p.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function S(e,t,r){var n=p.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function E(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function L(e,t,r){var n=p.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function C(e,t,r){var n=p.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function I(e,t,r){var n=p.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function P(e,t,r){var n=p.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function O(e,t,r){var n=p.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function D(e,t,r){var n=p.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function z(e,t,r){var n=p.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function R(e,t,r){var n=p.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function F(e,t,r){var n=p.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function B(e,t,r){var n=d.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function N(e,t,r){var n=p.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function j(e,t,r){var n=p.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function U(e,t){return y(e.getDate(),t,2)}function V(e,t){return y(e.getHours(),t,2)}function H(e,t){return y(e.getHours()%12||12,t,2)}function q(e,t){return y(1+o.Z.count((0,s.Z)(e),e),t,3)}function G(e,t){return y(e.getMilliseconds(),t,3)}function Z(e,t){return G(e,t)+"000"}function Y(e,t){return y(e.getMonth()+1,t,2)}function W(e,t){return y(e.getMinutes(),t,2)}function X(e,t){return y(e.getSeconds(),t,2)}function J(e){var t=e.getDay();return t===0?7:t}function K(e,t){return y(i.OM.count((0,s.Z)(e)-1,e),t,2)}function $(e,t){var r=e.getDay();e=r>=4||r===0?(0,i.bL)(e):i.bL.ceil(e);return y(i.bL.count((0,s.Z)(e),e)+((0,s.Z)(e).getDay()===4),t,2)}function Q(e){return e.getDay()}function ee(e,t){return y(i.wA.count((0,s.Z)(e)-1,e),t,2)}function te(e,t){return y(e.getFullYear()%100,t,2)}function re(e,t){return y(e.getFullYear()%1e4,t,4)}function ne(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+y(t/60|0,"0",2)+y(t%60,"0",2)}function ae(e,t){return y(e.getUTCDate(),t,2)}function ie(e,t){return y(e.getUTCHours(),t,2)}function oe(e,t){return y(e.getUTCHours()%12||12,t,2)}function se(e,t){return y(1+a.Z.count((0,l.Z)(e),e),t,3)}function le(e,t){return y(e.getUTCMilliseconds(),t,3)}function ue(e,t){return le(e,t)+"000"}function fe(e,t){return y(e.getUTCMonth()+1,t,2)}function ce(e,t){return y(e.getUTCMinutes(),t,2)}function ve(e,t){return y(e.getUTCSeconds(),t,2)}function he(e){var t=e.getUTCDay();return t===0?7:t}function pe(e,t){return y(n.Ox.count((0,l.Z)(e)-1,e),t,2)}function de(e,t){var r=e.getUTCDay();e=r>=4||r===0?(0,n.hB)(e):n.hB.ceil(e);return y(n.hB.count((0,l.Z)(e),e)+((0,l.Z)(e).getUTCDay()===4),t,2)}function ge(e){return e.getUTCDay()}function ye(e,t){return y(n.l6.count((0,l.Z)(e)-1,e),t,2)}function me(e,t){return y(e.getUTCFullYear()%100,t,2)}function xe(e,t){return y(e.getUTCFullYear()%1e4,t,4)}function be(){return"+0000"}function _e(){return"%"}function we(e){return+e}function Te(e){return Math.floor(+e/1e3)}var ke;var Ae;var Me;var Se;var Ee;Le({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Le(e){ke=v(e);Ae=ke.format;Me=ke.parse;Se=ke.utcFormat;Ee=ke.utcParse;return ke}},82301:function(e,t,r){"use strict";r.d(t,{a:function(){return o}});var n=r(30052);var a=r(54263);var i=(0,n.Z)((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*a.yB)/a.UD}),(function(e){return e.getDate()-1}));t.Z=i;var o=i.range},54263:function(e,t,r){"use strict";r.d(t,{UD:function(){return o},Y2:function(){return i},Ym:function(){return n},iM:function(){return s},yB:function(){return a}});var n=1e3;var a=6e4;var i=36e5;var o=864e5;var s=6048e5},81041:function(e,t,r){"use strict";r.r(t);r.d(t,{timeDay:function(){return y.Z},timeDays:function(){return y.a},timeFriday:function(){return m.mC},timeFridays:function(){return m.b$},timeHour:function(){return d},timeHours:function(){return g},timeInterval:function(){return n.Z},timeMillisecond:function(){return i},timeMilliseconds:function(){return o},timeMinute:function(){return v},timeMinutes:function(){return h},timeMonday:function(){return m.wA},timeMondays:function(){return m.bJ},timeMonth:function(){return b},timeMonths:function(){return _},timeSaturday:function(){return m.EY},timeSaturdays:function(){return m.Ff},timeSecond:function(){return u},timeSeconds:function(){return f},timeSunday:function(){return m.OM},timeSundays:function(){return m.vm},timeThursday:function(){return m.bL},timeThursdays:function(){return m.$t},timeTuesday:function(){return m.sy},timeTuesdays:function(){return m.aU},timeWednesday:function(){return m.zg},timeWednesdays:function(){return m.Ld},timeWeek:function(){return m.OM},timeWeeks:function(){return m.vm},timeYear:function(){return w.Z},timeYears:function(){return w.g},utcDay:function(){return L.Z},utcDays:function(){return L.y},utcFriday:function(){return C.QQ},utcFridays:function(){return C.fz},utcHour:function(){return S},utcHours:function(){return E},utcMillisecond:function(){return i},utcMilliseconds:function(){return o},utcMinute:function(){return k},utcMinutes:function(){return A},utcMonday:function(){return C.l6},utcMondays:function(){return C.$3},utcMonth:function(){return P},utcMonths:function(){return O},utcSaturday:function(){return C.g4},utcSaturdays:function(){return C.Q_},utcSecond:function(){return u},utcSeconds:function(){return f},utcSunday:function(){return C.Ox},utcSundays:function(){return C.SU},utcThursday:function(){return C.hB},utcThursdays:function(){return C.xj},utcTuesday:function(){return C.J1},utcTuesdays:function(){return C.DK},utcWednesday:function(){return C.b3},utcWednesdays:function(){return C.uy},utcWeek:function(){return C.Ox},utcWeeks:function(){return C.SU},utcYear:function(){return D.Z},utcYears:function(){return D.D}});var n=r(30052);var a=(0,n.Z)((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));a.every=function(e){e=Math.floor(e);if(!isFinite(e)||!(e>0))return null;if(!(e>1))return a;return(0,n.Z)((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,r){t.setTime(+t+r*e)}),(function(t,r){return(r-t)/e}))};var i=a;var o=a.range;var s=r(54263);var l=(0,n.Z)((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*s.Ym)}),(function(e,t){return(t-e)/s.Ym}),(function(e){return e.getUTCSeconds()}));var u=l;var f=l.range;var c=(0,n.Z)((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*s.Ym)}),(function(e,t){e.setTime(+e+t*s.yB)}),(function(e,t){return(t-e)/s.yB}),(function(e){return e.getMinutes()}));var v=c;var h=c.range;var p=(0,n.Z)((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*s.Ym-e.getMinutes()*s.yB)}),(function(e,t){e.setTime(+e+t*s.Y2)}),(function(e,t){return(t-e)/s.Y2}),(function(e){return e.getHours()}));var d=p;var g=p.range;var y=r(82301);var m=r(59879);var x=(0,n.Z)((function(e){e.setDate(1);e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12}),(function(e){return e.getMonth()}));var b=x;var _=x.range;var w=r(34823);var T=(0,n.Z)((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*s.yB)}),(function(e,t){return(t-e)/s.yB}),(function(e){return e.getUTCMinutes()}));var k=T;var A=T.range;var M=(0,n.Z)((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*s.Y2)}),(function(e,t){return(t-e)/s.Y2}),(function(e){return e.getUTCHours()}));var S=M;var E=M.range;var L=r(48480);var C=r(58176);var I=(0,n.Z)((function(e){e.setUTCDate(1);e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12}),(function(e){return e.getUTCMonth()}));var P=I;var O=I.range;var D=r(79791)},30052:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=new Date,a=new Date;function i(e,t,r,o){function s(t){return e(t=arguments.length===0?new Date:new Date(+t)),t}s.floor=function(t){return e(t=new Date(+t)),t};s.ceil=function(r){return e(r=new Date(r-1)),t(r,1),e(r),r};s.round=function(e){var t=s(e),r=s.ceil(e);return e-t<r-e?t:r};s.offset=function(e,r){return t(e=new Date(+e),r==null?1:Math.floor(r)),e};s.range=function(r,n,a){var i=[],o;r=s.ceil(r);a=a==null?1:Math.floor(a);if(!(r<n)||!(a>0))return i;do{i.push(o=new Date(+r)),t(r,a),e(r)}while(o<r&&r<n);return i};s.filter=function(r){return i((function(t){if(t>=t)while(e(t),!r(t))t.setTime(t-1)}),(function(e,n){if(e>=e){if(n<0)while(++n<=0){while(t(e,-1),!r(e)){}}else while(--n>=0){while(t(e,+1),!r(e)){}}}}))};if(r){s.count=function(t,i){n.setTime(+t),a.setTime(+i);e(n),e(a);return Math.floor(r(n,a))};s.every=function(e){e=Math.floor(e);return!isFinite(e)||!(e>0)?null:!(e>1)?s:s.filter(o?function(t){return o(t)%e===0}:function(t){return s.count(0,t)%e===0})}}return s}},48480:function(e,t,r){"use strict";r.d(t,{y:function(){return o}});var n=r(30052);var a=r(54263);var i=(0,n.Z)((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/a.UD}),(function(e){return e.getUTCDate()-1}));t.Z=i;var o=i.range},58176:function(e,t,r){"use strict";r.d(t,{$3:function(){return p},DK:function(){return d},J1:function(){return l},Ox:function(){return o},QQ:function(){return c},Q_:function(){return x},SU:function(){return h},b3:function(){return u},fz:function(){return m},g4:function(){return v},hB:function(){return f},l6:function(){return s},uy:function(){return g},xj:function(){return y}});var n=r(30052);var a=r(54263);function i(e){return(0,n.Z)((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7);t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t*7)}),(function(e,t){return(t-e)/a.iM}))}var o=i(0);var s=i(1);var l=i(2);var u=i(3);var f=i(4);var c=i(5);var v=i(6);var h=o.range;var p=s.range;var d=l.range;var g=u.range;var y=f.range;var m=c.range;var x=v.range},79791:function(e,t,r){"use strict";r.d(t,{D:function(){return i}});var n=r(30052);var a=(0,n.Z)((function(e){e.setUTCMonth(0,1);e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));a.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:(0,n.Z)((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e);t.setUTCMonth(0,1);t.setUTCHours(0,0,0,0)}),(function(t,r){t.setUTCFullYear(t.getUTCFullYear()+r*e)}))};t.Z=a;var i=a.range},59879:function(e,t,r){"use strict";r.d(t,{$t:function(){return y},EY:function(){return v},Ff:function(){return x},Ld:function(){return g},OM:function(){return o},aU:function(){return d},b$:function(){return m},bJ:function(){return p},bL:function(){return f},mC:function(){return c},sy:function(){return l},vm:function(){return h},wA:function(){return s},zg:function(){return u}});var n=r(30052);var a=r(54263);function i(e){return(0,n.Z)((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7);t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t*7)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*a.yB)/a.iM}))}var o=i(0);var s=i(1);var l=i(2);var u=i(3);var f=i(4);var c=i(5);var v=i(6);var h=o.range;var p=s.range;var d=l.range;var g=u.range;var y=f.range;var m=c.range;var x=v.range},34823:function(e,t,r){"use strict";r.d(t,{g:function(){return i}});var n=r(30052);var a=(0,n.Z)((function(e){e.setMonth(0,1);e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));a.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:(0,n.Z)((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e);t.setMonth(0,1);t.setHours(0,0,0,0)}),(function(t,r){t.setFullYear(t.getFullYear()+r*e)}))};t.Z=a;var i=a.range},17045:function(e,t,r){"use strict";var n=r(8709);var a=typeof Symbol==="function"&&typeof Symbol("foo")==="symbol";var i=Object.prototype.toString;var o=Array.prototype.concat;var s=Object.defineProperty;var l=function(e){return typeof e==="function"&&i.call(e)==="[object Function]"};var u=r(55622)();var f=s&&u;var c=function(e,t,r,n){if(t in e){if(n===true){if(e[t]===r){return}}else if(!l(n)||!n()){return}}if(f){s(e,t,{configurable:true,enumerable:false,value:r,writable:true})}else{e[t]=r}};var v=function(e,t){var r=arguments.length>2?arguments[2]:{};var i=n(t);if(a){i=o.call(i,Object.getOwnPropertySymbols(t))}for(var s=0;s<i.length;s+=1){c(e,i[s],t[i[s]],r[i[s]])}};v.supportsDescriptors=!!f;e.exports=v},46775:function(e){e.exports=function(){for(var e=0;e<arguments.length;e++){if(arguments[e]!==undefined)return arguments[e]}}},53545:function(e){"use strict";e.exports=a;var t=a.canvas=document.createElement("canvas");var r=t.getContext("2d");var n=i([32,126]);a.createPairs=i;a.ascii=n;function a(e,t){if(Array.isArray(e))e=e.join(", ");var a={},o,s=16,l=.05;if(t){if(t.length===2&&typeof t[0]==="number"){o=i(t)}else if(Array.isArray(t)){o=t}else{if(t.o)o=i(t.o);else if(t.pairs)o=t.pairs;if(t.fontSize)s=t.fontSize;if(t.threshold!=null)l=t.threshold}}if(!o)o=n;r.font=s+"px "+e;for(var u=0;u<o.length;u++){var f=o[u];var c=r.measureText(f[0]).width+r.measureText(f[1]).width;var v=r.measureText(f).width;if(Math.abs(c-v)>s*l){var h=(v-c)/s;a[f]=h*1e3}}return a}function i(e){var t=[];for(var r=e[0];r<=e[1];r++){var n=String.fromCharCode(r);for(var a=e[0];a<e[1];a++){var i=String.fromCharCode(a);var o=n+i;t.push(o)}}return t}},31457:function(e,t,r){var n=r(65185);var a=r(18625);var i={M:"moveTo",C:"bezierCurveTo"};e.exports=function(e,t){e.beginPath();a(n(t)).forEach((function(t){var r=t[0];var n=t.slice(1);e[i[r]].apply(e,n)}));e.closePath()}},90660:function(e){e.exports=function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},12129:function(e){"use strict";function t(e,r,n){var a=e[n]|0;if(a<=0){return[]}var i=new Array(a),o;if(n===e.length-1){for(o=0;o<a;++o){i[o]=r}}else{for(o=0;o<a;++o){i[o]=t(e,r,n+1)}}return i}function r(e,t){var r,n;r=new Array(e);for(n=0;n<e;++n){r[n]=t}return r}function n(e,n){if(typeof n==="undefined"){n=0}switch(typeof e){case"number":if(e>0){return r(e|0,n)}break;case"object":if(typeof e.length==="number"){return t(e,n,0)}break}return[]}e.exports=n},11474:function(e){"use strict";e.exports=t;e.exports["default"]=t;function t(e,t,n){n=n||2;var i=t&&t.length,o=i?t[0]*n:e.length,s=r(e,0,o,n,true),l=[];if(!s||s.next===s.prev)return l;var f,c,v,h,p,d,g;if(i)s=u(e,t,s,n);if(e.length>80*n){f=v=e[0];c=h=e[1];for(var y=n;y<o;y+=n){p=e[y];d=e[y+1];if(p<f)f=p;if(d<c)c=d;if(p>v)v=p;if(d>h)h=d}g=Math.max(v-f,h-c);g=g!==0?1/g:0}a(s,l,n,f,c,g);return l}function r(e,t,r,n,a){var i,o;if(a===P(e,t,r,n)>0){for(i=t;i<r;i+=n)o=L(i,e[i],e[i+1],o)}else{for(i=r-n;i>=t;i-=n)o=L(i,e[i],e[i+1],o)}if(o&&_(o,o.next)){C(o);o=o.next}return o}function n(e,t){if(!e)return e;if(!t)t=e;var r=e,n;do{n=false;if(!r.steiner&&(_(r,r.next)||b(r.prev,r,r.next)===0)){C(r);r=t=r.prev;if(r===r.next)break;n=true}else{r=r.next}}while(n||r!==t);return t}function a(e,t,r,u,f,c,v){if(!e)return;if(!v&&c)p(e,u,f,c);var h=e,d,g;while(e.prev!==e.next){d=e.prev;g=e.next;if(c?o(e,u,f,c):i(e)){t.push(d.i/r);t.push(e.i/r);t.push(g.i/r);C(e);e=g.next;h=g.next;continue}e=g;if(e===h){if(!v){a(n(e),t,r,u,f,c,1)}else if(v===1){e=s(n(e),t,r);a(e,t,r,u,f,c,2)}else if(v===2){l(e,t,r,u,f,c)}break}}}function i(e){var t=e.prev,r=e,n=e.next;if(b(t,r,n)>=0)return false;var a=e.next.next;while(a!==e.prev){if(m(t.x,t.y,r.x,r.y,n.x,n.y,a.x,a.y)&&b(a.prev,a,a.next)>=0)return false;a=a.next}return true}function o(e,t,r,n){var a=e.prev,i=e,o=e.next;if(b(a,i,o)>=0)return false;var s=a.x<i.x?a.x<o.x?a.x:o.x:i.x<o.x?i.x:o.x,l=a.y<i.y?a.y<o.y?a.y:o.y:i.y<o.y?i.y:o.y,u=a.x>i.x?a.x>o.x?a.x:o.x:i.x>o.x?i.x:o.x,f=a.y>i.y?a.y>o.y?a.y:o.y:i.y>o.y?i.y:o.y;var c=g(s,l,t,r,n),v=g(u,f,t,r,n);var h=e.prevZ,p=e.nextZ;while(h&&h.z>=c&&p&&p.z<=v){if(h!==e.prev&&h!==e.next&&m(a.x,a.y,i.x,i.y,o.x,o.y,h.x,h.y)&&b(h.prev,h,h.next)>=0)return false;h=h.prevZ;if(p!==e.prev&&p!==e.next&&m(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&b(p.prev,p,p.next)>=0)return false;p=p.nextZ}while(h&&h.z>=c){if(h!==e.prev&&h!==e.next&&m(a.x,a.y,i.x,i.y,o.x,o.y,h.x,h.y)&&b(h.prev,h,h.next)>=0)return false;h=h.prevZ}while(p&&p.z<=v){if(p!==e.prev&&p!==e.next&&m(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&b(p.prev,p,p.next)>=0)return false;p=p.nextZ}return true}function s(e,t,r){var a=e;do{var i=a.prev,o=a.next.next;if(!_(i,o)&&w(i,a,a.next,o)&&M(i,o)&&M(o,i)){t.push(i.i/r);t.push(a.i/r);t.push(o.i/r);C(a);C(a.next);a=e=o}a=a.next}while(a!==e);return n(a)}function l(e,t,r,i,o,s){var l=e;do{var u=l.next.next;while(u!==l.prev){if(l.i!==u.i&&x(l,u)){var f=E(l,u);l=n(l,l.next);f=n(f,f.next);a(l,t,r,i,o,s);a(f,t,r,i,o,s);return}u=u.next}l=l.next}while(l!==e)}function u(e,t,a,i){var o=[],s,l,u,v,h;for(s=0,l=t.length;s<l;s++){u=t[s]*i;v=s<l-1?t[s+1]*i:e.length;h=r(e,u,v,i,false);if(h===h.next)h.steiner=true;o.push(y(h))}o.sort(f);for(s=0;s<o.length;s++){c(o[s],a);a=n(a,a.next)}return a}function f(e,t){return e.x-t.x}function c(e,t){t=v(e,t);if(t){var r=E(t,e);n(t,t.next);n(r,r.next)}}function v(e,t){var r=t,n=e.x,a=e.y,i=-Infinity,o;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>i){i=s;if(s===n){if(a===r.y)return r;if(a===r.next.y)return r.next}o=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!o)return null;if(n===i)return o;var l=o,u=o.x,f=o.y,c=Infinity,v;r=o;do{if(n>=r.x&&r.x>=u&&n!==r.x&&m(a<f?n:i,a,u,f,a<f?i:n,a,r.x,r.y)){v=Math.abs(a-r.y)/(n-r.x);if(M(r,e)&&(v<c||v===c&&(r.x>o.x||r.x===o.x&&h(o,r)))){o=r;c=v}}r=r.next}while(r!==l);return o}function h(e,t){return b(e.prev,e,t.prev)<0&&b(t.next,e,e.next)<0}function p(e,t,r,n){var a=e;do{if(a.z===null)a.z=g(a.x,a.y,t,r,n);a.prevZ=a.prev;a.nextZ=a.next;a=a.next}while(a!==e);a.prevZ.nextZ=null;a.prevZ=null;d(a)}function d(e){var t,r,n,a,i,o,s,l,u=1;do{r=e;e=null;i=null;o=0;while(r){o++;n=r;s=0;for(t=0;t<u;t++){s++;n=n.nextZ;if(!n)break}l=u;while(s>0||l>0&&n){if(s!==0&&(l===0||!n||r.z<=n.z)){a=r;r=r.nextZ;s--}else{a=n;n=n.nextZ;l--}if(i)i.nextZ=a;else e=a;a.prevZ=i;i=a}r=n}i.nextZ=null;u*=2}while(o>1);return e}function g(e,t,r,n,a){e=32767*(e-r)*a;t=32767*(t-n)*a;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;e=(e|e<<1)&1431655765;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;t=(t|t<<1)&1431655765;return e|t<<1}function y(e){var t=e,r=e;do{if(t.x<r.x||t.x===r.x&&t.y<r.y)r=t;t=t.next}while(t!==e);return r}function m(e,t,r,n,a,i,o,s){return(a-o)*(t-s)-(e-o)*(i-s)>=0&&(e-o)*(n-s)-(r-o)*(t-s)>=0&&(r-o)*(i-s)-(a-o)*(n-s)>=0}function x(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!A(e,t)&&(M(e,t)&&M(t,e)&&S(e,t)&&(b(e.prev,e,t.prev)||b(e,t.prev,t))||_(e,t)&&b(e.prev,e,e.next)>0&&b(t.prev,t,t.next)>0)}function b(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function _(e,t){return e.x===t.x&&e.y===t.y}function w(e,t,r,n){var a=k(b(e,t,r));var i=k(b(e,t,n));var o=k(b(r,n,e));var s=k(b(r,n,t));if(a!==i&&o!==s)return true;if(a===0&&T(e,r,t))return true;if(i===0&&T(e,n,t))return true;if(o===0&&T(r,e,n))return true;if(s===0&&T(r,t,n))return true;return false}function T(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function k(e){return e>0?1:e<0?-1:0}function A(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&w(r,r.next,e,t))return true;r=r.next}while(r!==e);return false}function M(e,t){return b(e.prev,e,e.next)<0?b(e,t,e.next)>=0&&b(e,e.prev,t)>=0:b(e,t,e.prev)<0||b(e,e.next,t)<0}function S(e,t){var r=e,n=false,a=(e.x+t.x)/2,i=(e.y+t.y)/2;do{if(r.y>i!==r.next.y>i&&r.next.y!==r.y&&a<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x)n=!n;r=r.next}while(r!==e);return n}function E(e,t){var r=new I(e.i,e.x,e.y),n=new I(t.i,t.x,t.y),a=e.next,i=t.prev;e.next=t;t.prev=e;r.next=a;a.prev=r;n.next=r;r.prev=n;i.next=n;n.prev=i;return n}function L(e,t,r,n){var a=new I(e,t,r);if(!n){a.prev=a;a.next=a}else{a.next=n.next;a.prev=n;n.next.prev=a;n.next=a}return a}function C(e){e.next.prev=e.prev;e.prev.next=e.next;if(e.prevZ)e.prevZ.nextZ=e.nextZ;if(e.nextZ)e.nextZ.prevZ=e.prevZ}function I(e,t,r){this.i=e;this.x=t;this.y=r;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=false}t.deviation=function(e,t,r,n){var a=t&&t.length;var i=a?t[0]*r:e.length;var o=Math.abs(P(e,0,i,r));if(a){for(var s=0,l=t.length;s<l;s++){var u=t[s]*r;var f=s<l-1?t[s+1]*r:e.length;o-=Math.abs(P(e,u,f,r))}}var c=0;for(s=0;s<n.length;s+=3){var v=n[s]*r;var h=n[s+1]*r;var p=n[s+2]*r;c+=Math.abs((e[v]-e[p])*(e[h+1]-e[v+1])-(e[v]-e[h])*(e[p+1]-e[v+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function P(e,t,r,n){var a=0;for(var i=t,o=r-n;i<r;i+=n){a+=(e[o]-e[i])*(e[i+1]+e[o+1]);o=i}return a}t.flatten=function(e){var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0;for(var a=0;a<e.length;a++){for(var i=0;i<e[a].length;i++){for(var o=0;o<t;o++)r.vertices.push(e[a][i][o])}if(a>0){n+=e[a-1].length;r.holes.push(n)}}return r}},2502:function(e,t,r){var n=r(68664);e.exports=function e(t,r){var a=[];var i=[];var o=[];var s={};var l=[];var u;function f(e){o[e]=false;if(s.hasOwnProperty(e)){Object.keys(s[e]).forEach((function(t){delete s[e][t];if(o[t]){f(t)}}))}}function c(e){var t=false;i.push(e);o[e]=true;var r;var n;for(r=0;r<l[e].length;r++){n=l[e][r];if(n===u){v(u,i);t=true}else if(!o[n]){t=c(n)}}if(t){f(e)}else{for(r=0;r<l[e].length;r++){n=l[e][r];var a=s[n];if(!a){a={};s[n]=a}a[n]=true}}i.pop();return t}function v(e,t){var n=[].concat(t).concat(e);if(r){r(c)}else{a.push(n)}}function h(e){for(var r=0;r<t.length;r++){if(r<e)t[r]=[];t[r]=t[r].filter((function(t){return t>=e}))}}function p(e){h(e);var r=t;var a=n(r);var i=a.components.filter((function(e){return e.length>1}));var o=Infinity;var s;for(var l=0;l<i.length;l++){for(var u=0;u<i[l].length;u++){if(i[l][u]<o){o=i[l][u];s=l}}}var f=i[s];if(!f)return false;var c=t.map((function(e,t){if(f.indexOf(t)===-1)return[];return e.filter((function(e){return f.indexOf(e)!==-1}))}));return{leastVertex:o,adjList:c}}u=0;var d=t.length;while(u<d){var g=p(u);u=g.leastVertex;l=g.adjList;if(l){for(var y=0;y<l.length;y++){for(var m=0;m<l[y].length;m++){var x=l[y][m];o[+x]=false;s[x]={}}}c(u);u=u+1}else{u=d}}if(r){return}else{return a}}},16134:function(e,t,r){"use strict";var n=r(36672);e.exports=function(){n(this).length=0;return this}},4892:function(e,t,r){"use strict";e.exports=r(64404)()?Array.from:r(49441)},64404:function(e){"use strict";e.exports=function(){var e=Array.from,t,r;if(typeof e!=="function")return false;t=["raz","dwa"];r=e(t);return Boolean(r&&r!==t&&r[1]==="dwa")}},49441:function(e,t,r){"use strict";var n=r(8260).iterator,a=r(73051),i=r(33717),o=r(35976),s=r(78513),l=r(36672),u=r(95296),f=r(87963),c=Array.isArray,v=Function.prototype.call,h={configurable:true,enumerable:true,writable:true,value:null},p=Object.defineProperty;e.exports=function(e){var t=arguments[1],r=arguments[2],d,g,y,m,x,b,_,w,T,k;e=Object(l(e));if(u(t))s(t);if(!this||this===Array||!i(this)){if(!t){if(a(e)){x=e.length;if(x!==1)return Array.apply(null,e);m=new Array(1);m[0]=e[0];return m}if(c(e)){m=new Array(x=e.length);for(g=0;g<x;++g)m[g]=e[g];return m}}m=[]}else{d=this}if(!c(e)){if((T=e[n])!==undefined){_=s(T).call(e);if(d)m=new d;w=_.next();g=0;while(!w.done){k=t?v.call(t,r,w.value,g):w.value;if(d){h.value=k;p(m,g,h)}else{m[g]=k}w=_.next();++g}x=g}else if(f(e)){x=e.length;if(d)m=new d;for(g=0,y=0;g<x;++g){k=e[g];if(g+1<x){b=k.charCodeAt(0);if(b>=55296&&b<=56319)k+=e[++g]}k=t?v.call(t,r,k,y):k;if(d){h.value=k;p(m,y,h)}else{m[y]=k}++y}x=y}}if(x===undefined){x=o(e.length);if(d)m=new d(x);for(g=0;g<x;++g){k=t?v.call(t,r,e[g],g):e[g];if(d){h.value=k;p(m,g,h)}else{m[g]=k}}}if(d){h.value=null;m.length=x}return m}},73051:function(e){"use strict";var t=Object.prototype.toString,r=t.call(function(){return arguments}());e.exports=function(e){return t.call(e)===r}},33717:function(e){"use strict";var t=Object.prototype.toString,r=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);e.exports=function(e){return typeof e==="function"&&r(t.call(e))}},52345:function(e){"use strict";e.exports=function(){}},9953:function(e,t,r){"use strict";e.exports=r(90436)()?Math.sign:r(6069)},90436:function(e){"use strict";e.exports=function(){var e=Math.sign;if(typeof e!=="function")return false;return e(10)===1&&e(-20)===-1}},6069:function(e){"use strict";e.exports=function(e){e=Number(e);if(isNaN(e)||e===0)return e;return e>0?1:-1}},56247:function(e,t,r){"use strict";var n=r(9953),a=Math.abs,i=Math.floor;e.exports=function(e){if(isNaN(e))return 0;e=Number(e);if(e===0||!isFinite(e))return e;return n(e)*i(a(e))}},35976:function(e,t,r){"use strict";var n=r(56247),a=Math.max;e.exports=function(e){return a(0,n(e))}},67260:function(e,t,r){"use strict";var n=r(78513),a=r(36672),i=Function.prototype.bind,o=Function.prototype.call,s=Object.keys,l=Object.prototype.propertyIsEnumerable;e.exports=function(e,t){return function(r,u){var f,c=arguments[2],v=arguments[3];r=Object(a(r));n(u);f=s(r);if(v){f.sort(typeof v==="function"?i.call(v,r):undefined)}if(typeof e!=="function")e=f[e];return o.call(e,f,(function(e,n){if(!l.call(r,e))return t;return o.call(u,c,r[e],e,r,n)}))}}},95879:function(e,t,r){"use strict";e.exports=r(73583)()?Object.assign:r(34205)},73583:function(e){"use strict";e.exports=function(){var e=Object.assign,t;if(typeof e!=="function")return false;t={foo:"raz"};e(t,{bar:"dwa"},{trzy:"trzy"});return t.foo+t.bar+t.trzy==="razdwatrzy"}},34205:function(e,t,r){"use strict";var n=r(68700),a=r(36672),i=Math.max;e.exports=function(e,t){var r,o,s=i(arguments.length,2),l;e=Object(a(e));l=function(n){try{e[n]=t[n]}catch(a){if(!r)r=a}};for(o=1;o<s;++o){t=arguments[o];n(t).forEach(l)}if(r!==undefined)throw r;return e}},19012:function(e,t,r){"use strict";var n=r(4892),a=r(95879),i=r(36672);e.exports=function(e){var t=Object(i(e)),r=arguments[1],o=Object(arguments[2]);if(t!==e&&!r)return t;var s={};if(r){n(r,(function(t){if(o.ensure||t in e)s[t]=e[t]}))}else{a(s,e)}return s}},52818:function(e,t,r){"use strict";var n=Object.create,a;if(!r(33247)()){a=r(51882)}e.exports=function(){var e,t,r;if(!a)return n;if(a.level!==1)return n;e={};t={};r={configurable:false,enumerable:false,writable:true,value:undefined};Object.getOwnPropertyNames(Object.prototype).forEach((function(e){if(e==="__proto__"){t[e]={configurable:true,enumerable:false,writable:true,value:undefined};return}t[e]=r}));Object.defineProperties(e,t);Object.defineProperty(a,"nullPolyfill",{configurable:false,enumerable:false,writable:false,value:e});return function(t,r){return n(t===null?e:t,r)}}()},96437:function(e,t,r){"use strict";e.exports=r(67260)("forEach")},99611:function(e,t,r){"use strict";var n=r(95296);var a={function:true,object:true};e.exports=function(e){return n(e)&&a[typeof e]||false}},95296:function(e,t,r){"use strict";var n=r(52345)();e.exports=function(e){return e!==n&&e!==null}},68700:function(e,t,r){"use strict";e.exports=r(13895)()?Object.keys:r(25217)},13895:function(e){"use strict";e.exports=function(){try{Object.keys("primitive");return true}catch(e){return false}}},25217:function(e,t,r){"use strict";var n=r(95296);var a=Object.keys;e.exports=function(e){return a(n(e)?Object(e):e)}},16906:function(e,t,r){"use strict";var n=r(78513),a=r(96437),i=Function.prototype.call;e.exports=function(e,t){var r={},o=arguments[2];n(t);a(e,(function(e,n,a,s){r[n]=i.call(t,o,e,n,a,s)}));return r}},21780:function(e,t,r){"use strict";var n=r(95296);var a=Array.prototype.forEach,i=Object.create;var o=function(e,t){var r;for(r in e)t[r]=e[r]};e.exports=function(e){var t=i(null);a.call(arguments,(function(e){if(!n(e))return;o(Object(e),t)}));return t}},1496:function(e,t,r){"use strict";e.exports=r(33247)()?Object.setPrototypeOf:r(51882)},33247:function(e){"use strict";var t=Object.create,r=Object.getPrototypeOf,n={};e.exports=function(){var e=Object.setPrototypeOf,a=arguments[0]||t;if(typeof e!=="function")return false;return r(e(a(null),n))===n}},51882:function(e,t,r){"use strict";var n=r(99611),a=r(36672),i=Object.prototype.isPrototypeOf,o=Object.defineProperty,s={configurable:true,enumerable:false,writable:true,value:undefined},l;l=function(e,t){a(e);if(t===null||n(t))return e;throw new TypeError("Prototype must be null or an object")};e.exports=function(e){var t,r;if(!e)return null;if(e.level===2){if(e.set){r=e.set;t=function(e,t){r.call(l(e,t),t);return e}}else{t=function(e,t){l(e,t).__proto__=t;return e}}}else{t=function e(t,r){var n;l(t,r);n=i.call(e.nullPolyfill,t);if(n)delete e.nullPolyfill.__proto__;if(r===null)r=e.nullPolyfill;t.__proto__=r;if(n)o(e.nullPolyfill,"__proto__",s);return t}}return Object.defineProperty(t,"level",{configurable:false,enumerable:false,writable:false,value:e.level})}(function(){var e=Object.create(null),t={},r,n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(n){try{r=n.set;r.call(e,t)}catch(a){}if(Object.getPrototypeOf(e)===t)return{set:r,level:2}}e.__proto__=t;if(Object.getPrototypeOf(e)===t)return{level:2};e={};e.__proto__=t;if(Object.getPrototypeOf(e)===t)return{level:1};return false}());r(52818)},78513:function(e){"use strict";e.exports=function(e){if(typeof e!=="function")throw new TypeError(e+" is not a function");return e}},98976:function(e,t,r){"use strict";var n=r(99611);e.exports=function(e){if(!n(e))throw new TypeError(e+" is not an Object");return e}},36672:function(e,t,r){"use strict";var n=r(95296);e.exports=function(e){if(!n(e))throw new TypeError("Cannot use null or undefined");return e}},66741:function(e,t,r){"use strict";e.exports=r(17557)()?String.prototype.contains:r(60381)},17557:function(e){"use strict";var t="razdwatrzy";e.exports=function(){if(typeof t.contains!=="function")return false;return t.contains("dwa")===true&&t.contains("foo")===false}},60381:function(e){"use strict";var t=String.prototype.indexOf;e.exports=function(e){return t.call(this,e,arguments[1])>-1}},87963:function(e){"use strict";var t=Object.prototype.toString,r=t.call("");e.exports=function(e){return typeof e==="string"||e&&typeof e==="object"&&(e instanceof String||t.call(e)===r)||false}},43043:function(e){"use strict";var t=Object.create(null),r=Math.random;e.exports=function(){var e;do{e=r().toString(36).slice(2)}while(t[e]);return e}},32411:function(e,t,r){"use strict";var n=r(1496),a=r(66741),i=r(62072),o=r(8260),s=r(95426);var l=Object.defineProperty,u;u=e.exports=function(e,t){if(!(this instanceof u))throw new TypeError("Constructor requires 'new'");s.call(this,e);if(!t)t="value";else if(a.call(t,"key+value"))t="key+value";else if(a.call(t,"key"))t="key";else t="value";l(this,"__kind__",i("",t))};if(n)n(u,s);delete u.prototype.constructor;u.prototype=Object.create(s.prototype,{_resolve:i((function(e){if(this.__kind__==="value")return this.__list__[e];if(this.__kind__==="key+value")return[e,this.__list__[e]];return e}))});l(u.prototype,o.toStringTag,i("c","Array Iterator"))},27515:function(e,t,r){"use strict";var n=r(73051),a=r(78513),i=r(87963),o=r(66661);var s=Array.isArray,l=Function.prototype.call,u=Array.prototype.some;e.exports=function(e,t){var r,f=arguments[2],c,v,h,p,d,g,y;if(s(e)||n(e))r="array";else if(i(e))r="string";else e=o(e);a(t);v=function(){h=true};if(r==="array"){u.call(e,(function(e){l.call(t,f,e,v);return h}));return}if(r==="string"){d=e.length;for(p=0;p<d;++p){g=e[p];if(p+1<d){y=g.charCodeAt(0);if(y>=55296&&y<=56319)g+=e[++p]}l.call(t,f,g,v);if(h)break}return}c=e.next();while(!c.done){l.call(t,f,c.value,v);if(h)return;c=e.next()}}},66661:function(e,t,r){"use strict";var n=r(73051),a=r(87963),i=r(32411),o=r(259),s=r(58095),l=r(8260).iterator;e.exports=function(e){if(typeof s(e)[l]==="function")return e[l]();if(n(e))return new i(e);if(a(e))return new o(e);return new i(e)}},95426:function(e,t,r){"use strict";var n=r(16134),a=r(95879),i=r(78513),o=r(36672),s=r(62072),l=r(55174),u=r(8260);var f=Object.defineProperty,c=Object.defineProperties,v;e.exports=v=function(e,t){if(!(this instanceof v))throw new TypeError("Constructor requires 'new'");c(this,{__list__:s("w",o(e)),__context__:s("w",t),__nextIndex__:s("w",0)});if(!t)return;i(t.on);t.on("_add",this._onAdd);t.on("_delete",this._onDelete);t.on("_clear",this._onClear)};delete v.prototype.constructor;c(v.prototype,a({_next:s((function(){var e;if(!this.__list__)return undefined;if(this.__redo__){e=this.__redo__.shift();if(e!==undefined)return e}if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind();return undefined})),next:s((function(){return this._createResult(this._next())})),_createResult:s((function(e){if(e===undefined)return{done:true,value:undefined};return{done:false,value:this._resolve(e)}})),_resolve:s((function(e){return this.__list__[e]})),_unBind:s((function(){this.__list__=null;delete this.__redo__;if(!this.__context__)return;this.__context__.off("_add",this._onAdd);this.__context__.off("_delete",this._onDelete);this.__context__.off("_clear",this._onClear);this.__context__=null})),toString:s((function(){return"[object "+(this[u.toStringTag]||"Object")+"]"}))},l({_onAdd:s((function(e){if(e>=this.__nextIndex__)return;++this.__nextIndex__;if(!this.__redo__){f(this,"__redo__",s("c",[e]));return}this.__redo__.forEach((function(t,r){if(t>=e)this.__redo__[r]=++t}),this);this.__redo__.push(e)})),_onDelete:s((function(e){var t;if(e>=this.__nextIndex__)return;--this.__nextIndex__;if(!this.__redo__)return;t=this.__redo__.indexOf(e);if(t!==-1)this.__redo__.splice(t,1);this.__redo__.forEach((function(t,r){if(t>e)this.__redo__[r]=--t}),this)})),_onClear:s((function(){if(this.__redo__)n.call(this.__redo__);this.__nextIndex__=0}))})));f(v.prototype,u.iterator,s((function(){return this})))},35940:function(e,t,r){"use strict";var n=r(73051),a=r(95296),i=r(87963);var o=r(8260).iterator,s=Array.isArray;e.exports=function(e){if(!a(e))return false;if(s(e))return true;if(i(e))return true;if(n(e))return true;return typeof e[o]==="function"}},259:function(e,t,r){"use strict";var n=r(1496),a=r(62072),i=r(8260),o=r(95426);var s=Object.defineProperty,l;l=e.exports=function(e){if(!(this instanceof l))throw new TypeError("Constructor requires 'new'");e=String(e);o.call(this,e);s(this,"__length__",a("",e.length))};if(n)n(l,o);delete l.prototype.constructor;l.prototype=Object.create(o.prototype,{_next:a((function(){if(!this.__list__)return undefined;if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind();return undefined})),_resolve:a((function(e){var t=this.__list__[e],r;if(this.__nextIndex__===this.__length__)return t;r=t.charCodeAt(0);if(r>=55296&&r<=56319)return t+this.__list__[this.__nextIndex__++];return t}))});s(l.prototype,i.toStringTag,a("c","String Iterator"))},58095:function(e,t,r){"use strict";var n=r(35940);e.exports=function(e){if(!n(e))throw new TypeError(e+" is not iterable");return e}},73523:function(e){"use strict";function t(e,t){if(e===undefined||e===null){throw new TypeError("Cannot convert first argument to object")}var r=Object(e);for(var n=1;n<arguments.length;n++){var a=arguments[n];if(a===undefined||a===null){continue}var i=Object.keys(Object(a));for(var o=0,s=i.length;o<s;o++){var l=i[o];var u=Object.getOwnPropertyDescriptor(a,l);if(u!==undefined&&u.enumerable){r[l]=a[l]}}}return r}function r(){if(!Object.assign){Object.defineProperty(Object,"assign",{enumerable:false,configurable:true,writable:true,value:t})}}e.exports={assign:t,polyfill:r}},8260:function(e,t,r){"use strict";e.exports=r(69711)()?r(94908).Symbol:r(18415)},69711:function(e,t,r){"use strict";var n=r(94908),a={object:true,symbol:true};e.exports=function(){var e=n.Symbol;var t;if(typeof e!=="function")return false;t=e("test symbol");try{String(t)}catch(r){return false}if(!a[typeof e.iterator])return false;if(!a[typeof e.toPrimitive])return false;if(!a[typeof e.toStringTag])return false;return true}},82276:function(e){"use strict";e.exports=function(e){if(!e)return false;if(typeof e==="symbol")return true;if(!e.constructor)return false;if(e.constructor.name!=="Symbol")return false;return e[e.constructor.toStringTag]==="Symbol"}},29366:function(e,t,r){"use strict";var n=r(62072);var a=Object.create,i=Object.defineProperty,o=Object.prototype;var s=a(null);e.exports=function(e){var t=0,r,a;while(s[e+(t||"")])++t;e+=t||"";s[e]=true;r="@@"+e;i(o,r,n.gs(null,(function(e){if(a)return;a=true;i(this,r,n(e));a=false})));return r}},92842:function(e,t,r){"use strict";var n=r(62072),a=r(94908).Symbol;e.exports=function(e){return Object.defineProperties(e,{hasInstance:n("",a&&a.hasInstance||e("hasInstance")),isConcatSpreadable:n("",a&&a.isConcatSpreadable||e("isConcatSpreadable")),iterator:n("",a&&a.iterator||e("iterator")),match:n("",a&&a.match||e("match")),replace:n("",a&&a.replace||e("replace")),search:n("",a&&a.search||e("search")),species:n("",a&&a.species||e("species")),split:n("",a&&a.split||e("split")),toPrimitive:n("",a&&a.toPrimitive||e("toPrimitive")),toStringTag:n("",a&&a.toStringTag||e("toStringTag")),unscopables:n("",a&&a.unscopables||e("unscopables"))})}},13304:function(e,t,r){"use strict";var n=r(62072),a=r(53308);var i=Object.create(null);e.exports=function(e){return Object.defineProperties(e,{for:n((function(t){if(i[t])return i[t];return i[t]=e(String(t))})),keyFor:n((function(e){var t;a(e);for(t in i){if(i[t]===e)return t}return undefined}))})}},18415:function(e,t,r){"use strict";var n=r(62072),a=r(53308),i=r(94908).Symbol,o=r(29366),s=r(92842),l=r(13304);var u=Object.create,f=Object.defineProperties,c=Object.defineProperty;var v,h,p;if(typeof i==="function"){try{String(i());p=true}catch(d){}}else{i=null}h=function e(t){if(this instanceof h)throw new TypeError("Symbol is not a constructor");return v(t)};e.exports=v=function e(t){var r;if(this instanceof e)throw new TypeError("Symbol is not a constructor");if(p)return i(t);r=u(h.prototype);t=t===undefined?"":String(t);return f(r,{__description__:n("",t),__name__:n("",o(t))})};s(v);l(v);f(h.prototype,{constructor:n(v),toString:n("",(function(){return this.__name__}))});f(v.prototype,{toString:n((function(){return"Symbol ("+a(this).__description__+")"})),valueOf:n((function(){return a(this)}))});c(v.prototype,v.toPrimitive,n("",(function(){var e=a(this);if(typeof e==="symbol")return e;return e.toString()})));c(v.prototype,v.toStringTag,n("c","Symbol"));c(h.prototype,v.toStringTag,n("c",v.prototype[v.toStringTag]));c(h.prototype,v.toPrimitive,n("c",v.prototype[v.toPrimitive]))},53308:function(e,t,r){"use strict";var n=r(82276);e.exports=function(e){if(!n(e))throw new TypeError(e+" is not a symbol");return e}},83522:function(e,t,r){"use strict";e.exports=r(96402)()?WeakMap:r(329)},96402:function(e){"use strict";e.exports=function(){var e,t;if(typeof WeakMap!=="function")return false;try{e=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch(r){return false}if(String(e)!=="[object WeakMap]")return false;if(typeof e.set!=="function")return false;if(e.set({},1)!==e)return false;if(typeof e.delete!=="function")return false;if(typeof e.has!=="function")return false;if(e.get(t)!=="one")return false;return true}},96416:function(e){"use strict";e.exports=function(){if(typeof WeakMap!=="function")return false;return Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},329:function(e,t,r){"use strict";var n=r(95296),a=r(1496),i=r(98976),o=r(36672),s=r(43043),l=r(62072),u=r(66661),f=r(27515),c=r(8260).toStringTag,v=r(96416),h=Array.isArray,p=Object.defineProperty,d=Object.prototype.hasOwnProperty,g=Object.getPrototypeOf,y;e.exports=y=function(){var e=arguments[0],t;if(!(this instanceof y))throw new TypeError("Constructor requires 'new'");t=v&&a&&WeakMap!==y?a(new WeakMap,g(this)):this;if(n(e)){if(!h(e))e=u(e)}p(t,"__weakMapData__",l("c","$weakMap$"+s()));if(!e)return t;f(e,(function(e){o(e);t.set(e[0],e[1])}));return t};if(v){if(a)a(y,WeakMap);y.prototype=Object.create(WeakMap.prototype,{constructor:l(y)})}Object.defineProperties(y.prototype,{delete:l((function(e){if(d.call(i(e),this.__weakMapData__)){delete e[this.__weakMapData__];return true}return false})),get:l((function(e){if(!d.call(i(e),this.__weakMapData__))return undefined;return e[this.__weakMapData__]})),has:l((function(e){return d.call(i(e),this.__weakMapData__)})),set:l((function(e,t){p(i(e),this.__weakMapData__,l("c",t));return this})),toString:l((function(){return"[object WeakMap]"}))});p(y.prototype,c,l("c","WeakMap"))},15398:function(e){"use strict";var t=typeof Reflect==="object"?Reflect:null;var r=t&&typeof t.apply==="function"?t.apply:function e(t,r,n){return Function.prototype.apply.call(t,r,n)};var n;if(t&&typeof t.ownKeys==="function"){n=t.ownKeys}else if(Object.getOwnPropertySymbols){n=function e(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}}else{n=function e(t){return Object.getOwnPropertyNames(t)}}function a(e){if(console&&console.warn)console.warn(e)}var i=Number.isNaN||function e(t){return t!==t};function o(){o.init.call(this)}e.exports=o;e.exports.once=m;o.EventEmitter=o;o.prototype._events=undefined;o.prototype._eventsCount=0;o.prototype._maxListeners=undefined;var s=10;function l(e){if(typeof e!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:true,get:function(){return s},set:function(e){if(typeof e!=="number"||e<0||i(e)){throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".")}s=e}});o.init=function(){if(this._events===undefined||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};o.prototype.setMaxListeners=function e(t){if(typeof t!=="number"||t<0||i(t)){throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".")}this._maxListeners=t;return this};function u(e){if(e._maxListeners===undefined)return o.defaultMaxListeners;return e._maxListeners}o.prototype.getMaxListeners=function e(){return u(this)};o.prototype.emit=function e(t){var n=[];for(var a=1;a<arguments.length;a++)n.push(arguments[a]);var i=t==="error";var o=this._events;if(o!==undefined)i=i&&o.error===undefined;else if(!i)return false;if(i){var s;if(n.length>0)s=n[0];if(s instanceof Error){throw s}var l=new Error("Unhandled error."+(s?" ("+s.message+")":""));l.context=s;throw l}var u=o[t];if(u===undefined)return false;if(typeof u==="function"){r(u,this,n)}else{var f=u.length;var c=d(u,f);for(var a=0;a<f;++a)r(c[a],this,n)}return true};function f(e,t,r,n){var i;var o;var s;l(r);o=e._events;if(o===undefined){o=e._events=Object.create(null);e._eventsCount=0}else{if(o.newListener!==undefined){e.emit("newListener",t,r.listener?r.listener:r);o=e._events}s=o[t]}if(s===undefined){s=o[t]=r;++e._eventsCount}else{if(typeof s==="function"){s=o[t]=n?[r,s]:[s,r]}else if(n){s.unshift(r)}else{s.push(r)}i=u(e);if(i>0&&s.length>i&&!s.warned){s.warned=true;var f=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners "+"added. Use emitter.setMaxListeners() to "+"increase limit");f.name="MaxListenersExceededWarning";f.emitter=e;f.type=t;f.count=s.length;a(f)}}return e}o.prototype.addListener=function e(t,r){return f(this,t,r,false)};o.prototype.on=o.prototype.addListener;o.prototype.prependListener=function e(t,r){return f(this,t,r,true)};function c(){if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;if(arguments.length===0)return this.listener.call(this.target);return this.listener.apply(this.target,arguments)}}function v(e,t,r){var n={fired:false,wrapFn:undefined,target:e,type:t,listener:r};var a=c.bind(n);a.listener=r;n.wrapFn=a;return a}o.prototype.once=function e(t,r){l(r);this.on(t,v(this,t,r));return this};o.prototype.prependOnceListener=function e(t,r){l(r);this.prependListener(t,v(this,t,r));return this};o.prototype.removeListener=function e(t,r){var n,a,i,o,s;l(r);a=this._events;if(a===undefined)return this;n=a[t];if(n===undefined)return this;if(n===r||n.listener===r){if(--this._eventsCount===0)this._events=Object.create(null);else{delete a[t];if(a.removeListener)this.emit("removeListener",t,n.listener||r)}}else if(typeof n!=="function"){i=-1;for(o=n.length-1;o>=0;o--){if(n[o]===r||n[o].listener===r){s=n[o].listener;i=o;break}}if(i<0)return this;if(i===0)n.shift();else{g(n,i)}if(n.length===1)a[t]=n[0];if(a.removeListener!==undefined)this.emit("removeListener",t,s||r)}return this};o.prototype.off=o.prototype.removeListener;o.prototype.removeAllListeners=function e(t){var r,n,a;n=this._events;if(n===undefined)return this;if(n.removeListener===undefined){if(arguments.length===0){this._events=Object.create(null);this._eventsCount=0}else if(n[t]!==undefined){if(--this._eventsCount===0)this._events=Object.create(null);else delete n[t]}return this}if(arguments.length===0){var i=Object.keys(n);var o;for(a=0;a<i.length;++a){o=i[a];if(o==="removeListener")continue;this.removeAllListeners(o)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}r=n[t];if(typeof r==="function"){this.removeListener(t,r)}else if(r!==undefined){for(a=r.length-1;a>=0;a--){this.removeListener(t,r[a])}}return this};function h(e,t,r){var n=e._events;if(n===undefined)return[];var a=n[t];if(a===undefined)return[];if(typeof a==="function")return r?[a.listener||a]:[a];return r?y(a):d(a,a.length)}o.prototype.listeners=function e(t){return h(this,t,true)};o.prototype.rawListeners=function e(t){return h(this,t,false)};o.listenerCount=function(e,t){if(typeof e.listenerCount==="function"){return e.listenerCount(t)}else{return p.call(e,t)}};o.prototype.listenerCount=p;function p(e){var t=this._events;if(t!==undefined){var r=t[e];if(typeof r==="function"){return 1}else if(r!==undefined){return r.length}}return 0}o.prototype.eventNames=function e(){return this._eventsCount>0?n(this._events):[]};function d(e,t){var r=new Array(t);for(var n=0;n<t;++n)r[n]=e[n];return r}function g(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function y(e){var t=new Array(e.length);for(var r=0;r<t.length;++r){t[r]=e[r].listener||e[r]}return t}function m(e,t){return new Promise((function(r,n){function a(r){e.removeListener(t,i);n(r)}function i(){if(typeof e.removeListener==="function"){e.removeListener("error",a)}r([].slice.call(arguments))}b(e,t,i,{once:true});if(t!=="error"){x(e,a,{once:true})}}))}function x(e,t,r){if(typeof e.on==="function"){b(e,"error",t,r)}}function b(e,t,r,n){if(typeof e.on==="function"){if(n.once){e.once(t,r)}else{e.on(t,r)}}else if(typeof e.addEventListener==="function"){e.addEventListener(t,(function a(i){if(n.once){e.removeEventListener(t,a)}r(i)}))}else{throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}}},60774:function(e){var t=function(){if(typeof self==="object"&&self)return self;if(typeof window==="object"&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:true})}catch(e){return t()}try{if(!__global__)return t();return __global__}finally{delete Object.prototype.__global__}}()},94908:function(e,t,r){"use strict";e.exports=r(51152)()?globalThis:r(60774)},51152:function(e){"use strict";e.exports=function(){if(typeof globalThis!=="object")return false;if(!globalThis)return false;return globalThis.Array===Array}},92770:function(e,t,r){"use strict";var n=r(18546);e.exports=function(e){var t=typeof e;if(t==="string"){var r=e;e=+e;if(e===0&&n(r))return false}else if(t!=="number")return false;return e-e<1}},30120:function(e,t,r){var n=r(90660);e.exports=a;function a(e,t,r){if(!e)throw new TypeError("must specify data as first parameter");r=+(r||0)|0;if(Array.isArray(e)&&(e[0]&&typeof e[0][0]==="number")){var a=e[0].length;var i=e.length*a;var o,s,l,u;if(!t||typeof t==="string"){t=new(n(t||"float32"))(i+r)}var f=t.length-r;if(i!==f){throw new Error("source length "+i+" ("+a+"x"+e.length+")"+" does not match destination length "+f)}for(o=0,l=r;o<e.length;o++){for(s=0;s<a;s++){t[l++]=e[o][s]===null?NaN:e[o][s]}}}else{if(!t||typeof t==="string"){var c=n(t||"float32");if(Array.isArray(e)||t==="array"){t=new c(e.length+r);for(o=0,l=r,u=t.length;l<u;l++,o++){t[l]=e[o]===null?NaN:e[o]}}else{if(r===0){t=new c(e)}else{t=new c(e.length+r);t.set(e,r)}}}else{t.set(e,r)}}return t}},68016:function(e,t,r){"use strict";var n=r(53313);var a=[32,126];e.exports=i;function i(e){e=e||{};var t=e.shape?e.shape:e.canvas?[e.canvas.width,e.canvas.height]:[512,512];var r=e.canvas||document.createElement("canvas");var i=e.font;var o=typeof e.step==="number"?[e.step,e.step]:e.step||[32,32];var s=e.chars||a;if(i&&typeof i!=="string")i=n(i);if(!Array.isArray(s)){s=String(s).split("")}else if(s.length===2&&typeof s[0]==="number"&&typeof s[1]==="number"){var l=[];for(var u=s[0],f=0;u<=s[1];u++){l[f++]=String.fromCharCode(u)}s=l}t=t.slice();r.width=t[0];r.height=t[1];var c=r.getContext("2d");c.fillStyle="#000";c.fillRect(0,0,r.width,r.height);c.font=i;c.textAlign="center";c.textBaseline="middle";c.fillStyle="#fff";var v=o[0]/2;var h=o[1]/2;for(var u=0;u<s.length;u++){c.fillText(s[u],v,h);if((v+=o[0])>t[0]-o[0]/2)v=o[0]/2,h+=o[1]}return r}},32879:function(e){"use strict";e.exports=t;t.canvas=document.createElement("canvas");t.cache={};function t(e,i){if(!i)i={};if(typeof e==="string"||Array.isArray(e)){i.family=e}var o=Array.isArray(i.family)?i.family.join(", "):i.family;if(!o)throw Error("`family` must be defined");var s=i.size||i.fontSize||i.em||48;var l=i.weight||i.fontWeight||"";var u=i.style||i.fontStyle||"";var e=[u,l,s].join(" ")+"px "+o;var f=i.origin||"top";if(t.cache[o]){if(s<=t.cache[o].em){return r(t.cache[o],f)}}var c=i.canvas||t.canvas;var v=c.getContext("2d");var h={upper:i.upper!==undefined?i.upper:"H",lower:i.lower!==undefined?i.lower:"x",descent:i.descent!==undefined?i.descent:"p",ascent:i.ascent!==undefined?i.ascent:"h",tittle:i.tittle!==undefined?i.tittle:"i",overshoot:i.overshoot!==undefined?i.overshoot:"O"};var p=Math.ceil(s*1.5);c.height=p;c.width=p*.5;v.font=e;var d="H";var g={top:0};v.clearRect(0,0,p,p);v.textBaseline="top";v.fillStyle="black";v.fillText(d,0,0);var y=n(v.getImageData(0,0,p,p));v.clearRect(0,0,p,p);v.textBaseline="bottom";v.fillText(d,0,p);var m=n(v.getImageData(0,0,p,p));g.lineHeight=g.bottom=p-m+y;v.clearRect(0,0,p,p);v.textBaseline="alphabetic";v.fillText(d,0,p);var x=n(v.getImageData(0,0,p,p));var b=p-x-1+y;g.baseline=g.alphabetic=b;v.clearRect(0,0,p,p);v.textBaseline="middle";v.fillText(d,0,p*.5);var _=n(v.getImageData(0,0,p,p));g.median=g.middle=p-_-1+y-p*.5;v.clearRect(0,0,p,p);v.textBaseline="hanging";v.fillText(d,0,p*.5);var w=n(v.getImageData(0,0,p,p));g.hanging=p-w-1+y-p*.5;v.clearRect(0,0,p,p);v.textBaseline="ideographic";v.fillText(d,0,p);var T=n(v.getImageData(0,0,p,p));g.ideographic=p-T-1+y;if(h.upper){v.clearRect(0,0,p,p);v.textBaseline="top";v.fillText(h.upper,0,0);g.upper=n(v.getImageData(0,0,p,p));g.capHeight=g.baseline-g.upper}if(h.lower){v.clearRect(0,0,p,p);v.textBaseline="top";v.fillText(h.lower,0,0);g.lower=n(v.getImageData(0,0,p,p));g.xHeight=g.baseline-g.lower}if(h.tittle){v.clearRect(0,0,p,p);v.textBaseline="top";v.fillText(h.tittle,0,0);g.tittle=n(v.getImageData(0,0,p,p))}if(h.ascent){v.clearRect(0,0,p,p);v.textBaseline="top";v.fillText(h.ascent,0,0);g.ascent=n(v.getImageData(0,0,p,p))}if(h.descent){v.clearRect(0,0,p,p);v.textBaseline="top";v.fillText(h.descent,0,0);g.descent=a(v.getImageData(0,0,p,p))}if(h.overshoot){v.clearRect(0,0,p,p);v.textBaseline="top";v.fillText(h.overshoot,0,0);var k=a(v.getImageData(0,0,p,p));g.overshoot=k-b}for(var A in g){g[A]/=s}g.em=s;t.cache[o]=g;return r(g,f)}function r(e,t){var r={};if(typeof t==="string")t=e[t];for(var n in e){if(n==="em")continue;r[n]=e[n]-t}return r}function n(e){var t=e.height;var r=e.data;for(var n=3;n<r.length;n+=4){if(r[n]!==0){return Math.floor((n-3)*.25/t)}}}function a(e){var t=e.height;var r=e.data;for(var n=r.length-1;n>0;n-=4){if(r[n]!==0){return Math.floor((n-3)*.25/t)}}}},31353:function(e,t,r){"use strict";var n=r(85395);var a=Object.prototype.toString;var i=Object.prototype.hasOwnProperty;var o=function e(t,r,n){for(var a=0,o=t.length;a<o;a++){if(i.call(t,a)){if(n==null){r(t[a],a,t)}else{r.call(n,t[a],a,t)}}}};var s=function e(t,r,n){for(var a=0,i=t.length;a<i;a++){if(n==null){r(t.charAt(a),a,t)}else{r.call(n,t.charAt(a),a,t)}}};var l=function e(t,r,n){for(var a in t){if(i.call(t,a)){if(n==null){r(t[a],a,t)}else{r.call(n,t[a],a,t)}}}};var u=function e(t,r,i){if(!n(r)){throw new TypeError("iterator must be a function")}var u;if(arguments.length>=3){u=i}if(a.call(t)==="[object Array]"){o(t,r,u)}else if(typeof t==="string"){s(t,r,u)}else{l(t,r,u)}};e.exports=u},73047:function(e){"use strict";var t="Function.prototype.bind called on incompatible ";var r=Array.prototype.slice;var n=Object.prototype.toString;var a="[object Function]";e.exports=function e(i){var o=this;if(typeof o!=="function"||n.call(o)!==a){throw new TypeError(t+o)}var s=r.call(arguments,1);var l;var u=function(){if(this instanceof l){var e=o.apply(this,s.concat(r.call(arguments)));if(Object(e)===e){return e}return this}else{return o.apply(i,s.concat(r.call(arguments)))}};var f=Math.max(0,o.length-s.length);var c=[];for(var v=0;v<f;v++){c.push("$"+v)}l=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(u);if(o.prototype){var h=function e(){};h.prototype=o.prototype;l.prototype=new h;h.prototype=null}return l}},77575:function(e,t,r){"use strict";var n=r(73047);e.exports=Function.prototype.bind||n},86249:function(e){e.exports=t;function t(e,t){if(typeof e!=="string"){throw new TypeError("must specify type string")}t=t||{};if(typeof document==="undefined"&&!t.canvas){return null}var r=t.canvas||document.createElement("canvas");if(typeof t.width==="number"){r.width=t.width}if(typeof t.height==="number"){r.height=t.height}var n=t;var a;try{var i=[e];if(e.indexOf("webgl")===0){i.push("experimental-"+e)}for(var o=0;o<i.length;o++){a=r.getContext(i[o],n);if(a)return a}}catch(s){a=null}return a||null}},68318:function(e,t,r){"use strict";var n;var a=SyntaxError;var i=Function;var o=TypeError;var s=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(t){}};var l=Object.getOwnPropertyDescriptor;if(l){try{l({},"")}catch(C){l=null}}var u=function(){throw new o};var f=l?function(){try{arguments.callee;return u}catch(e){try{return l(arguments,"callee").get}catch(t){return u}}}():u;var c=r(57877)();var v=Object.getPrototypeOf||function(e){return e.__proto__};var h={};var p=typeof Uint8Array==="undefined"?n:v(Uint8Array);var d={"%AggregateError%":typeof AggregateError==="undefined"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer==="undefined"?n:ArrayBuffer,"%ArrayIteratorPrototype%":c?v([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":typeof Atomics==="undefined"?n:Atomics,"%BigInt%":typeof BigInt==="undefined"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array==="undefined"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array==="undefined"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView==="undefined"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array==="undefined"?n:Float32Array,"%Float64Array%":typeof Float64Array==="undefined"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry==="undefined"?n:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":h,"%Int8Array%":typeof Int8Array==="undefined"?n:Int8Array,"%Int16Array%":typeof Int16Array==="undefined"?n:Int16Array,"%Int32Array%":typeof Int32Array==="undefined"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":c?v(v([][Symbol.iterator]())):n,"%JSON%":typeof JSON==="object"?JSON:n,"%Map%":typeof Map==="undefined"?n:Map,"%MapIteratorPrototype%":typeof Map==="undefined"||!c?n:v((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise==="undefined"?n:Promise,"%Proxy%":typeof Proxy==="undefined"?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect==="undefined"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set==="undefined"?n:Set,"%SetIteratorPrototype%":typeof Set==="undefined"||!c?n:v((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer==="undefined"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":c?v(""[Symbol.iterator]()):n,"%Symbol%":c?Symbol:n,"%SyntaxError%":a,"%ThrowTypeError%":f,"%TypedArray%":p,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array==="undefined"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray==="undefined"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array==="undefined"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array==="undefined"?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap==="undefined"?n:WeakMap,"%WeakRef%":typeof WeakRef==="undefined"?n:WeakRef,"%WeakSet%":typeof WeakSet==="undefined"?n:WeakSet};try{null.error}catch(C){var g=v(v(C));d["%Error.prototype%"]=g}var y=function e(t){var r;if(t==="%AsyncFunction%"){r=s("async function () {}")}else if(t==="%GeneratorFunction%"){r=s("function* () {}")}else if(t==="%AsyncGeneratorFunction%"){r=s("async function* () {}")}else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");if(n){r=n.prototype}}else if(t==="%AsyncIteratorPrototype%"){var a=e("%AsyncGenerator%");if(a){r=v(a.prototype)}}d[t]=r;return r};var m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]};var x=r(77575);var b=r(35065);var _=x.call(Function.call,Array.prototype.concat);var w=x.call(Function.apply,Array.prototype.splice);var T=x.call(Function.call,String.prototype.replace);var k=x.call(Function.call,String.prototype.slice);var A=x.call(Function.call,RegExp.prototype.exec);var M=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g;var S=/\\(\\)?/g;var E=function e(t){var r=k(t,0,1);var n=k(t,-1);if(r==="%"&&n!=="%"){throw new a("invalid intrinsic syntax, expected closing `%`")}else if(n==="%"&&r!=="%"){throw new a("invalid intrinsic syntax, expected opening `%`")}var i=[];T(t,M,(function(e,t,r,n){i[i.length]=r?T(n,S,"$1"):t||e}));return i};var L=function e(t,r){var n=t;var i;if(b(m,n)){i=m[n];n="%"+i[0]+"%"}if(b(d,n)){var s=d[n];if(s===h){s=y(n)}if(typeof s==="undefined"&&!r){throw new o("intrinsic "+t+" exists, but is not available. Please file an issue!")}return{alias:i,name:n,value:s}}throw new a("intrinsic "+t+" does not exist!")};e.exports=function e(t,r){if(typeof t!=="string"||t.length===0){throw new o("intrinsic name must be a non-empty string")}if(arguments.length>1&&typeof r!=="boolean"){throw new o('"allowMissing" argument must be a boolean')}if(A(/^%?[^%]*%?$/,t)===null){throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name")}var i=E(t);var s=i.length>0?i[0]:"";var u=L("%"+s+"%",r);var f=u.name;var c=u.value;var v=false;var h=u.alias;if(h){s=h[0];w(i,_([0,1],h))}for(var p=1,g=true;p<i.length;p+=1){var y=i[p];var m=k(y,0,1);var x=k(y,-1);if((m==='"'||m==="'"||m==="`"||(x==='"'||x==="'"||x==="`"))&&m!==x){throw new a("property names with quotes must have matching quotes")}if(y==="constructor"||!g){v=true}s+="."+y;f="%"+s+"%";if(b(d,f)){c=d[f]}else if(c!=null){if(!(y in c)){if(!r){throw new o("base intrinsic for "+t+" exists, but the property is not available.")}return void n}if(l&&p+1>=i.length){var T=l(c,y);g=!!T;if(g&&"get"in T&&!("originalValue"in T.get)){c=T.get}else{c=c[y]}}else{g=b(c,y);c=c[y]}if(g&&!v){d[f]=c}}}return c}},85400:function(e){e.exports=t;function t(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],f=t[8],c=t[9],v=t[10],h=t[11],p=t[12],d=t[13],g=t[14],y=t[15];e[0]=s*(v*y-h*g)-c*(l*y-u*g)+d*(l*h-u*v);e[1]=-(n*(v*y-h*g)-c*(a*y-i*g)+d*(a*h-i*v));e[2]=n*(l*y-u*g)-s*(a*y-i*g)+d*(a*u-i*l);e[3]=-(n*(l*h-u*v)-s*(a*h-i*v)+c*(a*u-i*l));e[4]=-(o*(v*y-h*g)-f*(l*y-u*g)+p*(l*h-u*v));e[5]=r*(v*y-h*g)-f*(a*y-i*g)+p*(a*h-i*v);e[6]=-(r*(l*y-u*g)-o*(a*y-i*g)+p*(a*u-i*l));e[7]=r*(l*h-u*v)-o*(a*h-i*v)+f*(a*u-i*l);e[8]=o*(c*y-h*d)-f*(s*y-u*d)+p*(s*h-u*c);e[9]=-(r*(c*y-h*d)-f*(n*y-i*d)+p*(n*h-i*c));e[10]=r*(s*y-u*d)-o*(n*y-i*d)+p*(n*u-i*s);e[11]=-(r*(s*h-u*c)-o*(n*h-i*c)+f*(n*u-i*s));e[12]=-(o*(c*g-v*d)-f*(s*g-l*d)+p*(s*v-l*c));e[13]=r*(c*g-v*d)-f*(n*g-a*d)+p*(n*v-a*c);e[14]=-(r*(s*g-l*d)-o*(n*g-a*d)+p*(n*l-a*s));e[15]=r*(s*v-l*c)-o*(n*v-a*c)+f*(n*l-a*s);return e}},42331:function(e){e.exports=t;function t(e){var t=new Float32Array(16);t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];return t}},31042:function(e){e.exports=t;function t(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[4]=t[4];e[5]=t[5];e[6]=t[6];e[7]=t[7];e[8]=t[8];e[9]=t[9];e[10]=t[10];e[11]=t[11];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15];return e}},11902:function(e){e.exports=t;function t(){var e=new Float32Array(16);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},89887:function(e){e.exports=t;function t(e){var t=e[0],r=e[1],n=e[2],a=e[3],i=e[4],o=e[5],s=e[6],l=e[7],u=e[8],f=e[9],c=e[10],v=e[11],h=e[12],p=e[13],d=e[14],g=e[15],y=t*o-r*i,m=t*s-n*i,x=t*l-a*i,b=r*s-n*o,_=r*l-a*o,w=n*l-a*s,T=u*p-f*h,k=u*d-c*h,A=u*g-v*h,M=f*d-c*p,S=f*g-v*p,E=c*g-v*d;return y*E-m*S+x*M+b*A-_*k+w*T}},27812:function(e){e.exports=t;function t(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=r+r,s=n+n,l=a+a,u=r*o,f=n*o,c=n*s,v=a*o,h=a*s,p=a*l,d=i*o,g=i*s,y=i*l;e[0]=1-c-p;e[1]=f+y;e[2]=v-g;e[3]=0;e[4]=f-y;e[5]=1-u-p;e[6]=h+d;e[7]=0;e[8]=v+g;e[9]=h-d;e[10]=1-u-c;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},34045:function(e){e.exports=t;function t(e,t,r){var n,a,i;var o=r[0];var s=r[1];var l=r[2];var u=Math.sqrt(o*o+s*s+l*l);if(Math.abs(u)<1e-6){return null}u=1/u;o*=u;s*=u;l*=u;n=Math.sin(t);a=Math.cos(t);i=1-a;e[0]=o*o*i+a;e[1]=s*o*i+l*n;e[2]=l*o*i-s*n;e[3]=0;e[4]=o*s*i-l*n;e[5]=s*s*i+a;e[6]=l*s*i+o*n;e[7]=0;e[8]=o*l*i+s*n;e[9]=s*l*i-o*n;e[10]=l*l*i+a;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},45973:function(e){e.exports=t;function t(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3],s=n+n,l=a+a,u=i+i,f=n*s,c=n*l,v=n*u,h=a*l,p=a*u,d=i*u,g=o*s,y=o*l,m=o*u;e[0]=1-(h+d);e[1]=c+m;e[2]=v-y;e[3]=0;e[4]=c-m;e[5]=1-(f+d);e[6]=p+g;e[7]=0;e[8]=v+y;e[9]=p-g;e[10]=1-(f+h);e[11]=0;e[12]=r[0];e[13]=r[1];e[14]=r[2];e[15]=1;return e}},81472:function(e){e.exports=t;function t(e,t){e[0]=t[0];e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=t[1];e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=t[2];e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},14669:function(e){e.exports=t;function t(e,t){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=t[0];e[13]=t[1];e[14]=t[2];e[15]=1;return e}},75262:function(e){e.exports=t;function t(e,t){var r=Math.sin(t),n=Math.cos(t);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=n;e[6]=r;e[7]=0;e[8]=0;e[9]=-r;e[10]=n;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},331:function(e){e.exports=t;function t(e,t){var r=Math.sin(t),n=Math.cos(t);e[0]=n;e[1]=0;e[2]=-r;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=r;e[9]=0;e[10]=n;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},11049:function(e){e.exports=t;function t(e,t){var r=Math.sin(t),n=Math.cos(t);e[0]=n;e[1]=r;e[2]=0;e[3]=0;e[4]=-r;e[5]=n;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},75195:function(e){e.exports=t;function t(e,t,r,n,a,i,o){var s=1/(r-t),l=1/(a-n),u=1/(i-o);e[0]=i*2*s;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=i*2*l;e[6]=0;e[7]=0;e[8]=(r+t)*s;e[9]=(a+n)*l;e[10]=(o+i)*u;e[11]=-1;e[12]=0;e[13]=0;e[14]=o*i*2*u;e[15]=0;return e}},71551:function(e){e.exports=t;function t(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},79576:function(e,t,r){e.exports={create:r(11902),clone:r(42331),copy:r(31042),identity:r(71551),transpose:r(88654),invert:r(95874),adjoint:r(85400),determinant:r(89887),multiply:r(91362),translate:r(31283),scale:r(10789),rotate:r(65074),rotateX:r(35545),rotateY:r(94918),rotateZ:r(15692),fromRotation:r(34045),fromRotationTranslation:r(45973),fromScaling:r(81472),fromTranslation:r(14669),fromXRotation:r(75262),fromYRotation:r(331),fromZRotation:r(11049),fromQuat:r(27812),frustum:r(75195),perspective:r(7864),perspectiveFromFieldOfView:r(35279),ortho:r(60378),lookAt:r(65551),str:r(6726)}},95874:function(e){e.exports=t;function t(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],f=t[8],c=t[9],v=t[10],h=t[11],p=t[12],d=t[13],g=t[14],y=t[15],m=r*s-n*o,x=r*l-a*o,b=r*u-i*o,_=n*l-a*s,w=n*u-i*s,T=a*u-i*l,k=f*d-c*p,A=f*g-v*p,M=f*y-h*p,S=c*g-v*d,E=c*y-h*d,L=v*y-h*g,C=m*L-x*E+b*S+_*M-w*A+T*k;if(!C){return null}C=1/C;e[0]=(s*L-l*E+u*S)*C;e[1]=(a*E-n*L-i*S)*C;e[2]=(d*T-g*w+y*_)*C;e[3]=(v*w-c*T-h*_)*C;e[4]=(l*M-o*L-u*A)*C;e[5]=(r*L-a*M+i*A)*C;e[6]=(g*b-p*T-y*x)*C;e[7]=(f*T-v*b+h*x)*C;e[8]=(o*E-s*M+u*k)*C;e[9]=(n*M-r*E-i*k)*C;e[10]=(p*w-d*b+y*m)*C;e[11]=(c*b-f*w-h*m)*C;e[12]=(s*A-o*S-l*k)*C;e[13]=(r*S-n*A+a*k)*C;e[14]=(d*x-p*_-g*m)*C;e[15]=(f*_-c*x+v*m)*C;return e}},65551:function(e,t,r){var n=r(71551);e.exports=a;function a(e,t,r,a){var i,o,s,l,u,f,c,v,h,p,d=t[0],g=t[1],y=t[2],m=a[0],x=a[1],b=a[2],_=r[0],w=r[1],T=r[2];if(Math.abs(d-_)<1e-6&&Math.abs(g-w)<1e-6&&Math.abs(y-T)<1e-6){return n(e)}c=d-_;v=g-w;h=y-T;p=1/Math.sqrt(c*c+v*v+h*h);c*=p;v*=p;h*=p;i=x*h-b*v;o=b*c-m*h;s=m*v-x*c;p=Math.sqrt(i*i+o*o+s*s);if(!p){i=0;o=0;s=0}else{p=1/p;i*=p;o*=p;s*=p}l=v*s-h*o;u=h*i-c*s;f=c*o-v*i;p=Math.sqrt(l*l+u*u+f*f);if(!p){l=0;u=0;f=0}else{p=1/p;l*=p;u*=p;f*=p}e[0]=i;e[1]=l;e[2]=c;e[3]=0;e[4]=o;e[5]=u;e[6]=v;e[7]=0;e[8]=s;e[9]=f;e[10]=h;e[11]=0;e[12]=-(i*d+o*g+s*y);e[13]=-(l*d+u*g+f*y);e[14]=-(c*d+v*g+h*y);e[15]=1;return e}},91362:function(e){e.exports=t;function t(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=t[6],f=t[7],c=t[8],v=t[9],h=t[10],p=t[11],d=t[12],g=t[13],y=t[14],m=t[15];var x=r[0],b=r[1],_=r[2],w=r[3];e[0]=x*n+b*s+_*c+w*d;e[1]=x*a+b*l+_*v+w*g;e[2]=x*i+b*u+_*h+w*y;e[3]=x*o+b*f+_*p+w*m;x=r[4];b=r[5];_=r[6];w=r[7];e[4]=x*n+b*s+_*c+w*d;e[5]=x*a+b*l+_*v+w*g;e[6]=x*i+b*u+_*h+w*y;e[7]=x*o+b*f+_*p+w*m;x=r[8];b=r[9];_=r[10];w=r[11];e[8]=x*n+b*s+_*c+w*d;e[9]=x*a+b*l+_*v+w*g;e[10]=x*i+b*u+_*h+w*y;e[11]=x*o+b*f+_*p+w*m;x=r[12];b=r[13];_=r[14];w=r[15];e[12]=x*n+b*s+_*c+w*d;e[13]=x*a+b*l+_*v+w*g;e[14]=x*i+b*u+_*h+w*y;e[15]=x*o+b*f+_*p+w*m;return e}},60378:function(e){e.exports=t;function t(e,t,r,n,a,i,o){var s=1/(t-r),l=1/(n-a),u=1/(i-o);e[0]=-2*s;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=-2*l;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=2*u;e[11]=0;e[12]=(t+r)*s;e[13]=(a+n)*l;e[14]=(o+i)*u;e[15]=1;return e}},7864:function(e){e.exports=t;function t(e,t,r,n,a){var i=1/Math.tan(t/2),o=1/(n-a);e[0]=i/r;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=i;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=(a+n)*o;e[11]=-1;e[12]=0;e[13]=0;e[14]=2*a*n*o;e[15]=0;return e}},35279:function(e){e.exports=t;function t(e,t,r,n){var a=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),u=2/(a+i);e[0]=l;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=u;e[6]=0;e[7]=0;e[8]=-((o-s)*l*.5);e[9]=(a-i)*u*.5;e[10]=n/(r-n);e[11]=-1;e[12]=0;e[13]=0;e[14]=n*r/(r-n);e[15]=0;return e}},65074:function(e){e.exports=t;function t(e,t,r,n){var a=n[0],i=n[1],o=n[2],s=Math.sqrt(a*a+i*i+o*o),l,u,f,c,v,h,p,d,g,y,m,x,b,_,w,T,k,A,M,S,E,L,C,I;if(Math.abs(s)<1e-6){return null}s=1/s;a*=s;i*=s;o*=s;l=Math.sin(r);u=Math.cos(r);f=1-u;c=t[0];v=t[1];h=t[2];p=t[3];d=t[4];g=t[5];y=t[6];m=t[7];x=t[8];b=t[9];_=t[10];w=t[11];T=a*a*f+u;k=i*a*f+o*l;A=o*a*f-i*l;M=a*i*f-o*l;S=i*i*f+u;E=o*i*f+a*l;L=a*o*f+i*l;C=i*o*f-a*l;I=o*o*f+u;e[0]=c*T+d*k+x*A;e[1]=v*T+g*k+b*A;e[2]=h*T+y*k+_*A;e[3]=p*T+m*k+w*A;e[4]=c*M+d*S+x*E;e[5]=v*M+g*S+b*E;e[6]=h*M+y*S+_*E;e[7]=p*M+m*S+w*E;e[8]=c*L+d*C+x*I;e[9]=v*L+g*C+b*I;e[10]=h*L+y*C+_*I;e[11]=p*L+m*C+w*I;if(t!==e){e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}return e}},35545:function(e){e.exports=t;function t(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[4],o=t[5],s=t[6],l=t[7],u=t[8],f=t[9],c=t[10],v=t[11];if(t!==e){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[4]=i*a+u*n;e[5]=o*a+f*n;e[6]=s*a+c*n;e[7]=l*a+v*n;e[8]=u*a-i*n;e[9]=f*a-o*n;e[10]=c*a-s*n;e[11]=v*a-l*n;return e}},94918:function(e){e.exports=t;function t(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[0],o=t[1],s=t[2],l=t[3],u=t[8],f=t[9],c=t[10],v=t[11];if(t!==e){e[4]=t[4];e[5]=t[5];e[6]=t[6];e[7]=t[7];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[0]=i*a-u*n;e[1]=o*a-f*n;e[2]=s*a-c*n;e[3]=l*a-v*n;e[8]=i*n+u*a;e[9]=o*n+f*a;e[10]=s*n+c*a;e[11]=l*n+v*a;return e}},15692:function(e){e.exports=t;function t(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[0],o=t[1],s=t[2],l=t[3],u=t[4],f=t[5],c=t[6],v=t[7];if(t!==e){e[8]=t[8];e[9]=t[9];e[10]=t[10];e[11]=t[11];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[0]=i*a+u*n;e[1]=o*a+f*n;e[2]=s*a+c*n;e[3]=l*a+v*n;e[4]=u*a-i*n;e[5]=f*a-o*n;e[6]=c*a-s*n;e[7]=v*a-l*n;return e}},10789:function(e){e.exports=t;function t(e,t,r){var n=r[0],a=r[1],i=r[2];e[0]=t[0]*n;e[1]=t[1]*n;e[2]=t[2]*n;e[3]=t[3]*n;e[4]=t[4]*a;e[5]=t[5]*a;e[6]=t[6]*a;e[7]=t[7]*a;e[8]=t[8]*i;e[9]=t[9]*i;e[10]=t[10]*i;e[11]=t[11]*i;e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15];return e}},6726:function(e){e.exports=t;function t(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},31283:function(e){e.exports=t;function t(e,t,r){var n=r[0],a=r[1],i=r[2],o,s,l,u,f,c,v,h,p,d,g,y;if(t===e){e[12]=t[0]*n+t[4]*a+t[8]*i+t[12];e[13]=t[1]*n+t[5]*a+t[9]*i+t[13];e[14]=t[2]*n+t[6]*a+t[10]*i+t[14];e[15]=t[3]*n+t[7]*a+t[11]*i+t[15]}else{o=t[0];s=t[1];l=t[2];u=t[3];f=t[4];c=t[5];v=t[6];h=t[7];p=t[8];d=t[9];g=t[10];y=t[11];e[0]=o;e[1]=s;e[2]=l;e[3]=u;e[4]=f;e[5]=c;e[6]=v;e[7]=h;e[8]=p;e[9]=d;e[10]=g;e[11]=y;e[12]=o*n+f*a+p*i+t[12];e[13]=s*n+c*a+d*i+t[13];e[14]=l*n+v*a+g*i+t[14];e[15]=u*n+h*a+y*i+t[15]}return e}},88654:function(e){e.exports=t;function t(e,t){if(e===t){var r=t[1],n=t[2],a=t[3],i=t[6],o=t[7],s=t[11];e[1]=t[4];e[2]=t[8];e[3]=t[12];e[4]=r;e[6]=t[9];e[7]=t[13];e[8]=n;e[9]=i;e[11]=t[14];e[12]=a;e[13]=o;e[14]=s}else{e[0]=t[0];e[1]=t[4];e[2]=t[8];e[3]=t[12];e[4]=t[1];e[5]=t[5];e[6]=t[9];e[7]=t[13];e[8]=t[2];e[9]=t[6];e[10]=t[10];e[11]=t[14];e[12]=t[3];e[13]=t[7];e[14]=t[11];e[15]=t[15]}return e}},42505:function(e,t,r){"use strict";var n=r(72791);var a=r(71299);var i=r(98580);var o=r(12018);var s=r(83522);var l=r(25075);var u=r(68016);var f=r(58404);var c=r(18863);var v=r(10973);var h=r(25677);var p=r(75686);var d=r(53545);var g=r(56131);var y=r(32879);var m=r(30120);var x=r(13547);var b=x.nextPow2;var _=new s;var w=false;if(document.body){var T=document.body.appendChild(document.createElement("div"));T.style.font="italic small-caps bold condensed 16px/2 cursive";if(getComputedStyle(T).fontStretch){w=true}document.body.removeChild(T)}var k=function e(t){if(A(t)){t={regl:t};this.gl=t.regl._gl}else{this.gl=o(t)}this.shader=_.get(this.gl);if(!this.shader){this.regl=t.regl||i({gl:this.gl})}else{this.regl=this.shader.regl}this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"});this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"});if(!this.shader){this.shader=this.createShader();_.set(this.gl,this.shader)}this.batch=[];this.fontSize=[];this.font=[];this.fontAtlas=[];this.draw=this.shader.draw.bind(this);this.render=function(){this.regl._refresh();this.draw(this.batch)};this.canvas=this.gl.canvas;this.update(v(t)?t:{})};k.prototype.createShader=function e(){var t=this.regl;var r=t({blend:{enable:true,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:false},depth:{enable:false},count:t.prop("count"),offset:t.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:t.this("sizeBuffer")},width:{offset:0,stride:8,buffer:t.this("sizeBuffer")},char:t.this("charBuffer"),position:t.this("position")},uniforms:{atlasSize:function(e,t){return[t.atlas.width,t.atlas.height]},atlasDim:function(e,t){return[t.atlas.cols,t.atlas.rows]},atlas:function(e,t){return t.atlas.texture},charStep:function(e,t){return t.atlas.step},em:function(e,t){return t.atlas.em},color:t.prop("color"),opacity:t.prop("opacity"),viewport:t.this("viewportArray"),scale:t.this("scale"),align:t.prop("align"),baseline:t.prop("baseline"),translate:t.this("translate"),positionOffset:t.prop("positionOffset")},primitive:"points",viewport:t.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});var n={};return{regl:t,draw:r,atlas:n}};k.prototype.update=function e(t){var r=this;if(typeof t==="string"){t={text:t}}else if(!t){return}t=a(t,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},true);if(t.opacity!=null){if(Array.isArray(t.opacity)){this.opacity=t.opacity.map((function(e){return parseFloat(e)}))}else{this.opacity=parseFloat(t.opacity)}}if(t.viewport!=null){this.viewport=c(t.viewport);this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]}if(this.viewport==null){this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight};this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]}if(t.kerning!=null){this.kerning=t.kerning}if(t.offset!=null){if(typeof t.offset==="number"){t.offset=[t.offset,0]}this.positionOffset=m(t.offset)}if(t.direction){this.direction=t.direction}if(t.range){this.range=t.range;this.scale=[1/(t.range[2]-t.range[0]),1/(t.range[3]-t.range[1])];this.translate=[-t.range[0],-t.range[1]]}if(t.scale){this.scale=t.scale}if(t.translate){this.translate=t.translate}if(!this.scale){this.scale=[1/this.viewport.width,1/this.viewport.height]}if(!this.translate){this.translate=[0,0]}if(!this.font.length&&!t.font){t.font=k.baseFontSize+"px sans-serif"}var i=false,o=false;if(t.font){(Array.isArray(t.font)?t.font:[t.font]).forEach((function(e,t){if(typeof e==="string"){try{e=n.parse(e)}catch(c){e=n.parse(k.baseFontSize+"px "+e)}}else{e=n.parse(n.stringify(e))}var a=n.stringify({size:k.baseFontSize,family:e.family,stretch:w?e.stretch:undefined,variant:e.variant,weight:e.weight,style:e.style});var s=h(e.size);var l=Math.round(s[0]*p(s[1]));if(l!==r.fontSize[t]){o=true;r.fontSize[t]=l}if(!r.font[t]||a!=r.font[t].baseString){i=true;r.font[t]=k.fonts[a];if(!r.font[t]){var u=e.family.join(", ");var f=[e.style];if(e.style!=e.variant){f.push(e.variant)}if(e.variant!=e.weight){f.push(e.weight)}if(w&&e.weight!=e.stretch){f.push(e.stretch)}r.font[t]={baseString:a,family:u,weight:e.weight,stretch:e.stretch,style:e.style,variant:e.variant,width:{},kerning:{},metrics:y(u,{origin:"top",fontSize:k.baseFontSize,fontStyle:f.join(" ")})};k.fonts[a]=r.font[t]}}}))}if(i||o){this.font.forEach((function(e,a){var i=n.stringify({size:r.fontSize[a],family:e.family,stretch:w?e.stretch:undefined,variant:e.variant,weight:e.weight,style:e.style});r.fontAtlas[a]=r.shader.atlas[i];if(!r.fontAtlas[a]){var o=e.metrics;r.shader.atlas[i]=r.fontAtlas[a]={fontString:i,step:Math.ceil(r.fontSize[a]*o.bottom*.5)*2,em:r.fontSize[a],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:r.regl.texture()}}if(t.text==null){t.text=r.text}}))}if(typeof t.text==="string"&&t.position&&t.position.length>2){var s=Array(t.position.length*.5);for(var v=0;v<s.length;v++){s[v]=t.text}t.text=s}var x;if(t.text!=null||i){this.textOffsets=[0];if(Array.isArray(t.text)){this.count=t.text[0].length;this.counts=[this.count];for(var _=1;_<t.text.length;_++){this.textOffsets[_]=this.textOffsets[_-1]+t.text[_-1].length;this.count+=t.text[_].length;this.counts.push(t.text[_].length)}this.text=t.text.join("")}else{this.text=t.text;this.count=this.text.length;this.counts=[this.count]}x=[];this.font.forEach((function(e,t){k.atlasContext.font=e.baseString;var n=r.fontAtlas[t];for(var a=0;a<r.text.length;a++){var i=r.text.charAt(a);if(n.ids[i]==null){n.ids[i]=n.chars.length;n.chars.push(i);x.push(i)}if(e.width[i]==null){e.width[i]=k.atlasContext.measureText(i).width/k.baseFontSize;if(r.kerning){var o=[];for(var s in e.width){o.push(s+i,i+s)}g(e.kerning,d(e.family,{pairs:o}))}}}}))}if(t.position){if(t.position.length>2){var T=!t.position[0].length;var A=f.mallocFloat(this.count*2);for(var M=0,S=0;M<this.counts.length;M++){var E=this.counts[M];if(T){for(var L=0;L<E;L++){A[S++]=t.position[M*2];A[S++]=t.position[M*2+1]}}else{for(var C=0;C<E;C++){A[S++]=t.position[M][0];A[S++]=t.position[M][1]}}}if(this.position.call){this.position({type:"float",data:A})}else{this.position=this.regl.buffer({type:"float",data:A})}f.freeFloat(A)}else{if(this.position.destroy){this.position.destroy()}this.position={constant:t.position}}}if(t.text||i){var I=f.mallocUint8(this.count);var P=f.mallocFloat(this.count*2);this.textWidth=[];for(var O=0,D=0;O<this.counts.length;O++){var z=this.counts[O];var R=this.font[O]||this.font[0];var F=this.fontAtlas[O]||this.fontAtlas[0];for(var B=0;B<z;B++){var N=this.text.charAt(D);var j=this.text.charAt(D-1);I[D]=F.ids[N];P[D*2]=R.width[N];if(B){var U=P[D*2-2];var V=P[D*2];var H=P[D*2-1];var q=H+U*.5+V*.5;if(this.kerning){var G=R.kerning[j+N];if(G){q+=G*.001}}P[D*2+1]=q}else{P[D*2+1]=P[D*2]*.5}D++}this.textWidth.push(!P.length?0:P[D*2-2]*.5+P[D*2-1])}if(!t.align){t.align=this.align}this.charBuffer({data:I,type:"uint8",usage:"stream"});this.sizeBuffer({data:P,type:"float",usage:"stream"});f.freeUint8(I);f.freeFloat(P);if(x.length){this.font.forEach((function(e,t){var n=r.fontAtlas[t];var a=n.step;var i=Math.floor(k.maxAtlasSize/a);var o=Math.min(i,n.chars.length);var s=Math.ceil(n.chars.length/o);var l=b(o*a);var f=b(s*a);n.width=l;n.height=f;n.rows=s;n.cols=o;if(!n.em){return}n.texture({data:u({canvas:k.atlasCanvas,font:n.fontString,chars:n.chars,shape:[l,f],step:[a,a]})})}))}}if(t.align){this.align=t.align;this.alignOffset=this.textWidth.map((function(e,t){var n=!Array.isArray(r.align)?r.align:r.align.length>1?r.align[t]:r.align[0];if(typeof n==="number"){return n}switch(n){case"right":case"end":return-e;case"center":case"centre":case"middle":return-e*.5}return 0}))}if(this.baseline==null&&t.baseline==null){t.baseline=0}if(t.baseline!=null){this.baseline=t.baseline;if(!Array.isArray(this.baseline)){this.baseline=[this.baseline]}this.baselineOffset=this.baseline.map((function(e,t){var n=(r.font[t]||r.font[0]).metrics;var a=0;a+=n.bottom*.5;if(typeof e==="number"){a+=e-n.baseline}else{a+=-n[e]}a*=-1;return a}))}if(t.color!=null){if(!t.color){t.color="transparent"}if(typeof t.color==="string"||!isNaN(t.color)){this.color=l(t.color,"uint8")}else{var Z;if(typeof t.color[0]==="number"&&t.color.length>this.counts.length){var Y=t.color.length;Z=f.mallocUint8(Y);var W=(t.color.subarray||t.color.slice).bind(t.color);for(var X=0;X<Y;X+=4){Z.set(l(W(X,X+4),"uint8"),X)}}else{var J=t.color.length;Z=f.mallocUint8(J*4);for(var K=0;K<J;K++){Z.set(l(t.color[K]||0,"uint8"),K*4)}}this.color=Z}}if(t.position||t.text||t.color||t.baseline||t.align||t.font||t.offset||t.opacity){var $=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if($){var Q=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(Q);for(var ee=0;ee<this.batch.length;ee++){this.batch[ee]={count:this.counts.length>1?this.counts[ee]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[ee]:this.textOffsets[0],color:!this.color?[0,0,0,255]:this.color.length<=4?this.color:this.color.subarray(ee*4,ee*4+4),opacity:Array.isArray(this.opacity)?this.opacity[ee]:this.opacity,baseline:this.baselineOffset[ee]!=null?this.baselineOffset[ee]:this.baselineOffset[0],align:!this.align?0:this.alignOffset[ee]!=null?this.alignOffset[ee]:this.alignOffset[0],atlas:this.fontAtlas[ee]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(ee*2,ee*2+2):this.positionOffset}}}else{if(this.count){this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]}else{this.batch=[]}}}};k.prototype.destroy=function e(){};k.prototype.kerning=true;k.prototype.position={constant:new Float32Array(2)};k.prototype.translate=null;k.prototype.scale=null;k.prototype.font=null;k.prototype.text="";k.prototype.positionOffset=[0,0];k.prototype.opacity=1;k.prototype.color=new Uint8Array([0,0,0,255]);k.prototype.alignOffset=[0,0];k.maxAtlasSize=1024;k.atlasCanvas=document.createElement("canvas");k.atlasContext=k.atlasCanvas.getContext("2d",{alpha:false});k.baseFontSize=64;k.fonts={};function A(e){return typeof e==="function"&&e._gl&&e.prop&&e.texture&&e.buffer}e.exports=k},12018:function(e,t,r){"use strict";var n=r(71299);e.exports=function e(t){if(!t)t={};else if(typeof t==="string")t={container:t};if(i(t)){t={container:t}}else if(o(t)){t={container:t}}else if(s(t)){t={gl:t}}else{t=n(t,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},true)}if(!t.pixelRatio)t.pixelRatio=r.g.pixelRatio||1;if(t.gl){return t.gl}if(t.canvas){t.container=t.canvas.parentNode}if(t.container){if(typeof t.container==="string"){var u=document.querySelector(t.container);if(!u)throw Error("Element "+t.container+" is not found");t.container=u}if(i(t.container)){t.canvas=t.container;t.container=t.canvas.parentNode}else if(!t.canvas){t.canvas=l();t.container.appendChild(t.canvas);a(t)}}else if(!t.canvas){if(typeof document!=="undefined"){t.container=document.body||document.documentElement;t.canvas=l();t.container.appendChild(t.canvas);a(t)}else{throw Error("Not DOM environment. Use headless-gl.")}}if(!t.gl){["webgl","experimental-webgl","webgl-experimental"].some((function(e){try{t.gl=t.canvas.getContext(e,t.attrs)}catch(r){}return t.gl}))}return t.gl};function a(e){if(e.container){if(e.container==document.body){if(!document.body.style.width)e.canvas.width=e.width||e.pixelRatio*r.g.innerWidth;if(!document.body.style.height)e.canvas.height=e.height||e.pixelRatio*r.g.innerHeight}else{var t=e.container.getBoundingClientRect();e.canvas.width=e.width||t.right-t.left;e.canvas.height=e.height||t.bottom-t.top}}}function i(e){return typeof e.getContext==="function"&&"width"in e&&"height"in e}function o(e){return typeof e.nodeName==="string"&&typeof e.appendChild==="function"&&typeof e.getBoundingClientRect==="function"}function s(e){return typeof e.drawArrays==="function"||typeof e.drawElements==="function"}function l(){var e=document.createElement("canvas");e.style.position="absolute";e.style.top=0;e.style.left=0;return e}},56068:function(e){e.exports=function(e){if(typeof e==="string")e=[e];var t=[].slice.call(arguments,1);var r=[];for(var n=0;n<e.length-1;n++){r.push(e[n],t[n]||"")}r.push(e[n]);return r.join("")}},40383:function(e,t,r){"use strict";var n=r(68318);var a=n("%Object.getOwnPropertyDescriptor%",true);if(a){try{a([],"length")}catch(i){a=null}}e.exports=a},57035:function(e,t,r){"use strict";var n=r(54404);var a;if(typeof r.g.matchMedia==="function"){a=!r.g.matchMedia("(hover: none)").matches}else{a=n}e.exports=a},38520:function(e,t,r){"use strict";var n=r(54404);function a(){var e=false;try{var t=Object.defineProperty({},"passive",{get:function(){e=true}});window.addEventListener("test",null,t);window.removeEventListener("test",null,t)}catch(r){e=false}return e}e.exports=n&&a()},55622:function(e,t,r){"use strict";var n=r(68318);var a=n("%Object.defineProperty%",true);var i=function e(){if(a){try{a({},"a",{value:1});return true}catch(t){return false}}return false};i.hasArrayLengthDefineBug=function e(){if(!i()){return null}try{return a([],"length",{value:1}).length!==1}catch(t){return true}};e.exports=i},57877:function(e,t,r){"use strict";var n=typeof Symbol!=="undefined"&&Symbol;var a=r(35638);e.exports=function e(){if(typeof n!=="function"){return false}if(typeof Symbol!=="function"){return false}if(typeof n("foo")!=="symbol"){return false}if(typeof Symbol("bar")!=="symbol"){return false}return a()}},35638:function(e){"use strict";e.exports=function e(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function"){return false}if(typeof Symbol.iterator==="symbol"){return true}var t={};var r=Symbol("test");var n=Object(r);if(typeof r==="string"){return false}if(Object.prototype.toString.call(r)!=="[object Symbol]"){return false}if(Object.prototype.toString.call(n)!=="[object Symbol]"){return false}var a=42;t[r]=a;for(r in t){return false}if(typeof Object.keys==="function"&&Object.keys(t).length!==0){return false}if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(t).length!==0){return false}var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r){return false}if(!Object.prototype.propertyIsEnumerable.call(t,r)){return false}if(typeof Object.getOwnPropertyDescriptor==="function"){var o=Object.getOwnPropertyDescriptor(t,r);if(o.value!==a||o.enumerable!==true){return false}}return true}},84543:function(e,t,r){"use strict";var n=r(35638);e.exports=function e(){return n()&&!!Symbol.toStringTag}},35065:function(e,t,r){"use strict";var n=r(77575);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},95280:function(e,t){t.read=function(e,t,r,n,a){var i,o;var s=a*8-n-1;var l=(1<<s)-1;var u=l>>1;var f=-7;var c=r?a-1:0;var v=r?-1:1;var h=e[t+c];c+=v;i=h&(1<<-f)-1;h>>=-f;f+=s;for(;f>0;i=i*256+e[t+c],c+=v,f-=8){}o=i&(1<<-f)-1;i>>=-f;f+=n;for(;f>0;o=o*256+e[t+c],c+=v,f-=8){}if(i===0){i=1-u}else if(i===l){return o?NaN:(h?-1:1)*Infinity}else{o=o+Math.pow(2,n);i=i-u}return(h?-1:1)*o*Math.pow(2,i-n)};t.write=function(e,t,r,n,a,i){var o,s,l;var u=i*8-a-1;var f=(1<<u)-1;var c=f>>1;var v=a===23?Math.pow(2,-24)-Math.pow(2,-77):0;var h=n?0:i-1;var p=n?1:-1;var d=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){s=isNaN(t)?1:0;o=f}else{o=Math.floor(Math.log(t)/Math.LN2);if(t*(l=Math.pow(2,-o))<1){o--;l*=2}if(o+c>=1){t+=v/l}else{t+=v*Math.pow(2,1-c)}if(t*l>=2){o++;l/=2}if(o+c>=f){s=0;o=f}else if(o+c>=1){s=(t*l-1)*Math.pow(2,a);o=o+c}else{s=t*Math.pow(2,c-1)*Math.pow(2,a);o=0}}for(;a>=8;e[r+h]=s&255,h+=p,s/=256,a-=8){}o=o<<a|s;u+=a;for(;u>0;e[r+h]=o&255,h+=p,o/=256,u-=8){}e[r+h-p]|=d*128}},42018:function(e){if(typeof Object.create==="function"){e.exports=function e(t,r){if(r){t.super_=r;t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}}else{e.exports=function e(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype;t.prototype=new n;t.prototype.constructor=t}}}},47216:function(e,t,r){"use strict";var n=r(84543)();var a=r(6614);var i=a("Object.prototype.toString");var o=function e(t){if(n&&t&&typeof t==="object"&&Symbol.toStringTag in t){return false}return i(t)==="[object Arguments]"};var s=function e(t){if(o(t)){return true}return t!==null&&typeof t==="object"&&typeof t.length==="number"&&t.length>=0&&i(t)!=="[object Array]"&&i(t.callee)==="[object Function]"};var l=function(){return o(arguments)}();o.isLegacyArguments=s;e.exports=l?o:s},54404:function(e){e.exports=true},85395:function(e){"use strict";var t=Function.prototype.toString;var r=typeof Reflect==="object"&&Reflect!==null&&Reflect.apply;var n;var a;if(typeof r==="function"&&typeof Object.defineProperty==="function"){try{n=Object.defineProperty({},"length",{get:function(){throw a}});a={};r((function(){throw 42}),null,n)}catch(x){if(x!==a){r=null}}}else{r=null}var i=/^\s*class\b/;var o=function e(r){try{var n=t.call(r);return i.test(n)}catch(a){return false}};var s=function e(r){try{if(o(r)){return false}t.call(r);return true}catch(n){return false}};var l=Object.prototype.toString;var u="[object Object]";var f="[object Function]";var c="[object GeneratorFunction]";var v="[object HTMLAllCollection]";var h="[object HTML document.all class]";var p="[object HTMLCollection]";var d=typeof Symbol==="function"&&!!Symbol.toStringTag;var g=!(0 in[,]);var y=function e(){return false};if(typeof document==="object"){var m=document.all;if(l.call(m)===l.call(document.all)){y=function e(t){if((g||!t)&&(typeof t==="undefined"||typeof t==="object")){try{var r=l.call(t);return(r===v||r===h||r===p||r===u)&&t("")==null}catch(n){}}return false}}}e.exports=r?function e(t){if(y(t)){return true}if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}try{r(t,null,n)}catch(i){if(i!==a){return false}}return!o(t)&&s(t)}:function e(t){if(y(t)){return true}if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(d){return s(t)}if(o(t)){return false}var r=l.call(t);if(r!==f&&r!==c&&!/^\[object HTML/.test(r)){return false}return s(t)}},65481:function(e,t,r){"use strict";var n=Object.prototype.toString;var a=Function.prototype.toString;var i=/^\s*(?:function)?\*/;var o=r(84543)();var s=Object.getPrototypeOf;var l=function(){if(!o){return false}try{return Function("return function*() {}")()}catch(e){}};var u;e.exports=function e(t){if(typeof t!=="function"){return false}if(i.test(a.call(t))){return true}if(!o){var r=n.call(t);return r==="[object GeneratorFunction]"}if(!s){return false}if(typeof u==="undefined"){var f=l();u=f?s(f):false}return s(t)===u}},62683:function(e){"use strict";e.exports=typeof navigator!=="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},64274:function(e){"use strict";e.exports=function e(t){return t!==t}},15567:function(e,t,r){"use strict";var n=r(68222);var a=r(17045);var i=r(64274);var o=r(14922);var s=r(22442);var l=n(o(),Number);a(l,{getPolyfill:o,implementation:i,shim:s});e.exports=l},14922:function(e,t,r){"use strict";var n=r(64274);e.exports=function e(){if(Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")){return Number.isNaN}return n}},22442:function(e,t,r){"use strict";var n=r(17045);var a=r(14922);e.exports=function e(){var t=a();n(Number,{isNaN:t},{isNaN:function e(){return Number.isNaN!==t}});return t}},64941:function(e){"use strict";e.exports=function(e){var t=typeof e;return e!==null&&(t==="object"||t==="function")}},10973:function(e){"use strict";var t=Object.prototype.toString;e.exports=function(e){var r;return t.call(e)==="[object Object]"&&(r=Object.getPrototypeOf(e),r===null||r===Object.getPrototypeOf({}))}},18546:function(e){"use strict";e.exports=function(e){var t=e.length,r;for(var n=0;n<t;n++){r=e.charCodeAt(n);if((r<9||r>13)&&r!==32&&r!==133&&r!==160&&r!==5760&&r!==6158&&(r<8192||r>8205)&&r!==8232&&r!==8233&&r!==8239&&r!==8287&&r!==8288&&r!==12288&&r!==65279){return false}}return true}},89546:function(e){"use strict";e.exports=function e(t){if(typeof t!=="string")return false;t=t.trim();if(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(t)&&/[\dz]$/i.test(t)&&t.length>4)return true;return false}},9187:function(e,t,r){"use strict";var n=r(31353);var a=r(72077);var i=r(6614);var o=i("Object.prototype.toString");var s=r(84543)();var l=r(40383);var u=typeof globalThis==="undefined"?r.g:globalThis;var f=a();var c=i("Array.prototype.indexOf",true)||function e(t,r){for(var n=0;n<t.length;n+=1){if(t[n]===r){return n}}return-1};var v=i("String.prototype.slice");var h={};var p=Object.getPrototypeOf;if(s&&l&&p){n(f,(function(e){var t=new u[e];if(Symbol.toStringTag in t){var r=p(t);var n=l(r,Symbol.toStringTag);if(!n){var a=p(r);n=l(a,Symbol.toStringTag)}h[e]=n.get}}))}var d=function e(t){var r=false;n(h,(function(e,n){if(!r){try{r=e.call(t)===n}catch(a){}}}));return r};e.exports=function e(t){if(!t||typeof t!=="object"){return false}if(!s||!(Symbol.toStringTag in t)){var r=v(o(t),8,-1);return c(f,r)>-1}if(!l){return false}return d(t)}},44517:function(e){(function(t,r){true?e.exports=r():0})(this,(function(){"use strict";var e,t,r;function n(n,a){if(!e){e=a}else if(!t){t=a}else{var i="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);";var o={};e(o);r=a(o);r.workerUrl=window.URL.createObjectURL(new Blob([i],{type:"text/javascript"}))}}n(["exports"],(function(e){"use strict";function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}var r="1.10.1";var n=a;function a(e,t,r,n){this.cx=3*e;this.bx=3*(r-e)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*t;this.by=3*(n-t)-this.cy;this.ay=1-this.cy-this.by;this.p1x=e;this.p1y=n;this.p2x=r;this.p2y=n}a.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e};a.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e};a.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx};a.prototype.solveCurveX=function(e,t){if(typeof t==="undefined"){t=1e-6}var r,n,a,i,o;for(a=e,o=0;o<8;o++){i=this.sampleCurveX(a)-e;if(Math.abs(i)<t){return a}var s=this.sampleCurveDerivativeX(a);if(Math.abs(s)<1e-6){break}a=a-i/s}r=0;n=1;a=e;if(a<r){return r}if(a>n){return n}while(r<n){i=this.sampleCurveX(a);if(Math.abs(i-e)<t){return a}if(e>i){r=a}else{n=a}a=(n-r)*.5+r}return a};a.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var i=o;function o(e,t){this.x=e;this.y=t}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;this.x=t;this.y=r;return this},_add:function(e){this.x+=e.x;this.y+=e.y;return this},_sub:function(e){this.x-=e.x;this.y-=e.y;return this},_mult:function(e){this.x*=e;this.y*=e;return this},_div:function(e){this.x/=e;this.y/=e;return this},_multByPoint:function(e){this.x*=e.x;this.y*=e.y;return this},_divByPoint:function(e){this.x/=e.x;this.y/=e.y;return this},_unit:function(){this._div(this.mag());return this},_perp:function(){var e=this.y;this.y=this.x;this.x=-e;return this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=t*this.x-r*this.y,a=r*this.x+t*this.y;this.x=n;this.y=a;return this},_rotateAround:function(e,t){var r=Math.cos(e),n=Math.sin(e),a=t.x+r*(this.x-t.x)-n*(this.y-t.y),i=t.y+n*(this.x-t.x)+r*(this.y-t.y);this.x=a;this.y=i;return this},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this}};o.convert=function(e){if(e instanceof o){return e}if(Array.isArray(e)){return new o(e[0],e[1])}return e};function s(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length){return false}for(var r=0;r<e.length;r++){if(!s(e[r],t[r])){return false}}return true}if(typeof e==="object"&&e!==null&&t!==null){if(!(typeof t==="object")){return false}var n=Object.keys(e);if(n.length!==Object.keys(t).length){return false}for(var a in e){if(!s(e[a],t[a])){return false}}return true}return e===t}function l(e){if(e<=0){return 0}if(e>=1){return 1}var t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)}function u(e,t,r,a){var i=new n(e,t,r,a);return function(e){return i.solve(e)}}var f=u(.25,.1,.25,1);function c(e,t,r){return Math.min(r,Math.max(t,e))}function v(e,t,r){var n=r-t;var a=((e-t)%n+n)%n+t;return a===t?r:a}function h(e,t,r){if(!e.length){return r(null,[])}var n=e.length;var a=new Array(e.length);var i=null;e.forEach((function(e,o){t(e,(function(e,t){if(e){i=e}a[o]=t;if(--n===0){r(i,a)}}))}))}function p(e){var t=[];for(var r in e){t.push(e[r])}return t}function d(e,t){var r=[];for(var n in e){if(!(n in t)){r.push(n)}}return r}function g(e){var t=[],r=arguments.length-1;while(r-- >0)t[r]=arguments[r+1];for(var n=0,a=t;n<a.length;n+=1){var i=a[n];for(var o in i){e[o]=i[o]}}return e}function y(e,t){var r={};for(var n=0;n<t.length;n++){var a=t[n];if(a in e){r[a]=e[a]}}return r}var m=1;function x(){return m++}function b(){function e(t){return t?(t^Math.random()*16>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}return e()}function _(e){return e?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e):false}function w(e,t){e.forEach((function(e){if(!t[e]){return}t[e]=t[e].bind(t)}))}function T(e,t){return e.indexOf(t,e.length-t.length)!==-1}function k(e,t,r){var n={};for(var a in e){n[a]=t.call(r||this,e[a],a,e)}return n}function A(e,t,r){var n={};for(var a in e){if(t.call(r||this,e[a],a,e)){n[a]=e[a]}}return n}function M(e){if(Array.isArray(e)){return e.map(M)}else if(typeof e==="object"&&e){return k(e,M)}else{return e}}function S(e,t){for(var r=0;r<e.length;r++){if(t.indexOf(e[r])>=0){return true}}return false}var E={};function L(e){if(!E[e]){if(typeof console!=="undefined"){console.warn(e)}E[e]=true}}function C(e,t,r){return(r.y-e.y)*(t.x-e.x)>(t.y-e.y)*(r.x-e.x)}function I(e){var t=0;for(var r=0,n=e.length,a=n-1,i=void 0,o=void 0;r<n;a=r++){i=e[r];o=e[a];t+=(o.x-i.x)*(i.y+o.y)}return t}function P(e){var t=e[0];var r=e[1];var n=e[2];r+=90;r*=Math.PI/180;n*=Math.PI/180;return{x:t*Math.cos(r)*Math.sin(n),y:t*Math.sin(r)*Math.sin(n),z:t*Math.cos(n)}}function O(){return typeof WorkerGlobalScope!=="undefined"&&typeof self!=="undefined"&&self instanceof WorkerGlobalScope}function D(e){var t=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g;var r={};e.replace(t,(function(e,t,n,a){var i=n||a;r[t]=i?i.toLowerCase():true;return""}));if(r["max-age"]){var n=parseInt(r["max-age"],10);if(isNaN(n)){delete r["max-age"]}else{r["max-age"]=n}}return r}var z=null;function R(e){if(z==null){var t=e.navigator?e.navigator.userAgent:null;z=!!e.safari||!!(t&&(/\b(iPad|iPhone|iPod)\b/.test(t)||!!t.match("Safari")&&!t.match("Chrome")))}return z}function F(e){try{var t=self[e];t.setItem("_mapbox_test_",1);t.removeItem("_mapbox_test_");return true}catch(r){return false}}function B(e){return self.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))})))}function N(e){return decodeURIComponent(self.atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}var j=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date);var U=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame;var V=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame;var H;var q;var G={now:j,frame:function e(t){var e=U(t);return{cancel:function(){return V(e)}}},getImageData:function e(t,r){if(r===void 0)r=0;var n=self.document.createElement("canvas");var a=n.getContext("2d");if(!a){throw new Error("failed to create canvas 2d context")}n.width=t.width;n.height=t.height;a.drawImage(t,0,0,t.width,t.height);return a.getImageData(-r,-r,t.width+2*r,t.height+2*r)},resolveURL:function e(t){if(!H){H=self.document.createElement("a")}H.href=t;return H.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){if(!self.matchMedia){return false}if(q==null){q=self.matchMedia("(prefers-reduced-motion: reduce)")}return q.matches}};var Z={API_URL:"https://api.mapbox.com",get EVENTS_URL(){if(!this.API_URL){return null}if(this.API_URL.indexOf("https://api.mapbox.cn")===0){return"https://events.mapbox.cn/events/v2"}else if(this.API_URL.indexOf("https://api.mapbox.com")===0){return"https://events.mapbox.com/events/v2"}else{return null}},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:true,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16};var Y={supported:false,testSupport:$};var W;var X=false;var J;var K=false;if(self.document){J=self.document.createElement("img");J.onload=function(){if(W){Q(W)}W=null;K=true};J.onerror=function(){X=true;W=null};J.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="}function $(e){if(X||!J){return}if(K){Q(e)}else{W=e}}function Q(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,J);if(e.isContextLost()){return}Y.supported=true}catch(r){}e.deleteTexture(t);X=true}var ee="01";function te(){var e="1";var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";var r="";for(var n=0;n<10;n++){r+=t[Math.floor(Math.random()*62)]}var a=12*60*60*1e3;var i=[e,ee,r].join("");var o=Date.now()+a;return{token:i,tokenExpiresAt:o}}var re=function e(t,r){this._transformRequestFn=t;this._customAccessToken=r;this._createSkuToken()};re.prototype._createSkuToken=function e(){var t=te();this._skuToken=t.token;this._skuTokenExpiresAt=t.tokenExpiresAt};re.prototype._isSkuTokenExpired=function e(){return Date.now()>this._skuTokenExpiresAt};re.prototype.transformRequest=function e(t,r){if(this._transformRequestFn){return this._transformRequestFn(t,r)||{url:t}}return{url:t}};re.prototype.normalizeStyleURL=function e(t,r){if(!ne(t)){return t}var n=ue(t);n.path="/styles/v1"+n.path;return this._makeAPIURL(n,this._customAccessToken||r)};re.prototype.normalizeGlyphsURL=function e(t,r){if(!ne(t)){return t}var n=ue(t);n.path="/fonts/v1"+n.path;return this._makeAPIURL(n,this._customAccessToken||r)};re.prototype.normalizeSourceURL=function e(t,r){if(!ne(t)){return t}var n=ue(t);n.path="/v4/"+n.authority+".json";n.params.push("secure");return this._makeAPIURL(n,this._customAccessToken||r)};re.prototype.normalizeSpriteURL=function e(t,r,n,a){var i=ue(t);if(!ne(t)){i.path+=""+r+n;return fe(i)}i.path="/styles/v1"+i.path+"/sprite"+r+n;return this._makeAPIURL(i,this._customAccessToken||a)};re.prototype.normalizeTileURL=function e(t,r){if(this._isSkuTokenExpired()){this._createSkuToken()}if(t&&!ne(t)){return t}var n=ue(t);var a=/(\.(png|jpg)\d*)(?=$)/;var i=/^.+\/v4\//;var o=G.devicePixelRatio>=2||r===512?"@2x":"";var s=Y.supported?".webp":"$1";n.path=n.path.replace(a,""+o+s);n.path=n.path.replace(i,"/");n.path="/v4"+n.path;var l=this._customAccessToken||se(n.params)||Z.ACCESS_TOKEN;if(Z.REQUIRE_ACCESS_TOKEN&&l&&this._skuToken){n.params.push("sku="+this._skuToken)}return this._makeAPIURL(n,l)};re.prototype.canonicalizeTileURL=function e(t,r){var n="/v4/";var a=/\.[\w]+$/;var i=ue(t);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(a)){return t}var o="mapbox://tiles/";o+=i.path.replace(n,"");var s=i.params;if(r){s=s.filter((function(e){return!e.match(/^access_token=/)}))}if(s.length){o+="?"+s.join("&")}return o};re.prototype.canonicalizeTileset=function e(t,r){var n=r?ne(r):false;var a=[];for(var i=0,o=t.tiles||[];i<o.length;i+=1){var s=o[i];if(ie(s)){a.push(this.canonicalizeTileURL(s,n))}else{a.push(s)}}return a};re.prototype._makeAPIURL=function e(t,r){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes";var a=ue(Z.API_URL);t.protocol=a.protocol;t.authority=a.authority;if(a.path!=="/"){t.path=""+a.path+t.path}if(!Z.REQUIRE_ACCESS_TOKEN){return fe(t)}r=r||Z.ACCESS_TOKEN;if(!r){throw new Error("An API access token is required to use Mapbox GL. "+n)}if(r[0]==="s"){throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+n)}t.params=t.params.filter((function(e){return e.indexOf("access_token")===-1}));t.params.push("access_token="+r);return fe(t)};function ne(e){return e.indexOf("mapbox:")===0}var ae=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ie(e){return ae.test(e)}function oe(e){return e.indexOf("sku=")>0&&ie(e)}function se(e){for(var t=0,r=e;t<r.length;t+=1){var n=r[t];var a=n.match(/^access_token=(.*)$/);if(a){return a[1]}}return null}var le=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ue(e){var t=e.match(le);if(!t){throw new Error("Unable to parse URL object")}return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function fe(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}var ce="mapbox.eventData";function ve(e){if(!e){return null}var t=e.split(".");if(!t||t.length!==3){return null}try{var r=JSON.parse(N(t[1]));return r}catch(n){return null}}var he=function e(t){this.type=t;this.anonId=null;this.eventData={};this.queue=[];this.pendingRequest=null};he.prototype.getStorageKey=function e(t){var r=ve(Z.ACCESS_TOKEN);var n="";if(r&&r["u"]){n=B(r["u"])}else{n=Z.ACCESS_TOKEN||""}return t?ce+"."+t+":"+n:ce+":"+n};he.prototype.fetchEventData=function e(){var t=F("localStorage");var r=this.getStorageKey();var n=this.getStorageKey("uuid");if(t){try{var a=self.localStorage.getItem(r);if(a){this.eventData=JSON.parse(a)}var i=self.localStorage.getItem(n);if(i){this.anonId=i}}catch(o){L("Unable to read from LocalStorage")}}};he.prototype.saveEventData=function e(){var t=F("localStorage");var r=this.getStorageKey();var n=this.getStorageKey("uuid");if(t){try{self.localStorage.setItem(n,this.anonId);if(Object.keys(this.eventData).length>=1){self.localStorage.setItem(r,JSON.stringify(this.eventData))}}catch(a){L("Unable to write to LocalStorage")}}};he.prototype.processRequests=function e(t){};he.prototype.postEvent=function e(t,n,a,i){var o=this;if(!Z.EVENTS_URL){return}var s=ue(Z.EVENTS_URL);s.params.push("access_token="+(i||Z.ACCESS_TOKEN||""));var l={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:r,skuId:ee,userId:this.anonId};var u=n?g(l,n):l;var f={url:fe(s),headers:{"Content-Type":"text/plain"},body:JSON.stringify([u])};this.pendingRequest=We(f,(function(e){o.pendingRequest=null;a(e);o.saveEventData();o.processRequests(i)}))};he.prototype.queueRequest=function e(t,r){this.queue.push(t);this.processRequests(r)};var pe=function(e){function t(){e.call(this,"map.load");this.success={};this.skuToken=""}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.postMapLoadEvent=function e(t,r,n,a){this.skuToken=n;if(Z.EVENTS_URL&&a||Z.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(e){return ne(e)||ie(e)}))){this.queueRequest({id:r,timestamp:Date.now()},a)}};t.prototype.processRequests=function e(t){var r=this;if(this.pendingRequest||this.queue.length===0){return}var n=this.queue.shift();var a=n.id;var i=n.timestamp;if(a&&this.success[a]){return}if(!this.anonId){this.fetchEventData()}if(!_(this.anonId)){this.anonId=b()}this.postEvent(i,{skuToken:this.skuToken},(function(e){if(!e){if(a){r.success[a]=true}}}),t)};return t}(he);var de=function(e){function t(t){e.call(this,"appUserTurnstile");this._customAccessToken=t}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.postTurnstileEvent=function e(t,r){if(Z.EVENTS_URL&&Z.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(e){return ne(e)||ie(e)}))){this.queueRequest(Date.now(),r)}};t.prototype.processRequests=function e(t){var r=this;if(this.pendingRequest||this.queue.length===0){return}if(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU){this.fetchEventData()}var n=ve(Z.ACCESS_TOKEN);var a=n?n["u"]:Z.ACCESS_TOKEN;var i=a!==this.eventData.tokenU;if(!_(this.anonId)){this.anonId=b();i=true}var o=this.queue.shift();if(this.eventData.lastSuccess){var s=new Date(this.eventData.lastSuccess);var l=new Date(o);var u=(o-this.eventData.lastSuccess)/(24*60*60*1e3);i=i||u>=1||u<-1||s.getDate()!==l.getDate()}else{i=true}if(!i){return this.processRequests()}this.postEvent(o,{"enabled.telemetry":false},(function(e){if(!e){r.eventData.lastSuccess=o;r.eventData.tokenU=a}}),t)};return t}(he);var ge=new de;var ye=ge.postTurnstileEvent.bind(ge);var me=new pe;var xe=me.postMapLoadEvent.bind(me);var be="mapbox-tiles";var _e=500;var we=50;var Te=1e3*60*7;var ke;function Ae(){if(self.caches&&!ke){ke=self.caches.open(be)}}var Me;function Se(e,t){if(Me===undefined){try{new Response(new ReadableStream);Me=true}catch(r){Me=false}}if(Me){t(e.body)}else{e.blob().then(t)}}function Ee(e,t,r){Ae();if(!ke){return}var n={status:t.status,statusText:t.statusText,headers:new self.Headers};t.headers.forEach((function(e,t){return n.headers.set(t,e)}));var a=D(t.headers.get("Cache-Control")||"");if(a["no-store"]){return}if(a["max-age"]){n.headers.set("Expires",new Date(r+a["max-age"]*1e3).toUTCString())}var i=new Date(n.headers.get("Expires")).getTime()-r;if(i<Te){return}Se(t,(function(t){var r=new self.Response(t,n);Ae();if(!ke){return}ke.then((function(t){return t.put(Le(e.url),r)})).catch((function(e){return L(e.message)}))}))}function Le(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}function Ce(e,t){Ae();if(!ke){return t(null)}var r=Le(e.url);ke.then((function(e){e.match(r).then((function(n){var a=Ie(n);e.delete(r);if(a){e.put(r,n.clone())}t(null,n,a)})).catch(t)})).catch(t)}function Ie(e){if(!e){return false}var t=new Date(e.headers.get("Expires")||0);var r=D(e.headers.get("Cache-Control")||"");return t>Date.now()&&!r["no-cache"]}var Pe=Infinity;function Oe(e){Pe++;if(Pe>we){e.getActor().send("enforceCacheSizeLimit",_e);Pe=0}}function De(e){Ae();if(!ke){return}ke.then((function(t){t.keys().then((function(r){for(var n=0;n<r.length-e;n++){t.delete(r[n])}}))}))}function ze(e){var t=self.caches.delete(be);if(e){t.catch(e).then((function(){return e()}))}}function Re(e,t){_e=e;we=t}var Fe;function Be(){if(Fe==null){Fe=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap==="function"}return Fe}var Ne={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};if(typeof Object.freeze=="function"){Object.freeze(Ne)}var je=function(e){function t(t,r,n){if(r===401&&ie(n)){t+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"}e.call(this,t);this.status=r;this.url=n;this.name=this.constructor.name;this.message=t}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.toString=function e(){return this.name+": "+this.message+" ("+this.status+"): "+this.url};return t}(Error);var Ue=O()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href};var Ve=function(e){return/^file:/.test(e)||/^file:/.test(Ue())&&!/^\w+:/.test(e)};function He(e,t){var r=new self.AbortController;var n=new self.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:Ue(),signal:r.signal});var a=false;var i=false;var o=oe(n.url);if(e.type==="json"){n.headers.set("Accept","application/json")}var s=function(r,a,s){if(i){return}if(r){if(r.message!=="SecurityError"){L(r)}}if(a&&s){return l(a)}var u=Date.now();self.fetch(n).then((function(r){if(r.ok){var n=o?r.clone():null;return l(r,n,u)}else{return t(new je(r.statusText,r.status,e.url))}})).catch((function(e){if(e.code===20){return}t(new Error(e.message))}))};var l=function(r,o,s){(e.type==="arrayBuffer"?r.arrayBuffer():e.type==="json"?r.json():r.text()).then((function(e){if(i){return}if(o&&s){Ee(n,o,s)}a=true;t(null,e,r.headers.get("Cache-Control"),r.headers.get("Expires"))})).catch((function(e){if(!i){t(new Error(e.message))}}))};if(o){Ce(n,s)}else{s(null,null)}return{cancel:function(){i=true;if(!a){r.abort()}}}}function qe(e,t){var r=new self.XMLHttpRequest;r.open(e.method||"GET",e.url,true);if(e.type==="arrayBuffer"){r.responseType="arraybuffer"}for(var n in e.headers){r.setRequestHeader(n,e.headers[n])}if(e.type==="json"){r.responseType="text";r.setRequestHeader("Accept","application/json")}r.withCredentials=e.credentials==="include";r.onerror=function(){t(new Error(r.statusText))};r.onload=function(){if((r.status>=200&&r.status<300||r.status===0)&&r.response!==null){var n=r.response;if(e.type==="json"){try{n=JSON.parse(r.response)}catch(a){return t(a)}}t(null,n,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else{t(new je(r.statusText,r.status,e.url))}};r.send(e.body);return{cancel:function(){return r.abort()}}}var Ge=function(e,t){if(!Ve(e.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal")){return He(e,t)}if(O()&&self.worker&&self.worker.actor){var r=true;return self.worker.actor.send("getResource",e,t,undefined,r)}}return qe(e,t)};var Ze=function(e,t){return Ge(g(e,{type:"json"}),t)};var Ye=function(e,t){return Ge(g(e,{type:"arrayBuffer"}),t)};var We=function(e,t){return Ge(g(e,{method:"POST"}),t)};function Xe(e){var t=self.document.createElement("a");t.href=e;return t.protocol===self.document.location.protocol&&t.host===self.document.location.host}var Je="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ke(e,t,r,n){var a=new self.Image;var i=self.URL;a.onload=function(){t(null,a);i.revokeObjectURL(a.src)};a.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var o=new self.Blob([new Uint8Array(e)],{type:"image/png"});a.cacheControl=r;a.expires=n;a.src=e.byteLength?i.createObjectURL(o):Je}function $e(e,t){var r=new self.Blob([new Uint8Array(e)],{type:"image/png"});self.createImageBitmap(r).then((function(e){t(null,e)})).catch((function(e){t(new Error("Could not load image because of "+e.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}var Qe,et;var tt=function(){Qe=[];et=0};tt();var rt=function(e,t){if(Y.supported){if(!e.headers){e.headers={}}e.headers.accept="image/webp,*/*"}if(et>=Z.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:e,callback:t,cancelled:false,cancel:function e(){this.cancelled=true}};Qe.push(r);return r}et++;var n=false;var a=function(){if(n){return}n=true;et--;while(Qe.length&&et<Z.MAX_PARALLEL_IMAGE_REQUESTS){var e=Qe.shift();var t=e.requestParameters;var r=e.callback;var a=e.cancelled;if(!a){e.cancel=rt(t,r).cancel}}};var i=Ye(e,(function(e,r,n,i){a();if(e){t(e)}else if(r){if(Be()){$e(r,t)}else{Ke(r,t,n,i)}}}));return{cancel:function(){i.cancel();a()}}};var nt=function(e,t){var r=self.document.createElement("video");r.muted=true;r.onloadstart=function(){t(null,r)};for(var n=0;n<e.length;n++){var a=self.document.createElement("source");if(!Xe(e[n])){r.crossOrigin="Anonymous"}a.src=e[n];r.appendChild(a)}return{cancel:function(){}}};function at(e,t,r){var n=r[e]&&r[e].indexOf(t)!==-1;if(!n){r[e]=r[e]||[];r[e].push(t)}}function it(e,t,r){if(r&&r[e]){var n=r[e].indexOf(t);if(n!==-1){r[e].splice(n,1)}}}var ot=function e(t,r){if(r===void 0)r={};g(this,r);this.type=t};var st=function(e){function t(t,r){if(r===void 0)r={};e.call(this,"error",g({error:t},r))}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;return t}(ot);var lt=function e(){};lt.prototype.on=function e(t,r){this._listeners=this._listeners||{};at(t,r,this._listeners);return this};lt.prototype.off=function e(t,r){it(t,r,this._listeners);it(t,r,this._oneTimeListeners);return this};lt.prototype.once=function e(t,r){this._oneTimeListeners=this._oneTimeListeners||{};at(t,r,this._oneTimeListeners);return this};lt.prototype.fire=function e(t,r){if(typeof t==="string"){t=new ot(t,r||{})}var n=t.type;if(this.listens(n)){t.target=this;var a=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(var i=0,o=a;i<o.length;i+=1){var s=o[i];s.call(this,t)}var l=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(var u=0,f=l;u<f.length;u+=1){var c=f[u];it(n,c,this._oneTimeListeners);c.call(this,t)}var v=this._eventedParent;if(v){g(t,typeof this._eventedParentData==="function"?this._eventedParentData():this._eventedParentData);v.fire(t)}}else if(t instanceof st){console.error(t.error)}return this};lt.prototype.listens=function e(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)};lt.prototype.setEventedParent=function e(t,r){this._eventedParent=t;this._eventedParentData=r;return this};var ut=8;var ft={version:{required:true,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:true,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:true,type:"array",value:"layer"}};var ct={"*":{type:"source"}};var vt=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"];var ht={type:{required:true,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}};var pt={type:{required:true,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}};var dt={type:{required:true,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}};var gt={type:{required:true,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:false},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:false},generateId:{type:"boolean",default:false},promoteId:{type:"promoteId"}};var yt={type:{required:true,type:"enum",values:{video:{}}},urls:{required:true,type:"array",value:"string"},coordinates:{required:true,type:"array",length:4,value:{type:"array",length:2,value:"number"}}};var mt={type:{required:true,type:"enum",values:{image:{}}},url:{required:true,type:"string"},coordinates:{required:true,type:"array",length:4,value:{type:"array",length:2,value:"number"}}};var xt={id:{type:"string",required:true},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:true},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}};var bt=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"];var _t={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}};var wt={"fill-sort-key":{type:"number",expression:{interpolated:false,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}};var Tt={"circle-sort-key":{type:"number",expression:{interpolated:false,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}};var kt={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}};var At={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:false,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:false,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}};var Mt={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:false,expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:false,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:false,requires:["icon-image"],expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:false,requires:["icon-image"],expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:false,requires:["icon-image","text-field"],expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:true,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:true,expression:{interpolated:false,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:true,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:false,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:true,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:false,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:true,expression:{interpolated:false,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:false,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:true,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:true,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:true,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:false,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:true,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:false,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:true,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:true,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:false,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:true,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:false,requires:["text-field"],expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:false,requires:["text-field"],expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:false,requires:["text-field","icon-image"],expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}};var St={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}};var Et={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}};var Lt={type:"array",value:"*"};var Ct={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}};var It={type:"enum",values:{Point:{},LineString:{},Polygon:{}}};var Pt={type:"array",minimum:0,maximum:24,value:["number","color"],length:2};var Ot={type:"array",value:"*",minimum:1};var Dt={type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}};var zt={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:false,expression:{interpolated:false,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:true,expression:{interpolated:true,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:true,parameters:["zoom"]},transition:true},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:true,parameters:["zoom"]},transition:true}};var Rt=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"];var Ft={"fill-antialias":{type:"boolean",default:true,expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:true,expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:true,requires:[{"!":"fill-pattern"}],expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:true,requires:[{"!":"fill-pattern"},{"fill-antialias":true}],expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:true,units:"pixels",expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:true,expression:{interpolated:false,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}};var Bt={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:true,expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:true,requires:[{"!":"line-pattern"}],expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:true,units:"pixels",expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:true,units:"pixels",expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:true,units:"pixels",expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:true,units:"pixels",expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:true,units:"pixels",expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:true,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:false,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:true,expression:{interpolated:false,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:false,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:true}}],expression:{interpolated:true,parameters:["line-progress"]},"property-type":"color-ramp"}};var Nt={"circle-radius":{type:"number",default:5,minimum:0,transition:true,units:"pixels",expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:true,expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:true,expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:true,expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:true,units:"pixels",expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:true,units:"pixels",expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:true,expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:true,expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}};var jt={"heatmap-radius":{type:"number",default:30,minimum:1,transition:true,units:"pixels",expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:false,expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:true,expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:false,expression:{interpolated:true,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:true,expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"}};var Ut={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:true,requires:["icon-image"],expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:true,requires:["icon-image"],expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:true,requires:["icon-image"],expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:true,units:"pixels",requires:["icon-image"],expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:true,units:"pixels",requires:["icon-image"],expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:true,units:"pixels",requires:["icon-image"],expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:true,requires:["text-field"],expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:true,overridable:true,requires:["text-field"],expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:true,requires:["text-field"],expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:true,units:"pixels",requires:["text-field"],expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:true,units:"pixels",requires:["text-field"],expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:true,units:"pixels",requires:["text-field"],expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"}};var Vt={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:true,expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:true,units:"degrees",expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:true,expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:true,expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:true,expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:true,expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:false,units:"milliseconds",expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"}};var Ht={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:false,expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:true,expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:true,expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:true,expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:true,expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"}};var qt={"background-color":{type:"color",default:"#000000",transition:true,requires:[{"!":"background-pattern"}],expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:true,expression:{interpolated:false,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:true,expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"}};var Gt={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}};var Zt={"*":{type:"string"}};var Yt={$version:ut,$root:ft,sources:ct,source:vt,source_vector:ht,source_raster:pt,source_raster_dem:dt,source_geojson:gt,source_video:yt,source_image:mt,layer:xt,layout:bt,layout_background:_t,layout_fill:wt,layout_circle:Tt,layout_heatmap:kt,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:At,layout_symbol:Mt,layout_raster:St,layout_hillshade:Et,filter:Lt,filter_operator:Ct,geometry_type:It,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:false}},function_stop:Pt,expression:Ot,expression_name:Dt,light:zt,paint:Rt,paint_fill:Ft,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:true,expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:true,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:true,units:"pixels",expression:{interpolated:true,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:true,expression:{interpolated:false,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:true,expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:true,requires:["fill-extrusion-height"],expression:{interpolated:true,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:true,transition:false,expression:{interpolated:false,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:Bt,paint_circle:Nt,paint_heatmap:jt,paint_symbol:Ut,paint_raster:Vt,paint_hillshade:Ht,paint_background:qt,transition:Gt,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:Zt};var Wt=function e(t,r,n,a){this.message=(t?t+": ":"")+n;if(a){this.identifier=a}if(r!==null&&r!==undefined&&r.__line__){this.line=r.__line__}};function Xt(e){var t=e.key;var r=e.value;if(r){return[new Wt(t,r,"constants have been deprecated as of v8")]}else{return[]}}function Jt(e){var t=[],r=arguments.length-1;while(r-- >0)t[r]=arguments[r+1];for(var n=0,a=t;n<a.length;n+=1){var i=a[n];for(var o in i){e[o]=i[o]}}return e}function Kt(e){if(e instanceof Number||e instanceof String||e instanceof Boolean){return e.valueOf()}else{return e}}function $t(e){if(Array.isArray(e)){return e.map($t)}else if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var r in e){t[r]=$t(e[r])}return t}return Kt(e)}var Qt=function(e){function t(t,r){e.call(this,r);this.message=r;this.key=t}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;return t}(Error);var er=function e(t,r){if(r===void 0)r=[];this.parent=t;this.bindings={};for(var n=0,a=r;n<a.length;n+=1){var i=a[n];var o=i[0];var s=i[1];this.bindings[o]=s}};er.prototype.concat=function e(t){return new er(this,t)};er.prototype.get=function e(t){if(this.bindings[t]){return this.bindings[t]}if(this.parent){return this.parent.get(t)}throw new Error(t+" not found in scope.")};er.prototype.has=function e(t){if(this.bindings[t]){return true}return this.parent?this.parent.has(t):false};var tr={kind:"null"};var rr={kind:"number"};var nr={kind:"string"};var ar={kind:"boolean"};var ir={kind:"color"};var or={kind:"object"};var sr={kind:"value"};var lr={kind:"error"};var ur={kind:"collator"};var fr={kind:"formatted"};var cr={kind:"resolvedImage"};function vr(e,t){return{kind:"array",itemType:e,N:t}}function hr(e){if(e.kind==="array"){var t=hr(e.itemType);return typeof e.N==="number"?"array<"+t+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+t+">"}else{return e.kind}}var pr=[tr,rr,nr,ar,ir,fr,or,vr(sr),cr];function dr(e,t){if(t.kind==="error"){return null}else if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!dr(e.itemType,t.itemType))&&(typeof e.N!=="number"||e.N===t.N)){return null}}else if(e.kind===t.kind){return null}else if(e.kind==="value"){for(var r=0,n=pr;r<n.length;r+=1){var a=n[r];if(!dr(a,t)){return null}}}return"Expected "+hr(e)+" but found "+hr(t)+" instead."}function gr(e,t){return t.some((function(t){return t.kind===e.kind}))}function yr(e,t){return t.some((function(t){if(t==="null"){return e===null}else if(t==="array"){return Array.isArray(e)}else if(t==="object"){return e&&!Array.isArray(e)&&typeof e==="object"}else{return t===typeof e}}))}var mr=t((function(e,t){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(e){e=Math.round(e);return e<0?0:e>255?255:e}function a(e){return e<0?0:e>1?1:e}function i(e){if(e[e.length-1]==="%"){return n(parseFloat(e)/100*255)}return n(parseInt(e))}function o(e){if(e[e.length-1]==="%"){return a(parseFloat(e)/100)}return a(parseFloat(e))}function s(e,t,r){if(r<0){r+=1}else if(r>1){r-=1}if(r*6<1){return e+(t-e)*r*6}if(r*2<1){return t}if(r*3<2){return e+(t-e)*(2/3-r)*6}return e}function l(e){var t=e.replace(/ /g,"").toLowerCase();if(t in r){return r[t].slice()}if(t[0]==="#"){if(t.length===4){var a=parseInt(t.substr(1),16);if(!(a>=0&&a<=4095)){return null}return[(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,1]}else if(t.length===7){var a=parseInt(t.substr(1),16);if(!(a>=0&&a<=16777215)){return null}return[(a&16711680)>>16,(a&65280)>>8,a&255,1]}return null}var l=t.indexOf("("),u=t.indexOf(")");if(l!==-1&&u+1===t.length){var f=t.substr(0,l);var c=t.substr(l+1,u-(l+1)).split(",");var v=1;switch(f){case"rgba":if(c.length!==4){return null}v=o(c.pop());case"rgb":if(c.length!==3){return null}return[i(c[0]),i(c[1]),i(c[2]),v];case"hsla":if(c.length!==4){return null}v=o(c.pop());case"hsl":if(c.length!==3){return null}var h=(parseFloat(c[0])%360+360)%360/360;var p=o(c[1]);var d=o(c[2]);var g=d<=.5?d*(p+1):d+p-d*p;var y=d*2-g;return[n(s(y,g,h+1/3)*255),n(s(y,g,h)*255),n(s(y,g,h-1/3)*255),v];default:return null}}return null}try{t.parseCSSColor=l}catch(u){}}));var xr=mr.parseCSSColor;var br=function e(t,r,n,a){if(a===void 0)a=1;this.r=t;this.g=r;this.b=n;this.a=a};br.parse=function e(t){if(!t){return undefined}if(t instanceof br){return t}if(typeof t!=="string"){return undefined}var r=xr(t);if(!r){return undefined}return new br(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3])};br.prototype.toString=function e(){var t=this.toArray();var r=t[0];var n=t[1];var a=t[2];var i=t[3];return"rgba("+Math.round(r)+","+Math.round(n)+","+Math.round(a)+","+i+")"};br.prototype.toArray=function e(){var t=this;var r=t.r;var n=t.g;var a=t.b;var i=t.a;return i===0?[0,0,0,0]:[r*255/i,n*255/i,a*255/i,i]};br.black=new br(0,0,0,1);br.white=new br(1,1,1,1);br.transparent=new br(0,0,0,0);br.red=new br(1,0,0,1);var _r=function e(t,r,n){if(t){this.sensitivity=r?"variant":"case"}else{this.sensitivity=r?"accent":"base"}this.locale=n;this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};_r.prototype.compare=function e(t,r){return this.collator.compare(t,r)};_r.prototype.resolvedLocale=function e(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var wr=function e(t,r,n,a,i){this.text=t;this.image=r;this.scale=n;this.fontStack=a;this.textColor=i};var Tr=function e(t){this.sections=t};Tr.fromString=function e(t){return new Tr([new wr(t,null,null,null,null)])};Tr.prototype.isEmpty=function e(){if(this.sections.length===0){return true}return!this.sections.some((function(e){return e.text.length!==0||e.image&&e.image.name.length!==0}))};Tr.factory=function e(t){if(t instanceof Tr){return t}else{return Tr.fromString(t)}};Tr.prototype.toString=function e(){if(this.sections.length===0){return""}return this.sections.map((function(e){return e.text})).join("")};Tr.prototype.serialize=function e(){var t=["format"];for(var r=0,n=this.sections;r<n.length;r+=1){var a=n[r];if(a.image){t.push(["image",a.image.name]);continue}t.push(a.text);var i={};if(a.fontStack){i["text-font"]=["literal",a.fontStack.split(",")]}if(a.scale){i["font-scale"]=a.scale}if(a.textColor){i["text-color"]=["rgba"].concat(a.textColor.toArray())}t.push(i)}return t};var kr=function e(t){this.name=t.name;this.available=t.available};kr.prototype.toString=function e(){return this.name};kr.fromString=function e(t){if(!t){return null}return new kr({name:t,available:false})};kr.prototype.serialize=function e(){return["image",this.name]};function Ar(e,t,r,n){if(!(typeof e==="number"&&e>=0&&e<=255&&typeof t==="number"&&t>=0&&t<=255&&typeof r==="number"&&r>=0&&r<=255)){var a=typeof n==="number"?[e,t,r,n]:[e,t,r];return"Invalid rgba value ["+a.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}if(!(typeof n==="undefined"||typeof n==="number"&&n>=0&&n<=1)){return"Invalid rgba value ["+[e,t,r,n].join(", ")+"]: 'a' must be between 0 and 1."}return null}function Mr(e){if(e===null){return true}else if(typeof e==="string"){return true}else if(typeof e==="boolean"){return true}else if(typeof e==="number"){return true}else if(e instanceof br){return true}else if(e instanceof _r){return true}else if(e instanceof Tr){return true}else if(e instanceof kr){return true}else if(Array.isArray(e)){for(var t=0,r=e;t<r.length;t+=1){var n=r[t];if(!Mr(n)){return false}}return true}else if(typeof e==="object"){for(var a in e){if(!Mr(e[a])){return false}}return true}else{return false}}function Sr(e){if(e===null){return tr}else if(typeof e==="string"){return nr}else if(typeof e==="boolean"){return ar}else if(typeof e==="number"){return rr}else if(e instanceof br){return ir}else if(e instanceof _r){return ur}else if(e instanceof Tr){return fr}else if(e instanceof kr){return cr}else if(Array.isArray(e)){var t=e.length;var r;for(var n=0,a=e;n<a.length;n+=1){var i=a[n];var o=Sr(i);if(!r){r=o}else if(r===o){continue}else{r=sr;break}}return vr(r||sr,t)}else{return or}}function Er(e){var t=typeof e;if(e===null){return""}else if(t==="string"||t==="number"||t==="boolean"){return String(e)}else if(e instanceof br||e instanceof Tr||e instanceof kr){return e.toString()}else{return JSON.stringify(e)}}var Lr=function e(t,r){this.type=t;this.value=r};Lr.parse=function e(t,r){if(t.length!==2){return r.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.")}if(!Mr(t[1])){return r.error("invalid value")}var n=t[1];var a=Sr(n);var i=r.expectedType;if(a.kind==="array"&&a.N===0&&i&&i.kind==="array"&&(typeof i.N!=="number"||i.N===0)){a=i}return new Lr(a,n)};Lr.prototype.evaluate=function e(){return this.value};Lr.prototype.eachChild=function e(){};Lr.prototype.outputDefined=function e(){return true};Lr.prototype.serialize=function e(){if(this.type.kind==="array"||this.type.kind==="object"){return["literal",this.value]}else if(this.value instanceof br){return["rgba"].concat(this.value.toArray())}else if(this.value instanceof Tr){return this.value.serialize()}else{return this.value}};var Cr=function e(t){this.name="ExpressionEvaluationError";this.message=t};Cr.prototype.toJSON=function e(){return this.message};var Ir={string:nr,number:rr,boolean:ar,object:or};var Pr=function e(t,r){this.type=t;this.args=r};Pr.parse=function e(t,r){if(t.length<2){return r.error("Expected at least one argument.")}var n=1;var a;var i=t[0];if(i==="array"){var o;if(t.length>2){var s=t[1];if(typeof s!=="string"||!(s in Ir)||s==="object"){return r.error('The item type argument of "array" must be one of string, number, boolean',1)}o=Ir[s];n++}else{o=sr}var l;if(t.length>3){if(t[2]!==null&&(typeof t[2]!=="number"||t[2]<0||t[2]!==Math.floor(t[2]))){return r.error('The length argument to "array" must be a positive integer literal',2)}l=t[2];n++}a=vr(o,l)}else{a=Ir[i]}var u=[];for(;n<t.length;n++){var f=r.parse(t[n],n,sr);if(!f){return null}u.push(f)}return new Pr(a,u)};Pr.prototype.evaluate=function e(t){for(var r=0;r<this.args.length;r++){var n=this.args[r].evaluate(t);var a=dr(this.type,Sr(n));if(!a){return n}else if(r===this.args.length-1){throw new Cr("Expected value to be of type "+hr(this.type)+", but found "+hr(Sr(n))+" instead.")}}return null};Pr.prototype.eachChild=function e(t){this.args.forEach(t)};Pr.prototype.outputDefined=function e(){return this.args.every((function(e){return e.outputDefined()}))};Pr.prototype.serialize=function e(){var t=this.type;var r=[t.kind];if(t.kind==="array"){var n=t.itemType;if(n.kind==="string"||n.kind==="number"||n.kind==="boolean"){r.push(n.kind);var a=t.N;if(typeof a==="number"||this.args.length>1){r.push(a)}}}return r.concat(this.args.map((function(e){return e.serialize()})))};var Or=function e(t){this.type=fr;this.sections=t};Or.parse=function e(t,r){if(t.length<2){return r.error("Expected at least one argument.")}var n=t[1];if(!Array.isArray(n)&&typeof n==="object"){return r.error("First argument must be an image or text section.")}var a=[];var i=false;for(var o=1;o<=t.length-1;++o){var s=t[o];if(i&&typeof s==="object"&&!Array.isArray(s)){i=false;var l=null;if(s["font-scale"]){l=r.parse(s["font-scale"],1,rr);if(!l){return null}}var u=null;if(s["text-font"]){u=r.parse(s["text-font"],1,vr(nr));if(!u){return null}}var f=null;if(s["text-color"]){f=r.parse(s["text-color"],1,ir);if(!f){return null}}var c=a[a.length-1];c.scale=l;c.font=u;c.textColor=f}else{var v=r.parse(t[o],1,sr);if(!v){return null}var h=v.type.kind;if(h!=="string"&&h!=="value"&&h!=="null"&&h!=="resolvedImage"){return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.")}i=true;a.push({content:v,scale:null,font:null,textColor:null})}}return new Or(a)};Or.prototype.evaluate=function e(t){var r=function(e){var r=e.content.evaluate(t);if(Sr(r)===cr){return new wr("",r,null,null,null)}return new wr(Er(r),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)};return new Tr(this.sections.map(r))};Or.prototype.eachChild=function e(t){for(var r=0,n=this.sections;r<n.length;r+=1){var a=n[r];t(a.content);if(a.scale){t(a.scale)}if(a.font){t(a.font)}if(a.textColor){t(a.textColor)}}};Or.prototype.outputDefined=function e(){return false};Or.prototype.serialize=function e(){var t=["format"];for(var r=0,n=this.sections;r<n.length;r+=1){var a=n[r];t.push(a.content.serialize());var i={};if(a.scale){i["font-scale"]=a.scale.serialize()}if(a.font){i["text-font"]=a.font.serialize()}if(a.textColor){i["text-color"]=a.textColor.serialize()}t.push(i)}return t};var Dr=function e(t){this.type=cr;this.input=t};Dr.parse=function e(t,r){if(t.length!==2){return r.error("Expected two arguments.")}var n=r.parse(t[1],1,nr);if(!n){return r.error("No image name provided.")}return new Dr(n)};Dr.prototype.evaluate=function e(t){var r=this.input.evaluate(t);var n=kr.fromString(r);if(n&&t.availableImages){n.available=t.availableImages.indexOf(r)>-1}return n};Dr.prototype.eachChild=function e(t){t(this.input)};Dr.prototype.outputDefined=function e(){return false};Dr.prototype.serialize=function e(){return["image",this.input.serialize()]};var zr={"to-boolean":ar,"to-color":ir,"to-number":rr,"to-string":nr};var Rr=function e(t,r){this.type=t;this.args=r};Rr.parse=function e(t,r){if(t.length<2){return r.error("Expected at least one argument.")}var n=t[0];if((n==="to-boolean"||n==="to-string")&&t.length!==2){return r.error("Expected one argument.")}var a=zr[n];var i=[];for(var o=1;o<t.length;o++){var s=r.parse(t[o],o,sr);if(!s){return null}i.push(s)}return new Rr(a,i)};Rr.prototype.evaluate=function e(t){if(this.type.kind==="boolean"){return Boolean(this.args[0].evaluate(t))}else if(this.type.kind==="color"){var r;var n;for(var a=0,i=this.args;a<i.length;a+=1){var o=i[a];r=o.evaluate(t);n=null;if(r instanceof br){return r}else if(typeof r==="string"){var s=t.parseColor(r);if(s){return s}}else if(Array.isArray(r)){if(r.length<3||r.length>4){n="Invalid rbga value "+JSON.stringify(r)+": expected an array containing either three or four numeric values."}else{n=Ar(r[0],r[1],r[2],r[3])}if(!n){return new br(r[0]/255,r[1]/255,r[2]/255,r[3])}}}throw new Cr(n||"Could not parse color from value '"+(typeof r==="string"?r:String(JSON.stringify(r)))+"'")}else if(this.type.kind==="number"){var l=null;for(var u=0,f=this.args;u<f.length;u+=1){var c=f[u];l=c.evaluate(t);if(l===null){return 0}var v=Number(l);if(isNaN(v)){continue}return v}throw new Cr("Could not convert "+JSON.stringify(l)+" to number.")}else if(this.type.kind==="formatted"){return Tr.fromString(Er(this.args[0].evaluate(t)))}else if(this.type.kind==="resolvedImage"){return kr.fromString(Er(this.args[0].evaluate(t)))}else{return Er(this.args[0].evaluate(t))}};Rr.prototype.eachChild=function e(t){this.args.forEach(t)};Rr.prototype.outputDefined=function e(){return this.args.every((function(e){return e.outputDefined()}))};Rr.prototype.serialize=function e(){if(this.type.kind==="formatted"){return new Or([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize()}if(this.type.kind==="resolvedImage"){return new Dr(this.args[0]).serialize()}var t=["to-"+this.type.kind];this.eachChild((function(e){t.push(e.serialize())}));return t};var Fr=["Unknown","Point","LineString","Polygon"];var Br=function e(){this.globals=null;this.feature=null;this.featureState=null;this.formattedSection=null;this._parseColorCache={};this.availableImages=null;this.canonical=null};Br.prototype.id=function e(){return this.feature&&"id"in this.feature?this.feature.id:null};Br.prototype.geometryType=function e(){return this.feature?typeof this.feature.type==="number"?Fr[this.feature.type]:this.feature.type:null};Br.prototype.geometry=function e(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null};Br.prototype.canonicalID=function e(){return this.canonical};Br.prototype.properties=function e(){return this.feature&&this.feature.properties||{}};Br.prototype.parseColor=function e(t){var r=this._parseColorCache[t];if(!r){r=this._parseColorCache[t]=br.parse(t)}return r};var Nr=function e(t,r,n,a){this.name=t;this.type=r;this._evaluate=n;this.args=a};Nr.prototype.evaluate=function e(t){return this._evaluate(t,this.args)};Nr.prototype.eachChild=function e(t){this.args.forEach(t)};Nr.prototype.outputDefined=function e(){return false};Nr.prototype.serialize=function e(){return[this.name].concat(this.args.map((function(e){return e.serialize()})))};Nr.parse=function e(t,r){var n;var a=t[0];var i=Nr.definitions[a];if(!i){return r.error('Unknown expression "'+a+'". If you wanted a literal array, use ["literal", [...]].',0)}var o=Array.isArray(i)?i[0]:i.type;var s=Array.isArray(i)?[[i[1],i[2]]]:i.overloads;var l=s.filter((function(e){var r=e[0];return!Array.isArray(r)||r.length===t.length-1}));var u=null;for(var f=0,c=l;f<c.length;f+=1){var v=c[f];var h=v[0];var p=v[1];u=new mn(r.registry,r.path,null,r.scope);var d=[];var g=false;for(var y=1;y<t.length;y++){var m=t[y];var x=Array.isArray(h)?h[y-1]:h.type;var b=u.parse(m,1+d.length,x);if(!b){g=true;break}d.push(b)}if(g){continue}if(Array.isArray(h)){if(h.length!==d.length){u.error("Expected "+h.length+" arguments, but found "+d.length+" instead.");continue}}for(var _=0;_<d.length;_++){var w=Array.isArray(h)?h[_]:h.type;var T=d[_];u.concat(_+1).checkSubtype(w,T.type)}if(u.errors.length===0){return new Nr(a,o,p,d)}}if(l.length===1){(n=r.errors).push.apply(n,u.errors)}else{var k=l.length?l:s;var A=k.map((function(e){var t=e[0];return jr(t)})).join(" | ");var M=[];for(var S=1;S<t.length;S++){var E=r.parse(t[S],1+M.length);if(!E){return null}M.push(hr(E.type))}r.error("Expected arguments of type "+A+", but found ("+M.join(", ")+") instead.")}return null};Nr.register=function e(t,r){Nr.definitions=r;for(var n in r){t[n]=Nr}};function jr(e){if(Array.isArray(e)){return"("+e.map(hr).join(", ")+")"}else{return"("+hr(e.type)+"...)"}}var Ur=function e(t,r,n){this.type=ur;this.locale=n;this.caseSensitive=t;this.diacriticSensitive=r};Ur.parse=function e(t,r){if(t.length!==2){return r.error("Expected one argument.")}var n=t[1];if(typeof n!=="object"||Array.isArray(n)){return r.error("Collator options argument must be an object.")}var a=r.parse(n["case-sensitive"]===undefined?false:n["case-sensitive"],1,ar);if(!a){return null}var i=r.parse(n["diacritic-sensitive"]===undefined?false:n["diacritic-sensitive"],1,ar);if(!i){return null}var o=null;if(n["locale"]){o=r.parse(n["locale"],1,nr);if(!o){return null}}return new Ur(a,i,o)};Ur.prototype.evaluate=function e(t){return new _r(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)};Ur.prototype.eachChild=function e(t){t(this.caseSensitive);t(this.diacriticSensitive);if(this.locale){t(this.locale)}};Ur.prototype.outputDefined=function e(){return false};Ur.prototype.serialize=function e(){var t={};t["case-sensitive"]=this.caseSensitive.serialize();t["diacritic-sensitive"]=this.diacriticSensitive.serialize();if(this.locale){t["locale"]=this.locale.serialize()}return["collator",t]};var Vr=8192;function Hr(e,t){e[0]=Math.min(e[0],t[0]);e[1]=Math.min(e[1],t[1]);e[2]=Math.max(e[2],t[0]);e[3]=Math.max(e[3],t[1])}function qr(e){return(180+e)/360}function Gr(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Zr(e,t){if(e[0]<=t[0]){return false}if(e[2]>=t[2]){return false}if(e[1]<=t[1]){return false}if(e[3]>=t[3]){return false}return true}function Yr(e,t){var r=qr(e[0]);var n=Gr(e[1]);var a=Math.pow(2,t.z);return[Math.round(r*a*Vr),Math.round(n*a*Vr)]}function Wr(e,t,r){var n=e[0]-t[0];var a=e[1]-t[1];var i=e[0]-r[0];var o=e[1]-r[1];return n*o-i*a===0&&n*i<=0&&a*o<=0}function Xr(e,t,r){return t[1]>e[1]!==r[1]>e[1]&&e[0]<(r[0]-t[0])*(e[1]-t[1])/(r[1]-t[1])+t[0]}function Jr(e,t){var r=false;for(var n=0,a=t.length;n<a;n++){var i=t[n];for(var o=0,s=i.length;o<s-1;o++){if(Wr(e,i[o],i[o+1])){return false}if(Xr(e,i[o],i[o+1])){r=!r}}}return r}function Kr(e,t){for(var r=0;r<t.length;r++){if(Jr(e,t[r])){return true}}return false}function $r(e,t){return e[0]*t[1]-e[1]*t[0]}function Qr(e,t,r,n){var a=e[0]-r[0];var i=e[1]-r[1];var o=t[0]-r[0];var s=t[1]-r[1];var l=n[0]-r[0];var u=n[1]-r[1];var f=a*u-l*i;var c=o*u-l*s;if(f>0&&c<0||f<0&&c>0){return true}return false}function en(e,t,r,n){var a=[t[0]-e[0],t[1]-e[1]];var i=[n[0]-r[0],n[1]-r[1]];if($r(i,a)===0){return false}if(Qr(e,t,r,n)&&Qr(r,n,e,t)){return true}return false}function tn(e,t,r){for(var n=0,a=r;n<a.length;n+=1){var i=a[n];for(var o=0;o<i.length-1;++o){if(en(e,t,i[o],i[o+1])){return true}}}return false}function rn(e,t){for(var r=0;r<e.length;++r){if(!Jr(e[r],t)){return false}}for(var n=0;n<e.length-1;++n){if(tn(e[n],e[n+1],t)){return false}}return true}function nn(e,t){for(var r=0;r<t.length;r++){if(rn(e,t[r])){return true}}return false}function an(e,t,r){var n=[];for(var a=0;a<e.length;a++){var i=[];for(var o=0;o<e[a].length;o++){var s=Yr(e[a][o],r);Hr(t,s);i.push(s)}n.push(i)}return n}function on(e,t,r){var n=[];for(var a=0;a<e.length;a++){var i=an(e[a],t,r);n.push(i)}return n}function sn(e,t,r,n){if(e[0]<r[0]||e[0]>r[2]){var a=n*.5;var i=e[0]-r[0]>a?-n:r[0]-e[0]>a?n:0;if(i===0){i=e[0]-r[2]>a?-n:r[2]-e[0]>a?n:0}e[0]+=i}Hr(t,e)}function ln(e){e[0]=e[1]=Infinity;e[2]=e[3]=-Infinity}function un(e,t,r,n){var a=Math.pow(2,n.z)*Vr;var i=[n.x*Vr,n.y*Vr];var o=[];for(var s=0,l=e;s<l.length;s+=1){var u=l[s];for(var f=0,c=u;f<c.length;f+=1){var v=c[f];var h=[v.x+i[0],v.y+i[1]];sn(h,t,r,a);o.push(h)}}return o}function fn(e,t,r,n){var a=Math.pow(2,n.z)*Vr;var i=[n.x*Vr,n.y*Vr];var o=[];for(var s=0,l=e;s<l.length;s+=1){var u=l[s];var f=[];for(var c=0,v=u;c<v.length;c+=1){var h=v[c];var p=[h.x+i[0],h.y+i[1]];Hr(t,p);f.push(p)}o.push(f)}if(t[2]-t[0]<=a/2){ln(t);for(var d=0,g=o;d<g.length;d+=1){var y=g[d];for(var m=0,x=y;m<x.length;m+=1){var b=x[m];sn(b,t,r,a)}}}return o}function cn(e,t){var r=[Infinity,Infinity,-Infinity,-Infinity];var n=[Infinity,Infinity,-Infinity,-Infinity];var a=e.canonicalID();if(t.type==="Polygon"){var i=an(t.coordinates,n,a);var o=un(e.geometry(),r,n,a);if(!Zr(r,n)){return false}for(var s=0,l=o;s<l.length;s+=1){var u=l[s];if(!Jr(u,i)){return false}}}if(t.type==="MultiPolygon"){var f=on(t.coordinates,n,a);var c=un(e.geometry(),r,n,a);if(!Zr(r,n)){return false}for(var v=0,h=c;v<h.length;v+=1){var p=h[v];if(!Kr(p,f)){return false}}}return true}function vn(e,t){var r=[Infinity,Infinity,-Infinity,-Infinity];var n=[Infinity,Infinity,-Infinity,-Infinity];var a=e.canonicalID();if(t.type==="Polygon"){var i=an(t.coordinates,n,a);var o=fn(e.geometry(),r,n,a);if(!Zr(r,n)){return false}for(var s=0,l=o;s<l.length;s+=1){var u=l[s];if(!rn(u,i)){return false}}}if(t.type==="MultiPolygon"){var f=on(t.coordinates,n,a);var c=fn(e.geometry(),r,n,a);if(!Zr(r,n)){return false}for(var v=0,h=c;v<h.length;v+=1){var p=h[v];if(!nn(p,f)){return false}}}return true}var hn=function e(t,r){this.type=ar;this.geojson=t;this.geometries=r};hn.parse=function e(t,r){if(t.length!==2){return r.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.")}if(Mr(t[1])){var n=t[1];if(n.type==="FeatureCollection"){for(var a=0;a<n.features.length;++a){var i=n.features[a].geometry.type;if(i==="Polygon"||i==="MultiPolygon"){return new hn(n,n.features[a].geometry)}}}else if(n.type==="Feature"){var o=n.geometry.type;if(o==="Polygon"||o==="MultiPolygon"){return new hn(n,n.geometry)}}else if(n.type==="Polygon"||n.type==="MultiPolygon"){return new hn(n,n)}}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")};hn.prototype.evaluate=function e(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point"){return cn(t,this.geometries)}else if(t.geometryType()==="LineString"){return vn(t,this.geometries)}}return false};hn.prototype.eachChild=function e(){};hn.prototype.outputDefined=function e(){return true};hn.prototype.serialize=function e(){return["within",this.geojson]};function pn(e){if(e instanceof Nr){if(e.name==="get"&&e.args.length===1){return false}else if(e.name==="feature-state"){return false}else if(e.name==="has"&&e.args.length===1){return false}else if(e.name==="properties"||e.name==="geometry-type"||e.name==="id"){return false}else if(/^filter-/.test(e.name)){return false}}if(e instanceof hn){return false}var t=true;e.eachChild((function(e){if(t&&!pn(e)){t=false}}));return t}function dn(e){if(e instanceof Nr){if(e.name==="feature-state"){return false}}var t=true;e.eachChild((function(e){if(t&&!dn(e)){t=false}}));return t}function gn(e,t){if(e instanceof Nr&&t.indexOf(e.name)>=0){return false}var r=true;e.eachChild((function(e){if(r&&!gn(e,t)){r=false}}));return r}var yn=function e(t,r){this.type=r.type;this.name=t;this.boundExpression=r};yn.parse=function e(t,r){if(t.length!==2||typeof t[1]!=="string"){return r.error("'var' expression requires exactly one string literal argument.")}var n=t[1];if(!r.scope.has(n)){return r.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)}return new yn(n,r.scope.get(n))};yn.prototype.evaluate=function e(t){return this.boundExpression.evaluate(t)};yn.prototype.eachChild=function e(){};yn.prototype.outputDefined=function e(){return false};yn.prototype.serialize=function e(){return["var",this.name]};var mn=function e(t,r,n,a,i){if(r===void 0)r=[];if(a===void 0)a=new er;if(i===void 0)i=[];this.registry=t;this.path=r;this.key=r.map((function(e){return"["+e+"]"})).join("");this.scope=a;this.errors=i;this.expectedType=n};mn.prototype.parse=function e(t,r,n,a,i){if(i===void 0)i={};if(r){return this.concat(r,n,a)._parse(t,i)}return this._parse(t,i)};mn.prototype._parse=function e(t,r){if(t===null||typeof t==="string"||typeof t==="boolean"||typeof t==="number"){t=["literal",t]}function n(e,t,r){if(r==="assert"){return new Pr(t,[e])}else if(r==="coerce"){return new Rr(t,[e])}else{return e}}if(Array.isArray(t)){if(t.length===0){return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].')}var a=t[0];if(typeof a!=="string"){this.error("Expression name must be a string, but found "+typeof a+' instead. If you wanted a literal array, use ["literal", [...]].',0);return null}var i=this.registry[a];if(i){var o=i.parse(t,this);if(!o){return null}if(this.expectedType){var s=this.expectedType;var l=o.type;if((s.kind==="string"||s.kind==="number"||s.kind==="boolean"||s.kind==="object"||s.kind==="array")&&l.kind==="value"){o=n(o,s,r.typeAnnotation||"assert")}else if((s.kind==="color"||s.kind==="formatted"||s.kind==="resolvedImage")&&(l.kind==="value"||l.kind==="string")){o=n(o,s,r.typeAnnotation||"coerce")}else if(this.checkSubtype(s,l)){return null}}if(!(o instanceof Lr)&&o.type.kind!=="resolvedImage"&&xn(o)){var u=new Br;try{o=new Lr(o.type,o.evaluate(u))}catch(f){this.error(f.message);return null}}return o}return this.error('Unknown expression "'+a+'". If you wanted a literal array, use ["literal", [...]].',0)}else if(typeof t==="undefined"){return this.error("'undefined' value invalid. Use null instead.")}else if(typeof t==="object"){return this.error('Bare objects invalid. Use ["literal", {...}] instead.')}else{return this.error("Expected an array, but found "+typeof t+" instead.")}};mn.prototype.concat=function e(t,r,n){var a=typeof t==="number"?this.path.concat(t):this.path;var i=n?this.scope.concat(n):this.scope;return new mn(this.registry,a,r||null,i,this.errors)};mn.prototype.error=function e(t){var r=[],n=arguments.length-1;while(n-- >0)r[n]=arguments[n+1];var a=""+this.key+r.map((function(e){return"["+e+"]"})).join("");this.errors.push(new Qt(a,t))};mn.prototype.checkSubtype=function e(t,r){var n=dr(t,r);if(n){this.error(n)}return n};function xn(e){if(e instanceof yn){return xn(e.boundExpression)}else if(e instanceof Nr&&e.name==="error"){return false}else if(e instanceof Ur){return false}else if(e instanceof hn){return false}var t=e instanceof Rr||e instanceof Pr;var r=true;e.eachChild((function(e){if(t){r=r&&xn(e)}else{r=r&&e instanceof Lr}}));if(!r){return false}return pn(e)&&gn(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function bn(e,t){var r=e.length-1;var n=0;var a=r;var i=0;var o,s;while(n<=a){i=Math.floor((n+a)/2);o=e[i];s=e[i+1];if(o<=t){if(i===r||t<s){return i}n=i+1}else if(o>t){a=i-1}else{throw new Cr("Input is not a number.")}}return 0}var _n=function e(t,r,n){this.type=t;this.input=r;this.labels=[];this.outputs=[];for(var a=0,i=n;a<i.length;a+=1){var o=i[a];var s=o[0];var l=o[1];this.labels.push(s);this.outputs.push(l)}};_n.parse=function e(t,r){if(t.length-1<4){return r.error("Expected at least 4 arguments, but found only "+(t.length-1)+".")}if((t.length-1)%2!==0){return r.error("Expected an even number of arguments.")}var n=r.parse(t[1],1,rr);if(!n){return null}var a=[];var i=null;if(r.expectedType&&r.expectedType.kind!=="value"){i=r.expectedType}for(var o=1;o<t.length;o+=2){var s=o===1?-Infinity:t[o];var l=t[o+1];var u=o;var f=o+1;if(typeof s!=="number"){return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u)}if(a.length&&a[a.length-1][0]>=s){return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u)}var c=r.parse(l,f,i);if(!c){return null}i=i||c.type;a.push([s,c])}return new _n(i,n,a)};_n.prototype.evaluate=function e(t){var r=this.labels;var n=this.outputs;if(r.length===1){return n[0].evaluate(t)}var a=this.input.evaluate(t);if(a<=r[0]){return n[0].evaluate(t)}var i=r.length;if(a>=r[i-1]){return n[i-1].evaluate(t)}var o=bn(r,a);return n[o].evaluate(t)};_n.prototype.eachChild=function e(t){t(this.input);for(var r=0,n=this.outputs;r<n.length;r+=1){var a=n[r];t(a)}};_n.prototype.outputDefined=function e(){return this.outputs.every((function(e){return e.outputDefined()}))};_n.prototype.serialize=function e(){var t=["step",this.input.serialize()];for(var r=0;r<this.labels.length;r++){if(r>0){t.push(this.labels[r])}t.push(this.outputs[r].serialize())}return t};function wn(e,t,r){return e*(1-r)+t*r}function Tn(e,t,r){return new br(wn(e.r,t.r,r),wn(e.g,t.g,r),wn(e.b,t.b,r),wn(e.a,t.a,r))}function kn(e,t,r){return e.map((function(e,n){return wn(e,t[n],r)}))}var An=Object.freeze({__proto__:null,number:wn,color:Tn,array:kn});var Mn=.95047,Sn=1,En=1.08883,Ln=4/29,Cn=6/29,In=3*Cn*Cn,Pn=Cn*Cn*Cn,On=Math.PI/180,Dn=180/Math.PI;function zn(e){return e>Pn?Math.pow(e,1/3):e/In+Ln}function Rn(e){return e>Cn?e*e*e:In*(e-Ln)}function Fn(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Bn(e){e/=255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Nn(e){var t=Bn(e.r),r=Bn(e.g),n=Bn(e.b),a=zn((.4124564*t+.3575761*r+.1804375*n)/Mn),i=zn((.2126729*t+.7151522*r+.072175*n)/Sn),o=zn((.0193339*t+.119192*r+.9503041*n)/En);return{l:116*i-16,a:500*(a-i),b:200*(i-o),alpha:e.a}}function jn(e){var t=(e.l+16)/116,r=isNaN(e.a)?t:t+e.a/500,n=isNaN(e.b)?t:t-e.b/200;t=Sn*Rn(t);r=Mn*Rn(r);n=En*Rn(n);return new br(Fn(3.2404542*r-1.5371385*t-.4985314*n),Fn(-.969266*r+1.8760108*t+.041556*n),Fn(.0556434*r-.2040259*t+1.0572252*n),e.alpha)}function Un(e,t,r){return{l:wn(e.l,t.l,r),a:wn(e.a,t.a,r),b:wn(e.b,t.b,r),alpha:wn(e.alpha,t.alpha,r)}}function Vn(e){var t=Nn(e);var r=t.l;var n=t.a;var a=t.b;var i=Math.atan2(a,n)*Dn;return{h:i<0?i+360:i,c:Math.sqrt(n*n+a*a),l:r,alpha:e.a}}function Hn(e){var t=e.h*On,r=e.c,n=e.l;return jn({l:n,a:Math.cos(t)*r,b:Math.sin(t)*r,alpha:e.alpha})}function qn(e,t,r){var n=t-e;return e+r*(n>180||n<-180?n-360*Math.round(n/360):n)}function Gn(e,t,r){return{h:qn(e.h,t.h,r),c:wn(e.c,t.c,r),l:wn(e.l,t.l,r),alpha:wn(e.alpha,t.alpha,r)}}var Zn={forward:Nn,reverse:jn,interpolate:Un};var Yn={forward:Vn,reverse:Hn,interpolate:Gn};var Wn=Object.freeze({__proto__:null,lab:Zn,hcl:Yn});var Xn=function e(t,r,n,a,i){this.type=t;this.operator=r;this.interpolation=n;this.input=a;this.labels=[];this.outputs=[];for(var o=0,s=i;o<s.length;o+=1){var l=s[o];var u=l[0];var f=l[1];this.labels.push(u);this.outputs.push(f)}};Xn.interpolationFactor=function e(t,r,a,i){var o=0;if(t.name==="exponential"){o=Jn(r,t.base,a,i)}else if(t.name==="linear"){o=Jn(r,1,a,i)}else if(t.name==="cubic-bezier"){var s=t.controlPoints;var l=new n(s[0],s[1],s[2],s[3]);o=l.solve(Jn(r,1,a,i))}return o};Xn.parse=function e(t,r){var n=t[0];var a=t[1];var i=t[2];var o=t.slice(3);if(!Array.isArray(a)||a.length===0){return r.error("Expected an interpolation type expression.",1)}if(a[0]==="linear"){a={name:"linear"}}else if(a[0]==="exponential"){var s=a[1];if(typeof s!=="number"){return r.error("Exponential interpolation requires a numeric base.",1,1)}a={name:"exponential",base:s}}else if(a[0]==="cubic-bezier"){var l=a.slice(1);if(l.length!==4||l.some((function(e){return typeof e!=="number"||e<0||e>1}))){return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1)}a={name:"cubic-bezier",controlPoints:l}}else{return r.error("Unknown interpolation type "+String(a[0]),1,0)}if(t.length-1<4){return r.error("Expected at least 4 arguments, but found only "+(t.length-1)+".")}if((t.length-1)%2!==0){return r.error("Expected an even number of arguments.")}i=r.parse(i,2,rr);if(!i){return null}var u=[];var f=null;if(n==="interpolate-hcl"||n==="interpolate-lab"){f=ir}else if(r.expectedType&&r.expectedType.kind!=="value"){f=r.expectedType}for(var c=0;c<o.length;c+=2){var v=o[c];var h=o[c+1];var p=c+3;var d=c+4;if(typeof v!=="number"){return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',p)}if(u.length&&u[u.length-1][0]>=v){return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',p)}var g=r.parse(h,d,f);if(!g){return null}f=f||g.type;u.push([v,g])}if(f.kind!=="number"&&f.kind!=="color"&&!(f.kind==="array"&&f.itemType.kind==="number"&&typeof f.N==="number")){return r.error("Type "+hr(f)+" is not interpolatable.")}return new Xn(f,n,a,i,u)};Xn.prototype.evaluate=function e(t){var r=this.labels;var n=this.outputs;if(r.length===1){return n[0].evaluate(t)}var a=this.input.evaluate(t);if(a<=r[0]){return n[0].evaluate(t)}var i=r.length;if(a>=r[i-1]){return n[i-1].evaluate(t)}var o=bn(r,a);var s=r[o];var l=r[o+1];var u=Xn.interpolationFactor(this.interpolation,a,s,l);var f=n[o].evaluate(t);var c=n[o+1].evaluate(t);if(this.operator==="interpolate"){return An[this.type.kind.toLowerCase()](f,c,u)}else if(this.operator==="interpolate-hcl"){return Yn.reverse(Yn.interpolate(Yn.forward(f),Yn.forward(c),u))}else{return Zn.reverse(Zn.interpolate(Zn.forward(f),Zn.forward(c),u))}};Xn.prototype.eachChild=function e(t){t(this.input);for(var r=0,n=this.outputs;r<n.length;r+=1){var a=n[r];t(a)}};Xn.prototype.outputDefined=function e(){return this.outputs.every((function(e){return e.outputDefined()}))};Xn.prototype.serialize=function e(){var t;if(this.interpolation.name==="linear"){t=["linear"]}else if(this.interpolation.name==="exponential"){if(this.interpolation.base===1){t=["linear"]}else{t=["exponential",this.interpolation.base]}}else{t=["cubic-bezier"].concat(this.interpolation.controlPoints)}var r=[this.operator,t,this.input.serialize()];for(var n=0;n<this.labels.length;n++){r.push(this.labels[n],this.outputs[n].serialize())}return r};function Jn(e,t,r,n){var a=n-r;var i=e-r;if(a===0){return 0}else if(t===1){return i/a}else{return(Math.pow(t,i)-1)/(Math.pow(t,a)-1)}}var Kn=function e(t,r){this.type=t;this.args=r};Kn.parse=function e(t,r){if(t.length<2){return r.error("Expectected at least one argument.")}var n=null;var a=r.expectedType;if(a&&a.kind!=="value"){n=a}var i=[];for(var o=0,s=t.slice(1);o<s.length;o+=1){var l=s[o];var u=r.parse(l,1+i.length,n,undefined,{typeAnnotation:"omit"});if(!u){return null}n=n||u.type;i.push(u)}var f=a&&i.some((function(e){return dr(a,e.type)}));return f?new Kn(sr,i):new Kn(n,i)};Kn.prototype.evaluate=function e(t){var r=null;var n=0;var a;for(var i=0,o=this.args;i<o.length;i+=1){var s=o[i];n++;r=s.evaluate(t);if(r&&r instanceof kr&&!r.available){if(!a){a=r.name}r=null;if(n===this.args.length){r=a}}if(r!==null){break}}return r};Kn.prototype.eachChild=function e(t){this.args.forEach(t)};Kn.prototype.outputDefined=function e(){return this.args.every((function(e){return e.outputDefined()}))};Kn.prototype.serialize=function e(){var t=["coalesce"];this.eachChild((function(e){t.push(e.serialize())}));return t};var $n=function e(t,r){this.type=r.type;this.bindings=[].concat(t);this.result=r};$n.prototype.evaluate=function e(t){return this.result.evaluate(t)};$n.prototype.eachChild=function e(t){for(var r=0,n=this.bindings;r<n.length;r+=1){var a=n[r];t(a[1])}t(this.result)};$n.parse=function e(t,r){if(t.length<4){return r.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.")}var n=[];for(var a=1;a<t.length-1;a+=2){var i=t[a];if(typeof i!=="string"){return r.error("Expected string, but found "+typeof i+" instead.",a)}if(/[^a-zA-Z0-9_]/.test(i)){return r.error("Variable names must contain only alphanumeric characters or '_'.",a)}var o=r.parse(t[a+1],a+1);if(!o){return null}n.push([i,o])}var s=r.parse(t[t.length-1],t.length-1,r.expectedType,n);if(!s){return null}return new $n(n,s)};$n.prototype.outputDefined=function e(){return this.result.outputDefined()};$n.prototype.serialize=function e(){var t=["let"];for(var r=0,n=this.bindings;r<n.length;r+=1){var a=n[r];var i=a[0];var o=a[1];t.push(i,o.serialize())}t.push(this.result.serialize());return t};var Qn=function e(t,r,n){this.type=t;this.index=r;this.input=n};Qn.parse=function e(t,r){if(t.length!==3){return r.error("Expected 2 arguments, but found "+(t.length-1)+" instead.")}var n=r.parse(t[1],1,rr);var a=r.parse(t[2],2,vr(r.expectedType||sr));if(!n||!a){return null}var i=a.type;return new Qn(i.itemType,n,a)};Qn.prototype.evaluate=function e(t){var r=this.index.evaluate(t);var n=this.input.evaluate(t);if(r<0){throw new Cr("Array index out of bounds: "+r+" < 0.")}if(r>=n.length){throw new Cr("Array index out of bounds: "+r+" > "+(n.length-1)+".")}if(r!==Math.floor(r)){throw new Cr("Array index must be an integer, but found "+r+" instead.")}return n[r]};Qn.prototype.eachChild=function e(t){t(this.index);t(this.input)};Qn.prototype.outputDefined=function e(){return false};Qn.prototype.serialize=function e(){return["at",this.index.serialize(),this.input.serialize()]};var ea=function e(t,r){this.type=ar;this.needle=t;this.haystack=r};ea.parse=function e(t,r){if(t.length!==3){return r.error("Expected 2 arguments, but found "+(t.length-1)+" instead.")}var n=r.parse(t[1],1,sr);var a=r.parse(t[2],2,sr);if(!n||!a){return null}if(!gr(n.type,[ar,nr,rr,tr,sr])){return r.error("Expected first argument to be of type boolean, string, number or null, but found "+hr(n.type)+" instead")}return new ea(n,a)};ea.prototype.evaluate=function e(t){var r=this.needle.evaluate(t);var n=this.haystack.evaluate(t);if(!n){return false}if(!yr(r,["boolean","string","number","null"])){throw new Cr("Expected first argument to be of type boolean, string, number or null, but found "+hr(Sr(r))+" instead.")}if(!yr(n,["string","array"])){throw new Cr("Expected second argument to be of type array or string, but found "+hr(Sr(n))+" instead.")}return n.indexOf(r)>=0};ea.prototype.eachChild=function e(t){t(this.needle);t(this.haystack)};ea.prototype.outputDefined=function e(){return true};ea.prototype.serialize=function e(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ta=function e(t,r,n){this.type=rr;this.needle=t;this.haystack=r;this.fromIndex=n};ta.parse=function e(t,r){if(t.length<=2||t.length>=5){return r.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.")}var n=r.parse(t[1],1,sr);var a=r.parse(t[2],2,sr);if(!n||!a){return null}if(!gr(n.type,[ar,nr,rr,tr,sr])){return r.error("Expected first argument to be of type boolean, string, number or null, but found "+hr(n.type)+" instead")}if(t.length===4){var i=r.parse(t[3],3,rr);if(!i){return null}return new ta(n,a,i)}else{return new ta(n,a)}};ta.prototype.evaluate=function e(t){var r=this.needle.evaluate(t);var n=this.haystack.evaluate(t);if(!yr(r,["boolean","string","number","null"])){throw new Cr("Expected first argument to be of type boolean, string, number or null, but found "+hr(Sr(r))+" instead.")}if(!yr(n,["string","array"])){throw new Cr("Expected second argument to be of type array or string, but found "+hr(Sr(n))+" instead.")}if(this.fromIndex){var a=this.fromIndex.evaluate(t);return n.indexOf(r,a)}return n.indexOf(r)};ta.prototype.eachChild=function e(t){t(this.needle);t(this.haystack);if(this.fromIndex){t(this.fromIndex)}};ta.prototype.outputDefined=function e(){return false};ta.prototype.serialize=function e(){if(this.fromIndex!=null&&this.fromIndex!==undefined){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var ra=function e(t,r,n,a,i,o){this.inputType=t;this.type=r;this.input=n;this.cases=a;this.outputs=i;this.otherwise=o};ra.parse=function e(t,r){if(t.length<5){return r.error("Expected at least 4 arguments, but found only "+(t.length-1)+".")}if(t.length%2!==1){return r.error("Expected an even number of arguments.")}var n;var a;if(r.expectedType&&r.expectedType.kind!=="value"){a=r.expectedType}var i={};var o=[];for(var s=2;s<t.length-1;s+=2){var l=t[s];var u=t[s+1];if(!Array.isArray(l)){l=[l]}var f=r.concat(s);if(l.length===0){return f.error("Expected at least one branch label.")}for(var c=0,v=l;c<v.length;c+=1){var h=v[c];if(typeof h!=="number"&&typeof h!=="string"){return f.error("Branch labels must be numbers or strings.")}else if(typeof h==="number"&&Math.abs(h)>Number.MAX_SAFE_INTEGER){return f.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".")}else if(typeof h==="number"&&Math.floor(h)!==h){return f.error("Numeric branch labels must be integer values.")}else if(!n){n=Sr(h)}else if(f.checkSubtype(n,Sr(h))){return null}if(typeof i[String(h)]!=="undefined"){return f.error("Branch labels must be unique.")}i[String(h)]=o.length}var p=r.parse(u,s,a);if(!p){return null}a=a||p.type;o.push(p)}var d=r.parse(t[1],1,sr);if(!d){return null}var g=r.parse(t[t.length-1],t.length-1,a);if(!g){return null}if(d.type.kind!=="value"&&r.concat(1).checkSubtype(n,d.type)){return null}return new ra(n,a,d,i,o,g)};ra.prototype.evaluate=function e(t){var r=this.input.evaluate(t);var n=Sr(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise;return n.evaluate(t)};ra.prototype.eachChild=function e(t){t(this.input);this.outputs.forEach(t);t(this.otherwise)};ra.prototype.outputDefined=function e(){return this.outputs.every((function(e){return e.outputDefined()}))&&this.otherwise.outputDefined()};ra.prototype.serialize=function e(){var t=this;var r=["match",this.input.serialize()];var n=Object.keys(this.cases).sort();var a=[];var i={};for(var o=0,s=n;o<s.length;o+=1){var l=s[o];var u=i[this.cases[l]];if(u===undefined){i[this.cases[l]]=a.length;a.push([this.cases[l],[l]])}else{a[u][1].push(l)}}var f=function(e){return t.inputType.kind==="number"?Number(e):e};for(var c=0,v=a;c<v.length;c+=1){var h=v[c];var u=h[0];var p=h[1];if(p.length===1){r.push(f(p[0]))}else{r.push(p.map(f))}r.push(this.outputs[outputIndex$1].serialize())}r.push(this.otherwise.serialize());return r};var na=function e(t,r,n){this.type=t;this.branches=r;this.otherwise=n};na.parse=function e(t,r){if(t.length<4){return r.error("Expected at least 3 arguments, but found only "+(t.length-1)+".")}if(t.length%2!==0){return r.error("Expected an odd number of arguments.")}var n;if(r.expectedType&&r.expectedType.kind!=="value"){n=r.expectedType}var a=[];for(var i=1;i<t.length-1;i+=2){var o=r.parse(t[i],i,ar);if(!o){return null}var s=r.parse(t[i+1],i+1,n);if(!s){return null}a.push([o,s]);n=n||s.type}var l=r.parse(t[t.length-1],t.length-1,n);if(!l){return null}return new na(n,a,l)};na.prototype.evaluate=function e(t){for(var r=0,n=this.branches;r<n.length;r+=1){var a=n[r];var i=a[0];var o=a[1];if(i.evaluate(t)){return o.evaluate(t)}}return this.otherwise.evaluate(t)};na.prototype.eachChild=function e(t){for(var r=0,n=this.branches;r<n.length;r+=1){var a=n[r];var i=a[0];var o=a[1];t(i);t(o)}t(this.otherwise)};na.prototype.outputDefined=function e(){return this.branches.every((function(e){var t=e[0];var r=e[1];return r.outputDefined()}))&&this.otherwise.outputDefined()};na.prototype.serialize=function e(){var t=["case"];this.eachChild((function(e){t.push(e.serialize())}));return t};var aa=function e(t,r,n,a){this.type=t;this.input=r;this.beginIndex=n;this.endIndex=a};aa.parse=function e(t,r){if(t.length<=2||t.length>=5){return r.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.")}var n=r.parse(t[1],1,sr);var a=r.parse(t[2],2,rr);if(!n||!a){return null}if(!gr(n.type,[vr(sr),nr,sr])){return r.error("Expected first argument to be of type array or string, but found "+hr(n.type)+" instead")}if(t.length===4){var i=r.parse(t[3],3,rr);if(!i){return null}return new aa(n.type,n,a,i)}else{return new aa(n.type,n,a)}};aa.prototype.evaluate=function e(t){var r=this.input.evaluate(t);var n=this.beginIndex.evaluate(t);if(!yr(r,["string","array"])){throw new Cr("Expected first argument to be of type array or string, but found "+hr(Sr(r))+" instead.")}if(this.endIndex){var a=this.endIndex.evaluate(t);return r.slice(n,a)}return r.slice(n)};aa.prototype.eachChild=function e(t){t(this.input);t(this.beginIndex);if(this.endIndex){t(this.endIndex)}};aa.prototype.outputDefined=function e(){return false};aa.prototype.serialize=function e(){if(this.endIndex!=null&&this.endIndex!==undefined){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function ia(e,t){if(e==="=="||e==="!="){return t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value"}else{return t.kind==="string"||t.kind==="number"||t.kind==="value"}}function oa(e,t,r){return t===r}function sa(e,t,r){return t!==r}function la(e,t,r){return t<r}function ua(e,t,r){return t>r}function fa(e,t,r){return t<=r}function ca(e,t,r){return t>=r}function va(e,t,r,n){return n.compare(t,r)===0}function ha(e,t,r,n){return!va(e,t,r,n)}function pa(e,t,r,n){return n.compare(t,r)<0}function da(e,t,r,n){return n.compare(t,r)>0}function ga(e,t,r,n){return n.compare(t,r)<=0}function ya(e,t,r,n){return n.compare(t,r)>=0}function ma(e,t,r){var n=e!=="=="&&e!=="!=";return function(){function a(e,t,r){this.type=ar;this.lhs=e;this.rhs=t;this.collator=r;this.hasUntypedArgument=e.type.kind==="value"||t.type.kind==="value"}a.parse=function e(t,r){if(t.length!==3&&t.length!==4){return r.error("Expected two or three arguments.")}var i=t[0];var o=r.parse(t[1],1,sr);if(!o){return null}if(!ia(i,o.type)){return r.concat(1).error('"'+i+"\" comparisons are not supported for type '"+hr(o.type)+"'.")}var s=r.parse(t[2],2,sr);if(!s){return null}if(!ia(i,s.type)){return r.concat(2).error('"'+i+"\" comparisons are not supported for type '"+hr(s.type)+"'.")}if(o.type.kind!==s.type.kind&&o.type.kind!=="value"&&s.type.kind!=="value"){return r.error("Cannot compare types '"+hr(o.type)+"' and '"+hr(s.type)+"'.")}if(n){if(o.type.kind==="value"&&s.type.kind!=="value"){o=new Pr(s.type,[o])}else if(o.type.kind!=="value"&&s.type.kind==="value"){s=new Pr(o.type,[s])}}var l=null;if(t.length===4){if(o.type.kind!=="string"&&s.type.kind!=="string"&&o.type.kind!=="value"&&s.type.kind!=="value"){return r.error("Cannot use collator to compare non-string types.")}l=r.parse(t[3],3,ur);if(!l){return null}}return new a(o,s,l)};a.prototype.evaluate=function a(i){var o=this.lhs.evaluate(i);var s=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){var l=Sr(o);var u=Sr(s);if(l.kind!==u.kind||!(l.kind==="string"||l.kind==="number")){throw new Cr('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+l.kind+", "+u.kind+") instead.")}}if(this.collator&&!n&&this.hasUntypedArgument){var f=Sr(o);var c=Sr(s);if(f.kind!=="string"||c.kind!=="string"){return t(i,o,s)}}return this.collator?r(i,o,s,this.collator.evaluate(i)):t(i,o,s)};a.prototype.eachChild=function e(t){t(this.lhs);t(this.rhs);if(this.collator){t(this.collator)}};a.prototype.outputDefined=function e(){return true};a.prototype.serialize=function t(){var r=[e];this.eachChild((function(e){r.push(e.serialize())}));return r};return a}()}var xa=ma("==",oa,va);var ba=ma("!=",sa,ha);var _a=ma("<",la,pa);var wa=ma(">",ua,da);var Ta=ma("<=",fa,ga);var ka=ma(">=",ca,ya);var Aa=function e(t,r,n,a,i){this.type=nr;this.number=t;this.locale=r;this.currency=n;this.minFractionDigits=a;this.maxFractionDigits=i};Aa.parse=function e(t,r){if(t.length!==3){return r.error("Expected two arguments.")}var n=r.parse(t[1],1,rr);if(!n){return null}var a=t[2];if(typeof a!=="object"||Array.isArray(a)){return r.error("NumberFormat options argument must be an object.")}var i=null;if(a["locale"]){i=r.parse(a["locale"],1,nr);if(!i){return null}}var o=null;if(a["currency"]){o=r.parse(a["currency"],1,nr);if(!o){return null}}var s=null;if(a["min-fraction-digits"]){s=r.parse(a["min-fraction-digits"],1,rr);if(!s){return null}}var l=null;if(a["max-fraction-digits"]){l=r.parse(a["max-fraction-digits"],1,rr);if(!l){return null}}return new Aa(n,i,o,s,l)};Aa.prototype.evaluate=function e(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):undefined,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):undefined,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):undefined}).format(this.number.evaluate(t))};Aa.prototype.eachChild=function e(t){t(this.number);if(this.locale){t(this.locale)}if(this.currency){t(this.currency)}if(this.minFractionDigits){t(this.minFractionDigits)}if(this.maxFractionDigits){t(this.maxFractionDigits)}};Aa.prototype.outputDefined=function e(){return false};Aa.prototype.serialize=function e(){var t={};if(this.locale){t["locale"]=this.locale.serialize()}if(this.currency){t["currency"]=this.currency.serialize()}if(this.minFractionDigits){t["min-fraction-digits"]=this.minFractionDigits.serialize()}if(this.maxFractionDigits){t["max-fraction-digits"]=this.maxFractionDigits.serialize()}return["number-format",this.number.serialize(),t]};var Ma=function e(t){this.type=rr;this.input=t};Ma.parse=function e(t,r){if(t.length!==2){return r.error("Expected 1 argument, but found "+(t.length-1)+" instead.")}var n=r.parse(t[1],1);if(!n){return null}if(n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"){return r.error("Expected argument of type string or array, but found "+hr(n.type)+" instead.")}return new Ma(n)};Ma.prototype.evaluate=function e(t){var r=this.input.evaluate(t);if(typeof r==="string"){return r.length}else if(Array.isArray(r)){return r.length}else{throw new Cr("Expected value to be of type string or array, but found "+hr(Sr(r))+" instead.")}};Ma.prototype.eachChild=function e(t){t(this.input)};Ma.prototype.outputDefined=function e(){return false};Ma.prototype.serialize=function e(){var t=["length"];this.eachChild((function(e){t.push(e.serialize())}));return t};var Sa={"==":xa,"!=":ba,">":wa,"<":_a,">=":ka,"<=":Ta,array:Pr,at:Qn,boolean:Pr,case:na,coalesce:Kn,collator:Ur,format:Or,image:Dr,in:ea,"index-of":ta,interpolate:Xn,"interpolate-hcl":Xn,"interpolate-lab":Xn,length:Ma,let:$n,literal:Lr,match:ra,number:Pr,"number-format":Aa,object:Pr,slice:aa,step:_n,string:Pr,"to-boolean":Rr,"to-color":Rr,"to-number":Rr,"to-string":Rr,var:yn,within:hn};function Ea(e,t){var r=t[0];var n=t[1];var a=t[2];var i=t[3];r=r.evaluate(e);n=n.evaluate(e);a=a.evaluate(e);var o=i?i.evaluate(e):1;var s=Ar(r,n,a,o);if(s){throw new Cr(s)}return new br(r/255*o,n/255*o,a/255*o,o)}function La(e,t){return e in t}function Ca(e,t){var r=t[e];return typeof r==="undefined"?null:r}function Ia(e,t,r,n){while(r<=n){var a=r+n>>1;if(t[a]===e){return true}if(t[a]>e){n=a-1}else{r=a+1}}return false}function Pa(e){return{type:e}}Nr.register(Sa,{error:[lr,[nr],function(e,t){var r=t[0];throw new Cr(r.evaluate(e))}],typeof:[nr,[sr],function(e,t){var r=t[0];return hr(Sr(r.evaluate(e)))}],"to-rgba":[vr(rr,4),[ir],function(e,t){var r=t[0];return r.evaluate(e).toArray()}],rgb:[ir,[rr,rr,rr],Ea],rgba:[ir,[rr,rr,rr,rr],Ea],has:{type:ar,overloads:[[[nr],function(e,t){var r=t[0];return La(r.evaluate(e),e.properties())}],[[nr,or],function(e,t){var r=t[0];var n=t[1];return La(r.evaluate(e),n.evaluate(e))}]]},get:{type:sr,overloads:[[[nr],function(e,t){var r=t[0];return Ca(r.evaluate(e),e.properties())}],[[nr,or],function(e,t){var r=t[0];var n=t[1];return Ca(r.evaluate(e),n.evaluate(e))}]]},"feature-state":[sr,[nr],function(e,t){var r=t[0];return Ca(r.evaluate(e),e.featureState||{})}],properties:[or,[],function(e){return e.properties()}],"geometry-type":[nr,[],function(e){return e.geometryType()}],id:[sr,[],function(e){return e.id()}],zoom:[rr,[],function(e){return e.globals.zoom}],"heatmap-density":[rr,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[rr,[],function(e){return e.globals.lineProgress||0}],accumulated:[sr,[],function(e){return e.globals.accumulated===undefined?null:e.globals.accumulated}],"+":[rr,Pa(rr),function(e,t){var r=0;for(var n=0,a=t;n<a.length;n+=1){var i=a[n];r+=i.evaluate(e)}return r}],"*":[rr,Pa(rr),function(e,t){var r=1;for(var n=0,a=t;n<a.length;n+=1){var i=a[n];r*=i.evaluate(e)}return r}],"-":{type:rr,overloads:[[[rr,rr],function(e,t){var r=t[0];var n=t[1];return r.evaluate(e)-n.evaluate(e)}],[[rr],function(e,t){var r=t[0];return-r.evaluate(e)}]]},"/":[rr,[rr,rr],function(e,t){var r=t[0];var n=t[1];return r.evaluate(e)/n.evaluate(e)}],"%":[rr,[rr,rr],function(e,t){var r=t[0];var n=t[1];return r.evaluate(e)%n.evaluate(e)}],ln2:[rr,[],function(){return Math.LN2}],pi:[rr,[],function(){return Math.PI}],e:[rr,[],function(){return Math.E}],"^":[rr,[rr,rr],function(e,t){var r=t[0];var n=t[1];return Math.pow(r.evaluate(e),n.evaluate(e))}],sqrt:[rr,[rr],function(e,t){var r=t[0];return Math.sqrt(r.evaluate(e))}],log10:[rr,[rr],function(e,t){var r=t[0];return Math.log(r.evaluate(e))/Math.LN10}],ln:[rr,[rr],function(e,t){var r=t[0];return Math.log(r.evaluate(e))}],log2:[rr,[rr],function(e,t){var r=t[0];return Math.log(r.evaluate(e))/Math.LN2}],sin:[rr,[rr],function(e,t){var r=t[0];return Math.sin(r.evaluate(e))}],cos:[rr,[rr],function(e,t){var r=t[0];return Math.cos(r.evaluate(e))}],tan:[rr,[rr],function(e,t){var r=t[0];return Math.tan(r.evaluate(e))}],asin:[rr,[rr],function(e,t){var r=t[0];return Math.asin(r.evaluate(e))}],acos:[rr,[rr],function(e,t){var r=t[0];return Math.acos(r.evaluate(e))}],atan:[rr,[rr],function(e,t){var r=t[0];return Math.atan(r.evaluate(e))}],min:[rr,Pa(rr),function(e,t){return Math.min.apply(Math,t.map((function(t){return t.evaluate(e)})))}],max:[rr,Pa(rr),function(e,t){return Math.max.apply(Math,t.map((function(t){return t.evaluate(e)})))}],abs:[rr,[rr],function(e,t){var r=t[0];return Math.abs(r.evaluate(e))}],round:[rr,[rr],function(e,t){var r=t[0];var n=r.evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[rr,[rr],function(e,t){var r=t[0];return Math.floor(r.evaluate(e))}],ceil:[rr,[rr],function(e,t){var r=t[0];return Math.ceil(r.evaluate(e))}],"filter-==":[ar,[nr,sr],function(e,t){var r=t[0];var n=t[1];return e.properties()[r.value]===n.value}],"filter-id-==":[ar,[sr],function(e,t){var r=t[0];return e.id()===r.value}],"filter-type-==":[ar,[nr],function(e,t){var r=t[0];return e.geometryType()===r.value}],"filter-<":[ar,[nr,sr],function(e,t){var r=t[0];var n=t[1];var a=e.properties()[r.value];var i=n.value;return typeof a===typeof i&&a<i}],"filter-id-<":[ar,[sr],function(e,t){var r=t[0];var n=e.id();var a=r.value;return typeof n===typeof a&&n<a}],"filter->":[ar,[nr,sr],function(e,t){var r=t[0];var n=t[1];var a=e.properties()[r.value];var i=n.value;return typeof a===typeof i&&a>i}],"filter-id->":[ar,[sr],function(e,t){var r=t[0];var n=e.id();var a=r.value;return typeof n===typeof a&&n>a}],"filter-<=":[ar,[nr,sr],function(e,t){var r=t[0];var n=t[1];var a=e.properties()[r.value];var i=n.value;return typeof a===typeof i&&a<=i}],"filter-id-<=":[ar,[sr],function(e,t){var r=t[0];var n=e.id();var a=r.value;return typeof n===typeof a&&n<=a}],"filter->=":[ar,[nr,sr],function(e,t){var r=t[0];var n=t[1];var a=e.properties()[r.value];var i=n.value;return typeof a===typeof i&&a>=i}],"filter-id->=":[ar,[sr],function(e,t){var r=t[0];var n=e.id();var a=r.value;return typeof n===typeof a&&n>=a}],"filter-has":[ar,[sr],function(e,t){var r=t[0];return r.value in e.properties()}],"filter-has-id":[ar,[],function(e){return e.id()!==null&&e.id()!==undefined}],"filter-type-in":[ar,[vr(nr)],function(e,t){var r=t[0];return r.value.indexOf(e.geometryType())>=0}],"filter-id-in":[ar,[vr(sr)],function(e,t){var r=t[0];return r.value.indexOf(e.id())>=0}],"filter-in-small":[ar,[nr,vr(sr)],function(e,t){var r=t[0];var n=t[1];return n.value.indexOf(e.properties()[r.value])>=0}],"filter-in-large":[ar,[nr,vr(sr)],function(e,t){var r=t[0];var n=t[1];return Ia(e.properties()[r.value],n.value,0,n.value.length-1)}],all:{type:ar,overloads:[[[ar,ar],function(e,t){var r=t[0];var n=t[1];return r.evaluate(e)&&n.evaluate(e)}],[Pa(ar),function(e,t){for(var r=0,n=t;r<n.length;r+=1){var a=n[r];if(!a.evaluate(e)){return false}}return true}]]},any:{type:ar,overloads:[[[ar,ar],function(e,t){var r=t[0];var n=t[1];return r.evaluate(e)||n.evaluate(e)}],[Pa(ar),function(e,t){for(var r=0,n=t;r<n.length;r+=1){var a=n[r];if(a.evaluate(e)){return true}}return false}]]},"!":[ar,[ar],function(e,t){var r=t[0];return!r.evaluate(e)}],"is-supported-script":[ar,[nr],function(e,t){var r=t[0];var n=e.globals&&e.globals.isSupportedScript;if(n){return n(r.evaluate(e))}return true}],upcase:[nr,[nr],function(e,t){var r=t[0];return r.evaluate(e).toUpperCase()}],downcase:[nr,[nr],function(e,t){var r=t[0];return r.evaluate(e).toLowerCase()}],concat:[nr,Pa(sr),function(e,t){return t.map((function(t){return Er(t.evaluate(e))})).join("")}],"resolved-locale":[nr,[ur],function(e,t){var r=t[0];return r.evaluate(e).resolvedLocale()}]});function Oa(e){return{result:"success",value:e}}function Da(e){return{result:"error",value:e}}function za(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function Ra(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Fa(e){return!!e.expression&&e.expression.interpolated}function Ba(e){if(e instanceof Number){return"number"}else if(e instanceof String){return"string"}else if(e instanceof Boolean){return"boolean"}else if(Array.isArray(e)){return"array"}else if(e===null){return"null"}else{return typeof e}}function Na(e){return typeof e==="object"&&e!==null&&!Array.isArray(e)}function ja(e){return e}function Ua(e,t){var r=t.type==="color";var n=e.stops&&typeof e.stops[0][0]==="object";var a=n||e.property!==undefined;var i=n||!a;var o=e.type||(Fa(t)?"exponential":"interval");if(r){e=Jt({},e);if(e.stops){e.stops=e.stops.map((function(e){return[e[0],br.parse(e[1])]}))}if(e.default){e.default=br.parse(e.default)}else{e.default=br.parse(t.default)}}if(e.colorSpace&&e.colorSpace!=="rgb"&&!Wn[e.colorSpace]){throw new Error("Unknown color space: "+e.colorSpace)}var s;var l;var u;if(o==="exponential"){s=Ga}else if(o==="interval"){s=qa}else if(o==="categorical"){s=Ha;l=Object.create(null);for(var f=0,c=e.stops;f<c.length;f+=1){var v=c[f];l[v[0]]=v[1]}u=typeof e.stops[0][0]}else if(o==="identity"){s=Za}else{throw new Error('Unknown function type "'+o+'"')}if(n){var h={};var p=[];for(var d=0;d<e.stops.length;d++){var g=e.stops[d];var y=g[0].zoom;if(h[y]===undefined){h[y]={zoom:y,type:e.type,property:e.property,default:e.default,stops:[]};p.push(y)}h[y].stops.push([g[0].value,g[1]])}var m=[];for(var x=0,b=p;x<b.length;x+=1){var _=b[x];m.push([h[_].zoom,Ua(h[_],t)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:Xn.interpolationFactor.bind(undefined,w),zoomStops:m.map((function(e){return e[0]})),evaluate:function r(n,a){var i=n.zoom;return Ga({stops:m,base:e.base},t,i).evaluate(i,a)}}}else if(i){var T=o==="exponential"?{name:"exponential",base:e.base!==undefined?e.base:1}:null;return{kind:"camera",interpolationType:T,interpolationFactor:Xn.interpolationFactor.bind(undefined,T),zoomStops:e.stops.map((function(e){return e[0]})),evaluate:function(r){var n=r.zoom;return s(e,t,n,l,u)}}}else{return{kind:"source",evaluate:function r(n,a){var i=a&&a.properties?a.properties[e.property]:undefined;if(i===undefined){return Va(e.default,t.default)}return s(e,t,i,l,u)}}}}function Va(e,t,r){if(e!==undefined){return e}if(t!==undefined){return t}if(r!==undefined){return r}}function Ha(e,t,r,n,a){var i=typeof r===a?n[r]:undefined;return Va(i,e.default,t.default)}function qa(e,t,r){if(Ba(r)!=="number"){return Va(e.default,t.default)}var n=e.stops.length;if(n===1){return e.stops[0][1]}if(r<=e.stops[0][0]){return e.stops[0][1]}if(r>=e.stops[n-1][0]){return e.stops[n-1][1]}var a=bn(e.stops.map((function(e){return e[0]})),r);return e.stops[a][1]}function Ga(e,t,r){var n=e.base!==undefined?e.base:1;if(Ba(r)!=="number"){return Va(e.default,t.default)}var a=e.stops.length;if(a===1){return e.stops[0][1]}if(r<=e.stops[0][0]){return e.stops[0][1]}if(r>=e.stops[a-1][0]){return e.stops[a-1][1]}var i=bn(e.stops.map((function(e){return e[0]})),r);var o=Ya(r,n,e.stops[i][0],e.stops[i+1][0]);var s=e.stops[i][1];var l=e.stops[i+1][1];var u=An[t.type]||ja;if(e.colorSpace&&e.colorSpace!=="rgb"){var f=Wn[e.colorSpace];u=function(e,t){return f.reverse(f.interpolate(f.forward(e),f.forward(t),o))}}if(typeof s.evaluate==="function"){return{evaluate:function e(){var t=[],r=arguments.length;while(r--)t[r]=arguments[r];var n=s.evaluate.apply(undefined,t);var a=l.evaluate.apply(undefined,t);if(n===undefined||a===undefined){return undefined}return u(n,a,o)}}}return u(s,l,o)}function Za(e,t,r){if(t.type==="color"){r=br.parse(r)}else if(t.type==="formatted"){r=Tr.fromString(r.toString())}else if(t.type==="resolvedImage"){r=kr.fromString(r.toString())}else if(Ba(r)!==t.type&&(t.type!=="enum"||!t.values[r])){r=undefined}return Va(r,e.default,t.default)}function Ya(e,t,r,n){var a=n-r;var i=e-r;if(a===0){return 0}else if(t===1){return i/a}else{return(Math.pow(t,i)-1)/(Math.pow(t,a)-1)}}var Wa=function e(t,r){this.expression=t;this._warningHistory={};this._evaluator=new Br;this._defaultValue=r?ai(r):null;this._enumValues=r&&r.type==="enum"?r.values:null};Wa.prototype.evaluateWithoutErrorHandling=function e(t,r,n,a,i,o){this._evaluator.globals=t;this._evaluator.feature=r;this._evaluator.featureState=n;this._evaluator.canonical=a;this._evaluator.availableImages=i||null;this._evaluator.formattedSection=o;return this.expression.evaluate(this._evaluator)};Wa.prototype.evaluate=function e(t,r,n,a,i,o){this._evaluator.globals=t;this._evaluator.feature=r||null;this._evaluator.featureState=n||null;this._evaluator.canonical=a;this._evaluator.availableImages=i||null;this._evaluator.formattedSection=o||null;try{var s=this.expression.evaluate(this._evaluator);if(s===null||s===undefined||typeof s==="number"&&s!==s){return this._defaultValue}if(this._enumValues&&!(s in this._enumValues)){throw new Cr("Expected value to be one of "+Object.keys(this._enumValues).map((function(e){return JSON.stringify(e)})).join(", ")+", but found "+JSON.stringify(s)+" instead.")}return s}catch(l){if(!this._warningHistory[l.message]){this._warningHistory[l.message]=true;if(typeof console!=="undefined"){console.warn(l.message)}}return this._defaultValue}};function Xa(e){return Array.isArray(e)&&e.length>0&&typeof e[0]==="string"&&e[0]in Sa}function Ja(e,t){var r=new mn(Sa,[],t?ni(t):undefined);var n=r.parse(e,undefined,undefined,undefined,t&&t.type==="string"?{typeAnnotation:"coerce"}:undefined);if(!n){return Da(r.errors)}return Oa(new Wa(n,t))}var Ka=function e(t,r){this.kind=t;this._styleExpression=r;this.isStateDependent=t!=="constant"&&!dn(r.expression)};Ka.prototype.evaluateWithoutErrorHandling=function e(t,r,n,a,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,r,n,a,i,o)};Ka.prototype.evaluate=function e(t,r,n,a,i,o){return this._styleExpression.evaluate(t,r,n,a,i,o)};var $a=function e(t,r,n,a){this.kind=t;this.zoomStops=n;this._styleExpression=r;this.isStateDependent=t!=="camera"&&!dn(r.expression);this.interpolationType=a};$a.prototype.evaluateWithoutErrorHandling=function e(t,r,n,a,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,r,n,a,i,o)};$a.prototype.evaluate=function e(t,r,n,a,i,o){return this._styleExpression.evaluate(t,r,n,a,i,o)};$a.prototype.interpolationFactor=function e(t,r,n){if(this.interpolationType){return Xn.interpolationFactor(this.interpolationType,t,r,n)}else{return 0}};function Qa(e,t){e=Ja(e,t);if(e.result==="error"){return e}var r=e.value.expression;var n=pn(r);if(!n&&!za(t)){return Da([new Qt("","data expressions not supported")])}var a=gn(r,["zoom"]);if(!a&&!Ra(t)){return Da([new Qt("","zoom expressions not supported")])}var i=ri(r);if(!i&&!a){return Da([new Qt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}else if(i instanceof Qt){return Da([i])}else if(i instanceof Xn&&!Fa(t)){return Da([new Qt("",'"interpolate" expressions cannot be used with this property')])}if(!i){return Oa(n?new Ka("constant",e.value):new Ka("source",e.value))}var o=i instanceof Xn?i.interpolation:undefined;return Oa(n?new $a("camera",e.value,i.labels,o):new $a("composite",e.value,i.labels,o))}var ei=function e(t,r){this._parameters=t;this._specification=r;Jt(this,Ua(this._parameters,this._specification))};ei.deserialize=function e(t){return new ei(t._parameters,t._specification)};ei.serialize=function e(t){return{_parameters:t._parameters,_specification:t._specification}};function ti(e,t){if(Na(e)){return new ei(e,t)}else if(Xa(e)){var r=Qa(e,t);if(r.result==="error"){throw new Error(r.value.map((function(e){return e.key+": "+e.message})).join(", "))}return r.value}else{var n=e;if(typeof e==="string"&&t.type==="color"){n=br.parse(e)}return{kind:"constant",evaluate:function(){return n}}}}function ri(e){var t=null;if(e instanceof $n){t=ri(e.result)}else if(e instanceof Kn){for(var r=0,n=e.args;r<n.length;r+=1){var a=n[r];t=ri(a);if(t){break}}}else if((e instanceof _n||e instanceof Xn)&&e.input instanceof Nr&&e.input.name==="zoom"){t=e}if(t instanceof Qt){return t}e.eachChild((function(e){var r=ri(e);if(r instanceof Qt){t=r}else if(!t&&r){t=new Qt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')}else if(t&&r&&t!==r){t=new Qt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.')}}));return t}function ni(e){var t={color:ir,string:nr,number:rr,enum:nr,boolean:ar,formatted:fr,resolvedImage:cr};if(e.type==="array"){return vr(t[e.value]||sr,e.length)}return t[e.type]}function ai(e){if(e.type==="color"&&Na(e.default)){return new br(0,0,0,0)}else if(e.type==="color"){return br.parse(e.default)||null}else if(e.default===undefined){return null}else{return e.default}}function ii(e){var t=e.key;var r=e.value;var n=e.valueSpec||{};var a=e.objectElementValidators||{};var i=e.style;var o=e.styleSpec;var s=[];var l=Ba(r);if(l!=="object"){return[new Wt(t,r,"object expected, "+l+" found")]}for(var u in r){var f=u.split(".")[0];var c=n[f]||n["*"];var v=void 0;if(a[f]){v=a[f]}else if(n[f]){v=Bi}else if(a["*"]){v=a["*"]}else if(n["*"]){v=Bi}else{s.push(new Wt(t,r[u],'unknown property "'+u+'"'));continue}s=s.concat(v({key:(t?t+".":t)+u,value:r[u],valueSpec:c,style:i,styleSpec:o,object:r,objectKey:u},r))}for(var h in n){if(a[h]){continue}if(n[h].required&&n[h]["default"]===undefined&&r[h]===undefined){s.push(new Wt(t,r,'missing required property "'+h+'"'))}}return s}function oi(e){var t=e.value;var r=e.valueSpec;var n=e.style;var a=e.styleSpec;var i=e.key;var o=e.arrayElementValidator||Bi;if(Ba(t)!=="array"){return[new Wt(i,t,"array expected, "+Ba(t)+" found")]}if(r.length&&t.length!==r.length){return[new Wt(i,t,"array length "+r.length+" expected, length "+t.length+" found")]}if(r["min-length"]&&t.length<r["min-length"]){return[new Wt(i,t,"array length at least "+r["min-length"]+" expected, length "+t.length+" found")]}var s={type:r.value,values:r.values};if(a.$version<7){s.function=r.function}if(Ba(r.value)==="object"){s=r.value}var l=[];for(var u=0;u<t.length;u++){l=l.concat(o({array:t,arrayIndex:u,value:t[u],valueSpec:s,style:n,styleSpec:a,key:i+"["+u+"]"}))}return l}function si(e){var t=e.key;var r=e.value;var n=e.valueSpec;var a=Ba(r);if(a==="number"&&r!==r){a="NaN"}if(a!=="number"){return[new Wt(t,r,"number expected, "+a+" found")]}if("minimum"in n&&r<n.minimum){return[new Wt(t,r,r+" is less than the minimum value "+n.minimum)]}if("maximum"in n&&r>n.maximum){return[new Wt(t,r,r+" is greater than the maximum value "+n.maximum)]}return[]}function li(e){var t=e.valueSpec;var r=Kt(e.value.type);var n;var a={};var i;var o;var s=r!=="categorical"&&e.value.property===undefined;var l=!s;var u=Ba(e.value.stops)==="array"&&Ba(e.value.stops[0])==="array"&&Ba(e.value.stops[0][0])==="object";var f=ii({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:c,default:p}});if(r==="identity"&&s){f.push(new Wt(e.key,e.value,'missing required property "property"'))}if(r!=="identity"&&!e.value.stops){f.push(new Wt(e.key,e.value,'missing required property "stops"'))}if(r==="exponential"&&e.valueSpec.expression&&!Fa(e.valueSpec)){f.push(new Wt(e.key,e.value,"exponential functions not supported"))}if(e.styleSpec.$version>=8){if(l&&!za(e.valueSpec)){f.push(new Wt(e.key,e.value,"property functions not supported"))}else if(s&&!Ra(e.valueSpec)){f.push(new Wt(e.key,e.value,"zoom functions not supported"))}}if((r==="categorical"||u)&&e.value.property===undefined){f.push(new Wt(e.key,e.value,'"property" property is required'))}return f;function c(e){if(r==="identity"){return[new Wt(e.key,e.value,'identity function may not have a "stops" property')]}var t=[];var n=e.value;t=t.concat(oi({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:v}));if(Ba(n)==="array"&&n.length===0){t.push(new Wt(e.key,n,"array must have at least one stop"))}return t}function v(e){var r=[];var n=e.value;var s=e.key;if(Ba(n)!=="array"){return[new Wt(s,n,"array expected, "+Ba(n)+" found")]}if(n.length!==2){return[new Wt(s,n,"array length 2 expected, length "+n.length+" found")]}if(u){if(Ba(n[0])!=="object"){return[new Wt(s,n,"object expected, "+Ba(n[0])+" found")]}if(n[0].zoom===undefined){return[new Wt(s,n,"object stop key must have zoom")]}if(n[0].value===undefined){return[new Wt(s,n,"object stop key must have value")]}if(o&&o>Kt(n[0].zoom)){return[new Wt(s,n[0].zoom,"stop zoom values must appear in ascending order")]}if(Kt(n[0].zoom)!==o){o=Kt(n[0].zoom);i=undefined;a={}}r=r.concat(ii({key:s+"[0]",value:n[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:si,value:h}}))}else{r=r.concat(h({key:s+"[0]",value:n[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},n))}if(Xa($t(n[1]))){return r.concat([new Wt(s+"[1]",n[1],"expressions are not allowed in function stops.")])}return r.concat(Bi({key:s+"[1]",value:n[1],valueSpec:t,style:e.style,styleSpec:e.styleSpec}))}function h(e,o){var s=Ba(e.value);var l=Kt(e.value);var u=e.value!==null?e.value:o;if(!n){n=s}else if(s!==n){return[new Wt(e.key,u,s+" stop domain type must match previous stop domain type "+n)]}if(s!=="number"&&s!=="string"&&s!=="boolean"){return[new Wt(e.key,u,"stop domain value must be a number, string, or boolean")]}if(s!=="number"&&r!=="categorical"){var f="number expected, "+s+" found";if(za(t)&&r===undefined){f+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'}return[new Wt(e.key,u,f)]}if(r==="categorical"&&s==="number"&&(!isFinite(l)||Math.floor(l)!==l)){return[new Wt(e.key,u,"integer expected, found "+l)]}if(r!=="categorical"&&s==="number"&&i!==undefined&&l<i){return[new Wt(e.key,u,"stop domain values must appear in ascending order")]}else{i=l}if(r==="categorical"&&l in a){return[new Wt(e.key,u,"stop domain values must be unique")]}else{a[l]=true}return[]}function p(e){return Bi({key:e.key,value:e.value,valueSpec:t,style:e.style,styleSpec:e.styleSpec})}}function ui(e){var t=(e.expressionContext==="property"?Qa:Ja)($t(e.value),e.valueSpec);if(t.result==="error"){return t.value.map((function(t){return new Wt(""+e.key+t.key,e.value,t.message)}))}var r=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!r.outputDefined()){return[new Wt(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')]}if(e.expressionContext==="property"&&e.propertyType==="layout"&&!dn(r)){return[new Wt(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')]}if(e.expressionContext==="filter"&&!dn(r)){return[new Wt(e.key,e.value,'"feature-state" data expressions are not supported with filters.')]}if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!gn(r,["zoom","feature-state"])){return[new Wt(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')]}if(e.expressionContext==="cluster-initial"&&!pn(r)){return[new Wt(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}}return[]}function fi(e){var t=e.value;var r=e.key;var n=Ba(t);if(n!=="boolean"){return[new Wt(r,t,"boolean expected, "+n+" found")]}return[]}function ci(e){var t=e.key;var r=e.value;var n=Ba(r);if(n!=="string"){return[new Wt(t,r,"color expected, "+n+" found")]}if(xr(r)===null){return[new Wt(t,r,'color expected, "'+r+'" found')]}return[]}function vi(e){var t=e.key;var r=e.value;var n=e.valueSpec;var a=[];if(Array.isArray(n.values)){if(n.values.indexOf(Kt(r))===-1){a.push(new Wt(t,r,"expected one of ["+n.values.join(", ")+"], "+JSON.stringify(r)+" found"))}}else{if(Object.keys(n.values).indexOf(Kt(r))===-1){a.push(new Wt(t,r,"expected one of ["+Object.keys(n.values).join(", ")+"], "+JSON.stringify(r)+" found"))}}return a}function hi(e){if(e===true||e===false){return true}if(!Array.isArray(e)||e.length===0){return false}switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!=="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return false;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||(Array.isArray(e[1])||Array.isArray(e[2]));case"any":case"all":for(var t=0,r=e.slice(1);t<r.length;t+=1){var n=r[t];if(!hi(n)&&typeof n!=="boolean"){return false}}return true;default:return true}}var pi={type:"boolean",default:false,transition:false,"property-type":"data-driven",expression:{interpolated:false,parameters:["zoom","feature"]}};function di(e){if(e===null||e===undefined){return{filter:function(){return true},needGeometry:false}}if(!hi(e)){e=mi(e)}var t=Ja(e,pi);if(t.result==="error"){throw new Error(t.value.map((function(e){return e.key+": "+e.message})).join(", "))}else{var r=yi(e);return{filter:function(e,r,n){return t.value.evaluate(e,r,{},n)},needGeometry:r}}}function gi(e,t){return e<t?-1:e>t?1:0}function yi(e){if(!Array.isArray(e)){return false}if(e[0]==="within"){return true}for(var t=1;t<e.length;t++){if(yi(e[t])){return true}}return false}function mi(e){if(!e){return true}var t=e[0];if(e.length<=1){return t!=="any"}var r=t==="=="?xi(e[1],e[2],"=="):t==="!="?Ti(xi(e[1],e[2],"==")):t==="<"||t===">"||t==="<="||t===">="?xi(e[1],e[2],t):t==="any"?bi(e.slice(1)):t==="all"?["all"].concat(e.slice(1).map(mi)):t==="none"?["all"].concat(e.slice(1).map(mi).map(Ti)):t==="in"?_i(e[1],e.slice(2)):t==="!in"?Ti(_i(e[1],e.slice(2))):t==="has"?wi(e[1]):t==="!has"?Ti(wi(e[1])):t==="within"?e:true;return r}function xi(e,t,r){switch(e){case"$type":return["filter-type-"+r,t];case"$id":return["filter-id-"+r,t];default:return["filter-"+r,e,t]}}function bi(e){return["any"].concat(e.map(mi))}function _i(e,t){if(t.length===0){return false}switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:if(t.length>200&&!t.some((function(e){return typeof e!==typeof t[0]}))){return["filter-in-large",e,["literal",t.sort(gi)]]}else{return["filter-in-small",e,["literal",t]]}}}function wi(e){switch(e){case"$type":return true;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Ti(e){return["!",e]}function ki(e){if(hi($t(e.value))){return ui(Jt({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}}))}else{return Ai(e)}}function Ai(e){var t=e.value;var r=e.key;if(Ba(t)!=="array"){return[new Wt(r,t,"array expected, "+Ba(t)+" found")]}var n=e.styleSpec;var a;var i=[];if(t.length<1){return[new Wt(r,t,"filter array must have at least 1 element")]}i=i.concat(vi({key:r+"[0]",value:t[0],valueSpec:n.filter_operator,style:e.style,styleSpec:e.styleSpec}));switch(Kt(t[0])){case"<":case"<=":case">":case">=":if(t.length>=2&&Kt(t[1])==="$type"){i.push(new Wt(r,t,'"$type" cannot be use with operator "'+t[0]+'"'))}case"==":case"!=":if(t.length!==3){i.push(new Wt(r,t,'filter array for operator "'+t[0]+'" must have 3 elements'))}case"in":case"!in":if(t.length>=2){a=Ba(t[1]);if(a!=="string"){i.push(new Wt(r+"[1]",t[1],"string expected, "+a+" found"))}}for(var o=2;o<t.length;o++){a=Ba(t[o]);if(Kt(t[1])==="$type"){i=i.concat(vi({key:r+"["+o+"]",value:t[o],valueSpec:n.geometry_type,style:e.style,styleSpec:e.styleSpec}))}else if(a!=="string"&&a!=="number"&&a!=="boolean"){i.push(new Wt(r+"["+o+"]",t[o],"string, number, or boolean expected, "+a+" found"))}}break;case"any":case"all":case"none":for(var s=1;s<t.length;s++){i=i.concat(Ai({key:r+"["+s+"]",value:t[s],style:e.style,styleSpec:e.styleSpec}))}break;case"has":case"!has":a=Ba(t[1]);if(t.length!==2){i.push(new Wt(r,t,'filter array for "'+t[0]+'" operator must have 2 elements'))}else if(a!=="string"){i.push(new Wt(r+"[1]",t[1],"string expected, "+a+" found"))}break;case"within":a=Ba(t[1]);if(t.length!==2){i.push(new Wt(r,t,'filter array for "'+t[0]+'" operator must have 2 elements'))}else if(a!=="object"){i.push(new Wt(r+"[1]",t[1],"object expected, "+a+" found"))}break}return i}function Mi(e,t){var r=e.key;var n=e.style;var a=e.styleSpec;var i=e.value;var o=e.objectKey;var s=a[t+"_"+e.layerType];if(!s){return[]}var l=o.match(/^(.*)-transition$/);if(t==="paint"&&l&&s[l[1]]&&s[l[1]].transition){return Bi({key:r,value:i,valueSpec:a.transition,style:n,styleSpec:a})}var u=e.valueSpec||s[o];if(!u){return[new Wt(r,i,'unknown property "'+o+'"')]}var f;if(Ba(i)==="string"&&za(u)&&!u.tokens&&(f=/^{([^}]+)}$/.exec(i))){return[new Wt(r,i,'"'+o+'" does not support interpolation syntax\n'+'Use an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(f[1])+" }`.")]}var c=[];if(e.layerType==="symbol"){if(o==="text-field"&&n&&!n.glyphs){c.push(new Wt(r,i,'use of "text-field" requires a style "glyphs" property'))}if(o==="text-font"&&Na($t(i))&&Kt(i.type)==="identity"){c.push(new Wt(r,i,'"text-font" does not support identity functions'))}}return c.concat(Bi({key:e.key,value:i,valueSpec:u,style:n,styleSpec:a,expressionContext:"property",propertyType:t,propertyKey:o}))}function Si(e){return Mi(e,"paint")}function Ei(e){return Mi(e,"layout")}function Li(e){var t=[];var r=e.value;var n=e.key;var a=e.style;var i=e.styleSpec;if(!r.type&&!r.ref){t.push(new Wt(n,r,'either "type" or "ref" is required'))}var o=Kt(r.type);var s=Kt(r.ref);if(r.id){var l=Kt(r.id);for(var u=0;u<e.arrayIndex;u++){var f=a.layers[u];if(Kt(f.id)===l){t.push(new Wt(n,r.id,'duplicate layer id "'+r.id+'", previously used at line '+f.id.__line__))}}}if("ref"in r){["type","source","source-layer","filter","layout"].forEach((function(e){if(e in r){t.push(new Wt(n,r[e],'"'+e+'" is prohibited for ref layers'))}}));var c;a.layers.forEach((function(e){if(Kt(e.id)===s){c=e}}));if(!c){t.push(new Wt(n,r.ref,'ref layer "'+s+'" not found'))}else if(c.ref){t.push(new Wt(n,r.ref,"ref cannot reference another ref layer"))}else{o=Kt(c.type)}}else if(o!=="background"){if(!r.source){t.push(new Wt(n,r,'missing required property "source"'))}else{var v=a.sources&&a.sources[r.source];var h=v&&Kt(v.type);if(!v){t.push(new Wt(n,r.source,'source "'+r.source+'" not found'))}else if(h==="vector"&&o==="raster"){t.push(new Wt(n,r.source,'layer "'+r.id+'" requires a raster source'))}else if(h==="raster"&&o!=="raster"){t.push(new Wt(n,r.source,'layer "'+r.id+'" requires a vector source'))}else if(h==="vector"&&!r["source-layer"]){t.push(new Wt(n,r,'layer "'+r.id+'" must specify a "source-layer"'))}else if(h==="raster-dem"&&o!=="hillshade"){t.push(new Wt(n,r.source,"raster-dem source can only be used with layer type 'hillshade'."))}else if(o==="line"&&r.paint&&r.paint["line-gradient"]&&(h!=="geojson"||!v.lineMetrics)){t.push(new Wt(n,r,'layer "'+r.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))}}}t=t.concat(ii({key:n,value:r,valueSpec:i.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function e(){return[]},type:function t(){return Bi({key:n+".type",value:r.type,valueSpec:i.layer.type,style:e.style,styleSpec:e.styleSpec,object:r,objectKey:"type"})},filter:ki,layout:function e(t){return ii({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function e(t){return Ei(Jt({layerType:o},t))}}})},paint:function e(t){return ii({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function e(t){return Si(Jt({layerType:o},t))}}})}}}));return t}function Ci(e){var t=e.value;var r=e.key;var n=Ba(t);if(n!=="string"){return[new Wt(r,t,"string expected, "+n+" found")]}return[]}var Ii={promoteId:Oi};function Pi(e){var t=e.value;var r=e.key;var n=e.styleSpec;var a=e.style;if(!t.type){return[new Wt(r,t,'"type" is required')]}var i=Kt(t.type);var o;switch(i){case"vector":case"raster":case"raster-dem":o=ii({key:r,value:t,valueSpec:n["source_"+i.replace("-","_")],style:e.style,styleSpec:n,objectElementValidators:Ii});return o;case"geojson":o=ii({key:r,value:t,valueSpec:n.source_geojson,style:a,styleSpec:n,objectElementValidators:Ii});if(t.cluster){for(var s in t.clusterProperties){var l=t.clusterProperties[s];var u=l[0];var f=l[1];var c=typeof u==="string"?[u,["accumulated"],["get",s]]:u;o.push.apply(o,ui({key:r+"."+s+".map",value:f,expressionContext:"cluster-map"}));o.push.apply(o,ui({key:r+"."+s+".reduce",value:c,expressionContext:"cluster-reduce"}))}}return o;case"video":return ii({key:r,value:t,valueSpec:n.source_video,style:a,styleSpec:n});case"image":return ii({key:r,value:t,valueSpec:n.source_image,style:a,styleSpec:n});case"canvas":return[new Wt(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return vi({key:r+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:a,styleSpec:n})}}function Oi(e){var t=e.key;var r=e.value;if(Ba(r)==="string"){return Ci({key:t,value:r})}else{var n=[];for(var a in r){n.push.apply(n,Ci({key:t+"."+a,value:r[a]}))}return n}}function Di(e){var t=e.value;var r=e.styleSpec;var n=r.light;var a=e.style;var i=[];var o=Ba(t);if(t===undefined){return i}else if(o!=="object"){i=i.concat([new Wt("light",t,"object expected, "+o+" found")]);return i}for(var s in t){var l=s.match(/^(.*)-transition$/);if(l&&n[l[1]]&&n[l[1]].transition){i=i.concat(Bi({key:s,value:t[s],valueSpec:r.transition,style:a,styleSpec:r}))}else if(n[s]){i=i.concat(Bi({key:s,value:t[s],valueSpec:n[s],style:a,styleSpec:r}))}else{i=i.concat([new Wt(s,t[s],'unknown property "'+s+'"')])}}return i}function zi(e){if(Ci(e).length===0){return[]}return ui(e)}function Ri(e){if(Ci(e).length===0){return[]}return ui(e)}var Fi={"*":function e(){return[]},array:oi,boolean:fi,number:si,color:ci,constants:Xt,enum:vi,filter:ki,function:li,layer:Li,object:ii,source:Pi,light:Di,string:Ci,formatted:zi,resolvedImage:Ri};function Bi(e){var t=e.value;var r=e.valueSpec;var n=e.styleSpec;if(r.expression&&Na(Kt(t))){return li(e)}else if(r.expression&&Xa($t(t))){return ui(e)}else if(r.type&&Fi[r.type]){return Fi[r.type](e)}else{var a=ii(Jt({},e,{valueSpec:r.type?n[r.type]:r}));return a}}function Ni(e){var t=e.value;var r=e.key;var n=Ci(e);if(n.length){return n}if(t.indexOf("{fontstack}")===-1){n.push(new Wt(r,t,'"glyphs" url must include a "{fontstack}" token'))}if(t.indexOf("{range}")===-1){n.push(new Wt(r,t,'"glyphs" url must include a "{range}" token'))}return n}function ji(e,t){if(t===void 0)t=Yt;var r=[];r=r.concat(Bi({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Ni,"*":function e(){return[]}}}));if(e.constants){r=r.concat(Xt({key:"constants",value:e.constants,style:e,styleSpec:t}))}return Ui(r)}ji.source=Vi(Pi);ji.light=Vi(Di);ji.layer=Vi(Li);ji.filter=Vi(ki);ji.paintProperty=Vi(Si);ji.layoutProperty=Vi(Ei);function Ui(e){return[].concat(e).sort((function(e,t){return e.line-t.line}))}function Vi(e){return function(){var t=[],r=arguments.length;while(r--)t[r]=arguments[r];return Ui(e.apply(this,t))}}var Hi=ji;var qi=Hi.light;var Gi=Hi.paintProperty;var Zi=Hi.layoutProperty;function Yi(e,t){var r=false;if(t&&t.length){for(var n=0,a=t;n<a.length;n+=1){var i=a[n];e.fire(new st(new Error(i.message)));r=true}}return r}var Wi=Ji;var Xi=3;function Ji(e,t,r){var n=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var a=new Int32Array(this.arrayBuffer);e=a[0];t=a[1];r=a[2];this.d=t+2*r;for(var i=0;i<this.d*this.d;i++){var o=a[Xi+i];var s=a[Xi+i+1];n.push(o===s?null:a.subarray(o,s))}var l=a[Xi+n.length];var u=a[Xi+n.length+1];this.keys=a.subarray(l,u);this.bboxes=a.subarray(u);this.insert=this._insertReadonly}else{this.d=t+2*r;for(var f=0;f<this.d*this.d;f++){n.push([])}this.keys=[];this.bboxes=[]}this.n=t;this.extent=e;this.padding=r;this.scale=t/e;this.uid=0;var c=r/t*e;this.min=-c;this.max=e+c}Ji.prototype.insert=function(e,t,r,n,a){this._forEachCell(t,r,n,a,this._insertCell,this.uid++);this.keys.push(e);this.bboxes.push(t);this.bboxes.push(r);this.bboxes.push(n);this.bboxes.push(a)};Ji.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."};Ji.prototype._insertCell=function(e,t,r,n,a,i){this.cells[a].push(i)};Ji.prototype.query=function(e,t,r,n,a){var i=this.min;var o=this.max;if(e<=i&&t<=i&&o<=r&&o<=n&&!a){return Array.prototype.slice.call(this.keys)}else{var s=[];var l={};this._forEachCell(e,t,r,n,this._queryCell,s,l,a);return s}};Ji.prototype._queryCell=function(e,t,r,n,a,i,o,s){var l=this.cells[a];if(l!==null){var u=this.keys;var f=this.bboxes;for(var c=0;c<l.length;c++){var v=l[c];if(o[v]===undefined){var h=v*4;if(s?s(f[h+0],f[h+1],f[h+2],f[h+3]):e<=f[h+2]&&t<=f[h+3]&&r>=f[h+0]&&n>=f[h+1]){o[v]=true;i.push(u[v])}else{o[v]=false}}}}};Ji.prototype._forEachCell=function(e,t,r,n,a,i,o,s){var l=this._convertToCellCoord(e);var u=this._convertToCellCoord(t);var f=this._convertToCellCoord(r);var c=this._convertToCellCoord(n);for(var v=l;v<=f;v++){for(var h=u;h<=c;h++){var p=this.d*h+v;if(s&&!s(this._convertFromCellCoord(v),this._convertFromCellCoord(h),this._convertFromCellCoord(v+1),this._convertFromCellCoord(h+1))){continue}if(a.call(this,e,t,r,n,p,i,o,s)){return}}}};Ji.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale};Ji.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))};Ji.prototype.toArrayBuffer=function(){if(this.arrayBuffer){return this.arrayBuffer}var e=this.cells;var t=Xi+this.cells.length+1+1;var r=0;for(var n=0;n<this.cells.length;n++){r+=this.cells[n].length}var a=new Int32Array(t+r+this.keys.length+this.bboxes.length);a[0]=this.extent;a[1]=this.n;a[2]=this.padding;var i=t;for(var o=0;o<e.length;o++){var s=e[o];a[Xi+o]=i;a.set(s,i);i+=s.length}a[Xi+e.length]=i;a.set(this.keys,i);i+=this.keys.length;a[Xi+e.length+1]=i;a.set(this.bboxes,i);i+=this.bboxes.length;return a.buffer};var Ki=self.ImageData;var $i=self.ImageBitmap;var Qi={};function eo(e,t,r){if(r===void 0)r={};Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:false});Qi[e]={klass:t,omit:r.omit||[],shallow:r.shallow||[]}}eo("Object",Object);Wi.serialize=function e(t,r){var n=t.toArrayBuffer();if(r){r.push(n)}return{buffer:n}};Wi.deserialize=function e(t){return new Wi(t.buffer)};eo("Grid",Wi);eo("Color",br);eo("Error",Error);eo("ResolvedImage",kr);eo("StylePropertyFunction",ei);eo("StyleExpression",Wa,{omit:["_evaluator"]});eo("ZoomDependentExpression",$a);eo("ZoomConstantExpression",Ka);eo("CompoundExpression",Nr,{omit:["_evaluate"]});for(var to in Sa){if(Sa[to]._classRegistryKey){continue}eo("Expression_"+to,Sa[to])}function ro(e){return e&&typeof ArrayBuffer!=="undefined"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function no(e){return $i&&e instanceof $i}function ao(e,t){if(e===null||e===undefined||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp){return e}if(ro(e)||no(e)){if(t){t.push(e)}return e}if(ArrayBuffer.isView(e)){var r=e;if(t){t.push(r.buffer)}return r}if(e instanceof Ki){if(t){t.push(e.data.buffer)}return e}if(Array.isArray(e)){var n=[];for(var a=0,i=e;a<i.length;a+=1){var o=i[a];n.push(ao(o,t))}return n}if(typeof e==="object"){var s=e.constructor;var l=s._classRegistryKey;if(!l){throw new Error("can't serialize object of unregistered class")}var u=s.serialize?s.serialize(e,t):{};if(!s.serialize){for(var f in e){if(!e.hasOwnProperty(f)){continue}if(Qi[l].omit.indexOf(f)>=0){continue}var c=e[f];u[f]=Qi[l].shallow.indexOf(f)>=0?c:ao(c,t)}if(e instanceof Error){u.message=e.message}}if(u.$name){throw new Error("$name property is reserved for worker serialization logic.")}if(l!=="Object"){u.$name=l}return u}throw new Error("can't serialize object of type "+typeof e)}function io(e){if(e===null||e===undefined||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||ro(e)||no(e)||ArrayBuffer.isView(e)||e instanceof Ki){return e}if(Array.isArray(e)){return e.map(io)}if(typeof e==="object"){var t=e.$name||"Object";var r=Qi[t];var n=r.klass;if(!n){throw new Error("can't deserialize unregistered class "+t)}if(n.deserialize){return n.deserialize(e)}var a=Object.create(n.prototype);for(var i=0,o=Object.keys(e);i<o.length;i+=1){var s=o[i];if(s==="$name"){continue}var l=e[s];a[s]=Qi[t].shallow.indexOf(s)>=0?l:io(l)}return a}throw new Error("can't deserialize object of type "+typeof e)}var oo=function e(){this.first=true};oo.prototype.update=function e(t,r){var n=Math.floor(t);if(this.first){this.first=false;this.lastIntegerZoom=n;this.lastIntegerZoomTime=0;this.lastZoom=t;this.lastFloorZoom=n;return true}if(this.lastFloorZoom>n){this.lastIntegerZoom=n+1;this.lastIntegerZoomTime=r}else if(this.lastFloorZoom<n){this.lastIntegerZoom=n;this.lastIntegerZoomTime=r}if(t!==this.lastZoom){this.lastZoom=t;this.lastFloorZoom=n;return true}return false};var so={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function lo(e){for(var t=0,r=e;t<r.length;t+=1){var n=r[t];if(vo(n.charCodeAt(0))){return true}}return false}function uo(e){for(var t=0,r=e;t<r.length;t+=1){var n=r[t];if(!fo(n.charCodeAt(0))){return false}}return true}function fo(e){if(so["Arabic"](e)){return false}if(so["Arabic Supplement"](e)){return false}if(so["Arabic Extended-A"](e)){return false}if(so["Arabic Presentation Forms-A"](e)){return false}if(so["Arabic Presentation Forms-B"](e)){return false}return true}function co(e){if(e<11904){return false}if(so["Bopomofo Extended"](e)){return true}if(so["Bopomofo"](e)){return true}if(so["CJK Compatibility Forms"](e)){return true}if(so["CJK Compatibility Ideographs"](e)){return true}if(so["CJK Compatibility"](e)){return true}if(so["CJK Radicals Supplement"](e)){return true}if(so["CJK Strokes"](e)){return true}if(so["CJK Symbols and Punctuation"](e)){return true}if(so["CJK Unified Ideographs Extension A"](e)){return true}if(so["CJK Unified Ideographs"](e)){return true}if(so["Enclosed CJK Letters and Months"](e)){return true}if(so["Halfwidth and Fullwidth Forms"](e)){return true}if(so["Hiragana"](e)){return true}if(so["Ideographic Description Characters"](e)){return true}if(so["Kangxi Radicals"](e)){return true}if(so["Katakana Phonetic Extensions"](e)){return true}if(so["Katakana"](e)){return true}if(so["Vertical Forms"](e)){return true}if(so["Yi Radicals"](e)){return true}if(so["Yi Syllables"](e)){return true}return false}function vo(e){if(e===746||e===747){return true}if(e<4352){return false}if(so["Bopomofo Extended"](e)){return true}if(so["Bopomofo"](e)){return true}if(so["CJK Compatibility Forms"](e)){if(!(e>=65097&&e<=65103)){return true}}if(so["CJK Compatibility Ideographs"](e)){return true}if(so["CJK Compatibility"](e)){return true}if(so["CJK Radicals Supplement"](e)){return true}if(so["CJK Strokes"](e)){return true}if(so["CJK Symbols and Punctuation"](e)){if(!(e>=12296&&e<=12305)&&!(e>=12308&&e<=12319)&&e!==12336){return true}}if(so["CJK Unified Ideographs Extension A"](e)){return true}if(so["CJK Unified Ideographs"](e)){return true}if(so["Enclosed CJK Letters and Months"](e)){return true}if(so["Hangul Compatibility Jamo"](e)){return true}if(so["Hangul Jamo Extended-A"](e)){return true}if(so["Hangul Jamo Extended-B"](e)){return true}if(so["Hangul Jamo"](e)){return true}if(so["Hangul Syllables"](e)){return true}if(so["Hiragana"](e)){return true}if(so["Ideographic Description Characters"](e)){return true}if(so["Kanbun"](e)){return true}if(so["Kangxi Radicals"](e)){return true}if(so["Katakana Phonetic Extensions"](e)){return true}if(so["Katakana"](e)){if(e!==12540){return true}}if(so["Halfwidth and Fullwidth Forms"](e)){if(e!==65288&&e!==65289&&e!==65293&&!(e>=65306&&e<=65310)&&e!==65339&&e!==65341&&e!==65343&&!(e>=65371&&e<=65503)&&e!==65507&&!(e>=65512&&e<=65519)){return true}}if(so["Small Form Variants"](e)){if(!(e>=65112&&e<=65118)&&!(e>=65123&&e<=65126)){return true}}if(so["Unified Canadian Aboriginal Syllabics"](e)){return true}if(so["Unified Canadian Aboriginal Syllabics Extended"](e)){return true}if(so["Vertical Forms"](e)){return true}if(so["Yijing Hexagram Symbols"](e)){return true}if(so["Yi Syllables"](e)){return true}if(so["Yi Radicals"](e)){return true}return false}function ho(e){if(so["Latin-1 Supplement"](e)){if(e===167||e===169||e===174||e===177||e===188||e===189||e===190||e===215||e===247){return true}}if(so["General Punctuation"](e)){if(e===8214||e===8224||e===8225||e===8240||e===8241||e===8251||e===8252||e===8258||e===8263||e===8264||e===8265||e===8273){return true}}if(so["Letterlike Symbols"](e)){return true}if(so["Number Forms"](e)){return true}if(so["Miscellaneous Technical"](e)){if(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||e===9003||e>=9085&&e<=9114||e>=9150&&e<=9165||e===9167||e>=9169&&e<=9179||e>=9186&&e<=9215){return true}}if(so["Control Pictures"](e)&&e!==9251){return true}if(so["Optical Character Recognition"](e)){return true}if(so["Enclosed Alphanumerics"](e)){return true}if(so["Geometric Shapes"](e)){return true}if(so["Miscellaneous Symbols"](e)){if(!(e>=9754&&e<=9759)){return true}}if(so["Miscellaneous Symbols and Arrows"](e)){if(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243){return true}}if(so["CJK Symbols and Punctuation"](e)){return true}if(so["Katakana"](e)){return true}if(so["Private Use Area"](e)){return true}if(so["CJK Compatibility Forms"](e)){return true}if(so["Small Form Variants"](e)){return true}if(so["Halfwidth and Fullwidth Forms"](e)){return true}if(e===8734||e===8756||e===8757||e>=9984&&e<=10087||e>=10102&&e<=10131||e===65532||e===65533){return true}return false}function po(e){return!(vo(e)||ho(e))}function go(e){return so["Arabic"](e)||so["Arabic Supplement"](e)||so["Arabic Extended-A"](e)||so["Arabic Presentation Forms-A"](e)||so["Arabic Presentation Forms-B"](e)}function yo(e){return e>=1424&&e<=2303||so["Arabic Presentation Forms-A"](e)||so["Arabic Presentation Forms-B"](e)}function mo(e,t){if(!t&&yo(e)){return false}if(e>=2304&&e<=3583||e>=3840&&e<=4255||so["Khmer"](e)){return false}return true}function xo(e){for(var t=0,r=e;t<r.length;t+=1){var n=r[t];if(yo(n.charCodeAt(0))){return true}}return false}function bo(e,t){for(var r=0,n=e;r<n.length;r+=1){var a=n[r];if(!mo(a.charCodeAt(0),t)){return false}}return true}var _o={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"};var wo=null;var To=_o.unavailable;var ko=null;var Ao=function(e){if(e&&typeof e==="string"&&e.indexOf("NetworkError")>-1){To=_o.error}if(wo){wo(e)}};function Mo(){So.fire(new ot("pluginStateChange",{pluginStatus:To,pluginURL:ko}))}var So=new lt;var Eo=function(){return To};var Lo=function(e){e({pluginStatus:To,pluginURL:ko});So.on("pluginStateChange",e);return e};var Co=function(e,t,r){if(r===void 0)r=false;if(To===_o.deferred||To===_o.loading||To===_o.loaded){throw new Error("setRTLTextPlugin cannot be called multiple times.")}ko=G.resolveURL(e);To=_o.deferred;wo=t;Mo();if(!r){Io()}};var Io=function(){if(To!==_o.deferred||!ko){throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified")}To=_o.loading;Mo();if(ko){Ye({url:ko},(function(e){if(e){Ao(e)}else{To=_o.loaded;Mo()}}))}};var Po={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function e(){return To===_o.loaded||Po.applyArabicShaping!=null},isLoading:function e(){return To===_o.loading},setState:function e(t){To=t.pluginStatus;ko=t.pluginURL},isParsed:function e(){return Po.applyArabicShaping!=null&&Po.processBidirectionalText!=null&&Po.processStyledBidirectionalText!=null},getPluginURL:function e(){return ko}};var Oo=function(){if(!Po.isLoading()&&!Po.isLoaded()&&Eo()==="deferred"){Io()}};var Do=function e(t,r){this.zoom=t;if(r){this.now=r.now;this.fadeDuration=r.fadeDuration;this.zoomHistory=r.zoomHistory;this.transition=r.transition}else{this.now=0;this.fadeDuration=0;this.zoomHistory=new oo;this.transition={}}};Do.prototype.isSupportedScript=function e(t){return bo(t,Po.isLoaded())};Do.prototype.crossFadingFactor=function e(){if(this.fadeDuration===0){return 1}else{return Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}};Do.prototype.getCrossfadeParameters=function e(){var t=this.zoom;var r=t-Math.floor(t);var n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*r}};var zo=function e(t,r){this.property=t;this.value=r;this.expression=ti(r===undefined?t.specification.default:r,t.specification)};zo.prototype.isDataDriven=function e(){return this.expression.kind==="source"||this.expression.kind==="composite"};zo.prototype.possiblyEvaluate=function e(t,r,n){return this.property.possiblyEvaluate(this,t,r,n)};var Ro=function e(t){this.property=t;this.value=new zo(t,undefined)};Ro.prototype.transitioned=function e(t,r){return new Bo(this.property,this.value,r,g({},t.transition,this.transition),t.now)};Ro.prototype.untransitioned=function e(){return new Bo(this.property,this.value,null,{},0)};var Fo=function e(t){this._properties=t;this._values=Object.create(t.defaultTransitionablePropertyValues)};Fo.prototype.getValue=function e(t){return M(this._values[t].value.value)};Fo.prototype.setValue=function e(t,r){if(!this._values.hasOwnProperty(t)){this._values[t]=new Ro(this._values[t].property)}this._values[t].value=new zo(this._values[t].property,r===null?undefined:M(r))};Fo.prototype.getTransition=function e(t){return M(this._values[t].transition)};Fo.prototype.setTransition=function e(t,r){if(!this._values.hasOwnProperty(t)){this._values[t]=new Ro(this._values[t].property)}this._values[t].transition=M(r)||undefined};Fo.prototype.serialize=function e(){var t={};for(var r=0,n=Object.keys(this._values);r<n.length;r+=1){var a=n[r];var i=this.getValue(a);if(i!==undefined){t[a]=i}var o=this.getTransition(a);if(o!==undefined){t[a+"-transition"]=o}}return t};Fo.prototype.transitioned=function e(t,r){var n=new No(this._properties);for(var a=0,i=Object.keys(this._values);a<i.length;a+=1){var o=i[a];n._values[o]=this._values[o].transitioned(t,r._values[o])}return n};Fo.prototype.untransitioned=function e(){var t=new No(this._properties);for(var r=0,n=Object.keys(this._values);r<n.length;r+=1){var a=n[r];t._values[a]=this._values[a].untransitioned()}return t};var Bo=function e(t,r,n,a,i){this.property=t;this.value=r;this.begin=i+a.delay||0;this.end=this.begin+a.duration||0;if(t.specification.transition&&(a.delay||a.duration)){this.prior=n}};Bo.prototype.possiblyEvaluate=function e(t,r,n){var a=t.now||0;var i=this.value.possiblyEvaluate(t,r,n);var o=this.prior;if(!o){return i}else if(a>this.end){this.prior=null;return i}else if(this.value.isDataDriven()){this.prior=null;return i}else if(a<this.begin){return o.possiblyEvaluate(t,r,n)}else{var s=(a-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,r,n),i,l(s))}};var No=function e(t){this._properties=t;this._values=Object.create(t.defaultTransitioningPropertyValues)};No.prototype.possiblyEvaluate=function e(t,r,n){var a=new Vo(this._properties);for(var i=0,o=Object.keys(this._values);i<o.length;i+=1){var s=o[i];a._values[s]=this._values[s].possiblyEvaluate(t,r,n)}return a};No.prototype.hasTransition=function e(){for(var t=0,r=Object.keys(this._values);t<r.length;t+=1){var n=r[t];if(this._values[n].prior){return true}}return false};var jo=function e(t){this._properties=t;this._values=Object.create(t.defaultPropertyValues)};jo.prototype.getValue=function e(t){return M(this._values[t].value)};jo.prototype.setValue=function e(t,r){this._values[t]=new zo(this._values[t].property,r===null?undefined:M(r))};jo.prototype.serialize=function e(){var t={};for(var r=0,n=Object.keys(this._values);r<n.length;r+=1){var a=n[r];var i=this.getValue(a);if(i!==undefined){t[a]=i}}return t};jo.prototype.possiblyEvaluate=function e(t,r,n){var a=new Vo(this._properties);for(var i=0,o=Object.keys(this._values);i<o.length;i+=1){var s=o[i];a._values[s]=this._values[s].possiblyEvaluate(t,r,n)}return a};var Uo=function e(t,r,n){this.property=t;this.value=r;this.parameters=n};Uo.prototype.isConstant=function e(){return this.value.kind==="constant"};Uo.prototype.constantOr=function e(t){if(this.value.kind==="constant"){return this.value.value}else{return t}};Uo.prototype.evaluate=function e(t,r,n,a){return this.property.evaluate(this.value,this.parameters,t,r,n,a)};var Vo=function e(t){this._properties=t;this._values=Object.create(t.defaultPossiblyEvaluatedValues)};Vo.prototype.get=function e(t){return this._values[t]};var Ho=function e(t){this.specification=t};Ho.prototype.possiblyEvaluate=function e(t,r){return t.expression.evaluate(r)};Ho.prototype.interpolate=function e(t,r,n){var a=An[this.specification.type];if(a){return a(t,r,n)}else{return t}};var qo=function e(t,r){this.specification=t;this.overrides=r};qo.prototype.possiblyEvaluate=function e(t,r,n,a){if(t.expression.kind==="constant"||t.expression.kind==="camera"){return new Uo(this,{kind:"constant",value:t.expression.evaluate(r,null,{},n,a)},r)}else{return new Uo(this,t.expression,r)}};qo.prototype.interpolate=function e(t,r,n){if(t.value.kind!=="constant"||r.value.kind!=="constant"){return t}if(t.value.value===undefined||r.value.value===undefined){return new Uo(this,{kind:"constant",value:undefined},t.parameters)}var a=An[this.specification.type];if(a){return new Uo(this,{kind:"constant",value:a(t.value.value,r.value.value,n)},t.parameters)}else{return t}};qo.prototype.evaluate=function e(t,r,n,a,i,o){if(t.kind==="constant"){return t.value}else{return t.evaluate(r,n,a,i,o)}};var Go=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.possiblyEvaluate=function e(t,r,n,a){if(t.value===undefined){return new Uo(this,{kind:"constant",value:undefined},r)}else if(t.expression.kind==="constant"){var i=t.expression.evaluate(r,null,{},n,a);var o=t.property.specification.type==="resolvedImage";var s=o&&typeof i!=="string"?i.name:i;var l=this._calculate(s,s,s,r);return new Uo(this,{kind:"constant",value:l},r)}else if(t.expression.kind==="camera"){var u=this._calculate(t.expression.evaluate({zoom:r.zoom-1}),t.expression.evaluate({zoom:r.zoom}),t.expression.evaluate({zoom:r.zoom+1}),r);return new Uo(this,{kind:"constant",value:u},r)}else{return new Uo(this,t.expression,r)}};t.prototype.evaluate=function e(t,r,n,a,i,o){if(t.kind==="source"){var s=t.evaluate(r,n,a,i,o);return this._calculate(s,s,s,r)}else if(t.kind==="composite"){return this._calculate(t.evaluate({zoom:Math.floor(r.zoom)-1},n,a),t.evaluate({zoom:Math.floor(r.zoom)},n,a),t.evaluate({zoom:Math.floor(r.zoom)+1},n,a),r)}else{return t.value}};t.prototype._calculate=function e(t,r,n,a){var i=a.zoom;return i>a.zoomHistory.lastIntegerZoom?{from:t,to:r}:{from:n,to:r}};t.prototype.interpolate=function e(t){return t};return t}(qo);var Zo=function e(t){this.specification=t};Zo.prototype.possiblyEvaluate=function e(t,r,n,a){if(t.value===undefined){return undefined}else if(t.expression.kind==="constant"){var i=t.expression.evaluate(r,null,{},n,a);return this._calculate(i,i,i,r)}else{return this._calculate(t.expression.evaluate(new Do(Math.floor(r.zoom-1),r)),t.expression.evaluate(new Do(Math.floor(r.zoom),r)),t.expression.evaluate(new Do(Math.floor(r.zoom+1),r)),r)}};Zo.prototype._calculate=function e(t,r,n,a){var i=a.zoom;return i>a.zoomHistory.lastIntegerZoom?{from:t,to:r}:{from:n,to:r}};Zo.prototype.interpolate=function e(t){return t};var Yo=function e(t){this.specification=t};Yo.prototype.possiblyEvaluate=function e(t,r,n,a){return!!t.expression.evaluate(r,null,{},n,a)};Yo.prototype.interpolate=function e(){return false};var Wo=function e(t){this.properties=t;this.defaultPropertyValues={};this.defaultTransitionablePropertyValues={};this.defaultTransitioningPropertyValues={};this.defaultPossiblyEvaluatedValues={};this.overridableProperties=[];for(var r in t){var n=t[r];if(n.specification.overridable){this.overridableProperties.push(r)}var a=this.defaultPropertyValues[r]=new zo(n,undefined);var i=this.defaultTransitionablePropertyValues[r]=new Ro(n);this.defaultTransitioningPropertyValues[r]=i.untransitioned();this.defaultPossiblyEvaluatedValues[r]=a.possiblyEvaluate({})}};eo("DataDrivenProperty",qo);eo("DataConstantProperty",Ho);eo("CrossFadedDataDrivenProperty",Go);eo("CrossFadedProperty",Zo);eo("ColorRampProperty",Yo);var Xo="-transition";var Jo=function(e){function t(t,r){e.call(this);this.id=t.id;this.type=t.type;this._featureFilter={filter:function(){return true},needGeometry:false};if(t.type==="custom"){return}t=t;this.metadata=t.metadata;this.minzoom=t.minzoom;this.maxzoom=t.maxzoom;if(t.type!=="background"){this.source=t.source;this.sourceLayer=t["source-layer"];this.filter=t.filter}if(r.layout){this._unevaluatedLayout=new jo(r.layout)}if(r.paint){this._transitionablePaint=new Fo(r.paint);for(var n in t.paint){this.setPaintProperty(n,t.paint[n],{validate:false})}for(var a in t.layout){this.setLayoutProperty(a,t.layout[a],{validate:false})}this._transitioningPaint=this._transitionablePaint.untransitioned();this.paint=new Vo(r.paint)}}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getCrossfadeParameters=function e(){return this._crossfadeParameters};t.prototype.getLayoutProperty=function e(t){if(t==="visibility"){return this.visibility}return this._unevaluatedLayout.getValue(t)};t.prototype.setLayoutProperty=function e(t,r,n){if(n===void 0)n={};if(r!==null&&r!==undefined){var a="layers."+this.id+".layout."+t;if(this._validate(Zi,a,t,r,n)){return}}if(t==="visibility"){this.visibility=r;return}this._unevaluatedLayout.setValue(t,r)};t.prototype.getPaintProperty=function e(t){if(T(t,Xo)){return this._transitionablePaint.getTransition(t.slice(0,-Xo.length))}else{return this._transitionablePaint.getValue(t)}};t.prototype.setPaintProperty=function e(t,r,n){if(n===void 0)n={};if(r!==null&&r!==undefined){var a="layers."+this.id+".paint."+t;if(this._validate(Gi,a,t,r,n)){return false}}if(T(t,Xo)){this._transitionablePaint.setTransition(t.slice(0,-Xo.length),r||undefined);return false}else{var i=this._transitionablePaint._values[t];var o=i.property.specification["property-type"]==="cross-faded-data-driven";var s=i.value.isDataDriven();var l=i.value;this._transitionablePaint.setValue(t,r);this._handleSpecialPaintPropertyUpdate(t);var u=this._transitionablePaint._values[t].value;var f=u.isDataDriven();return f||s||o||this._handleOverridablePaintPropertyUpdate(t,l,u)}};t.prototype._handleSpecialPaintPropertyUpdate=function e(t){};t.prototype._handleOverridablePaintPropertyUpdate=function e(t,r,n){return false};t.prototype.isHidden=function e(t){if(this.minzoom&&t<this.minzoom){return true}if(this.maxzoom&&t>=this.maxzoom){return true}return this.visibility==="none"};t.prototype.updateTransitions=function e(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)};t.prototype.hasTransition=function e(){return this._transitioningPaint.hasTransition()};t.prototype.recalculate=function e(t,r){if(t.getCrossfadeParameters){this._crossfadeParameters=t.getCrossfadeParameters()}if(this._unevaluatedLayout){this.layout=this._unevaluatedLayout.possiblyEvaluate(t,undefined,r)}this.paint=this._transitioningPaint.possiblyEvaluate(t,undefined,r)};t.prototype.serialize=function e(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};if(this.visibility){t.layout=t.layout||{};t.layout.visibility=this.visibility}return A(t,(function(e,t){return e!==undefined&&!(t==="layout"&&!Object.keys(e).length)&&!(t==="paint"&&!Object.keys(e).length)}))};t.prototype._validate=function e(t,r,n,a,i){if(i===void 0)i={};if(i&&i.validate===false){return false}return Yi(this,t.call(Hi,{key:r,layerType:this.type,objectKey:n,value:a,styleSpec:Yt,style:{glyphs:true,sprite:true}}))};t.prototype.is3D=function e(){return false};t.prototype.isTileClipped=function e(){return false};t.prototype.hasOffscreenPass=function e(){return false};t.prototype.resize=function e(){};t.prototype.isStateDependent=function e(){for(var t in this.paint._values){var r=this.paint.get(t);if(!(r instanceof Uo)||!za(r.property.specification)){continue}if((r.value.kind==="source"||r.value.kind==="composite")&&r.value.isStateDependent){return true}}return false};return t}(lt);var Ko={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};var $o=function e(t,r){this._structArray=t;this._pos1=r*this.size;this._pos2=this._pos1/2;this._pos4=this._pos1/4;this._pos8=this._pos1/8};var Qo=128;var es=5;var ts=function e(){this.isTransferred=false;this.capacity=-1;this.resize(0)};ts.serialize=function e(t,r){t._trim();if(r){t.isTransferred=true;r.push(t.arrayBuffer)}return{length:t.length,arrayBuffer:t.arrayBuffer}};ts.deserialize=function e(t){var r=Object.create(this.prototype);r.arrayBuffer=t.arrayBuffer;r.length=t.length;r.capacity=t.arrayBuffer.byteLength/r.bytesPerElement;r._refreshViews();return r};ts.prototype._trim=function e(){if(this.length!==this.capacity){this.capacity=this.length;this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement);this._refreshViews()}};ts.prototype.clear=function e(){this.length=0};ts.prototype.resize=function e(t){this.reserve(t);this.length=t};ts.prototype.reserve=function e(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(this.capacity*es),Qo);this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var r=this.uint8;this._refreshViews();if(r){this.uint8.set(r)}}};ts.prototype._refreshViews=function e(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function rs(e,t){if(t===void 0)t=1;var r=0;var n=0;var a=e.map((function(e){var a=ns(e.type);var i=r=as(r,Math.max(t,a));var o=e.components||1;n=Math.max(n,a);r+=a*o;return{name:e.name,type:e.type,components:o,offset:i}}));var i=as(r,Math.max(n,t));return{members:a,size:i,alignment:t}}function ns(e){return Ko[e].BYTES_PER_ELEMENT}function as(e,t){return Math.ceil(e/t)*t}var is=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t,r){var n=this.length;this.resize(n+1);return this.emplace(n,t,r)};t.prototype.emplace=function e(t,r,n){var a=t*2;this.int16[a+0]=r;this.int16[a+1]=n;return t};return t}(ts);is.prototype.bytesPerElement=4;eo("StructArrayLayout2i4",is);var os=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t,r,n,a){var i=this.length;this.resize(i+1);return this.emplace(i,t,r,n,a)};t.prototype.emplace=function e(t,r,n,a,i){var o=t*4;this.int16[o+0]=r;this.int16[o+1]=n;this.int16[o+2]=a;this.int16[o+3]=i;return t};return t}(ts);os.prototype.bytesPerElement=8;eo("StructArrayLayout4i8",os);var ss=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t,r,n,a,i,o){var s=this.length;this.resize(s+1);return this.emplace(s,t,r,n,a,i,o)};t.prototype.emplace=function e(t,r,n,a,i,o,s){var l=t*6;this.int16[l+0]=r;this.int16[l+1]=n;this.int16[l+2]=a;this.int16[l+3]=i;this.int16[l+4]=o;this.int16[l+5]=s;return t};return t}(ts);ss.prototype.bytesPerElement=12;eo("StructArrayLayout2i4i12",ss);var ls=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t,r,n,a,i,o){var s=this.length;this.resize(s+1);return this.emplace(s,t,r,n,a,i,o)};t.prototype.emplace=function e(t,r,n,a,i,o,s){var l=t*4;var u=t*8;this.int16[l+0]=r;this.int16[l+1]=n;this.uint8[u+4]=a;this.uint8[u+5]=i;this.uint8[u+6]=o;this.uint8[u+7]=s;return t};return t}(ts);ls.prototype.bytesPerElement=8;eo("StructArrayLayout2i4ub8",ls);var us=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t,r,n,a,i,o,s,l,u,f){var c=this.length;this.resize(c+1);return this.emplace(c,t,r,n,a,i,o,s,l,u,f)};t.prototype.emplace=function e(t,r,n,a,i,o,s,l,u,f,c){var v=t*9;var h=t*18;this.uint16[v+0]=r;this.uint16[v+1]=n;this.uint16[v+2]=a;this.uint16[v+3]=i;this.uint16[v+4]=o;this.uint16[v+5]=s;this.uint16[v+6]=l;this.uint16[v+7]=u;this.uint8[h+16]=f;this.uint8[h+17]=c;return t};return t}(ts);us.prototype.bytesPerElement=18;eo("StructArrayLayout8ui2ub18",us);var fs=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t,r,n,a,i,o,s,l,u,f,c,v){var h=this.length;this.resize(h+1);return this.emplace(h,t,r,n,a,i,o,s,l,u,f,c,v)};t.prototype.emplace=function e(t,r,n,a,i,o,s,l,u,f,c,v,h){var p=t*12;this.int16[p+0]=r;this.int16[p+1]=n;this.int16[p+2]=a;this.int16[p+3]=i;this.uint16[p+4]=o;this.uint16[p+5]=s;this.uint16[p+6]=l;this.uint16[p+7]=u;this.int16[p+8]=f;this.int16[p+9]=c;this.int16[p+10]=v;this.int16[p+11]=h;return t};return t}(ts);fs.prototype.bytesPerElement=24;eo("StructArrayLayout4i4ui4i24",fs);var cs=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t,r,n){var a=this.length;this.resize(a+1);return this.emplace(a,t,r,n)};t.prototype.emplace=function e(t,r,n,a){var i=t*3;this.float32[i+0]=r;this.float32[i+1]=n;this.float32[i+2]=a;return t};return t}(ts);cs.prototype.bytesPerElement=12;eo("StructArrayLayout3f12",cs);var vs=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t){var r=this.length;this.resize(r+1);return this.emplace(r,t)};t.prototype.emplace=function e(t,r){var n=t*1;this.uint32[n+0]=r;return t};return t}(ts);vs.prototype.bytesPerElement=4;eo("StructArrayLayout1ul4",vs);var hs=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t,r,n,a,i,o,s,l,u){var f=this.length;this.resize(f+1);return this.emplace(f,t,r,n,a,i,o,s,l,u)};t.prototype.emplace=function e(t,r,n,a,i,o,s,l,u,f){var c=t*10;var v=t*5;this.int16[c+0]=r;this.int16[c+1]=n;this.int16[c+2]=a;this.int16[c+3]=i;this.int16[c+4]=o;this.int16[c+5]=s;this.uint32[v+3]=l;this.uint16[c+8]=u;this.uint16[c+9]=f;return t};return t}(ts);hs.prototype.bytesPerElement=20;eo("StructArrayLayout6i1ul2ui20",hs);var ps=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t,r,n,a,i,o){var s=this.length;this.resize(s+1);return this.emplace(s,t,r,n,a,i,o)};t.prototype.emplace=function e(t,r,n,a,i,o,s){var l=t*6;this.int16[l+0]=r;this.int16[l+1]=n;this.int16[l+2]=a;this.int16[l+3]=i;this.int16[l+4]=o;this.int16[l+5]=s;return t};return t}(ts);ps.prototype.bytesPerElement=12;eo("StructArrayLayout2i2i2i12",ps);var ds=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t,r,n,a,i){var o=this.length;this.resize(o+1);return this.emplace(o,t,r,n,a,i)};t.prototype.emplace=function e(t,r,n,a,i,o){var s=t*4;var l=t*8;this.float32[s+0]=r;this.float32[s+1]=n;this.float32[s+2]=a;this.int16[l+6]=i;this.int16[l+7]=o;return t};return t}(ts);ds.prototype.bytesPerElement=16;eo("StructArrayLayout2f1f2i16",ds);var gs=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t,r,n,a){var i=this.length;this.resize(i+1);return this.emplace(i,t,r,n,a)};t.prototype.emplace=function e(t,r,n,a,i){var o=t*12;var s=t*3;this.uint8[o+0]=r;this.uint8[o+1]=n;this.float32[s+1]=a;this.float32[s+2]=i;return t};return t}(ts);gs.prototype.bytesPerElement=12;eo("StructArrayLayout2ub2f12",gs);var ys=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t,r,n){var a=this.length;this.resize(a+1);return this.emplace(a,t,r,n)};t.prototype.emplace=function e(t,r,n,a){var i=t*3;this.uint16[i+0]=r;this.uint16[i+1]=n;this.uint16[i+2]=a;return t};return t}(ts);ys.prototype.bytesPerElement=6;eo("StructArrayLayout3ui6",ys);var ms=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t,r,n,a,i,o,s,l,u,f,c,v,h,p,d,g,y){var m=this.length;this.resize(m+1);return this.emplace(m,t,r,n,a,i,o,s,l,u,f,c,v,h,p,d,g,y)};t.prototype.emplace=function e(t,r,n,a,i,o,s,l,u,f,c,v,h,p,d,g,y,m){var x=t*24;var b=t*12;var _=t*48;this.int16[x+0]=r;this.int16[x+1]=n;this.uint16[x+2]=a;this.uint16[x+3]=i;this.uint32[b+2]=o;this.uint32[b+3]=s;this.uint32[b+4]=l;this.uint16[x+10]=u;this.uint16[x+11]=f;this.uint16[x+12]=c;this.float32[b+7]=v;this.float32[b+8]=h;this.uint8[_+36]=p;this.uint8[_+37]=d;this.uint8[_+38]=g;this.uint32[b+10]=y;this.int16[x+22]=m;return t};return t}(ts);ms.prototype.bytesPerElement=48;eo("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ms);var xs=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t,r,n,a,i,o,s,l,u,f,c,v,h,p,d,g,y,m,x,b,_,w,T,k,A,M,S,E){var L=this.length;this.resize(L+1);return this.emplace(L,t,r,n,a,i,o,s,l,u,f,c,v,h,p,d,g,y,m,x,b,_,w,T,k,A,M,S,E)};t.prototype.emplace=function e(t,r,n,a,i,o,s,l,u,f,c,v,h,p,d,g,y,m,x,b,_,w,T,k,A,M,S,E,L){var C=t*34;var I=t*17;this.int16[C+0]=r;this.int16[C+1]=n;this.int16[C+2]=a;this.int16[C+3]=i;this.int16[C+4]=o;this.int16[C+5]=s;this.int16[C+6]=l;this.int16[C+7]=u;this.uint16[C+8]=f;this.uint16[C+9]=c;this.uint16[C+10]=v;this.uint16[C+11]=h;this.uint16[C+12]=p;this.uint16[C+13]=d;this.uint16[C+14]=g;this.uint16[C+15]=y;this.uint16[C+16]=m;this.uint16[C+17]=x;this.uint16[C+18]=b;this.uint16[C+19]=_;this.uint16[C+20]=w;this.uint16[C+21]=T;this.uint16[C+22]=k;this.uint32[I+12]=A;this.float32[I+13]=M;this.float32[I+14]=S;this.float32[I+15]=E;this.float32[I+16]=L;return t};return t}(ts);xs.prototype.bytesPerElement=68;eo("StructArrayLayout8i15ui1ul4f68",xs);var bs=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t){var r=this.length;this.resize(r+1);return this.emplace(r,t)};t.prototype.emplace=function e(t,r){var n=t*1;this.float32[n+0]=r;return t};return t}(ts);bs.prototype.bytesPerElement=4;eo("StructArrayLayout1f4",bs);var _s=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t,r,n){var a=this.length;this.resize(a+1);return this.emplace(a,t,r,n)};t.prototype.emplace=function e(t,r,n,a){var i=t*3;this.int16[i+0]=r;this.int16[i+1]=n;this.int16[i+2]=a;return t};return t}(ts);_s.prototype.bytesPerElement=6;eo("StructArrayLayout3i6",_s);var ws=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t,r,n){var a=this.length;this.resize(a+1);return this.emplace(a,t,r,n)};t.prototype.emplace=function e(t,r,n,a){var i=t*2;var o=t*4;this.uint32[i+0]=r;this.uint16[o+2]=n;this.uint16[o+3]=a;return t};return t}(ts);ws.prototype.bytesPerElement=8;eo("StructArrayLayout1ul2ui8",ws);var Ts=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t,r){var n=this.length;this.resize(n+1);return this.emplace(n,t,r)};t.prototype.emplace=function e(t,r,n){var a=t*2;this.uint16[a+0]=r;this.uint16[a+1]=n;return t};return t}(ts);Ts.prototype.bytesPerElement=4;eo("StructArrayLayout2ui4",Ts);var ks=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t){var r=this.length;this.resize(r+1);return this.emplace(r,t)};t.prototype.emplace=function e(t,r){var n=t*1;this.uint16[n+0]=r;return t};return t}(ts);ks.prototype.bytesPerElement=2;eo("StructArrayLayout1ui2",ks);var As=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t,r){var n=this.length;this.resize(n+1);return this.emplace(n,t,r)};t.prototype.emplace=function e(t,r,n){var a=t*2;this.float32[a+0]=r;this.float32[a+1]=n;return t};return t}(ts);As.prototype.bytesPerElement=8;eo("StructArrayLayout2f8",As);var Ms=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._refreshViews=function e(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)};t.prototype.emplaceBack=function e(t,r,n,a){var i=this.length;this.resize(i+1);return this.emplace(i,t,r,n,a)};t.prototype.emplace=function e(t,r,n,a,i){var o=t*4;this.float32[o+0]=r;this.float32[o+1]=n;this.float32[o+2]=a;this.float32[o+3]=i;return t};return t}(ts);Ms.prototype.bytesPerElement=16;eo("StructArrayLayout4f16",Ms);var Ss=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;var r={anchorPointX:{configurable:true},anchorPointY:{configurable:true},x1:{configurable:true},y1:{configurable:true},x2:{configurable:true},y2:{configurable:true},featureIndex:{configurable:true},sourceLayerIndex:{configurable:true},bucketIndex:{configurable:true},anchorPoint:{configurable:true}};r.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]};r.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]};r.x1.get=function(){return this._structArray.int16[this._pos2+2]};r.y1.get=function(){return this._structArray.int16[this._pos2+3]};r.x2.get=function(){return this._structArray.int16[this._pos2+4]};r.y2.get=function(){return this._structArray.int16[this._pos2+5]};r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]};r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]};r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]};r.anchorPoint.get=function(){return new i(this.anchorPointX,this.anchorPointY)};Object.defineProperties(t.prototype,r);return t}($o);Ss.prototype.size=20;var Es=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.get=function e(t){return new Ss(this,t)};return t}(hs);eo("CollisionBoxArray",Es);var Ls=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;var r={anchorX:{configurable:true},anchorY:{configurable:true},glyphStartIndex:{configurable:true},numGlyphs:{configurable:true},vertexStartIndex:{configurable:true},lineStartIndex:{configurable:true},lineLength:{configurable:true},segment:{configurable:true},lowerSize:{configurable:true},upperSize:{configurable:true},lineOffsetX:{configurable:true},lineOffsetY:{configurable:true},writingMode:{configurable:true},placedOrientation:{configurable:true},hidden:{configurable:true},crossTileID:{configurable:true},associatedIconIndex:{configurable:true}};r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]};r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]};r.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]};r.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]};r.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]};r.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]};r.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]};r.segment.get=function(){return this._structArray.uint16[this._pos2+10]};r.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]};r.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]};r.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]};r.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]};r.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]};r.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]};r.placedOrientation.set=function(e){this._structArray.uint8[this._pos1+37]=e};r.hidden.get=function(){return this._structArray.uint8[this._pos1+38]};r.hidden.set=function(e){this._structArray.uint8[this._pos1+38]=e};r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]};r.crossTileID.set=function(e){this._structArray.uint32[this._pos4+10]=e};r.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]};Object.defineProperties(t.prototype,r);return t}($o);Ls.prototype.size=48;var Cs=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.get=function e(t){return new Ls(this,t)};return t}(ms);eo("PlacedSymbolArray",Cs);var Is=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;var r={anchorX:{configurable:true},anchorY:{configurable:true},rightJustifiedTextSymbolIndex:{configurable:true},centerJustifiedTextSymbolIndex:{configurable:true},leftJustifiedTextSymbolIndex:{configurable:true},verticalPlacedTextSymbolIndex:{configurable:true},placedIconSymbolIndex:{configurable:true},verticalPlacedIconSymbolIndex:{configurable:true},key:{configurable:true},textBoxStartIndex:{configurable:true},textBoxEndIndex:{configurable:true},verticalTextBoxStartIndex:{configurable:true},verticalTextBoxEndIndex:{configurable:true},iconBoxStartIndex:{configurable:true},iconBoxEndIndex:{configurable:true},verticalIconBoxStartIndex:{configurable:true},verticalIconBoxEndIndex:{configurable:true},featureIndex:{configurable:true},numHorizontalGlyphVertices:{configurable:true},numVerticalGlyphVertices:{configurable:true},numIconVertices:{configurable:true},numVerticalIconVertices:{configurable:true},useRuntimeCollisionCircles:{configurable:true},crossTileID:{configurable:true},textBoxScale:{configurable:true},textOffset0:{configurable:true},textOffset1:{configurable:true},collisionCircleDiameter:{configurable:true}};r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]};r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]};r.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]};r.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]};r.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]};r.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]};r.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]};r.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]};r.key.get=function(){return this._structArray.uint16[this._pos2+8]};r.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]};r.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]};r.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]};r.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]};r.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]};r.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]};r.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]};r.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]};r.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]};r.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]};r.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]};r.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]};r.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]};r.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]};r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]};r.crossTileID.set=function(e){this._structArray.uint32[this._pos4+12]=e};r.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]};r.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]};r.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]};r.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]};Object.defineProperties(t.prototype,r);return t}($o);Is.prototype.size=68;var Ps=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.get=function e(t){return new Is(this,t)};return t}(xs);eo("SymbolInstanceArray",Ps);var Os=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getoffsetX=function e(t){return this.float32[t*1+0]};return t}(bs);eo("GlyphOffsetArray",Os);var Ds=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getx=function e(t){return this.int16[t*3+0]};t.prototype.gety=function e(t){return this.int16[t*3+1]};t.prototype.gettileUnitDistanceFromAnchor=function e(t){return this.int16[t*3+2]};return t}(_s);eo("SymbolLineVertexArray",Ds);var zs=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;var r={featureIndex:{configurable:true},sourceLayerIndex:{configurable:true},bucketIndex:{configurable:true}};r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]};r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]};r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]};Object.defineProperties(t.prototype,r);return t}($o);zs.prototype.size=8;var Rs=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.get=function e(t){return new zs(this,t)};return t}(ws);eo("FeatureIndexArray",Rs);var Fs=rs([{name:"a_pos",components:2,type:"Int16"}],4);var Bs=Fs.members;var Ns=function e(t){if(t===void 0)t=[];this.segments=t};Ns.prototype.prepareSegment=function e(t,r,n,a){var i=this.segments[this.segments.length-1];if(t>Ns.MAX_VERTEX_ARRAY_LENGTH){L("Max vertices per segment is "+Ns.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t)}if(!i||i.vertexLength+t>Ns.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==a){i={vertexOffset:r.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0};if(a!==undefined){i.sortKey=a}this.segments.push(i)}return i};Ns.prototype.get=function e(){return this.segments};Ns.prototype.destroy=function e(){for(var t=0,r=this.segments;t<r.length;t+=1){var n=r[t];for(var a in n.vaos){n.vaos[a].destroy()}}};Ns.simpleSegment=function e(t,r,n,a){return new Ns([{vertexOffset:t,primitiveOffset:r,vertexLength:n,primitiveLength:a,vaos:{},sortKey:0}])};Ns.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1;eo("SegmentVector",Ns);function js(e,t){e=c(Math.floor(e),0,255);t=c(Math.floor(t),0,255);return 256*e+t}var Us=rs([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]);var Vs=t((function(e){function t(e,t){var r,n,a,i,o,s,l,u;r=e.length&3;n=e.length-r;a=t;o=3432918353;s=461845907;u=0;while(u<n){l=e.charCodeAt(u)&255|(e.charCodeAt(++u)&255)<<8|(e.charCodeAt(++u)&255)<<16|(e.charCodeAt(++u)&255)<<24;++u;l=(l&65535)*o+(((l>>>16)*o&65535)<<16)&4294967295;l=l<<15|l>>>17;l=(l&65535)*s+(((l>>>16)*s&65535)<<16)&4294967295;a^=l;a=a<<13|a>>>19;i=(a&65535)*5+(((a>>>16)*5&65535)<<16)&4294967295;a=(i&65535)+27492+(((i>>>16)+58964&65535)<<16)}l=0;switch(r){case 3:l^=(e.charCodeAt(u+2)&255)<<16;case 2:l^=(e.charCodeAt(u+1)&255)<<8;case 1:l^=e.charCodeAt(u)&255;l=(l&65535)*o+(((l>>>16)*o&65535)<<16)&4294967295;l=l<<15|l>>>17;l=(l&65535)*s+(((l>>>16)*s&65535)<<16)&4294967295;a^=l}a^=e.length;a^=a>>>16;a=(a&65535)*2246822507+(((a>>>16)*2246822507&65535)<<16)&4294967295;a^=a>>>13;a=(a&65535)*3266489909+(((a>>>16)*3266489909&65535)<<16)&4294967295;a^=a>>>16;return a>>>0}{e.exports=t}}));var Hs=t((function(e){function t(e,t){var r=e.length,n=t^r,a=0,i;while(r>=4){i=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24;i=(i&65535)*1540483477+(((i>>>16)*1540483477&65535)<<16);i^=i>>>24;i=(i&65535)*1540483477+(((i>>>16)*1540483477&65535)<<16);n=(n&65535)*1540483477+(((n>>>16)*1540483477&65535)<<16)^i;r-=4;++a}switch(r){case 3:n^=(e.charCodeAt(a+2)&255)<<16;case 2:n^=(e.charCodeAt(a+1)&255)<<8;case 1:n^=e.charCodeAt(a)&255;n=(n&65535)*1540483477+(((n>>>16)*1540483477&65535)<<16)}n^=n>>>13;n=(n&65535)*1540483477+(((n>>>16)*1540483477&65535)<<16);n^=n>>>15;return n>>>0}{e.exports=t}}));var qs=Vs;var Gs=Vs;var Zs=Hs;qs.murmur3=Gs;qs.murmur2=Zs;var Ys=function e(){this.ids=[];this.positions=[];this.indexed=false};Ys.prototype.add=function e(t,r,n,a){this.ids.push(Xs(t));this.positions.push(r,n,a)};Ys.prototype.getPositions=function e(t){var r=Xs(t);var n=0;var a=this.ids.length-1;while(n<a){var i=n+a>>1;if(this.ids[i]>=r){a=i}else{n=i+1}}var o=[];while(this.ids[n]===r){var s=this.positions[3*n];var l=this.positions[3*n+1];var u=this.positions[3*n+2];o.push({index:s,start:l,end:u});n++}return o};Ys.serialize=function e(t,r){var n=new Float64Array(t.ids);var a=new Uint32Array(t.positions);Js(n,a,0,n.length-1);if(r){r.push(n.buffer,a.buffer)}return{ids:n,positions:a}};Ys.deserialize=function e(t){var r=new Ys;r.ids=t.ids;r.positions=t.positions;r.indexed=true;return r};var Ws=Math.pow(2,53)-1;function Xs(e){var t=+e;if(!isNaN(t)&&t<=Ws){return t}return qs(String(e))}function Js(e,t,r,n){while(r<n){var a=e[r+n>>1];var i=r-1;var o=n+1;while(true){do{i++}while(e[i]<a);do{o--}while(e[o]>a);if(i>=o){break}Ks(e,i,o);Ks(t,3*i,3*o);Ks(t,3*i+1,3*o+1);Ks(t,3*i+2,3*o+2)}if(o-r<n-o){Js(e,t,r,o);r=o+1}else{Js(e,t,o+1,n);n=o}}}function Ks(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}eo("FeaturePositionMap",Ys);var $s=function e(t,r){this.gl=t.gl;this.location=r};var Qs=function(e){function t(t,r){e.call(this,t,r);this.current=0}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.set=function e(t){if(this.current!==t){this.current=t;this.gl.uniform1i(this.location,t)}};return t}($s);var el=function(e){function t(t,r){e.call(this,t,r);this.current=0}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.set=function e(t){if(this.current!==t){this.current=t;this.gl.uniform1f(this.location,t)}};return t}($s);var tl=function(e){function t(t,r){e.call(this,t,r);this.current=[0,0]}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.set=function e(t){if(t[0]!==this.current[0]||t[1]!==this.current[1]){this.current=t;this.gl.uniform2f(this.location,t[0],t[1])}};return t}($s);var rl=function(e){function t(t,r){e.call(this,t,r);this.current=[0,0,0]}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.set=function e(t){if(t[0]!==this.current[0]||t[1]!==this.current[1]||t[2]!==this.current[2]){this.current=t;this.gl.uniform3f(this.location,t[0],t[1],t[2])}};return t}($s);var nl=function(e){function t(t,r){e.call(this,t,r);this.current=[0,0,0,0]}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.set=function e(t){if(t[0]!==this.current[0]||t[1]!==this.current[1]||t[2]!==this.current[2]||t[3]!==this.current[3]){this.current=t;this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3])}};return t}($s);var al=function(e){function t(t,r){e.call(this,t,r);this.current=br.transparent}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.set=function e(t){if(t.r!==this.current.r||t.g!==this.current.g||t.b!==this.current.b||t.a!==this.current.a){this.current=t;this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a)}};return t}($s);var il=new Float32Array(16);var ol=function(e){function t(t,r){e.call(this,t,r);this.current=il}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.set=function e(t){if(t[12]!==this.current[12]||t[0]!==this.current[0]){this.current=t;this.gl.uniformMatrix4fv(this.location,false,t);return}for(var r=1;r<16;r++){if(t[r]!==this.current[r]){this.current=t;this.gl.uniformMatrix4fv(this.location,false,t);break}}};return t}($s);function sl(e){return[js(255*e.r,255*e.g),js(255*e.b,255*e.a)]}var ll=function e(t,r,n){this.value=t;this.uniformNames=r.map((function(e){return"u_"+e}));this.type=n};ll.prototype.setUniform=function e(t,r,n){t.set(n.constantOr(this.value))};ll.prototype.getBinding=function e(t,r,n){return this.type==="color"?new al(t,r):new el(t,r)};var ul=function e(t,r){this.uniformNames=r.map((function(e){return"u_"+e}));this.patternFrom=null;this.patternTo=null;this.pixelRatioFrom=1;this.pixelRatioTo=1};ul.prototype.setConstantPatternPositions=function e(t,r){this.pixelRatioFrom=r.pixelRatio;this.pixelRatioTo=t.pixelRatio;this.patternFrom=r.tlbr;this.patternTo=t.tlbr};ul.prototype.setUniform=function e(t,r,n,a){var i=a==="u_pattern_to"?this.patternTo:a==="u_pattern_from"?this.patternFrom:a==="u_pixel_ratio_to"?this.pixelRatioTo:a==="u_pixel_ratio_from"?this.pixelRatioFrom:null;if(i){t.set(i)}};ul.prototype.getBinding=function e(t,r,n){return n.substr(0,9)==="u_pattern"?new nl(t,r):new el(t,r)};var fl=function e(t,r,n,a){this.expression=t;this.type=n;this.maxValue=0;this.paintVertexAttributes=r.map((function(e){return{name:"a_"+e,type:"Float32",components:n==="color"?2:1,offset:0}}));this.paintVertexArray=new a};fl.prototype.populatePaintArray=function e(t,r,n,a,i){var o=this.paintVertexArray.length;var s=this.expression.evaluate(new Do(0),r,{},a,[],i);this.paintVertexArray.resize(t);this._setPaintValue(o,t,s)};fl.prototype.updatePaintArray=function e(t,r,n,a){var i=this.expression.evaluate({zoom:0},n,a);this._setPaintValue(t,r,i)};fl.prototype._setPaintValue=function e(t,r,n){if(this.type==="color"){var a=sl(n);for(var i=t;i<r;i++){this.paintVertexArray.emplace(i,a[0],a[1])}}else{for(var o=t;o<r;o++){this.paintVertexArray.emplace(o,n)}this.maxValue=Math.max(this.maxValue,Math.abs(n))}};fl.prototype.upload=function e(t){if(this.paintVertexArray&&this.paintVertexArray.arrayBuffer){if(this.paintVertexBuffer&&this.paintVertexBuffer.buffer){this.paintVertexBuffer.updateData(this.paintVertexArray)}else{this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent)}}};fl.prototype.destroy=function e(){if(this.paintVertexBuffer){this.paintVertexBuffer.destroy()}};var cl=function e(t,r,n,a,i,o){this.expression=t;this.uniformNames=r.map((function(e){return"u_"+e+"_t"}));this.type=n;this.useIntegerZoom=a;this.zoom=i;this.maxValue=0;this.paintVertexAttributes=r.map((function(e){return{name:"a_"+e,type:"Float32",components:n==="color"?4:2,offset:0}}));this.paintVertexArray=new o};cl.prototype.populatePaintArray=function e(t,r,n,a,i){var o=this.expression.evaluate(new Do(this.zoom),r,{},a,[],i);var s=this.expression.evaluate(new Do(this.zoom+1),r,{},a,[],i);var l=this.paintVertexArray.length;this.paintVertexArray.resize(t);this._setPaintValue(l,t,o,s)};cl.prototype.updatePaintArray=function e(t,r,n,a){var i=this.expression.evaluate({zoom:this.zoom},n,a);var o=this.expression.evaluate({zoom:this.zoom+1},n,a);this._setPaintValue(t,r,i,o)};cl.prototype._setPaintValue=function e(t,r,n,a){if(this.type==="color"){var i=sl(n);var o=sl(a);for(var s=t;s<r;s++){this.paintVertexArray.emplace(s,i[0],i[1],o[0],o[1])}}else{for(var l=t;l<r;l++){this.paintVertexArray.emplace(l,n,a)}this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(a))}};cl.prototype.upload=function e(t){if(this.paintVertexArray&&this.paintVertexArray.arrayBuffer){if(this.paintVertexBuffer&&this.paintVertexBuffer.buffer){this.paintVertexBuffer.updateData(this.paintVertexArray)}else{this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent)}}};cl.prototype.destroy=function e(){if(this.paintVertexBuffer){this.paintVertexBuffer.destroy()}};cl.prototype.setUniform=function e(t,r){var n=this.useIntegerZoom?Math.floor(r.zoom):r.zoom;var a=c(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(a)};cl.prototype.getBinding=function e(t,r,n){return new el(t,r)};var vl=function e(t,r,n,a,i,o){this.expression=t;this.type=r;this.useIntegerZoom=n;this.zoom=a;this.layerId=o;this.zoomInPaintVertexArray=new i;this.zoomOutPaintVertexArray=new i};vl.prototype.populatePaintArray=function e(t,r,n){var a=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t);this.zoomOutPaintVertexArray.resize(t);this._setPaintValues(a,t,r.patterns&&r.patterns[this.layerId],n)};vl.prototype.updatePaintArray=function e(t,r,n,a,i){this._setPaintValues(t,r,n.patterns&&n.patterns[this.layerId],i)};vl.prototype._setPaintValues=function e(t,r,n,a){if(!a||!n){return}var i=n.min;var o=n.mid;var s=n.max;var l=a[i];var u=a[o];var f=a[s];if(!l||!u||!f){return}for(var c=t;c<r;c++){this.zoomInPaintVertexArray.emplace(c,u.tl[0],u.tl[1],u.br[0],u.br[1],l.tl[0],l.tl[1],l.br[0],l.br[1],u.pixelRatio,l.pixelRatio);this.zoomOutPaintVertexArray.emplace(c,u.tl[0],u.tl[1],u.br[0],u.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1],u.pixelRatio,f.pixelRatio)}};vl.prototype.upload=function e(t){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Us.members,this.expression.isStateDependent);this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Us.members,this.expression.isStateDependent)}};vl.prototype.destroy=function e(){if(this.zoomOutPaintVertexBuffer){this.zoomOutPaintVertexBuffer.destroy()}if(this.zoomInPaintVertexBuffer){this.zoomInPaintVertexBuffer.destroy()}};var hl=function e(t,r,n,a){this.binders={};this.layoutAttributes=a;this._buffers=[];var i=[];for(var o in t.paint._values){if(!n(o)){continue}var s=t.paint.get(o);if(!(s instanceof Uo)||!za(s.property.specification)){continue}var l=dl(o,t.type);var u=s.value;var f=s.property.specification.type;var c=s.property.useIntegerZoom;var v=s.property.specification["property-type"];var h=v==="cross-faded"||v==="cross-faded-data-driven";if(u.kind==="constant"){this.binders[o]=h?new ul(u.value,l):new ll(u.value,l,f);i.push("/u_"+o)}else if(u.kind==="source"||h){var p=yl(o,f,"source");this.binders[o]=h?new vl(u,f,c,r,p,t.id):new fl(u,l,f,p);i.push("/a_"+o)}else{var d=yl(o,f,"composite");this.binders[o]=new cl(u,l,f,c,r,d);i.push("/z_"+o)}}this.cacheKey=i.sort().join("")};hl.prototype.getMaxValue=function e(t){var r=this.binders[t];return r instanceof fl||r instanceof cl?r.maxValue:0};hl.prototype.populatePaintArrays=function e(t,r,n,a,i){for(var o in this.binders){var s=this.binders[o];if(s instanceof fl||s instanceof cl||s instanceof vl){s.populatePaintArray(t,r,n,a,i)}}};hl.prototype.setConstantPatternPositions=function e(t,r){for(var n in this.binders){var a=this.binders[n];if(a instanceof ul){a.setConstantPatternPositions(t,r)}}};hl.prototype.updatePaintArrays=function e(t,r,n,a,i){var o=false;for(var s in t){var l=r.getPositions(s);for(var u=0,f=l;u<f.length;u+=1){var c=f[u];var v=n.feature(c.index);for(var h in this.binders){var p=this.binders[h];if((p instanceof fl||p instanceof cl||p instanceof vl)&&p.expression.isStateDependent===true){var d=a.paint.get(h);p.expression=d.value;p.updatePaintArray(c.start,c.end,v,t[s],i);o=true}}}}return o};hl.prototype.defines=function e(){var t=[];for(var r in this.binders){var n=this.binders[r];if(n instanceof ll||n instanceof ul){t.push.apply(t,n.uniformNames.map((function(e){return"#define HAS_UNIFORM_"+e})))}}return t};hl.prototype.getPaintVertexBuffers=function e(){return this._buffers};hl.prototype.getUniforms=function e(t,r){var n=[];for(var a in this.binders){var i=this.binders[a];if(i instanceof ll||i instanceof ul||i instanceof cl){for(var o=0,s=i.uniformNames;o<s.length;o+=1){var l=s[o];if(r[l]){var u=i.getBinding(t,r[l],l);n.push({name:l,property:a,binding:u})}}}}return n};hl.prototype.setUniforms=function e(t,r,n,a){for(var i=0,o=r;i<o.length;i+=1){var s=o[i];var l=s.name;var u=s.property;var f=s.binding;this.binders[u].setUniform(f,a,n.get(u),l)}};hl.prototype.updatePaintBuffers=function e(t){this._buffers=[];for(var r in this.binders){var n=this.binders[r];if(t&&n instanceof vl){var a=t.fromScale===2?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;if(a){this._buffers.push(a)}}else if((n instanceof fl||n instanceof cl)&&n.paintVertexBuffer){this._buffers.push(n.paintVertexBuffer)}}};hl.prototype.upload=function e(t){for(var r in this.binders){var n=this.binders[r];if(n instanceof fl||n instanceof cl||n instanceof vl){n.upload(t)}}this.updatePaintBuffers()};hl.prototype.destroy=function e(){for(var t in this.binders){var r=this.binders[t];if(r instanceof fl||r instanceof cl||r instanceof vl){r.destroy()}}};var pl=function e(t,r,n,a){if(a===void 0)a=function(){return true};this.programConfigurations={};for(var i=0,o=r;i<o.length;i+=1){var s=o[i];this.programConfigurations[s.id]=new hl(s,n,a,t)}this.needsUpload=false;this._featureMap=new Ys;this._bufferOffset=0};pl.prototype.populatePaintArrays=function e(t,r,n,a,i,o){for(var s in this.programConfigurations){this.programConfigurations[s].populatePaintArrays(t,r,a,i,o)}if(r.id!==undefined){this._featureMap.add(r.id,n,this._bufferOffset,t)}this._bufferOffset=t;this.needsUpload=true};pl.prototype.updatePaintArrays=function e(t,r,n,a){for(var i=0,o=n;i<o.length;i+=1){var s=o[i];this.needsUpload=this.programConfigurations[s.id].updatePaintArrays(t,this._featureMap,r,s,a)||this.needsUpload}};pl.prototype.get=function e(t){return this.programConfigurations[t]};pl.prototype.upload=function e(t){if(!this.needsUpload){return}for(var r in this.programConfigurations){this.programConfigurations[r].upload(t)}this.needsUpload=false};pl.prototype.destroy=function e(){for(var t in this.programConfigurations){this.programConfigurations[t].destroy()}};function dl(e,t){var r={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return r[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function gl(e){var t={"line-pattern":{source:us,composite:us},"fill-pattern":{source:us,composite:us},"fill-extrusion-pattern":{source:us,composite:us}};return t[e]}function yl(e,t,r){var n={color:{source:As,composite:Ms},number:{source:bs,composite:As}};var a=gl(e);return a&&a[r]||n[t][r]}eo("ConstantBinder",ll);eo("CrossFadedConstantBinder",ul);eo("SourceExpressionBinder",fl);eo("CrossFadedCompositeBinder",vl);eo("CompositeExpressionBinder",cl);eo("ProgramConfiguration",hl,{omit:["_buffers"]});eo("ProgramConfigurationSet",pl);var ml=8192;function xl(e){return{min:-1*Math.pow(2,e-1),max:Math.pow(2,e-1)-1}}var bl=xl(15);function _l(e){var t=ml/e.extent;var r=e.loadGeometry();for(var n=0;n<r.length;n++){var a=r[n];for(var i=0;i<a.length;i++){var o=a[i];o.x=Math.round(o.x*t);o.y=Math.round(o.y*t);if(o.x<bl.min||o.x>bl.max||o.y<bl.min||o.y>bl.max){L("Geometry exceeds allowed extent, reduce your vector tile buffer size");o.x=c(o.x,bl.min,bl.max);o.y=c(o.y,bl.min,bl.max)}}}return r}function wl(e,t,r,n,a){e.emplaceBack(t*2+(n+1)/2,r*2+(a+1)/2)}var Tl=function e(t){this.zoom=t.zoom;this.overscaling=t.overscaling;this.layers=t.layers;this.layerIds=this.layers.map((function(e){return e.id}));this.index=t.index;this.hasPattern=false;this.layoutVertexArray=new is;this.indexArray=new ys;this.segments=new Ns;this.programConfigurations=new pl(Bs,t.layers,t.zoom);this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};Tl.prototype.populate=function e(t,r,n){var a=this.layers[0];var i=[];var o=null;if(a.type==="circle"){o=a.layout.get("circle-sort-key")}for(var s=0,l=t;s<l.length;s+=1){var u=l[s];var f=u.feature;var c=u.id;var v=u.index;var h=u.sourceLayerIndex;var p=this.layers[0]._featureFilter.needGeometry;var d={type:f.type,id:c,properties:f.properties,geometry:p?_l(f):[]};if(!this.layers[0]._featureFilter.filter(new Do(this.zoom),d,n)){continue}if(!p){d.geometry=_l(f)}var g=o?o.evaluate(d,{},n):undefined;var y={id:c,properties:f.properties,type:f.type,sourceLayerIndex:h,index:v,geometry:d.geometry,patterns:{},sortKey:g};i.push(y)}if(o){i.sort((function(e,t){return e.sortKey-t.sortKey}))}for(var m=0,x=i;m<x.length;m+=1){var b=x[m];var _=b;var w=_.geometry;var T=_.index;var k=_.sourceLayerIndex;var A=t[T].feature;this.addFeature(b,w,T,n);r.featureIndex.insert(A,w,T,k,this.index)}};Tl.prototype.update=function e(t,r,n){if(!this.stateDependentLayers.length){return}this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,n)};Tl.prototype.isEmpty=function e(){return this.layoutVertexArray.length===0};Tl.prototype.uploadPending=function e(){return!this.uploaded||this.programConfigurations.needsUpload};Tl.prototype.upload=function e(t){if(!this.uploaded){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Bs);this.indexBuffer=t.createIndexBuffer(this.indexArray)}this.programConfigurations.upload(t);this.uploaded=true};Tl.prototype.destroy=function e(){if(!this.layoutVertexBuffer){return}this.layoutVertexBuffer.destroy();this.indexBuffer.destroy();this.programConfigurations.destroy();this.segments.destroy()};Tl.prototype.addFeature=function e(t,r,n,a){for(var i=0,o=r;i<o.length;i+=1){var s=o[i];for(var l=0,u=s;l<u.length;l+=1){var f=u[l];var c=f.x;var v=f.y;if(c<0||c>=ml||v<0||v>=ml){continue}var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey);var p=h.vertexLength;wl(this.layoutVertexArray,c,v,-1,-1);wl(this.layoutVertexArray,c,v,1,-1);wl(this.layoutVertexArray,c,v,1,1);wl(this.layoutVertexArray,c,v,-1,1);this.indexArray.emplaceBack(p,p+1,p+2);this.indexArray.emplaceBack(p,p+3,p+2);h.vertexLength+=4;h.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},a)};eo("CircleBucket",Tl,{omit:["layers"]});function kl(e,t){for(var r=0;r<e.length;r++){if(Dl(t,e[r])){return true}}for(var n=0;n<t.length;n++){if(Dl(e,t[n])){return true}}if(Ll(e,t)){return true}return false}function Al(e,t,r){if(Dl(e,t)){return true}if(Il(t,e,r)){return true}return false}function Ml(e,t){if(e.length===1){return Ol(t,e[0])}for(var r=0;r<t.length;r++){var n=t[r];for(var a=0;a<n.length;a++){if(Dl(e,n[a])){return true}}}for(var i=0;i<e.length;i++){if(Ol(t,e[i])){return true}}for(var o=0;o<t.length;o++){if(Ll(e,t[o])){return true}}return false}function Sl(e,t,r){for(var n=0;n<t.length;n++){var a=t[n];if(e.length>=3){for(var i=0;i<a.length;i++){if(Dl(e,a[i])){return true}}}if(El(e,a,r)){return true}}return false}function El(e,t,r){if(e.length>1){if(Ll(e,t)){return true}for(var n=0;n<t.length;n++){if(Il(t[n],e,r)){return true}}}for(var a=0;a<e.length;a++){if(Il(e[a],t,r)){return true}}return false}function Ll(e,t){if(e.length===0||t.length===0){return false}for(var r=0;r<e.length-1;r++){var n=e[r];var a=e[r+1];for(var i=0;i<t.length-1;i++){var o=t[i];var s=t[i+1];if(Cl(n,a,o,s)){return true}}}return false}function Cl(e,t,r,n){return C(e,r,n)!==C(t,r,n)&&C(e,t,r)!==C(e,t,n)}function Il(e,t,r){var n=r*r;if(t.length===1){return e.distSqr(t[0])<n}for(var a=1;a<t.length;a++){var i=t[a-1],o=t[a];if(Pl(e,i,o)<n){return true}}return false}function Pl(e,t,r){var n=t.distSqr(r);if(n===0){return e.distSqr(t)}var a=((e.x-t.x)*(r.x-t.x)+(e.y-t.y)*(r.y-t.y))/n;if(a<0){return e.distSqr(t)}if(a>1){return e.distSqr(r)}return e.distSqr(r.sub(t)._mult(a)._add(t))}function Ol(e,t){var r=false,n,a,i;for(var o=0;o<e.length;o++){n=e[o];for(var s=0,l=n.length-1;s<n.length;l=s++){a=n[s];i=n[l];if(a.y>t.y!==i.y>t.y&&t.x<(i.x-a.x)*(t.y-a.y)/(i.y-a.y)+a.x){r=!r}}}return r}function Dl(e,t){var r=false;for(var n=0,a=e.length-1;n<e.length;a=n++){var i=e[n];var o=e[a];if(i.y>t.y!==o.y>t.y&&t.x<(o.x-i.x)*(t.y-i.y)/(o.y-i.y)+i.x){r=!r}}return r}function zl(e,t,r,n,a){for(var o=0,s=e;o<s.length;o+=1){var l=s[o];if(t<=l.x&&r<=l.y&&n>=l.x&&a>=l.y){return true}}var u=[new i(t,r),new i(t,a),new i(n,a),new i(n,r)];if(e.length>2){for(var f=0,c=u;f<c.length;f+=1){var v=c[f];if(Dl(e,v)){return true}}}for(var h=0;h<e.length-1;h++){var p=e[h];var d=e[h+1];if(Rl(p,d,u)){return true}}return false}function Rl(e,t,r){var n=r[0];var a=r[2];if(e.x<n.x&&t.x<n.x||e.x>a.x&&t.x>a.x||e.y<n.y&&t.y<n.y||e.y>a.y&&t.y>a.y){return false}var i=C(e,t,r[0]);return i!==C(e,t,r[1])||i!==C(e,t,r[2])||i!==C(e,t,r[3])}function Fl(e,t,r){var n=t.paint.get(e).value;if(n.kind==="constant"){return n.value}else{return r.programConfigurations.get(t.id).getMaxValue(e)}}function Bl(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Nl(e,t,r,n,a){if(!t[0]&&!t[1]){return e}var o=i.convert(t)._mult(a);if(r==="viewport"){o._rotate(-n)}var s=[];for(var l=0;l<e.length;l++){var u=e[l];s.push(u.sub(o))}return s}var jl=new Wo({"circle-sort-key":new qo(Yt["layout_circle"]["circle-sort-key"])});var Ul=new Wo({"circle-radius":new qo(Yt["paint_circle"]["circle-radius"]),"circle-color":new qo(Yt["paint_circle"]["circle-color"]),"circle-blur":new qo(Yt["paint_circle"]["circle-blur"]),"circle-opacity":new qo(Yt["paint_circle"]["circle-opacity"]),"circle-translate":new Ho(Yt["paint_circle"]["circle-translate"]),"circle-translate-anchor":new Ho(Yt["paint_circle"]["circle-translate-anchor"]),"circle-pitch-scale":new Ho(Yt["paint_circle"]["circle-pitch-scale"]),"circle-pitch-alignment":new Ho(Yt["paint_circle"]["circle-pitch-alignment"]),"circle-stroke-width":new qo(Yt["paint_circle"]["circle-stroke-width"]),"circle-stroke-color":new qo(Yt["paint_circle"]["circle-stroke-color"]),"circle-stroke-opacity":new qo(Yt["paint_circle"]["circle-stroke-opacity"])});var Vl={paint:Ul,layout:jl};var Hl=typeof Float32Array!=="undefined"?Float32Array:Array;if(!Math.hypot){Math.hypot=function(){var e=arguments;var t=0,r=arguments.length;while(r--){t+=e[r]*e[r]}return Math.sqrt(t)}}function ql(){var e=new Hl(4);if(Hl!=Float32Array){e[1]=0;e[2]=0}e[0]=1;e[3]=1;return e}function Gl(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3];var s=Math.sin(r);var l=Math.cos(r);e[0]=n*l+i*s;e[1]=a*l+o*s;e[2]=n*-s+i*l;e[3]=a*-s+o*l;return e}function Zl(){var e=new Hl(9);if(Hl!=Float32Array){e[1]=0;e[2]=0;e[3]=0;e[5]=0;e[6]=0;e[7]=0}e[0]=1;e[4]=1;e[8]=1;return e}function Yl(e,t){var r=Math.sin(t),n=Math.cos(t);e[0]=n;e[1]=r;e[2]=0;e[3]=-r;e[4]=n;e[5]=0;e[6]=0;e[7]=0;e[8]=1;return e}function Wl(){var e=new Hl(16);if(Hl!=Float32Array){e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[11]=0;e[12]=0;e[13]=0;e[14]=0}e[0]=1;e[5]=1;e[10]=1;e[15]=1;return e}function Xl(e){var t=new Hl(16);t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];return t}function Jl(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function Kl(e,t){var r=t[0],n=t[1],a=t[2],i=t[3];var o=t[4],s=t[5],l=t[6],u=t[7];var f=t[8],c=t[9],v=t[10],h=t[11];var p=t[12],d=t[13],g=t[14],y=t[15];var m=r*s-n*o;var x=r*l-a*o;var b=r*u-i*o;var _=n*l-a*s;var w=n*u-i*s;var T=a*u-i*l;var k=f*d-c*p;var A=f*g-v*p;var M=f*y-h*p;var S=c*g-v*d;var E=c*y-h*d;var L=v*y-h*g;var C=m*L-x*E+b*S+_*M-w*A+T*k;if(!C){return null}C=1/C;e[0]=(s*L-l*E+u*S)*C;e[1]=(a*E-n*L-i*S)*C;e[2]=(d*T-g*w+y*_)*C;e[3]=(v*w-c*T-h*_)*C;e[4]=(l*M-o*L-u*A)*C;e[5]=(r*L-a*M+i*A)*C;e[6]=(g*b-p*T-y*x)*C;e[7]=(f*T-v*b+h*x)*C;e[8]=(o*E-s*M+u*k)*C;e[9]=(n*M-r*E-i*k)*C;e[10]=(p*w-d*b+y*m)*C;e[11]=(c*b-f*w-h*m)*C;e[12]=(s*A-o*S-l*k)*C;e[13]=(r*S-n*A+a*k)*C;e[14]=(d*x-p*_-g*m)*C;e[15]=(f*_-c*x+v*m)*C;return e}function $l(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3];var s=t[4],l=t[5],u=t[6],f=t[7];var c=t[8],v=t[9],h=t[10],p=t[11];var d=t[12],g=t[13],y=t[14],m=t[15];var x=r[0],b=r[1],_=r[2],w=r[3];e[0]=x*n+b*s+_*c+w*d;e[1]=x*a+b*l+_*v+w*g;e[2]=x*i+b*u+_*h+w*y;e[3]=x*o+b*f+_*p+w*m;x=r[4];b=r[5];_=r[6];w=r[7];e[4]=x*n+b*s+_*c+w*d;e[5]=x*a+b*l+_*v+w*g;e[6]=x*i+b*u+_*h+w*y;e[7]=x*o+b*f+_*p+w*m;x=r[8];b=r[9];_=r[10];w=r[11];e[8]=x*n+b*s+_*c+w*d;e[9]=x*a+b*l+_*v+w*g;e[10]=x*i+b*u+_*h+w*y;e[11]=x*o+b*f+_*p+w*m;x=r[12];b=r[13];_=r[14];w=r[15];e[12]=x*n+b*s+_*c+w*d;e[13]=x*a+b*l+_*v+w*g;e[14]=x*i+b*u+_*h+w*y;e[15]=x*o+b*f+_*p+w*m;return e}function Ql(e,t,r){var n=r[0],a=r[1],i=r[2];var o,s,l,u;var f,c,v,h;var p,d,g,y;if(t===e){e[12]=t[0]*n+t[4]*a+t[8]*i+t[12];e[13]=t[1]*n+t[5]*a+t[9]*i+t[13];e[14]=t[2]*n+t[6]*a+t[10]*i+t[14];e[15]=t[3]*n+t[7]*a+t[11]*i+t[15]}else{o=t[0];s=t[1];l=t[2];u=t[3];f=t[4];c=t[5];v=t[6];h=t[7];p=t[8];d=t[9];g=t[10];y=t[11];e[0]=o;e[1]=s;e[2]=l;e[3]=u;e[4]=f;e[5]=c;e[6]=v;e[7]=h;e[8]=p;e[9]=d;e[10]=g;e[11]=y;e[12]=o*n+f*a+p*i+t[12];e[13]=s*n+c*a+d*i+t[13];e[14]=l*n+v*a+g*i+t[14];e[15]=u*n+h*a+y*i+t[15]}return e}function eu(e,t,r){var n=r[0],a=r[1],i=r[2];e[0]=t[0]*n;e[1]=t[1]*n;e[2]=t[2]*n;e[3]=t[3]*n;e[4]=t[4]*a;e[5]=t[5]*a;e[6]=t[6]*a;e[7]=t[7]*a;e[8]=t[8]*i;e[9]=t[9]*i;e[10]=t[10]*i;e[11]=t[11]*i;e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15];return e}function tu(e,t,r){var n=Math.sin(r);var a=Math.cos(r);var i=t[4];var o=t[5];var s=t[6];var l=t[7];var u=t[8];var f=t[9];var c=t[10];var v=t[11];if(t!==e){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[4]=i*a+u*n;e[5]=o*a+f*n;e[6]=s*a+c*n;e[7]=l*a+v*n;e[8]=u*a-i*n;e[9]=f*a-o*n;e[10]=c*a-s*n;e[11]=v*a-l*n;return e}function ru(e,t,r){var n=Math.sin(r);var a=Math.cos(r);var i=t[0];var o=t[1];var s=t[2];var l=t[3];var u=t[4];var f=t[5];var c=t[6];var v=t[7];if(t!==e){e[8]=t[8];e[9]=t[9];e[10]=t[10];e[11]=t[11];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[0]=i*a+u*n;e[1]=o*a+f*n;e[2]=s*a+c*n;e[3]=l*a+v*n;e[4]=u*a-i*n;e[5]=f*a-o*n;e[6]=c*a-s*n;e[7]=v*a-l*n;return e}function nu(e,t,r,n,a){var i=1/Math.tan(t/2),o;e[0]=i/r;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=i;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[11]=-1;e[12]=0;e[13]=0;e[15]=0;if(a!=null&&a!==Infinity){o=1/(n-a);e[10]=(a+n)*o;e[14]=2*a*n*o}else{e[10]=-1;e[14]=-2*n}return e}function au(e,t,r,n,a,i,o){var s=1/(t-r);var l=1/(n-a);var u=1/(i-o);e[0]=-2*s;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=-2*l;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=2*u;e[11]=0;e[12]=(t+r)*s;e[13]=(a+n)*l;e[14]=(o+i)*u;e[15]=1;return e}var iu=$l;function ou(){var e=new Hl(3);if(Hl!=Float32Array){e[0]=0;e[1]=0;e[2]=0}return e}function su(e){var t=new Hl(3);t[0]=e[0];t[1]=e[1];t[2]=e[2];return t}function lu(e,t,r){e[0]=t[0]+r[0];e[1]=t[1]+r[1];e[2]=t[2]+r[2];return e}function uu(e,t,r){e[0]=t[0]-r[0];e[1]=t[1]-r[1];e[2]=t[2]-r[2];return e}function fu(e,t,r){e[0]=t[0]*r;e[1]=t[1]*r;e[2]=t[2]*r;return e}function cu(e,t){var r=t[0];var n=t[1];var a=t[2];var i=r*r+n*n+a*a;if(i>0){i=1/Math.sqrt(i)}e[0]=t[0]*i;e[1]=t[1]*i;e[2]=t[2]*i;return e}function vu(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function hu(e,t,r){var n=t[0],a=t[1],i=t[2];var o=r[0],s=r[1],l=r[2];e[0]=a*l-i*s;e[1]=i*o-n*l;e[2]=n*s-a*o;return e}function pu(e,t,r){var n=t[0],a=t[1],i=t[2];e[0]=n*r[0]+a*r[3]+i*r[6];e[1]=n*r[1]+a*r[4]+i*r[7];e[2]=n*r[2]+a*r[5]+i*r[8];return e}var du=uu;var gu=function(){var e=ou();return function(t,r,n,a,i,o){var s,l;if(!r){r=3}if(!n){n=0}if(a){l=Math.min(a*r+n,t.length)}else{l=t.length}for(s=n;s<l;s+=r){e[0]=t[s];e[1]=t[s+1];e[2]=t[s+2];i(e,e,o);t[s]=e[0];t[s+1]=e[1];t[s+2]=e[2]}return t}}();function yu(){var e=new Hl(4);if(Hl!=Float32Array){e[0]=0;e[1]=0;e[2]=0;e[3]=0}return e}function mu(e,t,r){e[0]=t[0]*r;e[1]=t[1]*r;e[2]=t[2]*r;e[3]=t[3]*r;return e}function xu(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function bu(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3];e[0]=r[0]*n+r[4]*a+r[8]*i+r[12]*o;e[1]=r[1]*n+r[5]*a+r[9]*i+r[13]*o;e[2]=r[2]*n+r[6]*a+r[10]*i+r[14]*o;e[3]=r[3]*n+r[7]*a+r[11]*i+r[15]*o;return e}var _u=function(){var e=yu();return function(t,r,n,a,i,o){var s,l;if(!r){r=4}if(!n){n=0}if(a){l=Math.min(a*r+n,t.length)}else{l=t.length}for(s=n;s<l;s+=r){e[0]=t[s];e[1]=t[s+1];e[2]=t[s+2];e[3]=t[s+3];i(e,e,o);t[s]=e[0];t[s+1]=e[1];t[s+2]=e[2];t[s+3]=e[3]}return t}}();function wu(){var e=new Hl(2);if(Hl!=Float32Array){e[0]=0;e[1]=0}return e}function Tu(e){var t=e[0],r=e[1];return t*t+r*r}var ku=Tu;var Au=function(){var e=wu();return function(t,r,n,a,i,o){var s,l;if(!r){r=2}if(!n){n=0}if(a){l=Math.min(a*r+n,t.length)}else{l=t.length}for(s=n;s<l;s+=r){e[0]=t[s];e[1]=t[s+1];i(e,e,o);t[s]=e[0];t[s+1]=e[1]}return t}}();var Mu=function(e){function t(t){e.call(this,t,Vl)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.createBucket=function e(t){return new Tl(t)};t.prototype.queryRadius=function e(t){var r=t;return Fl("circle-radius",this,r)+Fl("circle-stroke-width",this,r)+Bl(this.paint.get("circle-translate"))};t.prototype.queryIntersectsFeature=function e(t,r,n,a,i,o,s,l){var u=Nl(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,s);var f=this.paint.get("circle-radius").evaluate(r,n);var c=this.paint.get("circle-stroke-width").evaluate(r,n);var v=f+c;var h=this.paint.get("circle-pitch-alignment")==="map";var p=h?u:Eu(u,l);var d=h?v*s:v;for(var g=0,y=a;g<y.length;g+=1){var m=y[g];for(var x=0,b=m;x<b.length;x+=1){var _=b[x];var w=h?_:Su(_,l);var T=d;var k=bu([],[_.x,_.y,0,1],l);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"){T*=k[3]/o.cameraToCenterDistance}else if(this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"){T*=o.cameraToCenterDistance/k[3]}if(Al(p,w,T)){return true}}}return false};return t}(Jo);function Su(e,t){var r=bu([],[e.x,e.y,0,1],t);return new i(r[0]/r[3],r[1]/r[3])}function Eu(e,t){return e.map((function(e){return Su(e,t)}))}var Lu=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;return t}(Tl);eo("HeatmapBucket",Lu,{omit:["layers"]});function Cu(e,t,r,n){var a=t.width;var i=t.height;if(!n){n=new Uint8Array(a*i*r)}else if(n instanceof Uint8ClampedArray){n=new Uint8Array(n.buffer)}else if(n.length!==a*i*r){throw new RangeError("mismatched image size")}e.width=a;e.height=i;e.data=n;return e}function Iu(e,t,r){var n=t.width;var a=t.height;if(n===e.width&&a===e.height){return}var i=Cu({},{width:n,height:a},r);Pu(e,i,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,n),height:Math.min(e.height,a)},r);e.width=n;e.height=a;e.data=i.data}function Pu(e,t,r,n,a,i){if(a.width===0||a.height===0){return t}if(a.width>e.width||a.height>e.height||r.x>e.width-a.width||r.y>e.height-a.height){throw new RangeError("out of range source coordinates for image copy")}if(a.width>t.width||a.height>t.height||n.x>t.width-a.width||n.y>t.height-a.height){throw new RangeError("out of range destination coordinates for image copy")}var o=e.data;var s=t.data;for(var l=0;l<a.height;l++){var u=((r.y+l)*e.width+r.x)*i;var f=((n.y+l)*t.width+n.x)*i;for(var c=0;c<a.width*i;c++){s[f+c]=o[u+c]}}return t}var Ou=function e(t,r){Cu(this,t,1,r)};Ou.prototype.resize=function e(t){Iu(this,t,1)};Ou.prototype.clone=function e(){return new Ou({width:this.width,height:this.height},new Uint8Array(this.data))};Ou.copy=function e(t,r,n,a,i){Pu(t,r,n,a,i,1)};var Du=function e(t,r){Cu(this,t,4,r)};Du.prototype.resize=function e(t){Iu(this,t,4)};Du.prototype.replace=function e(t,r){if(r){this.data.set(t)}else if(t instanceof Uint8ClampedArray){this.data=new Uint8Array(t.buffer)}else{this.data=t}};Du.prototype.clone=function e(){return new Du({width:this.width,height:this.height},new Uint8Array(this.data))};Du.copy=function e(t,r,n,a,i){Pu(t,r,n,a,i,4)};eo("AlphaImage",Ou);eo("RGBAImage",Du);var zu=new Wo({"heatmap-radius":new qo(Yt["paint_heatmap"]["heatmap-radius"]),"heatmap-weight":new qo(Yt["paint_heatmap"]["heatmap-weight"]),"heatmap-intensity":new Ho(Yt["paint_heatmap"]["heatmap-intensity"]),"heatmap-color":new Yo(Yt["paint_heatmap"]["heatmap-color"]),"heatmap-opacity":new Ho(Yt["paint_heatmap"]["heatmap-opacity"])});var Ru={paint:zu};function Fu(e,t){var r=new Uint8Array(256*4);var n={};for(var a=0,i=0;a<256;a++,i+=4){n[t]=a/255;var o=e.evaluate(n);r[i+0]=Math.floor(o.r*255/o.a);r[i+1]=Math.floor(o.g*255/o.a);r[i+2]=Math.floor(o.b*255/o.a);r[i+3]=Math.floor(o.a*255)}return new Du({width:256,height:1},r)}var Bu=function(e){function t(t){e.call(this,t,Ru);this._updateColorRamp()}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.createBucket=function e(t){return new Lu(t)};t.prototype._handleSpecialPaintPropertyUpdate=function e(t){if(t==="heatmap-color"){this._updateColorRamp()}};t.prototype._updateColorRamp=function e(){var t=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Fu(t,"heatmapDensity");this.colorRampTexture=null};t.prototype.resize=function e(){if(this.heatmapFbo){this.heatmapFbo.destroy();this.heatmapFbo=null}};t.prototype.queryRadius=function e(){return 0};t.prototype.queryIntersectsFeature=function e(){return false};t.prototype.hasOffscreenPass=function e(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"};return t}(Jo);var Nu=new Wo({"hillshade-illumination-direction":new Ho(Yt["paint_hillshade"]["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ho(Yt["paint_hillshade"]["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ho(Yt["paint_hillshade"]["hillshade-exaggeration"]),"hillshade-shadow-color":new Ho(Yt["paint_hillshade"]["hillshade-shadow-color"]),"hillshade-highlight-color":new Ho(Yt["paint_hillshade"]["hillshade-highlight-color"]),"hillshade-accent-color":new Ho(Yt["paint_hillshade"]["hillshade-accent-color"])});var ju={paint:Nu};var Uu=function(e){function t(t){e.call(this,t,ju)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.hasOffscreenPass=function e(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"};return t}(Jo);var Vu=rs([{name:"a_pos",components:2,type:"Int16"}],4);var Hu=Vu.members;var qu=Zu;var Gu=Zu;function Zu(e,t,r){r=r||2;var n=t&&t.length,a=n?t[0]*r:e.length,i=Yu(e,0,a,r,true),o=[];if(!i||i.next===i.prev){return o}var s,l,u,f,c,v,h;if(n){i=ef(e,t,i,r)}if(e.length>80*r){s=u=e[0];l=f=e[1];for(var p=r;p<a;p+=r){c=e[p];v=e[p+1];if(c<s){s=c}if(v<l){l=v}if(c>u){u=c}if(v>f){f=v}}h=Math.max(u-s,f-l);h=h!==0?1/h:0}Xu(i,o,r,s,l,h);return o}function Yu(e,t,r,n,a){var i,o;if(a===kf(e,t,r,n)>0){for(i=t;i<r;i+=n){o=_f(i,e[i],e[i+1],o)}}else{for(i=r-n;i>=t;i-=n){o=_f(i,e[i],e[i+1],o)}}if(o&&hf(o,o.next)){wf(o);o=o.next}return o}function Wu(e,t){if(!e){return e}if(!t){t=e}var r=e,n;do{n=false;if(!r.steiner&&(hf(r,r.next)||vf(r.prev,r,r.next)===0)){wf(r);r=t=r.prev;if(r===r.next){break}n=true}else{r=r.next}}while(n||r!==t);return t}function Xu(e,t,r,n,a,i,o){if(!e){return}if(!o&&i){of(e,n,a,i)}var s=e,l,u;while(e.prev!==e.next){l=e.prev;u=e.next;if(i?Ku(e,n,a,i):Ju(e)){t.push(l.i/r);t.push(e.i/r);t.push(u.i/r);wf(e);e=u.next;s=u.next;continue}e=u;if(e===s){if(!o){Xu(Wu(e),t,r,n,a,i,1)}else if(o===1){e=$u(Wu(e),t,r);Xu(e,t,r,n,a,i,2)}else if(o===2){Qu(e,t,r,n,a,i)}break}}}function Ju(e){var t=e.prev,r=e,n=e.next;if(vf(t,r,n)>=0){return false}var a=e.next.next;while(a!==e.prev){if(ff(t.x,t.y,r.x,r.y,n.x,n.y,a.x,a.y)&&vf(a.prev,a,a.next)>=0){return false}a=a.next}return true}function Ku(e,t,r,n){var a=e.prev,i=e,o=e.next;if(vf(a,i,o)>=0){return false}var s=a.x<i.x?a.x<o.x?a.x:o.x:i.x<o.x?i.x:o.x,l=a.y<i.y?a.y<o.y?a.y:o.y:i.y<o.y?i.y:o.y,u=a.x>i.x?a.x>o.x?a.x:o.x:i.x>o.x?i.x:o.x,f=a.y>i.y?a.y>o.y?a.y:o.y:i.y>o.y?i.y:o.y;var c=lf(s,l,t,r,n),v=lf(u,f,t,r,n);var h=e.prevZ,p=e.nextZ;while(h&&h.z>=c&&p&&p.z<=v){if(h!==e.prev&&h!==e.next&&ff(a.x,a.y,i.x,i.y,o.x,o.y,h.x,h.y)&&vf(h.prev,h,h.next)>=0){return false}h=h.prevZ;if(p!==e.prev&&p!==e.next&&ff(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&vf(p.prev,p,p.next)>=0){return false}p=p.nextZ}while(h&&h.z>=c){if(h!==e.prev&&h!==e.next&&ff(a.x,a.y,i.x,i.y,o.x,o.y,h.x,h.y)&&vf(h.prev,h,h.next)>=0){return false}h=h.prevZ}while(p&&p.z<=v){if(p!==e.prev&&p!==e.next&&ff(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&vf(p.prev,p,p.next)>=0){return false}p=p.nextZ}return true}function $u(e,t,r){var n=e;do{var a=n.prev,i=n.next.next;if(!hf(a,i)&&pf(a,n,n.next,i)&&mf(a,i)&&mf(i,a)){t.push(a.i/r);t.push(n.i/r);t.push(i.i/r);wf(n);wf(n.next);n=e=i}n=n.next}while(n!==e);return Wu(n)}function Qu(e,t,r,n,a,i){var o=e;do{var s=o.next.next;while(s!==o.prev){if(o.i!==s.i&&cf(o,s)){var l=bf(o,s);o=Wu(o,o.next);l=Wu(l,l.next);Xu(o,t,r,n,a,i);Xu(l,t,r,n,a,i);return}s=s.next}o=o.next}while(o!==e)}function ef(e,t,r,n){var a=[],i,o,s,l,u;for(i=0,o=t.length;i<o;i++){s=t[i]*n;l=i<o-1?t[i+1]*n:e.length;u=Yu(e,s,l,n,false);if(u===u.next){u.steiner=true}a.push(uf(u))}a.sort(tf);for(i=0;i<a.length;i++){rf(a[i],r);r=Wu(r,r.next)}return r}function tf(e,t){return e.x-t.x}function rf(e,t){t=nf(e,t);if(t){var r=bf(t,e);Wu(t,t.next);Wu(r,r.next)}}function nf(e,t){var r=t,n=e.x,a=e.y,i=-Infinity,o;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>i){i=s;if(s===n){if(a===r.y){return r}if(a===r.next.y){return r.next}}o=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!o){return null}if(n===i){return o}var l=o,u=o.x,f=o.y,c=Infinity,v;r=o;do{if(n>=r.x&&r.x>=u&&n!==r.x&&ff(a<f?n:i,a,u,f,a<f?i:n,a,r.x,r.y)){v=Math.abs(a-r.y)/(n-r.x);if(mf(r,e)&&(v<c||v===c&&(r.x>o.x||r.x===o.x&&af(o,r)))){o=r;c=v}}r=r.next}while(r!==l);return o}function af(e,t){return vf(e.prev,e,t.prev)<0&&vf(t.next,e,e.next)<0}function of(e,t,r,n){var a=e;do{if(a.z===null){a.z=lf(a.x,a.y,t,r,n)}a.prevZ=a.prev;a.nextZ=a.next;a=a.next}while(a!==e);a.prevZ.nextZ=null;a.prevZ=null;sf(a)}function sf(e){var t,r,n,a,i,o,s,l,u=1;do{r=e;e=null;i=null;o=0;while(r){o++;n=r;s=0;for(t=0;t<u;t++){s++;n=n.nextZ;if(!n){break}}l=u;while(s>0||l>0&&n){if(s!==0&&(l===0||!n||r.z<=n.z)){a=r;r=r.nextZ;s--}else{a=n;n=n.nextZ;l--}if(i){i.nextZ=a}else{e=a}a.prevZ=i;i=a}r=n}i.nextZ=null;u*=2}while(o>1);return e}function lf(e,t,r,n,a){e=32767*(e-r)*a;t=32767*(t-n)*a;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;e=(e|e<<1)&1431655765;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;t=(t|t<<1)&1431655765;return e|t<<1}function uf(e){var t=e,r=e;do{if(t.x<r.x||t.x===r.x&&t.y<r.y){r=t}t=t.next}while(t!==e);return r}function ff(e,t,r,n,a,i,o,s){return(a-o)*(t-s)-(e-o)*(i-s)>=0&&(e-o)*(n-s)-(r-o)*(t-s)>=0&&(r-o)*(i-s)-(a-o)*(n-s)>=0}function cf(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!yf(e,t)&&(mf(e,t)&&mf(t,e)&&xf(e,t)&&(vf(e.prev,e,t.prev)||vf(e,t.prev,t))||hf(e,t)&&vf(e.prev,e,e.next)>0&&vf(t.prev,t,t.next)>0)}function vf(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function hf(e,t){return e.x===t.x&&e.y===t.y}function pf(e,t,r,n){var a=gf(vf(e,t,r));var i=gf(vf(e,t,n));var o=gf(vf(r,n,e));var s=gf(vf(r,n,t));if(a!==i&&o!==s){return true}if(a===0&&df(e,r,t)){return true}if(i===0&&df(e,n,t)){return true}if(o===0&&df(r,e,n)){return true}if(s===0&&df(r,t,n)){return true}return false}function df(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function gf(e){return e>0?1:e<0?-1:0}function yf(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&pf(r,r.next,e,t)){return true}r=r.next}while(r!==e);return false}function mf(e,t){return vf(e.prev,e,e.next)<0?vf(e,t,e.next)>=0&&vf(e,e.prev,t)>=0:vf(e,t,e.prev)<0||vf(e,e.next,t)<0}function xf(e,t){var r=e,n=false,a=(e.x+t.x)/2,i=(e.y+t.y)/2;do{if(r.y>i!==r.next.y>i&&r.next.y!==r.y&&a<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x){n=!n}r=r.next}while(r!==e);return n}function bf(e,t){var r=new Tf(e.i,e.x,e.y),n=new Tf(t.i,t.x,t.y),a=e.next,i=t.prev;e.next=t;t.prev=e;r.next=a;a.prev=r;n.next=r;r.prev=n;i.next=n;n.prev=i;return n}function _f(e,t,r,n){var a=new Tf(e,t,r);if(!n){a.prev=a;a.next=a}else{a.next=n.next;a.prev=n;n.next.prev=a;n.next=a}return a}function wf(e){e.next.prev=e.prev;e.prev.next=e.next;if(e.prevZ){e.prevZ.nextZ=e.nextZ}if(e.nextZ){e.nextZ.prevZ=e.prevZ}}function Tf(e,t,r){this.i=e;this.x=t;this.y=r;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=false}Zu.deviation=function(e,t,r,n){var a=t&&t.length;var i=a?t[0]*r:e.length;var o=Math.abs(kf(e,0,i,r));if(a){for(var s=0,l=t.length;s<l;s++){var u=t[s]*r;var f=s<l-1?t[s+1]*r:e.length;o-=Math.abs(kf(e,u,f,r))}}var c=0;for(s=0;s<n.length;s+=3){var v=n[s]*r;var h=n[s+1]*r;var p=n[s+2]*r;c+=Math.abs((e[v]-e[p])*(e[h+1]-e[v+1])-(e[v]-e[h])*(e[p+1]-e[v+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function kf(e,t,r,n){var a=0;for(var i=t,o=r-n;i<r;i+=n){a+=(e[o]-e[i])*(e[i+1]+e[o+1]);o=i}return a}Zu.flatten=function(e){var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0;for(var a=0;a<e.length;a++){for(var i=0;i<e[a].length;i++){for(var o=0;o<t;o++){r.vertices.push(e[a][i][o])}}if(a>0){n+=e[a-1].length;r.holes.push(n)}}return r};qu.default=Gu;function Af(e,t,r,n,a){Mf(e,t,r||0,n||e.length-1,a||Ef)}function Mf(e,t,r,n,a){while(n>r){if(n-r>600){var i=n-r+1;var o=t-r+1;var s=Math.log(i);var l=.5*Math.exp(2*s/3);var u=.5*Math.sqrt(s*l*(i-l)/i)*(o-i/2<0?-1:1);var f=Math.max(r,Math.floor(t-o*l/i+u));var c=Math.min(n,Math.floor(t+(i-o)*l/i+u));Mf(e,t,f,c,a)}var v=e[t];var h=r;var p=n;Sf(e,r,t);if(a(e[n],v)>0){Sf(e,r,n)}while(h<p){Sf(e,h,p);h++;p--;while(a(e[h],v)<0){h++}while(a(e[p],v)>0){p--}}if(a(e[r],v)===0){Sf(e,r,p)}else{p++;Sf(e,p,n)}if(p<=t){r=p+1}if(t<=p){n=p-1}}}function Sf(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}function Ef(e,t){return e<t?-1:e>t?1:0}function Lf(e,t){var r=e.length;if(r<=1){return[e]}var n=[];var a,i;for(var o=0;o<r;o++){var s=I(e[o]);if(s===0){continue}e[o].area=Math.abs(s);if(i===undefined){i=s<0}if(i===s<0){if(a){n.push(a)}a=[e[o]]}else{a.push(e[o])}}if(a){n.push(a)}if(t>1){for(var l=0;l<n.length;l++){if(n[l].length<=t){continue}Af(n[l],t,1,n[l].length-1,Cf);n[l]=n[l].slice(0,t)}}return n}function Cf(e,t){return t.area-e.area}function If(e,t,r){var n=r.patternDependencies;var a=false;for(var i=0,o=t;i<o.length;i+=1){var s=o[i];var l=s.paint.get(e+"-pattern");if(!l.isConstant()){a=true}var u=l.constantOr(null);if(u){a=true;n[u.to]=true;n[u.from]=true}}return a}function Pf(e,t,r,n,a){var i=a.patternDependencies;for(var o=0,s=t;o<s.length;o+=1){var l=s[o];var u=l.paint.get(e+"-pattern");var f=u.value;if(f.kind!=="constant"){var c=f.evaluate({zoom:n-1},r,{},a.availableImages);var v=f.evaluate({zoom:n},r,{},a.availableImages);var h=f.evaluate({zoom:n+1},r,{},a.availableImages);c=c&&c.name?c.name:c;v=v&&v.name?v.name:v;h=h&&h.name?h.name:h;i[c]=true;i[v]=true;i[h]=true;r.patterns[l.id]={min:c,mid:v,max:h}}}return r}var Of=500;var Df=function e(t){this.zoom=t.zoom;this.overscaling=t.overscaling;this.layers=t.layers;this.layerIds=this.layers.map((function(e){return e.id}));this.index=t.index;this.hasPattern=false;this.patternFeatures=[];this.layoutVertexArray=new is;this.indexArray=new ys;this.indexArray2=new Ts;this.programConfigurations=new pl(Hu,t.layers,t.zoom);this.segments=new Ns;this.segments2=new Ns;this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};Df.prototype.populate=function e(t,r,n){this.hasPattern=If("fill",this.layers,r);var a=this.layers[0].layout.get("fill-sort-key");var i=[];for(var o=0,s=t;o<s.length;o+=1){var l=s[o];var u=l.feature;var f=l.id;var c=l.index;var v=l.sourceLayerIndex;var h=this.layers[0]._featureFilter.needGeometry;var p={type:u.type,id:f,properties:u.properties,geometry:h?_l(u):[]};if(!this.layers[0]._featureFilter.filter(new Do(this.zoom),p,n)){continue}if(!h){p.geometry=_l(u)}var d=a?a.evaluate(p,{},n,r.availableImages):undefined;var g={id:f,properties:u.properties,type:u.type,sourceLayerIndex:v,index:c,geometry:p.geometry,patterns:{},sortKey:d};i.push(g)}if(a){i.sort((function(e,t){return e.sortKey-t.sortKey}))}for(var y=0,m=i;y<m.length;y+=1){var x=m[y];var b=x;var _=b.geometry;var w=b.index;var T=b.sourceLayerIndex;if(this.hasPattern){var k=Pf("fill",this.layers,x,this.zoom,r);this.patternFeatures.push(k)}else{this.addFeature(x,_,w,n,{})}var A=t[w].feature;r.featureIndex.insert(A,_,w,T,this.index)}};Df.prototype.update=function e(t,r,n){if(!this.stateDependentLayers.length){return}this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,n)};Df.prototype.addFeatures=function e(t,r,n){for(var a=0,i=this.patternFeatures;a<i.length;a+=1){var o=i[a];this.addFeature(o,o.geometry,o.index,r,n)}};Df.prototype.isEmpty=function e(){return this.layoutVertexArray.length===0};Df.prototype.uploadPending=function e(){return!this.uploaded||this.programConfigurations.needsUpload};Df.prototype.upload=function e(t){if(!this.uploaded){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Hu);this.indexBuffer=t.createIndexBuffer(this.indexArray);this.indexBuffer2=t.createIndexBuffer(this.indexArray2)}this.programConfigurations.upload(t);this.uploaded=true};Df.prototype.destroy=function e(){if(!this.layoutVertexBuffer){return}this.layoutVertexBuffer.destroy();this.indexBuffer.destroy();this.indexBuffer2.destroy();this.programConfigurations.destroy();this.segments.destroy();this.segments2.destroy()};Df.prototype.addFeature=function e(t,r,n,a,i){for(var o=0,s=Lf(r,Of);o<s.length;o+=1){var l=s[o];var u=0;for(var f=0,c=l;f<c.length;f+=1){var v=c[f];u+=v.length}var h=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray);var p=h.vertexLength;var d=[];var g=[];for(var y=0,m=l;y<m.length;y+=1){var x=m[y];if(x.length===0){continue}if(x!==l[0]){g.push(d.length/2)}var b=this.segments2.prepareSegment(x.length,this.layoutVertexArray,this.indexArray2);var _=b.vertexLength;this.layoutVertexArray.emplaceBack(x[0].x,x[0].y);this.indexArray2.emplaceBack(_+x.length-1,_);d.push(x[0].x);d.push(x[0].y);for(var w=1;w<x.length;w++){this.layoutVertexArray.emplaceBack(x[w].x,x[w].y);this.indexArray2.emplaceBack(_+w-1,_+w);d.push(x[w].x);d.push(x[w].y)}b.vertexLength+=x.length;b.primitiveLength+=x.length}var T=qu(d,g);for(var k=0;k<T.length;k+=3){this.indexArray.emplaceBack(p+T[k],p+T[k+1],p+T[k+2])}h.vertexLength+=u;h.primitiveLength+=T.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,a)};eo("FillBucket",Df,{omit:["layers","patternFeatures"]});var zf=new Wo({"fill-sort-key":new qo(Yt["layout_fill"]["fill-sort-key"])});var Rf=new Wo({"fill-antialias":new Ho(Yt["paint_fill"]["fill-antialias"]),"fill-opacity":new qo(Yt["paint_fill"]["fill-opacity"]),"fill-color":new qo(Yt["paint_fill"]["fill-color"]),"fill-outline-color":new qo(Yt["paint_fill"]["fill-outline-color"]),"fill-translate":new Ho(Yt["paint_fill"]["fill-translate"]),"fill-translate-anchor":new Ho(Yt["paint_fill"]["fill-translate-anchor"]),"fill-pattern":new Go(Yt["paint_fill"]["fill-pattern"])});var Ff={paint:Rf,layout:zf};var Bf=function(e){function t(t){e.call(this,t,Ff)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.recalculate=function t(r,n){e.prototype.recalculate.call(this,r,n);var a=this.paint._values["fill-outline-color"];if(a.value.kind==="constant"&&a.value.value===undefined){this.paint._values["fill-outline-color"]=this.paint._values["fill-color"]}};t.prototype.createBucket=function e(t){return new Df(t)};t.prototype.queryRadius=function e(){return Bl(this.paint.get("fill-translate"))};t.prototype.queryIntersectsFeature=function e(t,r,n,a,i,o,s){var l=Nl(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,s);return Ml(l,a)};t.prototype.isTileClipped=function e(){return true};return t}(Jo);var Nf=rs([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4);var jf=Nf.members;var Uf=Vf;function Vf(e,t,r,n,a){this.properties={};this.extent=r;this.type=0;this._pbf=e;this._geometry=-1;this._keys=n;this._values=a;e.readFields(Hf,this,t)}function Hf(e,t,r){if(e==1){t.id=r.readVarint()}else if(e==2){qf(r,t)}else if(e==3){t.type=r.readVarint()}else if(e==4){t._geometry=r.pos}}function qf(e,t){var r=e.readVarint()+e.pos;while(e.pos<r){var n=t._keys[e.readVarint()],a=t._values[e.readVarint()];t.properties[n]=a}}Vf.types=["Unknown","Point","LineString","Polygon"];Vf.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;var t=e.readVarint()+e.pos,r=1,n=0,a=0,o=0,s=[],l;while(e.pos<t){if(n<=0){var u=e.readVarint();r=u&7;n=u>>3}n--;if(r===1||r===2){a+=e.readSVarint();o+=e.readSVarint();if(r===1){if(l){s.push(l)}l=[]}l.push(new i(a,o))}else if(r===7){if(l){l.push(l[0].clone())}}else{throw new Error("unknown command "+r)}}if(l){s.push(l)}return s};Vf.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;var t=e.readVarint()+e.pos,r=1,n=0,a=0,i=0,o=Infinity,s=-Infinity,l=Infinity,u=-Infinity;while(e.pos<t){if(n<=0){var f=e.readVarint();r=f&7;n=f>>3}n--;if(r===1||r===2){a+=e.readSVarint();i+=e.readSVarint();if(a<o){o=a}if(a>s){s=a}if(i<l){l=i}if(i>u){u=i}}else if(r!==7){throw new Error("unknown command "+r)}}return[o,l,s,u]};Vf.prototype.toGeoJSON=function(e,t,r){var n=this.extent*Math.pow(2,r),a=this.extent*e,i=this.extent*t,o=this.loadGeometry(),s=Vf.types[this.type],l,u;function f(e){for(var t=0;t<e.length;t++){var r=e[t],o=180-(r.y+i)*360/n;e[t]=[(r.x+a)*360/n-180,360/Math.PI*Math.atan(Math.exp(o*Math.PI/180))-90]}}switch(this.type){case 1:var c=[];for(l=0;l<o.length;l++){c[l]=o[l][0]}o=c;f(o);break;case 2:for(l=0;l<o.length;l++){f(o[l])}break;case 3:o=Gf(o);for(l=0;l<o.length;l++){for(u=0;u<o[l].length;u++){f(o[l][u])}}break}if(o.length===1){o=o[0]}else{s="Multi"+s}var v={type:"Feature",geometry:{type:s,coordinates:o},properties:this.properties};if("id"in this){v.id=this.id}return v};function Gf(e){var t=e.length;if(t<=1){return[e]}var r=[],n,a;for(var i=0;i<t;i++){var o=Zf(e[i]);if(o===0){continue}if(a===undefined){a=o<0}if(a===o<0){if(n){r.push(n)}n=[e[i]]}else{n.push(e[i])}}if(n){r.push(n)}return r}function Zf(e){var t=0;for(var r=0,n=e.length,a=n-1,i,o;r<n;a=r++){i=e[r];o=e[a];t+=(o.x-i.x)*(i.y+o.y)}return t}var Yf=Wf;function Wf(e,t){this.version=1;this.name=null;this.extent=4096;this.length=0;this._pbf=e;this._keys=[];this._values=[];this._features=[];e.readFields(Xf,this,t);this.length=this._features.length}function Xf(e,t,r){if(e===15){t.version=r.readVarint()}else if(e===1){t.name=r.readString()}else if(e===5){t.extent=r.readVarint()}else if(e===2){t._features.push(r.pos)}else if(e===3){t._keys.push(r.readString())}else if(e===4){t._values.push(Jf(r))}}function Jf(e){var t=null,r=e.readVarint()+e.pos;while(e.pos<r){var n=e.readVarint()>>3;t=n===1?e.readString():n===2?e.readFloat():n===3?e.readDouble():n===4?e.readVarint64():n===5?e.readVarint():n===6?e.readSVarint():n===7?e.readBoolean():null}return t}Wf.prototype.feature=function(e){if(e<0||e>=this._features.length){throw new Error("feature index out of bounds")}this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Uf(this._pbf,t,this.extent,this._keys,this._values)};var Kf=$f;function $f(e,t){this.layers=e.readFields(Qf,{},t)}function Qf(e,t,r){if(e===3){var n=new Yf(r,r.readVarint()+r.pos);if(n.length){t[n.name]=n}}}var ec=Kf;var tc=Uf;var rc=Yf;var nc={VectorTile:ec,VectorTileFeature:tc,VectorTileLayer:rc};var ac=nc.VectorTileFeature.types;var ic=500;var oc=Math.pow(2,13);function sc(e,t,r,n,a,i,o,s){e.emplaceBack(t,r,Math.floor(n*oc)*2+o,a*oc*2,i*oc*2,Math.round(s))}var lc=function e(t){this.zoom=t.zoom;this.overscaling=t.overscaling;this.layers=t.layers;this.layerIds=this.layers.map((function(e){return e.id}));this.index=t.index;this.hasPattern=false;this.layoutVertexArray=new ss;this.indexArray=new ys;this.programConfigurations=new pl(jf,t.layers,t.zoom);this.segments=new Ns;this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};lc.prototype.populate=function e(t,r,n){this.features=[];this.hasPattern=If("fill-extrusion",this.layers,r);for(var a=0,i=t;a<i.length;a+=1){var o=i[a];var s=o.feature;var l=o.id;var u=o.index;var f=o.sourceLayerIndex;var c=this.layers[0]._featureFilter.needGeometry;var v={type:s.type,id:l,properties:s.properties,geometry:c?_l(s):[]};if(!this.layers[0]._featureFilter.filter(new Do(this.zoom),v,n)){continue}var h={id:l,sourceLayerIndex:f,index:u,geometry:c?v.geometry:_l(s),properties:s.properties,type:s.type,patterns:{}};if(typeof s.id!=="undefined"){h.id=s.id}if(this.hasPattern){this.features.push(Pf("fill-extrusion",this.layers,h,this.zoom,r))}else{this.addFeature(h,h.geometry,u,n,{})}r.featureIndex.insert(s,h.geometry,u,f,this.index,true)}};lc.prototype.addFeatures=function e(t,r,n){for(var a=0,i=this.features;a<i.length;a+=1){var o=i[a];var s=o.geometry;this.addFeature(o,s,o.index,r,n)}};lc.prototype.update=function e(t,r,n){if(!this.stateDependentLayers.length){return}this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,n)};lc.prototype.isEmpty=function e(){return this.layoutVertexArray.length===0};lc.prototype.uploadPending=function e(){return!this.uploaded||this.programConfigurations.needsUpload};lc.prototype.upload=function e(t){if(!this.uploaded){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,jf);this.indexBuffer=t.createIndexBuffer(this.indexArray)}this.programConfigurations.upload(t);this.uploaded=true};lc.prototype.destroy=function e(){if(!this.layoutVertexBuffer){return}this.layoutVertexBuffer.destroy();this.indexBuffer.destroy();this.programConfigurations.destroy();this.segments.destroy()};lc.prototype.addFeature=function e(t,r,n,a,i){for(var o=0,s=Lf(r,ic);o<s.length;o+=1){var l=s[o];var u=0;for(var f=0,c=l;f<c.length;f+=1){var v=c[f];u+=v.length}var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(var p=0,d=l;p<d.length;p+=1){var g=d[p];if(g.length===0){continue}if(fc(g)){continue}var y=0;for(var m=0;m<g.length;m++){var x=g[m];if(m>=1){var b=g[m-1];if(!uc(x,b)){if(h.vertexLength+4>Ns.MAX_VERTEX_ARRAY_LENGTH){h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)}var _=x.sub(b)._perp()._unit();var w=b.dist(x);if(y+w>32768){y=0}sc(this.layoutVertexArray,x.x,x.y,_.x,_.y,0,0,y);sc(this.layoutVertexArray,x.x,x.y,_.x,_.y,0,1,y);y+=w;sc(this.layoutVertexArray,b.x,b.y,_.x,_.y,0,0,y);sc(this.layoutVertexArray,b.x,b.y,_.x,_.y,0,1,y);var T=h.vertexLength;this.indexArray.emplaceBack(T,T+2,T+1);this.indexArray.emplaceBack(T+1,T+2,T+3);h.vertexLength+=4;h.primitiveLength+=2}}}}if(h.vertexLength+u>Ns.MAX_VERTEX_ARRAY_LENGTH){h=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray)}if(ac[t.type]!=="Polygon"){continue}var k=[];var A=[];var M=h.vertexLength;for(var S=0,E=l;S<E.length;S+=1){var L=E[S];if(L.length===0){continue}if(L!==l[0]){A.push(k.length/2)}for(var C=0;C<L.length;C++){var I=L[C];sc(this.layoutVertexArray,I.x,I.y,0,0,1,1,0);k.push(I.x);k.push(I.y)}}var P=qu(k,A);for(var O=0;O<P.length;O+=3){this.indexArray.emplaceBack(M+P[O],M+P[O+2],M+P[O+1])}h.primitiveLength+=P.length/3;h.vertexLength+=u}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,a)};eo("FillExtrusionBucket",lc,{omit:["layers","features"]});function uc(e,t){return e.x===t.x&&(e.x<0||e.x>ml)||e.y===t.y&&(e.y<0||e.y>ml)}function fc(e){return e.every((function(e){return e.x<0}))||e.every((function(e){return e.x>ml}))||e.every((function(e){return e.y<0}))||e.every((function(e){return e.y>ml}))}var cc=new Wo({"fill-extrusion-opacity":new Ho(Yt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new qo(Yt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ho(Yt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ho(Yt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Go(Yt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new qo(Yt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new qo(Yt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ho(Yt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])});var vc={paint:cc};var hc=function(e){function t(t){e.call(this,t,vc)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.createBucket=function e(t){return new lc(t)};t.prototype.queryRadius=function e(){return Bl(this.paint.get("fill-extrusion-translate"))};t.prototype.is3D=function e(){return true};t.prototype.queryIntersectsFeature=function e(t,r,n,a,i,o,s,l){var u=Nl(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,s);var f=this.paint.get("fill-extrusion-height").evaluate(r,n);var c=this.paint.get("fill-extrusion-base").evaluate(r,n);var v=mc(u,l,o,0);var h=yc(a,c,f,l);var p=h[0];var d=h[1];return gc(p,d,v)};return t}(Jo);function pc(e,t){return e.x*t.x+e.y*t.y}function dc(e,t){if(e.length===1){var r=0;var n=t[r++];var a;while(!a||n.equals(a)){a=t[r++];if(!a){return Infinity}}for(;r<t.length;r++){var i=t[r];var o=e[0];var s=a.sub(n);var l=i.sub(n);var u=o.sub(n);var f=pc(s,s);var c=pc(s,l);var v=pc(l,l);var h=pc(u,s);var p=pc(u,l);var d=f*v-c*c;var g=(v*h-c*p)/d;var y=(f*p-c*h)/d;var m=1-g-y;var x=n.z*m+a.z*g+i.z*y;if(isFinite(x)){return x}}return Infinity}else{var b=Infinity;for(var _=0,w=t;_<w.length;_+=1){var T=w[_];b=Math.min(b,T.z)}return b}}function gc(e,t,r){var n=Infinity;if(Ml(r,t)){n=dc(r,t[0])}for(var a=0;a<t.length;a++){var i=t[a];var o=e[a];for(var s=0;s<i.length-1;s++){var l=i[s];var u=i[s+1];var f=o[s];var c=o[s+1];var v=[l,u,c,f,l];if(kl(r,v)){n=Math.min(n,dc(r,v))}}}return n===Infinity?false:n}function yc(e,t,r,n){var a=[];var o=[];var s=n[8]*t;var l=n[9]*t;var u=n[10]*t;var f=n[11]*t;var c=n[8]*r;var v=n[9]*r;var h=n[10]*r;var p=n[11]*r;for(var d=0,g=e;d<g.length;d+=1){var y=g[d];var m=[];var x=[];for(var b=0,_=y;b<_.length;b+=1){var w=_[b];var T=w.x;var k=w.y;var A=n[0]*T+n[4]*k+n[12];var M=n[1]*T+n[5]*k+n[13];var S=n[2]*T+n[6]*k+n[14];var E=n[3]*T+n[7]*k+n[15];var L=A+s;var C=M+l;var I=S+u;var P=E+f;var O=A+c;var D=M+v;var z=S+h;var R=E+p;var F=new i(L/P,C/P);F.z=I/P;m.push(F);var B=new i(O/R,D/R);B.z=z/R;x.push(B)}a.push(m);o.push(x)}return[a,o]}function mc(e,t,r,n){var a=[];for(var o=0,s=e;o<s.length;o+=1){var l=s[o];var u=[l.x,l.y,n,1];bu(u,u,t);a.push(new i(u[0]/u[3],u[1]/u[3]))}return a}var xc=rs([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4);var bc=xc.members;var _c=nc.VectorTileFeature.types;var wc=63;var Tc=Math.cos(75/2*(Math.PI/180));var kc=15;var Ac=20;var Mc=15;var Sc=1/2;var Ec=Math.pow(2,Mc-1)/Sc;var Lc=function e(t){this.zoom=t.zoom;this.overscaling=t.overscaling;this.layers=t.layers;this.layerIds=this.layers.map((function(e){return e.id}));this.index=t.index;this.hasPattern=false;this.patternFeatures=[];this.layoutVertexArray=new ls;this.indexArray=new ys;this.programConfigurations=new pl(bc,t.layers,t.zoom);this.segments=new Ns;this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};Lc.prototype.populate=function e(t,r,n){this.hasPattern=If("line",this.layers,r);var a=this.layers[0].layout.get("line-sort-key");var i=[];for(var o=0,s=t;o<s.length;o+=1){var l=s[o];var u=l.feature;var f=l.id;var c=l.index;var v=l.sourceLayerIndex;var h=this.layers[0]._featureFilter.needGeometry;var p={type:u.type,id:f,properties:u.properties,geometry:h?_l(u):[]};if(!this.layers[0]._featureFilter.filter(new Do(this.zoom),p,n)){continue}if(!h){p.geometry=_l(u)}var d=a?a.evaluate(p,{},n):undefined;var g={id:f,properties:u.properties,type:u.type,sourceLayerIndex:v,index:c,geometry:p.geometry,patterns:{},sortKey:d};i.push(g)}if(a){i.sort((function(e,t){return e.sortKey-t.sortKey}))}for(var y=0,m=i;y<m.length;y+=1){var x=m[y];var b=x;var _=b.geometry;var w=b.index;var T=b.sourceLayerIndex;if(this.hasPattern){var k=Pf("line",this.layers,x,this.zoom,r);this.patternFeatures.push(k)}else{this.addFeature(x,_,w,n,{})}var A=t[w].feature;r.featureIndex.insert(A,_,w,T,this.index)}};Lc.prototype.update=function e(t,r,n){if(!this.stateDependentLayers.length){return}this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,n)};Lc.prototype.addFeatures=function e(t,r,n){for(var a=0,i=this.patternFeatures;a<i.length;a+=1){var o=i[a];this.addFeature(o,o.geometry,o.index,r,n)}};Lc.prototype.isEmpty=function e(){return this.layoutVertexArray.length===0};Lc.prototype.uploadPending=function e(){return!this.uploaded||this.programConfigurations.needsUpload};Lc.prototype.upload=function e(t){if(!this.uploaded){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,bc);this.indexBuffer=t.createIndexBuffer(this.indexArray)}this.programConfigurations.upload(t);this.uploaded=true};Lc.prototype.destroy=function e(){if(!this.layoutVertexBuffer){return}this.layoutVertexBuffer.destroy();this.indexBuffer.destroy();this.programConfigurations.destroy();this.segments.destroy()};Lc.prototype.addFeature=function e(t,r,n,a,i){var o=this.layers[0].layout;var s=o.get("line-join").evaluate(t,{});var l=o.get("line-cap");var u=o.get("line-miter-limit");var f=o.get("line-round-limit");for(var c=0,v=r;c<v.length;c+=1){var h=v[c];this.addLine(h,t,s,l,u,f)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,a)};Lc.prototype.addLine=function e(t,r,n,a,i,o){this.distance=0;this.scaledDistance=0;this.totalDistance=0;if(!!r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+r.properties["mapbox_clip_start"];this.clipEnd=+r.properties["mapbox_clip_end"];for(var s=0;s<t.length-1;s++){this.totalDistance+=t[s].dist(t[s+1])}this.updateScaledDistance()}var l=_c[r.type]==="Polygon";var u=t.length;while(u>=2&&t[u-1].equals(t[u-2])){u--}var f=0;while(f<u-1&&t[f].equals(t[f+1])){f++}if(u<(l?3:2)){return}if(n==="bevel"){i=1.05}var c=this.overscaling<=16?kc*ml/(512*this.overscaling):0;var v=this.segments.prepareSegment(u*10,this.layoutVertexArray,this.indexArray);var h;var p=undefined;var d=undefined;var g=undefined;var y=undefined;this.e1=this.e2=-1;if(l){h=t[u-2];y=t[f].sub(h)._unit()._perp()}for(var m=f;m<u;m++){d=m===u-1?l?t[f+1]:undefined:t[m+1];if(d&&t[m].equals(d)){continue}if(y){g=y}if(h){p=h}h=t[m];y=d?d.sub(h)._unit()._perp():g;g=g||y;var x=g.add(y);if(x.x!==0||x.y!==0){x._unit()}var b=g.x*y.x+g.y*y.y;var _=x.x*y.x+x.y*y.y;var w=_!==0?1/_:Infinity;var T=2*Math.sqrt(2-2*_);var k=_<Tc&&p&&d;var A=g.x*y.y-g.y*y.x>0;if(k&&m>f){var M=h.dist(p);if(M>2*c){var S=h.sub(h.sub(p)._mult(c/M)._round());this.updateDistance(p,S);this.addCurrentVertex(S,g,0,0,v);p=S}}var E=p&&d;var L=E?n:l?"butt":a;if(E&&L==="round"){if(w<o){L="miter"}else if(w<=2){L="fakeround"}}if(L==="miter"&&w>i){L="bevel"}if(L==="bevel"){if(w>2){L="flipbevel"}if(w<i){L="miter"}}if(p){this.updateDistance(p,h)}if(L==="miter"){x._mult(w);this.addCurrentVertex(h,x,0,0,v)}else if(L==="flipbevel"){if(w>100){x=y.mult(-1)}else{var C=w*g.add(y).mag()/g.sub(y).mag();x._perp()._mult(C*(A?-1:1))}this.addCurrentVertex(h,x,0,0,v);this.addCurrentVertex(h,x.mult(-1),0,0,v)}else if(L==="bevel"||L==="fakeround"){var I=-Math.sqrt(w*w-1);var P=A?I:0;var O=A?0:I;if(p){this.addCurrentVertex(h,g,P,O,v)}if(L==="fakeround"){var D=Math.round(T*180/Math.PI/Ac);for(var z=1;z<D;z++){var R=z/D;if(R!==.5){var F=R-.5;var B=1.0904+b*(-3.2452+b*(3.55645-b*1.43519));var N=.848013+b*(-1.06021+b*.215638);R=R+R*F*(R-1)*(B*F*F+N)}var j=y.sub(g)._mult(R)._add(g)._unit()._mult(A?-1:1);this.addHalfVertex(h,j.x,j.y,false,A,0,v)}}if(d){this.addCurrentVertex(h,y,-P,-O,v)}}else if(L==="butt"){this.addCurrentVertex(h,x,0,0,v)}else if(L==="square"){var U=p?1:-1;this.addCurrentVertex(h,x,U,U,v)}else if(L==="round"){if(p){this.addCurrentVertex(h,g,0,0,v);this.addCurrentVertex(h,g,1,1,v,true)}if(d){this.addCurrentVertex(h,y,-1,-1,v,true);this.addCurrentVertex(h,y,0,0,v)}}if(k&&m<u-1){var V=h.dist(d);if(V>2*c){var H=h.add(d.sub(h)._mult(c/V)._round());this.updateDistance(h,H);this.addCurrentVertex(H,y,0,0,v);h=H}}}};Lc.prototype.addCurrentVertex=function e(t,r,n,a,i,o){if(o===void 0)o=false;var s=r.x+r.y*n;var l=r.y-r.x*n;var u=-r.x+r.y*a;var f=-r.y-r.x*a;this.addHalfVertex(t,s,l,o,false,n,i);this.addHalfVertex(t,u,f,o,true,-a,i);if(this.distance>Ec/2&&this.totalDistance===0){this.distance=0;this.addCurrentVertex(t,r,n,a,i,o)}};Lc.prototype.addHalfVertex=function e(t,r,n,a,i,o,s){var l=t.x;var u=t.y;var f=this.scaledDistance*Sc;this.layoutVertexArray.emplaceBack((l<<1)+(a?1:0),(u<<1)+(i?1:0),Math.round(wc*r)+128,Math.round(wc*n)+128,(o===0?0:o<0?-1:1)+1|(f&63)<<2,f>>6);var c=s.vertexLength++;if(this.e1>=0&&this.e2>=0){this.indexArray.emplaceBack(this.e1,this.e2,c);s.primitiveLength++}if(i){this.e2=c}else{this.e1=c}};Lc.prototype.updateScaledDistance=function e(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Ec-1):this.distance};Lc.prototype.updateDistance=function e(t,r){this.distance+=t.dist(r);this.updateScaledDistance()};eo("LineBucket",Lc,{omit:["layers","patternFeatures"]});var Cc=new Wo({"line-cap":new Ho(Yt["layout_line"]["line-cap"]),"line-join":new qo(Yt["layout_line"]["line-join"]),"line-miter-limit":new Ho(Yt["layout_line"]["line-miter-limit"]),"line-round-limit":new Ho(Yt["layout_line"]["line-round-limit"]),"line-sort-key":new qo(Yt["layout_line"]["line-sort-key"])});var Ic=new Wo({"line-opacity":new qo(Yt["paint_line"]["line-opacity"]),"line-color":new qo(Yt["paint_line"]["line-color"]),"line-translate":new Ho(Yt["paint_line"]["line-translate"]),"line-translate-anchor":new Ho(Yt["paint_line"]["line-translate-anchor"]),"line-width":new qo(Yt["paint_line"]["line-width"]),"line-gap-width":new qo(Yt["paint_line"]["line-gap-width"]),"line-offset":new qo(Yt["paint_line"]["line-offset"]),"line-blur":new qo(Yt["paint_line"]["line-blur"]),"line-dasharray":new Zo(Yt["paint_line"]["line-dasharray"]),"line-pattern":new Go(Yt["paint_line"]["line-pattern"]),"line-gradient":new Yo(Yt["paint_line"]["line-gradient"])});var Pc={paint:Ic,layout:Cc};var Oc=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.possiblyEvaluate=function t(r,n){n=new Do(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition});return e.prototype.possiblyEvaluate.call(this,r,n)};t.prototype.evaluate=function t(r,n,a,i){n=g({},n,{zoom:Math.floor(n.zoom)});return e.prototype.evaluate.call(this,r,n,a,i)};return t}(qo);var Dc=new Oc(Pc.paint.properties["line-width"].specification);Dc.useIntegerZoom=true;var zc=function(e){function t(t){e.call(this,t,Pc)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._handleSpecialPaintPropertyUpdate=function e(t){if(t==="line-gradient"){this._updateGradient()}};t.prototype._updateGradient=function e(){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Fu(t,"lineProgress");this.gradientTexture=null};t.prototype.recalculate=function t(r,n){e.prototype.recalculate.call(this,r,n);this.paint._values["line-floorwidth"]=Dc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)};t.prototype.createBucket=function e(t){return new Lc(t)};t.prototype.queryRadius=function e(t){var r=t;var n=Rc(Fl("line-width",this,r),Fl("line-gap-width",this,r));var a=Fl("line-offset",this,r);return n/2+Math.abs(a)+Bl(this.paint.get("line-translate"))};t.prototype.queryIntersectsFeature=function e(t,r,n,a,i,o,s){var l=Nl(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,s);var u=s/2*Rc(this.paint.get("line-width").evaluate(r,n),this.paint.get("line-gap-width").evaluate(r,n));var f=this.paint.get("line-offset").evaluate(r,n);if(f){a=Fc(a,f*s)}return Sl(l,a,u)};t.prototype.isTileClipped=function e(){return true};return t}(Jo);function Rc(e,t){if(t>0){return t+2*e}else{return e}}function Fc(e,t){var r=[];var n=new i(0,0);for(var a=0;a<e.length;a++){var o=e[a];var s=[];for(var l=0;l<o.length;l++){var u=o[l-1];var f=o[l];var c=o[l+1];var v=l===0?n:f.sub(u)._unit()._perp();var h=l===o.length-1?n:c.sub(f)._unit()._perp();var p=v._add(h)._unit();var d=p.x*h.x+p.y*h.y;p._mult(1/d);s.push(p._mult(t)._add(f))}r.push(s)}return r}var Bc=rs([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4);var Nc=rs([{name:"a_projected_pos",components:3,type:"Float32"}],4);var jc=rs([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var Uc=rs([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);var Vc=rs([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var Hc=rs([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);var qc=rs([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);var Gc=rs([{name:"triangle",components:3,type:"Uint16"}]);var Zc=rs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]);var Yc=rs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]);var Wc=rs([{type:"Float32",name:"offsetX"}]);var Xc=rs([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function Jc(e,t,r){var n=t.layout.get("text-transform").evaluate(r,{});if(n==="uppercase"){e=e.toLocaleUpperCase()}else if(n==="lowercase"){e=e.toLocaleLowerCase()}if(Po.applyArabicShaping){e=Po.applyArabicShaping(e)}return e}function Kc(e,t,r){e.sections.forEach((function(e){e.text=Jc(e.text,t,r)}));return e}function $c(e){var t={};var r={};var n=[];var a=0;function i(t){n.push(e[t]);a++}function o(e,t,a){var i=r[e];delete r[e];r[t]=i;n[i].geometry[0].pop();n[i].geometry[0]=n[i].geometry[0].concat(a[0]);return i}function s(e,r,a){var i=t[r];delete t[r];t[e]=i;n[i].geometry[0].shift();n[i].geometry[0]=a[0].concat(n[i].geometry[0]);return i}function l(e,t,r){var n=r?t[0][t[0].length-1]:t[0][0];return e+":"+n.x+":"+n.y}for(var u=0;u<e.length;u++){var f=e[u];var c=f.geometry;var v=f.text?f.text.toString():null;if(!v){i(u);continue}var h=l(v,c),p=l(v,c,true);if(h in r&&p in t&&r[h]!==t[p]){var d=s(h,p,c);var g=o(h,p,n[d].geometry);delete t[h];delete r[p];r[l(v,n[g].geometry,true)]=g;n[d].geometry=null}else if(h in r){o(h,p,c)}else if(p in t){s(h,p,c)}else{i(u);t[h]=a-1;r[p]=a-1}}return n.filter((function(e){return e.geometry}))}var Qc={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function ev(e){var t="";for(var r=0;r<e.length;r++){var n=e.charCodeAt(r+1)||null;var a=e.charCodeAt(r-1)||null;var i=(!n||!po(n)||Qc[e[r+1]])&&(!a||!po(a)||Qc[e[r-1]]);if(i&&Qc[e[r]]){t+=Qc[e[r]]}else{t+=e[r]}}return t}var tv=24;var rv=function(e,t,r,n,a){var i,o;var s=a*8-n-1;var l=(1<<s)-1;var u=l>>1;var f=-7;var c=r?a-1:0;var v=r?-1:1;var h=e[t+c];c+=v;i=h&(1<<-f)-1;h>>=-f;f+=s;for(;f>0;i=i*256+e[t+c],c+=v,f-=8){}o=i&(1<<-f)-1;i>>=-f;f+=n;for(;f>0;o=o*256+e[t+c],c+=v,f-=8){}if(i===0){i=1-u}else if(i===l){return o?NaN:(h?-1:1)*Infinity}else{o=o+Math.pow(2,n);i=i-u}return(h?-1:1)*o*Math.pow(2,i-n)};var nv=function(e,t,r,n,a,i){var o,s,l;var u=i*8-a-1;var f=(1<<u)-1;var c=f>>1;var v=a===23?Math.pow(2,-24)-Math.pow(2,-77):0;var h=n?0:i-1;var p=n?1:-1;var d=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){s=isNaN(t)?1:0;o=f}else{o=Math.floor(Math.log(t)/Math.LN2);if(t*(l=Math.pow(2,-o))<1){o--;l*=2}if(o+c>=1){t+=v/l}else{t+=v*Math.pow(2,1-c)}if(t*l>=2){o++;l/=2}if(o+c>=f){s=0;o=f}else if(o+c>=1){s=(t*l-1)*Math.pow(2,a);o=o+c}else{s=t*Math.pow(2,c-1)*Math.pow(2,a);o=0}}for(;a>=8;e[r+h]=s&255,h+=p,s/=256,a-=8){}o=o<<a|s;u+=a;for(;u>0;e[r+h]=o&255,h+=p,o/=256,u-=8){}e[r+h-p]|=d*128};var av={read:rv,write:nv};var iv=ov;function ov(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0);this.pos=0;this.type=0;this.length=this.buf.length}ov.Varint=0;ov.Fixed64=1;ov.Bytes=2;ov.Fixed32=5;var sv=(1<<16)*(1<<16),lv=1/sv;var uv=12;var fv=typeof TextDecoder==="undefined"?null:new TextDecoder("utf8");ov.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){r=r||this.length;while(this.pos<r){var n=this.readVarint(),a=n>>3,i=this.pos;this.type=n&7;e(a,t,this);if(this.pos===i){this.skip(n)}}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Sv(this.buf,this.pos);this.pos+=4;return e},readSFixed32:function(){var e=Lv(this.buf,this.pos);this.pos+=4;return e},readFixed64:function(){var e=Sv(this.buf,this.pos)+Sv(this.buf,this.pos+4)*sv;this.pos+=8;return e},readSFixed64:function(){var e=Sv(this.buf,this.pos)+Lv(this.buf,this.pos+4)*sv;this.pos+=8;return e},readFloat:function(){var e=av.read(this.buf,this.pos,true,23,4);this.pos+=4;return e},readDouble:function(){var e=av.read(this.buf,this.pos,true,52,8);this.pos+=8;return e},readVarint:function(e){var t=this.buf,r,n;n=t[this.pos++];r=n&127;if(n<128){return r}n=t[this.pos++];r|=(n&127)<<7;if(n<128){return r}n=t[this.pos++];r|=(n&127)<<14;if(n<128){return r}n=t[this.pos++];r|=(n&127)<<21;if(n<128){return r}n=t[this.pos];r|=(n&15)<<28;return cv(r,e,this)},readVarint64:function(){return this.readVarint(true)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos;var t=this.pos;this.pos=e;if(e-t>=uv&&fv){return Iv(this.buf,t,e)}return Cv(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);this.pos=e;return t},readPackedVarint:function(e,t){if(this.type!==ov.Bytes){return e.push(this.readVarint(t))}var r=vv(this);e=e||[];while(this.pos<r){e.push(this.readVarint(t))}return e},readPackedSVarint:function(e){if(this.type!==ov.Bytes){return e.push(this.readSVarint())}var t=vv(this);e=e||[];while(this.pos<t){e.push(this.readSVarint())}return e},readPackedBoolean:function(e){if(this.type!==ov.Bytes){return e.push(this.readBoolean())}var t=vv(this);e=e||[];while(this.pos<t){e.push(this.readBoolean())}return e},readPackedFloat:function(e){if(this.type!==ov.Bytes){return e.push(this.readFloat())}var t=vv(this);e=e||[];while(this.pos<t){e.push(this.readFloat())}return e},readPackedDouble:function(e){if(this.type!==ov.Bytes){return e.push(this.readDouble())}var t=vv(this);e=e||[];while(this.pos<t){e.push(this.readDouble())}return e},readPackedFixed32:function(e){if(this.type!==ov.Bytes){return e.push(this.readFixed32())}var t=vv(this);e=e||[];while(this.pos<t){e.push(this.readFixed32())}return e},readPackedSFixed32:function(e){if(this.type!==ov.Bytes){return e.push(this.readSFixed32())}var t=vv(this);e=e||[];while(this.pos<t){e.push(this.readSFixed32())}return e},readPackedFixed64:function(e){if(this.type!==ov.Bytes){return e.push(this.readFixed64())}var t=vv(this);e=e||[];while(this.pos<t){e.push(this.readFixed64())}return e},readPackedSFixed64:function(e){if(this.type!==ov.Bytes){return e.push(this.readSFixed64())}var t=vv(this);e=e||[];while(this.pos<t){e.push(this.readSFixed64())}return e},skip:function(e){var t=e&7;if(t===ov.Varint){while(this.buf[this.pos++]>127){}}else if(t===ov.Bytes){this.pos=this.readVarint()+this.pos}else if(t===ov.Fixed32){this.pos+=4}else if(t===ov.Fixed64){this.pos+=8}else{throw new Error("Unimplemented type: "+t)}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){var t=this.length||16;while(t<this.pos+e){t*=2}if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf);this.buf=r;this.length=t}},finish:function(){this.length=this.pos;this.pos=0;return this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4);Ev(this.buf,e,this.pos);this.pos+=4},writeSFixed32:function(e){this.realloc(4);Ev(this.buf,e,this.pos);this.pos+=4},writeFixed64:function(e){this.realloc(8);Ev(this.buf,e&-1,this.pos);Ev(this.buf,Math.floor(e*lv),this.pos+4);this.pos+=8},writeSFixed64:function(e){this.realloc(8);Ev(this.buf,e&-1,this.pos);Ev(this.buf,Math.floor(e*lv),this.pos+4);this.pos+=8},writeVarint:function(e){e=+e||0;if(e>268435455||e<0){pv(e,this);return}this.realloc(4);this.buf[this.pos++]=e&127|(e>127?128:0);if(e<=127){return}this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0);if(e<=127){return}this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0);if(e<=127){return}this.buf[this.pos++]=e>>>7&127},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e);this.realloc(e.length*4);this.pos++;var t=this.pos;this.pos=Pv(this.buf,e,this.pos);var r=this.pos-t;if(r>=128){yv(t,r,this)}this.pos=t-1;this.writeVarint(r);this.pos+=r},writeFloat:function(e){this.realloc(4);av.write(this.buf,e,this.pos,true,23,4);this.pos+=4},writeDouble:function(e){this.realloc(8);av.write(this.buf,e,this.pos,true,52,8);this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t);this.realloc(t);for(var r=0;r<t;r++){this.buf[this.pos++]=e[r]}},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var n=this.pos-r;if(n>=128){yv(r,n,this)}this.pos=r-1;this.writeVarint(n);this.pos+=n},writeMessage:function(e,t,r){this.writeTag(e,ov.Bytes);this.writeRawMessage(t,r)},writePackedVarint:function(e,t){if(t.length){this.writeMessage(e,mv,t)}},writePackedSVarint:function(e,t){if(t.length){this.writeMessage(e,xv,t)}},writePackedBoolean:function(e,t){if(t.length){this.writeMessage(e,wv,t)}},writePackedFloat:function(e,t){if(t.length){this.writeMessage(e,bv,t)}},writePackedDouble:function(e,t){if(t.length){this.writeMessage(e,_v,t)}},writePackedFixed32:function(e,t){if(t.length){this.writeMessage(e,Tv,t)}},writePackedSFixed32:function(e,t){if(t.length){this.writeMessage(e,kv,t)}},writePackedFixed64:function(e,t){if(t.length){this.writeMessage(e,Av,t)}},writePackedSFixed64:function(e,t){if(t.length){this.writeMessage(e,Mv,t)}},writeBytesField:function(e,t){this.writeTag(e,ov.Bytes);this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,ov.Fixed32);this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,ov.Fixed32);this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,ov.Fixed64);this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,ov.Fixed64);this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,ov.Varint);this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,ov.Varint);this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,ov.Bytes);this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,ov.Fixed32);this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,ov.Fixed64);this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};function cv(e,t,r){var n=r.buf,a,i;i=n[r.pos++];a=(i&112)>>4;if(i<128){return hv(e,a,t)}i=n[r.pos++];a|=(i&127)<<3;if(i<128){return hv(e,a,t)}i=n[r.pos++];a|=(i&127)<<10;if(i<128){return hv(e,a,t)}i=n[r.pos++];a|=(i&127)<<17;if(i<128){return hv(e,a,t)}i=n[r.pos++];a|=(i&127)<<24;if(i<128){return hv(e,a,t)}i=n[r.pos++];a|=(i&1)<<31;if(i<128){return hv(e,a,t)}throw new Error("Expected varint not more than 10 bytes")}function vv(e){return e.type===ov.Bytes?e.readVarint()+e.pos:e.pos+1}function hv(e,t,r){if(r){return t*4294967296+(e>>>0)}return(t>>>0)*4294967296+(e>>>0)}function pv(e,t){var r,n;if(e>=0){r=e%4294967296|0;n=e/4294967296|0}else{r=~(-e%4294967296);n=~(-e/4294967296);if(r^4294967295){r=r+1|0}else{r=0;n=n+1|0}}if(e>=0x10000000000000000||e<-0x10000000000000000){throw new Error("Given varint doesn't fit into 10 bytes")}t.realloc(10);dv(r,n,t);gv(n,t)}function dv(e,t,r){r.buf[r.pos++]=e&127|128;e>>>=7;r.buf[r.pos++]=e&127|128;e>>>=7;r.buf[r.pos++]=e&127|128;e>>>=7;r.buf[r.pos++]=e&127|128;e>>>=7;r.buf[r.pos]=e&127}function gv(e,t){var r=(e&7)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0);if(!e){return}t.buf[t.pos++]=e&127|((e>>>=7)?128:0);if(!e){return}t.buf[t.pos++]=e&127|((e>>>=7)?128:0);if(!e){return}t.buf[t.pos++]=e&127|((e>>>=7)?128:0);if(!e){return}t.buf[t.pos++]=e&127|((e>>>=7)?128:0);if(!e){return}t.buf[t.pos++]=e&127}function yv(e,t,r){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));r.realloc(n);for(var a=r.pos-1;a>=e;a--){r.buf[a+n]=r.buf[a]}}function mv(e,t){for(var r=0;r<e.length;r++){t.writeVarint(e[r])}}function xv(e,t){for(var r=0;r<e.length;r++){t.writeSVarint(e[r])}}function bv(e,t){for(var r=0;r<e.length;r++){t.writeFloat(e[r])}}function _v(e,t){for(var r=0;r<e.length;r++){t.writeDouble(e[r])}}function wv(e,t){for(var r=0;r<e.length;r++){t.writeBoolean(e[r])}}function Tv(e,t){for(var r=0;r<e.length;r++){t.writeFixed32(e[r])}}function kv(e,t){for(var r=0;r<e.length;r++){t.writeSFixed32(e[r])}}function Av(e,t){for(var r=0;r<e.length;r++){t.writeFixed64(e[r])}}function Mv(e,t){for(var r=0;r<e.length;r++){t.writeSFixed64(e[r])}}function Sv(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function Ev(e,t,r){e[r]=t;e[r+1]=t>>>8;e[r+2]=t>>>16;e[r+3]=t>>>24}function Lv(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function Cv(e,t,r){var n="";var a=t;while(a<r){var i=e[a];var o=null;var s=i>239?4:i>223?3:i>191?2:1;if(a+s>r){break}var l,u,f;if(s===1){if(i<128){o=i}}else if(s===2){l=e[a+1];if((l&192)===128){o=(i&31)<<6|l&63;if(o<=127){o=null}}}else if(s===3){l=e[a+1];u=e[a+2];if((l&192)===128&&(u&192)===128){o=(i&15)<<12|(l&63)<<6|u&63;if(o<=2047||o>=55296&&o<=57343){o=null}}}else if(s===4){l=e[a+1];u=e[a+2];f=e[a+3];if((l&192)===128&&(u&192)===128&&(f&192)===128){o=(i&15)<<18|(l&63)<<12|(u&63)<<6|f&63;if(o<=65535||o>=1114112){o=null}}}if(o===null){o=65533;s=1}else if(o>65535){o-=65536;n+=String.fromCharCode(o>>>10&1023|55296);o=56320|o&1023}n+=String.fromCharCode(o);a+=s}return n}function Iv(e,t,r){return fv.decode(e.subarray(t,r))}function Pv(e,t,r){for(var n=0,a,i;n<t.length;n++){a=t.charCodeAt(n);if(a>55295&&a<57344){if(i){if(a<56320){e[r++]=239;e[r++]=191;e[r++]=189;i=a;continue}else{a=i-55296<<10|a-56320|65536;i=null}}else{if(a>56319||n+1===t.length){e[r++]=239;e[r++]=191;e[r++]=189}else{i=a}continue}}else if(i){e[r++]=239;e[r++]=191;e[r++]=189;i=null}if(a<128){e[r++]=a}else{if(a<2048){e[r++]=a>>6|192}else{if(a<65536){e[r++]=a>>12|224}else{e[r++]=a>>18|240;e[r++]=a>>12&63|128}e[r++]=a>>6&63|128}e[r++]=a&63|128}}return r}var Ov=3;function Dv(e,t,r){if(e===1){r.readMessage(zv,t)}}function zv(e,t,r){if(e===3){var n=r.readMessage(Rv,{});var a=n.id;var i=n.bitmap;var o=n.width;var s=n.height;var l=n.left;var u=n.top;var f=n.advance;t.push({id:a,bitmap:new Ou({width:o+2*Ov,height:s+2*Ov},i),metrics:{width:o,height:s,left:l,top:u,advance:f}})}}function Rv(e,t,r){if(e===1){t.id=r.readVarint()}else if(e===2){t.bitmap=r.readBytes()}else if(e===3){t.width=r.readVarint()}else if(e===4){t.height=r.readVarint()}else if(e===5){t.left=r.readSVarint()}else if(e===6){t.top=r.readSVarint()}else if(e===7){t.advance=r.readVarint()}}function Fv(e){return new iv(e).readFields(Dv,[])}var Bv=Ov;function Nv(e){var t=0;var r=0;for(var n=0,a=e;n<a.length;n+=1){var i=a[n];t+=i.w*i.h;r=Math.max(r,i.w)}e.sort((function(e,t){return t.h-e.h}));var o=Math.max(Math.ceil(Math.sqrt(t/.95)),r);var s=[{x:0,y:0,w:o,h:Infinity}];var l=0;var u=0;for(var f=0,c=e;f<c.length;f+=1){var v=c[f];for(var h=s.length-1;h>=0;h--){var p=s[h];if(v.w>p.w||v.h>p.h){continue}v.x=p.x;v.y=p.y;u=Math.max(u,v.y+v.h);l=Math.max(l,v.x+v.w);if(v.w===p.w&&v.h===p.h){var d=s.pop();if(h<s.length){s[h]=d}}else if(v.h===p.h){p.x+=v.w;p.w-=v.w}else if(v.w===p.w){p.y+=v.h;p.h-=v.h}else{s.push({x:p.x+v.w,y:p.y,w:p.w-v.w,h:v.h});p.y+=v.h;p.h-=v.h}break}}return{w:l,h:u,fill:t/(l*u)||0}}var jv=1;var Uv=function e(t,r){var n=r.pixelRatio;var a=r.version;var i=r.stretchX;var o=r.stretchY;var s=r.content;this.paddedRect=t;this.pixelRatio=n;this.stretchX=i;this.stretchY=o;this.content=s;this.version=a};var Vv={tl:{configurable:true},br:{configurable:true},tlbr:{configurable:true},displaySize:{configurable:true}};Vv.tl.get=function(){return[this.paddedRect.x+jv,this.paddedRect.y+jv]};Vv.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-jv,this.paddedRect.y+this.paddedRect.h-jv]};Vv.tlbr.get=function(){return this.tl.concat(this.br)};Vv.displaySize.get=function(){return[(this.paddedRect.w-jv*2)/this.pixelRatio,(this.paddedRect.h-jv*2)/this.pixelRatio]};Object.defineProperties(Uv.prototype,Vv);var Hv=function e(t,r){var n={},a={};this.haveRenderCallbacks=[];var i=[];this.addImages(t,n,i);this.addImages(r,a,i);var o=Nv(i);var s=o.w;var l=o.h;var u=new Du({width:s||1,height:l||1});for(var f in t){var c=t[f];var v=n[f].paddedRect;Du.copy(c.data,u,{x:0,y:0},{x:v.x+jv,y:v.y+jv},c.data)}for(var h in r){var p=r[h];var d=a[h].paddedRect;var g=d.x+jv,y=d.y+jv,m=p.data.width,x=p.data.height;Du.copy(p.data,u,{x:0,y:0},{x:g,y},p.data);Du.copy(p.data,u,{x:0,y:x-1},{x:g,y:y-1},{width:m,height:1});Du.copy(p.data,u,{x:0,y:0},{x:g,y:y+x},{width:m,height:1});Du.copy(p.data,u,{x:m-1,y:0},{x:g-1,y},{width:1,height:x});Du.copy(p.data,u,{x:0,y:0},{x:g+m,y},{width:1,height:x})}this.image=u;this.iconPositions=n;this.patternPositions=a};Hv.prototype.addImages=function e(t,r,n){for(var a in t){var i=t[a];var o={x:0,y:0,w:i.data.width+2*jv,h:i.data.height+2*jv};n.push(o);r[a]=new Uv(o,i);if(i.hasRenderCallback){this.haveRenderCallbacks.push(a)}}};Hv.prototype.patchUpdatedImages=function e(t,r){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var n in t.updatedImages){this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),r);this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),r)}};Hv.prototype.patchUpdatedImage=function e(t,r,n){if(!t||!r){return}if(t.version===r.version){return}t.version=r.version;var a=t.tl;var i=a[0];var o=a[1];n.update(r.data,undefined,{x:i,y:o})};eo("ImagePosition",Uv);eo("ImageAtlas",Hv);var qv={horizontal:1,vertical:2,horizontalOnly:3};var Gv=-17;function Zv(e){for(var t=0,r=e;t<r.length;t+=1){var n=r[t];if(n.positionedGlyphs.length!==0){return false}}return true}var Yv=57344;var Wv=63743;var Xv=function e(){this.scale=1;this.fontStack="";this.imageName=null};Xv.forText=function e(t,r){var n=new Xv;n.scale=t||1;n.fontStack=r;return n};Xv.forImage=function e(t){var r=new Xv;r.imageName=t;return r};var Jv=function e(){this.text="";this.sectionIndex=[];this.sections=[];this.imageSectionID=null};Jv.fromFeature=function e(t,r){var n=new Jv;for(var a=0;a<t.sections.length;a++){var i=t.sections[a];if(!i.image){n.addTextSection(i,r)}else{n.addImageSection(i)}}return n};Jv.prototype.length=function e(){return this.text.length};Jv.prototype.getSection=function e(t){return this.sections[this.sectionIndex[t]]};Jv.prototype.getSectionIndex=function e(t){return this.sectionIndex[t]};Jv.prototype.getCharCode=function e(t){return this.text.charCodeAt(t)};Jv.prototype.verticalizePunctuation=function e(){this.text=ev(this.text)};Jv.prototype.trim=function e(){var t=0;for(var r=0;r<this.text.length&&Qv[this.text.charCodeAt(r)];r++){t++}var n=this.text.length;for(var a=this.text.length-1;a>=0&&a>=t&&Qv[this.text.charCodeAt(a)];a--){n--}this.text=this.text.substring(t,n);this.sectionIndex=this.sectionIndex.slice(t,n)};Jv.prototype.substring=function e(t,r){var e=new Jv;e.text=this.text.substring(t,r);e.sectionIndex=this.sectionIndex.slice(t,r);e.sections=this.sections;return e};Jv.prototype.toString=function e(){return this.text};Jv.prototype.getMaxScale=function e(){var t=this;return this.sectionIndex.reduce((function(e,r){return Math.max(e,t.sections[r].scale)}),0)};Jv.prototype.addTextSection=function e(t,r){this.text+=t.text;this.sections.push(Xv.forText(t.scale,t.fontStack||r));var n=this.sections.length-1;for(var a=0;a<t.text.length;++a){this.sectionIndex.push(n)}};Jv.prototype.addImageSection=function e(t){var r=t.image?t.image.name:"";if(r.length===0){L("Can't add FormattedSection with an empty image.");return}var n=this.getNextImageSectionCharCode();if(!n){L("Reached maximum number of images "+(Wv-Yv+2));return}this.text+=String.fromCharCode(n);this.sections.push(Xv.forImage(r));this.sectionIndex.push(this.sections.length-1)};Jv.prototype.getNextImageSectionCharCode=function e(){if(!this.imageSectionID){this.imageSectionID=Yv;return this.imageSectionID}if(this.imageSectionID>=Wv){return null}return++this.imageSectionID};function Kv(e,t){var r=[];var n=e.text;var a=0;for(var i=0,o=t;i<o.length;i+=1){var s=o[i];r.push(e.substring(a,s));a=s}if(a<n.length){r.push(e.substring(a,n.length))}return r}function $v(e,t,r,n,a,i,o,s,l,u,f,c,v,h,p,d){var g=Jv.fromFeature(e,a);if(c===qv.vertical){g.verticalizePunctuation()}var y;var m=Po.processBidirectionalText;var x=Po.processStyledBidirectionalText;if(m&&g.sections.length===1){y=[];var b=m(g.toString(),sh(g,u,i,t,n,h,p));for(var _=0,w=b;_<w.length;_+=1){var T=w[_];var k=new Jv;k.text=T;k.sections=g.sections;for(var A=0;A<T.length;A++){k.sectionIndex.push(0)}y.push(k)}}else if(x){y=[];var M=x(g.text,g.sectionIndex,sh(g,u,i,t,n,h,p));for(var S=0,E=M;S<E.length;S+=1){var L=E[S];var C=new Jv;C.text=L[0];C.sectionIndex=L[1];C.sections=g.sections;y.push(C)}}else{y=Kv(g,sh(g,u,i,t,n,h,p))}var I=[];var P={positionedLines:I,text:g.toString(),top:f[1],bottom:f[1],left:f[0],right:f[0],writingMode:c,iconsInText:false,verticalizable:false};uh(P,t,r,n,y,o,s,l,c,u,v,d);if(Zv(I)){return false}return P}var Qv={};Qv[9]=true;Qv[10]=true;Qv[11]=true;Qv[12]=true;Qv[13]=true;Qv[32]=true;var eh={};eh[10]=true;eh[32]=true;eh[38]=true;eh[40]=true;eh[41]=true;eh[43]=true;eh[45]=true;eh[47]=true;eh[173]=true;eh[183]=true;eh[8203]=true;eh[8208]=true;eh[8211]=true;eh[8231]=true;function th(e,t,r,n,a,i){if(!t.imageName){var o=r[t.fontStack];var s=o&&o[e];if(!s){return 0}return s.metrics.advance*t.scale+a}else{var l=n[t.imageName];if(!l){return 0}return l.displaySize[0]*t.scale*tv/i+a}}function rh(e,t,r,n,a,i){var o=0;for(var s=0;s<e.length();s++){var l=e.getSection(s);o+=th(e.getCharCode(s),l,n,a,t,i)}var u=Math.max(1,Math.ceil(o/r));return o/u}function nh(e,t,r,n){var a=Math.pow(e-t,2);if(n){if(e<t){return a/2}else{return a*2}}return a+Math.abs(r)*r}function ah(e,t,r){var n=0;if(e===10){n-=1e4}if(r){n+=150}if(e===40||e===65288){n+=50}if(t===41||t===65289){n+=50}return n}function ih(e,t,r,n,a,i){var o=null;var s=nh(t,r,a,i);for(var l=0,u=n;l<u.length;l+=1){var f=u[l];var c=t-f.x;var v=nh(c,r,a,i)+f.badness;if(v<=s){o=f;s=v}}return{index:e,x:t,priorBreak:o,badness:s}}function oh(e){if(!e){return[]}return oh(e.priorBreak).concat(e.index)}function sh(e,t,r,n,a,i,o){if(i!=="point"){return[]}if(!e){return[]}var s=[];var l=rh(e,t,r,n,a,o);var u=e.text.indexOf("")>=0;var f=0;for(var c=0;c<e.length();c++){var v=e.getSection(c);var h=e.getCharCode(c);if(!Qv[h]){f+=th(h,v,n,a,t,o)}if(c<e.length()-1){var p=co(h);if(eh[h]||p||v.imageName){s.push(ih(c+1,f,l,s,ah(h,e.getCharCode(c+1),p&&u),false))}}}return oh(ih(e.length(),f,l,s,0,true))}function lh(e){var t=.5,r=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0;break}switch(e){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0;break}return{horizontalAlign:t,verticalAlign:r}}function uh(e,t,r,n,a,i,o,s,l,u,f,c){var v=0;var h=Gv;var p=0;var d=0;var g=s==="right"?1:s==="left"?0:.5;var y=0;for(var m=0,x=a;m<x.length;m+=1){var b=x[m];b.trim();var _=b.getMaxScale();var w=(_-1)*tv;var T={positionedGlyphs:[],lineOffset:0};e.positionedLines[y]=T;var k=T.positionedGlyphs;var A=0;if(!b.length()){h+=i;++y;continue}for(var M=0;M<b.length();M++){var S=b.getSection(M);var E=b.getSectionIndex(M);var L=b.getCharCode(M);var C=0;var I=null;var P=null;var O=null;var D=tv;var z=!(l===qv.horizontal||!f&&!vo(L)||f&&(Qv[L]||go(L)));if(!S.imageName){var R=r[S.fontStack];var F=R&&R[L];if(F&&F.rect){P=F.rect;I=F.metrics}else{var B=t[S.fontStack];var N=B&&B[L];if(!N){continue}I=N.metrics}C=(_-S.scale)*tv}else{var j=n[S.imageName];if(!j){continue}O=S.imageName;e.iconsInText=e.iconsInText||true;P=j.paddedRect;var U=j.displaySize;S.scale=S.scale*tv/c;I={width:U[0],height:U[1],left:jv,top:-Bv,advance:z?U[1]:U[0]};var V=tv-U[1]*S.scale;C=w+V;D=I.advance;var H=z?U[0]*S.scale-tv*_:U[1]*S.scale-tv*_;if(H>0&&H>A){A=H}}if(!z){k.push({glyph:L,imageName:O,x:v,y:h+C,vertical:z,scale:S.scale,fontStack:S.fontStack,sectionIndex:E,metrics:I,rect:P});v+=I.advance*S.scale+u}else{e.verticalizable=true;k.push({glyph:L,imageName:O,x:v,y:h+C,vertical:z,scale:S.scale,fontStack:S.fontStack,sectionIndex:E,metrics:I,rect:P});v+=D*S.scale+u}}if(k.length!==0){var q=v-u;p=Math.max(q,p);fh(k,0,k.length-1,g,A)}v=0;var G=i*_+A;T.lineOffset=Math.max(A,w);h+=G;d=Math.max(G,d);++y}var Z=h-Gv;var Y=lh(o);var W=Y.horizontalAlign;var X=Y.verticalAlign;ch(e.positionedLines,g,W,X,p,d,i,Z,a.length);e.top+=-X*Z;e.bottom=e.top+Z;e.left+=-W*p;e.right=e.left+p}function fh(e,t,r,n,a){if(!n&&!a){return}var i=e[r];var o=i.metrics.advance*i.scale;var s=(e[r].x+o)*n;for(var l=t;l<=r;l++){e[l].x-=s;e[l].y+=a}}function ch(e,t,r,n,a,i,o,s,l){var u=(t-r)*a;var f=0;if(i!==o){f=-s*n-Gv}else{f=(-n*l+.5)*o}for(var c=0,v=e;c<v.length;c+=1){var h=v[c];for(var p=0,d=h.positionedGlyphs;p<d.length;p+=1){var g=d[p];g.x+=u;g.y+=f}}}function vh(e,t,r){var n=lh(r);var a=n.horizontalAlign;var i=n.verticalAlign;var o=t[0];var s=t[1];var l=o-e.displaySize[0]*a;var u=l+e.displaySize[0];var f=s-e.displaySize[1]*i;var c=f+e.displaySize[1];return{image:e,top:f,bottom:c,left:l,right:u}}function hh(e,t,r,n,a,i){var o=e.image;var s;if(o.content){var l=o.content;var u=o.pixelRatio||1;s=[l[0]/u,l[1]/u,o.displaySize[0]-l[2]/u,o.displaySize[1]-l[3]/u]}var f=t.left*i;var c=t.right*i;var v,h,p,d;if(r==="width"||r==="both"){d=a[0]+f-n[3];h=a[0]+c+n[1]}else{d=a[0]+(f+c-o.displaySize[0])/2;h=d+o.displaySize[0]}var g=t.top*i;var y=t.bottom*i;if(r==="height"||r==="both"){v=a[1]+g-n[0];p=a[1]+y+n[2]}else{v=a[1]+(g+y-o.displaySize[1])/2;p=v+o.displaySize[1]}return{image:o,top:v,right:h,bottom:p,left:d,collisionPadding:s}}var ph=function(e){function t(t,r,n,a){e.call(this,t,r);this.angle=n;if(a!==undefined){this.segment=a}}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.clone=function e(){return new t(this.x,this.y,this.angle,this.segment)};return t}(i);eo("Anchor",ph);var dh=128;function gh(e,t){var r=t.expression;if(r.kind==="constant"){var n=r.evaluate(new Do(e+1));return{kind:"constant",layoutSize:n}}else if(r.kind==="source"){return{kind:"source"}}else{var a=r.zoomStops;var i=r.interpolationType;var o=0;while(o<a.length&&a[o]<=e){o++}o=Math.max(0,o-1);var s=o;while(s<a.length&&a[s]<e+1){s++}s=Math.min(a.length-1,s);var l=a[o];var u=a[s];if(r.kind==="composite"){return{kind:"composite",minZoom:l,maxZoom:u,interpolationType:i}}var f=r.evaluate(new Do(l));var c=r.evaluate(new Do(u));return{kind:"camera",minZoom:l,maxZoom:u,minSize:f,maxSize:c,interpolationType:i}}}function yh(e,t,r){var n=t.uSize;var a=t.uSizeT;var i=r.lowerSize;var o=r.upperSize;if(e.kind==="source"){return i/dh}else if(e.kind==="composite"){return wn(i/dh,o/dh,a)}return n}function mh(e,t){var r=0;var n=0;if(e.kind==="constant"){n=e.layoutSize}else if(e.kind!=="source"){var a=e.interpolationType;var i=e.minZoom;var o=e.maxZoom;var s=!a?0:c(Xn.interpolationFactor(a,t,i,o),0,1);if(e.kind==="camera"){n=wn(e.minSize,e.maxSize,s)}else{r=s}}return{uSizeT:r,uSize:n}}var xh=Object.freeze({__proto__:null,getSizeData:gh,evaluateSizeForFeature:yh,evaluateSizeForZoom:mh,SIZE_PACK_FACTOR:dh});function bh(e,t,r,n,a){if(t.segment===undefined){return true}var i=t;var o=t.segment+1;var s=0;while(s>-r/2){o--;if(o<0){return false}s-=e[o].dist(i);i=e[o]}s+=e[o].dist(e[o+1]);o++;var l=[];var u=0;while(s<r/2){var f=e[o-1];var c=e[o];var v=e[o+1];if(!v){return false}var h=f.angleTo(c)-c.angleTo(v);h=Math.abs((h+3*Math.PI)%(Math.PI*2)-Math.PI);l.push({distance:s,angleDelta:h});u+=h;while(s-l[0].distance>n){u-=l.shift().angleDelta}if(u>a){return false}o++;s+=c.dist(v)}return true}function _h(e){var t=0;for(var r=0;r<e.length-1;r++){t+=e[r].dist(e[r+1])}return t}function wh(e,t,r){return e?3/5*t*r:0}function Th(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function kh(e,t,r,n,a,i){var o=wh(r,a,i);var s=Th(r,n)*i;var l=0;var u=_h(e)/2;for(var f=0;f<e.length-1;f++){var c=e[f],v=e[f+1];var h=c.dist(v);if(l+h>u){var p=(u-l)/h,d=wn(c.x,v.x,p),g=wn(c.y,v.y,p);var y=new ph(d,g,v.angleTo(c),f);y._round();if(!o||bh(e,y,s,o,t)){return y}else{return}}l+=h}}function Ah(e,t,r,n,a,i,o,s,l){var u=wh(n,i,o);var f=Th(n,a);var c=f*o;var v=e[0].x===0||e[0].x===l||e[0].y===0||e[0].y===l;if(t-c<t/4){t=c+t/4}var h=i*2;var p=!v?(f/2+h)*o*s%t:t/2*s%t;return Mh(e,p,t,u,r,c,v,false,l)}function Mh(e,t,r,n,a,i,o,s,l){var u=i/2;var f=_h(e);var c=0,v=t-r;var h=[];for(var p=0;p<e.length-1;p++){var d=e[p],g=e[p+1];var y=d.dist(g),m=g.angleTo(d);while(v+r<c+y){v+=r;var x=(v-c)/y,b=wn(d.x,g.x,x),_=wn(d.y,g.y,x);if(b>=0&&b<l&&_>=0&&_<l&&v-u>=0&&v+u<=f){var w=new ph(b,_,m,p);w._round();if(!n||bh(e,w,i,n,a)){h.push(w)}}}c+=y}if(!s&&!h.length&&!o){h=Mh(e,c/2,r,n,a,i,o,true,l)}return h}function Sh(e,t,r,n,a){var o=[];for(var s=0;s<e.length;s++){var l=e[s];var u=void 0;for(var f=0;f<l.length-1;f++){var c=l[f];var v=l[f+1];if(c.x<t&&v.x<t){continue}else if(c.x<t){c=new i(t,c.y+(v.y-c.y)*((t-c.x)/(v.x-c.x)))._round()}else if(v.x<t){v=new i(t,c.y+(v.y-c.y)*((t-c.x)/(v.x-c.x)))._round()}if(c.y<r&&v.y<r){continue}else if(c.y<r){c=new i(c.x+(v.x-c.x)*((r-c.y)/(v.y-c.y)),r)._round()}else if(v.y<r){v=new i(c.x+(v.x-c.x)*((r-c.y)/(v.y-c.y)),r)._round()}if(c.x>=n&&v.x>=n){continue}else if(c.x>=n){c=new i(n,c.y+(v.y-c.y)*((n-c.x)/(v.x-c.x)))._round()}else if(v.x>=n){v=new i(n,c.y+(v.y-c.y)*((n-c.x)/(v.x-c.x)))._round()}if(c.y>=a&&v.y>=a){continue}else if(c.y>=a){c=new i(c.x+(v.x-c.x)*((a-c.y)/(v.y-c.y)),a)._round()}else if(v.y>=a){v=new i(c.x+(v.x-c.x)*((a-c.y)/(v.y-c.y)),a)._round()}if(!u||!c.equals(u[u.length-1])){u=[c];o.push(u)}u.push(v)}}return o}var Eh=jv;function Lh(e,t,r,n){var a=[];var o=e.image;var s=o.pixelRatio;var l=o.paddedRect.w-2*Eh;var u=o.paddedRect.h-2*Eh;var f=e.right-e.left;var c=e.bottom-e.top;var v=o.stretchX||[[0,l]];var h=o.stretchY||[[0,u]];var p=function(e,t){return e+t[1]-t[0]};var d=v.reduce(p,0);var g=h.reduce(p,0);var y=l-d;var m=u-g;var x=0;var b=d;var _=0;var w=g;var T=0;var k=y;var A=0;var M=m;if(o.content&&n){var S=o.content;x=Ch(v,0,S[0]);_=Ch(h,0,S[1]);b=Ch(v,S[0],S[2]);w=Ch(h,S[1],S[3]);T=S[0]-x;A=S[1]-_;k=S[2]-S[0]-b;M=S[3]-S[1]-w}var E=function(n,a,l,u){var v=Ph(n.stretch-x,b,f,e.left);var h=Oh(n.fixed-T,k,n.stretch,d);var p=Ph(a.stretch-_,w,c,e.top);var y=Oh(a.fixed-A,M,a.stretch,g);var m=Ph(l.stretch-x,b,f,e.left);var S=Oh(l.fixed-T,k,l.stretch,d);var E=Ph(u.stretch-_,w,c,e.top);var L=Oh(u.fixed-A,M,u.stretch,g);var C=new i(v,p);var I=new i(m,p);var P=new i(m,E);var O=new i(v,E);var D=new i(h/s,y/s);var z=new i(S/s,L/s);var R=t*Math.PI/180;if(R){var F=Math.sin(R),B=Math.cos(R),N=[B,-F,F,B];C._matMult(N);I._matMult(N);O._matMult(N);P._matMult(N)}var j=n.stretch+n.fixed;var U=l.stretch+l.fixed;var V=a.stretch+a.fixed;var H=u.stretch+u.fixed;var q={x:o.paddedRect.x+Eh+j,y:o.paddedRect.y+Eh+V,w:U-j,h:H-V};var G=k/s/f;var Z=M/s/c;return{tl:C,tr:I,bl:O,br:P,tex:q,writingMode:undefined,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:D,pixelOffsetBR:z,minFontScaleX:G,minFontScaleY:Z,isSDF:r}};if(!n||!o.stretchX&&!o.stretchY){a.push(E({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:u+1}))}else{var L=Ih(v,y,d);var C=Ih(h,m,g);for(var I=0;I<L.length-1;I++){var P=L[I];var O=L[I+1];for(var D=0;D<C.length-1;D++){var z=C[D];var R=C[D+1];a.push(E(P,z,O,R))}}}return a}function Ch(e,t,r){var n=0;for(var a=0,i=e;a<i.length;a+=1){var o=i[a];n+=Math.max(t,Math.min(r,o[1]))-Math.max(t,Math.min(r,o[0]))}return n}function Ih(e,t,r){var n=[{fixed:-Eh,stretch:0}];for(var a=0,i=e;a<i.length;a+=1){var o=i[a];var s=o[0];var l=o[1];var u=n[n.length-1];n.push({fixed:s-u.stretch,stretch:u.stretch});n.push({fixed:s-u.stretch,stretch:u.stretch+(l-s)})}n.push({fixed:t+Eh,stretch:r});return n}function Ph(e,t,r,n){return e/t*r+n}function Oh(e,t,r,n){return e-t*r/n}function Dh(e,t,r,n,a,o,s,l){var u=n.layout.get("text-rotate").evaluate(o,{})*Math.PI/180;var f=[];for(var c=0,v=t.positionedLines;c<v.length;c+=1){var h=v[c];for(var p=0,d=h.positionedGlyphs;p<d.length;p+=1){var g=d[p];if(!g.rect){continue}var y=g.rect||{};var m=1;var x=Bv+m;var b=true;var _=1;var w=0;var T=(a||l)&&g.vertical;var k=g.metrics.advance*g.scale/2;if(l&&t.verticalizable){var A=(g.scale-1)*tv;var M=(tv-g.metrics.width*g.scale)/2;w=h.lineOffset/2-(g.imageName?-M:A)}if(g.imageName){var S=s[g.imageName];b=S.sdf;_=S.pixelRatio;x=jv/_}var E=a?[g.x+k,g.y]:[0,0];var L=a?[0,0]:[g.x+k+r[0],g.y+r[1]-w];var C=[0,0];if(T){C=L;L=[0,0]}var I=(g.metrics.left-x)*g.scale-k+L[0];var P=(-g.metrics.top-x)*g.scale+L[1];var O=I+y.w*g.scale/_;var D=P+y.h*g.scale/_;var z=new i(I,P);var R=new i(O,P);var F=new i(I,D);var B=new i(O,D);if(T){var N=new i(-k,k-Gv);var j=-Math.PI/2;var U=tv/2-k;var V=g.imageName?U:0;var H=new i(5-Gv-U,-V);var q=new(Function.prototype.bind.apply(i,[null].concat(C)));z._rotateAround(j,N)._add(H)._add(q);R._rotateAround(j,N)._add(H)._add(q);F._rotateAround(j,N)._add(H)._add(q);B._rotateAround(j,N)._add(H)._add(q)}if(u){var G=Math.sin(u),Z=Math.cos(u),Y=[Z,-G,G,Z];z._matMult(Y);R._matMult(Y);F._matMult(Y);B._matMult(Y)}var W=new i(0,0);var X=new i(0,0);var J=0;var K=0;f.push({tl:z,tr:R,bl:F,br:B,tex:y,writingMode:t.writingMode,glyphOffset:E,sectionIndex:g.sectionIndex,isSDF:b,pixelOffsetTL:W,pixelOffsetBR:X,minFontScaleX:J,minFontScaleY:K})}}return f}var zh=function e(t,r,n,a,o,s,l,u,f,c){this.boxStartIndex=t.length;if(f){var v=s.top;var h=s.bottom;var p=s.collisionPadding;if(p){v-=p[1];h+=p[3]}var d=h-v;if(d>0){d=Math.max(10,d);this.circleDiameter=d}}else{var g=s.top*l-u;var y=s.bottom*l+u;var m=s.left*l-u;var x=s.right*l+u;var b=s.collisionPadding;if(b){m-=b[0]*l;g-=b[1]*l;x+=b[2]*l;y+=b[3]*l}if(c){var _=new i(m,g);var w=new i(x,g);var T=new i(m,y);var k=new i(x,y);var A=c*Math.PI/180;_._rotate(A);w._rotate(A);T._rotate(A);k._rotate(A);m=Math.min(_.x,w.x,T.x,k.x);x=Math.max(_.x,w.x,T.x,k.x);g=Math.min(_.y,w.y,T.y,k.y);y=Math.max(_.y,w.y,T.y,k.y)}t.emplaceBack(r.x,r.y,m,g,x,y,n,a,o)}this.boxEndIndex=t.length};var Rh=function e(t,r){if(t===void 0)t=[];if(r===void 0)r=Fh;this.data=t;this.length=this.data.length;this.compare=r;if(this.length>0){for(var n=(this.length>>1)-1;n>=0;n--){this._down(n)}}};Rh.prototype.push=function e(t){this.data.push(t);this.length++;this._up(this.length-1)};Rh.prototype.pop=function e(){if(this.length===0){return undefined}var t=this.data[0];var r=this.data.pop();this.length--;if(this.length>0){this.data[0]=r;this._down(0)}return t};Rh.prototype.peek=function e(){return this.data[0]};Rh.prototype._up=function e(t){var r=this;var n=r.data;var a=r.compare;var i=n[t];while(t>0){var o=t-1>>1;var s=n[o];if(a(i,s)>=0){break}n[t]=s;t=o}n[t]=i};Rh.prototype._down=function e(t){var r=this;var n=r.data;var a=r.compare;var i=this.length>>1;var o=n[t];while(t<i){var s=(t<<1)+1;var l=n[s];var u=s+1;if(u<this.length&&a(n[u],l)<0){s=u;l=n[u]}if(a(l,o)>=0){break}n[t]=l;t=s}n[t]=o};function Fh(e,t){return e<t?-1:e>t?1:0}function Bh(e,t,r){if(t===void 0)t=1;if(r===void 0)r=false;var n=Infinity,a=Infinity,o=-Infinity,s=-Infinity;var l=e[0];for(var u=0;u<l.length;u++){var f=l[u];if(!u||f.x<n){n=f.x}if(!u||f.y<a){a=f.y}if(!u||f.x>o){o=f.x}if(!u||f.y>s){s=f.y}}var c=o-n;var v=s-a;var h=Math.min(c,v);var p=h/2;var d=new Rh([],Nh);if(h===0){return new i(n,a)}for(var g=n;g<o;g+=h){for(var y=a;y<s;y+=h){d.push(new jh(g+p,y+p,p,e))}}var m=Vh(e);var x=d.length;while(d.length){var b=d.pop();if(b.d>m.d||!m.d){m=b;if(r){console.log("found best %d after %d probes",Math.round(1e4*b.d)/1e4,x)}}if(b.max-m.d<=t){continue}p=b.h/2;d.push(new jh(b.p.x-p,b.p.y-p,p,e));d.push(new jh(b.p.x+p,b.p.y-p,p,e));d.push(new jh(b.p.x-p,b.p.y+p,p,e));d.push(new jh(b.p.x+p,b.p.y+p,p,e));x+=4}if(r){console.log("num probes: "+x);console.log("best distance: "+m.d)}return m.p}function Nh(e,t){return t.max-e.max}function jh(e,t,r,n){this.p=new i(e,t);this.h=r;this.d=Uh(this.p,n);this.max=this.d+this.h*Math.SQRT2}function Uh(e,t){var r=false;var n=Infinity;for(var a=0;a<t.length;a++){var i=t[a];for(var o=0,s=i.length,l=s-1;o<s;l=o++){var u=i[o];var f=i[l];if(u.y>e.y!==f.y>e.y&&e.x<(f.x-u.x)*(e.y-u.y)/(f.y-u.y)+u.x){r=!r}n=Math.min(n,Pl(e,u,f))}}return(r?1:-1)*Math.sqrt(n)}function Vh(e){var t=0;var r=0;var n=0;var a=e[0];for(var i=0,o=a.length,s=o-1;i<o;s=i++){var l=a[i];var u=a[s];var f=l.x*u.y-u.x*l.y;r+=(l.x+u.x)*f;n+=(l.y+u.y)*f;t+=f*3}return new jh(r/t,n/t,0,e)}var Hh=7;var qh=Number.POSITIVE_INFINITY;function Gh(e,t){function r(e,t){var r=0,n=0;if(t<0){t=0}var a=t/Math.sqrt(2);switch(e){case"top-right":case"top-left":n=a-Hh;break;case"bottom-right":case"bottom-left":n=-a+Hh;break;case"bottom":n=-t+Hh;break;case"top":n=t-Hh;break}switch(e){case"top-right":case"bottom-right":r=-a;break;case"top-left":case"bottom-left":r=a;break;case"left":r=t;break;case"right":r=-t;break}return[r,n]}function n(e,t,r){var n=0,a=0;t=Math.abs(t);r=Math.abs(r);switch(e){case"top-right":case"top-left":case"top":a=r-Hh;break;case"bottom-right":case"bottom-left":case"bottom":a=-r+Hh;break}switch(e){case"top-right":case"bottom-right":case"right":n=-t;break;case"top-left":case"bottom-left":case"left":n=t;break}return[n,a]}return t[1]!==qh?n(e,t[0],t[1]):r(e,t[0])}function Zh(e,t,r,n,a,i,o){e.createArrays();var s=512*e.overscaling;e.tilePixelRatio=ml/s;e.compareText={};e.iconsNeedLinear=false;var l=e.layers[0].layout;var u=e.layers[0]._unevaluatedLayout._values;var f={};if(e.textSizeData.kind==="composite"){var c=e.textSizeData;var v=c.minZoom;var h=c.maxZoom;f.compositeTextSizes=[u["text-size"].possiblyEvaluate(new Do(v),o),u["text-size"].possiblyEvaluate(new Do(h),o)]}if(e.iconSizeData.kind==="composite"){var p=e.iconSizeData;var d=p.minZoom;var g=p.maxZoom;f.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new Do(d),o),u["icon-size"].possiblyEvaluate(new Do(g),o)]}f.layoutTextSize=u["text-size"].possiblyEvaluate(new Do(e.zoom+1),o);f.layoutIconSize=u["icon-size"].possiblyEvaluate(new Do(e.zoom+1),o);f.textMaxSize=u["text-size"].possiblyEvaluate(new Do(18));var y=l.get("text-line-height")*tv;var m=l.get("text-rotation-alignment")==="map"&&l.get("symbol-placement")!=="point";var x=l.get("text-keep-upright");var b=l.get("text-size");var _=function(){var i=T[w];var s=l.get("text-font").evaluate(i,{},o).join(",");var u=b.evaluate(i,{},o);var c=f.layoutTextSize.evaluate(i,{},o);var v=f.layoutIconSize.evaluate(i,{},o);var h={horizontal:{},vertical:undefined};var p=i.text;var d=[0,0];if(p){var g=p.toString();var _=l.get("text-letter-spacing").evaluate(i,{},o)*tv;var k=uo(g)?_:0;var A=l.get("text-anchor").evaluate(i,{},o);var M=l.get("text-variable-anchor");if(!M){var S=l.get("text-radial-offset").evaluate(i,{},o);if(S){d=Gh(A,[S*tv,qh])}else{d=l.get("text-offset").evaluate(i,{},o).map((function(e){return e*tv}))}}var E=m?"center":l.get("text-justify").evaluate(i,{},o);var C=l.get("symbol-placement");var I=C==="point"?l.get("text-max-width").evaluate(i,{},o)*tv:0;var P=function(){if(e.allowVerticalPlacement&&lo(g)){h.vertical=$v(p,t,r,a,s,I,y,A,"left",k,d,qv.vertical,true,C,c,u)}};if(!m&&M){var O=E==="auto"?M.map((function(e){return Yh(e)})):[E];var D=false;for(var z=0;z<O.length;z++){var R=O[z];if(h.horizontal[R]){continue}if(D){h.horizontal[R]=h.horizontal[0]}else{var F=$v(p,t,r,a,s,I,y,"center",R,k,d,qv.horizontal,false,C,c,u);if(F){h.horizontal[R]=F;D=F.positionedLines.length===1}}}P()}else{if(E==="auto"){E=Yh(A)}var B=$v(p,t,r,a,s,I,y,A,E,k,d,qv.horizontal,false,C,c,u);if(B){h.horizontal[E]=B}P();if(lo(g)&&m&&x){h.vertical=$v(p,t,r,a,s,I,y,A,E,k,d,qv.vertical,false,C,c,u)}}}var N=void 0;var j=false;if(i.icon&&i.icon.name){var U=n[i.icon.name];if(U){N=vh(a[i.icon.name],l.get("icon-offset").evaluate(i,{},o),l.get("icon-anchor").evaluate(i,{},o));j=U.sdf;if(e.sdfIcons===undefined){e.sdfIcons=U.sdf}else if(e.sdfIcons!==U.sdf){L("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer")}if(U.pixelRatio!==e.pixelRatio){e.iconsNeedLinear=true}else if(l.get("icon-rotate").constantOr(1)!==0){e.iconsNeedLinear=true}}}var V=$h(h.horizontal)||h.vertical;e.iconsInText=V?V.iconsInText:false;if(V||N){Wh(e,i,h,N,n,f,c,v,d,j,o)}};for(var w=0,T=e.features;w<T.length;w+=1)_();if(i){e.generateCollisionDebugBuffers()}}function Yh(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Wh(e,t,r,n,a,i,o,s,l,u,f){var c=i.textMaxSize.evaluate(t,{});if(c===undefined){c=o}var v=e.layers[0].layout;var h=v.get("icon-offset").evaluate(t,{},f);var p=$h(r.horizontal);var d=24,g=o/d,y=e.tilePixelRatio*g,m=e.tilePixelRatio*c/d,x=e.tilePixelRatio*s,b=e.tilePixelRatio*v.get("symbol-spacing"),_=v.get("text-padding")*e.tilePixelRatio,w=v.get("icon-padding")*e.tilePixelRatio,T=v.get("text-max-angle")/180*Math.PI,k=v.get("text-rotation-alignment")==="map"&&v.get("symbol-placement")!=="point",A=v.get("icon-rotation-alignment")==="map"&&v.get("symbol-placement")!=="point",M=v.get("symbol-placement"),S=b/2;var E=v.get("icon-text-fit");var L;if(n&&E!=="none"){if(e.allowVerticalPlacement&&r.vertical){L=hh(n,r.vertical,E,v.get("icon-text-fit-padding"),h,g)}if(p){n=hh(n,p,E,v.get("icon-text-fit-padding"),h,g)}}var C=function(s,c){if(c.x<0||c.x>=ml||c.y<0||c.y>=ml){return}Qh(e,c,s,r,n,a,L,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,y,_,k,l,x,w,A,h,t,i,u,f,o)};if(M==="line"){for(var I=0,P=Sh(t.geometry,0,0,ml,ml);I<P.length;I+=1){var O=P[I];var D=Ah(O,b,T,r.vertical||p,n,d,m,e.overscaling,ml);for(var z=0,R=D;z<R.length;z+=1){var F=R[z];var B=p;if(!B||!ep(e,B.text,S,F)){C(O,F)}}}}else if(M==="line-center"){for(var N=0,j=t.geometry;N<j.length;N+=1){var U=j[N];if(U.length>1){var V=kh(U,T,r.vertical||p,n,d,m);if(V){C(U,V)}}}}else if(t.type==="Polygon"){for(var H=0,q=Lf(t.geometry,0);H<q.length;H+=1){var G=q[H];var Z=Bh(G,16);C(G[0],new ph(Z.x,Z.y,0))}}else if(t.type==="LineString"){for(var Y=0,W=t.geometry;Y<W.length;Y+=1){var X=W[Y];C(X,new ph(X[0].x,X[0].y,0))}}else if(t.type==="Point"){for(var J=0,K=t.geometry;J<K.length;J+=1){var $=K[J];for(var Q=0,ee=$;Q<ee.length;Q+=1){var te=ee[Q];C([te],new ph(te.x,te.y,0))}}}}var Xh=255;var Jh=Xh*dh;function Kh(e,t,r,n,a,i,o,s,l,u,f,c,v,h,p){var d=Dh(t,r,s,a,i,o,n,e.allowVerticalPlacement);var g=e.textSizeData;var y=null;if(g.kind==="source"){y=[dh*a.layout.get("text-size").evaluate(o,{})];if(y[0]>Jh){L(e.layerIds[0]+': Value for "text-size" is >= '+Xh+'. Reduce your "text-size".')}}else if(g.kind==="composite"){y=[dh*h.compositeTextSizes[0].evaluate(o,{},p),dh*h.compositeTextSizes[1].evaluate(o,{},p)];if(y[0]>Jh||y[1]>Jh){L(e.layerIds[0]+': Value for "text-size" is >= '+Xh+'. Reduce your "text-size".')}}e.addSymbols(e.text,d,y,s,i,o,u,t,l.lineStartIndex,l.lineLength,v,p);for(var m=0,x=f;m<x.length;m+=1){var b=x[m];c[b]=e.text.placedSymbolArray.length-1}return d.length*4}function $h(e){for(var t in e){return e[t]}return null}function Qh(e,t,r,n,a,i,o,s,l,u,f,c,v,h,p,d,g,y,m,x,b,_,w,T,k){var A;var M=e.addToLineVertexArray(t,r);var S,E,C,I;var P=0;var O=0;var D=0;var z=0;var R=-1;var F=-1;var B={};var N=qs("");var j=0;var U=0;if(s._unevaluatedLayout.getValue("text-radial-offset")===undefined){A=s.layout.get("text-offset").evaluate(b,{},T).map((function(e){return e*tv})),j=A[0],U=A[1]}else{j=s.layout.get("text-radial-offset").evaluate(b,{},T)*tv;U=qh}if(e.allowVerticalPlacement&&n.vertical){var V=s.layout.get("text-rotate").evaluate(b,{},T);var H=V+90;var q=n.vertical;C=new zh(l,t,u,f,c,q,v,h,p,H);if(o){I=new zh(l,t,u,f,c,o,g,y,p,H)}}if(a){var G=s.layout.get("icon-rotate").evaluate(b,{});var Z=s.layout.get("icon-text-fit")!=="none";var Y=Lh(a,G,w,Z);var W=o?Lh(o,G,w,Z):undefined;E=new zh(l,t,u,f,c,a,g,y,false,G);P=Y.length*4;var X=e.iconSizeData;var J=null;if(X.kind==="source"){J=[dh*s.layout.get("icon-size").evaluate(b,{})];if(J[0]>Jh){L(e.layerIds[0]+': Value for "icon-size" is >= '+Xh+'. Reduce your "icon-size".')}}else if(X.kind==="composite"){J=[dh*_.compositeIconSizes[0].evaluate(b,{},T),dh*_.compositeIconSizes[1].evaluate(b,{},T)];if(J[0]>Jh||J[1]>Jh){L(e.layerIds[0]+': Value for "icon-size" is >= '+Xh+'. Reduce your "icon-size".')}}e.addSymbols(e.icon,Y,J,x,m,b,false,t,M.lineStartIndex,M.lineLength,-1,T);R=e.icon.placedSymbolArray.length-1;if(W){O=W.length*4;e.addSymbols(e.icon,W,J,x,m,b,qv.vertical,t,M.lineStartIndex,M.lineLength,-1,T);F=e.icon.placedSymbolArray.length-1}}for(var K in n.horizontal){var $=n.horizontal[K];if(!S){N=qs($.text);var Q=s.layout.get("text-rotate").evaluate(b,{},T);S=new zh(l,t,u,f,c,$,v,h,p,Q)}var ee=$.positionedLines.length===1;D+=Kh(e,t,$,i,s,p,b,d,M,n.vertical?qv.horizontal:qv.horizontalOnly,ee?Object.keys(n.horizontal):[K],B,R,_,T);if(ee){break}}if(n.vertical){z+=Kh(e,t,n.vertical,i,s,p,b,d,M,qv.vertical,["vertical"],B,F,_,T)}var te=S?S.boxStartIndex:e.collisionBoxArray.length;var re=S?S.boxEndIndex:e.collisionBoxArray.length;var ne=C?C.boxStartIndex:e.collisionBoxArray.length;var ae=C?C.boxEndIndex:e.collisionBoxArray.length;var ie=E?E.boxStartIndex:e.collisionBoxArray.length;var oe=E?E.boxEndIndex:e.collisionBoxArray.length;var se=I?I.boxStartIndex:e.collisionBoxArray.length;var le=I?I.boxEndIndex:e.collisionBoxArray.length;var ue=-1;var fe=function(e,t){if(e&&e.circleDiameter){return Math.max(e.circleDiameter,t)}return t};ue=fe(S,ue);ue=fe(C,ue);ue=fe(E,ue);ue=fe(I,ue);var ce=ue>-1?1:0;if(ce){ue*=k/tv}if(e.glyphOffsetArray.length>=lp.MAX_GLYPHS){L("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907")}if(b.sortKey!==undefined){e.addToSortKeyRanges(e.symbolInstances.length,b.sortKey)}e.symbolInstances.emplaceBack(t.x,t.y,B.right>=0?B.right:-1,B.center>=0?B.center:-1,B.left>=0?B.left:-1,B.vertical||-1,R,F,N,te,re,ne,ae,ie,oe,se,le,u,D,z,P,O,ce,0,v,j,U,ue)}function ep(e,t,r,n){var a=e.compareText;if(!(t in a)){a[t]=[]}else{var i=a[t];for(var o=i.length-1;o>=0;o--){if(n.dist(i[o])<r){return true}}}a[t].push(n);return false}var tp=nc.VectorTileFeature.types;var rp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function np(e,t,r,n,a,i,o,s,l,u,f,c,v){var h=s?Math.min(Jh,Math.round(s[0])):0;var p=s?Math.min(Jh,Math.round(s[1])):0;e.emplaceBack(t,r,Math.round(n*32),Math.round(a*32),i,o,(h<<1)+(l?1:0),p,u*16,f*16,c*256,v*256)}function ap(e,t,r){e.emplaceBack(t.x,t.y,r);e.emplaceBack(t.x,t.y,r);e.emplaceBack(t.x,t.y,r);e.emplaceBack(t.x,t.y,r)}function ip(e){for(var t=0,r=e.sections;t<r.length;t+=1){var n=r[t];if(xo(n.text)){return true}}return false}var op=function e(t){this.layoutVertexArray=new fs;this.indexArray=new ys;this.programConfigurations=t;this.segments=new Ns;this.dynamicLayoutVertexArray=new cs;this.opacityVertexArray=new vs;this.placedSymbolArray=new Cs};op.prototype.isEmpty=function e(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0};op.prototype.upload=function e(t,r,n,a){if(this.isEmpty()){return}if(n){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Bc.members);this.indexBuffer=t.createIndexBuffer(this.indexArray,r);this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Nc.members,true);this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,rp,true);this.opacityVertexBuffer.itemSize=1}if(n||a){this.programConfigurations.upload(t)}};op.prototype.destroy=function e(){if(!this.layoutVertexBuffer){return}this.layoutVertexBuffer.destroy();this.indexBuffer.destroy();this.programConfigurations.destroy();this.segments.destroy();this.dynamicLayoutVertexBuffer.destroy();this.opacityVertexBuffer.destroy()};eo("SymbolBuffers",op);var sp=function e(t,r,n){this.layoutVertexArray=new t;this.layoutAttributes=r;this.indexArray=new n;this.segments=new Ns;this.collisionVertexArray=new gs};sp.prototype.upload=function e(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes);this.indexBuffer=t.createIndexBuffer(this.indexArray);this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Uc.members,true)};sp.prototype.destroy=function e(){if(!this.layoutVertexBuffer){return}this.layoutVertexBuffer.destroy();this.indexBuffer.destroy();this.segments.destroy();this.collisionVertexBuffer.destroy()};eo("CollisionBuffers",sp);var lp=function e(t){this.collisionBoxArray=t.collisionBoxArray;this.zoom=t.zoom;this.overscaling=t.overscaling;this.layers=t.layers;this.layerIds=this.layers.map((function(e){return e.id}));this.index=t.index;this.pixelRatio=t.pixelRatio;this.sourceLayerIndex=t.sourceLayerIndex;this.hasPattern=false;this.hasRTLText=false;this.sortKeyRanges=[];this.collisionCircleArray=[];this.placementInvProjMatrix=Jl([]);this.placementViewportMatrix=Jl([]);var r=this.layers[0];var n=r._unevaluatedLayout._values;this.textSizeData=gh(this.zoom,n["text-size"]);this.iconSizeData=gh(this.zoom,n["icon-size"]);var a=this.layers[0].layout;var i=a.get("symbol-sort-key");var o=a.get("symbol-z-order");this.sortFeaturesByKey=o!=="viewport-y"&&i.constantOr(1)!==undefined;var s=o==="viewport-y"||o==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=s&&(a.get("text-allow-overlap")||a.get("icon-allow-overlap")||a.get("text-ignore-placement")||a.get("icon-ignore-placement"));if(a.get("symbol-placement")==="point"){this.writingModes=a.get("text-writing-mode").map((function(e){return qv[e]}))}this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}));this.sourceID=t.sourceID};lp.prototype.createArrays=function e(){this.text=new op(new pl(Bc.members,this.layers,this.zoom,(function(e){return/^text/.test(e)})));this.icon=new op(new pl(Bc.members,this.layers,this.zoom,(function(e){return/^icon/.test(e)})));this.glyphOffsetArray=new Os;this.lineVertexArray=new Ds;this.symbolInstances=new Ps};lp.prototype.calculateGlyphDependencies=function e(t,r,n,a,i){for(var o=0;o<t.length;o++){r[t.charCodeAt(o)]=true;if((n||a)&&i){var s=Qc[t.charAt(o)];if(s){r[s.charCodeAt(0)]=true}}}};lp.prototype.populate=function e(t,r,n){var a=this.layers[0];var i=a.layout;var o=i.get("text-font");var s=i.get("text-field");var l=i.get("icon-image");var u=(s.value.kind!=="constant"||s.value.value instanceof Tr&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&(o.value.kind!=="constant"||o.value.value.length>0);var f=l.value.kind!=="constant"||!!l.value.value||Object.keys(l.parameters).length>0;var c=i.get("symbol-sort-key");this.features=[];if(!u&&!f){return}var v=r.iconDependencies;var h=r.glyphDependencies;var p=r.availableImages;var d=new Do(this.zoom);for(var g=0,y=t;g<y.length;g+=1){var m=y[g];var x=m.feature;var b=m.id;var _=m.index;var w=m.sourceLayerIndex;var T=a._featureFilter.needGeometry;var k={type:x.type,id:b,properties:x.properties,geometry:T?_l(x):[]};if(!a._featureFilter.filter(d,k,n)){continue}if(!T){k.geometry=_l(x)}var A=void 0;if(u){var M=a.getValueAndResolveTokens("text-field",k,n,p);var S=Tr.factory(M);if(ip(S)){this.hasRTLText=true}if(!this.hasRTLText||Eo()==="unavailable"||this.hasRTLText&&Po.isParsed()){A=Kc(S,a,k)}}var E=void 0;if(f){var L=a.getValueAndResolveTokens("icon-image",k,n,p);if(L instanceof kr){E=L}else{E=kr.fromString(L)}}if(!A&&!E){continue}var C=this.sortFeaturesByKey?c.evaluate(k,{},n):undefined;var I={id:b,text:A,icon:E,index:_,sourceLayerIndex:w,geometry:_l(x),properties:x.properties,type:tp[x.type],sortKey:C};this.features.push(I);if(E){v[E.name]=true}if(A){var P=o.evaluate(k,{},n).join(",");var O=i.get("text-rotation-alignment")==="map"&&i.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(qv.vertical)>=0;for(var D=0,z=A.sections;D<z.length;D+=1){var R=z[D];if(!R.image){var F=lo(A.toString());var B=R.fontStack||P;var N=h[B]=h[B]||{};this.calculateGlyphDependencies(R.text,N,O,this.allowVerticalPlacement,F)}else{v[R.image.name]=true}}}}if(i.get("symbol-placement")==="line"){this.features=$c(this.features)}if(this.sortFeaturesByKey){this.features.sort((function(e,t){return e.sortKey-t.sortKey}))}};lp.prototype.update=function e(t,r,n){if(!this.stateDependentLayers.length){return}this.text.programConfigurations.updatePaintArrays(t,r,this.layers,n);this.icon.programConfigurations.updatePaintArrays(t,r,this.layers,n)};lp.prototype.isEmpty=function e(){return this.symbolInstances.length===0&&!this.hasRTLText};lp.prototype.uploadPending=function e(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload};lp.prototype.upload=function e(t){if(!this.uploaded&&this.hasDebugData()){this.textCollisionBox.upload(t);this.iconCollisionBox.upload(t)}this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload);this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload);this.uploaded=true};lp.prototype.destroyDebugData=function e(){this.textCollisionBox.destroy();this.iconCollisionBox.destroy()};lp.prototype.destroy=function e(){this.text.destroy();this.icon.destroy();if(this.hasDebugData()){this.destroyDebugData()}};lp.prototype.addToLineVertexArray=function e(t,r){var n=this.lineVertexArray.length;if(t.segment!==undefined){var a=t.dist(r[t.segment+1]);var i=t.dist(r[t.segment]);var o={};for(var s=t.segment+1;s<r.length;s++){o[s]={x:r[s].x,y:r[s].y,tileUnitDistanceFromAnchor:a};if(s<r.length-1){a+=r[s+1].dist(r[s])}}for(var l=t.segment||0;l>=0;l--){o[l]={x:r[l].x,y:r[l].y,tileUnitDistanceFromAnchor:i};if(l>0){i+=r[l-1].dist(r[l])}}for(var u=0;u<r.length;u++){var f=o[u];this.lineVertexArray.emplaceBack(f.x,f.y,f.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}};lp.prototype.addSymbols=function e(t,r,n,a,i,o,s,l,u,f,c,v){var h=t.indexArray;var p=t.layoutVertexArray;var d=t.segments.prepareSegment(4*r.length,p,h,o.sortKey);var g=this.glyphOffsetArray.length;var y=d.vertexLength;var m=this.allowVerticalPlacement&&s===qv.vertical?Math.PI/2:0;var x=o.text&&o.text.sections;for(var b=0;b<r.length;b++){var _=r[b];var w=_.tl;var T=_.tr;var k=_.bl;var A=_.br;var M=_.tex;var S=_.pixelOffsetTL;var E=_.pixelOffsetBR;var L=_.minFontScaleX;var C=_.minFontScaleY;var I=_.glyphOffset;var P=_.isSDF;var O=_.sectionIndex;var D=d.vertexLength;var z=I[1];np(p,l.x,l.y,w.x,z+w.y,M.x,M.y,n,P,S.x,S.y,L,C);np(p,l.x,l.y,T.x,z+T.y,M.x+M.w,M.y,n,P,E.x,S.y,L,C);np(p,l.x,l.y,k.x,z+k.y,M.x,M.y+M.h,n,P,S.x,E.y,L,C);np(p,l.x,l.y,A.x,z+A.y,M.x+M.w,M.y+M.h,n,P,E.x,E.y,L,C);ap(t.dynamicLayoutVertexArray,l,m);h.emplaceBack(D,D+1,D+2);h.emplaceBack(D+1,D+2,D+3);d.vertexLength+=4;d.primitiveLength+=2;this.glyphOffsetArray.emplaceBack(I[0]);if(b===r.length-1||O!==r[b+1].sectionIndex){t.programConfigurations.populatePaintArrays(p.length,o,o.index,{},v,x&&x[O])}}t.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,y,u,f,l.segment,n?n[0]:0,n?n[1]:0,a[0],a[1],s,0,false,0,c)};lp.prototype._addCollisionDebugVertex=function e(t,r,n,a,i,o){r.emplaceBack(0,0);return t.emplaceBack(n.x,n.y,a,i,Math.round(o.x),Math.round(o.y))};lp.prototype.addCollisionDebugVertices=function e(t,r,n,a,o,s,l){var u=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray);var f=u.vertexLength;var c=o.layoutVertexArray;var v=o.collisionVertexArray;var h=l.anchorX;var p=l.anchorY;this._addCollisionDebugVertex(c,v,s,h,p,new i(t,r));this._addCollisionDebugVertex(c,v,s,h,p,new i(n,r));this._addCollisionDebugVertex(c,v,s,h,p,new i(n,a));this._addCollisionDebugVertex(c,v,s,h,p,new i(t,a));u.vertexLength+=4;var d=o.indexArray;d.emplaceBack(f,f+1);d.emplaceBack(f+1,f+2);d.emplaceBack(f+2,f+3);d.emplaceBack(f+3,f);u.primitiveLength+=4};lp.prototype.addDebugCollisionBoxes=function e(t,r,n,a){for(var i=t;i<r;i++){var o=this.collisionBoxArray.get(i);var s=o.x1;var l=o.y1;var u=o.x2;var f=o.y2;this.addCollisionDebugVertices(s,l,u,f,a?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,n)}};lp.prototype.generateCollisionDebugBuffers=function e(){if(this.hasDebugData()){this.destroyDebugData()}this.textCollisionBox=new sp(ps,Hc.members,Ts);this.iconCollisionBox=new sp(ps,Hc.members,Ts);for(var t=0;t<this.symbolInstances.length;t++){var r=this.symbolInstances.get(t);this.addDebugCollisionBoxes(r.textBoxStartIndex,r.textBoxEndIndex,r,true);this.addDebugCollisionBoxes(r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r,true);this.addDebugCollisionBoxes(r.iconBoxStartIndex,r.iconBoxEndIndex,r,false);this.addDebugCollisionBoxes(r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex,r,false)}};lp.prototype._deserializeCollisionBoxesForSymbol=function e(t,r,n,a,i,o,s,l,u){var f={};for(var c=r;c<n;c++){var v=t.get(c);f.textBox={x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,anchorPointX:v.anchorPointX,anchorPointY:v.anchorPointY};f.textFeatureIndex=v.featureIndex;break}for(var h=a;h<i;h++){var p=t.get(h);f.verticalTextBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY};f.verticalTextFeatureIndex=p.featureIndex;break}for(var d=o;d<s;d++){var g=t.get(d);f.iconBox={x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2,anchorPointX:g.anchorPointX,anchorPointY:g.anchorPointY};f.iconFeatureIndex=g.featureIndex;break}for(var y=l;y<u;y++){var m=t.get(y);f.verticalIconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY};f.verticalIconFeatureIndex=m.featureIndex;break}return f};lp.prototype.deserializeCollisionBoxes=function e(t){this.collisionArrays=[];for(var r=0;r<this.symbolInstances.length;r++){var n=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}};lp.prototype.hasTextData=function e(){return this.text.segments.get().length>0};lp.prototype.hasIconData=function e(){return this.icon.segments.get().length>0};lp.prototype.hasDebugData=function e(){return this.textCollisionBox&&this.iconCollisionBox};lp.prototype.hasTextCollisionBoxData=function e(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0};lp.prototype.hasIconCollisionBoxData=function e(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0};lp.prototype.addIndicesForPlacedSymbol=function e(t,r){var n=t.placedSymbolArray.get(r);var a=n.vertexStartIndex+n.numGlyphs*4;for(var i=n.vertexStartIndex;i<a;i+=4){t.indexArray.emplaceBack(i,i+1,i+2);t.indexArray.emplaceBack(i+1,i+2,i+3)}};lp.prototype.getSortedSymbolIndexes=function e(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==undefined){return this.symbolInstanceIndexes}var r=Math.sin(t);var n=Math.cos(t);var a=[];var i=[];var o=[];for(var s=0;s<this.symbolInstances.length;++s){o.push(s);var l=this.symbolInstances.get(s);a.push(Math.round(r*l.anchorX+n*l.anchorY)|0);i.push(l.featureIndex)}o.sort((function(e,t){return a[e]-a[t]||i[t]-i[e]}));return o};lp.prototype.addToSortKeyRanges=function e(t,r){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];if(n&&n.sortKey===r){n.symbolInstanceEnd=t+1}else{this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:t,symbolInstanceEnd:t+1})}};lp.prototype.sortFeatures=function e(t){var r=this;if(!this.sortFeaturesByY){return}if(this.sortedAngle===t){return}if(this.text.segments.get().length>1||this.icon.segments.get().length>1){return}this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t);this.sortedAngle=t;this.text.indexArray.clear();this.icon.indexArray.clear();this.featureSortOrder=[];for(var n=0,a=this.symbolInstanceIndexes;n<a.length;n+=1){var i=a[n];var o=this.symbolInstances.get(i);this.featureSortOrder.push(o.featureIndex);[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((function(e,t,n){if(e>=0&&n.indexOf(e)===t){r.addIndicesForPlacedSymbol(r.text,e)}}));if(o.verticalPlacedTextSymbolIndex>=0){this.addIndicesForPlacedSymbol(this.text,o.verticalPlacedTextSymbolIndex)}if(o.placedIconSymbolIndex>=0){this.addIndicesForPlacedSymbol(this.icon,o.placedIconSymbolIndex)}if(o.verticalPlacedIconSymbolIndex>=0){this.addIndicesForPlacedSymbol(this.icon,o.verticalPlacedIconSymbolIndex)}}if(this.text.indexBuffer){this.text.indexBuffer.updateData(this.text.indexArray)}if(this.icon.indexBuffer){this.icon.indexBuffer.updateData(this.icon.indexArray)}};eo("SymbolBucket",lp,{omit:["layers","collisionBoxArray","features","compareText"]});lp.MAX_GLYPHS=65535;lp.addDynamicAttributes=ap;function up(e,t){return t.replace(/{([^{}]+)}/g,(function(t,r){return r in e?String(e[r]):""}))}var fp=new Wo({"symbol-placement":new Ho(Yt["layout_symbol"]["symbol-placement"]),"symbol-spacing":new Ho(Yt["layout_symbol"]["symbol-spacing"]),"symbol-avoid-edges":new Ho(Yt["layout_symbol"]["symbol-avoid-edges"]),"symbol-sort-key":new qo(Yt["layout_symbol"]["symbol-sort-key"]),"symbol-z-order":new Ho(Yt["layout_symbol"]["symbol-z-order"]),"icon-allow-overlap":new Ho(Yt["layout_symbol"]["icon-allow-overlap"]),"icon-ignore-placement":new Ho(Yt["layout_symbol"]["icon-ignore-placement"]),"icon-optional":new Ho(Yt["layout_symbol"]["icon-optional"]),"icon-rotation-alignment":new Ho(Yt["layout_symbol"]["icon-rotation-alignment"]),"icon-size":new qo(Yt["layout_symbol"]["icon-size"]),"icon-text-fit":new Ho(Yt["layout_symbol"]["icon-text-fit"]),"icon-text-fit-padding":new Ho(Yt["layout_symbol"]["icon-text-fit-padding"]),"icon-image":new qo(Yt["layout_symbol"]["icon-image"]),"icon-rotate":new qo(Yt["layout_symbol"]["icon-rotate"]),"icon-padding":new Ho(Yt["layout_symbol"]["icon-padding"]),"icon-keep-upright":new Ho(Yt["layout_symbol"]["icon-keep-upright"]),"icon-offset":new qo(Yt["layout_symbol"]["icon-offset"]),"icon-anchor":new qo(Yt["layout_symbol"]["icon-anchor"]),"icon-pitch-alignment":new Ho(Yt["layout_symbol"]["icon-pitch-alignment"]),"text-pitch-alignment":new Ho(Yt["layout_symbol"]["text-pitch-alignment"]),"text-rotation-alignment":new Ho(Yt["layout_symbol"]["text-rotation-alignment"]),"text-field":new qo(Yt["layout_symbol"]["text-field"]),"text-font":new qo(Yt["layout_symbol"]["text-font"]),"text-size":new qo(Yt["layout_symbol"]["text-size"]),"text-max-width":new qo(Yt["layout_symbol"]["text-max-width"]),"text-line-height":new Ho(Yt["layout_symbol"]["text-line-height"]),"text-letter-spacing":new qo(Yt["layout_symbol"]["text-letter-spacing"]),"text-justify":new qo(Yt["layout_symbol"]["text-justify"]),"text-radial-offset":new qo(Yt["layout_symbol"]["text-radial-offset"]),"text-variable-anchor":new Ho(Yt["layout_symbol"]["text-variable-anchor"]),"text-anchor":new qo(Yt["layout_symbol"]["text-anchor"]),"text-max-angle":new Ho(Yt["layout_symbol"]["text-max-angle"]),"text-writing-mode":new Ho(Yt["layout_symbol"]["text-writing-mode"]),"text-rotate":new qo(Yt["layout_symbol"]["text-rotate"]),"text-padding":new Ho(Yt["layout_symbol"]["text-padding"]),"text-keep-upright":new Ho(Yt["layout_symbol"]["text-keep-upright"]),"text-transform":new qo(Yt["layout_symbol"]["text-transform"]),"text-offset":new qo(Yt["layout_symbol"]["text-offset"]),"text-allow-overlap":new Ho(Yt["layout_symbol"]["text-allow-overlap"]),"text-ignore-placement":new Ho(Yt["layout_symbol"]["text-ignore-placement"]),"text-optional":new Ho(Yt["layout_symbol"]["text-optional"])});var cp=new Wo({"icon-opacity":new qo(Yt["paint_symbol"]["icon-opacity"]),"icon-color":new qo(Yt["paint_symbol"]["icon-color"]),"icon-halo-color":new qo(Yt["paint_symbol"]["icon-halo-color"]),"icon-halo-width":new qo(Yt["paint_symbol"]["icon-halo-width"]),"icon-halo-blur":new qo(Yt["paint_symbol"]["icon-halo-blur"]),"icon-translate":new Ho(Yt["paint_symbol"]["icon-translate"]),"icon-translate-anchor":new Ho(Yt["paint_symbol"]["icon-translate-anchor"]),"text-opacity":new qo(Yt["paint_symbol"]["text-opacity"]),"text-color":new qo(Yt["paint_symbol"]["text-color"],{runtimeType:ir,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new qo(Yt["paint_symbol"]["text-halo-color"]),"text-halo-width":new qo(Yt["paint_symbol"]["text-halo-width"]),"text-halo-blur":new qo(Yt["paint_symbol"]["text-halo-blur"]),"text-translate":new Ho(Yt["paint_symbol"]["text-translate"]),"text-translate-anchor":new Ho(Yt["paint_symbol"]["text-translate-anchor"])});var vp={paint:cp,layout:fp};var hp=function e(t){this.type=t.property.overrides?t.property.overrides.runtimeType:tr;this.defaultValue=t};hp.prototype.evaluate=function e(t){if(t.formattedSection){var r=this.defaultValue.property.overrides;if(r&&r.hasOverride(t.formattedSection)){return r.getOverride(t.formattedSection)}}if(t.feature&&t.featureState){return this.defaultValue.evaluate(t.feature,t.featureState)}return this.defaultValue.property.specification.default};hp.prototype.eachChild=function e(t){if(!this.defaultValue.isConstant()){var r=this.defaultValue.value;t(r._styleExpression.expression)}};hp.prototype.outputDefined=function e(){return false};hp.prototype.serialize=function e(){return null};eo("FormatSectionOverride",hp,{omit:["defaultValue"]});var pp=function(e){function t(t){e.call(this,t,vp)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.recalculate=function t(r,n){e.prototype.recalculate.call(this,r,n);if(this.layout.get("icon-rotation-alignment")==="auto"){if(this.layout.get("symbol-placement")!=="point"){this.layout._values["icon-rotation-alignment"]="map"}else{this.layout._values["icon-rotation-alignment"]="viewport"}}if(this.layout.get("text-rotation-alignment")==="auto"){if(this.layout.get("symbol-placement")!=="point"){this.layout._values["text-rotation-alignment"]="map"}else{this.layout._values["text-rotation-alignment"]="viewport"}}if(this.layout.get("text-pitch-alignment")==="auto"){this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")}if(this.layout.get("icon-pitch-alignment")==="auto"){this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")}if(this.layout.get("symbol-placement")==="point"){var a=this.layout.get("text-writing-mode");if(a){var i=[];for(var o=0,s=a;o<s.length;o+=1){var l=s[o];if(i.indexOf(l)<0){i.push(l)}}this.layout._values["text-writing-mode"]=i}else{this.layout._values["text-writing-mode"]=["horizontal"]}}this._setPaintOverrides()};t.prototype.getValueAndResolveTokens=function e(t,r,n,a){var i=this.layout.get(t).evaluate(r,{},n,a);var o=this._unevaluatedLayout._values[t];if(!o.isDataDriven()&&!Xa(o.value)&&i){return up(r.properties,i)}return i};t.prototype.createBucket=function e(t){return new lp(t)};t.prototype.queryRadius=function e(){return 0};t.prototype.queryIntersectsFeature=function e(){return false};t.prototype._setPaintOverrides=function e(){for(var r=0,n=vp.paint.overridableProperties;r<n.length;r+=1){var a=n[r];if(!t.hasPaintOverride(this.layout,a)){continue}var i=this.paint.get(a);var o=new hp(i);var s=new Wa(o,i.property.specification);var l=null;if(i.value.kind==="constant"||i.value.kind==="source"){l=new Ka("source",s)}else{l=new $a("composite",s,i.value.zoomStops,i.value._interpolationType)}this.paint._values[a]=new Uo(i.property,l,i.parameters)}};t.prototype._handleOverridablePaintPropertyUpdate=function e(r,n,a){if(!this.layout||n.isDataDriven()||a.isDataDriven()){return false}return t.hasPaintOverride(this.layout,r)};t.hasPaintOverride=function e(t,r){var n=t.get("text-field");var a=vp.paint.properties[r];var i=false;var o=function(e){for(var t=0,r=e;t<r.length;t+=1){var n=r[t];if(a.overrides&&a.overrides.hasOverride(n)){i=true;return}}};if(n.value.kind==="constant"&&n.value.value instanceof Tr){o(n.value.value.sections)}else if(n.value.kind==="source"){var s=function(e){if(i){return}if(e instanceof Lr&&Sr(e.value)===fr){var t=e.value;o(t.sections)}else if(e instanceof Or){o(e.sections)}else{e.eachChild(s)}};var l=n.value;if(l._styleExpression){s(l._styleExpression.expression)}}return i};return t}(Jo);var dp=new Wo({"background-color":new Ho(Yt["paint_background"]["background-color"]),"background-pattern":new Zo(Yt["paint_background"]["background-pattern"]),"background-opacity":new Ho(Yt["paint_background"]["background-opacity"])});var gp={paint:dp};var yp=function(e){function t(t){e.call(this,t,gp)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;return t}(Jo);var mp=new Wo({"raster-opacity":new Ho(Yt["paint_raster"]["raster-opacity"]),"raster-hue-rotate":new Ho(Yt["paint_raster"]["raster-hue-rotate"]),"raster-brightness-min":new Ho(Yt["paint_raster"]["raster-brightness-min"]),"raster-brightness-max":new Ho(Yt["paint_raster"]["raster-brightness-max"]),"raster-saturation":new Ho(Yt["paint_raster"]["raster-saturation"]),"raster-contrast":new Ho(Yt["paint_raster"]["raster-contrast"]),"raster-resampling":new Ho(Yt["paint_raster"]["raster-resampling"]),"raster-fade-duration":new Ho(Yt["paint_raster"]["raster-fade-duration"])});var xp={paint:mp};var bp=function(e){function t(t){e.call(this,t,xp)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;return t}(Jo);function _p(e){var t=[];var r=e.id;if(r===undefined){t.push({message:"layers."+r+': missing required property "id"'})}if(e.render===undefined){t.push({message:"layers."+r+': missing required method "render"'})}if(e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"){t.push({message:"layers."+r+': property "renderingMode" must be either "2d" or "3d"'})}return t}var wp=function(e){function t(t){e.call(this,t,{});this.implementation=t}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.is3D=function e(){return this.implementation.renderingMode==="3d"};t.prototype.hasOffscreenPass=function e(){return this.implementation.prerender!==undefined};t.prototype.recalculate=function e(){};t.prototype.updateTransitions=function e(){};t.prototype.hasTransition=function e(){};t.prototype.serialize=function e(){};t.prototype.onAdd=function e(t){if(this.implementation.onAdd){this.implementation.onAdd(t,t.painter.context.gl)}};t.prototype.onRemove=function e(t){if(this.implementation.onRemove){this.implementation.onRemove(t,t.painter.context.gl)}};return t}(Jo);var Tp={circle:Mu,heatmap:Bu,hillshade:Uu,fill:Bf,"fill-extrusion":hc,line:zc,symbol:pp,background:yp,raster:bp};function kp(e){if(e.type==="custom"){return new wp(e)}else{return new Tp[e.type](e)}}var Ap=self.HTMLImageElement;var Mp=self.HTMLCanvasElement;var Sp=self.HTMLVideoElement;var Ep=self.ImageData;var Lp=self.ImageBitmap;var Cp=function e(t,r,n,a){this.context=t;this.format=n;this.texture=t.gl.createTexture();this.update(r,a)};Cp.prototype.update=function e(t,r,n){var a=t.width;var i=t.height;var o=(!this.size||this.size[0]!==a||this.size[1]!==i)&&!n;var s=this;var l=s.context;var u=l.gl;this.useMipmap=Boolean(r&&r.useMipmap);u.bindTexture(u.TEXTURE_2D,this.texture);l.pixelStoreUnpackFlipY.set(false);l.pixelStoreUnpack.set(1);l.pixelStoreUnpackPremultiplyAlpha.set(this.format===u.RGBA&&(!r||r.premultiply!==false));if(o){this.size=[a,i];if(t instanceof Ap||t instanceof Mp||t instanceof Sp||t instanceof Ep||Lp&&t instanceof Lp){u.texImage2D(u.TEXTURE_2D,0,this.format,this.format,u.UNSIGNED_BYTE,t)}else{u.texImage2D(u.TEXTURE_2D,0,this.format,a,i,0,this.format,u.UNSIGNED_BYTE,t.data)}}else{var f=n||{x:0,y:0};var c=f.x;var v=f.y;if(t instanceof Ap||t instanceof Mp||t instanceof Sp||t instanceof Ep||Lp&&t instanceof Lp){u.texSubImage2D(u.TEXTURE_2D,0,c,v,u.RGBA,u.UNSIGNED_BYTE,t)}else{u.texSubImage2D(u.TEXTURE_2D,0,c,v,a,i,u.RGBA,u.UNSIGNED_BYTE,t.data)}}if(this.useMipmap&&this.isSizePowerOfTwo()){u.generateMipmap(u.TEXTURE_2D)}};Cp.prototype.bind=function e(t,r,n){var a=this;var i=a.context;var o=i.gl;o.bindTexture(o.TEXTURE_2D,this.texture);if(n===o.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()){n=o.LINEAR}if(t!==this.filter){o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,t);o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,n||t);this.filter=t}if(r!==this.wrap){o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,r);o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,r);this.wrap=r}};Cp.prototype.isSizePowerOfTwo=function e(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0};Cp.prototype.destroy=function e(){var t=this.context;var r=t.gl;r.deleteTexture(this.texture);this.texture=null};var Ip=function e(t){var r=this;this._callback=t;this._triggered=false;if(typeof MessageChannel!=="undefined"){this._channel=new MessageChannel;this._channel.port2.onmessage=function(){r._triggered=false;r._callback()}}};Ip.prototype.trigger=function e(){var t=this;if(!this._triggered){this._triggered=true;if(this._channel){this._channel.port1.postMessage(true)}else{setTimeout((function(){t._triggered=false;t._callback()}),0)}}};Ip.prototype.remove=function e(){delete this._channel;this._callback=function(){}};var Pp=function e(t,r,n){this.target=t;this.parent=r;this.mapId=n;this.callbacks={};this.tasks={};this.taskQueue=[];this.cancelCallbacks={};w(["receive","process"],this);this.invoker=new Ip(this.process);this.target.addEventListener("message",this.receive,false);this.globalScope=O()?t:self};Pp.prototype.send=function e(t,r,n,a,i){var o=this;if(i===void 0)i=false;var s=Math.round(Math.random()*1e18).toString(36).substring(0,10);if(n){this.callbacks[s]=n}var l=R(this.globalScope)?undefined:[];this.target.postMessage({id:s,type:t,hasCallback:!!n,targetMapId:a,mustQueue:i,sourceMapId:this.mapId,data:ao(r,l)},l);return{cancel:function(){if(n){delete o.callbacks[s]}o.target.postMessage({id:s,type:"<cancel>",targetMapId:a,sourceMapId:o.mapId})}}};Pp.prototype.receive=function e(t){var r=t.data,n=r.id;if(!n){return}if(r.targetMapId&&this.mapId!==r.targetMapId){return}if(r.type==="<cancel>"){delete this.tasks[n];var a=this.cancelCallbacks[n];delete this.cancelCallbacks[n];if(a){a()}}else{if(O()||r.mustQueue){this.tasks[n]=r;this.taskQueue.push(n);this.invoker.trigger()}else{this.processTask(n,r)}}};Pp.prototype.process=function e(){if(!this.taskQueue.length){return}var t=this.taskQueue.shift();var r=this.tasks[t];delete this.tasks[t];if(this.taskQueue.length){this.invoker.trigger()}if(!r){return}this.processTask(t,r)};Pp.prototype.processTask=function e(t,r){var n=this;if(r.type==="<response>"){var a=this.callbacks[t];delete this.callbacks[t];if(a){if(r.error){a(io(r.error))}else{a(null,io(r.data))}}}else{var i=false;var o=R(this.globalScope)?undefined:[];var s=r.hasCallback?function(e,r){i=true;delete n.cancelCallbacks[t];n.target.postMessage({id:t,type:"<response>",sourceMapId:n.mapId,error:e?ao(e):null,data:ao(r,o)},o)}:function(e){i=true};var l=null;var u=io(r.data);if(this.parent[r.type]){l=this.parent[r.type](r.sourceMapId,u,s)}else if(this.parent.getWorkerSource){var f=r.type.split(".");var c=this.parent.getWorkerSource(r.sourceMapId,f[0],u.source);l=c[f[1]](u,s)}else{s(new Error("Could not find function "+r.type))}if(!i&&l&&l.cancel){this.cancelCallbacks[t]=l.cancel}}};Pp.prototype.remove=function e(){this.invoker.remove();this.target.removeEventListener("message",this.receive,false)};function Op(e,t,r){t=Math.pow(2,r)-t-1;var n=Dp(e*256,t*256,r),a=Dp((e+1)*256,(t+1)*256,r);return n[0]+","+n[1]+","+a[0]+","+a[1]}function Dp(e,t,r){var n=2*Math.PI*6378137/256/Math.pow(2,r),a=e*n-2*Math.PI*6378137/2,i=t*n-2*Math.PI*6378137/2;return[a,i]}var zp=function e(t,r){if(!t);else if(r){this.setSouthWest(t).setNorthEast(r)}else if(t.length===4){this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]])}else{this.setSouthWest(t[0]).setNorthEast(t[1])}};zp.prototype.setNorthEast=function e(t){this._ne=t instanceof Fp?new Fp(t.lng,t.lat):Fp.convert(t);return this};zp.prototype.setSouthWest=function e(t){this._sw=t instanceof Fp?new Fp(t.lng,t.lat):Fp.convert(t);return this};zp.prototype.extend=function e(t){var r=this._sw,n=this._ne;var a,i;if(t instanceof Fp){a=t;i=t}else if(t instanceof zp){a=t._sw;i=t._ne;if(!a||!i){return this}}else{if(Array.isArray(t)){if(t.length===4||t.every(Array.isArray)){var o=t;return this.extend(zp.convert(o))}else{var s=t;return this.extend(Fp.convert(s))}}return this}if(!r&&!n){this._sw=new Fp(a.lng,a.lat);this._ne=new Fp(i.lng,i.lat)}else{r.lng=Math.min(a.lng,r.lng);r.lat=Math.min(a.lat,r.lat);n.lng=Math.max(i.lng,n.lng);n.lat=Math.max(i.lat,n.lat)}return this};zp.prototype.getCenter=function e(){return new Fp((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)};zp.prototype.getSouthWest=function e(){return this._sw};zp.prototype.getNorthEast=function e(){return this._ne};zp.prototype.getNorthWest=function e(){return new Fp(this.getWest(),this.getNorth())};zp.prototype.getSouthEast=function e(){return new Fp(this.getEast(),this.getSouth())};zp.prototype.getWest=function e(){return this._sw.lng};zp.prototype.getSouth=function e(){return this._sw.lat};zp.prototype.getEast=function e(){return this._ne.lng};zp.prototype.getNorth=function e(){return this._ne.lat};zp.prototype.toArray=function e(){return[this._sw.toArray(),this._ne.toArray()]};zp.prototype.toString=function e(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"};zp.prototype.isEmpty=function e(){return!(this._sw&&this._ne)};zp.prototype.contains=function e(t){var r=Fp.convert(t);var n=r.lng;var a=r.lat;var i=this._sw.lat<=a&&a<=this._ne.lat;var o=this._sw.lng<=n&&n<=this._ne.lng;if(this._sw.lng>this._ne.lng){o=this._sw.lng>=n&&n>=this._ne.lng}return i&&o};zp.convert=function e(t){if(!t||t instanceof zp){return t}return new zp(t)};var Rp=6371008.8;var Fp=function e(t,r){if(isNaN(t)||isNaN(r)){throw new Error("Invalid LngLat object: ("+t+", "+r+")")}this.lng=+t;this.lat=+r;if(this.lat>90||this.lat<-90){throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}};Fp.prototype.wrap=function e(){return new Fp(v(this.lng,-180,180),this.lat)};Fp.prototype.toArray=function e(){return[this.lng,this.lat]};Fp.prototype.toString=function e(){return"LngLat("+this.lng+", "+this.lat+")"};Fp.prototype.distanceTo=function e(t){var r=Math.PI/180;var n=this.lat*r;var a=t.lat*r;var i=Math.sin(n)*Math.sin(a)+Math.cos(n)*Math.cos(a)*Math.cos((t.lng-this.lng)*r);var o=Rp*Math.acos(Math.min(i,1));return o};Fp.prototype.toBounds=function e(t){if(t===void 0)t=0;var r=40075017;var n=360*t/r,a=n/Math.cos(Math.PI/180*this.lat);return new zp(new Fp(this.lng-a,this.lat-n),new Fp(this.lng+a,this.lat+n))};Fp.convert=function e(t){if(t instanceof Fp){return t}if(Array.isArray(t)&&(t.length===2||t.length===3)){return new Fp(Number(t[0]),Number(t[1]))}if(!Array.isArray(t)&&typeof t==="object"&&t!==null){return new Fp(Number("lng"in t?t.lng:t.lon),Number(t.lat))}throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Bp=2*Math.PI*Rp;function Np(e){return Bp*Math.cos(e*Math.PI/180)}function jp(e){return(180+e)/360}function Up(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Vp(e,t){return e/Np(t)}function Hp(e){return e*360-180}function qp(e){var t=180-e*360;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90}function Gp(e,t){return e*Np(qp(t))}function Zp(e){return 1/Math.cos(e*Math.PI/180)}var Yp=function e(t,r,n){if(n===void 0)n=0;this.x=+t;this.y=+r;this.z=+n};Yp.fromLngLat=function e(t,r){if(r===void 0)r=0;var n=Fp.convert(t);return new Yp(jp(n.lng),Up(n.lat),Vp(r,n.lat))};Yp.prototype.toLngLat=function e(){return new Fp(Hp(this.x),qp(this.y))};Yp.prototype.toAltitude=function e(){return Gp(this.z,this.y)};Yp.prototype.meterInMercatorCoordinateUnits=function e(){return 1/Bp*Zp(qp(this.y))};var Wp=function e(t,r,n){this.z=t;this.x=r;this.y=n;this.key=Kp(0,t,t,r,n)};Wp.prototype.equals=function e(t){return this.z===t.z&&this.x===t.x&&this.y===t.y};Wp.prototype.url=function e(t,r){var n=Op(this.x,this.y,this.z);var a=$p(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(r==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",a).replace("{bbox-epsg-3857}",n)};Wp.prototype.getTilePoint=function e(t){var r=Math.pow(2,this.z);return new i((t.x*r-this.x)*ml,(t.y*r-this.y)*ml)};Wp.prototype.toString=function e(){return this.z+"/"+this.x+"/"+this.y};var Xp=function e(t,r){this.wrap=t;this.canonical=r;this.key=Kp(t,r.z,r.z,r.x,r.y)};var Jp=function e(t,r,n,a,i){this.overscaledZ=t;this.wrap=r;this.canonical=new Wp(n,+a,+i);this.key=Kp(r,t,n,a,i)};Jp.prototype.equals=function e(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)};Jp.prototype.scaledTo=function e(t){var r=this.canonical.z-t;if(t>this.canonical.z){return new Jp(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}else{return new Jp(t,this.wrap,t,this.canonical.x>>r,this.canonical.y>>r)}};Jp.prototype.calculateScaledKey=function e(t,r){var n=this.canonical.z-t;if(t>this.canonical.z){return Kp(this.wrap*+r,t,this.canonical.z,this.canonical.x,this.canonical.y)}else{return Kp(this.wrap*+r,t,t,this.canonical.x>>n,this.canonical.y>>n)}};Jp.prototype.isChildOf=function e(t){if(t.wrap!==this.wrap){return false}var r=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>r&&t.canonical.y===this.canonical.y>>r};Jp.prototype.children=function e(t){if(this.overscaledZ>=t){return[new Jp(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)]}var r=this.canonical.z+1;var n=this.canonical.x*2;var a=this.canonical.y*2;return[new Jp(r,this.wrap,r,n,a),new Jp(r,this.wrap,r,n+1,a),new Jp(r,this.wrap,r,n,a+1),new Jp(r,this.wrap,r,n+1,a+1)]};Jp.prototype.isLessThan=function e(t){if(this.wrap<t.wrap){return true}if(this.wrap>t.wrap){return false}if(this.overscaledZ<t.overscaledZ){return true}if(this.overscaledZ>t.overscaledZ){return false}if(this.canonical.x<t.canonical.x){return true}if(this.canonical.x>t.canonical.x){return false}if(this.canonical.y<t.canonical.y){return true}return false};Jp.prototype.wrapped=function e(){return new Jp(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)};Jp.prototype.unwrapTo=function e(t){return new Jp(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)};Jp.prototype.overscaleFactor=function e(){return Math.pow(2,this.overscaledZ-this.canonical.z)};Jp.prototype.toUnwrapped=function e(){return new Xp(this.wrap,this.canonical)};Jp.prototype.toString=function e(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y};Jp.prototype.getTilePoint=function e(t){return this.canonical.getTilePoint(new Yp(t.x-this.wrap,t.y))};function Kp(e,t,r,n,a){e*=2;if(e<0){e=e*-1-1}var i=1<<r;return(i*i*e+i*a+n).toString(36)+r.toString(36)+t.toString(36)}function $p(e,t,r){var n="",a;for(var i=e;i>0;i--){a=1<<i-1;n+=(t&a?1:0)+(r&a?2:0)}return n}eo("CanonicalTileID",Wp);eo("OverscaledTileID",Jp,{omit:["posMatrix"]});var Qp=function e(t,r,n){this.uid=t;if(r.height!==r.width){throw new RangeError("DEM tiles must be square")}if(n&&n!=="mapbox"&&n!=="terrarium"){return L('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".')}this.stride=r.height;var a=this.dim=r.height-2;this.data=new Uint32Array(r.data.buffer);this.encoding=n||"mapbox";for(var i=0;i<a;i++){this.data[this._idx(-1,i)]=this.data[this._idx(0,i)];this.data[this._idx(a,i)]=this.data[this._idx(a-1,i)];this.data[this._idx(i,-1)]=this.data[this._idx(i,0)];this.data[this._idx(i,a)]=this.data[this._idx(i,a-1)]}this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)];this.data[this._idx(a,-1)]=this.data[this._idx(a-1,0)];this.data[this._idx(-1,a)]=this.data[this._idx(0,a-1)];this.data[this._idx(a,a)]=this.data[this._idx(a-1,a-1)]};Qp.prototype.get=function e(t,r){var n=new Uint8Array(this.data.buffer);var a=this._idx(t,r)*4;var i=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return i(n[a],n[a+1],n[a+2])};Qp.prototype.getUnpackVector=function e(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]};Qp.prototype._idx=function e(t,r){if(t<-1||t>=this.dim+1||r<-1||r>=this.dim+1){throw new RangeError("out of range source coordinates for DEM data")}return(r+1)*this.stride+(t+1)};Qp.prototype._unpackMapbox=function e(t,r,n){return(t*256*256+r*256+n)/10-1e4};Qp.prototype._unpackTerrarium=function e(t,r,n){return t*256+r+n/256-32768};Qp.prototype.getPixels=function e(){return new Du({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))};Qp.prototype.backfillBorder=function e(t,r,n){if(this.dim!==t.dim){throw new Error("dem dimension mismatch")}var a=r*this.dim,i=r*this.dim+this.dim,o=n*this.dim,s=n*this.dim+this.dim;switch(r){case-1:a=i-1;break;case 1:i=a+1;break}switch(n){case-1:o=s-1;break;case 1:s=o+1;break}var l=-r*this.dim;var u=-n*this.dim;for(var f=o;f<s;f++){for(var c=a;c<i;c++){this.data[this._idx(c,f)]=t.data[this._idx(c+l,f+u)]}}};eo("DEMData",Qp);function ed(e,t){var r={};if(!t){return r}var n=function(){var e=i[a];var n=e.layerIds.map((function(e){return t.getLayer(e)})).filter(Boolean);if(n.length===0){return}e.layers=n;if(e.stateDependentLayerIds){e.stateDependentLayers=e.stateDependentLayerIds.map((function(e){return n.filter((function(t){return t.id===e}))[0]}))}for(var o=0,s=n;o<s.length;o+=1){var l=s[o];r[l.id]=e}};for(var a=0,i=e;a<i.length;a+=1)n();return r}var td=function e(t){this._stringToNumber={};this._numberToString=[];for(var r=0;r<t.length;r++){var n=t[r];this._stringToNumber[n]=r;this._numberToString[r]=n}};td.prototype.encode=function e(t){return this._stringToNumber[t]};td.prototype.decode=function e(t){return this._numberToString[t]};var rd=function e(t,r,n,a,i){this.type="Feature";this._vectorTileFeature=t;t._z=r;t._x=n;t._y=a;this.properties=t.properties;this.id=i};var nd={geometry:{configurable:true}};nd.geometry.get=function(){if(this._geometry===undefined){this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry}return this._geometry};nd.geometry.set=function(e){this._geometry=e};rd.prototype.toJSON=function e(){var t={geometry:this.geometry};for(var r in this){if(r==="_geometry"||r==="_vectorTileFeature"){continue}t[r]=this[r]}return t};Object.defineProperties(rd.prototype,nd);var ad=function e(){this.state={};this.stateChanges={};this.deletedStates={}};ad.prototype.updateState=function e(t,r,n){var a=String(r);this.stateChanges[t]=this.stateChanges[t]||{};this.stateChanges[t][a]=this.stateChanges[t][a]||{};g(this.stateChanges[t][a],n);if(this.deletedStates[t]===null){this.deletedStates[t]={};for(var i in this.state[t]){if(i!==a){this.deletedStates[t][i]=null}}}else{var o=this.deletedStates[t]&&this.deletedStates[t][a]===null;if(o){this.deletedStates[t][a]={};for(var s in this.state[t][a]){if(!n[s]){this.deletedStates[t][a][s]=null}}}else{for(var l in n){var u=this.deletedStates[t]&&this.deletedStates[t][a]&&this.deletedStates[t][a][l]===null;if(u){delete this.deletedStates[t][a][l]}}}}};ad.prototype.removeFeatureState=function e(t,r,n){var a=this.deletedStates[t]===null;if(a){return}var i=String(r);this.deletedStates[t]=this.deletedStates[t]||{};if(n&&r!==undefined){if(this.deletedStates[t][i]!==null){this.deletedStates[t][i]=this.deletedStates[t][i]||{};this.deletedStates[t][i][n]=null}}else if(r!==undefined){var o=this.stateChanges[t]&&this.stateChanges[t][i];if(o){this.deletedStates[t][i]={};for(n in this.stateChanges[t][i]){this.deletedStates[t][i][n]=null}}else{this.deletedStates[t][i]=null}}else{this.deletedStates[t]=null}};ad.prototype.getState=function e(t,r){var n=String(r);var a=this.state[t]||{};var i=this.stateChanges[t]||{};var o=g({},a[n],i[n]);if(this.deletedStates[t]===null){return{}}else if(this.deletedStates[t]){var s=this.deletedStates[t][r];if(s===null){return{}}for(var l in s){delete o[l]}}return o};ad.prototype.initializeTileState=function e(t,r){t.setFeatureState(this.state,r)};ad.prototype.coalesceChanges=function e(t,r){var n={};for(var a in this.stateChanges){this.state[a]=this.state[a]||{};var i={};for(var o in this.stateChanges[a]){if(!this.state[a][o]){this.state[a][o]={}}g(this.state[a][o],this.stateChanges[a][o]);i[o]=this.state[a][o]}n[a]=i}for(var s in this.deletedStates){this.state[s]=this.state[s]||{};var l={};if(this.deletedStates[s]===null){for(var u in this.state[s]){l[u]={};this.state[s][u]={}}}else{for(var f in this.deletedStates[s]){var c=this.deletedStates[s][f]===null;if(c){this.state[s][f]={}}else{for(var v=0,h=Object.keys(this.deletedStates[s][f]);v<h.length;v+=1){var p=h[v];delete this.state[s][f][p]}}l[f]=this.state[s][f]}}n[s]=n[s]||{};g(n[s],l)}this.stateChanges={};this.deletedStates={};if(Object.keys(n).length===0){return}for(var d in t){var y=t[d];y.setFeatureState(n,r)}};var id=function e(t,r){this.tileID=t;this.x=t.canonical.x;this.y=t.canonical.y;this.z=t.canonical.z;this.grid=new Wi(ml,16,0);this.grid3D=new Wi(ml,16,0);this.featureIndexArray=new Rs;this.promoteId=r};id.prototype.insert=function e(t,r,n,a,i,o){var s=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,a,i);var l=o?this.grid3D:this.grid;for(var u=0;u<r.length;u++){var f=r[u];var c=[Infinity,Infinity,-Infinity,-Infinity];for(var v=0;v<f.length;v++){var h=f[v];c[0]=Math.min(c[0],h.x);c[1]=Math.min(c[1],h.y);c[2]=Math.max(c[2],h.x);c[3]=Math.max(c[3],h.y)}if(c[0]<ml&&c[1]<ml&&c[2]>=0&&c[3]>=0){l.insert(s,c[0],c[1],c[2],c[3])}}};id.prototype.loadVTLayers=function e(){if(!this.vtLayers){this.vtLayers=new nc.VectorTile(new iv(this.rawTileData)).layers;this.sourceLayerCoder=new td(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])}return this.vtLayers};id.prototype.query=function e(t,r,n,a){var i=this;this.loadVTLayers();var o=t.params||{},s=ml/t.tileSize/t.scale,l=di(o.filter);var u=t.queryGeometry;var f=t.queryPadding*s;var c=sd(u);var v=this.grid.query(c.minX-f,c.minY-f,c.maxX+f,c.maxY+f);var h=sd(t.cameraQueryGeometry);var p=this.grid3D.query(h.minX-f,h.minY-f,h.maxX+f,h.maxY+f,(function(e,r,n,a){return zl(t.cameraQueryGeometry,e-f,r-f,n+f,a+f)}));for(var d=0,g=p;d<g.length;d+=1){var y=g[d];v.push(y)}v.sort(ld);var m={};var x;var b=function(e){var f=v[e];if(f===x){return}x=f;var c=i.featureIndexArray.get(f);var h=null;i.loadMatchingFeature(m,c.bucketIndex,c.sourceLayerIndex,c.featureIndex,l,o.layers,o.availableImages,r,n,a,(function(e,r,n){if(!h){h=_l(e)}return r.queryIntersectsFeature(u,e,n,h,i.z,t.transform,s,t.pixelPosMatrix)}))};for(var _=0;_<v.length;_++)b(_);return m};id.prototype.loadMatchingFeature=function e(t,r,n,a,i,o,s,l,u,f,c){var v=this.bucketLayerIDs[r];if(o&&!S(o,v)){return}var h=this.sourceLayerCoder.decode(n);var p=this.vtLayers[h];var d=p.feature(a);if(!i.filter(new Do(this.tileID.overscaledZ),d)){return}var g=this.getId(d,h);for(var y=0;y<v.length;y++){var m=v[y];if(o&&o.indexOf(m)<0){continue}var x=l[m];if(!x){continue}var b={};if(g!==undefined&&f){b=f.getState(x.sourceLayer||"_geojsonTileLayer",g)}var _=u[m];_.paint=od(_.paint,x.paint,d,b,s);_.layout=od(_.layout,x.layout,d,b,s);var w=!c||c(d,x,b);if(!w){continue}var T=new rd(d,this.z,this.x,this.y,g);T.layer=_;var k=t[m];if(k===undefined){k=t[m]=[]}k.push({featureIndex:a,feature:T,intersectionZ:w})}};id.prototype.lookupSymbolFeatures=function e(t,r,n,a,i,o,s,l){var u={};this.loadVTLayers();var f=di(i);for(var c=0,v=t;c<v.length;c+=1){var h=v[c];this.loadMatchingFeature(u,n,a,h,f,o,s,l,r)}return u};id.prototype.hasLayer=function e(t){for(var r=0,n=this.bucketLayerIDs;r<n.length;r+=1){var a=n[r];for(var i=0,o=a;i<o.length;i+=1){var s=o[i];if(t===s){return true}}}return false};id.prototype.getId=function e(t,r){var n=t.id;if(this.promoteId){var a=typeof this.promoteId==="string"?this.promoteId:this.promoteId[r];n=t.properties[a];if(typeof n==="boolean"){n=Number(n)}}return n};eo("FeatureIndex",id,{omit:["rawTileData","sourceLayerCoder"]});function od(e,t,r,n,a){return k(e,(function(e,i){var o=t instanceof Vo?t.get(i):null;return o&&o.evaluate?o.evaluate(r,n,a):o}))}function sd(e){var t=Infinity;var r=Infinity;var n=-Infinity;var a=-Infinity;for(var i=0,o=e;i<o.length;i+=1){var s=o[i];t=Math.min(t,s.x);r=Math.min(r,s.y);n=Math.max(n,s.x);a=Math.max(a,s.y)}return{minX:t,minY:r,maxX:n,maxY:a}}function ld(e,t){return t-e}var ud=3e4;var fd=function e(t,r){this.tileID=t;this.uid=x();this.uses=0;this.tileSize=r;this.buckets={};this.expirationTime=null;this.queryPadding=0;this.hasSymbolBuckets=false;this.hasRTLText=false;this.dependencies={};this.expiredRequestCount=0;this.state="loading"};fd.prototype.registerFadeDuration=function e(t){var r=t+this.timeAdded;if(r<G.now()){return}if(this.fadeEndTime&&r<this.fadeEndTime){return}this.fadeEndTime=r};fd.prototype.wasRequested=function e(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"};fd.prototype.loadVectorData=function e(t,r,n){if(this.hasData()){this.unloadVectorData()}this.state="loaded";if(!t){this.collisionBoxArray=new Es;return}if(t.featureIndex){this.latestFeatureIndex=t.featureIndex;if(t.rawTileData){this.latestRawTileData=t.rawTileData;this.latestFeatureIndex.rawTileData=t.rawTileData}else if(this.latestRawTileData){this.latestFeatureIndex.rawTileData=this.latestRawTileData}}this.collisionBoxArray=t.collisionBoxArray;this.buckets=ed(t.buckets,r.style);this.hasSymbolBuckets=false;for(var a in this.buckets){var i=this.buckets[a];if(i instanceof lp){this.hasSymbolBuckets=true;if(n){i.justReloaded=true}else{break}}}this.hasRTLText=false;if(this.hasSymbolBuckets){for(var o in this.buckets){var s=this.buckets[o];if(s instanceof lp){if(s.hasRTLText){this.hasRTLText=true;Oo();break}}}}this.queryPadding=0;for(var l in this.buckets){var u=this.buckets[l];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(l).queryRadius(u))}if(t.imageAtlas){this.imageAtlas=t.imageAtlas}if(t.glyphAtlasImage){this.glyphAtlasImage=t.glyphAtlasImage}};fd.prototype.unloadVectorData=function e(){for(var t in this.buckets){this.buckets[t].destroy()}this.buckets={};if(this.imageAtlasTexture){this.imageAtlasTexture.destroy()}if(this.imageAtlas){this.imageAtlas=null}if(this.glyphAtlasTexture){this.glyphAtlasTexture.destroy()}this.latestFeatureIndex=null;this.state="unloaded"};fd.prototype.getBucket=function e(t){return this.buckets[t.id]};fd.prototype.upload=function e(t){for(var r in this.buckets){var n=this.buckets[r];if(n.uploadPending()){n.upload(t)}}var a=t.gl;if(this.imageAtlas&&!this.imageAtlas.uploaded){this.imageAtlasTexture=new Cp(t,this.imageAtlas.image,a.RGBA);this.imageAtlas.uploaded=true}if(this.glyphAtlasImage){this.glyphAtlasTexture=new Cp(t,this.glyphAtlasImage,a.ALPHA);this.glyphAtlasImage=null}};fd.prototype.prepare=function e(t){if(this.imageAtlas){this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}};fd.prototype.queryRenderedFeatures=function e(t,r,n,a,i,o,s,l,u,f){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData){return{}}return this.latestFeatureIndex.query({queryGeometry:a,cameraQueryGeometry:i,scale:o,tileSize:this.tileSize,pixelPosMatrix:f,transform:l,params:s,queryPadding:this.queryPadding*u},t,r,n)};fd.prototype.querySourceFeatures=function e(t,r){var n=this.latestFeatureIndex;if(!n||!n.rawTileData){return}var a=n.loadVTLayers();var i=r?r.sourceLayer:"";var o=a._geojsonTileLayer||a[i];if(!o){return}var s=di(r&&r.filter);var l=this.tileID.canonical;var u=l.z;var f=l.x;var c=l.y;var v={z:u,x:f,y:c};for(var h=0;h<o.length;h++){var p=o.feature(h);if(s.filter(new Do(this.tileID.overscaledZ),p)){var d=n.getId(p,i);var g=new rd(p,u,f,c,d);g.tile=v;t.push(g)}}};fd.prototype.hasData=function e(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"};fd.prototype.patternsLoaded=function e(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length};fd.prototype.setExpiryData=function e(t){var r=this.expirationTime;if(t.cacheControl){var n=D(t.cacheControl);if(n["max-age"]){this.expirationTime=Date.now()+n["max-age"]*1e3}}else if(t.expires){this.expirationTime=new Date(t.expires).getTime()}if(this.expirationTime){var a=Date.now();var i=false;if(this.expirationTime>a){i=false}else if(!r){i=true}else if(this.expirationTime<r){i=true}else{var o=this.expirationTime-r;if(!o){i=true}else{this.expirationTime=a+Math.max(o,ud)}}if(i){this.expiredRequestCount++;this.state="expired"}else{this.expiredRequestCount=0}}};fd.prototype.getExpiryTimeout=function e(){if(this.expirationTime){if(this.expiredRequestCount){return 1e3*(1<<Math.min(this.expiredRequestCount-1,31))}else{return Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}}};fd.prototype.setFeatureState=function e(t,r){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0){return}var n=this.latestFeatureIndex.loadVTLayers();for(var a in this.buckets){if(!r.style.hasLayer(a)){continue}var i=this.buckets[a];var o=i.layers[0]["sourceLayer"]||"_geojsonTileLayer";var s=n[o];var l=t[o];if(!s||!l||Object.keys(l).length===0){continue}i.update(l,s,this.imageAtlas&&this.imageAtlas.patternPositions||{});var u=r&&r.style&&r.style.getLayer(a);if(u){this.queryPadding=Math.max(this.queryPadding,u.queryRadius(i))}}};fd.prototype.holdingForFade=function e(){return this.symbolFadeHoldUntil!==undefined};fd.prototype.symbolFadeFinished=function e(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<G.now()};fd.prototype.clearFadeHold=function e(){this.symbolFadeHoldUntil=undefined};fd.prototype.setHoldDuration=function e(t){this.symbolFadeHoldUntil=G.now()+t};fd.prototype.setDependencies=function e(t,r){var n={};for(var a=0,i=r;a<i.length;a+=1){var o=i[a];n[o]=true}this.dependencies[t]=n};fd.prototype.hasDependency=function e(t,r){for(var n=0,a=t;n<a.length;n+=1){var i=a[n];var o=this.dependencies[i];if(o){for(var s=0,l=r;s<l.length;s+=1){var u=l[s];if(o[u]){return true}}}}return false};var cd=["type","source","source-layer","minzoom","maxzoom","filter","layout"];var vd=self.performance;var hd=function e(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()};vd.mark(this._marks.start)};hd.prototype.finish=function e(){vd.mark(this._marks.end);var t=vd.getEntriesByName(this._marks.measure);if(t.length===0){vd.measure(this._marks.measure,this._marks.start,this._marks.end);t=vd.getEntriesByName(this._marks.measure);vd.clearMarks(this._marks.start);vd.clearMarks(this._marks.end);vd.clearMeasures(this._marks.measure)}return t};e.Actor=Pp;e.AlphaImage=Ou;e.CanonicalTileID=Wp;e.CollisionBoxArray=Es;e.Color=br;e.DEMData=Qp;e.DataConstantProperty=Ho;e.DictionaryCoder=td;e.EXTENT=ml;e.ErrorEvent=st;e.EvaluationParameters=Do;e.Event=ot;e.Evented=lt;e.FeatureIndex=id;e.FillBucket=Df;e.FillExtrusionBucket=lc;e.ImageAtlas=Hv;e.ImagePosition=Uv;e.LineBucket=Lc;e.LngLat=Fp;e.LngLatBounds=zp;e.MercatorCoordinate=Yp;e.ONE_EM=tv;e.OverscaledTileID=Jp;e.Point=i;e.Point$1=i;e.Properties=Wo;e.Protobuf=iv;e.RGBAImage=Du;e.RequestManager=re;e.RequestPerformance=hd;e.ResourceType=Ne;e.SegmentVector=Ns;e.SourceFeatureState=ad;e.StructArrayLayout1ui2=ks;e.StructArrayLayout2f1f2i16=ds;e.StructArrayLayout2i4=is;e.StructArrayLayout3ui6=ys;e.StructArrayLayout4i8=os;e.SymbolBucket=lp;e.Texture=Cp;e.Tile=fd;e.Transitionable=Fo;e.Uniform1f=el;e.Uniform1i=Qs;e.Uniform2f=tl;e.Uniform3f=rl;e.Uniform4f=nl;e.UniformColor=al;e.UniformMatrix4f=ol;e.UnwrappedTileID=Xp;e.ValidationError=Wt;e.WritingMode=qv;e.ZoomHistory=oo;e.add=lu;e.addDynamicAttributes=ap;e.asyncAll=h;e.bezier=u;e.bindAll=w;e.browser=G;e.cacheEntryPossiblyAdded=Oe;e.clamp=c;e.clearTileCache=ze;e.clipLine=Sh;e.clone=Xl;e.clone$1=M;e.clone$2=su;e.collisionCircleLayout=qc;e.config=Z;e.create=Wl;e.create$1=Zl;e.create$2=ql;e.createCommonjsModule=t;e.createExpression=Ja;e.createLayout=rs;e.createStyleLayer=kp;e.cross=hu;e.deepEqual=s;e.dot=vu;e.dot$1=xu;e.ease=f;e.emitValidationErrors=Yi;e.endsWith=T;e.enforceCacheSizeLimit=De;e.evaluateSizeForFeature=yh;e.evaluateSizeForZoom=mh;e.evaluateVariableOffset=Gh;e.evented=So;e.extend=g;e.featureFilter=di;e.filterObject=A;e.fromRotation=Yl;e.getAnchorAlignment=lh;e.getAnchorJustification=Yh;e.getArrayBuffer=Ye;e.getImage=rt;e.getJSON=Ze;e.getRTLTextPluginStatus=Eo;e.getReferrer=Ue;e.getVideo=nt;e.identity=Jl;e.invert=Kl;e.isChar=so;e.isMapboxURL=ne;e.keysDifference=d;e.makeRequest=Ge;e.mapObject=k;e.mercatorXfromLng=jp;e.mercatorYfromLat=Up;e.mercatorZfromAltitude=Vp;e.mul=iu;e.multiply=$l;e.mvt=nc;e.normalize=cu;e.number=wn;e.offscreenCanvasSupported=Be;e.ortho=au;e.parseGlyphPBF=Fv;e.pbf=iv;e.performSymbolLayout=Zh;e.perspective=nu;e.pick=y;e.plugin=Po;e.polygonIntersectsPolygon=kl;e.postMapLoadEvent=xe;e.postTurnstileEvent=ye;e.potpack=Nv;e.refProperties=cd;e.register=eo;e.registerForPluginStateChange=Lo;e.rotate=Gl;e.rotateX=tu;e.rotateZ=ru;e.scale=eu;e.scale$1=mu;e.scale$2=fu;e.setCacheLimits=Re;e.setRTLTextPlugin=Co;e.sphericalToCartesian=P;e.sqrLen=ku;e.styleSpec=Yt;e.sub=du;e.symbolSize=xh;e.transformMat3=pu;e.transformMat4=bu;e.translate=Ql;e.triggerPluginCompletionEvent=Ao;e.uniqueId=x;e.validateCustomStyleLayer=_p;e.validateLight=qi;e.validateStyle=Hi;e.values=p;e.vectorTile=nc;e.version=r;e.warnOnce=L;e.webpSupported=Y;e.window=self;e.wrap=v}));n(["./shared"],(function(e){"use strict";function t(e){var r=typeof e;if(r==="number"||r==="boolean"||r==="string"||e===undefined||e===null){return JSON.stringify(e)}if(Array.isArray(e)){var n="[";for(var a=0,i=e;a<i.length;a+=1){var o=i[a];n+=t(o)+","}return n+"]"}var s=Object.keys(e).sort();var l="{";for(var u=0;u<s.length;u++){l+=JSON.stringify(s[u])+":"+t(e[s[u]])+","}return l+"}"}function r(r){var n="";for(var a=0,i=e.refProperties;a<i.length;a+=1){var o=i[a];n+="/"+t(r[o])}return n}function n(e,t){var n={};for(var a=0;a<e.length;a++){var i=t&&t[e[a].id]||r(e[a]);if(t){t[e[a].id]=i}var o=n[i];if(!o){o=n[i]=[]}o.push(e[a])}var s=[];for(var l in n){s.push(n[l])}return s}var a=function e(t){this.keyCache={};if(t){this.replace(t)}};a.prototype.replace=function e(t){this._layerConfigs={};this._layers={};this.update(t,[])};a.prototype.update=function t(r,a){var i=this;for(var o=0,s=r;o<s.length;o+=1){var l=s[o];this._layerConfigs[l.id]=l;var u=this._layers[l.id]=e.createStyleLayer(l);u._featureFilter=e.featureFilter(u.filter);if(this.keyCache[l.id]){delete this.keyCache[l.id]}}for(var f=0,c=a;f<c.length;f+=1){var v=c[f];delete this.keyCache[v];delete this._layerConfigs[v];delete this._layers[v]}this.familiesBySource={};var h=n(e.values(this._layerConfigs),this.keyCache);for(var p=0,d=h;p<d.length;p+=1){var g=d[p];var y=g.map((function(e){return i._layers[e.id]}));var m=y[0];if(m.visibility==="none"){continue}var x=m.source||"";var b=this.familiesBySource[x];if(!b){b=this.familiesBySource[x]={}}var _=m.sourceLayer||"_geojsonTileLayer";var w=b[_];if(!w){w=b[_]=[]}w.push(y)}};var i=1;var o=function t(r){var n={};var a=[];for(var o in r){var s=r[o];var l=n[o]={};for(var u in s){var f=s[+u];if(!f||f.bitmap.width===0||f.bitmap.height===0){continue}var c={x:0,y:0,w:f.bitmap.width+2*i,h:f.bitmap.height+2*i};a.push(c);l[u]={rect:c,metrics:f.metrics}}}var v=e.potpack(a);var h=v.w;var p=v.h;var d=new e.AlphaImage({width:h||1,height:p||1});for(var g in r){var y=r[g];for(var m in y){var x=y[+m];if(!x||x.bitmap.width===0||x.bitmap.height===0){continue}var b=n[g][m].rect;e.AlphaImage.copy(x.bitmap,d,{x:0,y:0},{x:b.x+i,y:b.y+i},x.bitmap)}}this.image=d;this.positions=n};e.register("GlyphAtlas",o);var s=function t(r){this.tileID=new e.OverscaledTileID(r.tileID.overscaledZ,r.tileID.wrap,r.tileID.canonical.z,r.tileID.canonical.x,r.tileID.canonical.y);this.uid=r.uid;this.zoom=r.zoom;this.pixelRatio=r.pixelRatio;this.tileSize=r.tileSize;this.source=r.source;this.overscaling=this.tileID.overscaleFactor();this.showCollisionBoxes=r.showCollisionBoxes;this.collectResourceTiming=!!r.collectResourceTiming;this.returnDependencies=!!r.returnDependencies;this.promoteId=r.promoteId};s.prototype.parse=function t(r,n,a,i,s){var u=this;this.status="parsing";this.data=r;this.collisionBoxArray=new e.CollisionBoxArray;var f=new e.DictionaryCoder(Object.keys(r.layers).sort());var c=new e.FeatureIndex(this.tileID,this.promoteId);c.bucketLayerIDs=[];var v={};var h={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:a};var p=n.familiesBySource[this.source];for(var d in p){var g=r.layers[d];if(!g){continue}if(g.version===1){e.warnOnce('Vector tile source "'+this.source+'" layer "'+d+'" '+"does not use vector tile spec v2 and therefore may have some rendering errors.")}var y=f.encode(d);var m=[];for(var x=0;x<g.length;x++){var b=g.feature(x);var _=c.getId(b,d);m.push({feature:b,id:_,index:x,sourceLayerIndex:y})}for(var w=0,T=p[d];w<T.length;w+=1){var k=T[w];var A=k[0];if(A.minzoom&&this.zoom<Math.floor(A.minzoom)){continue}if(A.maxzoom&&this.zoom>=A.maxzoom){continue}if(A.visibility==="none"){continue}l(k,this.zoom,a);var M=v[A.id]=A.createBucket({index:c.bucketLayerIDs.length,layers:k,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:y,sourceID:this.source});M.populate(m,h,this.tileID.canonical);c.bucketLayerIDs.push(k.map((function(e){return e.id})))}}var S;var E;var L;var C;var I=e.mapObject(h.glyphDependencies,(function(e){return Object.keys(e).map(Number)}));if(Object.keys(I).length){i.send("getGlyphs",{uid:this.uid,stacks:I},(function(e,t){if(!S){S=e;E=t;D.call(u)}}))}else{E={}}var P=Object.keys(h.iconDependencies);if(P.length){i.send("getImages",{icons:P,source:this.source,tileID:this.tileID,type:"icons"},(function(e,t){if(!S){S=e;L=t;D.call(u)}}))}else{L={}}var O=Object.keys(h.patternDependencies);if(O.length){i.send("getImages",{icons:O,source:this.source,tileID:this.tileID,type:"patterns"},(function(e,t){if(!S){S=e;C=t;D.call(u)}}))}else{C={}}D.call(this);function D(){if(S){return s(S)}else if(E&&L&&C){var t=new o(E);var r=new e.ImageAtlas(L,C);for(var n in v){var i=v[n];if(i instanceof e.SymbolBucket){l(i.layers,this.zoom,a);e.performSymbolLayout(i,E,t.positions,L,r.iconPositions,this.showCollisionBoxes,this.tileID.canonical)}else if(i.hasPattern&&(i instanceof e.LineBucket||i instanceof e.FillBucket||i instanceof e.FillExtrusionBucket)){l(i.layers,this.zoom,a);i.addFeatures(h,this.tileID.canonical,r.patternPositions)}}this.status="done";s(null,{buckets:e.values(v).filter((function(e){return!e.isEmpty()})),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,imageAtlas:r,glyphMap:this.returnDependencies?E:null,iconMap:this.returnDependencies?L:null,glyphPositions:this.returnDependencies?t.positions:null})}}};function l(t,r,n){var a=new e.EvaluationParameters(r);for(var i=0,o=t;i<o.length;i+=1){var s=o[i];s.recalculate(a,n)}}function u(t,r){var n=e.getArrayBuffer(t.request,(function(t,n,a,i){if(t){r(t)}else if(n){r(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(n)),rawData:n,cacheControl:a,expires:i})}}));return function(){n.cancel();r()}}var f=function e(t,r,n,a){this.actor=t;this.layerIndex=r;this.availableImages=n;this.loadVectorData=a||u;this.loading={};this.loaded={}};f.prototype.loadTile=function t(r,n){var a=this;var i=r.uid;if(!this.loading){this.loading={}}var o=r&&r.request&&r.request.collectResourceTiming?new e.RequestPerformance(r.request):false;var l=this.loading[i]=new s(r);l.abort=this.loadVectorData(r,(function(t,r){delete a.loading[i];if(t||!r){l.status="done";a.loaded[i]=l;return n(t)}var s=r.rawData;var u={};if(r.expires){u.expires=r.expires}if(r.cacheControl){u.cacheControl=r.cacheControl}var f={};if(o){var c=o.finish();if(c){f.resourceTiming=JSON.parse(JSON.stringify(c))}}l.vectorTile=r.vectorTile;l.parse(r.vectorTile,a.layerIndex,a.availableImages,a.actor,(function(t,r){if(t||!r){return n(t)}n(null,e.extend({rawTileData:s.slice(0)},r,u,f))}));a.loaded=a.loaded||{};a.loaded[i]=l}))};f.prototype.reloadTile=function e(t,r){var n=this;var a=this.loaded,i=t.uid,o=this;if(a&&a[i]){var s=a[i];s.showCollisionBoxes=t.showCollisionBoxes;var l=function(e,t){var a=s.reloadCallback;if(a){delete s.reloadCallback;s.parse(s.vectorTile,o.layerIndex,n.availableImages,o.actor,a)}r(e,t)};if(s.status==="parsing"){s.reloadCallback=l}else if(s.status==="done"){if(s.vectorTile){s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,l)}else{l()}}}};f.prototype.abortTile=function e(t,r){var n=this.loading,a=t.uid;if(n&&n[a]&&n[a].abort){n[a].abort();delete n[a]}r()};f.prototype.removeTile=function e(t,r){var n=this.loaded,a=t.uid;if(n&&n[a]){delete n[a]}r()};var c=e.window.ImageBitmap;var v=function e(){this.loaded={}};v.prototype.loadTile=function t(r,n){var a=r.uid;var i=r.encoding;var o=r.rawImageData;var s=c&&o instanceof c?this.getImageData(o):o;var l=new e.DEMData(a,s,i);this.loaded=this.loaded||{};this.loaded[a]=l;n(null,l)};v.prototype.getImageData=function t(r){if(!this.offscreenCanvas||!this.offscreenCanvasContext){this.offscreenCanvas=new OffscreenCanvas(r.width,r.height);this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")}this.offscreenCanvas.width=r.width;this.offscreenCanvas.height=r.height;this.offscreenCanvasContext.drawImage(r,0,0,r.width,r.height);var n=this.offscreenCanvasContext.getImageData(-1,-1,r.width+2,r.height+2);this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height);return new e.RGBAImage({width:n.width,height:n.height},n.data)};v.prototype.removeTile=function e(t){var r=this.loaded,n=t.uid;if(r&&r[n]){delete r[n]}};var h=p;function p(e,t){var r=e&&e.type,n;if(r==="FeatureCollection"){for(n=0;n<e.features.length;n++){p(e.features[n],t)}}else if(r==="GeometryCollection"){for(n=0;n<e.geometries.length;n++){p(e.geometries[n],t)}}else if(r==="Feature"){p(e.geometry,t)}else if(r==="Polygon"){d(e.coordinates,t)}else if(r==="MultiPolygon"){for(n=0;n<e.coordinates.length;n++){d(e.coordinates[n],t)}}return e}function d(e,t){if(e.length===0){return}g(e[0],t);for(var r=1;r<e.length;r++){g(e[r],!t)}}function g(e,t){var r=0;for(var n=0,a=e.length,i=a-1;n<a;i=n++){r+=(e[n][0]-e[i][0])*(e[i][1]+e[n][1])}if(r>=0!==!!t){e.reverse()}}var y=e.vectorTile.VectorTileFeature.prototype.toGeoJSON;var m=function t(r){this._feature=r;this.extent=e.EXTENT;this.type=r.type;this.properties=r.tags;if("id"in r&&!isNaN(r.id)){this.id=parseInt(r.id,10)}};m.prototype.loadGeometry=function t(){if(this._feature.type===1){var r=[];for(var n=0,a=this._feature.geometry;n<a.length;n+=1){var i=a[n];r.push([new e.Point$1(i[0],i[1])])}return r}else{var o=[];for(var s=0,l=this._feature.geometry;s<l.length;s+=1){var u=l[s];var f=[];for(var c=0,v=u;c<v.length;c+=1){var h=v[c];f.push(new e.Point$1(h[0],h[1]))}o.push(f)}return o}};m.prototype.toGeoJSON=function e(t,r,n){return y.call(this,t,r,n)};var x=function t(r){this.layers={_geojsonTileLayer:this};this.name="_geojsonTileLayer";this.extent=e.EXTENT;this.length=r.length;this._features=r};x.prototype.feature=function e(t){return new m(this._features[t])};var b=e.vectorTile.VectorTileFeature;var _=w;function w(e,t){this.options=t||{};this.features=e;this.length=e.length}w.prototype.feature=function(e){return new T(this.features[e],this.options.extent)};function T(e,t){this.id=typeof e.id==="number"?e.id:undefined;this.type=e.type;this.rawGeometry=e.type===1?[e.geometry]:e.geometry;this.properties=e.tags;this.extent=t||4096}T.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var r=0;r<t.length;r++){var n=t[r];var a=[];for(var i=0;i<n.length;i++){a.push(new e.Point$1(n[i][0],n[i][1]))}this.geometry.push(a)}return this.geometry};T.prototype.bbox=function(){if(!this.geometry){this.loadGeometry()}var e=this.geometry;var t=Infinity;var r=-Infinity;var n=Infinity;var a=-Infinity;for(var i=0;i<e.length;i++){var o=e[i];for(var s=0;s<o.length;s++){var l=o[s];t=Math.min(t,l.x);r=Math.max(r,l.x);n=Math.min(n,l.y);a=Math.max(a,l.y)}}return[t,n,r,a]};T.prototype.toGeoJSON=b.prototype.toGeoJSON;var k=E;var A=E;var M=L;var S=_;function E(t){var r=new e.pbf;C(t,r);return r.finish()}function L(e,t){t=t||{};var r={};for(var n in e){r[n]=new _(e[n].features,t);r[n].name=n;r[n].version=t.version;r[n].extent=t.extent}return E({layers:r})}function C(e,t){for(var r in e.layers){t.writeMessage(3,I,e.layers[r])}}function I(e,t){t.writeVarintField(15,e.version||1);t.writeStringField(1,e.name||"");t.writeVarintField(5,e.extent||4096);var r;var n={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<e.length;r++){n.feature=e.feature(r);t.writeMessage(2,P,n)}var a=n.keys;for(r=0;r<a.length;r++){t.writeStringField(3,a[r])}var i=n.values;for(r=0;r<i.length;r++){t.writeMessage(4,F,i[r])}}function P(e,t){var r=e.feature;if(r.id!==undefined){t.writeVarintField(1,r.id)}t.writeMessage(2,O,e);t.writeVarintField(3,r.type);t.writeMessage(4,R,r)}function O(e,t){var r=e.feature;var n=e.keys;var a=e.values;var i=e.keycache;var o=e.valuecache;for(var s in r.properties){var l=i[s];if(typeof l==="undefined"){n.push(s);l=n.length-1;i[s]=l}t.writeVarint(l);var u=r.properties[s];var f=typeof u;if(f!=="string"&&f!=="boolean"&&f!=="number"){u=JSON.stringify(u)}var c=f+":"+u;var v=o[c];if(typeof v==="undefined"){a.push(u);v=a.length-1;o[c]=v}t.writeVarint(v)}}function D(e,t){return(t<<3)+(e&7)}function z(e){return e<<1^e>>31}function R(e,t){var r=e.loadGeometry();var n=e.type;var a=0;var i=0;var o=r.length;for(var s=0;s<o;s++){var l=r[s];var u=1;if(n===1){u=l.length}t.writeVarint(D(1,u));var f=n===3?l.length-1:l.length;for(var c=0;c<f;c++){if(c===1&&n!==1){t.writeVarint(D(2,f-1))}var v=l[c].x-a;var h=l[c].y-i;t.writeVarint(z(v));t.writeVarint(z(h));a+=v;i+=h}if(n===3){t.writeVarint(D(7,1))}}}function F(e,t){var r=typeof e;if(r==="string"){t.writeStringField(1,e)}else if(r==="boolean"){t.writeBooleanField(7,e)}else if(r==="number"){if(e%1!==0){t.writeDoubleField(3,e)}else if(e<0){t.writeSVarintField(6,e)}else{t.writeVarintField(5,e)}}}k.fromVectorTileJs=A;k.fromGeojsonVt=M;k.GeoJSONWrapper=S;function B(e,t,r,n,a,i){if(a-n<=r){return}var o=n+a>>1;N(e,t,o,n,a,i%2);B(e,t,r,n,o-1,i+1);B(e,t,r,o+1,a,i+1)}function N(e,t,r,n,a,i){while(a>n){if(a-n>600){var o=a-n+1;var s=r-n+1;var l=Math.log(o);var u=.5*Math.exp(2*l/3);var f=.5*Math.sqrt(l*u*(o-u)/o)*(s-o/2<0?-1:1);var c=Math.max(n,Math.floor(r-s*u/o+f));var v=Math.min(a,Math.floor(r+(o-s)*u/o+f));N(e,t,r,c,v,i)}var h=t[2*r+i];var p=n;var d=a;j(e,t,n,r);if(t[2*a+i]>h){j(e,t,n,a)}while(p<d){j(e,t,p,d);p++;d--;while(t[2*p+i]<h){p++}while(t[2*d+i]>h){d--}}if(t[2*n+i]===h){j(e,t,n,d)}else{d++;j(e,t,d,a)}if(d<=r){n=d+1}if(r<=d){a=d-1}}}function j(e,t,r,n){U(e,r,n);U(t,2*r,2*n);U(t,2*r+1,2*n+1)}function U(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}function V(e,t,r,n,a,i,o){var s=[0,e.length-1,0];var l=[];var u,f;while(s.length){var c=s.pop();var v=s.pop();var h=s.pop();if(v-h<=o){for(var p=h;p<=v;p++){u=t[2*p];f=t[2*p+1];if(u>=r&&u<=a&&f>=n&&f<=i){l.push(e[p])}}continue}var d=Math.floor((h+v)/2);u=t[2*d];f=t[2*d+1];if(u>=r&&u<=a&&f>=n&&f<=i){l.push(e[d])}var g=(c+1)%2;if(c===0?r<=u:n<=f){s.push(h);s.push(d-1);s.push(g)}if(c===0?a>=u:i>=f){s.push(d+1);s.push(v);s.push(g)}}return l}function H(e,t,r,n,a,i){var o=[0,e.length-1,0];var s=[];var l=a*a;while(o.length){var u=o.pop();var f=o.pop();var c=o.pop();if(f-c<=i){for(var v=c;v<=f;v++){if(q(t[2*v],t[2*v+1],r,n)<=l){s.push(e[v])}}continue}var h=Math.floor((c+f)/2);var p=t[2*h];var d=t[2*h+1];if(q(p,d,r,n)<=l){s.push(e[h])}var g=(u+1)%2;if(u===0?r-a<=p:n-a<=d){o.push(c);o.push(h-1);o.push(g)}if(u===0?r+a>=p:n+a>=d){o.push(h+1);o.push(f);o.push(g)}}return s}function q(e,t,r,n){var a=e-r;var i=t-n;return a*a+i*i}var G=function(e){return e[0]};var Z=function(e){return e[1]};var Y=function e(t,r,n,a,i){if(r===void 0)r=G;if(n===void 0)n=Z;if(a===void 0)a=64;if(i===void 0)i=Float64Array;this.nodeSize=a;this.points=t;var o=t.length<65536?Uint16Array:Uint32Array;var s=this.ids=new o(t.length);var l=this.coords=new i(t.length*2);for(var u=0;u<t.length;u++){s[u]=u;l[2*u]=r(t[u]);l[2*u+1]=n(t[u])}B(s,l,a,0,s.length-1,0)};Y.prototype.range=function e(t,r,n,a){return V(this.ids,this.coords,t,r,n,a,this.nodeSize)};Y.prototype.within=function e(t,r,n){return H(this.ids,this.coords,t,r,n,this.nodeSize)};var W={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:false,generateId:false,reduce:null,map:function(e){return e}};var X=function e(t){this.options=ae(Object.create(W),t);this.trees=new Array(this.options.maxZoom+1)};X.prototype.load=function e(t){var r=this.options;var n=r.log;var a=r.minZoom;var i=r.maxZoom;var o=r.nodeSize;if(n){console.time("total time")}var s="prepare "+t.length+" points";if(n){console.time(s)}this.points=t;var l=[];for(var u=0;u<t.length;u++){if(!t[u].geometry){continue}l.push(K(t[u],u))}this.trees[i+1]=new Y(l,ie,oe,o,Float32Array);if(n){console.timeEnd(s)}for(var f=i;f>=a;f--){var c=+Date.now();l=this._cluster(l,f);this.trees[f]=new Y(l,ie,oe,o,Float32Array);if(n){console.log("z%d: %d clusters in %dms",f,l.length,+Date.now()-c)}}if(n){console.timeEnd("total time")}return this};X.prototype.getClusters=function e(t,r){var n=((t[0]+180)%360+360)%360-180;var a=Math.max(-90,Math.min(90,t[1]));var i=t[2]===180?180:((t[2]+180)%360+360)%360-180;var o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360){n=-180;i=180}else if(n>i){var s=this.getClusters([n,a,180,o],r);var l=this.getClusters([-180,a,i,o],r);return s.concat(l)}var u=this.trees[this._limitZoom(r)];var f=u.range(ee(n),te(o),ee(i),te(a));var c=[];for(var v=0,h=f;v<h.length;v+=1){var p=h[v];var d=u.points[p];c.push(d.numPoints?$(d):this.points[d.index])}return c};X.prototype.getChildren=function e(t){var r=this._getOriginId(t);var n=this._getOriginZoom(t);var a="No cluster with the specified id.";var i=this.trees[n];if(!i){throw new Error(a)}var o=i.points[r];if(!o){throw new Error(a)}var s=this.options.radius/(this.options.extent*Math.pow(2,n-1));var l=i.within(o.x,o.y,s);var u=[];for(var f=0,c=l;f<c.length;f+=1){var v=c[f];var h=i.points[v];if(h.parentId===t){u.push(h.numPoints?$(h):this.points[h.index])}}if(u.length===0){throw new Error(a)}return u};X.prototype.getLeaves=function e(t,r,n){r=r||10;n=n||0;var a=[];this._appendLeaves(a,t,r,n,0);return a};X.prototype.getTile=function e(t,r,n){var a=this.trees[this._limitZoom(t)];var i=Math.pow(2,t);var o=this.options;var s=o.extent;var l=o.radius;var u=l/s;var f=(n-u)/i;var c=(n+1+u)/i;var v={features:[]};this._addTileFeatures(a.range((r-u)/i,f,(r+1+u)/i,c),a.points,r,n,i,v);if(r===0){this._addTileFeatures(a.range(1-u/i,f,1,c),a.points,i,n,i,v)}if(r===i-1){this._addTileFeatures(a.range(0,f,u/i,c),a.points,-1,n,i,v)}return v.features.length?v:null};X.prototype.getClusterExpansionZoom=function e(t){var r=this._getOriginZoom(t)-1;while(r<=this.options.maxZoom){var n=this.getChildren(t);r++;if(n.length!==1){break}t=n[0].properties.cluster_id}return r};X.prototype._appendLeaves=function e(t,r,n,a,i){var o=this.getChildren(r);for(var s=0,l=o;s<l.length;s+=1){var u=l[s];var f=u.properties;if(f&&f.cluster){if(i+f.point_count<=a){i+=f.point_count}else{i=this._appendLeaves(t,f.cluster_id,n,a,i)}}else if(i<a){i++}else{t.push(u)}if(t.length===n){break}}return i};X.prototype._addTileFeatures=function e(t,r,n,a,i,o){for(var s=0,l=t;s<l.length;s+=1){var u=l[s];var f=r[u];var c=f.numPoints;var v={type:1,geometry:[[Math.round(this.options.extent*(f.x*i-n)),Math.round(this.options.extent*(f.y*i-a))]],tags:c?Q(f):this.points[f.index].properties};var h=void 0;if(c){h=f.id}else if(this.options.generateId){h=f.index}else if(this.points[f.index].id){h=this.points[f.index].id}if(h!==undefined){v.id=h}o.features.push(v)}};X.prototype._limitZoom=function e(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))};X.prototype._cluster=function e(t,r){var n=[];var a=this.options;var i=a.radius;var o=a.extent;var s=a.reduce;var l=i/(o*Math.pow(2,r));for(var u=0;u<t.length;u++){var f=t[u];if(f.zoom<=r){continue}f.zoom=r;var c=this.trees[r+1];var v=c.within(f.x,f.y,l);var h=f.numPoints||1;var p=f.x*h;var d=f.y*h;var g=s&&h>1?this._map(f,true):null;var y=(u<<5)+(r+1)+this.points.length;for(var m=0,x=v;m<x.length;m+=1){var b=x[m];var _=c.points[b];if(_.zoom<=r){continue}_.zoom=r;var w=_.numPoints||1;p+=_.x*w;d+=_.y*w;h+=w;_.parentId=y;if(s){if(!g){g=this._map(f,true)}s(g,this._map(_))}}if(h===1){n.push(f)}else{f.parentId=y;n.push(J(p/h,d/h,y,h,g))}}return n};X.prototype._getOriginId=function e(t){return t-this.points.length>>5};X.prototype._getOriginZoom=function e(t){return(t-this.points.length)%32};X.prototype._map=function e(t,r){if(t.numPoints){return r?ae({},t.properties):t.properties}var n=this.points[t.index].properties;var a=this.options.map(n);return r&&a===n?ae({},a):a};function J(e,t,r,n,a){return{x:e,y:t,zoom:Infinity,id:r,parentId:-1,numPoints:n,properties:a}}function K(e,t){var r=e.geometry.coordinates;var n=r[0];var a=r[1];return{x:ee(n),y:te(a),zoom:Infinity,index:t,parentId:-1}}function $(e){return{type:"Feature",id:e.id,properties:Q(e),geometry:{type:"Point",coordinates:[re(e.x),ne(e.y)]}}}function Q(e){var t=e.numPoints;var r=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return ae(ae({},e.properties),{cluster:true,cluster_id:e.id,point_count:t,point_count_abbreviated:r})}function ee(e){return e/360+.5}function te(e){var t=Math.sin(e*Math.PI/180);var r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function re(e){return(e-.5)*360}function ne(e){var t=(180-e*360)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function ae(e,t){for(var r in t){e[r]=t[r]}return e}function ie(e){return e.x}function oe(e){return e.y}function se(e,t,r,n){var a=n;var i=r-t>>1;var o=r-t;var s;var l=e[t];var u=e[t+1];var f=e[r];var c=e[r+1];for(var v=t+3;v<r;v+=3){var h=le(e[v],e[v+1],l,u,f,c);if(h>a){s=v;a=h}else if(h===a){var p=Math.abs(v-i);if(p<o){s=v;o=p}}}if(a>n){if(s-t>3){se(e,t,s,n)}e[s+2]=a;if(r-s>3){se(e,s,r,n)}}}function le(e,t,r,n,a,i){var o=a-r;var s=i-n;if(o!==0||s!==0){var l=((e-r)*o+(t-n)*s)/(o*o+s*s);if(l>1){r=a;n=i}else if(l>0){r+=o*l;n+=s*l}}o=e-r;s=t-n;return o*o+s*s}function ue(e,t,r,n){var a={id:typeof e==="undefined"?null:e,type:t,geometry:r,tags:n,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity};fe(a);return a}function fe(e){var t=e.geometry;var r=e.type;if(r==="Point"||r==="MultiPoint"||r==="LineString"){ce(e,t)}else if(r==="Polygon"||r==="MultiLineString"){for(var n=0;n<t.length;n++){ce(e,t[n])}}else if(r==="MultiPolygon"){for(n=0;n<t.length;n++){for(var a=0;a<t[n].length;a++){ce(e,t[n][a])}}}}function ce(e,t){for(var r=0;r<t.length;r+=3){e.minX=Math.min(e.minX,t[r]);e.minY=Math.min(e.minY,t[r+1]);e.maxX=Math.max(e.maxX,t[r]);e.maxY=Math.max(e.maxY,t[r+1])}}function ve(e,t){var r=[];if(e.type==="FeatureCollection"){for(var n=0;n<e.features.length;n++){he(r,e.features[n],t,n)}}else if(e.type==="Feature"){he(r,e,t)}else{he(r,{geometry:e},t)}return r}function he(e,t,r,n){if(!t.geometry){return}var a=t.geometry.coordinates;var i=t.geometry.type;var o=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2);var s=[];var l=t.id;if(r.promoteId){l=t.properties[r.promoteId]}else if(r.generateId){l=n||0}if(i==="Point"){pe(a,s)}else if(i==="MultiPoint"){for(var u=0;u<a.length;u++){pe(a[u],s)}}else if(i==="LineString"){de(a,s,o,false)}else if(i==="MultiLineString"){if(r.lineMetrics){for(u=0;u<a.length;u++){s=[];de(a[u],s,o,false);e.push(ue(l,"LineString",s,t.properties))}return}else{ge(a,s,o,false)}}else if(i==="Polygon"){ge(a,s,o,true)}else if(i==="MultiPolygon"){for(u=0;u<a.length;u++){var f=[];ge(a[u],f,o,true);s.push(f)}}else if(i==="GeometryCollection"){for(u=0;u<t.geometry.geometries.length;u++){he(e,{id:l,geometry:t.geometry.geometries[u],properties:t.properties},r,n)}return}else{throw new Error("Input data is not a valid GeoJSON object.")}e.push(ue(l,i,s,t.properties))}function pe(e,t){t.push(ye(e[0]));t.push(me(e[1]));t.push(0)}function de(e,t,r,n){var a,i;var o=0;for(var s=0;s<e.length;s++){var l=ye(e[s][0]);var u=me(e[s][1]);t.push(l);t.push(u);t.push(0);if(s>0){if(n){o+=(a*u-l*i)/2}else{o+=Math.sqrt(Math.pow(l-a,2)+Math.pow(u-i,2))}}a=l;i=u}var f=t.length-3;t[2]=1;se(t,0,f,r);t[f+2]=1;t.size=Math.abs(o);t.start=0;t.end=t.size}function ge(e,t,r,n){for(var a=0;a<e.length;a++){var i=[];de(e[a],i,r,n);t.push(i)}}function ye(e){return e/360+.5}function me(e){var t=Math.sin(e*Math.PI/180);var r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function xe(e,t,r,n,a,i,o,s){r/=t;n/=t;if(i>=r&&o<n){return e}else if(o<r||i>=n){return null}var l=[];for(var u=0;u<e.length;u++){var f=e[u];var c=f.geometry;var v=f.type;var h=a===0?f.minX:f.minY;var p=a===0?f.maxX:f.maxY;if(h>=r&&p<n){l.push(f);continue}else if(p<r||h>=n){continue}var d=[];if(v==="Point"||v==="MultiPoint"){be(c,d,r,n,a)}else if(v==="LineString"){_e(c,d,r,n,a,false,s.lineMetrics)}else if(v==="MultiLineString"){Te(c,d,r,n,a,false)}else if(v==="Polygon"){Te(c,d,r,n,a,true)}else if(v==="MultiPolygon"){for(var g=0;g<c.length;g++){var y=[];Te(c[g],y,r,n,a,true);if(y.length){d.push(y)}}}if(d.length){if(s.lineMetrics&&v==="LineString"){for(g=0;g<d.length;g++){l.push(ue(f.id,v,d[g],f.tags))}continue}if(v==="LineString"||v==="MultiLineString"){if(d.length===1){v="LineString";d=d[0]}else{v="MultiLineString"}}if(v==="Point"||v==="MultiPoint"){v=d.length===3?"Point":"MultiPoint"}l.push(ue(f.id,v,d,f.tags))}}return l.length?l:null}function be(e,t,r,n,a){for(var i=0;i<e.length;i+=3){var o=e[i+a];if(o>=r&&o<=n){t.push(e[i]);t.push(e[i+1]);t.push(e[i+2])}}}function _e(e,t,r,n,a,i,o){var s=we(e);var l=a===0?Ae:Me;var u=e.start;var f,c;for(var v=0;v<e.length-3;v+=3){var h=e[v];var p=e[v+1];var d=e[v+2];var g=e[v+3];var y=e[v+4];var m=a===0?h:p;var x=a===0?g:y;var b=false;if(o){f=Math.sqrt(Math.pow(h-g,2)+Math.pow(p-y,2))}if(m<r){if(x>r){c=l(s,h,p,g,y,r);if(o){s.start=u+f*c}}}else if(m>n){if(x<n){c=l(s,h,p,g,y,n);if(o){s.start=u+f*c}}}else{ke(s,h,p,d)}if(x<r&&m>=r){c=l(s,h,p,g,y,r);b=true}if(x>n&&m<=n){c=l(s,h,p,g,y,n);b=true}if(!i&&b){if(o){s.end=u+f*c}t.push(s);s=we(e)}if(o){u+=f}}var _=e.length-3;h=e[_];p=e[_+1];d=e[_+2];m=a===0?h:p;if(m>=r&&m<=n){ke(s,h,p,d)}_=s.length-3;if(i&&_>=3&&(s[_]!==s[0]||s[_+1]!==s[1])){ke(s,s[0],s[1],s[2])}if(s.length){t.push(s)}}function we(e){var t=[];t.size=e.size;t.start=e.start;t.end=e.end;return t}function Te(e,t,r,n,a,i){for(var o=0;o<e.length;o++){_e(e[o],t,r,n,a,i,false)}}function ke(e,t,r,n){e.push(t);e.push(r);e.push(n)}function Ae(e,t,r,n,a,i){var o=(i-t)/(n-t);e.push(i);e.push(r+(a-r)*o);e.push(1);return o}function Me(e,t,r,n,a,i){var o=(i-r)/(a-r);e.push(t+(n-t)*o);e.push(i);e.push(1);return o}function Se(e,t){var r=t.buffer/t.extent;var n=e;var a=xe(e,1,-1-r,r,0,-1,2,t);var i=xe(e,1,1-r,2+r,0,-1,2,t);if(a||i){n=xe(e,1,-r,1+r,0,-1,2,t)||[];if(a){n=Ee(a,1).concat(n)}if(i){n=n.concat(Ee(i,-1))}}return n}function Ee(e,t){var r=[];for(var n=0;n<e.length;n++){var a=e[n],i=a.type;var o;if(i==="Point"||i==="MultiPoint"||i==="LineString"){o=Le(a.geometry,t)}else if(i==="MultiLineString"||i==="Polygon"){o=[];for(var s=0;s<a.geometry.length;s++){o.push(Le(a.geometry[s],t))}}else if(i==="MultiPolygon"){o=[];for(s=0;s<a.geometry.length;s++){var l=[];for(var u=0;u<a.geometry[s].length;u++){l.push(Le(a.geometry[s][u],t))}o.push(l)}}r.push(ue(a.id,i,o,a.tags))}return r}function Le(e,t){var r=[];r.size=e.size;if(e.start!==undefined){r.start=e.start;r.end=e.end}for(var n=0;n<e.length;n+=3){r.push(e[n]+t,e[n+1],e[n+2])}return r}function Ce(e,t){if(e.transformed){return e}var r=1<<e.z,n=e.x,a=e.y,i,o,s;for(i=0;i<e.features.length;i++){var l=e.features[i],u=l.geometry,f=l.type;l.geometry=[];if(f===1){for(o=0;o<u.length;o+=2){l.geometry.push(Ie(u[o],u[o+1],t,r,n,a))}}else{for(o=0;o<u.length;o++){var c=[];for(s=0;s<u[o].length;s+=2){c.push(Ie(u[o][s],u[o][s+1],t,r,n,a))}l.geometry.push(c)}}}e.transformed=true;return e}function Ie(e,t,r,n,a,i){return[Math.round(r*(e*n-a)),Math.round(r*(t*n-i))]}function Pe(e,t,r,n,a){var i=t===a.maxZoom?0:a.tolerance/((1<<t)*a.extent);var o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z:t,transformed:false,minX:2,minY:1,maxX:-1,maxY:0};for(var s=0;s<e.length;s++){o.numFeatures++;Oe(o,e[s],i,a);var l=e[s].minX;var u=e[s].minY;var f=e[s].maxX;var c=e[s].maxY;if(l<o.minX){o.minX=l}if(u<o.minY){o.minY=u}if(f>o.maxX){o.maxX=f}if(c>o.maxY){o.maxY=c}}return o}function Oe(e,t,r,n){var a=t.geometry,i=t.type,o=[];if(i==="Point"||i==="MultiPoint"){for(var s=0;s<a.length;s+=3){o.push(a[s]);o.push(a[s+1]);e.numPoints++;e.numSimplified++}}else if(i==="LineString"){De(o,a,e,r,false,false)}else if(i==="MultiLineString"||i==="Polygon"){for(s=0;s<a.length;s++){De(o,a[s],e,r,i==="Polygon",s===0)}}else if(i==="MultiPolygon"){for(var l=0;l<a.length;l++){var u=a[l];for(s=0;s<u.length;s++){De(o,u[s],e,r,true,s===0)}}}if(o.length){var f=t.tags||null;if(i==="LineString"&&n.lineMetrics){f={};for(var c in t.tags){f[c]=t.tags[c]}f["mapbox_clip_start"]=a.start/a.size;f["mapbox_clip_end"]=a.end/a.size}var v={geometry:o,type:i==="Polygon"||i==="MultiPolygon"?3:i==="LineString"||i==="MultiLineString"?2:1,tags:f};if(t.id!==null){v.id=t.id}e.features.push(v)}}function De(e,t,r,n,a,i){var o=n*n;if(n>0&&t.size<(a?o:n)){r.numPoints+=t.length/3;return}var s=[];for(var l=0;l<t.length;l+=3){if(n===0||t[l+2]>o){r.numSimplified++;s.push(t[l]);s.push(t[l+1])}r.numPoints++}if(a){ze(s,i)}e.push(s)}function ze(e,t){var r=0;for(var n=0,a=e.length,i=a-2;n<a;i=n,n+=2){r+=(e[n]-e[i])*(e[n+1]+e[i+1])}if(r>0===t){for(n=0,a=e.length;n<a/2;n+=2){var o=e[n];var s=e[n+1];e[n]=e[a-2-n];e[n+1]=e[a-1-n];e[a-2-n]=o;e[a-1-n]=s}}}function Re(e,t){return new Fe(e,t)}function Fe(e,t){t=this.options=Ne(Object.create(this.options),t);var r=t.debug;if(r){console.time("preprocess data")}if(t.maxZoom<0||t.maxZoom>24){throw new Error("maxZoom should be in the 0-24 range")}if(t.promoteId&&t.generateId){throw new Error("promoteId and generateId cannot be used together.")}var n=ve(e,t);this.tiles={};this.tileCoords=[];if(r){console.timeEnd("preprocess data");console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints);console.time("generate tiles");this.stats={};this.total=0}n=Se(n,t);if(n.length){this.splitTile(n,0,0,0)}if(r){if(n.length){console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints)}console.timeEnd("generate tiles");console.log("tiles generated:",this.total,JSON.stringify(this.stats))}}Fe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:false,promoteId:null,generateId:false,debug:0};Fe.prototype.splitTile=function(e,t,r,n,a,i,o){var s=[e,t,r,n],l=this.options,u=l.debug;while(s.length){n=s.pop();r=s.pop();t=s.pop();e=s.pop();var f=1<<t,c=Be(t,r,n),v=this.tiles[c];if(!v){if(u>1){console.time("creation")}v=this.tiles[c]=Pe(e,t,r,n,l);this.tileCoords.push({z:t,x:r,y:n});if(u){if(u>1){console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,n,v.numFeatures,v.numPoints,v.numSimplified);console.timeEnd("creation")}var h="z"+t;this.stats[h]=(this.stats[h]||0)+1;this.total++}}v.source=e;if(!a){if(t===l.indexMaxZoom||v.numPoints<=l.indexMaxPoints){continue}}else{if(t===l.maxZoom||t===a){continue}var p=1<<a-t;if(r!==Math.floor(i/p)||n!==Math.floor(o/p)){continue}}v.source=null;if(e.length===0){continue}if(u>1){console.time("clipping")}var d=.5*l.buffer/l.extent,g=.5-d,y=.5+d,m=1+d,x,b,_,w,T,k;x=b=_=w=null;T=xe(e,f,r-d,r+y,0,v.minX,v.maxX,l);k=xe(e,f,r+g,r+m,0,v.minX,v.maxX,l);e=null;if(T){x=xe(T,f,n-d,n+y,1,v.minY,v.maxY,l);b=xe(T,f,n+g,n+m,1,v.minY,v.maxY,l);T=null}if(k){_=xe(k,f,n-d,n+y,1,v.minY,v.maxY,l);w=xe(k,f,n+g,n+m,1,v.minY,v.maxY,l);k=null}if(u>1){console.timeEnd("clipping")}s.push(x||[],t+1,r*2,n*2);s.push(b||[],t+1,r*2,n*2+1);s.push(_||[],t+1,r*2+1,n*2);s.push(w||[],t+1,r*2+1,n*2+1)}};Fe.prototype.getTile=function(e,t,r){var n=this.options,a=n.extent,i=n.debug;if(e<0||e>24){return null}var o=1<<e;t=(t%o+o)%o;var s=Be(e,t,r);if(this.tiles[s]){return Ce(this.tiles[s],a)}if(i>1){console.log("drilling down to z%d-%d-%d",e,t,r)}var l=e,u=t,f=r,c;while(!c&&l>0){l--;u=Math.floor(u/2);f=Math.floor(f/2);c=this.tiles[Be(l,u,f)]}if(!c||!c.source){return null}if(i>1){console.log("found parent tile z%d-%d-%d",l,u,f)}if(i>1){console.time("drilling down")}this.splitTile(c.source,l,u,f,e,t,r);if(i>1){console.timeEnd("drilling down")}return this.tiles[s]?Ce(this.tiles[s],a):null};function Be(e,t,r){return((1<<e)*r+t)*32+e}function Ne(e,t){for(var r in t){e[r]=t[r]}return e}function je(e,t){var r=e.tileID.canonical;if(!this._geoJSONIndex){return t(null,null)}var n=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!n){return t(null,null)}var a=new x(n.features);var i=k(a);if(i.byteOffset!==0||i.byteLength!==i.buffer.byteLength){i=new Uint8Array(i)}t(null,{vectorTile:a,rawData:i.buffer})}var Ue=function(t){function r(e,r,n,a){t.call(this,e,r,n,je);if(a){this.loadGeoJSON=a}}if(t)r.__proto__=t;r.prototype=Object.create(t&&t.prototype);r.prototype.constructor=r;r.prototype.loadData=function e(t,r){if(this._pendingCallback){this._pendingCallback(null,{abandoned:true})}this._pendingCallback=r;this._pendingLoadDataParams=t;if(this._state&&this._state!=="Idle"){this._state="NeedsLoadData"}else{this._state="Coalescing";this._loadData()}};r.prototype._loadData=function t(){var r=this;if(!this._pendingCallback||!this._pendingLoadDataParams){return}var n=this._pendingCallback;var a=this._pendingLoadDataParams;delete this._pendingCallback;delete this._pendingLoadDataParams;var i=a&&a.request&&a.request.collectResourceTiming?new e.RequestPerformance(a.request):false;this.loadGeoJSON(a,(function(e,t){if(e||!t){return n(e)}else if(typeof t!=="object"){return n(new Error("Input data given to '"+a.source+"' is not a valid GeoJSON object."))}else{h(t,true);try{r._geoJSONIndex=a.cluster?new X(Ve(a)).load(t.features):Re(t,a.geojsonVtOptions)}catch(e){return n(e)}r.loaded={};var o={};if(i){var s=i.finish();if(s){o.resourceTiming={};o.resourceTiming[a.source]=JSON.parse(JSON.stringify(s))}}n(null,o)}}))};r.prototype.coalesce=function e(){if(this._state==="Coalescing"){this._state="Idle"}else if(this._state==="NeedsLoadData"){this._state="Coalescing";this._loadData()}};r.prototype.reloadTile=function e(r,n){var a=this.loaded,i=r.uid;if(a&&a[i]){return t.prototype.reloadTile.call(this,r,n)}else{return this.loadTile(r,n)}};r.prototype.loadGeoJSON=function t(r,n){if(r.request){e.getJSON(r.request,n)}else if(typeof r.data==="string"){try{return n(null,JSON.parse(r.data))}catch(a){return n(new Error("Input data given to '"+r.source+"' is not a valid GeoJSON object."))}}else{return n(new Error("Input data given to '"+r.source+"' is not a valid GeoJSON object."))}};r.prototype.removeSource=function e(t,r){if(this._pendingCallback){this._pendingCallback(null,{abandoned:true})}r()};r.prototype.getClusterExpansionZoom=function e(t,r){try{r(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(n){r(n)}};r.prototype.getClusterChildren=function e(t,r){try{r(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(n){r(n)}};r.prototype.getClusterLeaves=function e(t,r){try{r(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(n){r(n)}};return r}(f);function Ve(t){var r=t.superclusterOptions;var n=t.clusterProperties;if(!n||!r){return r}var a={};var i={};var o={accumulated:null,zoom:0};var s={properties:null};var l=Object.keys(n);for(var u=0,f=l;u<f.length;u+=1){var c=f[u];var v=n[c];var h=v[0];var p=v[1];var d=e.createExpression(p);var g=e.createExpression(typeof h==="string"?[h,["accumulated"],["get",c]]:h);a[c]=d.value;i[c]=g.value}r.map=function(e){s.properties=e;var t={};for(var r=0,n=l;r<n.length;r+=1){var i=n[r];t[i]=a[i].evaluate(o,s)}return t};r.reduce=function(e,t){s.properties=t;for(var r=0,n=l;r<n.length;r+=1){var a=n[r];o.accumulated=e[a];e[a]=i[a].evaluate(o,s)}};return r}var He=function t(r){var n=this;this.self=r;this.actor=new e.Actor(r,this);this.layerIndexes={};this.availableImages={};this.workerSourceTypes={vector:f,geojson:Ue};this.workerSources={};this.demWorkerSources={};this.self.registerWorkerSource=function(e,t){if(n.workerSourceTypes[e]){throw new Error('Worker source with name "'+e+'" already registered.')}n.workerSourceTypes[e]=t};this.self.registerRTLTextPlugin=function(t){if(e.plugin.isParsed()){throw new Error("RTL text plugin already registered.")}e.plugin["applyArabicShaping"]=t.applyArabicShaping;e.plugin["processBidirectionalText"]=t.processBidirectionalText;e.plugin["processStyledBidirectionalText"]=t.processStyledBidirectionalText}};He.prototype.setReferrer=function e(t,r){this.referrer=r};He.prototype.setImages=function e(t,r,n){this.availableImages[t]=r;for(var a in this.workerSources[t]){var i=this.workerSources[t][a];for(var o in i){i[o].availableImages=r}}n()};He.prototype.setLayers=function e(t,r,n){this.getLayerIndex(t).replace(r);n()};He.prototype.updateLayers=function e(t,r,n){this.getLayerIndex(t).update(r.layers,r.removedIds);n()};He.prototype.loadTile=function e(t,r,n){this.getWorkerSource(t,r.type,r.source).loadTile(r,n)};He.prototype.loadDEMTile=function e(t,r,n){this.getDEMWorkerSource(t,r.source).loadTile(r,n)};He.prototype.reloadTile=function e(t,r,n){this.getWorkerSource(t,r.type,r.source).reloadTile(r,n)};He.prototype.abortTile=function e(t,r,n){this.getWorkerSource(t,r.type,r.source).abortTile(r,n)};He.prototype.removeTile=function e(t,r,n){this.getWorkerSource(t,r.type,r.source).removeTile(r,n)};He.prototype.removeDEMTile=function e(t,r){this.getDEMWorkerSource(t,r.source).removeTile(r)};He.prototype.removeSource=function e(t,r,n){if(!this.workerSources[t]||!this.workerSources[t][r.type]||!this.workerSources[t][r.type][r.source]){return}var a=this.workerSources[t][r.type][r.source];delete this.workerSources[t][r.type][r.source];if(a.removeSource!==undefined){a.removeSource(r,n)}else{n()}};He.prototype.loadWorkerSource=function e(t,r,n){try{this.self.importScripts(r.url);n()}catch(a){n(a.toString())}};He.prototype.syncRTLPluginState=function t(r,n,a){try{e.plugin.setState(n);var i=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&i!=null){this.self.importScripts(i);var o=e.plugin.isParsed();var s=o?undefined:new Error("RTL Text Plugin failed to import scripts from "+i);a(s,o)}}catch(l){a(l.toString())}};He.prototype.getAvailableImages=function e(t){var r=this.availableImages[t];if(!r){r=[]}return r};He.prototype.getLayerIndex=function e(t){var r=this.layerIndexes[t];if(!r){r=this.layerIndexes[t]=new a}return r};He.prototype.getWorkerSource=function e(t,r,n){var a=this;if(!this.workerSources[t]){this.workerSources[t]={}}if(!this.workerSources[t][r]){this.workerSources[t][r]={}}if(!this.workerSources[t][r][n]){var i={send:function(e,r,n){a.actor.send(e,r,n,t)}};this.workerSources[t][r][n]=new this.workerSourceTypes[r](i,this.getLayerIndex(t),this.getAvailableImages(t))}return this.workerSources[t][r][n]};He.prototype.getDEMWorkerSource=function e(t,r){if(!this.demWorkerSources[t]){this.demWorkerSources[t]={}}if(!this.demWorkerSources[t][r]){this.demWorkerSources[t][r]=new v}return this.demWorkerSources[t][r]};He.prototype.enforceCacheSizeLimit=function t(r,n){e.enforceCacheSizeLimit(n)};if(typeof WorkerGlobalScope!=="undefined"&&typeof e.window!=="undefined"&&e.window instanceof WorkerGlobalScope){e.window.worker=new He(e.window)}return He}));n(["./shared"],(function(e){"use strict";var t=e.createCommonjsModule((function(e){if(e.exports){e.exports=t}else if(window){window.mapboxgl=window.mapboxgl||{};window.mapboxgl.supported=t;window.mapboxgl.notSupportedReason=r}function t(e){return!r(e)}function r(e){if(!n()){return"not a browser"}if(!a()){return"insufficent Array support"}if(!i()){return"insufficient Function support"}if(!o()){return"insufficient Object support"}if(!s()){return"insufficient JSON support"}if(!l()){return"insufficient worker support"}if(!u()){return"insufficient Uint8ClampedArray support"}if(!f()){return"insufficient ArrayBuffer support"}if(!c()){return"insufficient Canvas/getImageData support"}if(!h(e&&e.failIfMajorPerformanceCaveat)){return"insufficient WebGL support"}}function n(){return typeof window!=="undefined"&&typeof document!=="undefined"}function a(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function i(){return Function.prototype&&Function.prototype.bind}function o(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function s(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function l(){if(!("Worker"in window&&"Blob"in window&&"URL"in window)){return false}var e=new Blob([""],{type:"text/javascript"});var t=URL.createObjectURL(e);var r;var n;try{n=new Worker(t);r=true}catch(a){r=false}if(n){n.terminate()}URL.revokeObjectURL(t);return r}function u(){return"Uint8ClampedArray"in window}function f(){return ArrayBuffer.isView}function c(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t){return false}var r=t.getImageData(0,0,1,1);return r&&r.width===e.width}var v={};function h(e){if(v[e]===undefined){v[e]=d(e)}return v[e]}t.webGLContextAttributes={antialias:false,alpha:true,stencil:true,depth:true};function p(e){var r=document.createElement("canvas");var n=Object.create(t.webGLContextAttributes);n.failIfMajorPerformanceCaveat=e;if(r.probablySupportsContext){return r.probablySupportsContext("webgl",n)||r.probablySupportsContext("experimental-webgl",n)}else if(r.supportsContext){return r.supportsContext("webgl",n)||r.supportsContext("experimental-webgl",n)}else{return r.getContext("webgl",n)||r.getContext("experimental-webgl",n)}}function d(e){var t=p(e);if(!t){return false}var r=t.createShader(t.VERTEX_SHADER);if(!r||t.isContextLost()){return false}t.shaderSource(r,"void main() {}");t.compileShader(r);return t.getShaderParameter(r,t.COMPILE_STATUS)===true}}));var r={};r.create=function(t,r,n){var a=e.window.document.createElement(t);if(r!==undefined){a.className=r}if(n){n.appendChild(a)}return a};r.createNS=function(t,r){var n=e.window.document.createElementNS(t,r);return n};var n=e.window.document.documentElement.style;function a(e){if(!n){return e[0]}for(var t=0;t<e.length;t++){if(e[t]in n){return e[t]}}return e[0]}var i=a(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);var o;r.disableDrag=function(){if(n&&i){o=n[i];n[i]="none"}};r.enableDrag=function(){if(n&&i){n[i]=o}};var s=a(["transform","WebkitTransform"]);r.setTransform=function(e,t){e.style[s]=t};var l=false;try{var u=Object.defineProperty({},"passive",{get:function e(){l=true}});e.window.addEventListener("test",u,u);e.window.removeEventListener("test",u,u)}catch(Bs){l=false}r.addEventListener=function(e,t,r,n){if(n===void 0)n={};if("passive"in n&&l){e.addEventListener(t,r,n)}else{e.addEventListener(t,r,n.capture)}};r.removeEventListener=function(e,t,r,n){if(n===void 0)n={};if("passive"in n&&l){e.removeEventListener(t,r,n)}else{e.removeEventListener(t,r,n.capture)}};var f=function(t){t.preventDefault();t.stopPropagation();e.window.removeEventListener("click",f,true)};r.suppressClick=function(){e.window.addEventListener("click",f,true);e.window.setTimeout((function(){e.window.removeEventListener("click",f,true)}),0)};r.mousePos=function(t,r){var n=t.getBoundingClientRect();return new e.Point(r.clientX-n.left-t.clientLeft,r.clientY-n.top-t.clientTop)};r.touchPos=function(t,r){var n=t.getBoundingClientRect(),a=[];for(var i=0;i<r.length;i++){a.push(new e.Point(r[i].clientX-n.left-t.clientLeft,r[i].clientY-n.top-t.clientTop))}return a};r.mouseButton=function(t){if(typeof e.window.InstallTrigger!=="undefined"&&t.button===2&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0){return 0}return t.button};r.remove=function(e){if(e.parentNode){e.parentNode.removeChild(e)}};function c(t,r,n){var a,i,o;var s=e.browser.devicePixelRatio>1?"@2x":"";var l=e.getJSON(r.transformRequest(r.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),(function(e,t){l=null;if(!o){o=e;a=t;f()}}));var u=e.getImage(r.transformRequest(r.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),(function(e,t){u=null;if(!o){o=e;i=t;f()}}));function f(){if(o){n(o)}else if(a&&i){var t=e.browser.getImageData(i);var r={};for(var s in a){var l=a[s];var u=l.width;var f=l.height;var c=l.x;var v=l.y;var h=l.sdf;var p=l.pixelRatio;var d=l.stretchX;var g=l.stretchY;var y=l.content;var m=new e.RGBAImage({width:u,height:f});e.RGBAImage.copy(t,m,{x:c,y:v},{x:0,y:0},{width:u,height:f});r[s]={data:m,pixelRatio:p,sdf:h,stretchX:d,stretchY:g,content:y}}n(null,r)}}return{cancel:function e(){if(l){l.cancel();l=null}if(u){u.cancel();u=null}}}}function v(e){var t=e.userImage;if(t&&t.render){var r=t.render();if(r){e.data.replace(new Uint8Array(t.data.buffer));return true}}return false}var h=1;var p=function(t){function r(){t.call(this);this.images={};this.updatedImages={};this.callbackDispatchedThisFrame={};this.loaded=false;this.requestors=[];this.patterns={};this.atlasImage=new e.RGBAImage({width:1,height:1});this.dirty=true}if(t)r.__proto__=t;r.prototype=Object.create(t&&t.prototype);r.prototype.constructor=r;r.prototype.isLoaded=function e(){return this.loaded};r.prototype.setLoaded=function e(t){if(this.loaded===t){return}this.loaded=t;if(t){for(var r=0,n=this.requestors;r<n.length;r+=1){var a=n[r];var i=a.ids;var o=a.callback;this._notify(i,o)}this.requestors=[]}};r.prototype.getImage=function e(t){return this.images[t]};r.prototype.addImage=function e(t,r){if(this._validate(t,r)){this.images[t]=r}};r.prototype._validate=function t(r,n){var a=true;if(!this._validateStretch(n.stretchX,n.data&&n.data.width)){this.fire(new e.ErrorEvent(new Error('Image "'+r+'" has invalid "stretchX" value')));a=false}if(!this._validateStretch(n.stretchY,n.data&&n.data.height)){this.fire(new e.ErrorEvent(new Error('Image "'+r+'" has invalid "stretchY" value')));a=false}if(!this._validateContent(n.content,n)){this.fire(new e.ErrorEvent(new Error('Image "'+r+'" has invalid "content" value')));a=false}return a};r.prototype._validateStretch=function e(t,r){if(!t){return true}var n=0;for(var a=0,i=t;a<i.length;a+=1){var o=i[a];if(o[0]<n||o[1]<o[0]||r<o[1]){return false}n=o[1]}return true};r.prototype._validateContent=function e(t,r){if(!t){return true}if(t.length!==4){return false}if(t[0]<0||r.data.width<t[0]){return false}if(t[1]<0||r.data.height<t[1]){return false}if(t[2]<0||r.data.width<t[2]){return false}if(t[3]<0||r.data.height<t[3]){return false}if(t[2]<t[0]){return false}if(t[3]<t[1]){return false}return true};r.prototype.updateImage=function e(t,r){var n=this.images[t];r.version=n.version+1;this.images[t]=r;this.updatedImages[t]=true};r.prototype.removeImage=function e(t){var r=this.images[t];delete this.images[t];delete this.patterns[t];if(r.userImage&&r.userImage.onRemove){r.userImage.onRemove()}};r.prototype.listImages=function e(){return Object.keys(this.images)};r.prototype.getImages=function e(t,r){var n=true;if(!this.isLoaded()){for(var a=0,i=t;a<i.length;a+=1){var o=i[a];if(!this.images[o]){n=false}}}if(this.isLoaded()||n){this._notify(t,r)}else{this.requestors.push({ids:t,callback:r})}};r.prototype._notify=function t(r,n){var a={};for(var i=0,o=r;i<o.length;i+=1){var s=o[i];if(!this.images[s]){this.fire(new e.Event("styleimagemissing",{id:s}))}var l=this.images[s];if(l){a[s]={data:l.data.clone(),pixelRatio:l.pixelRatio,sdf:l.sdf,version:l.version,stretchX:l.stretchX,stretchY:l.stretchY,content:l.content,hasRenderCallback:Boolean(l.userImage&&l.userImage.render)}}else{e.warnOnce('Image "'+s+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}}n(null,a)};r.prototype.getPixelSize=function e(){var t=this.atlasImage;var r=t.width;var n=t.height;return{width:r,height:n}};r.prototype.getPattern=function t(r){var n=this.patterns[r];var a=this.getImage(r);if(!a){return null}if(n&&n.position.version===a.version){return n.position}if(!n){var i=a.data.width+h*2;var o=a.data.height+h*2;var s={w:i,h:o,x:0,y:0};var l=new e.ImagePosition(s,a);this.patterns[r]={bin:s,position:l}}else{n.position.version=a.version}this._updatePatternAtlas();return this.patterns[r].position};r.prototype.bind=function t(r){var n=r.gl;if(!this.atlasTexture){this.atlasTexture=new e.Texture(r,this.atlasImage,n.RGBA)}else if(this.dirty){this.atlasTexture.update(this.atlasImage);this.dirty=false}this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)};r.prototype._updatePatternAtlas=function t(){var r=[];for(var n in this.patterns){r.push(this.patterns[n].bin)}var a=e.potpack(r);var i=a.w;var o=a.h;var s=this.atlasImage;s.resize({width:i||1,height:o||1});for(var l in this.patterns){var u=this.patterns[l];var f=u.bin;var c=f.x+h;var v=f.y+h;var p=this.images[l].data;var d=p.width;var g=p.height;e.RGBAImage.copy(p,s,{x:0,y:0},{x:c,y:v},{width:d,height:g});e.RGBAImage.copy(p,s,{x:0,y:g-1},{x:c,y:v-1},{width:d,height:1});e.RGBAImage.copy(p,s,{x:0,y:0},{x:c,y:v+g},{width:d,height:1});e.RGBAImage.copy(p,s,{x:d-1,y:0},{x:c-1,y:v},{width:1,height:g});e.RGBAImage.copy(p,s,{x:0,y:0},{x:c+d,y:v},{width:1,height:g})}this.dirty=true};r.prototype.beginFrame=function e(){this.callbackDispatchedThisFrame={}};r.prototype.dispatchRenderCallbacks=function e(t){for(var r=0,n=t;r<n.length;r+=1){var a=n[r];if(this.callbackDispatchedThisFrame[a]){continue}this.callbackDispatchedThisFrame[a]=true;var i=this.images[a];var o=v(i);if(o){this.updateImage(a,i)}}};return r}(e.Evented);function d(t,r,n,a,i){var o=r*256;var s=o+255;var l=a.transformRequest(a.normalizeGlyphsURL(n).replace("{fontstack}",t).replace("{range}",o+"-"+s),e.ResourceType.Glyphs);e.getArrayBuffer(l,(function(t,r){if(t){i(t)}else if(r){var n={};for(var a=0,o=e.parseGlyphPBF(r);a<o.length;a+=1){var s=o[a];n[s.id]=s}i(null,n)}}))}var g=x;var y=x;var m=1e20;function x(e,t,r,n,a,i){this.fontSize=e||24;this.buffer=t===undefined?3:t;this.cutoff=n||.25;this.fontFamily=a||"sans-serif";this.fontWeight=i||"normal";this.radius=r||8;var o=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=o;this.ctx=this.canvas.getContext("2d");this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily;this.ctx.textBaseline="middle";this.ctx.fillStyle="black";this.gridOuter=new Float64Array(o*o);this.gridInner=new Float64Array(o*o);this.f=new Float64Array(o);this.d=new Float64Array(o);this.z=new Float64Array(o+1);this.v=new Int16Array(o);this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}x.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size);this.ctx.fillText(e,this.buffer,this.middle);var t=this.ctx.getImageData(0,0,this.size,this.size);var r=new Uint8ClampedArray(this.size*this.size);for(var n=0;n<this.size*this.size;n++){var a=t.data[n*4+3]/255;this.gridOuter[n]=a===1?0:a===0?m:Math.pow(Math.max(0,.5-a),2);this.gridInner[n]=a===1?m:a===0?0:Math.pow(Math.max(0,a-.5),2)}b(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z);b(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z);for(n=0;n<this.size*this.size;n++){var i=this.gridOuter[n]-this.gridInner[n];r[n]=Math.max(0,Math.min(255,Math.round(255-255*(i/this.radius+this.cutoff))))}return r};function b(e,t,r,n,a,i,o){for(var s=0;s<t;s++){for(var l=0;l<r;l++){n[l]=e[l*t+s]}_(n,a,i,o,r);for(l=0;l<r;l++){e[l*t+s]=a[l]}}for(l=0;l<r;l++){for(s=0;s<t;s++){n[s]=e[l*t+s]}_(n,a,i,o,t);for(s=0;s<t;s++){e[l*t+s]=Math.sqrt(a[s])}}}function _(e,t,r,n,a){r[0]=0;n[0]=-m;n[1]=+m;for(var i=1,o=0;i<a;i++){var s=(e[i]+i*i-(e[r[o]]+r[o]*r[o]))/(2*i-2*r[o]);while(s<=n[o]){o--;s=(e[i]+i*i-(e[r[o]]+r[o]*r[o]))/(2*i-2*r[o])}o++;r[o]=i;n[o]=s;n[o+1]=+m}for(i=0,o=0;i<a;i++){while(n[o+1]<i){o++}t[i]=(i-r[o])*(i-r[o])+e[r[o]]}}g.default=y;var w=function e(t,r){this.requestManager=t;this.localIdeographFontFamily=r;this.entries={}};w.prototype.setURL=function e(t){this.url=t};w.prototype.getGlyphs=function t(r,n){var a=this;var i=[];for(var o in r){for(var s=0,l=r[o];s<l.length;s+=1){var u=l[s];i.push({stack:o,id:u})}}e.asyncAll(i,(function(e,t){var r=e.stack;var n=e.id;var i=a.entries[r];if(!i){i=a.entries[r]={glyphs:{},requests:{},ranges:{}}}var o=i.glyphs[n];if(o!==undefined){t(null,{stack:r,id:n,glyph:o});return}o=a._tinySDF(i,r,n);if(o){i.glyphs[n]=o;t(null,{stack:r,id:n,glyph:o});return}var s=Math.floor(n/256);if(s*256>65535){t(new Error("glyphs > 65535 not supported"));return}if(i.ranges[s]){t(null,{stack:r,id:n,glyph:o});return}var l=i.requests[s];if(!l){l=i.requests[s]=[];w.loadGlyphRange(r,s,a.url,a.requestManager,(function(e,t){if(t){for(var r in t){if(!a._doesCharSupportLocalGlyph(+r)){i.glyphs[+r]=t[+r]}}i.ranges[s]=true}for(var n=0,o=l;n<o.length;n+=1){var u=o[n];u(e,t)}delete i.requests[s]}))}l.push((function(e,a){if(e){t(e)}else if(a){t(null,{stack:r,id:n,glyph:a[n]||null})}}))}),(function(e,t){if(e){n(e)}else if(t){var r={};for(var a=0,i=t;a<i.length;a+=1){var o=i[a];var s=o.stack;var l=o.id;var u=o.glyph;(r[s]||(r[s]={}))[l]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}n(null,r)}}))};w.prototype._doesCharSupportLocalGlyph=function t(r){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](r)||e.isChar["Hangul Syllables"](r)||e.isChar["Hiragana"](r)||e.isChar["Katakana"](r))};w.prototype._tinySDF=function t(r,n,a){var i=this.localIdeographFontFamily;if(!i){return}if(!this._doesCharSupportLocalGlyph(a)){return}var o=r.tinySDF;if(!o){var s="400";if(/bold/i.test(n)){s="900"}else if(/medium/i.test(n)){s="500"}else if(/light/i.test(n)){s="200"}o=r.tinySDF=new w.TinySDF(24,3,8,.25,i,s)}return{id:a,bitmap:new e.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(a))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}};w.loadGlyphRange=d;w.TinySDF=g;var T=function t(){this.specification=e.styleSpec.light.position};T.prototype.possiblyEvaluate=function t(r,n){return e.sphericalToCartesian(r.expression.evaluate(n))};T.prototype.interpolate=function t(r,n,a){return{x:e.number(r.x,n.x,a),y:e.number(r.y,n.y,a),z:e.number(r.z,n.z,a)}};var k=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new T,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)});var A="-transition";var M=function(t){function r(r){t.call(this);this._transitionable=new e.Transitionable(k);this.setLight(r);this._transitioning=this._transitionable.untransitioned()}if(t)r.__proto__=t;r.prototype=Object.create(t&&t.prototype);r.prototype.constructor=r;r.prototype.getLight=function e(){return this._transitionable.serialize()};r.prototype.setLight=function t(r,n){if(n===void 0)n={};if(this._validate(e.validateLight,r,n)){return}for(var a in r){var i=r[a];if(e.endsWith(a,A)){this._transitionable.setTransition(a.slice(0,-A.length),i)}else{this._transitionable.setValue(a,i)}}};r.prototype.updateTransitions=function e(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)};r.prototype.hasTransition=function e(){return this._transitioning.hasTransition()};r.prototype.recalculate=function e(t){this.properties=this._transitioning.possiblyEvaluate(t)};r.prototype._validate=function t(r,n,a){if(a&&a.validate===false){return false}return e.emitValidationErrors(this,r.call(e.validateStyle,e.extend({value:n,style:{glyphs:true,sprite:true},styleSpec:e.styleSpec})))};return r}(e.Evented);var S=function e(t,r){this.width=t;this.height=r;this.nextRow=0;this.data=new Uint8Array(this.width*this.height);this.dashEntry={}};S.prototype.getDash=function e(t,r){var n=t.join(",")+String(r);if(!this.dashEntry[n]){this.dashEntry[n]=this.addDash(t,r)}return this.dashEntry[n]};S.prototype.getDashRanges=function e(t,r,n){var a=t.length%2===1;var i=[];var o=a?-t[t.length-1]*n:0;var s=t[0]*n;var l=true;i.push({left:o,right:s,isDash:l,zeroLength:t[0]===0});var u=t[0];for(var f=1;f<t.length;f++){l=!l;var c=t[f];o=u*n;u+=c;s=u*n;i.push({left:o,right:s,isDash:l,zeroLength:c===0})}return i};S.prototype.addRoundDash=function e(t,r,n){var a=r/2;for(var i=-n;i<=n;i++){var o=this.nextRow+n+i;var s=this.width*o;var l=0;var u=t[l];for(var f=0;f<this.width;f++){if(f/u.right>1){u=t[++l]}var c=Math.abs(f-u.left);var v=Math.abs(f-u.right);var h=Math.min(c,v);var p=void 0;var d=i/n*(a+1);if(u.isDash){var g=a-Math.abs(d);p=Math.sqrt(h*h+g*g)}else{p=a-Math.sqrt(h*h+d*d)}this.data[s+f]=Math.max(0,Math.min(255,p+128))}}};S.prototype.addRegularDash=function e(t){for(var r=t.length-1;r>=0;--r){var n=t[r];var a=t[r+1];if(n.zeroLength){t.splice(r,1)}else if(a&&a.isDash===n.isDash){a.left=n.left;t.splice(r,1)}}var i=t[0];var o=t[t.length-1];if(i.isDash===o.isDash){i.left=o.left-this.width;o.right=i.right+this.width}var s=this.width*this.nextRow;var l=0;var u=t[l];for(var f=0;f<this.width;f++){if(f/u.right>1){u=t[++l]}var c=Math.abs(f-u.left);var v=Math.abs(f-u.right);var h=Math.min(c,v);var p=u.isDash?h:-h;this.data[s+f]=Math.max(0,Math.min(255,p+128))}};S.prototype.addDash=function t(r,n){var a=n?7:0;var i=2*a+1;if(this.nextRow+i>this.height){e.warnOnce("LineAtlas out of space");return null}var o=0;for(var s=0;s<r.length;s++){o+=r[s]}if(o!==0){var l=this.width/o;var u=this.getDashRanges(r,this.width,l);if(n){this.addRoundDash(u,l,a)}else{this.addRegularDash(u)}}var f={y:(this.nextRow+a+.5)/this.height,height:2*a/this.height,width:o};this.nextRow+=i;this.dirty=true;return f};S.prototype.bind=function e(t){var r=t.gl;if(!this.texture){this.texture=r.createTexture();r.bindTexture(r.TEXTURE_2D,this.texture);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.REPEAT);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.REPEAT);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR);r.texImage2D(r.TEXTURE_2D,0,r.ALPHA,this.width,this.height,0,r.ALPHA,r.UNSIGNED_BYTE,this.data)}else{r.bindTexture(r.TEXTURE_2D,this.texture);if(this.dirty){this.dirty=false;r.texSubImage2D(r.TEXTURE_2D,0,0,0,this.width,this.height,r.ALPHA,r.UNSIGNED_BYTE,this.data)}}};var E=function t(r,n){this.workerPool=r;this.actors=[];this.currentActor=0;this.id=e.uniqueId();var a=this.workerPool.acquire(this.id);for(var i=0;i<a.length;i++){var o=a[i];var s=new t.Actor(o,n,this.id);s.name="Worker "+i;this.actors.push(s)}};E.prototype.broadcast=function t(r,n,a){a=a||function(){};e.asyncAll(this.actors,(function(e,t){e.send(r,n,t)}),a)};E.prototype.getActor=function e(){this.currentActor=(this.currentActor+1)%this.actors.length;return this.actors[this.currentActor]};E.prototype.remove=function e(){this.actors.forEach((function(e){e.remove()}));this.actors=[];this.workerPool.release(this.id)};E.Actor=e.Actor;function L(t,r,n){var a=function(a,i){if(a){return n(a)}else if(i){var o=e.pick(e.extend(i,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);if(i.vector_layers){o.vectorLayers=i.vector_layers;o.vectorLayerIds=o.vectorLayers.map((function(e){return e.id}))}o.tiles=r.canonicalizeTileset(o,t.url);n(null,o)}};if(t.url){return e.getJSON(r.transformRequest(r.normalizeSourceURL(t.url),e.ResourceType.Source),a)}else{return e.browser.frame((function(){return a(null,t)}))}}var C=function t(r,n,a){this.bounds=e.LngLatBounds.convert(this.validateBounds(r));this.minzoom=n||0;this.maxzoom=a||24};C.prototype.validateBounds=function e(t){if(!Array.isArray(t)||t.length!==4){return[-180,-90,180,90]}return[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]};C.prototype.contains=function t(r){var n=Math.pow(2,r.z);var a={minX:Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),minY:Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),maxX:Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n),maxY:Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n)};var i=r.x>=a.minX&&r.x<a.maxX&&r.y>=a.minY&&r.y<a.maxY;return i};var I=function(t){function r(r,n,a,i){t.call(this);this.id=r;this.dispatcher=a;this.type="vector";this.minzoom=0;this.maxzoom=22;this.scheme="xyz";this.tileSize=512;this.reparseOverscaled=true;this.isTileClipped=true;this._loaded=false;e.extend(this,e.pick(n,["url","scheme","tileSize","promoteId"]));this._options=e.extend({type:"vector"},n);this._collectResourceTiming=n.collectResourceTiming;if(this.tileSize!==512){throw new Error("vector tile sources must have a tileSize of 512")}this.setEventedParent(i)}if(t)r.__proto__=t;r.prototype=Object.create(t&&t.prototype);r.prototype.constructor=r;r.prototype.load=function t(){var r=this;this._loaded=false;this.fire(new e.Event("dataloading",{dataType:"source"}));this._tileJSONRequest=L(this._options,this.map._requestManager,(function(t,n){r._tileJSONRequest=null;r._loaded=true;if(t){r.fire(new e.ErrorEvent(t))}else if(n){e.extend(r,n);if(n.bounds){r.tileBounds=new C(n.bounds,r.minzoom,r.maxzoom)}e.postTurnstileEvent(n.tiles,r.map._requestManager._customAccessToken);e.postMapLoadEvent(n.tiles,r.map._getMapId(),r.map._requestManager._skuToken,r.map._requestManager._customAccessToken);r.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"}));r.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}}))};r.prototype.loaded=function e(){return this._loaded};r.prototype.hasTile=function e(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)};r.prototype.onAdd=function e(t){this.map=t;this.load()};r.prototype.onRemove=function e(){if(this._tileJSONRequest){this._tileJSONRequest.cancel();this._tileJSONRequest=null}};r.prototype.serialize=function t(){return e.extend({},this._options)};r.prototype.loadTile=function t(r,n){var a=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme));var i={request:this.map._requestManager.transformRequest(a,e.ResourceType.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request.collectResourceTiming=this._collectResourceTiming;if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();r.request=r.actor.send("loadTile",i,o.bind(this))}else if(r.state==="loading"){r.reloadCallback=n}else{r.request=r.actor.send("reloadTile",i,o.bind(this))}function o(t,a){delete r.request;if(r.aborted){return n(null)}if(t&&t.status!==404){return n(t)}if(a&&a.resourceTiming){r.resourceTiming=a.resourceTiming}if(this.map._refreshExpiredTiles&&a){r.setExpiryData(a)}r.loadVectorData(a,this.map.painter);e.cacheEntryPossiblyAdded(this.dispatcher);n(null);if(r.reloadCallback){this.loadTile(r,r.reloadCallback);r.reloadCallback=null}}};r.prototype.abortTile=function e(t){if(t.request){t.request.cancel();delete t.request}if(t.actor){t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},undefined)}};r.prototype.unloadTile=function e(t){t.unloadVectorData();if(t.actor){t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},undefined)}};r.prototype.hasTransition=function e(){return false};return r}(e.Evented);var P=function(t){function r(r,n,a,i){t.call(this);this.id=r;this.dispatcher=a;this.setEventedParent(i);this.type="raster";this.minzoom=0;this.maxzoom=22;this.roundZoom=true;this.scheme="xyz";this.tileSize=512;this._loaded=false;this._options=e.extend({type:"raster"},n);e.extend(this,e.pick(n,["url","scheme","tileSize"]))}if(t)r.__proto__=t;r.prototype=Object.create(t&&t.prototype);r.prototype.constructor=r;r.prototype.load=function t(){var r=this;this._loaded=false;this.fire(new e.Event("dataloading",{dataType:"source"}));this._tileJSONRequest=L(this._options,this.map._requestManager,(function(t,n){r._tileJSONRequest=null;r._loaded=true;if(t){r.fire(new e.ErrorEvent(t))}else if(n){e.extend(r,n);if(n.bounds){r.tileBounds=new C(n.bounds,r.minzoom,r.maxzoom)}e.postTurnstileEvent(n.tiles);e.postMapLoadEvent(n.tiles,r.map._getMapId(),r.map._requestManager._skuToken);r.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"}));r.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}}))};r.prototype.loaded=function e(){return this._loaded};r.prototype.onAdd=function e(t){this.map=t;this.load()};r.prototype.onRemove=function e(){if(this._tileJSONRequest){this._tileJSONRequest.cancel();this._tileJSONRequest=null}};r.prototype.serialize=function t(){return e.extend({},this._options)};r.prototype.hasTile=function e(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)};r.prototype.loadTile=function t(r,n){var a=this;var i=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);r.request=e.getImage(this.map._requestManager.transformRequest(i,e.ResourceType.Tile),(function(t,i){delete r.request;if(r.aborted){r.state="unloaded";n(null)}else if(t){r.state="errored";n(t)}else if(i){if(a.map._refreshExpiredTiles){r.setExpiryData(i)}delete i.cacheControl;delete i.expires;var o=a.map.painter.context;var s=o.gl;r.texture=a.map.painter.getTileTexture(i.width);if(r.texture){r.texture.update(i,{useMipmap:true})}else{r.texture=new e.Texture(o,i,s.RGBA,{useMipmap:true});r.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST);if(o.extTextureFilterAnisotropic){s.texParameterf(s.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax)}}r.state="loaded";e.cacheEntryPossiblyAdded(a.dispatcher);n(null)}}))};r.prototype.abortTile=function e(t,r){if(t.request){t.request.cancel();delete t.request}r()};r.prototype.unloadTile=function e(t,r){if(t.texture){this.map.painter.saveTileTexture(t.texture)}r()};r.prototype.hasTransition=function e(){return false};return r}(e.Evented);var O=function(t){function r(r,n,a,i){t.call(this,r,n,a,i);this.type="raster-dem";this.maxzoom=22;this._options=e.extend({type:"raster-dem"},n);this.encoding=n.encoding||"mapbox"}if(t)r.__proto__=t;r.prototype=Object.create(t&&t.prototype);r.prototype.constructor=r;r.prototype.serialize=function e(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}};r.prototype.loadTile=function t(r,n){var a=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);r.request=e.getImage(this.map._requestManager.transformRequest(a,e.ResourceType.Tile),i.bind(this));r.neighboringTiles=this._getNeighboringTiles(r.tileID);function i(t,a){delete r.request;if(r.aborted){r.state="unloaded";n(null)}else if(t){r.state="errored";n(t)}else if(a){if(this.map._refreshExpiredTiles){r.setExpiryData(a)}delete a.cacheControl;delete a.expires;var i=e.window.ImageBitmap&&a instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported();var s=i?a:e.browser.getImageData(a,1);var l={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:s,encoding:this.encoding};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();r.actor.send("loadDEMTile",l,o.bind(this))}}}function o(e,t){if(e){r.state="errored";n(e)}if(t){r.dem=t;r.needsHillshadePrepare=true;r.state="loaded";n(null)}}};r.prototype._getNeighboringTiles=function t(r){var n=r.canonical;var a=Math.pow(2,n.z);var i=(n.x-1+a)%a;var o=n.x===0?r.wrap-1:r.wrap;var s=(n.x+1+a)%a;var l=n.x+1===a?r.wrap+1:r.wrap;var u={};u[new e.OverscaledTileID(r.overscaledZ,o,n.z,i,n.y).key]={backfilled:false};u[new e.OverscaledTileID(r.overscaledZ,l,n.z,s,n.y).key]={backfilled:false};if(n.y>0){u[new e.OverscaledTileID(r.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:false};u[new e.OverscaledTileID(r.overscaledZ,r.wrap,n.z,n.x,n.y-1).key]={backfilled:false};u[new e.OverscaledTileID(r.overscaledZ,l,n.z,s,n.y-1).key]={backfilled:false}}if(n.y+1<a){u[new e.OverscaledTileID(r.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:false};u[new e.OverscaledTileID(r.overscaledZ,r.wrap,n.z,n.x,n.y+1).key]={backfilled:false};u[new e.OverscaledTileID(r.overscaledZ,l,n.z,s,n.y+1).key]={backfilled:false}}return u};r.prototype.unloadTile=function e(t){if(t.demTexture){this.map.painter.saveTileTexture(t.demTexture)}if(t.fbo){t.fbo.destroy();delete t.fbo}if(t.dem){delete t.dem}delete t.neighboringTiles;t.state="unloaded";if(t.actor){t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})}};return r}(P);var D=function(t){function r(r,n,a,i){t.call(this);this.id=r;this.type="geojson";this.minzoom=0;this.maxzoom=18;this.tileSize=512;this.isTileClipped=true;this.reparseOverscaled=true;this._removed=false;this._loaded=false;this.actor=a.getActor();this.setEventedParent(i);this._data=n.data;this._options=e.extend({},n);this._collectResourceTiming=n.collectResourceTiming;this._resourceTiming=[];if(n.maxzoom!==undefined){this.maxzoom=n.maxzoom}if(n.type){this.type=n.type}if(n.attribution){this.attribution=n.attribution}this.promoteId=n.promoteId;var o=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:n.cluster||false,geojsonVtOptions:{buffer:(n.buffer!==undefined?n.buffer:128)*o,tolerance:(n.tolerance!==undefined?n.tolerance:.375)*o,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||false,generateId:n.generateId||false},superclusterOptions:{maxZoom:n.clusterMaxZoom!==undefined?Math.min(n.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(n.clusterRadius||50)*o,log:false,generateId:n.generateId||false},clusterProperties:n.clusterProperties},n.workerOptions)}if(t)r.__proto__=t;r.prototype=Object.create(t&&t.prototype);r.prototype.constructor=r;r.prototype.load=function t(){var r=this;this.fire(new e.Event("dataloading",{dataType:"source"}));this._updateWorkerData((function(t){if(t){r.fire(new e.ErrorEvent(t));return}var n={dataType:"source",sourceDataType:"metadata"};if(r._collectResourceTiming&&r._resourceTiming&&r._resourceTiming.length>0){n.resourceTiming=r._resourceTiming;r._resourceTiming=[]}r.fire(new e.Event("data",n))}))};r.prototype.onAdd=function e(t){this.map=t;this.load()};r.prototype.setData=function t(r){var n=this;this._data=r;this.fire(new e.Event("dataloading",{dataType:"source"}));this._updateWorkerData((function(t){if(t){n.fire(new e.ErrorEvent(t));return}var r={dataType:"source",sourceDataType:"content"};if(n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0){r.resourceTiming=n._resourceTiming;n._resourceTiming=[]}n.fire(new e.Event("data",r))}));return this};r.prototype.getClusterExpansionZoom=function e(t,r){this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},r);return this};r.prototype.getClusterChildren=function e(t,r){this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},r);return this};r.prototype.getClusterLeaves=function e(t,r,n,a){this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:r,offset:n},a);return this};r.prototype._updateWorkerData=function t(r){var n=this;this._loaded=false;var a=e.extend({},this.workerOptions);var i=this._data;if(typeof i==="string"){a.request=this.map._requestManager.transformRequest(e.browser.resolveURL(i),e.ResourceType.Source);a.request.collectResourceTiming=this._collectResourceTiming}else{a.data=JSON.stringify(i)}this.actor.send(this.type+".loadData",a,(function(e,t){if(n._removed||t&&t.abandoned){return}n._loaded=true;if(t&&t.resourceTiming&&t.resourceTiming[n.id]){n._resourceTiming=t.resourceTiming[n.id].slice(0)}n.actor.send(n.type+".coalesce",{source:a.source},null);r(e)}))};r.prototype.loaded=function e(){return this._loaded};r.prototype.loadTile=function t(r,n){var a=this;var i=!r.actor?"loadTile":"reloadTile";r.actor=this.actor;var o={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request=this.actor.send(i,o,(function(e,t){delete r.request;r.unloadVectorData();if(r.aborted){return n(null)}if(e){return n(e)}r.loadVectorData(t,a.map.painter,i==="reloadTile");return n(null)}))};r.prototype.abortTile=function e(t){if(t.request){t.request.cancel();delete t.request}t.aborted=true};r.prototype.unloadTile=function e(t){t.unloadVectorData();this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})};r.prototype.onRemove=function e(){this._removed=true;this.actor.send("removeSource",{type:this.type,source:this.id})};r.prototype.serialize=function t(){return e.extend({},this._options,{type:this.type,data:this._data})};r.prototype.hasTransition=function e(){return false};return r}(e.Evented);var z=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);var R=function(t){function r(e,r,n,a){t.call(this);this.id=e;this.dispatcher=n;this.coordinates=r.coordinates;this.type="image";this.minzoom=0;this.maxzoom=22;this.tileSize=512;this.tiles={};this._loaded=false;this.setEventedParent(a);this.options=r}if(t)r.__proto__=t;r.prototype=Object.create(t&&t.prototype);r.prototype.constructor=r;r.prototype.load=function t(r,n){var a=this;this._loaded=false;this.fire(new e.Event("dataloading",{dataType:"source"}));this.url=this.options.url;e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),(function(t,i){a._loaded=true;if(t){a.fire(new e.ErrorEvent(t))}else if(i){a.image=i;if(r){a.coordinates=r}if(n){n()}a._finishLoading()}}))};r.prototype.loaded=function e(){return this._loaded};r.prototype.updateImage=function e(t){var r=this;if(!this.image||!t.url){return this}this.options.url=t.url;this.load(t.coordinates,(function(){r.texture=null}));return this};r.prototype._finishLoading=function t(){if(this.map){this.setCoordinates(this.coordinates);this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"}))}};r.prototype.onAdd=function e(t){this.map=t;this.load()};r.prototype.setCoordinates=function t(r){var n=this;this.coordinates=r;var a=r.map(e.MercatorCoordinate.fromLngLat);this.tileID=F(a);this.minzoom=this.maxzoom=this.tileID.z;var i=a.map((function(e){return n.tileID.getTilePoint(e)._round()}));this._boundsArray=new e.StructArrayLayout4i8;this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0);this._boundsArray.emplaceBack(i[1].x,i[1].y,e.EXTENT,0);this._boundsArray.emplaceBack(i[3].x,i[3].y,0,e.EXTENT);this._boundsArray.emplaceBack(i[2].x,i[2].y,e.EXTENT,e.EXTENT);if(this.boundsBuffer){this.boundsBuffer.destroy();delete this.boundsBuffer}this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}));return this};r.prototype.prepare=function t(){if(Object.keys(this.tiles).length===0||!this.image){return}var r=this.map.painter.context;var n=r.gl;if(!this.boundsBuffer){this.boundsBuffer=r.createVertexBuffer(this._boundsArray,z.members)}if(!this.boundsSegments){this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)}if(!this.texture){this.texture=new e.Texture(r,this.image,n.RGBA);this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}for(var a in this.tiles){var i=this.tiles[a];if(i.state!=="loaded"){i.state="loaded";i.texture=this.texture}}};r.prototype.loadTile=function e(t,r){if(this.tileID&&this.tileID.equals(t.tileID.canonical)){this.tiles[String(t.tileID.wrap)]=t;t.buckets={};r(null)}else{t.state="errored";r(null)}};r.prototype.serialize=function e(){return{type:"image",url:this.options.url,coordinates:this.coordinates}};r.prototype.hasTransition=function e(){return false};return r}(e.Evented);function F(t){var r=Infinity;var n=Infinity;var a=-Infinity;var i=-Infinity;for(var o=0,s=t;o<s.length;o+=1){var l=s[o];r=Math.min(r,l.x);n=Math.min(n,l.y);a=Math.max(a,l.x);i=Math.max(i,l.y)}var u=a-r;var f=i-n;var c=Math.max(u,f);var v=Math.max(0,Math.floor(-Math.log(c)/Math.LN2));var h=Math.pow(2,v);return new e.CanonicalTileID(v,Math.floor((r+a)/2*h),Math.floor((n+i)/2*h))}var B=function(t){function r(e,r,n,a){t.call(this,e,r,n,a);this.roundZoom=true;this.type="video";this.options=r}if(t)r.__proto__=t;r.prototype=Object.create(t&&t.prototype);r.prototype.constructor=r;r.prototype.load=function t(){var r=this;this._loaded=false;var n=this.options;this.urls=[];for(var a=0,i=n.urls;a<i.length;a+=1){var o=i[a];this.urls.push(this.map._requestManager.transformRequest(o,e.ResourceType.Source).url)}e.getVideo(this.urls,(function(t,n){r._loaded=true;if(t){r.fire(new e.ErrorEvent(t))}else if(n){r.video=n;r.video.loop=true;r.video.addEventListener("playing",(function(){r.map.triggerRepaint()}));if(r.map){r.video.play()}r._finishLoading()}}))};r.prototype.pause=function e(){if(this.video){this.video.pause()}};r.prototype.play=function e(){if(this.video){this.video.play()}};r.prototype.seek=function t(r){if(this.video){var n=this.video.seekable;if(r<n.start(0)||r>n.end(0)){this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+n.start(0)+" and "+n.end(0)+"-second mark.")))}else{this.video.currentTime=r}}};r.prototype.getVideo=function e(){return this.video};r.prototype.onAdd=function e(t){if(this.map){return}this.map=t;this.load();if(this.video){this.video.play();this.setCoordinates(this.coordinates)}};r.prototype.prepare=function t(){if(Object.keys(this.tiles).length===0||this.video.readyState<2){return}var r=this.map.painter.context;var n=r.gl;if(!this.boundsBuffer){this.boundsBuffer=r.createVertexBuffer(this._boundsArray,z.members)}if(!this.boundsSegments){this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)}if(!this.texture){this.texture=new e.Texture(r,this.video,n.RGBA);this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}else if(!this.video.paused){this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE);n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)}for(var a in this.tiles){var i=this.tiles[a];if(i.state!=="loaded"){i.state="loaded";i.texture=this.texture}}};r.prototype.serialize=function e(){return{type:"video",urls:this.urls,coordinates:this.coordinates}};r.prototype.hasTransition=function e(){return this.video&&!this.video.paused};return r}(R);var N=function(t){function r(r,n,a,i){t.call(this,r,n,a,i);if(!n.coordinates){this.fire(new e.ErrorEvent(new e.ValidationError("sources."+r,null,'missing required property "coordinates"')))}else if(!Array.isArray(n.coordinates)||n.coordinates.length!==4||n.coordinates.some((function(e){return!Array.isArray(e)||e.length!==2||e.some((function(e){return typeof e!=="number"}))}))){this.fire(new e.ErrorEvent(new e.ValidationError("sources."+r,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs')))}if(n.animate&&typeof n.animate!=="boolean"){this.fire(new e.ErrorEvent(new e.ValidationError("sources."+r,null,'optional "animate" property must be a boolean value')))}if(!n.canvas){this.fire(new e.ErrorEvent(new e.ValidationError("sources."+r,null,'missing required property "canvas"')))}else if(typeof n.canvas!=="string"&&!(n.canvas instanceof e.window.HTMLCanvasElement)){this.fire(new e.ErrorEvent(new e.ValidationError("sources."+r,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance')))}this.options=n;this.animate=n.animate!==undefined?n.animate:true}if(t)r.__proto__=t;r.prototype=Object.create(t&&t.prototype);r.prototype.constructor=r;r.prototype.load=function t(){this._loaded=true;if(!this.canvas){this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)}this.width=this.canvas.width;this.height=this.canvas.height;if(this._hasInvalidDimensions()){this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=true;this.map.triggerRepaint()};this.pause=function(){if(this._playing){this.prepare();this._playing=false}};this._finishLoading()};r.prototype.getCanvas=function e(){return this.canvas};r.prototype.onAdd=function e(t){this.map=t;this.load();if(this.canvas){if(this.animate){this.play()}}};r.prototype.onRemove=function e(){this.pause()};r.prototype.prepare=function t(){var r=false;if(this.canvas.width!==this.width){this.width=this.canvas.width;r=true}if(this.canvas.height!==this.height){this.height=this.canvas.height;r=true}if(this._hasInvalidDimensions()){return}if(Object.keys(this.tiles).length===0){return}var n=this.map.painter.context;var a=n.gl;if(!this.boundsBuffer){this.boundsBuffer=n.createVertexBuffer(this._boundsArray,z.members)}if(!this.boundsSegments){this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)}if(!this.texture){this.texture=new e.Texture(n,this.canvas,a.RGBA,{premultiply:true})}else if(r||this._playing){this.texture.update(this.canvas,{premultiply:true})}for(var i in this.tiles){var o=this.tiles[i];if(o.state!=="loaded"){o.state="loaded";o.texture=this.texture}}};r.prototype.serialize=function e(){return{type:"canvas",coordinates:this.coordinates}};r.prototype.hasTransition=function e(){return this._playing};r.prototype._hasInvalidDimensions=function e(){for(var t=0,r=[this.canvas.width,this.canvas.height];t<r.length;t+=1){var n=r[t];if(isNaN(n)||n<=0){return true}}return false};return r}(R);var j={vector:I,raster:P,"raster-dem":O,geojson:D,video:B,image:R,canvas:N};var U=function(t,r,n,a){var i=new j[r.type](t,r,n,a);if(i.id!==t){throw new Error("Expected Source id to be "+t+" instead of "+i.id)}e.bindAll(["load","abort","unload","serialize","prepare"],i);return i};var V=function(e){return j[e]};var H=function(e,t){j[e]=t};function q(t,r){var n=e.identity([]);e.translate(n,n,[1,1,0]);e.scale(n,n,[t.width*.5,t.height*.5,1]);return e.multiply(n,n,t.calculatePosMatrix(r.toUnwrapped()))}function G(e,t,r){if(e){for(var n=0,a=e;n<a.length;n+=1){var i=a[n];var o=t[i];if(o&&o.source===r&&o.type==="fill-extrusion"){return true}}}else{for(var s in t){var l=t[s];if(l.source===r&&l.type==="fill-extrusion"){return true}}}return false}function Z(e,t,r,n,a,i){var o=G(a&&a.layers,t,e.id);var s=i.maxPitchScaleFactor();var l=e.tilesIn(n,s,o);l.sort(X);var u=[];for(var f=0,c=l;f<c.length;f+=1){var v=c[f];u.push({wrappedTileID:v.tileID.wrapped().key,queryResults:v.tile.queryRenderedFeatures(t,r,e._state,v.queryGeometry,v.cameraQueryGeometry,v.scale,a,i,s,q(e.transform,v.tileID))})}var h=J(u);for(var p in h){h[p].forEach((function(t){var r=t.feature;var n=e.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source;if(r.layer["source-layer"]){r.sourceLayer=r.layer["source-layer"]}r.state=n}))}return h}function Y(e,t,r,n,a,i,o){var s={};var l=i.queryRenderedSymbols(n);var u=[];for(var f=0,c=Object.keys(l).map(Number);f<c.length;f+=1){var v=c[f];u.push(o[v])}u.sort(X);var h=function(){var r=d[p];var n=r.featureIndex.lookupSymbolFeatures(l[r.bucketInstanceId],t,r.bucketIndex,r.sourceLayerIndex,a.filter,a.layers,a.availableImages,e);for(var i in n){var o=s[i]=s[i]||[];var u=n[i];u.sort((function(e,t){var n=r.featureSortOrder;if(n){var a=n.indexOf(e.featureIndex);var i=n.indexOf(t.featureIndex);return i-a}else{return t.featureIndex-e.featureIndex}}));for(var f=0,c=u;f<c.length;f+=1){var v=c[f];o.push(v)}}};for(var p=0,d=u;p<d.length;p+=1)h();var g=function(t){s[t].forEach((function(n){var a=n.feature;var i=e[t];var o=r[i.source];var s=o.getFeatureState(a.layer["source-layer"],a.id);a.source=a.layer.source;if(a.layer["source-layer"]){a.sourceLayer=a.layer["source-layer"]}a.state=s}))};for(var y in s)g(y);return s}function W(e,t){var r=e.getRenderableIds().map((function(t){return e.getTileByID(t)}));var n=[];var a={};for(var i=0;i<r.length;i++){var o=r[i];var s=o.tileID.canonical.key;if(!a[s]){a[s]=true;o.querySourceFeatures(n,t)}}return n}function X(e,t){var r=e.tileID;var n=t.tileID;return r.overscaledZ-n.overscaledZ||r.canonical.y-n.canonical.y||r.wrap-n.wrap||r.canonical.x-n.canonical.x}function J(e){var t={};var r={};for(var n=0,a=e;n<a.length;n+=1){var i=a[n];var o=i.queryResults;var s=i.wrappedTileID;var l=r[s]=r[s]||{};for(var u in o){var f=o[u];var c=l[u]=l[u]||{};var v=t[u]=t[u]||[];for(var h=0,p=f;h<p.length;h+=1){var d=p[h];if(!c[d.featureIndex]){c[d.featureIndex]=true;v.push(d)}}}}return t}var K=function e(t,r){this.max=t;this.onRemove=r;this.reset()};K.prototype.reset=function e(){for(var t in this.data){for(var r=0,n=this.data[t];r<n.length;r+=1){var a=n[r];if(a.timeout){clearTimeout(a.timeout)}this.onRemove(a.value)}}this.data={};this.order=[];return this};K.prototype.add=function e(t,r,n){var a=this;var i=t.wrapped().key;if(this.data[i]===undefined){this.data[i]=[]}var o={value:r,timeout:undefined};if(n!==undefined){o.timeout=setTimeout((function(){a.remove(t,o)}),n)}this.data[i].push(o);this.order.push(i);if(this.order.length>this.max){var s=this._getAndRemoveByKey(this.order[0]);if(s){this.onRemove(s)}}return this};K.prototype.has=function e(t){return t.wrapped().key in this.data};K.prototype.getAndRemove=function e(t){if(!this.has(t)){return null}return this._getAndRemoveByKey(t.wrapped().key)};K.prototype._getAndRemoveByKey=function e(t){var r=this.data[t].shift();if(r.timeout){clearTimeout(r.timeout)}if(this.data[t].length===0){delete this.data[t]}this.order.splice(this.order.indexOf(t),1);return r.value};K.prototype.getByKey=function e(t){var r=this.data[t];return r?r[0].value:null};K.prototype.get=function e(t){if(!this.has(t)){return null}var r=this.data[t.wrapped().key][0];return r.value};K.prototype.remove=function e(t,r){if(!this.has(t)){return this}var n=t.wrapped().key;var a=r===undefined?0:this.data[n].indexOf(r);var i=this.data[n][a];this.data[n].splice(a,1);if(i.timeout){clearTimeout(i.timeout)}if(this.data[n].length===0){delete this.data[n]}this.onRemove(i.value);this.order.splice(this.order.indexOf(n),1);return this};K.prototype.setMaxSize=function e(t){this.max=t;while(this.order.length>this.max){var r=this._getAndRemoveByKey(this.order[0]);if(r){this.onRemove(r)}}return this};K.prototype.filter=function e(t){var r=[];for(var n in this.data){for(var a=0,i=this.data[n];a<i.length;a+=1){var o=i[a];if(!t(o.value)){r.push(o)}}}for(var s=0,l=r;s<l.length;s+=1){var u=l[s];this.remove(u.value.tileID,u)}};var $=function e(t,r,n){this.context=t;var a=t.gl;this.buffer=a.createBuffer();this.dynamicDraw=Boolean(n);this.context.unbindVAO();t.bindElementBuffer.set(this.buffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,r.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW);if(!this.dynamicDraw){delete r.arrayBuffer}};$.prototype.bind=function e(){this.context.bindElementBuffer.set(this.buffer)};$.prototype.updateData=function e(t){var r=this.context.gl;this.context.unbindVAO();this.bind();r.bufferSubData(r.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)};$.prototype.destroy=function e(){var t=this.context.gl;if(this.buffer){t.deleteBuffer(this.buffer);delete this.buffer}};var Q={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};var ee=function e(t,r,n,a){this.length=r.length;this.attributes=n;this.itemSize=r.bytesPerElement;this.dynamicDraw=a;this.context=t;var i=t.gl;this.buffer=i.createBuffer();t.bindVertexBuffer.set(this.buffer);i.bufferData(i.ARRAY_BUFFER,r.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW);if(!this.dynamicDraw){delete r.arrayBuffer}};ee.prototype.bind=function e(){this.context.bindVertexBuffer.set(this.buffer)};ee.prototype.updateData=function e(t){var r=this.context.gl;this.bind();r.bufferSubData(r.ARRAY_BUFFER,0,t.arrayBuffer)};ee.prototype.enableAttributes=function e(t,r){for(var n=0;n<this.attributes.length;n++){var a=this.attributes[n];var i=r.attributes[a.name];if(i!==undefined){t.enableVertexAttribArray(i)}}};ee.prototype.setVertexAttribPointers=function e(t,r,n){for(var a=0;a<this.attributes.length;a++){var i=this.attributes[a];var o=r.attributes[i.name];if(o!==undefined){t.vertexAttribPointer(o,i.components,t[Q[i.type]],false,this.itemSize,i.offset+this.itemSize*(n||0))}}};ee.prototype.destroy=function e(){var t=this.context.gl;if(this.buffer){t.deleteBuffer(this.buffer);delete this.buffer}};var te=function e(t){this.gl=t.gl;this.default=this.getDefault();this.current=this.default;this.dirty=false};te.prototype.get=function e(){return this.current};te.prototype.set=function e(t){};te.prototype.getDefault=function e(){return this.default};te.prototype.setDefault=function e(){this.set(this.default)};var re=function(t){function r(){t.apply(this,arguments)}if(t)r.__proto__=t;r.prototype=Object.create(t&&t.prototype);r.prototype.constructor=r;r.prototype.getDefault=function t(){return e.Color.transparent};r.prototype.set=function e(t){var r=this.current;if(t.r===r.r&&t.g===r.g&&t.b===r.b&&t.a===r.a&&!this.dirty){return}this.gl.clearColor(t.r,t.g,t.b,t.a);this.current=t;this.dirty=false};return r}(te);var ne=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return 1};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}this.gl.clearDepth(t);this.current=t;this.dirty=false};return t}(te);var ae=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return 0};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}this.gl.clearStencil(t);this.current=t;this.dirty=false};return t}(te);var ie=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return[true,true,true,true]};t.prototype.set=function e(t){var r=this.current;if(t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&!this.dirty){return}this.gl.colorMask(t[0],t[1],t[2],t[3]);this.current=t;this.dirty=false};return t}(te);var oe=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return true};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}this.gl.depthMask(t);this.current=t;this.dirty=false};return t}(te);var se=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return 255};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}this.gl.stencilMask(t);this.current=t;this.dirty=false};return t}(te);var le=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return{func:this.gl.ALWAYS,ref:0,mask:255}};t.prototype.set=function e(t){var r=this.current;if(t.func===r.func&&t.ref===r.ref&&t.mask===r.mask&&!this.dirty){return}this.gl.stencilFunc(t.func,t.ref,t.mask);this.current=t;this.dirty=false};return t}(te);var ue=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]};t.prototype.set=function e(t){var r=this.current;if(t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&!this.dirty){return}this.gl.stencilOp(t[0],t[1],t[2]);this.current=t;this.dirty=false};return t}(te);var fe=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return false};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}var r=this.gl;if(t){r.enable(r.STENCIL_TEST)}else{r.disable(r.STENCIL_TEST)}this.current=t;this.dirty=false};return t}(te);var ce=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return[0,1]};t.prototype.set=function e(t){var r=this.current;if(t[0]===r[0]&&t[1]===r[1]&&!this.dirty){return}this.gl.depthRange(t[0],t[1]);this.current=t;this.dirty=false};return t}(te);var ve=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return false};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}var r=this.gl;if(t){r.enable(r.DEPTH_TEST)}else{r.disable(r.DEPTH_TEST)}this.current=t;this.dirty=false};return t}(te);var he=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return this.gl.LESS};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}this.gl.depthFunc(t);this.current=t;this.dirty=false};return t}(te);var pe=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return false};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}var r=this.gl;if(t){r.enable(r.BLEND)}else{r.disable(r.BLEND)}this.current=t;this.dirty=false};return t}(te);var de=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){var t=this.gl;return[t.ONE,t.ZERO]};t.prototype.set=function e(t){var r=this.current;if(t[0]===r[0]&&t[1]===r[1]&&!this.dirty){return}this.gl.blendFunc(t[0],t[1]);this.current=t;this.dirty=false};return t}(te);var ge=function(t){function r(){t.apply(this,arguments)}if(t)r.__proto__=t;r.prototype=Object.create(t&&t.prototype);r.prototype.constructor=r;r.prototype.getDefault=function t(){return e.Color.transparent};r.prototype.set=function e(t){var r=this.current;if(t.r===r.r&&t.g===r.g&&t.b===r.b&&t.a===r.a&&!this.dirty){return}this.gl.blendColor(t.r,t.g,t.b,t.a);this.current=t;this.dirty=false};return r}(te);var ye=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return this.gl.FUNC_ADD};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}this.gl.blendEquation(t);this.current=t;this.dirty=false};return t}(te);var me=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return false};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}var r=this.gl;if(t){r.enable(r.CULL_FACE)}else{r.disable(r.CULL_FACE)}this.current=t;this.dirty=false};return t}(te);var xe=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return this.gl.BACK};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}this.gl.cullFace(t);this.current=t;this.dirty=false};return t}(te);var be=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return this.gl.CCW};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}this.gl.frontFace(t);this.current=t;this.dirty=false};return t}(te);var _e=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return null};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}this.gl.useProgram(t);this.current=t;this.dirty=false};return t}(te);var we=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return this.gl.TEXTURE0};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}this.gl.activeTexture(t);this.current=t;this.dirty=false};return t}(te);var Te=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]};t.prototype.set=function e(t){var r=this.current;if(t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&!this.dirty){return}this.gl.viewport(t[0],t[1],t[2],t[3]);this.current=t;this.dirty=false};return t}(te);var ke=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return null};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}var r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,t);this.current=t;this.dirty=false};return t}(te);var Ae=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return null};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}var r=this.gl;r.bindRenderbuffer(r.RENDERBUFFER,t);this.current=t;this.dirty=false};return t}(te);var Me=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return null};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}var r=this.gl;r.bindTexture(r.TEXTURE_2D,t);this.current=t;this.dirty=false};return t}(te);var Se=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return null};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}var r=this.gl;r.bindBuffer(r.ARRAY_BUFFER,t);this.current=t;this.dirty=false};return t}(te);var Ee=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return null};t.prototype.set=function e(t){var r=this.gl;r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t);this.current=t;this.dirty=false};return t}(te);var Le=function(e){function t(t){e.call(this,t);this.vao=t.extVertexArrayObject}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return null};t.prototype.set=function e(t){if(!this.vao||t===this.current&&!this.dirty){return}this.vao.bindVertexArrayOES(t);this.current=t;this.dirty=false};return t}(te);var Ce=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return 4};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}var r=this.gl;r.pixelStorei(r.UNPACK_ALIGNMENT,t);this.current=t;this.dirty=false};return t}(te);var Ie=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return false};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}var r=this.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t);this.current=t;this.dirty=false};return t}(te);var Pe=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return false};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}var r=this.gl;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,t);this.current=t;this.dirty=false};return t}(te);var Oe=function(e){function t(t,r){e.call(this,t);this.context=t;this.parent=r}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getDefault=function e(){return null};return t}(te);var De=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.setDirty=function e(){this.dirty=true};t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}this.context.bindFramebuffer.set(this.parent);var r=this.gl;r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0);this.current=t;this.dirty=false};return t}(Oe);var ze=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.set=function e(t){if(t===this.current&&!this.dirty){return}this.context.bindFramebuffer.set(this.parent);var r=this.gl;r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,t);this.current=t;this.dirty=false};return t}(Oe);var Re=function e(t,r,n,a){this.context=t;this.width=r;this.height=n;var i=t.gl;var o=this.framebuffer=i.createFramebuffer();this.colorAttachment=new De(t,o);if(a){this.depthAttachment=new ze(t,o)}};Re.prototype.destroy=function e(){var t=this.context.gl;var r=this.colorAttachment.get();if(r){t.deleteTexture(r)}if(this.depthAttachment){var n=this.depthAttachment.get();if(n){t.deleteRenderbuffer(n)}}t.deleteFramebuffer(this.framebuffer)};var Fe=519;var Be=function e(t,r,n){this.func=t;this.mask=r;this.range=n};Be.ReadOnly=false;Be.ReadWrite=true;Be.disabled=new Be(Fe,Be.ReadOnly,[0,1]);var Ne=519;var je=7680;var Ue=function e(t,r,n,a,i,o){this.test=t;this.ref=r;this.mask=n;this.fail=a;this.depthFail=i;this.pass=o};Ue.disabled=new Ue({func:Ne,mask:0},0,0,je,je,je);var Ve=0;var He=1;var qe=771;var Ge=function e(t,r,n){this.blendFunction=t;this.blendColor=r;this.mask=n};Ge.Replace=[He,Ve];Ge.disabled=new Ge(Ge.Replace,e.Color.transparent,[false,false,false,false]);Ge.unblended=new Ge(Ge.Replace,e.Color.transparent,[true,true,true,true]);Ge.alphaBlended=new Ge([He,qe],e.Color.transparent,[true,true,true,true]);var Ze=1029;var Ye=2305;var We=function e(t,r,n){this.enable=t;this.mode=r;this.frontFace=n};We.disabled=new We(false,Ze,Ye);We.backCCW=new We(true,Ze,Ye);var Xe=function e(t){this.gl=t;this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object");this.clearColor=new re(this);this.clearDepth=new ne(this);this.clearStencil=new ae(this);this.colorMask=new ie(this);this.depthMask=new oe(this);this.stencilMask=new se(this);this.stencilFunc=new le(this);this.stencilOp=new ue(this);this.stencilTest=new fe(this);this.depthRange=new ce(this);this.depthTest=new ve(this);this.depthFunc=new he(this);this.blend=new pe(this);this.blendFunc=new de(this);this.blendColor=new ge(this);this.blendEquation=new ye(this);this.cullFace=new me(this);this.cullFaceSide=new xe(this);this.frontFace=new be(this);this.program=new _e(this);this.activeTexture=new we(this);this.viewport=new Te(this);this.bindFramebuffer=new ke(this);this.bindRenderbuffer=new Ae(this);this.bindTexture=new Me(this);this.bindVertexBuffer=new Se(this);this.bindElementBuffer=new Ee(this);this.bindVertexArrayOES=this.extVertexArrayObject&&new Le(this);this.pixelStoreUnpack=new Ce(this);this.pixelStoreUnpackPremultiplyAlpha=new Ie(this);this.pixelStoreUnpackFlipY=new Pe(this);this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");if(this.extTextureFilterAnisotropic){this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}this.extTextureHalfFloat=t.getExtension("OES_texture_half_float");if(this.extTextureHalfFloat){t.getExtension("OES_texture_half_float_linear");this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")}this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query")};Xe.prototype.setDefault=function e(){this.unbindVAO();this.clearColor.setDefault();this.clearDepth.setDefault();this.clearStencil.setDefault();this.colorMask.setDefault();this.depthMask.setDefault();this.stencilMask.setDefault();this.stencilFunc.setDefault();this.stencilOp.setDefault();this.stencilTest.setDefault();this.depthRange.setDefault();this.depthTest.setDefault();this.depthFunc.setDefault();this.blend.setDefault();this.blendFunc.setDefault();this.blendColor.setDefault();this.blendEquation.setDefault();this.cullFace.setDefault();this.cullFaceSide.setDefault();this.frontFace.setDefault();this.program.setDefault();this.activeTexture.setDefault();this.bindFramebuffer.setDefault();this.pixelStoreUnpack.setDefault();this.pixelStoreUnpackPremultiplyAlpha.setDefault();this.pixelStoreUnpackFlipY.setDefault()};Xe.prototype.setDirty=function e(){this.clearColor.dirty=true;this.clearDepth.dirty=true;this.clearStencil.dirty=true;this.colorMask.dirty=true;this.depthMask.dirty=true;this.stencilMask.dirty=true;this.stencilFunc.dirty=true;this.stencilOp.dirty=true;this.stencilTest.dirty=true;this.depthRange.dirty=true;this.depthTest.dirty=true;this.depthFunc.dirty=true;this.blend.dirty=true;this.blendFunc.dirty=true;this.blendColor.dirty=true;this.blendEquation.dirty=true;this.cullFace.dirty=true;this.cullFaceSide.dirty=true;this.frontFace.dirty=true;this.program.dirty=true;this.activeTexture.dirty=true;this.viewport.dirty=true;this.bindFramebuffer.dirty=true;this.bindRenderbuffer.dirty=true;this.bindTexture.dirty=true;this.bindVertexBuffer.dirty=true;this.bindElementBuffer.dirty=true;if(this.extVertexArrayObject){this.bindVertexArrayOES.dirty=true}this.pixelStoreUnpack.dirty=true;this.pixelStoreUnpackPremultiplyAlpha.dirty=true;this.pixelStoreUnpackFlipY.dirty=true};Xe.prototype.createIndexBuffer=function e(t,r){return new $(this,t,r)};Xe.prototype.createVertexBuffer=function e(t,r,n){return new ee(this,t,r,n)};Xe.prototype.createRenderbuffer=function e(t,r,n){var a=this.gl;var i=a.createRenderbuffer();this.bindRenderbuffer.set(i);a.renderbufferStorage(a.RENDERBUFFER,t,r,n);this.bindRenderbuffer.set(null);return i};Xe.prototype.createFramebuffer=function e(t,r,n){return new Re(this,t,r,n)};Xe.prototype.clear=function e(t){var r=t.color;var n=t.depth;var a=this.gl;var i=0;if(r){i|=a.COLOR_BUFFER_BIT;this.clearColor.set(r);this.colorMask.set([true,true,true,true])}if(typeof n!=="undefined"){i|=a.DEPTH_BUFFER_BIT;this.depthRange.set([0,1]);this.clearDepth.set(n);this.depthMask.set(true)}a.clear(i)};Xe.prototype.setCullFace=function e(t){if(t.enable===false){this.cullFace.set(false)}else{this.cullFace.set(true);this.cullFaceSide.set(t.mode);this.frontFace.set(t.frontFace)}};Xe.prototype.setDepthMode=function e(t){if(t.func===this.gl.ALWAYS&&!t.mask){this.depthTest.set(false)}else{this.depthTest.set(true);this.depthFunc.set(t.func);this.depthMask.set(t.mask);this.depthRange.set(t.range)}};Xe.prototype.setStencilMode=function e(t){if(t.test.func===this.gl.ALWAYS&&!t.mask){this.stencilTest.set(false)}else{this.stencilTest.set(true);this.stencilMask.set(t.mask);this.stencilOp.set([t.fail,t.depthFail,t.pass]);this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})}};Xe.prototype.setColorMode=function t(r){if(e.deepEqual(r.blendFunction,Ge.Replace)){this.blend.set(false)}else{this.blend.set(true);this.blendFunc.set(r.blendFunction);this.blendColor.set(r.blendColor)}this.colorMask.set(r.mask)};Xe.prototype.unbindVAO=function e(){if(this.extVertexArrayObject){this.bindVertexArrayOES.set(null)}};var Je=function(t){function r(r,n,a){var i=this;t.call(this);this.id=r;this.dispatcher=a;this.on("data",(function(e){if(e.dataType==="source"&&e.sourceDataType==="metadata"){i._sourceLoaded=true}if(i._sourceLoaded&&!i._paused&&e.dataType==="source"&&e.sourceDataType==="content"){i.reload();if(i.transform){i.update(i.transform)}}}));this.on("error",(function(){i._sourceErrored=true}));this._source=U(r,n,a,this);this._tiles={};this._cache=new K(0,this._unloadTile.bind(this));this._timers={};this._cacheTimers={};this._maxTileCacheSize=null;this._loadedParentTiles={};this._coveredTiles={};this._state=new e.SourceFeatureState}if(t)r.__proto__=t;r.prototype=Object.create(t&&t.prototype);r.prototype.constructor=r;r.prototype.onAdd=function e(t){this.map=t;this._maxTileCacheSize=t?t._maxTileCacheSize:null;if(this._source&&this._source.onAdd){this._source.onAdd(t)}};r.prototype.onRemove=function e(t){if(this._source&&this._source.onRemove){this._source.onRemove(t)}};r.prototype.loaded=function e(){if(this._sourceErrored){return true}if(!this._sourceLoaded){return false}if(!this._source.loaded()){return false}for(var t in this._tiles){var r=this._tiles[t];if(r.state!=="loaded"&&r.state!=="errored"){return false}}return true};r.prototype.getSource=function e(){return this._source};r.prototype.pause=function e(){this._paused=true};r.prototype.resume=function e(){if(!this._paused){return}var t=this._shouldReloadOnResume;this._paused=false;this._shouldReloadOnResume=false;if(t){this.reload()}if(this.transform){this.update(this.transform)}};r.prototype._loadTile=function e(t,r){return this._source.loadTile(t,r)};r.prototype._unloadTile=function e(t){if(this._source.unloadTile){return this._source.unloadTile(t,(function(){}))}};r.prototype._abortTile=function e(t){if(this._source.abortTile){return this._source.abortTile(t,(function(){}))}};r.prototype.serialize=function e(){return this._source.serialize()};r.prototype.prepare=function e(t){if(this._source.prepare){this._source.prepare()}this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var r in this._tiles){var n=this._tiles[r];n.upload(t);n.prepare(this.map.style.imageManager)}};r.prototype.getIds=function t(){return e.values(this._tiles).map((function(e){return e.tileID})).sort(Ke).map((function(e){return e.key}))};r.prototype.getRenderableIds=function t(r){var n=this;var a=[];for(var i in this._tiles){if(this._isIdRenderable(i,r)){a.push(this._tiles[i])}}if(r){return a.sort((function(t,r){var a=t.tileID;var i=r.tileID;var o=new e.Point(a.canonical.x,a.canonical.y)._rotate(n.transform.angle);var s=new e.Point(i.canonical.x,i.canonical.y)._rotate(n.transform.angle);return a.overscaledZ-i.overscaledZ||s.y-o.y||s.x-o.x})).map((function(e){return e.tileID.key}))}return a.map((function(e){return e.tileID})).sort(Ke).map((function(e){return e.key}))};r.prototype.hasRenderableParent=function e(t){var r=this.findLoadedParent(t,0);if(r){return this._isIdRenderable(r.tileID.key)}return false};r.prototype._isIdRenderable=function e(t,r){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(r||!this._tiles[t].holdingForFade())};r.prototype.reload=function e(){if(this._paused){this._shouldReloadOnResume=true;return}this._cache.reset();for(var t in this._tiles){if(this._tiles[t].state!=="errored"){this._reloadTile(t,"reloading")}}};r.prototype._reloadTile=function e(t,r){var n=this._tiles[t];if(!n){return}if(n.state!=="loading"){n.state=r}this._loadTile(n,this._tileLoaded.bind(this,n,t,r))};r.prototype._tileLoaded=function t(r,n,a,i){if(i){r.state="errored";if(i.status!==404){this._source.fire(new e.ErrorEvent(i,{tile:r}))}else{this.update(this.transform)}return}r.timeAdded=e.browser.now();if(a==="expired"){r.refreshedUponExpiration=true}this._setTileReloadTimer(n,r);if(this.getSource().type==="raster-dem"&&r.dem){this._backfillDEM(r)}this._state.initializeTileState(r,this.map?this.map.painter:null);this._source.fire(new e.Event("data",{dataType:"source",tile:r,coord:r.tileID}))};r.prototype._backfillDEM=function e(t){var r=this.getRenderableIds();for(var n=0;n<r.length;n++){var a=r[n];if(t.neighboringTiles&&t.neighboringTiles[a]){var i=this.getTileByID(a);o(t,i);o(i,t)}}function o(e,t){e.needsHillshadePrepare=true;var r=t.tileID.canonical.x-e.tileID.canonical.x;var n=t.tileID.canonical.y-e.tileID.canonical.y;var a=Math.pow(2,e.tileID.canonical.z);var i=t.tileID.key;if(r===0&&n===0){return}if(Math.abs(n)>1){return}if(Math.abs(r)>1){if(Math.abs(r+a)===1){r+=a}else if(Math.abs(r-a)===1){r-=a}}if(!t.dem||!e.dem){return}e.dem.backfillBorder(t.dem,r,n);if(e.neighboringTiles&&e.neighboringTiles[i]){e.neighboringTiles[i].backfilled=true}}};r.prototype.getTile=function e(t){return this.getTileByID(t.key)};r.prototype.getTileByID=function e(t){return this._tiles[t]};r.prototype._retainLoadedChildren=function e(t,r,n,a){for(var i in this._tiles){var o=this._tiles[i];if(a[i]||!o.hasData()||o.tileID.overscaledZ<=r||o.tileID.overscaledZ>n){continue}var s=o.tileID;while(o&&o.tileID.overscaledZ>r+1){var l=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[l.key];if(o&&o.hasData()){s=l}}var u=s;while(u.overscaledZ>r){u=u.scaledTo(u.overscaledZ-1);if(t[u.key]){a[s.key]=s;break}}}};r.prototype.findLoadedParent=function e(t,r){if(t.key in this._loadedParentTiles){var n=this._loadedParentTiles[t.key];if(n&&n.tileID.overscaledZ>=r){return n}else{return null}}for(var a=t.overscaledZ-1;a>=r;a--){var i=t.scaledTo(a);var o=this._getLoadedTile(i);if(o){return o}}};r.prototype._getLoadedTile=function e(t){var r=this._tiles[t.key];if(r&&r.hasData()){return r}var n=this._cache.getByKey(t.wrapped().key);return n};r.prototype.updateCacheSize=function e(t){var r=Math.ceil(t.width/this._source.tileSize)+1;var n=Math.ceil(t.height/this._source.tileSize)+1;var a=r*n;var i=5;var o=Math.floor(a*i);var s=typeof this._maxTileCacheSize==="number"?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(s)};r.prototype.handleWrapJump=function e(t){var r=this._prevLng===undefined?t:this._prevLng;var n=t-r;var a=n/360;var i=Math.round(a);this._prevLng=t;if(i){var o={};for(var s in this._tiles){var l=this._tiles[s];l.tileID=l.tileID.unwrapTo(l.tileID.wrap+i);o[l.tileID.key]=l}this._tiles=o;for(var u in this._timers){clearTimeout(this._timers[u]);delete this._timers[u]}for(var f in this._tiles){var c=this._tiles[f];this._setTileReloadTimer(f,c)}}};r.prototype.update=function t(n){var a=this;this.transform=n;if(!this._sourceLoaded||this._paused){return}this.updateCacheSize(n);this.handleWrapJump(this.transform.center.lng);this._coveredTiles={};var i;if(!this.used){i=[]}else if(this._source.tileID){i=n.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(t){return new e.OverscaledTileID(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)}))}else{i=n.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled});if(this._source.hasTile){i=i.filter((function(e){return a._source.hasTile(e)}))}}var o=n.coveringZoomLevel(this._source);var s=Math.max(o-r.maxOverzooming,this._source.minzoom);var l=Math.max(o+r.maxUnderzooming,this._source.minzoom);var u=this._updateRetainedTiles(i,o);if($e(this._source.type)){var f={};var c={};var v=Object.keys(u);for(var h=0,p=v;h<p.length;h+=1){var d=p[h];var g=u[d];var y=this._tiles[d];if(!y||y.fadeEndTime&&y.fadeEndTime<=e.browser.now()){continue}var m=this.findLoadedParent(g,s);if(m){this._addTile(m.tileID);f[m.tileID.key]=m.tileID}c[d]=g}this._retainLoadedChildren(c,o,l,u);for(var x in f){if(!u[x]){this._coveredTiles[x]=true;u[x]=f[x]}}}for(var b in u){this._tiles[b].clearFadeHold()}var _=e.keysDifference(this._tiles,u);for(var w=0,T=_;w<T.length;w+=1){var k=T[w];var A=this._tiles[k];if(A.hasSymbolBuckets&&!A.holdingForFade()){A.setHoldDuration(this.map._fadeDuration)}else if(!A.hasSymbolBuckets||A.symbolFadeFinished()){this._removeTile(k)}}this._updateLoadedParentTileCache()};r.prototype.releaseSymbolFadeTiles=function e(){for(var t in this._tiles){if(this._tiles[t].holdingForFade()){this._removeTile(t)}}};r.prototype._updateRetainedTiles=function e(t,n){var a={};var i={};var o=Math.max(n-r.maxOverzooming,this._source.minzoom);var s=Math.max(n+r.maxUnderzooming,this._source.minzoom);var l={};for(var u=0,f=t;u<f.length;u+=1){var c=f[u];var v=this._addTile(c);a[c.key]=c;if(v.hasData()){continue}if(n<this._source.maxzoom){l[c.key]=c}}this._retainLoadedChildren(l,n,s,a);for(var h=0,p=t;h<p.length;h+=1){var d=p[h];var g=this._tiles[d.key];if(g.hasData()){continue}if(n+1>this._source.maxzoom){var y=d.children(this._source.maxzoom)[0];var m=this.getTile(y);if(!!m&&m.hasData()){a[y.key]=y;continue}}else{var x=d.children(this._source.maxzoom);if(a[x[0].key]&&a[x[1].key]&&a[x[2].key]&&a[x[3].key]){continue}}var b=g.wasRequested();for(var _=d.overscaledZ-1;_>=o;--_){var w=d.scaledTo(_);if(i[w.key]){break}i[w.key]=true;g=this.getTile(w);if(!g&&b){g=this._addTile(w)}if(g){a[w.key]=w;b=g.wasRequested();if(g.hasData()){break}}}}return a};r.prototype._updateLoadedParentTileCache=function e(){this._loadedParentTiles={};for(var t in this._tiles){var r=[];var n=void 0;var a=this._tiles[t].tileID;while(a.overscaledZ>0){if(a.key in this._loadedParentTiles){n=this._loadedParentTiles[a.key];break}r.push(a.key);var i=a.scaledTo(a.overscaledZ-1);n=this._getLoadedTile(i);if(n){break}a=i}for(var o=0,s=r;o<s.length;o+=1){var l=s[o];this._loadedParentTiles[l]=n}}};r.prototype._addTile=function t(r){var n=this._tiles[r.key];if(n){return n}n=this._cache.getAndRemove(r);if(n){this._setTileReloadTimer(r.key,n);n.tileID=r;this._state.initializeTileState(n,this.map?this.map.painter:null);if(this._cacheTimers[r.key]){clearTimeout(this._cacheTimers[r.key]);delete this._cacheTimers[r.key];this._setTileReloadTimer(r.key,n)}}var a=Boolean(n);if(!a){n=new e.Tile(r,this._source.tileSize*r.overscaleFactor());this._loadTile(n,this._tileLoaded.bind(this,n,r.key,n.state))}if(!n){return null}n.uses++;this._tiles[r.key]=n;if(!a){this._source.fire(new e.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"}))}return n};r.prototype._setTileReloadTimer=function e(t,r){var n=this;if(t in this._timers){clearTimeout(this._timers[t]);delete this._timers[t]}var a=r.getExpiryTimeout();if(a){this._timers[t]=setTimeout((function(){n._reloadTile(t,"expired");delete n._timers[t]}),a)}};r.prototype._removeTile=function e(t){var r=this._tiles[t];if(!r){return}r.uses--;delete this._tiles[t];if(this._timers[t]){clearTimeout(this._timers[t]);delete this._timers[t]}if(r.uses>0){return}if(r.hasData()&&r.state!=="reloading"){this._cache.add(r.tileID,r,r.getExpiryTimeout())}else{r.aborted=true;this._abortTile(r);this._unloadTile(r)}};r.prototype.clearTiles=function e(){this._shouldReloadOnResume=false;this._paused=false;for(var t in this._tiles){this._removeTile(t)}this._cache.reset()};r.prototype.tilesIn=function t(r,n,a){var i=this;var o=[];var s=this.transform;if(!s){return o}var l=a?s.getCameraQueryGeometry(r):r;var u=r.map((function(e){return s.pointCoordinate(e)}));var f=l.map((function(e){return s.pointCoordinate(e)}));var c=this.getIds();var v=Infinity;var h=Infinity;var p=-Infinity;var d=-Infinity;for(var g=0,y=f;g<y.length;g+=1){var m=y[g];v=Math.min(v,m.x);h=Math.min(h,m.y);p=Math.max(p,m.x);d=Math.max(d,m.y)}var x=function(t){var r=i._tiles[c[t]];if(r.holdingForFade()){return}var a=r.tileID;var l=Math.pow(2,s.zoom-r.tileID.overscaledZ);var g=n*r.queryPadding*e.EXTENT/r.tileSize/l;var y=[a.getTilePoint(new e.MercatorCoordinate(v,h)),a.getTilePoint(new e.MercatorCoordinate(p,d))];if(y[0].x-g<e.EXTENT&&y[0].y-g<e.EXTENT&&y[1].x+g>=0&&y[1].y+g>=0){var m=u.map((function(e){return a.getTilePoint(e)}));var x=f.map((function(e){return a.getTilePoint(e)}));o.push({tile:r,tileID:a,queryGeometry:m,cameraQueryGeometry:x,scale:l})}};for(var b=0;b<c.length;b++)x(b);return o};r.prototype.getVisibleCoordinates=function e(t){var r=this;var n=this.getRenderableIds(t).map((function(e){return r._tiles[e].tileID}));for(var a=0,i=n;a<i.length;a+=1){var o=i[a];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return n};r.prototype.hasTransition=function t(){if(this._source.hasTransition()){return true}if($e(this._source.type)){for(var r in this._tiles){var n=this._tiles[r];if(n.fadeEndTime!==undefined&&n.fadeEndTime>=e.browser.now()){return true}}}return false};r.prototype.setFeatureState=function e(t,r,n){t=t||"_geojsonTileLayer";this._state.updateState(t,r,n)};r.prototype.removeFeatureState=function e(t,r,n){t=t||"_geojsonTileLayer";this._state.removeFeatureState(t,r,n)};r.prototype.getFeatureState=function e(t,r){t=t||"_geojsonTileLayer";return this._state.getState(t,r)};r.prototype.setDependencies=function e(t,r,n){var a=this._tiles[t];if(a){a.setDependencies(r,n)}};r.prototype.reloadTilesForDependencies=function e(t,r){for(var n in this._tiles){var a=this._tiles[n];if(a.hasDependency(t,r)){this._reloadTile(n,"reloading")}}this._cache.filter((function(e){return!e.hasDependency(t,r)}))};return r}(e.Evented);Je.maxOverzooming=10;Je.maxUnderzooming=3;function Ke(e,t){var r=Math.abs(e.wrap*2)-+(e.wrap<0);var n=Math.abs(t.wrap*2)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||n-r||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function $e(e){return e==="raster"||e==="image"||e==="video"}function Qe(){return new e.window.Worker(Fs.workerUrl)}var et="mapboxgl_preloaded_worker_pool";var tt=function e(){this.active={}};tt.prototype.acquire=function e(t){if(!this.workers){this.workers=[];while(this.workers.length<tt.workerCount){this.workers.push(new Qe)}}this.active[t]=true;return this.workers.slice()};tt.prototype.release=function e(t){delete this.active[t];if(this.numActive()===0){this.workers.forEach((function(e){e.terminate()}));this.workers=null}};tt.prototype.isPreloaded=function e(){return!!this.active[et]};tt.prototype.numActive=function e(){return Object.keys(this.active).length};var rt=Math.floor(e.browser.hardwareConcurrency/2);tt.workerCount=Math.max(Math.min(rt,6),1);var nt;function at(){if(!nt){nt=new tt}return nt}function it(){var e=at();e.acquire(et)}function ot(){var e=nt;if(e){if(e.isPreloaded()&&e.numActive()===1){e.release(et);nt=null}else{console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()")}}}function st(t,r){var n={};for(var a in t){if(a!=="ref"){n[a]=t[a]}}e.refProperties.forEach((function(e){if(e in r){n[e]=r[e]}}));return n}function lt(e){e=e.slice();var t=Object.create(null);for(var r=0;r<e.length;r++){t[e[r].id]=e[r]}for(var n=0;n<e.length;n++){if("ref"in e[n]){e[n]=st(e[n],t[e[n].ref])}}return e}function ut(){var t={};var r=e.styleSpec["$version"];for(var n in e.styleSpec["$root"]){var a=e.styleSpec["$root"][n];if(a.required){var i=null;if(n==="version"){i=r}else{if(a.type==="array"){i=[]}else{i={}}}if(i!=null){t[n]=i}}}return t}var ft={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ct(e,t,r){r.push({command:ft.addSource,args:[e,t[e]]})}function vt(e,t,r){t.push({command:ft.removeSource,args:[e]});r[e]=true}function ht(e,t,r,n){vt(e,r,n);ct(e,t,r)}function pt(t,r,n){var a;for(a in t[n]){if(!t[n].hasOwnProperty(a)){continue}if(a!=="data"&&!e.deepEqual(t[n][a],r[n][a])){return false}}for(a in r[n]){if(!r[n].hasOwnProperty(a)){continue}if(a!=="data"&&!e.deepEqual(t[n][a],r[n][a])){return false}}return true}function dt(t,r,n,a){t=t||{};r=r||{};var i;for(i in t){if(!t.hasOwnProperty(i)){continue}if(!r.hasOwnProperty(i)){vt(i,n,a)}}for(i in r){if(!r.hasOwnProperty(i)){continue}if(!t.hasOwnProperty(i)){ct(i,r,n)}else if(!e.deepEqual(t[i],r[i])){if(t[i].type==="geojson"&&r[i].type==="geojson"&&pt(t,r,i)){n.push({command:ft.setGeoJSONSourceData,args:[i,r[i].data]})}else{ht(i,r,n,a)}}}}function gt(t,r,n,a,i,o){t=t||{};r=r||{};var s;for(s in t){if(!t.hasOwnProperty(s)){continue}if(!e.deepEqual(t[s],r[s])){n.push({command:o,args:[a,s,r[s],i]})}}for(s in r){if(!r.hasOwnProperty(s)||t.hasOwnProperty(s)){continue}if(!e.deepEqual(t[s],r[s])){n.push({command:o,args:[a,s,r[s],i]})}}}function yt(e){return e.id}function mt(e,t){e[t.id]=t;return e}function xt(t,r,n){t=t||[];r=r||[];var a=t.map(yt);var i=r.map(yt);var o=t.reduce(mt,{});var s=r.reduce(mt,{});var l=a.slice();var u=Object.create(null);var f,c,v,h,p,d,g;for(f=0,c=0;f<a.length;f++){v=a[f];if(!s.hasOwnProperty(v)){n.push({command:ft.removeLayer,args:[v]});l.splice(l.indexOf(v,c),1)}else{c++}}for(f=0,c=0;f<i.length;f++){v=i[i.length-1-f];if(l[l.length-1-f]===v){continue}if(o.hasOwnProperty(v)){n.push({command:ft.removeLayer,args:[v]});l.splice(l.lastIndexOf(v,l.length-c),1)}else{c++}d=l[l.length-f];n.push({command:ft.addLayer,args:[s[v],d]});l.splice(l.length-f,0,v);u[v]=true}for(f=0;f<i.length;f++){v=i[f];h=o[v];p=s[v];if(u[v]||e.deepEqual(h,p)){continue}if(!e.deepEqual(h.source,p.source)||!e.deepEqual(h["source-layer"],p["source-layer"])||!e.deepEqual(h.type,p.type)){n.push({command:ft.removeLayer,args:[v]});d=l[l.lastIndexOf(v)+1];n.push({command:ft.addLayer,args:[p,d]});continue}gt(h.layout,p.layout,n,v,null,ft.setLayoutProperty);gt(h.paint,p.paint,n,v,null,ft.setPaintProperty);if(!e.deepEqual(h.filter,p.filter)){n.push({command:ft.setFilter,args:[v,p.filter]})}if(!e.deepEqual(h.minzoom,p.minzoom)||!e.deepEqual(h.maxzoom,p.maxzoom)){n.push({command:ft.setLayerZoomRange,args:[v,p.minzoom,p.maxzoom]})}for(g in h){if(!h.hasOwnProperty(g)){continue}if(g==="layout"||g==="paint"||g==="filter"||g==="metadata"||g==="minzoom"||g==="maxzoom"){continue}if(g.indexOf("paint.")===0){gt(h[g],p[g],n,v,g.slice(6),ft.setPaintProperty)}else if(!e.deepEqual(h[g],p[g])){n.push({command:ft.setLayerProperty,args:[v,g,p[g]]})}}for(g in p){if(!p.hasOwnProperty(g)||h.hasOwnProperty(g)){continue}if(g==="layout"||g==="paint"||g==="filter"||g==="metadata"||g==="minzoom"||g==="maxzoom"){continue}if(g.indexOf("paint.")===0){gt(h[g],p[g],n,v,g.slice(6),ft.setPaintProperty)}else if(!e.deepEqual(h[g],p[g])){n.push({command:ft.setLayerProperty,args:[v,g,p[g]]})}}}}function bt(t,r){if(!t){return[{command:ft.setStyle,args:[r]}]}var n=[];try{if(!e.deepEqual(t.version,r.version)){return[{command:ft.setStyle,args:[r]}]}if(!e.deepEqual(t.center,r.center)){n.push({command:ft.setCenter,args:[r.center]})}if(!e.deepEqual(t.zoom,r.zoom)){n.push({command:ft.setZoom,args:[r.zoom]})}if(!e.deepEqual(t.bearing,r.bearing)){n.push({command:ft.setBearing,args:[r.bearing]})}if(!e.deepEqual(t.pitch,r.pitch)){n.push({command:ft.setPitch,args:[r.pitch]})}if(!e.deepEqual(t.sprite,r.sprite)){n.push({command:ft.setSprite,args:[r.sprite]})}if(!e.deepEqual(t.glyphs,r.glyphs)){n.push({command:ft.setGlyphs,args:[r.glyphs]})}if(!e.deepEqual(t.transition,r.transition)){n.push({command:ft.setTransition,args:[r.transition]})}if(!e.deepEqual(t.light,r.light)){n.push({command:ft.setLight,args:[r.light]})}var a={};var i=[];dt(t.sources,r.sources,i,a);var o=[];if(t.layers){t.layers.forEach((function(e){if(a[e.source]){n.push({command:ft.removeLayer,args:[e.id]})}else{o.push(e)}}))}n=n.concat(i);xt(o,r.layers,n)}catch(s){console.warn("Unable to compute style diff:",s);n=[{command:ft.setStyle,args:[r]}]}return n}var _t=function e(t,r){this.reset(t,r)};_t.prototype.reset=function e(t,r){this.points=t||[];this._distances=[0];for(var n=1;n<this.points.length;n++){this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1])}this.length=this._distances[this._distances.length-1];this.padding=Math.min(r||0,this.length*.5);this.paddedLength=this.length-this.padding*2};_t.prototype.lerp=function t(r){if(this.points.length===1){return this.points[0]}r=e.clamp(r,0,1);var n=1;var a=this._distances[n];var i=r*this.paddedLength+this.padding;while(a<i&&n<this._distances.length){a=this._distances[++n]}var o=n-1;var s=this._distances[o];var l=a-s;var u=l>0?(i-s)/l:0;return this.points[o].mult(1-u).add(this.points[n].mult(u))};var wt=function e(t,r,n){var a=this.boxCells=[];var i=this.circleCells=[];this.xCellCount=Math.ceil(t/n);this.yCellCount=Math.ceil(r/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++){a.push([]);i.push([])}this.circleKeys=[];this.boxKeys=[];this.bboxes=[];this.circles=[];this.width=t;this.height=r;this.xScale=this.xCellCount/t;this.yScale=this.yCellCount/r;this.boxUid=0;this.circleUid=0};wt.prototype.keysLength=function e(){return this.boxKeys.length+this.circleKeys.length};wt.prototype.insert=function e(t,r,n,a,i){this._forEachCell(r,n,a,i,this._insertBoxCell,this.boxUid++);this.boxKeys.push(t);this.bboxes.push(r);this.bboxes.push(n);this.bboxes.push(a);this.bboxes.push(i)};wt.prototype.insertCircle=function e(t,r,n,a){this._forEachCell(r-a,n-a,r+a,n+a,this._insertCircleCell,this.circleUid++);this.circleKeys.push(t);this.circles.push(r);this.circles.push(n);this.circles.push(a)};wt.prototype._insertBoxCell=function e(t,r,n,a,i,o){this.boxCells[i].push(o)};wt.prototype._insertCircleCell=function e(t,r,n,a,i,o){this.circleCells[i].push(o)};wt.prototype._query=function e(t,r,n,a,i,o){if(n<0||t>this.width||a<0||r>this.height){return i?false:[]}var s=[];if(t<=0&&r<=0&&this.width<=n&&this.height<=a){if(i){return true}for(var l=0;l<this.boxKeys.length;l++){s.push({key:this.boxKeys[l],x1:this.bboxes[l*4],y1:this.bboxes[l*4+1],x2:this.bboxes[l*4+2],y2:this.bboxes[l*4+3]})}for(var u=0;u<this.circleKeys.length;u++){var f=this.circles[u*3];var c=this.circles[u*3+1];var v=this.circles[u*3+2];s.push({key:this.circleKeys[u],x1:f-v,y1:c-v,x2:f+v,y2:c+v})}return o?s.filter(o):s}else{var h={hitTest:i,seenUids:{box:{},circle:{}}};this._forEachCell(t,r,n,a,this._queryCell,s,h,o);return i?s.length>0:s}};wt.prototype._queryCircle=function e(t,r,n,a,i){var o=t-n;var s=t+n;var l=r-n;var u=r+n;if(s<0||o>this.width||u<0||l>this.height){return a?false:[]}var f=[];var c={hitTest:a,circle:{x:t,y:r,radius:n},seenUids:{box:{},circle:{}}};this._forEachCell(o,l,s,u,this._queryCellCircle,f,c,i);return a?f.length>0:f};wt.prototype.query=function e(t,r,n,a,i){return this._query(t,r,n,a,false,i)};wt.prototype.hitTest=function e(t,r,n,a,i){return this._query(t,r,n,a,true,i)};wt.prototype.hitTestCircle=function e(t,r,n,a){return this._queryCircle(t,r,n,true,a)};wt.prototype._queryCell=function e(t,r,n,a,i,o,s,l){var u=s.seenUids;var f=this.boxCells[i];if(f!==null){var c=this.bboxes;for(var v=0,h=f;v<h.length;v+=1){var p=h[v];if(!u.box[p]){u.box[p]=true;var d=p*4;if(t<=c[d+2]&&r<=c[d+3]&&n>=c[d+0]&&a>=c[d+1]&&(!l||l(this.boxKeys[p]))){if(s.hitTest){o.push(true);return true}else{o.push({key:this.boxKeys[p],x1:c[d],y1:c[d+1],x2:c[d+2],y2:c[d+3]})}}}}}var g=this.circleCells[i];if(g!==null){var y=this.circles;for(var m=0,x=g;m<x.length;m+=1){var b=x[m];if(!u.circle[b]){u.circle[b]=true;var _=b*3;if(this._circleAndRectCollide(y[_],y[_+1],y[_+2],t,r,n,a)&&(!l||l(this.circleKeys[b]))){if(s.hitTest){o.push(true);return true}else{var w=y[_];var T=y[_+1];var k=y[_+2];o.push({key:this.circleKeys[b],x1:w-k,y1:T-k,x2:w+k,y2:T+k})}}}}}};wt.prototype._queryCellCircle=function e(t,r,n,a,i,o,s,l){var u=s.circle;var f=s.seenUids;var c=this.boxCells[i];if(c!==null){var v=this.bboxes;for(var h=0,p=c;h<p.length;h+=1){var d=p[h];if(!f.box[d]){f.box[d]=true;var g=d*4;if(this._circleAndRectCollide(u.x,u.y,u.radius,v[g+0],v[g+1],v[g+2],v[g+3])&&(!l||l(this.boxKeys[d]))){o.push(true);return true}}}}var y=this.circleCells[i];if(y!==null){var m=this.circles;for(var x=0,b=y;x<b.length;x+=1){var _=b[x];if(!f.circle[_]){f.circle[_]=true;var w=_*3;if(this._circlesCollide(m[w],m[w+1],m[w+2],u.x,u.y,u.radius)&&(!l||l(this.circleKeys[_]))){o.push(true);return true}}}}};wt.prototype._forEachCell=function e(t,r,n,a,i,o,s,l){var u=this._convertToXCellCoord(t);var f=this._convertToYCellCoord(r);var c=this._convertToXCellCoord(n);var v=this._convertToYCellCoord(a);for(var h=u;h<=c;h++){for(var p=f;p<=v;p++){var d=this.xCellCount*p+h;if(i.call(this,t,r,n,a,d,o,s,l)){return}}}};wt.prototype._convertToXCellCoord=function e(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))};wt.prototype._convertToYCellCoord=function e(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))};wt.prototype._circlesCollide=function e(t,r,n,a,i,o){var s=a-t;var l=i-r;var u=n+o;return u*u>s*s+l*l};wt.prototype._circleAndRectCollide=function e(t,r,n,a,i,o,s){var l=(o-a)/2;var u=Math.abs(t-(a+l));if(u>l+n){return false}var f=(s-i)/2;var c=Math.abs(r-(i+f));if(c>f+n){return false}if(u<=l||c<=f){return true}var v=u-l;var h=c-f;return v*v+h*h<=n*n};function Tt(t,r,n,a,i){var o=e.create();if(r){e.scale(o,o,[1/i,1/i,1]);if(!n){e.rotateZ(o,o,a.angle)}}else{e.multiply(o,a.labelPlaneMatrix,t)}return o}function kt(t,r,n,a,i){if(r){var o=e.clone(t);e.scale(o,o,[i,i,1]);if(!n){e.rotateZ(o,o,-a.angle)}return o}else{return a.glCoordMatrix}}function At(t,r){var n=[t.x,t.y,0,1];Rt(n,n,r);var a=n[3];return{point:new e.Point(n[0]/a,n[1]/a),signedDistanceFromCamera:a}}function Mt(e,t){return.5+.5*(e/t)}function St(e,t){var r=e[0]/e[3];var n=e[1]/e[3];var a=r>=-t[0]&&r<=t[0]&&n>=-t[1]&&n<=t[1];return a}function Et(t,r,n,a,i,o,s,l){var u=a?t.textSizeData:t.iconSizeData;var f=e.evaluateSizeForZoom(u,n.transform.zoom);var c=[256/n.width*2+1,256/n.height*2+1];var v=a?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;v.clear();var h=t.lineVertexArray;var p=a?t.text.placedSymbolArray:t.icon.placedSymbolArray;var d=n.transform.width/n.transform.height;var g=false;for(var y=0;y<p.length;y++){var m=p.get(y);if(m.hidden||m.writingMode===e.WritingMode.vertical&&!g){zt(m.numGlyphs,v);continue}g=false;var x=[m.anchorX,m.anchorY,0,1];e.transformMat4(x,x,r);if(!St(x,c)){zt(m.numGlyphs,v);continue}var b=x[3];var _=Mt(n.transform.cameraToCenterDistance,b);var w=e.evaluateSizeForFeature(u,f,m);var T=s?w/_:w*_;var k=new e.Point(m.anchorX,m.anchorY);var A=At(k,i).point;var M={};var S=It(m,T,false,l,r,i,o,t.glyphOffsetArray,h,v,A,k,M,d);g=S.useVertical;if(S.notEnoughRoom||g||S.needsFlipping&&It(m,T,true,l,r,i,o,t.glyphOffsetArray,h,v,A,k,M,d).notEnoughRoom){zt(m.numGlyphs,v)}}if(a){t.text.dynamicLayoutVertexBuffer.updateData(v)}else{t.icon.dynamicLayoutVertexBuffer.updateData(v)}}function Lt(e,t,r,n,a,i,o,s,l,u,f){var c=s.glyphStartIndex+s.numGlyphs;var v=s.lineStartIndex;var h=s.lineStartIndex+s.lineLength;var p=t.getoffsetX(s.glyphStartIndex);var d=t.getoffsetX(c-1);var g=Ot(e*p,r,n,a,i,o,s.segment,v,h,l,u,f);if(!g){return null}var y=Ot(e*d,r,n,a,i,o,s.segment,v,h,l,u,f);if(!y){return null}return{first:g,last:y}}function Ct(t,r,n,a){if(t===e.WritingMode.horizontal){var i=Math.abs(n.y-r.y);var o=Math.abs(n.x-r.x)*a;if(i>o){return{useVertical:true}}}if(t===e.WritingMode.vertical?r.y<n.y:r.x>n.x){return{needsFlipping:true}}return null}function It(t,r,n,a,i,o,s,l,u,f,c,v,h,p){var d=r/24;var g=t.lineOffsetX*d;var y=t.lineOffsetY*d;var m;if(t.numGlyphs>1){var x=t.glyphStartIndex+t.numGlyphs;var b=t.lineStartIndex;var _=t.lineStartIndex+t.lineLength;var w=Lt(d,l,g,y,n,c,v,t,u,o,h);if(!w){return{notEnoughRoom:true}}var T=At(w.first.point,s).point;var k=At(w.last.point,s).point;if(a&&!n){var A=Ct(t.writingMode,T,k,p);if(A){return A}}m=[w.first];for(var M=t.glyphStartIndex+1;M<x-1;M++){m.push(Ot(d*l.getoffsetX(M),g,y,n,c,v,t.segment,b,_,u,o,h))}m.push(w.last)}else{if(a&&!n){var S=At(v,i).point;var E=t.lineStartIndex+t.segment+1;var L=new e.Point(u.getx(E),u.gety(E));var C=At(L,i);var I=C.signedDistanceFromCamera>0?C.point:Pt(v,L,S,1,i);var P=Ct(t.writingMode,S,I,p);if(P){return P}}var O=Ot(d*l.getoffsetX(t.glyphStartIndex),g,y,n,c,v,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,u,o,h);if(!O){return{notEnoughRoom:true}}m=[O]}for(var D=0,z=m;D<z.length;D+=1){var R=z[D];e.addDynamicAttributes(f,R.point,R.angle)}return{}}function Pt(e,t,r,n,a){var i=At(e.add(e.sub(t)._unit()),a).point;var o=r.sub(i);return r.add(o._mult(n/o.mag()))}function Ot(t,r,n,a,i,o,s,l,u,f,c,v){var h=a?t-r:t+r;var p=h>0?1:-1;var d=0;if(a){p*=-1;d=Math.PI}if(p<0){d+=Math.PI}var g=p>0?l+s:l+s+1;var y=i;var m=i;var x=0;var b=0;var _=Math.abs(h);var w=[];while(x+b<=_){g+=p;if(g<l||g>=u){return null}m=y;w.push(y);y=v[g];if(y===undefined){var T=new e.Point(f.getx(g),f.gety(g));var k=At(T,c);if(k.signedDistanceFromCamera>0){y=v[g]=k.point}else{var A=g-p;var M=x===0?o:new e.Point(f.getx(A),f.gety(A));y=Pt(M,T,m,_-x+1,c)}}x+=b;b=m.dist(y)}var S=(_-x)/b;var E=y.sub(m);var L=E.mult(S)._add(m);L._add(E._unit()._perp()._mult(n*p));var C=d+Math.atan2(y.y-m.y,y.x-m.x);w.push(L);return{point:L,angle:C,path:w}}var Dt=new Float32Array([-Infinity,-Infinity,0,-Infinity,-Infinity,0,-Infinity,-Infinity,0,-Infinity,-Infinity,0]);function zt(e,t){for(var r=0;r<e;r++){var n=t.length;t.resize(n+4);t.float32.set(Dt,n*3)}}function Rt(e,t,r){var n=t[0],a=t[1];e[0]=r[0]*n+r[4]*a+r[12];e[1]=r[1]*n+r[5]*a+r[13];e[3]=r[3]*n+r[7]*a+r[15];return e}var Ft=100;var Bt=function e(t,r,n){if(r===void 0)r=new wt(t.width+2*Ft,t.height+2*Ft,25);if(n===void 0)n=new wt(t.width+2*Ft,t.height+2*Ft,25);this.transform=t;this.grid=r;this.ignoredGrid=n;this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance;this.screenRightBoundary=t.width+Ft;this.screenBottomBoundary=t.height+Ft;this.gridRightBoundary=t.width+2*Ft;this.gridBottomBoundary=t.height+2*Ft};Bt.prototype.placeCollisionBox=function e(t,r,n,a,i){var o=this.projectAndGetPerspectiveRatio(a,t.anchorPointX,t.anchorPointY);var s=n*o.perspectiveRatio;var l=t.x1*s+o.point.x;var u=t.y1*s+o.point.y;var f=t.x2*s+o.point.x;var c=t.y2*s+o.point.y;if(!this.isInsideGrid(l,u,f,c)||!r&&this.grid.hitTest(l,u,f,c,i)){return{box:[],offscreen:false}}return{box:[l,u,f,c],offscreen:this.isOffscreen(l,u,f,c)}};Bt.prototype.placeCollisionCircles=function t(r,n,a,i,o,s,l,u,f,c,v,h,p){var d=[];var g=new e.Point(n.anchorX,n.anchorY);var y=At(g,s);var m=Mt(this.transform.cameraToCenterDistance,y.signedDistanceFromCamera);var x=c?o/m:o*m;var b=x/e.ONE_EM;var _=At(g,l).point;var w={};var T=n.lineOffsetX*b;var k=n.lineOffsetY*b;var A=Lt(b,i,T,k,false,_,g,n,a,l,w);var M=false;var S=false;var E=true;if(A){var L=h*.5*m+p;var C=new e.Point(-Ft,-Ft);var I=new e.Point(this.screenRightBoundary,this.screenBottomBoundary);var P=new _t;var O=A.first;var D=A.last;var z=[];for(var R=O.path.length-1;R>=1;R--){z.push(O.path[R])}for(var F=1;F<D.path.length;F++){z.push(D.path[F])}var B=L*2.5;if(u){var N=z.map((function(e){return At(e,u)}));if(N.some((function(e){return e.signedDistanceFromCamera<=0}))){z=[]}else{z=N.map((function(e){return e.point}))}}var j=[];if(z.length>0){var U=z[0].clone();var V=z[0].clone();for(var H=1;H<z.length;H++){U.x=Math.min(U.x,z[H].x);U.y=Math.min(U.y,z[H].y);V.x=Math.max(V.x,z[H].x);V.y=Math.max(V.y,z[H].y)}if(U.x>=C.x&&V.x<=I.x&&U.y>=C.y&&V.y<=I.y){j=[z]}else if(V.x<C.x||U.x>I.x||V.y<C.y||U.y>I.y){j=[]}else{j=e.clipLine([z],C.x,C.y,I.x,I.y)}}for(var q=0,G=j;q<G.length;q+=1){var Z=G[q];P.reset(Z,L*.25);var Y=0;if(P.length<=.5*L){Y=1}else{Y=Math.ceil(P.paddedLength/B)+1}for(var W=0;W<Y;W++){var X=W/Math.max(Y-1,1);var J=P.lerp(X);var K=J.x+Ft;var $=J.y+Ft;d.push(K,$,L,0);var Q=K-L;var ee=$-L;var te=K+L;var re=$+L;E=E&&this.isOffscreen(Q,ee,te,re);S=S||this.isInsideGrid(Q,ee,te,re);if(!r){if(this.grid.hitTestCircle(K,$,L,v)){M=true;if(!f){return{circles:[],offscreen:false,collisionDetected:M}}}}}}}return{circles:!f&&M||!S?[]:d,offscreen:E,collisionDetected:M}};Bt.prototype.queryRenderedSymbols=function t(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0){return{}}var n=[];var a=Infinity;var i=Infinity;var o=-Infinity;var s=-Infinity;for(var l=0,u=r;l<u.length;l+=1){var f=u[l];var c=new e.Point(f.x+Ft,f.y+Ft);a=Math.min(a,c.x);i=Math.min(i,c.y);o=Math.max(o,c.x);s=Math.max(s,c.y);n.push(c)}var v=this.grid.query(a,i,o,s).concat(this.ignoredGrid.query(a,i,o,s));var h={};var p={};for(var d=0,g=v;d<g.length;d+=1){var y=g[d];var m=y.key;if(h[m.bucketInstanceId]===undefined){h[m.bucketInstanceId]={}}if(h[m.bucketInstanceId][m.featureIndex]){continue}var x=[new e.Point(y.x1,y.y1),new e.Point(y.x2,y.y1),new e.Point(y.x2,y.y2),new e.Point(y.x1,y.y2)];if(!e.polygonIntersectsPolygon(n,x)){continue}h[m.bucketInstanceId][m.featureIndex]=true;if(p[m.bucketInstanceId]===undefined){p[m.bucketInstanceId]=[]}p[m.bucketInstanceId].push(m.featureIndex)}return p};Bt.prototype.insertCollisionBox=function e(t,r,n,a,i){var o=r?this.ignoredGrid:this.grid;var s={bucketInstanceId:n,featureIndex:a,collisionGroupID:i};o.insert(s,t[0],t[1],t[2],t[3])};Bt.prototype.insertCollisionCircles=function e(t,r,n,a,i){var o=r?this.ignoredGrid:this.grid;var s={bucketInstanceId:n,featureIndex:a,collisionGroupID:i};for(var l=0;l<t.length;l+=4){o.insertCircle(s,t[l],t[l+1],t[l+2])}};Bt.prototype.projectAndGetPerspectiveRatio=function t(r,n,a){var i=[n,a,0,1];Rt(i,i,r);var o=new e.Point((i[0]/i[3]+1)/2*this.transform.width+Ft,(-i[1]/i[3]+1)/2*this.transform.height+Ft);return{point:o,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/i[3])}};Bt.prototype.isOffscreen=function e(t,r,n,a){return n<Ft||t>=this.screenRightBoundary||a<Ft||r>this.screenBottomBoundary};Bt.prototype.isInsideGrid=function e(t,r,n,a){return n>=0&&t<this.gridRightBoundary&&a>=0&&r<this.gridBottomBoundary};Bt.prototype.getViewportMatrix=function t(){var r=e.identity([]);e.translate(r,r,[-Ft,-Ft,0]);return r};function Nt(t,r,n){return r*(e.EXTENT/(t.tileSize*Math.pow(2,n-t.tileID.overscaledZ)))}var jt=function e(t,r,n,a){if(t){this.opacity=Math.max(0,Math.min(1,t.opacity+(t.placed?r:-r)))}else{this.opacity=a&&n?1:0}this.placed=n};jt.prototype.isHidden=function e(){return this.opacity===0&&!this.placed};var Ut=function e(t,r,n,a,i){this.text=new jt(t?t.text:null,r,n,i);this.icon=new jt(t?t.icon:null,r,a,i)};Ut.prototype.isHidden=function e(){return this.text.isHidden()&&this.icon.isHidden()};var Vt=function e(t,r,n){this.text=t;this.icon=r;this.skipFade=n};var Ht=function t(){this.invProjMatrix=e.create();this.viewportMatrix=e.create();this.circles=[]};var qt=function e(t,r,n,a,i){this.bucketInstanceId=t;this.featureIndex=r;this.sourceLayerIndex=n;this.bucketIndex=a;this.tileID=i};var Gt=function e(t){this.crossSourceCollisions=t;this.maxGroupID=0;this.collisionGroups={}};Gt.prototype.get=function e(t){if(!this.crossSourceCollisions){if(!this.collisionGroups[t]){var r=++this.maxGroupID;this.collisionGroups[t]={ID:r,predicate:function(e){return e.collisionGroupID===r}}}return this.collisionGroups[t]}else{return{ID:0,predicate:null}}};function Zt(t,r,n,a,i){var o=e.getAnchorAlignment(t);var s=o.horizontalAlign;var l=o.verticalAlign;var u=-(s-.5)*r;var f=-(l-.5)*n;var c=e.evaluateVariableOffset(t,a);return new e.Point(u+c[0]*i,f+c[1]*i)}function Yt(t,r,n,a,i,o){var s=t.x1;var l=t.x2;var u=t.y1;var f=t.y2;var c=t.anchorPointX;var v=t.anchorPointY;var h=new e.Point(r,n);if(a){h._rotate(i?o:-o)}return{x1:s+h.x,y1:u+h.y,x2:l+h.x,y2:f+h.y,anchorPointX:c,anchorPointY:v}}var Wt=function e(t,r,n,a){this.transform=t.clone();this.collisionIndex=new Bt(this.transform);this.placements={};this.opacities={};this.variableOffsets={};this.stale=false;this.commitTime=0;this.fadeDuration=r;this.retainedQueryData={};this.collisionGroups=new Gt(n);this.collisionCircleArrays={};this.prevPlacement=a;if(a){a.prevPlacement=undefined}this.placedOrientations={}};Wt.prototype.getBucketParts=function t(r,n,a,i){var o=a.getBucket(n);var s=a.latestFeatureIndex;if(!o||!s||n.id!==o.layerIds[0]){return}var l=a.collisionBoxArray;var u=o.layers[0].layout;var f=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ);var c=a.tileSize/e.EXTENT;var v=this.transform.calculatePosMatrix(a.tileID.toUnwrapped());var h=u.get("text-pitch-alignment")==="map";var p=u.get("text-rotation-alignment")==="map";var d=Nt(a,1,this.transform.zoom);var g=Tt(v,h,p,this.transform,d);var y=null;if(h){var m=kt(v,h,p,this.transform,d);y=e.multiply([],this.transform.labelPlaneMatrix,m)}this.retainedQueryData[o.bucketInstanceId]=new qt(o.bucketInstanceId,s,o.sourceLayerIndex,o.index,a.tileID);var x={bucket:o,layout:u,posMatrix:v,textLabelPlaneMatrix:g,labelToScreenMatrix:y,scale:f,textPixelRatio:c,holdingForFade:a.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i){for(var b=0,_=o.sortKeyRanges;b<_.length;b+=1){var w=_[b];var T=w.sortKey;var k=w.symbolInstanceStart;var A=w.symbolInstanceEnd;r.push({sortKey:T,symbolInstanceStart:k,symbolInstanceEnd:A,parameters:x})}}else{r.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:x})}};Wt.prototype.attemptAnchorPlacement=function e(t,r,n,a,i,o,s,l,u,f,c,v,h,p,d){var g=[v.textOffset0,v.textOffset1];var y=Zt(t,n,a,g,i);var m=this.collisionIndex.placeCollisionBox(Yt(r,y.x,y.y,o,s,this.transform.angle),c,l,u,f.predicate);if(d){var x=this.collisionIndex.placeCollisionBox(Yt(d,y.x,y.y,o,s,this.transform.angle),c,l,u,f.predicate);if(x.box.length===0){return}}if(m.box.length>0){var b;if(this.prevPlacement&&this.prevPlacement.variableOffsets[v.crossTileID]&&this.prevPlacement.placements[v.crossTileID]&&this.prevPlacement.placements[v.crossTileID].text){b=this.prevPlacement.variableOffsets[v.crossTileID].anchor}this.variableOffsets[v.crossTileID]={textOffset:g,width:n,height:a,anchor:t,textBoxScale:i,prevAnchor:b};this.markUsedJustification(h,t,v,p);if(h.allowVerticalPlacement){this.markUsedOrientation(h,p,v);this.placedOrientations[v.crossTileID]=p}return{shift:y,placedGlyphBoxes:m}}};Wt.prototype.placeLayerBucketPart=function t(r,n,a){var i=this;var o=r.parameters;var s=o.bucket;var l=o.layout;var u=o.posMatrix;var f=o.textLabelPlaneMatrix;var c=o.labelToScreenMatrix;var v=o.textPixelRatio;var h=o.holdingForFade;var p=o.collisionBoxArray;var d=o.partiallyEvaluatedTextSize;var g=o.collisionGroup;var y=l.get("text-optional");var m=l.get("icon-optional");var x=l.get("text-allow-overlap");var b=l.get("icon-allow-overlap");var _=l.get("text-rotation-alignment")==="map";var w=l.get("text-pitch-alignment")==="map";var T=l.get("icon-text-fit")!=="none";var k=l.get("symbol-z-order")==="viewport-y";var A=x&&(b||!s.hasIconData()||m);var M=b&&(x||!s.hasTextData()||y);if(!s.collisionArrays&&p){s.deserializeCollisionBoxes(p)}var S=function(t,r){if(n[t.crossTileID]){return}if(h){i.placements[t.crossTileID]=new Vt(false,false,false);return}var o=false;var p=false;var k=true;var S=null;var E={box:null,offscreen:null};var L={box:null,offscreen:null};var C=null;var I=null;var P=null;var O=0;var D=0;var z=0;if(r.textFeatureIndex){O=r.textFeatureIndex}else if(t.useRuntimeCollisionCircles){O=t.featureIndex}if(r.verticalTextFeatureIndex){D=r.verticalTextFeatureIndex}var R=r.textBox;if(R){var F=function(r){var n=e.WritingMode.horizontal;if(s.allowVerticalPlacement&&!r&&i.prevPlacement){var a=i.prevPlacement.placedOrientations[t.crossTileID];if(a){i.placedOrientations[t.crossTileID]=a;n=a;i.markUsedOrientation(s,n,t)}}return n};var B=function(n,a){if(s.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&r.verticalTextBox){for(var i=0,o=s.writingModes;i<o.length;i+=1){var l=o[i];if(l===e.WritingMode.vertical){E=a();L=E}else{E=n()}if(E&&E.box&&E.box.length){break}}}else{E=n()}};if(!l.get("text-variable-anchor")){var N=function(e,r){var n=i.collisionIndex.placeCollisionBox(e,x,v,u,g.predicate);if(n&&n.box&&n.box.length){i.markUsedOrientation(s,r,t);i.placedOrientations[t.crossTileID]=r}return n};var j=function(){return N(R,e.WritingMode.horizontal)};var U=function(){var n=r.verticalTextBox;if(s.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&n){return N(n,e.WritingMode.vertical)}return{box:null,offscreen:null}};B(j,U);F(E&&E.box&&E.box.length)}else{var V=l.get("text-variable-anchor");if(i.prevPlacement&&i.prevPlacement.variableOffsets[t.crossTileID]){var H=i.prevPlacement.variableOffsets[t.crossTileID];if(V.indexOf(H.anchor)>0){V=V.filter((function(e){return e!==H.anchor}));V.unshift(H.anchor)}}var q=function(e,r,n){var a=e.x2-e.x1;var l=e.y2-e.y1;var f=t.textBoxScale;var c=T&&!b?r:null;var h={box:[],offscreen:false};var p=x?V.length*2:V.length;for(var d=0;d<p;++d){var y=V[d%V.length];var m=d>=V.length;var k=i.attemptAnchorPlacement(y,e,a,l,f,_,w,v,u,g,m,t,s,n,c);if(k){h=k.placedGlyphBoxes;if(h&&h.box&&h.box.length){o=true;S=k.shift;break}}}return h};var G=function(){return q(R,r.iconBox,e.WritingMode.horizontal)};var Z=function(){var n=r.verticalTextBox;var a=E&&E.box&&E.box.length;if(s.allowVerticalPlacement&&!a&&t.numVerticalGlyphVertices>0&&n){return q(n,r.verticalIconBox,e.WritingMode.vertical)}return{box:null,offscreen:null}};B(G,Z);if(E){o=E.box;k=E.offscreen}var Y=F(E&&E.box);if(!o&&i.prevPlacement){var W=i.prevPlacement.variableOffsets[t.crossTileID];if(W){i.variableOffsets[t.crossTileID]=W;i.markUsedJustification(s,W.anchor,t,Y)}}}}C=E;o=C&&C.box&&C.box.length>0;k=C&&C.offscreen;if(t.useRuntimeCollisionCircles){var X=s.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex);var J=e.evaluateSizeForFeature(s.textSizeData,d,X);var K=l.get("text-padding");var $=t.collisionCircleDiameter;I=i.collisionIndex.placeCollisionCircles(x,X,s.lineVertexArray,s.glyphOffsetArray,J,u,f,c,a,w,g.predicate,$,K);o=x||I.circles.length>0&&!I.collisionDetected;k=k&&I.offscreen}if(r.iconFeatureIndex){z=r.iconFeatureIndex}if(r.iconBox){var Q=function(e){var t=T&&S?Yt(e,S.x,S.y,_,w,i.transform.angle):e;return i.collisionIndex.placeCollisionBox(t,b,v,u,g.predicate)};if(L&&L.box&&L.box.length&&r.verticalIconBox){P=Q(r.verticalIconBox);p=P.box.length>0}else{P=Q(r.iconBox);p=P.box.length>0}k=k&&P.offscreen}var ee=y||t.numHorizontalGlyphVertices===0&&t.numVerticalGlyphVertices===0;var te=m||t.numIconVertices===0;if(!ee&&!te){p=o=p&&o}else if(!te){o=p&&o}else if(!ee){p=p&&o}if(o&&C&&C.box){if(L&&L.box&&D){i.collisionIndex.insertCollisionBox(C.box,l.get("text-ignore-placement"),s.bucketInstanceId,D,g.ID)}else{i.collisionIndex.insertCollisionBox(C.box,l.get("text-ignore-placement"),s.bucketInstanceId,O,g.ID)}}if(p&&P){i.collisionIndex.insertCollisionBox(P.box,l.get("icon-ignore-placement"),s.bucketInstanceId,z,g.ID)}if(I){if(o){i.collisionIndex.insertCollisionCircles(I.circles,l.get("text-ignore-placement"),s.bucketInstanceId,O,g.ID)}if(a){var re=s.bucketInstanceId;var ne=i.collisionCircleArrays[re];if(ne===undefined){ne=i.collisionCircleArrays[re]=new Ht}for(var ae=0;ae<I.circles.length;ae+=4){ne.circles.push(I.circles[ae+0]);ne.circles.push(I.circles[ae+1]);ne.circles.push(I.circles[ae+2]);ne.circles.push(I.collisionDetected?1:0)}}}i.placements[t.crossTileID]=new Vt(o||A,p||M,k||s.justReloaded);n[t.crossTileID]=true};if(k){var E=s.getSortedSymbolIndexes(this.transform.angle);for(var L=E.length-1;L>=0;--L){var C=E[L];S(s.symbolInstances.get(C),s.collisionArrays[C])}}else{for(var I=r.symbolInstanceStart;I<r.symbolInstanceEnd;I++){S(s.symbolInstances.get(I),s.collisionArrays[I])}}if(a&&s.bucketInstanceId in this.collisionCircleArrays){var P=this.collisionCircleArrays[s.bucketInstanceId];e.invert(P.invProjMatrix,u);P.viewportMatrix=this.collisionIndex.getViewportMatrix()}s.justReloaded=false};Wt.prototype.markUsedJustification=function t(r,n,a,i){var o={left:a.leftJustifiedTextSymbolIndex,center:a.centerJustifiedTextSymbolIndex,right:a.rightJustifiedTextSymbolIndex};var s;if(i===e.WritingMode.vertical){s=a.verticalPlacedTextSymbolIndex}else{s=o[e.getAnchorJustification(n)]}var l=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex,a.verticalPlacedTextSymbolIndex];for(var u=0,f=l;u<f.length;u+=1){var c=f[u];if(c>=0){if(s>=0&&c!==s){r.text.placedSymbolArray.get(c).crossTileID=0}else{r.text.placedSymbolArray.get(c).crossTileID=a.crossTileID}}}};Wt.prototype.markUsedOrientation=function t(r,n,a){var i=n===e.WritingMode.horizontal||n===e.WritingMode.horizontalOnly?n:0;var o=n===e.WritingMode.vertical?n:0;var s=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex];for(var l=0,u=s;l<u.length;l+=1){var f=u[l];r.text.placedSymbolArray.get(f).placedOrientation=i}if(a.verticalPlacedTextSymbolIndex){r.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).placedOrientation=o}};Wt.prototype.commit=function e(t){this.commitTime=t;this.zoomAtLastRecencyCheck=this.transform.zoom;var r=this.prevPlacement;var n=false;this.prevZoomAdjustment=r?r.zoomAdjustment(this.transform.zoom):0;var a=r?r.symbolFadeChange(t):1;var i=r?r.opacities:{};var o=r?r.variableOffsets:{};var s=r?r.placedOrientations:{};for(var l in this.placements){var u=this.placements[l];var f=i[l];if(f){this.opacities[l]=new Ut(f,a,u.text,u.icon);n=n||u.text!==f.text.placed||u.icon!==f.icon.placed}else{this.opacities[l]=new Ut(null,a,u.text,u.icon,u.skipFade);n=n||u.text||u.icon}}for(var c in i){var v=i[c];if(!this.opacities[c]){var h=new Ut(v,a,false,false);if(!h.isHidden()){this.opacities[c]=h;n=n||v.text.placed||v.icon.placed}}}for(var p in o){if(!this.variableOffsets[p]&&this.opacities[p]&&!this.opacities[p].isHidden()){this.variableOffsets[p]=o[p]}}for(var d in s){if(!this.placedOrientations[d]&&this.opacities[d]&&!this.opacities[d].isHidden()){this.placedOrientations[d]=s[d]}}if(n){this.lastPlacementChangeTime=t}else if(typeof this.lastPlacementChangeTime!=="number"){this.lastPlacementChangeTime=r?r.lastPlacementChangeTime:t}};Wt.prototype.updateLayerOpacities=function e(t,r){var n={};for(var a=0,i=r;a<i.length;a+=1){var o=i[a];var s=o.getBucket(t);if(s&&o.latestFeatureIndex&&t.id===s.layerIds[0]){this.updateBucketOpacities(s,n,o.collisionBoxArray)}}};Wt.prototype.updateBucketOpacities=function t(r,n,a){var i=this;if(r.hasTextData()){r.text.opacityVertexArray.clear()}if(r.hasIconData()){r.icon.opacityVertexArray.clear()}if(r.hasIconCollisionBoxData()){r.iconCollisionBox.collisionVertexArray.clear()}if(r.hasTextCollisionBoxData()){r.textCollisionBox.collisionVertexArray.clear()}var o=r.layers[0].layout;var s=new Ut(null,0,false,false,true);var l=o.get("text-allow-overlap");var u=o.get("icon-allow-overlap");var f=o.get("text-variable-anchor");var c=o.get("text-rotation-alignment")==="map";var v=o.get("text-pitch-alignment")==="map";var h=o.get("icon-text-fit")!=="none";var p=new Ut(null,0,l&&(u||!r.hasIconData()||o.get("icon-optional")),u&&(l||!r.hasTextData()||o.get("text-optional")),true);if(!r.collisionArrays&&a&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())){r.deserializeCollisionBoxes(a)}var d=function(e,t,r){for(var n=0;n<t/4;n++){e.opacityVertexArray.emplaceBack(r)}};var g=function(t){var a=r.symbolInstances.get(t);var o=a.numHorizontalGlyphVertices;var l=a.numVerticalGlyphVertices;var u=a.crossTileID;var g=n[u];var y=i.opacities[u];if(g){y=s}else if(!y){y=p;i.opacities[u]=y}n[u]=true;var m=o>0||l>0;var x=a.numIconVertices>0;var b=i.placedOrientations[a.crossTileID];var _=b===e.WritingMode.vertical;var w=b===e.WritingMode.horizontal||b===e.WritingMode.horizontalOnly;if(m){var T=nr(y.text);var k=_?ar:T;d(r.text,o,k);var A=w?ar:T;d(r.text,l,A);var M=y.text.isHidden();[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(e){if(e>=0){r.text.placedSymbolArray.get(e).hidden=M||_?1:0}}));if(a.verticalPlacedTextSymbolIndex>=0){r.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).hidden=M||w?1:0}var S=i.variableOffsets[a.crossTileID];if(S){i.markUsedJustification(r,S.anchor,a,b)}var E=i.placedOrientations[a.crossTileID];if(E){i.markUsedJustification(r,"left",a,E);i.markUsedOrientation(r,E,a)}}if(x){var L=nr(y.icon);var C=!(h&&a.verticalPlacedIconSymbolIndex&&_);if(a.placedIconSymbolIndex>=0){var I=C?L:ar;d(r.icon,a.numIconVertices,I);r.icon.placedSymbolArray.get(a.placedIconSymbolIndex).hidden=y.icon.isHidden()}if(a.verticalPlacedIconSymbolIndex>=0){var P=!C?L:ar;d(r.icon,a.numVerticalIconVertices,P);r.icon.placedSymbolArray.get(a.verticalPlacedIconSymbolIndex).hidden=y.icon.isHidden()}}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){var O=r.collisionArrays[t];if(O){var D=new e.Point(0,0);if(O.textBox||O.verticalTextBox){var z=true;if(f){var R=i.variableOffsets[u];if(R){D=Zt(R.anchor,R.width,R.height,R.textOffset,R.textBoxScale);if(c){D._rotate(v?i.transform.angle:-i.transform.angle)}}else{z=false}}if(O.textBox){Xt(r.textCollisionBox.collisionVertexArray,y.text.placed,!z||_,D.x,D.y)}if(O.verticalTextBox){Xt(r.textCollisionBox.collisionVertexArray,y.text.placed,!z||w,D.x,D.y)}}var F=Boolean(!w&&O.verticalIconBox);if(O.iconBox){Xt(r.iconCollisionBox.collisionVertexArray,y.icon.placed,F,h?D.x:0,h?D.y:0)}if(O.verticalIconBox){Xt(r.iconCollisionBox.collisionVertexArray,y.icon.placed,!F,h?D.x:0,h?D.y:0)}}}};for(var y=0;y<r.symbolInstances.length;y++)g(y);r.sortFeatures(this.transform.angle);if(this.retainedQueryData[r.bucketInstanceId]){this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder}if(r.hasTextData()&&r.text.opacityVertexBuffer){r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray)}if(r.hasIconData()&&r.icon.opacityVertexBuffer){r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray)}if(r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer){r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray)}if(r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer){r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray)}if(r.bucketInstanceId in this.collisionCircleArrays){var m=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=m.invProjMatrix;r.placementViewportMatrix=m.viewportMatrix;r.collisionCircleArray=m.circles;delete this.collisionCircleArrays[r.bucketInstanceId]}};Wt.prototype.symbolFadeChange=function e(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment};Wt.prototype.zoomAdjustment=function e(t){return Math.max(0,(this.transform.zoom-t)/1.5)};Wt.prototype.hasTransitions=function e(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration};Wt.prototype.stillRecent=function e(t,r){var n=this.zoomAtLastRecencyCheck===r?1-this.zoomAdjustment(r):1;this.zoomAtLastRecencyCheck=r;return this.commitTime+this.fadeDuration*n>t};Wt.prototype.setStale=function e(){this.stale=true};function Xt(e,t,r,n,a){e.emplaceBack(t?1:0,r?1:0,n||0,a||0);e.emplaceBack(t?1:0,r?1:0,n||0,a||0);e.emplaceBack(t?1:0,r?1:0,n||0,a||0);e.emplaceBack(t?1:0,r?1:0,n||0,a||0)}var Jt=Math.pow(2,25);var Kt=Math.pow(2,24);var $t=Math.pow(2,17);var Qt=Math.pow(2,16);var er=Math.pow(2,9);var tr=Math.pow(2,8);var rr=Math.pow(2,1);function nr(e){if(e.opacity===0&&!e.placed){return 0}else if(e.opacity===1&&e.placed){return 4294967295}var t=e.placed?1:0;var r=Math.floor(e.opacity*127);return r*Jt+t*Kt+r*$t+t*Qt+r*er+t*tr+r*rr+t}var ar=0;var ir=function e(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&t.layout.get("symbol-sort-key").constantOr(1)!==undefined;this._currentTileIndex=0;this._currentPartIndex=0;this._seenCrossTileIDs={};this._bucketParts=[]};ir.prototype.continuePlacement=function e(t,r,n,a,i){var o=this._bucketParts;while(this._currentTileIndex<t.length){var s=t[this._currentTileIndex];r.getBucketParts(o,a,s,this._sortAcrossTiles);this._currentTileIndex++;if(i()){return true}}if(this._sortAcrossTiles){this._sortAcrossTiles=false;o.sort((function(e,t){return e.sortKey-t.sortKey}))}while(this._currentPartIndex<o.length){var l=o[this._currentPartIndex];r.placeLayerBucketPart(l,this._seenCrossTileIDs,n);this._currentPartIndex++;if(i()){return true}}return false};var or=function e(t,r,n,a,i,o,s){this.placement=new Wt(t,i,o,s);this._currentPlacementIndex=r.length-1;this._forceFullPlacement=n;this._showCollisionBoxes=a;this._done=false};or.prototype.isDone=function e(){return this._done};or.prototype.continuePlacement=function t(r,n,a){var i=this;var o=e.browser.now();var s=function(){var t=e.browser.now()-o;return i._forceFullPlacement?false:t>2};while(this._currentPlacementIndex>=0){var l=r[this._currentPlacementIndex];var u=n[l];var f=this.placement.collisionIndex.transform.zoom;if(u.type==="symbol"&&(!u.minzoom||u.minzoom<=f)&&(!u.maxzoom||u.maxzoom>f)){if(!this._inProgressLayer){this._inProgressLayer=new ir(u)}var c=this._inProgressLayer.continuePlacement(a[u.source],this.placement,this._showCollisionBoxes,u,s);if(c){return}delete this._inProgressLayer}this._currentPlacementIndex--}this._done=true};or.prototype.commit=function e(t){this.placement.commit(t);return this.placement};var sr=512/e.EXTENT/2;var lr=function e(t,r,n){this.tileID=t;this.indexedSymbolInstances={};this.bucketInstanceId=n;for(var a=0;a<r.length;a++){var i=r.get(a);var o=i.key;if(!this.indexedSymbolInstances[o]){this.indexedSymbolInstances[o]=[]}this.indexedSymbolInstances[o].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,t)})}};lr.prototype.getScaledCoordinates=function t(r,n){var a=n.canonical.z-this.tileID.canonical.z;var i=sr/Math.pow(2,a);return{x:Math.floor((n.canonical.x*e.EXTENT+r.anchorX)*i),y:Math.floor((n.canonical.y*e.EXTENT+r.anchorY)*i)}};lr.prototype.findMatches=function e(t,r,n){var a=this.tileID.canonical.z<r.canonical.z?1:Math.pow(2,this.tileID.canonical.z-r.canonical.z);for(var i=0;i<t.length;i++){var o=t.get(i);if(o.crossTileID){continue}var s=this.indexedSymbolInstances[o.key];if(!s){continue}var l=this.getScaledCoordinates(o,r);for(var u=0,f=s;u<f.length;u+=1){var c=f[u];if(Math.abs(c.coord.x-l.x)<=a&&Math.abs(c.coord.y-l.y)<=a&&!n[c.crossTileID]){n[c.crossTileID]=true;o.crossTileID=c.crossTileID;break}}}};var ur=function e(){this.maxCrossTileID=0};ur.prototype.generate=function e(){return++this.maxCrossTileID};var fr=function e(){this.indexes={};this.usedCrossTileIDs={};this.lng=0};fr.prototype.handleWrapJump=function e(t){var r=Math.round((t-this.lng)/360);if(r!==0){for(var n in this.indexes){var a=this.indexes[n];var i={};for(var o in a){var s=a[o];s.tileID=s.tileID.unwrapTo(s.tileID.wrap+r);i[s.tileID.key]=s}this.indexes[n]=i}}this.lng=t};fr.prototype.addBucket=function e(t,r,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===r.bucketInstanceId){return false}else{this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}}for(var a=0;a<r.symbolInstances.length;a++){var i=r.symbolInstances.get(a);i.crossTileID=0}if(!this.usedCrossTileIDs[t.overscaledZ]){this.usedCrossTileIDs[t.overscaledZ]={}}var o=this.usedCrossTileIDs[t.overscaledZ];for(var s in this.indexes){var l=this.indexes[s];if(Number(s)>t.overscaledZ){for(var u in l){var f=l[u];if(f.tileID.isChildOf(t)){f.findMatches(r.symbolInstances,t,o)}}}else{var c=t.scaledTo(Number(s));var v=l[c.key];if(v){v.findMatches(r.symbolInstances,t,o)}}}for(var h=0;h<r.symbolInstances.length;h++){var p=r.symbolInstances.get(h);if(!p.crossTileID){p.crossTileID=n.generate();o[p.crossTileID]=true}}if(this.indexes[t.overscaledZ]===undefined){this.indexes[t.overscaledZ]={}}this.indexes[t.overscaledZ][t.key]=new lr(t,r.symbolInstances,r.bucketInstanceId);return true};fr.prototype.removeBucketCrossTileIDs=function e(t,r){for(var n in r.indexedSymbolInstances){for(var a=0,i=r.indexedSymbolInstances[n];a<i.length;a+=1){var o=i[a];delete this.usedCrossTileIDs[t][o.crossTileID]}}};fr.prototype.removeStaleBuckets=function e(t){var r=false;for(var n in this.indexes){var a=this.indexes[n];for(var i in a){if(!t[a[i].bucketInstanceId]){this.removeBucketCrossTileIDs(n,a[i]);delete a[i];r=true}}}return r};var cr=function e(){this.layerIndexes={};this.crossTileIDs=new ur;this.maxBucketInstanceId=0;this.bucketsInCurrentPlacement={}};cr.prototype.addLayer=function e(t,r,n){var a=this.layerIndexes[t.id];if(a===undefined){a=this.layerIndexes[t.id]=new fr}var i=false;var o={};a.handleWrapJump(n);for(var s=0,l=r;s<l.length;s+=1){var u=l[s];var f=u.getBucket(t);if(!f||t.id!==f.layerIds[0]){continue}if(!f.bucketInstanceId){f.bucketInstanceId=++this.maxBucketInstanceId}if(a.addBucket(u.tileID,f,this.crossTileIDs)){i=true}o[f.bucketInstanceId]=true}if(a.removeStaleBuckets(o)){i=true}return i};cr.prototype.pruneUnusedLayers=function e(t){var r={};t.forEach((function(e){r[e]=true}));for(var n in this.layerIndexes){if(!r[n]){delete this.layerIndexes[n]}}};var vr=function(t,r){return e.emitValidationErrors(t,r&&r.filter((function(e){return e.identifier!=="source.canvas"})))};var hr=e.pick(ft,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]);var pr=e.pick(ft,["setCenter","setZoom","setBearing","setPitch"]);var dr=ut();var gr=function(t){function r(n,a){var i=this;if(a===void 0)a={};t.call(this);this.map=n;this.dispatcher=new E(at(),this);this.imageManager=new p;this.imageManager.setEventedParent(this);this.glyphManager=new w(n._requestManager,a.localIdeographFontFamily);this.lineAtlas=new S(256,512);this.crossTileSymbolIndex=new cr;this._layers={};this._serializedLayers={};this._order=[];this.sourceCaches={};this.zoomHistory=new e.ZoomHistory;this._loaded=false;this._availableImages=[];this._resetUpdates();this.dispatcher.broadcast("setReferrer",e.getReferrer());var o=this;this._rtlTextPluginCallback=r.registerForPluginStateChange((function(t){var r={pluginStatus:t.pluginStatus,pluginURL:t.pluginURL};o.dispatcher.broadcast("syncRTLPluginState",r,(function(t,r){e.triggerPluginCompletionEvent(t);if(r){var n=r.every((function(e){return e}));if(n){for(var a in o.sourceCaches){o.sourceCaches[a].reload()}}}}))}));this.on("data",(function(e){if(e.dataType!=="source"||e.sourceDataType!=="metadata"){return}var t=i.sourceCaches[e.sourceId];if(!t){return}var r=t.getSource();if(!r||!r.vectorLayerIds){return}for(var n in i._layers){var a=i._layers[n];if(a.source===r.id){i._validateLayer(a)}}}))}if(t)r.__proto__=t;r.prototype=Object.create(t&&t.prototype);r.prototype.constructor=r;r.prototype.loadURL=function t(r,n){var a=this;if(n===void 0)n={};this.fire(new e.Event("dataloading",{dataType:"style"}));var i=typeof n.validate==="boolean"?n.validate:!e.isMapboxURL(r);r=this.map._requestManager.normalizeStyleURL(r,n.accessToken);var o=this.map._requestManager.transformRequest(r,e.ResourceType.Style);this._request=e.getJSON(o,(function(t,r){a._request=null;if(t){a.fire(new e.ErrorEvent(t))}else if(r){a._load(r,i)}}))};r.prototype.loadJSON=function t(r,n){var a=this;if(n===void 0)n={};this.fire(new e.Event("dataloading",{dataType:"style"}));this._request=e.browser.frame((function(){a._request=null;a._load(r,n.validate!==false)}))};r.prototype.loadEmpty=function t(){this.fire(new e.Event("dataloading",{dataType:"style"}));this._load(dr,false)};r.prototype._load=function t(r,n){if(n&&vr(this,e.validateStyle(r))){return}this._loaded=true;this.stylesheet=r;for(var a in r.sources){this.addSource(a,r.sources[a],{validate:false})}if(r.sprite){this._loadSprite(r.sprite)}else{this.imageManager.setLoaded(true)}this.glyphManager.setURL(r.glyphs);var i=lt(this.stylesheet.layers);this._order=i.map((function(e){return e.id}));this._layers={};this._serializedLayers={};for(var o=0,s=i;o<s.length;o+=1){var l=s[o];l=e.createStyleLayer(l);l.setEventedParent(this,{layer:{id:l.id}});this._layers[l.id]=l;this._serializedLayers[l.id]=l.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order));this.light=new M(this.stylesheet.light);this.fire(new e.Event("data",{dataType:"style"}));this.fire(new e.Event("style.load"))};r.prototype._loadSprite=function t(r){var n=this;this._spriteRequest=c(r,this.map._requestManager,(function(t,r){n._spriteRequest=null;if(t){n.fire(new e.ErrorEvent(t))}else if(r){for(var a in r){n.imageManager.addImage(a,r[a])}}n.imageManager.setLoaded(true);n._availableImages=n.imageManager.listImages();n.dispatcher.broadcast("setImages",n._availableImages);n.fire(new e.Event("data",{dataType:"style"}))}))};r.prototype._validateLayer=function t(r){var n=this.sourceCaches[r.source];if(!n){return}var a=r.sourceLayer;if(!a){return}var i=n.getSource();if(i.type==="geojson"||i.vectorLayerIds&&i.vectorLayerIds.indexOf(a)===-1){this.fire(new e.ErrorEvent(new Error('Source layer "'+a+'" '+'does not exist on source "'+i.id+'" '+'as specified by style layer "'+r.id+'"')))}};r.prototype.loaded=function e(){if(!this._loaded){return false}if(Object.keys(this._updatedSources).length){return false}for(var t in this.sourceCaches){if(!this.sourceCaches[t].loaded()){return false}}if(!this.imageManager.isLoaded()){return false}return true};r.prototype._serializeLayers=function e(t){var r=[];for(var n=0,a=t;n<a.length;n+=1){var i=a[n];var o=this._layers[i];if(o.type!=="custom"){r.push(o.serialize())}}return r};r.prototype.hasTransitions=function e(){if(this.light&&this.light.hasTransition()){return true}for(var t in this.sourceCaches){if(this.sourceCaches[t].hasTransition()){return true}}for(var r in this._layers){if(this._layers[r].hasTransition()){return true}}return false};r.prototype._checkLoaded=function e(){if(!this._loaded){throw new Error("Style is not done loading")}};r.prototype.update=function t(r){if(!this._loaded){return}var n=this._changed;if(this._changed){var a=Object.keys(this._updatedLayers);var i=Object.keys(this._removedLayers);if(a.length||i.length){this._updateWorkerLayers(a,i)}for(var o in this._updatedSources){var s=this._updatedSources[o];if(s==="reload"){this._reloadSource(o)}else if(s==="clear"){this._clearSource(o)}}this._updateTilesForChangedImages();for(var l in this._updatedPaintProps){this._layers[l].updateTransitions(r)}this.light.updateTransitions(r);this._resetUpdates()}for(var u in this.sourceCaches){this.sourceCaches[u].used=false}for(var f=0,c=this._order;f<c.length;f+=1){var v=c[f];var h=this._layers[v];h.recalculate(r,this._availableImages);if(!h.isHidden(r.zoom)&&h.source){this.sourceCaches[h.source].used=true}}this.light.recalculate(r);this.z=r.zoom;if(n){this.fire(new e.Event("data",{dataType:"style"}))}};r.prototype._updateTilesForChangedImages=function e(){var t=Object.keys(this._changedImages);if(t.length){for(var r in this.sourceCaches){this.sourceCaches[r].reloadTilesForDependencies(["icons","patterns"],t)}this._changedImages={}}};r.prototype._updateWorkerLayers=function e(t,r){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:r})};r.prototype._resetUpdates=function e(){this._changed=false;this._updatedLayers={};this._removedLayers={};this._updatedSources={};this._updatedPaintProps={};this._changedImages={}};r.prototype.setState=function t(r){var n=this;this._checkLoaded();if(vr(this,e.validateStyle(r))){return false}r=e.clone$1(r);r.layers=lt(r.layers);var a=bt(this.serialize(),r).filter((function(e){return!(e.command in pr)}));if(a.length===0){return false}var i=a.filter((function(e){return!(e.command in hr)}));if(i.length>0){throw new Error("Unimplemented: "+i.map((function(e){return e.command})).join(", ")+".")}a.forEach((function(e){if(e.command==="setTransition"){return}n[e.command].apply(n,e.args)}));this.stylesheet=r;return true};r.prototype.addImage=function t(r,n){if(this.getImage(r)){return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")))}this.imageManager.addImage(r,n);this._availableImages=this.imageManager.listImages();this._changedImages[r]=true;this._changed=true;this.fire(new e.Event("data",{dataType:"style"}))};r.prototype.updateImage=function e(t,r){this.imageManager.updateImage(t,r)};r.prototype.getImage=function e(t){return this.imageManager.getImage(t)};r.prototype.removeImage=function t(r){if(!this.getImage(r)){return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")))}this.imageManager.removeImage(r);this._availableImages=this.imageManager.listImages();this._changedImages[r]=true;this._changed=true;this.fire(new e.Event("data",{dataType:"style"}))};r.prototype.listImages=function e(){this._checkLoaded();return this.imageManager.listImages()};r.prototype.addSource=function t(r,n,a){var i=this;if(a===void 0)a={};this._checkLoaded();if(this.sourceCaches[r]!==undefined){throw new Error("There is already a source with this ID")}if(!n.type){throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(n).join(", ")+".")}var o=["vector","raster","geojson","video","image"];var s=o.indexOf(n.type)>=0;if(s&&this._validate(e.validateStyle.source,"sources."+r,n,null,a)){return}if(this.map&&this.map._collectResourceTiming){n.collectResourceTiming=true}var l=this.sourceCaches[r]=new Je(r,n,this.dispatcher);l.style=this;l.setEventedParent(this,(function(){return{isSourceLoaded:i.loaded(),source:l.serialize(),sourceId:r}}));l.onAdd(this.map);this._changed=true};r.prototype.removeSource=function t(r){this._checkLoaded();if(this.sourceCaches[r]===undefined){throw new Error("There is no source with this ID")}for(var n in this._layers){if(this._layers[n].source===r){return this.fire(new e.ErrorEvent(new Error('Source "'+r+'" cannot be removed while layer "'+n+'" is using it.')))}}var a=this.sourceCaches[r];delete this.sourceCaches[r];delete this._updatedSources[r];a.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:r}));a.setEventedParent(null);a.clearTiles();if(a.onRemove){a.onRemove(this.map)}this._changed=true};r.prototype.setGeoJSONSourceData=function e(t,r){this._checkLoaded();var n=this.sourceCaches[t].getSource();n.setData(r);this._changed=true};r.prototype.getSource=function e(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()};r.prototype.addLayer=function t(r,n,a){if(a===void 0)a={};this._checkLoaded();var i=r.id;if(this.getLayer(i)){this.fire(new e.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map')));return}var o;if(r.type==="custom"){if(vr(this,e.validateCustomStyleLayer(r))){return}o=e.createStyleLayer(r)}else{if(typeof r.source==="object"){this.addSource(i,r.source);r=e.clone$1(r);r=e.extend(r,{source:i})}if(this._validate(e.validateStyle.layer,"layers."+i,r,{arrayIndex:-1},a)){return}o=e.createStyleLayer(r);this._validateLayer(o);o.setEventedParent(this,{layer:{id:i}});this._serializedLayers[o.id]=o.serialize()}var s=n?this._order.indexOf(n):this._order.length;if(n&&s===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));return}this._order.splice(s,0,i);this._layerOrderChanged=true;this._layers[i]=o;if(this._removedLayers[i]&&o.source&&o.type!=="custom"){var l=this._removedLayers[i];delete this._removedLayers[i];if(l.type!==o.type){this._updatedSources[o.source]="clear"}else{this._updatedSources[o.source]="reload";this.sourceCaches[o.source].pause()}}this._updateLayer(o);if(o.onAdd){o.onAdd(this.map)}};r.prototype.moveLayer=function t(r,n){this._checkLoaded();this._changed=true;var a=this._layers[r];if(!a){this.fire(new e.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot be moved.")));return}if(r===n){return}var i=this._order.indexOf(r);this._order.splice(i,1);var o=n?this._order.indexOf(n):this._order.length;if(n&&o===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));return}this._order.splice(o,0,r);this._layerOrderChanged=true};r.prototype.removeLayer=function t(r){this._checkLoaded();var n=this._layers[r];if(!n){this.fire(new e.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot be removed.")));return}n.setEventedParent(null);var a=this._order.indexOf(r);this._order.splice(a,1);this._layerOrderChanged=true;this._changed=true;this._removedLayers[r]=n;delete this._layers[r];delete this._serializedLayers[r];delete this._updatedLayers[r];delete this._updatedPaintProps[r];if(n.onRemove){n.onRemove(this.map)}};r.prototype.getLayer=function e(t){return this._layers[t]};r.prototype.hasLayer=function e(t){return t in this._layers};r.prototype.setLayerZoomRange=function t(r,n,a){this._checkLoaded();var i=this.getLayer(r);if(!i){this.fire(new e.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot have zoom extent.")));return}if(i.minzoom===n&&i.maxzoom===a){return}if(n!=null){i.minzoom=n}if(a!=null){i.maxzoom=a}this._updateLayer(i)};r.prototype.setFilter=function t(r,n,a){if(a===void 0)a={};this._checkLoaded();var i=this.getLayer(r);if(!i){this.fire(new e.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot be filtered.")));return}if(e.deepEqual(i.filter,n)){return}if(n===null||n===undefined){i.filter=undefined;this._updateLayer(i);return}if(this._validate(e.validateStyle.filter,"layers."+i.id+".filter",n,null,a)){return}i.filter=e.clone$1(n);this._updateLayer(i)};r.prototype.getFilter=function t(r){return e.clone$1(this.getLayer(r).filter)};r.prototype.setLayoutProperty=function t(r,n,a,i){if(i===void 0)i={};this._checkLoaded();var o=this.getLayer(r);if(!o){this.fire(new e.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot be styled.")));return}if(e.deepEqual(o.getLayoutProperty(n),a)){return}o.setLayoutProperty(n,a,i);this._updateLayer(o)};r.prototype.getLayoutProperty=function t(r,n){var a=this.getLayer(r);if(!a){this.fire(new e.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style.")));return}return a.getLayoutProperty(n)};r.prototype.setPaintProperty=function t(r,n,a,i){if(i===void 0)i={};this._checkLoaded();var o=this.getLayer(r);if(!o){this.fire(new e.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot be styled.")));return}if(e.deepEqual(o.getPaintProperty(n),a)){return}var s=o.setPaintProperty(n,a,i);if(s){this._updateLayer(o)}this._changed=true;this._updatedPaintProps[r]=true};r.prototype.getPaintProperty=function e(t,r){return this.getLayer(t).getPaintProperty(r)};r.prototype.setFeatureState=function t(r,n){this._checkLoaded();var a=r.source;var i=r.sourceLayer;var o=this.sourceCaches[a];if(o===undefined){this.fire(new e.ErrorEvent(new Error("The source '"+a+"' does not exist in the map's style.")));return}var s=o.getSource().type;if(s==="geojson"&&i){this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(s==="vector"&&!i){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(r.id===undefined){this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")))}o.setFeatureState(i,r.id,n)};r.prototype.removeFeatureState=function t(r,n){this._checkLoaded();var a=r.source;var i=this.sourceCaches[a];if(i===undefined){this.fire(new e.ErrorEvent(new Error("The source '"+a+"' does not exist in the map's style.")));return}var o=i.getSource().type;var s=o==="vector"?r.sourceLayer:undefined;if(o==="vector"&&!s){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(n&&(typeof r.id!=="string"&&typeof r.id!=="number")){this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property.")));return}i.removeFeatureState(s,r.id,n)};r.prototype.getFeatureState=function t(r){this._checkLoaded();var n=r.source;var a=r.sourceLayer;var i=this.sourceCaches[n];if(i===undefined){this.fire(new e.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")));return}var o=i.getSource().type;if(o==="vector"&&!a){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(r.id===undefined){this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")))}return i.getFeatureState(a,r.id)};r.prototype.getTransition=function t(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)};r.prototype.serialize=function t(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,(function(e){return e.serialize()})),layers:this._serializeLayers(this._order)},(function(e){return e!==undefined}))};r.prototype._updateLayer=function e(t){this._updatedLayers[t.id]=true;if(t.source&&!this._updatedSources[t.source]&&this.sourceCaches[t.source].getSource().type!=="raster"){this._updatedSources[t.source]="reload";this.sourceCaches[t.source].pause()}this._changed=true};r.prototype._flattenAndSortRenderedFeatures=function e(t){var r=this;var n=function(e){return r._layers[e].type==="fill-extrusion"};var a={};var i=[];for(var o=this._order.length-1;o>=0;o--){var s=this._order[o];if(n(s)){a[s]=o;for(var l=0,u=t;l<u.length;l+=1){var f=u[l];var c=f[s];if(c){for(var v=0,h=c;v<h.length;v+=1){var p=h[v];i.push(p)}}}}}i.sort((function(e,t){return t.intersectionZ-e.intersectionZ}));var d=[];for(var g=this._order.length-1;g>=0;g--){var y=this._order[g];if(n(y)){for(var m=i.length-1;m>=0;m--){var x=i[m].feature;if(a[x.layer.id]<g){break}d.push(x);i.pop()}}else{for(var b=0,_=t;b<_.length;b+=1){var w=_[b];var T=w[y];if(T){for(var k=0,A=T;k<A.length;k+=1){var M=A[k];d.push(M.feature)}}}}}return d};r.prototype.queryRenderedFeatures=function t(r,n,a){if(n&&n.filter){this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n)}var i={};if(n&&n.layers){if(!Array.isArray(n.layers)){this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array.")));return[]}for(var o=0,s=n.layers;o<s.length;o+=1){var l=s[o];var u=this._layers[l];if(!u){this.fire(new e.ErrorEvent(new Error("The layer '"+l+"' does not exist in the map's style and cannot be queried for features.")));return[]}i[u.source]=true}}var f=[];n.availableImages=this._availableImages;for(var c in this.sourceCaches){if(n.layers&&!i[c]){continue}f.push(Z(this.sourceCaches[c],this._layers,this._serializedLayers,r,n,a))}if(this.placement){f.push(Y(this._layers,this._serializedLayers,this.sourceCaches,r,n,this.placement.collisionIndex,this.placement.retainedQueryData))}return this._flattenAndSortRenderedFeatures(f)};r.prototype.querySourceFeatures=function t(r,n){if(n&&n.filter){this._validate(e.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n)}var a=this.sourceCaches[r];return a?W(a,n):[]};r.prototype.addSourceType=function e(t,n,a){if(r.getSourceType(t)){return a(new Error('A source type called "'+t+'" already exists.'))}r.setSourceType(t,n);if(!n.workerSourceURL){return a(null,null)}this.dispatcher.broadcast("loadWorkerSource",{name:t,url:n.workerSourceURL},a)};r.prototype.getLight=function e(){return this.light.getLight()};r.prototype.setLight=function t(r,n){if(n===void 0)n={};this._checkLoaded();var a=this.light.getLight();var i=false;for(var o in r){if(!e.deepEqual(r[o],a[o])){i=true;break}}if(!i){return}var s={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,n);this.light.updateTransitions(s)};r.prototype._validate=function t(r,n,a,i,o){if(o===void 0)o={};if(o&&o.validate===false){return false}return vr(this,r.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:a,styleSpec:e.styleSpec},i)))};r.prototype._remove=function t(){if(this._request){this._request.cancel();this._request=null}if(this._spriteRequest){this._spriteRequest.cancel();this._spriteRequest=null}e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var r in this._layers){var n=this._layers[r];n.setEventedParent(null)}for(var a in this.sourceCaches){this.sourceCaches[a].clearTiles();this.sourceCaches[a].setEventedParent(null)}this.imageManager.setEventedParent(null);this.setEventedParent(null);this.dispatcher.remove()};r.prototype._clearSource=function e(t){this.sourceCaches[t].clearTiles()};r.prototype._reloadSource=function e(t){this.sourceCaches[t].resume();this.sourceCaches[t].reload()};r.prototype._updateSources=function e(t){for(var r in this.sourceCaches){this.sourceCaches[r].update(t)}};r.prototype._generateCollisionBoxes=function e(){for(var t in this.sourceCaches){this._reloadSource(t)}};r.prototype._updatePlacement=function t(r,n,a,i,o){if(o===void 0)o=false;var s=false;var l=false;var u={};for(var f=0,c=this._order;f<c.length;f+=1){var v=c[f];var h=this._layers[v];if(h.type!=="symbol"){continue}if(!u[h.source]){var p=this.sourceCaches[h.source];u[h.source]=p.getRenderableIds(true).map((function(e){return p.getTileByID(e)})).sort((function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)}))}var d=this.crossTileSymbolIndex.addLayer(h,u[h.source],r.center.lng);s=s||d}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);o=o||this._layerOrderChanged||a===0;if(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),r.zoom)){this.pauseablePlacement=new or(r,this._order,o,n,a,i,this.placement);this._layerOrderChanged=false}if(this.pauseablePlacement.isDone()){this.placement.setStale()}else{this.pauseablePlacement.continuePlacement(this._order,this._layers,u);if(this.pauseablePlacement.isDone()){this.placement=this.pauseablePlacement.commit(e.browser.now());l=true}if(s){this.pauseablePlacement.placement.setStale()}}if(l||s){for(var g=0,y=this._order;g<y.length;g+=1){var m=y[g];var x=this._layers[m];if(x.type!=="symbol"){continue}this.placement.updateLayerOpacities(x,u[x.source])}}var b=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now());return b};r.prototype._releaseSymbolFadeTiles=function e(){for(var t in this.sourceCaches){this.sourceCaches[t].releaseSymbolFadeTiles()}};r.prototype.getImages=function e(t,r,n){this.imageManager.getImages(r.icons,n);this._updateTilesForChangedImages();var a=this.sourceCaches[r.source];if(a){a.setDependencies(r.tileID.key,r.type,r.icons)}};r.prototype.getGlyphs=function e(t,r,n){this.glyphManager.getGlyphs(r.stacks,n)};r.prototype.getResource=function t(r,n,a){return e.makeRequest(n,a)};return r}(e.Evented);gr.getSourceType=V;gr.setSourceType=H;gr.registerForPluginStateChange=e.registerForPluginStateChange;var yr=e.createLayout([{name:"a_pos",type:"Int16",components:2}]);var mr="#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif";var xr="#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}";var br="uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}";var _r="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}";var wr="uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}";var Tr="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}";var kr="varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}";var Ar="uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}";var Mr="void main() {gl_FragColor=vec4(1.0);}";var Sr="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}";var Er="uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}";var Lr="uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}";var Cr="uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}";var Ir="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}";var Pr="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}";var Or="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}";var Dr="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}";var zr="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}";var Rr="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}";var Fr="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}";var Br="#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}";var Nr="attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}";var jr="varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}";var Ur="attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}";var Vr="uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}";var Hr="uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}";var qr="uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}";var Gr="uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}";var Zr="varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}";var Yr="uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}";var Wr="uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}";var Xr="uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}";var Jr="#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}";var Kr="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}";var $r="uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}";var Qr="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}";var en="uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}";var tn="\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}";var rn="uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}";var nn="\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}";var an="uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}";var on="\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}";var sn="uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}";var ln="\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}";var un="uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}";var fn="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}";var cn="uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}";var vn="const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}";var hn="#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}";var pn="const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}";var dn="#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}";var gn="const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}";var yn=Hn(mr,xr);var mn=Hn(br,_r);var xn=Hn(wr,Tr);var bn=Hn(kr,Ar);var _n=Hn(Mr,Sr);var wn=Hn(Er,Lr);var Tn=Hn(Cr,Ir);var kn=Hn(Pr,Or);var An=Hn(Dr,zr);var Mn=Hn(Rr,Fr);var Sn=Hn(Br,Nr);var En=Hn(jr,Ur);var Ln=Hn(Vr,Hr);var Cn=Hn(qr,Gr);var In=Hn(Zr,Yr);var Pn=Hn(Wr,Xr);var On=Hn(Jr,Kr);var Dn=Hn($r,Qr);var zn=Hn(en,tn);var Rn=Hn(rn,nn);var Fn=Hn(an,on);var Bn=Hn(sn,ln);var Nn=Hn(un,fn);var jn=Hn(cn,vn);var Un=Hn(hn,pn);var Vn=Hn(dn,gn);function Hn(e,t){var r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g;var n={};e=e.replace(r,(function(e,t,r,a,i){n[i]=true;if(t==="define"){return"\n#ifndef HAS_UNIFORM_u_"+i+"\nvarying "+r+" "+a+" "+i+";\n#else\nuniform "+r+" "+a+" u_"+i+";\n#endif\n"}else{return"\n#ifdef HAS_UNIFORM_u_"+i+"\n    "+r+" "+a+" "+i+" = u_"+i+";\n#endif\n"}}));t=t.replace(r,(function(e,t,r,a,i){var o=a==="float"?"vec2":"vec4";var s=i.match(/color/)?"color":o;if(n[i]){if(t==="define"){return"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float u_"+i+"_t;\nattribute "+r+" "+o+" a_"+i+";\nvarying "+r+" "+a+" "+i+";\n#else\nuniform "+r+" "+a+" u_"+i+";\n#endif\n"}else{if(s==="vec4"){return"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = a_"+i+";\n#else\n    "+r+" "+a+" "+i+" = u_"+i+";\n#endif\n"}else{return"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = unpack_mix_"+s+"(a_"+i+", u_"+i+"_t);\n#else\n    "+r+" "+a+" "+i+" = u_"+i+";\n#endif\n"}}}else{if(t==="define"){return"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float u_"+i+"_t;\nattribute "+r+" "+o+" a_"+i+";\n#else\nuniform "+r+" "+a+" u_"+i+";\n#endif\n"}else{if(s==="vec4"){return"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+r+" "+a+" "+i+" = a_"+i+";\n#else\n    "+r+" "+a+" "+i+" = u_"+i+";\n#endif\n"}else{return"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+r+" "+a+" "+i+" = unpack_mix_"+s+"(a_"+i+", u_"+i+"_t);\n#else\n    "+r+" "+a+" "+i+" = u_"+i+";\n#endif\n"}}}}));return{fragmentSource:e,vertexSource:t}}var qn=Object.freeze({__proto__:null,prelude:yn,background:mn,backgroundPattern:xn,circle:bn,clippingMask:_n,heatmap:wn,heatmapTexture:Tn,collisionBox:kn,collisionCircle:An,debug:Mn,fill:Sn,fillOutline:En,fillOutlinePattern:Ln,fillPattern:Cn,fillExtrusion:In,fillExtrusionPattern:Pn,hillshadePrepare:On,hillshade:Dn,line:zn,lineGradient:Rn,linePattern:Fn,lineSDF:Bn,raster:Nn,symbolIcon:jn,symbolSDF:Un,symbolTextAndIcon:Vn});var Gn=function e(){this.boundProgram=null;this.boundLayoutVertexBuffer=null;this.boundPaintVertexBuffers=[];this.boundIndexBuffer=null;this.boundVertexOffset=null;this.boundDynamicVertexBuffer=null;this.vao=null};Gn.prototype.bind=function e(t,r,n,a,i,o,s,l){this.context=t;var u=this.boundPaintVertexBuffers.length!==a.length;for(var f=0;!u&&f<a.length;f++){if(this.boundPaintVertexBuffers[f]!==a[f]){u=true}}var c=!this.vao||this.boundProgram!==r||this.boundLayoutVertexBuffer!==n||u||this.boundIndexBuffer!==i||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==s||this.boundDynamicVertexBuffer2!==l;if(!t.extVertexArrayObject||c){this.freshBind(r,n,a,i,o,s,l)}else{t.bindVertexArrayOES.set(this.vao);if(s){s.bind()}if(i&&i.dynamicDraw){i.bind()}if(l){l.bind()}}};Gn.prototype.freshBind=function e(t,r,n,a,i,o,s){var l;var u=t.numAttributes;var f=this.context;var c=f.gl;if(f.extVertexArrayObject){if(this.vao){this.destroy()}this.vao=f.extVertexArrayObject.createVertexArrayOES();f.bindVertexArrayOES.set(this.vao);l=0;this.boundProgram=t;this.boundLayoutVertexBuffer=r;this.boundPaintVertexBuffers=n;this.boundIndexBuffer=a;this.boundVertexOffset=i;this.boundDynamicVertexBuffer=o;this.boundDynamicVertexBuffer2=s}else{l=f.currentNumAttributes||0;for(var v=u;v<l;v++){c.disableVertexAttribArray(v)}}r.enableAttributes(c,t);for(var h=0,p=n;h<p.length;h+=1){var d=p[h];d.enableAttributes(c,t)}if(o){o.enableAttributes(c,t)}if(s){s.enableAttributes(c,t)}r.bind();r.setVertexAttribPointers(c,t,i);for(var g=0,y=n;g<y.length;g+=1){var m=y[g];m.bind();m.setVertexAttribPointers(c,t,i)}if(o){o.bind();o.setVertexAttribPointers(c,t,i)}if(a){a.bind()}if(s){s.bind();s.setVertexAttribPointers(c,t,i)}f.currentNumAttributes=u};Gn.prototype.destroy=function e(){if(this.vao){this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao);this.vao=null}};var Zn=function e(t,r,n,a,i){var o=t.gl;this.program=o.createProgram();var s=n?n.defines():[];if(i){s.push("#define OVERDRAW_INSPECTOR;")}var l=s.concat(yn.fragmentSource,r.fragmentSource).join("\n");var u=s.concat(yn.vertexSource,r.vertexSource).join("\n");var f=o.createShader(o.FRAGMENT_SHADER);if(o.isContextLost()){this.failedToCreate=true;return}o.shaderSource(f,l);o.compileShader(f);o.attachShader(this.program,f);var c=o.createShader(o.VERTEX_SHADER);if(o.isContextLost()){this.failedToCreate=true;return}o.shaderSource(c,u);o.compileShader(c);o.attachShader(this.program,c);var v=n?n.layoutAttributes:[];for(var h=0;h<v.length;h++){o.bindAttribLocation(this.program,h,v[h].name)}o.linkProgram(this.program);o.deleteShader(c);o.deleteShader(f);this.numAttributes=o.getProgramParameter(this.program,o.ACTIVE_ATTRIBUTES);this.attributes={};var p={};for(var d=0;d<this.numAttributes;d++){var g=o.getActiveAttrib(this.program,d);if(g){this.attributes[g.name]=o.getAttribLocation(this.program,g.name)}}var y=o.getProgramParameter(this.program,o.ACTIVE_UNIFORMS);for(var m=0;m<y;m++){var x=o.getActiveUniform(this.program,m);if(x){p[x.name]=o.getUniformLocation(this.program,x.name)}}this.fixedUniforms=a(t,p);this.binderUniforms=n?n.getUniforms(t,p):[]};Zn.prototype.draw=function e(t,r,n,a,i,o,s,l,u,f,c,v,h,p,d,g){var y;var m=t.gl;if(this.failedToCreate){return}t.program.set(this.program);t.setDepthMode(n);t.setStencilMode(a);t.setColorMode(i);t.setCullFace(o);for(var x in this.fixedUniforms){this.fixedUniforms[x].set(s[x])}if(p){p.setUniforms(t,this.binderUniforms,v,{zoom:h})}var b=(y={},y[m.LINES]=2,y[m.TRIANGLES]=3,y[m.LINE_STRIP]=1,y)[r];for(var _=0,w=c.get();_<w.length;_+=1){var T=w[_];var k=T.vaos||(T.vaos={});var A=k[l]||(k[l]=new Gn);A.bind(t,this,u,p?p.getPaintVertexBuffers():[],f,T.vertexOffset,d,g);m.drawElements(r,T.primitiveLength*b,m.UNSIGNED_SHORT,T.primitiveOffset*b*2)}};function Yn(e,t,r){var n=1/Nt(r,1,t.transform.tileZoom);var a=Math.pow(2,r.tileID.overscaledZ);var i=r.tileSize*Math.pow(2,t.transform.tileZoom)/a;var o=i*(r.tileID.canonical.x+r.tileID.wrap*a);var s=i*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[n,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[o>>16,s>>16],u_pixel_coord_lower:[o&65535,s&65535]}}function Wn(e,t,r,n){var a=r.imageManager.getPattern(e.from.toString());var i=r.imageManager.getPattern(e.to.toString());var o=r.imageManager.getPixelSize();var s=o.width;var l=o.height;var u=Math.pow(2,n.tileID.overscaledZ);var f=n.tileSize*Math.pow(2,r.transform.tileZoom)/u;var c=f*(n.tileID.canonical.x+n.tileID.wrap*u);var v=f*n.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:a.tl,u_pattern_br_a:a.br,u_pattern_tl_b:i.tl,u_pattern_br_b:i.br,u_texsize:[s,l],u_mix:t.t,u_pattern_size_a:a.displaySize,u_pattern_size_b:i.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/Nt(n,1,r.transform.tileZoom),u_pixel_coord_upper:[c>>16,v>>16],u_pixel_coord_lower:[c&65535,v&65535]}}var Xn=function(t,r){return{u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_lightpos:new e.Uniform3f(t,r.u_lightpos),u_lightintensity:new e.Uniform1f(t,r.u_lightintensity),u_lightcolor:new e.Uniform3f(t,r.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,r.u_vertical_gradient),u_opacity:new e.Uniform1f(t,r.u_opacity)}};var Jn=function(t,r){return{u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_lightpos:new e.Uniform3f(t,r.u_lightpos),u_lightintensity:new e.Uniform1f(t,r.u_lightintensity),u_lightcolor:new e.Uniform3f(t,r.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,r.u_vertical_gradient),u_height_factor:new e.Uniform1f(t,r.u_height_factor),u_image:new e.Uniform1i(t,r.u_image),u_texsize:new e.Uniform2f(t,r.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,r.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,r.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,r.u_scale),u_fade:new e.Uniform1f(t,r.u_fade),u_opacity:new e.Uniform1f(t,r.u_opacity)}};var Kn=function(t,r,n,a){var i=r.style.light;var o=i.properties.get("position");var s=[o.x,o.y,o.z];var l=e.create$1();if(i.properties.get("anchor")==="viewport"){e.fromRotation(l,-r.transform.angle)}e.transformMat3(s,s,l);var u=i.properties.get("color");return{u_matrix:t,u_lightpos:s,u_lightintensity:i.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+n,u_opacity:a}};var $n=function(t,r,n,a,i,o,s){return e.extend(Kn(t,r,n,a),Yn(o,r,s),{u_height_factor:-Math.pow(2,i.overscaledZ)/s.tileSize/8})};var Qn=function(t,r){return{u_matrix:new e.UniformMatrix4f(t,r.u_matrix)}};var ea=function(t,r){return{u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_image:new e.Uniform1i(t,r.u_image),u_texsize:new e.Uniform2f(t,r.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,r.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,r.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,r.u_scale),u_fade:new e.Uniform1f(t,r.u_fade)}};var ta=function(t,r){return{u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_world:new e.Uniform2f(t,r.u_world)}};var ra=function(t,r){return{u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_world:new e.Uniform2f(t,r.u_world),u_image:new e.Uniform1i(t,r.u_image),u_texsize:new e.Uniform2f(t,r.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,r.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,r.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,r.u_scale),u_fade:new e.Uniform1f(t,r.u_fade)}};var na=function(e){return{u_matrix:e}};var aa=function(t,r,n,a){return e.extend(na(t),Yn(n,r,a))};var ia=function(e,t){return{u_matrix:e,u_world:t}};var oa=function(t,r,n,a,i){return e.extend(aa(t,r,n,a),{u_world:i})};var sa=function(t,r){return{u_camera_to_center_distance:new e.Uniform1f(t,r.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(t,r.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(t,r.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(t,r.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(t,r.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(t,r.u_matrix)}};var la=function(t,r,n,a){var i=t.transform;var o,s;if(a.paint.get("circle-pitch-alignment")==="map"){var l=Nt(n,1,i.zoom);o=true;s=[l,l]}else{o=false;s=i.pixelsToGLUnits}return{u_camera_to_center_distance:i.cameraToCenterDistance,u_scale_with_map:+(a.paint.get("circle-pitch-scale")==="map"),u_matrix:t.translatePosMatrix(r.posMatrix,n,a.paint.get("circle-translate"),a.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:s}};var ua=function(t,r){return{u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_camera_to_center_distance:new e.Uniform1f(t,r.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(t,r.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(t,r.u_extrude_scale),u_overscale_factor:new e.Uniform1f(t,r.u_overscale_factor)}};var fa=function(t,r){return{u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_inv_matrix:new e.UniformMatrix4f(t,r.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(t,r.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(t,r.u_viewport_size)}};var ca=function(e,t,r){var n=Nt(r,1,t.zoom);var a=Math.pow(2,t.zoom-r.tileID.overscaledZ);var i=r.tileID.overscaleFactor();return{u_matrix:e,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:n,u_extrude_scale:[t.pixelsToGLUnits[0]/(n*a),t.pixelsToGLUnits[1]/(n*a)],u_overscale_factor:i}};var va=function(e,t,r){return{u_matrix:e,u_inv_matrix:t,u_camera_to_center_distance:r.cameraToCenterDistance,u_viewport_size:[r.width,r.height]}};var ha=function(t,r){return{u_color:new e.UniformColor(t,r.u_color),u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_overlay:new e.Uniform1i(t,r.u_overlay),u_overlay_scale:new e.Uniform1f(t,r.u_overlay_scale)}};var pa=function(e,t,r){if(r===void 0)r=1;return{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:r}};var da=function(t,r){return{u_matrix:new e.UniformMatrix4f(t,r.u_matrix)}};var ga=function(e){return{u_matrix:e}};var ya=function(t,r){return{u_extrude_scale:new e.Uniform1f(t,r.u_extrude_scale),u_intensity:new e.Uniform1f(t,r.u_intensity),u_matrix:new e.UniformMatrix4f(t,r.u_matrix)}};var ma=function(t,r){return{u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_world:new e.Uniform2f(t,r.u_world),u_image:new e.Uniform1i(t,r.u_image),u_color_ramp:new e.Uniform1i(t,r.u_color_ramp),u_opacity:new e.Uniform1f(t,r.u_opacity)}};var xa=function(e,t,r,n){return{u_matrix:e,u_extrude_scale:Nt(t,1,r),u_intensity:n}};var ba=function(t,r,n,a){var i=e.create();e.ortho(i,0,t.width,t.height,0,0,1);var o=t.context.gl;return{u_matrix:i,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:n,u_color_ramp:a,u_opacity:r.paint.get("heatmap-opacity")}};var _a=function(t,r){return{u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_image:new e.Uniform1i(t,r.u_image),u_latrange:new e.Uniform2f(t,r.u_latrange),u_light:new e.Uniform2f(t,r.u_light),u_shadow:new e.UniformColor(t,r.u_shadow),u_highlight:new e.UniformColor(t,r.u_highlight),u_accent:new e.UniformColor(t,r.u_accent)}};var wa=function(t,r){return{u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_image:new e.Uniform1i(t,r.u_image),u_dimension:new e.Uniform2f(t,r.u_dimension),u_zoom:new e.Uniform1f(t,r.u_zoom),u_maxzoom:new e.Uniform1f(t,r.u_maxzoom),u_unpack:new e.Uniform4f(t,r.u_unpack)}};var Ta=function(e,t,r){var n=r.paint.get("hillshade-shadow-color");var a=r.paint.get("hillshade-highlight-color");var i=r.paint.get("hillshade-accent-color");var o=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);if(r.paint.get("hillshade-illumination-anchor")==="viewport"){o-=e.transform.angle}var s=!e.options.moving;return{u_matrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),s),u_image:0,u_latrange:Aa(e,t.tileID),u_light:[r.paint.get("hillshade-exaggeration"),o],u_shadow:n,u_highlight:a,u_accent:i}};var ka=function(t,r,n){var a=r.stride;var i=e.create();e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1);e.translate(i,i,[0,-e.EXTENT,0]);return{u_matrix:i,u_image:1,u_dimension:[a,a],u_zoom:t.overscaledZ,u_maxzoom:n,u_unpack:r.getUnpackVector()}};function Aa(t,r){var n=Math.pow(2,r.canonical.z);var a=r.canonical.y;return[new e.MercatorCoordinate(0,a/n).toLngLat().lat,new e.MercatorCoordinate(0,(a+1)/n).toLngLat().lat]}var Ma=function(t,r){return{u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_ratio:new e.Uniform1f(t,r.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,r.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,r.u_units_to_pixels)}};var Sa=function(t,r){return{u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_ratio:new e.Uniform1f(t,r.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,r.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,r.u_units_to_pixels),u_image:new e.Uniform1i(t,r.u_image)}};var Ea=function(t,r){return{u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_texsize:new e.Uniform2f(t,r.u_texsize),u_ratio:new e.Uniform1f(t,r.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,r.u_device_pixel_ratio),u_image:new e.Uniform1i(t,r.u_image),u_units_to_pixels:new e.Uniform2f(t,r.u_units_to_pixels),u_scale:new e.Uniform3f(t,r.u_scale),u_fade:new e.Uniform1f(t,r.u_fade)}};var La=function(t,r){return{u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_ratio:new e.Uniform1f(t,r.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,r.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,r.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(t,r.u_patternscale_a),u_patternscale_b:new e.Uniform2f(t,r.u_patternscale_b),u_sdfgamma:new e.Uniform1f(t,r.u_sdfgamma),u_image:new e.Uniform1i(t,r.u_image),u_tex_y_a:new e.Uniform1f(t,r.u_tex_y_a),u_tex_y_b:new e.Uniform1f(t,r.u_tex_y_b),u_mix:new e.Uniform1f(t,r.u_mix)}};var Ca=function(t,r,n){var a=t.transform;return{u_matrix:za(t,r,n),u_ratio:1/Nt(r,1,a.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}};var Ia=function(t,r,n){return e.extend(Ca(t,r,n),{u_image:0})};var Pa=function(t,r,n,a){var i=t.transform;var o=Da(r,i);return{u_matrix:za(t,r,n),u_texsize:r.imageAtlasTexture.size,u_ratio:1/Nt(r,1,i.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[o,a.fromScale,a.toScale],u_fade:a.t,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}};var Oa=function(t,r,n,a,i){var o=t.transform;var s=t.lineAtlas;var l=Da(r,o);var u=n.layout.get("line-cap")==="round";var f=s.getDash(a.from,u);var c=s.getDash(a.to,u);var v=f.width*i.fromScale;var h=c.width*i.toScale;return e.extend(Ca(t,r,n),{u_patternscale_a:[l/v,-f.height/2],u_patternscale_b:[l/h,-c.height/2],u_sdfgamma:s.width/(Math.min(v,h)*256*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:f.y,u_tex_y_b:c.y,u_mix:i.t})};function Da(e,t){return 1/Nt(e,1,t.tileZoom)}function za(e,t,r){return e.translatePosMatrix(t.tileID.posMatrix,t,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}var Ra=function(t,r){return{u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_tl_parent:new e.Uniform2f(t,r.u_tl_parent),u_scale_parent:new e.Uniform1f(t,r.u_scale_parent),u_buffer_scale:new e.Uniform1f(t,r.u_buffer_scale),u_fade_t:new e.Uniform1f(t,r.u_fade_t),u_opacity:new e.Uniform1f(t,r.u_opacity),u_image0:new e.Uniform1i(t,r.u_image0),u_image1:new e.Uniform1i(t,r.u_image1),u_brightness_low:new e.Uniform1f(t,r.u_brightness_low),u_brightness_high:new e.Uniform1f(t,r.u_brightness_high),u_saturation_factor:new e.Uniform1f(t,r.u_saturation_factor),u_contrast_factor:new e.Uniform1f(t,r.u_contrast_factor),u_spin_weights:new e.Uniform3f(t,r.u_spin_weights)}};var Fa=function(e,t,r,n,a){return{u_matrix:e,u_tl_parent:t,u_scale_parent:r,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*a.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:a.paint.get("raster-brightness-min"),u_brightness_high:a.paint.get("raster-brightness-max"),u_saturation_factor:ja(a.paint.get("raster-saturation")),u_contrast_factor:Na(a.paint.get("raster-contrast")),u_spin_weights:Ba(a.paint.get("raster-hue-rotate"))}};function Ba(e){e*=Math.PI/180;var t=Math.sin(e);var r=Math.cos(e);return[(2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3]}function Na(e){return e>0?1/(1-e):1+e}function ja(e){return e>0?1-1/(1.001-e):-e}var Ua=function(t,r){return{u_is_size_zoom_constant:new e.Uniform1i(t,r.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,r.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,r.u_size_t),u_size:new e.Uniform1f(t,r.u_size),u_camera_to_center_distance:new e.Uniform1f(t,r.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,r.u_pitch),u_rotate_symbol:new e.Uniform1i(t,r.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,r.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,r.u_fade_change),u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,r.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,r.u_coord_matrix),u_is_text:new e.Uniform1i(t,r.u_is_text),u_pitch_with_map:new e.Uniform1i(t,r.u_pitch_with_map),u_texsize:new e.Uniform2f(t,r.u_texsize),u_texture:new e.Uniform1i(t,r.u_texture)}};var Va=function(t,r){return{u_is_size_zoom_constant:new e.Uniform1i(t,r.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,r.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,r.u_size_t),u_size:new e.Uniform1f(t,r.u_size),u_camera_to_center_distance:new e.Uniform1f(t,r.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,r.u_pitch),u_rotate_symbol:new e.Uniform1i(t,r.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,r.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,r.u_fade_change),u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,r.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,r.u_coord_matrix),u_is_text:new e.Uniform1i(t,r.u_is_text),u_pitch_with_map:new e.Uniform1i(t,r.u_pitch_with_map),u_texsize:new e.Uniform2f(t,r.u_texsize),u_texture:new e.Uniform1i(t,r.u_texture),u_gamma_scale:new e.Uniform1f(t,r.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,r.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,r.u_is_halo)}};var Ha=function(t,r){return{u_is_size_zoom_constant:new e.Uniform1i(t,r.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,r.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,r.u_size_t),u_size:new e.Uniform1f(t,r.u_size),u_camera_to_center_distance:new e.Uniform1f(t,r.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,r.u_pitch),u_rotate_symbol:new e.Uniform1i(t,r.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,r.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,r.u_fade_change),u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,r.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,r.u_coord_matrix),u_is_text:new e.Uniform1i(t,r.u_is_text),u_pitch_with_map:new e.Uniform1i(t,r.u_pitch_with_map),u_texsize:new e.Uniform2f(t,r.u_texsize),u_texsize_icon:new e.Uniform2f(t,r.u_texsize_icon),u_texture:new e.Uniform1i(t,r.u_texture),u_texture_icon:new e.Uniform1i(t,r.u_texture_icon),u_gamma_scale:new e.Uniform1f(t,r.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,r.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,r.u_is_halo)}};var qa=function(e,t,r,n,a,i,o,s,l,u){var f=a.transform;return{u_is_size_zoom_constant:+(e==="constant"||e==="source"),u_is_size_feature_constant:+(e==="constant"||e==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:f.cameraToCenterDistance,u_pitch:f.pitch/360*2*Math.PI,u_rotate_symbol:+r,u_aspect_ratio:f.width/f.height,u_fade_change:a.options.fadeDuration?a.symbolFadeChange:1,u_matrix:i,u_label_plane_matrix:o,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+n,u_texsize:u,u_texture:0}};var Ga=function(t,r,n,a,i,o,s,l,u,f,c){var v=i.transform;return e.extend(qa(t,r,n,a,i,o,s,l,u,f),{u_gamma_scale:a?Math.cos(v._pitch)*v.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+c})};var Za=function(t,r,n,a,i,o,s,l,u,f){return e.extend(Ga(t,r,n,a,i,o,s,l,true,u,true),{u_texsize_icon:f,u_texture_icon:1})};var Ya=function(t,r){return{u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_opacity:new e.Uniform1f(t,r.u_opacity),u_color:new e.UniformColor(t,r.u_color)}};var Wa=function(t,r){return{u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_opacity:new e.Uniform1f(t,r.u_opacity),u_image:new e.Uniform1i(t,r.u_image),u_pattern_tl_a:new e.Uniform2f(t,r.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(t,r.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(t,r.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(t,r.u_pattern_br_b),u_texsize:new e.Uniform2f(t,r.u_texsize),u_mix:new e.Uniform1f(t,r.u_mix),u_pattern_size_a:new e.Uniform2f(t,r.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(t,r.u_pattern_size_b),u_scale_a:new e.Uniform1f(t,r.u_scale_a),u_scale_b:new e.Uniform1f(t,r.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(t,r.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,r.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(t,r.u_tile_units_to_pixels)}};var Xa=function(e,t,r){return{u_matrix:e,u_opacity:t,u_color:r}};var Ja=function(t,r,n,a,i,o){return e.extend(Wn(a,o,n,i),{u_matrix:t,u_opacity:r})};var Ka={fillExtrusion:Xn,fillExtrusionPattern:Jn,fill:Qn,fillPattern:ea,fillOutline:ta,fillOutlinePattern:ra,circle:sa,collisionBox:ua,collisionCircle:fa,debug:ha,clippingMask:da,heatmap:ya,heatmapTexture:ma,hillshade:_a,hillshadePrepare:wa,line:Ma,lineGradient:Sa,linePattern:Ea,lineSDF:La,raster:Ra,symbolIcon:Ua,symbolSDF:Va,symbolTextAndIcon:Ha,background:Ya,backgroundPattern:Wa};var $a;function Qa(t,r,n,a,i,o,s){var l=t.context;var u=l.gl;var f=t.useProgram("collisionBox");var c=[];var v=0;var h=0;for(var p=0;p<a.length;p++){var d=a[p];var g=r.getTile(d);var y=g.getBucket(n);if(!y){continue}var m=d.posMatrix;if(i[0]!==0||i[1]!==0){m=t.translatePosMatrix(d.posMatrix,g,i,o)}var x=s?y.textCollisionBox:y.iconCollisionBox;var b=y.collisionCircleArray;if(b.length>0){var _=e.create();var w=m;e.mul(_,y.placementInvProjMatrix,t.transform.glCoordMatrix);e.mul(_,_,y.placementViewportMatrix);c.push({circleArray:b,circleOffset:h,transform:w,invTransform:_});v+=b.length/4;h=v}if(!x){continue}f.draw(l,u.LINES,Be.disabled,Ue.disabled,t.colorModeForRenderPass(),We.disabled,ca(m,t.transform,g),n.id,x.layoutVertexBuffer,x.indexBuffer,x.segments,null,t.transform.zoom,null,null,x.collisionVertexBuffer)}if(!s||!c.length){return}var T=t.useProgram("collisionCircle");var k=new e.StructArrayLayout2f1f2i16;k.resize(v*4);k._trim();var A=0;for(var M=0,S=c;M<S.length;M+=1){var E=S[M];for(var L=0;L<E.circleArray.length/4;L++){var C=L*4;var I=E.circleArray[C+0];var P=E.circleArray[C+1];var O=E.circleArray[C+2];var D=E.circleArray[C+3];k.emplace(A++,I,P,O,D,0);k.emplace(A++,I,P,O,D,1);k.emplace(A++,I,P,O,D,2);k.emplace(A++,I,P,O,D,3)}}if(!$a||$a.length<v*2){$a=ei(v)}var z=l.createIndexBuffer($a,true);var R=l.createVertexBuffer(k,e.collisionCircleLayout.members,true);for(var F=0,B=c;F<B.length;F+=1){var N=B[F];var j=va(N.transform,N.invTransform,t.transform);T.draw(l,u.TRIANGLES,Be.disabled,Ue.disabled,t.colorModeForRenderPass(),We.disabled,j,n.id,R,z,e.SegmentVector.simpleSegment(0,N.circleOffset*2,N.circleArray.length,N.circleArray.length/2),null,t.transform.zoom,null,null,null)}R.destroy();z.destroy()}function ei(t){var r=t*2;var n=new e.StructArrayLayout3ui6;n.resize(r);n._trim();for(var a=0;a<r;a++){var i=a*6;n.uint16[i+0]=a*4+0;n.uint16[i+1]=a*4+1;n.uint16[i+2]=a*4+2;n.uint16[i+3]=a*4+2;n.uint16[i+4]=a*4+3;n.uint16[i+5]=a*4+0}return n}var ti=e.identity(new Float32Array(16));function ri(e,t,r,n,a){if(e.renderPass!=="translucent"){return}var i=Ue.disabled;var o=e.colorModeForRenderPass();var s=r.layout.get("text-variable-anchor");if(s){ai(n,e,r,t,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),a)}if(r.paint.get("icon-opacity").constantOr(1)!==0){si(e,t,r,n,false,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),i,o)}if(r.paint.get("text-opacity").constantOr(1)!==0){si(e,t,r,n,true,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),i,o)}if(t.map.showCollisionBoxes){Qa(e,t,r,n,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),true);Qa(e,t,r,n,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),false)}}function ni(t,r,n,a,i,o){var s=e.getAnchorAlignment(t);var l=s.horizontalAlign;var u=s.verticalAlign;var f=-(l-.5)*r;var c=-(u-.5)*n;var v=e.evaluateVariableOffset(t,a);return new e.Point((f/i+v[0])*o,(c/i+v[1])*o)}function ai(t,r,n,a,i,o,s){var l=r.transform;var u=i==="map";var f=o==="map";for(var c=0,v=t;c<v.length;c+=1){var h=v[c];var p=a.getTile(h);var d=p.getBucket(n);if(!d||!d.text||!d.text.segments.get().length){continue}var g=d.textSizeData;var y=e.evaluateSizeForZoom(g,l.zoom);var m=Nt(p,1,r.transform.zoom);var x=Tt(h.posMatrix,f,u,r.transform,m);var b=n.layout.get("icon-text-fit")!=="none"&&d.hasIconData();if(y){var _=Math.pow(2,l.zoom-p.tileID.overscaledZ);ii(d,u,f,s,e.symbolSize,l,x,h.posMatrix,_,y,b)}}}function ii(t,r,n,a,i,o,s,l,u,f,c){var v=t.text.placedSymbolArray;var h=t.text.dynamicLayoutVertexArray;var p=t.icon.dynamicLayoutVertexArray;var d={};h.clear();for(var g=0;g<v.length;g++){var y=v.get(g);var m=t.allowVerticalPlacement&&!y.placedOrientation;var x=!y.hidden&&y.crossTileID&&!m?a[y.crossTileID]:null;if(!x){zt(y.numGlyphs,h)}else{var b=new e.Point(y.anchorX,y.anchorY);var _=At(b,n?l:s);var w=Mt(o.cameraToCenterDistance,_.signedDistanceFromCamera);var T=i.evaluateSizeForFeature(t.textSizeData,f,y)*w/e.ONE_EM;if(n){T*=t.tilePixelRatio/u}var k=x.width;var A=x.height;var M=x.anchor;var S=x.textOffset;var E=x.textBoxScale;var L=ni(M,k,A,S,E,T);var C=n?At(b.add(L),s).point:_.point.add(r?L.rotate(-o.angle):L);var I=t.allowVerticalPlacement&&y.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(var P=0;P<y.numGlyphs;P++){e.addDynamicAttributes(h,C,I)}if(c&&y.associatedIconIndex>=0){d[y.associatedIconIndex]={shiftedAnchor:C,angle:I}}}}if(c){p.clear();var O=t.icon.placedSymbolArray;for(var D=0;D<O.length;D++){var z=O.get(D);if(z.hidden){zt(z.numGlyphs,p)}else{var R=d[D];if(!R){zt(z.numGlyphs,p)}else{for(var F=0;F<z.numGlyphs;F++){e.addDynamicAttributes(p,R.shiftedAnchor,R.angle)}}}}t.icon.dynamicLayoutVertexBuffer.updateData(p)}t.text.dynamicLayoutVertexBuffer.updateData(h)}function oi(e,t,r){if(r.iconsInText&&t){return"symbolTextAndIcon"}else if(e){return"symbolSDF"}else{return"symbolIcon"}}function si(t,r,n,a,i,o,s,l,u,f,c,v){var h=t.context;var p=h.gl;var d=t.transform;var g=l==="map";var y=u==="map";var m=g&&n.layout.get("symbol-placement")!=="point";var x=g&&!y&&!m;var b=n.layout.get("symbol-sort-key").constantOr(1)!==undefined;var _=t.depthModeForSublayer(0,Be.ReadOnly);var w=n.layout.get("text-variable-anchor");var T=[];for(var k=0,A=a;k<A.length;k+=1){var M=A[k];var S=r.getTile(M);var E=S.getBucket(n);if(!E){continue}var L=i?E.text:E.icon;if(!L||!L.segments.get().length){continue}var C=L.programConfigurations.get(n.id);var I=i||E.sdfIcons;var P=i?E.textSizeData:E.iconSizeData;var O=y||d.pitch!==0;var D=t.useProgram(oi(I,i,E),C);var z=e.evaluateSizeForZoom(P,d.zoom);var R=void 0;var F=[0,0];var B=void 0;var N=void 0;var j=null;var U=void 0;if(i){B=S.glyphAtlasTexture;N=p.LINEAR;R=S.glyphAtlasTexture.size;if(E.iconsInText){F=S.imageAtlasTexture.size;j=S.imageAtlasTexture;var V=P.kind==="composite"||P.kind==="camera";U=O||t.options.rotating||t.options.zooming||V?p.LINEAR:p.NEAREST}}else{var H=n.layout.get("icon-size").constantOr(0)!==1||E.iconsNeedLinear;B=S.imageAtlasTexture;N=I||t.options.rotating||t.options.zooming||H||O?p.LINEAR:p.NEAREST;R=S.imageAtlasTexture.size}var q=Nt(S,1,t.transform.zoom);var G=Tt(M.posMatrix,y,g,t.transform,q);var Z=kt(M.posMatrix,y,g,t.transform,q);var Y=w&&E.hasTextData();var W=n.layout.get("icon-text-fit")!=="none"&&Y&&E.hasIconData();if(m){Et(E,M.posMatrix,t,i,G,Z,y,f)}var X=t.translatePosMatrix(M.posMatrix,S,o,s),J=m||i&&w||W?ti:G,K=t.translatePosMatrix(Z,S,o,s,true);var $=I&&n.paint.get(i?"text-halo-width":"icon-halo-width").constantOr(1)!==0;var Q=void 0;if(I){if(!E.iconsInText){Q=Ga(P.kind,z,x,y,t,X,J,K,i,R,true)}else{Q=Za(P.kind,z,x,y,t,X,J,K,R,F)}}else{Q=qa(P.kind,z,x,y,t,X,J,K,i,R)}var ee={program:D,buffers:L,uniformValues:Q,atlasTexture:B,atlasTextureIcon:j,atlasInterpolation:N,atlasInterpolationIcon:U,isSDF:I,hasHalo:$};if(b){var te=L.segments.get();for(var re=0,ne=te;re<ne.length;re+=1){var ae=ne[re];T.push({segments:new e.SegmentVector([ae]),sortKey:ae.sortKey,state:ee})}}else{T.push({segments:L.segments,sortKey:0,state:ee})}}if(b){T.sort((function(e,t){return e.sortKey-t.sortKey}))}for(var ie=0,oe=T;ie<oe.length;ie+=1){var se=oe[ie];var le=se.state;h.activeTexture.set(p.TEXTURE0);le.atlasTexture.bind(le.atlasInterpolation,p.CLAMP_TO_EDGE);if(le.atlasTextureIcon){h.activeTexture.set(p.TEXTURE1);if(le.atlasTextureIcon){le.atlasTextureIcon.bind(le.atlasInterpolationIcon,p.CLAMP_TO_EDGE)}}if(le.isSDF){var ue=le.uniformValues;if(le.hasHalo){ue["u_is_halo"]=1;li(le.buffers,se.segments,n,t,le.program,_,c,v,ue)}ue["u_is_halo"]=0}li(le.buffers,se.segments,n,t,le.program,_,c,v,le.uniformValues)}}function li(e,t,r,n,a,i,o,s,l){var u=n.context;var f=u.gl;a.draw(u,f.TRIANGLES,i,o,s,We.disabled,l,r.id,e.layoutVertexBuffer,e.indexBuffer,t,r.paint,n.transform.zoom,e.programConfigurations.get(r.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function ui(t,r,n,a){if(t.renderPass!=="translucent"){return}var i=n.paint.get("circle-opacity");var o=n.paint.get("circle-stroke-width");var s=n.paint.get("circle-stroke-opacity");var l=n.layout.get("circle-sort-key").constantOr(1)!==undefined;if(i.constantOr(1)===0&&(o.constantOr(1)===0||s.constantOr(1)===0)){return}var u=t.context;var f=u.gl;var c=t.depthModeForSublayer(0,Be.ReadOnly);var v=Ue.disabled;var h=t.colorModeForRenderPass();var p=[];for(var d=0;d<a.length;d++){var g=a[d];var y=r.getTile(g);var m=y.getBucket(n);if(!m){continue}var x=m.programConfigurations.get(n.id);var b=t.useProgram("circle",x);var _=m.layoutVertexBuffer;var w=m.indexBuffer;var T=la(t,g,y,n);var k={programConfiguration:x,program:b,layoutVertexBuffer:_,indexBuffer:w,uniformValues:T};if(l){var A=m.segments.get();for(var M=0,S=A;M<S.length;M+=1){var E=S[M];p.push({segments:new e.SegmentVector([E]),sortKey:E.sortKey,state:k})}}else{p.push({segments:m.segments,sortKey:0,state:k})}}if(l){p.sort((function(e,t){return e.sortKey-t.sortKey}))}for(var L=0,C=p;L<C.length;L+=1){var I=C[L];var P=I.state;var O=P.programConfiguration;var D=P.program;var z=P.layoutVertexBuffer;var R=P.indexBuffer;var F=P.uniformValues;var B=I.segments;D.draw(u,f.TRIANGLES,c,v,h,We.disabled,F,n.id,z,R,B,n.paint,t.transform.zoom,O)}}function fi(t,r,n,a){if(n.paint.get("heatmap-opacity")===0){return}if(t.renderPass==="offscreen"){var i=t.context;var o=i.gl;var s=Ue.disabled;var l=new Ge([o.ONE,o.ONE],e.Color.transparent,[true,true,true,true]);ci(i,t,n);i.clear({color:e.Color.transparent});for(var u=0;u<a.length;u++){var f=a[u];if(r.hasRenderableParent(f)){continue}var c=r.getTile(f);var v=c.getBucket(n);if(!v){continue}var h=v.programConfigurations.get(n.id);var p=t.useProgram("heatmap",h);var d=t.transform;var g=d.zoom;p.draw(i,o.TRIANGLES,Be.disabled,s,l,We.disabled,xa(f.posMatrix,c,g,n.paint.get("heatmap-intensity")),n.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,n.paint,t.transform.zoom,h)}i.viewport.set([0,0,t.width,t.height])}else if(t.renderPass==="translucent"){t.context.setColorMode(t.colorModeForRenderPass());hi(t,n)}}function ci(e,t,r){var n=e.gl;e.activeTexture.set(n.TEXTURE1);e.viewport.set([0,0,t.width/4,t.height/4]);var a=r.heatmapFbo;if(!a){var i=n.createTexture();n.bindTexture(n.TEXTURE_2D,i);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR);a=r.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,false);vi(e,t,i,a)}else{n.bindTexture(n.TEXTURE_2D,a.colorAttachment.get());e.bindFramebuffer.set(a.framebuffer)}}function vi(e,t,r,n){var a=e.gl;var i=e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE;a.texImage2D(a.TEXTURE_2D,0,a.RGBA,t.width/4,t.height/4,0,a.RGBA,i,null);n.colorAttachment.set(r)}function hi(t,r){var n=t.context;var a=n.gl;var i=r.heatmapFbo;if(!i){return}n.activeTexture.set(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,i.colorAttachment.get());n.activeTexture.set(a.TEXTURE1);var o=r.colorRampTexture;if(!o){o=r.colorRampTexture=new e.Texture(n,r.colorRamp,a.RGBA)}o.bind(a.LINEAR,a.CLAMP_TO_EDGE);t.useProgram("heatmapTexture").draw(n,a.TRIANGLES,Be.disabled,Ue.disabled,t.colorModeForRenderPass(),We.disabled,ba(t,r,0,1),r.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,r.paint,t.transform.zoom)}function pi(t,r,n,a){if(t.renderPass!=="translucent"){return}var i=n.paint.get("line-opacity");var o=n.paint.get("line-width");if(i.constantOr(1)===0||o.constantOr(1)===0){return}var s=t.depthModeForSublayer(0,Be.ReadOnly);var l=t.colorModeForRenderPass();var u=n.paint.get("line-dasharray");var f=n.paint.get("line-pattern");var c=f.constantOr(1);var v=n.paint.get("line-gradient");var h=n.getCrossfadeParameters();var p=c?"linePattern":u?"lineSDF":v?"lineGradient":"line";var d=t.context;var g=d.gl;var y=true;if(v){d.activeTexture.set(g.TEXTURE0);var m=n.gradientTexture;if(!n.gradient){return}if(!m){m=n.gradientTexture=new e.Texture(d,n.gradient,g.RGBA)}m.bind(g.LINEAR,g.CLAMP_TO_EDGE)}for(var x=0,b=a;x<b.length;x+=1){var _=b[x];var w=r.getTile(_);if(c&&!w.patternsLoaded()){continue}var T=w.getBucket(n);if(!T){continue}var k=T.programConfigurations.get(n.id);var A=t.context.program.get();var M=t.useProgram(p,k);var S=y||M.program!==A;var E=f.constantOr(null);if(E&&w.imageAtlas){var L=w.imageAtlas;var C=L.patternPositions[E.to.toString()];var I=L.patternPositions[E.from.toString()];if(C&&I){k.setConstantPatternPositions(C,I)}}var P=c?Pa(t,w,n,h):u?Oa(t,w,n,u,h):v?Ia(t,w,n):Ca(t,w,n);if(c){d.activeTexture.set(g.TEXTURE0);w.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE);k.updatePaintBuffers(h)}else if(u&&(S||t.lineAtlas.dirty)){d.activeTexture.set(g.TEXTURE0);t.lineAtlas.bind(d)}M.draw(d,g.TRIANGLES,s,t.stencilModeForClipping(_),l,We.disabled,P,n.id,T.layoutVertexBuffer,T.indexBuffer,T.segments,n.paint,t.transform.zoom,k);y=false}}function di(t,r,n,a){var i=n.paint.get("fill-color");var o=n.paint.get("fill-opacity");if(o.constantOr(1)===0){return}var s=t.colorModeForRenderPass();var l=n.paint.get("fill-pattern");var u=t.opaquePassEnabledForLayer()&&(!l.constantOr(1)&&i.constantOr(e.Color.transparent).a===1&&o.constantOr(0)===1)?"opaque":"translucent";if(t.renderPass===u){var f=t.depthModeForSublayer(1,t.renderPass==="opaque"?Be.ReadWrite:Be.ReadOnly);gi(t,r,n,a,f,s,false)}if(t.renderPass==="translucent"&&n.paint.get("fill-antialias")){var c=t.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,Be.ReadOnly);gi(t,r,n,a,c,s,true)}}function gi(e,t,r,n,a,i,o){var s=e.context.gl;var l=r.paint.get("fill-pattern");var u=l&&l.constantOr(1);var f=r.getCrossfadeParameters();var c,v,h,p,d;if(!o){v=u?"fillPattern":"fill";c=s.TRIANGLES}else{v=u&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline";c=s.LINES}for(var g=0,y=n;g<y.length;g+=1){var m=y[g];var x=t.getTile(m);if(u&&!x.patternsLoaded()){continue}var b=x.getBucket(r);if(!b){continue}var _=b.programConfigurations.get(r.id);var w=e.useProgram(v,_);if(u){e.context.activeTexture.set(s.TEXTURE0);x.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE);_.updatePaintBuffers(f)}var T=l.constantOr(null);if(T&&x.imageAtlas){var k=x.imageAtlas;var A=k.patternPositions[T.to.toString()];var M=k.patternPositions[T.from.toString()];if(A&&M){_.setConstantPatternPositions(A,M)}}var S=e.translatePosMatrix(m.posMatrix,x,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(!o){p=b.indexBuffer;d=b.segments;h=u?aa(S,e,f,x):na(S)}else{p=b.indexBuffer2;d=b.segments2;var E=[s.drawingBufferWidth,s.drawingBufferHeight];h=v==="fillOutlinePattern"&&u?oa(S,e,f,x,E):ia(S,E)}w.draw(e.context,c,a,e.stencilModeForClipping(m),i,We.disabled,h,r.id,b.layoutVertexBuffer,p,d,r.paint,e.transform.zoom,_)}}function yi(e,t,r,n){var a=r.paint.get("fill-extrusion-opacity");if(a===0){return}if(e.renderPass==="translucent"){var i=new Be(e.context.gl.LEQUAL,Be.ReadWrite,e.depthRangeFor3D);if(a===1&&!r.paint.get("fill-extrusion-pattern").constantOr(1)){var o=e.colorModeForRenderPass();mi(e,t,r,n,i,Ue.disabled,o)}else{mi(e,t,r,n,i,Ue.disabled,Ge.disabled);mi(e,t,r,n,i,e.stencilModeFor3D(),e.colorModeForRenderPass())}}}function mi(e,t,r,n,a,i,o){var s=e.context;var l=s.gl;var u=r.paint.get("fill-extrusion-pattern");var f=u.constantOr(1);var c=r.getCrossfadeParameters();var v=r.paint.get("fill-extrusion-opacity");for(var h=0,p=n;h<p.length;h+=1){var d=p[h];var g=t.getTile(d);var y=g.getBucket(r);if(!y){continue}var m=y.programConfigurations.get(r.id);var x=e.useProgram(f?"fillExtrusionPattern":"fillExtrusion",m);if(f){e.context.activeTexture.set(l.TEXTURE0);g.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE);m.updatePaintBuffers(c)}var b=u.constantOr(null);if(b&&g.imageAtlas){var _=g.imageAtlas;var w=_.patternPositions[b.to.toString()];var T=_.patternPositions[b.from.toString()];if(w&&T){m.setConstantPatternPositions(w,T)}}var k=e.translatePosMatrix(d.posMatrix,g,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor"));var A=r.paint.get("fill-extrusion-vertical-gradient");var M=f?$n(k,e,A,v,d,c,g):Kn(k,e,A,v);x.draw(s,s.gl.TRIANGLES,a,i,o,We.backCCW,M,r.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,r.paint,e.transform.zoom,m)}}function xi(e,t,r,n){if(e.renderPass!=="offscreen"&&e.renderPass!=="translucent"){return}var a=e.context;var i=t.getSource().maxzoom;var o=e.depthModeForSublayer(0,Be.ReadOnly);var s=e.colorModeForRenderPass();var l=e.renderPass==="translucent"?e.stencilConfigForOverlap(n):[{},n];var u=l[0];var f=l[1];for(var c=0,v=f;c<v.length;c+=1){var h=v[c];var p=t.getTile(h);if(p.needsHillshadePrepare&&e.renderPass==="offscreen"){_i(e,p,r,i,o,Ue.disabled,s)}else if(e.renderPass==="translucent"){bi(e,p,r,o,u[h.overscaledZ],s)}}a.viewport.set([0,0,e.width,e.height])}function bi(e,t,r,n,a,i){var o=e.context;var s=o.gl;var l=t.fbo;if(!l){return}var u=e.useProgram("hillshade");o.activeTexture.set(s.TEXTURE0);s.bindTexture(s.TEXTURE_2D,l.colorAttachment.get());var f=Ta(e,t,r);u.draw(o,s.TRIANGLES,n,a,i,We.disabled,f,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}function _i(t,r,n,a,i,o,s){var l=t.context;var u=l.gl;var f=r.dem;if(f&&f.data){var c=f.dim;var v=f.stride;var h=f.getPixels();l.activeTexture.set(u.TEXTURE1);l.pixelStoreUnpackPremultiplyAlpha.set(false);r.demTexture=r.demTexture||t.getTileTexture(v);if(r.demTexture){var p=r.demTexture;p.update(h,{premultiply:false});p.bind(u.NEAREST,u.CLAMP_TO_EDGE)}else{r.demTexture=new e.Texture(l,h,u.RGBA,{premultiply:false});r.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE)}l.activeTexture.set(u.TEXTURE0);var d=r.fbo;if(!d){var g=new e.Texture(l,{width:c,height:c,data:null},u.RGBA);g.bind(u.LINEAR,u.CLAMP_TO_EDGE);d=r.fbo=l.createFramebuffer(c,c,true);d.colorAttachment.set(g.texture)}l.bindFramebuffer.set(d.framebuffer);l.viewport.set([0,0,c,c]);t.useProgram("hillshadePrepare").draw(l,u.TRIANGLES,i,o,s,We.disabled,ka(r.tileID,f,a),n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments);r.needsHillshadePrepare=false}}function wi(e,t,r,n){if(e.renderPass!=="translucent"){return}if(r.paint.get("raster-opacity")===0){return}if(!n.length){return}var a=e.context;var i=a.gl;var o=t.getSource();var s=e.useProgram("raster");var l=e.colorModeForRenderPass();var u=o instanceof R?[{},n]:e.stencilConfigForOverlap(n);var f=u[0];var c=u[1];var v=c[c.length-1].overscaledZ;var h=!e.options.moving;for(var p=0,d=c;p<d.length;p+=1){var g=d[p];var y=e.depthModeForSublayer(g.overscaledZ-v,r.paint.get("raster-opacity")===1?Be.ReadWrite:Be.ReadOnly,i.LESS);var m=t.getTile(g);var x=e.transform.calculatePosMatrix(g.toUnwrapped(),h);m.registerFadeDuration(r.paint.get("raster-fade-duration"));var b=t.findLoadedParent(g,0),_=Ti(m,b,t,r,e.transform);var w=void 0,T=void 0;var k=r.paint.get("raster-resampling")==="nearest"?i.NEAREST:i.LINEAR;a.activeTexture.set(i.TEXTURE0);m.texture.bind(k,i.CLAMP_TO_EDGE,i.LINEAR_MIPMAP_NEAREST);a.activeTexture.set(i.TEXTURE1);if(b){b.texture.bind(k,i.CLAMP_TO_EDGE,i.LINEAR_MIPMAP_NEAREST);w=Math.pow(2,b.tileID.overscaledZ-m.tileID.overscaledZ);T=[m.tileID.canonical.x*w%1,m.tileID.canonical.y*w%1]}else{m.texture.bind(k,i.CLAMP_TO_EDGE,i.LINEAR_MIPMAP_NEAREST)}var A=Fa(x,T||[0,0],w||1,_,r);if(o instanceof R){s.draw(a,i.TRIANGLES,y,Ue.disabled,l,We.disabled,A,r.id,o.boundsBuffer,e.quadTriangleIndexBuffer,o.boundsSegments)}else{s.draw(a,i.TRIANGLES,y,f[g.overscaledZ],l,We.disabled,A,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}}function Ti(t,r,n,a,i){var o=a.paint.get("raster-fade-duration");if(o>0){var s=e.browser.now();var l=(s-t.timeAdded)/o;var u=r?(s-r.timeAdded)/o:-1;var f=n.getSource();var c=i.coveringZoomLevel({tileSize:f.tileSize,roundZoom:f.roundZoom});var v=!r||Math.abs(r.tileID.overscaledZ-c)>Math.abs(t.tileID.overscaledZ-c);var h=v&&t.refreshedUponExpiration?1:e.clamp(v?l:1-u,0,1);if(t.refreshedUponExpiration&&l>=1){t.refreshedUponExpiration=false}if(r){return{opacity:1,mix:1-h}}else{return{opacity:h,mix:0}}}else{return{opacity:1,mix:0}}}function ki(e,t,r){var n=r.paint.get("background-color");var a=r.paint.get("background-opacity");if(a===0){return}var i=e.context;var o=i.gl;var s=e.transform;var l=s.tileSize;var u=r.paint.get("background-pattern");if(e.isPatternMissing(u)){return}var f=!u&&n.a===1&&a===1&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==f){return}var c=Ue.disabled;var v=e.depthModeForSublayer(0,f==="opaque"?Be.ReadWrite:Be.ReadOnly);var h=e.colorModeForRenderPass();var p=e.useProgram(u?"backgroundPattern":"background");var d=s.coveringTiles({tileSize:l});if(u){i.activeTexture.set(o.TEXTURE0);e.imageManager.bind(e.context)}var g=r.getCrossfadeParameters();for(var y=0,m=d;y<m.length;y+=1){var x=m[y];var b=e.transform.calculatePosMatrix(x.toUnwrapped());var _=u?Ja(b,a,e,u,{tileID:x,tileSize:l},g):Xa(b,a,n);p.draw(i,o.TRIANGLES,v,c,h,We.disabled,_,r.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}}var Ai=new e.Color(1,0,0,1);var Mi=new e.Color(0,1,0,1);var Si=new e.Color(0,0,1,1);var Ei=new e.Color(1,0,1,1);var Li=new e.Color(0,1,1,1);function Ci(e){var t=e.transform.padding;var r=3;Pi(e,e.transform.height-(t.top||0),r,Ai);Pi(e,t.bottom||0,r,Mi);Oi(e,t.left||0,r,Si);Oi(e,e.transform.width-(t.right||0),r,Ei);var n=e.transform.centerPoint;Ii(e,n.x,e.transform.height-n.y,Li)}function Ii(e,t,r,n){var a=20;var i=2;Di(e,t-i/2,r-a/2,i,a,n);Di(e,t-a/2,r-i/2,a,i,n)}function Pi(e,t,r,n){Di(e,0,t+r/2,e.transform.width,r,n)}function Oi(e,t,r,n){Di(e,t-r/2,0,r,e.transform.height,n)}function Di(t,r,n,a,i,o){var s=t.context;var l=s.gl;l.enable(l.SCISSOR_TEST);l.scissor(r*e.browser.devicePixelRatio,n*e.browser.devicePixelRatio,a*e.browser.devicePixelRatio,i*e.browser.devicePixelRatio);s.clear({color:o});l.disable(l.SCISSOR_TEST)}function zi(e,t,r){for(var n=0;n<r.length;n++){Ri(e,t,r[n])}}function Ri(t,r,n){var a=t.context;var i=a.gl;var o=n.posMatrix;var s=t.useProgram("debug");var l=Be.disabled;var u=Ue.disabled;var f=t.colorModeForRenderPass();var c="$debug";a.activeTexture.set(i.TEXTURE0);t.emptyTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE);s.draw(a,i.LINE_STRIP,l,u,f,We.disabled,pa(o,e.Color.red),c,t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments);var v=r.getTileByID(n.key).latestRawTileData;var h=v&&v.byteLength||0;var p=Math.floor(h/1024);var d=r.getTile(n).tileSize;var g=512/Math.min(d,512)*(n.overscaledZ/t.transform.zoom)*.5;var y=n.canonical.toString();if(n.overscaledZ!==n.canonical.z){y+=" => "+n.overscaledZ}var m=y+" "+p+"kb";Fi(t,m);s.draw(a,i.TRIANGLES,l,u,Ge.alphaBlended,We.disabled,pa(o,e.Color.transparent,g),c,t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments)}function Fi(e,t){e.initDebugOverlayCanvas();var r=e.debugOverlayCanvas;var n=e.context.gl;var a=e.debugOverlayCanvas.getContext("2d");a.clearRect(0,0,r.width,r.height);a.shadowColor="white";a.shadowBlur=2;a.lineWidth=1.5;a.strokeStyle="white";a.textBaseline="top";a.font="bold "+36+"px Open Sans, sans-serif";a.fillText(t,5,5);a.strokeText(t,5,5);e.debugOverlayTexture.update(r);e.debugOverlayTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}function Bi(e,t,r){var n=e.context;var a=r.implementation;if(e.renderPass==="offscreen"){var i=a.prerender;if(i){e.setCustomLayerDefaults();n.setColorMode(e.colorModeForRenderPass());i.call(a,n.gl,e.transform.customLayerMatrix());n.setDirty();e.setBaseState()}}else if(e.renderPass==="translucent"){e.setCustomLayerDefaults();n.setColorMode(e.colorModeForRenderPass());n.setStencilMode(Ue.disabled);var o=a.renderingMode==="3d"?new Be(e.context.gl.LEQUAL,Be.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,Be.ReadOnly);n.setDepthMode(o);a.render(n.gl,e.transform.customLayerMatrix());n.setDirty();e.setBaseState();n.bindFramebuffer.set(null)}}var Ni={symbol:ri,circle:ui,heatmap:fi,line:pi,fill:di,"fill-extrusion":yi,hillshade:xi,raster:wi,background:ki,debug:zi,custom:Bi};var ji=function e(t,r){this.context=new Xe(t);this.transform=r;this._tileTextures={};this.setup();this.numSublayers=Je.maxUnderzooming+Je.maxOverzooming+1;this.depthEpsilon=1/Math.pow(2,16);this.crossTileSymbolIndex=new cr;this.gpuTimers={}};ji.prototype.resize=function t(r,n){this.width=r*e.browser.devicePixelRatio;this.height=n*e.browser.devicePixelRatio;this.context.viewport.set([0,0,this.width,this.height]);if(this.style){for(var a=0,i=this.style._order;a<i.length;a+=1){var o=i[a];this.style._layers[o].resize()}}};ji.prototype.setup=function t(){var r=this.context;var n=new e.StructArrayLayout2i4;n.emplaceBack(0,0);n.emplaceBack(e.EXTENT,0);n.emplaceBack(0,e.EXTENT);n.emplaceBack(e.EXTENT,e.EXTENT);this.tileExtentBuffer=r.createVertexBuffer(n,yr.members);this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var a=new e.StructArrayLayout2i4;a.emplaceBack(0,0);a.emplaceBack(e.EXTENT,0);a.emplaceBack(0,e.EXTENT);a.emplaceBack(e.EXTENT,e.EXTENT);this.debugBuffer=r.createVertexBuffer(a,yr.members);this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var i=new e.StructArrayLayout4i8;i.emplaceBack(0,0,0,0);i.emplaceBack(e.EXTENT,0,e.EXTENT,0);i.emplaceBack(0,e.EXTENT,0,e.EXTENT);i.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT);this.rasterBoundsBuffer=r.createVertexBuffer(i,z.members);this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var o=new e.StructArrayLayout2i4;o.emplaceBack(0,0);o.emplaceBack(1,0);o.emplaceBack(0,1);o.emplaceBack(1,1);this.viewportBuffer=r.createVertexBuffer(o,yr.members);this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var s=new e.StructArrayLayout1ui2;s.emplaceBack(0);s.emplaceBack(1);s.emplaceBack(3);s.emplaceBack(2);s.emplaceBack(0);this.tileBorderIndexBuffer=r.createIndexBuffer(s);var l=new e.StructArrayLayout3ui6;l.emplaceBack(0,1,2);l.emplaceBack(2,1,3);this.quadTriangleIndexBuffer=r.createIndexBuffer(l);this.emptyTexture=new e.Texture(r,{width:1,height:1,data:new Uint8Array([0,0,0,0])},r.gl.RGBA);var u=this.context.gl;this.stencilClearMode=new Ue({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO)};ji.prototype.clearStencil=function t(){var r=this.context;var n=r.gl;this.nextStencilID=1;this.currentStencilSource=undefined;var a=e.create();e.ortho(a,0,this.width,this.height,0,0,1);e.scale(a,a,[n.drawingBufferWidth,n.drawingBufferHeight,0]);this.useProgram("clippingMask").draw(r,n.TRIANGLES,Be.disabled,this.stencilClearMode,Ge.disabled,We.disabled,ga(a),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)};ji.prototype._renderTileClippingMasks=function e(t,r){if(this.currentStencilSource===t.source||!t.isTileClipped()||!r||!r.length){return}this.currentStencilSource=t.source;var n=this.context;var a=n.gl;if(this.nextStencilID+r.length>256){this.clearStencil()}n.setColorMode(Ge.disabled);n.setDepthMode(Be.disabled);var i=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,s=r;o<s.length;o+=1){var l=s[o];var u=this._tileClippingMaskIDs[l.key]=this.nextStencilID++;i.draw(n,a.TRIANGLES,Be.disabled,new Ue({func:a.ALWAYS,mask:0},u,255,a.KEEP,a.KEEP,a.REPLACE),Ge.disabled,We.disabled,ga(l.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}};ji.prototype.stencilModeFor3D=function e(){this.currentStencilSource=undefined;if(this.nextStencilID+1>256){this.clearStencil()}var t=this.nextStencilID++;var r=this.context.gl;return new Ue({func:r.NOTEQUAL,mask:255},t,255,r.KEEP,r.KEEP,r.REPLACE)};ji.prototype.stencilModeForClipping=function e(t){var r=this.context.gl;return new Ue({func:r.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,r.KEEP,r.KEEP,r.REPLACE)};ji.prototype.stencilConfigForOverlap=function e(t){var r;var n=this.context.gl;var a=t.sort((function(e,t){return t.overscaledZ-e.overscaledZ}));var i=a[a.length-1].overscaledZ;var o=a[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=undefined;if(this.nextStencilID+o>256){this.clearStencil()}var s={};for(var l=0;l<o;l++){s[l+i]=new Ue({func:n.GEQUAL,mask:255},l+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE)}this.nextStencilID+=o;return[s,a]}return[(r={},r[i]=Ue.disabled,r),a]};ji.prototype.colorModeForRenderPass=function t(){var r=this.context.gl;if(this._showOverdrawInspector){var n=8;var a=1/n;return new Ge([r.CONSTANT_COLOR,r.ONE],new e.Color(a,a,a,0),[true,true,true,true])}else if(this.renderPass==="opaque"){return Ge.unblended}else{return Ge.alphaBlended}};ji.prototype.depthModeForSublayer=function e(t,r,n){if(!this.opaquePassEnabledForLayer()){return Be.disabled}var a=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Be(n||this.context.gl.LEQUAL,r,[a,a])};ji.prototype.opaquePassEnabledForLayer=function e(){return this.currentLayer<this.opaquePassCutoff};ji.prototype.render=function t(r,n){var a=this;this.style=r;this.options=n;this.lineAtlas=r.lineAtlas;this.imageManager=r.imageManager;this.glyphManager=r.glyphManager;this.symbolFadeChange=r.placement.symbolFadeChange(e.browser.now());this.imageManager.beginFrame();var i=this.style._order;var o=this.style.sourceCaches;for(var s in o){var l=o[s];if(l.used){l.prepare(this.context)}}var u={};var f={};var c={};for(var v in o){var h=o[v];u[v]=h.getVisibleCoordinates();f[v]=u[v].slice().reverse();c[v]=h.getVisibleCoordinates(true).reverse()}this.opaquePassCutoff=Infinity;for(var p=0;p<i.length;p++){var d=i[p];if(this.style._layers[d].is3D()){this.opaquePassCutoff=p;break}}this.renderPass="offscreen";for(var g=0,y=i;g<y.length;g+=1){var m=y[g];var x=this.style._layers[m];if(!x.hasOffscreenPass()||x.isHidden(this.transform.zoom)){continue}var b=f[x.source];if(x.type!=="custom"&&!b.length){continue}this.renderLayer(this,o[x.source],x,b)}this.context.bindFramebuffer.set(null);this.context.clear({color:n.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1});this.clearStencil();this._showOverdrawInspector=n.showOverdrawInspector;this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon];this.renderPass="opaque";for(this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){var _=this.style._layers[i[this.currentLayer]];var w=o[_.source];var T=u[_.source];this._renderTileClippingMasks(_,T);this.renderLayer(this,w,_,T)}this.renderPass="translucent";for(this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){var k=this.style._layers[i[this.currentLayer]];var A=o[k.source];var M=(k.type==="symbol"?c:f)[k.source];this._renderTileClippingMasks(k,u[k.source]);this.renderLayer(this,A,k,M)}if(this.options.showTileBoundaries){var S;var E;var L=e.values(this.style._layers);L.forEach((function(e){if(e.source&&!e.isHidden(a.transform.zoom)){if(e.source!==(E&&E.id)){E=a.style.sourceCaches[e.source]}if(!S||S.getSource().maxzoom<E.getSource().maxzoom){S=E}}}));if(S){Ni.debug(this,S,S.getVisibleCoordinates())}}if(this.options.showPadding){Ci(this)}this.context.setDefault()};ji.prototype.renderLayer=function e(t,r,n,a){if(n.isHidden(this.transform.zoom)){return}if(n.type!=="background"&&n.type!=="custom"&&!a.length){return}this.id=n.id;this.gpuTimingStart(n);Ni[n.type](t,r,n,a,this.style.placement.variableOffsets);this.gpuTimingEnd()};ji.prototype.gpuTimingStart=function e(t){if(!this.options.gpuTiming){return}var r=this.context.extTimerQuery;var n=this.gpuTimers[t.id];if(!n){n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:r.createQueryEXT()}}n.calls++;r.beginQueryEXT(r.TIME_ELAPSED_EXT,n.query)};ji.prototype.gpuTimingEnd=function e(){if(!this.options.gpuTiming){return}var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)};ji.prototype.collectGpuTimers=function e(){var t=this.gpuTimers;this.gpuTimers={};return t};ji.prototype.queryGpuTimers=function e(t){var r={};for(var n in t){var a=t[n];var i=this.context.extTimerQuery;var o=i.getQueryObjectEXT(a.query,i.QUERY_RESULT_EXT)/(1e3*1e3);i.deleteQueryEXT(a.query);r[n]=o}return r};ji.prototype.translatePosMatrix=function t(r,n,a,i,o){if(!a[0]&&!a[1]){return r}var s=o?i==="map"?this.transform.angle:0:i==="viewport"?-this.transform.angle:0;if(s){var l=Math.sin(s);var u=Math.cos(s);a=[a[0]*u-a[1]*l,a[0]*l+a[1]*u]}var f=[o?a[0]:Nt(n,a[0],this.transform.zoom),o?a[1]:Nt(n,a[1],this.transform.zoom),0];var c=new Float32Array(16);e.translate(c,r,f);return c};ji.prototype.saveTileTexture=function e(t){var r=this._tileTextures[t.size[0]];if(!r){this._tileTextures[t.size[0]]=[t]}else{r.push(t)}};ji.prototype.getTileTexture=function e(t){var r=this._tileTextures[t];return r&&r.length>0?r.pop():null};ji.prototype.isPatternMissing=function e(t){if(!t){return false}if(!t.from||!t.to){return true}var r=this.imageManager.getPattern(t.from.toString());var n=this.imageManager.getPattern(t.to.toString());return!r||!n};ji.prototype.useProgram=function e(t,r){this.cache=this.cache||{};var n=""+t+(r?r.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");if(!this.cache[n]){this.cache[n]=new Zn(this.context,qn[t],r,Ka[t],this._showOverdrawInspector)}return this.cache[n]};ji.prototype.setCustomLayerDefaults=function e(){this.context.unbindVAO();this.context.cullFace.setDefault();this.context.activeTexture.setDefault();this.context.pixelStoreUnpack.setDefault();this.context.pixelStoreUnpackPremultiplyAlpha.setDefault();this.context.pixelStoreUnpackFlipY.setDefault()};ji.prototype.setBaseState=function e(){var t=this.context.gl;this.context.cullFace.set(false);this.context.viewport.set([0,0,this.width,this.height]);this.context.blendEquation.set(t.FUNC_ADD)};ji.prototype.initDebugOverlayCanvas=function t(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=e.window.document.createElement("canvas");this.debugOverlayCanvas.width=512;this.debugOverlayCanvas.height=512;var r=this.context.gl;this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,r.RGBA)}};ji.prototype.destroy=function e(){this.emptyTexture.destroy();if(this.debugOverlayTexture){this.debugOverlayTexture.destroy()}};var Ui=function e(t,r){this.points=t;this.planes=r};Ui.fromInvProjectionMatrix=function t(r,n,a){var i=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]];var o=Math.pow(2,a);var s=i.map((function(t){return e.transformMat4([],t,r)})).map((function(t){return e.scale$1([],t,1/t[3]/n*o)}));var l=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]];var u=l.map((function(t){var r=e.sub([],s[t[0]],s[t[1]]);var n=e.sub([],s[t[2]],s[t[1]]);var a=e.normalize([],e.cross([],r,n));var i=-e.dot(a,s[t[1]]);return a.concat(i)}));return new Ui(s,u)};var Vi=function t(r,n){this.min=r;this.max=n;this.center=e.scale$2([],e.add([],this.min,this.max),.5)};Vi.prototype.quadrant=function t(r){var n=[r%2===0,r<2];var a=e.clone$2(this.min);var i=e.clone$2(this.max);for(var o=0;o<n.length;o++){a[o]=n[o]?this.min[o]:this.center[o];i[o]=n[o]?this.center[o]:this.max[o]}i[2]=this.max[2];return new Vi(a,i)};Vi.prototype.distanceX=function e(t){var r=Math.max(Math.min(this.max[0],t[0]),this.min[0]);return r-t[0]};Vi.prototype.distanceY=function e(t){var r=Math.max(Math.min(this.max[1],t[1]),this.min[1]);return r-t[1]};Vi.prototype.intersects=function t(r){var n=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]];var a=true;for(var i=0;i<r.planes.length;i++){var o=r.planes[i];var s=0;for(var l=0;l<n.length;l++){s+=e.dot$1(o,n[l])>=0}if(s===0){return 0}if(s!==n.length){a=false}}if(a){return 2}for(var u=0;u<3;u++){var f=Number.MAX_VALUE;var c=-Number.MAX_VALUE;for(var v=0;v<r.points.length;v++){var h=r.points[v][u]-this.min[u];f=Math.min(f,h);c=Math.max(c,h)}if(c<0||f>this.max[u]-this.min[u]){return 0}}return 1};var Hi=function e(t,r,n,a){if(t===void 0)t=0;if(r===void 0)r=0;if(n===void 0)n=0;if(a===void 0)a=0;if(isNaN(t)||t<0||isNaN(r)||r<0||isNaN(n)||n<0||isNaN(a)||a<0){throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers")}this.top=t;this.bottom=r;this.left=n;this.right=a};Hi.prototype.interpolate=function t(r,n,a){if(n.top!=null&&r.top!=null){this.top=e.number(r.top,n.top,a)}if(n.bottom!=null&&r.bottom!=null){this.bottom=e.number(r.bottom,n.bottom,a)}if(n.left!=null&&r.left!=null){this.left=e.number(r.left,n.left,a)}if(n.right!=null&&r.right!=null){this.right=e.number(r.right,n.right,a)}return this};Hi.prototype.getCenter=function t(r,n){var a=e.clamp((this.left+r-this.right)/2,0,r);var i=e.clamp((this.top+n-this.bottom)/2,0,n);return new e.Point(a,i)};Hi.prototype.equals=function e(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right};Hi.prototype.clone=function e(){return new Hi(this.top,this.bottom,this.left,this.right)};Hi.prototype.toJSON=function e(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var qi=function t(r,n,a,i,o){this.tileSize=512;this.maxValidLatitude=85.051129;this._renderWorldCopies=o===undefined?true:o;this._minZoom=r||0;this._maxZoom=n||22;this._minPitch=a===undefined||a===null?0:a;this._maxPitch=i===undefined||i===null?60:i;this.setMaxBounds();this.width=0;this.height=0;this._center=new e.LngLat(0,0);this.zoom=0;this.angle=0;this._fov=.6435011087932844;this._pitch=0;this._unmodified=true;this._edgeInsets=new Hi;this._posMatrixCache={};this._alignedPosMatrixCache={}};var Gi={minZoom:{configurable:true},maxZoom:{configurable:true},minPitch:{configurable:true},maxPitch:{configurable:true},renderWorldCopies:{configurable:true},worldSize:{configurable:true},centerOffset:{configurable:true},size:{configurable:true},bearing:{configurable:true},pitch:{configurable:true},fov:{configurable:true},zoom:{configurable:true},center:{configurable:true},padding:{configurable:true},centerPoint:{configurable:true},unmodified:{configurable:true},point:{configurable:true}};qi.prototype.clone=function e(){var e=new qi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);e.tileSize=this.tileSize;e.latRange=this.latRange;e.width=this.width;e.height=this.height;e._center=this._center;e.zoom=this.zoom;e.angle=this.angle;e._fov=this._fov;e._pitch=this._pitch;e._unmodified=this._unmodified;e._edgeInsets=this._edgeInsets.clone();e._calcMatrices();return e};Gi.minZoom.get=function(){return this._minZoom};Gi.minZoom.set=function(e){if(this._minZoom===e){return}this._minZoom=e;this.zoom=Math.max(this.zoom,e)};Gi.maxZoom.get=function(){return this._maxZoom};Gi.maxZoom.set=function(e){if(this._maxZoom===e){return}this._maxZoom=e;this.zoom=Math.min(this.zoom,e)};Gi.minPitch.get=function(){return this._minPitch};Gi.minPitch.set=function(e){if(this._minPitch===e){return}this._minPitch=e;this.pitch=Math.max(this.pitch,e)};Gi.maxPitch.get=function(){return this._maxPitch};Gi.maxPitch.set=function(e){if(this._maxPitch===e){return}this._maxPitch=e;this.pitch=Math.min(this.pitch,e)};Gi.renderWorldCopies.get=function(){return this._renderWorldCopies};Gi.renderWorldCopies.set=function(e){if(e===undefined){e=true}else if(e===null){e=false}this._renderWorldCopies=e};Gi.worldSize.get=function(){return this.tileSize*this.scale};Gi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))};Gi.size.get=function(){return new e.Point(this.width,this.height)};Gi.bearing.get=function(){return-this.angle/Math.PI*180};Gi.bearing.set=function(t){var r=-e.wrap(t,-180,180)*Math.PI/180;if(this.angle===r){return}this._unmodified=false;this.angle=r;this._calcMatrices();this.rotationMatrix=e.create$2();e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle)};Gi.pitch.get=function(){return this._pitch/Math.PI*180};Gi.pitch.set=function(t){var r=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;if(this._pitch===r){return}this._unmodified=false;this._pitch=r;this._calcMatrices()};Gi.fov.get=function(){return this._fov/Math.PI*180};Gi.fov.set=function(e){e=Math.max(.01,Math.min(60,e));if(this._fov===e){return}this._unmodified=false;this._fov=e/180*Math.PI;this._calcMatrices()};Gi.zoom.get=function(){return this._zoom};Gi.zoom.set=function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);if(this._zoom===t){return}this._unmodified=false;this._zoom=t;this.scale=this.zoomScale(t);this.tileZoom=Math.floor(t);this.zoomFraction=t-this.tileZoom;this._constrain();this._calcMatrices()};Gi.center.get=function(){return this._center};Gi.center.set=function(e){if(e.lat===this._center.lat&&e.lng===this._center.lng){return}this._unmodified=false;this._center=e;this._constrain();this._calcMatrices()};Gi.padding.get=function(){return this._edgeInsets.toJSON()};Gi.padding.set=function(e){if(this._edgeInsets.equals(e)){return}this._unmodified=false;this._edgeInsets.interpolate(this._edgeInsets,e,1);this._calcMatrices()};Gi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)};qi.prototype.isPaddingEqual=function e(t){return this._edgeInsets.equals(t)};qi.prototype.interpolatePadding=function e(t,r,n){this._unmodified=false;this._edgeInsets.interpolate(t,r,n);this._constrain();this._calcMatrices()};qi.prototype.coveringZoomLevel=function e(t){var r=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,r)};qi.prototype.getVisibleUnwrappedCoordinates=function t(r){var n=[new e.UnwrappedTileID(0,r)];if(this._renderWorldCopies){var a=this.pointCoordinate(new e.Point(0,0));var i=this.pointCoordinate(new e.Point(this.width,0));var o=this.pointCoordinate(new e.Point(this.width,this.height));var s=this.pointCoordinate(new e.Point(0,this.height));var l=Math.floor(Math.min(a.x,i.x,o.x,s.x));var u=Math.floor(Math.max(a.x,i.x,o.x,s.x));var f=1;for(var c=l-f;c<=u+f;c++){if(c===0){continue}n.push(new e.UnwrappedTileID(c,r))}}return n};qi.prototype.coveringTiles=function t(r){var n=this.coveringZoomLevel(r);var a=n;if(r.minzoom!==undefined&&n<r.minzoom){return[]}if(r.maxzoom!==undefined&&n>r.maxzoom){n=r.maxzoom}var i=e.MercatorCoordinate.fromLngLat(this.center);var o=Math.pow(2,n);var s=[o*i.x,o*i.y,0];var l=Ui.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n);var u=r.minzoom||0;if(this.pitch<=60&&this._edgeInsets.top<.1){u=n}var f=3;var c=function(e){return{aabb:new Vi([e*o,0,0],[(e+1)*o,o,0]),zoom:0,x:0,y:0,wrap:e,fullyVisible:false}};var v=[];var h=[];var p=n;var d=r.reparseOverscaled?a:n;if(this._renderWorldCopies){for(var g=1;g<=3;g++){v.push(c(-g));v.push(c(g))}}v.push(c(0));while(v.length>0){var y=v.pop();var m=y.x;var x=y.y;var b=y.fullyVisible;if(!b){var _=y.aabb.intersects(l);if(_===0){continue}b=_===2}var w=y.aabb.distanceX(s);var T=y.aabb.distanceY(s);var k=Math.max(Math.abs(w),Math.abs(T));var A=f+(1<<p-y.zoom)-2;if(y.zoom===p||k>A&&y.zoom>=u){h.push({tileID:new e.OverscaledTileID(y.zoom===p?d:y.zoom,y.wrap,y.zoom,m,x),distanceSq:e.sqrLen([s[0]-.5-m,s[1]-.5-x])});continue}for(var M=0;M<4;M++){var S=(m<<1)+M%2;var E=(x<<1)+(M>>1);v.push({aabb:y.aabb.quadrant(M),zoom:y.zoom+1,x:S,y:E,wrap:y.wrap,fullyVisible:b})}}return h.sort((function(e,t){return e.distanceSq-t.distanceSq})).map((function(e){return e.tileID}))};qi.prototype.resize=function e(t,r){this.width=t;this.height=r;this.pixelsToGLUnits=[2/t,-2/r];this._constrain();this._calcMatrices()};Gi.unmodified.get=function(){return this._unmodified};qi.prototype.zoomScale=function e(t){return Math.pow(2,t)};qi.prototype.scaleZoom=function e(t){return Math.log(t)/Math.LN2};qi.prototype.project=function t(r){var n=e.clamp(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(r.lng)*this.worldSize,e.mercatorYfromLat(n)*this.worldSize)};qi.prototype.unproject=function t(r){return new e.MercatorCoordinate(r.x/this.worldSize,r.y/this.worldSize).toLngLat()};Gi.point.get=function(){return this.project(this.center)};qi.prototype.setLocationAtPoint=function t(r,n){var a=this.pointCoordinate(n);var i=this.pointCoordinate(this.centerPoint);var o=this.locationCoordinate(r);var s=new e.MercatorCoordinate(o.x-(a.x-i.x),o.y-(a.y-i.y));this.center=this.coordinateLocation(s);if(this._renderWorldCopies){this.center=this.center.wrap()}};qi.prototype.locationPoint=function e(t){return this.coordinatePoint(this.locationCoordinate(t))};qi.prototype.pointLocation=function e(t){return this.coordinateLocation(this.pointCoordinate(t))};qi.prototype.locationCoordinate=function t(r){return e.MercatorCoordinate.fromLngLat(r)};qi.prototype.coordinateLocation=function e(t){return t.toLngLat()};qi.prototype.pointCoordinate=function t(r){var n=0;var a=[r.x,r.y,0,1];var i=[r.x,r.y,1,1];e.transformMat4(a,a,this.pixelMatrixInverse);e.transformMat4(i,i,this.pixelMatrixInverse);var o=a[3];var s=i[3];var l=a[0]/o;var u=i[0]/s;var f=a[1]/o;var c=i[1]/s;var v=a[2]/o;var h=i[2]/s;var p=v===h?0:(n-v)/(h-v);return new e.MercatorCoordinate(e.number(l,u,p)/this.worldSize,e.number(f,c,p)/this.worldSize)};qi.prototype.coordinatePoint=function t(r){var n=[r.x*this.worldSize,r.y*this.worldSize,0,1];e.transformMat4(n,n,this.pixelMatrix);return new e.Point(n[0]/n[3],n[1]/n[3])};qi.prototype.getBounds=function t(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))};qi.prototype.getMaxBounds=function t(){if(!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2){return null}return new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])};qi.prototype.setMaxBounds=function e(t){if(t){this.lngRange=[t.getWest(),t.getEast()];this.latRange=[t.getSouth(),t.getNorth()];this._constrain()}else{this.lngRange=null;this.latRange=[-this.maxValidLatitude,this.maxValidLatitude]}};qi.prototype.calculatePosMatrix=function t(r,n){if(n===void 0)n=false;var a=r.key;var i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[a]){return i[a]}var o=r.canonical;var s=this.worldSize/this.zoomScale(o.z);var l=o.x+Math.pow(2,o.z)*r.wrap;var u=e.identity(new Float64Array(16));e.translate(u,u,[l*s,o.y*s,0]);e.scale(u,u,[s/e.EXTENT,s/e.EXTENT,1]);e.multiply(u,n?this.alignedProjMatrix:this.projMatrix,u);i[a]=new Float32Array(u);return i[a]};qi.prototype.customLayerMatrix=function e(){return this.mercatorMatrix.slice()};qi.prototype._constrain=function t(){if(!this.center||!this.width||!this.height||this._constraining){return}this._constraining=true;var r=-90;var n=90;var a=-180;var i=180;var o,s,l,u;var f=this.size,c=this._unmodified;if(this.latRange){var v=this.latRange;r=e.mercatorYfromLat(v[1])*this.worldSize;n=e.mercatorYfromLat(v[0])*this.worldSize;o=n-r<f.y?f.y/(n-r):0}if(this.lngRange){var h=this.lngRange;a=e.mercatorXfromLng(h[0])*this.worldSize;i=e.mercatorXfromLng(h[1])*this.worldSize;s=i-a<f.x?f.x/(i-a):0}var p=this.point;var d=Math.max(s||0,o||0);if(d){this.center=this.unproject(new e.Point(s?(i+a)/2:p.x,o?(n+r)/2:p.y));this.zoom+=this.scaleZoom(d);this._unmodified=c;this._constraining=false;return}if(this.latRange){var g=p.y,y=f.y/2;if(g-y<r){u=r+y}if(g+y>n){u=n-y}}if(this.lngRange){var m=p.x,x=f.x/2;if(m-x<a){l=a+x}if(m+x>i){l=i-x}}if(l!==undefined||u!==undefined){this.center=this.unproject(new e.Point(l!==undefined?l:p.x,u!==undefined?u:p.y))}this._unmodified=c;this._constraining=false};qi.prototype._calcMatrices=function t(){if(!this.height){return}var r=this._fov/2;var n=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(r)*this.height;var a=Math.PI/2+this._pitch;var i=this._fov*(.5+n.y/this.height);var o=Math.sin(i)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-a-i,.01,Math.PI-.01));var s=this.point;var l=s.x,u=s.y;var f=Math.cos(Math.PI/2-this._pitch)*o+this.cameraToCenterDistance;var c=f*1.01;var v=this.height/50;var h=new Float64Array(16);e.perspective(h,this._fov,this.width/this.height,v,c);h[8]=-n.x*2/this.width;h[9]=n.y*2/this.height;e.scale(h,h,[1,-1,1]);e.translate(h,h,[0,0,-this.cameraToCenterDistance]);e.rotateX(h,h,this._pitch);e.rotateZ(h,h,this.angle);e.translate(h,h,[-l,-u,0]);this.mercatorMatrix=e.scale([],h,[this.worldSize,this.worldSize,this.worldSize]);e.scale(h,h,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]);this.projMatrix=h;this.invProjMatrix=e.invert([],this.projMatrix);var p=this.width%2/2,d=this.height%2/2,g=Math.cos(this.angle),y=Math.sin(this.angle),m=l-Math.round(l)+g*p+y*d,x=u-Math.round(u)+g*d+y*p;var b=new Float64Array(h);e.translate(b,b,[m>.5?m-1:m,x>.5?x-1:x,0]);this.alignedProjMatrix=b;h=e.create();e.scale(h,h,[this.width/2,-this.height/2,1]);e.translate(h,h,[1,-1,0]);this.labelPlaneMatrix=h;h=e.create();e.scale(h,h,[1,-1,1]);e.translate(h,h,[-1,-1,0]);e.scale(h,h,[2/this.width,2/this.height,1]);this.glCoordMatrix=h;this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix);h=e.invert(new Float64Array(16),this.pixelMatrix);if(!h){throw new Error("failed to invert matrix")}this.pixelMatrixInverse=h;this._posMatrixCache={};this._alignedPosMatrixCache={}};qi.prototype.maxPitchScaleFactor=function t(){if(!this.pixelMatrixInverse){return 1}var r=this.pointCoordinate(new e.Point(0,0));var n=[r.x*this.worldSize,r.y*this.worldSize,0,1];var a=e.transformMat4(n,n,this.pixelMatrix);return a[3]/this.cameraToCenterDistance};qi.prototype.getCameraPoint=function t(){var r=this._pitch;var n=Math.tan(r)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,n))};qi.prototype.getCameraQueryGeometry=function t(r){var n=this.getCameraPoint();if(r.length===1){return[r[0],n]}else{var a=n.x;var i=n.y;var o=n.x;var s=n.y;for(var l=0,u=r;l<u.length;l+=1){var f=u[l];a=Math.min(a,f.x);i=Math.min(i,f.y);o=Math.max(o,f.x);s=Math.max(s,f.y)}return[new e.Point(a,i),new e.Point(o,i),new e.Point(o,s),new e.Point(a,s),new e.Point(a,i)]}};Object.defineProperties(qi.prototype,Gi);function Zi(e,t){var r=false;var n=null;var a=function(){n=null;if(r){e();n=setTimeout(a,t);r=false}};return function(){r=true;if(!n){a()}return n}}var Yi=function t(r){this._hashName=r&&encodeURIComponent(r);e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this);this._updateHash=Zi(this._updateHashUnthrottled.bind(this),30*1e3/100)};Yi.prototype.addTo=function t(r){this._map=r;e.window.addEventListener("hashchange",this._onHashChange,false);this._map.on("moveend",this._updateHash);return this};Yi.prototype.remove=function t(){e.window.removeEventListener("hashchange",this._onHashChange,false);this._map.off("moveend",this._updateHash);clearTimeout(this._updateHash());delete this._map;return this};Yi.prototype.getHashString=function t(r){var n=this._map.getCenter(),a=Math.round(this._map.getZoom()*100)/100,i=Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),s=Math.round(n.lng*o)/o,l=Math.round(n.lat*o)/o,u=this._map.getBearing(),f=this._map.getPitch();var c="";if(r){c+="/"+s+"/"+l+"/"+a}else{c+=a+"/"+l+"/"+s}if(u||f){c+="/"+Math.round(u*10)/10}if(f){c+="/"+Math.round(f)}if(this._hashName){var v=this._hashName;var h=false;var p=e.window.location.hash.slice(1).split("&").map((function(e){var t=e.split("=")[0];if(t===v){h=true;return t+"="+c}return e})).filter((function(e){return e}));if(!h){p.push(v+"="+c)}return"#"+p.join("&")}return"#"+c};Yi.prototype._getCurrentHash=function t(){var r=this;var n=e.window.location.hash.replace("#","");if(this._hashName){var a;n.split("&").map((function(e){return e.split("=")})).forEach((function(e){if(e[0]===r._hashName){a=e}}));return(a?a[1]||"":"").split("/")}return n.split("/")};Yi.prototype._onHashChange=function e(){var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(e){return isNaN(e)}))){var r=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:r,pitch:+(t[4]||0)});return true}return false};Yi.prototype._updateHashUnthrottled=function t(){var r=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",r)}catch(n){}};var Wi={linearity:.3,easing:e.bezier(0,0,.3,1)};var Xi=e.extend({deceleration:2500,maxSpeed:1400},Wi);var Ji=e.extend({deceleration:20,maxSpeed:1400},Wi);var Ki=e.extend({deceleration:1e3,maxSpeed:360},Wi);var $i=e.extend({deceleration:1e3,maxSpeed:90},Wi);var Qi=function e(t){this._map=t;this.clear()};Qi.prototype.clear=function e(){this._inertiaBuffer=[]};Qi.prototype.record=function t(r){this._drainInertiaBuffer();this._inertiaBuffer.push({time:e.browser.now(),settings:r})};Qi.prototype._drainInertiaBuffer=function t(){var r=this._inertiaBuffer,n=e.browser.now(),a=160;while(r.length>0&&n-r[0].time>a){r.shift()}};Qi.prototype._onMoveEnd=function t(r){this._drainInertiaBuffer();if(this._inertiaBuffer.length<2){return}var n={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:undefined,around:undefined};for(var a=0,i=this._inertiaBuffer;a<i.length;a+=1){var o=i[a];var s=o.settings;n.zoom+=s.zoomDelta||0;n.bearing+=s.bearingDelta||0;n.pitch+=s.pitchDelta||0;if(s.panDelta){n.pan._add(s.panDelta)}if(s.around){n.around=s.around}if(s.pinchAround){n.pinchAround=s.pinchAround}}var l=this._inertiaBuffer[this._inertiaBuffer.length-1];var u=l.time-this._inertiaBuffer[0].time;var f={};if(n.pan.mag()){var c=to(n.pan.mag(),u,e.extend({},Xi,r||{}));f.offset=n.pan.mult(c.amount/n.pan.mag());f.center=this._map.transform.center;eo(f,c)}if(n.zoom){var v=to(n.zoom,u,Ji);f.zoom=this._map.transform.zoom+v.amount;eo(f,v)}if(n.bearing){var h=to(n.bearing,u,Ki);f.bearing=this._map.transform.bearing+e.clamp(h.amount,-179,179);eo(f,h)}if(n.pitch){var p=to(n.pitch,u,$i);f.pitch=this._map.transform.pitch+p.amount;eo(f,p)}if(f.zoom||f.bearing){var d=n.pinchAround===undefined?n.around:n.pinchAround;f.around=d?this._map.unproject(d):this._map.getCenter()}this.clear();return e.extend(f,{noMoveStart:true})};function eo(e,t){if(!e.duration||e.duration<t.duration){e.duration=t.duration;e.easing=t.easing}}function to(t,r,n){var a=n.maxSpeed;var i=n.linearity;var o=n.deceleration;var s=e.clamp(t*i/(r/1e3),-a,a);var l=Math.abs(s)/(o*i);return{easing:n.easing,duration:l*1e3,amount:s*(l/2)}}var ro=function(t){function n(n,a,i,o){if(o===void 0)o={};var s=r.mousePos(a.getCanvasContainer(),i);var l=a.unproject(s);t.call(this,n,e.extend({point:s,lngLat:l,originalEvent:i},o));this._defaultPrevented=false;this.target=a}if(t)n.__proto__=t;n.prototype=Object.create(t&&t.prototype);n.prototype.constructor=n;var a={defaultPrevented:{configurable:true}};n.prototype.preventDefault=function e(){this._defaultPrevented=true};a.defaultPrevented.get=function(){return this._defaultPrevented};Object.defineProperties(n.prototype,a);return n}(e.Event);var no=function(t){function n(n,a,i){var o=n==="touchend"?i.changedTouches:i.touches;var s=r.touchPos(a.getCanvasContainer(),o);var l=s.map((function(e){return a.unproject(e)}));var u=s.reduce((function(e,t,r,n){return e.add(t.div(n.length))}),new e.Point(0,0));var f=a.unproject(u);t.call(this,n,{points:s,point:u,lngLats:l,lngLat:f,originalEvent:i});this._defaultPrevented=false}if(t)n.__proto__=t;n.prototype=Object.create(t&&t.prototype);n.prototype.constructor=n;var a={defaultPrevented:{configurable:true}};n.prototype.preventDefault=function e(){this._defaultPrevented=true};a.defaultPrevented.get=function(){return this._defaultPrevented};Object.defineProperties(n.prototype,a);return n}(e.Event);var ao=function(e){function t(t,r,n){e.call(this,t,{originalEvent:n});this._defaultPrevented=false}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;var r={defaultPrevented:{configurable:true}};t.prototype.preventDefault=function e(){this._defaultPrevented=true};r.defaultPrevented.get=function(){return this._defaultPrevented};Object.defineProperties(t.prototype,r);return t}(e.Event);var io=function e(t,r){this._map=t;this._clickTolerance=r.clickTolerance};io.prototype.reset=function e(){delete this._mousedownPos};io.prototype.wheel=function e(t){return this._firePreventable(new ao(t.type,this._map,t))};io.prototype.mousedown=function e(t,r){this._mousedownPos=r;return this._firePreventable(new ro(t.type,this._map,t))};io.prototype.mouseup=function e(t){this._map.fire(new ro(t.type,this._map,t))};io.prototype.click=function e(t,r){if(this._mousedownPos&&this._mousedownPos.dist(r)>=this._clickTolerance){return}this._map.fire(new ro(t.type,this._map,t))};io.prototype.dblclick=function e(t){return this._firePreventable(new ro(t.type,this._map,t))};io.prototype.mouseover=function e(t){this._map.fire(new ro(t.type,this._map,t))};io.prototype.mouseout=function e(t){this._map.fire(new ro(t.type,this._map,t))};io.prototype.touchstart=function e(t){return this._firePreventable(new no(t.type,this._map,t))};io.prototype.touchmove=function e(t){this._map.fire(new no(t.type,this._map,t))};io.prototype.touchend=function e(t){this._map.fire(new no(t.type,this._map,t))};io.prototype.touchcancel=function e(t){this._map.fire(new no(t.type,this._map,t))};io.prototype._firePreventable=function e(t){this._map.fire(t);if(t.defaultPrevented){return{}}};io.prototype.isEnabled=function e(){return true};io.prototype.isActive=function e(){return false};io.prototype.enable=function e(){};io.prototype.disable=function e(){};var oo=function e(t){this._map=t};oo.prototype.reset=function e(){this._delayContextMenu=false;delete this._contextMenuEvent};oo.prototype.mousemove=function e(t){this._map.fire(new ro(t.type,this._map,t))};oo.prototype.mousedown=function e(){this._delayContextMenu=true};oo.prototype.mouseup=function e(){this._delayContextMenu=false;if(this._contextMenuEvent){this._map.fire(new ro("contextmenu",this._map,this._contextMenuEvent));delete this._contextMenuEvent}};oo.prototype.contextmenu=function e(t){if(this._delayContextMenu){this._contextMenuEvent=t}else{this._map.fire(new ro(t.type,this._map,t))}if(this._map.listens("contextmenu")){t.preventDefault()}};oo.prototype.isEnabled=function e(){return true};oo.prototype.isActive=function e(){return false};oo.prototype.enable=function e(){};oo.prototype.disable=function e(){};var so=function e(t,r){this._map=t;this._el=t.getCanvasContainer();this._container=t.getContainer();this._clickTolerance=r.clickTolerance||1};so.prototype.isEnabled=function e(){return!!this._enabled};so.prototype.isActive=function e(){return!!this._active};so.prototype.enable=function e(){if(this.isEnabled()){return}this._enabled=true};so.prototype.disable=function e(){if(!this.isEnabled()){return}this._enabled=false};so.prototype.mousedown=function e(t,n){if(!this.isEnabled()){return}if(!(t.shiftKey&&t.button===0)){return}r.disableDrag();this._startPos=this._lastPos=n;this._active=true};so.prototype.mousemoveWindow=function e(t,n){if(!this._active){return}var a=n;if(this._lastPos.equals(a)||!this._box&&a.dist(this._startPos)<this._clickTolerance){return}var i=this._startPos;this._lastPos=a;if(!this._box){this._box=r.create("div","mapboxgl-boxzoom",this._container);this._container.classList.add("mapboxgl-crosshair");this._fireEvent("boxzoomstart",t)}var o=Math.min(i.x,a.x),s=Math.max(i.x,a.x),l=Math.min(i.y,a.y),u=Math.max(i.y,a.y);r.setTransform(this._box,"translate("+o+"px,"+l+"px)");this._box.style.width=s-o+"px";this._box.style.height=u-l+"px"};so.prototype.mouseupWindow=function t(n,a){var i=this;if(!this._active){return}if(n.button!==0){return}var o=this._startPos,s=a;this.reset();r.suppressClick();if(o.x===s.x&&o.y===s.y){this._fireEvent("boxzoomcancel",n)}else{this._map.fire(new e.Event("boxzoomend",{originalEvent:n}));return{cameraAnimation:function(e){return e.fitScreenCoordinates(o,s,i._map.getBearing(),{linear:true})}}}};so.prototype.keydown=function e(t){if(!this._active){return}if(t.keyCode===27){this.reset();this._fireEvent("boxzoomcancel",t)}};so.prototype.reset=function e(){this._active=false;this._container.classList.remove("mapboxgl-crosshair");if(this._box){r.remove(this._box);this._box=null}r.enableDrag();delete this._startPos;delete this._lastPos};so.prototype._fireEvent=function t(r,n){return this._map.fire(new e.Event(r,{originalEvent:n}))};function lo(e,t){var r={};for(var n=0;n<e.length;n++){r[e[n].identifier]=t[n]}return r}function uo(t){var r=new e.Point(0,0);for(var n=0,a=t;n<a.length;n+=1){var i=a[n];r._add(i)}return r.div(t.length)}var fo=500;var co=500;var vo=30;var ho=function e(t){this.reset();this.numTouches=t.numTouches};ho.prototype.reset=function e(){delete this.centroid;delete this.startTime;delete this.touches;this.aborted=false};ho.prototype.touchstart=function e(t,r,n){if(this.centroid||n.length>this.numTouches){this.aborted=true}if(this.aborted){return}if(this.startTime===undefined){this.startTime=t.timeStamp}if(n.length===this.numTouches){this.centroid=uo(r);this.touches=lo(n,r)}};ho.prototype.touchmove=function e(t,r,n){if(this.aborted||!this.centroid){return}var a=lo(n,r);for(var i in this.touches){var o=this.touches[i];var s=a[i];if(!s||s.dist(o)>vo){this.aborted=true}}};ho.prototype.touchend=function e(t,r,n){if(!this.centroid||t.timeStamp-this.startTime>co){this.aborted=true}if(n.length===0){var a=!this.aborted&&this.centroid;this.reset();if(a){return a}}};var po=function e(t){this.singleTap=new ho(t);this.numTaps=t.numTaps;this.reset()};po.prototype.reset=function e(){this.lastTime=Infinity;delete this.lastTap;this.count=0;this.singleTap.reset()};po.prototype.touchstart=function e(t,r,n){this.singleTap.touchstart(t,r,n)};po.prototype.touchmove=function e(t,r,n){this.singleTap.touchmove(t,r,n)};po.prototype.touchend=function e(t,r,n){var a=this.singleTap.touchend(t,r,n);if(a){var i=t.timeStamp-this.lastTime<fo;var o=!this.lastTap||this.lastTap.dist(a)<vo;if(!i||!o){this.reset()}this.count++;this.lastTime=t.timeStamp;this.lastTap=a;if(this.count===this.numTaps){this.reset();return a}}};var go=function e(){this._zoomIn=new po({numTouches:1,numTaps:2});this._zoomOut=new po({numTouches:2,numTaps:1});this.reset()};go.prototype.reset=function e(){this._active=false;this._zoomIn.reset();this._zoomOut.reset()};go.prototype.touchstart=function e(t,r,n){this._zoomIn.touchstart(t,r,n);this._zoomOut.touchstart(t,r,n)};go.prototype.touchmove=function e(t,r,n){this._zoomIn.touchmove(t,r,n);this._zoomOut.touchmove(t,r,n)};go.prototype.touchend=function e(t,r,n){var a=this;var i=this._zoomIn.touchend(t,r,n);var o=this._zoomOut.touchend(t,r,n);if(i){this._active=true;t.preventDefault();setTimeout((function(){return a.reset()}),0);return{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(i)},{originalEvent:t})}}}else if(o){this._active=true;t.preventDefault();setTimeout((function(){return a.reset()}),0);return{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(o)},{originalEvent:t})}}}};go.prototype.touchcancel=function e(){this.reset()};go.prototype.enable=function e(){this._enabled=true};go.prototype.disable=function e(){this._enabled=false;this.reset()};go.prototype.isEnabled=function e(){return this._enabled};go.prototype.isActive=function e(){return this._active};var yo=0;var mo=2;var xo=function e(t){this.reset();this._clickTolerance=t.clickTolerance||1};xo.prototype.reset=function e(){this._active=false;this._moved=false;delete this._lastPoint;delete this._eventButton};xo.prototype._correctButton=function e(t,r){return false};xo.prototype._move=function e(t,r){return{}};xo.prototype.mousedown=function e(t,n){if(this._lastPoint){return}var a=r.mouseButton(t);if(!this._correctButton(t,a)){return}this._lastPoint=n;this._eventButton=a};xo.prototype.mousemoveWindow=function e(t,r){var n=this._lastPoint;if(!n){return}t.preventDefault();if(!this._moved&&r.dist(n)<this._clickTolerance){return}this._moved=true;this._lastPoint=r;return this._move(n,r)};xo.prototype.mouseupWindow=function e(t){var n=r.mouseButton(t);if(n!==this._eventButton){return}if(this._moved){r.suppressClick()}this.reset()};xo.prototype.enable=function e(){this._enabled=true};xo.prototype.disable=function e(){this._enabled=false;this.reset()};xo.prototype.isEnabled=function e(){return this._enabled};xo.prototype.isActive=function e(){return this._active};var bo=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.mousedown=function t(r,n){e.prototype.mousedown.call(this,r,n);if(this._lastPoint){this._active=true}};t.prototype._correctButton=function e(t,r){return r===yo&&!t.ctrlKey};t.prototype._move=function e(t,r){return{around:r,panDelta:r.sub(t)}};return t}(xo);var _o=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._correctButton=function e(t,r){return r===yo&&t.ctrlKey||r===mo};t.prototype._move=function e(t,r){var n=.8;var a=(r.x-t.x)*n;if(a){this._active=true;return{bearingDelta:a}}};t.prototype.contextmenu=function e(t){t.preventDefault()};return t}(xo);var wo=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype._correctButton=function e(t,r){return r===yo&&t.ctrlKey||r===mo};t.prototype._move=function e(t,r){var n=-.5;var a=(r.y-t.y)*n;if(a){this._active=true;return{pitchDelta:a}}};t.prototype.contextmenu=function e(t){t.preventDefault()};return t}(xo);var To=function e(t){this._minTouches=1;this._clickTolerance=t.clickTolerance||1;this.reset()};To.prototype.reset=function t(){this._active=false;this._touches={};this._sum=new e.Point(0,0)};To.prototype.touchstart=function e(t,r,n){return this._calculateTransform(t,r,n)};To.prototype.touchmove=function e(t,r,n){if(!this._active){return}t.preventDefault();return this._calculateTransform(t,r,n)};To.prototype.touchend=function e(t,r,n){this._calculateTransform(t,r,n);if(this._active&&n.length<this._minTouches){this.reset()}};To.prototype.touchcancel=function e(){this.reset()};To.prototype._calculateTransform=function t(r,n,a){if(a.length>0){this._active=true}var i=lo(a,n);var o=new e.Point(0,0);var s=new e.Point(0,0);var l=0;for(var u in i){var f=i[u];var c=this._touches[u];if(c){o._add(f);s._add(f.sub(c));l++;i[u]=f}}this._touches=i;if(l<this._minTouches||!s.mag()){return}var v=s.div(l);this._sum._add(v);if(this._sum.mag()<this._clickTolerance){return}var h=o.div(l);return{around:h,panDelta:v}};To.prototype.enable=function e(){this._enabled=true};To.prototype.disable=function e(){this._enabled=false;this.reset()};To.prototype.isEnabled=function e(){return this._enabled};To.prototype.isActive=function e(){return this._active};var ko=function e(){this.reset()};ko.prototype.reset=function e(){this._active=false;delete this._firstTwoTouches};ko.prototype._start=function e(t){};ko.prototype._move=function e(t,r,n){return{}};ko.prototype.touchstart=function e(t,r,n){if(this._firstTwoTouches||n.length<2){return}this._firstTwoTouches=[n[0].identifier,n[1].identifier];this._start([r[0],r[1]])};ko.prototype.touchmove=function e(t,r,n){if(!this._firstTwoTouches){return}t.preventDefault();var a=this._firstTwoTouches;var i=a[0];var o=a[1];var s=Ao(n,r,i);var l=Ao(n,r,o);if(!s||!l){return}var u=this._aroundCenter?null:s.add(l).div(2);return this._move([s,l],u,t)};ko.prototype.touchend=function e(t,n,a){if(!this._firstTwoTouches){return}var i=this._firstTwoTouches;var o=i[0];var s=i[1];var l=Ao(a,n,o);var u=Ao(a,n,s);if(l&&u){return}if(this._active){r.suppressClick()}this.reset()};ko.prototype.touchcancel=function e(){this.reset()};ko.prototype.enable=function e(t){this._enabled=true;this._aroundCenter=!!t&&t.around==="center"};ko.prototype.disable=function e(){this._enabled=false;this.reset()};ko.prototype.isEnabled=function e(){return this._enabled};ko.prototype.isActive=function e(){return this._active};function Ao(e,t,r){for(var n=0;n<e.length;n++){if(e[n].identifier===r){return t[n]}}}var Mo=.1;function So(e,t){return Math.log(e/t)/Math.LN2}var Eo=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.reset=function t(){e.prototype.reset.call(this);delete this._distance;delete this._startDistance};t.prototype._start=function e(t){this._startDistance=this._distance=t[0].dist(t[1])};t.prototype._move=function e(t,r){var n=this._distance;this._distance=t[0].dist(t[1]);if(!this._active&&Math.abs(So(this._distance,this._startDistance))<Mo){return}this._active=true;return{zoomDelta:So(this._distance,n),pinchAround:r}};return t}(ko);var Lo=25;function Co(e,t){return e.angleWith(t)*180/Math.PI}var Io=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.reset=function t(){e.prototype.reset.call(this);delete this._minDiameter;delete this._startVector;delete this._vector};t.prototype._start=function e(t){this._startVector=this._vector=t[0].sub(t[1]);this._minDiameter=t[0].dist(t[1])};t.prototype._move=function e(t,r){var n=this._vector;this._vector=t[0].sub(t[1]);if(!this._active&&this._isBelowThreshold(this._vector)){return}this._active=true;return{bearingDelta:Co(this._vector,n),pinchAround:r}};t.prototype._isBelowThreshold=function e(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var r=Math.PI*this._minDiameter;var n=Lo/r*360;var a=Co(t,this._startVector);return Math.abs(a)<n};return t}(ko);function Po(e){return Math.abs(e.y)>Math.abs(e.x)}var Oo=100;var Do=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.reset=function t(){e.prototype.reset.call(this);this._valid=undefined;delete this._firstMove;delete this._lastPoints};t.prototype._start=function e(t){this._lastPoints=t;if(Po(t[0].sub(t[1]))){this._valid=false}};t.prototype._move=function e(t,r,n){var a=t[0].sub(this._lastPoints[0]);var i=t[1].sub(this._lastPoints[1]);this._valid=this.gestureBeginsVertically(a,i,n.timeStamp);if(!this._valid){return}this._lastPoints=t;this._active=true;var o=(a.y+i.y)/2;var s=-.5;return{pitchDelta:o*s}};t.prototype.gestureBeginsVertically=function e(t,r,n){if(this._valid!==undefined){return this._valid}var a=2;var i=t.mag()>=a;var o=r.mag()>=a;if(!i&&!o){return}if(!i||!o){if(this._firstMove===undefined){this._firstMove=n}if(n-this._firstMove<Oo){return undefined}else{return false}}var s=t.y>0===r.y>0;return Po(t)&&Po(r)&&s};return t}(ko);var zo={panStep:100,bearingStep:15,pitchStep:10};var Ro=function e(){var t=zo;this._panStep=t.panStep;this._bearingStep=t.bearingStep;this._pitchStep=t.pitchStep};Ro.prototype.reset=function e(){this._active=false};Ro.prototype.keydown=function e(t){var r=this;if(t.altKey||t.ctrlKey||t.metaKey){return}var n=0;var a=0;var i=0;var o=0;var s=0;switch(t.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:if(t.shiftKey){a=-1}else{t.preventDefault();o=-1}break;case 39:if(t.shiftKey){a=1}else{t.preventDefault();o=1}break;case 38:if(t.shiftKey){i=1}else{t.preventDefault();s=-1}break;case 40:if(t.shiftKey){i=-1}else{t.preventDefault();s=1}break;default:return}return{cameraAnimation:function(e){var l=e.getZoom();e.easeTo({duration:300,easeId:"keyboardHandler",easing:Fo,zoom:n?Math.round(l)+n*(t.shiftKey?2:1):l,bearing:e.getBearing()+a*r._bearingStep,pitch:e.getPitch()+i*r._pitchStep,offset:[-o*r._panStep,-s*r._panStep],center:e.getCenter()},{originalEvent:t})}}};Ro.prototype.enable=function e(){this._enabled=true};Ro.prototype.disable=function e(){this._enabled=false;this.reset()};Ro.prototype.isEnabled=function e(){return this._enabled};Ro.prototype.isActive=function e(){return this._active};function Fo(e){return e*(2-e)}var Bo=4.000244140625;var No=1/100;var jo=1/450;var Uo=2;var Vo=function t(r,n){this._map=r;this._el=r.getCanvasContainer();this._handler=n;this._delta=0;this._defaultZoomRate=No;this._wheelZoomRate=jo;e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Vo.prototype.setZoomRate=function e(t){this._defaultZoomRate=t};Vo.prototype.setWheelZoomRate=function e(t){this._wheelZoomRate=t};Vo.prototype.isEnabled=function e(){return!!this._enabled};Vo.prototype.isActive=function e(){return!!this._active||this._finishTimeout!==undefined};Vo.prototype.isZooming=function e(){return!!this._zooming};Vo.prototype.enable=function e(t){if(this.isEnabled()){return}this._enabled=true;this._aroundCenter=t&&t.around==="center"};Vo.prototype.disable=function e(){if(!this.isEnabled()){return}this._enabled=false};Vo.prototype.wheel=function t(r){if(!this.isEnabled()){return}var n=r.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?r.deltaY*40:r.deltaY;var a=e.browser.now(),i=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a;if(n!==0&&n%Bo===0){this._type="wheel"}else if(n!==0&&Math.abs(n)<4){this._type="trackpad"}else if(i>400){this._type=null;this._lastValue=n;this._timeout=setTimeout(this._onTimeout,40,r)}else if(!this._type){this._type=Math.abs(i*n)<200?"trackpad":"wheel";if(this._timeout){clearTimeout(this._timeout);this._timeout=null;n+=this._lastValue}}if(r.shiftKey&&n){n=n/4}if(this._type){this._lastWheelEvent=r;this._delta-=n;if(!this._active){this._start(r)}}r.preventDefault()};Vo.prototype._onTimeout=function e(t){this._type="wheel";this._delta-=this._lastValue;if(!this._active){this._start(t)}};Vo.prototype._start=function t(n){if(!this._delta){return}if(this._frameId){this._frameId=null}this._active=true;if(!this.isZooming()){this._zooming=true}if(this._finishTimeout){clearTimeout(this._finishTimeout);delete this._finishTimeout}var a=r.mousePos(this._el,n);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(a));this._aroundPoint=this._map.transform.locationPoint(this._around);if(!this._frameId){this._frameId=true;this._handler._triggerRenderFrame()}};Vo.prototype.renderFrame=function e(){return this._onScrollFrame()};Vo.prototype._onScrollFrame=function t(){var r=this;if(!this._frameId){return}this._frameId=null;if(!this.isActive()){return}var n=this._map.transform;if(this._delta!==0){var a=this._type==="wheel"&&Math.abs(this._delta)>Bo?this._wheelZoomRate:this._defaultZoomRate;var i=Uo/(1+Math.exp(-Math.abs(this._delta*a)));if(this._delta<0&&i!==0){i=1/i}var o=typeof this._targetZoom==="number"?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*i)));if(this._type==="wheel"){this._startZoom=n.zoom;this._easing=this._smoothOutEasing(200)}this._delta=0}var s=typeof this._targetZoom==="number"?this._targetZoom:n.zoom;var l=this._startZoom;var u=this._easing;var f=false;var c;if(this._type==="wheel"&&l&&u){var v=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1);var h=u(v);c=e.number(l,s,h);if(v<1){if(!this._frameId){this._frameId=true}}else{f=true}}else{c=s;f=true}this._active=true;if(f){this._active=false;this._finishTimeout=setTimeout((function(){r._zooming=false;r._handler._triggerRenderFrame();delete r._targetZoom;delete r._finishTimeout}),200)}return{noInertia:true,needsRenderFrame:!f,zoomDelta:c-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}};Vo.prototype._smoothOutEasing=function t(r){var n=e.ease;if(this._prevEase){var a=this._prevEase,i=(e.browser.now()-a.start)/a.duration,o=a.easing(i+.01)-a.easing(i),s=.27/Math.sqrt(o*o+1e-4)*.01,l=Math.sqrt(.27*.27-s*s);n=e.bezier(s,l,.25,1)}this._prevEase={start:e.browser.now(),duration:r,easing:n};return n};Vo.prototype.reset=function e(){this._active=false};var Ho=function e(t,r){this._clickZoom=t;this._tapZoom=r};Ho.prototype.enable=function e(){this._clickZoom.enable();this._tapZoom.enable()};Ho.prototype.disable=function e(){this._clickZoom.disable();this._tapZoom.disable()};Ho.prototype.isEnabled=function e(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()};Ho.prototype.isActive=function e(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var qo=function e(){this.reset()};qo.prototype.reset=function e(){this._active=false};qo.prototype.dblclick=function e(t,r){t.preventDefault();return{cameraAnimation:function(e){e.easeTo({duration:300,zoom:e.getZoom()+(t.shiftKey?-1:1),around:e.unproject(r)},{originalEvent:t})}}};qo.prototype.enable=function e(){this._enabled=true};qo.prototype.disable=function e(){this._enabled=false;this.reset()};qo.prototype.isEnabled=function e(){return this._enabled};qo.prototype.isActive=function e(){return this._active};var Go=function e(){this._tap=new po({numTouches:1,numTaps:1});this.reset()};Go.prototype.reset=function e(){this._active=false;delete this._swipePoint;delete this._swipeTouch;delete this._tapTime;this._tap.reset()};Go.prototype.touchstart=function e(t,r,n){if(this._swipePoint){return}if(this._tapTime&&t.timeStamp-this._tapTime>fo){this.reset()}if(!this._tapTime){this._tap.touchstart(t,r,n)}else if(n.length>0){this._swipePoint=r[0];this._swipeTouch=n[0].identifier}};Go.prototype.touchmove=function e(t,r,n){if(!this._tapTime){this._tap.touchmove(t,r,n)}else if(this._swipePoint){if(n[0].identifier!==this._swipeTouch){return}var a=r[0];var i=a.y-this._swipePoint.y;this._swipePoint=a;t.preventDefault();this._active=true;return{zoomDelta:i/128}}};Go.prototype.touchend=function e(t,r,n){if(!this._tapTime){var a=this._tap.touchend(t,r,n);if(a){this._tapTime=t.timeStamp}}else if(this._swipePoint){if(n.length===0){this.reset()}}};Go.prototype.touchcancel=function e(){this.reset()};Go.prototype.enable=function e(){this._enabled=true};Go.prototype.disable=function e(){this._enabled=false;this.reset()};Go.prototype.isEnabled=function e(){return this._enabled};Go.prototype.isActive=function e(){return this._active};var Zo=function e(t,r,n){this._el=t;this._mousePan=r;this._touchPan=n};Zo.prototype.enable=function e(t){this._inertiaOptions=t||{};this._mousePan.enable();this._touchPan.enable();this._el.classList.add("mapboxgl-touch-drag-pan")};Zo.prototype.disable=function e(){this._mousePan.disable();this._touchPan.disable();this._el.classList.remove("mapboxgl-touch-drag-pan")};Zo.prototype.isEnabled=function e(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()};Zo.prototype.isActive=function e(){return this._mousePan.isActive()||this._touchPan.isActive()};var Yo=function e(t,r,n){this._pitchWithRotate=t.pitchWithRotate;this._mouseRotate=r;this._mousePitch=n};Yo.prototype.enable=function e(){this._mouseRotate.enable();if(this._pitchWithRotate){this._mousePitch.enable()}};Yo.prototype.disable=function e(){this._mouseRotate.disable();this._mousePitch.disable()};Yo.prototype.isEnabled=function e(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())};Yo.prototype.isActive=function e(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Wo=function e(t,r,n,a){this._el=t;this._touchZoom=r;this._touchRotate=n;this._tapDragZoom=a;this._rotationDisabled=false;this._enabled=true};Wo.prototype.enable=function e(t){this._touchZoom.enable(t);if(!this._rotationDisabled){this._touchRotate.enable(t)}this._tapDragZoom.enable();this._el.classList.add("mapboxgl-touch-zoom-rotate")};Wo.prototype.disable=function e(){this._touchZoom.disable();this._touchRotate.disable();this._tapDragZoom.disable();this._el.classList.remove("mapboxgl-touch-zoom-rotate")};Wo.prototype.isEnabled=function e(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()};Wo.prototype.isActive=function e(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()};Wo.prototype.disableRotation=function e(){this._rotationDisabled=true;this._touchRotate.disable()};Wo.prototype.enableRotation=function e(){this._rotationDisabled=false;if(this._touchZoom.isEnabled()){this._touchRotate.enable()}};var Xo=function(e){return e.zoom||e.drag||e.pitch||e.rotate};var Jo=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;return t}(e.Event);function Ko(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}var $o=function t(n,a){this._map=n;this._el=this._map.getCanvasContainer();this._handlers=[];this._handlersById={};this._changes=[];this._inertia=new Qi(n);this._bearingSnap=a.bearingSnap;this._previousActiveHandlers={};this._eventsInProgress={};this._addDefaultHandlers(a);e.bindAll(["handleEvent","handleWindowEvent"],this);var i=this._el;this._listeners=[[i,"touchstart",{passive:false}],[i,"touchmove",{passive:false}],[i,"touchend",undefined],[i,"touchcancel",undefined],[i,"mousedown",undefined],[i,"mousemove",undefined],[i,"mouseup",undefined],[e.window.document,"mousemove",{capture:true}],[e.window.document,"mouseup",undefined],[i,"mouseover",undefined],[i,"mouseout",undefined],[i,"dblclick",undefined],[i,"click",undefined],[i,"keydown",{capture:false}],[i,"keyup",undefined],[i,"wheel",{passive:false}],[i,"contextmenu",undefined],[e.window,"blur",undefined]];for(var o=0,s=this._listeners;o<s.length;o+=1){var l=s[o];var u=l[0];var f=l[1];var c=l[2];r.addEventListener(u,f,u===e.window.document?this.handleWindowEvent:this.handleEvent,c)}};$o.prototype.destroy=function t(){for(var n=0,a=this._listeners;n<a.length;n+=1){var i=a[n];var o=i[0];var s=i[1];var l=i[2];r.removeEventListener(o,s,o===e.window.document?this.handleWindowEvent:this.handleEvent,l)}};$o.prototype._addDefaultHandlers=function e(t){var r=this._map;var n=r.getCanvasContainer();this._add("mapEvent",new io(r,t));var a=r.boxZoom=new so(r,t);this._add("boxZoom",a);var i=new go;var o=new qo;r.doubleClickZoom=new Ho(o,i);this._add("tapZoom",i);this._add("clickZoom",o);var s=new Go;this._add("tapDragZoom",s);var l=r.touchPitch=new Do;this._add("touchPitch",l);var u=new _o(t);var f=new wo(t);r.dragRotate=new Yo(t,u,f);this._add("mouseRotate",u,["mousePitch"]);this._add("mousePitch",f,["mouseRotate"]);var c=new bo(t);var v=new To(t);r.dragPan=new Zo(n,c,v);this._add("mousePan",c);this._add("touchPan",v,["touchZoom","touchRotate"]);var h=new Io;var p=new Eo;r.touchZoomRotate=new Wo(n,p,h,s);this._add("touchRotate",h,["touchPan","touchZoom"]);this._add("touchZoom",p,["touchPan","touchRotate"]);var d=r.scrollZoom=new Vo(r,this);this._add("scrollZoom",d,["mousePan"]);var g=r.keyboard=new Ro;this._add("keyboard",g);this._add("blockableMapEvent",new oo(r));for(var y=0,m=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];y<m.length;y+=1){var x=m[y];if(t.interactive&&t[x]){r[x].enable(t[x])}}};$o.prototype._add=function e(t,r,n){this._handlers.push({handlerName:t,handler:r,allowed:n});this._handlersById[t]=r};$o.prototype.stop=function e(){if(this._updatingCamera){return}for(var t=0,r=this._handlers;t<r.length;t+=1){var n=r[t];var a=n.handler;a.reset()}this._inertia.clear();this._fireEvents({},{});this._changes=[]};$o.prototype.isActive=function e(){for(var t=0,r=this._handlers;t<r.length;t+=1){var n=r[t];var a=n.handler;if(a.isActive()){return true}}return false};$o.prototype.isZooming=function e(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()};$o.prototype.isRotating=function e(){return!!this._eventsInProgress.rotate};$o.prototype.isMoving=function e(){return Boolean(Xo(this._eventsInProgress))||this.isZooming()};$o.prototype._blockedByActive=function e(t,r,n){for(var a in t){if(a===n){continue}if(!r||r.indexOf(a)<0){return true}}return false};$o.prototype.handleWindowEvent=function e(t){this.handleEvent(t,t.type+"Window")};$o.prototype._getMapTouches=function e(t){var r=[];for(var n=0,a=t;n<a.length;n+=1){var i=a[n];var o=i.target;if(this._el.contains(o)){r.push(i)}}return r};$o.prototype.handleEvent=function e(t,n){if(t.type==="blur"){this.stop();return}this._updatingCamera=true;var a=t.type==="renderFrame"?undefined:t;var i={needsRenderFrame:false};var o={};var s={};var l=t.touches?this._getMapTouches(t.touches):undefined;var u=l?r.touchPos(this._el,l):r.mousePos(this._el,t);for(var f=0,c=this._handlers;f<c.length;f+=1){var v=c[f];var h=v.handlerName;var p=v.handler;var d=v.allowed;if(!p.isEnabled()){continue}var g=void 0;if(this._blockedByActive(s,d,h)){p.reset()}else{if(p[n||t.type]){g=p[n||t.type](t,u,l);this.mergeHandlerResult(i,o,g,h,a);if(g&&g.needsRenderFrame){this._triggerRenderFrame()}}}if(g||p.isActive()){s[h]=p}}var y={};for(var m in this._previousActiveHandlers){if(!s[m]){y[m]=a}}this._previousActiveHandlers=s;if(Object.keys(y).length||Ko(i)){this._changes.push([i,o,y]);this._triggerRenderFrame()}if(Object.keys(s).length||Ko(i)){this._map._stop(true)}this._updatingCamera=false;var x=i.cameraAnimation;if(x){this._inertia.clear();this._fireEvents({},{});this._changes=[];x(this._map)}};$o.prototype.mergeHandlerResult=function t(r,n,a,i,o){if(!a){return}e.extend(r,a);var s={handlerName:i,originalEvent:a.originalEvent||o};if(a.zoomDelta!==undefined){n.zoom=s}if(a.panDelta!==undefined){n.drag=s}if(a.pitchDelta!==undefined){n.pitch=s}if(a.bearingDelta!==undefined){n.rotate=s}};$o.prototype._applyChanges=function t(){var r={};var n={};var a={};for(var i=0,o=this._changes;i<o.length;i+=1){var s=o[i];var l=s[0];var u=s[1];var f=s[2];if(l.panDelta){r.panDelta=(r.panDelta||new e.Point(0,0))._add(l.panDelta)}if(l.zoomDelta){r.zoomDelta=(r.zoomDelta||0)+l.zoomDelta}if(l.bearingDelta){r.bearingDelta=(r.bearingDelta||0)+l.bearingDelta}if(l.pitchDelta){r.pitchDelta=(r.pitchDelta||0)+l.pitchDelta}if(l.around!==undefined){r.around=l.around}if(l.pinchAround!==undefined){r.pinchAround=l.pinchAround}if(l.noInertia){r.noInertia=l.noInertia}e.extend(n,u);e.extend(a,f)}this._updateMapTransform(r,n,a);this._changes=[]};$o.prototype._updateMapTransform=function e(t,r,n){var a=this._map;var i=a.transform;if(!Ko(t)){return this._fireEvents(r,n)}var o=t.panDelta;var s=t.zoomDelta;var l=t.bearingDelta;var u=t.pitchDelta;var f=t.around;var c=t.pinchAround;if(c!==undefined){f=c}a._stop(true);f=f||a.transform.centerPoint;var v=i.pointLocation(o?f.sub(o):f);if(l){i.bearing+=l}if(u){i.pitch+=u}if(s){i.zoom+=s}i.setLocationAtPoint(v,f);this._map._update();if(!t.noInertia){this._inertia.record(t)}this._fireEvents(r,n)};$o.prototype._fireEvents=function t(r,n){var a=this;var i=Xo(this._eventsInProgress);var o=Xo(r);var s={};for(var l in r){var u=r[l];var f=u.originalEvent;if(!this._eventsInProgress[l]){s[l+"start"]=f}this._eventsInProgress[l]=r[l]}if(!i&&o){this._fireEvent("movestart",o.originalEvent)}for(var c in s){this._fireEvent(c,s[c])}if(r.rotate){this._bearingChanged=true}if(o){this._fireEvent("move",o.originalEvent)}for(var v in r){var h=r[v];var p=h.originalEvent;this._fireEvent(v,p)}var d={};var g;for(var y in this._eventsInProgress){var m=this._eventsInProgress[y];var x=m.handlerName;var b=m.originalEvent;if(!this._handlersById[x].isActive()){delete this._eventsInProgress[y];g=n[x]||b;d[y+"end"]=g}}for(var _ in d){this._fireEvent(_,d[_])}var w=Xo(this._eventsInProgress);if((i||o)&&!w){this._updatingCamera=true;var T=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions);var k=function(e){return e!==0&&-a._bearingSnap<e&&e<a._bearingSnap};if(T){if(k(T.bearing||this._map.getBearing())){T.bearing=0}this._map.easeTo(T,{originalEvent:g})}else{this._map.fire(new e.Event("moveend",{originalEvent:g}));if(k(this._map.getBearing())){this._map.resetNorth()}}this._bearingChanged=false;this._updatingCamera=false}};$o.prototype._fireEvent=function t(r,n){this._map.fire(new e.Event(r,n?{originalEvent:n}:{}))};$o.prototype._triggerRenderFrame=function e(){var t=this;if(this._frameId===undefined){this._frameId=this._map._requestRenderFrame((function(e){delete t._frameId;t.handleEvent(new Jo("renderFrame",{timeStamp:e}));t._applyChanges()}))}};var Qo=function(t){function r(r,n){t.call(this);this._moving=false;this._zooming=false;this.transform=r;this._bearingSnap=n.bearingSnap;e.bindAll(["_renderFrameCallback"],this)}if(t)r.__proto__=t;r.prototype=Object.create(t&&t.prototype);r.prototype.constructor=r;r.prototype.getCenter=function t(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)};r.prototype.setCenter=function e(t,r){return this.jumpTo({center:t},r)};r.prototype.panBy=function t(r,n,a){r=e.Point.convert(r).mult(-1);return this.panTo(this.transform.center,e.extend({offset:r},n),a)};r.prototype.panTo=function t(r,n,a){return this.easeTo(e.extend({center:r},n),a)};r.prototype.getZoom=function e(){return this.transform.zoom};r.prototype.setZoom=function e(t,r){this.jumpTo({zoom:t},r);return this};r.prototype.zoomTo=function t(r,n,a){return this.easeTo(e.extend({zoom:r},n),a)};r.prototype.zoomIn=function e(t,r){this.zoomTo(this.getZoom()+1,t,r);return this};r.prototype.zoomOut=function e(t,r){this.zoomTo(this.getZoom()-1,t,r);return this};r.prototype.getBearing=function e(){return this.transform.bearing};r.prototype.setBearing=function e(t,r){this.jumpTo({bearing:t},r);return this};r.prototype.getPadding=function e(){return this.transform.padding};r.prototype.setPadding=function e(t,r){this.jumpTo({padding:t},r);return this};r.prototype.rotateTo=function t(r,n,a){return this.easeTo(e.extend({bearing:r},n),a)};r.prototype.resetNorth=function t(r,n){this.rotateTo(0,e.extend({duration:1e3},r),n);return this};r.prototype.resetNorthPitch=function t(r,n){this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},r),n);return this};r.prototype.snapToNorth=function e(t,r){if(Math.abs(this.getBearing())<this._bearingSnap){return this.resetNorth(t,r)}return this};r.prototype.getPitch=function e(){return this.transform.pitch};r.prototype.setPitch=function e(t,r){this.jumpTo({pitch:t},r);return this};r.prototype.cameraForBounds=function t(r,n){r=e.LngLatBounds.convert(r);return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),0,n)};r.prototype._cameraForBoxAndBearing=function t(r,n,a,i){var o={top:0,bottom:0,right:0,left:0};i=e.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},i);if(typeof i.padding==="number"){var s=i.padding;i.padding={top:s,bottom:s,right:s,left:s}}i.padding=e.extend(o,i.padding);var l=this.transform;var u=l.padding;var f=l.project(e.LngLat.convert(r));var c=l.project(e.LngLat.convert(n));var v=f.rotate(-a*Math.PI/180);var h=c.rotate(-a*Math.PI/180);var p=new e.Point(Math.max(v.x,h.x),Math.max(v.y,h.y));var d=new e.Point(Math.min(v.x,h.x),Math.min(v.y,h.y));var g=p.sub(d);var y=(l.width-(u.left+u.right+i.padding.left+i.padding.right))/g.x;var m=(l.height-(u.top+u.bottom+i.padding.top+i.padding.bottom))/g.y;if(m<0||y<0){e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var x=Math.min(l.scaleZoom(l.scale*Math.min(y,m)),i.maxZoom);var b=e.Point.convert(i.offset);var _=(i.padding.left-i.padding.right)/2;var w=(i.padding.top-i.padding.bottom)/2;var T=new e.Point(b.x+_,b.y+w);var k=T.mult(l.scale/l.zoomScale(x));var A=l.unproject(f.add(c).div(2).sub(k));return{center:A,zoom:x,bearing:a}};r.prototype.fitBounds=function e(t,r,n){return this._fitInternal(this.cameraForBounds(t,r),r,n)};r.prototype.fitScreenCoordinates=function t(r,n,a,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(r)),this.transform.pointLocation(e.Point.convert(n)),a,i),i,o)};r.prototype._fitInternal=function t(r,n,a){if(!r){return this}n=e.extend(r,n);delete n.padding;return n.linear?this.easeTo(n,a):this.flyTo(n,a)};r.prototype.jumpTo=function t(r,n){this.stop();var a=this.transform;var i=false,o=false,s=false;if("zoom"in r&&a.zoom!==+r.zoom){i=true;a.zoom=+r.zoom}if(r.center!==undefined){a.center=e.LngLat.convert(r.center)}if("bearing"in r&&a.bearing!==+r.bearing){o=true;a.bearing=+r.bearing}if("pitch"in r&&a.pitch!==+r.pitch){s=true;a.pitch=+r.pitch}if(r.padding!=null&&!a.isPaddingEqual(r.padding)){a.padding=r.padding}this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n));if(i){this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n))}if(o){this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n))}if(s){this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n))}return this.fire(new e.Event("moveend",n))};r.prototype.easeTo=function t(r,n){var a=this;this._stop(false,r.easeId);r=e.extend({offset:[0,0],duration:500,easing:e.ease},r);if(r.animate===false||!r.essential&&e.browser.prefersReducedMotion){r.duration=0}var i=this.transform,o=this.getZoom(),s=this.getBearing(),l=this.getPitch(),u=this.getPadding(),f="zoom"in r?+r.zoom:o,c="bearing"in r?this._normalizeBearing(r.bearing,s):s,v="pitch"in r?+r.pitch:l,h="padding"in r?r.padding:i.padding;var p=e.Point.convert(r.offset);var d=i.centerPoint.add(p);var g=i.pointLocation(d);var y=e.LngLat.convert(r.center||g);this._normalizeCenter(y);var m=i.project(g);var x=i.project(y).sub(m);var b=i.zoomScale(f-o);var _,w;if(r.around){_=e.LngLat.convert(r.around);w=i.locationPoint(_)}var T={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};this._zooming=this._zooming||f!==o;this._rotating=this._rotating||s!==c;this._pitching=this._pitching||v!==l;this._padding=!i.isPaddingEqual(h);this._easeId=r.easeId;this._prepareEase(n,r.noMoveStart,T);clearTimeout(this._easeEndTimeoutID);this._ease((function(t){if(a._zooming){i.zoom=e.number(o,f,t)}if(a._rotating){i.bearing=e.number(s,c,t)}if(a._pitching){i.pitch=e.number(l,v,t)}if(a._padding){i.interpolatePadding(u,h,t);d=i.centerPoint.add(p)}if(_){i.setLocationAtPoint(_,w)}else{var r=i.zoomScale(i.zoom-o);var g=f>o?Math.min(2,b):Math.max(.5,b);var y=Math.pow(g,1-t);var T=i.unproject(m.add(x.mult(t*y)).mult(r));i.setLocationAtPoint(i.renderWorldCopies?T.wrap():T,d)}a._fireMoveEvents(n)}),(function(e){a._afterEase(n,e)}),r);return this};r.prototype._prepareEase=function t(r,n,a){if(a===void 0)a={};this._moving=true;if(!n&&!a.moving){this.fire(new e.Event("movestart",r))}if(this._zooming&&!a.zooming){this.fire(new e.Event("zoomstart",r))}if(this._rotating&&!a.rotating){this.fire(new e.Event("rotatestart",r))}if(this._pitching&&!a.pitching){this.fire(new e.Event("pitchstart",r))}};r.prototype._fireMoveEvents=function t(r){this.fire(new e.Event("move",r));if(this._zooming){this.fire(new e.Event("zoom",r))}if(this._rotating){this.fire(new e.Event("rotate",r))}if(this._pitching){this.fire(new e.Event("pitch",r))}};r.prototype._afterEase=function t(r,n){if(this._easeId&&n&&this._easeId===n){return}delete this._easeId;var a=this._zooming;var i=this._rotating;var o=this._pitching;this._moving=false;this._zooming=false;this._rotating=false;this._pitching=false;this._padding=false;if(a){this.fire(new e.Event("zoomend",r))}if(i){this.fire(new e.Event("rotateend",r))}if(o){this.fire(new e.Event("pitchend",r))}this.fire(new e.Event("moveend",r))};r.prototype.flyTo=function t(r,n){var a=this;if(!r.essential&&e.browser.prefersReducedMotion){var i=e.pick(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop();r=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},r);var o=this.transform,s=this.getZoom(),l=this.getBearing(),u=this.getPitch(),f=this.getPadding();var c="zoom"in r?e.clamp(+r.zoom,o.minZoom,o.maxZoom):s;var v="bearing"in r?this._normalizeBearing(r.bearing,l):l;var h="pitch"in r?+r.pitch:u;var p="padding"in r?r.padding:o.padding;var d=o.zoomScale(c-s);var g=e.Point.convert(r.offset);var y=o.centerPoint.add(g);var m=o.pointLocation(y);var x=e.LngLat.convert(r.center||m);this._normalizeCenter(x);var b=o.project(m);var _=o.project(x).sub(b);var w=r.curve;var T=Math.max(o.width,o.height),k=T/d,A=_.mag();if("minZoom"in r){var M=e.clamp(Math.min(r.minZoom,s,c),o.minZoom,o.maxZoom);var S=T/o.zoomScale(M-s);w=Math.sqrt(S/A*2)}var E=w*w;function L(e){var t=(k*k-T*T+(e?-1:1)*E*E*A*A)/(2*(e?k:T)*E*A);return Math.log(Math.sqrt(t*t+1)-t)}function C(e){return(Math.exp(e)-Math.exp(-e))/2}function I(e){return(Math.exp(e)+Math.exp(-e))/2}function P(e){return C(e)/I(e)}var O=L(0);var D=function(e){return I(O)/I(O+w*e)};var z=function(e){return T*((I(O)*P(O+w*e)-C(O))/E)/A};var R=(L(1)-O)/w;if(Math.abs(A)<1e-6||!isFinite(R)){if(Math.abs(T-k)<1e-6){return this.easeTo(r,n)}var F=k<T?-1:1;R=Math.abs(Math.log(k/T))/w;z=function(){return 0};D=function(e){return Math.exp(F*w*e)}}if("duration"in r){r.duration=+r.duration}else{var B="screenSpeed"in r?+r.screenSpeed/w:+r.speed;r.duration=1e3*R/B}if(r.maxDuration&&r.duration>r.maxDuration){r.duration=0}this._zooming=true;this._rotating=l!==v;this._pitching=h!==u;this._padding=!o.isPaddingEqual(p);this._prepareEase(n,false);this._ease((function(t){var r=t*R;var i=1/D(r);o.zoom=t===1?c:s+o.scaleZoom(i);if(a._rotating){o.bearing=e.number(l,v,t)}if(a._pitching){o.pitch=e.number(u,h,t)}if(a._padding){o.interpolatePadding(f,p,t);y=o.centerPoint.add(g)}var d=t===1?x:o.unproject(b.add(_.mult(z(r))).mult(i));o.setLocationAtPoint(o.renderWorldCopies?d.wrap():d,y);a._fireMoveEvents(n)}),(function(){return a._afterEase(n)}),r);return this};r.prototype.isEasing=function e(){return!!this._easeFrameId};r.prototype.stop=function e(){return this._stop()};r.prototype._stop=function e(t,r){if(this._easeFrameId){this._cancelRenderFrame(this._easeFrameId);delete this._easeFrameId;delete this._onEaseFrame}if(this._onEaseEnd){var n=this._onEaseEnd;delete this._onEaseEnd;n.call(this,r)}if(!t){var a=this.handlers;if(a){a.stop()}}return this};r.prototype._ease=function t(r,n,a){if(a.animate===false||a.duration===0){r(1);n()}else{this._easeStart=e.browser.now();this._easeOptions=a;this._onEaseFrame=r;this._onEaseEnd=n;this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback)}};r.prototype._renderFrameCallback=function t(){var r=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(r));if(r<1){this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback)}else{this.stop()}};r.prototype._normalizeBearing=function t(r,n){r=e.wrap(r,-180,180);var a=Math.abs(r-n);if(Math.abs(r-360-n)<a){r-=360}if(Math.abs(r+360-n)<a){r+=360}return r};r.prototype._normalizeCenter=function e(t){var r=this.transform;if(!r.renderWorldCopies||r.lngRange){return}var n=t.lng-r.center.lng;t.lng+=n>180?-360:n<-180?360:0};return r}(e.Evented);var es=function t(r){if(r===void 0)r={};this.options=r;e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};es.prototype.getDefaultPosition=function e(){return"bottom-right"};es.prototype.onAdd=function e(t){var n=this.options&&this.options.compact;this._map=t;this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib");this._innerContainer=r.create("div","mapboxgl-ctrl-attrib-inner",this._container);if(n){this._container.classList.add("mapboxgl-compact")}this._updateAttributions();this._updateEditLink();this._map.on("styledata",this._updateData);this._map.on("sourcedata",this._updateData);this._map.on("moveend",this._updateEditLink);if(n===undefined){this._map.on("resize",this._updateCompact);this._updateCompact()}return this._container};es.prototype.onRemove=function e(){r.remove(this._container);this._map.off("styledata",this._updateData);this._map.off("sourcedata",this._updateData);this._map.off("moveend",this._updateEditLink);this._map.off("resize",this._updateCompact);this._map=undefined;this._attribHTML=undefined};es.prototype._updateEditLink=function t(){var r=this._editLink;if(!r){r=this._editLink=this._container.querySelector(".mapbox-improve-map")}var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(r){var a=n.reduce((function(e,t,r){if(t.value){e+=t.key+"="+t.value+(r<n.length-1?"&":"")}return e}),"?");r.href=e.config.FEEDBACK_URL+"/"+a+(this._map._hash?this._map._hash.getHashString(true):"");r.rel="noopener nofollow"}};es.prototype._updateData=function e(t){if(t&&(t.sourceDataType==="metadata"||t.dataType==="style")){this._updateAttributions();this._updateEditLink()}};es.prototype._updateAttributions=function e(){if(!this._map.style){return}var t=[];if(this.options.customAttribution){if(Array.isArray(this.options.customAttribution)){t=t.concat(this.options.customAttribution.map((function(e){if(typeof e!=="string"){return""}return e})))}else if(typeof this.options.customAttribution==="string"){t.push(this.options.customAttribution)}}if(this._map.style.stylesheet){var r=this._map.style.stylesheet;this.styleOwner=r.owner;this.styleId=r.id}var n=this._map.style.sourceCaches;for(var a in n){var i=n[a];if(i.used){var o=i.getSource();if(o.attribution&&t.indexOf(o.attribution)<0){t.push(o.attribution)}}}t.sort((function(e,t){return e.length-t.length}));t=t.filter((function(e,r){for(var n=r+1;n<t.length;n++){if(t[n].indexOf(e)>=0){return false}}return true}));var s=t.join(" | ");if(s===this._attribHTML){return}this._attribHTML=s;if(t.length){this._innerContainer.innerHTML=s;this._container.classList.remove("mapboxgl-attrib-empty")}else{this._container.classList.add("mapboxgl-attrib-empty")}this._editLink=null};es.prototype._updateCompact=function e(){if(this._map.getCanvasContainer().offsetWidth<=640){this._container.classList.add("mapboxgl-compact")}else{this._container.classList.remove("mapboxgl-compact")}};var ts=function t(){e.bindAll(["_updateLogo"],this);e.bindAll(["_updateCompact"],this)};ts.prototype.onAdd=function e(t){this._map=t;this._container=r.create("div","mapboxgl-ctrl");var n=r.create("a","mapboxgl-ctrl-logo");n.target="_blank";n.rel="noopener nofollow";n.href="https://www.mapbox.com/";n.setAttribute("aria-label",this._map._getUIString("LogoControl.Title"));n.setAttribute("rel","noopener nofollow");this._container.appendChild(n);this._container.style.display="none";this._map.on("sourcedata",this._updateLogo);this._updateLogo();this._map.on("resize",this._updateCompact);this._updateCompact();return this._container};ts.prototype.onRemove=function e(){r.remove(this._container);this._map.off("sourcedata",this._updateLogo);this._map.off("resize",this._updateCompact)};ts.prototype.getDefaultPosition=function e(){return"bottom-left"};ts.prototype._updateLogo=function e(t){if(!t||t.sourceDataType==="metadata"){this._container.style.display=this._logoRequired()?"block":"none"}};ts.prototype._logoRequired=function e(){if(!this._map.style){return}var t=this._map.style.sourceCaches;for(var r in t){var n=t[r].getSource();if(n.mapbox_logo){return true}}return false};ts.prototype._updateCompact=function e(){var t=this._container.children;if(t.length){var r=t[0];if(this._map.getCanvasContainer().offsetWidth<250){r.classList.add("mapboxgl-compact")}else{r.classList.remove("mapboxgl-compact")}}};var rs=function e(){this._queue=[];this._id=0;this._cleared=false;this._currentlyRunning=false};rs.prototype.add=function e(t){var r=++this._id;var n=this._queue;n.push({callback:t,id:r,cancelled:false});return r};rs.prototype.remove=function e(t){var r=this._currentlyRunning;var n=r?this._queue.concat(r):this._queue;for(var a=0,i=n;a<i.length;a+=1){var o=i[a];if(o.id===t){o.cancelled=true;return}}};rs.prototype.run=function e(t){if(t===void 0)t=0;var r=this._currentlyRunning=this._queue;this._queue=[];for(var n=0,a=r;n<a.length;n+=1){var i=a[n];if(i.cancelled){continue}i.callback(t);if(this._cleared){break}}this._cleared=false;this._currentlyRunning=false};rs.prototype.clear=function e(){if(this._currentlyRunning){this._cleared=true}this._queue=[]};var ns={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"};var as=e.window.HTMLImageElement;var is=e.window.HTMLElement;var os=e.window.ImageBitmap;var ss=-2;var ls=22;var us=0;var fs=60;var cs={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:ss,maxZoom:ls,minPitch:us,maxPitch:fs,interactive:true,scrollZoom:true,boxZoom:true,dragRotate:true,dragPan:true,keyboard:true,doubleClickZoom:true,touchZoomRotate:true,touchPitch:true,bearingSnap:7,clickTolerance:3,pitchWithRotate:true,hash:false,attributionControl:true,failIfMajorPerformanceCaveat:false,preserveDrawingBuffer:false,trackResize:true,renderWorldCopies:true,refreshExpiredTiles:true,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:true};var vs=function(n){function a(t){var r=this;t=e.extend({},cs,t);if(t.minZoom!=null&&t.maxZoom!=null&&t.minZoom>t.maxZoom){throw new Error("maxZoom must be greater than or equal to minZoom")}if(t.minPitch!=null&&t.maxPitch!=null&&t.minPitch>t.maxPitch){throw new Error("maxPitch must be greater than or equal to minPitch")}if(t.minPitch!=null&&t.minPitch<us){throw new Error("minPitch must be greater than or equal to "+us)}if(t.maxPitch!=null&&t.maxPitch>fs){throw new Error("maxPitch must be less than or equal to "+fs)}var a=new qi(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies);n.call(this,a,t);this._interactive=t.interactive;this._maxTileCacheSize=t.maxTileCacheSize;this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat;this._preserveDrawingBuffer=t.preserveDrawingBuffer;this._antialias=t.antialias;this._trackResize=t.trackResize;this._bearingSnap=t.bearingSnap;this._refreshExpiredTiles=t.refreshExpiredTiles;this._fadeDuration=t.fadeDuration;this._crossSourceCollisions=t.crossSourceCollisions;this._crossFadingFactor=1;this._collectResourceTiming=t.collectResourceTiming;this._renderTaskQueue=new rs;this._controls=[];this._mapId=e.uniqueId();this._locale=e.extend({},ns,t.locale);this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken);if(typeof t.container==="string"){this._container=e.window.document.getElementById(t.container);if(!this._container){throw new Error("Container '"+t.container+"' not found.")}}else if(t.container instanceof is){this._container=t.container}else{throw new Error("Invalid type: 'container' must be a String or HTMLElement.")}if(t.maxBounds){this.setMaxBounds(t.maxBounds)}e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this);this._setupContainer();this._setupPainter();if(this.painter===undefined){throw new Error("Failed to initialize WebGL.")}this.on("move",(function(){return r._update(false)}));this.on("moveend",(function(){return r._update(false)}));this.on("zoom",(function(){return r._update(true)}));if(typeof e.window!=="undefined"){e.window.addEventListener("online",this._onWindowOnline,false);e.window.addEventListener("resize",this._onWindowResize,false)}this.handlers=new $o(this,t);var i=typeof t.hash==="string"&&t.hash||undefined;this._hash=t.hash&&new Yi(i).addTo(this);if(!this._hash||!this._hash._onHashChange()){this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch});if(t.bounds){this.resize();this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0}))}}this.resize();this._localIdeographFontFamily=t.localIdeographFontFamily;if(t.style){this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily})}if(t.attributionControl){this.addControl(new es({customAttribution:t.customAttribution}))}this.addControl(new ts,t.logoPosition);this.on("style.load",(function(){if(r.transform.unmodified){r.jumpTo(r.style.stylesheet)}}));this.on("data",(function(t){r._update(t.dataType==="style");r.fire(new e.Event(t.dataType+"data",t))}));this.on("dataloading",(function(t){r.fire(new e.Event(t.dataType+"dataloading",t))}))}if(n)a.__proto__=n;a.prototype=Object.create(n&&n.prototype);a.prototype.constructor=a;var i={showTileBoundaries:{configurable:true},showPadding:{configurable:true},showCollisionBoxes:{configurable:true},showOverdrawInspector:{configurable:true},repaint:{configurable:true},vertices:{configurable:true},version:{configurable:true}};a.prototype._getMapId=function e(){return this._mapId};a.prototype.addControl=function t(r,n){if(n===undefined&&r.getDefaultPosition){n=r.getDefaultPosition()}if(n===undefined){n="top-right"}if(!r||!r.onAdd){return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")))}var a=r.onAdd(this);this._controls.push(r);var i=this._controlPositions[n];if(n.indexOf("bottom")!==-1){i.insertBefore(a,i.firstChild)}else{i.appendChild(a)}return this};a.prototype.removeControl=function t(r){if(!r||!r.onRemove){return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")))}var n=this._controls.indexOf(r);if(n>-1){this._controls.splice(n,1)}r.onRemove(this);return this};a.prototype.resize=function t(r){var n=this._containerDimensions();var a=n[0];var i=n[1];this._resizeCanvas(a,i);this.transform.resize(a,i);this.painter.resize(a,i);var o=!this._moving;if(o){this.stop();this.fire(new e.Event("movestart",r)).fire(new e.Event("move",r))}this.fire(new e.Event("resize",r));if(o){this.fire(new e.Event("moveend",r))}return this};a.prototype.getBounds=function e(){return this.transform.getBounds()};a.prototype.getMaxBounds=function e(){return this.transform.getMaxBounds()};a.prototype.setMaxBounds=function t(r){this.transform.setMaxBounds(e.LngLatBounds.convert(r));return this._update()};a.prototype.setMinZoom=function e(t){t=t===null||t===undefined?ss:t;if(t>=ss&&t<=this.transform.maxZoom){this.transform.minZoom=t;this._update();if(this.getZoom()<t){this.setZoom(t)}return this}else{throw new Error("minZoom must be between "+ss+" and the current maxZoom, inclusive")}};a.prototype.getMinZoom=function e(){return this.transform.minZoom};a.prototype.setMaxZoom=function e(t){t=t===null||t===undefined?ls:t;if(t>=this.transform.minZoom){this.transform.maxZoom=t;this._update();if(this.getZoom()>t){this.setZoom(t)}return this}else{throw new Error("maxZoom must be greater than the current minZoom")}};a.prototype.getMaxZoom=function e(){return this.transform.maxZoom};a.prototype.setMinPitch=function e(t){t=t===null||t===undefined?us:t;if(t<us){throw new Error("minPitch must be greater than or equal to "+us)}if(t>=us&&t<=this.transform.maxPitch){this.transform.minPitch=t;this._update();if(this.getPitch()<t){this.setPitch(t)}return this}else{throw new Error("minPitch must be between "+us+" and the current maxPitch, inclusive")}};a.prototype.getMinPitch=function e(){return this.transform.minPitch};a.prototype.setMaxPitch=function e(t){t=t===null||t===undefined?fs:t;if(t>fs){throw new Error("maxPitch must be less than or equal to "+fs)}if(t>=this.transform.minPitch){this.transform.maxPitch=t;this._update();if(this.getPitch()>t){this.setPitch(t)}return this}else{throw new Error("maxPitch must be greater than the current minPitch")}};a.prototype.getMaxPitch=function e(){return this.transform.maxPitch};a.prototype.getRenderWorldCopies=function e(){return this.transform.renderWorldCopies};a.prototype.setRenderWorldCopies=function e(t){this.transform.renderWorldCopies=t;return this._update()};a.prototype.project=function t(r){return this.transform.locationPoint(e.LngLat.convert(r))};a.prototype.unproject=function t(r){return this.transform.pointLocation(e.Point.convert(r))};a.prototype.isMoving=function e(){return this._moving||this.handlers.isMoving()};a.prototype.isZooming=function e(){return this._zooming||this.handlers.isZooming()};a.prototype.isRotating=function e(){return this._rotating||this.handlers.isRotating()};a.prototype._createDelegatedListener=function e(t,r,n){var a=this;var i;if(t==="mouseenter"||t==="mouseover"){var o=false;var s=function(e){var i=a.getLayer(r)?a.queryRenderedFeatures(e.point,{layers:[r]}):[];if(!i.length){o=false}else if(!o){o=true;n.call(a,new ro(t,a,e.originalEvent,{features:i}))}};var l=function(){o=false};return{layer:r,listener:n,delegates:{mousemove:s,mouseout:l}}}else if(t==="mouseleave"||t==="mouseout"){var u=false;var f=function(e){var i=a.getLayer(r)?a.queryRenderedFeatures(e.point,{layers:[r]}):[];if(i.length){u=true}else if(u){u=false;n.call(a,new ro(t,a,e.originalEvent))}};var c=function(e){if(u){u=false;n.call(a,new ro(t,a,e.originalEvent))}};return{layer:r,listener:n,delegates:{mousemove:f,mouseout:c}}}else{var v=function(e){var t=a.getLayer(r)?a.queryRenderedFeatures(e.point,{layers:[r]}):[];if(t.length){e.features=t;n.call(a,e);delete e.features}};return{layer:r,listener:n,delegates:(i={},i[t]=v,i)}}};a.prototype.on=function e(t,r,a){if(a===undefined){return n.prototype.on.call(this,t,r)}var i=this._createDelegatedListener(t,r,a);this._delegatedListeners=this._delegatedListeners||{};this._delegatedListeners[t]=this._delegatedListeners[t]||[];this._delegatedListeners[t].push(i);for(var o in i.delegates){this.on(o,i.delegates[o])}return this};a.prototype.once=function e(t,r,a){if(a===undefined){return n.prototype.once.call(this,t,r)}var i=this._createDelegatedListener(t,r,a);for(var o in i.delegates){this.once(o,i.delegates[o])}return this};a.prototype.off=function e(t,r,a){var i=this;if(a===undefined){return n.prototype.off.call(this,t,r)}var o=function(e){var n=e[t];for(var o=0;o<n.length;o++){var s=n[o];if(s.layer===r&&s.listener===a){for(var l in s.delegates){i.off(l,s.delegates[l])}n.splice(o,1);return i}}};if(this._delegatedListeners&&this._delegatedListeners[t]){o(this._delegatedListeners)}return this};a.prototype.queryRenderedFeatures=function t(r,n){if(!this.style){return[]}if(n===undefined&&r!==undefined&&!(r instanceof e.Point)&&!Array.isArray(r)){n=r;r=undefined}n=n||{};r=r||[[0,0],[this.transform.width,this.transform.height]];var a;if(r instanceof e.Point||typeof r[0]==="number"){a=[e.Point.convert(r)]}else{var i=e.Point.convert(r[0]);var o=e.Point.convert(r[1]);a=[i,new e.Point(o.x,i.y),o,new e.Point(i.x,o.y),i]}return this.style.queryRenderedFeatures(a,n,this.transform)};a.prototype.querySourceFeatures=function e(t,r){return this.style.querySourceFeatures(t,r)};a.prototype.setStyle=function t(r,n){n=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n);if(n.diff!==false&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&r){this._diffStyle(r,n);return this}else{this._localIdeographFontFamily=n.localIdeographFontFamily;return this._updateStyle(r,n)}};a.prototype._getUIString=function e(t){var r=this._locale[t];if(r==null){throw new Error("Missing UI string '"+t+"'")}return r};a.prototype._updateStyle=function e(t,r){if(this.style){this.style.setEventedParent(null);this.style._remove()}if(!t){delete this.style;return this}else{this.style=new gr(this,r||{})}this.style.setEventedParent(this,{style:this.style});if(typeof t==="string"){this.style.loadURL(t)}else{this.style.loadJSON(t)}return this};a.prototype._lazyInitEmptyStyle=function e(){if(!this.style){this.style=new gr(this,{});this.style.setEventedParent(this,{style:this.style});this.style.loadEmpty()}};a.prototype._diffStyle=function t(r,n){var a=this;if(typeof r==="string"){var i=this._requestManager.normalizeStyleURL(r);var o=this._requestManager.transformRequest(i,e.ResourceType.Style);e.getJSON(o,(function(t,r){if(t){a.fire(new e.ErrorEvent(t))}else if(r){a._updateDiff(r,n)}}))}else if(typeof r==="object"){this._updateDiff(r,n)}};a.prototype._updateDiff=function t(r,n){try{if(this.style.setState(r)){this._update(true)}}catch(a){e.warnOnce("Unable to perform style diff: "+(a.message||a.error||a)+".  Rebuilding the style from scratch.");this._updateStyle(r,n)}};a.prototype.getStyle=function e(){if(this.style){return this.style.serialize()}};a.prototype.isStyleLoaded=function t(){if(!this.style){return e.warnOnce("There is no style added to the map.")}return this.style.loaded()};a.prototype.addSource=function e(t,r){this._lazyInitEmptyStyle();this.style.addSource(t,r);return this._update(true)};a.prototype.isSourceLoaded=function t(r){var n=this.style&&this.style.sourceCaches[r];if(n===undefined){this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+r+"'")));return}return n.loaded()};a.prototype.areTilesLoaded=function e(){var t=this.style&&this.style.sourceCaches;for(var r in t){var n=t[r];var a=n._tiles;for(var i in a){var o=a[i];if(!(o.state==="loaded"||o.state==="errored")){return false}}}return true};a.prototype.addSourceType=function e(t,r,n){this._lazyInitEmptyStyle();return this.style.addSourceType(t,r,n)};a.prototype.removeSource=function e(t){this.style.removeSource(t);return this._update(true)};a.prototype.getSource=function e(t){return this.style.getSource(t)};a.prototype.addImage=function t(r,n,a){if(a===void 0)a={};var i=a.pixelRatio;if(i===void 0)i=1;var o=a.sdf;if(o===void 0)o=false;var s=a.stretchX;var l=a.stretchY;var u=a.content;this._lazyInitEmptyStyle();var f=0;if(n instanceof as||os&&n instanceof os){var c=e.browser.getImageData(n);var v=c.width;var h=c.height;var p=c.data;this.style.addImage(r,{data:new e.RGBAImage({width:v,height:h},p),pixelRatio:i,stretchX:s,stretchY:l,content:u,sdf:o,version:f})}else if(n.width===undefined||n.height===undefined){return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, "+"or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}else{var d=n.width;var g=n.height;var y=n.data;var m=n;this.style.addImage(r,{data:new e.RGBAImage({width:d,height:g},new Uint8Array(y)),pixelRatio:i,stretchX:s,stretchY:l,content:u,sdf:o,version:f,userImage:m});if(m.onAdd){m.onAdd(this,r)}}};a.prototype.updateImage=function t(r,n){var a=this.style.getImage(r);if(!a){return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")))}var i=n instanceof as||os&&n instanceof os?e.browser.getImageData(n):n;var o=i.width;var s=i.height;var l=i.data;if(o===undefined||s===undefined){return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, "+"or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}if(o!==a.data.width||s!==a.data.height){return this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")))}var u=!(n instanceof as||os&&n instanceof os);a.data.replace(l,u);this.style.updateImage(r,a)};a.prototype.hasImage=function t(r){if(!r){this.fire(new e.ErrorEvent(new Error("Missing required image id")));return false}return!!this.style.getImage(r)};a.prototype.removeImage=function e(t){this.style.removeImage(t)};a.prototype.loadImage=function t(r,n){e.getImage(this._requestManager.transformRequest(r,e.ResourceType.Image),n)};a.prototype.listImages=function e(){return this.style.listImages()};a.prototype.addLayer=function e(t,r){this._lazyInitEmptyStyle();this.style.addLayer(t,r);return this._update(true)};a.prototype.moveLayer=function e(t,r){this.style.moveLayer(t,r);return this._update(true)};a.prototype.removeLayer=function e(t){this.style.removeLayer(t);return this._update(true)};a.prototype.getLayer=function e(t){return this.style.getLayer(t)};a.prototype.setLayerZoomRange=function e(t,r,n){this.style.setLayerZoomRange(t,r,n);return this._update(true)};a.prototype.setFilter=function e(t,r,n){if(n===void 0)n={};this.style.setFilter(t,r,n);return this._update(true)};a.prototype.getFilter=function e(t){return this.style.getFilter(t)};a.prototype.setPaintProperty=function e(t,r,n,a){if(a===void 0)a={};this.style.setPaintProperty(t,r,n,a);return this._update(true)};a.prototype.getPaintProperty=function e(t,r){return this.style.getPaintProperty(t,r)};a.prototype.setLayoutProperty=function e(t,r,n,a){if(a===void 0)a={};this.style.setLayoutProperty(t,r,n,a);return this._update(true)};a.prototype.getLayoutProperty=function e(t,r){return this.style.getLayoutProperty(t,r)};a.prototype.setLight=function e(t,r){if(r===void 0)r={};this._lazyInitEmptyStyle();this.style.setLight(t,r);return this._update(true)};a.prototype.getLight=function e(){return this.style.getLight()};a.prototype.setFeatureState=function e(t,r){this.style.setFeatureState(t,r);return this._update()};a.prototype.removeFeatureState=function e(t,r){this.style.removeFeatureState(t,r);return this._update()};a.prototype.getFeatureState=function e(t){return this.style.getFeatureState(t)};a.prototype.getContainer=function e(){return this._container};a.prototype.getCanvasContainer=function e(){return this._canvasContainer};a.prototype.getCanvas=function e(){return this._canvas};a.prototype._containerDimensions=function e(){var t=0;var r=0;if(this._container){t=this._container.clientWidth||400;r=this._container.clientHeight||300}return[t,r]};a.prototype._detectMissingCSS=function t(){var r=e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");if(r!=="rgb(250, 128, 114)"){e.warnOnce("This page appears to be missing CSS declarations for "+"Mapbox GL JS, which may cause the map to display incorrectly. "+"Please ensure your page includes mapbox-gl.css, as described "+"in https://www.mapbox.com/mapbox-gl-js/api/.")}};a.prototype._setupContainer=function e(){var t=this._container;t.classList.add("mapboxgl-map");var n=this._missingCSSCanary=r.create("div","mapboxgl-canary",t);n.style.visibility="hidden";this._detectMissingCSS();var a=this._canvasContainer=r.create("div","mapboxgl-canvas-container",t);if(this._interactive){a.classList.add("mapboxgl-interactive")}this._canvas=r.create("canvas","mapboxgl-canvas",a);this._canvas.addEventListener("webglcontextlost",this._contextLost,false);this._canvas.addEventListener("webglcontextrestored",this._contextRestored,false);this._canvas.setAttribute("tabindex","0");this._canvas.setAttribute("aria-label","Map");var i=this._containerDimensions();this._resizeCanvas(i[0],i[1]);var o=this._controlContainer=r.create("div","mapboxgl-control-container",t);var s=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(e){s[e]=r.create("div","mapboxgl-ctrl-"+e,o)}))};a.prototype._resizeCanvas=function t(r,n){var a=e.browser.devicePixelRatio||1;this._canvas.width=a*r;this._canvas.height=a*n;this._canvas.style.width=r+"px";this._canvas.style.height=n+"px"};a.prototype._setupPainter=function r(){var n=e.extend({},t.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||false});var a=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);if(!a){this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new ji(a,this.transform);e.webpSupported.testSupport(a)};a.prototype._contextLost=function t(r){r.preventDefault();if(this._frame){this._frame.cancel();this._frame=null}this.fire(new e.Event("webglcontextlost",{originalEvent:r}))};a.prototype._contextRestored=function t(r){this._setupPainter();this.resize();this._update();this.fire(new e.Event("webglcontextrestored",{originalEvent:r}))};a.prototype.loaded=function e(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()};a.prototype._update=function e(t){if(!this.style){return this}this._styleDirty=this._styleDirty||t;this._sourcesDirty=true;this.triggerRepaint();return this};a.prototype._requestRenderFrame=function e(t){this._update();return this._renderTaskQueue.add(t)};a.prototype._cancelRenderFrame=function e(t){this._renderTaskQueue.remove(t)};a.prototype._render=function t(r){var n=this;var a,i=0;var o=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")){a=o.createQueryEXT();o.beginQueryEXT(o.TIME_ELAPSED_EXT,a);i=e.browser.now()}this.painter.context.setDirty();this.painter.setBaseState();this._renderTaskQueue.run(r);if(this._removed){return}var s=false;if(this.style&&this._styleDirty){this._styleDirty=false;var l=this.transform.zoom;var u=e.browser.now();this.style.zoomHistory.update(l,u);var f=new e.EvaluationParameters(l,{now:u,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()});var c=f.crossFadingFactor();if(c!==1||c!==this._crossFadingFactor){s=true;this._crossFadingFactor=c}this.style.update(f)}if(this.style&&this._sourcesDirty){this._sourcesDirty=false;this.style._updateSources(this.transform)}this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions);this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")});this.fire(new e.Event("render"));if(this.loaded()&&!this._loaded){this._loaded=true;this.fire(new e.Event("load"))}if(this.style&&(this.style.hasTransitions()||s)){this._styleDirty=true}if(this.style&&!this._placementDirty){this.style._releaseSymbolFadeTiles()}if(this.listens("gpu-timing-frame")){var v=e.browser.now()-i;o.endQueryEXT(o.TIME_ELAPSED_EXT,a);setTimeout((function(){var t=o.getQueryObjectEXT(a,o.QUERY_RESULT_EXT)/(1e3*1e3);o.deleteQueryEXT(a);n.fire(new e.Event("gpu-timing-frame",{cpuTime:v,gpuTime:t}))}),50)}if(this.listens("gpu-timing-layer")){var h=this.painter.collectGpuTimers();setTimeout((function(){var t=n.painter.queryGpuTimers(h);n.fire(new e.Event("gpu-timing-layer",{layerTimes:t}))}),50)}var p=this._sourcesDirty||this._styleDirty||this._placementDirty;if(p||this._repaint){this.triggerRepaint()}else if(!this.isMoving()&&this.loaded()){if(!this._fullyLoaded){this._fullyLoaded=true}this.fire(new e.Event("idle"))}return this};a.prototype.remove=function t(){if(this._hash){this._hash.remove()}for(var r=0,n=this._controls;r<n.length;r+=1){var a=n[r];a.onRemove(this)}this._controls=[];if(this._frame){this._frame.cancel();this._frame=null}this._renderTaskQueue.clear();this.painter.destroy();this.handlers.destroy();delete this.handlers;this.setStyle(null);if(typeof e.window!=="undefined"){e.window.removeEventListener("resize",this._onWindowResize,false);e.window.removeEventListener("online",this._onWindowOnline,false)}var i=this.painter.context.gl.getExtension("WEBGL_lose_context");if(i){i.loseContext()}hs(this._canvasContainer);hs(this._controlContainer);hs(this._missingCSSCanary);this._container.classList.remove("mapboxgl-map");this._removed=true;this.fire(new e.Event("remove"))};a.prototype.triggerRepaint=function t(){var r=this;if(this.style&&!this._frame){this._frame=e.browser.frame((function(e){r._frame=null;r._render(e)}))}};a.prototype._onWindowOnline=function e(){this._update()};a.prototype._onWindowResize=function e(t){if(this._trackResize){this.resize({originalEvent:t})._update()}};i.showTileBoundaries.get=function(){return!!this._showTileBoundaries};i.showTileBoundaries.set=function(e){if(this._showTileBoundaries===e){return}this._showTileBoundaries=e;this._update()};i.showPadding.get=function(){return!!this._showPadding};i.showPadding.set=function(e){if(this._showPadding===e){return}this._showPadding=e;this._update()};i.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes};i.showCollisionBoxes.set=function(e){if(this._showCollisionBoxes===e){return}this._showCollisionBoxes=e;if(e){this.style._generateCollisionBoxes()}else{this._update()}};i.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector};i.showOverdrawInspector.set=function(e){if(this._showOverdrawInspector===e){return}this._showOverdrawInspector=e;this._update()};i.repaint.get=function(){return!!this._repaint};i.repaint.set=function(e){if(this._repaint!==e){this._repaint=e;this.triggerRepaint()}};i.vertices.get=function(){return!!this._vertices};i.vertices.set=function(e){this._vertices=e;this._update()};a.prototype._setCacheLimits=function t(r,n){e.setCacheLimits(r,n)};i.version.get=function(){return e.version};Object.defineProperties(a.prototype,i);return a}(Qo);function hs(e){if(e.parentNode){e.parentNode.removeChild(e)}}var ps={showCompass:true,showZoom:true,visualizePitch:false};var ds=function t(n){var a=this;this.options=e.extend({},ps,n);this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group");this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()}));if(this.options.showZoom){e.bindAll(["_setButtonTitle","_updateZoomButtons"],this);this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(e){return a._map.zoomIn({},{originalEvent:e})}));r.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",true);this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(e){return a._map.zoomOut({},{originalEvent:e})}));r.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",true)}if(this.options.showCompass){e.bindAll(["_rotateCompassArrow"],this);this._compass=this._createButton("mapboxgl-ctrl-compass",(function(e){if(a.options.visualizePitch){a._map.resetNorthPitch({},{originalEvent:e})}else{a._map.resetNorth({},{originalEvent:e})}}));this._compassIcon=r.create("span","mapboxgl-ctrl-icon",this._compass);this._compassIcon.setAttribute("aria-hidden",true)}};ds.prototype._updateZoomButtons=function e(){var t=this._map.getZoom();this._zoomInButton.disabled=t===this._map.getMaxZoom();this._zoomOutButton.disabled=t===this._map.getMinZoom()};ds.prototype._rotateCompassArrow=function e(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t};ds.prototype.onAdd=function e(t){this._map=t;if(this.options.showZoom){this._setButtonTitle(this._zoomInButton,"ZoomIn");this._setButtonTitle(this._zoomOutButton,"ZoomOut");this._map.on("zoom",this._updateZoomButtons);this._updateZoomButtons()}if(this.options.showCompass){this._setButtonTitle(this._compass,"ResetBearing");if(this.options.visualizePitch){this._map.on("pitch",this._rotateCompassArrow)}this._map.on("rotate",this._rotateCompassArrow);this._rotateCompassArrow();this._handler=new gs(this._map,this._compass,this.options.visualizePitch)}return this._container};ds.prototype.onRemove=function e(){r.remove(this._container);if(this.options.showZoom){this._map.off("zoom",this._updateZoomButtons)}if(this.options.showCompass){if(this.options.visualizePitch){this._map.off("pitch",this._rotateCompassArrow)}this._map.off("rotate",this._rotateCompassArrow);this._handler.off();delete this._handler}delete this._map};ds.prototype._createButton=function e(t,n){var a=r.create("button",t,this._container);a.type="button";a.addEventListener("click",n);return a};ds.prototype._setButtonTitle=function e(t,r){var n=this._map._getUIString("NavigationControl."+r);t.title=n;t.setAttribute("aria-label",n)};var gs=function t(n,a,i){if(i===void 0)i=false;this._clickTolerance=10;this.element=a;this.mouseRotate=new _o({clickTolerance:n.dragRotate._mouseRotate._clickTolerance});this.map=n;if(i){this.mousePitch=new wo({clickTolerance:n.dragRotate._mousePitch._clickTolerance})}e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this);r.addEventListener(a,"mousedown",this.mousedown);r.addEventListener(a,"touchstart",this.touchstart,{passive:false});r.addEventListener(a,"touchmove",this.touchmove);r.addEventListener(a,"touchend",this.touchend);r.addEventListener(a,"touchcancel",this.reset)};gs.prototype.down=function e(t,n){this.mouseRotate.mousedown(t,n);if(this.mousePitch){this.mousePitch.mousedown(t,n)}r.disableDrag()};gs.prototype.move=function e(t,r){var n=this.map;var a=this.mouseRotate.mousemoveWindow(t,r);if(a&&a.bearingDelta){n.setBearing(n.getBearing()+a.bearingDelta)}if(this.mousePitch){var i=this.mousePitch.mousemoveWindow(t,r);if(i&&i.pitchDelta){n.setPitch(n.getPitch()+i.pitchDelta)}}};gs.prototype.off=function e(){var t=this.element;r.removeEventListener(t,"mousedown",this.mousedown);r.removeEventListener(t,"touchstart",this.touchstart,{passive:false});r.removeEventListener(t,"touchmove",this.touchmove);r.removeEventListener(t,"touchend",this.touchend);r.removeEventListener(t,"touchcancel",this.reset);this.offTemp()};gs.prototype.offTemp=function t(){r.enableDrag();r.removeEventListener(e.window,"mousemove",this.mousemove);r.removeEventListener(e.window,"mouseup",this.mouseup)};gs.prototype.mousedown=function t(n){this.down(e.extend({},n,{ctrlKey:true,preventDefault:function(){return n.preventDefault()}}),r.mousePos(this.element,n));r.addEventListener(e.window,"mousemove",this.mousemove);r.addEventListener(e.window,"mouseup",this.mouseup)};gs.prototype.mousemove=function e(t){this.move(t,r.mousePos(this.element,t))};gs.prototype.mouseup=function e(t){this.mouseRotate.mouseupWindow(t);if(this.mousePitch){this.mousePitch.mouseupWindow(t)}this.offTemp()};gs.prototype.touchstart=function e(t){if(t.targetTouches.length!==1){this.reset()}else{this._startPos=this._lastPos=r.touchPos(this.element,t.targetTouches)[0];this.down({type:"mousedown",button:0,ctrlKey:true,preventDefault:function(){return t.preventDefault()}},this._startPos)}};gs.prototype.touchmove=function e(t){if(t.targetTouches.length!==1){this.reset()}else{this._lastPos=r.touchPos(this.element,t.targetTouches)[0];this.move({preventDefault:function(){return t.preventDefault()}},this._lastPos)}};gs.prototype.touchend=function e(t){if(t.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance){this.element.click()}this.reset()};gs.prototype.reset=function e(){this.mouseRotate.reset();if(this.mousePitch){this.mousePitch.reset()}delete this._startPos;delete this._lastPos;this.offTemp()};function ys(t,r,n){t=new e.LngLat(t.lng,t.lat);if(r){var a=new e.LngLat(t.lng-360,t.lat);var i=new e.LngLat(t.lng+360,t.lat);var o=n.locationPoint(t).distSqr(r);if(n.locationPoint(a).distSqr(r)<o){t=a}else if(n.locationPoint(i).distSqr(r)<o){t=i}}while(Math.abs(t.lng-n.center.lng)>180){var s=n.locationPoint(t);if(s.x>=0&&s.y>=0&&s.x<=n.width&&s.y<=n.height){break}if(t.lng>n.center.lng){t.lng-=360}else{t.lng+=360}}return t}var ms={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function xs(e,t,r){var n=e.classList;for(var a in ms){n.remove("mapboxgl-"+r+"-anchor-"+a)}n.add("mapboxgl-"+r+"-anchor-"+t)}var bs=function(t){function n(n,a){var i=this;t.call(this);if(n instanceof e.window.HTMLElement||a){n=e.extend({element:n},a)}e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this);this._anchor=n&&n.anchor||"center";this._color=n&&n.color||"#3FB1CE";this._draggable=n&&n.draggable||false;this._state="inactive";this._rotation=n&&n.rotation||0;this._rotationAlignment=n&&n.rotationAlignment||"auto";this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment;if(!n||!n.element){this._defaultMarker=true;this._element=r.create("div");this._element.setAttribute("aria-label","Map marker");var o=r.createNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"display","block");o.setAttributeNS(null,"height","41px");o.setAttributeNS(null,"width","27px");o.setAttributeNS(null,"viewBox","0 0 27 41");var s=r.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"stroke","none");s.setAttributeNS(null,"stroke-width","1");s.setAttributeNS(null,"fill","none");s.setAttributeNS(null,"fill-rule","evenodd");var l=r.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"fill-rule","nonzero");var u=r.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"transform","translate(3.0, 29.0)");u.setAttributeNS(null,"fill","#000000");var f=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(var c=0,v=f;c<v.length;c+=1){var h=v[c];var p=r.createNS("http://www.w3.org/2000/svg","ellipse");p.setAttributeNS(null,"opacity","0.04");p.setAttributeNS(null,"cx","10.5");p.setAttributeNS(null,"cy","5.80029008");p.setAttributeNS(null,"rx",h["rx"]);p.setAttributeNS(null,"ry",h["ry"]);u.appendChild(p)}var d=r.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"fill",this._color);var g=r.createNS("http://www.w3.org/2000/svg","path");g.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z");d.appendChild(g);var y=r.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"opacity","0.25");y.setAttributeNS(null,"fill","#000000");var m=r.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z");y.appendChild(m);var x=r.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"transform","translate(6.0, 7.0)");x.setAttributeNS(null,"fill","#FFFFFF");var b=r.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"transform","translate(8.0, 8.0)");var _=r.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#000000");_.setAttributeNS(null,"opacity","0.25");_.setAttributeNS(null,"cx","5.5");_.setAttributeNS(null,"cy","5.5");_.setAttributeNS(null,"r","5.4999962");var w=r.createNS("http://www.w3.org/2000/svg","circle");w.setAttributeNS(null,"fill","#FFFFFF");w.setAttributeNS(null,"cx","5.5");w.setAttributeNS(null,"cy","5.5");w.setAttributeNS(null,"r","5.4999962");b.appendChild(_);b.appendChild(w);l.appendChild(u);l.appendChild(d);l.appendChild(y);l.appendChild(x);l.appendChild(b);o.appendChild(l);this._element.appendChild(o);this._offset=e.Point.convert(n&&n.offset||[0,-14])}else{this._element=n.element;this._offset=e.Point.convert(n&&n.offset||[0,0])}this._element.classList.add("mapboxgl-marker");this._element.addEventListener("dragstart",(function(e){e.preventDefault()}));this._element.addEventListener("mousedown",(function(e){e.preventDefault()}));this._element.addEventListener("focus",(function(){var e=i._map.getContainer();e.scrollTop=0;e.scrollLeft=0}));xs(this._element,this._anchor,"marker");this._popup=null}if(t)n.__proto__=t;n.prototype=Object.create(t&&t.prototype);n.prototype.constructor=n;n.prototype.addTo=function e(t){this.remove();this._map=t;t.getCanvasContainer().appendChild(this._element);t.on("move",this._update);t.on("moveend",this._update);this.setDraggable(this._draggable);this._update();this._map.on("click",this._onMapClick);return this};n.prototype.remove=function e(){if(this._map){this._map.off("click",this._onMapClick);this._map.off("move",this._update);this._map.off("moveend",this._update);this._map.off("mousedown",this._addDragHandler);this._map.off("touchstart",this._addDragHandler);this._map.off("mouseup",this._onUp);this._map.off("touchend",this._onUp);this._map.off("mousemove",this._onMove);this._map.off("touchmove",this._onMove);delete this._map}r.remove(this._element);if(this._popup){this._popup.remove()}return this};n.prototype.getLngLat=function e(){return this._lngLat};n.prototype.setLngLat=function t(r){this._lngLat=e.LngLat.convert(r);this._pos=null;if(this._popup){this._popup.setLngLat(this._lngLat)}this._update();return this};n.prototype.getElement=function e(){return this._element};n.prototype.setPopup=function e(t){if(this._popup){this._popup.remove();this._popup=null;this._element.removeEventListener("keypress",this._onKeyPress);if(!this._originalTabIndex){this._element.removeAttribute("tabindex")}}if(t){if(!("offset"in t.options)){var r=41-5.8/2;var n=13.5;var a=Math.sqrt(Math.pow(n,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-r],"bottom-left":[a,(r-n+a)*-1],"bottom-right":[-a,(r-n+a)*-1],left:[n,(r-n)*-1],right:[-n,(r-n)*-1]}:this._offset}this._popup=t;if(this._lngLat){this._popup.setLngLat(this._lngLat)}this._originalTabIndex=this._element.getAttribute("tabindex");if(!this._originalTabIndex){this._element.setAttribute("tabindex","0")}this._element.addEventListener("keypress",this._onKeyPress)}return this};n.prototype._onKeyPress=function e(t){var r=t.code;var n=t.charCode||t.keyCode;if(r==="Space"||r==="Enter"||n===32||n===13){this.togglePopup()}};n.prototype._onMapClick=function e(t){var r=t.originalEvent.target;var n=this._element;if(this._popup&&(r===n||n.contains(r))){this.togglePopup()}};n.prototype.getPopup=function e(){return this._popup};n.prototype.togglePopup=function e(){var t=this._popup;if(!t){return this}else if(t.isOpen()){t.remove()}else{t.addTo(this._map)}return this};n.prototype._update=function e(t){if(!this._map){return}if(this._map.transform.renderWorldCopies){this._lngLat=ys(this._lngLat,this._pos,this._map.transform)}this._pos=this._map.project(this._lngLat)._add(this._offset);var n="";if(this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"){n="rotateZ("+this._rotation+"deg)"}else if(this._rotationAlignment==="map"){n="rotateZ("+(this._rotation-this._map.getBearing())+"deg)"}var a="";if(this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"){a="rotateX(0deg)"}else if(this._pitchAlignment==="map"){a="rotateX("+this._map.getPitch()+"deg)"}if(!t||t.type==="moveend"){this._pos=this._pos.round()}r.setTransform(this._element,ms[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+a+" "+n)};n.prototype.getOffset=function e(){return this._offset};n.prototype.setOffset=function t(r){this._offset=e.Point.convert(r);this._update();return this};n.prototype._onMove=function t(r){this._pos=r.point.sub(this._positionDelta);this._lngLat=this._map.unproject(this._pos);this.setLngLat(this._lngLat);this._element.style.pointerEvents="none";if(this._state==="pending"){this._state="active";this.fire(new e.Event("dragstart"))}this.fire(new e.Event("drag"))};n.prototype._onUp=function t(){this._element.style.pointerEvents="auto";this._positionDelta=null;this._map.off("mousemove",this._onMove);this._map.off("touchmove",this._onMove);if(this._state==="active"){this.fire(new e.Event("dragend"))}this._state="inactive"};n.prototype._addDragHandler=function e(t){if(this._element.contains(t.originalEvent.target)){t.preventDefault();this._positionDelta=t.point.sub(this._pos).add(this._offset);this._state="pending";this._map.on("mousemove",this._onMove);this._map.on("touchmove",this._onMove);this._map.once("mouseup",this._onUp);this._map.once("touchend",this._onUp)}};n.prototype.setDraggable=function e(t){this._draggable=!!t;if(this._map){if(t){this._map.on("mousedown",this._addDragHandler);this._map.on("touchstart",this._addDragHandler)}else{this._map.off("mousedown",this._addDragHandler);this._map.off("touchstart",this._addDragHandler)}}return this};n.prototype.isDraggable=function e(){return this._draggable};n.prototype.setRotation=function e(t){this._rotation=t||0;this._update();return this};n.prototype.getRotation=function e(){return this._rotation};n.prototype.setRotationAlignment=function e(t){this._rotationAlignment=t||"auto";this._update();return this};n.prototype.getRotationAlignment=function e(){return this._rotationAlignment};n.prototype.setPitchAlignment=function e(t){this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment;this._update();return this};n.prototype.getPitchAlignment=function e(){return this._pitchAlignment};return n}(e.Evented);var _s={positionOptions:{enableHighAccuracy:false,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:false,showAccuracyCircle:true,showUserLocation:true};var ws;function Ts(t){if(ws!==undefined){t(ws)}else if(e.window.navigator.permissions!==undefined){e.window.navigator.permissions.query({name:"geolocation"}).then((function(e){ws=e.state!=="denied";t(ws)}))}else{ws=!!e.window.navigator.geolocation;t(ws)}}var ks=0;var As=false;var Ms=function(t){function n(r){t.call(this);this.options=e.extend({},_s,r);e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}if(t)n.__proto__=t;n.prototype=Object.create(t&&t.prototype);n.prototype.constructor=n;n.prototype.onAdd=function e(t){this._map=t;this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group");Ts(this._setupUI);return this._container};n.prototype.onRemove=function t(){if(this._geolocationWatchID!==undefined){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID);this._geolocationWatchID=undefined}if(this.options.showUserLocation&&this._userLocationDotMarker){this._userLocationDotMarker.remove()}if(this.options.showAccuracyCircle&&this._accuracyCircleMarker){this._accuracyCircleMarker.remove()}r.remove(this._container);this._map.off("zoom",this._onZoom);this._map=undefined;ks=0;As=false};n.prototype._isOutOfMapMaxBounds=function e(t){var r=this._map.getMaxBounds();var n=t.coords;return r&&(n.longitude<r.getWest()||n.longitude>r.getEast()||n.latitude<r.getSouth()||n.latitude>r.getNorth())};n.prototype._setErrorState=function e(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}};n.prototype._onSuccess=function t(r){if(!this._map){return}if(this._isOutOfMapMaxBounds(r)){this._setErrorState();this.fire(new e.Event("outofmaxbounds",r));this._updateMarker();this._finish();return}if(this.options.trackUserLocation){this._lastKnownPosition=r;switch(this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}}if(this.options.showUserLocation&&this._watchState!=="OFF"){this._updateMarker(r)}if(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK"){this._updateCamera(r)}if(this.options.showUserLocation){this._dotElement.classList.remove("mapboxgl-user-location-dot-stale")}this.fire(new e.Event("geolocate",r));this._finish()};n.prototype._updateCamera=function t(r){var n=new e.LngLat(r.coords.longitude,r.coords.latitude);var a=r.coords.accuracy;var i=this._map.getBearing();var o=e.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(a),o,{geolocateSource:true})};n.prototype._updateMarker=function t(r){if(r){var n=new e.LngLat(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map);this._userLocationDotMarker.setLngLat(n).addTo(this._map);this._accuracy=r.coords.accuracy;if(this.options.showUserLocation&&this.options.showAccuracyCircle){this._updateCircleRadius()}}else{this._userLocationDotMarker.remove();this._accuracyCircleMarker.remove()}};n.prototype._updateCircleRadius=function e(){var t=this._map._container.clientHeight/2;var r=this._map.unproject([0,t]);var n=this._map.unproject([1,t]);var a=r.distanceTo(n);var i=Math.ceil(2*this._accuracy/a);this._circleElement.style.width=i+"px";this._circleElement.style.height=i+"px"};n.prototype._onZoom=function e(){if(this.options.showUserLocation&&this.options.showAccuracyCircle){this._updateCircleRadius()}};n.prototype._onError=function t(r){if(!this._map){return}if(this.options.trackUserLocation){if(r.code===1){this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this._geolocateButton.disabled=true;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n;this._geolocateButton.setAttribute("aria-label",n);if(this._geolocationWatchID!==undefined){this._clearWatch()}}else if(r.code===3&&As){return}else{this._setErrorState()}}if(this._watchState!=="OFF"&&this.options.showUserLocation){this._dotElement.classList.add("mapboxgl-user-location-dot-stale")}this.fire(new e.Event("error",r));this._finish()};n.prototype._finish=function e(){if(this._timeoutId){clearTimeout(this._timeoutId)}this._timeoutId=undefined};n.prototype._setupUI=function t(n){var a=this;this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()}));this._geolocateButton=r.create("button","mapboxgl-ctrl-geolocate",this._container);r.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",true);this._geolocateButton.type="button";if(n===false){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=true;this._geolocateButton.title=i;this._geolocateButton.setAttribute("aria-label",i)}else{var o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o;this._geolocateButton.setAttribute("aria-label",o)}if(this.options.trackUserLocation){this._geolocateButton.setAttribute("aria-pressed","false");this._watchState="OFF"}if(this.options.showUserLocation){this._dotElement=r.create("div","mapboxgl-user-location-dot");this._userLocationDotMarker=new bs(this._dotElement);this._circleElement=r.create("div","mapboxgl-user-location-accuracy-circle");this._accuracyCircleMarker=new bs({element:this._circleElement,pitchAlignment:"map"});if(this.options.trackUserLocation){this._watchState="OFF"}this._map.on("zoom",this._onZoom)}this._geolocateButton.addEventListener("click",this.trigger.bind(this));this._setup=true;if(this.options.trackUserLocation){this._map.on("movestart",(function(t){var r=t.originalEvent&&t.originalEvent.type==="resize";if(!t.geolocateSource&&a._watchState==="ACTIVE_LOCK"&&!r){a._watchState="BACKGROUND";a._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");a._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");a.fire(new e.Event("trackuserlocationend"))}}))}};n.prototype.trigger=function t(){if(!this._setup){e.warnOnce("Geolocate control triggered before added to a map");return false}if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE";this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ks--;As=false;this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");if(this._lastKnownPosition){this._updateCamera(this._lastKnownPosition)}this.fire(new e.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==undefined){this._clearWatch()}else if(this._geolocationWatchID===undefined){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.setAttribute("aria-pressed","true");ks++;var r;if(ks>1){r={maximumAge:6e5,timeout:0};As=true}else{r=this.options.positionOptions;As=false}this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,r)}}else{e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions);this._timeoutId=setTimeout(this._finish,1e4)}return true};n.prototype._clearWatch=function t(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID);this._geolocationWatchID=undefined;this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.setAttribute("aria-pressed","false");if(this.options.showUserLocation){this._updateMarker(null)}};return n}(e.Evented);var Ss={maxWidth:100,unit:"metric"};var Es=function t(r){this.options=e.extend({},Ss,r);e.bindAll(["_onMove","setUnit"],this)};Es.prototype.getDefaultPosition=function e(){return"bottom-left"};Es.prototype._onMove=function e(){Ls(this._map,this._container,this.options)};Es.prototype.onAdd=function e(t){this._map=t;this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer());this._map.on("move",this._onMove);this._onMove();return this._container};Es.prototype.onRemove=function e(){r.remove(this._container);this._map.off("move",this._onMove);this._map=undefined};Es.prototype.setUnit=function e(t){this.options.unit=t;Ls(this._map,this._container,this.options)};function Ls(e,t,r){var n=r&&r.maxWidth||100;var a=e._container.clientHeight/2;var i=e.unproject([0,a]);var o=e.unproject([n,a]);var s=i.distanceTo(o);if(r&&r.unit==="imperial"){var l=3.2808*s;if(l>5280){var u=l/5280;Cs(t,n,u,e._getUIString("ScaleControl.Miles"))}else{Cs(t,n,l,e._getUIString("ScaleControl.Feet"))}}else if(r&&r.unit==="nautical"){var f=s/1852;Cs(t,n,f,e._getUIString("ScaleControl.NauticalMiles"))}else if(s>=1e3){Cs(t,n,s/1e3,e._getUIString("ScaleControl.Kilometers"))}else{Cs(t,n,s,e._getUIString("ScaleControl.Meters"))}}function Cs(e,t,r,n){var a=Ps(r);var i=a/r;e.style.width=t*i+"px";e.innerHTML=a+"&nbsp;"+n}function Is(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}function Ps(e){var t=Math.pow(10,(""+Math.floor(e)).length-1);var r=e/t;r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:r>=1?1:Is(r);return t*r}var Os=function t(r){this._fullscreen=false;if(r&&r.container){if(r.container instanceof e.window.HTMLElement){this._container=r.container}else{e.warnOnce("Full screen control 'container' must be a DOM element.")}}e.bindAll(["_onClickFullscreen","_changeIcon"],this);if("onfullscreenchange"in e.window.document){this._fullscreenchange="fullscreenchange"}else if("onmozfullscreenchange"in e.window.document){this._fullscreenchange="mozfullscreenchange"}else if("onwebkitfullscreenchange"in e.window.document){this._fullscreenchange="webkitfullscreenchange"}else if("onmsfullscreenchange"in e.window.document){this._fullscreenchange="MSFullscreenChange"}};Os.prototype.onAdd=function t(n){this._map=n;if(!this._container){this._container=this._map.getContainer()}this._controlContainer=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group");if(this._checkFullscreenSupport()){this._setupUI()}else{this._controlContainer.style.display="none";e.warnOnce("This device does not support fullscreen mode.")}return this._controlContainer};Os.prototype.onRemove=function t(){r.remove(this._controlContainer);this._map=null;e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)};Os.prototype._checkFullscreenSupport=function t(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)};Os.prototype._setupUI=function t(){var n=this._fullscreenButton=r.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);r.create("span","mapboxgl-ctrl-icon",n).setAttribute("aria-hidden",true);n.type="button";this._updateTitle();this._fullscreenButton.addEventListener("click",this._onClickFullscreen);e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)};Os.prototype._updateTitle=function e(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t);this._fullscreenButton.title=t};Os.prototype._getTitle=function e(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")};Os.prototype._isFullscreen=function e(){return this._fullscreen};Os.prototype._changeIcon=function t(){var r=e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement;if(r===this._container!==this._fullscreen){this._fullscreen=!this._fullscreen;this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink");this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen");this._updateTitle()}};Os.prototype._onClickFullscreen=function t(){if(this._isFullscreen()){if(e.window.document.exitFullscreen){e.window.document.exitFullscreen()}else if(e.window.document.mozCancelFullScreen){e.window.document.mozCancelFullScreen()}else if(e.window.document.msExitFullscreen){e.window.document.msExitFullscreen()}else if(e.window.document.webkitCancelFullScreen){e.window.document.webkitCancelFullScreen()}}else if(this._container.requestFullscreen){this._container.requestFullscreen()}else if(this._container.mozRequestFullScreen){this._container.mozRequestFullScreen()}else if(this._container.msRequestFullscreen){this._container.msRequestFullscreen()}else if(this._container.webkitRequestFullscreen){this._container.webkitRequestFullscreen()}};var Ds={closeButton:true,closeOnClick:true,className:"",maxWidth:"240px"};var zs=function(t){function n(r){t.call(this);this.options=e.extend(Object.create(Ds),r);e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}if(t)n.__proto__=t;n.prototype=Object.create(t&&t.prototype);n.prototype.constructor=n;n.prototype.addTo=function t(r){if(this._map){this.remove()}this._map=r;if(this.options.closeOnClick){this._map.on("click",this._onClose)}if(this.options.closeOnMove){this._map.on("move",this._onClose)}this._map.on("remove",this.remove);this._update();if(this._trackPointer){this._map.on("mousemove",this._onMouseMove);this._map.on("mouseup",this._onMouseUp);if(this._container){this._container.classList.add("mapboxgl-popup-track-pointer")}this._map._canvasContainer.classList.add("mapboxgl-track-pointer")}else{this._map.on("move",this._update)}this.fire(new e.Event("open"));return this};n.prototype.isOpen=function e(){return!!this._map};n.prototype.remove=function t(){if(this._content){r.remove(this._content)}if(this._container){r.remove(this._container);delete this._container}if(this._map){this._map.off("move",this._update);this._map.off("move",this._onClose);this._map.off("click",this._onClose);this._map.off("remove",this.remove);this._map.off("mousemove",this._onMouseMove);this._map.off("mouseup",this._onMouseUp);this._map.off("drag",this._onDrag);delete this._map}this.fire(new e.Event("close"));return this};n.prototype.getLngLat=function e(){return this._lngLat};n.prototype.setLngLat=function t(r){this._lngLat=e.LngLat.convert(r);this._pos=null;this._trackPointer=false;this._update();if(this._map){this._map.on("move",this._update);this._map.off("mousemove",this._onMouseMove);if(this._container){this._container.classList.remove("mapboxgl-popup-track-pointer")}this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")}return this};n.prototype.trackPointer=function e(){this._trackPointer=true;this._pos=null;this._update();if(this._map){this._map.off("move",this._update);this._map.on("mousemove",this._onMouseMove);this._map.on("drag",this._onDrag);if(this._container){this._container.classList.add("mapboxgl-popup-track-pointer")}this._map._canvasContainer.classList.add("mapboxgl-track-pointer")}return this};n.prototype.getElement=function e(){return this._container};n.prototype.setText=function t(r){return this.setDOMContent(e.window.document.createTextNode(r))};n.prototype.setHTML=function t(r){var n=e.window.document.createDocumentFragment();var a=e.window.document.createElement("body");var i;a.innerHTML=r;while(true){i=a.firstChild;if(!i){break}n.appendChild(i)}return this.setDOMContent(n)};n.prototype.getMaxWidth=function e(){return this._container&&this._container.style.maxWidth};n.prototype.setMaxWidth=function e(t){this.options.maxWidth=t;this._update();return this};n.prototype.setDOMContent=function e(t){this._createContent();this._content.appendChild(t);this._update();return this};n.prototype.addClassName=function e(t){if(this._container){this._container.classList.add(t)}};n.prototype.removeClassName=function e(t){if(this._container){this._container.classList.remove(t)}};n.prototype.toggleClassName=function e(t){if(this._container){return this._container.classList.toggle(t)}};n.prototype._createContent=function e(){if(this._content){r.remove(this._content)}this._content=r.create("div","mapboxgl-popup-content",this._container);if(this.options.closeButton){this._closeButton=r.create("button","mapboxgl-popup-close-button",this._content);this._closeButton.type="button";this._closeButton.setAttribute("aria-label","Close popup");this._closeButton.innerHTML="&#215;";this._closeButton.addEventListener("click",this._onClose)}};n.prototype._onMouseUp=function e(t){this._update(t.point)};n.prototype._onMouseMove=function e(t){this._update(t.point)};n.prototype._onDrag=function e(t){this._update(t.point)};n.prototype._update=function e(t){var n=this;var a=this._lngLat||this._trackPointer;if(!this._map||!a||!this._content){return}if(!this._container){this._container=r.create("div","mapboxgl-popup",this._map.getContainer());this._tip=r.create("div","mapboxgl-popup-tip",this._container);this._container.appendChild(this._content);if(this.options.className){this.options.className.split(" ").forEach((function(e){return n._container.classList.add(e)}))}if(this._trackPointer){this._container.classList.add("mapboxgl-popup-track-pointer")}}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth){this._container.style.maxWidth=this.options.maxWidth}if(this._map.transform.renderWorldCopies&&!this._trackPointer){this._lngLat=ys(this._lngLat,this._pos,this._map.transform)}if(this._trackPointer&&!t){return}var i=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);var o=this.options.anchor;var s=Rs(this.options.offset);if(!o){var l=this._container.offsetWidth;var u=this._container.offsetHeight;var f;if(i.y+s.bottom.y<u){f=["top"]}else if(i.y>this._map.transform.height-u){f=["bottom"]}else{f=[]}if(i.x<l/2){f.push("left")}else if(i.x>this._map.transform.width-l/2){f.push("right")}if(f.length===0){o="bottom"}else{o=f.join("-")}}var c=i.add(s[o]).round();r.setTransform(this._container,ms[o]+" translate("+c.x+"px,"+c.y+"px)");xs(this._container,o,"popup")};n.prototype._onClose=function e(){this.remove()};return n}(e.Evented);function Rs(t){if(!t){return Rs(new e.Point(0,0))}else if(typeof t==="number"){var r=Math.round(Math.sqrt(.5*Math.pow(t,2)));return{center:new e.Point(0,0),top:new e.Point(0,t),"top-left":new e.Point(r,r),"top-right":new e.Point(-r,r),bottom:new e.Point(0,-t),"bottom-left":new e.Point(r,-r),"bottom-right":new e.Point(-r,-r),left:new e.Point(t,0),right:new e.Point(-t,0)}}else if(t instanceof e.Point||Array.isArray(t)){var n=e.Point.convert(t);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}else{return{center:e.Point.convert(t["center"]||[0,0]),top:e.Point.convert(t["top"]||[0,0]),"top-left":e.Point.convert(t["top-left"]||[0,0]),"top-right":e.Point.convert(t["top-right"]||[0,0]),bottom:e.Point.convert(t["bottom"]||[0,0]),"bottom-left":e.Point.convert(t["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(t["bottom-right"]||[0,0]),left:e.Point.convert(t["left"]||[0,0]),right:e.Point.convert(t["right"]||[0,0])}}}var Fs={version:e.version,supported:t,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:vs,NavigationControl:ds,GeolocateControl:Ms,AttributionControl:es,ScaleControl:Es,FullscreenControl:Os,Popup:zs,Marker:bs,Style:gr,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:it,clearPrewarmedResources:ot,get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return tt.workerCount},set workerCount(e){tt.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function t(r){e.clearTileCache(r)},workerUrl:""};return Fs}));return r}))},27084:function(e){"use strict";e.exports=Math.log2||function(e){return Math.log(e)*Math.LOG2E}},16825:function(e,t,r){"use strict";e.exports=a;var n=r(74311);function a(e,t){if(!t){t=e;e=window}var r=0;var a=0;var i=0;var o={shift:false,alt:false,control:false,meta:false};var s=false;function l(e){var t=false;if("altKey"in e){t=t||e.altKey!==o.alt;o.alt=!!e.altKey}if("shiftKey"in e){t=t||e.shiftKey!==o.shift;o.shift=!!e.shiftKey}if("ctrlKey"in e){t=t||e.ctrlKey!==o.control;o.control=!!e.ctrlKey}if("metaKey"in e){t=t||e.metaKey!==o.meta;o.meta=!!e.metaKey}return t}function u(e,s){var u=n.x(s);var f=n.y(s);if("buttons"in s){e=s.buttons|0}if(e!==r||u!==a||f!==i||l(s)){r=e|0;a=u||0;i=f||0;t&&t(r,a,i,o)}}function f(e){u(0,e)}function c(){if(r||a||i||o.shift||o.alt||o.meta||o.control){a=i=0;r=0;o.shift=o.alt=o.control=o.meta=false;t&&t(0,0,0,o)}}function v(e){if(l(e)){t&&t(r,a,i,o)}}function h(e){if(n.buttons(e)===0){u(0,e)}else{u(r,e)}}function p(e){u(r|n.buttons(e),e)}function d(e){u(r&~n.buttons(e),e)}function g(){if(s){return}s=true;e.addEventListener("mousemove",h);e.addEventListener("mousedown",p);e.addEventListener("mouseup",d);e.addEventListener("mouseleave",f);e.addEventListener("mouseenter",f);e.addEventListener("mouseout",f);e.addEventListener("mouseover",f);e.addEventListener("blur",c);e.addEventListener("keyup",v);e.addEventListener("keydown",v);e.addEventListener("keypress",v);if(e!==window){window.addEventListener("blur",c);window.addEventListener("keyup",v);window.addEventListener("keydown",v);window.addEventListener("keypress",v)}}function y(){if(!s){return}s=false;e.removeEventListener("mousemove",h);e.removeEventListener("mousedown",p);e.removeEventListener("mouseup",d);e.removeEventListener("mouseleave",f);e.removeEventListener("mouseenter",f);e.removeEventListener("mouseout",f);e.removeEventListener("mouseover",f);e.removeEventListener("blur",c);e.removeEventListener("keyup",v);e.removeEventListener("keydown",v);e.removeEventListener("keypress",v);if(e!==window){window.removeEventListener("blur",c);window.removeEventListener("keyup",v);window.removeEventListener("keydown",v);window.removeEventListener("keypress",v)}}g();var m={element:e};Object.defineProperties(m,{enabled:{get:function(){return s},set:function(e){if(e){g()}else{y()}},enumerable:true},buttons:{get:function(){return r},enumerable:true},x:{get:function(){return a},enumerable:true},y:{get:function(){return i},enumerable:true},mods:{get:function(){return o},enumerable:true}});return m}},48956:function(e){var t={left:0,top:0};e.exports=r;function r(e,t,r){t=t||e.currentTarget||e.srcElement;if(!Array.isArray(r)){r=[0,0]}var a=e.clientX||0;var i=e.clientY||0;var o=n(t);r[0]=a-o.left;r[1]=i-o.top;return r}function n(e){if(e===window||e===document||e===document.body){return t}else{return e.getBoundingClientRect()}}},74311:function(e,t){"use strict";function r(e){if(typeof e==="object"){if("buttons"in e){return e.buttons}else if("which"in e){var t=e.which;if(t===2){return 4}else if(t===3){return 2}else if(t>0){return 1<<t-1}}else if("button"in e){var t=e.button;if(t===1){return 4}else if(t===2){return 2}else if(t>=0){return 1<<t}}}return 0}t.buttons=r;function n(e){return e.target||e.srcElement||window}t.element=n;function a(e){if(typeof e==="object"){if("offsetX"in e){return e.offsetX}var t=n(e);var r=t.getBoundingClientRect();return e.clientX-r.left}return 0}t.x=a;function i(e){if(typeof e==="object"){if("offsetY"in e){return e.offsetY}var t=n(e);var r=t.getBoundingClientRect();return e.clientY-r.top}return 0}t.y=i},1195:function(e,t,r){"use strict";var n=r(75686);e.exports=a;function a(e,t,r){if(typeof e==="function"){r=!!t;t=e;e=window}var a=n("ex",e);var i=function(e){if(r){e.preventDefault()}var n=e.deltaX||0;var i=e.deltaY||0;var o=e.deltaZ||0;var s=e.deltaMode;var l=1;switch(s){case 1:l=a;break;case 2:l=window.innerHeight;break}n*=l;i*=l;o*=l;if(n||i||o){return t(n,i,o,e)}};e.addEventListener("wheel",i);return i}},7417:function(e,t,r){var n;(function a(i,o,s){o[i]=o[i]||s();if(true&&e.exports){e.exports=o[i]}else if(true){!(n=function e(){return o[i]}.call(t,r,t,e),n!==undefined&&(e.exports=n))}})("Promise",typeof r.g!="undefined"?r.g:this,(function e(){"use strict";var t,r,n,a=Object.prototype.toString,i=typeof setImmediate!="undefined"?function e(t){return setImmediate(t)}:setTimeout;try{Object.defineProperty({},"x",{});t=function e(t,r,n,a){return Object.defineProperty(t,r,{value:n,writable:true,configurable:a!==false})}}catch(y){t=function e(t,r,n){t[r]=n;return t}}n=function e(){var t,n,a;function i(e,t){this.fn=e;this.self=t;this.next=void 0}return{add:function e(r,o){a=new i(r,o);if(n){n.next=a}else{t=a}n=a;a=void 0},drain:function e(){var a=t;t=n=r=void 0;while(a){a.fn.call(a.self);a=a.next}}}}();function o(e,t){n.add(e,t);if(!r){r=i(n.drain)}}function s(e){var t,r=typeof e;if(e!=null&&(r=="object"||r=="function")){t=e.then}return typeof t=="function"?t:false}function l(){for(var e=0;e<this.chain.length;e++){u(this,this.state===1?this.chain[e].success:this.chain[e].failure,this.chain[e])}this.chain.length=0}function u(e,t,r){var n,a;try{if(t===false){r.reject(e.msg)}else{if(t===true){n=e.msg}else{n=t.call(void 0,e.msg)}if(n===r.promise){r.reject(TypeError("Promise-chain cycle"))}else if(a=s(n)){a.call(n,r.resolve,r.reject)}else{r.resolve(n)}}}catch(y){r.reject(y)}}function f(e){var t,r=this;if(r.triggered){return}r.triggered=true;if(r.def){r=r.def}try{if(t=s(e)){o((function(){var n=new h(r);try{t.call(e,(function e(){f.apply(n,arguments)}),(function e(){c.apply(n,arguments)}))}catch(y){c.call(n,y)}}))}else{r.msg=e;r.state=1;if(r.chain.length>0){o(l,r)}}}catch(y){c.call(new h(r),y)}}function c(e){var t=this;if(t.triggered){return}t.triggered=true;if(t.def){t=t.def}t.msg=e;t.state=2;if(t.chain.length>0){o(l,t)}}function v(e,t,r,n){for(var a=0;a<t.length;a++){(function a(i){e.resolve(t[i]).then((function e(t){r(i,t)}),n)})(a)}}function h(e){this.def=e;this.triggered=false}function p(e){this.promise=e;this.state=0;this.triggered=false;this.chain=[];this.msg=void 0}function d(e){if(typeof e!="function"){throw TypeError("Not a function")}if(this.__NPO__!==0){throw TypeError("Not a promise")}this.__NPO__=1;var t=new p(this);this["then"]=function e(r,n){var a={success:typeof r=="function"?r:true,failure:typeof n=="function"?n:false};a.promise=new this.constructor((function e(t,r){if(typeof t!="function"||typeof r!="function"){throw TypeError("Not a function")}a.resolve=t;a.reject=r}));t.chain.push(a);if(t.state!==0){o(l,t)}return a.promise};this["catch"]=function e(t){return this.then(void 0,t)};try{e.call(void 0,(function e(r){f.call(t,r)}),(function e(r){c.call(t,r)}))}catch(y){c.call(t,y)}}var g=t({},"constructor",d,false);d.prototype=g;t(g,"__NPO__",0,false);t(d,"resolve",(function e(t){var r=this;if(t&&typeof t=="object"&&t.__NPO__===1){return t}return new r((function e(r,n){if(typeof r!="function"||typeof n!="function"){throw TypeError("Not a function")}r(t)}))}));t(d,"reject",(function e(t){return new this((function e(r,n){if(typeof r!="function"||typeof n!="function"){throw TypeError("Not a function")}n(t)}))}));t(d,"all",(function e(t){var r=this;if(a.call(t)!="[object Array]"){return r.reject(TypeError("Not an array"))}if(t.length===0){return r.resolve([])}return new r((function e(n,a){if(typeof n!="function"||typeof a!="function"){throw TypeError("Not a function")}var i=t.length,o=Array(i),s=0;v(r,t,(function e(t,r){o[t]=r;if(++s===i){n(o)}}),a)}))}));t(d,"race",(function e(t){var r=this;if(a.call(t)!="[object Array]"){return r.reject(TypeError("Not an array"))}return new r((function e(n,a){if(typeof n!="function"||typeof a!="function"){throw TypeError("Not a function")}v(r,t,(function e(t,r){n(r)}),a)}))}));return d}))},18625:function(e){var t=Math.PI;var r=l(120);e.exports=n;function n(e){var t;var r=[];var n=0;var s=0;var u=0;var f=0;var c=null;var v=null;var h=0;var p=0;for(var d=0,g=e.length;d<g;d++){var y=e[d];var m=y[0];switch(m){case"M":u=y[1];f=y[2];break;case"A":y=o(h,p,y[1],y[2],l(y[3]),y[4],y[5],y[6],y[7]);y.unshift("C");if(y.length>7){r.push(y.splice(0,7));y.unshift("C")}break;case"S":var x=h;var b=p;if(t=="C"||t=="S"){x+=x-n;b+=b-s}y=["C",x,b,y[1],y[2],y[3],y[4]];break;case"T":if(t=="Q"||t=="T"){c=h*2-c;v=p*2-v}else{c=h;v=p}y=i(h,p,c,v,y[1],y[2]);break;case"Q":c=y[1];v=y[2];y=i(h,p,y[1],y[2],y[3],y[4]);break;case"L":y=a(h,p,y[1],y[2]);break;case"H":y=a(h,p,y[1],p);break;case"V":y=a(h,p,h,y[1]);break;case"Z":y=a(h,p,u,f);break}t=m;h=y[y.length-2];p=y[y.length-1];if(y.length>4){n=y[y.length-4];s=y[y.length-3]}else{n=h;s=p}r.push(y)}return r}function a(e,t,r,n){return["C",e,t,r,n,r,n]}function i(e,t,r,n,a,i){return["C",e/3+2/3*r,t/3+2/3*n,a/3+2/3*r,i/3+2/3*n,a,i]}function o(e,n,a,i,l,u,f,c,v,h){if(!h){var p=s(e,n,-l);e=p.x;n=p.y;p=s(c,v,-l);c=p.x;v=p.y;var d=(e-c)/2;var g=(n-v)/2;var y=d*d/(a*a)+g*g/(i*i);if(y>1){y=Math.sqrt(y);a=y*a;i=y*i}var m=a*a;var x=i*i;var b=(u==f?-1:1)*Math.sqrt(Math.abs((m*x-m*g*g-x*d*d)/(m*g*g+x*d*d)));if(b==Infinity)b=1;var _=b*a*g/i+(e+c)/2;var w=b*-i*d/a+(n+v)/2;var T=Math.asin(((n-w)/i).toFixed(9));var k=Math.asin(((v-w)/i).toFixed(9));T=e<_?t-T:T;k=c<_?t-k:k;if(T<0)T=t*2+T;if(k<0)k=t*2+k;if(f&&T>k)T=T-t*2;if(!f&&k>T)k=k-t*2}else{T=h[0];k=h[1];_=h[2];w=h[3]}if(Math.abs(k-T)>r){var A=k;var M=c;var S=v;k=T+r*(f&&k>T?1:-1);c=_+a*Math.cos(k);v=w+i*Math.sin(k);var E=o(c,v,a,i,l,0,f,M,S,[k,A,_,w])}var L=Math.tan((k-T)/4);var C=4/3*a*L;var I=4/3*i*L;var P=[2*e-(e+C*Math.sin(T)),2*n-(n-I*Math.cos(T)),c+C*Math.sin(k),v-I*Math.cos(k),c,v];if(h)return P;if(E)P=P.concat(E);for(var O=0;O<P.length;){var D=s(P[O],P[O+1],l);P[O++]=D.x;P[O++]=D.y}return P}function s(e,t,r){return{x:e*Math.cos(r)-t*Math.sin(r),y:e*Math.sin(r)+t*Math.cos(r)}}function l(e){return e*(t/180)}},56131:function(e){"use strict";var t=Object.getOwnPropertySymbols;var r=Object.prototype.hasOwnProperty;var n=Object.prototype.propertyIsEnumerable;function a(e){if(e===null||e===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(e)}function i(){try{if(!Object.assign){return false}var e=new String("abc");e[5]="de";if(Object.getOwnPropertyNames(e)[0]==="5"){return false}var t={};for(var r=0;r<10;r++){t["_"+String.fromCharCode(r)]=r}var n=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if(n.join("")!=="0123456789"){return false}var a={};"abcdefghijklmnopqrst".split("").forEach((function(e){a[e]=e}));if(Object.keys(Object.assign({},a)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(i){return false}}e.exports=i()?Object.assign:function(e,i){var o;var s=a(e);var l;for(var u=1;u<arguments.length;u++){o=Object(arguments[u]);for(var f in o){if(r.call(o,f)){s[f]=o[f]}}if(t){l=t(o);for(var c=0;c<l.length;c++){if(n.call(o,l[c])){s[l[c]]=o[l[c]]}}}}return s}},65848:function(e){"use strict";var t=function(e){return e!==e};e.exports=function e(r,n){if(r===0&&n===0){return 1/r===1/n}if(r===n){return true}if(t(r)&&t(n)){return true}return false}},64003:function(e,t,r){"use strict";var n=r(17045);var a=r(68222);var i=r(65848);var o=r(27015);var s=r(55572);var l=a(o(),Object);n(l,{getPolyfill:o,implementation:i,shim:s});e.exports=l},27015:function(e,t,r){"use strict";var n=r(65848);e.exports=function e(){return typeof Object.is==="function"?Object.is:n}},55572:function(e,t,r){"use strict";var n=r(27015);var a=r(17045);e.exports=function e(){var t=n();a(Object,{is:t},{is:function e(){return Object.is!==t}});return t}},99019:function(e,t,r){"use strict";var n;if(!Object.keys){var a=Object.prototype.hasOwnProperty;var i=Object.prototype.toString;var o=r(64178);var s=Object.prototype.propertyIsEnumerable;var l=!s.call({toString:null},"toString");var u=s.call((function(){}),"prototype");var f=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var c=function(e){var t=e.constructor;return t&&t.prototype===e};var v={$applicationCache:true,$console:true,$external:true,$frame:true,$frameElement:true,$frames:true,$innerHeight:true,$innerWidth:true,$onmozfullscreenchange:true,$onmozfullscreenerror:true,$outerHeight:true,$outerWidth:true,$pageXOffset:true,$pageYOffset:true,$parent:true,$scrollLeft:true,$scrollTop:true,$scrollX:true,$scrollY:true,$self:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$window:true};var h=function(){if(typeof window==="undefined"){return false}for(var e in window){try{if(!v["$"+e]&&a.call(window,e)&&window[e]!==null&&typeof window[e]==="object"){try{c(window[e])}catch(t){return true}}}catch(t){return true}}return false}();var p=function(e){if(typeof window==="undefined"||!h){return c(e)}try{return c(e)}catch(t){return false}};n=function e(t){var r=t!==null&&typeof t==="object";var n=i.call(t)==="[object Function]";var s=o(t);var c=r&&i.call(t)==="[object String]";var v=[];if(!r&&!n&&!s){throw new TypeError("Object.keys called on a non-object")}var h=u&&n;if(c&&t.length>0&&!a.call(t,0)){for(var d=0;d<t.length;++d){v.push(String(d))}}if(s&&t.length>0){for(var g=0;g<t.length;++g){v.push(String(g))}}else{for(var y in t){if(!(h&&y==="prototype")&&a.call(t,y)){v.push(String(y))}}}if(l){var m=p(t);for(var x=0;x<f.length;++x){if(!(m&&f[x]==="constructor")&&a.call(t,f[x])){v.push(f[x])}}}return v}}e.exports=n},8709:function(e,t,r){"use strict";var n=Array.prototype.slice;var a=r(64178);var i=Object.keys;var o=i?function e(t){return i(t)}:r(99019);var s=Object.keys;o.shim=function e(){if(Object.keys){var t=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);if(!t){Object.keys=function e(t){if(a(t)){return s(n.call(t))}return s(t)}}}else{Object.keys=o}return Object.keys||o};e.exports=o},64178:function(e){"use strict";var t=Object.prototype.toString;e.exports=function e(r){var n=t.call(r);var a=n==="[object Arguments]";if(!a){a=n!=="[object Array]"&&r!==null&&typeof r==="object"&&typeof r.length==="number"&&r.length>=0&&t.call(r.callee)==="[object Function]"}return a}},88641:function(e){"use strict";function t(e,t){if(typeof e!=="string")return[e];var r=[e];if(typeof t==="string"||Array.isArray(t)){t={brackets:t}}else if(!t)t={};var n=t.brackets?Array.isArray(t.brackets)?t.brackets:[t.brackets]:["{}","[]","()"];var a=t.escape||"___";var i=!!t.flat;n.forEach((function(e){var t=new RegExp(["\\",e[0],"[^\\",e[0],"\\",e[1],"]*\\",e[1]].join(""));var n=[];function i(t,i,o){var s=r.push(t.slice(e[0].length,-e[1].length))-1;n.push(s);return a+s+a}r.forEach((function(e,n){var a;var o=0;while(e!=a){a=e;e=e.replace(t,i);if(o++>1e4)throw Error("References have circular dependency. Please, check them.")}r[n]=e}));n=n.reverse();r=r.map((function(t){n.forEach((function(r){t=t.replace(new RegExp("(\\"+a+r+"\\"+a+")","g"),e[0]+"$1"+e[1])}));return t}))}));var o=new RegExp("\\"+a+"([0-9]+)"+"\\"+a);function s(e,t,r){var n=[],a;var i=0;while(a=o.exec(e)){if(i++>1e4)throw Error("Circular references in parenthesis");n.push(e.slice(0,a.index));n.push(s(t[a[1]],t));e=e.slice(a.index+a[0].length)}n.push(e);return n}return i?r:s(r[0],r)}function r(e,t){if(t&&t.flat){var r=t&&t.escape||"___";var n=e[0],a;if(!n)return"";var i=new RegExp("\\"+r+"([0-9]+)"+"\\"+r);var o=0;while(n!=a){if(o++>1e4)throw Error("Circular references in "+e);a=n;n=n.replace(i,s)}return n}return e.reduce((function e(t,r){if(Array.isArray(r)){r=r.reduce(e,"")}return t+r}),"");function s(t,r){if(e[r]==null)throw Error("Reference "+r+"is undefined");return e[r]}}function n(e,n){if(Array.isArray(e)){return r(e,n)}else{return t(e,n)}}n.parse=t;n.stringify=r;e.exports=n},18863:function(e,t,r){"use strict";var n=r(71299);e.exports=a;function a(e){var t;if(arguments.length>1){e=arguments}if(typeof e==="string"){e=e.split(/\s/).map(parseFloat)}else if(typeof e==="number"){e=[e]}if(e.length&&typeof e[0]==="number"){if(e.length===1){t={width:e[0],height:e[0],x:0,y:0}}else if(e.length===2){t={width:e[0],height:e[1],x:0,y:0}}else{t={x:e[0],y:e[1],width:e[2]-e[0]||0,height:e[3]-e[1]||0}}}else if(e){e=n(e,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"});t={x:e.left||0,y:e.top||0};if(e.width==null){if(e.right)t.width=e.right-t.x;else t.width=0}else{t.width=e.width}if(e.height==null){if(e.bottom)t.height=e.bottom-t.y;else t.height=0}else{t.height=e.height}}return t}},95616:function(e){e.exports=n;var t={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0};var r=/([astvzqmhlc])([^astvzqmhlc]*)/gi;function n(e){var n=[];e.replace(r,(function(e,r,a){var o=r.toLowerCase();a=i(a);if(o=="m"&&a.length>2){n.push([r].concat(a.splice(0,2)));o="l";r=r=="m"?"l":"L"}while(true){if(a.length==t[o]){a.unshift(r);return n.push(a)}if(a.length<t[o])throw new Error("malformed path data");n.push([r].concat(a.splice(0,t[o])))}}));return n}var a=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function i(e){var t=e.match(a);return t?t.map(Number):[]}},25677:function(e){e.exports=function e(t,r){if(!r)r=[0,""];t=String(t);var n=parseFloat(t,10);r[0]=n;r[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return r}},9748:function(e,t,r){var n=r(90386);(function(){var t,r,a,i,o,s;if(typeof performance!=="undefined"&&performance!==null&&performance.now){e.exports=function(){return performance.now()}}else if(typeof n!=="undefined"&&n!==null&&n.hrtime){e.exports=function(){return(t()-o)/1e6};r=n.hrtime;t=function(){var e;e=r();return e[0]*1e9+e[1]};i=t();s=n.uptime()*1e9;o=i-s}else if(Date.now){e.exports=function(){return Date.now()-a};a=Date.now()}else{e.exports=function(){return(new Date).getTime()-a};a=(new Date).getTime()}}).call(this)},71299:function(e){"use strict";e.exports=function e(t,n,a){var i={},o,s;if(typeof n==="string")n=r(n);if(Array.isArray(n)){var l={};for(s=0;s<n.length;s++){l[n[s]]=true}n=l}for(o in n){n[o]=r(n[o])}var u={};for(o in n){var f=n[o];if(Array.isArray(f)){for(s=0;s<f.length;s++){var c=f[s];if(a){u[c]=true}if(c in t){i[o]=t[c];if(a){for(var v=s;v<f.length;v++){u[f[v]]=true}}break}}}else if(o in t){if(n[o]){i[o]=t[o]}if(a){u[o]=true}}}if(a){for(o in t){if(u[o])continue;i[o]=t[o]}}return i};var t={};function r(e){if(t[e])return t[e];if(typeof e==="string"){e=t[e]=e.split(/\s*,\s*|\s+/)}return e}},38258:function(e){e.exports=function e(t,r,n,a){var i=t[0],o=t[1];var s=false;if(n===undefined)n=0;if(a===undefined)a=r.length;var l=a-n;for(var u=0,f=l-1;u<l;f=u++){var c=r[u+n][0],v=r[u+n][1];var h=r[f+n][0],p=r[f+n][1];var d=v>o!==p>o&&i<(h-c)*(o-v)/(p-v)+c;if(d)s=!s}return s}},52142:function(e,t,r){var n=r(69444);var a=r(29023);var i=r(87263);var o=r(11328);var s=r(55968);var l=r(10670);var u=false;var f=a();var c;c={buildLog:function(e){if(e===true)u=n();else if(e===false)u=false;return u===false?false:u.list},epsilon:function(e){return f.epsilon(e)},segments:function(e){var t=i(true,f,u);e.regions.forEach(t.addRegion);return{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){var r=i(false,f,u);return{combined:r.calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:s.union(e.combined,u),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:s.intersect(e.combined,u),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:s.difference(e.combined,u),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:s.differenceRev(e.combined,u),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:s.xor(e.combined,u),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:o(e.segments,f,u),inverted:e.inverted}},polygonFromGeoJSON:function(e){return l.toPolygon(c,e)},polygonToGeoJSON:function(e){return l.fromPolygon(c,f,e)},union:function(e,t){return v(e,t,c.selectUnion)},intersect:function(e,t){return v(e,t,c.selectIntersect)},difference:function(e,t){return v(e,t,c.selectDifference)},differenceRev:function(e,t){return v(e,t,c.selectDifferenceRev)},xor:function(e,t){return v(e,t,c.selectXor)}};function v(e,t,r){var n=c.segments(e);var a=c.segments(t);var i=c.combine(n,a);var o=r(i);return c.polygon(o)}if(typeof window==="object")window.PolyBool=c;e.exports=c},69444:function(e){function t(){var e;var t=0;var r=false;function n(t,r){e.list.push({type:t,data:r?JSON.parse(JSON.stringify(r)):void 0});return e}e={list:[],segmentId:function(){return t++},checkIntersection:function(e,t){return n("check",{seg1:e,seg2:t})},segmentChop:function(e,t){n("div_seg",{seg:e,pt:t});return n("chop",{seg:e,pt:t})},statusRemove:function(e){return n("pop_seg",{seg:e})},segmentUpdate:function(e){return n("seg_update",{seg:e})},segmentNew:function(e,t){return n("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return n("rem_seg",{seg:e})},tempStatus:function(e,t,r){return n("temp_status",{seg:e,above:t,below:r})},rewind:function(e){return n("rewind",{seg:e})},status:function(e,t,r){return n("status",{seg:e,above:t,below:r})},vert:function(t){if(t===r)return e;r=t;return n("vert",{x:t})},log:function(e){if(typeof e!=="string")e=JSON.stringify(e,false,"  ");return n("log",{txt:e})},reset:function(){return n("reset")},selected:function(e){return n("selected",{segs:e})},chainStart:function(e){return n("chain_start",{seg:e})},chainRemoveHead:function(e,t){return n("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return n("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return n("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return n("chain_match",{index:e})},chainClose:function(e){return n("chain_close",{index:e})},chainAddHead:function(e,t){return n("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return n("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return n("chain_con",{index1:e,index2:t})},chainReverse:function(e){return n("chain_rev",{index:e})},chainJoin:function(e,t){return n("chain_join",{index1:e,index2:t})},done:function(){return n("done")}};return e}e.exports=t},29023:function(e){function t(e){if(typeof e!=="number")e=1e-10;var t={epsilon:function(t){if(typeof t==="number")e=t;return e},pointAboveOrOnLine:function(t,r,n){var a=r[0];var i=r[1];var o=n[0];var s=n[1];var l=t[0];var u=t[1];return(o-a)*(u-i)-(s-i)*(l-a)>=-e},pointBetween:function(t,r,n){var a=t[1]-r[1];var i=n[0]-r[0];var o=t[0]-r[0];var s=n[1]-r[1];var l=o*i+a*s;if(l<e)return false;var u=i*i+s*s;if(l-u>-e)return false;return true},pointsSameX:function(t,r){return Math.abs(t[0]-r[0])<e},pointsSameY:function(t,r){return Math.abs(t[1]-r[1])<e},pointsSame:function(e,r){return t.pointsSameX(e,r)&&t.pointsSameY(e,r)},pointsCompare:function(e,r){if(t.pointsSameX(e,r))return t.pointsSameY(e,r)?0:e[1]<r[1]?-1:1;return e[0]<r[0]?-1:1},pointsCollinear:function(t,r,n){var a=t[0]-r[0];var i=t[1]-r[1];var o=r[0]-n[0];var s=r[1]-n[1];return Math.abs(a*s-o*i)<e},linesIntersect:function(t,r,n,a){var i=r[0]-t[0];var o=r[1]-t[1];var s=a[0]-n[0];var l=a[1]-n[1];var u=i*l-o*s;if(Math.abs(u)<e)return false;var f=t[0]-n[0];var c=t[1]-n[1];var v=(s*c-l*f)/u;var h=(i*c-o*f)/u;var p={alongA:0,alongB:0,pt:[t[0]+v*i,t[1]+v*o]};if(v<=-e)p.alongA=-2;else if(v<e)p.alongA=-1;else if(v-1<=-e)p.alongA=0;else if(v-1<e)p.alongA=1;else p.alongA=2;if(h<=-e)p.alongB=-2;else if(h<e)p.alongB=-1;else if(h-1<=-e)p.alongB=0;else if(h-1<e)p.alongB=1;else p.alongB=2;return p},pointInsideRegion:function(t,r){var n=t[0];var a=t[1];var i=r[r.length-1][0];var o=r[r.length-1][1];var s=false;for(var l=0;l<r.length;l++){var u=r[l][0];var f=r[l][1];if(f-a>e!=o-a>e&&(i-u)*(a-f)/(o-f)+u-n>e)s=!s;i=u;o=f}return s}};return t}e.exports=t},10670:function(e){var t={toPolygon:function(e,t){function r(t){if(t.length<=0)return e.segments({inverted:false,regions:[]});function r(t){var r=t.slice(0,t.length-1);return e.segments({inverted:false,regions:[r]})}var n=r(t[0]);for(var a=1;a<t.length;a++)n=e.selectDifference(e.combine(n,r(t[a])));return n}if(t.type==="Polygon"){return e.polygon(r(t.coordinates))}else if(t.type==="MultiPolygon"){var n=e.segments({inverted:false,regions:[]});for(var a=0;a<t.coordinates.length;a++)n=e.selectUnion(e.combine(n,r(t.coordinates[a])));return e.polygon(n)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,t,r){r=e.polygon(e.segments(r));function n(e,r){return t.pointInsideRegion([(e[0][0]+e[1][0])*.5,(e[0][1]+e[1][1])*.5],r)}function a(e){return{region:e,children:[]}}var i=a(null);function o(e,t){for(var r=0;r<e.children.length;r++){var i=e.children[r];if(n(t,i.region)){o(i,t);return}}var s=a(t);for(var r=0;r<e.children.length;r++){var i=e.children[r];if(n(i.region,t)){s.children.push(i);e.children.splice(r,1);r--}}e.children.push(s)}for(var s=0;s<r.regions.length;s++){var l=r.regions[s];if(l.length<3)continue;o(i,l)}function u(e,t){var r=0;var n=e[e.length-1][0];var a=e[e.length-1][1];var i=[];for(var o=0;o<e.length;o++){var s=e[o][0];var l=e[o][1];i.push([s,l]);r+=l*n-s*a;n=s;a=l}var u=r<0;if(u!==t)i.reverse();i.push([i[0][0],i[0][1]]);return i}var f=[];function c(e){var t=[u(e.region,false)];f.push(t);for(var r=0;r<e.children.length;r++)t.push(v(e.children[r]))}function v(e){for(var t=0;t<e.children.length;t++)c(e.children[t]);return u(e.region,true)}for(var s=0;s<i.children.length;s++)c(i.children[s]);if(f.length<=0)return{type:"Polygon",coordinates:[]};if(f.length==1)return{type:"Polygon",coordinates:f[0]};return{type:"MultiPolygon",coordinates:f}}};e.exports=t},87263:function(e,t,r){var n=r(26859);function a(e,t,r){function a(e,t){return{id:r?r.segmentId():-1,start:e,end:t,myFill:{above:null,below:null},otherFill:null}}function i(e,t,n){return{id:r?r.segmentId():-1,start:e,end:t,myFill:{above:n.myFill.above,below:n.myFill.below},otherFill:null}}var o=n.create();function s(e,r,n,a,i,o){var s=t.pointsCompare(r,i);if(s!==0)return s;if(t.pointsSame(n,o))return 0;if(e!==a)return e?1:-1;return t.pointAboveOrOnLine(n,a?i:o,a?o:i)?1:-1}function l(e,t){o.insertBefore(e,(function(r){var n=s(e.isStart,e.pt,t,r.isStart,r.pt,r.other.pt);return n<0}))}function u(e,t){var r=n.node({isStart:true,pt:e.start,seg:e,primary:t,other:null,status:null});l(r,e.end);return r}function f(e,t,r){var a=n.node({isStart:false,pt:t.end,seg:t,primary:r,other:e,status:null});e.other=a;l(a,e.pt)}function c(e,t){var r=u(e,t);f(r,e,t);return r}function v(e,t){if(r)r.segmentChop(e.seg,t);e.other.remove();e.seg.end=t;e.other.pt=t;l(e.other,e.pt)}function h(e,t){var r=i(t,e.seg.end,e.seg);v(e,t);return c(r,e.primary)}function p(a,i){var s=n.create();function l(e,r){var n=e.seg.start;var a=e.seg.end;var i=r.seg.start;var o=r.seg.end;if(t.pointsCollinear(n,i,o)){if(t.pointsCollinear(a,i,o))return 1;return t.pointAboveOrOnLine(a,i,o)?1:-1}return t.pointAboveOrOnLine(n,i,o)?1:-1}function u(e){return s.findTransition((function(t){var r=l(e,t.ev);return r>0}))}function f(e,n){var a=e.seg;var i=n.seg;var o=a.start;var s=a.end;var l=i.start;var u=i.end;if(r)r.checkIntersection(a,i);var f=t.linesIntersect(o,s,l,u);if(f===false){if(!t.pointsCollinear(o,s,l))return false;if(t.pointsSame(o,u)||t.pointsSame(s,l))return false;var c=t.pointsSame(o,l);var v=t.pointsSame(s,u);if(c&&v)return n;var p=!c&&t.pointBetween(o,l,u);var d=!v&&t.pointBetween(s,l,u);if(c){if(d){h(n,s)}else{h(e,u)}return n}else if(p){if(!v){if(d){h(n,s)}else{h(e,u)}}h(n,o)}}else{if(f.alongA===0){if(f.alongB===-1)h(e,l);else if(f.alongB===0)h(e,f.pt);else if(f.alongB===1)h(e,u)}if(f.alongB===0){if(f.alongA===-1)h(n,o);else if(f.alongA===0)h(n,f.pt);else if(f.alongA===1)h(n,s)}}return false}var c=[];while(!o.isEmpty()){var v=o.getHead();if(r)r.vert(v.pt[0]);if(v.isStart){if(r)r.segmentNew(v.seg,v.primary);var p=u(v);var d=p.before?p.before.ev:null;var g=p.after?p.after.ev:null;if(r){r.tempStatus(v.seg,d?d.seg:false,g?g.seg:false)}function y(){if(d){var e=f(v,d);if(e)return e}if(g)return f(v,g);return false}var m=y();if(m){if(e){var x;if(v.seg.myFill.below===null)x=true;else x=v.seg.myFill.above!==v.seg.myFill.below;if(x)m.seg.myFill.above=!m.seg.myFill.above}else{m.seg.otherFill=v.seg.myFill}if(r)r.segmentUpdate(m.seg);v.other.remove();v.remove()}if(o.getHead()!==v){if(r)r.rewind(v.seg);continue}if(e){var x;if(v.seg.myFill.below===null)x=true;else x=v.seg.myFill.above!==v.seg.myFill.below;if(!g){v.seg.myFill.below=a}else{v.seg.myFill.below=g.seg.myFill.above}if(x)v.seg.myFill.above=!v.seg.myFill.below;else v.seg.myFill.above=v.seg.myFill.below}else{if(v.seg.otherFill===null){var b;if(!g){b=v.primary?i:a}else{if(v.primary===g.primary)b=g.seg.otherFill.above;else b=g.seg.myFill.above}v.seg.otherFill={above:b,below:b}}}if(r){r.status(v.seg,d?d.seg:false,g?g.seg:false)}v.other.status=p.insert(n.node({ev:v}))}else{var _=v.status;if(_===null){throw new Error("PolyBool: Zero-length segment detected; your epsilon is "+"probably too small or too large")}if(s.exists(_.prev)&&s.exists(_.next))f(_.prev.ev,_.next.ev);if(r)r.statusRemove(_.ev.seg);_.remove();if(!v.primary){var w=v.seg.myFill;v.seg.myFill=v.seg.otherFill;v.seg.otherFill=w}c.push(v.seg)}o.getHead().remove()}if(r)r.done();return c}if(!e){return{calculate:function(e,t,r,n){e.forEach((function(e){c(i(e.start,e.end,e),true)}));r.forEach((function(e){c(i(e.start,e.end,e),false)}));return p(t,n)}}}return{addRegion:function(e){var r;var n=e[e.length-1];for(var i=0;i<e.length;i++){r=n;n=e[i];var o=t.pointsCompare(r,n);if(o===0)continue;c(a(o<0?r:n,o<0?n:r),true)}},calculate:function(e){return p(e,false)}}}e.exports=a},26859:function(e){var t={create:function(){var e={root:{root:true,next:null},exists:function(t){if(t===null||t===e.root)return false;return true},isEmpty:function(){return e.root.next===null},getHead:function(){return e.root.next},insertBefore:function(t,r){var n=e.root;var a=e.root.next;while(a!==null){if(r(a)){t.prev=a.prev;t.next=a;a.prev.next=t;a.prev=t;return}n=a;a=a.next}n.next=t;t.prev=n;t.next=null},findTransition:function(t){var r=e.root;var n=e.root.next;while(n!==null){if(t(n))break;r=n;n=n.next}return{before:r===e.root?null:r,after:n,insert:function(e){e.prev=r;e.next=n;r.next=e;if(n!==null)n.prev=e;return e}}}};return e},node:function(e){e.prev=null;e.next=null;e.remove=function(){e.prev.next=e.next;if(e.next)e.next.prev=e.prev;e.prev=null;e.next=null};return e}};e.exports=t},11328:function(e){function t(e,t,r){var n=[];var a=[];e.forEach((function(e){var i=e.start;var o=e.end;if(t.pointsSame(i,o)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is "+"probably too small or too large");return}if(r)r.chainStart(e);var s={index:0,matches_head:false,matches_pt1:false};var l={index:0,matches_head:false,matches_pt1:false};var u=s;function f(e,t,r){u.index=e;u.matches_head=t;u.matches_pt1=r;if(u===s){u=l;return false}u=null;return true}for(var c=0;c<n.length;c++){var v=n[c];var h=v[0];var p=v[1];var d=v[v.length-1];var g=v[v.length-2];if(t.pointsSame(h,i)){if(f(c,true,true))break}else if(t.pointsSame(h,o)){if(f(c,true,false))break}else if(t.pointsSame(d,i)){if(f(c,false,true))break}else if(t.pointsSame(d,o)){if(f(c,false,false))break}}if(u===s){n.push([i,o]);if(r)r.chainNew(i,o);return}if(u===l){if(r)r.chainMatch(s.index);var y=s.index;var m=s.matches_pt1?o:i;var x=s.matches_head;var v=n[y];var b=x?v[0]:v[v.length-1];var _=x?v[1]:v[v.length-2];var w=x?v[v.length-1]:v[0];var T=x?v[v.length-2]:v[1];if(t.pointsCollinear(_,b,m)){if(x){if(r)r.chainRemoveHead(s.index,m);v.shift()}else{if(r)r.chainRemoveTail(s.index,m);v.pop()}b=_}if(t.pointsSame(w,m)){n.splice(y,1);if(t.pointsCollinear(T,w,b)){if(x){if(r)r.chainRemoveTail(s.index,b);v.pop()}else{if(r)r.chainRemoveHead(s.index,b);v.shift()}}if(r)r.chainClose(s.index);a.push(v);return}if(x){if(r)r.chainAddHead(s.index,m);v.unshift(m)}else{if(r)r.chainAddTail(s.index,m);v.push(m)}return}function k(e){if(r)r.chainReverse(e);n[e].reverse()}function A(e,a){var i=n[e];var o=n[a];var s=i[i.length-1];var l=i[i.length-2];var u=o[0];var f=o[1];if(t.pointsCollinear(l,s,u)){if(r)r.chainRemoveTail(e,s);i.pop();s=l}if(t.pointsCollinear(s,u,f)){if(r)r.chainRemoveHead(a,u);o.shift()}if(r)r.chainJoin(e,a);n[e]=i.concat(o);n.splice(a,1)}var M=s.index;var S=l.index;if(r)r.chainConnect(M,S);var E=n[M].length<n[S].length;if(s.matches_head){if(l.matches_head){if(E){k(M);A(M,S)}else{k(S);A(S,M)}}else{A(S,M)}}else{if(l.matches_head){A(M,S)}else{if(E){k(M);A(S,M)}else{k(S);A(M,S)}}}}));return a}e.exports=t},55968:function(e){function t(e,t,r){var n=[];e.forEach((function(e){var a=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);if(t[a]!==0){n.push({id:r?r.segmentId():-1,start:e.start,end:e.end,myFill:{above:t[a]===1,below:t[a]===2},otherFill:null})}}));if(r)r.selected(n);return n}var r={union:function(e,r){return t(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],r)},intersect:function(e,r){return t(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],r)},difference:function(e,r){return t(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],r)},differenceRev:function(e,r){return t(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],r)},xor:function(e,r){return t(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],r)}};e.exports=r},14847:function(e,t,r){"use strict";var n;var a=r(21630).Transform;var i=r(90715);function o(){a.call(this,{readableObjectMode:true})}o.prototype=Object.create(a.prototype);o.prototype.constructor=o;i(o.prototype);n=o;t.OF=function(e,t,r){for(var n=t,a=0;a<r.length;){if(e[n++]!==r[a++])return false}return true};t.eG=function(e,t){var r=[],n=0;if(t&&t==="hex"){while(n<e.length){r.push(parseInt(e.slice(n,n+2),16));n+=2}}else{for(;n<e.length;n++){r.push(e.charCodeAt(n)&255)}}return r};t.mP=function(e,t){return e[t]|e[t+1]<<8};t.n8=function(e,t){return e[t+1]|e[t]<<8};t.nm=function(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]*16777216};t.Ag=function(e,t){return e[t+3]|e[t+2]<<8|e[t+1]<<16|e[t]*16777216};function s(e,t,r){Error.call(this);if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}else{this.stack=(new Error).stack||""}this.name=this.constructor.name;this.message=e;if(t)this.code=t;if(r)this.statusCode=r}s.prototype=Object.create(Error.prototype);s.prototype.constructor=s;n=s},71371:function(e){"use strict";function t(e,t){var r=new Error(e);r.code=t;return r}function r(e){try{return decodeURIComponent(escape(e))}catch(t){return e}}function n(e,r,n){this.input=e.subarray(r,n);this.start=r;var a=String.fromCharCode.apply(null,this.input.subarray(0,4));if(a!=="II*\0"&&a!=="MM\0*"){throw t("invalid TIFF signature","EBADDATA")}this.big_endian=a[0]==="M"}n.prototype.each=function(e){this.aborted=false;var t=this.read_uint32(4);this.ifds_to_read=[{id:0,offset:t}];while(this.ifds_to_read.length>0&&!this.aborted){var r=this.ifds_to_read.shift();if(!r.offset)continue;this.scan_ifd(r.id,r.offset,e)}};n.prototype.read_uint16=function(e){var r=this.input;if(e+2>r.length)throw t("unexpected EOF","EBADDATA");return this.big_endian?r[e]*256+r[e+1]:r[e]+r[e+1]*256};n.prototype.read_uint32=function(e){var r=this.input;if(e+4>r.length)throw t("unexpected EOF","EBADDATA");return this.big_endian?r[e]*16777216+r[e+1]*65536+r[e+2]*256+r[e+3]:r[e]+r[e+1]*256+r[e+2]*65536+r[e+3]*16777216};n.prototype.is_subifd_link=function(e,t){return e===0&&t===34665||e===0&&t===34853||e===34665&&t===40965};n.prototype.exif_format_length=function(e){switch(e){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}};n.prototype.exif_format_read=function(e,t){var r;switch(e){case 1:case 2:r=this.input[t];return r;case 6:r=this.input[t];return r|(r&128)*33554430;case 3:r=this.read_uint16(t);return r;case 8:r=this.read_uint16(t);return r|(r&32768)*131070;case 4:r=this.read_uint32(t);return r;case 9:r=this.read_uint32(t);return r|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}};n.prototype.scan_ifd=function(e,n,a){var i=this.read_uint16(n);n+=2;for(var o=0;o<i;o++){var s=this.read_uint16(n);var l=this.read_uint16(n+2);var u=this.read_uint32(n+4);var f=this.exif_format_length(l);var c=u*f;var v=c<=4?n+8:this.read_uint32(n+8);var h=false;if(v+c>this.input.length){throw t("unexpected EOF","EBADDATA")}var p=[];var d=v;for(var g=0;g<u;g++,d+=f){var y=this.exif_format_read(l,d);if(y===null){p=null;break}p.push(y)}if(Array.isArray(p)&&l===2){p=r(String.fromCharCode.apply(null,p));if(p&&p[p.length-1]==="\0")p=p.slice(0,-1)}if(this.is_subifd_link(e,s)){if(Array.isArray(p)&&Number.isInteger(p[0])&&p[0]>0){this.ifds_to_read.push({id:s,offset:p[0]});h=true}}var m={is_big_endian:this.big_endian,ifd:e,tag:s,format:l,count:u,entry_offset:n+this.start,data_length:c,data_offset:v+this.start,value:p,is_subifd_link:h};if(a(m)===false){this.aborted=true;return}n+=12}if(e===0){this.ifds_to_read.push({id:1,offset:this.read_uint32(n)})}};e.exports.ExifParser=n;e.exports.get_orientation=function(e){var t=0;try{new n(e,0,e.length).each((function(e){if(e.ifd===0&&e.tag===274&&Array.isArray(e.value)){t=e.value[0];return false}}));return t}catch(r){return-1}}},76767:function(e,t,r){"use strict";var n=r(14847).n8;var a=r(14847).Ag;function i(e,t){if(e.length<4+t)return null;var r=a(e,t);if(e.length<r+t||r<8)return null;return{boxtype:String.fromCharCode.apply(null,e.slice(t+4,t+8)),data:e.slice(t+8,t+r),end:t+r}}e.exports.unbox=i;function o(e,t){var r=0;for(;;){var n=i(e,r);if(!n)break;switch(n.boxtype){case"ispe":t.sizes.push({width:a(n.data,4),height:a(n.data,8)});break;case"irot":t.transforms.push({type:"irot",value:n.data[0]&3});break;case"imir":t.transforms.push({type:"imir",value:n.data[0]&1});break}r=n.end}}function s(e,t,r){var n=0;for(var a=0;a<r;a++){n=n*256+(e[t+a]||0)}return n}function l(e,t){var r=e[4]>>4&15;var a=e[4]&15;var i=e[5]>>4&15;var o=n(e,6);var l=8;for(var u=0;u<o;u++){var f=n(e,l);l+=2;var c=n(e,l);l+=2;var v=s(e,l,i);l+=i;var h=n(e,l);l+=2;if(c===0&&h===1){var p=s(e,l,r);var d=s(e,l+r,a);t.item_loc[f]={length:d,offset:p+v}}l+=h*(r+a)}}function u(e,t){var r=n(e,4);var a=6;for(var o=0;o<r;o++){var s=i(e,a);if(!s)break;if(s.boxtype==="infe"){var l=n(s.data,4);var u="";for(var f=8;f<s.data.length&&s.data[f];f++){u+=String.fromCharCode(s.data[f])}t.item_inf[u]=l}a=s.end}}function f(e,t){var r=0;for(;;){var n=i(e,r);if(!n)break;if(n.boxtype==="ipco")o(n.data,t);r=n.end}}function c(e,t){var r=4;for(;;){var n=i(e,r);if(!n)break;if(n.boxtype==="iprp")f(n.data,t);if(n.boxtype==="iloc")l(n.data,t);if(n.boxtype==="iinf")u(n.data,t);r=n.end}}function v(e){var t=e.reduce((function(e,t){return e.width>t.width||e.width===t.width&&e.height>t.height?e:t}));var r=e.reduce((function(e,t){return e.height>t.height||e.height===t.height&&e.width>t.width?e:t}));var n;if(t.width>r.height||t.width===r.height&&t.height>r.width){n=t}else{n=r}return n}e.exports.readSizeFromMeta=function(e){var t={sizes:[],transforms:[],item_inf:{},item_loc:{}};c(e,t);if(!t.sizes.length)return;var r=v(t.sizes);var n=1;t.transforms.forEach((function(e){var t={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1};var r={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(e.type==="imir"){if(e.value===0){n=r[n]}else{n=r[n];n=t[n];n=t[n]}}if(e.type==="irot"){for(var a=0;a<e.value;a++){n=t[n]}}}));var a=null;if(t.item_inf.Exif){a=t.item_loc[t.item_inf.Exif]}return{width:r.width,height:r.height,orientation:t.transforms.length?n:null,variants:t.sizes,exif_location:a}};e.exports.getMimeType=function(e){var t=String.fromCharCode.apply(null,e.slice(0,4));var r={};r[t]=true;for(var n=8;n<e.length;n+=4){r[String.fromCharCode.apply(null,e.slice(n,n+4))]=true}if(!r.mif1&&!r.msf1&&!r.miaf)return;if(t==="avif"||t==="avis"||t==="avio"){return{type:"avif",mime:"image/avif"}}if(t==="heic"||t==="heix"){return{type:"heic",mime:"image/heic"}}if(t==="hevc"||t==="hevx"){return{type:"heic",mime:"image/heic-sequence"}}if(r.avif||r.avis){return{type:"avif",mime:"image/avif"}}if(r.heic||r.heix||r.hevc||r.hevx||r.heis){if(r.msf1){return{type:"heif",mime:"image/heif-sequence"}}return{type:"heif",mime:"image/heif"}}return{type:"avif",mime:"image/avif"}}},24461:function(e,t,r){"use strict";var n=r(14847).eG;var a=r(14847).OF;var i=r(14847).Ag;var o=r(76767);var s=r(71371);var l=n("ftyp");e.exports=function(e){if(!a(e,4,l))return;var t=o.unbox(e,0);if(!t)return;var r=o.getMimeType(t.data);if(!r)return;var n,u=t.end;for(;;){var f=o.unbox(e,u);if(!f)break;u=f.end;if(f.boxtype==="mdat")return;if(f.boxtype==="meta"){n=f.data;break}}if(!n)return;var c=o.readSizeFromMeta(n);if(!c)return;var v={width:c.width,height:c.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(c.variants.length>1){v.variants=c.variants}if(c.orientation){v.orientation=c.orientation}if(c.exif_location&&c.exif_location.offset+c.exif_location.length<=e.length){var h=i(e,c.exif_location.offset);var p=e.slice(c.exif_location.offset+h+4,c.exif_location.offset+c.exif_location.length);var d=s.get_orientation(p);if(d>0)v.orientation=d}return v}},2504:function(e,t,r){"use strict";var n=r(14847).eG;var a=r(14847).OF;var i=r(14847).mP;var o=n("BM");e.exports=function(e){if(e.length<26)return;if(!a(e,0,o))return;return{width:i(e,18),height:i(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},47342:function(e,t,r){"use strict";var n=r(14847).eG;var a=r(14847).OF;var i=r(14847).mP;var o=n("GIF87a");var s=n("GIF89a");e.exports=function(e){if(e.length<10)return;if(!a(e,0,o)&&!a(e,0,s))return;return{width:i(e,6),height:i(e,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},31355:function(e,t,r){"use strict";var n=r(14847).mP;var a=0;var i=1;var o=16;e.exports=function(e){var t=n(e,0);var r=n(e,2);var s=n(e,4);if(t!==a||r!==i||!s){return}var l=[];var u={width:0,height:0};for(var f=0;f<s;f++){var c=e[6+o*f]||256;var v=e[6+o*f+1]||256;var h={width:c,height:v};l.push(h);if(c>u.width||v>u.height){u=h}}return{width:u.width,height:u.height,variants:l,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}},54261:function(e,t,r){"use strict";var n=r(14847).n8;var a=r(14847).eG;var i=r(14847).OF;var o=r(71371);var s=a("Exif\0\0");e.exports=function(e){if(e.length<2)return;if(e[0]!==255||e[1]!==216||e[2]!==255)return;var t=2;for(;;){for(;;){if(e.length-t<2)return;if(e[t++]===255)break}var r=e[t++];var a;while(r===255)r=e[t++];if(208<=r&&r<=217||r===1){a=0}else if(192<=r&&r<=254){if(e.length-t<2)return;a=n(e,t)-2;t+=2}else{return}if(r===217||r===218){return}var l;if(r===225&&a>=10&&i(e,t,s)){l=o.get_orientation(e.slice(t+6,t+a))}if(a>=5&&(192<=r&&r<=207)&&r!==196&&r!==200&&r!==204){if(e.length-t<a)return;var u={width:n(e,t+3),height:n(e,t+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};if(l>0){u.orientation=l}return u}t+=a}}},6303:function(e,t,r){"use strict";var n=r(14847).eG;var a=r(14847).OF;var i=r(14847).Ag;var o=n("PNG\r\n\n");var s=n("IHDR");e.exports=function(e){if(e.length<24)return;if(!a(e,0,o))return;if(!a(e,12,s))return;return{width:i(e,16),height:i(e,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},38689:function(e,t,r){"use strict";var n=r(14847).eG;var a=r(14847).OF;var i=r(14847).Ag;var o=n("8BPS\0");e.exports=function(e){if(e.length<6+16)return;if(!a(e,0,o))return;return{width:i(e,6+12),height:i(e,6+8),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},6881:function(e){"use strict";function t(e){return e===32||e===9||e===13||e===10}function r(e){return typeof e==="number"&&isFinite(e)&&e>0}function n(e){var r=0,n=e.length;if(e[0]===239&&e[1]===187&&e[2]===191)r=3;while(r<n&&t(e[r]))r++;if(r===n)return false;return e[r]===60}var a=/<[-_.:a-zA-Z0-9][^>]*>/;var i=/^<([-_.:a-zA-Z0-9]+:)?svg\s/;var o=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/;var s=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/;var l=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/;var u=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function f(e){var t=e.match(o);var r=e.match(s);var n=e.match(l);return{width:t&&(t[1]||t[2]),height:r&&(r[1]||r[2]),viewbox:n&&(n[1]||n[2])}}function c(e){if(!u.test(e))return"px";return e.match(u)[0]}e.exports=function(e){if(!n(e))return;var t="";for(var o=0;o<e.length;o++){t+=String.fromCharCode(e[o])}var s=(t.match(a)||[""])[0];if(!i.test(s))return;var l=f(s);var u=parseFloat(l.width);var v=parseFloat(l.height);if(l.width&&l.height){if(!r(u)||!r(v))return;return{width:u,height:v,type:"svg",mime:"image/svg+xml",wUnits:c(l.width),hUnits:c(l.height)}}var h=(l.viewbox||"").split(" ");var p={width:h[2],height:h[3]};var d=parseFloat(p.width);var g=parseFloat(p.height);if(!r(d)||!r(g))return;if(c(p.width)!==c(p.height))return;var y=d/g;if(l.width){if(!r(u))return;return{width:u,height:u/y,type:"svg",mime:"image/svg+xml",wUnits:c(l.width),hUnits:c(l.width)}}if(l.height){if(!r(v))return;return{width:v*y,height:v,type:"svg",mime:"image/svg+xml",wUnits:c(l.height),hUnits:c(l.height)}}return{width:d,height:g,type:"svg",mime:"image/svg+xml",wUnits:c(p.width),hUnits:c(p.height)}}},66278:function(e,t,r){"use strict";var n=r(14847).eG;var a=r(14847).OF;var i=r(14847).mP;var o=r(14847).n8;var s=r(14847).nm;var l=r(14847).Ag;var u=n("II*\0");var f=n("MM\0*");function c(e,t,r){return r?o(e,t):i(e,t)}function v(e,t,r){return r?l(e,t):s(e,t)}function h(e,t,r){var n=c(e,t+2,r);var a=v(e,t+4,r);if(a!==1||n!==3&&n!==4)return null;if(n===3){return c(e,t+8,r)}return v(e,t+8,r)}e.exports=function(e){if(e.length<8)return;if(!a(e,0,u)&&!a(e,0,f))return;var t=e[0]===77;var r=v(e,4,t)-8;if(r<0)return;var n=r+8;if(e.length-n<2)return;var i=c(e,n+0,t)*12;if(i<=0)return;n+=2;if(e.length-n<i)return;var o,s,l,p;for(o=0;o<i;o+=12){p=c(e,n+o,t);if(p===256){s=h(e,n+o,t)}else if(p===257){l=h(e,n+o,t)}}if(s&&l){return{width:s,height:l,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}},90784:function(e,t,r){"use strict";var n=r(14847).eG;var a=r(14847).OF;var i=r(14847).mP;var o=r(14847).nm;var s=r(71371);var l=n("RIFF");var u=n("WEBP");function f(e,t){if(e[t+3]!==157||e[t+4]!==1||e[t+5]!==42){return}return{width:i(e,t+6)&16383,height:i(e,t+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function c(e,t){if(e[t]!==47)return;var r=o(e,t+1);return{width:(r&16383)+1,height:(r>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function v(e,t){return{width:(e[t+6]<<16|e[t+5]<<8|e[t+4])+1,height:(e[t+9]<<t|e[t+8]<<8|e[t+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}e.exports=function(e){if(e.length<16)return;if(!a(e,0,l)&&!a(e,8,u))return;var t=12;var r=null;var n=0;var i=o(e,4)+8;if(i>e.length)return;while(t+8<i){if(e[t]===0){t++;continue}var h=String.fromCharCode.apply(null,e.slice(t,t+4));var p=o(e,t+4);if(h==="VP8 "&&p>=10){r=r||f(e,t+8)}else if(h==="VP8L"&&p>=9){r=r||c(e,t+8)}else if(h==="VP8X"&&p>=10){r=r||v(e,t+8)}else if(h==="EXIF"){n=s.get_orientation(e.slice(t+8,t+8+p));t=Infinity}t+=8+p}if(!r)return;if(n>0){r.orientation=n}return r}},91497:function(e,t,r){"use strict";e.exports={avif:r(24461),bmp:r(2504),gif:r(47342),ico:r(31355),jpeg:r(54261),png:r(6303),psd:r(38689),svg:r(6881),tiff:r(66278),webp:r(90784)}},33575:function(e,t,r){"use strict";var n=r(91497);function a(e){var t=Object.keys(n);for(var r=0;r<t.length;r++){var a=n[t[r]](e);if(a)return a}return null}e.exports=function e(t){return a(t)};e.exports.parsers=n},90386:function(e){var t=e.exports={};var r;var n;function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){r=setTimeout}else{r=a}}catch(e){r=a}try{if(typeof clearTimeout==="function"){n=clearTimeout}else{n=i}}catch(e){n=i}})();function o(e){if(r===setTimeout){return setTimeout(e,0)}if((r===a||!r)&&setTimeout){r=setTimeout;return setTimeout(e,0)}try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function s(e){if(n===clearTimeout){return clearTimeout(e)}if((n===i||!n)&&clearTimeout){n=clearTimeout;return clearTimeout(e)}try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}var l=[];var u=false;var f;var c=-1;function v(){if(!u||!f){return}u=false;if(f.length){l=f.concat(l)}else{c=-1}if(l.length){h()}}function h(){if(u){return}var e=o(v);u=true;var t=l.length;while(t){f=l;l=[];while(++c<t){if(f){f[c].run()}}c=-1;t=l.length}f=null;u=false;s(e)}t.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}l.push(new p(e,t));if(l.length===1&&!u){o(h)}};function p(e,t){this.fun=e;this.array=t}p.prototype.run=function(){this.fun.apply(null,this.array)};t.title="browser";t.browser=true;t.env={};t.argv=[];t.version="";t.versions={};function d(){}t.on=d;t.addListener=d;t.once=d;t.off=d;t.removeListener=d;t.removeAllListeners=d;t.emit=d;t.prependListener=d;t.prependOnceListener=d;t.listeners=function(e){return[]};t.binding=function(e){throw new Error("process.binding is not supported")};t.cwd=function(){return"/"};t.chdir=function(e){throw new Error("process.chdir is not supported")};t.umask=function(){return 0}},5877:function(e,t,r){var n=r(9748),a=typeof window==="undefined"?r.g:window,i=["moz","webkit"],o="AnimationFrame",s=a["request"+o],l=a["cancel"+o]||a["cancelRequest"+o];for(var u=0;!s&&u<i.length;u++){s=a[i[u]+"Request"+o];l=a[i[u]+"Cancel"+o]||a[i[u]+"CancelRequest"+o]}if(!s||!l){var f=0,c=0,v=[],h=1e3/60;s=function(e){if(v.length===0){var t=n(),r=Math.max(0,h-(t-f));f=r+t;setTimeout((function(){var e=v.slice(0);v.length=0;for(var t=0;t<e.length;t++){if(!e[t].cancelled){try{e[t].callback(f)}catch(r){setTimeout((function(){throw r}),0)}}}}),Math.round(r))}v.push({handle:++c,callback:e,cancelled:false});return c};l=function(e){for(var t=0;t<v.length;t++){if(v[t].handle===e){v[t].cancelled=true}}}}e.exports=function(e){return s.call(a,e)};e.exports.cancel=function(){l.apply(a,arguments)};e.exports.polyfill=function(e){if(!e){e=a}e.requestAnimationFrame=s;e.cancelAnimationFrame=l}},3593:function(e,t,r){"use strict";var n=r(21527);var a=r(25075);var i=r(93447);var o=r(71299);var s=r(56131);var l=r(30120);var u=r(57060);var f=u.float32;var c=u.fract32;e.exports=h;var v=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function h(e,t){if(typeof e==="function"){if(!t){t={}}t.regl=e}else{t=e}if(t.length){t.positions=t}e=t.regl;if(!e.hasExtension("ANGLE_instanced_arrays")){throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled")}var r=e._gl,u,h,p,d,g,y,m={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},x=[];d=e.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)});h=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});p=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});g=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});y=e.buffer({usage:"static",type:"float",data:v});T(t);u=e({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:e.prop("range"),lineWidth:e.prop("lineWidth"),capSize:e.prop("capSize"),opacity:e.prop("opacity"),scale:e.prop("scale"),translate:e.prop("translate"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),viewport:function(e,t){return[t.viewport.x,t.viewport.y,e.viewportWidth,e.viewportHeight]}},attributes:{color:{buffer:d,offset:function(e,t){return t.offset*4},divisor:1},position:{buffer:h,offset:function(e,t){return t.offset*8},divisor:1},positionFract:{buffer:p,offset:function(e,t){return t.offset*8},divisor:1},error:{buffer:g,offset:function(e,t){return t.offset*16},divisor:1},direction:{buffer:y,stride:24,offset:0},lineOffset:{buffer:y,stride:24,offset:8},capOffset:{buffer:y,stride:24,offset:16}},primitive:"triangles",blend:{enable:true,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:false},scissor:{enable:true,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:false,instances:e.prop("count"),count:v.length});s(b,{update:T,draw:_,destroy:k,regl:e,gl:r,canvas:r.canvas,groups:x});return b;function b(e){if(e){T(e)}else if(e===null){k()}_()}function _(t){if(typeof t==="number"){return w(t)}if(t&&!Array.isArray(t)){t=[t]}e._refresh();x.forEach((function(e,r){if(!e){return}if(t){if(!t[r]){e.draw=false}else{e.draw=true}}if(!e.draw){e.draw=true;return}w(r)}))}function w(e){if(typeof e==="number"){e=x[e]}if(e==null){return}if(!(e&&e.count&&e.color&&e.opacity&&e.positions&&e.positions.length>1)){return}e.scaleRatio=[e.scale[0]*e.viewport.width,e.scale[1]*e.viewport.height];u(e);if(e.after){e.after(e)}}function T(e){if(!e){return}if(e.length!=null){if(typeof e[0]==="number"){e=[{positions:e}]}}else if(!Array.isArray(e)){e=[e]}var t=0,u=0;b.groups=x=e.map((function(e,f){var v=x[f];if(!e){return v}else if(typeof e==="function"){e={after:e}}else if(typeof e[0]==="number"){e={positions:e}}e=o(e,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"});if(!v){x[f]=v={id:f,scale:null,translate:null,scaleFract:null,translateFract:null,draw:true};e=s({},m,e)}i(v,e,[{lineWidth:function(e){return+e*.5},capSize:function(e){return+e*.5},opacity:parseFloat,errors:function(e){e=l(e);u+=e.length;return e},positions:function(e,r){e=l(e,"float64");r.count=Math.floor(e.length/2);r.bounds=n(e,2);r.offset=t;t+=r.count;return e}},{color:function(e,t){var r=t.count;if(!e){e="transparent"}if(!Array.isArray(e)||typeof e[0]==="number"){var n=e;e=Array(r);for(var i=0;i<r;i++){e[i]=n}}if(e.length<r){throw Error("Not enough colors")}var o=new Uint8Array(r*4);for(var s=0;s<r;s++){var l=a(e[s],"uint8");o.set(l,s*4)}return o},range:function(e,t,r){var n=t.bounds;if(!e){e=n}t.scale=[1/(e[2]-e[0]),1/(e[3]-e[1])];t.translate=[-e[0],-e[1]];t.scaleFract=c(t.scale);t.translateFract=c(t.translate);return e},viewport:function(e){var t;if(Array.isArray(e)){t={x:e[0],y:e[1],width:e[2]-e[0],height:e[3]-e[1]}}else if(e){t={x:e.x||e.left||0,y:e.y||e.top||0};if(e.right){t.width=e.right-t.x}else{t.width=e.w||e.width||0}if(e.bottom){t.height=e.bottom-t.y}else{t.height=e.h||e.height||0}}else{t={x:0,y:0,width:r.drawingBufferWidth,height:r.drawingBufferHeight}}return t}}]);return v}));if(t||u){var v=x.reduce((function(e,t,r){return e+(t?t.count:0)}),0);var y=new Float64Array(v*2);var _=new Uint8Array(v*4);var w=new Float32Array(v*4);x.forEach((function(e,t){if(!e){return}var r=e.positions;var n=e.count;var a=e.offset;var i=e.color;var o=e.errors;if(!n){return}_.set(i,a*4);w.set(o,a*4);y.set(r,a*2)}));var T=f(y);h(T);var k=c(y,T);p(k);d(_);g(w)}}function k(){h.destroy();p.destroy();d.destroy();g.destroy();y.destroy()}}},46075:function(e,t,r){"use strict";var n=r(25075);var a=r(21527);var i=r(56131);var o=r(56068);var s=r(71299);var l=r(30120);var u=r(11474);var f=r(54);var c=r(57060);var v=c.float32;var h=c.fract32;var p=r(83522);var d=r(18863);var g=r(6851);e.exports=y;function y(e,t){if(!(this instanceof y)){return new y(e,t)}if(typeof e==="function"){if(!t){t={}}t.regl=e}else{t=e}if(t.length){t.positions=t}e=t.regl;if(!e.hasExtension("ANGLE_instanced_arrays")){throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled")}this.gl=e._gl;this.regl=e;this.passes=[];this.shaders=y.shaders.has(e)?y.shaders.get(e):y.shaders.set(e,y.createShaders(e)).get(e);this.update(t)}y.dashMult=2;y.maxPatternLength=256;y.precisionThreshold=3e6;y.maxPoints=1e4;y.maxLines=2048;y.shaders=new p;y.createShaders=function(e){var t=e.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]});var r={primitive:"triangle strip",instances:e.prop("count"),count:4,offset:0,uniforms:{miterMode:function(e,t){return t.join==="round"?2:1},miterLimit:e.prop("miterLimit"),scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),thickness:e.prop("thickness"),dashTexture:e.prop("dashTexture"),opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),dashLength:e.prop("dashLength"),viewport:function(e,t){return[t.viewport.x,t.viewport.y,e.viewportWidth,e.viewportHeight]},depth:e.prop("depth")},blend:{enable:true,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(e,t){return!t.overlay}},stencil:{enable:false},scissor:{enable:true,box:e.prop("viewport")},viewport:e.prop("viewport")};var n=e(i({vert:o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:o(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:t,divisor:0,stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:e.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},r));var a;try{a=e(i({cull:{enable:true,face:"back"},vert:o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:o(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:t,divisor:0,stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aColor:{buffer:e.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:e.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},r))}catch(l){a=n}var s=e({primitive:"triangle",elements:function(e,t){return t.triangles},offset:0,vert:o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:o(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:e.prop("scale"),color:e.prop("fill"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),viewport:function(e,t){return[t.viewport.x,t.viewport.y,e.viewportWidth,e.viewportHeight]}},attributes:{position:{buffer:e.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:8}},blend:r.blend,depth:{enable:false},scissor:r.scissor,stencil:r.stencil,viewport:r.viewport});return{fill:s,rect:n,miter:a}};y.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:false,viewport:null,range:null,close:false,fill:null};y.prototype.render=function(){var e;var t=[],r=arguments.length;while(r--)t[r]=arguments[r];if(t.length){(e=this).update.apply(e,t)}this.draw()};y.prototype.draw=function(){var e=this;var t=[],r=arguments.length;while(r--)t[r]=arguments[r];(t.length?t:this.passes).forEach((function(t,r){var n;if(t&&Array.isArray(t)){return(n=e).draw.apply(n,t)}if(typeof t==="number"){t=e.passes[t]}if(!(t&&t.count>1&&t.opacity)){return}e.regl._refresh();if(t.fill&&t.triangles&&t.triangles.length>2){e.shaders.fill(t)}if(!t.thickness){return}if(t.scale[0]*t.viewport.width>y.precisionThreshold||t.scale[1]*t.viewport.height>y.precisionThreshold){e.shaders.rect(t)}else if(t.join==="rect"||!t.join&&(t.thickness<=2||t.count>=y.maxPoints)){e.shaders.rect(t)}else{e.shaders.miter(t)}}));return this};y.prototype.update=function(e){var t=this;if(!e){return}if(e.length!=null){if(typeof e[0]==="number"){e=[{positions:e}]}}else if(!Array.isArray(e)){e=[e]}var r=this;var o=r.regl;var c=r.gl;e.forEach((function(e,r){var p=t.passes[r];if(e===undefined){return}if(e===null){t.passes[r]=null;return}if(typeof e[0]==="number"){e={positions:e}}e=s(e,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"});if(!p){t.passes[r]=p={id:r,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:o.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:o.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:o.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:o.buffer({usage:"dynamic",type:"float",data:new Uint8Array})};e=i({},y.defaults,e)}if(e.thickness!=null){p.thickness=parseFloat(e.thickness)}if(e.opacity!=null){p.opacity=parseFloat(e.opacity)}if(e.miterLimit!=null){p.miterLimit=parseFloat(e.miterLimit)}if(e.overlay!=null){p.overlay=!!e.overlay;if(r<y.maxLines){p.depth=2*(y.maxLines-1-r%y.maxLines)/y.maxLines-1}}if(e.join!=null){p.join=e.join}if(e.hole!=null){p.hole=e.hole}if(e.fill!=null){p.fill=!e.fill?null:n(e.fill,"uint8")}if(e.viewport!=null){p.viewport=d(e.viewport)}if(!p.viewport){p.viewport=d([c.drawingBufferWidth,c.drawingBufferHeight])}if(e.close!=null){p.close=e.close}if(e.positions===null){e.positions=[]}if(e.positions){var m,x;if(e.positions.x&&e.positions.y){var b=e.positions.x;var _=e.positions.y;x=p.count=Math.max(b.length,_.length);m=new Float64Array(x*2);for(var w=0;w<x;w++){m[w*2]=b[w];m[w*2+1]=_[w]}}else{m=l(e.positions,"float64");x=p.count=Math.floor(m.length/2)}var T=p.bounds=a(m,2);if(p.fill){var k=[];var A={};var M=0;for(var S=0,E=0,L=p.count;S<L;S++){var C=m[S*2];var I=m[S*2+1];if(isNaN(C)||isNaN(I)||C==null||I==null){C=m[M*2];I=m[M*2+1];A[S]=M}else{M=S}k[E++]=C;k[E++]=I}if(e.splitNull){if(!(p.count-1 in A)){A[p.count]=p.count-1}var P=Object.keys(A).map(Number).sort((function(e,t){return e-t}));var O=[];var D=0;var z=p.hole!=null?p.hole[0]:null;if(z!=null){var R=g(P,(function(e){return e>=z}));P=P.slice(0,R);P.push(z)}var F=function(e){var t=k.slice(D*2,P[e]*2).concat(z?k.slice(z*2):[]);var r=(p.hole||[]).map((function(t){return t-z+(P[e]-D)}));var n=u(t,r);n=n.map((function(t){return t+D+(t+D<P[e]?0:z-P[e])}));O.push.apply(O,n);D=P[e]+1};for(var B=0;B<P.length;B++)F(B);for(var N=0,j=O.length;N<j;N++){if(A[O[N]]!=null){O[N]=A[O[N]]}}p.triangles=O}else{var U=u(k,p.hole||[]);for(var V=0,H=U.length;V<H;V++){if(A[U[V]]!=null){U[V]=A[U[V]]}}p.triangles=U}}var q=new Float64Array(m);f(q,2,T);var G=new Float64Array(x*2+6);if(p.close){if(m[0]===m[x*2-2]&&m[1]===m[x*2-1]){G[0]=q[x*2-4];G[1]=q[x*2-3]}else{G[0]=q[x*2-2];G[1]=q[x*2-1]}}else{G[0]=q[0];G[1]=q[1]}G.set(q,2);if(p.close){if(m[0]===m[x*2-2]&&m[1]===m[x*2-1]){G[x*2+2]=q[2];G[x*2+3]=q[3];p.count-=1}else{G[x*2+2]=q[0];G[x*2+3]=q[1];G[x*2+4]=q[2];G[x*2+5]=q[3]}}else{G[x*2+2]=q[x*2-2];G[x*2+3]=q[x*2-1];G[x*2+4]=q[x*2-2];G[x*2+5]=q[x*2-1]}var Z=v(G);p.positionBuffer(Z);var Y=h(G,Z);p.positionFractBuffer(Y)}if(e.range){p.range=e.range}else if(!p.range){p.range=p.bounds}if((e.range||e.positions)&&p.count){var W=p.bounds;var X=W[2]-W[0],J=W[3]-W[1];var K=p.range[2]-p.range[0],$=p.range[3]-p.range[1];p.scale=[X/K,J/$];p.translate=[-p.range[0]/K+W[0]/K||0,-p.range[1]/$+W[1]/$||0];p.scaleFract=h(p.scale);p.translateFract=h(p.translate)}if(e.dashes){var Q=0,ee;if(!e.dashes||e.dashes.length<2){Q=1;ee=new Uint8Array([255,255,255,255,255,255,255,255])}else{Q=0;for(var te=0;te<e.dashes.length;++te){Q+=e.dashes[te]}ee=new Uint8Array(Q*y.dashMult);var re=0;var ne=255;for(var ae=0;ae<2;ae++){for(var ie=0;ie<e.dashes.length;++ie){for(var oe=0,se=e.dashes[ie]*y.dashMult*.5;oe<se;++oe){ee[re++]=ne}ne^=255}}}p.dashLength=Q;p.dashTexture({channels:1,data:ee,width:ee.length,height:1,mag:"linear",min:"linear"},0,0)}if(e.color){var le=p.count;var ue=e.color;if(!ue){ue="transparent"}var fe=new Uint8Array(le*4+4);if(!Array.isArray(ue)||typeof ue[0]==="number"){var ce=n(ue,"uint8");for(var ve=0;ve<le+1;ve++){fe.set(ce,ve*4)}}else{for(var he=0;he<le;he++){var pe=n(ue[he],"uint8");fe.set(pe,he*4)}fe.set(n(ue[0],"uint8"),le*4)}p.colorBuffer({usage:"dynamic",type:"uint8",data:fe})}}));if(e.length<this.passes.length){for(var p=e.length;p<this.passes.length;p++){var m=this.passes[p];if(!m){continue}m.colorBuffer.destroy();m.positionBuffer.destroy();m.dashTexture.destroy()}this.passes.length=e.length}var x=[];for(var b=0;b<this.passes.length;b++){if(this.passes[b]!==null){x.push(this.passes[b])}}this.passes=x;return this};y.prototype.destroy=function(){this.passes.forEach((function(e){e.colorBuffer.destroy();e.positionBuffer.destroy();e.dashTexture.destroy()}));this.passes.length=0;return this}},11870:function(e,t,r){"use strict";function n(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function a(e,t){return s(e)||n(e,t)||u(e,t)||v()}function i(e){return o(e)||l(e)||u(e)||c()}function o(e){if(Array.isArray(e))return f(e)}function s(e){if(Array.isArray(e))return e}function l(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function u(e,t){if(!e)return;if(typeof e==="string")return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}function f(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var h=r(25075);var p=r(21527);var d=r(6475);var g=r(88294);var y=r(56131);var m=r(56068);var x=r(71299);var b=r(93447);var _=r(30120);var w=r(62683);var T=r(57060);var k=r(18863);var A=M;function M(e,t){var r=this;if(!(this instanceof M))return new M(e,t);if(typeof e==="function"){if(!t)t={};t.regl=e}else{t=e;e=null}if(t&&t.length)t.positions=t;e=t.regl;var n=e._gl,a,i=[],o={},s=[],l=[null],u=[null];var f=255,c=100;this.tooManyColors=w;a=e.texture({data:new Uint8Array(f*4),width:f,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"});y(this,{regl:e,gl:n,groups:s,markerCache:u,markerTextures:l,palette:i,paletteIds:o,paletteTexture:a,maxColors:f,maxSize:c,canvas:n.canvas});this.update(t);var v={uniforms:{constPointSize:!!t.constPointSize,opacity:e.prop("opacity"),paletteSize:function e(t,n){return[r.tooManyColors?0:f,a.height]},pixelRatio:e.context("pixelRatio"),scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translate:e.prop("translate"),translateFract:e.prop("translateFract"),markerTexture:e.prop("markerTexture"),paletteTexture:a},attributes:{x:function e(t,r){return r.xAttr||{buffer:r.positionBuffer,stride:8,offset:0}},y:function e(t,r){return r.yAttr||{buffer:r.positionBuffer,stride:8,offset:4}},xFract:function e(t,r){return r.xAttr?{constant:[0,0]}:{buffer:r.positionFractBuffer,stride:8,offset:0}},yFract:function e(t,r){return r.yAttr?{constant:[0,0]}:{buffer:r.positionFractBuffer,stride:8,offset:4}},size:function e(t,n){return n.size.length?{buffer:n.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(n.size*255/r.maxSize)]}},borderSize:function e(t,n){return n.borderSize.length?{buffer:n.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(n.borderSize*255/r.maxSize)]}},colorId:function e(t,n){return n.color.length?{buffer:n.colorBuffer,stride:r.tooManyColors?8:4,offset:0}:{constant:r.tooManyColors?i.slice(n.color*4,n.color*4+4):[n.color]}},borderColorId:function e(t,n){return n.borderColor.length?{buffer:n.colorBuffer,stride:r.tooManyColors?8:4,offset:r.tooManyColors?4:2}:{constant:r.tooManyColors?i.slice(n.borderColor*4,n.borderColor*4+4):[n.borderColor]}},isActive:function e(t,r){return r.activation===true?{constant:[1]}:r.activation?r.activation:{constant:[0]}}},blend:{enable:true,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:true,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:{enable:false},depth:{enable:false},elements:e.prop("elements"),count:e.prop("count"),offset:e.prop("offset"),primitive:"points"};var h=y({},v);h.frag=m(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]);h.vert=m(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]);this.drawMarker=e(h);var p=y({},v);p.frag=m(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]);p.vert=m(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]);if(w){p.frag=p.frag.replace("smoothstep","smoothStep");h.frag=h.frag.replace("smoothstep","smoothStep")}this.drawCircle=e(p)}M.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:undefined,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4};M.prototype.render=function(){if(arguments.length){this.update.apply(this,arguments)}this.draw();return this};M.prototype.draw=function(){var e=this;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}var a=this.groups;if(r.length===1&&Array.isArray(r[0])&&(r[0][0]===null||Array.isArray(r[0][0]))){r=r[0]}this.regl._refresh();if(r.length){for(var i=0;i<r.length;i++){this.drawItem(i,r[i])}}else{a.forEach((function(t,r){e.drawItem(r)}))}return this};M.prototype.drawItem=function(e,t){var r=this.groups;var n=r[e];if(typeof t==="number"){e=t;n=r[t];t=null}if(!(n&&n.count&&n.opacity))return;if(n.activation[0]){this.drawCircle(this.getMarkerDrawOptions(0,n,t))}var a=[];for(var o=1;o<n.activation.length;o++){if(!n.activation[o]||n.activation[o]!==true&&!n.activation[o].data.length)continue;a.push.apply(a,i(this.getMarkerDrawOptions(o,n,t)))}if(a.length){this.drawMarker(a)}};M.prototype.getMarkerDrawOptions=function(e,t,r){var n=t.range,i=t.tree,o=t.viewport,s=t.activation,l=t.selectionBuffer,u=t.count;var f=this.regl;if(!i){if(r){return[y({},t,{markerTexture:this.markerTextures[e],activation:s[e],count:r.length,elements:r,offset:0})]}return[y({},t,{markerTexture:this.markerTextures[e],activation:s[e],offset:0})]}var c=[];var v=i.range(n,{lod:true,px:[(n[2]-n[0])/o.width,(n[3]-n[1])/o.height]});if(r){var h=s[e];var p=h.data;var d=new Uint8Array(u);for(var g=0;g<r.length;g++){var m=r[g];d[m]=p?p[m]:1}l.subdata(d)}for(var x=v.length;x--;){var b=a(v[x],2),_=b[0],w=b[1];c.push(y({},t,{markerTexture:this.markerTextures[e],activation:r?l:s[e],offset:_,count:w-_}))}return c};M.prototype.update=function(){var e=this;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}if(!r.length)return;if(r.length===1&&Array.isArray(r[0]))r=r[0];var a=this.groups,i=this.gl,o=this.regl,s=this.maxSize,l=this.maxColors,u=this.palette;this.groups=a=r.map((function(t,r){var n=a[r];if(t===undefined)return n;if(t===null)t={positions:null};else if(typeof t==="function")t={ondraw:t};else if(typeof t[0]==="number")t={positions:t};t=x(t,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"});if(t.positions===null)t.positions=[];if(t.tooManyColors!=null)e.tooManyColors=t.tooManyColors;if(!n){a[r]=n={id:r,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:o.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:o.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:o.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:o.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:o.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})};t=y({},M.defaults,t)}if(t.positions&&!("marker"in t)){t.marker=n.marker;delete n.marker}if(t.marker&&!("positions"in t)){t.positions=n.positions;delete n.positions}var f=0,c=0;b(n,t,[{snap:true,size:function e(t,r){if(t==null)t=M.defaults.size;f+=t&&t.length?1:0;return t},borderSize:function e(t,r){if(t==null)t=M.defaults.borderSize;f+=t&&t.length?1:0;return t},opacity:parseFloat,color:function t(r,n){if(r==null)r=M.defaults.color;r=e.updateColor(r);c++;return r},borderColor:function t(r,n){if(r==null)r=M.defaults.borderColor;r=e.updateColor(r);c++;return r},bounds:function e(t,r,n){if(!("range"in n))n.range=null;return t},positions:function e(t,r,n){var a=r.snap;var i=r.positionBuffer,s=r.positionFractBuffer,l=r.selectionBuffer;if(t.x||t.y){if(t.x.length){r.xAttr={buffer:o.buffer(t.x),offset:0,stride:4,count:t.x.length}}else{r.xAttr={buffer:t.x.buffer,offset:t.x.offset*4||0,stride:(t.x.stride||1)*4,count:t.x.count}}if(t.y.length){r.yAttr={buffer:o.buffer(t.y),offset:0,stride:4,count:t.y.length}}else{r.yAttr={buffer:t.y.buffer,offset:t.y.offset*4||0,stride:(t.y.stride||1)*4,count:t.y.count}}r.count=Math.max(r.xAttr.count,r.yAttr.count);return t}t=_(t,"float64");var u=r.count=Math.floor(t.length/2);var f=r.bounds=u?p(t,2):null;if(!n.range&&!r.range){delete r.range;n.range=f}if(!n.marker&&!r.marker){delete r.marker;n.marker=null}if(a&&(a===true||u>a)){r.tree=g(t,{bounds:f})}else if(a&&a.length){r.tree=a}if(r.tree){var c={primitive:"points",usage:"static",data:r.tree,type:"uint32"};if(r.elements)r.elements(c);else r.elements=o.elements(c)}var v=T.float32(t);i({data:v,usage:"dynamic"});var h=T.fract32(t,v);s({data:h,usage:"dynamic"});l({data:new Uint8Array(u),type:"uint8",usage:"stream"});return t}},{marker:function t(r,n,a){var i=n.activation;i.forEach((function(e){return e&&e.destroy&&e.destroy()}));i.length=0;if(!r||typeof r[0]==="number"){var s=e.addMarker(r);i[s]=true}else{var l=[];for(var u=0,f=Math.min(r.length,n.count);u<f;u++){var c=e.addMarker(r[u]);if(!l[c])l[c]=new Uint8Array(n.count);l[c][u]=1}for(var v=0;v<l.length;v++){if(!l[v])continue;var h={data:l[v],type:"uint8",usage:"static"};if(!i[v]){i[v]=o.buffer(h)}else{i[v](h)}i[v].data=l[v]}}return r},range:function e(t,r,n){var a=r.bounds;if(!a)return;if(!t)t=a;r.scale=[1/(t[2]-t[0]),1/(t[3]-t[1])];r.translate=[-t[0],-t[1]];r.scaleFract=T.fract(r.scale);r.translateFract=T.fract(r.translate);return t},viewport:function e(t){var r=k(t||[i.drawingBufferWidth,i.drawingBufferHeight]);return r}}]);if(f){var v=n,h=v.count,d=v.size,m=v.borderSize,w=v.sizeBuffer;var A=new Uint8Array(h*2);if(d.length||m.length){for(var S=0;S<h;S++){A[S*2]=Math.round((d[S]==null?d:d[S])*255/s);A[S*2+1]=Math.round((m[S]==null?m:m[S])*255/s)}}w({data:A,usage:"dynamic"})}if(c){var E=n,L=E.count,C=E.color,I=E.borderColor,P=E.colorBuffer;var O;if(e.tooManyColors){if(C.length||I.length){O=new Uint8Array(L*8);for(var D=0;D<L;D++){var z=C[D];O[D*8]=u[z*4];O[D*8+1]=u[z*4+1];O[D*8+2]=u[z*4+2];O[D*8+3]=u[z*4+3];var R=I[D];O[D*8+4]=u[R*4];O[D*8+5]=u[R*4+1];O[D*8+6]=u[R*4+2];O[D*8+7]=u[R*4+3]}}}else{if(C.length||I.length){O=new Uint8Array(L*4+2);for(var F=0;F<L;F++){if(C[F]!=null){O[F*4]=C[F]%l;O[F*4+1]=Math.floor(C[F]/l)}if(I[F]!=null){O[F*4+2]=I[F]%l;O[F*4+3]=Math.floor(I[F]/l)}}}}P({data:O||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return n}))};M.prototype.addMarker=function(e){var t=this.markerTextures,r=this.regl,n=this.markerCache;var a=e==null?0:n.indexOf(e);if(a>=0)return a;var i;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray){i=e}else{i=new Uint8Array(e.length);for(var o=0,s=e.length;o<s;o++){i[o]=e[o]*255}}var l=Math.floor(Math.sqrt(i.length));a=t.length;n.push(e);t.push(r.texture({channels:1,data:i,radius:l,mag:"linear",min:"linear"}));return a};M.prototype.updateColor=function(e){var t=this.paletteIds,r=this.palette,n=this.maxColors;if(!Array.isArray(e)){e=[e]}var a=[];if(typeof e[0]==="number"){var i=[];if(Array.isArray(e)){for(var o=0;o<e.length;o+=4){i.push(e.slice(o,o+4))}}else{for(var s=0;s<e.length;s+=4){i.push(e.subarray(s,s+4))}}e=i}for(var l=0;l<e.length;l++){var u=e[l];u=h(u,"uint8");var f=d(u,false);if(t[f]==null){var c=r.length;t[f]=Math.floor(c/4);r[c]=u[0];r[c+1]=u[1];r[c+2]=u[2];r[c+3]=u[3]}a[l]=t[f]}if(!this.tooManyColors&&r.length>n*4)this.tooManyColors=true;this.updatePalette(r);return a.length===1?a[0]:a};M.prototype.updatePalette=function(e){if(this.tooManyColors)return;var t=this.maxColors,r=this.paletteTexture;var n=Math.ceil(e.length*.25/t);if(n>1){e=e.slice();for(var a=e.length*.25%t;a<n*t;a++){e.push(0,0,0,0)}}if(r.height<n){r.resize(t,n)}r.subimage({width:Math.min(e.length*.25,t),height:n,data:e},0,0)};M.prototype.destroy=function(){this.groups.forEach((function(e){e.sizeBuffer.destroy();e.positionBuffer.destroy();e.positionFractBuffer.destroy();e.colorBuffer.destroy();e.activation.forEach((function(e){return e&&e.destroy&&e.destroy()}));e.selectionBuffer.destroy();if(e.elements)e.elements.destroy()}));this.groups.length=0;this.paletteTexture.destroy();this.markerTextures.forEach((function(e){return e&&e.destroy&&e.destroy()}));return this};var S=r(56131);var E=function e(t,r){var n=new A(t,r);var a=n.render.bind(n);S(a,{render:a,update:n.update.bind(n),draw:n.draw.bind(n),destroy:n.destroy.bind(n),regl:n.regl,gl:n.gl,canvas:n.gl.canvas,groups:n.groups,markers:n.markerCache,palette:n.palette});return a};e.exports=E},60487:function(e,t,r){"use strict";var n=r(11870);var a=r(71299);var i=r(21527);var o=r(5877);var s=r(57471);var l=r(18863);var u=r(30120);e.exports=f;function f(e,t){if(!(this instanceof f)){return new f(e,t)}this.traces=[];this.passes={};this.regl=e;this.scatter=n(e);this.canvas=this.scatter.canvas}f.prototype.render=function(){var e=this;var t;var r=[],n=arguments.length;while(n--)r[n]=arguments[n];if(r.length){(t=this).update.apply(t,r)}if(this.regl.attributes.preserveDrawingBuffer){return this.draw()}if(this.dirty){if(this.planned==null){this.planned=o((function(){e.draw();e.dirty=true;e.planned=null}))}}else{this.draw();this.dirty=true;o((function(){e.dirty=false}))}return this};f.prototype.update=function(){var e;var t=[],r=arguments.length;while(r--)t[r]=arguments[r];if(!t.length){return}for(var n=0;n<t.length;n++){this.updateItem(n,t[n])}this.traces=this.traces.filter(Boolean);var a=[];var i=0;for(var o=0;o<this.traces.length;o++){var s=this.traces[o];var l=this.traces[o].passes;for(var u=0;u<l.length;u++){a.push(this.passes[l[u]])}s.passOffset=i;i+=s.passes.length}(e=this.scatter).update.apply(e,a);return this};f.prototype.updateItem=function(e,t){var r=this;var n=r.regl;if(t===null){this.traces[e]=null;return this}if(!t){return this}var o=a(t,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"});var s=this.traces[e]||(this.traces[e]={id:e,buffer:n.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:l([n._gl.drawingBufferWidth,n._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:true,upper:true,lower:true});if(o.color!=null){s.color=o.color}if(o.size!=null){s.size=o.size}if(o.marker!=null){s.marker=o.marker}if(o.borderColor!=null){s.borderColor=o.borderColor}if(o.borderSize!=null){s.borderSize=o.borderSize}if(o.opacity!=null){s.opacity=o.opacity}if(o.viewport){s.viewport=l(o.viewport)}if(o.diagonal!=null){s.diagonal=o.diagonal}if(o.upper!=null){s.upper=o.upper}if(o.lower!=null){s.lower=o.lower}if(o.data){s.buffer(u(o.data));s.columns=o.data.length;s.count=o.data[0].length;s.bounds=[];for(var f=0;f<s.columns;f++){s.bounds[f]=i(o.data[f],1)}}var p;if(o.range){s.range=o.range;p=s.range&&typeof s.range[0]!=="number"}if(o.domain){s.domain=o.domain}var d=false;if(o.padding!=null){if(Array.isArray(o.padding)&&o.padding.length===s.columns&&typeof o.padding[o.padding.length-1]==="number"){s.padding=o.padding.map(h);d=true}else{s.padding=h(o.padding)}}var g=s.columns;var y=s.count;var m=s.viewport.width;var x=s.viewport.height;var b=s.viewport.x;var _=s.viewport.y;var w=m/g;var T=x/g;s.passes=[];for(var k=0;k<g;k++){for(var A=0;A<g;A++){if(!s.diagonal&&A===k){continue}if(!s.upper&&k>A){continue}if(!s.lower&&k<A){continue}var M=c(s.id,k,A);var S=this.passes[M]||(this.passes[M]={});if(o.data){if(o.transpose){S.positions={x:{buffer:s.buffer,offset:A,count:y,stride:g},y:{buffer:s.buffer,offset:k,count:y,stride:g}}}else{S.positions={x:{buffer:s.buffer,offset:A*y,count:y},y:{buffer:s.buffer,offset:k*y,count:y}}}S.bounds=v(s.bounds,k,A)}if(o.domain||o.viewport||o.data){var E=d?v(s.padding,k,A):s.padding;if(s.domain){var L=v(s.domain,k,A);var C=L[0];var I=L[1];var P=L[2];var O=L[3];S.viewport=[b+C*m+E[0],_+I*x+E[1],b+P*m-E[2],_+O*x-E[3]]}else{S.viewport=[b+A*w+w*E[0],_+k*T+T*E[1],b+(A+1)*w-w*E[2],_+(k+1)*T-T*E[3]]}}if(o.color){S.color=s.color}if(o.size){S.size=s.size}if(o.marker){S.marker=s.marker}if(o.borderSize){S.borderSize=s.borderSize}if(o.borderColor){S.borderColor=s.borderColor}if(o.opacity){S.opacity=s.opacity}if(o.range){S.range=p?v(s.range,k,A):s.range||S.bounds}s.passes.push(M)}}return this};f.prototype.draw=function(){var e;var t=[],r=arguments.length;while(r--)t[r]=arguments[r];if(!t.length){this.scatter.draw()}else{var n=[];for(var a=0;a<t.length;a++){if(typeof t[a]==="number"){var i=this.traces[t[a]];var o=i.passes;var l=i.passOffset;n.push.apply(n,s(l,l+o.length))}else if(t[a].length){var u=t[a];var f=this.traces[a];var c=f.passes;var v=f.passOffset;c=c.map((function(e,t){n[v+t]=u}))}}(e=this.scatter).draw.apply(e,n)}return this};f.prototype.destroy=function(){this.traces.forEach((function(e){if(e.buffer&&e.buffer.destroy){e.buffer.destroy()}}));this.traces=null;this.passes=null;this.scatter.destroy();return this};function c(e,t,r){var n=e.id!=null?e.id:e;var a=t;var i=r;var o=n<<16|(a&255)<<8|i&255;return o}function v(e,t,r){var n,a,i,o,s,l,u,f;var c=e[t],v=e[r];if(c.length>2){n=c[0];i=c[2];a=c[1];o=c[3]}else if(c.length){n=a=c[0];i=o=c[1]}else{n=c.x;a=c.y;i=c.x+c.width;o=c.y+c.height}if(v.length>2){s=v[0];u=v[2];l=v[1];f=v[3]}else if(v.length){s=l=v[0];u=f=v[1]}else{s=v.x;l=v.y;u=v.x+v.width;f=v.y+v.height}return[s,a,u,o]}function h(e){if(typeof e==="number"){return[e,e,e,e]}else if(e.length===2){return[e[0],e[1],e[0],e[1]]}else{var t=l(e);return[t.x,t.y,t.x+t.width,t.y+t.height]}}},98580:function(e){(function(t,r){true?e.exports=r():0})(this,(function(){function e(e,t){this.id=ee++;this.type=e;this.data=t}function t(e){if(0===e.length)return[];var r=e.charAt(0),n=e.charAt(e.length-1);if(1<e.length&&r===n&&('"'===r||"'"===r))return['"'+e.substr(1,e.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e))return t(e.substr(0,r.index)).concat(t(r[1])).concat(t(e.substr(r.index+r[0].length)));r=e.split(".");if(1===r.length)return['"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];e=[];for(n=0;n<r.length;++n)e=e.concat(t(r[n]));return e}function r(e){return"["+t(e).join("][")+"]"}function n(t,r){if("function"===typeof t)return new e(0,t);if("number"===typeof t||"boolean"===typeof t)return new e(5,t);if(Array.isArray(t))return new e(6,t.map((function(e,t){return n(e,r+"["+t+"]")})));if(t instanceof e)return t}function a(){var e={"":0},t=[""];return{id:function(r){var n=e[r];if(n)return n;n=e[r]=t.length;t.push(r);return n},str:function(e){return t[e]}}}function i(e,t,r){function n(){var t=window.innerWidth,n=window.innerHeight;e!==document.body&&(n=a.getBoundingClientRect(),t=n.right-n.left,n=n.bottom-n.top);a.width=r*t;a.height=r*n}var a=document.createElement("canvas");Q(a.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});e.appendChild(a);e===document.body&&(a.style.position="absolute",Q(e.style,{margin:0,padding:0}));var i;e!==document.body&&"function"===typeof ResizeObserver?(i=new ResizeObserver((function(){setTimeout(n)})),i.observe(e)):window.addEventListener("resize",n,!1);n();return{canvas:a,onDestroy:function(){i?i.disconnect():window.removeEventListener("resize",n);e.removeChild(a)}}}function o(e,t){function r(r){try{return e.getContext(r,t)}catch(n){return null}}return r("webgl")||r("experimental-webgl")||r("webgl-experimental")}function s(e){return"string"===typeof e?e.split():e}function l(e){return"string"===typeof e?document.querySelector(e):e}function u(e){var t=e||{},r,n,a,u;e={};var f=[],c=[],v="undefined"===typeof window?1:window.devicePixelRatio,h=!1,p={},d=function(e){},g=function(){};"string"===typeof t?r=document.querySelector(t):"object"===typeof t&&("string"===typeof t.nodeName&&"function"===typeof t.appendChild&&"function"===typeof t.getBoundingClientRect?r=t:"function"===typeof t.drawArrays||"function"===typeof t.drawElements?(u=t,a=u.canvas):("gl"in t?u=t.gl:"canvas"in t?a=l(t.canvas):"container"in t&&(n=l(t.container)),"attributes"in t&&(e=t.attributes),"extensions"in t&&(f=s(t.extensions)),"optionalExtensions"in t&&(c=s(t.optionalExtensions)),"onDone"in t&&(d=t.onDone),"profile"in t&&(h=!!t.profile),"pixelRatio"in t&&(v=+t.pixelRatio),"cachedCode"in t&&(p=t.cachedCode)));r&&("canvas"===r.nodeName.toLowerCase()?a=r:n=r);if(!u){if(!a){r=i(n||document.body,d,v);if(!r)return null;a=r.canvas;g=r.onDestroy}void 0===e.premultipliedAlpha&&(e.premultipliedAlpha=!0);u=o(a,e)}return u?{gl:u,canvas:a,container:n,extensions:f,optionalExtensions:c,pixelRatio:v,profile:h,cachedCode:p,onDone:d,onDestroy:g}:(g(),d("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function f(e,t){function r(t){t=t.toLowerCase();var r;try{r=n[t]=e.getExtension(t)}catch(a){}return!!r}for(var n={},a=0;a<t.extensions.length;++a){var i=t.extensions[a];if(!r(i))return t.onDestroy(),t.onDone('"'+i+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}t.optionalExtensions.forEach(r);return{extensions:n,restore:function(){Object.keys(n).forEach((function(e){if(n[e]&&!r(e))throw Error("(regl): error restoring extension "+e)}))}}}function c(e,t){for(var r=Array(e),n=0;n<e;++n)r[n]=t(n);return r}function v(e){var t,r;t=(65535<e)<<4;e>>>=t;r=(255<e)<<3;e>>>=r;t|=r;r=(15<e)<<2;e>>>=r;t|=r;r=(3<e)<<1;return t|r|e>>>r>>1}function h(){function e(e){e:{for(var t=16;268435456>=t;t*=16)if(e<=t){e=t;break e}e=0}t=r[v(e)>>2];return 0<t.length?t.pop():new ArrayBuffer(e)}function t(e){r[v(e.byteLength)>>2].push(e)}var r=c(8,(function(){return[]}));return{alloc:e,free:t,allocType:function(t,r){var n=null;switch(t){case 5120:n=new Int8Array(e(r),0,r);break;case 5121:n=new Uint8Array(e(r),0,r);break;case 5122:n=new Int16Array(e(2*r),0,r);break;case 5123:n=new Uint16Array(e(2*r),0,r);break;case 5124:n=new Int32Array(e(4*r),0,r);break;case 5125:n=new Uint32Array(e(4*r),0,r);break;case 5126:n=new Float32Array(e(4*r),0,r);break;default:return null}return n.length!==r?n.subarray(0,r):n},freeType:function(e){t(e.buffer)}}}function p(e){return!!e&&"object"===typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"===typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||oe(e.data))}function d(e,t,r,n,a,i){for(var o=0;o<t;++o)for(var s=e[o],l=0;l<r;++l)for(var u=s[l],f=0;f<n;++f)a[i++]=u[f]}function g(e,t,r,n,a){for(var i=1,o=r+1;o<t.length;++o)i*=t[o];var s=t[r];if(4===t.length-r){var l=t[r+1],u=t[r+2];t=t[r+3];for(o=0;o<s;++o)d(e[o],l,u,t,n,a),a+=i}else for(o=0;o<s;++o)g(e[o],t,r+1,n,a),a+=i}function y(e){return ue[Object.prototype.toString.call(e)]|0}function m(e,t){for(var r=0;r<t.length;++r)e[r]=t[r]}function x(e,t,r,n,a,i,o){for(var s=0,l=0;l<r;++l)for(var u=0;u<n;++u)e[s++]=t[a*l+i*u+o]}function b(e,t,r,n){function a(t){this.id=l++;this.buffer=e.createBuffer();this.type=t;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;r.profile&&(this.stats={size:0})}function i(t,r,n){t.byteLength=r.byteLength;e.bufferData(t.type,r,n)}function o(e,t,r,n,a,o){e.usage=r;if(Array.isArray(t)){if(e.dtype=n||5126,0<t.length)if(Array.isArray(t[0])){a=he(t);for(var s=n=1;s<a.length;++s)n*=a[s];e.dimension=n;t=ve(t,a,e.dtype);i(e,t,r);o?e.persistentData=t:ae.freeType(t)}else"number"===typeof t[0]?(e.dimension=a,a=ae.allocType(e.dtype,t.length),m(a,t),i(e,a,r),o?e.persistentData=a:ae.freeType(a)):oe(t[0])&&(e.dimension=t[0].length,e.dtype=n||y(t[0])||5126,t=ve(t,[t.length,t[0].length],e.dtype),i(e,t,r),o?e.persistentData=t:ae.freeType(t))}else if(oe(t))e.dtype=n||y(t),e.dimension=a,i(e,t,r),o&&(e.persistentData=new Uint8Array(new Uint8Array(t.buffer)));else if(p(t)){a=t.shape;var l=t.stride,s=t.offset,u=0,f=0,c=0,v=0;1===a.length?(u=a[0],f=1,c=l[0],v=0):2===a.length&&(u=a[0],f=a[1],c=l[0],v=l[1]);e.dtype=n||y(t.data)||5126;e.dimension=f;a=ae.allocType(e.dtype,u*f);x(a,t.data,u,f,c,v,s);i(e,a,r);o?e.persistentData=a:ae.freeType(a)}else t instanceof ArrayBuffer&&(e.dtype=5121,e.dimension=a,i(e,t,r),o&&(e.persistentData=new Uint8Array(new Uint8Array(t))))}function s(r){t.bufferCount--;n(r);e.deleteBuffer(r.buffer);r.buffer=null;delete u[r.id]}var l=0,u={};a.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)};a.prototype.destroy=function(){s(this)};var f=[];r.profile&&(t.getTotalBufferSize=function(){var e=0;Object.keys(u).forEach((function(t){e+=u[t].stats.size}));return e});return{create:function(n,i,l,f){function c(t){var n=35044,a=null,i=0,s=0,l=1;Array.isArray(t)||oe(t)||p(t)||t instanceof ArrayBuffer?a=t:"number"===typeof t?i=t|0:t&&("data"in t&&(a=t.data),"usage"in t&&(n=ce[t.usage]),"type"in t&&(s=fe[t.type]),"dimension"in t&&(l=t.dimension|0),"length"in t&&(i=t.length|0));v.bind();a?o(v,a,n,s,l,f):(i&&e.bufferData(v.type,i,n),v.dtype=s||5121,v.usage=n,v.dimension=l,v.byteLength=i);r.profile&&(v.stats.size=v.byteLength*pe[v.dtype]);return c}t.bufferCount++;var v=new a(i);u[v.id]=v;l||c(n);c._reglType="buffer";c._buffer=v;c.subdata=function(t,r){var n=(r||0)|0,a;v.bind();if(oe(t)||t instanceof ArrayBuffer)e.bufferSubData(v.type,n,t);else if(Array.isArray(t)){if(0<t.length)if("number"===typeof t[0]){var i=ae.allocType(v.dtype,t.length);m(i,t);e.bufferSubData(v.type,n,i);ae.freeType(i)}else if(Array.isArray(t[0])||oe(t[0]))a=he(t),i=ve(t,a,v.dtype),e.bufferSubData(v.type,n,i),ae.freeType(i)}else if(p(t)){a=t.shape;var o=t.stride,s=i=0,l=0,u=0;1===a.length?(i=a[0],s=1,l=o[0],u=0):2===a.length&&(i=a[0],s=a[1],l=o[0],u=o[1]);a=Array.isArray(t.data)?v.dtype:y(t.data);a=ae.allocType(a,i*s);x(a,t.data,i,s,l,u,t.offset);e.bufferSubData(v.type,n,a);ae.freeType(a)}return c};r.profile&&(c.stats=v.stats);c.destroy=function(){s(v)};return c},createStream:function(e,t){var r=f.pop();r||(r=new a(e));r.bind();o(r,t,35040,0,1,!1);return r},destroyStream:function(e){f.push(e)},clear:function(){se(u).forEach(s);f.forEach(s)},getBuffer:function(e){return e&&e._buffer instanceof a?e._buffer:null},restore:function(){se(u).forEach((function(t){t.buffer=e.createBuffer();e.bindBuffer(t.type,t.buffer);e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))},_initBuffer:o}}function _(e,t,r,n){function a(e){this.id=l++;s[this.id]=this;this.buffer=e;this.primType=4;this.type=this.vertCount=0}function i(n,a,i,o,s,l,u){n.buffer.bind();var f;a?((f=u)||oe(a)&&(!p(a)||oe(a.data))||(f=t.oes_element_index_uint?5125:5123),r._initBuffer(n.buffer,a,i,f,3)):(e.bufferData(34963,l,i),n.buffer.dtype=f||5121,n.buffer.usage=i,n.buffer.dimension=3,n.buffer.byteLength=l);f=u;if(!u){switch(n.buffer.dtype){case 5121:case 5120:f=5121;break;case 5123:case 5122:f=5123;break;case 5125:case 5124:f=5125}n.buffer.dtype=f}n.type=f;a=s;0>a&&(a=n.buffer.byteLength,5123===f?a>>=1:5125===f&&(a>>=2));n.vertCount=a;a=o;0>o&&(a=4,o=n.buffer.dimension,1===o&&(a=0),2===o&&(a=1),3===o&&(a=4));n.primType=a}function o(e){n.elementsCount--;delete s[e.id];e.buffer.destroy();e.buffer=null}var s={},l=0,u={uint8:5121,uint16:5123};t.oes_element_index_uint&&(u.uint32=5125);a.prototype.bind=function(){this.buffer.bind()};var f=[];return{create:function(e,t){function s(e){if(e)if("number"===typeof e)l(e),f.primType=4,f.vertCount=e|0,f.type=5121;else{var t=null,r=35044,n=-1,a=-1,o=0,c=0;if(Array.isArray(e)||oe(e)||p(e))t=e;else if("data"in e&&(t=e.data),"usage"in e&&(r=ce[e.usage]),"primitive"in e&&(n=de[e.primitive]),"count"in e&&(a=e.count|0),"type"in e&&(c=u[e.type]),"length"in e)o=e.length|0;else if(o=a,5123===c||5122===c)o*=2;else if(5125===c||5124===c)o*=4;i(f,t,r,n,a,o,c)}else l(),f.primType=4,f.vertCount=0,f.type=5121;return s}var l=r.create(null,34963,!0),f=new a(l._buffer);n.elementsCount++;s(e);s._reglType="elements";s._elements=f;s.subdata=function(e,t){l.subdata(e,t);return s};s.destroy=function(){o(f)};return s},createStream:function(e){var t=f.pop();t||(t=new a(r.create(null,34963,!0,!1)._buffer));i(t,e,35040,-1,-1,0,0);return t},destroyStream:function(e){f.push(e)},getElements:function(e){return"function"===typeof e&&e._elements instanceof a?e._elements:null},clear:function(){se(s).forEach(o)}}}function w(e){for(var t=ae.allocType(5123,e.length),r=0;r<e.length;++r)if(isNaN(e[r]))t[r]=65535;else if(Infinity===e[r])t[r]=31744;else if(-Infinity===e[r])t[r]=64512;else{ge[0]=e[r];var n=ye[0],a=n>>>31<<15,i=(n<<1>>>24)-127,n=n>>13&1023;t[r]=-24>i?a:-14>i?a+(n+1024>>-14-i):15<i?a+31744:a+(i+15<<10)+n}return t}function T(e){return Array.isArray(e)||oe(e)}function k(e){return"[object "+e+"]"}function A(e){return Array.isArray(e)&&(0===e.length||"number"===typeof e[0])}function M(e){return Array.isArray(e)&&0!==e.length&&T(e[0])?!0:!1}function S(e){return Object.prototype.toString.call(e)}function E(e){if(!e)return!1;var t=S(e);return 0<=Se.indexOf(t)?!0:A(e)||M(e)||p(e)}function L(e,t){36193===e.type?(e.data=w(t),ae.freeType(t)):e.data=t}function C(e,t,r,n,a,i){e="undefined"!==typeof Le[e]?Le[e]:be[e]*Ee[t];i&&(e*=6);if(a){for(n=0;1<=r;)n+=e*r*r,r/=2;return n}return e*r*n}function I(e,t,r,n,a,i,o){function s(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function l(e,t){e.internalformat=t.internalformat;e.format=t.format;e.type=t.type;e.compressed=t.compressed;e.premultiplyAlpha=t.premultiplyAlpha;e.flipY=t.flipY;e.unpackAlignment=t.unpackAlignment;e.colorSpace=t.colorSpace;e.width=t.width;e.height=t.height;e.channels=t.channels}function u(e,t){if("object"===typeof t&&t){"premultiplyAlpha"in t&&(e.premultiplyAlpha=t.premultiplyAlpha);"flipY"in t&&(e.flipY=t.flipY);"alignment"in t&&(e.unpackAlignment=t.alignment);"colorSpace"in t&&(e.colorSpace=V[t.colorSpace]);"type"in t&&(e.type=H[t.type]);var r=e.width,n=e.height,a=e.channels,i=!1;"shape"in t?(r=t.shape[0],n=t.shape[1],3===t.shape.length&&(a=t.shape[2],i=!0)):("radius"in t&&(r=n=t.radius),"width"in t&&(r=t.width),"height"in t&&(n=t.height),"channels"in t&&(a=t.channels,i=!0));e.width=r|0;e.height=n|0;e.channels=a|0;r=!1;"format"in t&&(r=t.format,n=e.internalformat=q[r],e.format=ee[n],r in H&&!("type"in t)&&(e.type=H[r]),r in G&&(e.compressed=!0),r=!0);!i&&r?e.channels=be[e.format]:i&&!r&&e.channels!==xe[e.format]&&(e.format=e.internalformat=xe[e.channels])}}function f(t){e.pixelStorei(37440,t.flipY);e.pixelStorei(37441,t.premultiplyAlpha);e.pixelStorei(37443,t.colorSpace);e.pixelStorei(3317,t.unpackAlignment)}function c(){s.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function v(e,t){var r=null;E(t)?r=t:t&&(u(e,t),"x"in t&&(e.xOffset=t.x|0),"y"in t&&(e.yOffset=t.y|0),E(t.data)&&(r=t.data));if(t.copy){var n=a.viewportWidth,i=a.viewportHeight;e.width=e.width||n-e.xOffset;e.height=e.height||i-e.yOffset;e.needsCopy=!0}else if(!r)e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;else if(oe(r))e.channels=e.channels||4,e.data=r,"type"in t||5121!==e.type||(e.type=ue[Object.prototype.toString.call(r)]|0);else if(A(r)){e.channels=e.channels||4;n=r;i=n.length;switch(e.type){case 5121:case 5123:case 5125:case 5126:i=ae.allocType(e.type,i);i.set(n);e.data=i;break;case 36193:e.data=w(n)}e.alignment=1;e.needsFree=!0}else if(p(r)){n=r.data;Array.isArray(n)||5121!==e.type||(e.type=ue[Object.prototype.toString.call(n)]|0);var i=r.shape,o=r.stride,s,l,f,c;3===i.length?(f=i[2],c=o[2]):c=f=1;s=i[0];l=i[1];i=o[0];o=o[1];e.alignment=1;e.width=s;e.height=l;e.channels=f;e.format=e.internalformat=xe[f];e.needsFree=!0;s=c;r=r.offset;f=e.width;c=e.height;l=e.channels;for(var v=ae.allocType(36193===e.type?5126:e.type,f*c*l),h=0,d=0;d<c;++d)for(var g=0;g<f;++g)for(var y=0;y<l;++y)v[h++]=n[i*g+o*d+s*y+r];L(e,v)}else if(S(r)===_e||S(r)===we||S(r)===Te)S(r)===_e||S(r)===we?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(S(r)===ke)e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(S(r)===Ae)e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(S(r)===Me)e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(M(r)){n=e.width||r[0].length;i=e.height||r.length;o=e.channels;o=T(r[0][0])?o||r[0][0].length:o||1;s=le.shape(r);f=1;for(c=0;c<s.length;++c)f*=s[c];f=ae.allocType(36193===e.type?5126:e.type,f);le.flatten(r,s,"",f);L(e,f);e.alignment=1;e.width=n;e.height=i;e.channels=o;e.format=e.internalformat=xe[o];e.needsFree=!0}}function h(t,r,a,i,o){var s=t.element,l=t.data,u=t.internalformat,c=t.format,v=t.type,h=t.width,p=t.height;f(t);s?e.texSubImage2D(r,o,a,i,c,v,s):t.compressed?e.compressedTexSubImage2D(r,o,a,i,u,h,p,l):t.needsCopy?(n(),e.copyTexSubImage2D(r,o,a,i,t.xOffset,t.yOffset,h,p)):e.texSubImage2D(r,o,a,i,h,p,c,v,l)}function d(){return te.pop()||new c}function g(e){e.needsFree&&ae.freeType(e.data);c.call(e);te.push(e)}function y(){s.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function m(e,t,r){var n=e.images[0]=d();e.mipmask=1;n.width=e.width=t;n.height=e.height=r;n.channels=e.channels=4}function x(e,t){var r=null;if(E(t))r=e.images[0]=d(),l(r,e),v(r,t),e.mipmask=1;else if(u(e,t),Array.isArray(t.mipmap))for(var n=t.mipmap,a=0;a<n.length;++a)r=e.images[a]=d(),l(r,e),r.width>>=a,r.height>>=a,v(r,n[a]),e.mipmask|=1<<a;else r=e.images[0]=d(),l(r,e),v(r,t),e.mipmask=1;l(e,e.images[0])}function b(t,r){for(var a=t.images,i=0;i<a.length&&a[i];++i){var o=a[i],s=r,l=i,u=o.element,c=o.data,v=o.internalformat,h=o.format,p=o.type,d=o.width,g=o.height;f(o);u?e.texImage2D(s,l,h,h,p,u):o.compressed?e.compressedTexImage2D(s,l,v,d,g,0,c):o.needsCopy?(n(),e.copyTexImage2D(s,l,h,o.xOffset,o.yOffset,d,g,0)):e.texImage2D(s,l,h,d,g,0,h,p,c||null)}}function _(){var e=re.pop()||new y;s.call(e);for(var t=e.mipmask=0;16>t;++t)e.images[t]=null;return e}function k(e){for(var t=e.images,r=0;r<t.length;++r)t[r]&&g(t[r]),t[r]=null;re.push(e)}function I(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function P(e,t){"min"in t&&(e.minFilter=U[t.min],0<=me.indexOf(e.minFilter)&&!("faces"in t)&&(e.genMipmaps=!0));"mag"in t&&(e.magFilter=j[t.mag]);var r=e.wrapS,n=e.wrapT;if("wrap"in t){var a=t.wrap;"string"===typeof a?r=n=N[a]:Array.isArray(a)&&(r=N[a[0]],n=N[a[1]])}else"wrapS"in t&&(r=N[t.wrapS]),"wrapT"in t&&(n=N[t.wrapT]);e.wrapS=r;e.wrapT=n;"anisotropic"in t&&(e.anisotropic=t.anisotropic);if("mipmap"in t){r=!1;switch(typeof t.mipmap){case"string":e.mipmapHint=B[t.mipmap];r=e.genMipmaps=!0;break;case"boolean":r=e.genMipmaps=t.mipmap;break;case"object":e.genMipmaps=!1,r=!0}!r||"min"in t||(e.minFilter=9984)}}function O(r,n){e.texParameteri(n,10241,r.minFilter);e.texParameteri(n,10240,r.magFilter);e.texParameteri(n,10242,r.wrapS);e.texParameteri(n,10243,r.wrapT);t.ext_texture_filter_anisotropic&&e.texParameteri(n,34046,r.anisotropic);r.genMipmaps&&(e.hint(33170,r.mipmapHint),e.generateMipmap(n))}function D(t){s.call(this);this.mipmask=0;this.internalformat=6408;this.id=ne++;this.refCount=1;this.target=t;this.texture=e.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new I;o.profile&&(this.stats={size:0})}function z(t){e.activeTexture(33984);e.bindTexture(t.target,t.texture)}function R(){var t=ce[0];t?e.bindTexture(t.target,t.texture):e.bindTexture(3553,null)}function F(t){var r=t.texture,n=t.unit,a=t.target;0<=n&&(e.activeTexture(33984+n),e.bindTexture(a,null),ce[n]=null);e.deleteTexture(r);t.texture=null;t.params=null;t.pixels=null;t.refCount=0;delete ie[t.id];i.textureCount--}var B={"don't care":4352,"dont care":4352,nice:4354,fast:4353},N={repeat:10497,clamp:33071,mirror:33648},j={nearest:9728,linear:9729},U=Q({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},j),V={none:0,browser:37444},H={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},q={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},G={};t.ext_srgb&&(q.srgb=35904,q.srgba=35906);t.oes_texture_float&&(H.float32=H["float"]=5126);t.oes_texture_half_float&&(H.float16=H["half float"]=36193);t.webgl_depth_texture&&(Q(q,{depth:6402,"depth stencil":34041}),Q(H,{uint16:5123,uint32:5125,"depth stencil":34042}));t.webgl_compressed_texture_s3tc&&Q(G,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});t.webgl_compressed_texture_atc&&Q(G,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});t.webgl_compressed_texture_pvrtc&&Q(G,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});t.webgl_compressed_texture_etc1&&(G["rgb etc1"]=36196);var Z=Array.prototype.slice.call(e.getParameter(34467));Object.keys(G).forEach((function(e){var t=G[e];0<=Z.indexOf(t)&&(q[e]=t)}));var Y=Object.keys(q);r.textureFormats=Y;var W=[];Object.keys(q).forEach((function(e){W[q[e]]=e}));var X=[];Object.keys(H).forEach((function(e){X[H[e]]=e}));var J=[];Object.keys(j).forEach((function(e){J[j[e]]=e}));var K=[];Object.keys(U).forEach((function(e){K[U[e]]=e}));var $=[];Object.keys(N).forEach((function(e){$[N[e]]=e}));var ee=Y.reduce((function(e,r){var n=q[r];6409===n||6406===n||6409===n||6410===n||6402===n||34041===n||t.ext_srgb&&(35904===n||35906===n)?e[n]=n:32855===n||0<=r.indexOf("rgba")?e[n]=6408:e[n]=6407;return e}),{}),te=[],re=[],ne=0,ie={},fe=r.maxTextureUnits,ce=Array(fe).map((function(){return null}));Q(D.prototype,{bind:function(){this.bindCount+=1;var t=this.unit;if(0>t){for(var r=0;r<fe;++r){var n=ce[r];if(n){if(0<n.bindCount)continue;n.unit=-1}ce[r]=this;t=r;break}o.profile&&i.maxTextureUnits<t+1&&(i.maxTextureUnits=t+1);this.unit=t;e.activeTexture(33984+t);e.bindTexture(this.target,this.texture)}return t},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&F(this)}});o.profile&&(i.getTotalTextureSize=function(){var e=0;Object.keys(ie).forEach((function(t){e+=ie[t].stats.size}));return e});return{create2D:function(t,r){function n(e,t){var r=a.texInfo;I.call(r);var i=_();"number"===typeof e?"number"===typeof t?m(i,e|0,t|0):m(i,e|0,e|0):e?(P(r,e),x(i,e)):m(i,1,1);r.genMipmaps&&(i.mipmask=(i.width<<1)-1);a.mipmask=i.mipmask;l(a,i);a.internalformat=i.internalformat;n.width=i.width;n.height=i.height;z(a);b(i,3553);O(r,3553);R();k(i);o.profile&&(a.stats.size=C(a.internalformat,a.type,i.width,i.height,r.genMipmaps,!1));n.format=W[a.internalformat];n.type=X[a.type];n.mag=J[r.magFilter];n.min=K[r.minFilter];n.wrapS=$[r.wrapS];n.wrapT=$[r.wrapT];return n}var a=new D(3553);ie[a.id]=a;i.textureCount++;n(t,r);n.subimage=function(e,t,r,i){t|=0;r|=0;i|=0;var o=d();l(o,a);o.width=0;o.height=0;v(o,e);o.width=o.width||(a.width>>i)-t;o.height=o.height||(a.height>>i)-r;z(a);h(o,3553,t,r,i);R();g(o);return n};n.resize=function(t,r){var i=t|0,s=r|0||i;if(i===a.width&&s===a.height)return n;n.width=a.width=i;n.height=a.height=s;z(a);for(var l=0;a.mipmask>>l;++l){var u=i>>l,f=s>>l;if(!u||!f)break;e.texImage2D(3553,l,a.format,u,f,0,a.format,a.type,null)}R();o.profile&&(a.stats.size=C(a.internalformat,a.type,i,s,!1,!1));return n};n._reglType="texture2d";n._texture=a;o.profile&&(n.stats=a.stats);n.destroy=function(){a.decRef()};return n},createCube:function(t,r,n,a,s,f){function c(e,t,r,n,a,i){var s,f=p.texInfo;I.call(f);for(s=0;6>s;++s)y[s]=_();if("number"===typeof e||!e)for(e=e|0||1,s=0;6>s;++s)m(y[s],e,e);else if("object"===typeof e)if(t)x(y[0],e),x(y[1],t),x(y[2],r),x(y[3],n),x(y[4],a),x(y[5],i);else if(P(f,e),u(p,e),"faces"in e)for(e=e.faces,s=0;6>s;++s)l(y[s],p),x(y[s],e[s]);else for(s=0;6>s;++s)x(y[s],e);l(p,y[0]);p.mipmask=f.genMipmaps?(y[0].width<<1)-1:y[0].mipmask;p.internalformat=y[0].internalformat;c.width=y[0].width;c.height=y[0].height;z(p);for(s=0;6>s;++s)b(y[s],34069+s);O(f,34067);R();o.profile&&(p.stats.size=C(p.internalformat,p.type,c.width,c.height,f.genMipmaps,!0));c.format=W[p.internalformat];c.type=X[p.type];c.mag=J[f.magFilter];c.min=K[f.minFilter];c.wrapS=$[f.wrapS];c.wrapT=$[f.wrapT];for(s=0;6>s;++s)k(y[s]);return c}var p=new D(34067);ie[p.id]=p;i.cubeCount++;var y=Array(6);c(t,r,n,a,s,f);c.subimage=function(e,t,r,n,a){r|=0;n|=0;a|=0;var i=d();l(i,p);i.width=0;i.height=0;v(i,t);i.width=i.width||(p.width>>a)-r;i.height=i.height||(p.height>>a)-n;z(p);h(i,34069+e,r,n,a);R();g(i);return c};c.resize=function(t){t|=0;if(t!==p.width){c.width=p.width=t;c.height=p.height=t;z(p);for(var r=0;6>r;++r)for(var n=0;p.mipmask>>n;++n)e.texImage2D(34069+r,n,p.format,t>>n,t>>n,0,p.format,p.type,null);R();o.profile&&(p.stats.size=C(p.internalformat,p.type,c.width,c.height,!1,!0));return c}};c._reglType="textureCube";c._texture=p;o.profile&&(c.stats=p.stats);c.destroy=function(){p.decRef()};return c},clear:function(){for(var t=0;t<fe;++t)e.activeTexture(33984+t),e.bindTexture(3553,null),ce[t]=null;se(ie).forEach(F);i.cubeCount=0;i.textureCount=0},getTexture:function(e){return null},restore:function(){for(var t=0;t<fe;++t){var r=ce[t];r&&(r.bindCount=0,r.unit=-1,ce[t]=null)}se(ie).forEach((function(t){t.texture=e.createTexture();e.bindTexture(t.target,t.texture);for(var r=0;32>r;++r)if(0!==(t.mipmask&1<<r))if(3553===t.target)e.texImage2D(3553,r,t.internalformat,t.width>>r,t.height>>r,0,t.internalformat,t.type,null);else for(var n=0;6>n;++n)e.texImage2D(34069+n,r,t.internalformat,t.width>>r,t.height>>r,0,t.internalformat,t.type,null);O(t.texInfo,t.target)}))},refresh:function(){for(var t=0;t<fe;++t){var r=ce[t];r&&(r.bindCount=0,r.unit=-1,ce[t]=null);e.activeTexture(33984+t);e.bindTexture(3553,null);e.bindTexture(34067,null)}}}}function P(e,t,r,n,a,i){function o(e,t,r){this.target=e;this.texture=t;this.renderbuffer=r;var n=e=0;t?(e=t.width,n=t.height):r&&(e=r.width,n=r.height);this.width=e;this.height=n}function s(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function l(e,t,r){e&&(e.texture?e.texture._texture.refCount+=1:e.renderbuffer._renderbuffer.refCount+=1)}function u(t,r){r&&(r.texture?e.framebufferTexture2D(36160,t,r.target,r.texture._texture.texture,0):e.framebufferRenderbuffer(36160,t,36161,r.renderbuffer._renderbuffer.renderbuffer))}function f(e){var t=3553,r=null,n=null,a=e;"object"===typeof e&&(a=e.data,"target"in e&&(t=e.target|0));e=a._reglType;"texture2d"===e?r=a:"textureCube"===e?r=a:"renderbuffer"===e&&(n=a,t=36161);return new o(t,r,n)}function c(e,t,r,i,s){if(r)return e=n.create2D({width:e,height:t,format:i,type:s}),e._texture.refCount=0,new o(3553,e,null);e=a.create({width:e,height:t,format:i});e._renderbuffer.refCount=0;return new o(36161,null,e)}function v(e){return e&&(e.texture||e.renderbuffer)}function h(e,t,r){e&&(e.texture?e.texture.resize(t,r):e.renderbuffer&&e.renderbuffer.resize(t,r),e.width=t,e.height=r)}function p(){this.id=T++;k[this.id]=this;this.framebuffer=e.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function d(e){e.colorAttachments.forEach(s);s(e.depthAttachment);s(e.stencilAttachment);s(e.depthStencilAttachment)}function g(t){e.deleteFramebuffer(t.framebuffer);t.framebuffer=null;i.framebufferCount--;delete k[t.id]}function y(t){var n;e.bindFramebuffer(36160,t.framebuffer);var a=t.colorAttachments;for(n=0;n<a.length;++n)u(36064+n,a[n]);for(n=a.length;n<r.maxColorAttachments;++n)e.framebufferTexture2D(36160,36064+n,3553,null,0);e.framebufferTexture2D(36160,33306,3553,null,0);e.framebufferTexture2D(36160,36096,3553,null,0);e.framebufferTexture2D(36160,36128,3553,null,0);u(36096,t.depthAttachment);u(36128,t.stencilAttachment);u(33306,t.depthStencilAttachment);e.checkFramebufferStatus(36160);e.isContextLost();e.bindFramebuffer(36160,x.next?x.next.framebuffer:null);x.cur=x.next;e.getError()}function m(e,t){function r(e,t){var a,i=0,o=0,s=!0,u=!0;a=null;var h=!0,p="rgba",g="uint8",m=1,x=null,w=null,T=null,k=!1;if("number"===typeof e)i=e|0,o=t|0||i;else if(e){"shape"in e?(o=e.shape,i=o[0],o=o[1]):("radius"in e&&(i=o=e.radius),"width"in e&&(i=e.width),"height"in e&&(o=e.height));if("color"in e||"colors"in e)a=e.color||e.colors,Array.isArray(a);if(!a){"colorCount"in e&&(m=e.colorCount|0);"colorTexture"in e&&(h=!!e.colorTexture,p="rgba4");if("colorType"in e&&(g=e.colorType,!h))if("half float"===g||"float16"===g)p="rgba16f";else if("float"===g||"float32"===g)p="rgba32f";"colorFormat"in e&&(p=e.colorFormat,0<=b.indexOf(p)?h=!0:0<=_.indexOf(p)&&(h=!1))}if("depthTexture"in e||"depthStencilTexture"in e)k=!(!e.depthTexture&&!e.depthStencilTexture);"depth"in e&&("boolean"===typeof e.depth?s=e.depth:(x=e.depth,u=!1));"stencil"in e&&("boolean"===typeof e.stencil?u=e.stencil:(w=e.stencil,s=!1));"depthStencil"in e&&("boolean"===typeof e.depthStencil?s=u=e.depthStencil:(T=e.depthStencil,u=s=!1))}else i=o=1;var A=null,M=null,S=null,E=null;if(Array.isArray(a))A=a.map(f);else if(a)A=[f(a)];else for(A=Array(m),a=0;a<m;++a)A[a]=c(i,o,h,p,g);i=i||A[0].width;o=o||A[0].height;x?M=f(x):s&&!u&&(M=c(i,o,k,"depth","uint32"));w?S=f(w):u&&!s&&(S=c(i,o,!1,"stencil","uint8"));T?E=f(T):!x&&!w&&u&&s&&(E=c(i,o,k,"depth stencil","depth stencil"));s=null;for(a=0;a<A.length;++a)l(A[a],i,o),A[a]&&A[a].texture&&(u=Pe[A[a].texture._texture.format]*Oe[A[a].texture._texture.type],null===s&&(s=u));l(M,i,o);l(S,i,o);l(E,i,o);d(n);n.width=i;n.height=o;n.colorAttachments=A;n.depthAttachment=M;n.stencilAttachment=S;n.depthStencilAttachment=E;r.color=A.map(v);r.depth=v(M);r.stencil=v(S);r.depthStencil=v(E);r.width=n.width;r.height=n.height;y(n);return r}var n=new p;i.framebufferCount++;r(e,t);return Q(r,{resize:function(e,t){var a=Math.max(e|0,1),i=Math.max(t|0||a,1);if(a===n.width&&i===n.height)return r;for(var o=n.colorAttachments,s=0;s<o.length;++s)h(o[s],a,i);h(n.depthAttachment,a,i);h(n.stencilAttachment,a,i);h(n.depthStencilAttachment,a,i);n.width=r.width=a;n.height=r.height=i;y(n);return r},_reglType:"framebuffer",_framebuffer:n,destroy:function(){g(n);d(n)},use:function(e){x.setFBO({framebuffer:r},e)}})}var x={cur:null,next:null,dirty:!1,setFBO:null},b=["rgba"],_=["rgba4","rgb565","rgb5 a1"];t.ext_srgb&&_.push("srgba");t.ext_color_buffer_half_float&&_.push("rgba16f","rgb16f");t.webgl_color_buffer_float&&_.push("rgba32f");var w=["uint8"];t.oes_texture_half_float&&w.push("half float","float16");t.oes_texture_float&&w.push("float","float32");var T=0,k={};return Q(x,{getFramebuffer:function(e){return"function"===typeof e&&"framebuffer"===e._reglType&&(e=e._framebuffer,e instanceof p)?e:null},create:m,createCube:function(e){function t(e){var a,i={color:null},o=0,s=null;a="rgba";var l="uint8",u=1;if("number"===typeof e)o=e|0;else if(e){"shape"in e?o=e.shape[0]:("radius"in e&&(o=e.radius|0),"width"in e?o=e.width|0:"height"in e&&(o=e.height|0));if("color"in e||"colors"in e)s=e.color||e.colors,Array.isArray(s);s||("colorCount"in e&&(u=e.colorCount|0),"colorType"in e&&(l=e.colorType),"colorFormat"in e&&(a=e.colorFormat));"depth"in e&&(i.depth=e.depth);"stencil"in e&&(i.stencil=e.stencil);"depthStencil"in e&&(i.depthStencil=e.depthStencil)}else o=1;if(s)if(Array.isArray(s))for(e=[],a=0;a<s.length;++a)e[a]=s[a];else e=[s];else for(e=Array(u),s={radius:o,format:a,type:l},a=0;a<u;++a)e[a]=n.createCube(s);i.color=Array(e.length);for(a=0;a<e.length;++a)u=e[a],o=o||u.width,i.color[a]={target:34069,data:e[a]};for(a=0;6>a;++a){for(u=0;u<e.length;++u)i.color[u].target=34069+a;0<a&&(i.depth=r[0].depth,i.stencil=r[0].stencil,i.depthStencil=r[0].depthStencil);if(r[a])r[a](i);else r[a]=m(i)}return Q(t,{width:o,height:o,color:e})}var r=Array(6);t(e);return Q(t,{faces:r,resize:function(e){var n=e|0;if(n===t.width)return t;var a=t.color;for(e=0;e<a.length;++e)a[e].resize(n);for(e=0;6>e;++e)r[e].resize(n);t.width=t.height=n;return t},_reglType:"framebufferCube",destroy:function(){r.forEach((function(e){e.destroy()}))}})},clear:function(){se(k).forEach(g)},restore:function(){x.cur=null;x.next=null;x.dirty=!0;se(k).forEach((function(t){t.framebuffer=e.createFramebuffer();y(t)}))}})}function O(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}function D(e,t,r,n,a,i,o){function s(e){if(e!==y.currentVAO){var r=t.oes_vertex_array_object;e?r.bindVertexArrayOES(e.vao):r.bindVertexArrayOES(null);y.currentVAO=e}}function l(r){if(r!==y.currentVAO){if(r)r.bindAttrs();else{for(var n=t.angle_instanced_arrays,a=0;a<h.length;++a){var i=h[a];i.buffer?(e.enableVertexAttribArray(a),i.buffer.bind(),e.vertexAttribPointer(a,i.size,i.type,i.normalized,i.stride,i.offfset),n&&i.divisor&&n.vertexAttribDivisorANGLE(a,i.divisor)):(e.disableVertexAttribArray(a),e.vertexAttrib4f(a,i.x,i.y,i.z,i.w))}o.elements?e.bindBuffer(34963,o.elements.buffer.buffer):e.bindBuffer(34963,null)}y.currentVAO=r}}function u(){se(g).forEach((function(e){e.destroy()}))}function f(){this.id=++d;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var e=t.oes_vertex_array_object;this.vao=e?e.createVertexArrayOES():null;g[this.id]=this;this.buffers=[]}function c(){t.oes_vertex_array_object&&se(g).forEach((function(e){e.refresh()}))}var v=r.maxAttributes,h=Array(v);for(r=0;r<v;++r)h[r]=new O;var d=0,g={},y={Record:O,scope:{},state:h,currentVAO:null,targetVAO:null,restore:t.oes_vertex_array_object?c:function(){},createVAO:function(e){function t(e){var n;Array.isArray(e)?(n=e,r.elements&&r.ownsElements&&r.elements.destroy(),r.elements=null,r.ownsElements=!1,r.offset=0,r.count=0,r.instances=-1,r.primitive=4):(e.elements?(n=e.elements,r.ownsElements?("function"===typeof n&&"elements"===n._reglType?r.elements.destroy():r.elements(n),r.ownsElements=!1):i.getElements(e.elements)?(r.elements=e.elements,r.ownsElements=!1):(r.elements=i.create(e.elements),r.ownsElements=!0)):(r.elements=null,r.ownsElements=!1),n=e.attributes,r.offset=0,r.count=-1,r.instances=-1,r.primitive=4,r.elements&&(r.count=r.elements._elements.vertCount,r.primitive=r.elements._elements.primType),"offset"in e&&(r.offset=e.offset|0),"count"in e&&(r.count=e.count|0),"instances"in e&&(r.instances=e.instances|0),"primitive"in e&&(r.primitive=de[e.primitive]));e={};var o=r.attributes;o.length=n.length;for(var s=0;s<n.length;++s){var l=n[s],u=o[s]=new O,f=l.data||l;if(Array.isArray(f)||oe(f)||p(f)){var c;r.buffers[s]&&(c=r.buffers[s],oe(f)&&c._buffer.byteLength>=f.byteLength?c.subdata(f):(c.destroy(),r.buffers[s]=null));r.buffers[s]||(c=r.buffers[s]=a.create(l,34962,!1,!0));u.buffer=a.getBuffer(c);u.size=u.buffer.dimension|0;u.normalized=!1;u.type=u.buffer.dtype;u.offset=0;u.stride=0;u.divisor=0;u.state=1;e[s]=1}else a.getBuffer(l)?(u.buffer=a.getBuffer(l),u.size=u.buffer.dimension|0,u.normalized=!1,u.type=u.buffer.dtype,u.offset=0,u.stride=0,u.divisor=0,u.state=1):a.getBuffer(l.buffer)?(u.buffer=a.getBuffer(l.buffer),u.size=(+l.size||u.buffer.dimension)|0,u.normalized=!!l.normalized||!1,u.type="type"in l?fe[l.type]:u.buffer.dtype,u.offset=(l.offset||0)|0,u.stride=(l.stride||0)|0,u.divisor=(l.divisor||0)|0,u.state=1):"x"in l&&(u.x=+l.x||0,u.y=+l.y||0,u.z=+l.z||0,u.w=+l.w||0,u.state=2)}for(c=0;c<r.buffers.length;++c)!e[c]&&r.buffers[c]&&(r.buffers[c].destroy(),r.buffers[c]=null);r.refresh();return t}var r=new f;n.vaoCount+=1;t.destroy=function(){for(var e=0;e<r.buffers.length;++e)r.buffers[e]&&r.buffers[e].destroy();r.buffers.length=0;r.ownsElements&&(r.elements.destroy(),r.elements=null,r.ownsElements=!1);r.destroy()};t._vao=r;t._reglType="vao";return t(e)},getVAO:function(e){return"function"===typeof e&&e._vao?e._vao:null},destroyBuffer:function(t){for(var r=0;r<h.length;++r){var n=h[r];n.buffer===t&&(e.disableVertexAttribArray(r),n.buffer=null)}},setVAO:t.oes_vertex_array_object?s:l,clear:t.oes_vertex_array_object?u:function(){}};f.prototype.bindAttrs=function(){for(var r=t.angle_instanced_arrays,n=this.attributes,a=0;a<n.length;++a){var o=n[a];o.buffer?(e.enableVertexAttribArray(a),e.bindBuffer(34962,o.buffer.buffer),e.vertexAttribPointer(a,o.size,o.type,o.normalized,o.stride,o.offset),r&&o.divisor&&r.vertexAttribDivisorANGLE(a,o.divisor)):(e.disableVertexAttribArray(a),e.vertexAttrib4f(a,o.x,o.y,o.z,o.w))}for(r=n.length;r<v;++r)e.disableVertexAttribArray(r);(r=i.getElements(this.elements))?e.bindBuffer(34963,r.buffer.buffer):e.bindBuffer(34963,null)};f.prototype.refresh=function(){var e=t.oes_vertex_array_object;e&&(e.bindVertexArrayOES(this.vao),this.bindAttrs(),y.currentVAO=null,e.bindVertexArrayOES(null))};f.prototype.destroy=function(){if(this.vao){var e=t.oes_vertex_array_object;this===y.currentVAO&&(y.currentVAO=null,e.bindVertexArrayOES(null));e.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);g[this.id]&&(delete g[this.id],--n.vaoCount)};return y}function z(e,t,r,n){function a(e,t,r,n){this.name=e;this.id=t;this.location=r;this.info=n}function i(e,t){for(var r=0;r<e.length;++r)if(e[r].id===t.id){e[r].location=t.location;return}e.push(t)}function o(r,n,a){a=35632===r?u:f;var i=a[n];if(!i){var o=t.str(n),i=e.createShader(r);e.shaderSource(i,o);e.compileShader(i);a[n]=i}return i}function s(e,t){this.id=h++;this.fragId=e;this.vertId=t;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;n.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function l(r,s,l){var u;u=o(35632,r.fragId);var f=o(35633,r.vertId);s=r.program=e.createProgram();e.attachShader(s,u);e.attachShader(s,f);if(l)for(u=0;u<l.length;++u)f=l[u],e.bindAttribLocation(s,f[0],f[1]);e.linkProgram(s);f=e.getProgramParameter(s,35718);n.profile&&(r.stats.uniformsCount=f);var c=r.uniforms;for(u=0;u<f;++u)if(l=e.getActiveUniform(s,u))if(1<l.size)for(var v=0;v<l.size;++v){var h=l.name.replace("[0]","["+v+"]");i(c,new a(h,t.id(h),e.getUniformLocation(s,h),l))}else i(c,new a(l.name,t.id(l.name),e.getUniformLocation(s,l.name),l));f=e.getProgramParameter(s,35721);n.profile&&(r.stats.attributesCount=f);r=r.attributes;for(u=0;u<f;++u)(l=e.getActiveAttrib(s,u))&&i(r,new a(l.name,t.id(l.name),e.getAttribLocation(s,l.name),l))}var u={},f={},c={},v=[],h=0;n.profile&&(r.getMaxUniformsCount=function(){var e=0;v.forEach((function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)}));return e},r.getMaxAttributesCount=function(){var e=0;v.forEach((function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)}));return e});return{clear:function(){var t=e.deleteShader.bind(e);se(u).forEach(t);u={};se(f).forEach(t);f={};v.forEach((function(t){e.deleteProgram(t.program)}));v.length=0;c={};r.shaderCount=0},program:function(t,n,a,i){var o=c[n];o||(o=c[n]={});var h=o[t];if(h&&(h.refCount++,!i))return h;var p=new s(n,t);r.shaderCount++;l(p,a,i);h||(o[t]=p);v.push(p);return Q(p,{destroy:function(){p.refCount--;if(0>=p.refCount){e.deleteProgram(p.program);var t=v.indexOf(p);v.splice(t,1);r.shaderCount--}0>=o[p.vertId].refCount&&(e.deleteShader(f[p.vertId]),delete f[p.vertId],delete c[p.fragId][p.vertId]);Object.keys(c[p.fragId]).length||(e.deleteShader(u[p.fragId]),delete u[p.fragId],delete c[p.fragId])}})},restore:function(){u={};f={};for(var e=0;e<v.length;++e)l(v[e],null,v[e].attributes.map((function(e){return[e.location,e.name]})))},shader:o,frag:-1,vert:-1}}function R(e,t,r,n,a,i,o){function s(a){var i;i=null===t.next?5121:t.next.colorAttachments[0].texture._texture.type;var o=0,s=0,l=n.framebufferWidth,u=n.framebufferHeight,f=null;oe(a)?f=a:a&&(o=a.x|0,s=a.y|0,l=(a.width||n.framebufferWidth-o)|0,u=(a.height||n.framebufferHeight-s)|0,f=a.data||null);r();a=l*u*4;f||(5121===i?f=new Uint8Array(a):5126===i&&(f=f||new Float32Array(a)));e.pixelStorei(3333,4);e.readPixels(o,s,l,u,6408,i,f);return f}function l(e){var r;t.setFBO({framebuffer:e.framebuffer},(function(){r=s(e)}));return r}return function(e){return e&&"framebuffer"in e?l(e):s(e)}}function F(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(r=0;r<8*e.length;r+=8)t[r>>5]|=(e.charCodeAt(r/8)&255)<<24-r%32;var n=8*e.length;e=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225];var r=Array(64),a,i,o,s,l,u,f,c,v,h,p;t[n>>5]|=128<<24-n%32;t[(n+64>>9<<4)+15]=n;for(c=0;c<t.length;c+=16){n=e[0];a=e[1];i=e[2];o=e[3];s=e[4];l=e[5];u=e[6];f=e[7];for(v=0;64>v;v++){if(16>v)r[v]=t[v+c];else{h=v;p=r[v-2];p=j(p,17)^j(p,19)^p>>>10;p=U(p,r[v-7]);var d;d=r[v-15];d=j(d,7)^j(d,18)^d>>>3;r[h]=U(U(p,d),r[v-16])}h=s;h=j(h,6)^j(h,11)^j(h,25);h=U(U(U(U(f,h),s&l^~s&u),De[v]),r[v]);f=n;f=j(f,2)^j(f,13)^j(f,22);p=U(f,n&a^n&i^a&i);f=u;u=l;l=s;s=U(o,h);o=i;i=a;a=n;n=U(h,p)}e[0]=U(n,e[0]);e[1]=U(a,e[1]);e[2]=U(i,e[2]);e[3]=U(o,e[3]);e[4]=U(s,e[4]);e[5]=U(l,e[5]);e[6]=U(u,e[6]);e[7]=U(f,e[7])}t="";for(r=0;r<32*e.length;r+=8)t+=String.fromCharCode(e[r>>5]>>>24-r%32&255);return t}function B(e){for(var t="",r,n=0;n<e.length;n++)r=e.charCodeAt(n),t+="0123456789abcdef".charAt(r>>>4&15)+"0123456789abcdef".charAt(r&15);return t}function N(e){for(var t="",r=-1,n,a;++r<e.length;)n=e.charCodeAt(r),a=r+1<e.length?e.charCodeAt(r+1):0,55296<=n&&56319>=n&&56320<=a&&57343>=a&&(n=65536+((n&1023)<<10)+(a&1023),r++),127>=n?t+=String.fromCharCode(n):2047>=n?t+=String.fromCharCode(192|n>>>6&31,128|n&63):65535>=n?t+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|n&63):2097151>=n&&(t+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|n&63));return t}function j(e,t){return e>>>t|e<<32-t}function U(e,t){var r=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(r>>16)<<16|r&65535}function V(e){return Array.prototype.slice.call(e)}function H(e){return V(e).join("")}function q(e){function t(){var e=[],t=[];return Q((function(){e.push.apply(e,V(arguments))}),{def:function(){var r="v"+a++;t.push(r);0<arguments.length&&(e.push(r,"="),e.push.apply(e,V(arguments)),e.push(";"));return r},toString:function(){return H([0<t.length?"var "+t.join(",")+";":"",H(e)])}})}function r(){function e(e,t){n(e,t,"=",r.def(e,t),";")}var r=t(),n=t(),a=r.toString,i=n.toString;return Q((function(){r.apply(r,V(arguments))}),{def:r.def,entry:r,exit:n,save:e,set:function(t,n,a){e(t,n);r(t,n,"=",a,";")},toString:function(){return a()+i()}})}var n=e&&e.cache,a=0,i=[],o=[],s=[],l=t(),u={};return{global:l,link:function(e,t){var r=t&&t.stable;if(!r)for(var n=0;n<o.length;++n)if(o[n]===e&&!s[n])return i[n];n="g"+a++;i.push(n);o.push(e);s.push(r);return n},block:t,proc:function(e,t){function n(){var e="a"+a.length;a.push(e);return e}var a=[];t=t||0;for(var i=0;i<t;++i)n();var i=r(),o=i.toString;return u[e]=Q(i,{arg:n,toString:function(){return H(["function(",a.join(),"){",o(),"}"])}})},scope:r,cond:function(){var e=H(arguments),t=r(),n=r(),a=t.toString,i=n.toString;return Q(t,{then:function(){t.apply(t,V(arguments));return this},else:function(){n.apply(n,V(arguments));return this},toString:function(){var t=i();t&&(t="else{"+t+"}");return H(["if(",e,"){",a(),"}",t])}})},compile:function(){var e=['"use strict";',l,"return {"];Object.keys(u).forEach((function(t){e.push('"',t,'":',u[t].toString(),",")}));e.push("}");var t=H(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),r;if(n&&(r=B(F(N(t))),n[r]))return n[r].apply(null,o);t=Function.apply(null,i.concat(t));n&&(n[r]=t);return t.apply(null,o)}}}function G(e){return Array.isArray(e)||oe(e)||p(e)}function Z(e){return e.sort((function(e,t){return"viewport"===e?-1:"viewport"===t?1:e<t?-1:1}))}function Y(e,t,r,n){this.thisDep=e;this.contextDep=t;this.propDep=r;this.append=n}function W(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function X(e){return new Y(!1,!1,!1,e)}function J(e,t){var r=e.type;if(0===r)return r=e.data.length,new Y(!0,1<=r,2<=r,t);if(4===r)return r=e.data,new Y(r.thisDep,r.contextDep,r.propDep,t);if(5===r)return new Y(!1,!1,!1,t);if(6===r){for(var n=r=!1,a=!1,i=0;i<e.data.length;++i){var o=e.data[i];1===o.type?a=!0:2===o.type?n=!0:3===o.type?r=!0:0===o.type?(r=!0,o=o.data,1<=o&&(n=!0),2<=o&&(a=!0)):4===o.type&&(r=r||o.data.thisDep,n=n||o.data.contextDep,a=a||o.data.propDep)}return new Y(r,n,a,t)}return new Y(3===r,2===r,1===r,t)}function K(e,t,r,n,a,i,o,s,l,u,f,v,h,p,d,g){function y(e){return e.replace(".","_")}function m(e,t,r){var n=y(e);pe.push(e);he[n]=ve[n]=!!r;ge[n]=t}function x(e,t,r){var n=y(e);pe.push(e);Array.isArray(r)?(ve[n]=r.slice(),he[n]=r.slice()):ve[n]=he[n]=r;ye[n]=t}function b(){var e=q({cache:d}),r=e.link,n=e.global;e.id=be++;e.batchId="0";var a=r(me),i=e.shared={props:"a0"};Object.keys(me).forEach((function(e){i[e]=n.def(a,".",e)}));var o=e.next={},s=e.current={};Object.keys(ye).forEach((function(e){Array.isArray(ve[e])&&(o[e]=n.def(i.next,".",e),s[e]=n.def(i.current,".",e))}));var l=e.constants={};Object.keys(xe).forEach((function(e){l[e]=n.def(JSON.stringify(xe[e]))}));e.invoke=function(t,n){switch(n.type){case 0:var a=["this",i.context,i.props,e.batchId];return t.def(r(n.data),".call(",a.slice(0,Math.max(n.data.length+1,4)),")");case 1:return t.def(i.props,n.data);case 2:return t.def(i.context,n.data);case 3:return t.def("this",n.data);case 4:return n.data.append(e,t),n.data.ref;case 5:return n.data.toString();case 6:return n.data.map((function(r){return e.invoke(t,r)}))}};e.attribCache={};var f={};e.scopeAttrib=function(e){e=t.id(e);if(e in f)return f[e];var n=u.scope[e];n||(n=u.scope[e]=new oe);return f[e]=r(n)};return e}function _(e){var t=e["static"];e=e.dynamic;var r;if("profile"in t){var n=!!t.profile;r=X((function(e,t){return n}));r.enable=n}else if("profile"in e){var a=e.profile;r=J(a,(function(e,t){return e.invoke(t,a)}))}return r}function w(e,t){var r=e["static"],n=e.dynamic;if("framebuffer"in r){var a=r.framebuffer;return a?(a=s.getFramebuffer(a),X((function(e,t){var r=e.link(a),n=e.shared;t.set(n.framebuffer,".next",r);n=n.context;t.set(n,".framebufferWidth",r+".width");t.set(n,".framebufferHeight",r+".height");return r}))):X((function(e,t){var r=e.shared;t.set(r.framebuffer,".next","null");r=r.context;t.set(r,".framebufferWidth",r+".drawingBufferWidth");t.set(r,".framebufferHeight",r+".drawingBufferHeight");return"null"}))}if("framebuffer"in n){var i=n.framebuffer;return J(i,(function(e,t){var r=e.invoke(t,i),n=e.shared,a=n.framebuffer,r=t.def(a,".getFramebuffer(",r,")");t.set(a,".next",r);n=n.context;t.set(n,".framebufferWidth",r+"?"+r+".width:"+n+".drawingBufferWidth");t.set(n,".framebufferHeight",r+"?"+r+".height:"+n+".drawingBufferHeight");return r}))}return null}function k(e,t,r){function n(e){if(e in a){var r=a[e];e=!0;var n=r.x|0,o=r.y|0,s,l;"width"in r?s=r.width|0:e=!1;"height"in r?l=r.height|0:e=!1;return new Y(!e&&t&&t.thisDep,!e&&t&&t.contextDep,!e&&t&&t.propDep,(function(e,t){var a=e.shared.context,i=s;"width"in r||(i=t.def(a,".","framebufferWidth","-",n));var u=l;"height"in r||(u=t.def(a,".","framebufferHeight","-",o));return[n,o,i,u]}))}if(e in i){var u=i[e];e=J(u,(function(e,t){var r=e.invoke(t,u),n=e.shared.context,a=t.def(r,".x|0"),i=t.def(r,".y|0"),o=t.def('"width" in ',r,"?",r,".width|0:","(",n,".","framebufferWidth","-",a,")"),r=t.def('"height" in ',r,"?",r,".height|0:","(",n,".","framebufferHeight","-",i,")");return[a,i,o,r]}));t&&(e.thisDep=e.thisDep||t.thisDep,e.contextDep=e.contextDep||t.contextDep,e.propDep=e.propDep||t.propDep);return e}return t?new Y(t.thisDep,t.contextDep,t.propDep,(function(e,t){var r=e.shared.context;return[0,0,t.def(r,".","framebufferWidth"),t.def(r,".","framebufferHeight")]})):null}var a=e["static"],i=e.dynamic;if(e=n("viewport")){var o=e;e=new Y(e.thisDep,e.contextDep,e.propDep,(function(e,t){var r=o.append(e,t),n=e.shared.context;t.set(n,".viewportWidth",r[2]);t.set(n,".viewportHeight",r[3]);return r}))}return{viewport:e,scissor_box:n("scissor.box")}}function A(e,t){var r=e["static"];if("string"===typeof r.frag&&"string"===typeof r.vert){if(0<Object.keys(t.dynamic).length)return null;var r=t["static"],n=Object.keys(r);if(0<n.length&&"number"===typeof r[n[0]]){for(var a=[],i=0;i<n.length;++i)a.push([r[n[i]]|0,n[i]]);return a}}return null}function M(e,r,n){function a(e){if(e in i){var r=t.id(i[e]);e=X((function(){return r}));e.id=r;return e}if(e in o){var n=o[e];return J(n,(function(e,t){var r=e.invoke(t,n);return t.def(e.shared.strings,".id(",r,")")}))}return null}var i=e["static"],o=e.dynamic,s=a("frag"),l=a("vert"),u=null;W(s)&&W(l)?(u=f.program(l.id,s.id,null,n),e=X((function(e,t){return e.link(u)}))):e=new Y(s&&s.thisDep||l&&l.thisDep,s&&s.contextDep||l&&l.contextDep,s&&s.propDep||l&&l.propDep,(function(e,t){var r=e.shared.shader,n;n=s?s.append(e,t):t.def(r,".","frag");var a;a=l?l.append(e,t):t.def(r,".","vert");return t.def(r+".program("+a+","+n+")")}));return{frag:s,vert:l,progVar:e,program:u}}function S(e,t){function r(e,t){if(e in n){var r=n[e]|0;t?o.offset=r:o.instances=r;return X((function(e,n){t&&(e.OFFSET=r);return r}))}if(e in a){var i=a[e];return J(i,(function(e,r){var n=e.invoke(r,i);t&&(e.OFFSET=n);return n}))}if(t){if(f)return X((function(e,t){return e.OFFSET=0}));if(s)return new Y(l.thisDep,l.contextDep,l.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.offset:0")}))}else if(s)return new Y(l.thisDep,l.contextDep,l.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.instances:-1")}));return null}var n=e["static"],a=e.dynamic,o={},s=!1,l=function(){if("vao"in n){var e=n.vao;null!==e&&null===u.getVAO(e)&&(e=u.createVAO(e));s=!0;o.vao=e;return X((function(t){var r=u.getVAO(e);return r?t.link(r):"null"}))}if("vao"in a){s=!0;var t=a.vao;return J(t,(function(e,r){var n=e.invoke(r,t);return r.def(e.shared.vao+".getVAO("+n+")")}))}return null}(),f=!1,c=function(){if("elements"in n){var e=n.elements;o.elements=e;if(G(e)){var t=o.elements=i.create(e,!0),e=i.getElements(t);f=!0}else e&&(e=i.getElements(e),f=!0);t=X((function(t,r){if(e){var n=t.link(e);return t.ELEMENTS=n}return t.ELEMENTS=null}));t.value=e;return t}if("elements"in a){f=!0;var r=a.elements;return J(r,(function(e,t){var n=e.shared,a=n.isBufferArgs,n=n.elements,i=e.invoke(t,r),o=t.def("null"),a=t.def(a,"(",i,")"),i=e.cond(a).then(o,"=",n,".createStream(",i,");")["else"](o,"=",n,".getElements(",i,");");t.entry(i);t.exit(e.cond(a).then(n,".destroyStream(",o,");"));return e.ELEMENTS=o}))}return s?new Y(l.thisDep,l.contextDep,l.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.elements+".getElements("+e.shared.vao+".currentVAO.elements):null")})):null}(),v=r("offset",!0),h=function(){if("primitive"in n){var e=n.primitive;o.primitive=e;return X((function(t,r){return de[e]}))}if("primitive"in a){var t=a.primitive;return J(t,(function(e,r){var n=e.constants.primTypes,a=e.invoke(r,t);return r.def(n,"[",a,"]")}))}return f?W(c)?c.value?X((function(e,t){return t.def(e.ELEMENTS,".primType")})):X((function(){return 4})):new Y(c.thisDep,c.contextDep,c.propDep,(function(e,t){var r=e.ELEMENTS;return t.def(r,"?",r,".primType:",4)})):s?new Y(l.thisDep,l.contextDep,l.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.primitive:4")})):null}(),p=function(){if("count"in n){var e=n.count|0;o.count=e;return X((function(){return e}))}if("count"in a){var t=a.count;return J(t,(function(e,r){return e.invoke(r,t)}))}return f?W(c)?c?v?new Y(v.thisDep,v.contextDep,v.propDep,(function(e,t){return t.def(e.ELEMENTS,".vertCount-",e.OFFSET)})):X((function(e,t){return t.def(e.ELEMENTS,".vertCount")})):X((function(){return-1})):new Y(c.thisDep||v.thisDep,c.contextDep||v.contextDep,c.propDep||v.propDep,(function(e,t){var r=e.ELEMENTS;return e.OFFSET?t.def(r,"?",r,".vertCount-",e.OFFSET,":-1"):t.def(r,"?",r,".vertCount:-1")})):s?new Y(l.thisDep,l.contextDep,l.propDep,(function(e,t){return t.def(e.shared.vao,".currentVAO?",e.shared.vao,".currentVAO.count:-1")})):null}(),d=r("instances",!1);return{elements:c,primitive:h,count:p,instances:d,offset:v,vao:l,vaoActive:s,elementsActive:f,static:o}}function E(e,t){var r=e["static"],n=e.dynamic,a={};pe.forEach((function(e){function t(t,o){if(e in r){var s=t(r[e]);a[i]=X((function(){return s}))}else if(e in n){var l=n[e];a[i]=J(l,(function(e,t){return o(e,t,e.invoke(t,l))}))}}var i=y(e);switch(e){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return t((function(e){return e}),(function(e,t,r){return r}));case"depth.func":return t((function(e){return Be[e]}),(function(e,t,r){return t.def(e.constants.compareFuncs,"[",r,"]")}));case"depth.range":return t((function(e){return e}),(function(e,t,r){e=t.def("+",r,"[0]");t=t.def("+",r,"[1]");return[e,t]}));case"blend.func":return t((function(e){return[Fe["srcRGB"in e?e.srcRGB:e.src],Fe["dstRGB"in e?e.dstRGB:e.dst],Fe["srcAlpha"in e?e.srcAlpha:e.src],Fe["dstAlpha"in e?e.dstAlpha:e.dst]]}),(function(e,t,r){function n(e,n){return t.def('"',e,n,'" in ',r,"?",r,".",e,n,":",r,".",e)}e=e.constants.blendFuncs;var a=n("src","RGB"),i=n("dst","RGB"),a=t.def(e,"[",a,"]"),o=t.def(e,"[",n("src","Alpha"),"]"),i=t.def(e,"[",i,"]");e=t.def(e,"[",n("dst","Alpha"),"]");return[a,i,o,e]}));case"blend.equation":return t((function(e){if("string"===typeof e)return[se[e],se[e]];if("object"===typeof e)return[se[e.rgb],se[e.alpha]]}),(function(e,t,r){var n=e.constants.blendEquations,a=t.def(),i=t.def();e=e.cond("typeof ",r,'==="string"');e.then(a,"=",i,"=",n,"[",r,"];");e["else"](a,"=",n,"[",r,".rgb];",i,"=",n,"[",r,".alpha];");t(e);return[a,i]}));case"blend.color":return t((function(e){return c(4,(function(t){return+e[t]}))}),(function(e,t,r){return c(4,(function(e){return t.def("+",r,"[",e,"]")}))}));case"stencil.mask":return t((function(e){return e|0}),(function(e,t,r){return t.def(r,"|0")}));case"stencil.func":return t((function(e){return[Be[e.cmp||"keep"],e.ref||0,"mask"in e?e.mask:-1]}),(function(e,t,r){e=t.def('"cmp" in ',r,"?",e.constants.compareFuncs,"[",r,".cmp]",":",7680);var n=t.def(r,".ref|0");t=t.def('"mask" in ',r,"?",r,".mask|0:-1");return[e,n,t]}));case"stencil.opFront":case"stencil.opBack":return t((function(t){return["stencil.opBack"===e?1029:1028,Ne[t.fail||"keep"],Ne[t.zfail||"keep"],Ne[t.zpass||"keep"]]}),(function(t,r,n){function a(e){return r.def('"',e,'" in ',n,"?",i,"[",n,".",e,"]:",7680)}var i=t.constants.stencilOps;return["stencil.opBack"===e?1029:1028,a("fail"),a("zfail"),a("zpass")]}));case"polygonOffset.offset":return t((function(e){return[e.factor|0,e.units|0]}),(function(e,t,r){e=t.def(r,".factor|0");t=t.def(r,".units|0");return[e,t]}));case"cull.face":return t((function(e){var t=0;"front"===e?t=1028:"back"===e&&(t=1029);return t}),(function(e,t,r){return t.def(r,'==="front"?',1028,":",1029)}));case"lineWidth":return t((function(e){return e}),(function(e,t,r){return r}));case"frontFace":return t((function(e){return je[e]}),(function(e,t,r){return t.def(r+'==="cw"?2304:2305')}));case"colorMask":return t((function(e){return e.map((function(e){return!!e}))}),(function(e,t,r){return c(4,(function(e){return"!!"+r+"["+e+"]"}))}));case"sample.coverage":return t((function(e){return["value"in e?e.value:1,!!e.invert]}),(function(e,t,r){e=t.def('"value" in ',r,"?+",r,".value:1");t=t.def("!!",r,".invert");return[e,t]}))}}));return a}function L(e,t){var r=e["static"],n=e.dynamic,a={};Object.keys(r).forEach((function(e){var t=r[e],n;if("number"===typeof t||"boolean"===typeof t)n=X((function(){return t}));else if("function"===typeof t){var i=t._reglType;if("texture2d"===i||"textureCube"===i)n=X((function(e){return e.link(t)}));else if("framebuffer"===i||"framebufferCube"===i)n=X((function(e){return e.link(t.color[0])}))}else T(t)&&(n=X((function(e){return e.global.def("[",c(t.length,(function(e){return t[e]})),"]")})));n.value=t;a[e]=n}));Object.keys(n).forEach((function(e){var t=n[e];a[e]=J(t,(function(e,r){return e.invoke(r,t)}))}));return a}function C(e,r){var n=e["static"],i=e.dynamic,o={};Object.keys(n).forEach((function(e){var r=n[e],i=t.id(e),s=new oe;if(G(r))s.state=1,s.buffer=a.getBuffer(a.create(r,34962,!1,!0)),s.type=0;else{var l=a.getBuffer(r);if(l)s.state=1,s.buffer=l,s.type=0;else if("constant"in r){var u=r.constant;s.buffer="null";s.state=2;"number"===typeof u?s.x=u:ze.forEach((function(e,t){t<u.length&&(s[e]=u[t])}))}else{var l=G(r.buffer)?a.getBuffer(a.create(r.buffer,34962,!1,!0)):a.getBuffer(r.buffer),f=r.offset|0,c=r.stride|0,v=r.size|0,h=!!r.normalized,p=0;"type"in r&&(p=fe[r.type]);r=r.divisor|0;s.buffer=l;s.state=1;s.size=v;s.normalized=h;s.type=p||l.dtype;s.offset=f;s.stride=c;s.divisor=r}}o[e]=X((function(e,t){var r=e.attribCache;if(i in r)return r[i];var n={isStream:!1};Object.keys(s).forEach((function(e){n[e]=s[e]}));s.buffer&&(n.buffer=e.link(s.buffer),n.type=n.type||n.buffer+".dtype");return r[i]=n}))}));Object.keys(i).forEach((function(e){var t=i[e];o[e]=J(t,(function(e,r){function n(e){r(l[e],"=",a,".",e,"|0;")}var a=e.invoke(r,t),i=e.shared,o=e.constants,s=i.isBufferArgs,i=i.buffer,l={isStream:r.def(!1)},u=new oe;u.state=1;Object.keys(u).forEach((function(e){l[e]=r.def(""+u[e])}));var f=l.buffer,c=l.type;r("if(",s,"(",a,")){",l.isStream,"=true;",f,"=",i,".createStream(",34962,",",a,");",c,"=",f,".dtype;","}else{",f,"=",i,".getBuffer(",a,");","if(",f,"){",c,"=",f,".dtype;",'}else if("constant" in ',a,"){",l.state,"=",2,";","if(typeof "+a+'.constant === "number"){',l[ze[0]],"=",a,".constant;",ze.slice(1).map((function(e){return l[e]})).join("="),"=0;","}else{",ze.map((function(e,t){return l[e]+"="+a+".constant.length>"+t+"?"+a+".constant["+t+"]:0;"})).join(""),"}}else{","if(",s,"(",a,".buffer)){",f,"=",i,".createStream(",34962,",",a,".buffer);","}else{",f,"=",i,".getBuffer(",a,".buffer);","}",c,'="type" in ',a,"?",o.glTypes,"[",a,".type]:",f,".dtype;",l.normalized,"=!!",a,".normalized;");n("size");n("offset");n("stride");n("divisor");r("}}");r.exit("if(",l.isStream,"){",i,".destroyStream(",f,");","}");return l}))}));return o}function I(e){var t=e["static"],r=e.dynamic,n={};Object.keys(t).forEach((function(e){var r=t[e];n[e]=X((function(e,t){return"number"===typeof r||"boolean"===typeof r?""+r:e.link(r)}))}));Object.keys(r).forEach((function(e){var t=r[e];n[e]=J(t,(function(e,r){return e.invoke(r,t)}))}));return n}function P(e,t,n,a,i){function o(e){var t=f[e];t&&(v[e]=t)}var s=A(e,t),l=w(e,i),f=k(e,l,i),c=S(e,i),v=E(e,i),h=M(e,i,s);o("viewport");o(y("scissor.box"));var p=0<Object.keys(v).length,l={framebuffer:l,draw:c,shader:h,state:v,dirty:p,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};l.profile=_(e,i);l.uniforms=L(n,i);l.drawVAO=l.scopeVAO=c.vao;if(!l.drawVAO&&h.program&&!s&&r.angle_instanced_arrays&&c["static"].elements){var d=!0;e=h.program.attributes.map((function(e){e=t["static"][e];d=d&&!!e;return e}));if(d&&0<e.length){var g=u.getVAO(u.createVAO({attributes:e,elements:c["static"].elements}));l.drawVAO=new Y(null,null,null,(function(e,t){return e.link(g)}));l.useVAO=!0}}s?l.useVAO=!0:l.attributes=C(t,i);l.context=I(a,i);return l}function O(e,t,r){var n=e.shared.context,a=e.scope();Object.keys(r).forEach((function(i){t.save(n,"."+i);var o=r[i].append(e,t);Array.isArray(o)?a(n,".",i,"=[",o.join(),"];"):a(n,".",i,"=",o,";")}));t(a)}function D(e,t,r,n){var a=e.shared,i=a.gl,o=a.framebuffer,s;ue&&(s=t.def(a.extensions,".webgl_draw_buffers"));var l=e.constants,a=l.drawBuffer,l=l.backBuffer;e=r?r.append(e,t):t.def(o,".next");n||t("if(",e,"!==",o,".cur){");t("if(",e,"){",i,".bindFramebuffer(",36160,",",e,".framebuffer);");ue&&t(s,".drawBuffersWEBGL(",a,"[",e,".colorAttachments.length]);");t("}else{",i,".bindFramebuffer(",36160,",null);");ue&&t(s,".drawBuffersWEBGL(",l,");");t("}",o,".cur=",e,";");n||t("}")}function z(e,t,r){var n=e.shared,a=n.gl,i=e.current,o=e.next,s=n.current,l=n.next,u=e.cond(s,".dirty");pe.forEach((function(t){t=y(t);if(!(t in r.state)){var n,f;if(t in o){n=o[t];f=i[t];var v=c(ve[t].length,(function(e){return u.def(n,"[",e,"]")}));u(e.cond(v.map((function(e,t){return e+"!=="+f+"["+t+"]"})).join("||")).then(a,".",ye[t],"(",v,");",v.map((function(e,t){return f+"["+t+"]="+e})).join(";"),";"))}else n=u.def(l,".",t),v=e.cond(n,"!==",s,".",t),u(v),t in ge?v(e.cond(n).then(a,".enable(",ge[t],");")["else"](a,".disable(",ge[t],");"),s,".",t,"=",n,";"):v(a,".",ye[t],"(",n,");",s,".",t,"=",n,";")}}));0===Object.keys(r.state).length&&u(s,".dirty=false;");t(u)}function R(e,t,r,n){var a=e.shared,i=e.current,o=a.current,s=a.gl,l;Z(Object.keys(r)).forEach((function(a){var u=r[a];if(!n||n(u)){var f=u.append(e,t);if(ge[a]){var c=ge[a];W(u)?(l=e.link(f,{stable:!0}),t(e.cond(l).then(s,".enable(",c,");")["else"](s,".disable(",c,");")),t(o,".",a,"=",l,";")):(t(e.cond(f).then(s,".enable(",c,");")["else"](s,".disable(",c,");")),t(o,".",a,"=",f,";"))}else if(T(f)){var v=i[a];t(s,".",ye[a],"(",f,");",f.map((function(e,t){return v+"["+t+"]="+e})).join(";"),";")}else W(u)?(l=e.link(f,{stable:!0}),t(s,".",ye[a],"(",l,");",o,".",a,"=",l,";")):t(s,".",ye[a],"(",f,");",o,".",a,"=",f,";")}}))}function F(e,t){le&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function B(e,t,r,n,a){function i(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function o(e){h=t.def();e(h,"=",i(),";");"string"===typeof a?e(f,".count+=",a,";"):e(f,".count++;");p&&(n?(d=t.def(),e(d,"=",v,".getNumPendingQueries();")):e(v,".beginQuery(",f,");"))}function s(e){e(f,".cpuTime+=",i(),"-",h,";");p&&(n?e(v,".pushScopeStats(",d,",",v,".getNumPendingQueries(),",f,");"):e(v,".endQuery();"))}function l(e){var r=t.def(c,".profile");t(c,".profile=",e,";");t.exit(c,".profile=",r,";")}var u=e.shared,f=e.stats,c=u.current,v=u.timer;r=r.profile;var h,d;if(r){if(W(r)){r.enable?(o(t),s(t.exit),l("true")):l("false");return}r=r.append(e,t);l(r)}else r=t.def(c,".profile");u=e.block();o(u);t("if(",r,"){",u,"}");e=e.block();s(e);t.exit("if(",r,"){",e,"}")}function N(e,t,r,n,a){function i(e){switch(e){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function o(r,n,a){function i(){t("if(!",f,".buffer){",l,".enableVertexAttribArray(",u,");}");var r=a.type,i;i=a.size?t.def(a.size,"||",n):n;t("if(",f,".type!==",r,"||",f,".size!==",i,"||",h.map((function(e){return f+"."+e+"!=="+a[e]})).join("||"),"){",l,".bindBuffer(",34962,",",c,".buffer);",l,".vertexAttribPointer(",[u,i,r,a.normalized,a.stride,a.offset],");",f,".type=",r,";",f,".size=",i,";",h.map((function(e){return f+"."+e+"="+a[e]+";"})).join(""),"}");le&&(r=a.divisor,t("if(",f,".divisor!==",r,"){",e.instancing,".vertexAttribDivisorANGLE(",[u,r],");",f,".divisor=",r,";}"))}function o(){t("if(",f,".buffer){",l,".disableVertexAttribArray(",u,");",f,".buffer=null;","}if(",ze.map((function(e,t){return f+"."+e+"!=="+v[t]})).join("||"),"){",l,".vertexAttrib4f(",u,",",v,");",ze.map((function(e,t){return f+"."+e+"="+v[t]+";"})).join(""),"}")}var l=s.gl,u=t.def(r,".location"),f=t.def(s.attributes,"[",u,"]");r=a.state;var c=a.buffer,v=[a.x,a.y,a.z,a.w],h=["buffer","normalized","offset","stride"];1===r?i():2===r?o():(t("if(",r,"===",1,"){"),i(),t("}else{"),o(),t("}"))}var s=e.shared;n.forEach((function(n){var s=n.name,l=r.attributes[s],u;if(l){if(!a(l))return;u=l.append(e,t)}else{if(!a(Ue))return;var f=e.scopeAttrib(s);u={};Object.keys(new oe).forEach((function(e){u[e]=t.def(f,".",e)}))}o(e.link(n),i(n.info.type),u)}))}function j(e,r,n,a,i,o){for(var s=e.shared,l=s.gl,u,f=0;f<a.length;++f){var v=a[f],h=v.name,p=v.info.type,d=n.uniforms[h],v=e.link(v)+".location",g;if(d){if(!i(d))continue;if(W(d)){h=d.value;if(35678===p||35680===p)p=e.link(h._texture||h.color[0]._texture),r(l,".uniform1i(",v,",",p+".bind());"),r.exit(p,".unbind();");else if(35674===p||35675===p||35676===p)h=e.global.def("new Float32Array(["+Array.prototype.slice.call(h)+"])"),d=2,35675===p?d=3:35676===p&&(d=4),r(l,".uniformMatrix",d,"fv(",v,",false,",h,");");else{switch(p){case 5126:u="1f";break;case 35664:u="2f";break;case 35665:u="3f";break;case 35666:u="4f";break;case 35670:u="1i";break;case 5124:u="1i";break;case 35671:u="2i";break;case 35667:u="2i";break;case 35672:u="3i";break;case 35668:u="3i";break;case 35673:u="4i";break;case 35669:u="4i"}r(l,".uniform",u,"(",v,",",T(h)?Array.prototype.slice.call(h):h,");")}continue}else g=d.append(e,r)}else{if(!i(Ue))continue;g=r.def(s.uniforms,"[",t.id(h),"]")}35678===p?r("if(",g,"&&",g,'._reglType==="framebuffer"){',g,"=",g,".color[0];","}"):35680===p&&r("if(",g,"&&",g,'._reglType==="framebufferCube"){',g,"=",g,".color[0];","}");h=1;switch(p){case 35678:case 35680:p=r.def(g,"._texture");r(l,".uniform1i(",v,",",p,".bind());");r.exit(p,".unbind();");continue;case 5124:case 35670:u="1i";break;case 35667:case 35671:u="2i";h=2;break;case 35668:case 35672:u="3i";h=3;break;case 35669:case 35673:u="4i";h=4;break;case 5126:u="1f";break;case 35664:u="2f";h=2;break;case 35665:u="3f";h=3;break;case 35666:u="4f";h=4;break;case 35674:u="Matrix2fv";break;case 35675:u="Matrix3fv";break;case 35676:u="Matrix4fv"}if("M"===u.charAt(0)){r(l,".uniform",u,"(",v,",");var v=Math.pow(p-35674+2,2),y=e.global.def("new Float32Array(",v,")");Array.isArray(g)?r("false,(",c(v,(function(e){return y+"["+e+"]="+g[e]})),",",y,")"):r("false,(Array.isArray(",g,")||",g," instanceof Float32Array)?",g,":(",c(v,(function(e){return y+"["+e+"]="+g+"["+e+"]"})),",",y,")");r(");")}else{if(1<h){for(var p=[],m=[],d=0;d<h;++d)Array.isArray(g)?m.push(g[d]):m.push(r.def(g+"["+d+"]")),o&&p.push(r.def());o&&r("if(!",e.batchId,"||",p.map((function(e,t){return e+"!=="+m[t]})).join("||"),"){",p.map((function(e,t){return e+"="+m[t]+";"})).join(""));r(l,".uniform",u,"(",v,",",m.join(","),");")}else o&&(p=r.def(),r("if(!",e.batchId,"||",p,"!==",g,"){",p,"=",g,";")),r(l,".uniform",u,"(",v,",",g,");");o&&r("}")}}}function U(e,t,r,n){function a(a){var i=f[a];return i?i.contextDep&&n.contextDynamic||i.propDep?i.append(e,r):i.append(e,t):t.def(u,".",a)}function i(){function e(){r(g,".drawElementsInstancedANGLE(",[v,p,y,h+"<<(("+y+"-5121)>>1)",d],");")}function t(){r(g,".drawArraysInstancedANGLE(",[v,h,p,d],");")}c&&"null"!==c?m?e():(r("if(",c,"){"),e(),r("}else{"),t(),r("}")):t()}function o(){function e(){r(l+".drawElements("+[v,p,y,h+"<<(("+y+"-5121)>>1)"]+");")}function t(){r(l+".drawArrays("+[v,h,p]+");")}c&&"null"!==c?m?e():(r("if(",c,"){"),e(),r("}else{"),t(),r("}")):t()}var s=e.shared,l=s.gl,u=s.draw,f=n.draw,c=function(){var a=f.elements,i=t;if(a){if(a.contextDep&&n.contextDynamic||a.propDep)i=r;a=a.append(e,i);f.elementsActive&&i("if("+a+")"+l+".bindBuffer(34963,"+a+".buffer.buffer);")}else a=i.def(),i(a,"=",u,".","elements",";","if(",a,"){",l,".bindBuffer(",34963,",",a,".buffer.buffer);}","else if(",s.vao,".currentVAO){",a,"=",e.shared.elements+".getElements("+s.vao,".currentVAO.elements);",ce?"":"if("+a+")"+l+".bindBuffer(34963,"+a+".buffer.buffer);","}");return a}(),v=a("primitive"),h=a("offset"),p=function(){var a=f.count,i=t;if(a){if(a.contextDep&&n.contextDynamic||a.propDep)i=r;a=a.append(e,i)}else a=i.def(u,".","count");return a}();if("number"===typeof p){if(0===p)return}else r("if(",p,"){"),r.exit("}");var d,g;le&&(d=a("instances"),g=e.instancing);var y=c+".type",m=f.elements&&W(f.elements)&&!f.vaoActive;le&&("number"!==typeof d||0<=d)?"string"===typeof d?(r("if(",d,">0){"),i(),r("}else if(",d,"<0){"),o(),r("}")):i():o()}function V(e,t,r,n,a){t=b();a=t.proc("body",a);le&&(t.instancing=a.def(t.shared.extensions,".angle_instanced_arrays"));e(t,a,r,n);return t.compile().body}function H(e,t,r,n){F(e,t);r.useVAO?r.drawVAO?t(e.shared.vao,".setVAO(",r.drawVAO.append(e,t),");"):t(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(t(e.shared.vao,".setVAO(null);"),N(e,t,r,n.attributes,(function(){return!0})));j(e,t,r,n.uniforms,(function(){return!0}),!1);U(e,t,t,r)}function K(e,t){var r=e.proc("draw",1);F(e,r);O(e,r,t.context);D(e,r,t.framebuffer);z(e,r,t);R(e,r,t.state);B(e,r,t,!1,!0);var n=t.shader.progVar.append(e,r);r(e.shared.gl,".useProgram(",n,".program);");if(t.shader.program)H(e,r,t,t.shader.program);else{r(e.shared.vao,".setVAO(null);");var a=e.global.def("{}"),i=r.def(n,".id"),o=r.def(a,"[",i,"]");r(e.cond(o).then(o,".call(this,a0);")["else"](o,"=",a,"[",i,"]=",e.link((function(r){return V(H,e,t,r,1)})),"(",n,");",o,".call(this,a0);"))}0<Object.keys(t.state).length&&r(e.shared.current,".dirty=true;");e.shared.vao&&r(e.shared.vao,".setVAO(null);")}function $(e,t,r,n){function a(){return!0}e.batchId="a1";F(e,t);N(e,t,r,n.attributes,a);j(e,t,r,n.uniforms,a,!1);U(e,t,t,r)}function ee(e,t,r,n){function a(e){return e.contextDep&&o||e.propDep}function i(e){return!a(e)}F(e,t);var o=r.contextDep,s=t.def(),l=t.def();e.shared.props=l;e.batchId=s;var u=e.scope(),f=e.scope();t(u.entry,"for(",s,"=0;",s,"<","a1",";++",s,"){",l,"=","a0","[",s,"];",f,"}",u.exit);r.needsContext&&O(e,f,r.context);r.needsFramebuffer&&D(e,f,r.framebuffer);R(e,f,r.state,a);r.profile&&a(r.profile)&&B(e,f,r,!1,!0);n?(r.useVAO?r.drawVAO?a(r.drawVAO)?f(e.shared.vao,".setVAO(",r.drawVAO.append(e,f),");"):u(e.shared.vao,".setVAO(",r.drawVAO.append(e,u),");"):u(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(u(e.shared.vao,".setVAO(null);"),N(e,u,r,n.attributes,i),N(e,f,r,n.attributes,a)),j(e,u,r,n.uniforms,i,!1),j(e,f,r,n.uniforms,a,!0),U(e,u,f,r)):(t=e.global.def("{}"),n=r.shader.progVar.append(e,f),l=f.def(n,".id"),u=f.def(t,"[",l,"]"),f(e.shared.gl,".useProgram(",n,".program);","if(!",u,"){",u,"=",t,"[",l,"]=",e.link((function(t){return V($,e,r,t,2)})),"(",n,");}",u,".call(this,a0[",s,"],",s,");"))}function re(e,t){function r(e){return e.contextDep&&a||e.propDep}var n=e.proc("batch",2);e.batchId="0";F(e,n);var a=!1,i=!0;Object.keys(t.context).forEach((function(e){a=a||t.context[e].propDep}));a||(O(e,n,t.context),i=!1);var o=t.framebuffer,s=!1;o?(o.propDep?a=s=!0:o.contextDep&&a&&(s=!0),s||D(e,n,o)):D(e,n,null);t.state.viewport&&t.state.viewport.propDep&&(a=!0);z(e,n,t);R(e,n,t.state,(function(e){return!r(e)}));t.profile&&r(t.profile)||B(e,n,t,!1,"a1");t.contextDep=a;t.needsContext=i;t.needsFramebuffer=s;i=t.shader.progVar;if(i.contextDep&&a||i.propDep)ee(e,n,t,null);else if(i=i.append(e,n),n(e.shared.gl,".useProgram(",i,".program);"),t.shader.program)ee(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var o=e.global.def("{}"),s=n.def(i,".id"),l=n.def(o,"[",s,"]");n(e.cond(l).then(l,".call(this,a0,a1);")["else"](l,"=",o,"[",s,"]=",e.link((function(r){return V(ee,e,t,r,2)})),"(",i,");",l,".call(this,a0,a1);"))}0<Object.keys(t.state).length&&n(e.shared.current,".dirty=true;");e.shared.vao&&n(e.shared.vao,".setVAO(null);")}function ne(e,r){function n(t){var n=r.shader[t];n&&(n=n.append(e,a),isNaN(n)?a.set(i.shader,"."+t,n):a.set(i.shader,"."+t,e.link(n,{stable:!0})))}var a=e.proc("scope",3);e.batchId="a2";var i=e.shared,o=i.current;O(e,a,r.context);r.framebuffer&&r.framebuffer.append(e,a);Z(Object.keys(r.state)).forEach((function(t){var n=r.state[t],o=n.append(e,a);T(o)?o.forEach((function(r,n){isNaN(r)?a.set(e.next[t],"["+n+"]",r):a.set(e.next[t],"["+n+"]",e.link(r,{stable:!0}))})):W(n)?a.set(i.next,"."+t,e.link(o,{stable:!0})):a.set(i.next,"."+t,o)}));B(e,a,r,!0,!0);["elements","offset","count","instances","primitive"].forEach((function(t){var n=r.draw[t];n&&(n=n.append(e,a),isNaN(n)?a.set(i.draw,"."+t,n):a.set(i.draw,"."+t,e.link(n),{stable:!0}))}));Object.keys(r.uniforms).forEach((function(n){var o=r.uniforms[n].append(e,a);Array.isArray(o)&&(o="["+o.map((function(t){return isNaN(t)?t:e.link(t,{stable:!0})}))+"]");a.set(i.uniforms,"["+e.link(t.id(n),{stable:!0})+"]",o)}));Object.keys(r.attributes).forEach((function(t){var n=r.attributes[t].append(e,a),i=e.scopeAttrib(t);Object.keys(new oe).forEach((function(e){a.set(i,"."+e,n[e])}))}));if(r.scopeVAO){var s=r.scopeVAO.append(e,a);isNaN(s)?a.set(i.vao,".targetVAO",s):a.set(i.vao,".targetVAO",e.link(s,{stable:!0}))}n("vert");n("frag");0<Object.keys(r.state).length&&(a(o,".dirty=true;"),a.exit(o,".dirty=true;"));a("a1(",e.shared.context,",a0,",e.batchId,");")}function ae(e){if("object"===typeof e&&!T(e)){for(var t=Object.keys(e),r=0;r<t.length;++r)if(te.isDynamic(e[t[r]]))return!0;return!1}}function ie(e,t,r){function n(e,t){o.forEach((function(r){var n=a[r];te.isDynamic(n)&&(n=e.invoke(t,n),t(f,".",r,"=",n,";"))}))}var a=t["static"][r];if(a&&ae(a)){var i=e.global,o=Object.keys(a),s=!1,l=!1,u=!1,f=e.global.def("{}");o.forEach((function(t){var r=a[t];if(te.isDynamic(r))"function"===typeof r&&(r=a[t]=te.unbox(r)),t=J(r,null),s=s||t.thisDep,u=u||t.propDep,l=l||t.contextDep;else{i(f,".",t,"=");switch(typeof r){case"number":i(r);break;case"string":i('"',r,'"');break;case"object":Array.isArray(r)&&i("[",r.join(),"]");break;default:i(e.link(r))}i(";")}}));t.dynamic[r]=new te.DynamicVariable(4,{thisDep:s,contextDep:l,propDep:u,ref:f,append:n});delete t["static"][r]}}var oe=u.Record,se={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(se.min=32775,se.max=32776);var le=r.angle_instanced_arrays,ue=r.webgl_draw_buffers,ce=r.oes_vertex_array_object,ve={dirty:!0,profile:g.profile},he={},pe=[],ge={},ye={};m("dither",3024);m("blend.enable",3042);x("blend.color","blendColor",[0,0,0,0]);x("blend.equation","blendEquationSeparate",[32774,32774]);x("blend.func","blendFuncSeparate",[1,0,1,0]);m("depth.enable",2929,!0);x("depth.func","depthFunc",513);x("depth.range","depthRange",[0,1]);x("depth.mask","depthMask",!0);x("colorMask","colorMask",[!0,!0,!0,!0]);m("cull.enable",2884);x("cull.face","cullFace",1029);x("frontFace","frontFace",2305);x("lineWidth","lineWidth",1);m("polygonOffset.enable",32823);x("polygonOffset.offset","polygonOffset",[0,0]);m("sample.alpha",32926);m("sample.enable",32928);x("sample.coverage","sampleCoverage",[1,!1]);m("stencil.enable",2960);x("stencil.mask","stencilMask",-1);x("stencil.func","stencilFunc",[519,0,-1]);x("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);x("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);m("scissor.enable",3089);x("scissor.box","scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);x("viewport","viewport",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var me={gl:e,context:h,strings:t,next:he,current:ve,draw:v,elements:i,buffer:a,shader:f,attributes:u.state,vao:u,uniforms:l,framebuffer:s,extensions:r,timer:p,isBufferArgs:G},xe={primTypes:de,compareFuncs:Be,blendFuncs:Fe,blendEquations:se,stencilOps:Ne,glTypes:fe,orientationType:je};ue&&(xe.backBuffer=[1029],xe.drawBuffer=c(n.maxDrawbuffers,(function(e){return 0===e?[0]:c(e,(function(e){return 36064+e}))})));var be=0;return{next:he,current:ve,procs:function(){var e=b(),t=e.proc("poll"),a=e.proc("refresh"),i=e.block();t(i);a(i);var o=e.shared,s=o.gl,l=o.next,u=o.current;i(u,".dirty=false;");D(e,t);D(e,a,null,!0);var f;le&&(f=e.link(le));r.oes_vertex_array_object&&a(e.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");var o=a.def(o.attributes),v=a.def(0),h=e.cond(v,".buffer");h.then(s,".enableVertexAttribArray(i);",s,".bindBuffer(",34962,",",v,".buffer.buffer);",s,".vertexAttribPointer(i,",v,".size,",v,".type,",v,".normalized,",v,".stride,",v,".offset);")["else"](s,".disableVertexAttribArray(i);",s,".vertexAttrib4f(i,",v,".x,",v,".y,",v,".z,",v,".w);",v,".buffer=null;");var p=e.link(n.maxAttributes,{stable:!0});a("for(var i=0;i<",p,";++i){",v,"=",o,"[i];",h,"}");le&&a("for(var i=0;i<",p,";++i){",f,".vertexAttribDivisorANGLE(i,",o,"[i].divisor);","}");a(e.shared.vao,".currentVAO=null;",e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);");Object.keys(ge).forEach((function(r){var n=ge[r],o=i.def(l,".",r),f=e.block();f("if(",o,"){",s,".enable(",n,")}else{",s,".disable(",n,")}",u,".",r,"=",o,";");a(f);t("if(",o,"!==",u,".",r,"){",f,"}")}));Object.keys(ye).forEach((function(r){var n=ye[r],o=ve[r],f,v,h=e.block();h(s,".",n,"(");T(o)?(n=o.length,f=e.global.def(l,".",r),v=e.global.def(u,".",r),h(c(n,(function(e){return f+"["+e+"]"})),");",c(n,(function(e){return v+"["+e+"]="+f+"["+e+"];"})).join("")),t("if(",c(n,(function(e){return f+"["+e+"]!=="+v+"["+e+"]"})).join("||"),"){",h,"}")):(f=i.def(l,".",r),v=i.def(u,".",r),h(f,");",u,".",r,"=",f,";"),t("if(",f,"!==",v,"){",h,"}"));a(h)}));return e.compile()}(),compile:function(e,t,r,n,a){var i=b();i.stats=i.link(a);Object.keys(t["static"]).forEach((function(e){ie(i,t,e)}));Re.forEach((function(t){ie(i,e,t)}));var o=P(e,t,r,n,i);o.shader.program&&(o.shader.program.attributes.sort((function(e,t){return e.name<t.name?-1:1})),o.shader.program.uniforms.sort((function(e,t){return e.name<t.name?-1:1})));K(i,o);ne(i,o);re(i,o);return Q(i.compile(),{destroy:function(){o.shader.program.destroy()}})}}}function $(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}var Q=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;++n)e[r[n]]=t[r[n]];return e},ee=0,te={DynamicVariable:e,define:function(t,n){return new e(t,r(n+""))},isDynamic:function(t){return"function"===typeof t&&!t._reglType||t instanceof e},unbox:n,accessor:r},re={next:"function"===typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"===typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},ne="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},ae=h();ae.zero=h();var ie=function(e,t){var r=1;t.ext_texture_filter_anisotropic&&(r=e.getParameter(34047));var n=1,a=1;t.webgl_draw_buffers&&(n=e.getParameter(34852),a=e.getParameter(36063));var i=!!t.oes_texture_float;if(i){i=e.createTexture();e.bindTexture(3553,i);e.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var o=e.createFramebuffer();e.bindFramebuffer(36160,o);e.framebufferTexture2D(36160,36064,3553,i,0);e.bindTexture(3553,null);if(36053!==e.checkFramebufferStatus(36160))i=!1;else{e.viewport(0,0,1,1);e.clearColor(1,0,0,1);e.clear(16384);var s=ae.allocType(5126,4);e.readPixels(0,0,1,1,6408,5126,s);e.getError()?i=!1:(e.deleteFramebuffer(o),e.deleteTexture(i),i=1===s[0]);ae.freeType(s)}}s=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(s=e.createTexture(),o=ae.allocType(5121,36),e.activeTexture(33984),e.bindTexture(34067,s),e.texImage2D(34069,0,6408,3,3,0,6408,5121,o),ae.freeType(o),e.bindTexture(34067,null),e.deleteTexture(s),s=!e.getError());return{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter((function(e){return!!t[e]})),maxAnisotropic:r,maxDrawbuffers:n,maxColorAttachments:a,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938),readFloat:i,npotTextureCube:s}},oe=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},se=function(e){return Object.keys(e).map((function(t){return e[t]}))},le={shape:function(e){for(var t=[];e.length;e=e[0])t.push(e.length);return t},flatten:function(e,t,r,n){var a=1;if(t.length)for(var i=0;i<t.length;++i)a*=t[i];else a=0;r=n||ae.allocType(r,a);switch(t.length){case 0:break;case 1:n=t[0];for(t=0;t<n;++t)r[t]=e[t];break;case 2:n=t[0];t=t[1];for(i=a=0;i<n;++i)for(var o=e[i],s=0;s<t;++s)r[a++]=o[s];break;case 3:d(e,t[0],t[1],t[2],r,0);break;default:g(e,t,0,r,0)}return r}},ue={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},fe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ce={dynamic:35048,stream:35040,static:35044},ve=le.flatten,he=le.shape,pe=[];pe[5120]=1;pe[5122]=2;pe[5124]=4;pe[5121]=1;pe[5123]=2;pe[5125]=4;pe[5126]=4;var de={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ge=new Float32Array(1),ye=new Uint32Array(ge.buffer),me=[9984,9986,9985,9987],xe=[0,6409,6410,6407,6408],be={};be[6409]=be[6406]=be[6402]=1;be[34041]=be[6410]=2;be[6407]=be[35904]=3;be[6408]=be[35906]=4;var _e=k("HTMLCanvasElement"),we=k("OffscreenCanvas"),Te=k("CanvasRenderingContext2D"),ke=k("ImageBitmap"),Ae=k("HTMLImageElement"),Me=k("HTMLVideoElement"),Se=Object.keys(ue).concat([_e,we,Te,ke,Ae,Me]),Ee=[];Ee[5121]=1;Ee[5126]=4;Ee[36193]=2;Ee[5123]=2;Ee[5125]=4;var Le=[];Le[32854]=2;Le[32855]=2;Le[36194]=2;Le[34041]=4;Le[33776]=.5;Le[33777]=.5;Le[33778]=1;Le[33779]=1;Le[35986]=.5;Le[35987]=1;Le[34798]=1;Le[35840]=.5;Le[35841]=.25;Le[35842]=.5;Le[35843]=.25;Le[36196]=.5;var Ce=[];Ce[32854]=2;Ce[32855]=2;Ce[36194]=2;Ce[33189]=2;Ce[36168]=1;Ce[34041]=4;Ce[35907]=4;Ce[34836]=16;Ce[34842]=8;Ce[34843]=6;var Ie=function(e,t,r,n,a){function i(e){this.id=u++;this.refCount=1;this.renderbuffer=e;this.format=32854;this.height=this.width=0;a.profile&&(this.stats={size:0})}function o(t){var r=t.renderbuffer;e.bindRenderbuffer(36161,null);e.deleteRenderbuffer(r);t.renderbuffer=null;t.refCount=0;delete f[t.id];n.renderbufferCount--}var s={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};t.ext_srgb&&(s.srgba=35907);t.ext_color_buffer_half_float&&(s.rgba16f=34842,s.rgb16f=34843);t.webgl_color_buffer_float&&(s.rgba32f=34836);var l=[];Object.keys(s).forEach((function(e){l[s[e]]=e}));var u=0,f={};i.prototype.decRef=function(){0>=--this.refCount&&o(this)};a.profile&&(n.getTotalRenderbufferSize=function(){var e=0;Object.keys(f).forEach((function(t){e+=f[t].stats.size}));return e});return{create:function(t,r){function o(t,r){var n=0,i=0,f=32854;"object"===typeof t&&t?("shape"in t?(i=t.shape,n=i[0]|0,i=i[1]|0):("radius"in t&&(n=i=t.radius|0),"width"in t&&(n=t.width|0),"height"in t&&(i=t.height|0)),"format"in t&&(f=s[t.format])):"number"===typeof t?(n=t|0,i="number"===typeof r?r|0:n):t||(n=i=1);if(n!==u.width||i!==u.height||f!==u.format)return o.width=u.width=n,o.height=u.height=i,u.format=f,e.bindRenderbuffer(36161,u.renderbuffer),e.renderbufferStorage(36161,f,n,i),a.profile&&(u.stats.size=Ce[u.format]*u.width*u.height),o.format=l[u.format],o}var u=new i(e.createRenderbuffer());f[u.id]=u;n.renderbufferCount++;o(t,r);o.resize=function(t,r){var n=t|0,i=r|0||n;if(n===u.width&&i===u.height)return o;o.width=u.width=n;o.height=u.height=i;e.bindRenderbuffer(36161,u.renderbuffer);e.renderbufferStorage(36161,u.format,n,i);a.profile&&(u.stats.size=Ce[u.format]*u.width*u.height);return o};o._reglType="renderbuffer";o._renderbuffer=u;a.profile&&(o.stats=u.stats);o.destroy=function(){u.decRef()};return o},clear:function(){se(f).forEach(o)},restore:function(){se(f).forEach((function(t){t.renderbuffer=e.createRenderbuffer();e.bindRenderbuffer(36161,t.renderbuffer);e.renderbufferStorage(36161,t.format,t.width,t.height)}));e.bindRenderbuffer(36161,null)}}},Pe=[];Pe[6408]=4;Pe[6407]=3;var Oe=[];Oe[5121]=1;Oe[5126]=4;Oe[36193]=2;var De=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],ze=["x","y","z","w"],Re="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Fe={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Be={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ne={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},je={cw:2304,ccw:2305},Ue=new Y(!1,!1,!1,(function(){})),Ve=function(e,t){function r(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function n(e,t,n){var a=o.pop()||new r;a.startQueryIndex=e;a.endQueryIndex=t;a.sum=0;a.stats=n;s.push(a)}if(!t.ext_disjoint_timer_query)return null;var a=[],i=[],o=[],s=[],l=[],u=[];return{beginQuery:function(e){var r=a.pop()||t.ext_disjoint_timer_query.createQueryEXT();t.ext_disjoint_timer_query.beginQueryEXT(35007,r);i.push(r);n(i.length-1,i.length,e)},endQuery:function(){t.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:n,update:function(){var e,r;e=i.length;if(0!==e){u.length=Math.max(u.length,e+1);l.length=Math.max(l.length,e+1);l[0]=0;var n=u[0]=0;for(r=e=0;r<i.length;++r){var f=i[r];t.ext_disjoint_timer_query.getQueryObjectEXT(f,34919)?(n+=t.ext_disjoint_timer_query.getQueryObjectEXT(f,34918),a.push(f)):i[e++]=f;l[r+1]=n;u[r+1]=e}i.length=e;for(r=e=0;r<s.length;++r){var n=s[r],c=n.startQueryIndex,f=n.endQueryIndex;n.sum+=l[f]-l[c];c=u[c];f=u[f];f===c?(n.stats.gpuTime+=n.sum/1e6,o.push(n)):(n.startQueryIndex=c,n.endQueryIndex=f,s[e++]=n)}s.length=e}},getNumPendingQueries:function(){return i.length},clear:function(){a.push.apply(a,i);for(var e=0;e<a.length;e++)t.ext_disjoint_timer_query.deleteQueryEXT(a[e]);i.length=0;a.length=0},restore:function(){i.length=0;a.length=0}}};return function(e){function t(){if(0===Z.length)A&&A.update(),J=null;else{J=re.next(t);h();for(var e=Z.length-1;0<=e;--e){var r=Z[e];r&&r(L,null,0)}g.flush();A&&A.update()}}function r(){!J&&0<Z.length&&(J=re.next(t))}function n(){J&&(re.cancel(t),J=null)}function i(e){e.preventDefault();n();Y.forEach((function(e){e()}))}function o(e){g.getError();m.restore();N.restore();O.restore();j.restore();U.restore();V.restore();B.restore();A&&A.restore();H.procs.refresh();r();W.forEach((function(e){e()}))}function s(e){function t(e,t){var r={},n={};Object.keys(e).forEach((function(a){var i=e[a];if(te.isDynamic(i))n[a]=te.unbox(i,a);else{if(t&&Array.isArray(i))for(var o=0;o<i.length;++o)if(te.isDynamic(i[o])){n[a]=te.unbox(i,a);return}r[a]=i}}));return{dynamic:n,static:r}}function r(e){for(;c.length<e;)c.push(null);return c}var n=t(e.context||{},!0),a=t(e.uniforms||{},!0),i=t(e.attributes||{},!1);e=t(function(e){function t(e){if(e in r){var t=r[e];delete r[e];Object.keys(t).forEach((function(n){r[e+"."+n]=t[n]}))}}var r=Q({},e);delete r.uniforms;delete r.attributes;delete r.context;delete r.vao;"stencil"in r&&r.stencil.op&&(r.stencil.opBack=r.stencil.opFront=r.stencil.op,delete r.stencil.op);t("blend");t("depth");t("cull");t("stencil");t("polygonOffset");t("scissor");t("sample");"vao"in e&&(r.vao=e.vao);return r}(e),!1);var o={gpuTime:0,cpuTime:0,count:0},s=H.compile(e,i,a,n,o),l=s.draw,u=s.batch,f=s.scope,c=[];return Q((function(e,t){var n;if("function"===typeof e)return f.call(this,null,e,0);if("function"===typeof t)if("number"===typeof e)for(n=0;n<e;++n)f.call(this,null,t,n);else if(Array.isArray(e))for(n=0;n<e.length;++n)f.call(this,e[n],t,n);else return f.call(this,e,t,0);else if("number"===typeof e){if(0<e)return u.call(this,r(e|0),e|0)}else if(Array.isArray(e)){if(e.length)return u.call(this,e,e.length)}else return l.call(this,e)}),{stats:o,destroy:function(){s.destroy()}})}function l(e,t){var r=0;H.procs.poll();var n=t.color;n&&(g.clearColor(+n[0]||0,+n[1]||0,+n[2]||0,+n[3]||0),r|=16384);"depth"in t&&(g.clearDepth(+t.depth),r|=256);"stencil"in t&&(g.clearStencil(t.stencil|0),r|=1024);g.clear(r)}function c(e){Z.push(e);r();return{cancel:function(){function t(){var e=$(Z,t);Z[e]=Z[Z.length-1];--Z.length;0>=Z.length&&n()}var r=$(Z,e);Z[r]=t}}}function v(){var e=q.viewport,t=q.scissor_box;e[0]=e[1]=t[0]=t[1]=0;L.viewportWidth=L.framebufferWidth=L.drawingBufferWidth=e[2]=t[2]=g.drawingBufferWidth;L.viewportHeight=L.framebufferHeight=L.drawingBufferHeight=e[3]=t[3]=g.drawingBufferHeight}function h(){L.tick+=1;L.time=d();v();H.procs.poll()}function p(){j.refresh();v();H.procs.refresh();A&&A.update()}function d(){return(ne()-M)/1e3}e=u(e);if(!e)return null;var g=e.gl,y=g.getContextAttributes();g.isContextLost();var m=f(g,e);if(!m)return null;var x=a(),w={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},T=e.cachedCode||{},k=m.extensions,A=Ve(g,k),M=ne(),S=g.drawingBufferWidth,E=g.drawingBufferHeight,L={tick:0,time:0,viewportWidth:S,viewportHeight:E,framebufferWidth:S,framebufferHeight:E,drawingBufferWidth:S,drawingBufferHeight:E,pixelRatio:e.pixelRatio},S={elements:null,primitive:4,count:-1,offset:0,instances:-1},C=ie(g,k),O=b(g,w,e,(function(e){return B.destroyBuffer(e)})),F=_(g,k,O,w),B=D(g,k,C,w,O,F,S),N=z(g,x,w,e),j=I(g,k,C,(function(){H.procs.poll()}),L,w,e),U=Ie(g,k,C,w,e),V=P(g,k,C,j,U,w),H=K(g,x,k,C,O,F,j,V,{},B,N,S,L,A,T,e),x=R(g,V,H.procs.poll,L,y,k,C),q=H.next,G=g.canvas,Z=[],Y=[],W=[],X=[e.onDestroy],J=null;G&&(G.addEventListener("webglcontextlost",i,!1),G.addEventListener("webglcontextrestored",o,!1));var ee=V.setFBO=s({framebuffer:te.define.call(null,1,"framebuffer")});p();y=Q(s,{clear:function(e){if("framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var t=0;6>t;++t)ee(Q({framebuffer:e.framebuffer.faces[t]},e),l);else ee(e,l);else l(null,e)},prop:te.define.bind(null,1),context:te.define.bind(null,2),this:te.define.bind(null,3),draw:s({}),buffer:function(e){return O.create(e,34962,!1,!1)},elements:function(e){return F.create(e,!1)},texture:j.create2D,cube:j.createCube,renderbuffer:U.create,framebuffer:V.create,framebufferCube:V.createCube,vao:B.createVAO,attributes:y,frame:c,on:function(e,t){var r;switch(e){case"frame":return c(t);case"lost":r=Y;break;case"restore":r=W;break;case"destroy":r=X}r.push(t);return{cancel:function(){for(var e=0;e<r.length;++e)if(r[e]===t){r[e]=r[r.length-1];r.pop();break}}}},limits:C,hasExtension:function(e){return 0<=C.extensions.indexOf(e.toLowerCase())},read:x,destroy:function(){Z.length=0;n();G&&(G.removeEventListener("webglcontextlost",i),G.removeEventListener("webglcontextrestored",o));N.clear();V.clear();U.clear();B.clear();j.clear();F.clear();O.clear();A&&A.clear();X.forEach((function(e){e()}))},_gl:g,_refresh:p,poll:function(){h();A&&A.update()},now:d,stats:w,getCachedCode:function(){return T},preloadCachedCode:function(e){Object.entries(e).forEach((function(e){T[e[0]]=e[1]}))}});e.onDone(null,y);return y}}))},71665:function(e,t,r){var n=r(12856);var a=n.Buffer;function i(e,t){for(var r in e){t[r]=e[r]}}if(a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow){e.exports=n}else{i(n,t);t.Buffer=o}function o(e,t,r){return a(e,t,r)}o.prototype=Object.create(a.prototype);i(a,o);o.from=function(e,t,r){if(typeof e==="number"){throw new TypeError("Argument must not be a number")}return a(e,t,r)};o.alloc=function(e,t,r){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}var n=a(e);if(t!==undefined){if(typeof r==="string"){n.fill(t,r)}else{n.fill(t)}}else{n.fill(0)}return n};o.allocUnsafe=function(e){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}return a(e)};o.allocUnsafeSlow=function(e){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}return n.SlowBuffer(e)}},21630:function(e,t,r){e.exports=i;var n=r(15398).EventEmitter;var a=r(42018);a(i,n);i.Readable=r(40410);i.Writable=r(37493);i.Duplex=r(37865);i.Transform=r(74308);i.PassThrough=r(66897);i.finished=r(12726);i.pipeline=r(10168);i.Stream=i;function i(){n.call(this)}i.prototype.pipe=function(e,t){var r=this;function a(t){if(e.writable){if(false===e.write(t)&&r.pause){r.pause()}}}r.on("data",a);function i(){if(r.readable&&r.resume){r.resume()}}e.on("drain",i);if(!e._isStdio&&(!t||t.end!==false)){r.on("end",s);r.on("close",l)}var o=false;function s(){if(o)return;o=true;e.end()}function l(){if(o)return;o=true;if(typeof e.destroy==="function")e.destroy()}function u(e){f();if(n.listenerCount(this,"error")===0){throw e}}r.on("error",u);e.on("error",u);function f(){r.removeListener("data",a);e.removeListener("drain",i);r.removeListener("end",s);r.removeListener("close",l);r.removeListener("error",u);e.removeListener("error",u);r.removeListener("end",f);r.removeListener("close",f);e.removeListener("close",f)}r.on("end",f);r.on("close",f);e.on("close",f);e.emit("pipe",r);return e}},74322:function(e){"use strict";function t(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var r={};function n(e,n,a){if(!a){a=Error}function i(e,t,r){if(typeof n==="string"){return n}else{return n(e,t,r)}}var o=function(e){t(r,e);function r(t,r,n){return e.call(this,i(t,r,n))||this}return r}(a);o.prototype.name=a.name;o.prototype.code=e;r[e]=o}function a(e,t){if(Array.isArray(e)){var r=e.length;e=e.map((function(e){return String(e)}));if(r>2){return"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]}else if(r===2){return"one of ".concat(t," ").concat(e[0]," or ").concat(e[1])}else{return"of ".concat(t," ").concat(e[0])}}else{return"of ".concat(t," ").concat(String(e))}}function i(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function o(e,t,r){if(r===undefined||r>e.length){r=e.length}return e.substring(r-t.length,r)===t}function s(e,t,r){if(typeof r!=="number"){r=0}if(r+t.length>e.length){return false}else{return e.indexOf(t,r)!==-1}}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError);n("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n;if(typeof t==="string"&&i(t,"not ")){n="must not be";t=t.replace(/^not /,"")}else{n="must be"}var l;if(o(e," argument")){l="The ".concat(e," ").concat(n," ").concat(a(t,"type"))}else{var u=s(e,".")?"property":"argument";l='The "'.concat(e,'" ').concat(u," ").concat(n," ").concat(a(t,"type"))}l+=". Received type ".concat(typeof r);return l}),TypeError);n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"}));n("ERR_STREAM_PREMATURE_CLOSE","Premature close");n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"}));n("ERR_MULTIPLE_CALLBACK","Callback called multiple times");n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");n("ERR_STREAM_WRITE_AFTER_END","write after end");n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError);n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");e.exports.q=r},37865:function(e,t,r){"use strict";var n=r(90386);var a=Object.keys||function(e){var t=[];for(var r in e){t.push(r)}return t};e.exports=f;var i=r(40410);var o=r(37493);r(42018)(f,i);{var s=a(o.prototype);for(var l=0;l<s.length;l++){var u=s[l];if(!f.prototype[u])f.prototype[u]=o.prototype[u]}}function f(e){if(!(this instanceof f))return new f(e);i.call(this,e);o.call(this,e);this.allowHalfOpen=true;if(e){if(e.readable===false)this.readable=false;if(e.writable===false)this.writable=false;if(e.allowHalfOpen===false){this.allowHalfOpen=false;this.once("end",c)}}}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:false,get:function e(){return this._writableState.highWaterMark}});Object.defineProperty(f.prototype,"writableBuffer",{enumerable:false,get:function e(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(f.prototype,"writableLength",{enumerable:false,get:function e(){return this._writableState.length}});function c(){if(this._writableState.ended)return;n.nextTick(v,this)}function v(e){e.end()}Object.defineProperty(f.prototype,"destroyed",{enumerable:false,get:function e(){if(this._readableState===undefined||this._writableState===undefined){return false}return this._readableState.destroyed&&this._writableState.destroyed},set:function e(t){if(this._readableState===undefined||this._writableState===undefined){return}this._readableState.destroyed=t;this._writableState.destroyed=t}})},66897:function(e,t,r){"use strict";e.exports=a;var n=r(74308);r(42018)(a,n);function a(e){if(!(this instanceof a))return new a(e);n.call(this,e)}a.prototype._transform=function(e,t,r){r(null,e)}},40410:function(e,t,r){"use strict";var n=r(90386);e.exports=C;var a;C.ReadableState=L;var i=r(15398).EventEmitter;var o=function e(t,r){return t.listeners(r).length};var s=r(71405);var l=r(12856).Buffer;var u=r.g.Uint8Array||function(){};function f(e){return l.from(e)}function c(e){return l.isBuffer(e)||e instanceof u}var v=r(40964);var h;if(v&&v.debuglog){h=v.debuglog("stream")}else{h=function e(){}}var p=r(31125);var d=r(65756);var g=r(56306),y=g.getHighWaterMark;var m=r(74322).q,x=m.ERR_INVALID_ARG_TYPE,b=m.ERR_STREAM_PUSH_AFTER_EOF,_=m.ERR_METHOD_NOT_IMPLEMENTED,w=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;var T;var k;var A;r(42018)(C,s);var M=d.errorOrDestroy;var S=["error","close","destroy","pause","resume"];function E(e,t,r){if(typeof e.prependListener==="function")return e.prependListener(t,r);if(!e._events||!e._events[t])e.on(t,r);else if(Array.isArray(e._events[t]))e._events[t].unshift(r);else e._events[t]=[r,e._events[t]]}function L(e,t,n){a=a||r(37865);e=e||{};if(typeof n!=="boolean")n=t instanceof a;this.objectMode=!!e.objectMode;if(n)this.objectMode=this.objectMode||!!e.readableObjectMode;this.highWaterMark=y(this,e,"readableHighWaterMark",n);this.buffer=new p;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.paused=true;this.emitClose=e.emitClose!==false;this.autoDestroy=!!e.autoDestroy;this.destroyed=false;this.defaultEncoding=e.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(e.encoding){if(!T)T=r(68019).s;this.decoder=new T(e.encoding);this.encoding=e.encoding}}function C(e){a=a||r(37865);if(!(this instanceof C))return new C(e);var t=this instanceof a;this._readableState=new L(e,this,t);this.readable=true;if(e){if(typeof e.read==="function")this._read=e.read;if(typeof e.destroy==="function")this._destroy=e.destroy}s.call(this)}Object.defineProperty(C.prototype,"destroyed",{enumerable:false,get:function e(){if(this._readableState===undefined){return false}return this._readableState.destroyed},set:function e(t){if(!this._readableState){return}this._readableState.destroyed=t}});C.prototype.destroy=d.destroy;C.prototype._undestroy=d.undestroy;C.prototype._destroy=function(e,t){t(e)};C.prototype.push=function(e,t){var r=this._readableState;var n;if(!r.objectMode){if(typeof e==="string"){t=t||r.defaultEncoding;if(t!==r.encoding){e=l.from(e,t);t=""}n=true}}else{n=true}return I(this,e,t,false,n)};C.prototype.unshift=function(e){return I(this,e,null,true,false)};function I(e,t,r,n,a){h("readableAddChunk",t);var i=e._readableState;if(t===null){i.reading=false;F(e,i)}else{var o;if(!a)o=O(i,t);if(o){M(e,o)}else if(i.objectMode||t&&t.length>0){if(typeof t!=="string"&&!i.objectMode&&Object.getPrototypeOf(t)!==l.prototype){t=f(t)}if(n){if(i.endEmitted)M(e,new w);else P(e,i,t,true)}else if(i.ended){M(e,new b)}else if(i.destroyed){return false}else{i.reading=false;if(i.decoder&&!r){t=i.decoder.write(t);if(i.objectMode||t.length!==0)P(e,i,t,false);else j(e,i)}else{P(e,i,t,false)}}}else if(!n){i.reading=false;j(e,i)}}return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function P(e,t,r,n){if(t.flowing&&t.length===0&&!t.sync){t.awaitDrain=0;e.emit("data",r)}else{t.length+=t.objectMode?1:r.length;if(n)t.buffer.unshift(r);else t.buffer.push(r);if(t.needReadable)B(e)}j(e,t)}function O(e,t){var r;if(!c(t)&&typeof t!=="string"&&t!==undefined&&!e.objectMode){r=new x("chunk",["string","Buffer","Uint8Array"],t)}return r}C.prototype.isPaused=function(){return this._readableState.flowing===false};C.prototype.setEncoding=function(e){if(!T)T=r(68019).s;var t=new T(e);this._readableState.decoder=t;this._readableState.encoding=this._readableState.decoder.encoding;var n=this._readableState.buffer.head;var a="";while(n!==null){a+=t.write(n.data);n=n.next}this._readableState.buffer.clear();if(a!=="")this._readableState.buffer.push(a);this._readableState.length=a.length;return this};var D=1073741824;function z(e){if(e>=D){e=D}else{e--;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;e++}return e}function R(e,t){if(e<=0||t.length===0&&t.ended)return 0;if(t.objectMode)return 1;if(e!==e){if(t.flowing&&t.length)return t.buffer.head.data.length;else return t.length}if(e>t.highWaterMark)t.highWaterMark=z(e);if(e<=t.length)return e;if(!t.ended){t.needReadable=true;return 0}return t.length}C.prototype.read=function(e){h("read",e);e=parseInt(e,10);var t=this._readableState;var r=e;if(e!==0)t.emittedReadable=false;if(e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended)){h("read: emitReadable",t.length,t.ended);if(t.length===0&&t.ended)X(this);else B(this);return null}e=R(e,t);if(e===0&&t.ended){if(t.length===0)X(this);return null}var n=t.needReadable;h("need readable",n);if(t.length===0||t.length-e<t.highWaterMark){n=true;h("length less than watermark",n)}if(t.ended||t.reading){n=false;h("reading or ended",n)}else if(n){h("do read");t.reading=true;t.sync=true;if(t.length===0)t.needReadable=true;this._read(t.highWaterMark);t.sync=false;if(!t.reading)e=R(r,t)}var a;if(e>0)a=W(e,t);else a=null;if(a===null){t.needReadable=t.length<=t.highWaterMark;e=0}else{t.length-=e;t.awaitDrain=0}if(t.length===0){if(!t.ended)t.needReadable=true;if(r!==e&&t.ended)X(this)}if(a!==null)this.emit("data",a);return a};function F(e,t){h("onEofChunk");if(t.ended)return;if(t.decoder){var r=t.decoder.end();if(r&&r.length){t.buffer.push(r);t.length+=t.objectMode?1:r.length}}t.ended=true;if(t.sync){B(e)}else{t.needReadable=false;if(!t.emittedReadable){t.emittedReadable=true;N(e)}}}function B(e){var t=e._readableState;h("emitReadable",t.needReadable,t.emittedReadable);t.needReadable=false;if(!t.emittedReadable){h("emitReadable",t.flowing);t.emittedReadable=true;n.nextTick(N,e)}}function N(e){var t=e._readableState;h("emitReadable_",t.destroyed,t.length,t.ended);if(!t.destroyed&&(t.length||t.ended)){e.emit("readable");t.emittedReadable=false}t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark;Y(e)}function j(e,t){if(!t.readingMore){t.readingMore=true;n.nextTick(U,e,t)}}function U(e,t){while(!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0)){var r=t.length;h("maybeReadMore read 0");e.read(0);if(r===t.length)break}t.readingMore=false}C.prototype._read=function(e){M(this,new _("_read()"))};C.prototype.pipe=function(e,t){var r=this;var a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e);break}a.pipesCount+=1;h("pipe count=%d opts=%j",a.pipesCount,t);var i=(!t||t.end!==false)&&e!==n.stdout&&e!==n.stderr;var s=i?u:m;if(a.endEmitted)n.nextTick(s);else r.once("end",s);e.on("unpipe",l);function l(e,t){h("onunpipe");if(e===r){if(t&&t.hasUnpiped===false){t.hasUnpiped=true;v()}}}function u(){h("onend");e.end()}var f=V(r);e.on("drain",f);var c=false;function v(){h("cleanup");e.removeListener("close",g);e.removeListener("finish",y);e.removeListener("drain",f);e.removeListener("error",d);e.removeListener("unpipe",l);r.removeListener("end",u);r.removeListener("end",m);r.removeListener("data",p);c=true;if(a.awaitDrain&&(!e._writableState||e._writableState.needDrain))f()}r.on("data",p);function p(t){h("ondata");var n=e.write(t);h("dest.write",n);if(n===false){if((a.pipesCount===1&&a.pipes===e||a.pipesCount>1&&K(a.pipes,e)!==-1)&&!c){h("false write response, pause",a.awaitDrain);a.awaitDrain++}r.pause()}}function d(t){h("onerror",t);m();e.removeListener("error",d);if(o(e,"error")===0)M(e,t)}E(e,"error",d);function g(){e.removeListener("finish",y);m()}e.once("close",g);function y(){h("onfinish");e.removeListener("close",g);m()}e.once("finish",y);function m(){h("unpipe");r.unpipe(e)}e.emit("pipe",r);if(!a.flowing){h("pipe resume");r.resume()}return e};function V(e){return function t(){var r=e._readableState;h("pipeOnDrain",r.awaitDrain);if(r.awaitDrain)r.awaitDrain--;if(r.awaitDrain===0&&o(e,"data")){r.flowing=true;Y(e)}}}C.prototype.unpipe=function(e){var t=this._readableState;var r={hasUnpiped:false};if(t.pipesCount===0)return this;if(t.pipesCount===1){if(e&&e!==t.pipes)return this;if(!e)e=t.pipes;t.pipes=null;t.pipesCount=0;t.flowing=false;if(e)e.emit("unpipe",this,r);return this}if(!e){var n=t.pipes;var a=t.pipesCount;t.pipes=null;t.pipesCount=0;t.flowing=false;for(var i=0;i<a;i++){n[i].emit("unpipe",this,{hasUnpiped:false})}return this}var o=K(t.pipes,e);if(o===-1)return this;t.pipes.splice(o,1);t.pipesCount-=1;if(t.pipesCount===1)t.pipes=t.pipes[0];e.emit("unpipe",this,r);return this};C.prototype.on=function(e,t){var r=s.prototype.on.call(this,e,t);var a=this._readableState;if(e==="data"){a.readableListening=this.listenerCount("readable")>0;if(a.flowing!==false)this.resume()}else if(e==="readable"){if(!a.endEmitted&&!a.readableListening){a.readableListening=a.needReadable=true;a.flowing=false;a.emittedReadable=false;h("on readable",a.length,a.reading);if(a.length){B(this)}else if(!a.reading){n.nextTick(q,this)}}}return r};C.prototype.addListener=C.prototype.on;C.prototype.removeListener=function(e,t){var r=s.prototype.removeListener.call(this,e,t);if(e==="readable"){n.nextTick(H,this)}return r};C.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);if(e==="readable"||e===undefined){n.nextTick(H,this)}return t};function H(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0;if(t.resumeScheduled&&!t.paused){t.flowing=true}else if(e.listenerCount("data")>0){e.resume()}}function q(e){h("readable nexttick read 0");e.read(0)}C.prototype.resume=function(){var e=this._readableState;if(!e.flowing){h("resume");e.flowing=!e.readableListening;G(this,e)}e.paused=false;return this};function G(e,t){if(!t.resumeScheduled){t.resumeScheduled=true;n.nextTick(Z,e,t)}}function Z(e,t){h("resume",t.reading);if(!t.reading){e.read(0)}t.resumeScheduled=false;e.emit("resume");Y(e);if(t.flowing&&!t.reading)e.read(0)}C.prototype.pause=function(){h("call pause flowing=%j",this._readableState.flowing);if(this._readableState.flowing!==false){h("pause");this._readableState.flowing=false;this.emit("pause")}this._readableState.paused=true;return this};function Y(e){var t=e._readableState;h("flow",t.flowing);while(t.flowing&&e.read()!==null){}}C.prototype.wrap=function(e){var t=this;var r=this._readableState;var n=false;e.on("end",(function(){h("wrapped end");if(r.decoder&&!r.ended){var e=r.decoder.end();if(e&&e.length)t.push(e)}t.push(null)}));e.on("data",(function(a){h("wrapped data");if(r.decoder)a=r.decoder.write(a);if(r.objectMode&&(a===null||a===undefined))return;else if(!r.objectMode&&(!a||!a.length))return;var i=t.push(a);if(!i){n=true;e.pause()}}));for(var a in e){if(this[a]===undefined&&typeof e[a]==="function"){this[a]=function t(r){return function t(){return e[r].apply(e,arguments)}}(a)}}for(var i=0;i<S.length;i++){e.on(S[i],this.emit.bind(this,S[i]))}this._read=function(t){h("wrapped _read",t);if(n){n=false;e.resume()}};return this};if(typeof Symbol==="function"){C.prototype[Symbol.asyncIterator]=function(){if(k===undefined){k=r(68221)}return k(this)}}Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:false,get:function e(){return this._readableState.highWaterMark}});Object.defineProperty(C.prototype,"readableBuffer",{enumerable:false,get:function e(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(C.prototype,"readableFlowing",{enumerable:false,get:function e(){return this._readableState.flowing},set:function e(t){if(this._readableState){this._readableState.flowing=t}}});C._fromList=W;Object.defineProperty(C.prototype,"readableLength",{enumerable:false,get:function e(){return this._readableState.length}});function W(e,t){if(t.length===0)return null;var r;if(t.objectMode)r=t.buffer.shift();else if(!e||e>=t.length){if(t.decoder)r=t.buffer.join("");else if(t.buffer.length===1)r=t.buffer.first();else r=t.buffer.concat(t.length);t.buffer.clear()}else{r=t.buffer.consume(e,t.decoder)}return r}function X(e){var t=e._readableState;h("endReadable",t.endEmitted);if(!t.endEmitted){t.ended=true;n.nextTick(J,t,e)}}function J(e,t){h("endReadableNT",e.endEmitted,e.length);if(!e.endEmitted&&e.length===0){e.endEmitted=true;t.readable=false;t.emit("end");if(e.autoDestroy){var r=t._writableState;if(!r||r.autoDestroy&&r.finished){t.destroy()}}}}if(typeof Symbol==="function"){C.from=function(e,t){if(A===undefined){A=r(31748)}return A(C,e,t)}}function K(e,t){for(var r=0,n=e.length;r<n;r++){if(e[r]===t)return r}return-1}},74308:function(e,t,r){"use strict";e.exports=f;var n=r(74322).q,a=n.ERR_METHOD_NOT_IMPLEMENTED,i=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0;var l=r(37865);r(42018)(f,l);function u(e,t){var r=this._transformState;r.transforming=false;var n=r.writecb;if(n===null){return this.emit("error",new i)}r.writechunk=null;r.writecb=null;if(t!=null)this.push(t);n(e);var a=this._readableState;a.reading=false;if(a.needReadable||a.length<a.highWaterMark){this._read(a.highWaterMark)}}function f(e){if(!(this instanceof f))return new f(e);l.call(this,e);this._transformState={afterTransform:u.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(e){if(typeof e.transform==="function")this._transform=e.transform;if(typeof e.flush==="function")this._flush=e.flush}this.on("prefinish",c)}function c(){var e=this;if(typeof this._flush==="function"&&!this._readableState.destroyed){this._flush((function(t,r){v(e,t,r)}))}else{v(this,null,null)}}f.prototype.push=function(e,t){this._transformState.needTransform=false;return l.prototype.push.call(this,e,t)};f.prototype._transform=function(e,t,r){r(new a("_transform()"))};f.prototype._write=function(e,t,r){var n=this._transformState;n.writecb=r;n.writechunk=e;n.writeencoding=t;if(!n.transforming){var a=this._readableState;if(n.needTransform||a.needReadable||a.length<a.highWaterMark)this._read(a.highWaterMark)}};f.prototype._read=function(e){var t=this._transformState;if(t.writechunk!==null&&!t.transforming){t.transforming=true;this._transform(t.writechunk,t.writeencoding,t.afterTransform)}else{t.needTransform=true}};f.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))};function v(e,t,r){if(t)return e.emit("error",t);if(r!=null)e.push(r);if(e._writableState.length)throw new s;if(e._transformState.transforming)throw new o;return e.push(null)}},37493:function(e,t,r){"use strict";var n=r(90386);e.exports=L;function a(e,t,r){this.chunk=e;this.encoding=t;this.callback=r;this.next=null}function i(e){var t=this;this.next=null;this.entry=null;this.finish=function(){Z(t,e)}}var o;L.WritableState=S;var s={deprecate:r(20588)};var l=r(71405);var u=r(12856).Buffer;var f=r.g.Uint8Array||function(){};function c(e){return u.from(e)}function v(e){return u.isBuffer(e)||e instanceof f}var h=r(65756);var p=r(56306),d=p.getHighWaterMark;var g=r(74322).q,y=g.ERR_INVALID_ARG_TYPE,m=g.ERR_METHOD_NOT_IMPLEMENTED,x=g.ERR_MULTIPLE_CALLBACK,b=g.ERR_STREAM_CANNOT_PIPE,_=g.ERR_STREAM_DESTROYED,w=g.ERR_STREAM_NULL_VALUES,T=g.ERR_STREAM_WRITE_AFTER_END,k=g.ERR_UNKNOWN_ENCODING;var A=h.errorOrDestroy;r(42018)(L,l);function M(){}function S(e,t,n){o=o||r(37865);e=e||{};if(typeof n!=="boolean")n=t instanceof o;this.objectMode=!!e.objectMode;if(n)this.objectMode=this.objectMode||!!e.writableObjectMode;this.highWaterMark=d(this,e,"writableHighWaterMark",n);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var a=e.decodeStrings===false;this.decodeStrings=!a;this.defaultEncoding=e.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(e){F(t,e)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.emitClose=e.emitClose!==false;this.autoDestroy=!!e.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new i(this)}S.prototype.getBuffer=function e(){var t=this.bufferedRequest;var r=[];while(t){r.push(t);t=t.next}return r};(function(){try{Object.defineProperty(S.prototype,"buffer",{get:s.deprecate((function e(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}})();var E;if(typeof Symbol==="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==="function"){E=Function.prototype[Symbol.hasInstance];Object.defineProperty(L,Symbol.hasInstance,{value:function e(t){if(E.call(this,t))return true;if(this!==L)return false;return t&&t._writableState instanceof S}})}else{E=function e(t){return t instanceof this}}function L(e){o=o||r(37865);var t=this instanceof o;if(!t&&!E.call(L,this))return new L(e);this._writableState=new S(e,this,t);this.writable=true;if(e){if(typeof e.write==="function")this._write=e.write;if(typeof e.writev==="function")this._writev=e.writev;if(typeof e.destroy==="function")this._destroy=e.destroy;if(typeof e.final==="function")this._final=e.final}l.call(this)}L.prototype.pipe=function(){A(this,new b)};function C(e,t){var r=new T;A(e,r);n.nextTick(t,r)}function I(e,t,r,a){var i;if(r===null){i=new w}else if(typeof r!=="string"&&!t.objectMode){i=new y("chunk",["string","Buffer"],r)}if(i){A(e,i);n.nextTick(a,i);return false}return true}L.prototype.write=function(e,t,r){var n=this._writableState;var a=false;var i=!n.objectMode&&v(e);if(i&&!u.isBuffer(e)){e=c(e)}if(typeof t==="function"){r=t;t=null}if(i)t="buffer";else if(!t)t=n.defaultEncoding;if(typeof r!=="function")r=M;if(n.ending)C(this,r);else if(i||I(this,n,e,r)){n.pendingcb++;a=O(this,n,i,e,t,r)}return a};L.prototype.cork=function(){this._writableState.corked++};L.prototype.uncork=function(){var e=this._writableState;if(e.corked){e.corked--;if(!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest)j(this,e)}};L.prototype.setDefaultEncoding=function e(t){if(typeof t==="string")t=t.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new k(t);this._writableState.defaultEncoding=t;return this};Object.defineProperty(L.prototype,"writableBuffer",{enumerable:false,get:function e(){return this._writableState&&this._writableState.getBuffer()}});function P(e,t,r){if(!e.objectMode&&e.decodeStrings!==false&&typeof t==="string"){t=u.from(t,r)}return t}Object.defineProperty(L.prototype,"writableHighWaterMark",{enumerable:false,get:function e(){return this._writableState.highWaterMark}});function O(e,t,r,n,a,i){if(!r){var o=P(t,n,a);if(n!==o){r=true;a="buffer";n=o}}var s=t.objectMode?1:n.length;t.length+=s;var l=t.length<t.highWaterMark;if(!l)t.needDrain=true;if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:a,isBuf:r,callback:i,next:null};if(u){u.next=t.lastBufferedRequest}else{t.bufferedRequest=t.lastBufferedRequest}t.bufferedRequestCount+=1}else{D(e,t,false,s,n,a,i)}return l}function D(e,t,r,n,a,i,o){t.writelen=n;t.writecb=o;t.writing=true;t.sync=true;if(t.destroyed)t.onwrite(new _("write"));else if(r)e._writev(a,t.onwrite);else e._write(a,i,t.onwrite);t.sync=false}function z(e,t,r,a,i){--t.pendingcb;if(r){n.nextTick(i,a);n.nextTick(q,e,t);e._writableState.errorEmitted=true;A(e,a)}else{i(a);e._writableState.errorEmitted=true;A(e,a);q(e,t)}}function R(e){e.writing=false;e.writecb=null;e.length-=e.writelen;e.writelen=0}function F(e,t){var r=e._writableState;var a=r.sync;var i=r.writecb;if(typeof i!=="function")throw new x;R(r);if(t)z(e,r,a,t,i);else{var o=U(r)||e.destroyed;if(!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest){j(e,r)}if(a){n.nextTick(B,e,r,o,i)}else{B(e,r,o,i)}}}function B(e,t,r,n){if(!r)N(e,t);t.pendingcb--;n();q(e,t)}function N(e,t){if(t.length===0&&t.needDrain){t.needDrain=false;e.emit("drain")}}function j(e,t){t.bufferProcessing=true;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount;var a=new Array(n);var o=t.corkedRequestsFree;o.entry=r;var s=0;var l=true;while(r){a[s]=r;if(!r.isBuf)l=false;r=r.next;s+=1}a.allBuffers=l;D(e,t,true,t.length,a,"",o.finish);t.pendingcb++;t.lastBufferedRequest=null;if(o.next){t.corkedRequestsFree=o.next;o.next=null}else{t.corkedRequestsFree=new i(t)}t.bufferedRequestCount=0}else{while(r){var u=r.chunk;var f=r.encoding;var c=r.callback;var v=t.objectMode?1:u.length;D(e,t,false,v,u,f,c);r=r.next;t.bufferedRequestCount--;if(t.writing){break}}if(r===null)t.lastBufferedRequest=null}t.bufferedRequest=r;t.bufferProcessing=false}L.prototype._write=function(e,t,r){r(new m("_write()"))};L.prototype._writev=null;L.prototype.end=function(e,t,r){var n=this._writableState;if(typeof e==="function"){r=e;e=null;t=null}else if(typeof t==="function"){r=t;t=null}if(e!==null&&e!==undefined)this.write(e,t);if(n.corked){n.corked=1;this.uncork()}if(!n.ending)G(this,n,r);return this};Object.defineProperty(L.prototype,"writableLength",{enumerable:false,get:function e(){return this._writableState.length}});function U(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function V(e,t){e._final((function(r){t.pendingcb--;if(r){A(e,r)}t.prefinished=true;e.emit("prefinish");q(e,t)}))}function H(e,t){if(!t.prefinished&&!t.finalCalled){if(typeof e._final==="function"&&!t.destroyed){t.pendingcb++;t.finalCalled=true;n.nextTick(V,e,t)}else{t.prefinished=true;e.emit("prefinish")}}}function q(e,t){var r=U(t);if(r){H(e,t);if(t.pendingcb===0){t.finished=true;e.emit("finish");if(t.autoDestroy){var n=e._readableState;if(!n||n.autoDestroy&&n.endEmitted){e.destroy()}}}}return r}function G(e,t,r){t.ending=true;q(e,t);if(r){if(t.finished)n.nextTick(r);else e.once("finish",r)}t.ended=true;e.writable=false}function Z(e,t,r){var n=e.entry;e.entry=null;while(n){var a=n.callback;t.pendingcb--;a(r);n=n.next}t.corkedRequestsFree.next=e}Object.defineProperty(L.prototype,"destroyed",{enumerable:false,get:function e(){if(this._writableState===undefined){return false}return this._writableState.destroyed},set:function e(t){if(!this._writableState){return}this._writableState.destroyed=t}});L.prototype.destroy=h.destroy;L.prototype._undestroy=h.undestroy;L.prototype._destroy=function(e,t){t(e)}},68221:function(e,t,r){"use strict";var n=r(90386);var a;function i(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var o=r(12726);var s=Symbol("lastResolve");var l=Symbol("lastReject");var u=Symbol("error");var f=Symbol("ended");var c=Symbol("lastPromise");var v=Symbol("handlePromise");var h=Symbol("stream");function p(e,t){return{value:e,done:t}}function d(e){var t=e[s];if(t!==null){var r=e[h].read();if(r!==null){e[c]=null;e[s]=null;e[l]=null;t(p(r,false))}}}function g(e){n.nextTick(d,e)}function y(e,t){return function(r,n){e.then((function(){if(t[f]){r(p(undefined,true));return}t[v](r,n)}),n)}}var m=Object.getPrototypeOf((function(){}));var x=Object.setPrototypeOf((a={get stream(){return this[h]},next:function e(){var t=this;var r=this[u];if(r!==null){return Promise.reject(r)}if(this[f]){return Promise.resolve(p(undefined,true))}if(this[h].destroyed){return new Promise((function(e,r){n.nextTick((function(){if(t[u]){r(t[u])}else{e(p(undefined,true))}}))}))}var a=this[c];var i;if(a){i=new Promise(y(a,this))}else{var o=this[h].read();if(o!==null){return Promise.resolve(p(o,false))}i=new Promise(this[v])}this[c]=i;return i}},i(a,Symbol.asyncIterator,(function(){return this})),i(a,"return",(function e(){var t=this;return new Promise((function(e,r){t[h].destroy(null,(function(t){if(t){r(t);return}e(p(undefined,true))}))}))})),a),m);var b=function e(t){var r;var n=Object.create(x,(r={},i(r,h,{value:t,writable:true}),i(r,s,{value:null,writable:true}),i(r,l,{value:null,writable:true}),i(r,u,{value:null,writable:true}),i(r,f,{value:t._readableState.endEmitted,writable:true}),i(r,v,{value:function e(t,r){var a=n[h].read();if(a){n[c]=null;n[s]=null;n[l]=null;t(p(a,false))}else{n[s]=t;n[l]=r}},writable:true}),r));n[c]=null;o(t,(function(e){if(e&&e.code!=="ERR_STREAM_PREMATURE_CLOSE"){var t=n[l];if(t!==null){n[c]=null;n[s]=null;n[l]=null;t(e)}n[u]=e;return}var r=n[s];if(r!==null){n[c]=null;n[s]=null;n[l]=null;r(p(undefined,true))}n[f]=true}));t.on("readable",g.bind(null,n));return n};e.exports=b},31125:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);if(t)n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};if(t%2){n(Object(r),true).forEach((function(t){i(e,t,r[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(r))}else{n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}}return e}function i(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function l(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}var u=r(12856),f=u.Buffer;var c=r(69862),v=c.inspect;var h=v&&v.custom||"inspect";function p(e,t,r){f.prototype.copy.call(e,t,r)}e.exports=function(){function e(){o(this,e);this.head=null;this.tail=null;this.length=0}l(e,[{key:"push",value:function e(t){var r={data:t,next:null};if(this.length>0)this.tail.next=r;else this.head=r;this.tail=r;++this.length}},{key:"unshift",value:function e(t){var r={data:t,next:this.head};if(this.length===0)this.tail=r;this.head=r;++this.length}},{key:"shift",value:function e(){if(this.length===0)return;var t=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return t}},{key:"clear",value:function e(){this.head=this.tail=null;this.length=0}},{key:"join",value:function e(t){if(this.length===0)return"";var r=this.head;var n=""+r.data;while(r=r.next){n+=t+r.data}return n}},{key:"concat",value:function e(t){if(this.length===0)return f.alloc(0);var r=f.allocUnsafe(t>>>0);var n=this.head;var a=0;while(n){p(n.data,r,a);a+=n.data.length;n=n.next}return r}},{key:"consume",value:function e(t,r){var n;if(t<this.head.data.length){n=this.head.data.slice(0,t);this.head.data=this.head.data.slice(t)}else if(t===this.head.data.length){n=this.shift()}else{n=r?this._getString(t):this._getBuffer(t)}return n}},{key:"first",value:function e(){return this.head.data}},{key:"_getString",value:function e(t){var r=this.head;var n=1;var a=r.data;t-=a.length;while(r=r.next){var i=r.data;var o=t>i.length?i.length:t;if(o===i.length)a+=i;else a+=i.slice(0,t);t-=o;if(t===0){if(o===i.length){++n;if(r.next)this.head=r.next;else this.head=this.tail=null}else{this.head=r;r.data=i.slice(o)}break}++n}this.length-=n;return a}},{key:"_getBuffer",value:function e(t){var r=f.allocUnsafe(t);var n=this.head;var a=1;n.data.copy(r);t-=n.data.length;while(n=n.next){var i=n.data;var o=t>i.length?i.length:t;i.copy(r,r.length-t,0,o);t-=o;if(t===0){if(o===i.length){++a;if(n.next)this.head=n.next;else this.head=this.tail=null}else{this.head=n;n.data=i.slice(o)}break}++a}this.length-=a;return r}},{key:h,value:function e(t,r){return v(this,a({},r,{depth:0,customInspect:false}))}}]);return e}()},65756:function(e,t,r){"use strict";var n=r(90386);function a(e,t){var r=this;var a=this._readableState&&this._readableState.destroyed;var s=this._writableState&&this._writableState.destroyed;if(a||s){if(t){t(e)}else if(e){if(!this._writableState){n.nextTick(l,this,e)}else if(!this._writableState.errorEmitted){this._writableState.errorEmitted=true;n.nextTick(l,this,e)}}return this}if(this._readableState){this._readableState.destroyed=true}if(this._writableState){this._writableState.destroyed=true}this._destroy(e||null,(function(e){if(!t&&e){if(!r._writableState){n.nextTick(i,r,e)}else if(!r._writableState.errorEmitted){r._writableState.errorEmitted=true;n.nextTick(i,r,e)}else{n.nextTick(o,r)}}else if(t){n.nextTick(o,r);t(e)}else{n.nextTick(o,r)}}));return this}function i(e,t){l(e,t);o(e)}function o(e){if(e._writableState&&!e._writableState.emitClose)return;if(e._readableState&&!e._readableState.emitClose)return;e.emit("close")}function s(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finalCalled=false;this._writableState.prefinished=false;this._writableState.finished=false;this._writableState.errorEmitted=false}}function l(e,t){e.emit("error",t)}function u(e,t){var r=e._readableState;var n=e._writableState;if(r&&r.autoDestroy||n&&n.autoDestroy)e.destroy(t);else e.emit("error",t)}e.exports={destroy:a,undestroy:s,errorOrDestroy:u}},12726:function(e,t,r){"use strict";var n=r(74322).q.ERR_STREAM_PREMATURE_CLOSE;function a(e){var t=false;return function(){if(t)return;t=true;for(var r=arguments.length,n=new Array(r),a=0;a<r;a++){n[a]=arguments[a]}e.apply(this,n)}}function i(){}function o(e){return e.setHeader&&typeof e.abort==="function"}function s(e,t,r){if(typeof t==="function")return s(e,null,t);if(!t)t={};r=a(r||i);var l=t.readable||t.readable!==false&&e.readable;var u=t.writable||t.writable!==false&&e.writable;var f=function t(){if(!e.writable)v()};var c=e._writableState&&e._writableState.finished;var v=function t(){u=false;c=true;if(!l)r.call(e)};var h=e._readableState&&e._readableState.endEmitted;var p=function t(){l=false;h=true;if(!u)r.call(e)};var d=function t(n){r.call(e,n)};var g=function t(){var a;if(l&&!h){if(!e._readableState||!e._readableState.ended)a=new n;return r.call(e,a)}if(u&&!c){if(!e._writableState||!e._writableState.ended)a=new n;return r.call(e,a)}};var y=function t(){e.req.on("finish",v)};if(o(e)){e.on("complete",v);e.on("abort",g);if(e.req)y();else e.on("request",y)}else if(u&&!e._writableState){e.on("end",f);e.on("close",f)}e.on("end",p);e.on("finish",v);if(t.error!==false)e.on("error",d);e.on("close",g);return function(){e.removeListener("complete",v);e.removeListener("abort",g);e.removeListener("request",y);if(e.req)e.req.removeListener("finish",v);e.removeListener("end",f);e.removeListener("close",f);e.removeListener("finish",v);e.removeListener("end",p);e.removeListener("error",d);e.removeListener("close",g)}}e.exports=s},31748:function(e){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},10168:function(e,t,r){"use strict";var n;function a(e){var t=false;return function(){if(t)return;t=true;e.apply(void 0,arguments)}}var i=r(74322).q,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function l(e){if(e)throw e}function u(e){return e.setHeader&&typeof e.abort==="function"}function f(e,t,i,o){o=a(o);var l=false;e.on("close",(function(){l=true}));if(n===undefined)n=r(12726);n(e,{readable:t,writable:i},(function(e){if(e)return o(e);l=true;o()}));var f=false;return function(t){if(l)return;if(f)return;f=true;if(u(e))return e.abort();if(typeof e.destroy==="function")return e.destroy();o(t||new s("pipe"))}}function c(e){e()}function v(e,t){return e.pipe(t)}function h(e){if(!e.length)return l;if(typeof e[e.length-1]!=="function")return l;return e.pop()}function p(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n=h(t);if(Array.isArray(t[0]))t=t[0];if(t.length<2){throw new o("streams")}var a;var i=t.map((function(e,r){var o=r<t.length-1;var s=r>0;return f(e,o,s,(function(e){if(!a)a=e;if(e)i.forEach(c);if(o)return;i.forEach(c);n(a)}))}));return t.reduce(v)}e.exports=p},56306:function(e,t,r){"use strict";var n=r(74322).q.ERR_INVALID_OPT_VALUE;function a(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function i(e,t,r,i){var o=a(t,i,r);if(o!=null){if(!(isFinite(o)&&Math.floor(o)===o)||o<0){var s=i?r:"highWaterMark";throw new n(s,o)}return Math.floor(o)}return e.objectMode?16:16*1024}e.exports={getHighWaterMark:i}},71405:function(e,t,r){e.exports=r(15398).EventEmitter},68019:function(e,t,r){"use strict";var n=r(71665).Buffer;var a=n.isEncoding||function(e){e=""+e;switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function i(e){if(!e)return"utf8";var t;while(true){switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase();t=true}}}function o(e){var t=i(e);if(typeof t!=="string"&&(n.isEncoding===a||!a(e)))throw new Error("Unknown encoding: "+e);return t||e}t.s=s;function s(e){this.encoding=o(e);var t;switch(this.encoding){case"utf16le":this.text=p;this.end=d;t=4;break;case"utf8":this.fillLast=c;t=4;break;case"base64":this.text=g;this.end=y;t=3;break;default:this.write=m;this.end=x;return}this.lastNeed=0;this.lastTotal=0;this.lastChar=n.allocUnsafe(t)}s.prototype.write=function(e){if(e.length===0)return"";var t;var r;if(this.lastNeed){t=this.fillLast(e);if(t===undefined)return"";r=this.lastNeed;this.lastNeed=0}else{r=0}if(r<e.length)return t?t+this.text(e,r):this.text(e,r);return t||""};s.prototype.end=h;s.prototype.text=v;s.prototype.fillLast=function(e){if(this.lastNeed<=e.length){e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length);this.lastNeed-=e.length};function l(e){if(e<=127)return 0;else if(e>>5===6)return 2;else if(e>>4===14)return 3;else if(e>>3===30)return 4;return e>>6===2?-1:-2}function u(e,t,r){var n=t.length-1;if(n<r)return 0;var a=l(t[n]);if(a>=0){if(a>0)e.lastNeed=a-1;return a}if(--n<r||a===-2)return 0;a=l(t[n]);if(a>=0){if(a>0)e.lastNeed=a-2;return a}if(--n<r||a===-2)return 0;a=l(t[n]);if(a>=0){if(a>0){if(a===2)a=0;else e.lastNeed=a-3}return a}return 0}function f(e,t,r){if((t[0]&192)!==128){e.lastNeed=0;return""}if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128){e.lastNeed=1;return""}if(e.lastNeed>2&&t.length>2){if((t[2]&192)!==128){e.lastNeed=2;return""}}}}function c(e){var t=this.lastTotal-this.lastNeed;var r=f(this,e,t);if(r!==undefined)return r;if(this.lastNeed<=e.length){e.copy(this.lastChar,t,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}e.copy(this.lastChar,t,0,e.length);this.lastNeed-=e.length}function v(e,t){var r=u(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);e.copy(this.lastChar,0,n);return e.toString("utf8",t,n)}function h(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed)return t+"";return t}function p(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=e[e.length-2];this.lastChar[1]=e[e.length-1];return r.slice(0,-1)}}return r}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=e[e.length-1];return e.toString("utf16le",t,e.length-1)}function d(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function g(e,t){var r=(e.length-t)%3;if(r===0)return e.toString("base64",t);this.lastNeed=3-r;this.lastTotal=3;if(r===1){this.lastChar[0]=e[e.length-1]}else{this.lastChar[0]=e[e.length-2];this.lastChar[1]=e[e.length-1]}return e.toString("base64",t,e.length-r)}function y(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed)return t+this.lastChar.toString("base64",0,3-this.lastNeed);return t}function m(e){return e.toString(this.encoding)}function x(e){return e&&e.length?this.write(e):""}},90715:function(e,t,r){var n=r(32791);var a=r(41633)("stream-parser");e.exports=u;var i=-1;var o=0;var s=1;var l=2;function u(e){var t=e&&"function"==typeof e._transform;var r=e&&"function"==typeof e._write;if(!t&&!r)throw new Error("must pass a Writable or Transform stream in");a("extending Parser into stream");e._bytes=c;e._skipBytes=v;if(t)e._passthrough=h;if(t){e._transform=d}else{e._write=p}}function f(e){a("initializing parser stream");e._parserBytesLeft=0;e._parserBuffers=[];e._parserBuffered=0;e._parserState=i;e._parserCallback=null;if("function"==typeof e.push){e._parserOutput=e.push.bind(e)}e._parserInit=true}function c(e,t){n(!this._parserCallback,'there is already a "callback" set!');n(isFinite(e)&&e>0,'can only buffer a finite number of bytes > 0, got "'+e+'"');if(!this._parserInit)f(this);a("buffering %o bytes",e);this._parserBytesLeft=e;this._parserCallback=t;this._parserState=o}function v(e,t){n(!this._parserCallback,'there is already a "callback" set!');n(e>0,'can only skip > 0 bytes, got "'+e+'"');if(!this._parserInit)f(this);a("skipping %o bytes",e);this._parserBytesLeft=e;this._parserCallback=t;this._parserState=s}function h(e,t){n(!this._parserCallback,'There is already a "callback" set!');n(e>0,'can only pass through > 0 bytes, got "'+e+'"');if(!this._parserInit)f(this);a("passing through %o bytes",e);this._parserBytesLeft=e;this._parserCallback=t;this._parserState=l}function p(e,t,r){if(!this._parserInit)f(this);a("write(%o bytes)",e.length);if("function"==typeof t)r=t;m(this,e,null,r)}function d(e,t,r){if(!this._parserInit)f(this);a("transform(%o bytes)",e.length);if("function"!=typeof t){t=this._parserOutput}m(this,e,t,r)}function g(e,t,r,n){if(e._parserBytesLeft<=0){return n(new Error("got data but not currently parsing anything"))}if(t.length<=e._parserBytesLeft){return function(){return y(e,t,r,n)}}else{return function(){var a=t.slice(0,e._parserBytesLeft);return y(e,a,r,(function(i){if(i)return n(i);if(t.length>a.length){return function(){return g(e,t.slice(a.length),r,n)}}}))}}}function y(e,t,r,n){e._parserBytesLeft-=t.length;a("%o bytes left for stream piece",e._parserBytesLeft);if(e._parserState===o){e._parserBuffers.push(t);e._parserBuffered+=t.length}else if(e._parserState===l){r(t)}if(0===e._parserBytesLeft){var s=e._parserCallback;if(s&&e._parserState===o&&e._parserBuffers.length>1){t=Buffer.concat(e._parserBuffers,e._parserBuffered)}if(e._parserState!==o){t=null}e._parserCallback=null;e._parserBuffered=0;e._parserState=i;e._parserBuffers.splice(0);if(s){var u=[];if(t){u.push(t)}else{}if(r){u.push(r)}var f=s.length>u.length;if(f){u.push(x(n))}var c=s.apply(e,u);if(!f||n===c)return n}}else{return n}}var m=x(g);function x(e){return function(){var t=e.apply(this,arguments);while("function"==typeof t){t=t()}return t}}},41633:function(e,t,r){var n=r(90386);t=e.exports=r(74469);t.log=o;t.formatArgs=i;t.save=s;t.load=l;t.useColors=a;t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u();t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function a(){if(typeof window!=="undefined"&&window.process&&window.process.type==="renderer"){return true}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}};function i(e){var r=this.useColors;e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff);if(!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var a=0;var i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){if("%%"===e)return;a++;if("%c"===e){i=a}}));e.splice(i,0,n)}function o(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{if(null==e){t.storage.removeItem("debug")}else{t.storage.debug=e}}catch(r){}}function l(){var e;try{e=t.storage.debug}catch(r){}if(!e&&typeof n!=="undefined"&&"env"in n){e=n.env.DEBUG}return e}t.enable(l());function u(){try{return window.localStorage}catch(e){}}},74469:function(e,t,r){t=e.exports=i.debug=i["default"]=i;t.coerce=u;t.disable=s;t.enable=o;t.enabled=l;t.humanize=r(11375);t.names=[];t.skips=[];t.formatters={};var n;function a(e){var r=0,n;for(n in e){r=(r<<5)-r+e.charCodeAt(n);r|=0}return t.colors[Math.abs(r)%t.colors.length]}function i(e){function r(){if(!r.enabled)return;var e=r;var a=+new Date;var i=a-(n||a);e.diff=i;e.prev=n;e.curr=a;n=a;var o=new Array(arguments.length);for(var s=0;s<o.length;s++){o[s]=arguments[s]}o[0]=t.coerce(o[0]);if("string"!==typeof o[0]){o.unshift("%O")}var l=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(r,n){if(r==="%%")return r;l++;var a=t.formatters[n];if("function"===typeof a){var i=o[l];r=a.call(e,i);o.splice(l,1);l--}return r}));t.formatArgs.call(e,o);var u=r.log||t.log||console.log.bind(console);u.apply(e,o)}r.namespace=e;r.enabled=t.enabled(e);r.useColors=t.useColors();r.color=a(e);if("function"===typeof t.init){t.init(r)}return r}function o(e){t.save(e);t.names=[];t.skips=[];var r=(typeof e==="string"?e:"").split(/[\s,]+/);var n=r.length;for(var a=0;a<n;a++){if(!r[a])continue;e=r[a].replace(/\*/g,".*?");if(e[0]==="-"){t.skips.push(new RegExp("^"+e.substr(1)+"$"))}else{t.names.push(new RegExp("^"+e+"$"))}}}function s(){t.enable("")}function l(e){var r,n;for(r=0,n=t.skips.length;r<n;r++){if(t.skips[r].test(e)){return false}}for(r=0,n=t.names.length;r<n;r++){if(t.names[r].test(e)){return true}}return false}function u(e){if(e instanceof Error)return e.stack||e.message;return e}},11375:function(e){var t=1e3;var r=t*60;var n=r*60;var a=n*24;var i=a*365.25;e.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0){return o(e)}else if(r==="number"&&isNaN(e)===false){return t.long?l(e):s(e)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function o(e){e=String(e);if(e.length>100){return}var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!o){return}var s=parseFloat(o[1]);var l=(o[2]||"ms").toLowerCase();switch(l){case"years":case"year":case"yrs":case"yr":case"y":return s*i;case"days":case"day":case"d":return s*a;case"hours":case"hour":case"hrs":case"hr":case"h":return s*n;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return undefined}}function s(e){if(e>=a){return Math.round(e/a)+"d"}if(e>=n){return Math.round(e/n)+"h"}if(e>=r){return Math.round(e/r)+"m"}if(e>=t){return Math.round(e/t)+"s"}return e+"ms"}function l(e){return u(e,a,"day")||u(e,n,"hour")||u(e,r,"minute")||u(e,t,"second")||e+" ms"}function u(e,t,r){if(e<t){return}if(e<t*1.5){return Math.floor(e/t)+" "+r}return Math.ceil(e/t)+" "+r+"s"}},99011:function(e,t,r){"use strict";var n=r(88641);e.exports=function e(t,r,a){if(t==null)throw Error("First argument should be a string");if(r==null)throw Error("Separator should be a string or a RegExp");if(!a)a={};else if(typeof a==="string"||Array.isArray(a)){a={ignore:a}}if(a.escape==null)a.escape=true;if(a.ignore==null)a.ignore=["[]","()","{}","<>",'""',"''","``","",""];else{if(typeof a.ignore==="string"){a.ignore=[a.ignore]}a.ignore=a.ignore.map((function(e){if(e.length===1)e=e+e;return e}))}var i=n.parse(t,{flat:true,brackets:a.ignore});var o=i[0];var s=o.split(r);if(a.escape){var l=[];for(var u=0;u<s.length;u++){var f=s[u];var c=s[u+1];if(f[f.length-1]==="\\"&&f[f.length-2]!=="\\"){l.push(f+r+c);u++}else{l.push(f)}}s=l}for(var u=0;u<s.length;u++){i[0]=s[u];s[u]=n.stringify(i,{flat:true})}return s}},68664:function(e){"use strict";e.exports=t;function t(e){var t=e.length;var r=new Array(t);var n=new Array(t);var a=new Array(t);var i=new Array(t);var o=new Array(t);var s=new Array(t);for(var l=0;l<t;++l){r[l]=-1;n[l]=0;a[l]=false;i[l]=0;o[l]=-1;s[l]=[]}var u=0;var f=[];var c=[];function v(t){var l=[t],v=[t];r[t]=n[t]=u;a[t]=true;u+=1;while(v.length>0){t=v[v.length-1];var h=e[t];if(i[t]<h.length){for(var p=i[t];p<h.length;++p){var d=h[p];if(r[d]<0){r[d]=n[d]=u;a[d]=true;u+=1;l.push(d);v.push(d);break}else if(a[d]){n[t]=Math.min(n[t],n[d])|0}if(o[d]>=0){s[t].push(o[d])}}i[t]=p}else{if(n[t]===r[t]){var g=[];var y=[],m=0;for(var p=l.length-1;p>=0;--p){var x=l[p];a[x]=false;g.push(x);y.push(s[x]);m+=s[x].length;o[x]=f.length;if(x===t){l.length=p;break}}f.push(g);var b=new Array(m);for(var p=0;p<y.length;p++){for(var _=0;_<y[p].length;_++){b[--m]=y[p][_]}}c.push(b)}v.pop()}}}for(var l=0;l<t;++l){if(r[l]<0){v(l)}}var h;for(var l=0;l<c.length;l++){var p=c[l];if(p.length===0)continue;p.sort((function(e,t){return e-t}));h=[p[0]];for(var d=1;d<p.length;d++){if(p[d]!==p[d-1]){h.push(p[d])}}c[l]=h}return{components:f,adjacencyList:c}}},7095:function(e,t,r){"use strict";r.r(t);var n=function(){function e(e,t){var r=[];var n=true;var a=false;var i=undefined;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){r.push(s.value);if(t&&r.length===t)break}}catch(l){a=true;i=l}finally{try{if(!n&&o["return"])o["return"]()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var a=Math.PI*2;var i=function e(t,r,n,a,i,o,s){var l=t.x,u=t.y;l*=r;u*=n;var f=a*l-i*u;var c=i*l+a*u;return{x:f+o,y:c+s}};var o=function e(t,r){var n=r===1.5707963267948966?.551915024494:r===-1.5707963267948966?-.551915024494:4/3*Math.tan(r/4);var a=Math.cos(t);var i=Math.sin(t);var o=Math.cos(t+r);var s=Math.sin(t+r);return[{x:a-i*n,y:i+a*n},{x:o+s*n,y:s-o*n},{x:o,y:s}]};var s=function e(t,r,n,a){var i=t*a-r*n<0?-1:1;var o=t*n+r*a;if(o>1){o=1}if(o<-1){o=-1}return i*Math.acos(o)};var l=function e(t,r,n,i,o,l,u,f,c,v,h,p){var d=Math.pow(o,2);var g=Math.pow(l,2);var y=Math.pow(h,2);var m=Math.pow(p,2);var x=d*g-d*m-g*y;if(x<0){x=0}x/=d*m+g*y;x=Math.sqrt(x)*(u===f?-1:1);var b=x*o/l*p;var _=x*-l/o*h;var w=v*b-c*_+(t+n)/2;var T=c*b+v*_+(r+i)/2;var k=(h-b)/o;var A=(p-_)/l;var M=(-h-b)/o;var S=(-p-_)/l;var E=s(1,0,k,A);var L=s(k,A,M,S);if(f===0&&L>0){L-=a}if(f===1&&L<0){L+=a}return[w,T,E,L]};var u=function e(t){var r=t.px,s=t.py,u=t.cx,f=t.cy,c=t.rx,v=t.ry,h=t.xAxisRotation,p=h===undefined?0:h,d=t.largeArcFlag,g=d===undefined?0:d,y=t.sweepFlag,m=y===undefined?0:y;var x=[];if(c===0||v===0){return[]}var b=Math.sin(p*a/360);var _=Math.cos(p*a/360);var w=_*(r-u)/2+b*(s-f)/2;var T=-b*(r-u)/2+_*(s-f)/2;if(w===0&&T===0){return[]}c=Math.abs(c);v=Math.abs(v);var k=Math.pow(w,2)/Math.pow(c,2)+Math.pow(T,2)/Math.pow(v,2);if(k>1){c*=Math.sqrt(k);v*=Math.sqrt(k)}var A=l(r,s,u,f,c,v,g,m,b,_,w,T),M=n(A,4),S=M[0],E=M[1],L=M[2],C=M[3];var I=Math.abs(C)/(a/4);if(Math.abs(1-I)<1e-7){I=1}var P=Math.max(Math.ceil(I),1);C/=P;for(var O=0;O<P;O++){x.push(o(L,C));L+=C}return x.map((function(e){var t=i(e[0],c,v,_,b,S,E),r=t.x,n=t.y;var a=i(e[1],c,v,_,b,S,E),o=a.x,s=a.y;var l=i(e[2],c,v,_,b,S,E),u=l.x,f=l.y;return{x1:r,y1:n,x2:o,y2:s,x:u,y:f}}))};t["default"]=u},1750:function(e,t,r){"use strict";var n=r(95616);var a=r(65185);var i=r(29988);var o=r(89546);var s=r(32791);e.exports=l;function l(e){if(Array.isArray(e)&&e.length===1&&typeof e[0]==="string")e=e[0];if(typeof e==="string"){s(o(e),"String is not an SVG path.");e=n(e)}s(Array.isArray(e),"Argument should be a string or an array of path segments.");e=a(e);e=i(e);if(!e.length)return[0,0,0,0];var t=[Infinity,Infinity,-Infinity,-Infinity];for(var r=0,l=e.length;r<l;r++){var u=e[r].slice(1);for(var f=0;f<u.length;f+=2){if(u[f+0]<t[0])t[0]=u[f+0];if(u[f+1]<t[1])t[1]=u[f+1];if(u[f+0]>t[2])t[2]=u[f+0];if(u[f+1]>t[3])t[3]=u[f+1]}}return t}},29988:function(e,t,r){"use strict";e.exports=a;var n=r(7095);function a(e){var t;var r=[];var a=0;var s=0;var l=0;var u=0;var f=null;var c=null;var v=0;var h=0;for(var p=0,d=e.length;p<d;p++){var g=e[p];var y=g[0];switch(y){case"M":l=g[1];u=g[2];break;case"A":var m=n({px:v,py:h,cx:g[6],cy:g[7],rx:g[1],ry:g[2],xAxisRotation:g[3],largeArcFlag:g[4],sweepFlag:g[5]});if(!m.length)continue;for(var x=0,b;x<m.length;x++){b=m[x];g=["C",b.x1,b.y1,b.x2,b.y2,b.x,b.y];if(x<m.length-1)r.push(g)}break;case"S":var _=v;var w=h;if(t=="C"||t=="S"){_+=_-a;w+=w-s}g=["C",_,w,g[1],g[2],g[3],g[4]];break;case"T":if(t=="Q"||t=="T"){f=v*2-f;c=h*2-c}else{f=v;c=h}g=o(v,h,f,c,g[1],g[2]);break;case"Q":f=g[1];c=g[2];g=o(v,h,g[1],g[2],g[3],g[4]);break;case"L":g=i(v,h,g[1],g[2]);break;case"H":g=i(v,h,g[1],h);break;case"V":g=i(v,h,v,g[1]);break;case"Z":g=i(v,h,l,u);break}t=y;v=g[g.length-2];h=g[g.length-1];if(g.length>4){a=g[g.length-4];s=g[g.length-3]}else{a=v;s=h}r.push(g)}return r}function i(e,t,r,n){return["C",e,t,r,n,r,n]}function o(e,t,r,n,a,i){return["C",e/3+2/3*r,t/3+2/3*n,a/3+2/3*r,i/3+2/3*n,a,i]}},82019:function(e,t,r){"use strict";var n=r(1750);var a=r(95616);var i=r(31457);var o=r(89546);var s=r(44781);var l=document.createElement("canvas");var u=l.getContext("2d");e.exports=f;function f(e,t){if(!o(e))throw Error("Argument should be valid svg path string");if(!t)t={};var r,f;if(t.shape){r=t.shape[0];f=t.shape[1]}else{r=l.width=t.w||t.width||200;f=l.height=t.h||t.height||200}var c=Math.min(r,f);var h=t.stroke||0;var p=t.viewbox||t.viewBox||n(e);var d=[r/(p[2]-p[0]),f/(p[3]-p[1])];var g=Math.min(d[0]||0,d[1]||0)/2;u.fillStyle="black";u.fillRect(0,0,r,f);u.fillStyle="white";if(h){if(typeof h!="number")h=1;if(h>0){u.strokeStyle="white"}else{u.strokeStyle="black"}u.lineWidth=Math.abs(h)}u.translate(r*.5,f*.5);u.scale(g,g);if(v()){var y=new Path2D(e);u.fill(y);h&&u.stroke(y)}else{var m=a(e);i(u,m);u.fill();h&&u.stroke()}u.setTransform(1,0,0,1,0,0);var x=s(u,{cutoff:t.cutoff!=null?t.cutoff:.5,radius:t.radius!=null?t.radius:c*.5});return x}var c;function v(){if(c!=null)return c;var e=document.createElement("canvas").getContext("2d");e.canvas.width=e.canvas.height=1;if(!window.Path2D)return c=false;var t=new Path2D("M0,0h1v1h-1v-1Z");e.fillStyle="black";e.fill(t);var r=e.getImageData(0,0,1,1);return c=r&&r.data&&r.data[3]===255}},84267:function(e,t,r){var n;(function(a){var i=/^\s+/,o=/\s+$/,s=0,l=a.round,u=a.min,f=a.max,c=a.random;function v(e,t){e=e?e:"";t=t||{};if(e instanceof v){return e}if(!(this instanceof v)){return new v(e,t)}var r=h(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=l(100*this._a)/100,this._format=t.format||r.format;this._gradientType=t.gradientType;if(this._r<1){this._r=l(this._r)}if(this._g<1){this._g=l(this._g)}if(this._b<1){this._b=l(this._b)}this._ok=r.ok;this._tc_id=s++}v.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb();var t,r,n,i,o,s;t=e.r/255;r=e.g/255;n=e.b/255;if(t<=.03928){i=t/12.92}else{i=a.pow((t+.055)/1.055,2.4)}if(r<=.03928){o=r/12.92}else{o=a.pow((r+.055)/1.055,2.4)}if(n<=.03928){s=n/12.92}else{s=a.pow((n+.055)/1.055,2.4)}return.2126*i+.7152*o+.0722*s},setAlpha:function(e){this._a=B(e);this._roundA=l(100*this._a)/100;return this},toHsv:function(){var e=y(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=y(this._r,this._g,this._b);var t=l(e.h*360),r=l(e.s*100),n=l(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+n+"%)":"hsva("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=d(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=d(this._r,this._g,this._b);var t=l(e.h*360),r=l(e.s*100),n=l(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+n+"%)":"hsla("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return x(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return b(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(N(this._r,255)*100)+"%",g:l(N(this._g,255)*100)+"%",b:l(N(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+l(N(this._r,255)*100)+"%, "+l(N(this._g,255)*100)+"%, "+l(N(this._b,255)*100)+"%)":"rgba("+l(N(this._r,255)*100)+"%, "+l(N(this._g,255)*100)+"%, "+l(N(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){if(this._a===0){return"transparent"}if(this._a<1){return false}return R[x(this._r,this._g,this._b,true)]||false},toFilter:function(e){var t="#"+_(this._r,this._g,this._b,this._a);var r=t;var n=this._gradientType?"GradientType = 1, ":"";if(e){var a=v(e);r="#"+_(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=false;var n=this._a<1&&this._a>=0;var a=!t&&n&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");if(a){if(e==="name"&&this._a===0){return this.toName()}return this.toRgbString()}if(e==="rgb"){r=this.toRgbString()}if(e==="prgb"){r=this.toPercentageRgbString()}if(e==="hex"||e==="hex6"){r=this.toHexString()}if(e==="hex3"){r=this.toHexString(true)}if(e==="hex4"){r=this.toHex8String(true)}if(e==="hex8"){r=this.toHex8String()}if(e==="name"){r=this.toName()}if(e==="hsl"){r=this.toHslString()}if(e==="hsv"){r=this.toHsvString()}return r||this.toHexString()},clone:function(){return v(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));this._r=r._r;this._g=r._g;this._b=r._b;this.setAlpha(r._a);return this},lighten:function(){return this._applyModification(A,arguments)},brighten:function(){return this._applyModification(M,arguments)},darken:function(){return this._applyModification(S,arguments)},desaturate:function(){return this._applyModification(w,arguments)},saturate:function(){return this._applyModification(T,arguments)},greyscale:function(){return this._applyModification(k,arguments)},spin:function(){return this._applyModification(E,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(O,arguments)},complement:function(){return this._applyCombination(L,arguments)},monochromatic:function(){return this._applyCombination(D,arguments)},splitcomplement:function(){return this._applyCombination(P,arguments)},triad:function(){return this._applyCombination(C,arguments)},tetrad:function(){return this._applyCombination(I,arguments)}};v.fromRatio=function(e,t){if(typeof e=="object"){var r={};for(var n in e){if(e.hasOwnProperty(n)){if(n==="a"){r[n]=e[n]}else{r[n]=G(e[n])}}}e=r}return v(e,t)};function h(e){var t={r:0,g:0,b:0};var r=1;var n=null;var a=null;var i=null;var o=false;var s=false;if(typeof e=="string"){e=J(e)}if(typeof e=="object"){if(X(e.r)&&X(e.g)&&X(e.b)){t=p(e.r,e.g,e.b);o=true;s=String(e.r).substr(-1)==="%"?"prgb":"rgb"}else if(X(e.h)&&X(e.s)&&X(e.v)){n=G(e.s);a=G(e.v);t=m(e.h,n,a);o=true;s="hsv"}else if(X(e.h)&&X(e.s)&&X(e.l)){n=G(e.s);i=G(e.l);t=g(e.h,n,i);o=true;s="hsl"}if(e.hasOwnProperty("a")){r=e.a}}r=B(r);return{ok:o,format:e.format||s,r:u(255,f(t.r,0)),g:u(255,f(t.g,0)),b:u(255,f(t.b,0)),a:r}}function p(e,t,r){return{r:N(e,255)*255,g:N(t,255)*255,b:N(r,255)*255}}function d(e,t,r){e=N(e,255);t=N(t,255);r=N(r,255);var n=f(e,t,r),a=u(e,t,r);var i,o,s=(n+a)/2;if(n==a){i=o=0}else{var l=n-a;o=s>.5?l/(2-n-a):l/(n+a);switch(n){case e:i=(t-r)/l+(t<r?6:0);break;case t:i=(r-e)/l+2;break;case r:i=(e-t)/l+4;break}i/=6}return{h:i,s:o,l:s}}function g(e,t,r){var n,a,i;e=N(e,360);t=N(t,100);r=N(r,100);function o(e,t,r){if(r<0)r+=1;if(r>1)r-=1;if(r<1/6)return e+(t-e)*6*r;if(r<1/2)return t;if(r<2/3)return e+(t-e)*(2/3-r)*6;return e}if(t===0){n=a=i=r}else{var s=r<.5?r*(1+t):r+t-r*t;var l=2*r-s;n=o(l,s,e+1/3);a=o(l,s,e);i=o(l,s,e-1/3)}return{r:n*255,g:a*255,b:i*255}}function y(e,t,r){e=N(e,255);t=N(t,255);r=N(r,255);var n=f(e,t,r),a=u(e,t,r);var i,o,s=n;var l=n-a;o=n===0?0:l/n;if(n==a){i=0}else{switch(n){case e:i=(t-r)/l+(t<r?6:0);break;case t:i=(r-e)/l+2;break;case r:i=(e-t)/l+4;break}i/=6}return{h:i,s:o,v:s}}function m(e,t,r){e=N(e,360)*6;t=N(t,100);r=N(r,100);var n=a.floor(e),i=e-n,o=r*(1-t),s=r*(1-i*t),l=r*(1-(1-i)*t),u=n%6,f=[r,s,o,o,l,r][u],c=[l,r,r,s,o,o][u],v=[o,o,l,r,r,s][u];return{r:f*255,g:c*255,b:v*255}}function x(e,t,r,n){var a=[q(l(e).toString(16)),q(l(t).toString(16)),q(l(r).toString(16))];if(n&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)){return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)}return a.join("")}function b(e,t,r,n,a){var i=[q(l(e).toString(16)),q(l(t).toString(16)),q(l(r).toString(16)),q(Z(n))];if(a&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)){return i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0)}return i.join("")}function _(e,t,r,n){var a=[q(Z(n)),q(l(e).toString(16)),q(l(t).toString(16)),q(l(r).toString(16))];return a.join("")}v.equals=function(e,t){if(!e||!t){return false}return v(e).toRgbString()==v(t).toRgbString()};v.random=function(){return v.fromRatio({r:c(),g:c(),b:c()})};function w(e,t){t=t===0?0:t||10;var r=v(e).toHsl();r.s-=t/100;r.s=j(r.s);return v(r)}function T(e,t){t=t===0?0:t||10;var r=v(e).toHsl();r.s+=t/100;r.s=j(r.s);return v(r)}function k(e){return v(e).desaturate(100)}function A(e,t){t=t===0?0:t||10;var r=v(e).toHsl();r.l+=t/100;r.l=j(r.l);return v(r)}function M(e,t){t=t===0?0:t||10;var r=v(e).toRgb();r.r=f(0,u(255,r.r-l(255*-(t/100))));r.g=f(0,u(255,r.g-l(255*-(t/100))));r.b=f(0,u(255,r.b-l(255*-(t/100))));return v(r)}function S(e,t){t=t===0?0:t||10;var r=v(e).toHsl();r.l-=t/100;r.l=j(r.l);return v(r)}function E(e,t){var r=v(e).toHsl();var n=(r.h+t)%360;r.h=n<0?360+n:n;return v(r)}function L(e){var t=v(e).toHsl();t.h=(t.h+180)%360;return v(t)}function C(e){var t=v(e).toHsl();var r=t.h;return[v(e),v({h:(r+120)%360,s:t.s,l:t.l}),v({h:(r+240)%360,s:t.s,l:t.l})]}function I(e){var t=v(e).toHsl();var r=t.h;return[v(e),v({h:(r+90)%360,s:t.s,l:t.l}),v({h:(r+180)%360,s:t.s,l:t.l}),v({h:(r+270)%360,s:t.s,l:t.l})]}function P(e){var t=v(e).toHsl();var r=t.h;return[v(e),v({h:(r+72)%360,s:t.s,l:t.l}),v({h:(r+216)%360,s:t.s,l:t.l})]}function O(e,t,r){t=t||6;r=r||30;var n=v(e).toHsl();var a=360/r;var i=[v(e)];for(n.h=(n.h-(a*t>>1)+720)%360;--t;){n.h=(n.h+a)%360;i.push(v(n))}return i}function D(e,t){t=t||6;var r=v(e).toHsv();var n=r.h,a=r.s,i=r.v;var o=[];var s=1/t;while(t--){o.push(v({h:n,s:a,v:i}));i=(i+s)%1}return o}v.mix=function(e,t,r){r=r===0?0:r||50;var n=v(e).toRgb();var a=v(t).toRgb();var i=r/100;var o={r:(a.r-n.r)*i+n.r,g:(a.g-n.g)*i+n.g,b:(a.b-n.b)*i+n.b,a:(a.a-n.a)*i+n.a};return v(o)};v.readability=function(e,t){var r=v(e);var n=v(t);return(a.max(r.getLuminance(),n.getLuminance())+.05)/(a.min(r.getLuminance(),n.getLuminance())+.05)};v.isReadable=function(e,t,r){var n=v.readability(e,t);var a,i;i=false;a=K(r);switch(a.level+a.size){case"AAsmall":case"AAAlarge":i=n>=4.5;break;case"AAlarge":i=n>=3;break;case"AAAsmall":i=n>=7;break}return i};v.mostReadable=function(e,t,r){var n=null;var a=0;var i;var o,s,l;r=r||{};o=r.includeFallbackColors;s=r.level;l=r.size;for(var u=0;u<t.length;u++){i=v.readability(e,t[u]);if(i>a){a=i;n=v(t[u])}}if(v.isReadable(e,n,{level:s,size:l})||!o){return n}else{r.includeFallbackColors=false;return v.mostReadable(e,["#fff","#000"],r)}};var z=v.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var R=v.hexNames=F(z);function F(e){var t={};for(var r in e){if(e.hasOwnProperty(r)){t[e[r]]=r}}return t}function B(e){e=parseFloat(e);if(isNaN(e)||e<0||e>1){e=1}return e}function N(e,t){if(V(e)){e="100%"}var r=H(e);e=u(t,f(0,parseFloat(e)));if(r){e=parseInt(e*t,10)/100}if(a.abs(e-t)<1e-6){return 1}return e%t/parseFloat(t)}function j(e){return u(1,f(0,e))}function U(e){return parseInt(e,16)}function V(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function H(e){return typeof e==="string"&&e.indexOf("%")!=-1}function q(e){return e.length==1?"0"+e:""+e}function G(e){if(e<=1){e=e*100+"%"}return e}function Z(e){return a.round(parseFloat(e)*255).toString(16)}function Y(e){return U(e)/255}var W=function(){var e="[-\\+]?\\d+%?";var t="[-\\+]?\\d*\\.\\d+%?";var r="(?:"+t+")|(?:"+e+")";var n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";var a="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+a),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+a),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+a),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function X(e){return!!W.CSS_UNIT.exec(e)}function J(e){e=e.replace(i,"").replace(o,"").toLowerCase();var t=false;if(z[e]){e=z[e];t=true}else if(e=="transparent"){return{r:0,g:0,b:0,a:0,format:"name"}}var r;if(r=W.rgb.exec(e)){return{r:r[1],g:r[2],b:r[3]}}if(r=W.rgba.exec(e)){return{r:r[1],g:r[2],b:r[3],a:r[4]}}if(r=W.hsl.exec(e)){return{h:r[1],s:r[2],l:r[3]}}if(r=W.hsla.exec(e)){return{h:r[1],s:r[2],l:r[3],a:r[4]}}if(r=W.hsv.exec(e)){return{h:r[1],s:r[2],v:r[3]}}if(r=W.hsva.exec(e)){return{h:r[1],s:r[2],v:r[3],a:r[4]}}if(r=W.hex8.exec(e)){return{r:U(r[1]),g:U(r[2]),b:U(r[3]),a:Y(r[4]),format:t?"name":"hex8"}}if(r=W.hex6.exec(e)){return{r:U(r[1]),g:U(r[2]),b:U(r[3]),format:t?"name":"hex"}}if(r=W.hex4.exec(e)){return{r:U(r[1]+""+r[1]),g:U(r[2]+""+r[2]),b:U(r[3]+""+r[3]),a:Y(r[4]+""+r[4]),format:t?"name":"hex8"}}if(r=W.hex3.exec(e)){return{r:U(r[1]+""+r[1]),g:U(r[2]+""+r[2]),b:U(r[3]+""+r[3]),format:t?"name":"hex"}}return false}function K(e){var t,r;e=e||{level:"AA",size:"small"};t=(e.level||"AA").toUpperCase();r=(e.size||"small").toLowerCase();if(t!=="AA"&&t!=="AAA"){t="AA"}if(r!=="small"&&r!=="large"){r="small"}return{level:t,size:r}}if(true&&e.exports){e.exports=v}else if(true){!(n=function(){return v}.call(t,r,t,e),n!==undefined&&(e.exports=n))}else{}})(Math)},57060:function(e){"use strict";e.exports=n;e.exports.float32=e.exports.float=n;e.exports.fract32=e.exports.fract=r;var t=new Float32Array(1);function r(e,t){if(e.length){if(e instanceof Float32Array)return new Float32Array(e.length);if(!(t instanceof Float32Array))t=n(e);for(var r=0,a=t.length;r<a;r++){t[r]=e[r]-t[r]}return t}return n(e-n(e))}function n(e){if(e.length){if(e instanceof Float32Array)return e;return new Float32Array(e)}t[0]=e;return t[0]}},75686:function(e,t,r){"use strict";var n=r(25677);e.exports=s;var a=96;function i(e,t){var r=n(getComputedStyle(e).getPropertyValue(t));return r[0]*s(r[1],e)}function o(e,t){var r=document.createElement("div");r.style["font-size"]="128"+e;t.appendChild(r);var n=i(r,"font-size")/128;t.removeChild(r);return n}function s(e,t){t=t||document.body;e=(e||"px").trim().toLowerCase();if(t===window||t===document){t=document.body}switch(e){case"%":return t.clientHeight/100;case"ch":case"ex":return o(e,t);case"em":return i(t,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return a;case"cm":return a/2.54;case"mm":return a/25.4;case"pt":return a/72;case"pc":return a/6}return 1}},96892:function(e,t,r){"use strict";r.d(t,{zL:function(){return o}});function n(e,t){var r,n=e.length,a=n-t;while(a<--n)r=e[a],e[a++]=e[n],e[n]=r}function a(e){return e}function i(e){if(e==null)return a;var t,r,n=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(e,a){if(!a)t=r=0;var l=2,u=e.length,f=new Array(u);f[0]=(t+=e[0])*n+o;f[1]=(r+=e[1])*i+s;while(l<u)f[l]=e[l],++l;return f}}function o(e,t){if(typeof t==="string")t=e.objects[t];return t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map((function(t){return s(e,t)}))}:s(e,t)}function s(e,t){var r=t.id,n=t.bbox,a=t.properties==null?{}:t.properties,i=l(e,t);return r==null&&n==null?{type:"Feature",properties:a,geometry:i}:n==null?{type:"Feature",id:r,properties:a,geometry:i}:{type:"Feature",id:r,bbox:n,properties:a,geometry:i}}function l(e,t){var r=i(e.transform),a=e.arcs;function o(e,t){if(t.length)t.pop();for(var i=a[e<0?~e:e],o=0,s=i.length;o<s;++o){t.push(r(i[o],o))}if(e<0)n(t,s)}function s(e){return r(e)}function l(e){var t=[];for(var r=0,n=e.length;r<n;++r)o(e[r],t);if(t.length<2)t.push(t[0]);return t}function u(e){var t=l(e);while(t.length<4)t.push(t[0]);return t}function f(e){return e.map(u)}function c(e){var t=e.type,r;switch(t){case"GeometryCollection":return{type:t,geometries:e.geometries.map(c)};case"Point":r=s(e.coordinates);break;case"MultiPoint":r=e.coordinates.map(s);break;case"LineString":r=l(e.arcs);break;case"MultiLineString":r=e.arcs.map(l);break;case"Polygon":r=f(e.arcs);break;case"MultiPolygon":r=e.arcs.map(f);break;default:return null}return{type:t,coordinates:r}}return c(t)}},73116:function(e,t,r){"use strict";var n=r(24511);e.exports=function(e){if(typeof e!=="function")return false;if(!hasOwnProperty.call(e,"length"))return false;try{if(typeof e.length!=="number")return false;if(typeof e.call!=="function")return false;if(typeof e.apply!=="function")return false}catch(t){return false}return!n(e)}},69190:function(e,t,r){"use strict";var n=r(24582),a=r(47403),i=r(9234),o=r(6048);var s=function(e,t){return e.replace("%v",o(t))};e.exports=function(e,t,r){if(!a(r))throw new TypeError(s(t,e));if(!n(e)){if("default"in r)return r["default"];if(r.isOptional)return null}var o=i(r.errorMessage);if(!n(o))o=t;throw new TypeError(s(o,e))}},18497:function(e){"use strict";e.exports=function(e){try{return e.toString()}catch(t){try{return String(e)}catch(r){return null}}}},6048:function(e,t,r){"use strict";var n=r(18497);var a=/[\n\r\u2028\u2029]/g;e.exports=function(e){var t=n(e);if(t===null)return"<Non-coercible to string value>";if(t.length>100)t=t.slice(0,99)+"";t=t.replace(a,(function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}));return t}},47403:function(e,t,r){"use strict";var n=r(24582);var a={object:true,function:true,undefined:true};e.exports=function(e){if(!n(e))return false;return hasOwnProperty.call(a,typeof e)}},82527:function(e,t,r){"use strict";var n=r(69190),a=r(84985);e.exports=function(e){if(a(e))return e;return n(e,"%v is not a plain function",arguments[1])}},84985:function(e,t,r){"use strict";var n=r(73116);var a=/^\s*class[\s{/}]/,i=Function.prototype.toString;e.exports=function(e){if(!n(e))return false;if(a.test(i.call(e)))return false;return true}},24511:function(e,t,r){"use strict";var n=r(47403);e.exports=function(e){if(!n(e))return false;try{if(!e.constructor)return false;return e.constructor.prototype===e}catch(t){return false}}},9234:function(e,t,r){"use strict";var n=r(24582),a=r(47403);var i=Object.prototype.toString;e.exports=function(e){if(!n(e))return null;if(a(e)){var t=e.toString;if(typeof t!=="function")return null;if(t===i)return null}try{return""+e}catch(r){return null}}},10424:function(e,t,r){"use strict";var n=r(69190),a=r(24582);e.exports=function(e){if(a(e))return e;return n(e,"Cannot use %v",arguments[1])}},24582:function(e){"use strict";var t=void 0;e.exports=function(e){return e!==t&&e!==null}},58404:function(e,t,r){"use strict";var n=r(13547);var a=r(12129);var i=r(12856).Buffer;if(!r.g.__TYPEDARRAY_POOL){r.g.__TYPEDARRAY_POOL={UINT8:a([32,0]),UINT16:a([32,0]),UINT32:a([32,0]),BIGUINT64:a([32,0]),INT8:a([32,0]),INT16:a([32,0]),INT32:a([32,0]),BIGINT64:a([32,0]),FLOAT:a([32,0]),DOUBLE:a([32,0]),DATA:a([32,0]),UINT8C:a([32,0]),BUFFER:a([32,0])}}var o=typeof Uint8ClampedArray!=="undefined";var s=typeof BigUint64Array!=="undefined";var l=typeof BigInt64Array!=="undefined";var u=r.g.__TYPEDARRAY_POOL;if(!u.UINT8C){u.UINT8C=a([32,0])}if(!u.BIGUINT64){u.BIGUINT64=a([32,0])}if(!u.BIGINT64){u.BIGINT64=a([32,0])}if(!u.BUFFER){u.BUFFER=a([32,0])}var f=u.DATA,c=u.BUFFER;t.free=function e(t){if(i.isBuffer(t)){c[n.log2(t.length)].push(t)}else{if(Object.prototype.toString.call(t)!=="[object ArrayBuffer]"){t=t.buffer}if(!t){return}var r=t.length||t.byteLength;var a=n.log2(r)|0;f[a].push(t)}};function v(e){if(!e){return}var t=e.length||e.byteLength;var r=n.log2(t);f[r].push(e)}function h(e){v(e.buffer)}t.freeUint8=t.freeUint16=t.freeUint32=t.freeBigUint64=t.freeInt8=t.freeInt16=t.freeInt32=t.freeBigInt64=t.freeFloat32=t.freeFloat=t.freeFloat64=t.freeDouble=t.freeUint8Clamped=t.freeDataView=h;t.freeArrayBuffer=v;t.freeBuffer=function e(t){c[n.log2(t.length)].push(t)};t.malloc=function e(t,r){if(r===undefined||r==="arraybuffer"){return p(t)}else{switch(r){case"uint8":return d(t);case"uint16":return g(t);case"uint32":return y(t);case"int8":return m(t);case"int16":return x(t);case"int32":return b(t);case"float":case"float32":return _(t);case"double":case"float64":return w(t);case"uint8_clamped":return T(t);case"bigint64":return A(t);case"biguint64":return k(t);case"buffer":return S(t);case"data":case"dataview":return M(t);default:return null}}return null};function p(e){var e=n.nextPow2(e);var t=n.log2(e);var r=f[t];if(r.length>0){return r.pop()}return new ArrayBuffer(e)}t.mallocArrayBuffer=p;function d(e){return new Uint8Array(p(e),0,e)}t.mallocUint8=d;function g(e){return new Uint16Array(p(2*e),0,e)}t.mallocUint16=g;function y(e){return new Uint32Array(p(4*e),0,e)}t.mallocUint32=y;function m(e){return new Int8Array(p(e),0,e)}t.mallocInt8=m;function x(e){return new Int16Array(p(2*e),0,e)}t.mallocInt16=x;function b(e){return new Int32Array(p(4*e),0,e)}t.mallocInt32=b;function _(e){return new Float32Array(p(4*e),0,e)}t.mallocFloat32=t.mallocFloat=_;function w(e){return new Float64Array(p(8*e),0,e)}t.mallocFloat64=t.mallocDouble=w;function T(e){if(o){return new Uint8ClampedArray(p(e),0,e)}else{return d(e)}}t.mallocUint8Clamped=T;function k(e){if(s){return new BigUint64Array(p(8*e),0,e)}else{return null}}t.mallocBigUint64=k;function A(e){if(l){return new BigInt64Array(p(8*e),0,e)}else{return null}}t.mallocBigInt64=A;function M(e){return new DataView(p(e),0,e)}t.mallocDataView=M;function S(e){e=n.nextPow2(e);var t=n.log2(e);var r=c[t];if(r.length>0){return r.pop()}return new i(e)}t.mallocBuffer=S;t.clearCache=function e(){for(var t=0;t<32;++t){u.UINT8[t].length=0;u.UINT16[t].length=0;u.UINT32[t].length=0;u.INT8[t].length=0;u.INT16[t].length=0;u.INT32[t].length=0;u.FLOAT[t].length=0;u.DOUBLE[t].length=0;u.BIGUINT64[t].length=0;u.BIGINT64[t].length=0;u.UINT8C[t].length=0;f[t].length=0;c[t].length=0}}},90448:function(e){var t=/[\'\"]/;e.exports=function e(r){if(!r){return""}if(t.test(r.charAt(0))){r=r.substr(1)}if(t.test(r.charAt(r.length-1))){r=r.substr(0,r.length-1)}return r}},93447:function(e){"use strict";e.exports=function e(t,r,n){if(!Array.isArray(n))n=[].slice.call(arguments,2);for(var a=0,i=n.length;a<i;a++){var o=n[a];for(var s in o){if(r[s]!==undefined&&!Array.isArray(r[s])&&t[s]===r[s])continue;if(s in r){var l;if(o[s]===true)l=r[s];else if(o[s]===false)continue;else if(typeof o[s]==="function"){l=o[s](r[s],t,r);if(l===undefined)continue}t[s]=l}}}return t}},20588:function(e,t,r){e.exports=n;function n(e,t){if(a("noDeprecation")){return e}var r=false;function n(){if(!r){if(a("throwDeprecation")){throw new Error(t)}else if(a("traceDeprecation")){console.trace(t)}else{console.warn(t)}r=true}return e.apply(this,arguments)}return n}function a(e){try{if(!r.g.localStorage)return false}catch(n){return false}var t=r.g.localStorage[e];if(null==t)return false;return String(t).toLowerCase()==="true"}},45920:function(e){e.exports=function e(t){return t&&typeof t==="object"&&typeof t.copy==="function"&&typeof t.fill==="function"&&typeof t.readUInt8==="function"}},4936:function(e,t,r){"use strict";var n=r(47216);var a=r(65481);var i=r(21099);var o=r(9187);function s(e){return e.call.bind(e)}var l=typeof BigInt!=="undefined";var u=typeof Symbol!=="undefined";var f=s(Object.prototype.toString);var c=s(Number.prototype.valueOf);var v=s(String.prototype.valueOf);var h=s(Boolean.prototype.valueOf);if(l){var p=s(BigInt.prototype.valueOf)}if(u){var d=s(Symbol.prototype.valueOf)}function g(e,t){if(typeof e!=="object"){return false}try{t(e);return true}catch(r){return false}}t.isArgumentsObject=n;t.isGeneratorFunction=a;t.isTypedArray=o;function y(e){return typeof Promise!=="undefined"&&e instanceof Promise||e!==null&&typeof e==="object"&&typeof e.then==="function"&&typeof e.catch==="function"}t.isPromise=y;function m(e){if(typeof ArrayBuffer!=="undefined"&&ArrayBuffer.isView){return ArrayBuffer.isView(e)}return o(e)||U(e)}t.isArrayBufferView=m;function x(e){return i(e)==="Uint8Array"}t.isUint8Array=x;function b(e){return i(e)==="Uint8ClampedArray"}t.isUint8ClampedArray=b;function _(e){return i(e)==="Uint16Array"}t.isUint16Array=_;function w(e){return i(e)==="Uint32Array"}t.isUint32Array=w;function T(e){return i(e)==="Int8Array"}t.isInt8Array=T;function k(e){return i(e)==="Int16Array"}t.isInt16Array=k;function A(e){return i(e)==="Int32Array"}t.isInt32Array=A;function M(e){return i(e)==="Float32Array"}t.isFloat32Array=M;function S(e){return i(e)==="Float64Array"}t.isFloat64Array=S;function E(e){return i(e)==="BigInt64Array"}t.isBigInt64Array=E;function L(e){return i(e)==="BigUint64Array"}t.isBigUint64Array=L;function C(e){return f(e)==="[object Map]"}C.working=typeof Map!=="undefined"&&C(new Map);function I(e){if(typeof Map==="undefined"){return false}return C.working?C(e):e instanceof Map}t.isMap=I;function P(e){return f(e)==="[object Set]"}P.working=typeof Set!=="undefined"&&P(new Set);function O(e){if(typeof Set==="undefined"){return false}return P.working?P(e):e instanceof Set}t.isSet=O;function D(e){return f(e)==="[object WeakMap]"}D.working=typeof WeakMap!=="undefined"&&D(new WeakMap);function z(e){if(typeof WeakMap==="undefined"){return false}return D.working?D(e):e instanceof WeakMap}t.isWeakMap=z;function R(e){return f(e)==="[object WeakSet]"}R.working=typeof WeakSet!=="undefined"&&R(new WeakSet);function F(e){return R(e)}t.isWeakSet=F;function B(e){return f(e)==="[object ArrayBuffer]"}B.working=typeof ArrayBuffer!=="undefined"&&B(new ArrayBuffer);function N(e){if(typeof ArrayBuffer==="undefined"){return false}return B.working?B(e):e instanceof ArrayBuffer}t.isArrayBuffer=N;function j(e){return f(e)==="[object DataView]"}j.working=typeof ArrayBuffer!=="undefined"&&typeof DataView!=="undefined"&&j(new DataView(new ArrayBuffer(1),0,1));function U(e){if(typeof DataView==="undefined"){return false}return j.working?j(e):e instanceof DataView}t.isDataView=U;var V=typeof SharedArrayBuffer!=="undefined"?SharedArrayBuffer:undefined;function H(e){return f(e)==="[object SharedArrayBuffer]"}function q(e){if(typeof V==="undefined"){return false}if(typeof H.working==="undefined"){H.working=H(new V)}return H.working?H(e):e instanceof V}t.isSharedArrayBuffer=q;function G(e){return f(e)==="[object AsyncFunction]"}t.isAsyncFunction=G;function Z(e){return f(e)==="[object Map Iterator]"}t.isMapIterator=Z;function Y(e){return f(e)==="[object Set Iterator]"}t.isSetIterator=Y;function W(e){return f(e)==="[object Generator]"}t.isGeneratorObject=W;function X(e){return f(e)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=X;function J(e){return g(e,c)}t.isNumberObject=J;function K(e){return g(e,v)}t.isStringObject=K;function $(e){return g(e,h)}t.isBooleanObject=$;function Q(e){return l&&g(e,p)}t.isBigIntObject=Q;function ee(e){return u&&g(e,d)}t.isSymbolObject=ee;function te(e){return J(e)||K(e)||$(e)||Q(e)||ee(e)}t.isBoxedPrimitive=te;function re(e){return typeof Uint8Array!=="undefined"&&(N(e)||q(e))}t.isAnyArrayBuffer=re;["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:false,value:function(){throw new Error(e+" is not supported in userland")}})}))},43827:function(e,t,r){var n=r(90386);var a=Object.getOwnPropertyDescriptors||function e(t){var r=Object.keys(t);var n={};for(var a=0;a<r.length;a++){n[r[a]]=Object.getOwnPropertyDescriptor(t,r[a])}return n};var i=/%[sdj%]/g;t.format=function(e){if(!k(e)){var t=[];for(var r=0;r<arguments.length;r++){t.push(u(arguments[r]))}return t.join(" ")}var r=1;var n=arguments;var a=n.length;var o=String(e).replace(i,(function(e){if(e==="%%")return"%";if(r>=a)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}}));for(var s=n[r];r<a;s=n[++r]){if(_(s)||!E(s)){o+=" "+s}else{o+=" "+u(s)}}return o};t.deprecate=function(e,r){if(typeof n!=="undefined"&&n.noDeprecation===true){return e}if(typeof n==="undefined"){return function(){return t.deprecate(e,r).apply(this,arguments)}}var a=false;function i(){if(!a){if(n.throwDeprecation){throw new Error(r)}else if(n.traceDeprecation){console.trace(r)}else{console.error(r)}a=true}return e.apply(this,arguments)}return i};var o={};var s=/^$/;if(n.env.NODE_DEBUG){var l=n.env.NODE_DEBUG;l=l.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase();s=new RegExp("^"+l+"$","i")}t.debuglog=function(e){e=e.toUpperCase();if(!o[e]){if(s.test(e)){var r=n.pid;o[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else{o[e]=function(){}}}return o[e]};function u(e,r){var n={seen:[],stylize:c};if(arguments.length>=3)n.depth=arguments[2];if(arguments.length>=4)n.colors=arguments[3];if(b(r)){n.showHidden=r}else if(r){t._extend(n,r)}if(M(n.showHidden))n.showHidden=false;if(M(n.depth))n.depth=2;if(M(n.colors))n.colors=false;if(M(n.customInspect))n.customInspect=true;if(n.colors)n.stylize=f;return h(n,e,n.depth)}t.inspect=u;u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function f(e,t){var r=u.styles[t];if(r){return"["+u.colors[r][0]+"m"+e+"["+u.colors[r][1]+"m"}else{return e}}function c(e,t){return e}function v(e){var t={};e.forEach((function(e,r){t[e]=true}));return t}function h(e,r,n){if(e.customInspect&&r&&I(r.inspect)&&r.inspect!==t.inspect&&!(r.constructor&&r.constructor.prototype===r)){var a=r.inspect(n,e);if(!k(a)){a=h(e,a,n)}return a}var i=p(e,r);if(i){return i}var o=Object.keys(r);var s=v(o);if(e.showHidden){o=Object.getOwnPropertyNames(r)}if(C(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0)){return d(r)}if(o.length===0){if(I(r)){var l=r.name?": "+r.name:"";return e.stylize("[Function"+l+"]","special")}if(S(r)){return e.stylize(RegExp.prototype.toString.call(r),"regexp")}if(L(r)){return e.stylize(Date.prototype.toString.call(r),"date")}if(C(r)){return d(r)}}var u="",f=false,c=["{","}"];if(x(r)){f=true;c=["[","]"]}if(I(r)){var b=r.name?": "+r.name:"";u=" [Function"+b+"]"}if(S(r)){u=" "+RegExp.prototype.toString.call(r)}if(L(r)){u=" "+Date.prototype.toUTCString.call(r)}if(C(r)){u=" "+d(r)}if(o.length===0&&(!f||r.length==0)){return c[0]+u+c[1]}if(n<0){if(S(r)){return e.stylize(RegExp.prototype.toString.call(r),"regexp")}else{return e.stylize("[Object]","special")}}e.seen.push(r);var _;if(f){_=g(e,r,n,s,o)}else{_=o.map((function(t){return y(e,r,n,s,t,f)}))}e.seen.pop();return m(_,u,c)}function p(e,t){if(M(t))return e.stylize("undefined","undefined");if(k(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(T(t))return e.stylize(""+t,"number");if(b(t))return e.stylize(""+t,"boolean");if(_(t))return e.stylize("null","null")}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function g(e,t,r,n,a){var i=[];for(var o=0,s=t.length;o<s;++o){if(F(t,String(o))){i.push(y(e,t,r,n,String(o),true))}else{i.push("")}}a.forEach((function(a){if(!a.match(/^\d+$/)){i.push(y(e,t,r,n,a,true))}}));return i}function y(e,t,r,n,a,i){var o,s,l;l=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]};if(l.get){if(l.set){s=e.stylize("[Getter/Setter]","special")}else{s=e.stylize("[Getter]","special")}}else{if(l.set){s=e.stylize("[Setter]","special")}}if(!F(n,a)){o="["+a+"]"}if(!s){if(e.seen.indexOf(l.value)<0){if(_(r)){s=h(e,l.value,null)}else{s=h(e,l.value,r-1)}if(s.indexOf("\n")>-1){if(i){s=s.split("\n").map((function(e){return"  "+e})).join("\n").slice(2)}else{s="\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")}}}else{s=e.stylize("[Circular]","special")}}if(M(o)){if(i&&a.match(/^\d+$/)){return s}o=JSON.stringify(""+a);if(o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){o=o.slice(1,-1);o=e.stylize(o,"name")}else{o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");o=e.stylize(o,"string")}}return o+": "+s}function m(e,t,r){var n=0;var a=e.reduce((function(e,t){n++;if(t.indexOf("\n")>=0)n++;return e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(a>60){return r[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]}return r[0]+t+" "+e.join(", ")+" "+r[1]}t.types=r(4936);function x(e){return Array.isArray(e)}t.isArray=x;function b(e){return typeof e==="boolean"}t.isBoolean=b;function _(e){return e===null}t.isNull=_;function w(e){return e==null}t.isNullOrUndefined=w;function T(e){return typeof e==="number"}t.isNumber=T;function k(e){return typeof e==="string"}t.isString=k;function A(e){return typeof e==="symbol"}t.isSymbol=A;function M(e){return e===void 0}t.isUndefined=M;function S(e){return E(e)&&O(e)==="[object RegExp]"}t.isRegExp=S;t.types.isRegExp=S;function E(e){return typeof e==="object"&&e!==null}t.isObject=E;function L(e){return E(e)&&O(e)==="[object Date]"}t.isDate=L;t.types.isDate=L;function C(e){return E(e)&&(O(e)==="[object Error]"||e instanceof Error)}t.isError=C;t.types.isNativeError=C;function I(e){return typeof e==="function"}t.isFunction=I;function P(e){return e===null||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||typeof e==="symbol"||typeof e==="undefined"}t.isPrimitive=P;t.isBuffer=r(45920);function O(e){return Object.prototype.toString.call(e)}function D(e){return e<10?"0"+e.toString(10):e.toString(10)}var z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var e=new Date;var t=[D(e.getHours()),D(e.getMinutes()),D(e.getSeconds())].join(":");return[e.getDate(),z[e.getMonth()],t].join(" ")}t.log=function(){console.log("%s - %s",R(),t.format.apply(t,arguments))};t.inherits=r(42018);t._extend=function(e,t){if(!t||!E(t))return e;var r=Object.keys(t);var n=r.length;while(n--){e[r[n]]=t[r[n]]}return e};function F(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var B=typeof Symbol!=="undefined"?Symbol("util.promisify.custom"):undefined;t.promisify=function e(t){if(typeof t!=="function")throw new TypeError('The "original" argument must be of type Function');if(B&&t[B]){var r=t[B];if(typeof r!=="function"){throw new TypeError('The "util.promisify.custom" argument must be of type Function')}Object.defineProperty(r,B,{value:r,enumerable:false,writable:false,configurable:true});return r}function r(){var e,r;var n=new Promise((function(t,n){e=t;r=n}));var a=[];for(var i=0;i<arguments.length;i++){a.push(arguments[i])}a.push((function(t,n){if(t){r(t)}else{e(n)}}));try{t.apply(this,a)}catch(o){r(o)}return n}Object.setPrototypeOf(r,Object.getPrototypeOf(t));if(B)Object.defineProperty(r,B,{value:r,enumerable:false,writable:false,configurable:true});return Object.defineProperties(r,a(t))};t.promisify.custom=B;function N(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e;e=r}return t(e)}function j(e){if(typeof e!=="function"){throw new TypeError('The "original" argument must be of type Function')}function t(){var t=[];for(var r=0;r<arguments.length;r++){t.push(arguments[r])}var a=t.pop();if(typeof a!=="function"){throw new TypeError("The last argument must be of type Function")}var i=this;var o=function(){return a.apply(i,arguments)};e.apply(this,t).then((function(e){n.nextTick(o.bind(null,null,e))}),(function(e){n.nextTick(N.bind(null,e,o))}))}Object.setPrototypeOf(t,Object.getPrototypeOf(e));Object.defineProperties(t,a(e));return t}t.callbackify=j},40372:function(e,t,r){var n=r(86249);e.exports=function e(t){return n("webgl",t)}},21099:function(e,t,r){"use strict";var n=r(31353);var a=r(72077);var i=r(6614);var o=r(40383);var s=i("Object.prototype.toString");var l=r(84543)();var u=typeof globalThis==="undefined"?r.g:globalThis;var f=a();var c=i("String.prototype.slice");var v={};var h=Object.getPrototypeOf;if(l&&o&&h){n(f,(function(e){if(typeof u[e]==="function"){var t=new u[e];if(Symbol.toStringTag in t){var r=h(t);var n=o(r,Symbol.toStringTag);if(!n){var a=h(r);n=o(a,Symbol.toStringTag)}v[e]=n.get}}}))}var p=function e(t){var r=false;n(v,(function(e,n){if(!r){try{var a=e.call(t);if(a===n){r=a}}catch(i){}}}));return r};var d=r(9187);e.exports=function e(t){if(!d(t)){return false}if(!l||!(Symbol.toStringTag in t)){return c(s(t),8,-1)}return p(t)}},3961:function(e,t,r){var n=r(63489);var a=r(56131);var i=n.instance();function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new n.baseCalendar;a(o.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:false,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if(typeof e==="string"){var r=e.match(l);return r?r[0]:""}var n=this._validateYear(e);var a=e.month();var i=""+this.toChineseMonth(n,a);if(t&&i.length<2){i="0"+i}if(this.isIntercalaryMonth(n,a)){i+="i"}return i},monthNames:function(e){if(typeof e==="string"){var t=e.match(u);return t?t[0]:""}var r=this._validateYear(e);var n=e.month();var a=this.toChineseMonth(r,n);var i=["","","","","","","","","","","",""][a-1];if(this.isIntercalaryMonth(r,n)){i=""+i}return i},monthNamesShort:function(e){if(typeof e==="string"){var t=e.match(f);return t?t[0]:""}var r=this._validateYear(e);var n=e.month();var a=this.toChineseMonth(r,n);var i=["","","","","","","","","","","",""][a-1];if(this.isIntercalaryMonth(r,n)){i=""+i}return i},parseMonth:function(e,t){e=this._validateYear(e);var r=parseInt(t);var n;if(!isNaN(r)){var a=t[t.length-1];n=a==="i"||a==="I"}else{if(t[0]===""){n=true;t=t.substring(1)}if(t[t.length-1]===""){t=t.substring(0,t.length-1)}r=1+["","","","","","","","","","","",""].indexOf(t)}var i=this.toMonthIndex(e,r,n);return i},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:false}},_validateYear:function(e,t){if(e.year){e=e.year()}if(typeof e!=="number"||e<1888||e>2111){throw t.replace(/\{0\}/,this.local.name)}return e},toMonthIndex:function(e,t,r){var a=this.intercalaryMonth(e);var i=r&&t!==a;if(i||t<1||t>12){throw n.local.invalidMonth.replace(/\{0\}/,this.local.name)}var o;if(!a){o=t-1}else if(!r&&t<=a){o=t-1}else{o=t}return o},toChineseMonth:function(e,t){if(e.year){e=e.year();t=e.month()}var r=this.intercalaryMonth(e);var a=r?12:11;if(t<0||t>a){throw n.local.invalidMonth.replace(/\{0\}/,this.local.name)}var i;if(!r){i=t+1}else if(t<r){i=t+1}else{i=t}return i},intercalaryMonth:function(e){e=this._validateYear(e);var t=c[e-c[0]];var r=t>>13;return r},isIntercalaryMonth:function(e,t){if(e.year){e=e.year();t=e.month()}var r=this.intercalaryMonth(e);return!!r&&r===t},leapYear:function(e){return this.intercalaryMonth(e)!==0},weekOfYear:function(e,t,r){var a=this._validateYear(e,n.local.invalidyear);var o=v[a-v[0]];var s=o>>9&4095;var l=o>>5&15;var u=o&31;var f;f=i.newDate(s,l,u);f.add(4-(f.dayOfWeek()||7),"d");var c=this.toJD(e,t,r)-f.toJD();return 1+Math.floor(c/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){if(e.year){t=e.month();e=e.year()}e=this._validateYear(e);var r=c[e-c[0]];var a=r>>13;var i=a?12:11;if(t>i){throw n.local.invalidMonth.replace(/\{0\}/,this.local.name)}var o=r&1<<12-t?30:29;return o},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,s,r,n.local.invalidDate);e=this._validateYear(a.year());t=a.month();r=a.day();var o=this.isIntercalaryMonth(e,t);var s=this.toChineseMonth(e,t);var l=p(e,s,r,o);return i.toJD(l.year,l.month,l.day)},fromJD:function(e){var t=i.fromJD(e);var r=h(t.year(),t.month(),t.day());var n=this.toMonthIndex(r.year,r.month,r.isIntercalary);return this.newDate(r.year,n,r.day)},fromString:function(e){var t=e.match(s);var r=this._validateYear(+t[1]);var n=+t[2];var a=!!t[3];var i=this.toMonthIndex(r,n,a);var o=+t[4];return this.newDate(r,i,o)},add:function(e,t,r){var n=e.year();var a=e.month();var i=this.isIntercalaryMonth(n,a);var s=this.toChineseMonth(n,a);var l=Object.getPrototypeOf(o.prototype).add.call(this,e,t,r);if(r==="y"){var u=l.year();var f=l.month();var c=this.isIntercalaryMonth(u,s);var v=i&&c?this.toMonthIndex(u,s,true):this.toMonthIndex(u,s,false);if(v!==f){l.month(v)}}return l}});var s=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m;var l=/^\d?\d[iI]?/m;var u=/^??[]?/m;var f=/^??[]?/m;n.calendars.chinese=o;var c=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548];var v=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function h(e,t,r,n){var a;var i;if(typeof e==="object"){a=e;i=t||{}}else{var o=typeof e==="number"&&e>=1888&&e<=2111;if(!o)throw new Error("Solar year outside range 1888-2111");var s=typeof t==="number"&&t>=1&&t<=12;if(!s)throw new Error("Solar month outside range 1 - 12");var l=typeof r==="number"&&r>=1&&r<=31;if(!l)throw new Error("Solar day outside range 1 - 31");a={year:e,month:t,day:r};i=n||{}}var u=v[a.year-v[0]];var f=a.year<<9|a.month<<5|a.day;i.year=f>=u?a.year:a.year-1;u=v[i.year-v[0]];var h=u>>9&4095;var p=u>>5&15;var d=u&31;var g;var y=new Date(h,p-1,d);var m=new Date(a.year,a.month-1,a.day);g=Math.round((m-y)/(24*3600*1e3));var x=c[i.year-c[0]];var b;for(b=0;b<13;b++){var _=x&1<<12-b?30:29;if(g<_){break}g-=_}var w=x>>13;if(!w||b<w){i.isIntercalary=false;i.month=1+b}else if(b===w){i.isIntercalary=true;i.month=b}else{i.isIntercalary=false;i.month=b}i.day=1+g;return i}function p(e,t,r,n,a){var i;var o;if(typeof e==="object"){o=e;i=t||{}}else{var s=typeof e==="number"&&e>=1888&&e<=2111;if(!s)throw new Error("Lunar year outside range 1888-2111");var l=typeof t==="number"&&t>=1&&t<=12;if(!l)throw new Error("Lunar month outside range 1 - 12");var u=typeof r==="number"&&r>=1&&r<=30;if(!u)throw new Error("Lunar day outside range 1 - 30");var f;if(typeof n==="object"){f=false;i=n}else{f=!!n;i=a||{}}o={year:e,month:t,day:r,isIntercalary:f}}var h;h=o.day-1;var p=c[o.year-c[0]];var d=p>>13;var g;if(!d){g=o.month-1}else if(o.month>d){g=o.month}else if(o.isIntercalary){g=o.month}else{g=o.month-1}for(var y=0;y<g;y++){var m=p&1<<12-y?30:29;h+=m}var x=v[o.year-v[0]];var b=x>>9&4095;var _=x>>5&15;var w=x&31;var T=new Date(b,_-1,w+h);i.year=T.getFullYear();i.month=1+T.getMonth();i.day=T.getDate();return i}},38751:function(e,t,r){var n=r(63489);var a=r(56131);function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new n.baseCalendar;a(i.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);var e=t.year()+(t.year()<0?1:0);return e%4===3||e%4===-1},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return 13},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-n.dayOfWeek(),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);e=a.year();if(e<0){e++}return a.day()+(a.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch;var r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;if(r<=0){r--}t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var n=Math.floor(t/30)+1;var a=t-(n-1)*30+1;return this.newDate(r,n,a)}});n.calendars.coptic=i},86825:function(e,t,r){var n=r(63489);var a=r(56131);function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new n.baseCalendar;a(i.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:false}},leapYear:function(e){this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);return false},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);return 13},daysInYear:function(e){this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);return 400},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-n.dayOfWeek(),"d");return Math.floor((n.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);return(a.day()+1)%8},weekDay:function(e,t,r){var n=this.dayOfWeek(e,t,r);return n>=2&&n<=6},extraInfo:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);return{century:o[Math.floor((a.year()-1)/100)+1]||""}},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);e=a.year()+(a.year()<0?1:0);t=a.month();r=a.day();return r+(t>1?16:0)+(t>2?(t-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1;e-=(t-1)*400;e+=e>15?16:0;var r=Math.floor(e/32)+1;var n=e-(r-1)*32+1;return this.newDate(t<=0?t-1:t,r,n)}});var o={20:"Fruitbat",21:"Anchovy"};n.calendars.discworld=i},37715:function(e,t,r){var n=r(63489);var a=r(56131);function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new n.baseCalendar;a(i.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);var e=t.year()+(t.year()<0?1:0);return e%4===3||e%4===-1},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return 13},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-n.dayOfWeek(),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);e=a.year();if(e<0){e++}return a.day()+(a.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch;var r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;if(r<=0){r--}t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var n=Math.floor(t/30)+1;var a=t-(n-1)*30+1;return this.newDate(r,n,a)}});n.calendars.ethiopian=i},99384:function(e,t,r){var n=r(63489);var a=r(56131);function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new n.baseCalendar;a(i.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:false,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);return this._leapYear(t.year())},_leapYear:function(e){e=e<0?e+1:e;return o(e*7+1,19)<7},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);return this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-n.dayOfWeek(),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);e=t.year();return this.toJD(e===-1?+1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){if(e.year){t=e.month();e=e.year()}this._validate(e,t,this.minDay,n.local.invalidMonth);return t===12&&this.leapYear(e)?30:t===8&&o(this.daysInYear(e),10)===5?30:t===9&&o(this.daysInYear(e),10)===3?29:this.daysPerMonth[t-1]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},extraInfo:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);return{yearType:(this.leapYear(a)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(a)%10-3]}},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);e=a.year();t=a.month();r=a.day();var i=e<=0?e+1:e;var o=this.jdEpoch+this._delay1(i)+this._delay2(i)+r+1;if(t<7){for(var s=7;s<=this.monthsInYear(e);s++){o+=this.daysInMonth(e,s)}for(var s=1;s<t;s++){o+=this.daysInMonth(e,s)}}else{for(var s=7;s<t;s++){o+=this.daysInMonth(e,s)}}return o},_delay1:function(e){var t=Math.floor((235*e-234)/19);var r=12084+13753*t;var n=t*29+Math.floor(r/25920);if(o(3*(n+1),7)<3){n++}return n},_delay2:function(e){var t=this._delay1(e-1);var r=this._delay1(e);var n=this._delay1(e+1);return n-r===356?2:r-t===382?1:0},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((e-this.jdEpoch)*98496/35975351)-1;while(e>=this.toJD(t===-1?+1:t+1,7,1)){t++}var r=e<this.toJD(t,1,1)?7:1;while(e>this.toJD(t,r,this.daysInMonth(t,r))){r++}var n=e-this.toJD(t,r,1)+1;return this.newDate(t,r,n)}});function o(e,t){return e-t*Math.floor(e/t)}n.calendars.hebrew=i},43805:function(e,t,r){var n=r(63489);var a=r(56131);function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new n.baseCalendar;a(i.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);return(t.year()*11+14)%30<11},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-n.dayOfWeek(),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);e=a.year();t=a.month();r=a.day();e=e<=0?e+1:e;return r+Math.ceil(29.5*(t-1))+(e-1)*354+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((30*(e-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var r=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1);var n=e-this.toJD(t,r,1)+1;return this.newDate(t,r,n)}});n.calendars.islamic=i},88874:function(e,t,r){var n=r(63489);var a=r(56131);function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new n.baseCalendar;a(i.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);var e=t.year()<0?t.year()+1:t.year();return e%4===0},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(4-(n.dayOfWeek()||7),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);e=a.year();t=a.month();r=a.day();if(e<0){e++}if(t<=2){e--;t+=12}return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r-1524.5},fromJD:function(e){var t=Math.floor(e+.5);var r=t+1524;var n=Math.floor((r-122.1)/365.25);var a=Math.floor(365.25*n);var i=Math.floor((r-a)/30.6001);var o=i-Math.floor(i<14?1:13);var s=n-Math.floor(o>2?4716:4715);var l=r-a-Math.floor(30.6001*i);if(s<=0){s--}return this.newDate(s,o,l)}});n.calendars.julian=i},83290:function(e,t,r){var n=r(63489);var a=r(56131);function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new n.baseCalendar;a(i.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:true,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:false,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);return false},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);e=t.year();var r=Math.floor(e/400);e=e%400;e+=e<0?400:0;var a=Math.floor(e/20);return r+"."+a+"."+e%20},forYear:function(e){e=e.split(".");if(e.length<3){throw"Invalid Mayan year"}var t=0;for(var r=0;r<e.length;r++){var n=parseInt(e[r],10);if(Math.abs(n)>19||r>0&&n<0){throw"Invalid Mayan year"}t=t*20+n}return t},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);return 18},weekOfYear:function(e,t,r){this._validate(e,t,r,n.local.invalidDate);return 0},daysInYear:function(e){this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);return 360},daysInMonth:function(e,t){this._validate(e,t,this.minDay,n.local.invalidMonth);return 20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);return a.day()},weekDay:function(e,t,r){this._validate(e,t,r,n.local.invalidDate);return true},extraInfo:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);var i=a.toJD();var o=this._toHaab(i);var s=this._toTzolkin(i);return{haabMonthName:this.local.haabMonths[o[0]-1],haabMonth:o[0],haabDay:o[1],tzolkinDayName:this.local.tzolkinMonths[s[0]-1],tzolkinDay:s[0],tzolkinTrecena:s[1]}},_toHaab:function(e){e-=this.jdEpoch;var t=o(e+8+(18-1)*20,365);return[Math.floor(t/20)+1,o(t,20)]},_toTzolkin:function(e){e-=this.jdEpoch;return[s(e+20,20),s(e+4,13)]},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);return a.day()+a.month()*20+a.year()*360+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var t=Math.floor(e/360);e=e%360;e+=e<0?360:0;var r=Math.floor(e/20);var n=e%20;return this.newDate(t,r,n)}});function o(e,t){return e-t*Math.floor(e/t)}function s(e,t){return o(e-1,t)+1}n.calendars.mayan=i},29108:function(e,t,r){var n=r(63489);var a=r(56131);function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new n.baseCalendar;var o=n.instance("gregorian");a(i.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return o.leapYear(t.year()+(t.year()<1?1:0)+1469)},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(1-(n.dayOfWeek()||7),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidMonth);var e=a.year();if(e<0){e++}var i=a.day();for(var s=1;s<a.month();s++){i+=this.daysPerMonth[s-1]}return i+o.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);var t=Math.floor((e-(this.jdEpoch-1))/366);while(e>=this.toJD(t+1,1,1)){t++}var r=e-Math.floor(this.toJD(t,1,1)+.5)+1;var n=1;while(r>this.daysInMonth(t,n)){r-=this.daysInMonth(t,n);n++}return this.newDate(t,n,r)}});n.calendars.nanakshahi=i},55422:function(e,t,r){var n=r(63489);var a=r(56131);function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new n.baseCalendar;a(i.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:false}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-n.dayOfWeek(),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);e=t.year();if(typeof this.NEPALI_CALENDAR_DATA[e]==="undefined"){return this.daysPerYear}var r=0;for(var a=this.minMonth;a<=12;a++){r+=this.NEPALI_CALENDAR_DATA[e][a]}return r},daysInMonth:function(e,t){if(e.year){t=e.month();e=e.year()}this._validate(e,t,this.minDay,n.local.invalidMonth);return typeof this.NEPALI_CALENDAR_DATA[e]==="undefined"?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);e=a.year();t=a.month();r=a.day();var i=n.instance();var o=0;var s=t;var l=e;this._createMissingCalendarData(e);var u=e-(s>9||s===9&&r>=this.NEPALI_CALENDAR_DATA[l][0]?56:57);if(t!==9){o=r;s--}while(s!==9){if(s<=0){s=12;l--}o+=this.NEPALI_CALENDAR_DATA[l][s];s--}if(t===9){o+=r-this.NEPALI_CALENDAR_DATA[l][0];if(o<0){o+=i.daysInYear(u)}}else{o+=this.NEPALI_CALENDAR_DATA[l][9]-this.NEPALI_CALENDAR_DATA[l][0]}return i.newDate(u,1,1).add(o,"d").toJD()},fromJD:function(e){var t=n.instance();var r=t.fromJD(e);var a=r.year();var i=r.dayOfYear();var o=a+56;this._createMissingCalendarData(o);var s=9;var l=this.NEPALI_CALENDAR_DATA[o][0];var u=this.NEPALI_CALENDAR_DATA[o][s]-l+1;while(i>u){s++;if(s>12){s=1;o++}u+=this.NEPALI_CALENDAR_DATA[o][s]}var f=this.NEPALI_CALENDAR_DATA[o][s]-(u-i);return this.newDate(o,s,f)},_createMissingCalendarData:function(e){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var r=e-1;r<e+2;r++){if(typeof this.NEPALI_CALENDAR_DATA[r]==="undefined"){this.NEPALI_CALENDAR_DATA[r]=t}}},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}});n.calendars.nepali=i},94320:function(e,t,r){var n=r(63489);var a=r(56131);function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new n.baseCalendar;a(i.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);return((t.year()-(t.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-((n.dayOfWeek()+1)%7),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);e=a.year();t=a.month();r=a.day();var i=e-(e>=0?474:473);var s=474+o(i,2820);return r+(t<=7?(t-1)*31:(t-1)*30+6)+Math.floor((s*682-110)/2816)+(s-1)*365+Math.floor(i/2820)*1029983+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=e-this.toJD(475,1,1);var r=Math.floor(t/1029983);var n=o(t,1029983);var a=2820;if(n!==1029982){var i=Math.floor(n/366);var s=o(n,366);a=Math.floor((2134*i+2816*s+2815)/1028522)+i+1}var l=a+2820*r+474;l=l<=0?l-1:l;var u=e-this.toJD(l,1,1)+1;var f=u<=186?Math.ceil(u/31):Math.ceil((u-6)/30);var c=e-this.toJD(l,f,1)+1;return this.newDate(l,f,c)}});function o(e,t){return e-t*Math.floor(e/t)}n.calendars.persian=i;n.calendars.jalali=i},31320:function(e,t,r){var n=r(63489);var a=r(56131);var i=n.instance();function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new n.baseCalendar;a(o.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);var e=this._t2gYear(t.year());return i.leapYear(e)},weekOfYear:function(e,t,r){var a=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);var e=this._t2gYear(a.year());return i.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);var e=this._t2gYear(a.year());return i.toJD(e,a.month(),a.day())},fromJD:function(e){var t=i.fromJD(e);var r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}});n.calendars.taiwan=o},51367:function(e,t,r){var n=r(63489);var a=r(56131);var i=n.instance();function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new n.baseCalendar;a(o.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);var e=this._t2gYear(t.year());return i.leapYear(e)},weekOfYear:function(e,t,r){var a=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);var e=this._t2gYear(a.year());return i.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);var e=this._t2gYear(a.year());return i.toJD(e,a.month(),a.day())},fromJD:function(e){var t=i.fromJD(e);var r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}});n.calendars.thai=o},21457:function(e,t,r){var n=r(63489);var a=r(56131);function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new n.baseCalendar;a(i.prototype,{name:"UmmAlQura",hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:true}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);return this.daysInYear(t.year())===355},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-n.dayOfWeek(),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=0;for(var r=1;r<=12;r++){t+=this.daysInMonth(e,r)}return t},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);var a=r.toJD()-24e5+.5;var i=0;for(var s=0;s<o.length;s++){if(o[s]>a){return o[i]-o[i-1]}i++}return 30},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);var i=12*(a.year()-1)+a.month()-15292;var s=a.day()+o[i-1]-1;return s+24e5-.5},fromJD:function(e){var t=e-24e5+.5;var r=0;for(var n=0;n<o.length;n++){if(o[n]>t)break;r++}var a=r+15292;var i=Math.floor((a-1)/12);var s=i+1;var l=a-12*i;var u=t-o[r-1]+1;return this.newDate(s,l,u)},isValid:function(e,t,r){var a=n.baseCalendar.prototype.isValid.apply(this,arguments);if(a){e=e.year!=null?e.year:e;a=e>=1276&&e<=1500}return a},_validate:function(e,t,r,a){var i=n.baseCalendar.prototype._validate.apply(this,arguments);if(i.year<1276||i.year>1500){throw a.replace(/\{0\}/,this.local.name)}return i}});n.calendars.ummalqura=i;var o=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},63489:function(e,t,r){var n=r(56131);function a(){this.regionalOptions=[];this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"};this.local=this.regionalOptions[""];this.calendars={};this._localCals={}}n(a.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase();t=t||"";var r=this._localCals[e+"-"+t];if(!r&&this.calendars[e]){r=new this.calendars[e](t);this._localCals[e+"-"+t]=r}if(!r){throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e)}return r},newDate:function(e,t,r,n,a){n=(e!=null&&e.year?e.calendar():typeof n==="string"?this.instance(n,a):n)||this.instance();return n.newDate(e,t,r)},substituteDigits:function(e){return function(t){return(t+"").replace(/[0-9]/g,(function(t){return e[t]}))}},substituteChineseDigits:function(e,t){return function(r){var n="";var a=0;while(r>0){var i=r%10;n=(i===0?"":e[i]+t[a])+n;a++;r=Math.floor(r/10)}if(n.indexOf(e[1]+t[1])===0){n=n.substr(1)}return n||e[0]}}});function i(e,t,r,n){this._calendar=e;this._year=t;this._month=r;this._day=n;if(this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day)){throw(u.local.invalidDate||u.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}}function o(e,t){e=""+e;return"000000".substring(0,t-e.length)+e}n(i.prototype,{newDate:function(e,t,r){return this._calendar.newDate(e==null?this:e,t,r)},year:function(e){return arguments.length===0?this._year:this.set(e,"y")},month:function(e){return arguments.length===0?this._month:this.set(e,"m")},day:function(e){return arguments.length===0?this._day:this.set(e,"d")},date:function(e,t,r){if(!this._calendar.isValid(e,t,r)){throw(u.local.invalidDate||u.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}this._year=e;this._month=t;this._day=r;return this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name){throw(u.local.differentCalendars||u.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name)}var t=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return t===0?0:t<0?-1:+1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+o(Math.abs(this.year()),4)+"-"+o(this.month(),2)+"-"+o(this.day(),2)}});function s(){this.shortYearCutoff="+10"}n(s.prototype,{_validateLevel:0,newDate:function(e,t,r){if(e==null){return this.today()}if(e.year){this._validate(e,t,r,u.local.invalidDate||u.regionalOptions[""].invalidDate);r=e.day();t=e.month();e=e.year()}return new i(this,e,t,r)},today:function(){return this.fromJSDate(new Date)},epoch:function(e){var t=this._validate(e,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);return t.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+o(Math.abs(t.year()),4)},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);return 12},monthOfYear:function(e,t){var r=this._validate(e,t,this.minDay,u.local.invalidMonth||u.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(e,t){var r=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;this._validate(e,r,this.minDay,u.local.invalidMonth||u.regionalOptions[""].invalidMonth);return r},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(e,t,r){var n=this._validate(e,t,r,u.local.invalidDate||u.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,r){var n=this._validate(e,t,r,u.local.invalidDate||u.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(e,t,r){this._validate(e,t,r,u.local.invalidDate||u.regionalOptions[""].invalidDate);return{}},add:function(e,t,r){this._validate(e,this.minMonth,this.minDay,u.local.invalidDate||u.regionalOptions[""].invalidDate);return this._correctAdd(e,this._add(e,t,r),t,r)},_add:function(e,t,r){this._validateLevel++;if(r==="d"||r==="w"){var n=e.toJD()+t*(r==="w"?this.daysInWeek():1);var a=e.calendar().fromJD(n);this._validateLevel--;return[a.year(),a.month(),a.day()]}try{var i=e.year()+(r==="y"?t:0);var o=e.monthOfYear()+(r==="m"?t:0);var a=e.day();var s=function(e){while(o<e.minMonth){i--;o+=e.monthsInYear(i)}var t=e.monthsInYear(i);while(o>t-1+e.minMonth){i++;o-=t;t=e.monthsInYear(i)}};if(r==="y"){if(e.month()!==this.fromMonthOfYear(i,o)){o=this.newDate(i,e.month(),this.minDay).monthOfYear()}o=Math.min(o,this.monthsInYear(i));a=Math.min(a,this.daysInMonth(i,this.fromMonthOfYear(i,o)))}else if(r==="m"){s(this);a=Math.min(a,this.daysInMonth(i,this.fromMonthOfYear(i,o)))}var l=[i,this.fromMonthOfYear(i,o),a];this._validateLevel--;return l}catch(u){this._validateLevel--;throw u}},_correctAdd:function(e,t,r,n){if(!this.hasYearZero&&(n==="y"||n==="m")){if(t[0]===0||e.year()>0!==t[0]>0){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[n];var i=r<0?-1:+1;t=this._add(e,r*a[0]+i*a[1],a[2])}}return e.date(t[0],t[1],t[2])},set:function(e,t,r){this._validate(e,this.minMonth,this.minDay,u.local.invalidDate||u.regionalOptions[""].invalidDate);var n=r==="y"?t:e.year();var a=r==="m"?t:e.month();var i=r==="d"?t:e.day();if(r==="y"||r==="m"){i=Math.min(i,this.daysInMonth(n,a))}return e.date(n,a,i)},isValid:function(e,t,r){this._validateLevel++;var n=this.hasYearZero||e!==0;if(n){var a=this.newDate(e,t,this.minDay);n=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(a)&&(r>=this.minDay&&r-this.minDay<this.daysInMonth(a))}this._validateLevel--;return n},toJSDate:function(e,t,r){var n=this._validate(e,t,r,u.local.invalidDate||u.regionalOptions[""].invalidDate);return u.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(e){return this.fromJD(u.instance().fromJSDate(e).toJD())},_validate:function(e,t,r,n){if(e.year){if(this._validateLevel===0&&this.name!==e.calendar().name){throw(u.local.differentCalendars||u.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name)}return e}try{this._validateLevel++;if(this._validateLevel===1&&!this.isValid(e,t,r)){throw n.replace(/\{0\}/,this.local.name)}var a=this.newDate(e,t,r);this._validateLevel--;return a}catch(i){this._validateLevel--;throw i}}});function l(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}l.prototype=new s;n(l.prototype,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);var e=t.year()+(t.year()<0?1:0);return e%4===0&&(e%100!==0||e%400===0)},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(4-(n.dayOfWeek()||7),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,u.local.invalidMonth||u.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var n=this._validate(e,t,r,u.local.invalidDate||u.regionalOptions[""].invalidDate);e=n.year();t=n.month();r=n.day();if(e<0){e++}if(t<3){t+=12;e--}var a=Math.floor(e/100);var i=2-a+Math.floor(a/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r+i-1524.5},fromJD:function(e){var t=Math.floor(e+.5);var r=Math.floor((t-1867216.25)/36524.25);r=t+1+r-Math.floor(r/4);var n=r+1524;var a=Math.floor((n-122.1)/365.25);var i=Math.floor(365.25*a);var o=Math.floor((n-i)/30.6001);var s=n-i-Math.floor(o*30.6001);var l=o-(o>13.5?13:1);var u=a-(l>2.5?4716:4715);if(u<=0){u--}return this.newDate(u,l,s)},toJSDate:function(e,t,r){var n=this._validate(e,t,r,u.local.invalidDate||u.regionalOptions[""].invalidDate);var a=new Date(n.year(),n.month()-1,n.day());a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);a.setHours(a.getHours()>12?a.getHours()+2:0);return a},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var u=e.exports=new a;u.cdate=i;u.baseCalendar=s;u.calendars.gregorian=l},94338:function(e,t,r){var n=r(56131);var a=r(63489);n(a.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});a.local=a.regionalOptions[""];n(a.cdate.prototype,{formatDate:function(e,t){if(typeof e!=="string"){t=e;e=""}return this._calendar.formatDate(e||"",this,t)}});n(a.baseCalendar.prototype,{UNIX_EPOCH:a.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:a.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(e,t,r){if(typeof e!=="string"){r=t;t=e;e=""}if(!t){return""}if(t.calendar()!==this){throw a.local.invalidFormat||a.regionalOptions[""].invalidFormat}e=e||this.local.dateFormat;r=r||{};var n=r.dayNamesShort||this.local.dayNamesShort;var i=r.dayNames||this.local.dayNames;var o=r.monthNumbers||this.local.monthNumbers;var s=r.monthNamesShort||this.local.monthNamesShort;var l=r.monthNames||this.local.monthNames;var u=r.calculateWeek||this.local.calculateWeek;var f=function(t,r){var n=1;while(b+n<e.length&&e.charAt(b+n)===t){n++}b+=n-1;return Math.floor(n/(r||1))>1};var c=function(e,t,r,n){var a=""+t;if(f(e,n)){while(a.length<r){a="0"+a}}return a};var v=function(e,t,r,n){return f(e)?n[t]:r[t]};var h=this;var p=function(e){return typeof o==="function"?o.call(h,e,f("m")):y(c("m",e.month(),2))};var d=function(e,t){if(t){return typeof l==="function"?l.call(h,e):l[e.month()-h.minMonth]}else{return typeof s==="function"?s.call(h,e):s[e.month()-h.minMonth]}};var g=this.local.digits;var y=function(e){return r.localNumbers&&g?g(e):e};var m="";var x=false;for(var b=0;b<e.length;b++){if(x){if(e.charAt(b)==="'"&&!f("'")){x=false}else{m+=e.charAt(b)}}else{switch(e.charAt(b)){case"d":m+=y(c("d",t.day(),2));break;case"D":m+=v("D",t.dayOfWeek(),n,i);break;case"o":m+=c("o",t.dayOfYear(),3);break;case"w":m+=c("w",t.weekOfYear(),2);break;case"m":m+=p(t);break;case"M":m+=d(t,f("M"));break;case"y":m+=f("y",2)?t.year():(t.year()%100<10?"0":"")+t.year()%100;break;case"Y":f("Y",2);m+=t.formatYear();break;case"J":m+=t.toJD();break;case"@":m+=(t.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":m+=(t.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":if(f("'")){m+="'"}else{x=true}break;default:m+=e.charAt(b)}}}return m},parseDate:function(e,t,r){if(t==null){throw a.local.invalidArguments||a.regionalOptions[""].invalidArguments}t=typeof t==="object"?t.toString():t+"";if(t===""){return null}e=e||this.local.dateFormat;r=r||{};var n=r.shortYearCutoff||this.shortYearCutoff;n=typeof n!=="string"?n:this.today().year()%100+parseInt(n,10);var i=r.dayNamesShort||this.local.dayNamesShort;var o=r.dayNames||this.local.dayNames;var s=r.parseMonth||this.local.parseMonth;var l=r.monthNumbers||this.local.monthNumbers;var u=r.monthNamesShort||this.local.monthNamesShort;var f=r.monthNames||this.local.monthNames;var c=-1;var v=-1;var h=-1;var p=-1;var d=-1;var g=false;var y=false;var m=function(t,r){var n=1;while(M+n<e.length&&e.charAt(M+n)===t){n++}M+=n-1;return Math.floor(n/(r||1))>1};var x=function(e,r){var n=m(e,r);var i=[2,3,n?4:2,n?4:2,10,11,20]["oyYJ@!".indexOf(e)+1];var o=new RegExp("^-?\\d{1,"+i+"}");var s=t.substring(A).match(o);if(!s){throw(a.local.missingNumberAt||a.regionalOptions[""].missingNumberAt).replace(/\{0\}/,A)}A+=s[0].length;return parseInt(s[0],10)};var b=this;var _=function(){if(typeof l==="function"){m("m");var e=l.call(b,t.substring(A));A+=e.length;return e}return x("m")};var w=function(e,r,n,i){var o=m(e,i)?n:r;for(var s=0;s<o.length;s++){if(t.substr(A,o[s].length).toLowerCase()===o[s].toLowerCase()){A+=o[s].length;return s+b.minMonth}}throw(a.local.unknownNameAt||a.regionalOptions[""].unknownNameAt).replace(/\{0\}/,A)};var T=function(){if(typeof f==="function"){var e=m("M")?f.call(b,t.substring(A)):u.call(b,t.substring(A));A+=e.length;return e}return w("M",u,f)};var k=function(){if(t.charAt(A)!==e.charAt(M)){throw(a.local.unexpectedLiteralAt||a.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,A)}A++};var A=0;for(var M=0;M<e.length;M++){if(y){if(e.charAt(M)==="'"&&!m("'")){y=false}else{k()}}else{switch(e.charAt(M)){case"d":p=x("d");break;case"D":w("D",i,o);break;case"o":d=x("o");break;case"w":x("w");break;case"m":h=_();break;case"M":h=T();break;case"y":var S=M;g=!m("y",2);M=S;v=x("y",2);break;case"Y":v=x("Y",2);break;case"J":c=x("J")+.5;if(t.charAt(A)==="."){A++;x("J")}break;case"@":c=x("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":c=x("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":A=t.length;break;case"'":if(m("'")){k()}else{y=true}break;default:k()}}}if(A<t.length){throw a.local.unexpectedText||a.regionalOptions[""].unexpectedText}if(v===-1){v=this.today().year()}else if(v<100&&g){v+=n===-1?1900:this.today().year()-this.today().year()%100-(v<=n?0:100)}if(typeof h==="string"){h=s.call(this,v,h)}if(d>-1){h=1;p=d;for(var E=this.daysInMonth(v,h);p>E;E=this.daysInMonth(v,h)){h++;p-=E}}return c>-1?this.fromJD(c):this.newDate(v,h,p)},determineDate:function(e,t,r,n,a){if(r&&typeof r!=="object"){a=n;n=r;r=null}if(typeof n!=="string"){a=n;n=""}var i=this;var o=function(e){try{return i.parseDate(n,e,a)}catch(l){}e=e.toLowerCase();var t=(e.match(/^c/)&&r?r.newDate():null)||i.today();var o=/([+-]?[0-9]+)\s*(d|w|m|y)?/g;var s=o.exec(e);while(s){t.add(parseInt(s[1],10),s[2]||"d");s=o.exec(e)}return t};t=t?t.newDate():null;e=e==null?t:typeof e==="string"?o(e):typeof e==="number"?isNaN(e)||e===Infinity||e===-Infinity?t:i.today().add(e,"d"):i.newDate(e);return e}})},69862:function(){},40964:function(){},72077:function(e,t,r){"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"];var a=typeof globalThis==="undefined"?r.g:globalThis;e.exports=function e(){var t=[];for(var r=0;r<n.length;r++){if(typeof a[n[r]]==="function"){t[t.length]=n[r]}}return t}},81684:function(e,t,r){"use strict";r.d(t,{sX:function(){return de},k4:function(){return ae}});function n(e,t,r){e.prototype=t.prototype=r;r.constructor=e}function a(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function i(){}var o=.7;var s=1/o;var l="\\s*([+-]?\\d+)\\s*",u="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",f="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c=/^#([0-9a-f]{3,8})$/,v=new RegExp("^rgb\\(".concat(l,",").concat(l,",").concat(l,"\\)$")),h=new RegExp("^rgb\\(".concat(f,",").concat(f,",").concat(f,"\\)$")),p=new RegExp("^rgba\\(".concat(l,",").concat(l,",").concat(l,",").concat(u,"\\)$")),d=new RegExp("^rgba\\(".concat(f,",").concat(f,",").concat(f,",").concat(u,"\\)$")),g=new RegExp("^hsl\\(".concat(u,",").concat(f,",").concat(f,"\\)$")),y=new RegExp("^hsla\\(".concat(u,",").concat(f,",").concat(f,",").concat(u,"\\)$"));var m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};n(i,T,{copy:function e(t){return Object.assign(new this.constructor,this,t)},displayable:function e(){return this.rgb().displayable()},hex:x,formatHex:x,formatHex8:b,formatHsl:_,formatRgb:w,toString:w});function x(){return this.rgb().formatHex()}function b(){return this.rgb().formatHex8()}function _(){return R(this).formatHsl()}function w(){return this.rgb().formatRgb()}function T(e){var t,r;e=(e+"").trim().toLowerCase();return(t=c.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?k(t):r===3?new E(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?A(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?A(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=v.exec(e))?new E(t[1],t[2],t[3],1):(t=h.exec(e))?new E(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=p.exec(e))?A(t[1],t[2],t[3],t[4]):(t=d.exec(e))?A(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=g.exec(e))?z(t[1],t[2]/100,t[3]/100,1):(t=y.exec(e))?z(t[1],t[2]/100,t[3]/100,t[4]):m.hasOwnProperty(e)?k(m[e]):e==="transparent"?new E(NaN,NaN,NaN,0):null}function k(e){return new E(e>>16&255,e>>8&255,e&255,1)}function A(e,t,r,n){if(n<=0)e=t=r=NaN;return new E(e,t,r,n)}function M(e){if(!(e instanceof i))e=T(e);if(!e)return new E;e=e.rgb();return new E(e.r,e.g,e.b,e.opacity)}function S(e,t,r,n){return arguments.length===1?M(e):new E(e,t,r,n==null?1:n)}function E(e,t,r,n){this.r=+e;this.g=+t;this.b=+r;this.opacity=+n}n(E,S,a(i,{brighter:function e(t){t=t==null?s:Math.pow(s,t);return new E(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function e(t){t=t==null?o:Math.pow(o,t);return new E(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function e(){return this},clamp:function e(){return new E(O(this.r),O(this.g),O(this.b),P(this.opacity))},displayable:function e(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:L,formatHex:L,formatHex8:C,formatRgb:I,toString:I}));function L(){return"#".concat(D(this.r)).concat(D(this.g)).concat(D(this.b))}function C(){return"#".concat(D(this.r)).concat(D(this.g)).concat(D(this.b)).concat(D((isNaN(this.opacity)?1:this.opacity)*255))}function I(){var e=P(this.opacity);return"".concat(e===1?"rgb(":"rgba(").concat(O(this.r),", ").concat(O(this.g),", ").concat(O(this.b)).concat(e===1?")":", ".concat(e,")"))}function P(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function O(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function D(e){e=O(e);return(e<16?"0":"")+e.toString(16)}function z(e,t,r,n){if(n<=0)e=t=r=NaN;else if(r<=0||r>=1)e=t=NaN;else if(t<=0)e=NaN;return new B(e,t,r,n)}function R(e){if(e instanceof B)return new B(e.h,e.s,e.l,e.opacity);if(!(e instanceof i))e=T(e);if(!e)return new B;if(e instanceof B)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),o=Math.max(t,r,n),s=NaN,l=o-a,u=(o+a)/2;if(l){if(t===o)s=(r-n)/l+(r<n)*6;else if(r===o)s=(n-t)/l+2;else s=(t-r)/l+4;l/=u<.5?o+a:2-o-a;s*=60}else{l=u>0&&u<1?0:s}return new B(s,l,u,e.opacity)}function F(e,t,r,n){return arguments.length===1?R(e):new B(e,t,r,n==null?1:n)}function B(e,t,r,n){this.h=+e;this.s=+t;this.l=+r;this.opacity=+n}n(B,F,a(i,{brighter:function e(t){t=t==null?s:Math.pow(s,t);return new B(this.h,this.s,this.l*t,this.opacity)},darker:function e(t){t=t==null?o:Math.pow(o,t);return new B(this.h,this.s,this.l*t,this.opacity)},rgb:function e(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*r,i=2*n-a;return new E(U(t>=240?t-240:t+120,i,a),U(t,i,a),U(t<120?t+240:t-120,i,a),this.opacity)},clamp:function e(){return new B(N(this.h),j(this.s),j(this.l),P(this.opacity))},displayable:function e(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function e(){var t=P(this.opacity);return"".concat(t===1?"hsl(":"hsla(").concat(N(this.h),", ").concat(j(this.s)*100,"%, ").concat(j(this.l)*100,"%").concat(t===1?")":", ".concat(t,")"))}}));function N(e){e=(e||0)%360;return e<0?e+360:e}function j(e){return Math.max(0,Math.min(1,e||0))}function U(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}function V(e,t,r,n,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*r+(1+3*e+3*i-3*o)*n+o*a)/6}function H(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),a=e[n],i=e[n+1],o=n>0?e[n-1]:2*a-i,s=n<t-1?e[n+2]:2*i-a;return V((r-n/t)*t,o,a,i,s)}}function q(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),a=e[(n+t-1)%t],i=e[n%t],o=e[(n+1)%t],s=e[(n+2)%t];return V((r-n/t)*t,a,i,o,s)}}var G=function(e){return function(){return e}};function Z(e,t){return function(r){return e+r*t}}function Y(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function W(e,t){var r=t-e;return r?Z(e,r>180||r<-180?r-360*Math.round(r/360):r):constant(isNaN(e)?t:e)}function X(e){return(e=+e)===1?J:function(t,r){return r-t?Y(t,r,e):G(isNaN(t)?r:t)}}function J(e,t){var r=t-e;return r?Z(e,r):G(isNaN(e)?t:e)}var K=function e(t){var r=X(t);function n(e,t){var n=r((e=S(e)).r,(t=S(t)).r),a=r(e.g,t.g),i=r(e.b,t.b),o=J(e.opacity,t.opacity);return function(t){e.r=n(t);e.g=a(t);e.b=i(t);e.opacity=o(t);return e+""}}n.gamma=e;return n}(1);function $(e){return function(t){var r=t.length,n=new Array(r),a=new Array(r),i=new Array(r),o,s;for(o=0;o<r;++o){s=S(t[o]);n[o]=s.r||0;a[o]=s.g||0;i[o]=s.b||0}n=e(n);a=e(a);i=e(i);s.opacity=1;return function(e){s.r=n(e);s.g=a(e);s.b=i(e);return s+""}}}var Q=$(H);var ee=$(q);function te(e,t){return(isNumberArray(t)?numberArray:re)(e,t)}function re(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=de(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(e){for(o=0;o<n;++o)i[o]=a[o](e);return i}}function ne(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function ae(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function ie(e){"@babel/helpers - typeof";return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function oe(e,t){var r={},n={},a;if(e===null||ie(e)!=="object")e={};if(t===null||ie(t)!=="object")t={};for(a in t){if(a in e){r[a]=de(e[a],t[a])}else{n[a]=t[a]}}return function(e){for(a in r)n[a]=r[a](e);return n}}var se=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,le=new RegExp(se.source,"g");function ue(e){return function(){return e}}function fe(e){return function(t){return e(t)+""}}function ce(e,t){var r=se.lastIndex=le.lastIndex=0,n,a,i,o=-1,s=[],l=[];e=e+"",t=t+"";while((n=se.exec(e))&&(a=le.exec(t))){if((i=a.index)>r){i=t.slice(r,i);if(s[o])s[o]+=i;else s[++o]=i}if((n=n[0])===(a=a[0])){if(s[o])s[o]+=a;else s[++o]=a}else{s[++o]=null;l.push({i:o,x:ae(n,a)})}r=le.lastIndex}if(r<t.length){i=t.slice(r);if(s[o])s[o]+=i;else s[++o]=i}return s.length<2?l[0]?fe(l[0].x):ue(t):(t=l.length,function(e){for(var r=0,n;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function ve(e,t){if(!t)t=[];var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function he(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function pe(e){"@babel/helpers - typeof";return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function de(e,t){var r=pe(t),n;return t==null||r==="boolean"?G(t):(r==="number"?ae:r==="string"?(n=T(t))?(t=n,K):ce:t instanceof T?K:t instanceof Date?ne:he(t)?ve:Array.isArray(t)?re:typeof t.valueOf!=="function"&&typeof t.toString!=="function"||isNaN(t)?oe:ae)(e,t)}},40402:function(e){"use strict";e.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},83794:function(e){"use strict";e.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},96209:function(e){"use strict";e.exports=JSON.parse('["normal","italic","oblique"]')},15659:function(e){"use strict";e.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},38732:function(e){"use strict";e.exports=JSON.parse('["inherit","initial","unset"]')},41901:function(e){"use strict";e.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}};var t={};function r(n){var a=t[n];if(a!==undefined){return a.exports}var i=t[n]={exports:{}};e[n].call(i.exports,i,i.exports,r);return i.exports}!function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};r.d(t,{a:t});return t}}();!function(){r.d=function(e,t){for(var n in t){if(r.o(t,n)&&!r.o(e,n)){Object.defineProperty(e,n,{enumerable:true,get:t[n]})}}}}();!function(){r.g=function(){if(typeof globalThis==="object")return globalThis;try{return this||new Function("return this")()}catch(e){if(typeof window==="object")return window}}()}();!function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}();!function(){r.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})}}();var n=r(27909);return n}()}))}}]);
//# sourceMappingURL=5576.d6df3aa86a402699cb6e.js.map?v=d6df3aa86a402699cb6e