(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[4589],{34589:(t,e,s)=>{"use strict";s.r(e);s.d(e,{default:()=>Ft});var r=s(95994);var o=s(70278);var i=s(29131);var a=s(14765);var n=s(98034);var l=s(15989);var c=s(89650);var h=s(18453);var p=s(2411);var d=s.n(p);var u=s(47063);var m=s(42632);const g=(0,m.style)({content:" ",height:"var(--jp-toolbar-micro-height)",borderBottom:"var(--jp-border-width) solid var(--jp-toolbar-border-color)",boxShadow:"var(--jp-toolbar-box-shadow)",zIndex:2,width:"100%",background:"var(--jp-toolbar-background)",position:"relative"});const y=(0,m.style)({display:"flex",flexDirection:"column",fontSize:"var(--jp-ui-font-size1)",fontFamily:"var(--jp-ui-font-family)",color:"var(--jp-content-font-color1)",minWidth:"450px",width:"100%"});const f=(0,m.style)({width:"100%",display:"table",borderCollapse:"collapse"});function b(t,e){return(0,m.style)({overflowY:"scroll",height:e-t,borderTop:"solid",borderTopColor:"var(--jp-border-color1)",borderTopWidth:"var(--jp-border-width)"})}const S=(0,m.style)({padding:"6px 12px",display:"table-cell",width:"20%",verticalAlign:"middle"});const v=(0,m.style)({display:"flex",minWidth:"100px",flexWrap:"wrap"});const k=(0,m.style)({height:"32px",$nest:{"& #add-link":{}}});const C=(0,m.style)({});const x=(0,m.style)({padding:"10px",width:"100%",display:"table-row",borderBottom:"solid",borderBottomColor:"var(--jp-border-color1)",borderBottomWidth:"var(--jp-border-width)",verticalAlign:"middle",backgroundColor:"var(--jp-layout-color0)",$nest:{"&:hover #shortcut-keys":{borderColor:"var(--jp-border-color1)",background:"var(--jp-layout-color2)"},"&:hover #add-link":{display:"block"},"&:hover #or":{display:"block"}}});function w(t,e){if(e===0){return t?"20%":"25%"}else{return"0"}}function E(t,e){return(0,m.style)({display:"flex",flexWrap:"wrap",padding:"6px 12px",marginLeft:w(t,e)})}const I=(0,m.style)({color:"var(--jp-error-color1)",marginTop:"9px"});const j=(0,m.style)({lineHeight:"34px",marginLeft:"10px",$nest:{"& button:nth-of-type(1)":{height:"25px",marginRight:"5px",backgroundColor:"var(--jp-border-color0)",color:"white",outline:"none",$nest:{"&:hover":{},"&:active":{outline:"none",border:"none"},"&focus":{outline:"none",border:"none"}}},"& button:nth-of-type(2)":{height:"25px",backgroundColor:"var(--jp-error-color1)",color:"white",outline:"none",$nest:{"&:hover":{},"&:active":{outline:"none",border:"none"},"&focus":{outline:"none",border:"none"}}}}});const _=(0,m.style)({display:"flex",flexWrap:"wrap",$nest:{"&:hover #shortcut-keys":{borderColor:"var(--jp-border-color3)",background:"var(--jp-layout-color3)"}}});const N=(0,m.style)({fontSize:"var(--jp-code-font-size)",fontFamily:"var(--jp-ui-font-family)",display:"flex"});const R=(0,m.style)({borderWidth:"var(--jp-border-width)",borderColor:"var(--jp-layout-color0)",background:"var(--jp-layout-color0)",padding:"5px 6px",borderRadius:"var(--jp-border-radius)",margin:"3px 0"});const L=(0,m.style)({marginRight:"12px",marginLeft:"12px",marginTop:"8px",color:"var(--jp-content-font-color3)",display:"none",$nest:{"&:hover":{display:"block"}}});const A=(0,m.style)({marginRight:"12px",marginLeft:"12px",marginTop:"8px",color:"var(--jp-content-font-color3)",display:"block"});const O=(0,m.style)({marginTop:"10px",marginRight:"2px",marginLeft:"2px"});const B=(0,m.style)({display:"none",background:"var(--jp-brand-color3)",borderColor:"var(--jp-layout-color0)",borderRadius:"var(--jp-border-radius)",borderWidth:"var(--jp-border-width)",margin:"3px 0",padding:"5px 6px",$nest:{"&:hover":{backgroundColor:"var(--jp-brand-color2)"},"&:active":{backgroundColor:"var(--jp-brand-color2)"}}});const T=(0,m.style)({color:"var(--jp-brand-color2)",paddingLeft:"10px",$nest:{"&:hover":{color:"var(--jp-brand-color1)"}}});const z=(0,m.style)({display:"inline-block"});var U=s(51236);const M=(0,m.style)({display:"inline-flex",paddingTop:"2px"});const F=(0,m.style)({marginLeft:"10px"});const $=(0,m.style)({display:"hidden"});const D=(0,m.keyframes)({from:{width:"0",left:"0"},to:{width:"120px",left:"0"}});const W=(0,m.style)({animationDuration:"0.5s",animationTimingFunction:"ease-out",animationName:D,borderWidth:"var(--jp-border-width)",borderColor:"var(--jp-border-color3)",borderStyle:"solid",backgroundColor:"var(--jp-layout-color0)",marginLeft:"auto",paddingLeft:"10px",width:"120px",height:"25px",lineHeight:"25px",display:"block",$nest:{"&:focus":{outline:"none",color:"var(--jp-content-font-color1)",borderColor:"var(--jp-brand-color2)"}}});const K=(0,m.style)({$nest:{"&:focus":{borderColor:"var(--jp-error-color2)"}}});const H=(0,m.style)({overflowX:"hidden",overflowY:"hidden",margin:"0",marginTop:"4px",padding:"0 5px",height:"17px",lineHeight:"17px",width:"fit-content"});const P=(0,m.style)({backgroundColor:"var(--jp-brand-color3)",overflow:"hidden"});const Q=(0,m.style)({color:"var(--jp-content-font-color3)"});const Y=(0,m.style)({background:"var(--jp-brand-color1)",borderRadius:"0px",border:"none",color:"var(--jp-layout-color0)",fontFamily:"var(--jp-ui-font-family)",display:"block",height:"27px",backgroundImage:"var( --jp-icon-checkmark-white )",backgroundRepeat:"no-repeat",width:"26px",$nest:{"&:focus":{outline:"none"}}});const X=(0,m.style)({backgroundImage:"var( --jp-icon-checkmark-white )",background:"var(--jp-layout-color3)"});const J=(0,m.style)({background:"var(--jp-error-color1)",backgroundImage:"var(--jp-icon-error-white )",backgroundRepeat:"no-repeat",backgroundSize:"20px",backgroundPositionX:"2px",backgroundPositionY:"2px",border:"none"});class q{constructor(){this.commandName="";this.label="";this.keys={};this.source="";this.selector="";this.category="";this.id="";this.numberOfShortcuts=0;this.hasConflict=false}get(t){if(t==="label"){return this.label}else if(t==="selector"){return this.selector}else if(t==="category"){return this.category}else if(t==="source"){return this.source}else{return""}}}class G extends q{constructor(){super();this.takenBy=new V}}class V{constructor(t){if(t){this.takenBy=t;this.takenByKey="";this.takenByLabel=t.category+": "+t.label;this.id=t.commandName+"_"+t.selector}else{this.takenBy=new q;this.takenByKey="";this.takenByLabel="";this.id=""}}}class Z extends p.Component{constructor(t){super(t);this.handleUpdate=()=>{let t=this.state.keys;t.push(this.state.currentChain);this.setState({keys:t});this.props.handleUpdate(this.props.shortcut,this.state.keys)};this.handleOverwrite=async()=>{this.props.deleteShortcut(this.state.takenByObject.takenBy,this.state.takenByObject.takenByKey).then(this.handleUpdate())};this.handleReplace=async()=>{let t=this.state.keys;t.push(this.state.currentChain);this.props.toggleInput();await this.props.deleteShortcut(this.props.shortcut,this.props.shortcutId);this.props.handleUpdate(this.props.shortcut,t)};this.parseChaining=(t,e,s,r,o)=>{let i=U.EN_US.keyForKeydownEvent(t.nativeEvent);const a=["Shift","Control","Alt","Meta","Ctrl","Accel"];if(t.key==="Backspace"){s="";e="";r=[];o="";this.setState({value:e,userInput:s,keys:r,currentChain:o})}else if(t.key!=="CapsLock"){const e=s.substr(s.lastIndexOf(" ")+1,s.length).trim();if(a.lastIndexOf(e)===-1&&e!=""){s=s+",";r.push(o);o="";if(t.ctrlKey&&t.key!="Control"){s=(s+" Ctrl").trim();o=(o+" Ctrl").trim()}if(t.metaKey&&t.key!="Meta"){s=(s+" Accel").trim();o=(o+" Accel").trim()}if(t.altKey&&t.key!="Alt"){s=(s+" Alt").trim();o=(o+" Alt").trim()}if(t.shiftKey&&t.key!="Shift"){s=(s+" Shift").trim();o=(o+" Shift").trim()}if(a.lastIndexOf(t.key)===-1){s=(s+" "+i).trim();o=(o+" "+i).trim()}else{if(t.key==="Meta"){s=(s+" Accel").trim();o=(o+" Accel").trim()}else if(t.key==="Control"){s=(s+" Ctrl").trim();o=(o+" Ctrl").trim()}else if(t.key==="Shift"){s=(s+" Shift").trim();o=(o+" Shift").trim()}else if(t.key==="Alt"){s=(s+" Alt").trim();o=(o+" Alt").trim()}else{s=(s+" "+t.key).trim();o=(o+" "+t.key).trim()}}}else{if(t.key==="Control"){s=(s+" Ctrl").trim();o=(o+" Ctrl").trim()}else if(t.key==="Meta"){s=(s+" Accel").trim();o=(o+" Accel").trim()}else if(t.key==="Shift"){s=(s+" Shift").trim();o=(o+" Shift").trim()}else if(t.key==="Alt"){s=(s+" Alt").trim();o=(o+" Alt").trim()}else{s=(s+" "+i).trim();o=(o+" "+i).trim()}}}this.setState({keys:r,currentChain:o});return[s,r,o]};this.checkNonFunctional=t=>{const e=["Ctrl","Alt","Accel","Shift"];const s=this.state.currentChain.split(" ");const r=s[s.length-1];this.setState({isFunctional:!(e.indexOf(r)!==-1)});return e.indexOf(r)!==-1};this.checkShortcutAvailability=(t,e,s)=>{let r=Object.keys(this.props.keyBindingsUsed).indexOf(e.join(" ")+s+"_"+this.props.shortcut.selector)===-1||t==="";let o=new V;if(r){for(let t of e){if(Object.keys(this.props.keyBindingsUsed).indexOf(t+"_"+this.props.shortcut.selector)!==-1&&t!==""){r=false;o=this.props.keyBindingsUsed[t+"_"+this.props.shortcut.selector];break}}if(r&&Object.keys(this.props.keyBindingsUsed).indexOf(s+"_"+this.props.shortcut.selector)!==-1&&s!==""){r=false;o=this.props.keyBindingsUsed[s+"_"+this.props.shortcut.selector]}}else{o=this.props.keyBindingsUsed[e.join(" ")+s+"_"+this.props.shortcut.selector]}if(!r){if(o.takenBy.id===this.props.shortcut.id&&this.props.newOrReplace==="replace"){r=true;o=new V}}this.setState({isAvailable:r});return o};this.handleInput=t=>{t.preventDefault();this.setState({selected:false});const e=this.parseChaining(t,this.state.value,this.state.userInput,this.state.keys,this.state.currentChain);const s=e[0];const r=e[1];const o=e[2];const i=this.props.toSymbols(s);let a=this.checkShortcutAvailability(s,r,o);this.checkConflict(a,r);this.setState({value:i,userInput:s,takenByObject:a,keys:r,currentChain:o},(()=>this.checkNonFunctional(this.state.userInput)))};this.handleBlur=t=>{if(t.relatedTarget===null||t.relatedTarget.id!=="no-blur"&&t.relatedTarget.id!=="overwrite"){this.props.toggleInput();this.setState({value:"",userInput:""});this.props.clearConflicts()}};this.state={value:this.props.placeholder,userInput:"",isAvailable:true,isFunctional:this.props.newOrReplace==="replace",takenByObject:new V,keys:new Array,currentChain:"",selected:true}}checkConflict(t,e){if(t.id!==""&&t.takenBy.id!==this.props.shortcut.id){this.props.sortConflict(this.props.shortcut,t,t.takenByLabel,"")}else{this.props.clearConflicts()}}render(){const t=this.props.translator.load("jupyterlab");let e=W;if(!this.state.isAvailable){e=(0,m.classes)(e,K)}return p.createElement("div",{className:this.props.displayInput?this.props.newOrReplace==="new"?(0,m.classes)(M,F):M:$,onBlur:t=>this.handleBlur(t)},p.createElement("div",{tabIndex:0,id:"no-blur",className:e,onKeyDown:this.handleInput,ref:t=>t&&t.focus()},p.createElement("p",{className:this.state.selected&&this.props.newOrReplace==="replace"?(0,m.classes)(H,P):this.state.value===""?(0,m.classes)(H,Q):H},this.state.value===""?t.__("press keys"):this.state.value)),p.createElement("button",{className:!this.state.isFunctional?(0,m.classes)(Y,X):!this.state.isAvailable?(0,m.classes)(Y,J):(0,m.classes)(Y),id:"no-blur",disabled:!this.state.isAvailable||!this.state.isFunctional,onClick:()=>{if(this.props.newOrReplace==="new"){this.handleUpdate();this.setState({value:"",keys:[],currentChain:""});this.props.toggleInput()}else{if(this.state.selected){this.props.toggleInput();this.setState({value:"",userInput:""});this.props.clearConflicts()}else{void this.handleReplace()}}}}),!this.state.isAvailable&&p.createElement("button",{hidden:true,id:"overwrite",onClick:()=>{void this.handleOverwrite();this.props.clearConflicts();this.props.toggleInput()}},t.__("Overwrite")))}}var tt;(function(t){t[t["Left"]=0]="Left";t[t["Right"]=1]="Right"})(tt||(tt={}));function et(t){return{shortcutEditLeft:{commandId:"shortcutui:EditLeft",label:t.__("Edit First"),caption:t.__("Edit existing shortcut")},shortcutEditRight:{commandId:"shortcutui:EditRight",label:t.__("Edit Second"),caption:t.__("Edit existing shortcut")},shortcutEdit:{commandId:"shortcutui:Edit",label:t.__("Edit"),caption:t.__("Edit existing shortcut")},shortcutAddNew:{commandId:"shortcutui:AddNew",label:t.__("Add"),caption:t.__("Add new shortcut")},shortcutAddAnother:{commandId:"shortcutui:AddAnother",label:t.__("Add"),caption:t.__("Add another shortcut")},shortcutReset:{commandId:"shortcutui:Reset",label:t.__("Reset"),caption:t.__("Reset shortcut back to default")}}}class st extends p.Component{constructor(t){super(t);this.toggleInputNew=()=>{this.setState({displayNewInput:!this.state.displayNewInput})};this.toggleInputReplaceLeft=()=>{this.setState({displayReplaceInputLeft:!this.state.displayReplaceInputLeft})};this.toggleInputReplaceRight=()=>{this.setState({displayReplaceInputRight:!this.state.displayReplaceInputRight})};this.addCommandIfNeeded=(t,e)=>{const s=this.props.shortcut.commandName+"_"+this.props.shortcut.selector;if(!this.props.external.hasCommand(t.commandId+s)){this.props.external.addCommand(t.commandId+s,{label:t.label,caption:t.caption,execute:e})}};this.handleRightClick=t=>{this.addCommandIfNeeded(this._commands.shortcutEdit,(()=>this.toggleInputReplaceLeft()));this.addCommandIfNeeded(this._commands.shortcutEditLeft,(()=>this.toggleInputReplaceLeft()));this.addCommandIfNeeded(this._commands.shortcutEditRight,(()=>this.toggleInputReplaceRight()));this.addCommandIfNeeded(this._commands.shortcutAddNew,(()=>this.toggleInputNew()));this.addCommandIfNeeded(this._commands.shortcutAddAnother,(()=>this.toggleInputNew()));this.addCommandIfNeeded(this._commands.shortcutReset,(()=>this.props.resetShortcut(this.props.shortcut)));const e=this.props.shortcut.commandName+"_"+this.props.shortcut.selector;this.setState({numShortcuts:Object.keys(this.props.shortcut.keys).filter((t=>this.props.shortcut.keys[t][0]!=="")).length},(()=>{let s=[];if(this.state.numShortcuts==2){s=s.concat([this._commands.shortcutEditLeft.commandId+e,this._commands.shortcutEditRight.commandId+e])}else if(this.state.numShortcuts==1){s=s.concat([this._commands.shortcutEdit.commandId+e,this._commands.shortcutAddAnother.commandId+e])}else{s=s.concat([this._commands.shortcutAddNew.commandId+e])}if(this.props.shortcut.source==="Custom"){s=s.concat([this._commands.shortcutReset.commandId+e])}this.props.contextMenu(t,s)}))};this.toSymbols=t=>t.split(" ").reduce(((t,e)=>{if(e==="Ctrl"){return(t+" ⌃").trim()}else if(e==="Alt"){return(t+" ⌥").trim()}else if(e==="Shift"){return(t+" ⇧").trim()}else if(e==="Accel"&&c.Platform.IS_MAC){return(t+" ⌘").trim()}else if(e==="Accel"){return(t+" ⌃").trim()}else{return(t+" "+e).trim()}}),"");this._commands=et(t.external.translator.load("jupyterlab"));this.state={displayNewInput:false,displayReplaceInputLeft:false,displayReplaceInputRight:false,numShortcuts:Object.keys(this.props.shortcut.keys).filter((t=>this.props.shortcut.keys[t][0]!=="")).length}}getErrorRow(){const t=this.props.external.translator.load("jupyterlab");return p.createElement("div",{className:(0,m.classes)(x)},p.createElement("div",{className:E(this.props.showSelectors,this.props.errorSize)},p.createElement("div",{className:I},t.__("Shortcut already in use by %1. Overwrite it?",this.props.shortcut.takenBy.takenByLabel)),p.createElement("div",{className:j},p.createElement("button",null,t.__("Cancel")),p.createElement("button",{id:"no-blur",onClick:()=>{var t;(t=document.getElementById("overwrite"))===null||t===void 0?void 0:t.click()}},t.__("Overwrite")))))}getCategoryCell(){return p.createElement("div",{className:S},this.props.shortcut.category)}getLabelCell(){return p.createElement("div",{className:S},p.createElement("div",{className:"jp-label"},this.props.shortcut.label))}getResetShortCutLink(){const t=this.props.external.translator.load("jupyterlab");return p.createElement("a",{className:T,onClick:()=>this.props.resetShortcut(this.props.shortcut)},t.__("Reset"))}getSourceCell(){return p.createElement("div",{className:S},p.createElement("div",{className:z},this.props.shortcut.source),this.props.shortcut.source==="Custom"&&this.getResetShortCutLink())}getOptionalSelectorCell(){return this.props.showSelectors?p.createElement("div",{className:S},p.createElement("div",{className:"jp-selector"},this.props.shortcut.selector)):p.createElement("div",null)}getClassNameForShortCuts(t){return t.length===0?(0,m.classes)(v,k):t.length===1?(0,m.classes)(v,C):v}getToggleInputReplaceMethod(t){switch(t){case tt.Left:return this.toggleInputReplaceLeft;case tt.Right:return this.toggleInputReplaceRight}}getDisplayReplaceInput(t){switch(t){case tt.Left:return this.state.displayReplaceInputLeft;case tt.Right:return this.state.displayReplaceInputRight}}getOrDiplayIfNeeded(t){const e=this.props.external.translator.load("jupyterlab");return p.createElement("div",{className:t.length==2||this.state.displayNewInput?A:L,id:t.length==2?"secondor":this.state.displayReplaceInputLeft?"noor":"or"},e.__("or"))}getShortCutAsInput(t,e){return p.createElement(Z,{handleUpdate:this.props.handleUpdate,deleteShortcut:this.props.deleteShortcut,toggleInput:this.getToggleInputReplaceMethod(e),shortcut:this.props.shortcut,shortcutId:t,toSymbols:this.toSymbols,keyBindingsUsed:this.props.keyBindingsUsed,sortConflict:this.props.sortConflict,clearConflicts:this.props.clearConflicts,displayInput:this.getDisplayReplaceInput(e),newOrReplace:"replace",placeholder:this.toSymbols(this.props.shortcut.keys[t].join(", ")),translator:this.props.external.translator})}getShortCutForDisplayOnly(t){return this.props.shortcut.keys[t].map(((e,s)=>p.createElement("div",{className:N,key:s},p.createElement("div",{className:R,id:"shortcut-keys"},this.toSymbols(e)),s+1<this.props.shortcut.keys[t].length?p.createElement("div",{className:O},","):null)))}isLocationBeingEdited(t){return t===tt.Left&&this.state.displayReplaceInputLeft||t===tt.Right&&this.state.displayReplaceInputRight}getLocationFromIndex(t){return t===0?tt.Left:tt.Right}getDivForKey(t,e,s){const r=this.getLocationFromIndex(t);return p.createElement("div",{className:_,key:this.props.shortcut.id+"_"+t,onClick:this.getToggleInputReplaceMethod(r)},this.isLocationBeingEdited(r)?this.getShortCutAsInput(e,r):this.getShortCutForDisplayOnly(e),r===tt.Left&&this.getOrDiplayIfNeeded(s))}getAddLink(){const t=this.props.external.translator.load("jupyterlab");return p.createElement("a",{className:!this.state.displayNewInput?B:"",onClick:()=>{this.toggleInputNew(),this.props.clearConflicts()},id:"add-link"},t.__("Add"))}getInputBoxWhenToggled(){return this.state.displayNewInput?p.createElement(Z,{handleUpdate:this.props.handleUpdate,deleteShortcut:this.props.deleteShortcut,toggleInput:this.toggleInputNew,shortcut:this.props.shortcut,shortcutId:"",toSymbols:this.toSymbols,keyBindingsUsed:this.props.keyBindingsUsed,sortConflict:this.props.sortConflict,clearConflicts:this.props.clearConflicts,displayInput:this.state.displayNewInput,newOrReplace:"new",placeholder:"",translator:this.props.external.translator}):p.createElement("div",null)}getShortCutsCell(t){return p.createElement("div",{className:S},p.createElement("div",{className:this.getClassNameForShortCuts(t)},t.map(((e,s)=>this.getDivForKey(s,e,t))),t.length===1&&!this.state.displayNewInput&&!this.state.displayReplaceInputLeft&&this.getAddLink(),t.length===0&&!this.state.displayNewInput&&this.getAddLink(),this.getInputBoxWhenToggled()))}render(){const t=Object.keys(this.props.shortcut.keys).filter((t=>this.props.shortcut.keys[t][0]!==""));if(this.props.shortcut.id==="error_row"){return this.getErrorRow()}else{return p.createElement("div",{className:x,onContextMenu:t=>{t.persist();this.handleRightClick(t)}},this.getCategoryCell(),this.getLabelCell(),this.getShortCutsCell(t),this.getSourceCell(),this.getOptionalSelectorCell())}}}const rt=115;class ot extends p.Component{render(){return p.createElement("div",{className:b(rt,this.props.height),id:"shortcutListContainer"},p.createElement("div",{className:f},this.props.shortcuts.map((t=>p.createElement(st,{key:t.commandName+"_"+t.selector,resetShortcut:this.props.resetShortcut,shortcut:t,handleUpdate:this.props.handleUpdate,deleteShortcut:this.props.deleteShortcut,showSelectors:this.props.showSelectors,keyBindingsUsed:this.props.keyBindingsUsed,sortConflict:this.props.sortConflict,clearConflicts:this.props.clearConflicts,errorSize:this.props.errorSize,contextMenu:this.props.contextMenu,external:this.props.external})))))}}const it=(0,m.style)({display:"block"});const at=(0,m.style)({display:"flex",alignItems:"center",boxSizing:"border-box",fontSize:"var(--jp-ui-font-size1)",backgroundColor:"var(--jp-layout-color0)",zIndex:1,height:"56px"});const nt=(0,m.style)({width:"15%",display:"table",paddingLeft:"12px",lineHeight:"24px",paddingTop:"5px"});const lt=(0,m.style)({lineHeight:"14px"});const ct=(0,m.style)({justifyContent:"center",marginBottom:"8px",display:"table-row",$nest:{"& div":{margin:"0px 10px",fontSize:"var(--jp-ui-font-size1)",display:"table-cell"},"& span":{fontSize:"var(--jp-ui-font-size1)"}}});const ht=(0,m.style)({width:"60%",textAlign:"center"});const pt=(0,m.style)({borderWidth:"var(--jp-border-width)",borderStyle:"solid",borderColor:"var(--jp-layout-color3)",height:"30px",width:"65%",fontSize:"var(--jp-ui-font-size1)",color:"var(--jp-ui-font-color0)",paddingLeft:"6px",backgroundColor:"var(--jp-layout-color1)",backgroundImage:"var(--jp-icon-search)",backgroundSize:"18px",backgroundPositionY:"6px",backgroundPositionX:"98%",backgroundRepeat:"no-repeat",marginTop:"8px",outline:"none",$nest:{"&:focus":{border:"var(--jp-border-width) solid var(--md-blue-500)",boxShadow:"inset 0 0 4px var(--md-blue-300)"},"&::placeholder":{color:"var(--jp-ui-font-color2)"}}});const dt=(0,m.style)({display:"contents"});const ut=(0,m.style)({display:"block",paddingTop:"5px"});const mt=(0,m.style)({width:"30%"});const gt=(0,m.style)({marginTop:"8px"});function yt(t){if(t===0){return(0,m.style)({color:"var(--jp-brand-color2)",textDecoration:"none",marginRight:"15px",$nest:{"&:hover":{color:"var(--jp-brand-color1)"},"&:active":{color:"var(--jp-brand-color0)"}}})}else{return(0,m.style)({color:"var(--jp-brand-color2)",textDecoration:"none",textAlign:"center",display:"block",$nest:{"&:hover":{color:"var(--jp-brand-color1)"},"&:active":{color:"var(--jp-brand-color0)"}}})}}const ft=(0,m.style)({paddingRight:"14px"});const bt=(0,m.style)({fontWeight:"bold",fontSize:"var(--jp-ui-font-size1)",backgroundColor:"var(--jp-layout-color0)",width:"100%",zIndex:1,display:"table",padding:"10px 0"});const St=(0,m.style)({marginRight:"13px"});const vt=(0,m.style)({marginLeft:"14px"});const kt=(0,m.style)({marginLeft:"8px",marginRight:"16px"});const Ct=(0,m.style)({display:"flex",$nest:{"&:hover div":{fontWeight:600,color:"var(--jp-ui-font-color0)"},"&:focus div":{outline:"none"},"&:active div":{fontWeight:600,color:"var(--jp-ui-font-color0)"}}});const xt=(0,m.style)({$nest:{"& div":{color:"var(--jp-ui-font-color0)",fontWeight:"bold"}}});const wt=(0,m.style)({transform:"rotate(180deg)",marginLeft:"10px",color:"var(--jp-ui-font-color2)",border:"none",backgroundColor:"var(--jp-layout-color0)",fontSize:"var(--jp-ui-font-size1)"});class Et extends p.Component{render(){return p.createElement("div",{className:this.props.title.toLowerCase()===this.props.active?(0,m.classes)(Ct,xt):Ct,onClick:()=>this.props.updateSort(this.props.title.toLowerCase())},this.props.title,p.createElement("div",{className:wt},"⌃"))}}var It;(function(t){t.showSelectors="shortcutui:showSelectors";t.resetAll="shortcutui:resetAll"})(It||(It={}));class jt extends p.Component{getRegularSymbols(){return p.createElement("div",{className:nt},p.createElement("div",{className:ct},p.createElement("div",null,"Cmd ⌘"),p.createElement("div",null,"Alt ⌥"),p.createElement("div",null,"Ctrl ⌃"),p.createElement("div",null,"Shift ⇧")))}getSmallSymbols(){return p.createElement("div",{className:(0,m.classes)(nt,lt)},p.createElement("div",{className:ct},p.createElement("span",null,"Cmd "),p.createElement("span",{className:St},"⌘"),p.createElement("span",null,"Alt "),p.createElement("span",{className:vt},"⌥")),p.createElement("div",{className:ct},p.createElement("span",null,"Ctrl "),p.createElement("span",{className:kt},"⌃"),p.createElement("span",null,"Shift "),p.createElement("span",null,"⇧")))}getTinySymbols(){return p.createElement("div",{className:(0,m.classes)(nt,lt)},p.createElement("div",{className:ct},p.createElement("span",null,"Cmd"),p.createElement("span",null,"⌘")),p.createElement("div",{className:ct},p.createElement("span",null,"Alt"),p.createElement("span",null,"⌥")),p.createElement("div",{className:ct},p.createElement("span",null,"Ctrl"),p.createElement("span",null,"⌃")),p.createElement("div",{className:ct},p.createElement("span",null,"Shift"),p.createElement("span",null,"⇧")))}render(){switch(this.props.size){case 0:return this.getRegularSymbols();case 1:return this.getSmallSymbols();case 2:return this.getTinySymbols()}}}class _t extends p.Component{render(){const t=this.props.translator.load("jupyterlab");if(this.props.size===0){return p.createElement("div",{className:dt},p.createElement("div",{className:ut},p.createElement("a",{className:yt(this.props.size),onClick:()=>this.props.toggleSelectors()},this.props.showSelectors?t.__("Hide Selectors"):t.__("Show Selectors")),p.createElement("a",{className:(0,m.classes)(yt(this.props.size)),onClick:()=>this.props.resetShortcuts()},t.__("Reset All"))))}else{return p.createElement("div",{className:(0,m.classes)(ut,mt)},p.createElement("a",{className:yt(this.props.size),onClick:()=>this.props.toggleSelectors()},this.props.showSelectors?t.__("Hide Selectors"):t.__("Show Selectors")),p.createElement("a",{className:(0,m.classes)(yt(this.props.size)),onClick:()=>this.props.resetShortcuts()},t.__("Reset All")))}}}class Nt extends p.Component{constructor(t){super(t);this.getSize=t=>{if(t<730){return 2}else if(t<1260){return 1}else{return 0}};this.addMenuCommands();this.menu=this.props.external.createMenu();this.menu.addItem({command:It.showSelectors});this.menu.addItem({command:It.resetAll})}addMenuCommands(){const t=this.props.external.translator.load("jupyterlab");if(!this.props.external.hasCommand(It.showSelectors)){this.props.external.addCommand(It.showSelectors,{label:t.__("Toggle Selectors"),caption:t.__("Toggle command selectors"),execute:()=>{this.props.toggleSelectors()}})}if(!this.props.external.hasCommand(It.resetAll)){this.props.external.addCommand(It.resetAll,{label:t.__("Reset All"),caption:t.__("Reset all shortcuts"),execute:()=>{this.props.resetShortcuts()}})}}getShortCutTitleItem(t){return p.createElement("div",{className:S},p.createElement(Et,{title:t,updateSort:this.props.updateSort,active:this.props.currentSort}))}render(){const t=this.props.external.translator.load("jupyterlab");return p.createElement("div",{className:it},p.createElement("div",{className:at},p.createElement(jt,{size:this.getSize(this.props.width)}),p.createElement("div",{className:ht},p.createElement("input",{onChange:t=>this.props.updateSearchQuery(t),className:pt,placeholder:t.__("Search")})),p.createElement(_t,{size:this.getSize(this.props.width),toggleSelectors:this.props.toggleSelectors,showSelectors:this.props.showSelectors,resetShortcuts:this.props.resetShortcuts,menu:this.menu,translator:this.props.external.translator})),p.createElement("div",{className:ft},p.createElement("div",{className:bt},this.getShortCutTitleItem(t.__("Category")),this.getShortCutTitleItem(t.__("Command")),p.createElement("div",{className:S},p.createElement("div",{className:"title-div"},t.__("Shortcut"))),this.getShortCutTitleItem(t.__("Source")),this.props.showSelectors&&this.getShortCutTitleItem(t.__("Selectors")))))}}function Rt(t){return t.replace(/\s+/g,"").toLowerCase()}function Lt(t,e){const s=t.category.toLowerCase();const r=t["label"].toLowerCase();const o=`${s} ${r}`;let i=Infinity;let a=null;const n=/\b\w/g;while(true){const t=n.exec(o);if(!t){break}const s=u.StringExt.matchSumOfDeltas(o,e,t.index);if(!s){break}if(s&&s.score<=i){i=s.score;a=s.indices}}if(!a||i===Infinity){return null}const l=s.length+1;const c=u.ArrayExt.lowerBound(a,l,((t,e)=>t-e));const h=a.slice(0,c);const p=a.slice(c);for(let d=0,u=p.length;d<u;++d){p[d]-=l}if(h.length===0){return{matchType:0,categoryIndices:null,labelIndices:p,score:i,item:t}}if(p.length===0){return{matchType:1,categoryIndices:h,labelIndices:null,score:i,item:t}}return{matchType:2,categoryIndices:h,labelIndices:p,score:i,item:t}}function At(t,e){e=Rt(e);let s=[];let r=Object.keys(t);for(let o=0,i=r.length;o<i;++o){let i=t[r[o]];if(!e){s.push({matchType:3,categoryIndices:null,labelIndices:null,score:0,item:i});continue}let a=Lt(i,e);if(!a){continue}s.push(a)}return s}function Ot(t,e){const s=e.composite.shortcuts;let r={};s.forEach((e=>{let s=e.command+"_"+e.selector;if(Object.keys(r).indexOf(s)!==-1){let t=r[s].numberOfShortcuts;r[s].keys[t]=e.keys;r[s].numberOfShortcuts++}else{let o=new q;o.commandName=e.command;let i=t.getLabel(e.command);if(!i){i=e.command.split(":")[1]}o.label=i;o.category=e.command.split(":")[0];o.keys[0]=e.keys;o.selector=e.selector;o.source="Default";o.id=s;o.numberOfShortcuts=1;r[s]=o}}));const o=e.user.shortcuts;o.forEach((t=>{const e=t.command;const s=t.selector;const o=e+"_"+s;if(r[o]){r[o].source="Custom"}}));return r}function Bt(t){let e={};Object.keys(t).forEach((s=>{Object.keys(t[s].keys).forEach((r=>{const o=new V(t[s]);o.takenByKey=r;e[t[s].keys[r].join(" ")+"_"+t[s].selector]=o}))}));return e}class Tt extends p.Component{constructor(t){super(t);this.updateSearchQuery=t=>{this.setState({searchQuery:t.target["value"]},(()=>this.setState({filteredShortcutList:this.searchFilterShortcuts(this.state.shortcutList)},(()=>{this.sortShortcuts()}))))};this.resetShortcuts=async()=>{const t=await this.props.external.getAllShortCutSettings();for(const e of Object.keys(t.user)){await this.props.external.removeShortCut(e)}await this._refreshShortcutList()};this.handleUpdate=async(t,e)=>{const s=await this.props.external.getAllShortCutSettings();const r=s.user.shortcuts;const o=[];let i=false;for(let a of r){if(a["command"]===t.commandName&&a["selector"]===t.selector){o.push({command:a["command"],selector:a["selector"],keys:e});i=true}else{o.push(a)}}if(!i){o.push({command:t.commandName,selector:t.selector,keys:e})}await s.set("shortcuts",o);await this._refreshShortcutList()};this.deleteShortcut=async(t,e)=>{await this.handleUpdate(t,[""]);await this._refreshShortcutList()};this.resetShortcut=async t=>{const e=await this.props.external.getAllShortCutSettings();const s=e.user.shortcuts;const r=[];for(let o of s){if(o["command"]!==t.commandName||o["selector"]!==t.selector){r.push(o)}}await e.set("shortcuts",r);await this._refreshShortcutList()};this.toggleSelectors=()=>{this.setState({showSelectors:!this.state.showSelectors})};this.updateSort=t=>{if(t!==this.state.currentSort){this.setState({currentSort:t},this.sortShortcuts)}};this.sortConflict=(t,e)=>{const s=this.state.filteredShortcutList;if(s.filter((t=>t.id==="error_row")).length===0){const r=new G;r.takenBy=e;r.id="error_row";s.splice(s.indexOf(t)+1,0,r);r.hasConflict=true;this.setState({filteredShortcutList:s})}};this.clearConflicts=()=>{const t=this.state.filteredShortcutList.filter((t=>t.id!=="error_row"));t.forEach((t=>{t.hasConflict=false}));this.setState({filteredShortcutList:t})};this.contextMenu=(t,e)=>{t.persist();this.setState({contextMenu:this.props.external.createMenu()},(()=>{t.preventDefault();for(let t of e){this.state.contextMenu.addItem({command:t})}this.state.contextMenu.open(t.clientX,t.clientY)}))};this.state={shortcutList:{},filteredShortcutList:new Array,shortcutsFetched:false,searchQuery:"",showSelectors:false,currentSort:"category",keyBindingsUsed:{},contextMenu:this.props.external.createMenu()}}componentDidMount(){void this._refreshShortcutList()}async _refreshShortcutList(){const t=await this.props.external.getAllShortCutSettings();const e=Ot(this.props.external,t);this.setState({shortcutList:e,filteredShortcutList:this.searchFilterShortcuts(e),shortcutsFetched:true},(()=>{let t=Bt(e);this.setState({keyBindingsUsed:t});this.sortShortcuts()}))}searchFilterShortcuts(t){const e=At(t,this.state.searchQuery).map((t=>t.item));return e}sortShortcuts(){const t=this.state.filteredShortcutList;let e=this.state.currentSort;if(e==="command"){e="label"}if(e!==""){t.sort(((t,s)=>{const r=t.get(e);const o=s.get(e);if(r<o){return-1}else if(r>o){return 1}else{return t["label"]<s["label"]?-1:t["label"]>s["label"]?1:0}}))}this.setState({filteredShortcutList:t})}render(){if(!this.state.shortcutsFetched){return null}return p.createElement("div",{className:y,id:"jp-shortcutui"},p.createElement("div",{className:g}),p.createElement(Nt,{updateSearchQuery:this.updateSearchQuery,resetShortcuts:this.resetShortcuts,toggleSelectors:this.toggleSelectors,showSelectors:this.state.showSelectors,updateSort:this.updateSort,currentSort:this.state.currentSort,width:this.props.width,external:this.props.external}),p.createElement(ot,{shortcuts:this.state.filteredShortcutList,resetShortcut:this.resetShortcut,handleUpdate:this.handleUpdate,deleteShortcut:this.deleteShortcut,showSelectors:this.state.showSelectors,keyBindingsUsed:this.state.keyBindingsUsed,sortConflict:this.sortConflict,clearConflicts:this.clearConflicts,height:this.props.height,errorSize:this.props.width<775?1:0,contextMenu:this.contextMenu,external:this.props.external}))}}const zt=t=>d().createElement(Tt,{external:t.external,height:1e3,width:1e3});function Ut(t,e,s){const{commands:r}=e;const o="@jupyterlab/shortcuts-extension:shortcuts";return{translator:s,getAllShortCutSettings:()=>t.reload(o),removeShortCut:e=>t.remove(o,e),createMenu:()=>new h.Menu({commands:r}),hasCommand:t=>r.hasCommand(t),addCommand:(t,e)=>r.addCommand(t,e),getLabel:t=>r.label(t)}}const Mt={id:"@jupyterlab/shortcuts-extension:shortcuts",requires:[r.ISettingRegistry],optional:[o.ITranslator,i.IFormComponentRegistry],activate:async(t,e,s,i)=>{const l=s!==null&&s!==void 0?s:o.nullTranslator;const h=l.load("jupyterlab");const{commands:p}=t;let d;let u={};if(i){i.addRenderer("shortcuts",(s=>zt(Object.assign({external:Ut(e,t,l)},s))))}function m(s){const r=t.commands.listCommands().join("\n");u={};s.properties.shortcuts.default=Object.keys(e.plugins).map((t=>{const s=e.plugins[t].schema["jupyter.lab.shortcuts"]||[];u[t]=s;return s})).concat([s.properties.shortcuts.default]).reduce(((t,e)=>{if(c.Platform.IS_MAC){return t.concat(e)}else{return t.concat(e.filter((t=>!t.keys.some((t=>{const{cmd:e}=a.CommandRegistry.parseKeystroke(t);return e})))))}}),[]).sort(((t,e)=>t.command.localeCompare(e.command)));s.properties.shortcuts.description=h.__(`Note: To disable a system default shortcut,\ncopy it to User Preferences and add the\n"disabled" key, for example:\n{\n    "command": "application:activate-next-tab",\n    "keys": [\n        "Ctrl Shift ]"\n    ],\n    "selector": "body",\n    "disabled": true\n}\n\nList of commands followed by keyboard shortcuts:\n%1\n\nList of keyboard shortcuts:`,r)}e.pluginChanged.connect((async(t,s)=>{if(s!==Mt.id){const t=u[s];const r=e.plugins[s].schema["jupyter.lab.shortcuts"]||[];if(t===undefined||!n.JSONExt.deepEqual(t,r)){d=null;await e.reload(Mt.id)}}}));e.transform(Mt.id,{compose:t=>{var e,s,o,i;if(!d){d=n.JSONExt.deepCopy(t.schema);m(d)}const a=(o=(s=(e=d.properties)===null||e===void 0?void 0:e.shortcuts)===null||s===void 0?void 0:s.default)!==null&&o!==void 0?o:[];const l={shortcuts:(i=t.data.user.shortcuts)!==null&&i!==void 0?i:[]};const c={shortcuts:r.SettingRegistry.reconcileShortcuts(a,l.shortcuts)};t.data={composite:c,user:l};return t},fetch:t=>{if(!d){d=n.JSONExt.deepCopy(t.schema);m(d)}return{data:t.data,id:t.id,raw:t.raw,schema:d,version:t.version}}});try{d=null;const t=await e.load(Mt.id);$t.loadShortcuts(p,t.composite);t.changed.connect((()=>{$t.loadShortcuts(p,t.composite)}))}catch(g){console.error(`Loading ${Mt.id} failed.`,g)}},autoStart:true};const Ft=Mt;var $t;(function(t){let e;function s(t,s){var o;const i=(o=s===null||s===void 0?void 0:s.shortcuts)!==null&&o!==void 0?o:[];if(e){e.dispose()}e=i.reduce(((e,s)=>{const o=r(s);if(o){e.add(t.addKeyBinding(o))}return e}),new l.DisposableSet)}t.loadShortcuts=s;function r(t){if(!t||typeof t!=="object"){return undefined}const{isArray:e}=Array;const s="command"in t&&"keys"in t&&"selector"in t&&e(t.keys);return s?t:undefined}})($t||($t={}))}}]);
//# sourceMappingURL=4589.7580c5e1d07d5ad5d985.js.map?v=7580c5e1d07d5ad5d985