"use strict";(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[429],{17275:(e,t,s)=>{s.d(t,{q:()=>et});var i=s(27425);const r=1540483477;const n=new TextEncoder;function o(e,t){const s=n.encode(e);let i=s.length;let o=t^i;let a=0;while(i>=4){let e=s[a]&255|(s[++a]&255)<<8|(s[++a]&255)<<16|(s[++a]&255)<<24;e=(e&65535)*r+(((e>>>16)*r&65535)<<16);e^=e>>>24;e=(e&65535)*r+(((e>>>16)*r&65535)<<16);o=(o&65535)*r+(((o>>>16)*r&65535)<<16)^e;i-=4;++a}switch(i){case 3:o^=(s[a+2]&255)<<16;case 2:o^=(s[a+1]&255)<<8;case 1:o^=s[a]&255;o=(o&65535)*r+(((o>>>16)*r&65535)<<16)}o^=o>>>13;o=(o&65535)*r+(((o>>>16)*r&65535)<<16);o^=o>>>15;return o>>>0}class a{constructor(){this._fileParams=new Map;this._hashMethods=new Map}getCodeId(e,t){const s=this._fileParams.get(t);if(!s){throw new Error(`Kernel (${t}) has no tmp file params.`)}const i=this._hashMethods.get(t);if(!i){throw new Error(`Kernel (${t}) has no hashing params.`)}const{prefix:r,suffix:n}=s;return`${r}${i(e)}${n}`}setHashParams(e){const{kernel:t,method:s,seed:i}=e;if(!t){throw new TypeError(`Kernel name is not defined.`)}switch(s){case"Murmur2":this._hashMethods.set(t,(e=>o(e,i).toString()));break;default:throw new Error(`Hash method (${s}) is not supported.`)}}setTmpFileParams(e){const{kernel:t,prefix:s,suffix:i}=e;if(!t){throw new TypeError(`Kernel name is not defined.`)}this._fileParams.set(t,{kernel:t,prefix:s,suffix:i})}getTmpFileParams(e){return this._fileParams.get(e)}}var l=s(87447);var d=s(82713);var c=s(65178);var h;(function(e){function t(e){const t=new u({...e,body:new p(e),buttons:[l.Dialog.cancelButton({label:e.cancelLabel}),l.Dialog.okButton({label:e.okLabel})]});return t.launch()}e.getCode=t})(h||(h={}));class u extends l.Dialog{handleEvent(e){if(e.type==="keydown"){const t=e;const{code:s,shiftKey:i}=t;if(i&&s==="Enter"){return this.resolve()}if(s==="Enter"){return}}super.handleEvent(e)}}class p extends c.Widget{constructor(e){super();const{contentFactory:t,rendermime:s,mimeType:i}=e;const r=new d.CodeCellModel;r.mimeType=i!==null&&i!==void 0?i:"";this._prompt=new d.CodeCell({contentFactory:t,rendermime:s,model:r,placeholder:false}).initializeState();this._prompt.inputArea.promptNode.remove();this.node.appendChild(this._prompt.node)}getValue(){return this._prompt.model.sharedModel.getSource()}onAfterAttach(e){super.onAfterAttach(e);this._prompt.activate()}}var g=s(52959);class v{constructor(e){this._services=e.editorServices}createNewEditor(e){const{content:t,mimeType:s,path:i}=e;const r=this._services.factoryService.newInlineEditor;const n=this._services.mimeTypeService;const o=new g.CodeEditor.Model({mimeType:s||n.getMimeTypeByFilePath(i)});o.sharedModel.source=t;const a=new g.CodeEditorWrapper({editorOptions:{config:{readOnly:true,lineNumbers:true}},model:o,factory:r});a.node.setAttribute("data-jp-debugger","true");a.disposed.connect((()=>{o.dispose()}));return a}}var _=s(50724);var m=s(54999);var b=s(19289);var f=s(78098);var w=s(46035);var k=s(5502);const S="jp-DebuggerEditor-highlight";const C=1e3;class y{constructor(e){var t,s,i,r;this._src=e.src;this._id=(i=(s=(t=e.debuggerService.session)===null||t===void 0?void 0:t.connection)===null||s===void 0?void 0:s.id)!==null&&i!==void 0?i:"";this._path=(r=e.path)!==null&&r!==void 0?r:"";this._debuggerService=e.debuggerService;this._editor=e.getEditor;this._editorMonitor=new f.ActivityMonitor({signal:this._src.changed,timeout:C});this._editorMonitor.activityStopped.connect((()=>{this._sendEditorBreakpoints()}),this);this._debuggerService.model.breakpoints.changed.connect((async()=>{const e=this.editor;if(!e||e.isDisposed){return}this._addBreakpointsToEditor()}));this._debuggerService.model.breakpoints.restored.connect((async()=>{const e=this.editor;if(!e||e.isDisposed){return}this._addBreakpointsToEditor()}));this._debuggerService.model.callstack.currentFrameChanged.connect((()=>{const e=this.editor;if(e){y.clearHighlight(e)}}));this._breakpointEffect=w.StateEffect.define({map:(e,t)=>({pos:e.pos.map((e=>t.mapPos(e)))})});this._breakpointState=w.StateField.define({create:()=>w.RangeSet.empty,update:(e,t)=>{e=e.map(t.changes);for(let s of t.effects){if(s.is(this._breakpointEffect)){let t=s;if(t.value.pos.length){e=e.update({add:t.value.pos.map((e=>E.breakpointMarker.range(e))),sort:true})}else{e=w.RangeSet.empty}}}return e}});this._gutter=new w.Compartment;this._highlightDeco=k.Decoration.line({class:S});this._highlightState=w.StateField.define({create:()=>k.Decoration.none,update:(e,t)=>{e=e.map(t.changes);for(let s of t.effects){if(s.is(y._highlightEffect)){let t=s;if(t.value.pos.length){e=e.update({add:t.value.pos.map((e=>this._highlightDeco.range(e)))})}else{e=k.Decoration.none}}}return e},provide:e=>k.EditorView.decorations.from(e)});void e.editorReady().then((()=>{this._setupEditor()}))}get editor(){return this._editor()}dispose(){if(this.isDisposed){return}this._editorMonitor.dispose();this._clearEditor();this.isDisposed=true;b.Signal.clearData(this)}refreshBreakpoints(){this._addBreakpointsToEditor()}_setupEditor(){const e=this.editor;if(!e||e.isDisposed){return}e.setOption("lineNumbers",true);const t=[this._breakpointState,this._highlightState,w.Prec.highest((0,k.gutter)({class:"cm-breakpoint-gutter",renderEmptyElements:true,markers:e=>e.state.field(this._breakpointState),initialSpacer:()=>E.breakpointMarker,domEventHandlers:{mousedown:(e,t)=>{this._onGutterClick(e,t.from);return true}}}))];e.injectExtension(this._gutter.of(t));this._addBreakpointsToEditor()}_clearEditor(){const e=this.editor;if(!e||e.isDisposed){return}y.clearHighlight(e);this._clearGutter(e);e.setOption("lineNumbers",false);e.editor.dispatch({effects:this._gutter.reconfigure([])})}_sendEditorBreakpoints(){var e;if((e=this.editor)===null||e===void 0?void 0:e.isDisposed){return}const t=this._getBreakpointsFromEditor().map((e=>{var t,s;return E.createBreakpoint(((s=(t=this._debuggerService.session)===null||t===void 0?void 0:t.connection)===null||s===void 0?void 0:s.name)||"",e)}));void this._debuggerService.updateBreakpoints(this._src.getSource(),t,this._path)}_onGutterClick(e,t){var s,i,r;if(this._id!==((i=(s=this._debuggerService.session)===null||s===void 0?void 0:s.connection)===null||i===void 0?void 0:i.id)){return}const n=e.state.doc.lineAt(t).number;let o=e.state.field(this._breakpointState);let a=false;o.between(t,t,(()=>{a=true}));let l=this._getBreakpoints();if(a){l=l.filter((e=>e.line!==n))}else{l.push(E.createBreakpoint((r=this._path)!==null&&r!==void 0?r:this._debuggerService.session.connection.name,n))}l.sort(((e,t)=>e.line-t.line));void this._debuggerService.updateBreakpoints(this._src.getSource(),l,this._path)}_addBreakpointsToEditor(){var e,t;if(this._id!==((t=(e=this._debuggerService.session)===null||e===void 0?void 0:e.connection)===null||t===void 0?void 0:t.id)){return}const s=this.editor;const i=this._getBreakpoints();this._clearGutter(s);const r=i.map((e=>s.state.doc.line(e.line).from));s.editor.dispatch({effects:this._breakpointEffect.of({pos:r})})}_getBreakpointsFromEditor(){const e=this.editor;const t=e.editor.state.field(this._breakpointState);let s=[];t.between(0,e.doc.length,(t=>{s.push(e.doc.lineAt(t).number)}));return s}_clearGutter(e){if(!e){return}const t=e.editor;t.dispatch({effects:this._breakpointEffect.of({pos:[]})})}_getBreakpoints(){const e=this._src.getSource();return this._debuggerService.model.breakpoints.getBreakpoints(this._path||this._debuggerService.getCodeId(e))}}(function(e){e._highlightEffect=w.StateEffect.define({map:(e,t)=>({pos:e.pos.map((e=>t.mapPos(e)))})});function t(t,i){s(t);const r=t;const n=r.doc.line(i).from;r.editor.dispatch({effects:e._highlightEffect.of({pos:[n]})})}e.showCurrentLine=t;function s(t){if(!t||t.isDisposed){return}const s=t;s.editor.dispatch({effects:e._highlightEffect.of({pos:[]})})}e.clearHighlight=s})(y||(y={}));var E;(function(e){e.breakpointMarker=new class extends k.GutterMarker{toDOM(){const e=document.createTextNode("●");return e}};function t(e,t){return{line:t,verified:true,source:{name:e}}}e.createBreakpoint=t})(E||(E={}));class x{constructor(e){this._debuggerService=e.debuggerService;this._consolePanel=e.widget;this._cellMap=new m.ObservableMap;const t=this._consolePanel.console;if(t.promptCell){this._addEditorHandler(t.promptCell)}t.promptCellCreated.connect(((e,t)=>{this._addEditorHandler(t)}));const s=()=>{for(const e of t.cells){this._addEditorHandler(e)}};s();this._consolePanel.console.cells.changed.connect(s)}dispose(){if(this.isDisposed){return}this.isDisposed=true;this._cellMap.values().forEach((e=>e.dispose()));this._cellMap.dispose();b.Signal.clearData(this)}_addEditorHandler(e){const t=e.model.id;if(e.model.type!=="code"||this._cellMap.has(t)){return}const s=e;const i=new y({debuggerService:this._debuggerService,editorReady:async()=>{await s.ready;return s.editor},getEditor:()=>s.editor,src:e.model.sharedModel});s.disposed.connect((()=>{this._cellMap.delete(t);i.dispose()}));this._cellMap.set(t,i)}}class M{constructor(e){var t;this._debuggerService=e.debuggerService;this._fileEditor=e.widget.content;this._hasLineNumber=(t=this._fileEditor.editor.getOption("lineNumbers"))!==null&&t!==void 0?t:false;this._editorHandler=new y({debuggerService:this._debuggerService,editorReady:()=>Promise.resolve(this._fileEditor.editor),getEditor:()=>this._fileEditor.editor,src:this._fileEditor.model.sharedModel})}dispose(){var e,t;if(this.isDisposed){return}this.isDisposed=true;(e=this._editorHandler)===null||e===void 0?void 0:e.dispose();(t=this._editorHandler)===null||t===void 0?void 0:t.editor.setOptions({lineNumbers:this._hasLineNumber});b.Signal.clearData(this)}}class D{constructor(e){this._debuggerService=e.debuggerService;this._notebookPanel=e.widget;this._cellMap=new m.ObservableMap;const t=this._notebookPanel.content;t.model.cells.changed.connect(this._onCellsChanged,this);this._onCellsChanged()}dispose(){if(this.isDisposed){return}this.isDisposed=true;this._cellMap.values().forEach((e=>{var t;e.dispose();(t=e.editor)===null||t===void 0?void 0:t.setOptions({...this._notebookPanel.content.editorConfig.code})}));this._cellMap.dispose();b.Signal.clearData(this)}_onCellsChanged(e,t){var s;this._notebookPanel.content.widgets.forEach((e=>this._addEditorHandler(e)));if((t===null||t===void 0?void 0:t.type)==="move"){for(const e of t.newValues){(s=this._cellMap.get(e.id))===null||s===void 0?void 0:s.refreshBreakpoints()}}}_addEditorHandler(e){const t=e.model.id;if(e.model.type!=="code"||this._cellMap.has(t)){return}const s=e;const i=new y({debuggerService:this._debuggerService,editorReady:async()=>{await s.ready;return s.editor},getEditor:()=>s.editor,src:e.model.sharedModel});s.disposed.connect((()=>{this._cellMap.delete(t);i.dispose()}));this._cellMap.set(e.model.id,i)}}const I="debugger-icon";function T(e,t,s,r,n=_.nullTranslator){const o=n.load("jupyterlab");const a=new i.ToolbarButton({className:"jp-DebuggerBugButton",icon:i.bugIcon,tooltip:o.__("Enable Debugger"),pressedIcon:i.bugDotIcon,pressedTooltip:o.__("Disable Debugger"),disabledTooltip:o.__("Select a kernel that supports debugging to enable debugger"),enabled:s,pressed:r,onClick:t});if(!e.toolbar.insertBefore("kernelName",I,a)){e.toolbar.addItem(I,a)}return a}function V(e,t,s=true,i){if(e){e.enabled=s;e.pressed=t;if(i){e.onClick=i}}}class B{constructor(e){this._handlers={};this._contextKernelChangedHandlers={};this._kernelChangedHandlers={};this._statusChangedHandlers={};this._iopubMessageHandlers={};this._iconButtons={};this._type=e.type;this._shell=e.shell;this._service=e.service}get activeWidget(){return this._activeWidget}async update(e,t){if(!t){delete this._kernelChangedHandlers[e.id];delete this._statusChangedHandlers[e.id];delete this._iopubMessageHandlers[e.id];return this.updateWidget(e,t)}const s=()=>{void this.updateWidget(e,t)};const i=this._kernelChangedHandlers[e.id];if(i){t.kernelChanged.disconnect(i)}this._kernelChangedHandlers[e.id]=s;t.kernelChanged.connect(s);const r=(s,i)=>{if(i.endsWith("restarting")){void this.updateWidget(e,t)}};const n=this._statusChangedHandlers[e.id];if(n){t.statusChanged.disconnect(n)}t.statusChanged.connect(r);this._statusChangedHandlers[e.id]=r;const o=(e,t)=>{if(t.parent_header.msg_type=="execute_request"&&this._service.isStarted&&!this._service.hasStoppedThreads()){void this._service.displayDefinedVariables()}};const a=this._iopubMessageHandlers[e.id];if(a){t.iopubMessage.disconnect(a)}t.iopubMessage.connect(o);this._iopubMessageHandlers[e.id]=o;this._activeWidget=e;return this.updateWidget(e,t)}async updateContext(e,t){const s=()=>{const{session:s}=t;void this.update(e,s)};const i=this._contextKernelChangedHandlers[e.id];if(i){t.kernelChanged.disconnect(i)}this._contextKernelChangedHandlers[e.id]=s;t.kernelChanged.connect(s);return this.update(e,t.session)}async updateWidget(e,t){var s,i,r,n;if(!this._service.model||!t){return}const o=()=>this._shell.currentWidget===e;const a=()=>{if(!this._handlers[e.id]){e.node.removeAttribute("data-jp-debugger");return}e.node.setAttribute("data-jp-debugger","true")};const l=()=>{if(this._handlers[e.id]){return}switch(this._type){case"notebook":this._handlers[e.id]=new D({debuggerService:this._service,widget:e});break;case"console":this._handlers[e.id]=new x({debuggerService:this._service,widget:e});break;case"file":this._handlers[e.id]=new M({debuggerService:this._service,widget:e});break;default:throw Error(`No handler for the type ${this._type}`)}a()};const d=()=>{var s,i,r,n;const o=this._handlers[e.id];if(!o){return}o.dispose();delete this._handlers[e.id];delete this._kernelChangedHandlers[e.id];delete this._statusChangedHandlers[e.id];delete this._iopubMessageHandlers[e.id];delete this._contextKernelChangedHandlers[e.id];if(((i=(s=this._service.session)===null||s===void 0?void 0:s.connection)===null||i===void 0?void 0:i.path)===(t===null||t===void 0?void 0:t.path)||!((n=(r=this._service.session)===null||r===void 0?void 0:r.connection)===null||n===void 0?void 0:n.kernel)){const e=this._service.model;e.clear()}a()};const c=(t=true)=>{const s=this._iconButtons[e.id];if(!s){this._iconButtons[e.id]=T(e,g,this._service.isStarted,t)}else{V(s,this._service.isStarted,t,g)}};const h=()=>{var e;return this._service.isStarted&&((e=this._previousConnection)===null||e===void 0?void 0:e.id)===(t===null||t===void 0?void 0:t.id)};const u=async()=>{this._service.session.connection=t;await this._service.stop()};const p=async()=>{var e,s;this._service.session.connection=t;this._previousConnection=t;await this._service.restoreState(true);await this._service.displayDefinedVariables();if((s=(e=this._service.session)===null||e===void 0?void 0:e.capabilities)===null||s===void 0?void 0:s.supportsModulesRequest){await this._service.displayModules()}};const g=async()=>{if(!o()){return}const t=this._iconButtons[e.id];if(h()){await u();d();V(t,false)}else{await p();l();V(t,true)}};c(false);e.disposed.connect((async()=>{if(h()){await u()}d();delete this._iconButtons[e.id];delete this._contextKernelChangedHandlers[e.id]}));const v=await this._service.isAvailable(t);if(!v){d();V(this._iconButtons[e.id],false,false);return}if(!this._service.session){this._service.session=new et.Session({connection:t,config:this._service.config})}else{this._previousConnection=((s=this._service.session.connection)===null||s===void 0?void 0:s.kernel)?this._service.session.connection:null;this._service.session.connection=t}await this._service.restoreState(false);if(this._service.isStarted&&!this._service.hasStoppedThreads()){await this._service.displayDefinedVariables();if((r=(i=this._service.session)===null||i===void 0?void 0:i.capabilities)===null||r===void 0?void 0:r.supportsModulesRequest){await this._service.displayModules()}}V(this._iconButtons[e.id],this._service.isStarted,true);if(!this._service.isStarted){d();this._service.session.connection=(n=this._previousConnection)!==null&&n!==void 0?n:t;await this._service.restoreState(false);return}l();this._previousConnection=t}}const H='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n  <g class="jp-icon3" fill="#616161">\n    <path d="M16.4805 17.2481C16.8158 16.3972 17 15.4701 17 14.5C17 10.3579 13.6421 7.00001 9.5 7.00001C8.36314 7.00001 7.28536 7.25295 6.31986 7.70564C7.60064 6.0592 9.60074 5 11.8482 5C15.7142 5 18.8482 8.13401 18.8482 12C18.8482 14.0897 17.9325 15.9655 16.4805 17.2481Z" />\n    <path d="M19.1607 14.2481C19.496 13.3971 19.6801 12.4701 19.6801 11.5C19.6801 7.35786 16.3223 4 12.1801 4C11.0433 4 9.9655 4.25295 9.00001 4.70563C10.2808 3.05919 12.2809 2 14.5284 2C18.3944 2 21.5284 5.134 21.5284 9C21.5284 11.0897 20.6127 12.9655 19.1607 14.2481Z" />\n    <path d="M16 15C16 18.866 12.866 22 9 22C5.13401 22 2 18.866 2 15C2 11.134 5.13401 8 9 8C12.866 8 16 11.134 16 15ZM11.7914 11L13 12.2086L10.2086 15L13 17.7914L11.7914 19L9 16.2086L6.20857 19L5 17.7914L7.79143 15L5 12.2086L6.20857 11L9 13.7914L11.7914 11Z" />\n    </g>\n</svg>\n';const j='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t<g class="jp-icon3" fill="#616161">\n\t\t<path d="M7.99998 9.53198H8.54198L12.447 5.62698L11.386 4.56698L8.74898 7.17698L8.74898 0.999985H7.99998H7.25098L7.25098 7.17698L4.61398 4.56698L3.55298 5.62698L7.45798 9.53198H7.99998ZM9.95598 13.013C9.95598 14.1175 9.06055 15.013 7.95598 15.013C6.85141 15.013 5.95598 14.1175 5.95598 13.013C5.95598 11.9084 6.85141 11.013 7.95598 11.013C9.06055 11.013 9.95598 11.9084 9.95598 13.013Z"/>\n\t</g>\n</svg>\n';const F='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t<g class="jp-icon3" fill="#616161">\n\t\t<path d="M7.99998 1H7.45798L3.55298 4.905L4.61398 5.965L7.25098 3.355V9.532H7.99998H8.74898V3.355L11.386 5.965L12.447 4.905L8.54198 1H7.99998ZM9.95598 13.013C9.95598 14.1176 9.06055 15.013 7.95598 15.013C6.85141 15.013 5.95598 14.1176 5.95598 13.013C5.95598 11.9084 6.85141 11.013 7.95598 11.013C9.06055 11.013 9.95598 11.9084 9.95598 13.013Z"/>\n\t</g>\n</svg>\n';const R='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t<g class="jp-icon3" fill="#616161">\n\t\t<path d="M14.25 5.75V1.75H12.75V4.2916C11.605 2.93303 9.83899 2.08334 7.90914 2.08334C4.73316 2.08334 1.98941 4.39036 1.75072 7.48075L1.72992 7.75H3.231L3.25287 7.5241C3.46541 5.32932 5.45509 3.58334 7.90914 3.58334C9.6452 3.58334 11.1528 4.45925 11.9587 5.75H9.12986V7.25H13.292L14.2535 6.27493V5.75H14.25ZM7.99997 14C9.10454 14 9.99997 13.1046 9.99997 12C9.99997 10.8954 9.10454 10 7.99997 10C6.8954 10 5.99997 10.8954 5.99997 12C5.99997 13.1046 6.8954 14 7.99997 14Z"/>\n\t</g>\n</svg>\n';const L='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 4L1 4.5V12.5L1.5 13H4V12H2V5H4V4H1.5ZM14.5 13L15 12.5L15 4.5L14.5 4H12V5L14 5L14 12H12V13H14.5ZM8.79693 5L4.29693 7L4 7.45691V9.95691L4.24275 10.3857L6.74275 11.8857L7.20307 11.9138L11.7031 9.91381L12 9.45691V6.95691L11.7572 6.52816L9.25725 5.02816L8.79693 5ZM5 8.34V9.67381L6.5 10.5738V9.24L5 8.34ZM7.5 9.28184V10.6875L11 9.13197V7.72629L7.5 9.28184ZM10.4178 6.89071L8.96559 6.01936L5.58216 7.52311L7.03441 8.39445L10.4178 6.89071Z" fill="#007ACC"/>\n</svg>\n';const P='<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <g class="jp-icon3" fill="#616161">\n        <path d="m 7,6 h 4 V 18 H 7 Z" />\n        <path d="m 13,6 h 4 v 12 h -4 z" />\n    </g>\n</svg>\n';const N='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g class="jp-icon3" fill="#616161">\n        <path d="M5 2H15L20 7V20C20 20.5304 19.7893 21.0391 19.4142 21.4142C19.0391 21.7893 18.5304 22 18 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V14H4V16L8 13L4 10V12H3V4C3 3.46957 3.21071 2.96086 3.58579 2.58579C3.96086 2.21071 4.46957 2 5 2ZM12 18H16V16H12V18ZM12 14H18V12H12V14ZM12 10H18V8H12V10ZM10 14C10.5523 14 11 13.5523 11 13C11 12.4477 10.5523 12 10 12C9.44771 12 9 12.4477 9 13C9 13.5523 9.44771 14 10 14Z"/>\n        <path d="M3 12V14H1V13V12H3Z"/>\n    </g>\n</svg>\n';const O='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g class="jp-icon3" fill="#616161">\n        <path d="M5 2H15L20 7V20C20 20.5304 19.7893 21.0391 19.4142 21.4142C19.0391 21.7893 18.5304 22 18 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V14H4V16L8 13L4 10V12H3V4C3 3.46957 3.21071 2.96086 3.58579 2.58579C3.96086 2.21071 4.46957 2 5 2ZM12 18H16V16H12V18ZM12 14H18V12H12V14ZM12 10H18V8H12V10ZM10 14C10.5523 14 11 13.5523 11 13C11 12.4477 10.5523 12 10 12C9.44771 12 9 12.4477 9 13C9 13.5523 9.44771 14 10 14Z"/>\n        <path d="M3 12V14H1V13V12H3Z"/>\n    </g>\n</svg>\n';const q='<svg height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n  <g class="jp-icon3" fill="#616161" transform="matrix(1.1999396,0,0,1.3858273,-2.3726971,-4.6347192)">\n    <path\n      d="M 12.023438,0.30859375 11.158203,1.8085937 -1.2382812,23.285156 l 26.5292972,-0.002 z m 0.002,3.99999995 9.800781,16.9746093 -19.6015626,0.002 z"\n      transform="matrix(0.72509832,0,0,0.7247701,3.2918397,3.480876)"\n    />\n    <path d="m 11.144475,9.117095 h 1.666751 v 7.215906 h -1.666751 z" />\n    <path d="m 11.144475,17.054592 h 1.666751 v 1.443181 h -1.666751 z" />\n  </g>\n</svg>\n';const A=new i.LabIcon({name:"debugger:close-all",svgstr:H});const W=new i.LabIcon({name:"debugger:pause-on-exception",svgstr:q});const Z=new i.LabIcon({name:"debugger:pause",svgstr:P});const K=new i.LabIcon({name:"debugger:step-into",svgstr:j});const G=new i.LabIcon({name:"debugger:step-over",svgstr:R});const z=new i.LabIcon({name:"debugger:step-out",svgstr:F});const $=new i.LabIcon({name:"debugger:variable",svgstr:L});const U=new i.LabIcon({name:"debugger:view-breakpoint",svgstr:N});const J=new i.LabIcon({name:"debugger:open-kernel-source",svgstr:O});class Y{constructor(){this._breakpoints=new Map;this._changed=new b.Signal(this);this._restored=new b.Signal(this);this._clicked=new b.Signal(this)}get changed(){return this._changed}get restored(){return this._restored}get clicked(){return this._clicked}get breakpoints(){return this._breakpoints}setBreakpoints(e,t){this._breakpoints.set(e,t);this._changed.emit(t)}getBreakpoints(e){var t;return(t=this._breakpoints.get(e))!==null&&t!==void 0?t:[]}restoreBreakpoints(e){this._breakpoints=e;this._restored.emit()}}class Q{constructor(){this._state=[];this._currentFrame=null;this._framesChanged=new b.Signal(this);this._currentFrameChanged=new b.Signal(this)}get frames(){return this._state}set frames(e){this._state=e;const t=this.frame!==null?X.getFrameId(this.frame):"";const s=e.find((e=>X.getFrameId(e)===t));if(!s){this.frame=e[0]}this._framesChanged.emit(e)}get frame(){return this._currentFrame}set frame(e){this._currentFrame=e;this._currentFrameChanged.emit(e)}get framesChanged(){return this._framesChanged}get currentFrameChanged(){return this._currentFrameChanged}}var X;(function(e){function t(e){var t;return`${(t=e===null||e===void 0?void 0:e.source)===null||t===void 0?void 0:t.path}-${e===null||e===void 0?void 0:e.id}`}e.getFrameId=t})(X||(X={}));class ee{constructor(e){this._currentSourceOpened=new b.Signal(this);this._currentSourceChanged=new b.Signal(this);this.currentFrameChanged=e.currentFrameChanged}get currentSourceOpened(){return this._currentSourceOpened}get currentSourceChanged(){return this._currentSourceChanged}get currentSource(){return this._currentSource}set currentSource(e){this._currentSource=e;this._currentSourceChanged.emit(e)}open(){this._currentSourceOpened.emit(this._currentSource)}}var te=s(65061);const se=500;const ie=(e,t)=>{if(e.name<t.name){return-1}if(e.name>t.name){return 1}return 0};class re{constructor(){this._filteredKernelSources=null;this._filter="";this._isDisposed=false;this._kernelSources=null;this._changed=new b.Signal(this);this._filterChanged=new b.Signal(this);this._kernelSourceOpened=new b.Signal(this);this.refresh=this.refresh.bind(this);this._refreshDebouncer=new te.Debouncer(this.refresh,se)}get filter(){return this._filter}set filter(e){this._filter=e;this._filterChanged.emit(e);void this._refreshDebouncer.invoke()}get isDisposed(){return this._isDisposed}get kernelSources(){return this._kernelSources}set kernelSources(e){this._kernelSources=e;this.refresh()}get changed(){return this._changed}get filterChanged(){return this._filterChanged}get kernelSourceOpened(){return this._kernelSourceOpened}dispose(){if(this._isDisposed){return}this._isDisposed=true;this._refreshDebouncer.dispose();b.Signal.clearData(this)}open(e){this._kernelSourceOpened.emit(e)}getFilteredKernelSources(){const e=new RegExp(this._filter);return this._kernelSources.filter((t=>e.test(t.name)))}refresh(){if(this._kernelSources){this._filteredKernelSources=this._filter?this.getFilteredKernelSources():this._kernelSources;this._filteredKernelSources.sort(ie)}else{this._kernelSources=new Array;this._filteredKernelSources=new Array}this._changed.emit(this._filteredKernelSources)}}class ne{constructor(){this._selectedVariable=null;this._state=[];this._variableExpanded=new b.Signal(this);this._changed=new b.Signal(this)}get scopes(){return this._state}set scopes(e){this._state=e;this._changed.emit()}get changed(){return this._changed}get variableExpanded(){return this._variableExpanded}get selectedVariable(){return this._selectedVariable}set selectedVariable(e){this._selectedVariable=e}expandVariable(e){this._variableExpanded.emit(e)}}class oe{constructor(){this._disposed=new b.Signal(this);this._isDisposed=false;this._hasRichVariableRendering=false;this._supportCopyToGlobals=false;this._stoppedThreads=new Set;this._title="-";this._titleChanged=new b.Signal(this);this.breakpoints=new Y;this.callstack=new Q;this.variables=new ne;this.sources=new ee({currentFrameChanged:this.callstack.currentFrameChanged});this.kernelSources=new re}get disposed(){return this._disposed}get hasRichVariableRendering(){return this._hasRichVariableRendering}set hasRichVariableRendering(e){this._hasRichVariableRendering=e}get supportCopyToGlobals(){return this._supportCopyToGlobals}set supportCopyToGlobals(e){this._supportCopyToGlobals=e}get isDisposed(){return this._isDisposed}get stoppedThreads(){return this._stoppedThreads}set stoppedThreads(e){this._stoppedThreads=e}get title(){return this._title}set title(e){if(e===this._title){return}this._title=e!==null&&e!==void 0?e:"-";this._titleChanged.emit(e)}get titleChanged(){return this._titleChanged}dispose(){if(this._isDisposed){return}this._isDisposed=true;this.kernelSources.dispose();this._disposed.emit()}clear(){this._stoppedThreads.clear();const e=new Map;this.breakpoints.restoreBreakpoints(e);this.callstack.frames=[];this.variables.scopes=[];this.sources.currentSource=null;this.kernelSources.kernelSources=null;this.title="-"}}class ae extends c.Panel{constructor(e){super();this._filter=new Set;this._grid=null;this._pending=null;this.commands=e.commands;this.model=e.model;this.themeManager=e.themeManager;this.translator=e.translator;this.model.changed.connect((()=>this.update()),this);this.addClass("jp-DebuggerVariables-body")}get filter(){return this._filter}set filter(e){this._filter=e;this.update()}get scope(){return this._scope}set scope(e){this._scope=e;if(e!=="Globals"){this.addClass("jp-debuggerVariables-local")}else{this.removeClass("jp-debuggerVariables-local")}this.update()}async initialize(){if(this._grid||this._pending){return}const{Grid:e}=await(this._pending=Promise.all([s.e(6221),s.e(3528)]).then(s.bind(s,13528)));const{commands:t,model:i,themeManager:r,translator:n}=this;this._grid=new e({commands:t,model:i,themeManager:r,translator:n});this._grid.addClass("jp-DebuggerVariables-grid");this._pending=null;this.addWidget(this._grid);this.update()}onBeforeShow(e){if(!this._grid&&!this._pending){void this.initialize()}super.onBeforeShow(e)}onUpdateRequest(e){var t;if(this._grid){const{dataModel:e}=this._grid;e.filter=this._filter;e.scope=this._scope;e.setData((t=this.model.scopes)!==null&&t!==void 0?t:[])}super.onUpdateRequest(e)}}var le=s(59238);var de=s(55172);const ce="jp-VariableRendererPanel";const he="jp-VariableRendererPanel-renderer";class ue extends l.MainAreaWidget{constructor(e){const{dataLoader:t,rendermime:s,translator:i}=e;const r=new c.Panel;const n=new de.PromiseDelegate;super({content:r,reveal:Promise.all([t,n.promise])});this.content.addClass(ce);this.trans=(i!==null&&i!==void 0?i:_.nullTranslator).load("jupyterlab");this.dataLoader=t;this.renderMime=s;this._dataHash=null;this.refresh().then((()=>{n.resolve()})).catch((e=>n.reject(e)))}async refresh(e=false){let t=await this.dataLoader();if(Object.keys(t.data).length===0){t={data:{"text/plain":this.trans.__("The variable is undefined in the active context.")},metadata:{}}}if(t.data){const s=o(JSON.stringify(t),17);if(e||this._dataHash!==s){if(this.content.layout){this.content.widgets.forEach((e=>{this.content.layout.removeWidget(e)}))}const e=this.renderMime.preferredMimeType(t.data,"any");if(e){const i=this.renderMime.createRenderer(e);i.addClass(he);const r=new le.MimeModel({...t,trusted:true});this._dataHash=s;await i.renderModel(r);this.content.addWidget(i)}else{this._dataHash=null;return Promise.reject("Unable to determine the preferred mime type.")}}}else{this._dataHash=null;return Promise.reject("Unable to get a view on the variable.")}}}class pe{constructor(e){var t,s;this._eventMessage=new b.Signal(this);this._isDisposed=false;this._sessionChanged=new b.Signal(this);this._pauseOnExceptionChanged=new b.Signal(this);this._config=e.config;this._session=null;this._specsManager=(t=e.specsManager)!==null&&t!==void 0?t:null;this._model=new et.Model;this._debuggerSources=(s=e.debuggerSources)!==null&&s!==void 0?s:null;this._trans=(e.translator||_.nullTranslator).load("jupyterlab")}get eventMessage(){return this._eventMessage}get config(){return this._config}get isDisposed(){return this._isDisposed}get isStarted(){var e,t;return(t=(e=this._session)===null||e===void 0?void 0:e.isStarted)!==null&&t!==void 0?t:false}get pauseOnExceptionChanged(){return this._pauseOnExceptionChanged}get model(){return this._model}get session(){return this._session}set session(e){var t;if(this._session===e){return}if(this._session){this._session.dispose()}this._session=e;(t=this._session)===null||t===void 0?void 0:t.eventMessage.connect(((e,t)=>{if(t.event==="stopped"){this._model.stoppedThreads.add(t.body.threadId);void this._getAllFrames()}else if(t.event==="continued"){this._model.stoppedThreads.delete(t.body.threadId);this._clearModel();this._clearSignals()}this._eventMessage.emit(t)}));this._sessionChanged.emit(e)}get sessionChanged(){return this._sessionChanged}dispose(){if(this.isDisposed){return}this._isDisposed=true;b.Signal.clearData(this)}getCodeId(e){var t,s,i,r;try{return this._config.getCodeId(e,(r=(i=(s=(t=this.session)===null||t===void 0?void 0:t.connection)===null||s===void 0?void 0:s.kernel)===null||i===void 0?void 0:i.name)!==null&&r!==void 0?r:"")}catch(n){return""}}hasStoppedThreads(){var e,t;return(t=((e=this._model)===null||e===void 0?void 0:e.stoppedThreads.size)>0)!==null&&t!==void 0?t:false}async isAvailable(e){var t,s,i,r;if(!this._specsManager){return true}await this._specsManager.ready;const n=e===null||e===void 0?void 0:e.kernel;if(!n){return false}const o=n.name;if(!((t=this._specsManager.specs)===null||t===void 0?void 0:t.kernelspecs[o])){return true}return!!((r=(i=(s=this._specsManager.specs.kernelspecs[o])===null||s===void 0?void 0:s.metadata)===null||i===void 0?void 0:i["debugger"])!==null&&r!==void 0?r:false)}async clearBreakpoints(){var e;if(((e=this.session)===null||e===void 0?void 0:e.isStarted)!==true){return}this._model.breakpoints.breakpoints.forEach(((e,t,s)=>{void this._setBreakpoints([],t)}));let t=new Map;this._model.breakpoints.restoreBreakpoints(t)}async continue(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("continue",{threadId:this._currentThread()});this._model.stoppedThreads.delete(this._currentThread());this._clearModel();this._clearSignals()}catch(e){console.error("Error:",e.message)}}async getSource(e){var t,s;if(!this.session){throw new Error("No active debugger session")}const i=await this.session.sendRequest("source",{source:e,sourceReference:(t=e.sourceReference)!==null&&t!==void 0?t:0});return{...i.body,path:(s=e.path)!==null&&s!==void 0?s:""}}async evaluate(e){var t;if(!this.session){throw new Error("No active debugger session")}const s=(t=this.model.callstack.frame)===null||t===void 0?void 0:t.id;const i=await this.session.sendRequest("evaluate",{context:"repl",expression:e,frameId:s});if(!i.success){return null}this._clearModel();await this._getAllFrames();return i.body}async next(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("next",{threadId:this._currentThread()})}catch(e){console.error("Error:",e.message)}}async inspectRichVariable(e,t){if(!this.session){throw new Error("No active debugger session")}const s=await this.session.sendRequest("richInspectVariables",{variableName:e,frameId:t});if(s.success){return s.body}else{throw new Error(s.message)}}async inspectVariable(e){if(!this.session){throw new Error("No active debugger session")}const t=await this.session.sendRequest("variables",{variablesReference:e});if(t.success){return t.body.variables}else{throw new Error(t.message)}}async copyToGlobals(e){if(!this.session){throw new Error("No active debugger session")}if(!this.model.supportCopyToGlobals){throw new Error('The "copyToGlobals" request is not supported by the kernel')}const t=this.model.callstack.frames;this.session.sendRequest("copyToGlobals",{srcVariableName:e,dstVariableName:e,srcFrameId:t[0].id}).then((async()=>{const e=await this._getScopes(t[0]);const s=await Promise.all(e.map((e=>this._getVariables(e))));const i=this._convertScopes(e,s);this._model.variables.scopes=i})).catch((e=>{console.error(e)}))}async displayDefinedVariables(){if(!this.session){throw new Error("No active debugger session")}const e=await this.session.sendRequest("inspectVariables",{});const t=e.body.variables;const s=[{name:this._trans.__("Globals"),variables:t}];this._model.variables.scopes=s}async displayModules(){if(!this.session){throw new Error("No active debugger session")}const e=await this.session.sendRequest("modules",{});this._model.kernelSources.kernelSources=e.body.modules.map((e=>({name:e.name,path:e.path})))}async restart(){const{breakpoints:e}=this._model.breakpoints;await this.stop();await this.start();await this._restoreBreakpoints(e)}async restoreState(e){var t,s,i,r,n,o,a,l,d,c;if(!this.model||!this.session){return}const h=await this.session.restoreState();const{body:u}=h;const p=this._mapBreakpoints(u.breakpoints);const g=new Set(u.stoppedThreads);this._model.hasRichVariableRendering=u.richRendering===true;this._model.supportCopyToGlobals=u.copyToGlobals===true;this._config.setHashParams({kernel:(r=(i=(s=(t=this.session)===null||t===void 0?void 0:t.connection)===null||s===void 0?void 0:s.kernel)===null||i===void 0?void 0:i.name)!==null&&r!==void 0?r:"",method:u.hashMethod,seed:u.hashSeed});this._config.setTmpFileParams({kernel:(l=(a=(o=(n=this.session)===null||n===void 0?void 0:n.connection)===null||o===void 0?void 0:o.kernel)===null||a===void 0?void 0:a.name)!==null&&l!==void 0?l:"",prefix:u.tmpFilePrefix,suffix:u.tmpFileSuffix});this._model.stoppedThreads=g;if(!this.isStarted&&(e||g.size!==0)){await this.start()}if(this.isStarted||e){this._model.title=this.isStarted?((c=(d=this.session)===null||d===void 0?void 0:d.connection)===null||c===void 0?void 0:c.name)||"-":"-"}if(this._debuggerSources){const e=this._filterBreakpoints(p);this._model.breakpoints.restoreBreakpoints(e)}else{this._model.breakpoints.restoreBreakpoints(p)}if(g.size!==0){await this._getAllFrames()}else if(this.isStarted){this._clearModel();this._clearSignals()}if(this.session.currentExceptionFilters){await this.pauseOnExceptions(this.session.currentExceptionFilters)}}start(){if(!this.session){throw new Error("No active debugger session")}return this.session.start()}async pause(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("pause",{threadId:this._currentThread()})}catch(e){console.error("Error:",e.message)}}async stepIn(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("stepIn",{threadId:this._currentThread()})}catch(e){console.error("Error:",e.message)}}async stepOut(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("stepOut",{threadId:this._currentThread()})}catch(e){console.error("Error:",e.message)}}async stop(){if(!this.session){throw new Error("No active debugger session")}await this.session.stop();if(this._model){this._model.clear()}}async updateBreakpoints(e,t,s){var i;if(!((i=this.session)===null||i===void 0?void 0:i.isStarted)){return}if(!s){s=(await this._dumpCell(e)).body.sourcePath}const r=await this.session.restoreState();const n=t.filter((({line:e})=>typeof e==="number")).map((({line:e})=>({line:e})));const o=this._mapBreakpoints(r.body.breakpoints);if(this._debuggerSources){const e=this._filterBreakpoints(o);this._model.breakpoints.restoreBreakpoints(e)}else{this._model.breakpoints.restoreBreakpoints(o)}let a=new Set;const l=await this._setBreakpoints(n,s);const d=l.body.breakpoints.filter(((e,t,s)=>{const i=s.findIndex((t=>t.line===e.line))>-1;const r=!a.has(e.line);a.add(e.line);return i&&r}));this._model.breakpoints.setBreakpoints(s,d);await this.session.sendRequest("configurationDone",{})}pauseOnExceptionsIsValid(){var e,t;if(this.isStarted){if(((t=(e=this.session)===null||e===void 0?void 0:e.exceptionBreakpointFilters)===null||t===void 0?void 0:t.length)!==0){return true}}return false}async pauseOnExceptionsFilter(e){var t;if(!((t=this.session)===null||t===void 0?void 0:t.isStarted)){return}let s=this.session.currentExceptionFilters;if(this.session.isPausingOnException(e)){const t=s.indexOf(e);s.splice(t,1)}else{s===null||s===void 0?void 0:s.push(e)}await this.pauseOnExceptions(s)}async pauseOnExceptions(e){var t,s;if(!((t=this.session)===null||t===void 0?void 0:t.isStarted)){return}const i=((s=this.session.exceptionBreakpointFilters)===null||s===void 0?void 0:s.map((e=>e.filter)))||[];let r={filters:[]};e.forEach((e=>{if(i.includes(e)){r.filters.push(e)}}));this.session.currentExceptionFilters=r.filters;await this.session.sendRequest("setExceptionBreakpoints",r);this._pauseOnExceptionChanged.emit()}getDebuggerState(){var e,t,s,i,r,n,o;const a=this._model.breakpoints.breakpoints;let l=[];if(this._debuggerSources){for(const d of a.keys()){const a=this._debuggerSources.find({focus:false,kernel:(i=(s=(t=(e=this.session)===null||e===void 0?void 0:e.connection)===null||t===void 0?void 0:t.kernel)===null||s===void 0?void 0:s.name)!==null&&i!==void 0?i:"",path:(o=(n=(r=this._session)===null||r===void 0?void 0:r.connection)===null||n===void 0?void 0:n.path)!==null&&o!==void 0?o:"",source:d});const c=a.map((e=>e.src.getSource()));l=l.concat(c)}}return{cells:l,breakpoints:a}}async restoreDebuggerState(e){var t,s,i,r;await this.start();for(const c of e.cells){await this._dumpCell(c)}const n=new Map;const o=(r=(i=(s=(t=this.session)===null||t===void 0?void 0:t.connection)===null||s===void 0?void 0:s.kernel)===null||i===void 0?void 0:i.name)!==null&&r!==void 0?r:"";const{prefix:a,suffix:l}=this._config.getTmpFileParams(o);for(const c of e.breakpoints){const[e,t]=c;const s=e.substr(0,e.length-l.length);const i=s.substr(s.lastIndexOf("/")+1);const r=a.concat(i).concat(l);n.set(r,t)}await this._restoreBreakpoints(n);const d=await this.session.sendRequest("configurationDone",{});await this.restoreState(false);return d.success}_clearModel(){this._model.callstack.frames=[];this._model.variables.scopes=[]}_clearSignals(){this._model.callstack.currentFrameChanged.disconnect(this._onCurrentFrameChanged,this);this._model.variables.variableExpanded.disconnect(this._onVariableExpanded,this)}_convertScopes(e,t){if(!t||!e){return[]}return e.map(((e,s)=>({name:e.name,variables:t[s].map((e=>({...e})))})))}_currentThread(){return 1}async _dumpCell(e){if(!this.session){throw new Error("No active debugger session")}return this.session.sendRequest("dumpCell",{code:e})}_filterBreakpoints(e){if(!this._debuggerSources){return e}let t=new Map;for(const s of e){const[e,i]=s;i.forEach((()=>{var s,r,n,o,a,l,d;this._debuggerSources.find({focus:false,kernel:(o=(n=(r=(s=this.session)===null||s===void 0?void 0:s.connection)===null||r===void 0?void 0:r.kernel)===null||n===void 0?void 0:n.name)!==null&&o!==void 0?o:"",path:(d=(l=(a=this._session)===null||a===void 0?void 0:a.connection)===null||l===void 0?void 0:l.path)!==null&&d!==void 0?d:"",source:e}).forEach((()=>{if(i.length>0){t.set(e,i)}}))}))}return t}async _getAllFrames(){this._model.callstack.currentFrameChanged.connect(this._onCurrentFrameChanged,this);this._model.variables.variableExpanded.connect(this._onVariableExpanded,this);const e=await this._getFrames(this._currentThread());this._model.callstack.frames=e}async _getFrames(e){if(!this.session){throw new Error("No active debugger session")}const t=await this.session.sendRequest("stackTrace",{threadId:e});const s=t.body.stackFrames;return s}async _getScopes(e){if(!this.session){throw new Error("No active debugger session")}if(!e){return[]}const t=await this.session.sendRequest("scopes",{frameId:e.id});return t.body.scopes}async _getVariables(e){if(!this.session){throw new Error("No active debugger session")}if(!e){return[]}const t=await this.session.sendRequest("variables",{variablesReference:e.variablesReference});return t.body.variables}_mapBreakpoints(e){if(!e.length){return new Map}return e.reduce(((e,t)=>{const{breakpoints:s,source:i}=t;e.set(i,s.map((e=>({...e,source:{path:i},verified:true}))));return e}),new Map)}async _onCurrentFrameChanged(e,t){if(!t){return}const s=await this._getScopes(t);const i=await Promise.all(s.map((e=>this._getVariables(e))));const r=this._convertScopes(s,i);this._model.variables.scopes=r}async _onVariableExpanded(e,t){if(!this.session){throw new Error("No active debugger session")}const s=await this.session.sendRequest("variables",{variablesReference:t.variablesReference});let i={...t,expanded:true};s.body.variables.forEach((e=>{i={[e.name]:e,...i}}));const r=this._model.variables.scopes.map((e=>{const s=e.variables.findIndex((e=>e.variablesReference===t.variablesReference));e.variables[s]=i;return{...e}}));this._model.variables.scopes=[...r];return s.body.variables}async _setBreakpoints(e,t){if(!this.session){throw new Error("No active debugger session")}return await this.session.sendRequest("setBreakpoints",{breakpoints:e,source:{path:t},sourceModified:false})}async _restoreBreakpoints(e){for(const[t,s]of e){await this._setBreakpoints(s.filter((({line:e})=>typeof e==="number")).map((({line:e})=>({line:e}))),t)}this._model.breakpoints.restoreBreakpoints(e)}}class ge{constructor(e){this._seq=0;this._ready=new de.PromiseDelegate;this._isDisposed=false;this._isStarted=false;this._exceptionPaths=[];this._exceptionBreakpointFilters=[];this._currentExceptionFilters={};this._disposed=new b.Signal(this);this._eventMessage=new b.Signal(this);this.connection=e.connection;this._config=e.config;this.translator=e.translator||_.nullTranslator}get isDisposed(){return this._isDisposed}get capabilities(){return this._capabilities}get disposed(){return this._disposed}get connection(){return this._connection}set connection(e){var t,s;if(this._connection){this._connection.iopubMessage.disconnect(this._handleEvent,this)}this._connection=e;if(!this._connection){this._isStarted=false;return}this._connection.iopubMessage.connect(this._handleEvent,this);this._ready=new de.PromiseDelegate;const i=(s=(t=this.connection)===null||t===void 0?void 0:t.kernel)===null||s===void 0?void 0:s.requestDebug({type:"request",seq:0,command:"debugInfo"});if(i){i.onReply=e=>{this._ready.resolve();i.dispose()}}}get isStarted(){return this._isStarted}get exceptionPaths(){return this._exceptionPaths}get exceptionBreakpointFilters(){return this._exceptionBreakpointFilters}get currentExceptionFilters(){var e,t,s;const i=(s=(t=(e=this.connection)===null||e===void 0?void 0:e.kernel)===null||t===void 0?void 0:t.name)!==null&&s!==void 0?s:"";if(!i){return[]}const r=this._config.getTmpFileParams(i);if(!r){return[]}let n=r.prefix;if(Object.keys(this._currentExceptionFilters).includes(n)){return this._currentExceptionFilters[n]}return[]}set currentExceptionFilters(e){var t,s,i;const r=(i=(s=(t=this.connection)===null||t===void 0?void 0:t.kernel)===null||s===void 0?void 0:s.name)!==null&&i!==void 0?i:"";if(!r){return}const n=this._config.getTmpFileParams(r);if(!n){return}let o=n.prefix;if(e===null){if(Object.keys(this._currentExceptionFilters).includes(o)){delete this._currentExceptionFilters[o]}}else{this._currentExceptionFilters[o]=e}}get eventMessage(){return this._eventMessage}dispose(){if(this._isDisposed){return}this._isDisposed=true;this._disposed.emit();b.Signal.clearData(this)}async start(){var e,t,s,i;const r=await this.sendRequest("initialize",{clientID:"jupyterlab",clientName:"JupyterLab",adapterID:(s=(t=(e=this.connection)===null||e===void 0?void 0:e.kernel)===null||t===void 0?void 0:t.name)!==null&&s!==void 0?s:"",pathFormat:"path",linesStartAt1:true,columnsStartAt1:true,supportsVariableType:true,supportsVariablePaging:true,supportsRunInTerminalRequest:true,locale:document.documentElement.lang});if(!r.success){throw new Error(`Could not start the debugger: ${r.message}`)}this._capabilities=r.body;this._isStarted=true;this._exceptionBreakpointFilters=(i=r.body)===null||i===void 0?void 0:i.exceptionBreakpointFilters;await this.sendRequest("attach",{})}async stop(){this._isStarted=false;await this.sendRequest("disconnect",{restart:false,terminateDebuggee:false})}async restoreState(){var e;const t=await this.sendRequest("debugInfo",{});this._isStarted=t.body.isStarted;this._exceptionPaths=(e=t.body)===null||e===void 0?void 0:e.exceptionPaths;return t}isPausingOnException(e){var t,s;if(e){return(s=(t=this.currentExceptionFilters)===null||t===void 0?void 0:t.includes(e))!==null&&s!==void 0?s:false}else{return this.currentExceptionFilters.length>0}}async sendRequest(e,t){await this._ready.promise;const s=await this._sendDebugMessage({type:"request",seq:this._seq++,command:e,arguments:t});return s.content}_handleEvent(e,t){const s=t.header.msg_type;if(s!=="debug_event"){return}const i=t.content;this._eventMessage.emit(i)}async _sendDebugMessage(e){var t;const s=(t=this.connection)===null||t===void 0?void 0:t.kernel;if(!s){return Promise.reject(new Error("A kernel is required to send debug messages."))}const i=new de.PromiseDelegate;const r=s.requestDebug(e);r.onReply=e=>{i.resolve(e)};await r.done;return i.promise}}var ve=s(37900);var _e=s.n(ve);class me extends i.ReactWidget{constructor(e){super();this._model=e;this.addClass("jp-DebuggerBreakpoints-body")}render(){return _e().createElement(be,{model:this._model})}}const be=({model:e})=>{const[t,s]=(0,ve.useState)(Array.from(e.breakpoints.entries()));(0,ve.useEffect)((()=>{const t=(t,i)=>{s(Array.from(e.breakpoints.entries()))};const i=t=>{s(Array.from(e.breakpoints.entries()))};e.changed.connect(t);e.restored.connect(i);return()=>{e.changed.disconnect(t);e.restored.disconnect(i)}}));return _e().createElement(_e().Fragment,null,t.map((t=>_e().createElement(fe,{key:t[0],breakpoints:t[1],model:e}))))};const fe=({breakpoints:e,model:t})=>_e().createElement(_e().Fragment,null,e.sort(((e,t)=>{var s,i;return((s=e.line)!==null&&s!==void 0?s:0)-((i=t.line)!==null&&i!==void 0?i:0)})).map(((e,s)=>{var i,r;return _e().createElement(we,{key:((r=(i=e.source)===null||i===void 0?void 0:i.path)!==null&&r!==void 0?r:"")+s,breakpoint:e,model:t})})));const we=({breakpoint:e,model:t})=>{var s,i,r;const n=e=>e[0]==="/"?e.slice(1)+"/":e;return _e().createElement("div",{className:"jp-DebuggerBreakpoint",onClick:()=>t.clicked.emit(e),title:(s=e.source)===null||s===void 0?void 0:s.path},_e().createElement("span",{className:"jp-DebuggerBreakpoint-marker"},"●"),_e().createElement("span",{className:"jp-DebuggerBreakpoint-source jp-left-truncated"},n((r=(i=e.source)===null||i===void 0?void 0:i.path)!==null&&r!==void 0?r:"")),_e().createElement("span",{className:"jp-DebuggerBreakpoint-line"},e.line))};const ke="jp-debugger-pauseOnExceptions";const Se="jp-PauseOnExceptions";const Ce="jp-PauseOnExceptions-menu";class ye extends i.ToolbarButton{constructor(e){super();this.onclick=()=>{this._menu.open(this.node.getBoundingClientRect().left,this.node.getBoundingClientRect().bottom)};this._menu=new Ee({service:e.service,commands:{registry:e.commands.registry,pauseOnExceptions:e.commands.pauseOnExceptions}});this.node.className=ke;this._props=e;this._props.className=Se;this._props.service.eventMessage.connect(((e,t)=>{if(t.event==="initialized"||t.event==="terminated"){this.onChange()}}),this);this._props.enabled=this._props.service.pauseOnExceptionsIsValid();this._props.service.pauseOnExceptionChanged.connect(this.onChange,this)}onChange(){var e;const t=this._props.service.session;const s=t===null||t===void 0?void 0:t.exceptionBreakpointFilters;this._props.className=Se;if(((e=this._props.service.session)===null||e===void 0?void 0:e.isStarted)&&s){this._props.pressed=t.isPausingOnException();this._props.enabled=true}else{this._props.enabled=false}this.update()}render(){return ve.createElement(i.ToolbarButtonComponent,{...this._props,onClick:this.onclick})}}class Ee extends i.MenuSvg{constructor(e){super({commands:e.commands.registry});this._service=e.service;this._command=e.commands.pauseOnExceptions;e.service.eventMessage.connect(((e,t)=>{if(t.event==="initialized"){this._build()}}),this);this._build();this.addClass(Ce)}_build(){var e,t;this.clearItems();const s=(t=(e=this._service.session)===null||e===void 0?void 0:e.exceptionBreakpointFilters)!==null&&t!==void 0?t:[];s.map(((e,t)=>{this.addItem({command:this._command,args:{filter:e.filter,description:e.description}})}))}}class xe extends i.PanelWithToolbar{constructor(e){var t;super(e);this.clicked=new b.Signal(this);const{model:s,service:r,commands:n}=e;const o=((t=e.translator)!==null&&t!==void 0?t:_.nullTranslator).load("jupyterlab");this.title.label=o.__("Breakpoints");const a=new me(s);this.toolbar.addItem("pauseOnException",new ye({service:r,commands:n,icon:W,tooltip:o.__("Pause on exception filter")}));this.toolbar.addItem("closeAll",new i.ToolbarButton({icon:A,onClick:async()=>{if(s.breakpoints.size===0){return}const e=await(0,l.showDialog)({title:o.__("Remove All Breakpoints"),body:o.__("Are you sure you want to remove all breakpoints?"),buttons:[l.Dialog.okButton({label:o.__("Remove breakpoints")}),l.Dialog.cancelButton()],hasClose:true});if(e.button.accept){return r.clearBreakpoints()}},tooltip:o.__("Remove All Breakpoints")}));this.addWidget(a);this.addClass("jp-DebuggerBreakpoints")}}class Me extends i.ReactWidget{constructor(e){super();this._model=e;this.addClass("jp-DebuggerCallstack-body")}render(){return _e().createElement(De,{model:this._model})}}const De=({model:e})=>{const[t,s]=(0,ve.useState)(e.frames);const[i,r]=(0,ve.useState)(e.frame);const n=t=>{r(t);e.frame=t};(0,ve.useEffect)((()=>{const t=()=>{r(e.frame);s(e.frames)};e.framesChanged.connect(t);return()=>{e.framesChanged.disconnect(t)}}),[e]);const o=e=>{var t;const s=((t=e.source)===null||t===void 0?void 0:t.path)||"";const i=f.PathExt.basename(f.PathExt.dirname(s));const r=f.PathExt.basename(s);const n=f.PathExt.join(i,r);return`${n}:${e.line}`};return _e().createElement("ul",null,t.map((e=>{var t;return _e().createElement("li",{key:e.id,onClick:()=>n(e),className:(i===null||i===void 0?void 0:i.id)===e.id?"selected jp-DebuggerCallstackFrame":"jp-DebuggerCallstackFrame"},_e().createElement("span",{className:"jp-DebuggerCallstackFrame-name"},e.name),_e().createElement("span",{className:"jp-DebuggerCallstackFrame-location",title:(t=e.source)===null||t===void 0?void 0:t.path},o(e)))})))};class Ie extends i.PanelWithToolbar{constructor(e){var t;super(e);const{commands:s,model:r}=e;const n=((t=e.translator)!==null&&t!==void 0?t:_.nullTranslator).load("jupyterlab");this.title.label=n.__("Callstack");const o=new Me(r);this.toolbar.addItem("continue",new i.CommandToolbarButton({commands:s.registry,id:s.continue,label:""}));this.toolbar.addItem("terminate",new i.CommandToolbarButton({commands:s.registry,id:s.terminate,label:""}));this.toolbar.addItem("step-over",new i.CommandToolbarButton({commands:s.registry,id:s.next,label:""}));this.toolbar.addItem("step-in",new i.CommandToolbarButton({commands:s.registry,id:s.stepIn,label:""}));this.toolbar.addItem("step-out",new i.CommandToolbarButton({commands:s.registry,id:s.stepOut,label:""}));this.toolbar.addItem("evaluate",new i.CommandToolbarButton({commands:s.registry,id:s.evaluate,label:""}));this.addWidget(o);this.addClass("jp-DebuggerCallstack")}}const Te=({model:e})=>_e().createElement(i.UseSignal,{signal:e.currentSourceChanged,initialSender:e},(e=>{var t,s;return _e().createElement("span",{onClick:()=>e===null||e===void 0?void 0:e.open(),className:"jp-DebuggerSources-header-path"},(s=(t=e===null||e===void 0?void 0:e.currentSource)===null||t===void 0?void 0:t.path)!==null&&s!==void 0?s:"")}));class Ve extends c.Widget{constructor(e){super();this._model=e.model;this._debuggerService=e.service;this._mimeTypeService=e.editorServices.mimeTypeService;const t=new et.ReadOnlyEditorFactory({editorServices:e.editorServices});this._editor=t.createNewEditor({content:"",mimeType:"",path:""});this._editor.hide();this._model.currentFrameChanged.connect((async(e,t)=>{if(!t){this._clearEditor();return}void this._showSource(t)}));const s=new c.PanelLayout;s.addWidget(this._editor);this.layout=s;this.addClass("jp-DebuggerSources-body")}dispose(){var e;if(this.isDisposed){return}(e=this._editorHandler)===null||e===void 0?void 0:e.dispose();b.Signal.clearData(this);super.dispose()}_clearEditor(){this._model.currentSource=null;this._editor.hide()}async _showSource(e){var t;const s=(t=e.source)===null||t===void 0?void 0:t.path;const i=await this._debuggerService.getSource({sourceReference:0,path:s});if(!(i===null||i===void 0?void 0:i.content)){this._clearEditor();return}if(this._editorHandler){this._editorHandler.dispose()}const{content:r,mimeType:n}=i;const o=n||this._mimeTypeService.getMimeTypeByFilePath(s!==null&&s!==void 0?s:"");this._editor.model.sharedModel.setSource(r);this._editor.model.mimeType=o;this._editorHandler=new y({debuggerService:this._debuggerService,editorReady:()=>Promise.resolve(this._editor.editor),getEditor:()=>this._editor.editor,path:s,src:this._editor.model.sharedModel});this._model.currentSource={content:r,mimeType:o,path:s!==null&&s!==void 0?s:""};requestAnimationFrame((()=>{y.showCurrentLine(this._editor.editor,e.line)}));this._editor.show()}}class Be extends i.PanelWithToolbar{constructor(e){var t;super();const{model:s,service:r,editorServices:n}=e;const o=((t=e.translator)!==null&&t!==void 0?t:_.nullTranslator).load("jupyterlab");this.title.label=o.__("Source");this.toolbar.addClass("jp-DebuggerSources-header");const a=new Ve({service:r,model:s,editorServices:n});this.toolbar.addItem("open",new i.ToolbarButton({icon:U,onClick:()=>s.open(),tooltip:o.__("Open in the Main Area")}));const l=i.ReactWidget.create(_e().createElement(Te,{model:s}));this.toolbar.addItem("sourcePath",l);this.addClass("jp-DebuggerSources-header");this.addWidget(a);this.addClass("jp-DebuggerSources")}}const He=e=>{const t=t=>{const s=t.target.value;e.model.filter=s};return _e().createElement(i.InputGroup,{type:"text",onChange:t,placeholder:"Filter the kernel sources",value:e.model.filter})};const je=e=>_e().createElement(i.UseSignal,{signal:e.model.filterChanged,initialArgs:e.model.filter},(t=>_e().createElement(He,{model:e.model})));const Fe="jp-DebuggerKernelSource-filterBox";const Re="jp-DebuggerKernelSource-filterBox-hidden";const Le="jp-DebuggerKernelSource-source";class Pe extends i.ReactWidget{constructor(e){var t;super();this._showFilter=false;this._model=e.model;this._debuggerService=e.service;this._trans=((t=e.translator)!==null&&t!==void 0?t:_.nullTranslator).load("jupyterlab");this.addClass("jp-DebuggerKernelSources-body")}render(){let e=Fe;if(!this._showFilter){e+=" "+Re}return _e().createElement(_e().Fragment,null,_e().createElement("div",{className:e,key:"filter"},_e().createElement(je,{model:this._model})),_e().createElement(i.UseSignal,{signal:this._model.changed},((e,t)=>{const s={};return(t!==null&&t!==void 0?t:[]).map((e=>{var t;const r=e.name;const n=e.path;const o=r+(s[r]=((t=s[r])!==null&&t!==void 0?t:0)+1).toString();return _e().createElement("div",{key:o,title:n,className:Le,onClick:()=>{this._debuggerService.getSource({sourceReference:0,path:n}).then((e=>{this._model.open(e)})).catch((e=>{void(0,l.showErrorMessage)(this._trans.__("Fail to get source"),this._trans.__("Fail to get '%1' source:\n%2",n,e))}))}},_e().createElement(i.LabIcon.resolveReact,{icon:J,iconClass:(0,i.classes)("jp-Icon"),tag:null}),r)}))})))}toggleFilterbox(){this._showFilter=!this._showFilter;this.update()}}class Ne extends i.PanelWithToolbar{constructor(e){var t;super();const{model:s,service:r}=e;this._model=s;const n=((t=e.translator)!==null&&t!==void 0?t:_.nullTranslator).load("jupyterlab");this.title.label=n.__("Kernel Sources");this.toolbar.addClass("jp-DebuggerKernelSources-header");this._body=new Pe({service:r,model:s,translator:e.translator});this.toolbar.addItem("open-filter",new i.ToolbarButton({icon:i.searchIcon,onClick:async()=>{this._body.toggleFilterbox()},tooltip:n.__("Toggle search filter")}));this.toolbar.addItem("refresh",new i.ToolbarButton({icon:i.refreshIcon,onClick:()=>{this._model.kernelSources=[];void r.displayModules().catch((e=>{void(0,l.showErrorMessage)(n.__("Fail to get kernel sources"),n.__("Fail to get kernel sources:\n%2",e))}))},tooltip:n.__("Refresh kernel sources")}));this.addClass("jp-DebuggerKernelSources-header");this.addWidget(this._body);this.addClass("jp-DebuggerKenelSources")}set filter(e){this._model.filter=e}}const Oe=({model:e,tree:t,grid:s,trans:r})=>{const[n,o]=(0,ve.useState)("-");const a=e.scopes;const l=e=>{const i=e.target.value;o(i);t.scope=i;s.scope=i};return _e().createElement(i.HTMLSelect,{onChange:l,value:n,"aria-label":r.__("Scope")},a.map((e=>_e().createElement("option",{key:e.name,value:e.name},r.__(e.name)))))};class qe extends i.ReactWidget{constructor(e){super();const{translator:t,model:s,tree:i,grid:r}=e;this._model=s;this._tree=i;this._grid=r;this._trans=(t||_.nullTranslator).load("jupyterlab")}render(){return _e().createElement(i.UseSignal,{signal:this._model.changed,initialSender:this._model},(()=>_e().createElement(Oe,{model:this._model,trans:this._trans,tree:this._tree,grid:this._grid})))}}var Ae=s(10535);const We="jp-DebuggerVariables-buttons";class Ze extends i.ReactWidget{constructor(e){super();this._scope="";this._scopes=[];this._filter=new Set;this._commands=e.commands;this._service=e.service;this._translator=e.translator;this._hoverChanged=new b.Signal(this);const t=this.model=e.model;t.changed.connect(this._updateScopes,this);this.addClass("jp-DebuggerVariables-body")}render(){var e;const t=(e=this._scopes.find((e=>e.name===this._scope)))!==null&&e!==void 0?e:this._scopes[0];const s=e=>{this.model.selectedVariable=e};const r=_e().createElement(i.caretDownEmptyIcon.react,{stylesheet:"menuItem",tag:"span"});if((t===null||t===void 0?void 0:t.name)!=="Globals"){this.addClass("jp-debuggerVariables-local")}else{this.removeClass("jp-debuggerVariables-local")}return t?_e().createElement(_e().Fragment,null,_e().createElement(Ge,{key:t.name,commands:this._commands,service:this._service,data:t.variables,filter:this._filter,translator:this._translator,handleSelectVariable:s,onHoverChanged:e=>{this._hoverChanged.emit(e)},collapserIcon:r}),_e().createElement(Ke,{commands:this._commands,service:this._service,hoverChanged:this._hoverChanged,handleSelectVariable:s})):_e().createElement("div",null)}set filter(e){this._filter=e;this.update()}set scope(e){this._scope=e;this.update()}_updateScopes(e){if(Ae.ArrayExt.shallowEqual(this._scopes,e.scopes)){return}this._scopes=e.scopes;this.update()}}const Ke=e=>{var t;const{commands:s,service:r,translator:n,handleSelectVariable:o}=e;const a=(n!==null&&n!==void 0?n:_.nullTranslator).load("jupyterlab");const[l,d]=(0,ve.useState)(0);const[c,h]=(0,ve.useState)(null);let u=0;const p=(0,ve.useCallback)(((e,t)=>{const s=++u;if(!t.variable){if(s!==u){return}const e=t.target;if(e&&e instanceof Element&&e.closest(`.${We}`)){return}h(null)}else{h(t.variable);requestAnimationFrame((()=>{if(s!==u||!t.target){return}d(t.target.offsetTop)}))}}),[]);(0,ve.useEffect)((()=>{e.hoverChanged.connect(p);return()=>{e.hoverChanged.disconnect(p)}}),[p]);return _e().createElement("div",{className:We,style:{transform:`translateY(${l}px)`,opacity:!c||["special variables","protected variables","function variables","class variables"].includes(c.name)?0:1}},_e().createElement("button",{className:"jp-DebuggerVariables-renderVariable",disabled:!c||!r.model.hasRichVariableRendering||!s.isEnabled(et.CommandIDs.renderMimeVariable,{name:c.name,frameID:(t=r.model.callstack.frame)===null||t===void 0?void 0:t.id}),onClick:e=>{var t;if(!c||!o){return}e.stopPropagation();o(c);s.execute(et.CommandIDs.renderMimeVariable,{name:c.name,frameID:(t=r.model.callstack.frame)===null||t===void 0?void 0:t.id}).catch((e=>{console.error(`Failed to render variable ${c===null||c===void 0?void 0:c.name}`,e)}))},title:a.__("Render variable: %1",c===null||c===void 0?void 0:c.name)},_e().createElement(i.searchIcon.react,{stylesheet:"menuItem",tag:"span"})))};const Ge=e=>{const{commands:t,data:s,service:i,filter:r,translator:n,handleSelectVariable:o,onHoverChanged:a,collapserIcon:l}=e;const[d,c]=(0,ve.useState)(s);(0,ve.useEffect)((()=>{c(s)}),[s]);return _e().createElement("ul",{className:"jp-DebuggerVariables-branch"},d.filter((e=>!(r||new Set).has(e.evaluateName||""))).map((e=>{const s=`${e.name}-${e.evaluateName}-${e.type}-${e.value}-${e.variablesReference}`;return _e().createElement($e,{key:s,commands:t,data:e,service:i,filter:r,translator:n,onSelect:o,onHoverChanged:a,collapserIcon:l})})))};function ze(e){if(e.type==="float"&&(e.value=="inf"||e.value=="-inf")){return e.value}const t=Je(e);if(e.type==="float"&&isNaN(t)){return"NaN"}return t}const $e=e=>{const{commands:t,data:s,service:i,filter:r,translator:n,onSelect:o,onHoverChanged:a,collapserIcon:l}=e;const[d]=(0,ve.useState)(s);const[c,h]=(0,ve.useState)();const[u,p]=(0,ve.useState)();const g=o!==null&&o!==void 0?o:()=>void 0;const v=d.variablesReference!==0||d.type==="function";const _=async e=>{if(!v){return}e.stopPropagation();const t=await i.inspectVariable(d.variablesReference);h(!c);p(t)};return _e().createElement("li",{onClick:e=>_(e),onMouseDown:e=>{e.stopPropagation();g(d)},onMouseOver:e=>{if(a){a({target:e.currentTarget,variable:d});e.stopPropagation()}},onMouseLeave:e=>{if(a){a({target:e.relatedTarget,variable:null});e.stopPropagation()}}},_e().createElement("span",{className:"jp-DebuggerVariables-collapser"+(c?" jp-mod-expanded":"")},v?_e().cloneElement(l):null),_e().createElement("span",{className:"jp-DebuggerVariables-name"},d.name),_e().createElement("span",{className:"jp-DebuggerVariables-detail"},ze(d)),c&&u&&_e().createElement(Ge,{key:d.name,commands:t,data:u,service:i,filter:r,translator:n,handleSelectVariable:o,onHoverChanged:a,collapserIcon:l}))};class Ue extends i.PanelWithToolbar{constructor(e){super(e);const{model:t,service:s,commands:r,themeManager:n}=e;const o=e.translator||_.nullTranslator;const a=o.load("jupyterlab");this.title.label=a.__("Variables");this.toolbar.addClass("jp-DebuggerVariables-toolbar");this._tree=new Ze({model:t,service:s,commands:r,translator:o});this._table=new ae({model:t,commands:r,themeManager:n,translator:o});this._table.hide();this.toolbar.addItem("scope-switcher",new qe({translator:o,model:t,tree:this._tree,grid:this._table}));const l=()=>{if(this._table.isHidden){this._tree.hide();this._table.show();this.node.setAttribute("data-jp-table","true");h("table")}else{this._tree.show();this._table.hide();this.node.removeAttribute("data-jp-table");h("tree")}this.update()};const d=new i.ToolbarButton({icon:i.treeViewIcon,className:"jp-TreeView",onClick:l,tooltip:a.__("Tree View")});const c=new i.ToolbarButton({icon:i.tableRowsIcon,className:"jp-TableView",onClick:l,tooltip:a.__("Table View")});const h=e=>{c.pressed=e!=="tree";d.pressed=!c.pressed};h(this._table.isHidden?"tree":"table");this.toolbar.addItem("view-VariableTreeView",d);this.toolbar.addItem("view-VariableTableView",c);this.addWidget(this._tree);this.addWidget(this._table);this.addClass("jp-DebuggerVariables")}set filter(e){this._tree.filter=e;this._table.filter=e}onResize(e){super.onResize(e);this._resizeBody(e)}_resizeBody(e){const t=e.height-this.toolbar.node.offsetHeight;this._tree.node.style.height=`${t}px`}}const Je=e=>{var t,s;const{type:i,value:r}=e;switch(i){case"int":return parseInt(r,10);case"float":return parseFloat(r);case"bool":return r;case"str":if((s=(t=e.presentationHint)===null||t===void 0?void 0:t.attributes)===null||s===void 0?void 0:s.includes("rawString")){return r.slice(1,r.length-1)}else{return r}default:return i!==null&&i!==void 0?i:r}};class Ye extends i.SidePanel{constructor(e){const t=e.translator||_.nullTranslator;super({translator:t});this.id="jp-debugger-sidebar";this.title.icon=i.bugIcon;this.addClass("jp-DebuggerSidebar");const{callstackCommands:s,breakpointsCommands:r,editorServices:n,service:o,themeManager:a}=e;const l=o.model;this.variables=new Ue({model:l.variables,commands:s.registry,service:o,themeManager:a,translator:t});this.callstack=new Ie({commands:s,model:l.callstack,translator:t});this.breakpoints=new xe({service:o,commands:r,model:l.breakpoints,translator:t});this.sources=new Be({model:l.sources,service:o,editorServices:n,translator:t});this.kernelSources=new Ne({model:l.kernelSources,service:o,translator:t});const d=new Ye.Header;this.header.addWidget(d);l.titleChanged.connect(((e,t)=>{d.title.label=t}));this.content.addClass("jp-DebuggerSidebar-body");this.addWidget(this.variables);this.addWidget(this.callstack);this.addWidget(this.breakpoints);this.addWidget(this.sources);this.addWidget(this.kernelSources)}}(function(e){class t extends c.Widget{constructor(){super({node:Qe.createHeader()});this.title.changed.connect((e=>{this.node.textContent=this.title.label}))}}e.Header=t})(Ye||(Ye={}));var Qe;(function(e){function t(){const e=document.createElement("h2");e.textContent="-";e.classList.add("jp-text-truncated");return e}e.createHeader=t})(Qe||(Qe={}));class Xe{constructor(e){var t,s,i;this._config=e.config;this._shell=e.shell;this._notebookTracker=(t=e.notebookTracker)!==null&&t!==void 0?t:null;this._consoleTracker=(s=e.consoleTracker)!==null&&s!==void 0?s:null;this._editorTracker=(i=e.editorTracker)!==null&&i!==void 0?i:null;this._readOnlyEditorTracker=new l.WidgetTracker({namespace:"@jupyterlab/debugger"})}find(e){return[...this._findInConsoles(e),...this._findInEditors(e),...this._findInNotebooks(e),...this._findInReadOnlyEditors(e)]}open(e){const{editorWrapper:t,label:s,caption:r}=e;const n=new l.MainAreaWidget({content:t});n.id=l.DOMUtils.createDomID();n.title.label=s;n.title.closable=true;n.title.caption=r;n.title.icon=i.textEditorIcon;this._shell.add(n,"main",{type:"Debugger Sources"});void this._readOnlyEditorTracker.add(n)}_findInNotebooks(e){if(!this._notebookTracker){return[]}const{focus:t,kernel:s,path:i,source:r}=e;const n=[];this._notebookTracker.forEach((e=>{const o=e.sessionContext;if(i!==o.path){return}const a=e.content;if(t){a.mode="command"}const l=e.content.widgets;l.forEach(((i,o)=>{const l=i.model.sharedModel.getSource();const d=this._getCodeId(l,s);if(!d){return}if(r!==d){return}if(t){a.activeCellIndex=o;if(a.activeCell){a.scrollToItem(a.activeCellIndex).catch((e=>{}))}this._shell.activateById(e.id)}n.push(Object.freeze({get:()=>i.editor,reveal:()=>a.scrollToItem(o),src:i.model.sharedModel}))}))}));return n}_findInConsoles(e){if(!this._consoleTracker){return[]}const{focus:t,kernel:s,path:i,source:r}=e;const n=[];this._consoleTracker.forEach((e=>{const o=e.sessionContext;if(i!==o.path){return}const a=e.console.cells;for(const i of a){const o=i.model.sharedModel.getSource();const a=this._getCodeId(o,s);if(!a){break}if(r!==a){break}n.push(Object.freeze({get:()=>i.editor,reveal:()=>Promise.resolve(this._shell.activateById(e.id)),src:i.model.sharedModel}));if(t){this._shell.activateById(e.id)}}}));return n}_findInEditors(e){if(!this._editorTracker){return[]}const{focus:t,kernel:s,path:i,source:r}=e;const n=[];this._editorTracker.forEach((e=>{const o=e.content;if(i!==o.context.path){return}const a=o.editor;if(!a){return}const l=a.model.sharedModel.getSource();const d=this._getCodeId(l,s);if(!d){return}if(r!==d){return}n.push(Object.freeze({get:()=>a,reveal:()=>Promise.resolve(this._shell.activateById(e.id)),src:o.model.sharedModel}));if(t){this._shell.activateById(e.id)}}));return n}_findInReadOnlyEditors(e){const{focus:t,kernel:s,source:i}=e;const r=[];this._readOnlyEditorTracker.forEach((e=>{var n;const o=(n=e.content)===null||n===void 0?void 0:n.editor;if(!o){return}const a=o.model.sharedModel.getSource();const l=this._getCodeId(a,s);if(!l){return}if(e.title.caption!==i&&i!==l){return}r.push(Object.freeze({get:()=>o,reveal:()=>Promise.resolve(this._shell.activateById(e.id)),src:o.model.sharedModel}));if(t){this._shell.activateById(e.id)}}));return r}_getCodeId(e,t){try{return this._config.getCodeId(e,t)}catch(s){return""}}}var et;(function(e){class t extends a{}e.Config=t;class s extends y{}e.EditorHandler=s;class r extends B{}e.Handler=r;class n extends oe{}e.Model=n;class o extends v{}e.ReadOnlyEditorFactory=o;class l extends pe{}e.Service=l;class d extends ge{}e.Session=d;class c extends Ye{}e.Sidebar=c;class u extends Xe{}e.Sources=u;class p extends ae{}e.VariablesGrid=p;class g extends ue{}e.VariableRenderer=g;let _;(function(e){e.debugContinue="debugger:continue";e.terminate="debugger:terminate";e.next="debugger:next";e.showPanel="debugger:show-panel";e.stepIn="debugger:stepIn";e.stepOut="debugger:stepOut";e.inspectVariable="debugger:inspect-variable";e.renderMimeVariable="debugger:render-mime-variable";e.evaluate="debugger:evaluate";e.restartDebug="debugger:restart-debug";e.pauseOnExceptions="debugger:pause-on-exceptions";e.copyToClipboard="debugger:copy-to-clipboard";e.copyToGlobals="debugger:copy-to-globals";e.openSource="debugger:open-source"})(_=e.CommandIDs||(e.CommandIDs={}));let m;(function(e){e.closeAllIcon=A;e.evaluateIcon=i.codeIcon;e.continueIcon=i.runIcon;e.pauseIcon=Z;e.stepIntoIcon=K;e.stepOutIcon=z;e.stepOverIcon=G;e.terminateIcon=i.stopIcon;e.variableIcon=$;e.viewBreakpointIcon=U;e.pauseOnExceptionsIcon=Z})(m=e.Icons||(e.Icons={}));let b;(function(e){e.getCode=h.getCode})(b=e.Dialogs||(e.Dialogs={}))})(et||(et={}))},90429:(e,t,s)=>{s.r(t);s.d(t,{Debugger:()=>i.q,IDebugger:()=>n,IDebuggerConfig:()=>o,IDebuggerHandler:()=>d,IDebuggerSidebar:()=>l,IDebuggerSourceViewer:()=>c,IDebuggerSources:()=>a});var i=s(17275);var r=s(55172);const n=new r.Token("@jupyterlab/debugger:IDebugger","A debugger user interface.");const o=new r.Token("@jupyterlab/debugger:IDebuggerConfig","A service to handle the debugger configuration.");const a=new r.Token("@jupyterlab/debugger:IDebuggerSources","A service to display sources in debug mode.");const l=new r.Token("@jupyterlab/debugger:IDebuggerSidebar","A service for the debugger sidebar.");const d=new r.Token("@jupyterlab/debugger:IDebuggerHandler","A service for handling notebook debugger.");const c=new r.Token("@jupyterlab/debugger:IDebuggerSourceViewer","A debugger source viewer.")}}]);
//# sourceMappingURL=429.b9369aef733dfcbded10.js.map?v=b9369aef733dfcbded10