(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[1827],{41827:(e,t,s)=>{"use strict";s.r(t);s.d(t,{Debugger:()=>ze,IDebugger:()=>Ue,IDebuggerConfig:()=>Xe,IDebuggerHandler:()=>Qe,IDebuggerSidebar:()=>Je,IDebuggerSources:()=>Ye});var i=s(29131);const n=1540483477;const r=new TextEncoder;function o(e,t){const s=r.encode(e);let i=s.length;let o=t^i;let a=0;while(i>=4){let e=s[a]&255|(s[++a]&255)<<8|(s[++a]&255)<<16|(s[++a]&255)<<24;e=(e&65535)*n+(((e>>>16)*n&65535)<<16);e^=e>>>24;e=(e&65535)*n+(((e>>>16)*n&65535)<<16);o=(o&65535)*n+(((o>>>16)*n&65535)<<16)^e;i-=4;++a}switch(i){case 3:o^=(s[a+2]&255)<<16;case 2:o^=(s[a+1]&255)<<8;case 1:o^=s[a]&255;o=(o&65535)*n+(((o>>>16)*n&65535)<<16)}o^=o>>>13;o=(o&65535)*n+(((o>>>16)*n&65535)<<16);o^=o>>>15;return o>>>0}class a{constructor(){this._fileParams=new Map;this._hashMethods=new Map}getCodeId(e,t){const s=this._fileParams.get(t);if(!s){throw new Error(`Kernel (${t}) has no tmp file params.`)}const i=this._hashMethods.get(t);if(!i){throw new Error(`Kernel (${t}) has no hashing params.`)}const{prefix:n,suffix:r}=s;return`${n}${i(e)}${r}`}setHashParams(e){const{kernel:t,method:s,seed:i}=e;if(!t){throw new TypeError(`Kernel name is not defined.`)}switch(s){case"Murmur2":this._hashMethods.set(t,(e=>o(e,i).toString()));break;default:throw new Error(`Hash method (${s}) is not supported.`)}}setTmpFileParams(e){const{kernel:t,prefix:s,suffix:i}=e;if(!t){throw new TypeError(`Kernel name is not defined.`)}this._fileParams.set(t,{kernel:t,prefix:s,suffix:i})}getTmpFileParams(e){return this._fileParams.get(e)}}var l=s(67616);var d=s(37767);var c=s(18453);var h;(function(e){function t(e){const t=new u(Object.assign(Object.assign({},e),{body:new g(e),buttons:[l.Dialog.cancelButton({label:e.cancelLabel}),l.Dialog.okButton({label:e.okLabel})]}));return t.launch()}e.getCode=t})(h||(h={}));class u extends l.Dialog{handleEvent(e){if(e.type==="keydown"){const t=e;const{code:s,shiftKey:i}=t;if(i&&s==="Enter"){return this.resolve()}if(s==="Enter"){return}}super.handleEvent(e)}}class g extends c.Widget{constructor(e){super();const{rendermime:t,mimeType:s}=e;const i=new d.CodeCellModel({});i.mimeType=s!==null&&s!==void 0?s:"";this._prompt=new d.CodeCell({rendermime:t,model:i}).initializeState();this._prompt.inputArea.promptNode.remove();this.node.appendChild(this._prompt.node)}getValue(){return this._prompt.model.value.text}onAfterAttach(e){super.onAfterAttach(e);this._prompt.activate()}}var p=s(41994);class _{constructor(e){this._services=e.editorServices}createNewEditor(e){const{content:t,mimeType:s,path:i}=e;const n=this._services.factoryService.newInlineEditor;const r=this._services.mimeTypeService;const o=new p.CodeEditorWrapper({model:new p.CodeEditor.Model({value:t,mimeType:s||r.getMimeTypeByFilePath(i)}),factory:n,config:{readOnly:true,lineNumbers:true}});o.node.setAttribute("data-jp-debugger","true");return o}}var m=s(70278);var v=s(24445);var b=s(47063);var f=s(8595);var w=s(66853);const k="jp-DebuggerEditor-highlight";const y=1e3;class C{constructor(e){var t,s,i,n;this._onGutterClick=(e,t)=>{var s,i,n;const r=e.lineInfo(t);if(!r||this._id!==((i=(s=this._debuggerService.session)===null||s===void 0?void 0:s.connection)===null||i===void 0?void 0:i.id)){return}const o=!!r.gutterMarkers;let a=this._getBreakpoints();if(o){a=a.filter((e=>e.line!==r.line+1))}else{a.push(S.createBreakpoint((n=this._path)!==null&&n!==void 0?n:this._debuggerService.session.connection.name,r.line+1))}void this._debuggerService.updateBreakpoints(this._editor.model.value.text,a,this._path)};this._id=(i=(s=(t=e.debuggerService.session)===null||t===void 0?void 0:t.connection)===null||s===void 0?void 0:s.id)!==null&&i!==void 0?i:"";this._path=(n=e.path)!==null&&n!==void 0?n:"";this._debuggerService=e.debuggerService;this._editor=e.editor;this._editorMonitor=new w.ActivityMonitor({signal:this._editor.model.value.changed,timeout:y});this._editorMonitor.activityStopped.connect((()=>{this._sendEditorBreakpoints()}),this);this._debuggerService.model.breakpoints.changed.connect((async()=>{if(!this._editor||this._editor.isDisposed){return}this._addBreakpointsToEditor()}));this._debuggerService.model.breakpoints.restored.connect((async()=>{if(!this._editor||this._editor.isDisposed){return}this._addBreakpointsToEditor()}));this._debuggerService.model.callstack.currentFrameChanged.connect((()=>{C.clearHighlight(this._editor)}));this._setupEditor()}get editor(){return this._editor}dispose(){if(this.isDisposed){return}this._editorMonitor.dispose();this._clearEditor();this.isDisposed=true;f.Signal.clearData(this)}refreshBreakpoints(){this._addBreakpointsToEditor()}_setupEditor(){if(!this._editor||this._editor.isDisposed){return}this._addBreakpointsToEditor();const e=this._editor;e.setOption("lineNumbers",true);e.editor.setOption("gutters",["CodeMirror-linenumbers","breakpoints"]);e.editor.on("gutterClick",this._onGutterClick)}_clearEditor(){if(!this._editor||this._editor.isDisposed){return}const e=this._editor;C.clearHighlight(e);C.clearGutter(e);e.setOption("lineNumbers",false);e.editor.setOption("gutters",[]);e.editor.off("gutterClick",this._onGutterClick)}_sendEditorBreakpoints(){if(this._editor.isDisposed){return}const e=this._getBreakpointsFromEditor().map((e=>{var t,s;return S.createBreakpoint(((s=(t=this._debuggerService.session)===null||t===void 0?void 0:t.connection)===null||s===void 0?void 0:s.name)||"",e.line+1)}));void this._debuggerService.updateBreakpoints(this._editor.model.value.text,e,this._path)}_addBreakpointsToEditor(){var e,t;const s=this._editor;const i=this._getBreakpoints();if(this._id!==((t=(e=this._debuggerService.session)===null||e===void 0?void 0:e.connection)===null||t===void 0?void 0:t.id)){return}C.clearGutter(s);i.forEach((e=>{if(typeof e.line==="number"){s.editor.setGutterMarker(e.line-1,"breakpoints",S.createMarkerNode())}}))}_getBreakpointsFromEditor(){const e=this._editor;let t=[];for(let s=0;s<e.doc.lineCount();s++){const i=e.editor.lineInfo(s);if(i.gutterMarkers){t.push(i)}}return t}_getBreakpoints(){const e=this._editor.model.value.text;return this._debuggerService.model.breakpoints.getBreakpoints(this._path||this._debuggerService.getCodeId(e))}}(function(e){function t(e,t){s(e);const i=e;i.editor.addLineClass(t-1,"wrap",k);i.scrollIntoViewCentered({ch:0,line:t-1})}e.showCurrentLine=t;function s(e){if(!e||e.isDisposed){return}const t=e;t.doc.eachLine((e=>{t.editor.removeLineClass(e,"wrap",k)}))}e.clearHighlight=s;function i(e){if(!e){return}const t=e;t.doc.eachLine((e=>{if(e.gutterMarkers){t.editor.setGutterMarker(e,"breakpoints",null)}}))}e.clearGutter=i})(C||(C={}));var S;(function(e){function t(){const e=document.createElement("div");e.className="jp-DebuggerEditor-marker";e.innerHTML="●";return e}e.createMarkerNode=t;function s(e,t){return{line:t,verified:true,source:{name:e}}}e.createBreakpoint=s})(S||(S={}));class E{constructor(e){this._debuggerService=e.debuggerService;this._consolePanel=e.widget;this._cellMap=new v.ObservableMap;const t=this._consolePanel.console;if(t.promptCell){this._addEditorHandler(t.promptCell)}t.promptCellCreated.connect(((e,t)=>{this._addEditorHandler(t)}));const s=()=>{(0,b.each)(t.cells,(e=>this._addEditorHandler(e)))};s();this._consolePanel.console.cells.changed.connect(s)}dispose(){if(this.isDisposed){return}this.isDisposed=true;this._cellMap.values().forEach((e=>e.dispose()));this._cellMap.dispose();f.Signal.clearData(this)}_addEditorHandler(e){const t=e.model.id;if(e.model.type!=="code"||this._cellMap.has(t)){return}const s=e;const i=new C({debuggerService:this._debuggerService,editor:s.editor});s.disposed.connect((()=>{this._cellMap.delete(t);i.dispose()}));this._cellMap.set(t,i)}}class x{constructor(e){this._debuggerService=e.debuggerService;this._fileEditor=e.widget.content;this._hasLineNumber=this._fileEditor.editor.getOption("lineNumbers");this._editorHandler=new C({debuggerService:this._debuggerService,editor:this._fileEditor.editor})}dispose(){var e,t;if(this.isDisposed){return}this.isDisposed=true;(e=this._editorHandler)===null||e===void 0?void 0:e.dispose();(t=this._editorHandler)===null||t===void 0?void 0:t.editor.setOptions({lineNumbers:this._hasLineNumber});f.Signal.clearData(this)}}class M{constructor(e){var t;this._debuggerService=e.debuggerService;this._notebookPanel=e.widget;this._cellMap=new v.ObservableMap;const s=this._notebookPanel.content;s.activeCellChanged.connect(this._onActiveCellChanged,this);(t=s.model)===null||t===void 0?void 0:t.cells.changed.connect(this._onCellsChanged,this);this._onCellsChanged()}dispose(){if(this.isDisposed){return}this.isDisposed=true;this._cellMap.values().forEach((e=>{e.dispose();e.editor.setOptions(Object.assign({},this._notebookPanel.content.editorConfig.code))}));this._cellMap.dispose();f.Signal.clearData(this)}_onCellsChanged(e,t){var s;this._notebookPanel.content.widgets.forEach((e=>this._addEditorHandler(e)));if((t===null||t===void 0?void 0:t.type)==="move"){for(const e of t.newValues){(s=this._cellMap.get(e.id))===null||s===void 0?void 0:s.refreshBreakpoints()}}}_addEditorHandler(e){const t=e.model.id;if(e.model.type!=="code"||this._cellMap.has(t)){return}const s=e;const i=new C({debuggerService:this._debuggerService,editor:s.editor});s.disposed.connect((()=>{this._cellMap.delete(t);i.dispose()}));this._cellMap.set(e.model.id,i)}_onActiveCellChanged(e,t){if(this._notebookPanel.content!==e){return}this._addEditorHandler(t)}}const D="debugger-icon";function I(e,t,s,n,r=m.nullTranslator){const o=r.load("jupyterlab");const a=new l.ToolbarButton({className:"jp-DebuggerBugButton",icon:i.bugIcon,tooltip:o.__("Enable Debugger"),pressedIcon:i.bugDotIcon,pressedTooltip:o.__("Disable Debugger"),disabledTooltip:o.__("Select a kernel that supports debugging to enable debugger"),enabled:s,pressed:n,onClick:t});if(!e.toolbar.insertBefore("kernelName",D,a)){e.toolbar.addItem(D,a)}return a}function T(e,t,s=true,i){if(e){e.enabled=s;e.pressed=t;if(i){e.onClick=i}}}class B{constructor(e){this._handlers={};this._contextKernelChangedHandlers={};this._kernelChangedHandlers={};this._statusChangedHandlers={};this._iopubMessageHandlers={};this._iconButtons={};this._type=e.type;this._shell=e.shell;this._service=e.service}get activeWidget(){return this._activeWidget}async update(e,t){if(!t){delete this._kernelChangedHandlers[e.id];delete this._statusChangedHandlers[e.id];delete this._iopubMessageHandlers[e.id];return this.updateWidget(e,t)}const s=()=>{void this.updateWidget(e,t)};const i=this._kernelChangedHandlers[e.id];if(i){t.kernelChanged.disconnect(i)}this._kernelChangedHandlers[e.id]=s;t.kernelChanged.connect(s);const n=(s,i)=>{if(i.endsWith("restarting")){void this.updateWidget(e,t)}};const r=this._statusChangedHandlers[e.id];if(r){t.statusChanged.disconnect(r)}t.statusChanged.connect(n);this._statusChangedHandlers[e.id]=n;const o=(e,t)=>{if(t.parent_header!={}&&t.parent_header.msg_type=="execute_request"&&this._service.isStarted&&!this._service.hasStoppedThreads()){void this._service.displayDefinedVariables()}};const a=this._iopubMessageHandlers[e.id];if(a){t.iopubMessage.disconnect(a)}t.iopubMessage.connect(o);this._iopubMessageHandlers[e.id]=o;this._activeWidget=e;return this.updateWidget(e,t)}async updateContext(e,t){const s=()=>{const{session:s}=t;void this.update(e,s)};const i=this._contextKernelChangedHandlers[e.id];if(i){t.kernelChanged.disconnect(i)}this._contextKernelChangedHandlers[e.id]=s;t.kernelChanged.connect(s);return this.update(e,t.session)}async updateWidget(e,t){var s,i,n,r;if(!this._service.model||!t){return}const o=()=>this._shell.currentWidget===e;const a=()=>{if(!this._handlers[e.id]){e.node.removeAttribute("data-jp-debugger");return}e.node.setAttribute("data-jp-debugger","true")};const l=()=>{if(this._handlers[e.id]){return}switch(this._type){case"notebook":this._handlers[e.id]=new M({debuggerService:this._service,widget:e});break;case"console":this._handlers[e.id]=new E({debuggerService:this._service,widget:e});break;case"file":this._handlers[e.id]=new x({debuggerService:this._service,widget:e});break;default:throw Error(`No handler for the type ${this._type}`)}a()};const d=()=>{var s,i,n,r;const o=this._handlers[e.id];if(!o){return}o.dispose();delete this._handlers[e.id];delete this._kernelChangedHandlers[e.id];delete this._statusChangedHandlers[e.id];delete this._iopubMessageHandlers[e.id];delete this._contextKernelChangedHandlers[e.id];if(((i=(s=this._service.session)===null||s===void 0?void 0:s.connection)===null||i===void 0?void 0:i.path)===(t===null||t===void 0?void 0:t.path)||!((r=(n=this._service.session)===null||n===void 0?void 0:n.connection)===null||r===void 0?void 0:r.kernel)){const e=this._service.model;e.clear()}a()};const c=(t=true)=>{const s=this._iconButtons[e.id];if(!s){this._iconButtons[e.id]=I(e,p,this._service.isStarted,t)}else{T(s,this._service.isStarted,t,p)}};const h=()=>{var e;return this._service.isStarted&&((e=this._previousConnection)===null||e===void 0?void 0:e.id)===(t===null||t===void 0?void 0:t.id)};const u=async()=>{this._service.session.connection=t;await this._service.stop()};const g=async()=>{var e,s;this._service.session.connection=t;this._previousConnection=t;await this._service.restoreState(true);await this._service.displayDefinedVariables();if((s=(e=this._service.session)===null||e===void 0?void 0:e.capabilities)===null||s===void 0?void 0:s.supportsModulesRequest){await this._service.displayModules()}};const p=async()=>{if(!o()){return}const t=this._iconButtons[e.id];if(h()){await u();d();T(t,false)}else{await g();l();T(t,true)}};c(false);const _=await this._service.isAvailable(t);if(!_){d();T(this._iconButtons[e.id],false,false);return}if(!this._service.session){this._service.session=new ze.Session({connection:t})}else{this._previousConnection=((s=this._service.session.connection)===null||s===void 0?void 0:s.kernel)?this._service.session.connection:null;this._service.session.connection=t}await this._service.restoreState(false);if(this._service.isStarted&&!this._service.hasStoppedThreads()){await this._service.displayDefinedVariables();if((n=(i=this._service.session)===null||i===void 0?void 0:i.capabilities)===null||n===void 0?void 0:n.supportsModulesRequest){await this._service.displayModules()}}T(this._iconButtons[e.id],this._service.isStarted,true);if(!this._service.isStarted){d();this._service.session.connection=(r=this._previousConnection)!==null&&r!==void 0?r:t;await this._service.restoreState(false);return}l();this._previousConnection=t;e.disposed.connect(d)}}const V='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n  <g class="jp-icon3" fill="#616161">\n    <path d="M16.4805 17.2481C16.8158 16.3972 17 15.4701 17 14.5C17 10.3579 13.6421 7.00001 9.5 7.00001C8.36314 7.00001 7.28536 7.25295 6.31986 7.70564C7.60064 6.0592 9.60074 5 11.8482 5C15.7142 5 18.8482 8.13401 18.8482 12C18.8482 14.0897 17.9325 15.9655 16.4805 17.2481Z" />\n    <path d="M19.1607 14.2481C19.496 13.3971 19.6801 12.4701 19.6801 11.5C19.6801 7.35786 16.3223 4 12.1801 4C11.0433 4 9.9655 4.25295 9.00001 4.70563C10.2808 3.05919 12.2809 2 14.5284 2C18.3944 2 21.5284 5.134 21.5284 9C21.5284 11.0897 20.6127 12.9655 19.1607 14.2481Z" />\n    <path d="M16 15C16 18.866 12.866 22 9 22C5.13401 22 2 18.866 2 15C2 11.134 5.13401 8 9 8C12.866 8 16 11.134 16 15ZM11.7914 11L13 12.2086L10.2086 15L13 17.7914L11.7914 19L9 16.2086L6.20857 19L5 17.7914L7.79143 15L5 12.2086L6.20857 11L9 13.7914L11.7914 11Z" />\n    </g>\n</svg>\n';const j='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t<g class="jp-icon3" fill="#616161">\n\t\t<path d="M7.99998 9.53198H8.54198L12.447 5.62698L11.386 4.56698L8.74898 7.17698L8.74898 0.999985H7.99998H7.25098L7.25098 7.17698L4.61398 4.56698L3.55298 5.62698L7.45798 9.53198H7.99998ZM9.95598 13.013C9.95598 14.1175 9.06055 15.013 7.95598 15.013C6.85141 15.013 5.95598 14.1175 5.95598 13.013C5.95598 11.9084 6.85141 11.013 7.95598 11.013C9.06055 11.013 9.95598 11.9084 9.95598 13.013Z"/>\n\t</g>\n</svg>\n';const H='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t<g class="jp-icon3" fill="#616161">\n\t\t<path d="M7.99998 1H7.45798L3.55298 4.905L4.61398 5.965L7.25098 3.355V9.532H7.99998H8.74898V3.355L11.386 5.965L12.447 4.905L8.54198 1H7.99998ZM9.95598 13.013C9.95598 14.1176 9.06055 15.013 7.95598 15.013C6.85141 15.013 5.95598 14.1176 5.95598 13.013C5.95598 11.9084 6.85141 11.013 7.95598 11.013C9.06055 11.013 9.95598 11.9084 9.95598 13.013Z"/>\n\t</g>\n</svg>\n';const L='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t<g class="jp-icon3" fill="#616161">\n\t\t<path d="M14.25 5.75V1.75H12.75V4.2916C11.605 2.93303 9.83899 2.08334 7.90914 2.08334C4.73316 2.08334 1.98941 4.39036 1.75072 7.48075L1.72992 7.75H3.231L3.25287 7.5241C3.46541 5.32932 5.45509 3.58334 7.90914 3.58334C9.6452 3.58334 11.1528 4.45925 11.9587 5.75H9.12986V7.25H13.292L14.2535 6.27493V5.75H14.25ZM7.99997 14C9.10454 14 9.99997 13.1046 9.99997 12C9.99997 10.8954 9.10454 10 7.99997 10C6.8954 10 5.99997 10.8954 5.99997 12C5.99997 13.1046 6.8954 14 7.99997 14Z"/>\n\t</g>\n</svg>\n';const R='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 4L1 4.5V12.5L1.5 13H4V12H2V5H4V4H1.5ZM14.5 13L15 12.5L15 4.5L14.5 4H12V5L14 5L14 12H12V13H14.5ZM8.79693 5L4.29693 7L4 7.45691V9.95691L4.24275 10.3857L6.74275 11.8857L7.20307 11.9138L11.7031 9.91381L12 9.45691V6.95691L11.7572 6.52816L9.25725 5.02816L8.79693 5ZM5 8.34V9.67381L6.5 10.5738V9.24L5 8.34ZM7.5 9.28184V10.6875L11 9.13197V7.72629L7.5 9.28184ZM10.4178 6.89071L8.96559 6.01936L5.58216 7.52311L7.03441 8.39445L10.4178 6.89071Z" fill="#007ACC"/>\n</svg>\n';const F='<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <g class="jp-icon3" fill="#616161">\n        <path d="m 7,6 h 4 V 18 H 7 Z" />\n        <path d="m 13,6 h 4 v 12 h -4 z" />\n    </g>\n</svg>\n';const O='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g class="jp-icon3" fill="#616161">\n        <path d="M5 2H15L20 7V20C20 20.5304 19.7893 21.0391 19.4142 21.4142C19.0391 21.7893 18.5304 22 18 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V14H4V16L8 13L4 10V12H3V4C3 3.46957 3.21071 2.96086 3.58579 2.58579C3.96086 2.21071 4.46957 2 5 2ZM12 18H16V16H12V18ZM12 14H18V12H12V14ZM12 10H18V8H12V10ZM10 14C10.5523 14 11 13.5523 11 13C11 12.4477 10.5523 12 10 12C9.44771 12 9 12.4477 9 13C9 13.5523 9.44771 14 10 14Z"/>\n        <path d="M3 12V14H1V13V12H3Z"/>\n    </g>\n</svg>\n';const W='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g class="jp-icon3" fill="#616161">\n        <path d="M5 2H15L20 7V20C20 20.5304 19.7893 21.0391 19.4142 21.4142C19.0391 21.7893 18.5304 22 18 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V14H4V16L8 13L4 10V12H3V4C3 3.46957 3.21071 2.96086 3.58579 2.58579C3.96086 2.21071 4.46957 2 5 2ZM12 18H16V16H12V18ZM12 14H18V12H12V14ZM12 10H18V8H12V10ZM10 14C10.5523 14 11 13.5523 11 13C11 12.4477 10.5523 12 10 12C9.44771 12 9 12.4477 9 13C9 13.5523 9.44771 14 10 14Z"/>\n        <path d="M3 12V14H1V13V12H3Z"/>\n    </g>\n</svg>\n';const P=new i.LabIcon({name:"debugger:close-all",svgstr:V});const N=new i.LabIcon({name:"debugger:pause",svgstr:F});const q=new i.LabIcon({name:"debugger:step-into",svgstr:j});const A=new i.LabIcon({name:"debugger:step-over",svgstr:L});const Z=new i.LabIcon({name:"debugger:step-out",svgstr:H});const K=new i.LabIcon({name:"debugger:variable",svgstr:R});const $=new i.LabIcon({name:"debugger:view-breakpoint",svgstr:O});const G=new i.LabIcon({name:"debugger:open-kernel-source",svgstr:W});class z{constructor(){this._breakpoints=new Map;this._changed=new f.Signal(this);this._restored=new f.Signal(this);this._clicked=new f.Signal(this)}get changed(){return this._changed}get restored(){return this._restored}get clicked(){return this._clicked}get breakpoints(){return this._breakpoints}setBreakpoints(e,t){this._breakpoints.set(e,t);this._changed.emit(t)}getBreakpoints(e){var t;return(t=this._breakpoints.get(e))!==null&&t!==void 0?t:[]}restoreBreakpoints(e){this._breakpoints=e;this._restored.emit()}}class U{constructor(){this._state=[];this._currentFrame=null;this._framesChanged=new f.Signal(this);this._currentFrameChanged=new f.Signal(this)}get frames(){return this._state}set frames(e){this._state=e;const t=this.frame!==null?X.getFrameId(this.frame):"";const s=e.find((e=>X.getFrameId(e)===t));if(!s){this.frame=e[0]}this._framesChanged.emit(e)}get frame(){return this._currentFrame}set frame(e){this._currentFrame=e;this._currentFrameChanged.emit(e)}get framesChanged(){return this._framesChanged}get currentFrameChanged(){return this._currentFrameChanged}}var X;(function(e){function t(e){var t;return`${(t=e===null||e===void 0?void 0:e.source)===null||t===void 0?void 0:t.path}-${e===null||e===void 0?void 0:e.id}`}e.getFrameId=t})(X||(X={}));class Y{constructor(e){this._currentSourceOpened=new f.Signal(this);this._currentSourceChanged=new f.Signal(this);this.currentFrameChanged=e.currentFrameChanged}get currentSourceOpened(){return this._currentSourceOpened}get currentSourceChanged(){return this._currentSourceChanged}get currentSource(){return this._currentSource}set currentSource(e){this._currentSource=e;this._currentSourceChanged.emit(e)}open(){this._currentSourceOpened.emit(this._currentSource)}}var J=s(72245);const Q=500;const ee=(e,t)=>{if(e.name<t.name){return-1}if(e.name>t.name){return 1}return 0};class te{constructor(){this._kernelSources=null;this._filteredKernelSources=null;this._filter="";this._changed=new f.Signal(this);this._filterChanged=new f.Signal(this);this._kernelSourceOpened=new f.Signal(this);this.refresh=this.refresh.bind(this);this._refreshDebouncer=new J.Debouncer(this.refresh,Q)}get filter(){return this._filter}set filter(e){this._filter=e;this._filterChanged.emit(e);void this._refreshDebouncer.invoke()}get kernelSources(){return this._kernelSources}set kernelSources(e){this._kernelSources=e;this.refresh()}get changed(){return this._changed}get filterChanged(){return this._filterChanged}get kernelSourceOpened(){return this._kernelSourceOpened}open(e){this._kernelSourceOpened.emit(e)}getFilteredKernelSources(){const e=new RegExp(this._filter);return this._kernelSources.filter((t=>e.test(t.name)))}refresh(){if(this._kernelSources){this._filteredKernelSources=this._filter?this.getFilteredKernelSources():this._kernelSources;this._filteredKernelSources.sort(ee)}else{this._kernelSources=new Array;this._filteredKernelSources=new Array}this._changed.emit(this._filteredKernelSources)}}class se{constructor(){this._selectedVariable=null;this._state=[];this._variableExpanded=new f.Signal(this);this._changed=new f.Signal(this)}get scopes(){return this._state}set scopes(e){this._state=e;this._changed.emit()}get changed(){return this._changed}get variableExpanded(){return this._variableExpanded}get selectedVariable(){return this._selectedVariable}set selectedVariable(e){this._selectedVariable=e}expandVariable(e){this._variableExpanded.emit(e)}}class ie{constructor(){this._disposed=new f.Signal(this);this._isDisposed=false;this._hasRichVariableRendering=false;this._stoppedThreads=new Set;this._title="-";this._titleChanged=new f.Signal(this);this.breakpoints=new z;this.callstack=new U;this.variables=new se;this.sources=new Y({currentFrameChanged:this.callstack.currentFrameChanged});this.kernelSources=new te}get disposed(){return this._disposed}get hasRichVariableRendering(){return this._hasRichVariableRendering}set hasRichVariableRendering(e){this._hasRichVariableRendering=e}get isDisposed(){return this._isDisposed}get stoppedThreads(){return this._stoppedThreads}set stoppedThreads(e){this._stoppedThreads=e}get title(){return this._title}set title(e){if(e===this._title){return}this._title=e!==null&&e!==void 0?e:"-";this._titleChanged.emit(e)}get titleChanged(){return this._titleChanged}dispose(){if(this._isDisposed){return}this._isDisposed=true;this._disposed.emit()}clear(){this._stoppedThreads.clear();const e=new Map;this.breakpoints.restoreBreakpoints(e);this.callstack.frames=[];this.variables.scopes=[];this.sources.currentSource=null;this.kernelSources.kernelSources=null;this.title="-"}}var ne=s(34325);class re extends c.Panel{constructor(e){super();const{model:t,commands:s,themeManager:i,scopes:n}=e;this._grid=new oe({commands:s,model:t,themeManager:i});this._grid.addClass("jp-DebuggerVariables-grid");this._model=t;this._model.changed.connect((e=>{this._update()}),this);this._grid.dataModel.setData(n!==null&&n!==void 0?n:[]);this.addWidget(this._grid);this.addClass("jp-DebuggerVariables-body")}set filter(e){this._grid.dataModel.filter=e;this._update()}set scope(e){this._grid.dataModel.scope=e;this._update()}_update(){var e;this._grid.dataModel.setData((e=this._model.scopes)!==null&&e!==void 0?e:[])}}class oe extends c.Panel{constructor(e){super();const{commands:t,model:s,themeManager:i}=e;this.model=s;const n=new ae;const r=new ne.DataGrid;const o=new le.MouseHandler;o.doubleClicked.connect(((e,s)=>t.execute(ze.CommandIDs.inspectVariable,{variableReference:n.getVariableReference(s.row),name:n.getVariableName(s.row)})));o.selected.connect(((e,t)=>{const{row:s}=t;this.model.selectedVariable={name:n.getVariableName(s),value:n.data("body",s,1),type:n.data("body",s,2),variablesReference:n.getVariableReference(s)}}));r.dataModel=n;r.keyHandler=new ne.BasicKeyHandler;r.mouseHandler=o;r.selectionModel=new ne.BasicSelectionModel({dataModel:n});r.stretchLastColumn=true;r.node.style.height="100%";this._grid=r;if(i){i.themeChanged.connect(this._updateStyles,this)}this.addWidget(r)}set filter(e){this._grid.dataModel.filter=e;this.update()}set scope(e){this._grid.dataModel.scope=e;this.update()}get dataModel(){return this._grid.dataModel}onAfterAttach(e){super.onAfterAttach(e);this._updateStyles()}_updateStyles(){const{style:e,textRenderer:t}=le.computeStyle();this._grid.cellRenderers.update({},t);this._grid.style=e}}class ae extends ne.DataModel{constructor(){super(...arguments);this._filter=new Set;this._scope="";this._data={name:[],type:[],value:[],variablesReference:[]}}set filter(e){this._filter=e}get scope(){return this._scope}set scope(e){this._scope=e}rowCount(e){return e==="body"?this._data.name.length:1}columnCount(e){return e==="body"?2:1}data(e,t,s){if(e==="row-header"){return this._data.name[t]}if(e==="column-header"){return s===1?"Value":"Type"}if(e==="corner-header"){return"Name"}return s===1?this._data.value[t]:this._data.type[t]}getVariableReference(e){return this._data.variablesReference[e]}getVariableName(e){return this._data.name[e]}setData(e){var t,s;this._clearData();this.emitChanged({type:"model-reset",region:"body"});const i=(t=e.find((e=>e.name===this._scope)))!==null&&t!==void 0?t:e[0];const n=(s=i===null||i===void 0?void 0:i.variables)!==null&&s!==void 0?s:[];const r=n.filter((e=>e.name&&!this._filter.has(e.name)));r.forEach(((e,t)=>{var s;this._data.name[t]=e.name;this._data.type[t]=(s=e.type)!==null&&s!==void 0?s:"";this._data.value[t]=e.value;this._data.variablesReference[t]=e.variablesReference}));this.emitChanged({type:"rows-inserted",region:"body",index:1,span:r.length})}_clearData(){this._data={name:[],type:[],value:[],variablesReference:[]}}}var le;(function(e){function t(){const e=document.createElement("div");e.className="jp-DebuggerVariables-colorPalette";e.innerHTML=`\n      <div class="jp-mod-void"></div>\n      <div class="jp-mod-background"></div>\n      <div class="jp-mod-header-background"></div>\n      <div class="jp-mod-grid-line"></div>\n      <div class="jp-mod-header-grid-line"></div>\n      <div class="jp-mod-selection"></div>\n      <div class="jp-mod-text"></div>\n    `;return e}function s(){const e=t();document.body.appendChild(e);let s;s=e.querySelector(".jp-mod-void");const i=getComputedStyle(s).color;s=e.querySelector(".jp-mod-background");const n=getComputedStyle(s).color;s=e.querySelector(".jp-mod-header-background");const r=getComputedStyle(s).color;s=e.querySelector(".jp-mod-grid-line");const o=getComputedStyle(s).color;s=e.querySelector(".jp-mod-header-grid-line");const a=getComputedStyle(s).color;s=e.querySelector(".jp-mod-selection");const l=getComputedStyle(s).color;s=e.querySelector(".jp-mod-text");const d=getComputedStyle(s).color;document.body.removeChild(e);return{style:{voidColor:i,backgroundColor:n,headerBackgroundColor:r,gridLineColor:o,headerGridLineColor:a,rowBackgroundColor:e=>e%2===0?i:n,selectionFillColor:l},textRenderer:new ne.TextRenderer({font:"12px sans-serif",textColor:d,backgroundColor:"",verticalAlignment:"center",horizontalAlignment:"left"})}}e.computeStyle=s;class i extends ne.BasicMouseHandler{constructor(){super(...arguments);this._doubleClicked=new f.Signal(this);this._selected=new f.Signal(this)}get doubleClicked(){return this._doubleClicked}get selected(){return this._selected}dispose(){if(this.isDisposed){return}f.Signal.disconnectSender(this);super.dispose()}onMouseDoubleClick(e,t){const s=e.hitTest(t.clientX,t.clientY);this._doubleClicked.emit(s)}onMouseDown(e,t){let{clientX:s,clientY:i}=t;let n=e.hitTest(s,i);this._selected.emit(n)}onContextMenu(e,t){let{clientX:s,clientY:i}=t;let n=e.hitTest(s,i);this._selected.emit(n)}}e.MouseHandler=i})(le||(le={}));var de=s(21464);var ce=s(98034);class he extends l.MainAreaWidget{constructor(e){const{dataLoader:t,rendermime:s,translator:i}=e;const n=new c.Panel;const r=new ce.PromiseDelegate;super({content:n,reveal:Promise.all([t,r.promise])});this.trans=(i!==null&&i!==void 0?i:m.nullTranslator).load("jupyterlab");this.dataLoader=t;this.renderMime=s;this._dataHash=null;this.refresh().then((()=>{r.resolve()})).catch((e=>r.reject(e)))}async refresh(e=false){let t=await this.dataLoader();if(Object.keys(t.data).length===0){t={data:{"text/plain":this.trans.__("The variable is undefined in the active context.")},metadata:{}}}if(t.data){const s=o(JSON.stringify(t),17);if(e||this._dataHash!==s){if(this.content.layout){this.content.widgets.forEach((e=>{this.content.layout.removeWidget(e)}))}const e=this.renderMime.preferredMimeType(t.data,"any");if(e){const i=this.renderMime.createRenderer(e);const n=new de.MimeModel(Object.assign(Object.assign({},t),{trusted:true}));this._dataHash=s;await i.renderModel(n);this.content.addWidget(i)}else{this._dataHash=null;return Promise.reject("Unable to determine the preferred mime type.")}}}else{this._dataHash=null;return Promise.reject("Unable to get a view on the variable.")}}}class ue{constructor(e){var t,s;this._eventMessage=new f.Signal(this);this._isDisposed=false;this._sessionChanged=new f.Signal(this);this._config=e.config;this._session=null;this._specsManager=(t=e.specsManager)!==null&&t!==void 0?t:null;this._model=new ze.Model;this._debuggerSources=(s=e.debuggerSources)!==null&&s!==void 0?s:null}get eventMessage(){return this._eventMessage}get isDisposed(){return this._isDisposed}get isStarted(){var e,t;return(t=(e=this._session)===null||e===void 0?void 0:e.isStarted)!==null&&t!==void 0?t:false}get isPausingOnExceptions(){var e,t,s,i,n,r;const o=(i=(s=(t=(e=this.session)===null||e===void 0?void 0:e.connection)===null||t===void 0?void 0:t.kernel)===null||s===void 0?void 0:s.name)!==null&&i!==void 0?i:"";if(o){const e=this._config.getTmpFileParams(o);if(e){return(r=(n=this._session)===null||n===void 0?void 0:n.pausingOnExceptions.includes(e.prefix))!==null&&r!==void 0?r:false}}return false}get model(){return this._model}get session(){return this._session}set session(e){var t;if(this._session===e){return}if(this._session){this._session.dispose()}this._session=e;(t=this._session)===null||t===void 0?void 0:t.eventMessage.connect(((e,t)=>{if(t.event==="stopped"){this._model.stoppedThreads.add(t.body.threadId);void this._getAllFrames()}else if(t.event==="continued"){this._model.stoppedThreads.delete(t.body.threadId);this._clearModel();this._clearSignals()}this._eventMessage.emit(t)}));this._sessionChanged.emit(e)}get sessionChanged(){return this._sessionChanged}dispose(){if(this.isDisposed){return}this._isDisposed=true;f.Signal.clearData(this)}getCodeId(e){var t,s,i,n;try{return this._config.getCodeId(e,(n=(i=(s=(t=this.session)===null||t===void 0?void 0:t.connection)===null||s===void 0?void 0:s.kernel)===null||i===void 0?void 0:i.name)!==null&&n!==void 0?n:"")}catch(r){return""}}hasStoppedThreads(){var e,t;return(t=((e=this._model)===null||e===void 0?void 0:e.stoppedThreads.size)>0)!==null&&t!==void 0?t:false}async isAvailable(e){var t,s,i,n;if(!this._specsManager){return true}await this._specsManager.ready;const r=e===null||e===void 0?void 0:e.kernel;if(!r){return false}const o=r.name;if(!((t=this._specsManager.specs)===null||t===void 0?void 0:t.kernelspecs[o])){return true}return!!((n=(i=(s=this._specsManager.specs.kernelspecs[o])===null||s===void 0?void 0:s.metadata)===null||i===void 0?void 0:i["debugger"])!==null&&n!==void 0?n:false)}async clearBreakpoints(){var e;if(((e=this.session)===null||e===void 0?void 0:e.isStarted)!==true){return}this._model.breakpoints.breakpoints.forEach(((e,t,s)=>{void this._setBreakpoints([],t)}));let t=new Map;this._model.breakpoints.restoreBreakpoints(t)}async continue(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("continue",{threadId:this._currentThread()});this._model.stoppedThreads.delete(this._currentThread());this._clearModel();this._clearSignals()}catch(e){console.error("Error:",e.message)}}async getSource(e){var t,s;if(!this.session){throw new Error("No active debugger session")}const i=await this.session.sendRequest("source",{source:e,sourceReference:(t=e.sourceReference)!==null&&t!==void 0?t:0});return Object.assign(Object.assign({},i.body),{path:(s=e.path)!==null&&s!==void 0?s:""})}async evaluate(e){var t;if(!this.session){throw new Error("No active debugger session")}const s=(t=this.model.callstack.frame)===null||t===void 0?void 0:t.id;const i=await this.session.sendRequest("evaluate",{context:"repl",expression:e,frameId:s});if(!i.success){return null}this._clearModel();await this._getAllFrames();return i.body}async next(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("next",{threadId:this._currentThread()})}catch(e){console.error("Error:",e.message)}}async inspectRichVariable(e,t){if(!this.session){throw new Error("No active debugger session")}const s=await this.session.sendRequest("richInspectVariables",{variableName:e,frameId:t});if(s.success){return s.body}else{throw new Error(s.message)}}async inspectVariable(e){if(!this.session){throw new Error("No active debugger session")}const t=await this.session.sendRequest("variables",{variablesReference:e});if(t.success){return t.body.variables}else{throw new Error(t.message)}}async displayDefinedVariables(){if(!this.session){throw new Error("No active debugger session")}const e=await this.session.sendRequest("inspectVariables",{});const t=e.body.variables;const s=[{name:"Globals",variables:t}];this._model.variables.scopes=s}async restart(){const{breakpoints:e}=this._model.breakpoints;await this.stop();await this.start();await this._restoreBreakpoints(e)}async restoreState(e){var t,s,i,n,r,o,a,l,d,c;if(!this.model||!this.session){return}const h=await this.session.restoreState();const{body:u}=h;const g=this._mapBreakpoints(u.breakpoints);const p=new Set(u.stoppedThreads);this._model.hasRichVariableRendering=u.richRendering===true;this._config.setHashParams({kernel:(n=(i=(s=(t=this.session)===null||t===void 0?void 0:t.connection)===null||s===void 0?void 0:s.kernel)===null||i===void 0?void 0:i.name)!==null&&n!==void 0?n:"",method:u.hashMethod,seed:u.hashSeed});this._config.setTmpFileParams({kernel:(l=(a=(o=(r=this.session)===null||r===void 0?void 0:r.connection)===null||o===void 0?void 0:o.kernel)===null||a===void 0?void 0:a.name)!==null&&l!==void 0?l:"",prefix:u.tmpFilePrefix,suffix:u.tmpFileSuffix});this._model.stoppedThreads=p;if(!this.isStarted&&(e||p.size!==0)){await this.start()}if(this.isStarted||e){this._model.title=this.isStarted?((c=(d=this.session)===null||d===void 0?void 0:d.connection)===null||c===void 0?void 0:c.name)||"-":"-"}if(this._debuggerSources){const e=this._filterBreakpoints(g);this._model.breakpoints.restoreBreakpoints(e)}else{this._model.breakpoints.restoreBreakpoints(g)}if(p.size!==0){await this._getAllFrames()}else if(this.isStarted){this._clearModel();this._clearSignals()}}start(){if(!this.session){throw new Error("No active debugger session")}return this.session.start()}async stepIn(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("stepIn",{threadId:this._currentThread()})}catch(e){console.error("Error:",e.message)}}async stepOut(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("stepOut",{threadId:this._currentThread()})}catch(e){console.error("Error:",e.message)}}async stop(){if(!this.session){throw new Error("No active debugger session")}await this.session.stop();if(this._model){this._model.clear()}}async updateBreakpoints(e,t,s){var i;if(!((i=this.session)===null||i===void 0?void 0:i.isStarted)){return}if(!s){s=(await this._dumpCell(e)).body.sourcePath}const n=await this.session.restoreState();const r=t.filter((({line:e})=>typeof e==="number")).map((({line:e})=>({line:e})));const o=this._mapBreakpoints(n.body.breakpoints);if(this._debuggerSources){const e=this._filterBreakpoints(o);this._model.breakpoints.restoreBreakpoints(e)}else{this._model.breakpoints.restoreBreakpoints(o)}const a=await this._setBreakpoints(r,s);const l=a.body.breakpoints.filter(((e,t,s)=>s.findIndex((t=>t.line===e.line))>-1));this._model.breakpoints.setBreakpoints(s,l);await this.session.sendRequest("configurationDone",{})}pauseOnExceptionsIsValid(){var e;if(this.isStarted){if((e=this.session)===null||e===void 0?void 0:e.exceptionBreakpointFilters){return true}}return false}async pauseOnExceptions(e){var t,s,i,n,r;if(!((t=this.session)===null||t===void 0?void 0:t.isStarted)){return}const o=(r=(n=(i=(s=this.session)===null||s===void 0?void 0:s.connection)===null||i===void 0?void 0:i.kernel)===null||n===void 0?void 0:n.name)!==null&&r!==void 0?r:"";if(!o){return}const a=this._config.getTmpFileParams(o);if(!a){return}let l=a.prefix;const d=this.session.exceptionBreakpointFilters;let c=this.session.pausingOnExceptions;if(e){if(!this.session.pausingOnExceptions.includes(l)){c.push(l);this.session.pausingOnExceptions=c}}else{let e=this.session.pausingOnExceptions.indexOf(l);if(e>-1){this.session.pausingOnExceptions=c.splice(e,1);this.session.pausingOnExceptions=c}}const h=[];const u=[];const g=e?"userUnhandled":"never";for(let _ of d!==null&&d!==void 0?d:[]){h.push(_.filter);u.push({path:[{names:this.session.exceptionPaths}],breakMode:g})}const p={filters:h,exceptionOptions:u};await this.session.sendRequest("setExceptionBreakpoints",p)}getDebuggerState(){var e,t,s,i,n,r,o;const a=this._model.breakpoints.breakpoints;let l=[];for(const d of a.keys()){const a=this._debuggerSources.find({focus:false,kernel:(i=(s=(t=(e=this.session)===null||e===void 0?void 0:e.connection)===null||t===void 0?void 0:t.kernel)===null||s===void 0?void 0:s.name)!==null&&i!==void 0?i:"",path:(o=(r=(n=this._session)===null||n===void 0?void 0:n.connection)===null||r===void 0?void 0:r.path)!==null&&o!==void 0?o:"",source:d});const c=a.map((e=>e.model.value.text));l=l.concat(c)}return{cells:l,breakpoints:a}}async restoreDebuggerState(e){var t,s,i,n;await this.start();for(const c of e.cells){await this._dumpCell(c)}const r=new Map;const o=(n=(i=(s=(t=this.session)===null||t===void 0?void 0:t.connection)===null||s===void 0?void 0:s.kernel)===null||i===void 0?void 0:i.name)!==null&&n!==void 0?n:"";const{prefix:a,suffix:l}=this._config.getTmpFileParams(o);for(const c of e.breakpoints){const[e,t]=c;const s=e.substr(0,e.length-l.length);const i=s.substr(s.lastIndexOf("/")+1);const n=a.concat(i).concat(l);r.set(n,t)}await this._restoreBreakpoints(r);const d=await this.session.sendRequest("configurationDone",{});await this.restoreState(false);return d.success}_clearModel(){this._model.callstack.frames=[];this._model.variables.scopes=[]}_clearSignals(){this._model.callstack.currentFrameChanged.disconnect(this._onCurrentFrameChanged,this);this._model.variables.variableExpanded.disconnect(this._onVariableExpanded,this)}_convertScopes(e,t){if(!t||!e){return[]}return e.map(((e,s)=>({name:e.name,variables:t[s].map((e=>Object.assign({},e)))})))}_currentThread(){return 1}async _dumpCell(e){if(!this.session){throw new Error("No active debugger session")}return this.session.sendRequest("dumpCell",{code:e})}_filterBreakpoints(e){if(!this._debuggerSources){return e}let t=new Map;for(const s of e){const[e,i]=s;i.forEach((()=>{var s,n,r,o,a,l,d;this._debuggerSources.find({focus:false,kernel:(o=(r=(n=(s=this.session)===null||s===void 0?void 0:s.connection)===null||n===void 0?void 0:n.kernel)===null||r===void 0?void 0:r.name)!==null&&o!==void 0?o:"",path:(d=(l=(a=this._session)===null||a===void 0?void 0:a.connection)===null||l===void 0?void 0:l.path)!==null&&d!==void 0?d:"",source:e}).forEach((()=>{if(i.length>0){t.set(e,i)}}))}))}return t}async _getAllFrames(){this._model.callstack.currentFrameChanged.connect(this._onCurrentFrameChanged,this);this._model.variables.variableExpanded.connect(this._onVariableExpanded,this);const e=await this._getFrames(this._currentThread());this._model.callstack.frames=e}async _getFrames(e){if(!this.session){throw new Error("No active debugger session")}const t=await this.session.sendRequest("stackTrace",{threadId:e});const s=t.body.stackFrames;return s}async _getScopes(e){if(!this.session){throw new Error("No active debugger session")}if(!e){return[]}const t=await this.session.sendRequest("scopes",{frameId:e.id});return t.body.scopes}async _getVariables(e){if(!this.session){throw new Error("No active debugger session")}if(!e){return[]}const t=await this.session.sendRequest("variables",{variablesReference:e.variablesReference});return t.body.variables}_mapBreakpoints(e){if(!e.length){return new Map}return e.reduce(((e,t)=>{const{breakpoints:s,source:i}=t;e.set(i,s.map((e=>Object.assign(Object.assign({},e),{source:{path:i},verified:true}))));return e}),new Map)}async _onCurrentFrameChanged(e,t){if(!t){return}const s=await this._getScopes(t);const i=await Promise.all(s.map((e=>this._getVariables(e))));const n=this._convertScopes(s,i);this._model.variables.scopes=n}async displayModules(){if(!this.session){throw new Error("No active debugger session")}const e=await this.session.sendRequest("modules",{});this._model.kernelSources.kernelSources=e.body.modules.map((e=>({name:e.name,path:e.path})))}async _onVariableExpanded(e,t){if(!this.session){throw new Error("No active debugger session")}const s=await this.session.sendRequest("variables",{variablesReference:t.variablesReference});let i=Object.assign(Object.assign({},t),{expanded:true});s.body.variables.forEach((e=>{i=Object.assign({[e.name]:e},i)}));const n=this._model.variables.scopes.map((e=>{const s=e.variables.findIndex((e=>e.variablesReference===t.variablesReference));e.variables[s]=i;return Object.assign({},e)}));this._model.variables.scopes=[...n];return s.body.variables}async _setBreakpoints(e,t){if(!this.session){throw new Error("No active debugger session")}return await this.session.sendRequest("setBreakpoints",{breakpoints:e,source:{path:t},sourceModified:false})}async _restoreBreakpoints(e){for(const[t,s]of e){await this._setBreakpoints(s.filter((({line:e})=>typeof e==="number")).map((({line:e})=>({line:e}))),t)}this._model.breakpoints.restoreBreakpoints(e)}}class ge{constructor(e){this._seq=0;this._ready=new ce.PromiseDelegate;this._isDisposed=false;this._isStarted=false;this._pausingOnExceptions=[];this._exceptionPaths=[];this._exceptionBreakpointFilters=[];this._disposed=new f.Signal(this);this._eventMessage=new f.Signal(this);this.connection=e.connection;this.translator=e.translator||m.nullTranslator}get isDisposed(){return this._isDisposed}get capabilities(){return this._capabilities}get disposed(){return this._disposed}get connection(){return this._connection}set connection(e){var t,s;if(this._connection){this._connection.iopubMessage.disconnect(this._handleEvent,this)}this._connection=e;if(!this._connection){this._isStarted=false;return}this._connection.iopubMessage.connect(this._handleEvent,this);this._ready=new ce.PromiseDelegate;const i=(s=(t=this.connection)===null||t===void 0?void 0:t.kernel)===null||s===void 0?void 0:s.requestDebug({type:"request",seq:0,command:"debugInfo"});if(i){i.onReply=e=>{this._ready.resolve();i.dispose()}}}get isStarted(){return this._isStarted}get pausingOnExceptions(){return this._pausingOnExceptions}set pausingOnExceptions(e){this._pausingOnExceptions=e}get exceptionPaths(){return this._exceptionPaths}get exceptionBreakpointFilters(){return this._exceptionBreakpointFilters}get eventMessage(){return this._eventMessage}dispose(){if(this._isDisposed){return}this._isDisposed=true;this._disposed.emit();f.Signal.clearData(this)}async start(){var e,t,s,i;const n=await this.sendRequest("initialize",{clientID:"jupyterlab",clientName:"JupyterLab",adapterID:(s=(t=(e=this.connection)===null||e===void 0?void 0:e.kernel)===null||t===void 0?void 0:t.name)!==null&&s!==void 0?s:"",pathFormat:"path",linesStartAt1:true,columnsStartAt1:true,supportsVariableType:true,supportsVariablePaging:true,supportsRunInTerminalRequest:true,locale:document.documentElement.lang});if(!n.success){throw new Error(`Could not start the debugger: ${n.message}`)}this._capabilities=n.body;this._isStarted=true;this._exceptionBreakpointFilters=(i=n.body)===null||i===void 0?void 0:i.exceptionBreakpointFilters;await this.sendRequest("attach",{})}async stop(){await this.sendRequest("disconnect",{restart:false,terminateDebuggee:false});this._isStarted=false}async restoreState(){var e;const t=await this.sendRequest("debugInfo",{});this._isStarted=t.body.isStarted;this._exceptionPaths=(e=t.body)===null||e===void 0?void 0:e.exceptionPaths;return t}async sendRequest(e,t){await this._ready.promise;const s=await this._sendDebugMessage({type:"request",seq:this._seq++,command:e,arguments:t});return s.content}_handleEvent(e,t){const s=t.header.msg_type;if(s!=="debug_event"){return}const i=t.content;this._eventMessage.emit(i)}async _sendDebugMessage(e){var t;const s=(t=this.connection)===null||t===void 0?void 0:t.kernel;if(!s){return Promise.reject(new Error("A kernel is required to send debug messages."))}const i=new ce.PromiseDelegate;const n=s.requestDebug(e);n.onReply=e=>{i.resolve(e)};await n.done;return i.promise}}var pe=s(2411);var _e=s.n(pe);class me extends l.ReactWidget{constructor(e){super();this._model=e;this.addClass("jp-DebuggerBreakpoints-body")}render(){return _e().createElement(ve,{model:this._model})}}const ve=({model:e})=>{const[t,s]=(0,pe.useState)(Array.from(e.breakpoints.entries()));(0,pe.useEffect)((()=>{const t=(t,i)=>{s(Array.from(e.breakpoints.entries()))};const i=t=>{s(Array.from(e.breakpoints.entries()))};e.changed.connect(t);e.restored.connect(i);return()=>{e.changed.disconnect(t);e.restored.disconnect(i)}}));return _e().createElement(_e().Fragment,null,t.map((t=>_e().createElement(be,{key:t[0],breakpoints:t[1],model:e}))))};const be=({breakpoints:e,model:t})=>_e().createElement(_e().Fragment,null,e.sort(((e,t)=>{var s,i;return((s=e.line)!==null&&s!==void 0?s:0)-((i=t.line)!==null&&i!==void 0?i:0)})).map(((e,s)=>{var i,n;return _e().createElement(fe,{key:((n=(i=e.source)===null||i===void 0?void 0:i.path)!==null&&n!==void 0?n:"")+s,breakpoint:e,model:t})})));const fe=({breakpoint:e,model:t})=>{var s,i,n;const r=e=>e[0]==="/"?e.slice(1)+"/":e;return _e().createElement("div",{className:"jp-DebuggerBreakpoint",onClick:()=>t.clicked.emit(e),title:(s=e.source)===null||s===void 0?void 0:s.path},_e().createElement("span",{className:"jp-DebuggerBreakpoint-marker"},"●"),_e().createElement("span",{className:"jp-DebuggerBreakpoint-source jp-left-truncated"},r((n=(i=e.source)===null||i===void 0?void 0:i.path)!==null&&n!==void 0?n:"")),_e().createElement("span",{className:"jp-DebuggerBreakpoint-line"},e.line))};class we extends c.Widget{constructor(e){super({node:document.createElement("div")});this.toolbar=new l.Toolbar;this.node.classList.add("jp-stack-panel-header");e=e||m.nullTranslator;const t=e.load("jupyterlab");const s=new c.Widget({node:document.createElement("h2")});s.node.textContent=t.__("Breakpoints");const i=new c.PanelLayout;i.addWidget(s);i.addWidget(this.toolbar);this.layout=i}}class ke extends c.Panel{constructor(e){var t;super(e);this.clicked=new f.Signal(this);const{model:s,service:i,commands:n}=e;const r=e.translator||m.nullTranslator;const o=((t=e.translator)!==null&&t!==void 0?t:m.nullTranslator).load("jupyterlab");this.title.label=o.__("Breakpoints");const a=new we(r);const d=new me(s);a.toolbar.addItem("pause",new l.CommandToolbarButton({commands:n.registry,id:n.pause,label:""}));a.toolbar.addItem("closeAll",new l.ToolbarButton({icon:P,onClick:async()=>{if(s.breakpoints.size===0){return}const e=await(0,l.showDialog)({title:o.__("Remove All Breakpoints"),body:o.__("Are you sure you want to remove all breakpoints?"),buttons:[l.Dialog.okButton({label:o.__("Remove breakpoints")}),l.Dialog.cancelButton({label:o.__("Cancel")})],hasClose:true});if(e.button.accept){return i.clearBreakpoints()}},tooltip:o.__("Remove All Breakpoints")}));this.addWidget(a);this.addWidget(d);this.addClass("jp-DebuggerBreakpoints")}}class ye extends l.ReactWidget{constructor(e){super();this._model=e;this.addClass("jp-DebuggerCallstack-body")}render(){return _e().createElement(Ce,{model:this._model})}}const Ce=({model:e})=>{const[t,s]=(0,pe.useState)(e.frames);const[i,n]=(0,pe.useState)(e.frame);const r=t=>{n(t);e.frame=t};(0,pe.useEffect)((()=>{const t=()=>{n(e.frame);s(e.frames)};e.framesChanged.connect(t);return()=>{e.framesChanged.disconnect(t)}}),[e]);const o=e=>{var t;const s=((t=e.source)===null||t===void 0?void 0:t.path)||"";const i=w.PathExt.basename(w.PathExt.dirname(s));const n=w.PathExt.basename(s);const r=w.PathExt.join(i,n);return`${r}:${e.line}`};return _e().createElement("ul",null,t.map((e=>{var t;return _e().createElement("li",{key:e.id,onClick:()=>r(e),className:(i===null||i===void 0?void 0:i.id)===e.id?"selected jp-DebuggerCallstackFrame":"jp-DebuggerCallstackFrame"},_e().createElement("span",{className:"jp-DebuggerCallstackFrame-name"},e.name),_e().createElement("span",{className:"jp-DebuggerCallstackFrame-location",title:(t=e.source)===null||t===void 0?void 0:t.path},o(e)))})))};class Se extends c.Widget{constructor(e){super({node:document.createElement("div")});this.toolbar=new l.Toolbar;this.node.classList.add("jp-stack-panel-header");e=e||m.nullTranslator;const t=e.load("jupyterlab");const s=new c.Widget({node:document.createElement("h2")});s.node.textContent=t.__("Callstack");const i=new c.PanelLayout;i.addWidget(s);i.addWidget(this.toolbar);this.layout=i}}class Ee extends c.Panel{constructor(e){super();const{commands:t,model:s}=e;const i=e.translator||m.nullTranslator;const n=new Se(i);const r=new ye(s);n.toolbar.addItem("continue",new l.CommandToolbarButton({commands:t.registry,id:t.continue}));n.toolbar.addItem("terminate",new l.CommandToolbarButton({commands:t.registry,id:t.terminate}));n.toolbar.addItem("step-over",new l.CommandToolbarButton({commands:t.registry,id:t.next}));n.toolbar.addItem("step-in",new l.CommandToolbarButton({commands:t.registry,id:t.stepIn}));n.toolbar.addItem("step-out",new l.CommandToolbarButton({commands:t.registry,id:t.stepOut}));n.toolbar.addItem("evaluate",new l.CommandToolbarButton({commands:t.registry,id:t.evaluate}));this.addWidget(n);this.addWidget(r);this.addClass("jp-DebuggerCallstack")}}class xe extends c.Widget{constructor(e){super();this._model=e.model;this._debuggerService=e.service;this._mimeTypeService=e.editorServices.mimeTypeService;const t=new ze.ReadOnlyEditorFactory({editorServices:e.editorServices});this._editor=t.createNewEditor({content:"",mimeType:"",path:""});this._editor.hide();this._model.currentFrameChanged.connect((async(e,t)=>{if(!t){this._clearEditor();return}void this._showSource(t)}));const s=new c.PanelLayout;s.addWidget(this._editor);this.layout=s;this.addClass("jp-DebuggerSources-body")}dispose(){var e;if(this.isDisposed){return}(e=this._editorHandler)===null||e===void 0?void 0:e.dispose();f.Signal.clearData(this);super.dispose()}_clearEditor(){this._model.currentSource=null;this._editor.hide()}async _showSource(e){var t;const s=(t=e.source)===null||t===void 0?void 0:t.path;const i=await this._debuggerService.getSource({sourceReference:0,path:s});if(!(i===null||i===void 0?void 0:i.content)){this._clearEditor();return}if(this._editorHandler){this._editorHandler.dispose()}const{content:n,mimeType:r}=i;const o=r||this._mimeTypeService.getMimeTypeByFilePath(s!==null&&s!==void 0?s:"");this._editor.model.value.text=n;this._editor.model.mimeType=o;this._editorHandler=new C({debuggerService:this._debuggerService,editor:this._editor.editor,path:s});this._model.currentSource={content:n,mimeType:o,path:s!==null&&s!==void 0?s:""};requestAnimationFrame((()=>{C.showCurrentLine(this._editor.editor,e.line)}));this._editor.show()}}class Me extends c.Widget{constructor(e,t){super({node:document.createElement("div")});this.toolbar=new l.Toolbar;this.node.classList.add("jp-stack-panel-header");t=t||m.nullTranslator;const s=t.load("jupyterlab");const i=new c.PanelLayout;this.layout=i;const n=new c.Widget({node:document.createElement("h2")});n.node.textContent=s.__("Source");const r=l.ReactWidget.create(_e().createElement(De,{model:e}));i.addWidget(n);i.addWidget(this.toolbar);i.addWidget(r);this.addClass("jp-DebuggerSources-header")}}const De=({model:e})=>_e().createElement(l.UseSignal,{signal:e.currentSourceChanged,initialSender:e},(e=>{var t,s;return _e().createElement("span",{onClick:()=>e===null||e===void 0?void 0:e.open()},(s=(t=e===null||e===void 0?void 0:e.currentSource)===null||t===void 0?void 0:t.path)!==null&&s!==void 0?s:"")}));class Ie extends c.Panel{constructor(e){super();const{model:t,service:s,editorServices:i}=e;const n=e.translator||m.nullTranslator;const r=n.load("jupyterlab");const o=new Me(t,n);const a=new xe({service:s,model:t,editorServices:i});o.toolbar.addItem("open",new l.ToolbarButton({icon:$,onClick:()=>t.open(),tooltip:r.__("Open in the Main Area")}));this.addWidget(o);this.addWidget(a)}}const Te=e=>{const t=t=>{const s=t.target.value;e.model.filter=s};return _e().createElement(i.InputGroup,{type:"text",onChange:t,placeholder:"Filter the kernel sources",value:e.model.filter})};const Be=e=>l.ReactWidget.create(_e().createElement(l.UseSignal,{signal:e.model.filterChanged,initialArgs:e.model.filter},(t=>_e().createElement(Te,{model:e.model}))));const Ve="jp-DebuggerKernelSource-filterBox";const je="jp-DebuggerKernelSource-filterBox-hidden";class He extends c.Widget{constructor(e){var t;super();this._model=e.model;this._debuggerService=e.service;const s=((t=e.translator)!==null&&t!==void 0?t:m.nullTranslator).load("jupyterlab");this.layout=new c.PanelLayout;this.addClass("jp-DebuggerKernelSources-body");this._kernelSourcesFilter=Be({model:this._model});this._kernelSourcesFilter.addClass(Ve);this._kernelSourcesFilter.addClass(je);this.layout.addWidget(this._kernelSourcesFilter);this._model.changed.connect(((e,t)=>{this._clear();if(t){t.forEach((e=>{const t=e.name;const i=e.path;const n=new l.ToolbarButton({icon:G,label:t,tooltip:i});n.node.addEventListener("dblclick",(()=>{this._debuggerService.getSource({sourceReference:0,path:i}).then((e=>{this._model.open(e)})).catch((e=>{void(0,l.showErrorMessage)(s.__("Fail to get source"),s.__("Fail to get '%1' source:\n%2",i,e))}))}));this.layout.addWidget(n)}))}}))}toggleFilterbox(){this._kernelSourcesFilter.node.classList.contains(je)?this._kernelSourcesFilter.node.classList.remove(je):this._kernelSourcesFilter.node.classList.add(je)}_clear(){while(this.layout.widgets.length>1){this.layout.removeWidgetAt(1)}}}class Le extends c.Widget{constructor(e,t){super({node:document.createElement("div")});this.toolbar=new l.Toolbar;this.node.classList.add("jp-stack-panel-header");t=t||m.nullTranslator;const s=t.load("jupyterlab");const i=new c.PanelLayout;this.layout=i;const n=new c.Widget({node:document.createElement("h2")});n.node.textContent=s.__("Kernel Sources");i.addWidget(n);i.addWidget(this.toolbar);this.addClass("jp-DebuggerSources-header")}}class Re extends c.Panel{constructor(e){var t;super();const{model:s,service:n}=e;this._model=s;const r=((t=e.translator)!==null&&t!==void 0?t:m.nullTranslator).load("jupyterlab");this.title.label=r.__("Kernel Sources");const o=new Le(s,e.translator);o.addClass("jp-DebuggerKernelSources-header");this._body=new He({service:n,model:s,translator:e.translator});o.toolbar.addItem("open-filter",new l.ToolbarButton({icon:i.searchIcon,onClick:async()=>{this._body.toggleFilterbox()},tooltip:r.__("Toggle search filter")}));o.toolbar.addItem("refresh",new l.ToolbarButton({icon:i.refreshIcon,onClick:()=>{this._model.kernelSources=[];void n.displayModules().catch((e=>{void(0,l.showErrorMessage)(r.__("Fail to get kernel sources"),r.__("Fail to get kernel sources:\n%2",e))}))},tooltip:r.__("Refresh kernel sources")}));this.addClass("jp-DebuggerKernelSources-header");this.addClass("jp-DebuggerKernelSources");this.addWidget(o);this.addWidget(this._body)}set filter(e){this._model.filter=e}}class Fe extends c.Widget{constructor(e){super({node:document.createElement("div")});this.toolbar=new l.Toolbar;this.node.classList.add("jp-stack-panel-header");e=e||m.nullTranslator;const t=e.load("jupyterlab");const s=new c.Widget({node:document.createElement("h2")});s.node.textContent=t.__("Variables");const i=new c.PanelLayout;i.addWidget(s);i.addWidget(this.toolbar);this.layout=i}}const Oe=({model:e,tree:t,grid:s,trans:n})=>{const[r,o]=(0,pe.useState)("-");const a=e.scopes;const l=e=>{const i=e.target.value;o(i);t.scope=i;s.scope=i};return _e().createElement(i.HTMLSelect,{onChange:l,value:r,"aria-label":n.__("Scope")},a.map((e=>_e().createElement("option",{key:e.name,value:e.name},n.__(e.name)))))};class We extends l.ReactWidget{constructor(e){super();const{translator:t,model:s,tree:i,grid:n}=e;this._model=s;this._tree=i;this._grid=n;this._trans=(t||m.nullTranslator).load("jupyterlab")}render(){return _e().createElement(l.UseSignal,{signal:this._model.changed,initialSender:this._model},(()=>_e().createElement(Oe,{model:this._model,trans:this._trans,tree:this._tree,grid:this._grid})))}}class Pe extends l.ReactWidget{constructor(e){super();this._scope="";this._scopes=[];this._filter=new Set;this._commands=e.commands;this._service=e.service;this._translator=e.translator;const t=this.model=e.model;t.changed.connect(this._updateScopes,this);this.addClass("jp-DebuggerVariables-body")}render(){var e;const t=(e=this._scopes.find((e=>e.name===this._scope)))!==null&&e!==void 0?e:this._scopes[0];return t?_e().createElement(Ne,{key:t.name,commands:this._commands,service:this._service,data:t.variables,filter:this._filter,translator:this._translator,handleSelectVariable:e=>{this.model.selectedVariable=e}}):_e().createElement("div",null)}set filter(e){this._filter=e;this.update()}set scope(e){this._scope=e;this.update()}_updateScopes(e){if(b.ArrayExt.shallowEqual(this._scopes,e.scopes)){return}this._scopes=e.scopes;this.update()}}const Ne=e=>{const{commands:t,data:s,service:i,filter:n,translator:r,handleSelectVariable:o}=e;const[a,l]=(0,pe.useState)(s);(0,pe.useEffect)((()=>{l(s)}),[s]);return _e().createElement("ul",null,a===null||a===void 0?void 0:a.filter((e=>!(n||new Set).has(e.evaluateName||""))).map((e=>{const s=`${e.name}-${e.evaluateName}-${e.type}-${e.value}-${e.variablesReference}`;return _e().createElement(qe,{key:s,commands:t,data:e,service:i,filter:n,translator:r,onSelect:o})})))};const qe=e=>{const{commands:t,data:s,service:n,filter:r,translator:o,onSelect:a}=e;const[l]=(0,pe.useState)(s);const[d,c]=(0,pe.useState)();const[h,u]=(0,pe.useState)();const g={color:"var(--jp-mirror-editor-attribute-color)"};const p={color:"var(--jp-mirror-editor-string-color)"};const _=a!==null&&a!==void 0?a:()=>void 0;const v=l.variablesReference!==0||l.type==="function";const b=(o!==null&&o!==void 0?o:m.nullTranslator).load("jupyterlab");const f=async e=>{if(!v){return}e.stopPropagation();const t=await n.inspectVariable(l.variablesReference);c(!d);u(t)};return _e().createElement("li",{onClick:e=>f(e),onMouseDown:()=>{_(l)}},_e().createElement(i.caretDownEmptyIcon.react,{visibility:v?"visible":"hidden",stylesheet:"menuItem",tag:"span",transform:d?"rotate(0deg)":"rotate(-90deg)"}),_e().createElement("span",{style:g},l.name),_e().createElement("span",null,": "),_e().createElement("span",{style:p},Ze(l)),_e().createElement("span",{className:"jp-DebuggerVariables-hspacer"}),n.model.hasRichVariableRendering&&!["special variables","protected variables","function variables","class variables"].includes(l.name)&&_e().createElement("button",{className:"jp-DebuggerVariables-renderVariable",disabled:!t.isEnabled(ze.CommandIDs.renderMimeVariable,{name:l.name,variablesReference:l.variablesReference}),onClick:e=>{e.stopPropagation();_(l);t.execute(ze.CommandIDs.renderMimeVariable,{name:l.name,variablesReference:l.variablesReference}).catch((e=>{console.error(`Failed to render variable ${l.name}`,e)}))},title:b.__("Render variable")},_e().createElement(i.searchIcon.react,{stylesheet:"menuItem",tag:"span"})),d&&h&&_e().createElement(Ne,{key:l.name,commands:t,data:h,service:n,filter:r,translator:o}))};class Ae extends c.Panel{constructor(e){super();const{model:t,service:s,commands:n,themeManager:r}=e;const o=e.translator||m.nullTranslator;const a=o.load("jupyterlab");this._header=new Fe(o);this._tree=new Pe({model:t,service:s,commands:n,translator:o});this._table=new re({model:t,commands:n,themeManager:r});this._table.hide();this._header.toolbar.addItem("scope-switcher",new We({translator:o,model:t,tree:this._tree,grid:this._table}));const d=()=>{if(this._table.isHidden){this._tree.hide();this._table.show();this.node.setAttribute("data-jp-table","true");u("table")}else{this._tree.show();this._table.hide();this.node.removeAttribute("data-jp-table");u("tree")}this.update()};const c=new l.ToolbarButton({icon:i.treeViewIcon,className:"jp-TreeView",onClick:d,tooltip:a.__("Tree View")});const h=new l.ToolbarButton({icon:i.tableRowsIcon,className:"jp-TableView",onClick:d,tooltip:a.__("Table View")});const u=e=>{const t="jp-ViewModeSelected";if(e==="tree"){h.removeClass(t);c.addClass(t)}else{c.removeClass(t);h.addClass(t)}};u(this._table.isHidden?"tree":"table");this._header.toolbar.addItem("view-VariableTreeView",c);this._header.toolbar.addItem("view-VariableTableView",h);this.addWidget(this._header);this.addWidget(this._tree);this.addWidget(this._table);this.addClass("jp-DebuggerVariables")}set filter(e){this._tree.filter=e;this._table.filter=e}onResize(e){super.onResize(e);this._resizeBody(e)}_resizeBody(e){const t=e.height-this._header.node.offsetHeight;this._tree.node.style.height=`${t}px`}}const Ze=e=>{var t,s;const{type:i,value:n}=e;switch(i){case"int":return parseInt(n,10);case"float":return parseFloat(n);case"bool":return n;case"str":if((s=(t=e.presentationHint)===null||t===void 0?void 0:t.attributes)===null||s===void 0?void 0:s.includes("rawString")){return n.slice(1,n.length-1)}else{return n}default:return i!==null&&i!==void 0?i:n}};class Ke extends c.Panel{constructor(e){super();this.id="jp-debugger-sidebar";this.title.icon=i.bugIcon;this.addClass("jp-DebuggerSidebar");const{callstackCommands:t,breakpointsCommands:s,editorServices:n,service:r,themeManager:o}=e;const a=e.translator||m.nullTranslator;const l=r.model;this.variables=new Ae({model:l.variables,commands:t.registry,service:r,themeManager:o,translator:a});this.callstack=new Ee({commands:t,model:l.callstack,translator:a});this.breakpoints=new ke({service:r,commands:s,model:l.breakpoints,translator:a});this.sources=new Ie({model:l.sources,service:r,editorServices:n,translator:a});this.kernelSources=new Re({model:l.kernelSources,service:r,translator:a});const d=new Ke.Header;this.addWidget(d);l.titleChanged.connect(((e,t)=>{d.title.label=t}));this._body=new c.SplitPanel;this._body.orientation="vertical";this._body.addClass("jp-DebuggerSidebar-body");this.addWidget(this._body);this.addItem(this.variables);this.addItem(this.callstack);this.addItem(this.breakpoints);this.addItem(this.sources);this.addItem(this.kernelSources)}addItem(e){this._body.addWidget(e)}insertItem(e,t){this._body.insertWidget(e,t)}get items(){return this._body.widgets}dispose(){if(this.isDisposed){return}super.dispose()}}(function(e){class t extends c.Widget{constructor(){super({node:$e.createHeader()});this.title.changed.connect((e=>{this.node.querySelector("h2").textContent=this.title.label}))}}e.Header=t})(Ke||(Ke={}));var $e;(function(e){function t(){const e=document.createElement("div");e.classList.add("jp-stack-panel-header");const t=document.createElement("h2");t.textContent="-";t.classList.add("jp-left-truncated");e.appendChild(t);return e}e.createHeader=t})($e||($e={}));class Ge{constructor(e){var t,s,i;this._config=e.config;this._shell=e.shell;this._notebookTracker=(t=e.notebookTracker)!==null&&t!==void 0?t:null;this._consoleTracker=(s=e.consoleTracker)!==null&&s!==void 0?s:null;this._editorTracker=(i=e.editorTracker)!==null&&i!==void 0?i:null;this._readOnlyEditorTracker=new l.WidgetTracker({namespace:"@jupyterlab/debugger"})}find(e){return[...this._findInConsoles(e),...this._findInEditors(e),...this._findInNotebooks(e),...this._findInReadOnlyEditors(e)]}open(e){const{editorWrapper:t,label:s,caption:n}=e;const r=new l.MainAreaWidget({content:t});r.id=l.DOMUtils.createDomID();r.title.label=s;r.title.closable=true;r.title.caption=n;r.title.icon=i.textEditorIcon;this._shell.add(r,"main");void this._readOnlyEditorTracker.add(r)}_findInNotebooks(e){if(!this._notebookTracker){return[]}const{focus:t,kernel:s,path:i,source:n}=e;const r=[];this._notebookTracker.forEach((e=>{const o=e.sessionContext;if(i!==o.path){return}const a=e.content;if(t){a.mode="command"}const l=e.content.widgets;l.forEach(((i,o)=>{const l=i.model.value.text;const d=this._getCodeId(l,s);if(!d){return}if(n!==d){return}if(t){a.activeCellIndex=o;if(a.activeCell){const e=a.activeCell.inputArea.node;const t=e.getBoundingClientRect();a.scrollToPosition(t.bottom,45)}this._shell.activateById(e.id)}r.push(i.editor)}))}));return r}_findInConsoles(e){if(!this._consoleTracker){return[]}const{focus:t,kernel:s,path:i,source:n}=e;const r=[];this._consoleTracker.forEach((e=>{const o=e.sessionContext;if(i!==o.path){return}const a=e.console.cells;(0,b.each)(a,(i=>{const o=i.model.value.text;const a=this._getCodeId(o,s);if(!a){return}if(n!==a){return}r.push(i.editor);if(t){this._shell.activateById(e.id)}}))}));return r}_findInEditors(e){if(!this._editorTracker){return[]}const{focus:t,kernel:s,path:i,source:n}=e;const r=[];this._editorTracker.forEach((e=>{const o=e.content;if(i!==o.context.path){return}const a=o.editor;if(!a){return}const l=a.model.value.text;const d=this._getCodeId(l,s);if(!d){return}if(n!==d){return}r.push(a);if(t){this._shell.activateById(e.id)}}));return r}_findInReadOnlyEditors(e){const{focus:t,kernel:s,source:i}=e;const n=[];this._readOnlyEditorTracker.forEach((e=>{var r;const o=(r=e.content)===null||r===void 0?void 0:r.editor;if(!o){return}const a=o.model.value.text;const l=this._getCodeId(a,s);if(!l){return}if(e.title.caption!==i&&i!==l){return}n.push(o);if(t){this._shell.activateById(e.id)}}));return n}_getCodeId(e,t){try{return this._config.getCodeId(e,t)}catch(s){return""}}}var ze;(function(e){class t extends a{}e.Config=t;class s extends C{}e.EditorHandler=s;class n extends B{}e.Handler=n;class r extends ie{}e.Model=r;class o extends _{}e.ReadOnlyEditorFactory=o;class l extends ue{}e.Service=l;class d extends ge{}e.Session=d;class c extends Ke{}e.Sidebar=c;class u extends Ge{}e.Sources=u;class g extends re{}e.VariablesGrid=g;class p extends he{}e.VariableRenderer=p;let m;(function(e){e.debugContinue="debugger:continue";e.terminate="debugger:terminate";e.next="debugger:next";e.stepIn="debugger:stepIn";e.stepOut="debugger:stepOut";e.inspectVariable="debugger:inspect-variable";e.renderMimeVariable="debugger:render-mime-variable";e.evaluate="debugger:evaluate";e.restartDebug="debugger:restart-debug";e.pause="debugger:pause"})(m=e.CommandIDs||(e.CommandIDs={}));let v;(function(e){e.closeAllIcon=P;e.evaluateIcon=i.codeIcon;e.continueIcon=i.runIcon;e.stepIntoIcon=q;e.stepOutIcon=Z;e.stepOverIcon=A;e.terminateIcon=i.stopIcon;e.variableIcon=K;e.viewBreakpointIcon=$;e.pauseOnExceptionsIcon=N})(v=e.Icons||(e.Icons={}));let b;(function(e){e.getCode=h.getCode})(b=e.Dialogs||(e.Dialogs={}))})(ze||(ze={}));const Ue=new ce.Token("@jupyterlab/debugger:IDebugger");const Xe=new ce.Token("@jupyterlab/debugger:IDebuggerConfig");const Ye=new ce.Token("@jupyterlab/debugger:IDebuggerSources");const Je=new ce.Token("@jupyterlab/debugger:IDebuggerSidebar");const Qe=new ce.Token("@jupyterlab/debugger:IDebuggerHandler")}}]);
//# sourceMappingURL=1827.d6397a88ab3ac426039c.js.map?v=d6397a88ab3ac426039c