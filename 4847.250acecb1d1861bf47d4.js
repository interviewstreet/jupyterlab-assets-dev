(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[4847,2811],{42811:(t,e,r)=>{"use strict";r.r(e);r.d(e,{IHTMLViewerTracker:()=>v,HTMLViewer:()=>y,HTMLViewerFactory:()=>j,ToolbarItems:()=>x});var n=r(67616);var s=r.n(n);var o=r(66853);var a=r.n(o);var i=r(70865);var l=r.n(i);var c=r(70278);var u=r.n(c);var h=r(29131);var d=r.n(h);var m=r(98034);var p=r.n(m);var _=r(8595);var b=r.n(_);var f=r(2411);var g=r.n(f);const v=new m.Token("@jupyterlab/htmlviewer:IHTMLViewerTracker");const w=1e3;const T="jp-HTMLViewer";class y extends i.DocumentWidget{constructor(t){super(Object.assign(Object.assign({},t),{content:new n.IFrame({sandbox:["allow-same-origin"]})}));this._renderPending=false;this._parser=new DOMParser;this._monitor=null;this._objectUrl="";this._trustedChanged=new _.Signal(this);this.translator=t.translator||c.nullTranslator;this.content.addClass(T);void this.context.ready.then((()=>{this.update();this._monitor=new o.ActivityMonitor({signal:this.context.model.contentChanged,timeout:w});this._monitor.activityStopped.connect(this.update,this)}))}get trusted(){return this.content.sandbox.indexOf("allow-scripts")!==-1}set trusted(t){if(this.trusted===t){return}if(t){this.content.sandbox=C.trusted}else{this.content.sandbox=C.untrusted}this.content.url=this.content.url;this._trustedChanged.emit(t)}get trustedChanged(){return this._trustedChanged}dispose(){if(this._objectUrl){try{URL.revokeObjectURL(this._objectUrl)}catch(t){}}super.dispose()}onUpdateRequest(){if(this._renderPending){return}this._renderPending=true;void this._renderModel().then((()=>this._renderPending=false))}async _renderModel(){let t=this.context.model.toString();t=await this._setBase(t);const e=new Blob([t],{type:"text/html"});const r=this._objectUrl;this._objectUrl=URL.createObjectURL(e);this.content.url=this._objectUrl;if(r){try{URL.revokeObjectURL(r)}catch(n){}}return}async _setBase(t){const e=this._parser.parseFromString(t,"text/html");let r=e.querySelector("base");if(!r){r=e.createElement("base");e.head.insertBefore(r,e.head.firstChild)}const n=this.context.path;const s=await this.context.urlResolver.getDownloadUrl(n);r.href=s;r.target="_self";return e.documentElement.innerHTML}}class j extends i.ABCWidgetFactory{createNewWidget(t){return new y({context:t})}defaultToolbarFactory(t){return[{name:"refresh",widget:x.createRefreshButton(t,this.translator)},{name:"trust",widget:x.createTrustButton(t,this.translator)}]}}var x;(function(t){function e(t,e){const r=(e!==null&&e!==void 0?e:c.nullTranslator).load("jupyterlab");return new n.ToolbarButton({icon:h.refreshIcon,onClick:async()=>{if(!t.context.model.dirty){await t.context.revert();t.update()}},tooltip:r.__("Rerender HTML Document")})}t.createRefreshButton=e;function r(t,e){return n.ReactWidget.create(f.createElement(C.TrustButtonComponent,{htmlDocument:t,translator:e}))}t.createTrustButton=r})(x||(x={}));var C;(function(t){t.untrusted=[];t.trusted=["allow-scripts"];function e(t){const e=t.translator||c.nullTranslator;const r=e.load("jupyterlab");return f.createElement(n.UseSignal,{signal:t.htmlDocument.trustedChanged,initialSender:t.htmlDocument},(()=>f.createElement(n.ToolbarButtonComponent,{className:"",onClick:()=>t.htmlDocument.trusted=!t.htmlDocument.trusted,tooltip:r.__(`Whether the HTML file is trusted.\nTrusting the file allows scripts to run in it,\nwhich may result in security risks.\nOnly enable for files you trust.`),label:t.htmlDocument.trusted?r.__("Distrust HTML"):r.__("Trust HTML")})))}t.TrustButtonComponent=e})(C||(C={}))}}]);
//# sourceMappingURL=4847.250acecb1d1861bf47d4.js.map?v=250acecb1d1861bf47d4