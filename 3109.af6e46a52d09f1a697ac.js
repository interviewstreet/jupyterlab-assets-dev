"use strict";(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[3109],{3109:(e,t,n)=>{n.r(t);n.d(t,{default:()=>B});var o=n(49655);var a=n.n(o);var i=n(87447);var r=n.n(i);var s=n(82713);var l=n.n(s);var d=n(52959);var c=n.n(d);var u=n(39903);var g=n.n(u);var v=n(78098);var b=n.n(v);var p=n(66283);var m=n.n(p);var f=n(35627);var h=n.n(f);var I=n(86089);var y=n.n(I);var C=n(42123);var _=n.n(C);var D=n(3167);var S=n.n(D);var w=n(59238);var x=n.n(w);var k=n(68299);var E=n.n(k);var T=n(50724);var V=n.n(T);function O(e){Object.values(p.Debugger.CommandIDs).forEach((t=>{if(e.commands.hasCommand(t)){e.commands.notifyCommandChanged(t)}}))}const R={id:"@jupyterlab/debugger-extension:consoles",description:"Add debugger capability to the consoles.",autoStart:true,requires:[p.IDebugger,u.IConsoleTracker],optional:[o.ILabShell],activate:(e,t,n,o)=>{const a=new p.Debugger.Handler({type:"console",shell:e.shell,service:t});const i=async t=>{const{sessionContext:n}=t;await n.ready;await a.updateContext(t,n);O(e)};if(o){o.currentChanged.connect(((e,t)=>{const n=t.newValue;if(n instanceof u.ConsolePanel){void i(n)}}))}else{n.currentChanged.connect(((e,t)=>{if(t){void i(t)}}))}}};const j={id:"@jupyterlab/debugger-extension:files",description:"Adds debugger capabilities to files.",autoStart:true,requires:[p.IDebugger,I.IEditorTracker],optional:[o.ILabShell],activate:(e,t,n,o)=>{const a=new p.Debugger.Handler({type:"file",shell:e.shell,service:t});const i={};const r=async t=>{const n=e.serviceManager.sessions;try{const o=await n.findByPath(t.context.path);if(!o){return}let r=i[o.id];if(!r){r=n.connectTo({model:o});i[o.id]=r}await a.update(t,r);O(e)}catch(o){return}};if(o){o.currentChanged.connect(((e,t)=>{const n=t.newValue;if(n instanceof f.DocumentWidget){const{content:e}=n;if(e instanceof I.FileEditor){void r(n)}}}))}else{n.currentChanged.connect(((e,t)=>{if(t){void r(t)}}))}}};const P={id:"@jupyterlab/debugger-extension:notebooks",description:"Adds debugger capability to notebooks and provides the debugger notebook handler.",autoStart:true,requires:[p.IDebugger,D.INotebookTracker],optional:[o.ILabShell,i.ICommandPalette,i.ISessionContextDialogs,T.ITranslator],provides:p.IDebuggerHandler,activate:(e,t,n,o,a,r,s)=>{const l=s!==null&&s!==void 0?s:T.nullTranslator;const d=r!==null&&r!==void 0?r:new i.SessionContextDialogs({translator:l});const c=new p.Debugger.Handler({type:"notebook",shell:e.shell,service:t});const u=l.load("jupyterlab");e.commands.addCommand(p.Debugger.CommandIDs.restartDebug,{label:u.__("Restart Kernel and Debug…"),caption:u.__("Restart Kernel and Debug…"),isEnabled:()=>t.isStarted,execute:async()=>{const e=t.getDebuggerState();await t.stop();const o=n.currentWidget;if(!o){return}const{content:a,sessionContext:i}=o;const r=await d.restart(i);if(!r){return}await t.restoreDebuggerState(e);await c.updateWidget(o,i.session);await D.NotebookActions.runAll(a,i,d,l)}});const g=async t=>{if(t){const{sessionContext:e}=t;await e.ready;await c.updateContext(t,e)}O(e)};if(o){o.currentChanged.connect(((e,t)=>{const n=t.newValue;if(n instanceof D.NotebookPanel){void g(n)}}))}else{n.currentChanged.connect(((e,t)=>{if(t){void g(t)}}))}if(a){a.addItem({category:"Notebook Operations",command:p.Debugger.CommandIDs.restartDebug})}return c}};const M={id:"@jupyterlab/debugger-extension:service",description:"Provides the debugger service.",autoStart:true,provides:p.IDebugger,requires:[p.IDebuggerConfig],optional:[p.IDebuggerSources,T.ITranslator],activate:(e,t,n,o)=>new p.Debugger.Service({config:t,debuggerSources:n,specsManager:e.serviceManager.kernelspecs,translator:o})};const F={id:"@jupyterlab/debugger-extension:config",description:"Provides the debugger configuration",provides:p.IDebuggerConfig,autoStart:true,activate:()=>new p.Debugger.Config};const L={id:"@jupyterlab/debugger-extension:sources",description:"Provides the source feature for debugging",autoStart:true,provides:p.IDebuggerSources,requires:[p.IDebuggerConfig,d.IEditorServices],optional:[D.INotebookTracker,u.IConsoleTracker,I.IEditorTracker],activate:(e,t,n,o,a,i)=>new p.Debugger.Sources({config:t,shell:e.shell,editorServices:n,notebookTracker:o,consoleTracker:a,editorTracker:i})};const W={id:"@jupyterlab/debugger-extension:variables",description:"Adds variables renderer and inspection in the debugger variable panel.",autoStart:true,requires:[p.IDebugger,p.IDebuggerHandler,T.ITranslator],optional:[i.IThemeManager,w.IRenderMimeRegistry],activate:(e,t,n,o,a,r)=>{const s=o.load("jupyterlab");const{commands:l,shell:d}=e;const c=new i.WidgetTracker({namespace:"debugger/inspect-variable"});const u=new i.WidgetTracker({namespace:"debugger/render-variable"});const g=p.Debugger.CommandIDs;l.addCommand(g.inspectVariable,{label:s.__("Inspect Variable"),caption:s.__("Inspect Variable"),isEnabled:e=>{var n,o,a,i;return!!((n=t.session)===null||n===void 0?void 0:n.isStarted)&&Number((i=(o=e.variableReference)!==null&&o!==void 0?o:(a=t.model.variables.selectedVariable)===null||a===void 0?void 0:a.variablesReference)!==null&&i!==void 0?i:0)>0},execute:async e=>{var n,o,r,s;let{variableReference:u,name:g}=e;if(!u){u=(n=t.model.variables.selectedVariable)===null||n===void 0?void 0:n.variablesReference}if(!g){g=(o=t.model.variables.selectedVariable)===null||o===void 0?void 0:o.name}const v=`jp-debugger-variable-${g}`;if(!g||!u||c.find((e=>e.id===v))){return}const b=await t.inspectVariable(u);if(!b||b.length===0){return}const m=t.model.variables;const f=new i.MainAreaWidget({content:new p.Debugger.VariablesGrid({model:m,commands:l,scopes:[{name:g,variables:b}],themeManager:a})});f.addClass("jp-DebuggerVariables");f.id=v;f.title.icon=p.Debugger.Icons.variableIcon;f.title.label=`${(s=(r=t.session)===null||r===void 0?void 0:r.connection)===null||s===void 0?void 0:s.name} - ${g}`;void c.add(f);const h=()=>{f.dispose();m.changed.disconnect(h)};m.changed.connect(h);d.add(f,"main",{mode:c.currentWidget?"split-right":"split-bottom",activate:false,type:"Debugger Variables"})}});l.addCommand(g.renderMimeVariable,{label:s.__("Render Variable"),caption:s.__("Render variable according to its mime type"),isEnabled:()=>{var e;return!!((e=t.session)===null||e===void 0?void 0:e.isStarted)},isVisible:()=>t.model.hasRichVariableRendering&&(r!==null||n.activeWidget instanceof D.NotebookPanel),execute:e=>{var a,i,s,l,c,g,v,b;let{name:m,frameId:f}=e;if(!m){m=(a=t.model.variables.selectedVariable)===null||a===void 0?void 0:a.name}if(!f){f=(i=t.model.callstack.frame)===null||i===void 0?void 0:i.id}const h=n.activeWidget;let I=h instanceof D.NotebookPanel?h.content.rendermime:r;if(!I){return}const y=`jp-debugger-variable-mime-${m}-${(l=(s=t.session)===null||s===void 0?void 0:s.connection)===null||l===void 0?void 0:l.path.replace("/","-")}`;if(!m||u.find((e=>e.id===y))||!f&&t.hasStoppedThreads()){return}const C=t.model.variables;const _=new p.Debugger.VariableRenderer({dataLoader:()=>t.inspectRichVariable(m,f),rendermime:I,translator:o});_.addClass("jp-DebuggerRichVariable");_.id=y;_.title.icon=p.Debugger.Icons.variableIcon;_.title.label=`${m} - ${(g=(c=t.session)===null||c===void 0?void 0:c.connection)===null||g===void 0?void 0:g.name}`;_.title.caption=`${m} - ${(b=(v=t.session)===null||v===void 0?void 0:v.connection)===null||b===void 0?void 0:b.path}`;void u.add(_);const S=()=>{_.dispose();C.changed.disconnect(w);h===null||h===void 0?void 0:h.disposed.disconnect(S)};const w=()=>{if(n.activeWidget===h){void _.refresh()}};_.disposed.connect(S);C.changed.connect(w);h===null||h===void 0?void 0:h.disposed.connect(S);d.add(_,"main",{mode:u.currentWidget?"split-right":"split-bottom",activate:false,type:"Debugger Variables"})}});l.addCommand(g.copyToClipboard,{label:s.__("Copy to Clipboard"),caption:s.__("Copy text representation of the value to clipboard"),isEnabled:()=>{var e,n;return!!((e=t.session)===null||e===void 0?void 0:e.isStarted)&&!!((n=t.model.variables.selectedVariable)===null||n===void 0?void 0:n.value)},isVisible:()=>n.activeWidget instanceof D.NotebookPanel,execute:async()=>{const e=t.model.variables.selectedVariable.value;if(e){i.Clipboard.copyToSystem(e)}}});l.addCommand(g.copyToGlobals,{label:s.__("Copy Variable to Globals"),caption:s.__("Copy variable to globals scope"),isEnabled:()=>{var e;return!!((e=t.session)===null||e===void 0?void 0:e.isStarted)},isVisible:()=>n.activeWidget instanceof D.NotebookPanel&&t.model.supportCopyToGlobals,execute:async e=>{const n=t.model.variables.selectedVariable.name;await t.copyToGlobals(n)}})}};const N={id:"@jupyterlab/debugger-extension:sidebar",description:"Provides the debugger sidebar.",provides:p.IDebuggerSidebar,requires:[p.IDebugger,d.IEditorServices,T.ITranslator],optional:[i.IThemeManager,k.ISettingRegistry],autoStart:true,activate:async(e,t,n,o,a,i)=>{const{commands:r}=e;const s=p.Debugger.CommandIDs;const l={registry:r,continue:s.debugContinue,terminate:s.terminate,next:s.next,stepIn:s.stepIn,stepOut:s.stepOut,evaluate:s.evaluate};const d={registry:r,pauseOnExceptions:s.pauseOnExceptions};const c=new p.Debugger.Sidebar({service:t,callstackCommands:l,breakpointsCommands:d,editorServices:n,themeManager:a,translator:o});if(i){const e=await i.load(A.id);const n=()=>{var n,o,a,i;const r=e.get("variableFilters").composite;const s=(i=(a=(o=(n=t.session)===null||n===void 0?void 0:n.connection)===null||o===void 0?void 0:o.kernel)===null||a===void 0?void 0:a.name)!==null&&i!==void 0?i:"";if(s&&r[s]){c.variables.filter=new Set(r[s])}const l=e.get("defaultKernelSourcesFilter").composite;c.kernelSources.filter=l};n();e.changed.connect(n);t.sessionChanged.connect(n)}return c}};const q={id:"@jupyterlab/debugger-extension:source-viewer",description:"Initialize the debugger sources viewer.",requires:[p.IDebugger,d.IEditorServices,p.IDebuggerSources,T.ITranslator],provides:p.IDebuggerSourceViewer,autoStart:true,activate:async(e,t,n,o,a)=>{const r=new p.Debugger.ReadOnlyEditorFactory({editorServices:n});const{model:s}=t;const l=(e,n)=>{var a,i,r,s,l,d,c,u,g;o.find({focus:true,kernel:(s=(r=(i=(a=t.session)===null||a===void 0?void 0:a.connection)===null||i===void 0?void 0:i.kernel)===null||r===void 0?void 0:r.name)!==null&&s!==void 0?s:"",path:(c=(d=(l=t.session)===null||l===void 0?void 0:l.connection)===null||d===void 0?void 0:d.path)!==null&&c!==void 0?c:"",source:(g=(u=n===null||n===void 0?void 0:n.source)===null||u===void 0?void 0:u.path)!==null&&g!==void 0?g:""}).forEach((e=>{requestAnimationFrame((()=>{void e.reveal().then((()=>{const t=e.get();if(t){p.Debugger.EditorHandler.showCurrentLine(t,n.line)}}))}))}))};s.callstack.currentFrameChanged.connect(l);const d=(e,n)=>{var a,i,s,l,d,c,u;if(!e){return}const{content:g,mimeType:b,path:m}=e;const f=o.find({focus:true,kernel:(l=(s=(i=(a=t.session)===null||a===void 0?void 0:a.connection)===null||i===void 0?void 0:i.kernel)===null||s===void 0?void 0:s.name)!==null&&l!==void 0?l:"",path:(u=(c=(d=t.session)===null||d===void 0?void 0:d.connection)===null||c===void 0?void 0:c.path)!==null&&u!==void 0?u:"",source:m});if(f.length>0){if(n&&typeof n.line!=="undefined"){f.forEach((e=>{void e.reveal().then((()=>{var t;(t=e.get())===null||t===void 0?void 0:t.revealPosition({line:n.line-1,column:n.column||0})}))}))}return}const h=r.createNewEditor({content:g,mimeType:b,path:m});const I=h.editor;const y=new p.Debugger.EditorHandler({debuggerService:t,editorReady:()=>Promise.resolve(I),getEditor:()=>I,path:m,src:I.model.sharedModel});h.disposed.connect((()=>y.dispose()));o.open({label:v.PathExt.basename(m),caption:m,editorWrapper:h});const C=t.model.callstack.frame;if(C){p.Debugger.EditorHandler.showCurrentLine(I,C.line)}};const c=a.load("jupyterlab");e.commands.addCommand(p.Debugger.CommandIDs.openSource,{label:c.__("Open Source"),caption:c.__("Open Source"),isEnabled:()=>!!q,execute:async e=>{const n=e.path||"";if(!n){throw Error("Path to open is needed")}if(!t.isStarted){const e=await(0,i.showDialog)({title:c.__("Start debugger?"),body:c.__("The debugger service is needed to open the source %1",n),buttons:[i.Dialog.cancelButton({label:c.__("Cancel")}),i.Dialog.okButton({label:c.__("Start debugger")})]});if(e.button.accept){await t.start()}else{return}}const o=await t.getSource({path:n});return d(o)}});return Object.freeze({open:d})}};const A={id:"@jupyterlab/debugger-extension:main",description:"Initialize the debugger user interface.",requires:[p.IDebugger,p.IDebuggerSidebar,d.IEditorServices,T.ITranslator],optional:[i.ICommandPalette,p.IDebuggerSourceViewer,o.ILabShell,o.ILayoutRestorer,C.ILoggerRegistry,k.ISettingRegistry],autoStart:true,activate:async(e,t,n,o,a,r,l,d,c,u,g)=>{var b;const m=a.load("jupyterlab");const{commands:f,shell:h,serviceManager:I}=e;const{kernelspecs:y}=I;const C=p.Debugger.CommandIDs;const _=v.PageConfig.getOption("alwaysShowDebuggerExtension").toLowerCase()==="true";if(!_){await y.ready;const e=(b=y.specs)===null||b===void 0?void 0:b.kernelspecs;if(!e){return}const t=Object.keys(e).some((t=>{var n,o,a;return!!((a=(o=(n=e[t])===null||n===void 0?void 0:n.metadata)===null||o===void 0?void 0:o["debugger"])!==null&&a!==void 0?a:false)}));if(!t){return}}const D=async()=>{var e,n,a;const i=(n=(e=t.session)===null||e===void 0?void 0:e.connection)===null||n===void 0?void 0:n.kernel;if(!i){return""}const r=(await i.info).language_info;const s=r.name;const l=(a=o.mimeTypeService.getMimeTypeByLanguage({name:s}))!==null&&a!==void 0?a:"";return l};const S=new w.RenderMimeRegistry({initialFactories:w.standardRendererFactories});f.addCommand(C.evaluate,{label:m.__("Evaluate Code"),caption:m.__("Evaluate Code"),icon:p.Debugger.Icons.evaluateIcon,isEnabled:()=>t.hasStoppedThreads(),execute:async()=>{var e,n,a;const i=await D();const r=await p.Debugger.Dialogs.getCode({title:m.__("Evaluate Code"),okLabel:m.__("Evaluate"),cancelLabel:m.__("Cancel"),mimeType:i,contentFactory:new s.CodeCell.ContentFactory({editorFactory:e=>o.factoryService.newInlineEditor(e)}),rendermime:S});const l=r.value;if(!r.button.accept||!l){return}const d=await t.evaluate(l);if(d){const o=d.result;const i=(n=(e=t===null||t===void 0?void 0:t.session)===null||e===void 0?void 0:e.connection)===null||n===void 0?void 0:n.path;const r=i?(a=u===null||u===void 0?void 0:u.getLogger)===null||a===void 0?void 0:a.call(u,i):undefined;if(r){r.log({type:"text",data:o,level:r.level})}else{console.debug(o)}}}});f.addCommand(C.debugContinue,{label:()=>t.hasStoppedThreads()?m.__("Continue"):m.__("Pause"),caption:()=>t.hasStoppedThreads()?m.__("Continue"):m.__("Pause"),icon:()=>t.hasStoppedThreads()?p.Debugger.Icons.continueIcon:p.Debugger.Icons.pauseIcon,isEnabled:()=>{var e,n;return(n=(e=t.session)===null||e===void 0?void 0:e.isStarted)!==null&&n!==void 0?n:false},execute:async()=>{if(t.hasStoppedThreads()){await t.continue()}else{await t.pause()}f.notifyCommandChanged(C.debugContinue)}});f.addCommand(C.terminate,{label:m.__("Terminate"),caption:m.__("Terminate"),icon:p.Debugger.Icons.terminateIcon,isEnabled:()=>t.hasStoppedThreads(),execute:async()=>{await t.restart();O(e)}});f.addCommand(C.next,{label:m.__("Next"),caption:m.__("Next"),icon:p.Debugger.Icons.stepOverIcon,isEnabled:()=>t.hasStoppedThreads(),execute:async()=>{await t.next()}});f.addCommand(C.stepIn,{label:m.__("Step In"),caption:m.__("Step In"),icon:p.Debugger.Icons.stepIntoIcon,isEnabled:()=>t.hasStoppedThreads(),execute:async()=>{await t.stepIn()}});f.addCommand(C.stepOut,{label:m.__("Step Out"),caption:m.__("Step Out"),icon:p.Debugger.Icons.stepOutIcon,isEnabled:()=>t.hasStoppedThreads(),execute:async()=>{await t.stepOut()}});f.addCommand(C.pauseOnExceptions,{label:e=>e.filter||"Breakpoints on exception",caption:e=>e.description,isToggled:e=>{var n;return((n=t.session)===null||n===void 0?void 0:n.isPausingOnException(e.filter))||false},isEnabled:()=>t.pauseOnExceptionsIsValid(),execute:async e=>{var n,o,a;if(e===null||e===void 0?void 0:e.filter){let n=e.filter;await t.pauseOnExceptionsFilter(n)}else{let e=[];(o=(n=t.session)===null||n===void 0?void 0:n.exceptionBreakpointFilters)===null||o===void 0?void 0:o.forEach((t=>{e.push(t.filter)}));const r=await i.InputDialog.getMultipleItems({title:m.__("Select a filter for breakpoints on exception"),items:e,defaults:((a=t.session)===null||a===void 0?void 0:a.currentExceptionFilters)||[]});let s=r.button.accept?r.value:null;if(s!==null){await t.pauseOnExceptions(s)}}}});let x=false;if(g){const e=await g.load(A.id);const t=()=>{x=e.get("autoCollapseDebuggerSidebar").composite};t();e.changed.connect(t)}t.eventMessage.connect(((t,o)=>{O(e);if(d&&o.event==="initialized"){d.activateById(n.id)}else if(d&&n.isVisible&&o.event==="terminated"&&x){d.collapseRight()}}));t.sessionChanged.connect((t=>{O(e)}));if(c){c.add(n,"debugger-sidebar")}n.node.setAttribute("role","region");n.node.setAttribute("aria-label",m.__("Debugger section"));n.title.caption=m.__("Debugger");h.add(n,"right",{type:"Debugger"});f.addCommand(C.showPanel,{label:m.__("Debugger Panel"),execute:()=>{h.activateById(n.id)}});if(r){const e=m.__("Debugger");[C.debugContinue,C.terminate,C.next,C.stepIn,C.stepOut,C.evaluate,C.pauseOnExceptions].forEach((t=>{r.addItem({command:t,category:e})}))}if(l){const{model:e}=t;const n=(e,t,n)=>{if(!t){return}l.open(t,n)};e.sources.currentSourceOpened.connect(((e,t)=>{l.open(t)}));e.kernelSources.kernelSourceOpened.connect(n);e.breakpoints.clicked.connect((async(e,n)=>{var o;const a=(o=n.source)===null||o===void 0?void 0:o.path;const i=await t.getSource({sourceReference:0,path:a});l.open(i,n)}))}}};const $=[M,R,j,P,W,N,A,L,q,F];const B=$}}]);
//# sourceMappingURL=3109.af6e46a52d09f1a697ac.js.map?v=af6e46a52d09f1a697ac