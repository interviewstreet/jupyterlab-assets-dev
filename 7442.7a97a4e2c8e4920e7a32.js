"use strict";(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[7442],{67442:(e,t,a)=>{a.r(t);a.d(t,{RenderedVega:()=>g,VEGALITE3_MIME_TYPE:()=>c,VEGALITE4_MIME_TYPE:()=>d,VEGALITE5_MIME_TYPE:()=>p,VEGA_MIME_TYPE:()=>l,default:()=>u,rendererFactory:()=>v});var n=a(65178);var i=a.n(n);const s="jp-RenderedVegaCommon5";const o="jp-RenderedVega5";const r="jp-RenderedVegaLite";const l="application/vnd.vega.v5+json";const c="application/vnd.vegalite.v3+json";const d="application/vnd.vegalite.v4+json";const p="application/vnd.vegalite.v5+json";class g extends n.Widget{constructor(e){super();this._mimeType=e.mimeType;this._resolver=e.resolver;this.addClass(s);this.addClass(this._mimeType===l?o:r)}async renderModel(e){const t=e.data[this._mimeType];if(t===undefined){return}const a=e.metadata[this._mimeType];const n=a&&a.embed_options?a.embed_options:{};let i=document.body.dataset.jpThemeLight==="false";if(i){n.theme="dark"}const s=this._mimeType===l?"vega":"vega-lite";const o=y.vega!=null?y.vega:await y.ensureVega();const r=document.createElement("div");this.node.textContent="";this.node.appendChild(r);if(this._result){this._result.finalize()}const c=o.vega.loader({http:{credentials:"same-origin"}});const d=async(e,t)=>{const a=this._resolver;if((a===null||a===void 0?void 0:a.isLocal)&&a.isLocal(e)){const t=await a.resolveUrl(e);e=await a.getDownloadUrl(t)}return c.sanitize(e,t)};this._result=await o.default(r,t,{actions:true,defaultStyle:true,...n,mode:s,loader:{...c,sanitize:d}});if(e.data["image/png"]){return}const p=await this._result.view.toImageURL("png",typeof n.scaleFactor==="number"?n.scaleFactor:n.scaleFactor?n.scaleFactor.png:n.scaleFactor);e.setData({data:{...e.data,"image/png":p.split(",")[1]}})}dispose(){if(this._result){this._result.finalize()}super.dispose()}}const v={safe:true,mimeTypes:[l,c,d,p],createRenderer:e=>new g(e)};const m={id:"@jupyterlab/vega5-extension:factory",description:"Provides a renderer for Vega 5 and Vega-Lite 3 to 5 content.",rendererFactory:v,rank:57,dataType:"json",documentWidgetFactoryOptions:[{name:"Vega5",primaryFileType:"vega5",fileTypes:["vega5","json"],defaultFor:["vega5"]},{name:"Vega-Lite5",primaryFileType:"vega-lite5",fileTypes:["vega-lite3","vega-lite4","vega-lite5","json"],defaultFor:["vega-lite3","vega-lite4","vega-lite5"]}],fileTypes:[{mimeTypes:[l],name:"vega5",extensions:[".vg",".vg.json",".vega"],icon:"ui-components:vega"},{mimeTypes:[p],name:"vega-lite5",extensions:[".vl",".vl.json",".vegalite"],icon:"ui-components:vega"},{mimeTypes:[d],name:"vega-lite4",extensions:[],icon:"ui-components:vega"},{mimeTypes:[c],name:"vega-lite3",extensions:[],icon:"ui-components:vega"}]};const u=m;var y;(function(e){function t(){if(e.vegaReady){return e.vegaReady}e.vegaReady=a.e(9924).then(a.t.bind(a,9924,23));return e.vegaReady}e.ensureVega=t})(y||(y={}))}}]);
//# sourceMappingURL=7442.7a97a4e2c8e4920e7a32.js.map?v=7a97a4e2c8e4920e7a32