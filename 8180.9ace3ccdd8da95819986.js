"use strict";(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[8180,2310],{48180:(n,e,t)=>{t.r(e);t.d(e,{CommandIDs:()=>b,default:()=>_});var s=t(49655);var o=t(45114);var i=t(50724);var a=t(27425);var l=t(78098);var r=t(65061);var d=t(19289);const c="jp-mod-kernel";async function u(n,e,t){const{commands:s,contextMenu:o,serviceManager:i}=t;const{kernels:d,kernelspecs:u,sessions:g}=i;const{runningChanged:p,RunningKernel:m}=h;const w=new r.Throttler((()=>p.emit(undefined)),100);const _=e.load("jupyterlab");d.runningChanged.connect((()=>void w.invoke()));g.runningChanged.connect((()=>void w.invoke()));await Promise.all([d.ready,u.ready,g.ready]);n.add({name:_.__("Kernels"),running:()=>Array.from(d.running()).map((n=>{var e;return new m({commands:s,kernel:n,kernels:d,sessions:g,spec:(e=u.specs)===null||e===void 0?void 0:e.kernelspecs[n.name],trans:_})})),shutdownAll:()=>d.shutdownAll(),refreshRunning:()=>Promise.all([d.refreshRunning(),g.refreshRunning()]),runningChanged:p,shutdownLabel:_.__("Shut Down Kernel"),shutdownAllLabel:_.__("Shut Down All"),shutdownAllConfirmationText:_.__("Are you sure you want to permanently shut down all running kernels?")});const v=n=>n.classList.contains(c);s.addCommand(b.kernelNewConsole,{icon:a.consoleIcon,label:_.__("New Console for Kernel"),execute:n=>{var e;const o=t.contextMenuHitTest(v);const i=(e=n.id)!==null&&e!==void 0?e:o===null||o===void 0?void 0:o.dataset["context"];if(i){return s.execute("console:create",{kernelPreference:{id:i}})}}});s.addCommand(b.kernelNewNotebook,{icon:a.notebookIcon,label:_.__("New Notebook for Kernel"),execute:n=>{var e;const o=t.contextMenuHitTest(v);const i=(e=n.id)!==null&&e!==void 0?e:o===null||o===void 0?void 0:o.dataset["context"];if(i){return s.execute("notebook:create-new",{kernelId:i})}}});s.addCommand(b.kernelOpenSession,{icon:n=>n.type==="console"?a.consoleIcon:n.type==="notebook"?a.notebookIcon:undefined,isEnabled:({path:n,type:e})=>!!e||n!==undefined,label:({name:n,path:e})=>n||l.PathExt.basename(e||_.__("Unknown Session")),execute:({path:n,type:e})=>{if(!e||n===undefined){return}const t=e==="console"?"console:open":"docmanager:open";return s.execute(t,{path:n})}});s.addCommand(b.kernelShutDown,{icon:a.closeIcon,label:_.__("Shut Down Kernel"),execute:n=>{var e;const s=t.contextMenuHitTest(v);const o=(e=n.id)!==null&&e!==void 0?e:s===null||s===void 0?void 0:s.dataset["context"];if(o){return d.shutdown(o)}}});const k=[];o.opened.connect((async()=>{var n,e,s;const i=(e=(n=o.menu.items.find((n=>{var e;return n.type==="submenu"&&((e=n.submenu)===null||e===void 0?void 0:e.id)==="jp-contextmenu-connected-sessions"})))===null||n===void 0?void 0:n.submenu)!==null&&e!==void 0?e:null;if(!i){return}k.forEach((n=>n.dispose()));k.length=0;i.clearItems();const a=t.contextMenuHitTest(v);const l=a===null||a===void 0?void 0:a.dataset["context"];if(!l){return}const r=b.kernelOpenSession;for(const t of g.running()){if(l===((s=t.kernel)===null||s===void 0?void 0:s.id)){const{name:n,path:e,type:s}=t;k.push(i.addItem({command:r,args:{name:n,path:e,type:s}}))}}}))}var h;(function(n){class e{constructor(n){this.className=c;this.commands=n.commands;this.kernel=n.kernel;this.context=this.kernel.id;this.kernels=n.kernels;this.sessions=n.sessions;this.spec=n.spec||null;this.trans=n.trans}get children(){var n;const e=[];const t=b.kernelOpenSession;const{commands:s}=this;for(const o of this.sessions.running()){if(this.kernel.id===((n=o.kernel)===null||n===void 0?void 0:n.id)){const{name:n,path:i,type:l}=o;e.push({className:c,context:this.kernel.id,open:()=>void s.execute(t,{name:n,path:i,type:l}),icon:()=>l==="console"?a.consoleIcon:l==="notebook"?a.notebookIcon:a.jupyterIcon,label:()=>n,labelTitle:()=>i})}}return e}shutdown(){return this.kernels.shutdown(this.kernel.id)}icon(){const{spec:n}=this;if(!n||!n.resources){return a.jupyterIcon}return n.resources["logo-svg"]||n.resources["logo-64x64"]||n.resources["logo-32x32"]}label(){const{kernel:n,spec:e}=this;return(e===null||e===void 0?void 0:e.display_name)||n.name}labelTitle(){var n;const{trans:e}=this;const{id:t}=this.kernel;const s=[`${this.label()}: ${t}`];for(const o of this.sessions.running()){if(this.kernel.id===((n=o.kernel)===null||n===void 0?void 0:n.id)){const{path:n,type:t}=o;s.push(e.__(`%1\nPath: %2`,t,n))}}return s.join("\n\n")}}n.RunningKernel=e;n.runningChanged=new d.Signal({})})(h||(h={}));var g=t(35627);class p{constructor(n){this._tabsChanged=new d.Signal(this);this._widgets=[];this._labShell=n;this._labShell.layoutModified.connect(this._emitTabsChanged,this)}get tabsChanged(){return this._tabsChanged}addWidget(n){n.title.changed.connect(this._emitTabsChanged,this);this._widgets.push(n)}_emitTabsChanged(){this._widgets.forEach((n=>{n.title.changed.disconnect(this._emitTabsChanged,this)}));this._widgets=[];this._tabsChanged.emit(void 0)}}function m(n,e,t){const s=new p(t);const o=e.load("jupyterlab");n.add({name:o.__("Open Tabs"),running:()=>Array.from(t.widgets("main")).map((n=>{s.addWidget(n);return new i(n)})),shutdownAll:()=>{for(const n of t.widgets("main")){n.close()}},refreshRunning:()=>void 0,runningChanged:s.tabsChanged,shutdownLabel:o.__("Close"),shutdownAllLabel:o.__("Close All"),shutdownAllConfirmationText:o.__("Are you sure you want to close all open tabs?")});class i{constructor(n){this._widget=n}open(){t.activateById(this._widget.id)}shutdown(){this._widget.close()}icon(){const n=this._widget.title.icon;return n instanceof a.LabIcon?n:a.fileIcon}label(){return this._widget.title.label}labelTitle(){let n;if(this._widget instanceof g.DocumentWidget){n=this._widget.context.path}else{n=this._widget.title.label}return n}}}var b;(function(n){n.kernelNewConsole="running:kernel-new-console";n.kernelNewNotebook="running:kernel-new-notebook";n.kernelOpenSession="running:kernel-open-session";n.kernelShutDown="running:kernel-shut-down";n.showPanel="running:show-panel"})(b||(b={}));const w={activate:v,id:"@jupyterlab/running-extension:plugin",description:"Provides the running session managers.",provides:o.IRunningSessionManagers,requires:[i.ITranslator],optional:[s.ILayoutRestorer,s.ILabShell],autoStart:true};const _=w;function v(n,e,t,s){const i=e.load("jupyterlab");const l=new o.RunningSessionManagers;const r=new o.RunningSessions(l,e);r.id="jp-running-sessions";r.title.caption=i.__("Running Terminals and Kernels");r.title.icon=a.runningIcon;r.node.setAttribute("role","region");r.node.setAttribute("aria-label",i.__("Running Sessions section"));if(t){t.add(r,"running-sessions")}if(s){m(l,e,s)}void u(l,e,n);n.shell.add(r,"left",{rank:200,type:"Sessions and Tabs"});n.commands.addCommand(b.showPanel,{label:i.__("Sessions and Tabs"),execute:()=>{n.shell.activateById(r.id)}});return l}}}]);
//# sourceMappingURL=8180.9ace3ccdd8da95819986.js.map?v=9ace3ccdd8da95819986