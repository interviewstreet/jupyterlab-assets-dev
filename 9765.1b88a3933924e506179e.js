"use strict";(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[9765],{89765:(e,t,i)=>{i.r(t);i.d(t,{ITerminal:()=>o,ITerminalTracker:()=>n,Terminal:()=>u});var s=i(55172);const n=new s.Token("@jupyterlab/terminal:ITerminalTracker",`A widget tracker for terminals.\n  Use this if you want to be able to iterate over and interact with terminals\n  created by the application.`);var o;(function(e){e.defaultOptions={theme:"inherit",fontFamily:'Menlo, Consolas, "DejaVu Sans Mono", monospace',fontSize:13,lineHeight:1,scrollback:1e3,shutdownOnClose:false,closeOnExit:true,cursorBlink:true,initialCommand:"",screenReaderMode:false,pasteWithCtrlV:true,autoFit:true,macOptionIsMeta:false}})(o||(o={}));var r=i(50724);var a=i(76838);var h=i(37917);var c=i(65178);const d="jp-Terminal";const l="jp-Terminal-body";class u extends c.Widget{constructor(e,t={},i){super();this._needsResize=true;this._offsetWidth=-1;this._offsetHeight=-1;this._isReady=false;this._ready=new s.PromiseDelegate;this._termOpened=false;i=i||r.nullTranslator;this._trans=i.load("jupyterlab");this.session=e;this._options={...o.defaultOptions,...t};const{theme:n,...a}=this._options;const h={theme:m.getXTermTheme(n),...a};this.addClass(d);this._setThemeAttribute(n);let c="";const l=(e,t)=>{switch(t.type){case"stdout":if(t.content){c+=t.content[0]}break;default:break}};e.messageReceived.connect(l);e.disposed.connect((()=>{if(this.getOption("closeOnExit")){this.dispose()}}),this);m.createTerminal(h).then((([t,i])=>{this._term=t;this._fitAddon=i;this._initializeTerm();this.id=`jp-Terminal-${m.id++}`;this.title.label=this._trans.__("Terminal");this._isReady=true;this._ready.resolve();if(c){this._term.write(c)}e.messageReceived.disconnect(l);e.messageReceived.connect(this._onMessage,this);if(e.connectionStatus==="connected"){this._initialConnection()}else{e.connectionStatusChanged.connect(this._initialConnection,this)}this.update()})).catch((e=>{console.error("Failed to create a terminal.\n",e);this._ready.reject(e)}))}get ready(){return this._ready.promise}getOption(e){return this._options[e]}setOption(e,t){if(e!=="theme"&&(this._options[e]===t||e==="initialCommand")){return}this._options[e]=t;switch(e){case"fontFamily":this._term.options.fontFamily=t;break;case"fontSize":this._term.options.fontSize=t;break;case"lineHeight":this._term.options.lineHeight=t;break;case"screenReaderMode":this._term.options.screenReaderMode=t;break;case"scrollback":this._term.options.scrollback=t;break;case"theme":this._term.options.theme={...m.getXTermTheme(t)};this._setThemeAttribute(t);break;case"macOptionIsMeta":this._term.options.macOptionIsMeta=t;break;default:break}this._needsResize=true;this.update()}dispose(){if(!this.session.isDisposed){if(this.getOption("shutdownOnClose")){this.session.shutdown().catch((e=>{console.error(`Terminal not shut down: ${e}`)}))}}void this.ready.then((()=>{this._term.dispose()}));super.dispose()}async refresh(){if(!this.isDisposed&&this._isReady){await this.session.reconnect();this._term.clear()}}hasSelection(){if(!this.isDisposed&&this._isReady){return this._term.hasSelection()}return false}paste(e){if(!this.isDisposed&&this._isReady){return this._term.paste(e)}}getSelection(){if(!this.isDisposed&&this._isReady){return this._term.getSelection()}return null}processMessage(e){super.processMessage(e);switch(e.type){case"fit-request":this.onFitRequest(e);break;default:break}}onAfterAttach(e){this.update()}onAfterShow(e){this.update()}onResize(e){this._offsetWidth=e.width;this._offsetHeight=e.height;this._needsResize=true;this.update()}onUpdateRequest(e){var t;if(!this.isVisible||!this.isAttached||!this._isReady){return}if(!this._termOpened){this._term.open(this.node);(t=this._term.element)===null||t===void 0?void 0:t.classList.add(l);this._termOpened=true}if(this._needsResize){this._resizeTerminal()}}onFitRequest(e){const t=c.Widget.ResizeMessage.UnknownSize;h.MessageLoop.sendMessage(this,t)}onActivateRequest(e){var t;(t=this._term)===null||t===void 0?void 0:t.focus()}_initialConnection(){if(this.isDisposed){return}if(this.session.connectionStatus!=="connected"){return}this.title.label=this._trans.__("Terminal %1",this.session.name);this._setSessionSize();if(this._options.initialCommand){this.session.send({type:"stdin",content:[this._options.initialCommand+"\r"]})}this.session.connectionStatusChanged.disconnect(this._initialConnection,this)}_initializeTerm(){const e=this._term;e.onData((e=>{if(this.isDisposed){return}this.session.send({type:"stdin",content:[e]})}));e.onTitleChange((e=>{this.title.label=e}));if(a.Platform.IS_MAC){return}e.attachCustomKeyEventHandler((t=>{if(t.ctrlKey&&t.key==="c"&&e.hasSelection()){return false}if(t.ctrlKey&&t.key==="v"&&this._options.pasteWithCtrlV){return false}return true}))}_onMessage(e,t){switch(t.type){case"stdout":if(t.content){this._term.write(t.content[0])}break;case"disconnect":this._term.write("\r\n\r\n[Finishedâ€¦ Term Session]\r\n");break;default:break}}_resizeTerminal(){if(this._options.autoFit){this._fitAddon.fit()}if(this._offsetWidth===-1){this._offsetWidth=this.node.offsetWidth}if(this._offsetHeight===-1){this._offsetHeight=this.node.offsetHeight}this._setSessionSize();this._needsResize=false}_setSessionSize(){const e=[this._term.rows,this._term.cols,this._offsetHeight,this._offsetWidth];if(!this.isDisposed){this.session.send({type:"set_size",content:e})}}_setThemeAttribute(e){if(this.isDisposed){return}this.node.setAttribute("data-term-theme",e?e.toLowerCase():"inherit")}}var m;(function(e){e.id=0;e.lightTheme={foreground:"#000",background:"#fff",cursor:"#616161",cursorAccent:"#F5F5F5",selectionBackground:"rgba(97, 97, 97, 0.3)",selectionInactiveBackground:"rgba(189, 189, 189, 0.3)"};e.darkTheme={foreground:"#fff",background:"#000",cursor:"#fff",cursorAccent:"#000",selectionBackground:"rgba(255, 255, 255, 0.3)",selectionInactiveBackground:"rgba(238, 238, 238, 0.3)"};e.inheritTheme=()=>({foreground:getComputedStyle(document.body).getPropertyValue("--jp-ui-font-color0").trim(),background:getComputedStyle(document.body).getPropertyValue("--jp-layout-color0").trim(),cursor:getComputedStyle(document.body).getPropertyValue("--jp-ui-font-color1").trim(),cursorAccent:getComputedStyle(document.body).getPropertyValue("--jp-ui-inverse-font-color0").trim(),selectionBackground:getComputedStyle(document.body).getPropertyValue("--jp-layout-color3").trim(),selectionInactiveBackground:getComputedStyle(document.body).getPropertyValue("--jp-layout-color2").trim()});function t(t){switch(t){case"light":return e.lightTheme;case"dark":return e.darkTheme;case"inherit":default:return e.inheritTheme()}}e.getXTermTheme=t})(m||(m={}));(function(e){let t=false;let s;let n;let o;let r;function a(){const e=document.createElement("canvas");const t=e.getContext("webgl")||e.getContext("experimental-webgl");try{return t instanceof WebGLRenderingContext}catch(i){return false}}function h(e){let i=new r;e.loadAddon(i);if(t){i.onContextLoss((t=>{console.debug("WebGL context lost - reinitialize Xtermjs renderer.");i.dispose();h(e)}))}}async function c(e){var c;if(!s){t=a();const[e,h,d,l]=await Promise.all([i.e(7289).then(i.t.bind(i,77289,23)),i.e(8440).then(i.t.bind(i,75517,23)),t?i.e(9358).then(i.t.bind(i,89358,23)):i.e(967).then(i.t.bind(i,30967,23)),i.e(3678).then(i.t.bind(i,73678,23))]);s=e.Terminal;n=h.FitAddon;r=(c=d.WebglAddon)!==null&&c!==void 0?c:d.CanvasAddon;o=l.WebLinksAddon}const d=new s(e);h(d);const l=new n;d.loadAddon(l);d.loadAddon(new o);return[d,l]}e.createTerminal=c})(m||(m={}))}}]);
//# sourceMappingURL=9765.1b88a3933924e506179e.js.map?v=1b88a3933924e506179e