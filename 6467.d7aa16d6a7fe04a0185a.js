(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[6467],{16467:(e,t,a)=>{"use strict";a.r(t);a.d(t,{FigureModel:()=>d,FigureView:()=>u,MODULE_NAME:()=>n.o,MODULE_VERSION:()=>n.Y});var r=a(91211);var s=a(30120);var i=a.n(s);var l=a(75576);var o=a.n(l);var n=a(14681);window.PlotlyConfig={MathJaxConfig:"local"};const _="^"+n.Y;class d extends r.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:d.model_name,_model_module:d.model_module,_model_module_version:d.model_module_version,_view_name:d.view_name,_view_module:d.view_module,_view_module_version:d.view_module_version,_data:[],_layout:{},_config:{},_py2js_addTraces:null,_py2js_deleteTraces:null,_py2js_moveTraces:null,_py2js_restyle:null,_py2js_relayout:null,_py2js_update:null,_py2js_animate:null,_py2js_removeLayoutProps:null,_py2js_removeTraceProps:null,_js2py_restyle:null,_js2py_relayout:null,_js2py_update:null,_js2py_layoutDelta:null,_js2py_traceDeltas:null,_js2py_pointsCallback:null,_last_layout_edit_id:0,_last_trace_edit_id:0})}initialize(){super.initialize.apply(this,arguments);this.on("change:_data",this.do_data,this);this.on("change:_layout",this.do_layout,this);this.on("change:_py2js_addTraces",this.do_addTraces,this);this.on("change:_py2js_deleteTraces",this.do_deleteTraces,this);this.on("change:_py2js_moveTraces",this.do_moveTraces,this);this.on("change:_py2js_restyle",this.do_restyle,this);this.on("change:_py2js_relayout",this.do_relayout,this);this.on("change:_py2js_update",this.do_update,this);this.on("change:_py2js_animate",this.do_animate,this);this.on("change:_py2js_removeLayoutProps",this.do_removeLayoutProps,this);this.on("change:_py2js_removeTraceProps",this.do_removeTraceProps,this)}_normalize_trace_indexes(e){if(e===null||e===undefined){var t=this.get("_data").length;e=i().range(t)}if(!Array.isArray(e)){e=[e]}return e}do_data(){}do_layout(){}do_addTraces(){var e=this.get("_py2js_addTraces");if(e!==null){var t=this.get("_data");var a=e.trace_data;i().forEach(a,(function(e){t.push(e)}))}}do_deleteTraces(){var e=this.get("_py2js_deleteTraces");if(e!==null){var t=e.delete_inds;var a=this.get("_data");t.slice().reverse().forEach((function(e){a.splice(e,1)}))}}do_moveTraces(){var e=this.get("_py2js_moveTraces");if(e!==null){var t=this.get("_data");var a=e.current_trace_inds;var r=e.new_trace_inds;j(t,a,r)}}do_restyle(){var e=this.get("_py2js_restyle");if(e!==null){var t=e.restyle_data;var a=this._normalize_trace_indexes(e.restyle_traces);m(this.get("_data"),t,a)}}do_relayout(){var e=this.get("_py2js_relayout");if(e!==null){g(this.get("_layout"),e.relayout_data)}}do_update(){var e=this.get("_py2js_update");if(e!==null){var t=e.style_data;var a=e.layout_data;var r=this._normalize_trace_indexes(e.style_traces);m(this.get("_data"),t,r);g(this.get("_layout"),a)}}do_animate(){var e=this.get("_py2js_animate");if(e!==null){var t=e.style_data;var a=e.layout_data;var r=this._normalize_trace_indexes(e.style_traces);for(var s=0;s<t.length;s++){var i=t[s];var l=r[s];var o=this.get("_data")[l];g(o,i)}g(this.get("_layout"),a)}}do_removeLayoutProps(){var e=this.get("_py2js_removeLayoutProps");if(e!==null){var t=e.remove_props;var a=this.get("_layout");w(a,t)}}do_removeTraceProps(){var e=this.get("_py2js_removeTraceProps");if(e!==null){var t=e.remove_props;var a=e.remove_trace;var r=this.get("_data")[a];w(r,t)}}}d.serializers=Object.assign(Object.assign({},r.DOMWidgetModel.serializers),{_data:{deserialize:p,serialize:c},_layout:{deserialize:p,serialize:c},_py2js_addTraces:{deserialize:p,serialize:c},_py2js_deleteTraces:{deserialize:p,serialize:c},_py2js_moveTraces:{deserialize:p,serialize:c},_py2js_restyle:{deserialize:p,serialize:c},_py2js_relayout:{deserialize:p,serialize:c},_py2js_update:{deserialize:p,serialize:c},_py2js_animate:{deserialize:p,serialize:c},_py2js_removeLayoutProps:{deserialize:p,serialize:c},_py2js_removeTraceProps:{deserialize:p,serialize:c},_js2py_restyle:{deserialize:p,serialize:c},_js2py_relayout:{deserialize:p,serialize:c},_js2py_update:{deserialize:p,serialize:c},_js2py_layoutDelta:{deserialize:p,serialize:c},_js2py_traceDeltas:{deserialize:p,serialize:c},_js2py_pointsCallback:{deserialize:p,serialize:c}});d.model_name="FigureModel";d.model_module=n.o;d.model_module_version=_;d.view_name="FigureView";d.view_module=n.o;d.view_module_version=_;class u extends r.DOMWidgetView{perform_render(){var e,t,a,r;var s=this;this.model.on("change:_py2js_addTraces",this.do_addTraces,this);this.model.on("change:_py2js_deleteTraces",this.do_deleteTraces,this);this.model.on("change:_py2js_moveTraces",this.do_moveTraces,this);this.model.on("change:_py2js_restyle",this.do_restyle,this);this.model.on("change:_py2js_relayout",this.do_relayout,this);this.model.on("change:_py2js_update",this.do_update,this);this.model.on("change:_py2js_animate",this.do_animate,this);(r=(a=(t=(e=window)===null||e===void 0?void 0:e.MathJax)===null||t===void 0?void 0:t.Hub)===null||a===void 0?void 0:a.Config)===null||r===void 0?void 0:r.call(a,{SVG:{font:"STIX-Web"}});var l=this.model.get("_last_layout_edit_id");var n=this.model.get("_last_trace_edit_id");this.viewID=z();var _=i().cloneDeep(this.model.get("_data"));var d=i().cloneDeep(this.model.get("_layout"));var u=this.model.get("_config");o().newPlot(s.el,_,d,u).then((function(){s._sendTraceDeltas(n);s._sendLayoutDelta(l);s.el.on("plotly_restyle",(function(e){s.handle_plotly_restyle(e)}));s.el.on("plotly_relayout",(function(e){s.handle_plotly_relayout(e)}));s.el.on("plotly_update",(function(e){s.handle_plotly_update(e)}));s.el.on("plotly_click",(function(e){s.handle_plotly_click(e)}));s.el.on("plotly_hover",(function(e){s.handle_plotly_hover(e)}));s.el.on("plotly_unhover",(function(e){s.handle_plotly_unhover(e)}));s.el.on("plotly_selected",(function(e){s.handle_plotly_selected(e)}));s.el.on("plotly_deselect",(function(e){s.handle_plotly_deselect(e)}));s.el.on("plotly_doubleclick",(function(e){s.handle_plotly_doubleclick(e)}));var e=new CustomEvent("plotlywidget-after-render",{detail:{element:s.el,viewID:s.viewID}});document.dispatchEvent(e)}))}processPhosphorMessage(e){super.processPhosphorMessage.apply(this,arguments);var t=this;switch(e.type){case"before-attach":var a={showgrid:false,showline:false,tickvals:[]};o().newPlot(t.el,[],{xaxis:a,yaxis:a});window.addEventListener("resize",(function(){t.autosizeFigure()}));break;case"after-attach":this.perform_render();break;case"after-show":case"resize":this.autosizeFigure();break}}autosizeFigure(){var e=this;var t=e.model.get("_layout");if(i().isNil(t)||i().isNil(t.width)){o().Plots.resize(e.el).then((function(){var t=e.model.get("_last_layout_edit_id");e._sendLayoutDelta(t)}))}}destroy(){o().purge(this.el)}getFullData(){return i().mergeWith({},this.el._fullData,this.el.data,f)}getFullLayout(){return i().mergeWith({},this.el._fullLayout,this.el.layout,f)}buildPointsObject(e){var t;if(e.hasOwnProperty("points")){var a=e["points"];var r=a.length;var s=true;for(let e=0;e<r;e++){s=s&&a[e].hasOwnProperty("pointNumbers");if(!s)break}var i=r;if(s){i=0;for(let e=0;e<r;e++){i+=a[e]["pointNumbers"].length}}t={trace_indexes:new Array(i),point_indexes:new Array(i),xs:new Array(i),ys:new Array(i)};if(s){var l=0;for(var o=0;o<r;o++){for(let e=0;e<a[o]["pointNumbers"].length;e++,l++){t["point_indexes"][l]=a[o]["pointNumbers"][e];t["xs"][l]=a[o]["x"];t["ys"][l]=a[o]["y"];t["trace_indexes"][l]=a[o]["curveNumber"]}}let e=true;for(let a=1;a<i;a++){e=e&&t["trace_indexes"][a-1]===t["trace_indexes"][a];if(!e)break}if(e){t["point_indexes"].sort((function(e,t){return e-t}))}}else{for(var o=0;o<r;o++){t["trace_indexes"][o]=a[o]["curveNumber"];t["point_indexes"][o]=a[o]["pointNumber"];t["xs"][o]=a[o]["x"];t["ys"][o]=a[o]["y"]}}var n=a[0]!==undefined&&a[0].hasOwnProperty("z");if(n){t["zs"]=new Array(r);for(o=0;o<r;o++){t["zs"][o]=a[o]["z"]}}return t}else{return null}}buildInputDeviceStateObject(e){var t=e["event"];if(t===undefined){return null}else{var a={alt:t["altKey"],ctrl:t["ctrlKey"],meta:t["metaKey"],shift:t["shiftKey"],button:t["button"],buttons:t["buttons"]};return a}}buildSelectorObject(e){var t;if(e.hasOwnProperty("range")){t={type:"box",selector_state:{xrange:e["range"]["x"],yrange:e["range"]["y"]}}}else if(e.hasOwnProperty("lassoPoints")){t={type:"lasso",selector_state:{xs:e["lassoPoints"]["x"],ys:e["lassoPoints"]["y"]}}}else{t=null}return t}handle_plotly_restyle(e){if(e===null||e===undefined){return}if(e[0]&&e[0].hasOwnProperty("_doNotReportToPy")){return}var t=e[0];var a=e[1];var r={style_data:t,style_traces:a,source_view_id:this.viewID};this.model.set("_js2py_restyle",r);this.touch()}handle_plotly_relayout(e){if(e===null||e===undefined){return}if(e.hasOwnProperty("_doNotReportToPy")){return}var t={relayout_data:e,source_view_id:this.viewID};this.model.set("_js2py_relayout",t);this.touch()}handle_plotly_update(e){if(e===null||e===undefined){return}if(e["data"]&&e["data"][0].hasOwnProperty("_doNotReportToPy")){return}var t={style_data:e["data"][0],style_traces:e["data"][1],layout_data:e["layout"],source_view_id:this.viewID};this.model.set("_js2py_update",t);this.touch()}handle_plotly_click(e){this._send_points_callback_message(e,"plotly_click")}handle_plotly_hover(e){this._send_points_callback_message(e,"plotly_hover")}handle_plotly_unhover(e){this._send_points_callback_message(e,"plotly_unhover")}handle_plotly_selected(e){this._send_points_callback_message(e,"plotly_selected")}handle_plotly_deselect(e){e={points:[]};this._send_points_callback_message(e,"plotly_deselect")}_send_points_callback_message(e,t){if(e===null||e===undefined){return}var a={event_type:t,points:this.buildPointsObject(e),device_state:this.buildInputDeviceStateObject(e),selector:this.buildSelectorObject(e)};if(a["points"]!==null&&a["points"]!==undefined){this.model.set("_js2py_pointsCallback",a);this.touch()}}handle_plotly_doubleclick(e){}do_addTraces(){var e=this.model.get("_py2js_addTraces");if(e!==null){var t=this;o().addTraces(this.el,e.trace_data).then((function(){t._sendTraceDeltas(e.trace_edit_id);var a=e.layout_edit_id;t._sendLayoutDelta(a)}))}}do_deleteTraces(){var e=this.model.get("_py2js_deleteTraces");if(e!==null){var t=e.delete_inds;var a=this;o().deleteTraces(this.el,t).then((function(){var t=e.trace_edit_id;a._sendTraceDeltas(t);var r=e.layout_edit_id;a._sendLayoutDelta(r)}))}}do_moveTraces(){var e=this.model.get("_py2js_moveTraces");if(e!==null){var t=e.current_trace_inds;var a=e.new_trace_inds;var r=i().isEqual(t,a);if(!r){o().moveTraces(this.el,t,a)}}}do_restyle(){var e=this.model.get("_py2js_restyle");if(e!==null){var t=e.restyle_data;var a=this.model._normalize_trace_indexes(e.restyle_traces);t["_doNotReportToPy"]=true;o().restyle(this.el,t,a);this._sendTraceDeltas(e.trace_edit_id);var r=e.layout_edit_id;this._sendLayoutDelta(r)}}do_relayout(){var e=this.model.get("_py2js_relayout");if(e!==null){if(e.source_view_id!==this.viewID){var t=e.relayout_data;t["_doNotReportToPy"]=true;o().relayout(this.el,e.relayout_data)}var a=e.layout_edit_id;this._sendLayoutDelta(a)}}do_update(){var e=this.model.get("_py2js_update");if(e!==null){var t=e.style_data||{};var a=e.layout_data||{};var r=this.model._normalize_trace_indexes(e.style_traces);t["_doNotReportToPy"]=true;o().update(this.el,t,a,r);this._sendTraceDeltas(e.trace_edit_id);var s=e.layout_edit_id;this._sendLayoutDelta(s)}}do_animate(){var e=this.model.get("_py2js_animate");if(e!==null){var t=e.animation_opts;var a=e.style_data;var r=e.layout_data;var s=this.model._normalize_trace_indexes(e.style_traces);var i={data:a,layout:r,traces:s};i["_doNotReportToPy"]=true;var l=this;o().animate(this.el,i,t).then((function(){l._sendTraceDeltas(e.trace_edit_id);var t=e.layout_edit_id;l._sendLayoutDelta(t)}))}}_sendLayoutDelta(e){var t=b(this.getFullLayout(),this.model.get("_layout"));var a={layout_delta:t,layout_edit_id:e};this.model.set("_js2py_layoutDelta",a);this.touch()}_sendTraceDeltas(e){var t=this.model.get("_data");var a=i().range(t.length);var r=new Array(a.length);var s=this.getFullData();for(var l=0;l<a.length;l++){var o=a[l];r[l]=b(s[o],t[o])}var n={trace_deltas:r,trace_edit_id:e};this.model.set("_js2py_traceDeltas",n);this.touch()}}const y={int8:Int8Array,int16:Int16Array,int32:Int32Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,float32:Float32Array,float64:Float64Array};function h(e){var t;if(e instanceof Int8Array){t="int8"}else if(e instanceof Int16Array){t="int16"}else if(e instanceof Int32Array){t="int32"}else if(e instanceof Uint8Array){t="uint8"}else if(e instanceof Uint16Array){t="uint16"}else if(e instanceof Uint32Array){t="uint32"}else if(e instanceof Float32Array){t="float32"}else if(e instanceof Float64Array){t="float64"}else{return e}var a={dtype:t,shape:[e.length],value:e.buffer};return a}function c(e,t){var a;if(i().isTypedArray(e)){a=h(e)}else if(Array.isArray(e)){a=new Array(e.length);for(var r=0;r<e.length;r++){a[r]=c(e[r])}}else if(i().isPlainObject(e)){a={};for(var s in e){if(e.hasOwnProperty(s)){a[s]=c(e[s])}}}else if(e===undefined){a="_undefined_"}else{a=e}return a}function p(e,t){var a;if(Array.isArray(e)){a=new Array(e.length);for(var r=0;r<e.length;r++){a[r]=p(e[r])}}else if(i().isPlainObject(e)){if((i().has(e,"value")||i().has(e,"buffer"))&&i().has(e,"dtype")&&i().has(e,"shape")){var s=y[e.dtype];var l=i().has(e,"value")?e.value.buffer:e.buffer.buffer;a=new s(l)}else{a={};for(var o in e){if(e.hasOwnProperty(o)){a[o]=p(e[o])}}}}else if(e==="_undefined_"){a=undefined}else{a=e}return a}function v(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function f(e,t,a){if(a[0]==="_"){return null}else if(v(t)){return t}}function g(e,t){for(var a in t){if(!t.hasOwnProperty(a)){continue}var r=t[a];if(r===null){i().unset(e,a)}else{i().set(e,a,r)}}}function m(e,t,a){for(var r in t){if(!t.hasOwnProperty(r)){continue}var s=t[r];if(!Array.isArray(s)){s=[s]}for(var l=0;l<a.length;l++){var o=a[l];var n=e[o];var _=s[l%s.length];if(_===null){i().unset(n,r)}else if(_!==undefined){i().set(n,r,_)}}}}function j(e,t,a){var r=[];for(var s=t.length-1;s>=0;s--){r.splice(0,0,e[t[s]]);e.splice(t[s],1)}var l=i()(a).zip(r).sortBy(0).unzip().value();a=l[0];r=l[1];for(var o=0;o<a.length;o++){e.splice(a[o],0,r[o])}}function w(e,t){for(var a=0;a<t.length;a++){var r=t[a];i().unset(e,r)}}function b(e,t){var a;if(Array.isArray(e)){a=new Array(e.length)}else{a={}}if(t===null||t===undefined){t={}}for(var r in e){if(r[0]!=="_"&&e.hasOwnProperty(r)&&e[r]!==null){var s;s=i().isEqual(e[r],t[r]);if(!s||r==="uid"){var l=e[r];if(t.hasOwnProperty(r)&&typeof l==="object"){if(Array.isArray(l)){if(l.length>0&&typeof l[0]==="object"){a[r]=new Array(l.length);for(var o=0;o<l.length;o++){if(!Array.isArray(t[r])||t[r].length<=o){a[r][o]=l[o]}else{a[r][o]=b(l[o],t[r][o])}}}else{a[r]=l}}else{var n=b(l,t[r]);if(Object.keys(n).length>0){a[r]=n}}}else if(typeof l==="object"&&!Array.isArray(l)){a[r]=b(l,{})}else if(l!==undefined&&typeof l!=="function"){a[r]=l}}}}return a}function z(e,t,a,r){if(!a)a=16;if(t===undefined)t=24;if(t<=0)return"0";var s=Math.log(Math.pow(2,t))/Math.log(a);var i="";var l,o,n;for(l=2;s===Infinity;l*=2){s=Math.log(Math.pow(2,t/l))/Math.log(a)*l}var _=s-Math.floor(s);for(l=0;l<Math.floor(s);l++){n=Math.floor(Math.random()*a).toString(a);i=n+i}if(_){o=Math.pow(a,_);n=Math.floor(Math.random()*o).toString(a);i=n+i}var d=parseInt(i,a);if(e&&e[i]||d!==Infinity&&d>=Math.pow(2,t)){if(r>10){console.warn("randstr failed uniqueness");return i}return z(e,t,a,(r||0)+1)}else return i}}}]);
//# sourceMappingURL=6467.d7aa16d6a7fe04a0185a.js.map?v=d7aa16d6a7fe04a0185a