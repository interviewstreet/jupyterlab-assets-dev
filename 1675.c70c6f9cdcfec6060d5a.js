"use strict";(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[1675],{11675:(e,t,n)=>{n.r(t);n.d(t,{CodeMirrorEditor:()=>K,CodeMirrorEditorFactory:()=>ee,CodeMirrorMimeTypeService:()=>te,CodeMirrorSearchHighlighter:()=>se,EditorExtensionRegistry:()=>z,EditorLanguageRegistry:()=>G,EditorSearchProvider:()=>ie,EditorThemeRegistry:()=>J,ExtensionsHandler:()=>R,IEditorExtensionRegistry:()=>re,IEditorLanguageRegistry:()=>oe,IEditorThemeRegistry:()=>le,StateCommands:()=>r,YRange:()=>P,YSyncConfig:()=>T,customTheme:()=>g,jupyterEditorTheme:()=>Q,jupyterHighlightStyle:()=>$,jupyterTheme:()=>W,parseMathIPython:()=>N,rulers:()=>L,ySync:()=>D,ySyncAnnotation:()=>A,ySyncFacet:()=>I,ybinding:()=>H});var i=n(7130);var s=n(52959);const a="[data-jp-code-runner]";var r;(function(e){function t(e){var t;if((t=e.dom.parentElement)===null||t===void 0?void 0:t.classList.contains(s.COMPLETER_ENABLED_CLASS)){return false}const n={state:e.state,dispatch:e.dispatch};const a=e.state.selection.main.from;const r=e.state.selection.main.to;if(a!=r){return(0,i.indentMore)(n)}const o=e.state.doc.lineAt(a);const l=e.state.doc.slice(o.from,a).toString();if(/^\s*$/.test(l)){return(0,i.indentMore)(n)}else{return(0,i.insertTab)(n)}}e.indentMoreOrInsertTab=t;function n(e){var t;if((t=e.dom.parentElement)===null||t===void 0?void 0:t.classList.contains(s.COMPLETER_ACTIVE_CLASS)){return true}const n={state:e.state,dispatch:e.dispatch};return(0,i.insertNewlineAndIndent)(n)}e.completerOrInsertNewLine=n;function r(e){if(e.dom.closest(a)){return true}return false}e.preventNewLineOnRun=r})(r||(r={}));var o=n(39720);var l=n(46035);var c=n(5502);var d=n(55172);var h=n(19289);var m=n(9e3);var u=n(50724);const p=l.Facet.define({combine(e){return(0,l.combineConfig)(e,{fontFamily:null,fontSize:null,lineHeight:null},{fontFamily:(e,t)=>e!==null&&e!==void 0?e:t,fontSize:(e,t)=>e!==null&&e!==void 0?e:t,lineHeight:(e,t)=>e!==null&&e!==void 0?e:t})}});function f(e){const{fontFamily:t,fontSize:n,lineHeight:i}=e.state.facet(p);let s="";if(n){s+=`font-size: ${n}px !important;`}if(t){s+=`font-family: ${t} !important;`}if(i){s+=`line-height: ${i.toString()} !important`}return{style:s}}function g(e){return[p.of(e),c.EditorView.editorAttributes.of(f)]}var y=n(28355);var _=n(92757);const x="InlineMathDollar";const b="InlineMathBracket";const v="BlockMathDollar";const w="BlockMathBracket";const S={[x]:1,[b]:3,[v]:2,[w]:3};const C=Object.keys(S).reduce(((e,t)=>{e[t]={mark:`${t}Mark`,resolve:t};return e}),{});function N(e){const t=new Array;Object.keys(S).forEach((e=>{t.push({name:e,style:_.tags.emphasis},{name:`${e}Mark`,style:_.tags.processingInstruction})}));return{defineNodes:t,parseInline:[{name:v,parse(e,t,n){if(t!=36||e.char(n+1)!=36){return-1}return e.addDelimiter(C[v],n,n+S[v],true,true)}},{name:x,parse(e,t,n){if(t!=36||e.char(n+1)==36){return-1}return e.addDelimiter(C[x],n,n+S[x],true,true)}},{name:b,before:"Escape",parse(e,t,n){if(t!=92||e.char(n+1)!=92||![40,41].includes(e.char(n+2))){return-1}return e.addDelimiter(C[b],n,n+S[b],e.char(n+2)==40,e.char(n+2)==41)}},{name:w,before:"Escape",parse(e,t,n){if(t!=92||e.char(n+1)!=92||![91,93].includes(e.char(n+2))){return-1}return e.addDelimiter(C[w],n,n+S[w],e.char(n+2)==91,e.char(n+2)==93)}}],wrap:e?(0,y.parseMixed)(((t,n)=>{const i=S[t.type.name];if(i){return{parser:e,overlay:[{from:t.from+i,to:t.to-i}]}}return null})):undefined}}const M="cm-rulers";const j=c.EditorView.baseTheme({[`.${M}`]:{borderRight:"1px dotted gray",opacity:.7}});const E=l.Facet.define({combine(e){const t=e.reduce(((e,t)=>e.concat(t.filter(((n,i)=>!e.includes(n)&&i==t.lastIndexOf(n))))),[]);return t}});const k=c.ViewPlugin.fromClass(class{constructor(e){var t,n;this.rulersContainer=e.dom.appendChild(document.createElement("div"));this.rulersContainer.style.cssText=`\n                position: absolute;\n                left: 0;\n                top: 0;\n                width: 100%;\n                height: 100%;\n                pointer-events: none;\n                overflow: hidden;\n            `;const i=e.defaultCharacterWidth;const s=e.state.facet(E);const a=(n=(t=e.scrollDOM.querySelector(".cm-gutters"))===null||t===void 0?void 0:t.clientWidth)!==null&&n!==void 0?n:0;this.rulers=s.map((e=>{const t=this.rulersContainer.appendChild(document.createElement("div"));t.classList.add(M);t.style.cssText=`\n                position: absolute;\n                left: ${a+e*i}px;\n                height: 100%;\n            `;t.style.width="6px";return t}))}update(e){var t,n;const i=e.view.state.facet(E);if(e.viewportChanged||e.geometryChanged||!d.JSONExt.deepEqual(i,e.startState.facet(E))){const s=(n=(t=e.view.scrollDOM.querySelector(".cm-gutters"))===null||t===void 0?void 0:t.clientWidth)!==null&&n!==void 0?n:0;const a=e.view.defaultCharacterWidth;this.rulers.forEach(((e,t)=>{e.style.left=`${s+i[t]*a}px`}))}}destroy(){this.rulers.forEach((e=>{e.remove()}));this.rulersContainer.remove()}});function L(e){return[j,E.of(e),k]}var O=n(29925);class P{constructor(e,t){this.yanchor=e;this.yhead=t}toJSON(){return{yanchor:(0,O.relativePositionToJSON)(this.yanchor),yhead:(0,O.relativePositionToJSON)(this.yhead)}}static fromJSON(e){return new P((0,O.createRelativePositionFromJSON)(e.yanchor),(0,O.createRelativePositionFromJSON)(e.yhead))}}class T{constructor(e){this.ytext=e}toYPos(e,t=0){return(0,O.createRelativePositionFromTypeIndex)(this.ytext,e,t)}fromYPos(e){const t=(0,O.createAbsolutePositionFromRelativePosition)((0,O.createRelativePositionFromJSON)(e),this.ytext.doc);if(t==null||t.type!==this.ytext){throw new Error("[y-codemirror] The position you want to retrieve was created by a different document")}return{pos:t.index,assoc:t.assoc}}toYRange(e){const t=e.assoc;const n=this.toYPos(e.anchor,t);const i=this.toYPos(e.head,t);return new P(n,i)}fromYRange(e){const t=this.fromYPos(e.yanchor);const n=this.fromYPos(e.yhead);if(t.pos===n.pos){return l.EditorSelection.cursor(n.pos,n.assoc)}return l.EditorSelection.range(t.pos,n.pos)}}const I=l.Facet.define({combine(e){return e[e.length-1]}});const A=l.Annotation.define();const D=c.ViewPlugin.fromClass(class{constructor(e){this.conf=e.state.facet(I);this._observer=(t,n)=>{var i;if(n.origin!==this.conf){const n=t.delta;const s=[];let a=0;for(let e=0;e<n.length;e++){const t=n[e];if(t.insert!=null){s.push({from:a,to:a,insert:t.insert})}else if(t.delete!=null){s.push({from:a,to:a+t.delete,insert:""});a+=t.delete}else{a+=(i=t.retain)!==null&&i!==void 0?i:0}}e.dispatch({changes:s,annotations:[A.of(this.conf)]})}};this._ytext=this.conf.ytext;this._ytext.observe(this._observer)}update(e){if(!e.docChanged||e.transactions.length>0&&e.transactions[0].annotation(A)===this.conf){return}const t=this.conf.ytext;t.doc.transact((()=>{let n=0;e.changes.iterChanges(((e,i,s,a,r)=>{const o=r.sliceString(0,r.length,"\n");if(e!==i){t.delete(e+n,i-e)}if(o.length>0){t.insert(e+n,o)}n+=o.length-(i-e)}))}),this.conf)}destroy(){this._ytext.unobserve(this._observer)}});function H({ytext:e,undoManager:t}){const n=new T(e);return[I.of(n),D,t?c.ViewPlugin.define((()=>{t.addTrackedOrigin(n);return{destroy:()=>{t.removeTrackedOrigin(n)}}})):[]]}var B=n(17426);const F="jp-mod-readOnly";class R{constructor({baseConfiguration:e,config:t,defaultExtensions:n}={}){this._configChanged=new h.Signal(this);this._disposed=new h.Signal(this);this._isDisposed=false;this._immutables=new Set;this._baseConfig=e!==null&&e!==void 0?e:{};this._config=t!==null&&t!==void 0?t:{};this._configurableBuilderMap=new Map(n);const i=Object.keys(this._config).concat(Object.keys(this._baseConfig));this._immutables=new Set([...this._configurableBuilderMap.keys()].filter((e=>!i.includes(e))))}get configChanged(){return this._configChanged}get disposed(){return this._disposed}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this._disposed.emit();h.Signal.clearData(this)}getOption(e){var t;return(t=this._config[e])!==null&&t!==void 0?t:this._baseConfig[e]}hasOption(e){return Object.keys(this._config).includes(e)||Object.keys(this._baseConfig).includes(e)}setOption(e,t){if(this._config[e]!==t){this._config[e]=t;this._configChanged.emit({[e]:t})}}setBaseOptions(e){const t=this._getChangedOptions(e,this._baseConfig);if(t.length>0){this._baseConfig=e;const n=Object.keys(this._config);const i=t.filter((e=>!n.includes(e)));if(i.length>0){this._configChanged.emit(i.reduce(((e,t)=>{e[t]=this._baseConfig[t];return e}),{}))}}}setOptions(e){const t=this._getChangedOptions(e,this._config);if(t.length>0){this._config={...e};this._configChanged.emit(t.reduce(((e,t)=>{var n;e[t]=(n=this._config[t])!==null&&n!==void 0?n:this._baseConfig[t];return e}),{}))}}reconfigureExtension(e,t,n){const i=this.getEffect(e.state,t,n);if(i){e.dispatch({effects:[i]})}}reconfigureExtensions(e,t){const n=Object.keys(t).filter((e=>this.has(e))).map((n=>this.getEffect(e.state,n,t[n])));e.dispatch({effects:n.filter((e=>e!==null))})}injectExtension(e,t){e.dispatch({effects:l.StateEffect.appendConfig.of(t)})}getInitialExtensions(){const e={...this._baseConfig,...this._config};const t=[...this._immutables].map((e=>{var t;return(t=this.get(e))===null||t===void 0?void 0:t.instance(undefined)})).filter((e=>e));for(const n of Object.keys(e)){const i=this.get(n);if(i){const s=e[n];t.push(i.instance(s))}}return t}get(e){return this._configurableBuilderMap.get(e)}has(e){return this._configurableBuilderMap.has(e)}getEffect(e,t,n){var i;const s=this.get(t);return(i=s===null||s===void 0?void 0:s.reconfigure(n))!==null&&i!==void 0?i:null}_getChangedOptions(e,t){const n=new Array;const i=new Array;for(const[s,a]of Object.entries(e)){i.push(s);if(t[s]!==a){n.push(s)}}n.push(...Object.keys(t).filter((e=>!i.includes(e))));return n}}class z{constructor(){this.configurationBuilder=new Map;this.configurationSchema={};this.defaultOptions={};this.handlers=new Set;this.immutableExtensions=new Set;this._baseConfiguration={}}get baseConfiguration(){return{...this.defaultOptions,...this._baseConfiguration}}set baseConfiguration(e){if(!d.JSONExt.deepEqual(e,this._baseConfiguration)){this._baseConfiguration=e;for(const e of this.handlers){e.setBaseOptions(this.baseConfiguration)}}}get defaultConfiguration(){return Object.freeze({...this.defaultOptions})}get settingsSchema(){return Object.freeze(d.JSONExt.deepCopy(this.configurationSchema))}addExtension(e){var t;if(this.configurationBuilder.has(e.name)){throw new Error(`Extension named ${e.name} is already registered.`)}this.configurationBuilder.set(e.name,e);if(typeof e.default!="undefined"){this.defaultOptions[e.name]=e.default}if(e.schema){this.configurationSchema[e.name]={default:(t=e.default)!==null&&t!==void 0?t:null,...e.schema};this.defaultOptions[e.name]=this.configurationSchema[e.name].default}}createNew(e){const t=new Array;for(const[i,s]of this.configurationBuilder.entries()){const n=s.factory(e);if(n){t.push([i,n])}}const n=new R({baseConfiguration:this.baseConfiguration,config:e.config,defaultExtensions:t});this.handlers.add(n);n.disposed.connect((()=>{this.handlers.delete(n)}));return n}}(function(e){class t{constructor(e){this._compartment=new l.Compartment;this._builder=e}instance(e){return this._compartment.of(this._builder(e))}reconfigure(e){return this._compartment.reconfigure(this._builder(e))}}class n{constructor(e){this._extension=e}instance(){return this._extension}reconfigure(){return null}}function s(e){return new t(e)}e.createConfigurableExtension=s;function a(e,n=[]){return new t((t=>t?e:n))}e.createConditionalExtension=a;function d(e){return new n(e)}e.createImmutableExtension=d;function h(e={}){const{themes:t,translator:n}=e;const h=(n!==null&&n!==void 0?n:u.nullTranslator).load("jupyterlab");const p=[Object.freeze({name:"autoClosingBrackets",default:false,factory:()=>a((0,m.vQ)()),schema:{type:"boolean",title:h.__("Auto Closing Brackets")}}),Object.freeze({name:"codeFolding",default:false,factory:()=>a((0,o.foldGutter)()),schema:{type:"boolean",title:h.__("Code Folding")}}),Object.freeze({name:"cursorBlinkRate",default:1200,factory:()=>s((e=>(0,c.drawSelection)({cursorBlinkRate:e}))),schema:{type:"number",title:h.__("Cursor blinking rate"),description:h.__("Half-period in milliseconds used for cursor blinking. The default blink rate is 1200ms. By setting this to zero, blinking can be disabled.")}}),Object.freeze({name:"highlightActiveLine",default:false,factory:()=>a((0,c.highlightActiveLine)()),schema:{type:"boolean",title:h.__("Highlight the active line")}}),Object.freeze({name:"highlightSpecialCharacters",default:true,factory:()=>a((0,c.highlightSpecialChars)()),schema:{type:"boolean",title:h.__("Highlight special characters")}}),Object.freeze({name:"highlightTrailingWhitespace",default:false,factory:()=>a((0,c.highlightTrailingWhitespace)()),schema:{type:"boolean",title:h.__("Highlight trailing white spaces")}}),Object.freeze({name:"highlightWhitespace",default:false,factory:()=>a((0,c.highlightWhitespace)()),schema:{type:"boolean",title:h.__("Highlight white spaces")}}),Object.freeze({name:"indentUnit",default:"4",factory:()=>s((e=>e=="Tab"?o.indentUnit.of("\t"):o.indentUnit.of(" ".repeat(parseInt(e,10))))),schema:{type:"string",title:h.__("Indentation unit"),description:h.__("The indentation is a `Tab` or the number of spaces. This defaults to 4 spaces."),enum:["Tab","1","2","4","8"]}}),Object.freeze({name:"keymap",default:[{key:"Mod-Enter",run:r.preventNewLineOnRun},{key:"Enter",run:r.completerOrInsertNewLine},...i.defaultKeymap,{key:"Tab",run:r.indentMoreOrInsertTab,shift:i.indentLess}],factory:()=>s((e=>c.keymap.of(e)))}),Object.freeze({name:"lineNumbers",default:true,factory:()=>a((0,c.lineNumbers)()),schema:{type:"boolean",title:h.__("Line Numbers")}}),Object.freeze({name:"lineWrap",factory:()=>a(c.EditorView.lineWrapping),default:true,schema:{type:"boolean",title:h.__("Line Wrap")}}),Object.freeze({name:"matchBrackets",default:true,factory:()=>a([(0,o.bracketMatching)(),l.Prec.high(c.keymap.of(m.GA))]),schema:{type:"boolean",title:h.__("Match Brackets")}}),Object.freeze({name:"rectangularSelection",default:true,factory:()=>a([(0,c.rectangularSelection)(),(0,c.crosshairCursor)()]),schema:{type:"boolean",title:h.__("Rectangular selection"),description:h.__("Rectangular (block) selection can be created by dragging the mouse pointer while holding the left mouse button and the Alt key. When the Alt key is pressed, a crosshair cursor will appear, indicating that the rectangular selection mode is active.")}}),Object.freeze({name:"readOnly",default:false,factory:()=>s((e=>[l.EditorState.readOnly.of(e),e?c.EditorView.editorAttributes.of({class:F}):[]]))}),Object.freeze({name:"rulers",default:[],factory:()=>s((e=>e.length>0?L(e):[])),schema:{type:"array",title:h.__("Rulers"),items:{type:"number",minimum:0}}}),Object.freeze({name:"extendSelection",default:true,factory:()=>a(c.keymap.of([{key:"Mod-Shift-l",run:B.selectSelectionMatches,preventDefault:true},{key:"Mod-d",run:B.selectNextOccurrence,preventDefault:true}]))}),Object.freeze({name:"searchWithCM",default:false,factory:()=>a(c.keymap.of([{key:"Mod-f",run:B.openSearchPanel,scope:"editor search-panel"},{key:"F3",run:B.findNext,shift:B.findPrevious,scope:"editor search-panel",preventDefault:true},{key:"Mod-g",run:B.findNext,shift:B.findPrevious,scope:"editor search-panel",preventDefault:true},{key:"Escape",run:B.closeSearchPanel,scope:"editor search-panel"}]))}),Object.freeze({name:"scrollPastEnd",default:false,factory:e=>e.inline?null:a((0,c.scrollPastEnd)())}),Object.freeze({name:"smartIndent",default:true,factory:()=>a((0,o.indentOnInput)()),schema:{type:"boolean",title:h.__("Smart Indentation")}}),Object.freeze({name:"tabFocusable",default:true,factory:()=>a(c.EditorView.contentAttributes.of({tabIndex:"0"}),c.EditorView.contentAttributes.of({tabIndex:"-1"}))}),Object.freeze({name:"tabSize",default:4,factory:()=>s((e=>l.EditorState.tabSize.of(e))),schema:{type:"number",title:h.__("Tab size")}}),Object.freeze({name:"tooltips",factory:()=>d((0,c.tooltips)({position:"absolute",parent:document.body}))}),Object.freeze({name:"allowMultipleSelections",default:true,factory:()=>s((e=>l.EditorState.allowMultipleSelections.of(e))),schema:{type:"boolean",title:h.__("Multiple selections")}}),Object.freeze({name:"customStyles",factory:()=>s((e=>g(e))),default:{fontFamily:null,fontSize:null,lineHeight:null},schema:{title:h.__("Custom editor styles"),type:"object",properties:{fontFamily:{type:["string","null"],title:h.__("Font Family")},fontSize:{type:["number","null"],minimum:1,maximum:100,title:h.__("Font Size")},lineHeight:{type:["number","null"],title:h.__("Line Height")}},additionalProperties:false}})];if(t){p.push(Object.freeze({name:"theme",default:"jupyter",factory:()=>s((e=>t.getTheme(e))),schema:{type:"string",title:h.__("Theme"),description:h.__("CodeMirror theme")}}))}if(n){p.push(Object.freeze({name:"translation",default:{"Control character":h.__("Control character"),"Selection deleted":h.__("Selection deleted"),"Folded lines":h.__("Folded lines"),"Unfolded lines":h.__("Unfolded lines"),to:h.__("to"),"folded code":h.__("folded code"),unfold:h.__("unfold"),"Fold line":h.__("Fold line"),"Unfold line":h.__("Unfold line"),"Go to line":h.__("Go to line"),go:h.__("go"),Find:h.__("Find"),Replace:h.__("Replace"),next:h.__("next"),previous:h.__("previous"),all:h.__("all"),"match case":h.__("match case"),replace:h.__("replace"),"replace all":h.__("replace all"),close:h.__("close"),"current match":h.__("current match"),"replaced $ matches":h.__("replaced $ matches"),"replaced match on line $":h.__("replaced match on line $"),"on line":h.__("on line"),Completions:h.__("Completions"),Diagnostics:h.__("Diagnostics"),"No diagnostics":h.__("No diagnostics")},factory:()=>s((e=>l.EditorState.phrases.of(e)))}))}return p}e.getDefaultExtensions=h})(z||(z={}));var q=n(78098);var V=n(97725);const Q=c.EditorView.theme({"&":{background:"var(--jp-layout-color0)",color:"var(--jp-content-font-color1)"},".jp-CodeConsole &, .jp-Notebook &":{background:"transparent"},".cm-content":{caretColor:"var(--jp-editor-cursor-color)"},".cm-scroller":{fontFamily:"inherit"},".cm-cursor, .cm-dropCursor":{borderLeft:"var(--jp-code-cursor-width0) solid var(--jp-editor-cursor-color)"},".cm-selectionBackground, .cm-content ::selection":{backgroundColor:"var(--jp-editor-selected-background)"},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{backgroundColor:"var(--jp-editor-selected-focused-background)"},".cm-gutters":{borderRight:"1px solid var(--jp-border-color2)",backgroundColor:"var(--jp-layout-color2)"},".cm-gutter":{backgroundColor:"var(--jp-layout-color2)"},".cm-activeLine":{backgroundColor:"color-mix(in srgb, var(--jp-layout-color3) 25%, transparent)"},".cm-lineNumbers":{color:"var(--jp-ui-font-color2)"},".cm-searchMatch":{backgroundColor:"var(--jp-search-unselected-match-background-color)",color:"var(--jp-search-unselected-match-color)"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"var(--jp-search-selected-match-background-color) !important",color:"var(--jp-search-selected-match-color) !important"},".cm-tooltip":{backgroundColor:"var(--jp-layout-color1)"}});const $=o.HighlightStyle.define([{tag:_.tags.meta,color:"var(--jp-mirror-editor-meta-color)"},{tag:_.tags.heading,color:"var(--jp-mirror-editor-header-color)"},{tag:[_.tags.heading1,_.tags.heading2,_.tags.heading3,_.tags.heading4],color:"var(--jp-mirror-editor-header-color)",fontWeight:"bold"},{tag:_.tags.keyword,color:"var(--jp-mirror-editor-keyword-color)",fontWeight:"bold"},{tag:_.tags.atom,color:"var(--jp-mirror-editor-atom-color)"},{tag:_.tags.number,color:"var(--jp-mirror-editor-number-color)"},{tag:[_.tags.definition(_.tags.name),_.tags["function"](_.tags.definition(_.tags.variableName))],color:"var(--jp-mirror-editor-def-color)"},{tag:_.tags.standard(_.tags.variableName),color:"var(--jp-mirror-editor-builtin-color)"},{tag:[_.tags.special(_.tags.variableName),_.tags.self],color:"var(--jp-mirror-editor-variable-2-color)"},{tag:_.tags.punctuation,color:"var(--jp-mirror-editor-punctuation-color)"},{tag:_.tags.propertyName,color:"var(--jp-mirror-editor-property-color)"},{tag:_.tags.operator,color:"var(--jp-mirror-editor-operator-color)",fontWeight:"bold"},{tag:_.tags.comment,color:"var(--jp-mirror-editor-comment-color)",fontStyle:"italic"},{tag:_.tags.string,color:"var(--jp-mirror-editor-string-color)"},{tag:[_.tags.labelName,_.tags.monospace,_.tags.special(_.tags.string)],color:"var(--jp-mirror-editor-string-2-color)"},{tag:_.tags.bracket,color:"var(--jp-mirror-editor-bracket-color)"},{tag:_.tags.tagName,color:"var(--jp-mirror-editor-tag-color)"},{tag:_.tags.attributeName,color:"var(--jp-mirror-editor-attribute-color)"},{tag:_.tags.quote,color:"var(--jp-mirror-editor-quote-color)"},{tag:_.tags.link,color:"var(--jp-mirror-editor-link-color)",textDecoration:"underline"},{tag:[_.tags.separator,_.tags.derefOperator,_.tags.paren],color:""},{tag:_.tags.strong,fontWeight:"bold"},{tag:_.tags.emphasis,fontStyle:"italic"},{tag:_.tags.strikethrough,textDecoration:"line-through"},{tag:_.tags.bool,color:"var(--jp-mirror-editor-keyword-color)",fontWeight:"bold"}]);const W=[Q,(0,o.syntaxHighlighting)($)];class J{constructor(){this._themeMap=new Map([["jupyter",Object.freeze({name:"jupyter",theme:W})]])}get themes(){return Array.from(this._themeMap.values())}defaultTheme(){return this._themeMap.get("jupyter").theme}addTheme(e){if(this._themeMap.has(e.name)){throw new Error(`A theme named '${e.name}' is already registered.`)}this._themeMap.set(e.name,{displayName:e.name,...e})}getTheme(e){var t;const n=(t=this._themeMap.get(e))===null||t===void 0?void 0:t.theme;return n!==null&&n!==void 0?n:this.defaultTheme()}}(function(e){function t(e){const t=(e!==null&&e!==void 0?e:u.nullTranslator).load("jupyterlab");return[Object.freeze({name:"codemirror",displayName:t.__("codemirror"),theme:[c.EditorView.baseTheme({}),(0,o.syntaxHighlighting)(o.defaultHighlightStyle)]})]}e.getDefaultThemes=t})(J||(J={}));class G{constructor(){this._modeList=[];this.addLanguage({name:"none",mime:"text/plain",support:new o.LanguageSupport(o.LRLanguage.define({parser:(0,V.pV)("@top Program { }")}))})}addLanguage(e){var t;const n=(t=this.findByName(e.name))!==null&&t!==void 0?t:this.findByMIME(e.mime,true);if(n){throw new Error(`${e.mime} already registered`)}this._modeList.push(this.makeSpec(e))}async getLanguage(e){const t=this.findBest(e);if(t&&!t.support){t.support=await t.load()}return t}getLanguages(){return[...this._modeList]}findByMIME(e,t=false){if(Array.isArray(e)){for(let t=0;t<e.length;t++){const n=this.findByMIME(e[t]);if(n)return n}return null}e=e.toLowerCase();for(let n=0;n<this._modeList.length;n++){let t=this._modeList[n];if(Array.isArray(t.mime)){for(let n=0;n<t.mime.length;n++){if(t.mime[n]==e){return t}}}else if(t.mime==e){return t}}if(!t){if(/\+xml$/.test(e))return this.findByMIME("application/xml");if(/\+json$/.test(e))return this.findByMIME("application/json")}return null}findByName(e){e=e.toLowerCase();for(let t=0;t<this._modeList.length;t++){let n=this._modeList[t];if(n.name.toLowerCase()==e)return n;if(n.alias){for(let t=0;t<n.alias.length;t++){if(n.alias[t].toLowerCase()==e){return n}}}}return null}findByExtension(e){if(Array.isArray(e)){for(let t=0;t<e.length;t++){const n=this.findByExtension(e[t]);if(n)return n}return null}e=e.toLowerCase();for(let t=0;t<this._modeList.length;t++){let n=this._modeList[t];for(let t=0;t<n.extensions.length;t++){if(n.extensions[t].toLowerCase()==e){return n}}}return null}findByFileName(e){const t=q.PathExt.basename(e);for(let s=0;s<this._modeList.length;s++){let e=this._modeList[s];if(e.filename&&e.filename.test(t)){return e}}let n=t.lastIndexOf(".");let i=n>-1&&t.substring(n+1,t.length);if(i){return this.findByExtension(i)}return null}findBest(e,t=true){var n,i,a,r;const o=typeof e==="string"?e:e.name;const l=typeof e!=="string"?e.mime:o;const c=typeof e!=="string"?(n=e.extensions)!==null&&n!==void 0?n:[]:[];return(r=(a=(i=o?this.findByName(o):null)!==null&&i!==void 0?i:l?this.findByMIME(l):null)!==null&&a!==void 0?a:this.findByExtension(c))!==null&&r!==void 0?r:t?this.findByMIME(s.IEditorMimeTypeService.defaultMimeType):null}async highlight(e,t,n){var i;if(t){await this.getLanguage(t)}const s=(i=t===null||t===void 0?void 0:t.support)===null||i===void 0?void 0:i.language;if(!s){n.appendChild(document.createTextNode(e));return}const a=s.parser.parse(e);let r=0;(0,_.highlightTree)(a,$,((t,i,s)=>{if(t>r){n.appendChild(document.createTextNode(e.slice(r,t)))}const a=n.appendChild(document.createElement("span"));a.className=s;a.appendChild(document.createTextNode(e.slice(t,i)));r=i}));if(r<a.length-1){n.appendChild(document.createTextNode(e.slice(r,a.length)))}}makeSpec(e){let t=o.LanguageDescription.of(e);t.mime=e.mime;t.displayName=e.displayName;return t}}(function(e){function t(e){return new o.LanguageSupport(o.StreamLanguage.define(e))}e.legacy=t;async function i(e){const t=await n.e(8423).then(n.bind(n,48423));return t.sql({dialect:t[e]})}function s(e){const s=(e!==null&&e!==void 0?e:u.nullTranslator).load("jupyterlab");return[{name:"C",displayName:s.__("C"),mime:"text/x-csrc",extensions:["c","h","ino"],async load(){const e=await n.e(5340).then(n.bind(n,35340));return e.cpp()}},{name:"C++",displayName:s.__("C++"),mime:"text/x-c++src",extensions:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],async load(){const e=await n.e(5340).then(n.bind(n,35340));return e.cpp()}},{name:"CQL",displayName:s.__("CQL"),mime:"text/x-cassandra",extensions:["cql"],load(){return i("Cassandra")}},{name:"CSS",displayName:s.__("CSS"),mime:"text/css",extensions:["css"],async load(){const e=await n.e(7664).then(n.bind(n,37664));return e.css()}},{name:"HTML",displayName:s.__("HTML"),alias:["xhtml"],mime:"text/html",extensions:["html","htm","handlebars","hbs"],async load(){const e=await Promise.all([n.e(2318),n.e(7664),n.e(6510)]).then(n.bind(n,6510));return e.html()}},{name:"Java",displayName:s.__("Java"),mime:"text/x-java",extensions:["java"],async load(){const e=await n.e(7529).then(n.bind(n,87529));return e.java()}},{name:"Javascript",displayName:s.__("Javascript"),alias:["ecmascript","js","node"],mime:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],extensions:["js","mjs","cjs"],async load(){const e=await n.e(2318).then(n.bind(n,72318));return e.javascript()}},{name:"JSON",displayName:s.__("JSON"),alias:["json5"],mime:["application/json","application/x-json"],extensions:["json","map"],async load(){const e=await n.e(2628).then(n.bind(n,32628));return e.json()}},{name:"JSX",displayName:s.__("JSX"),mime:"text/jsx",extensions:["jsx"],async load(){const e=await n.e(2318).then(n.bind(n,72318));return e.javascript({jsx:true})}},{name:"MariaDB SQL",displayName:s.__("MariaDB SQL"),mime:"text/x-mariadb",load(){return i("MariaSQL")}},{name:"Markdown",displayName:s.__("Markdown"),mime:"text/x-markdown",extensions:["md","markdown","mkd"],async load(){const e=await n.e(230).then(n.t.bind(n,40230,23));return e.markdown({codeLanguages:this._modeList})}},{name:"MS SQL",displayName:s.__("MS SQL"),mime:"text/x-mssql",load(){return i("MSSQL")}},{name:"MySQL",displayName:s.__("MySQL"),mime:"text/x-mysql",load(){return i("MySQL")}},{name:"PHP",displayName:s.__("PHP"),mime:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],extensions:["php","php3","php4","php5","php7","phtml"],async load(){const e=await Promise.all([n.e(2318),n.e(7664),n.e(6510),n.e(5148)]).then(n.bind(n,5148));return e.php()}},{name:"PLSQL",displayName:s.__("PLSQL"),mime:"text/x-plsql",extensions:["pls"],load(){return i("PLSQL")}},{name:"PostgreSQL",displayName:s.__("PostgreSQL"),mime:"text/x-pgsql",load(){return i("PostgreSQL")}},{name:"Python",displayName:s.__("Python"),mime:"text/x-python",extensions:["BUILD","bzl","py","pyw"],filename:/^(BUCK|BUILD)$/,async load(){const e=await n.e(8138).then(n.bind(n,88138));return e.python()}},{name:"ipython",displayName:s.__("ipython"),mime:"text/x-ipython",async load(){const e=await n.e(8138).then(n.bind(n,88138));return e.python()}},{name:"Rust",displayName:s.__("Rust"),mime:"text/x-rustsrc",extensions:["rs"],async load(){const e=await n.e(5708).then(n.bind(n,55708));return e.rust()}},{name:"SQL",displayName:s.__("SQL"),mime:["application/sql","text/x-sql"],extensions:["sql"],load(){return i("StandardSQL")}},{name:"SQLite",displayName:s.__("SQLite"),mime:"text/x-sqlite",load(){return i("SQLite")}},{name:"TSX",displayName:s.__("TSX"),alias:["TypeScript-JSX"],mime:"text/typescript-jsx",extensions:["tsx"],async load(){const e=await n.e(2318).then(n.bind(n,72318));return e.javascript({jsx:true,typescript:true})}},{name:"TypeScript",displayName:s.__("TypeScript"),alias:["ts"],mime:"application/typescript",extensions:["ts"],async load(){const e=await n.e(2318).then(n.bind(n,72318));return e.javascript({typescript:true})}},{name:"WebAssembly",displayName:s.__("WebAssembly"),mime:"text/webassembly",extensions:["wat","wast"],async load(){const e=await n.e(8782).then(n.bind(n,78782));return e.wast()}},{name:"XML",displayName:s.__("XML"),alias:["rss","wsdl","xsd"],mime:["application/xml","text/xml"],extensions:["xml","xsl","xsd","svg"],async load(){const e=await n.e(1746).then(n.bind(n,61746));return e.xml()}},{name:"APL",displayName:s.__("APL"),mime:"text/apl",extensions:["dyalog","apl"],async load(){const e=await n.e(1377).then(n.bind(n,31377));return t(e.apl)}},{name:"PGP",displayName:s.__("PGP"),alias:["asciiarmor"],mime:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],extensions:["asc","pgp","sig"],async load(){const e=await n.e(7111).then(n.bind(n,37111));return t(e.asciiArmor)}},{name:"ASN.1",displayName:s.__("ASN.1"),mime:"text/x-ttcn-asn",extensions:["asn","asn1"],async load(){const e=await n.e(1580).then(n.bind(n,61580));return t(e.asn1({}))}},{name:"Asterisk",displayName:s.__("Asterisk"),mime:"text/x-asterisk",filename:/^extensions\.conf$/i,async load(){const e=await n.e(8877).then(n.bind(n,48877));return t(e.asterisk)}},{name:"Brainfuck",displayName:s.__("Brainfuck"),mime:"text/x-brainfuck",extensions:["b","bf"],async load(){const e=await n.e(5024).then(n.bind(n,75024));return t(e.brainfuck)}},{name:"Cobol",displayName:s.__("Cobol"),mime:"text/x-cobol",extensions:["cob","cpy"],async load(){const e=await n.e(7236).then(n.bind(n,87236));return t(e.cobol)}},{name:"C#",displayName:s.__("C#"),alias:["csharp","cs"],mime:"text/x-csharp",extensions:["cs"],async load(){const e=await n.e(4982).then(n.bind(n,94982));return t(e.csharp)}},{name:"Clojure",displayName:s.__("Clojure"),mime:"text/x-clojure",extensions:["clj","cljc","cljx"],async load(){const e=await n.e(4283).then(n.bind(n,94283));return t(e.clojure)}},{name:"ClojureScript",displayName:s.__("ClojureScript"),mime:"text/x-clojurescript",extensions:["cljs"],async load(){const e=await n.e(4283).then(n.bind(n,94283));return t(e.clojure)}},{name:"Closure Stylesheets (GSS)",displayName:s.__("Closure Stylesheets (GSS)"),mime:"text/x-gss",extensions:["gss"],async load(){const e=await n.e(7233).then(n.bind(n,97233));return t(e.gss)}},{name:"CMake",displayName:s.__("CMake"),mime:"text/x-cmake",extensions:["cmake","cmake.in"],filename:/^CMakeLists\.txt$/,async load(){const e=await n.e(4878).then(n.bind(n,4878));return t(e.cmake)}},{name:"CoffeeScript",displayName:s.__("CoffeeScript"),alias:["coffee","coffee-script"],mime:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],extensions:["coffee"],async load(){const e=await n.e(9036).then(n.bind(n,9036));return t(e.coffeeScript)}},{name:"Common Lisp",displayName:s.__("Common Lisp"),alias:["lisp"],mime:"text/x-common-lisp",extensions:["cl","lisp","el"],async load(){const e=await n.e(5521).then(n.bind(n,79172));return t(e.commonLisp)}},{name:"Cypher",displayName:s.__("Cypher"),mime:"application/x-cypher-query",extensions:["cyp","cypher"],async load(){const e=await n.e(9397).then(n.bind(n,9397));return t(e.cypher)}},{name:"Cython",displayName:s.__("Cython"),mime:"text/x-cython",extensions:["pyx","pxd","pxi"],async load(){const e=await n.e(4282).then(n.bind(n,74282));return t(e.cython)}},{name:"Crystal",displayName:s.__("Crystal"),mime:"text/x-crystal",extensions:["cr"],async load(){const e=await n.e(8803).then(n.bind(n,48803));return t(e.crystal)}},{name:"D",displayName:s.__("D"),mime:"text/x-d",extensions:["d"],async load(){const e=await n.e(504).then(n.bind(n,10504));return t(e.d)}},{name:"Dart",displayName:s.__("Dart"),mime:["application/dart","text/x-dart"],extensions:["dart"],async load(){const e=await n.e(4982).then(n.bind(n,94982));return t(e.dart)}},{name:"diff",displayName:s.__("diff"),mime:"text/x-diff",extensions:["diff","patch"],async load(){const e=await n.e(2563).then(n.bind(n,82563));return t(e.diff)}},{name:"Dockerfile",displayName:s.__("Dockerfile"),mime:"text/x-dockerfile",filename:/^Dockerfile$/,async load(){const e=await n.e(6835).then(n.bind(n,6835));return t(e.dockerFile)}},{name:"DTD",displayName:s.__("DTD"),mime:"application/xml-dtd",extensions:["dtd"],async load(){const e=await n.e(151).then(n.bind(n,60151));return t(e.dtd)}},{name:"Dylan",displayName:s.__("Dylan"),mime:"text/x-dylan",extensions:["dylan","dyl","intr"],async load(){const e=await n.e(7377).then(n.bind(n,57377));return t(e.dylan)}},{name:"EBNF",displayName:s.__("EBNF"),mime:"text/x-ebnf",async load(){const e=await n.e(5681).then(n.bind(n,65681));return t(e.ebnf)}},{name:"ECL",displayName:s.__("ECL"),mime:"text/x-ecl",extensions:["ecl"],async load(){const e=await n.e(5876).then(n.bind(n,85876));return t(e.ecl)}},{name:"edn",displayName:s.__("edn"),mime:"application/edn",extensions:["edn"],async load(){const e=await n.e(4283).then(n.bind(n,94283));return t(e.clojure)}},{name:"Eiffel",displayName:s.__("Eiffel"),mime:"text/x-eiffel",extensions:["e"],async load(){const e=await n.e(4403).then(n.bind(n,4403));return t(e.eiffel)}},{name:"Elm",displayName:s.__("Elm"),mime:"text/x-elm",extensions:["elm"],async load(){const e=await n.e(5494).then(n.bind(n,45494));return t(e.elm)}},{name:"Erlang",displayName:s.__("Erlang"),mime:"text/x-erlang",extensions:["erl"],async load(){const e=await n.e(2033).then(n.bind(n,72033));return t(e.erlang)}},{name:"Esper",displayName:s.__("Esper"),mime:"text/x-esper",async load(){const e=await n.e(6645).then(n.bind(n,16645));return t(e.esper)}},{name:"Factor",displayName:s.__("Factor"),mime:"text/x-factor",extensions:["factor"],async load(){const e=await n.e(360).then(n.bind(n,62502));return t(e.factor)}},{name:"FCL",displayName:s.__("FCL"),mime:"text/x-fcl",async load(){const e=await n.e(2100).then(n.bind(n,42100));return t(e.fcl)}},{name:"Forth",displayName:s.__("Forth"),mime:"text/x-forth",extensions:["forth","fth","4th"],async load(){const e=await n.e(7600).then(n.bind(n,47600));return t(e.forth)}},{name:"Fortran",displayName:s.__("Fortran"),mime:"text/x-fortran",extensions:["f","for","f77","f90","f95"],async load(){const e=await n.e(1222).then(n.bind(n,31222));return t(e.fortran)}},{name:"F#",displayName:s.__("F#"),alias:["fsharp"],mime:"text/x-fsharp",extensions:["fs"],async load(){const e=await n.e(5764).then(n.bind(n,95764));return t(e.fSharp)}},{name:"Gas",displayName:s.__("Gas"),mime:"text/x-gas",extensions:["s"],async load(){const e=await n.e(6151).then(n.bind(n,16151));return t(e.gas)}},{name:"Gherkin",displayName:s.__("Gherkin"),mime:"text/x-feature",extensions:["feature"],async load(){const e=await n.e(6196).then(n.bind(n,26196));return t(e.gherkin)}},{name:"Go",displayName:s.__("Go"),mime:"text/x-go",extensions:["go"],async load(){const e=await n.e(6186).then(n.bind(n,66186));return t(e.go)}},{name:"Groovy",displayName:s.__("Groovy"),mime:"text/x-groovy",extensions:["groovy","gradle"],filename:/^Jenkinsfile$/,async load(){const e=await n.e(1567).then(n.bind(n,71567));return t(e.groovy)}},{name:"Haskell",displayName:s.__("Haskell"),mime:"text/x-haskell",extensions:["hs"],async load(){const e=await n.e(4351).then(n.bind(n,64351));return t(e.haskell)}},{name:"Haxe",displayName:s.__("Haxe"),mime:"text/x-haxe",extensions:["hx"],async load(){const e=await n.e(6970).then(n.bind(n,26970));return t(e.haxe)}},{name:"HXML",displayName:s.__("HXML"),mime:"text/x-hxml",extensions:["hxml"],async load(){const e=await n.e(6970).then(n.bind(n,26970));return t(e.hxml)}},{name:"HTTP",displayName:s.__("HTTP"),mime:"message/http",async load(){const e=await n.e(2042).then(n.bind(n,82042));return t(e.http)}},{name:"IDL",displayName:s.__("IDL"),mime:"text/x-idl",extensions:["pro"],async load(){const e=await n.e(2185).then(n.bind(n,2185));return t(e.idl)}},{name:"JSON-LD",displayName:s.__("JSON-LD"),alias:["jsonld"],mime:"application/ld+json",extensions:["jsonld"],async load(){const e=await n.e(3211).then(n.bind(n,83211));return t(e.jsonld)}},{name:"Jinja2",displayName:s.__("Jinja2"),mime:"text/jinja2",extensions:["j2","jinja","jinja2"],async load(){const e=await n.e(386).then(n.bind(n,40386));return t(e.jinja2)}},{name:"Julia",displayName:s.__("Julia"),mime:"text/x-julia",extensions:["jl"],async load(){const e=await n.e(9473).then(n.bind(n,59473));return t(e.julia)}},{name:"Kotlin",displayName:s.__("Kotlin"),mime:"text/x-kotlin",extensions:["kt"],async load(){const e=await n.e(4982).then(n.bind(n,94982));return t(e.kotlin)}},{name:"LESS",displayName:s.__("LESS"),mime:"text/x-less",extensions:["less"],async load(){const e=await n.e(7233).then(n.bind(n,97233));return t(e.less)}},{name:"LiveScript",displayName:s.__("LiveScript"),alias:["ls"],mime:"text/x-livescript",extensions:["ls"],async load(){const e=await n.e(9672).then(n.bind(n,59672));return t(e.liveScript)}},{name:"Lua",displayName:s.__("Lua"),mime:"text/x-lua",extensions:["lua"],async load(){const e=await n.e(3466).then(n.bind(n,43466));return t(e.lua)}},{name:"mIRC",displayName:s.__("mIRC"),mime:"text/mirc",async load(){const e=await n.e(4476).then(n.bind(n,14476));return t(e.mirc)}},{name:"Mathematica",displayName:s.__("Mathematica"),mime:"text/x-mathematica",extensions:["m","nb","wl","wls"],async load(){const e=await n.e(4654).then(n.bind(n,64654));return t(e.mathematica)}},{name:"Modelica",displayName:s.__("Modelica"),mime:"text/x-modelica",extensions:["mo"],async load(){const e=await n.e(9636).then(n.bind(n,19636));return t(e.modelica)}},{name:"MUMPS",displayName:s.__("MUMPS"),mime:"text/x-mumps",extensions:["mps"],async load(){const e=await n.e(9715).then(n.bind(n,59715));return t(e.mumps)}},{name:"mbox",displayName:s.__("mbox"),mime:"application/mbox",extensions:["mbox"],async load(){const e=await n.e(8658).then(n.bind(n,88658));return t(e.mbox)}},{name:"Nginx",displayName:s.__("Nginx"),mime:"text/x-nginx-conf",filename:/nginx.*\.conf$/i,async load(){const e=await n.e(7882).then(n.bind(n,97882));return t(e.nginx)}},{name:"NSIS",displayName:s.__("NSIS"),mime:"text/x-nsis",extensions:["nsh","nsi"],async load(){const e=await n.e(9866).then(n.bind(n,9866));return t(e.nsis)}},{name:"NTriples",displayName:s.__("NTriples"),mime:["application/n-triples","application/n-quads","text/n-triples"],extensions:["nt","nq"],async load(){const e=await n.e(3206).then(n.bind(n,23206));return t(e.ntriples)}},{name:"Objective-C",displayName:s.__("Objective-C"),alias:["objective-c","objc"],mime:"text/x-objectivec",extensions:["m"],async load(){const e=await n.e(4982).then(n.bind(n,94982));return t(e.objectiveC)}},{name:"Objective-C++",displayName:s.__("Objective-C++"),alias:["objective-c++","objc++"],mime:"text/x-objectivec++",extensions:["mm"],async load(){const e=await n.e(4982).then(n.bind(n,94982));return t(e.objectiveCpp)}},{name:"OCaml",displayName:s.__("OCaml"),mime:"text/x-ocaml",extensions:["ml","mli","mll","mly"],async load(){const e=await n.e(5764).then(n.bind(n,95764));return t(e.oCaml)}},{name:"Octave",displayName:s.__("Octave"),mime:"text/x-octave",extensions:["m"],async load(){const e=await n.e(4073).then(n.bind(n,94073));return t(e.octave)}},{name:"Oz",displayName:s.__("Oz"),mime:"text/x-oz",extensions:["oz"],async load(){const e=await n.e(1403).then(n.bind(n,81403));return t(e.oz)}},{name:"Pascal",displayName:s.__("Pascal"),mime:"text/x-pascal",extensions:["p","pas"],async load(){const e=await n.e(5176).then(n.bind(n,55176));return t(e.pascal)}},{name:"Perl",displayName:s.__("Perl"),mime:"text/x-perl",extensions:["pl","pm"],async load(){const e=await n.e(3192).then(n.bind(n,73192));return t(e.perl)}},{name:"Pig",displayName:s.__("Pig"),mime:"text/x-pig",extensions:["pig"],async load(){const e=await n.e(7058).then(n.bind(n,27058));return t(e.pig)}},{name:"PowerShell",displayName:s.__("PowerShell"),mime:"application/x-powershell",extensions:["ps1","psd1","psm1"],async load(){const e=await n.e(7149).then(n.bind(n,97149));return t(e.powerShell)}},{name:"Properties files",displayName:s.__("Properties files"),alias:["ini","properties"],mime:"text/x-properties",extensions:["properties","ini","in"],async load(){const e=await n.e(231).then(n.bind(n,50231));return t(e.properties)}},{name:"ProtoBuf",displayName:s.__("ProtoBuf"),mime:"text/x-protobuf",extensions:["proto"],async load(){const e=await n.e(1278).then(n.bind(n,1278));return t(e.protobuf)}},{name:"Puppet",displayName:s.__("Puppet"),mime:"text/x-puppet",extensions:["pp"],async load(){const e=await n.e(5263).then(n.bind(n,5263));return t(e.puppet)}},{name:"Q",displayName:s.__("Q"),mime:"text/x-q",extensions:["q"],async load(){const e=await n.e(1286).then(n.bind(n,51286));return t(e.q)}},{name:"R",displayName:s.__("R"),alias:["rscript"],mime:"text/x-rsrc",extensions:["r","R"],async load(){const e=await n.e(4391).then(n.bind(n,4391));return t(e.r)}},{name:"RPM Changes",displayName:s.__("RPM Changes"),mime:"text/x-rpm-changes",async load(){const e=await n.e(1227).then(n.bind(n,91227));return t(e.rpmChanges)}},{name:"RPM Spec",displayName:s.__("RPM Spec"),mime:"text/x-rpm-spec",extensions:["spec"],async load(){const e=await n.e(1227).then(n.bind(n,91227));return t(e.rpmSpec)}},{name:"Ruby",displayName:s.__("Ruby"),alias:["jruby","macruby","rake","rb","rbx"],mime:"text/x-ruby",extensions:["rb"],async load(){const e=await n.e(4040).then(n.bind(n,54040));return t(e.ruby)}},{name:"SAS",displayName:s.__("SAS"),mime:"text/x-sas",extensions:["sas"],async load(){const e=await n.e(2488).then(n.bind(n,2488));return t(e.sas)}},{name:"Scala",displayName:s.__("Scala"),mime:"text/x-scala",extensions:["scala"],async load(){const e=await n.e(4982).then(n.bind(n,94982));return t(e.scala)}},{name:"Scheme",displayName:s.__("Scheme"),mime:"text/x-scheme",extensions:["scm","ss"],async load(){const e=await n.e(765).then(n.bind(n,10765));return t(e.scheme)}},{name:"SCSS",displayName:s.__("SCSS"),mime:"text/x-scss",extensions:["scss"],async load(){const e=await n.e(7233).then(n.bind(n,97233));return t(e.sCSS)}},{name:"Shell",displayName:s.__("Shell"),alias:["bash","sh","zsh"],mime:["text/x-sh","application/x-sh"],extensions:["sh","ksh","bash"],filename:/^PKGBUILD$/,async load(){const e=await n.e(9472).then(n.bind(n,49472));return t(e.shell)}},{name:"Sieve",displayName:s.__("Sieve"),mime:"application/sieve",extensions:["siv","sieve"],async load(){const e=await n.e(2284).then(n.bind(n,22284));return t(e.sieve)}},{name:"Smalltalk",displayName:s.__("Smalltalk"),mime:"text/x-stsrc",extensions:["st"],async load(){const e=await n.e(7498).then(n.bind(n,57498));return t(e.smalltalk)}},{name:"Solr",displayName:s.__("Solr"),mime:"text/x-solr",async load(){const e=await n.e(3191).then(n.bind(n,43191));return t(e.solr)}},{name:"SML",displayName:s.__("SML"),mime:"text/x-sml",extensions:["sml","sig","fun","smackspec"],async load(){const e=await n.e(5764).then(n.bind(n,95764));return t(e.sml)}},{name:"SPARQL",displayName:s.__("SPARQL"),alias:["sparul"],mime:"application/sparql-query",extensions:["rq","sparql"],async load(){const e=await n.e(8953).then(n.bind(n,18953));return t(e.sparql)}},{name:"Spreadsheet",displayName:s.__("Spreadsheet"),alias:["excel","formula"],mime:"text/x-spreadsheet",async load(){const e=await n.e(5223).then(n.bind(n,25223));return t(e.spreadsheet)}},{name:"Squirrel",displayName:s.__("Squirrel"),mime:"text/x-squirrel",extensions:["nut"],async load(){const e=await n.e(4982).then(n.bind(n,94982));return t(e.squirrel)}},{name:"Stylus",displayName:s.__("Stylus"),mime:"text/x-styl",extensions:["styl"],async load(){const e=await n.e(274).then(n.bind(n,40274));return t(e.stylus)}},{name:"Swift",displayName:s.__("Swift"),mime:"text/x-swift",extensions:["swift"],async load(){const e=await n.e(4024).then(n.bind(n,4024));return t(e.swift)}},{name:"sTeX",displayName:s.__("sTeX"),mime:"text/x-stex",async load(){const e=await n.e(5513).then(n.bind(n,55513));return t(e.stex)}},{name:"LaTeX",displayName:s.__("LaTeX"),alias:["tex"],mime:"text/x-latex",extensions:["text","ltx","tex"],async load(){const e=await n.e(5513).then(n.bind(n,55513));return t(e.stex)}},{name:"SystemVerilog",displayName:s.__("SystemVerilog"),mime:"text/x-systemverilog",extensions:["v","sv","svh"],async load(){const e=await n.e(819).then(n.bind(n,20819));return t(e.verilog)}},{name:"Tcl",displayName:s.__("Tcl"),mime:"text/x-tcl",extensions:["tcl"],async load(){const e=await n.e(1623).then(n.bind(n,41623));return t(e.tcl)}},{name:"Textile",displayName:s.__("Textile"),mime:"text/x-textile",extensions:["textile"],async load(){const e=await n.e(9304).then(n.bind(n,49304));return t(e.textile)}},{name:"TiddlyWiki",displayName:s.__("TiddlyWiki"),mime:"text/x-tiddlywiki",async load(){const e=await n.e(6146).then(n.bind(n,96146));return t(e.tiddlyWiki)}},{name:"Tiki wiki",displayName:s.__("Tiki wiki"),mime:"text/tiki",async load(){const e=await n.e(9932).then(n.bind(n,39932));return t(e.tiki)}},{name:"TOML",displayName:s.__("TOML"),mime:"text/x-toml",extensions:["toml"],async load(){const e=await n.e(5556).then(n.bind(n,75556));return t(e.toml)}},{name:"troff",displayName:s.__("troff"),mime:"text/troff",extensions:["1","2","3","4","5","6","7","8","9"],async load(){const e=await n.e(9308).then(n.bind(n,39308));return t(e.troff)}},{name:"TTCN",displayName:s.__("TTCN"),mime:"text/x-ttcn",extensions:["ttcn","ttcn3","ttcnpp"],async load(){const e=await n.e(7710).then(n.bind(n,7710));return t(e.ttcn)}},{name:"TTCN_CFG",displayName:s.__("TTCN_CFG"),mime:"text/x-ttcn-cfg",extensions:["cfg"],async load(){const e=await n.e(9827).then(n.bind(n,9827));return t(e.ttcnCfg)}},{name:"Turtle",displayName:s.__("Turtle"),mime:"text/turtle",extensions:["ttl"],async load(){const e=await n.e(5393).then(n.bind(n,15393));return t(e.turtle)}},{name:"Web IDL",displayName:s.__("Web IDL"),mime:"text/x-webidl",extensions:["webidl"],async load(){const e=await n.e(7402).then(n.bind(n,89583));return t(e.webIDL)}},{name:"VB.NET",displayName:s.__("VB.NET"),mime:"text/x-vb",extensions:["vb"],async load(){const e=await n.e(3500).then(n.bind(n,43500));return t(e.vb)}},{name:"VBScript",displayName:s.__("VBScript"),mime:"text/vbscript",extensions:["vbs"],async load(){const e=await n.e(3159).then(n.bind(n,43159));return t(e.vbScript)}},{name:"Velocity",displayName:s.__("Velocity"),mime:"text/velocity",extensions:["vtl"],async load(){const e=await n.e(9319).then(n.bind(n,39319));return t(e.velocity)}},{name:"Verilog",displayName:s.__("Verilog"),mime:"text/x-verilog",extensions:["v"],async load(){const e=await n.e(819).then(n.bind(n,20819));return t(e.verilog)}},{name:"VHDL",displayName:s.__("VHDL"),mime:"text/x-vhdl",extensions:["vhd","vhdl"],async load(){const e=await n.e(7294).then(n.bind(n,7294));return t(e.vhdl)}},{name:"XQuery",displayName:s.__("XQuery"),mime:"application/xquery",extensions:["xy","xquery"],async load(){const e=await n.e(13).then(n.bind(n,70013));return t(e.xQuery)}},{name:"Yacas",displayName:s.__("Yacas"),mime:"text/x-yacas",extensions:["ys"],async load(){const e=await n.e(6410).then(n.bind(n,26410));return t(e.yacas)}},{name:"YAML",displayName:s.__("YAML"),alias:["yml"],mime:["text/x-yaml","text/yaml"],extensions:["yaml","yml"],async load(){const e=await n.e(9411).then(n.bind(n,19411));return t(e.yaml)}},{name:"Z80",displayName:s.__("Z80"),mime:"text/x-z80",extensions:["z80"],async load(){const e=await n.e(9777).then(n.bind(n,14702));return t(e.z80)}},{name:"mscgen",displayName:s.__("mscgen"),mime:"text/x-mscgen",extensions:["mscgen","mscin","msc"],async load(){const e=await n.e(5225).then(n.bind(n,5225));return t(e.mscgen)}},{name:"xu",displayName:s.__("xu"),mime:"text/x-xu",extensions:["xu"],async load(){const e=await n.e(5225).then(n.bind(n,5225));return t(e.xu)}},{name:"msgenny",displayName:s.__("msgenny"),mime:"text/x-msgenny",extensions:["msgenny"],async load(){const e=await n.e(5225).then(n.bind(n,5225));return t(e.msgenny)}}]}e.getDefaultLanguages=s})(G||(G={}));const U="jp-CodeMirrorEditor";const X=38;const Y=40;class K{constructor(e){var t,n,i,s,a,r;this.edgeRequested=new h.Signal(this);this._isDisposed=false;this._language=new l.Compartment;this._uuid="";this._languages=(t=e.languages)!==null&&t!==void 0?t:new G;this._configurator=(s=(n=e.extensionsRegistry)===null||n===void 0?void 0:n.createNew({...e,inline:(i=e.inline)!==null&&i!==void 0?i:false}))!==null&&s!==void 0?s:new R;const o=this.host=e.host;o.classList.add(U);o.classList.add("jp-Editor");o.addEventListener("focus",this,true);o.addEventListener("blur",this,true);o.addEventListener("scroll",this,true);this._uuid=(a=e.uuid)!==null&&a!==void 0?a:d.UUID.uuid4();const m=this._model=e.model;const u=c.EditorView.domEventHandlers({keydown:(e,t)=>this.onKeydown(e)});const p=c.EditorView.updateListener.of((e=>{this._onDocChanged(e)}));this._editor=Z.createEditor(o,this._configurator,[l.Prec.high(u),p,this._language.of([]),...(r=e.extensions)!==null&&r!==void 0?r:[]],m.sharedModel.source);this._onMimeTypeChanged();this._onCursorActivity();this._configurator.configChanged.connect(this.onConfigChanged,this);m.mimeTypeChanged.connect(this._onMimeTypeChanged,this)}get uuid(){return this._uuid}set uuid(e){this._uuid=e}get editor(){return this._editor}get doc(){return this._editor.state.doc}get lineCount(){return this.doc.lines}get model(){return this._model}get lineHeight(){return this._editor.defaultLineHeight}get charWidth(){return this._editor.defaultCharacterWidth}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this.host.removeEventListener("focus",this,true);this.host.removeEventListener("blur",this,true);this.host.removeEventListener("scroll",this,true);this._configurator.dispose();h.Signal.clearData(this);this.editor.destroy()}getOption(e){return this._configurator.getOption(e)}hasOption(e){return this._configurator.hasOption(e)}setOption(e,t){this._configurator.setOption(e,t)}setOptions(e){this._configurator.setOptions(e)}injectExtension(e){this._configurator.injectExtension(this._editor,e)}getLine(e){e=e+1;return e<=this.doc.lines?this.doc.line(e).text:undefined}getOffsetAt(e){return this.doc.line(e.line+1).from+e.column}getPositionAt(e){const t=this.doc.lineAt(e);return{line:t.number-1,column:e-t.from}}undo(){this.model.sharedModel.undo()}redo(){this.model.sharedModel.redo()}clearHistory(){this.model.sharedModel.clearUndoHistory()}focus(){this._editor.focus()}hasFocus(){return this._editor.hasFocus}blur(){this._editor.contentDOM.blur()}get state(){return this._editor.state}firstLine(){return 0}lastLine(){return this.doc.lines-1}cursorCoords(e,t){const n=this.state.selection.main;const i=e?n.from:n.to;const s=this.editor.coordsAtPos(i);return s}getRange(e,t,n){const i=this.getOffsetAt(this._toPosition(e));const s=this.getOffsetAt(this._toPosition(t));return this.state.sliceDoc(i,s)}revealPosition(e){const t=this.getOffsetAt(e);this._editor.dispatch({effects:c.EditorView.scrollIntoView(t)})}revealSelection(e){const t=this.getOffsetAt(e.start);const n=this.getOffsetAt(e.end);this._editor.dispatch({effects:c.EditorView.scrollIntoView(l.EditorSelection.range(t,n))})}getCoordinateForPosition(e){const t=this.getOffsetAt(e);const n=this.editor.coordsAtPos(t);return n}getPositionForCoordinate(e){const t=this.editor.posAtCoords({x:e.left,y:e.top});return this.getPositionAt(t)||null}getCursorPosition(){const e=this.state.selection.main.head;return this.getPositionAt(e)}setCursorPosition(e,t={}){const n=this.getOffsetAt(e);this.editor.dispatch({selection:{anchor:n},scrollIntoView:t.scroll===false?false:true});if(!this.editor.hasFocus){this.model.selections.set(this.uuid,this.getSelections())}}getSelection(){return this.getSelections()[0]}setSelection(e){this.setSelections([e])}getSelections(){const e=this.state.selection.ranges;if(e.length>0){const t=e.map((e=>({anchor:this._toCodeMirrorPosition(this.getPositionAt(e.from)),head:this._toCodeMirrorPosition(this.getPositionAt(e.to))})));return t.map((e=>this._toSelection(e)))}const t=this._toCodeMirrorPosition(this.getPositionAt(this.state.selection.main.head));const n=this._toSelection({anchor:t,head:t});return[n]}setSelections(e){const t=e.length?e.map((e=>l.EditorSelection.range(this.getOffsetAt(e.start),this.getOffsetAt(e.end)))):[l.EditorSelection.range(0,0)];this.editor.dispatch({selection:l.EditorSelection.create(t)})}replaceSelection(e){const t=this.getSelections()[0];this.model.sharedModel.updateSource(this.getOffsetAt(t.start),this.getOffsetAt(t.end),e);const n=this.getPositionAt(this.getOffsetAt(t.start)+e.length);this.setSelection({start:n,end:n})}getTokens(){const e=[];const t=(0,o.ensureSyntaxTree)(this.state,this.doc.length);if(t){t.iterate({enter:t=>{if(t.node.firstChild===null){e.push({value:this.state.sliceDoc(t.from,t.to),offset:t.from,type:t.name})}return true}})}return e}getTokenAt(e){const t=(0,o.ensureSyntaxTree)(this.state,e);let n=null;if(t){t.iterate({enter:t=>{if(n){return false}if(t.node.firstChild){return true}if(e>=t.from&&e<=t.to){n={value:this.state.sliceDoc(t.from,t.to),offset:t.from,type:t.name};return false}return true}})}return n||{offset:e,value:""}}getTokenAtCursor(){return this.getTokenAt(this.state.selection.main.head)}newIndentedLine(){(0,i.insertNewlineAndIndent)({state:this.state,dispatch:this.editor.dispatch})}execCommand(e){e(this.editor)}onConfigChanged(e,t){e.reconfigureExtensions(this._editor,t)}onKeydown(e){const t=this.state.selection.main.head;if(t===0&&e.keyCode===X){if(!e.shiftKey){this.edgeRequested.emit("top")}return false}const n=this.doc.lineAt(t).number;if(n===1&&e.keyCode===X){if(!e.shiftKey){this.edgeRequested.emit("topLine")}return false}const i=this.doc.length;if(t===i&&e.keyCode===Y){if(!e.shiftKey){this.edgeRequested.emit("bottom")}return false}return false}_onMimeTypeChanged(){this._languages.getLanguage(this._model.mimeType).then((e=>{var t;this._editor.dispatch({effects:this._language.reconfigure((t=e===null||e===void 0?void 0:e.support)!==null&&t!==void 0?t:[])})})).catch((e=>{console.log(`Failed to load language for '${this._model.mimeType}'.`,e);this._editor.dispatch({effects:this._language.reconfigure([])})}))}_onCursorActivity(){if(this._editor.hasFocus){const e=this.getSelections();this.model.selections.set(this.uuid,e)}}_toSelection(e){return{uuid:this.uuid,start:this._toPosition(e.anchor),end:this._toPosition(e.head)}}_toPosition(e){return{line:e.line,column:e.ch}}_toCodeMirrorPosition(e){return{line:e.line,ch:e.column}}_onDocChanged(e){if(e.transactions.length&&e.transactions[0].selection){this._onCursorActivity()}}handleEvent(e){switch(e.type){case"focus":this._evtFocus(e);break;case"blur":this._evtBlur(e);break;default:break}}_evtFocus(e){this.host.classList.add("jp-mod-focused");this._onCursorActivity()}_evtBlur(e){this.host.classList.remove("jp-mod-focused")}}var Z;(function(e){function t(e,t,n,i){const s=t.getInitialExtensions();s.push(...n);const a=new c.EditorView({state:l.EditorState.create({doc:i,extensions:s}),parent:e});return a}e.createEditor=t})(Z||(Z={}));class ee{constructor(e={}){var t,n,i;this.newInlineEditor=e=>{e.host.dataset.type="inline";return this.newEditor({...e,config:{...this.inlineCodeMirrorConfig,...e.config||{}},inline:true})};this.newDocumentEditor=e=>{var t,n;e.host.dataset.type="document";return this.newEditor({...e,config:{...this.documentCodeMirrorConfig,...(t=e.config)!==null&&t!==void 0?t:{}},inline:false,extensions:[c.keymap.of([{key:"Shift-Enter",run:e=>true}])].concat((n=e.extensions)!==null&&n!==void 0?n:[])})};this.languages=(t=e.languages)!==null&&t!==void 0?t:new G;this.extensions=(n=e.extensions)!==null&&n!==void 0?n:new z;this.translator=(i=e.translator)!==null&&i!==void 0?i:u.nullTranslator;this.inlineCodeMirrorConfig={searchWithCM:true};this.documentCodeMirrorConfig={lineNumbers:true,scrollPastEnd:true}}newEditor(e){const t=new K({extensionsRegistry:this.extensions,languages:this.languages,translator:this.translator,...e});return t}}class te{constructor(e){this.languages=e}getMimeTypeByLanguage(e){var t;const n=e.file_extension||"";const i=this.languages.findBest(e.codemirror_mode||{mimetype:e.mimetype,name:e.name,ext:[n.split(".").slice(-1)[0]]});return i?Array.isArray(i.mime)?(t=i.mime[0])!==null&&t!==void 0?t:s.IEditorMimeTypeService.defaultMimeType:i.mime:s.IEditorMimeTypeService.defaultMimeType}getMimeTypeByFilePath(e){var t;const n=q.PathExt.extname(e);if(n===".ipy"){return"text/x-python"}else if(n===".md"){return"text/x-ipythongfm"}const i=this.languages.findByFileName(e);return i?Array.isArray(i.mime)?(t=i.mime[0])!==null&&t!==void 0?t:s.IEditorMimeTypeService.defaultMimeType:i.mime:s.IEditorMimeTypeService.defaultMimeType}}var ne=n(80379);class ie{constructor(){this.currentIndex=null;this.query=null;this._isActive=true;this._inSelection=null;this._isDisposed=false;this._cmHandler=null;this.currentIndex=null;this._stateChanged=new h.Signal(this)}get cmHandler(){if(!this._cmHandler){this._cmHandler=new se(this.editor)}return this._cmHandler}get stateChanged(){return this._stateChanged}get currentMatchIndex(){return this.isActive?this.currentIndex:null}get isActive(){return this._isActive}get isDisposed(){return this._isDisposed}get matchesCount(){return this.isActive?this.cmHandler.matches.length:0}clearHighlight(){this.currentIndex=null;this.cmHandler.clearHighlight();return Promise.resolve()}dispose(){if(this._isDisposed){return}this._isDisposed=true;h.Signal.clearData(this);if(this.isActive){this.endQuery().catch((e=>{console.error(`Failed to end search query on cells.`,e)}))}}async setIsActive(e){if(this._isActive===e){return}this._isActive=e;if(this._isActive){if(this.query!==null){await this.startQuery(this.query,this.filters)}}else{await this.endQuery()}}async setSearchSelection(e){if(this._inSelection===e){return}this._inSelection=e;await this.updateCodeMirror(this.model.sharedModel.getSource());this._stateChanged.emit()}setProtectSelection(e){this.cmHandler.protectSelection=e}async startQuery(e,t){this.query=e;this.filters=t;const n=this.model.sharedModel.getSource();await this.updateCodeMirror(n);this.model.sharedModel.changed.connect(this.onSharedModelChanged,this)}async endQuery(){await this.clearHighlight();await this.cmHandler.endQuery();this.currentIndex=null}async highlightNext(e=true,t){if(this.matchesCount===0||!this.isActive){this.currentIndex=null}else{let n=await this.cmHandler.highlightNext(t);if(n){this.currentIndex=this.cmHandler.currentIndex}else{this.currentIndex=e?0:null}return n}return Promise.resolve(this.getCurrentMatch())}async highlightPrevious(e=true,t){if(this.matchesCount===0||!this.isActive){this.currentIndex=null}else{let n=await this.cmHandler.highlightPrevious(t);if(n){this.currentIndex=this.cmHandler.currentIndex}else{this.currentIndex=e?this.matchesCount-1:null}return n}return Promise.resolve(this.getCurrentMatch())}replaceCurrentMatch(e,t,n){if(!this.isActive){return Promise.resolve(false)}let i=false;if(this.currentIndex!==null&&this.currentIndex<this.cmHandler.matches.length){const t=this.getCurrentMatch();if(!t){this.currentIndex=null}else{this.cmHandler.matches.splice(this.currentIndex,1);this.currentIndex=this.currentIndex<this.cmHandler.matches.length?Math.max(this.currentIndex-1,0):null;const s=(n===null||n===void 0?void 0:n.regularExpression)?t.text.replace(this.query,e):e;const a=(n===null||n===void 0?void 0:n.preserveCase)?ne.GenericSearchProvider.preserveCase(t.text,s):s;this.model.sharedModel.updateSource(t.position,t.position+t.text.length,a);i=true}}return Promise.resolve(i)}replaceAllMatches(e,t){if(!this.isActive){return Promise.resolve(false)}let n=this.cmHandler.matches.length>0;let i=this.model.sharedModel.getSource();let s=0;const a=this.cmHandler.matches.reduce(((n,a)=>{const r=a.position;const o=r+a.text.length;const l=(t===null||t===void 0?void 0:t.regularExpression)?a.text.replace(this.query,e):e;const c=(t===null||t===void 0?void 0:t.preserveCase)?ne.GenericSearchProvider.preserveCase(a.text,l):l;const d=`${n}${i.slice(s,r)}${c}`;s=o;return d}),"");if(n){this.cmHandler.matches=[];this.currentIndex=null;this.model.sharedModel.setSource(`${a}${i.slice(s)}`)}return Promise.resolve(n)}getCurrentMatch(){if(this.currentIndex===null){return undefined}else{let e=undefined;if(this.currentIndex<this.cmHandler.matches.length){e=this.cmHandler.matches[this.currentIndex]}return e}}async onSharedModelChanged(e,t){if(t.sourceChange){await this.updateCodeMirror(e.getSource());this._stateChanged.emit()}}async updateCodeMirror(e){if(this.query!==null&&this.isActive){const t=await ne.TextSearchEngine.search(this.query,e);if(this._inSelection){const e=this.editor;const n=e.getOffsetAt(this._inSelection.start);const i=e.getOffsetAt(this._inSelection.end);this.cmHandler.matches=t.filter((e=>e.position>=n&&e.position<=i));if(this.cmHandler.currentIndex===null&&this.cmHandler.matches.length>0){await this.cmHandler.highlightNext({from:"selection",select:false,scroll:false})}this.currentIndex=this.cmHandler.currentIndex}else{this.cmHandler.matches=t}}else{this.cmHandler.matches=[]}}}class se{constructor(e){this._current=null;this._cm=e;this._matches=new Array;this._currentIndex=null;this._highlightEffect=l.StateEffect.define({map:(e,t)=>{const n=e=>({text:e.text,position:t.mapPos(e.position)});return{matches:e.matches.map(n),currentMatch:e.currentMatch?n(e.currentMatch):null}}});this._highlightMark=c.Decoration.mark({class:"cm-searching"});this._currentMark=c.Decoration.mark({class:"jp-current-match"});this._highlightField=l.StateField.define({create:()=>c.Decoration.none,update:(e,t)=>{e=e.map(t.changes);for(let n of t.effects){if(n.is(this._highlightEffect)){const t=n;if(t.value.matches.length){e=e.update({add:t.value.matches.map((e=>this._highlightMark.range(e.position,e.position+e.text.length))),filter:()=>false});e=e.update({add:t.value.currentMatch?[this._currentMark.range(t.value.currentMatch.position,t.value.currentMatch.position+t.value.currentMatch.text.length)]:[]})}else{e=c.Decoration.none}}}return e},provide:e=>c.EditorView.decorations.from(e)});this._domEventHandlers=c.EditorView.domEventHandlers({focus:()=>{this._selectCurrentMatch()}})}get currentIndex(){return this._currentIndex}get matches(){return this._matches}set matches(e){this._matches=e;if(this._currentIndex!==null&&this._currentIndex>this._matches.length){this._currentIndex=this._matches.length>0?0:null}this._highlightCurrentMatch({select:false})}get protectSelection(){return this._protectSelection}set protectSelection(e){this._protectSelection=e}clearHighlight(){this._currentIndex=null;this._highlightCurrentMatch()}endQuery(){this._currentIndex=null;this._matches=[];if(this._cm){this._cm.editor.dispatch({effects:this._highlightEffect.of({matches:[],currentMatch:null})})}return Promise.resolve()}highlightNext(e){var t;this._currentIndex=this._findNext(false,(t=e===null||e===void 0?void 0:e.from)!==null&&t!==void 0?t:"auto");this._highlightCurrentMatch(e);return Promise.resolve(this._currentIndex!==null?this._matches[this._currentIndex]:undefined)}highlightPrevious(e){var t;this._currentIndex=this._findNext(true,(t=e===null||e===void 0?void 0:e.from)!==null&&t!==void 0?t:"auto");this._highlightCurrentMatch(e);return Promise.resolve(this._currentIndex!==null?this._matches[this._currentIndex]:undefined)}setEditor(e){if(this._cm){throw new Error("CodeMirrorEditor already set.")}else{this._cm=e;if(this._currentIndex!==null){this._highlightCurrentMatch()}this._cm.editor.dispatch({effects:l.StateEffect.appendConfig.of(this._domEventHandlers)});this._refresh()}}_selectCurrentMatch(e=true){const t=this._current;if(!t){return}if(!this._cm){return}const n={anchor:t.position,head:t.position+t.text.length};const i=this._cm.editor.state.selection.main;if(i.from===t.position&&i.to===t.position+t.text.length||this._protectSelection){if(e){this._cm.editor.dispatch({effects:c.EditorView.scrollIntoView(l.EditorSelection.range(n.anchor,n.head))});return}}else{this._cm.editor.dispatch({selection:n,scrollIntoView:e})}}_highlightCurrentMatch(e){var t,n,i;if(!this._cm){return}if(this._currentIndex!==null){const s=this.matches[this._currentIndex];this._current=s;if((t=e===null||e===void 0?void 0:e.select)!==null&&t!==void 0?t:true){if(this._cm.hasFocus()){this._selectCurrentMatch((n=e===null||e===void 0?void 0:e.scroll)!==null&&n!==void 0?n:true)}else if((i=e===null||e===void 0?void 0:e.scroll)!==null&&i!==void 0?i:true){this._cm.editor.dispatch({effects:c.EditorView.scrollIntoView(s.position)})}}}else{this._current=null}this._refresh()}_refresh(){if(!this._cm){return}let e=[this._highlightEffect.of({matches:this.matches,currentMatch:this._current})];if(!this._cm.state.field(this._highlightField,false)){e.push(l.StateEffect.appendConfig.of([this._highlightField]))}this._cm.editor.dispatch({effects:e})}_findNext(e,t="auto"){var n,i,s,a;if(this._matches.length===0){return null}if(!this._cm&&!["previous-match","start"].includes(t)){t="previous-match"}let r=0;if(t==="auto"&&((i=(n=this._cm)===null||n===void 0?void 0:n.hasFocus())!==null&&i!==void 0?i:false)||t==="selection"){const t=this._cm.state.selection.main;r=e?t.anchor:t.head}else if(t==="selection-start"){const e=this._cm.state.selection.main;r=Math.min(e.anchor,e.head)}else if(t==="start"){r=0}else if(this._current){r=e?this._current.position:this._current.position+this._current.text.length}if(r===0&&e&&this.currentIndex===null){r=(a=(s=this._cm)===null||s===void 0?void 0:s.doc.length)!==null&&a!==void 0?a:c(this._matches[this._matches.length-1])}const o=r;let l=ae.findNext(this._matches,o,0,this._matches.length-1);if(l===null){return e?this._matches.length-1:null}if(e){l-=1;if(l<0){return null}}return l;function c(e){return e?e.position+e.text.length:0}}}var ae;(function(e){function t(e,t,n=0,i=Infinity){i=Math.min(e.length-1,i);while(n<=i){let s=Math.floor(.5*(n+i));const a=e[s].position;if(a<t){n=s+1;if(n<e.length&&e[n].position>t){return n}}else if(a>t){i=s-1;if(i>0&&e[i].position<t){return s}}else{return s}}const s=n>0?n-1:0;const a=e[s];return a.position>=t?s:null}e.findNext=t})(ae||(ae={}));const re=new d.Token("@jupyterlab/codemirror:IEditorExtensionRegistry",`A registry for CodeMirror extension factories.`);const oe=new d.Token("@jupyterlab/codemirror:IEditorLanguageRegistry","A registry for CodeMirror languages.");const le=new d.Token("@jupyterlab/codemirror:IEditorThemeRegistry","A registry for CodeMirror theme.")}}]);
//# sourceMappingURL=1675.c70c6f9cdcfec6060d5a.js.map?v=c70c6f9cdcfec6060d5a