"use strict";(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[704],{40704:(t,e,r)=>{r.r(e);r.d(e,{Gettext:()=>s,ITranslator:()=>f,ITranslatorConnector:()=>p,TranslationManager:()=>m,TranslatorConnector:()=>d,nullTranslator:()=>l,requestTranslationsAPI:()=>g});function n(t){return t.replace("-","_")}class s{constructor(t){t=t||{};this._defaults={domain:"messages",locale:document.documentElement.getAttribute("lang")||"en",pluralFunc:function(t){return{nplurals:2,plural:t!=1?1:0}},contextDelimiter:String.fromCharCode(4),stringsPrefix:""};this._locale=(t.locale||this._defaults.locale).replace("_","-");this._domain=n(t.domain||this._defaults.domain);this._contextDelimiter=t.contextDelimiter||this._defaults.contextDelimiter;this._stringsPrefix=t.stringsPrefix||this._defaults.stringsPrefix;this._pluralFuncs={};this._dictionary={};this._pluralForms={};if(t.messages){this._dictionary[this._domain]={};this._dictionary[this._domain][this._locale]=t.messages}if(t.pluralForms){this._pluralForms[this._locale]=t.pluralForms}}setContextDelimiter(t){this._contextDelimiter=t}getContextDelimiter(){return this._contextDelimiter}setLocale(t){this._locale=t.replace("_","-")}getLocale(){return this._locale}setDomain(t){this._domain=n(t)}getDomain(){return this._domain}setStringsPrefix(t){this._stringsPrefix=t}getStringsPrefix(){return this._stringsPrefix}static strfmt(t,...e){return t.replace(/%%/g,"%% ").replace(/%(\d+)/g,(function(t,r){return e[r-1]})).replace(/%% /g,"%")}loadJSON(t,e){if(!t[""]||!t[""]["language"]||!t[""]["pluralForms"]){throw new Error(`Wrong jsonData, it must have an empty key ("") with "language" and "pluralForms" information: ${t}`)}e=n(e);let r=t[""];let s=JSON.parse(JSON.stringify(t));delete s[""];this.setMessages(e||this._defaults.domain,r["language"],s,r["pluralForms"])}__(t,...e){return this.gettext(t,...e)}_n(t,e,r,...n){return this.ngettext(t,e,r,...n)}_p(t,e,...r){return this.pgettext(t,e,...r)}_np(t,e,r,n,...s){return this.npgettext(t,e,r,n,...s)}gettext(t,...e){return this.dcnpgettext("","",t,"",0,...e)}ngettext(t,e,r,...n){return this.dcnpgettext("","",t,e,r,...n)}pgettext(t,e,...r){return this.dcnpgettext("",t,e,"",0,...r)}npgettext(t,e,r,n,...s){return this.dcnpgettext("",t,e,r,n,...s)}dcnpgettext(t,e,r,s,i,...a){t=n(t)||this._domain;let l;let o=e?e+this._contextDelimiter+r:r;let u={pluralForm:false};let c=false;let h=this._locale;let _=this.expandLocale(this._locale);for(let n in _){h=_[n];c=this._dictionary[t]&&this._dictionary[t][h]&&this._dictionary[t][h][o];if(s){c=c&&this._dictionary[t][h][o].length>1}else{c=c&&this._dictionary[t][h][o].length==1}if(c){u.locale=h;break}}if(!c){l=[r];u.pluralFunc=this._defaults.pluralFunc}else{l=this._dictionary[t][h][o]}if(!s){return this.t(l,i,u,...a)}u.pluralForm=true;let g=c?l:[r,s];return this.t(g,i,u,...a)}expandLocale(t){let e=[t];let r=t.lastIndexOf("-");while(r>0){t=t.slice(0,r);e.push(t);r=t.lastIndexOf("-")}return e}getPluralFunc(t){let e=new RegExp("^\\s*nplurals\\s*=\\s*[0-9]+\\s*;\\s*plural\\s*=\\s*(?:\\s|[-\\?\\|&=!<>+*/%:;n0-9_()])+");if(!e.test(t))throw new Error(s.strfmt('The plural form "%1" is not valid',t));return new Function("n","let plural, nplurals; "+t+" return { nplurals: nplurals, plural: (plural === true ? 1 : (plural ? plural : 0)) };")}removeContext(t){if(t.indexOf(this._contextDelimiter)!==-1){let e=t.split(this._contextDelimiter);return e[1]}return t}t(t,e,r,...n){if(!r.pluralForm)return this._stringsPrefix+s.strfmt(this.removeContext(t[0]),...n);let i;if(r.pluralFunc){i=r.pluralFunc(e)}else if(!this._pluralFuncs[r.locale||""]){this._pluralFuncs[r.locale||""]=this.getPluralFunc(this._pluralForms[r.locale||""]);i=this._pluralFuncs[r.locale||""](e)}else{i=this._pluralFuncs[r.locale||""](e)}if("undefined"===typeof!i.plural||i.plural>i.nplurals||t.length<=i.plural)i.plural=0;return this._stringsPrefix+s.strfmt(this.removeContext(t[i.plural]),...[e].concat(n))}setMessages(t,e,r,s){t=n(t);if(s)this._pluralForms[e]=s;if(!this._dictionary[t])this._dictionary[t]={};this._dictionary[t][e]=r}}class i{constructor(t){this.languageCode="en";this._languageBundle=t}load(t){return this._languageBundle}}class a{__(t,...e){return this.gettext(t,...e)}_n(t,e,r,...n){return this.ngettext(t,e,r,...n)}_p(t,e,...r){return this.pgettext(t,e,...r)}_np(t,e,r,n,...s){return this.npgettext(t,e,r,n,...s)}gettext(t,...e){return s.strfmt(t,...e)}ngettext(t,e,r,...n){return s.strfmt(r==1?t:e,...[r].concat(n))}pgettext(t,e,...r){return s.strfmt(e,...r)}npgettext(t,e,r,n,...s){return this.ngettext(e,r,n,...s)}dcnpgettext(t,e,r,n,s,...i){return this.ngettext(r,n,s,...i)}}const l=new i(new a);var o=r(26375);var u=r(55172);var c=r(78098);var h=r(4702);const _="api/translations";async function g(t="",e="",r={},n=undefined){const s=n!==null&&n!==void 0?n:h.ServerConnection.makeSettings();t=t||`${s.appUrl}/${_}`;const i=c.URLExt.join(s.baseUrl,t);const a=c.URLExt.join(i,e);if(!a.startsWith(i)){throw new Error("Can only be used for translations requests")}let l;try{l=await h.ServerConnection.makeRequest(a,r,s)}catch(u){throw new h.ServerConnection.NetworkError(u)}let o=await l.text();if(o.length>0){try{o=JSON.parse(o)}catch(u){console.error("Not a JSON response body.",l)}}if(!l.ok){throw new h.ServerConnection.ResponseError(l,o.message||o)}return o}const p=new u.Token("@jupyterlab/translation:ITranslatorConnector","A service to connect to the server translation endpoint.");class d extends o.DataConnector{constructor(t="",e){super();this._translationsUrl=t;this._serverSettings=e}async fetch(t){return g(this._translationsUrl,t.language,{},this._serverSettings)}}const f=new u.Token("@jupyterlab/translation:ITranslator","A service to translate strings.");class m{constructor(t="",e,r){this._domainData={};this._translationBundles={};this._connector=new d(t,r);this._stringsPrefix=e||"";this._englishBundle=new s({stringsPrefix:this._stringsPrefix})}get languageCode(){return this._currentLocale}async fetch(t){var e,r,n,s;this._languageData=await this._connector.fetch({language:t});if(this._languageData&&t==="default"){try{for(const t of Object.values((e=this._languageData.data)!==null&&e!==void 0?e:{})){this._currentLocale=t[""]["language"].replace("_","-");break}}catch(a){this._currentLocale="en"}}else{this._currentLocale=t}this._domainData=(n=(r=this._languageData)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{};const i=(s=this._languageData)===null||s===void 0?void 0:s.message;if(i&&t!=="en"){console.warn(i)}}load(t){if(this._domainData){if(this._currentLocale=="en"){return this._englishBundle}else{t=n(t);if(!(t in this._translationBundles)){let e=new s({domain:t,locale:this._currentLocale,stringsPrefix:this._stringsPrefix});if(t in this._domainData){let r=this._domainData[t][""];if("plural_forms"in r){r.pluralForms=r.plural_forms;delete r.plural_forms;this._domainData[t][""]=r}e.loadJSON(this._domainData[t],t)}this._translationBundles[t]=e}return this._translationBundles[t]}}else{return this._englishBundle}}}}}]);
//# sourceMappingURL=704.e9b8247a951fcef1b516.js.map?v=e9b8247a951fcef1b516