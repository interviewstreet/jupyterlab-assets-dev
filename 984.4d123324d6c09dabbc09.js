"use strict";(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[984],{10984:(e,t,n)=>{n.r(t);n.d(t,{Commands:()=>E,default:()=>A,tabSpaceStatus:()=>L});var o=n(49655);var r=n(87447);var a=n(52959);var i=n(1458);var d=n(98679);var c=n(39903);var s=n(80379);var l=n(69995);var u=n(86089);var m=n(16179);var g=n(97540);var f=n(95009);var p=n(68299);var v=n(53825);var h=n(41252);var C=n(50724);var b=n(27425);var y=n(10535);var w=n(7130);var _=n(17426);var x=n(78098);const k="notebook:toggle-autoclosing-brackets";const T="console:toggle-autoclosing-brackets";var I;(function(e){e.createNew="fileeditor:create-new";e.createNewMarkdown="fileeditor:create-new-markdown-file";e.changeFontSize="fileeditor:change-font-size";e.lineNumbers="fileeditor:toggle-line-numbers";e.currentLineNumbers="fileeditor:toggle-current-line-numbers";e.lineWrap="fileeditor:toggle-line-wrap";e.currentLineWrap="fileeditor:toggle-current-line-wrap";e.changeTabs="fileeditor:change-tabs";e.matchBrackets="fileeditor:toggle-match-brackets";e.currentMatchBrackets="fileeditor:toggle-current-match-brackets";e.autoClosingBrackets="fileeditor:toggle-autoclosing-brackets";e.autoClosingBracketsUniversal="fileeditor:toggle-autoclosing-brackets-universal";e.createConsole="fileeditor:create-console";e.replaceSelection="fileeditor:replace-selection";e.restartConsole="fileeditor:restart-console";e.runCode="fileeditor:run-code";e.runAllCode="fileeditor:run-all";e.markdownPreview="fileeditor:markdown-preview";e.undo="fileeditor:undo";e.redo="fileeditor:redo";e.cut="fileeditor:cut";e.copy="fileeditor:copy";e.paste="fileeditor:paste";e.selectAll="fileeditor:select-all";e.invokeCompleter="completer:invoke-file";e.selectCompleter="completer:select-file";e.openCodeViewer="code-viewer:open";e.changeTheme="fileeditor:change-theme";e.changeLanguage="fileeditor:change-language";e.find="fileeditor:find";e.goToLine="fileeditor:go-to-line"})(I||(I={}));const S="Editor";var E;(function(e){let t={};let n=true;function o(e,t){return async function n(o,r){var a,i,d;const c=r||{};const s=await e.execute("console:create",{activate:c["activate"],name:(a=o.context.contentsModel)===null||a===void 0?void 0:a.name,path:o.context.path,preferredLanguage:o.context.model.defaultKernelLanguage||((d=(i=t.findByFileName(o.context.path))===null||i===void 0?void 0:i.name)!==null&&d!==void 0?d:""),ref:o.id,insertMode:"split-bottom"});o.context.pathChanged.connect(((e,t)=>{var n;s.session.setPath(t);s.session.setName((n=o.context.contentsModel)===null||n===void 0?void 0:n.name)}))}}function i(e,o){var r;t=(r=e.get("editorConfig").composite)!==null&&r!==void 0?r:{};n=e.get("scrollPasteEnd").composite;o.notifyCommandChanged(I.lineNumbers);o.notifyCommandChanged(I.currentLineNumbers);o.notifyCommandChanged(I.lineWrap);o.notifyCommandChanged(I.currentLineWrap);o.notifyCommandChanged(I.changeTabs);o.notifyCommandChanged(I.matchBrackets);o.notifyCommandChanged(I.currentMatchBrackets);o.notifyCommandChanged(I.autoClosingBrackets);o.notifyCommandChanged(I.changeLanguage)}e.updateSettings=i;function d(e){e.forEach((e=>{c(e.content)}))}e.updateTracker=d;function c(e){const o=e.editor;o.setOptions({...t,scrollPastEnd:n})}e.updateWidget=c;function s(e,n,i,d,c,s,l,f,p,v,h){e.addCommand(I.changeFontSize,{execute:e=>{var o;const r=Number(e["delta"]);if(Number.isNaN(r)){console.error(`${I.changeFontSize}: delta arg must be a number`);return}const a=window.getComputedStyle(document.documentElement);const i=parseInt(a.getPropertyValue("--jp-code-font-size"),10);const c=((o=t["customStyles"]["fontSize"])!==null&&o!==void 0?o:f.baseConfiguration["customStyles"]["fontSize"])||i;t.fontSize=c+r;return n.set(d,"editorConfig",t).catch((e=>{console.error(`Failed to set ${d}: ${e.message}`)}))},label:e=>{const t=Number(e["delta"]);if(Number.isNaN(t)){console.error(`${I.changeFontSize}: delta arg must be a number`)}if(t>0){return e.isMenu?i.__("Increase Text Editor Font Size"):i.__("Increase Font Size")}else{return e.isMenu?i.__("Decrease Text Editor Font Size"):i.__("Decrease Font Size")}}});e.addCommand(I.lineNumbers,{execute:async()=>{var e;t.lineNumbers=!((e=t.lineNumbers)!==null&&e!==void 0?e:f.baseConfiguration.lineNumbers);try{return await n.set(d,"editorConfig",t)}catch(o){console.error(`Failed to set ${d}: ${o.message}`)}},isEnabled:c,isToggled:()=>{var e;return(e=t.lineNumbers)!==null&&e!==void 0?e:f.baseConfiguration.lineNumbers},label:i.__("Show Line Numbers")});e.addCommand(I.currentLineNumbers,{label:i.__("Show Line Numbers"),caption:i.__("Show the line numbers for the current file."),execute:()=>{const e=s.currentWidget;if(!e){return}const t=!e.content.editor.getOption("lineNumbers");e.content.editor.setOption("lineNumbers",t)},isEnabled:c,isToggled:()=>{var e;const t=s.currentWidget;return(e=t===null||t===void 0?void 0:t.content.editor.getOption("lineNumbers"))!==null&&e!==void 0?e:false}});e.addCommand(I.lineWrap,{execute:async e=>{var o;t.lineWrap=(o=e["mode"])!==null&&o!==void 0?o:false;try{return await n.set(d,"editorConfig",t)}catch(r){console.error(`Failed to set ${d}: ${r.message}`)}},isEnabled:c,isToggled:e=>{var n,o;const r=(n=e["mode"])!==null&&n!==void 0?n:false;return r===((o=t.lineWrap)!==null&&o!==void 0?o:f.baseConfiguration.lineWrap)},label:i.__("Word Wrap")});e.addCommand(I.currentLineWrap,{label:i.__("Wrap Words"),caption:i.__("Wrap words for the current file."),execute:()=>{const e=s.currentWidget;if(!e){return}const t=e.content.editor.getOption("lineWrap");e.content.editor.setOption("lineWrap",!t)},isEnabled:c,isToggled:()=>{var e;const t=s.currentWidget;return(e=t===null||t===void 0?void 0:t.content.editor.getOption("lineWrap"))!==null&&e!==void 0?e:false}});e.addCommand(I.changeTabs,{label:e=>{var t;if(e.size){return i._p("v4","Spaces: %1",(t=e.size)!==null&&t!==void 0?t:"")}else{return i.__("Indent with Tab")}},execute:async e=>{var o;t.indentUnit=e["size"]!==undefined?((o=e["size"])!==null&&o!==void 0?o:"4").toString():"Tab";try{return await n.set(d,"editorConfig",t)}catch(r){console.error(`Failed to set ${d}: ${r.message}`)}},isToggled:e=>{var n;const o=(n=t.indentUnit)!==null&&n!==void 0?n:f.baseConfiguration.indentUnit;return e["size"]?e["size"]===o:"Tab"==o}});e.addCommand(I.matchBrackets,{execute:async()=>{var e;t.matchBrackets=!((e=t.matchBrackets)!==null&&e!==void 0?e:f.baseConfiguration.matchBrackets);try{return await n.set(d,"editorConfig",t)}catch(o){console.error(`Failed to set ${d}: ${o.message}`)}},label:i.__("Match Brackets"),isEnabled:c,isToggled:()=>{var e;return(e=t.matchBrackets)!==null&&e!==void 0?e:f.baseConfiguration.matchBrackets}});e.addCommand(I.currentMatchBrackets,{label:i.__("Match Brackets"),caption:i.__("Change match brackets for the current file."),execute:()=>{const e=s.currentWidget;if(!e){return}const t=!e.content.editor.getOption("matchBrackets");e.content.editor.setOption("matchBrackets",t)},isEnabled:c,isToggled:()=>{var e;const t=s.currentWidget;return(e=t===null||t===void 0?void 0:t.content.editor.getOption("matchBrackets"))!==null&&e!==void 0?e:false}});e.addCommand(I.autoClosingBrackets,{execute:async e=>{var o,r;t.autoClosingBrackets=!!((o=e["force"])!==null&&o!==void 0?o:!((r=t.autoClosingBrackets)!==null&&r!==void 0?r:f.baseConfiguration.autoClosingBrackets));try{return await n.set(d,"editorConfig",t)}catch(a){console.error(`Failed to set ${d}: ${a.message}`)}},label:i.__("Auto Close Brackets in Text Editor"),isToggled:()=>{var e;return(e=t.autoClosingBrackets)!==null&&e!==void 0?e:f.baseConfiguration.autoClosingBrackets}});e.addCommand(I.autoClosingBracketsUniversal,{execute:()=>{const t=e.isToggled(I.autoClosingBrackets)||e.isToggled(k)||e.isToggled(T);if(t){void e.execute(I.autoClosingBrackets,{force:false});void e.execute(k,{force:false});void e.execute(T,{force:false})}else{void e.execute(I.autoClosingBrackets,{force:true});void e.execute(k,{force:true});void e.execute(T,{force:true})}},label:i.__("Auto Close Brackets"),isToggled:()=>e.isToggled(I.autoClosingBrackets)||e.isToggled(k)||e.isToggled(T)});e.addCommand(I.changeTheme,{label:e=>{var n,o,r,a;return(a=(r=(o=(n=e.displayName)!==null&&n!==void 0?n:e.theme)!==null&&o!==void 0?o:t.theme)!==null&&r!==void 0?r:f.baseConfiguration.theme)!==null&&a!==void 0?a:i.__("Editor Theme")},execute:async e=>{var o;t.theme=(o=e["theme"])!==null&&o!==void 0?o:t.theme;try{return await n.set(d,"editorConfig",t)}catch(r){console.error(`Failed to set theme - ${r.message}`)}},isToggled:e=>{var n;return e["theme"]===((n=t.theme)!==null&&n!==void 0?n:f.baseConfiguration.theme)}});e.addCommand(I.find,{label:i.__("Find…"),execute:()=>{const e=s.currentWidget;if(!e){return}const t=e.content.editor;t.execCommand(_.findNext)},isEnabled:c});e.addCommand(I.goToLine,{label:i.__("Go to Line…"),execute:e=>{const t=s.currentWidget;if(!t){return}const n=t.content.editor;const o=e["line"];const r=e["column"];if(o!==undefined||r!==undefined){n.setCursorPosition({line:(o!==null&&o!==void 0?o:1)-1,column:(r!==null&&r!==void 0?r:1)-1})}else{n.execCommand(_.gotoLine)}},isEnabled:c});e.addCommand(I.changeLanguage,{label:e=>{var t,n;return(n=(t=e["displayName"])!==null&&t!==void 0?t:e["name"])!==null&&n!==void 0?n:i.__("Change editor language.")},execute:e=>{var t;const n=e["name"];const o=s.currentWidget;if(n&&o){const e=p.findByName(n);if(e){if(Array.isArray(e.mime)){o.content.model.mimeType=(t=e.mime[0])!==null&&t!==void 0?t:a.IEditorMimeTypeService.defaultMimeType}else{o.content.model.mimeType=e.mime}}}},isEnabled:c,isToggled:e=>{const t=s.currentWidget;if(!t){return false}const n=t.content.model.mimeType;const o=p.findByMIME(n);const r=o&&o.name;return e["name"]===r}});e.addCommand(I.replaceSelection,{execute:e=>{var t,n;const o=e["text"]||"";const r=s.currentWidget;if(!r){return}(n=(t=r.content.editor).replaceSelection)===null||n===void 0?void 0:n.call(t,o)},isEnabled:c,label:i.__("Replace Selection in Editor")});e.addCommand(I.createConsole,{execute:t=>{const n=s.currentWidget;if(!n){return}return o(e,p)(n,t)},isEnabled:c,icon:b.consoleIcon,label:i.__("Create Console for Editor")});e.addCommand(I.restartConsole,{execute:async()=>{var e;const t=(e=s.currentWidget)===null||e===void 0?void 0:e.content;if(!t||v===null){return}const n=v.find((e=>{var n;return((n=e.sessionContext.session)===null||n===void 0?void 0:n.path)===t.context.path}));if(n){return h.restart(n.sessionContext)}},label:i.__("Restart Kernel"),isEnabled:()=>v!==null&&c()});e.addCommand(I.runCode,{execute:()=>{var t;const n=(t=s.currentWidget)===null||t===void 0?void 0:t.content;if(!n){return}let o="";const r=n.editor;const a=n.context.path;const i=x.PathExt.extname(a);const d=r.getSelection();const{start:c,end:l}=d;let u=c.column!==l.column||c.line!==l.line;if(u){const e=r.getOffsetAt(d.start);const t=r.getOffsetAt(d.end);o=r.model.sharedModel.getSource().substring(e,t)}else if(x.MarkdownCodeBlocks.isMarkdown(i)){const e=r.model.sharedModel.getSource();const t=x.MarkdownCodeBlocks.findMarkdownCodeBlocks(e);for(const n of t){if(n.startLine<=c.line&&c.line<=n.endLine){o=n.code;u=true;break}}}if(!u){o=r.getLine(d.start.line);const e=r.getCursorPosition();if(e.line+1===r.lineCount){const e=r.model.sharedModel.getSource();r.model.sharedModel.setSource(e+"\n")}r.setCursorPosition({line:e.line+1,column:e.column})}const m=false;if(o){return e.execute("console:inject",{activate:m,code:o,path:a})}else{return Promise.resolve(void 0)}},isEnabled:c,label:i.__("Run Selected Code")});e.addCommand(I.runAllCode,{execute:()=>{var t;const n=(t=s.currentWidget)===null||t===void 0?void 0:t.content;if(!n){return}let o="";const r=n.editor;const a=r.model.sharedModel.getSource();const i=n.context.path;const d=x.PathExt.extname(i);if(x.MarkdownCodeBlocks.isMarkdown(d)){const e=x.MarkdownCodeBlocks.findMarkdownCodeBlocks(a);for(const t of e){o+=t.code}}else{o=a}const c=false;if(o){return e.execute("console:inject",{activate:c,code:o,path:i})}else{return Promise.resolve(void 0)}},isEnabled:c,label:i.__("Run All Code")});e.addCommand(I.markdownPreview,{execute:()=>{const t=s.currentWidget;if(!t){return}const n=t.context.path;return e.execute("markdownviewer:open",{path:n,options:{mode:"split-right"}})},isVisible:()=>{const e=s.currentWidget;return e&&x.PathExt.extname(e.context.path)===".md"||false},icon:b.markdownIcon,label:i.__("Show Markdown Preview")});e.addCommand(I.createNew,{label:e=>{var t,n;if(e.isPalette){return(t=e.paletteLabel)!==null&&t!==void 0?t:i.__("New Text File")}return(n=e.launcherLabel)!==null&&n!==void 0?n:i.__("Text File")},caption:e=>{var t;return(t=e.caption)!==null&&t!==void 0?t:i.__("Create a new text file")},icon:e=>{var t;return e.isPalette?undefined:b.LabIcon.resolve({icon:(t=e.iconName)!==null&&t!==void 0?t:b.textEditorIcon})},execute:t=>{var n;const o=t.cwd||l.model.path;return g(e,o,(n=t.fileExt)!==null&&n!==void 0?n:"txt")}});e.addCommand(I.createNewMarkdown,{label:e=>e["isPalette"]?i.__("New Markdown File"):i.__("Markdown File"),caption:i.__("Create a new markdown file"),icon:e=>e["isPalette"]?undefined:b.markdownIcon,execute:t=>{const n=t["cwd"]||l.model.path;return g(e,n,"md")}});e.addCommand(I.undo,{execute:()=>{var e;const t=(e=s.currentWidget)===null||e===void 0?void 0:e.content;if(!t){return}t.editor.undo()},isEnabled:()=>{var e;if(!c()){return false}const t=(e=s.currentWidget)===null||e===void 0?void 0:e.content;if(!t){return false}return true},icon:b.undoIcon.bindprops({stylesheet:"menuItem"}),label:i.__("Undo")});e.addCommand(I.redo,{execute:()=>{var e;const t=(e=s.currentWidget)===null||e===void 0?void 0:e.content;if(!t){return}t.editor.redo()},isEnabled:()=>{var e;if(!c()){return false}const t=(e=s.currentWidget)===null||e===void 0?void 0:e.content;if(!t){return false}return true},icon:b.redoIcon.bindprops({stylesheet:"menuItem"}),label:i.__("Redo")});e.addCommand(I.cut,{execute:()=>{var e;const t=(e=s.currentWidget)===null||e===void 0?void 0:e.content;if(!t){return}const n=t.editor;const o=m(n);r.Clipboard.copyToSystem(o);n.replaceSelection&&n.replaceSelection("")},isEnabled:()=>{var e;if(!c()){return false}const t=(e=s.currentWidget)===null||e===void 0?void 0:e.content;if(!t){return false}return u(t.editor)},icon:b.cutIcon.bindprops({stylesheet:"menuItem"}),label:i.__("Cut")});e.addCommand(I.copy,{execute:()=>{var e;const t=(e=s.currentWidget)===null||e===void 0?void 0:e.content;if(!t){return}const n=t.editor;const o=m(n);r.Clipboard.copyToSystem(o)},isEnabled:()=>{var e;if(!c()){return false}const t=(e=s.currentWidget)===null||e===void 0?void 0:e.content;if(!t){return false}return u(t.editor)},icon:b.copyIcon.bindprops({stylesheet:"menuItem"}),label:i.__("Copy")});e.addCommand(I.paste,{execute:async()=>{var e;const t=(e=s.currentWidget)===null||e===void 0?void 0:e.content;if(!t){return}const n=t.editor;const o=window.navigator.clipboard;const r=await o.readText();if(r){n.replaceSelection&&n.replaceSelection(r)}},isEnabled:()=>{var e;return Boolean(c()&&((e=s.currentWidget)===null||e===void 0?void 0:e.content))},icon:b.pasteIcon.bindprops({stylesheet:"menuItem"}),label:i.__("Paste")});e.addCommand(I.selectAll,{execute:()=>{var e;const t=(e=s.currentWidget)===null||e===void 0?void 0:e.content;if(!t){return}const n=t.editor;n.execCommand(w.selectAll)},isEnabled:()=>{var e;return Boolean(c()&&((e=s.currentWidget)===null||e===void 0?void 0:e.content))},label:i.__("Select All")})}e.addCommands=s;function l(e,t,n,o){const r=(o!==null&&o!==void 0?o:C.nullTranslator).load("jupyterlab");e.addCommand(I.invokeCompleter,{label:r.__("Display the completion helper."),execute:()=>{const e=t.currentWidget&&t.currentWidget.id;if(e){return n.invoke(e)}}});e.addCommand(I.selectCompleter,{label:r.__("Select the completion suggestion."),execute:()=>{const e=t.currentWidget&&t.currentWidget.id;if(e){return n.select(e)}}});e.addKeyBinding({command:I.selectCompleter,keys:["Enter"],selector:".jp-FileEditor .jp-mod-completer-active"})}e.addCompleterCommands=l;function u(e){const t=e.getSelection();const{start:n,end:o}=t;const r=n.column!==o.column||n.line!==o.line;return r}function m(e){const t=e.getSelection();const n=e.getOffsetAt(t.start);const o=e.getOffsetAt(t.end);const r=e.model.sharedModel.getSource().substring(n,o);return r}async function g(e,t,n="txt"){const o=await e.execute("docmanager:new-untitled",{path:t,type:"file",ext:n});if(o!=undefined){const t=await e.execute("docmanager:open",{path:o.path,factory:S});t.isUntitled=true;return t}}function f(e,t){p(e,t);v(e,t)}e.addLauncherItems=f;function p(e,t){e.add({command:I.createNew,category:t.__("Other"),rank:1})}e.addCreateNewToLauncher=p;function v(e,t){e.add({command:I.createNewMarkdown,category:t.__("Other"),rank:2})}e.addCreateNewMarkdownToLauncher=v;function h(e,t,n){for(let o of n){e.add({command:I.createNew,category:t.__("Other"),rank:3,args:o})}}e.addKernelLanguageLauncherItems=h;function E(e,t){M(e,t);W(e,t);L(e,t);N(e,t)}e.addPaletteItems=E;function M(e,t){const n=t.__("Text Editor");const o={size:4};const r=I.changeTabs;e.addItem({command:r,args:o,category:n});for(const a of[1,2,4,8]){const t={size:a};e.addItem({command:r,args:t,category:n})}}e.addChangeTabsCommandsToPalette=M;function W(e,t){const n=t.__("Text Editor");e.addItem({command:I.createNew,args:{isPalette:true},category:n})}e.addCreateNewCommandToPalette=W;function L(e,t){const n=t.__("Text Editor");e.addItem({command:I.createNewMarkdown,args:{isPalette:true},category:n})}e.addCreateNewMarkdownCommandToPalette=L;function N(e,t){const n=t.__("Text Editor");const o=I.changeFontSize;let r={delta:1};e.addItem({command:o,args:r,category:n});r={delta:-1};e.addItem({command:o,args:r,category:n})}e.addChangeFontSizeCommandsToPalette=N;function P(e,t,n){const o=t.__("Text Editor");for(let r of n){e.addItem({command:I.createNew,args:{...r,isPalette:true},category:o})}}e.addKernelLanguagePaletteItems=P;function B(e,t,n,o){e.editMenu.undoers.redo.add({id:I.redo,isEnabled:o});e.editMenu.undoers.undo.add({id:I.undo,isEnabled:o});e.viewMenu.editorViewers.toggleLineNumbers.add({id:I.currentLineNumbers,isEnabled:o});e.viewMenu.editorViewers.toggleMatchBrackets.add({id:I.currentMatchBrackets,isEnabled:o});e.viewMenu.editorViewers.toggleWordWrap.add({id:I.currentLineWrap,isEnabled:o});e.fileMenu.consoleCreators.add({id:I.createConsole,isEnabled:o});if(n){R(e,n,o)}}e.addMenuItems=B;function F(e,t){for(let n of t){e.fileMenu.newMenu.addItem({command:I.createNew,args:n,rank:31})}}e.addKernelLanguageMenuItems=F;function R(e,t,n){const o=e=>n()&&e.context&&!!t.find((t=>{var n;return((n=t.sessionContext.session)===null||n===void 0?void 0:n.path)===e.context.path}));e.runMenu.codeRunners.restart.add({id:I.restartConsole,isEnabled:o});e.runMenu.codeRunners.run.add({id:I.runCode,isEnabled:o});e.runMenu.codeRunners.runAll.add({id:I.runAllCode,isEnabled:o})}e.addCodeRunnersToRunMenu=R;function A(e,t,n,o){const i=async i=>{var d;const c=t.factoryService.newDocumentEditor;const s=e=>c(e);let l=i.mimeType;if(!l&&i.extension){l=t.mimeTypeService.getMimeTypeByFilePath(`temp.${i.extension.replace(/\\.$/,"")}`)}const u=a.CodeViewerWidget.createCodeViewer({factory:s,content:i.content,mimeType:l});u.title.label=i.label||o.__("Code Viewer");u.title.caption=u.title.label;const m=(0,y.find)(e.docRegistry.fileTypes(),(e=>l?e.mimeTypes.includes(l):false));u.title.icon=(d=m===null||m===void 0?void 0:m.icon)!==null&&d!==void 0?d:b.textEditorIcon;if(i.widgetId){u.id=i.widgetId}const g=new r.MainAreaWidget({content:u});await n.add(g);e.shell.add(g,"main");return u};e.commands.addCommand(I.openCodeViewer,{label:o.__("Open Code Viewer"),execute:e=>i(e)})}e.addOpenCodeViewerCommand=A})(E||(E={}));const M={id:"@jupyterlab/fileeditor-extension:editor-syntax-status",description:"Adds a file editor syntax status widget.",autoStart:true,requires:[u.IEditorTracker,i.IEditorLanguageRegistry,o.ILabShell,C.ITranslator],optional:[v.IStatusBar],activate:(e,t,n,o,r,a)=>{if(!a){return}const i=new u.EditorSyntaxStatus({commands:e.commands,languages:n,translator:r});o.currentChanged.connect((()=>{const e=o.currentWidget;if(e&&t.has(e)&&i.model){i.model.editor=e.content.editor}}));a.registerStatusItem(M.id,{item:i,align:"left",rank:0,isActive:()=>!!o.currentWidget&&!!t.currentWidget&&o.currentWidget===t.currentWidget})}};const W={activate:j,id:"@jupyterlab/fileeditor-extension:plugin",description:"Provides the file editor widget tracker.",requires:[a.IEditorServices,i.IEditorExtensionRegistry,i.IEditorLanguageRegistry,i.IEditorThemeRegistry,l.IDefaultFileBrowser,p.ISettingRegistry],optional:[c.IConsoleTracker,r.ICommandPalette,m.ILauncher,f.IMainMenu,o.ILayoutRestorer,r.ISessionContextDialogs,h.ITableOfContentsRegistry,r.IToolbarWidgetRegistry,C.ITranslator,b.IFormRendererRegistry],provides:u.IEditorTracker,autoStart:true};const L={id:"@jupyterlab/fileeditor-extension:tab-space-status",description:"Adds a file editor indentation status widget.",autoStart:true,requires:[u.IEditorTracker,i.IEditorExtensionRegistry,p.ISettingRegistry,C.ITranslator],optional:[v.IStatusBar],activate:(e,t,n,o,r,a)=>{const i=r.load("jupyterlab");if(!a){return}const d=new b.MenuSvg({commands:e.commands});const c="fileeditor:change-tabs";const{shell:s}=e;const l={name:i.__("Indent with Tab")};d.addItem({command:c,args:l});for(const u of["1","2","4","8"]){const e={size:u,name:i._p("v4","Spaces: %1",u)};d.addItem({command:c,args:e})}const m=new u.TabSpaceStatus({menu:d,translator:r});const g=e=>{var t,o,r;m.model.indentUnit=(r=(o=(t=e.get("editorConfig").composite)===null||t===void 0?void 0:t.indentUnit)!==null&&o!==void 0?o:n.baseConfiguration.indentUnit)!==null&&r!==void 0?r:null};void Promise.all([o.load("@jupyterlab/fileeditor-extension:plugin"),e.restored]).then((([e])=>{g(e);e.changed.connect(g)}));a.registerStatusItem("@jupyterlab/fileeditor-extension:tab-space-status",{item:m,align:"right",rank:1,isActive:()=>!!s.currentWidget&&t.has(s.currentWidget)})}};const N={id:"@jupyterlab/fileeditor-extension:cursor-position",description:"Adds a file editor cursor position status widget.",activate:(e,t,n)=>{n.addEditorProvider((e=>Promise.resolve(e&&t.has(e)?e.content.editor:null)))},requires:[u.IEditorTracker,a.IPositionModel],autoStart:true};const P={id:"@jupyterlab/fileeditor-extension:completer",description:"Adds the completer capability to the file editor.",requires:[u.IEditorTracker],optional:[d.ICompletionProviderManager,C.ITranslator,r.ISanitizer],activate:z,autoStart:true};const B={id:"@jupyterlab/fileeditor-extension:search",description:"Adds search capability to the file editor.",requires:[s.ISearchProviderRegistry],autoStart:true,activate:(e,t)=>{t.add("jp-fileeditorSearchProvider",u.FileEditorSearchProvider)}};const F={id:"@jupyterlab/fileeditor-extension:language-server",description:"Adds Language Server capability to the file editor.",requires:[u.IEditorTracker,g.ILSPDocumentConnectionManager,g.ILSPFeatureManager,g.ILSPCodeExtractorsManager,g.IWidgetLSPAdapterTracker],activate:O,autoStart:true};const R=[W,N,P,F,B,M,L];const A=R;function j(e,t,n,o,a,i,d,c,s,l,m,g,f,p,v,h,b){const y=W.id;const w=h!==null&&h!==void 0?h:C.nullTranslator;const _=f!==null&&f!==void 0?f:new r.SessionContextDialogs({translator:w});const x=w.load("jupyterlab");const k="editor";let T;if(v){T=(0,r.createToolbarFactory)(v,d,S,y,w)}const M=new u.FileEditorFactory({editorServices:t,factoryOptions:{name:S,label:x.__("Editor"),fileTypes:["markdown","*"],defaultFor:["markdown","*"],toolbarFactory:T,translator:w}});const{commands:L,restored:N,shell:P}=e;const B=new r.WidgetTracker({namespace:k});const F=()=>B.currentWidget!==null&&B.currentWidget===P.currentWidget;const R=new Map([["python",[{fileExt:"py",iconName:"ui-components:python",launcherLabel:x.__("Python File"),paletteLabel:x.__("New Python File"),caption:x.__("Create a new Python file")}]],["julia",[{fileExt:"jl",iconName:"ui-components:julia",launcherLabel:x.__("Julia File"),paletteLabel:x.__("New Julia File"),caption:x.__("Create a new Julia file")}]],["R",[{fileExt:"r",iconName:"ui-components:r-kernel",launcherLabel:x.__("R File"),paletteLabel:x.__("New R File"),caption:x.__("Create a new R file")}]]]);const A=async()=>{var t,n;const o=e.serviceManager.kernelspecs;await o.ready;let r=new Set;const a=(n=(t=o.specs)===null||t===void 0?void 0:t.kernelspecs)!==null&&n!==void 0?n:{};Object.keys(a).forEach((e=>{const t=a[e];if(t){const e=R.get(t.language);e===null||e===void 0?void 0:e.forEach((e=>r.add(e)))}}));return r};if(g){void g.restore(B,{command:"docmanager:open",args:e=>({path:e.context.path,factory:S}),name:e=>e.context.path})}Promise.all([d.load(y),N]).then((([e])=>{var t,n,r;if(m){const e=(t=m.viewMenu.items.find((e=>{var t;return e.type==="submenu"&&((t=e.submenu)===null||t===void 0?void 0:t.id)==="jp-mainmenu-view-codemirror-language"})))===null||t===void 0?void 0:t.submenu;if(e){o.getLanguages().sort(((e,t)=>{const n=e.name;const o=t.name;return n.localeCompare(o)})).forEach((t=>{if(t.name.toLowerCase().indexOf("brainf")===0){return}e.addItem({command:I.changeLanguage,args:{...t}})}))}const i=(n=m.settingsMenu.items.find((e=>{var t;return e.type==="submenu"&&((t=e.submenu)===null||t===void 0?void 0:t.id)==="jp-mainmenu-settings-codemirror-theme"})))===null||n===void 0?void 0:n.submenu;if(i){for(const e of a.themes){i.addItem({command:I.changeTheme,args:{theme:e.name,displayName:(r=e.displayName)!==null&&r!==void 0?r:e.name}})}}m.editMenu.goToLiners.add({id:I.goToLine,isEnabled:e=>B.currentWidget!==null&&B.has(e)})}E.updateSettings(e,L);E.updateTracker(B);e.changed.connect((()=>{E.updateSettings(e,L);E.updateTracker(B)}))})).catch((e=>{console.error(e.message);E.updateTracker(B)}));if(b){const e=b.getRenderer("@jupyterlab/codemirror-extension:plugin.defaultConfig");if(e){b.addRenderer("@jupyterlab/fileeditor-extension:plugin.editorConfig",e)}}M.widgetCreated.connect(((e,t)=>{t.context.pathChanged.connect((()=>{void B.save(t)}));void B.add(t);E.updateWidget(t.content)}));e.docRegistry.addWidgetFactory(M);B.widgetAdded.connect(((e,t)=>{E.updateWidget(t.content)}));E.addCommands(e.commands,d,x,y,F,B,i,n,o,c,_);const j=new r.WidgetTracker({namespace:"codeviewer"});if(g){void g.restore(j,{command:I.openCodeViewer,args:e=>({content:e.content.content,label:e.content.title.label,mimeType:e.content.mimeType,widgetId:e.content.id}),name:e=>e.content.id})}E.addOpenCodeViewerCommand(e,t,j,x);if(l){E.addLauncherItems(l,x)}if(s){E.addPaletteItems(s,x)}if(m){E.addMenuItems(m,B,c,F)}A().then((e=>{if(l){E.addKernelLanguageLauncherItems(l,x,e)}if(s){E.addKernelLanguagePaletteItems(s,x,e)}if(m){E.addKernelLanguageMenuItems(m,e)}})).catch((e=>{console.error(e.message)}));if(p){p.add(new u.LaTeXTableOfContentsFactory(B));p.add(new u.MarkdownTableOfContentsFactory(B));p.add(new u.PythonTableOfContentsFactory(B))}return B}function z(e,t,n,o,a){if(!n){return}E.addCompleterCommands(e.commands,t,n,o);const i=e.serviceManager.sessions;const d=a!==null&&a!==void 0?a:new r.Sanitizer;const c=new Map;const s=async(e,t)=>{const o={editor:t.content.editor,widget:t};await n.updateCompleter(o);const r=(e,o)=>{const r=c.get(t.id);const a=(0,y.find)(o,(e=>e.path===t.context.path));if(a){if(r&&r.id===a.id){return}if(r){c.delete(t.id);r.dispose()}const e=i.connectTo({model:a});const o={editor:t.content.editor,widget:t,session:e,sanitizer:d};n.updateCompleter(o).catch(console.error);c.set(t.id,e)}else{if(r){c.delete(t.id);r.dispose()}}};r(i,Array.from(i.running()));i.runningChanged.connect(r);t.disposed.connect((()=>{i.runningChanged.disconnect(r);const e=c.get(t.id);if(e){c.delete(t.id);e.dispose()}}))};t.widgetAdded.connect(s);n.activeProvidersChanged.connect((()=>{t.forEach((e=>{s(t,e).catch(console.error)}))}))}function O(e,t,n,o,r,a){t.widgetAdded.connect((async(t,i)=>{const d=new u.FileEditorAdapter(i,{connectionManager:n,featureManager:o,foreignCodeExtractorsManager:r,docRegistry:e.docRegistry});a.add(d)}))}}}]);
//# sourceMappingURL=984.4d123324d6c09dabbc09.js.map?v=4d123324d6c09dabbc09