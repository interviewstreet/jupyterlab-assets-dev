(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[8831],{48831:(e,t,o)=>{"use strict";o.r(t);o.d(t,{fileUploadStatus:()=>M,default:()=>$});var r=o(10890);var n=o.n(r);var a=o(67616);var i=o.n(a);var s=o(66853);var c=o.n(s);var l=o(19920);var d=o.n(l);var u=o(20942);var m=o.n(u);var p=o(95994);var w=o.n(p);var f=o(99345);var h=o.n(f);var g=o(26351);var b=o.n(g);var y=o(70278);var v=o.n(y);var _=o(29131);var I=o.n(_);var C=o(47063);var F=o.n(C);var x=o(14765);var B=o.n(x);const T="FileBrowser";var P;(function(e){e.copy="filebrowser:copy";e.copyDownloadLink="filebrowser:copy-download-link";e.createLauncher="filebrowser:create-main-launcher";e.cut="filebrowser:cut";e.del="filebrowser:delete";e.download="filebrowser:download";e.duplicate="filebrowser:duplicate";e.hideBrowser="filebrowser:hide-main";e.goToPath="filebrowser:go-to-path";e.goUp="filebrowser:go-up";e.openPath="filebrowser:open-path";e.openUrl="filebrowser:open-url";e.open="filebrowser:open";e.openBrowserTab="filebrowser:open-browser-tab";e.paste="filebrowser:paste";e.createNewDirectory="filebrowser:create-new-directory";e.createNewFile="filebrowser:create-new-file";e.createNewMarkdownFile="filebrowser:create-new-markdown-file";e.refresh="filebrowser:refresh";e.rename="filebrowser:rename";e.copyShareableLink="filebrowser:share-main";e.copyPath="filebrowser:copy-path";e.showBrowser="filebrowser:activate";e.shutdown="filebrowser:shutdown";e.toggleBrowser="filebrowser:toggle-main";e.toggleNavigateToCurrentDirectory="filebrowser:toggle-navigate-to-current-directory";e.toggleLastModified="filebrowser:toggle-last-modified";e.search="filebrowser:search";e.toggleHiddenFiles="filebrowser:toggle-hidden-files"})(P||(P={}));const S="filebrowser";const k={id:"@jupyterlab/filebrowser-extension:browser",requires:[u.IFileBrowserFactory,y.ITranslator],optional:[r.ILayoutRestorer,p.ISettingRegistry,r.ITreePathUpdater,a.ICommandPalette],provides:u.IFileBrowserCommands,autoStart:true,activate:async(e,t,o,r,n,a,i)=>{const c=o.load("jupyterlab");const l=t.defaultBrowser;if(r){r.add(l,S)}const d=s.PageConfig.getOption("preferredPath");if(d){await l.model.cd(d)}U(e,t,o,n,i);const u=()=>{const t=(0,C.find)(e.commands.keyBindings,(e=>e.command===P.toggleBrowser));if(t){const e=x.CommandRegistry.formatKeystroke(t.keys.join(" "));l.title.caption=c.__("File Browser (%1)",e)}else{l.title.caption=c.__("File Browser")}};u();e.commands.keyBindingChanged.connect((()=>{u()}));return void Promise.all([e.restored,l.model.restored]).then((()=>{if(a){l.model.pathChanged.connect(((e,t)=>{a(t.newValue)}))}let e=false;let t=true;let o=true;let r=false;if(n){void n.load("@jupyterlab/filebrowser-extension:browser").then((n=>{n.changed.connect((t=>{e=t.get("navigateToCurrentDirectory").composite;l.navigateToCurrentDirectory=e}));e=n.get("navigateToCurrentDirectory").composite;l.navigateToCurrentDirectory=e;n.changed.connect((e=>{t=e.get("showLastModifiedColumn").composite;l.showLastModifiedColumn=t}));t=n.get("showLastModifiedColumn").composite;l.showLastModifiedColumn=t;n.changed.connect((e=>{o=e.get("useFuzzyFilter").composite;l.useFuzzyFilter=o}));o=n.get("useFuzzyFilter").composite;l.useFuzzyFilter=o;n.changed.connect((e=>{r=e.get("showHiddenFiles").composite;l.showHiddenFiles=r}));r=n.get("showHiddenFiles").composite;l.showHiddenFiles=r}))}}))}};const W={id:"@jupyterlab/filebrowser-extension:factory",provides:u.IFileBrowserFactory,requires:[l.IDocumentManager,y.ITranslator],optional:[f.IStateDB,r.IRouter,r.JupyterFrontEnd.ITreeResolver],activate:async(e,t,o,r,n,i)=>{const{commands:s}=e;const c=new a.WidgetTracker({namespace:S});const l=(e,n={})=>{var a;const i=new u.FilterFileBrowserModel({translator:o,auto:(a=n.auto)!==null&&a!==void 0?a:true,manager:t,driveName:n.driveName||"",refreshInterval:n.refreshInterval,state:n.state===null?undefined:n.state||r||undefined});const s=n.restore;const l=new u.FileBrowser({id:e,model:i,restore:s,translator:o});void c.add(l);return l};const d=l("filebrowser",{auto:false,restore:false});void E.restoreBrowser(d,s,n,i);return{createFileBrowser:l,defaultBrowser:d,tracker:c}}};const L={id:"@jupyterlab/filebrowser-extension:download",requires:[u.IFileBrowserFactory,y.ITranslator],autoStart:true,activate:(e,t,o)=>{const r=o.load("jupyterlab");const{commands:n}=e;const{tracker:i}=t;n.addCommand(P.download,{execute:()=>{const e=i.currentWidget;if(e){return e.download()}},icon:_.downloadIcon.bindprops({stylesheet:"menuItem"}),label:r.__("Download")});n.addCommand(P.copyDownloadLink,{execute:()=>{const e=i.currentWidget;if(!e){return}return e.model.manager.services.contents.getDownloadUrl(e.selectedItems().next().path).then((e=>{a.Clipboard.copyToSystem(e)}))},icon:_.copyIcon.bindprops({stylesheet:"menuItem"}),label:r.__("Copy Download Link"),mnemonic:0})}};const j={id:"@jupyterlab/filebrowser-extension:widget",requires:[l.IDocumentManager,u.IFileBrowserFactory,p.ISettingRegistry,a.IToolbarWidgetRegistry,y.ITranslator,r.ILabShell,u.IFileBrowserCommands],autoStart:true,activate:(e,t,o,r,n,i,s)=>{const{commands:c}=e;const{defaultBrowser:l,tracker:d}=o;const m=i.load("jupyterlab");l.node.setAttribute("role","region");l.node.setAttribute("aria-label",m.__("File Browser Section"));l.title.icon=_.folderIcon;n.registerFactory(T,"uploader",(e=>new u.Uploader({model:e.model,translator:i})));(0,a.setToolbar)(l,(0,a.createToolbarFactory)(n,r,T,j.id,i));s.add(l,"left",{rank:100});c.addCommand(P.showBrowser,{execute:e=>{const t=e.path||"";const r=E.getBrowserForPath(t,o);if(!r){return}if(l===r){s.activateById(l.id);return}else{const e=["left","right"];for(const t of e){const e=s.widgets(t);let o=e.next();while(o){if(o.contains(r)){s.activateById(o.id);return}o=e.next()}}}}});c.addCommand(P.hideBrowser,{execute:()=>{const e=d.currentWidget;if(e&&!e.isHidden){s.collapseLeft()}}});void s.restored.then((e=>{if(e.fresh&&s.mode!=="single-document"){void c.execute(P.showBrowser,void 0)}}));void Promise.all([e.restored,l.model.restored]).then((()=>{function e(){if(s.isEmpty("main")&&c.hasCommand("launcher:create")){void E.createLauncher(c,l)}}s.layoutModified.connect((()=>{e()}));s.currentChanged.connect((async(e,r)=>{if(l.navigateToCurrentDirectory&&r.newValue){const{newValue:e}=r;const a=t.contextForWidget(e);if(a){const{path:e}=a;try{await E.navigateToPath(e,o,i)}catch(n){console.warn(`${P.goToPath} failed to open: ${e}`,n)}}}}));e()}))}};const D={id:"@jupyterlab/filebrowser-extension:share-file",requires:[u.IFileBrowserFactory,y.ITranslator],autoStart:true,activate:(e,t,o)=>{const r=o.load("jupyterlab");const{commands:n}=e;const{tracker:i}=t;n.addCommand(P.copyShareableLink,{execute:()=>{const e=i.currentWidget;const t=e===null||e===void 0?void 0:e.selectedItems().next();if(!t){return}a.Clipboard.copyToSystem(s.PageConfig.getUrl({workspace:s.PageConfig.defaultWorkspace,treePath:t.path,toShare:true}))},isVisible:()=>!!i.currentWidget&&(0,C.toArray)(i.currentWidget.selectedItems()).length===1,icon:_.linkIcon.bindprops({stylesheet:"menuItem"}),label:r.__("Copy Shareable Link")})}};const O={id:"@jupyterlab/filebrowser-extension:open-with",requires:[u.IFileBrowserFactory],autoStart:true,activate:(e,t)=>{const{docRegistry:o}=e;const{tracker:r}=t;function n(e){var t,n;const a=(n=(t=e.menu.items.find((e=>{var t;return e.type==="submenu"&&((t=e.submenu)===null||t===void 0?void 0:t.id)==="jp-contextmenu-open-with"})))===null||t===void 0?void 0:t.submenu)!==null&&n!==void 0?n:null;if(!a){return}a.clearItems();const i=r.currentWidget?E.OpenWith.intersection((0,C.map)(r.currentWidget.selectedItems(),(e=>E.OpenWith.getFactories(o,e)))):new Set;i.forEach((e=>{a.addItem({args:{factory:e},command:P.open})}))}e.contextMenu.opened.connect(n)}};const N={id:"@jupyterlab/filebrowser-extension:open-browser-tab",requires:[u.IFileBrowserFactory,y.ITranslator],autoStart:true,activate:(e,t,o)=>{const{commands:r}=e;const n=o.load("jupyterlab");const{tracker:a}=t;r.addCommand(P.openBrowserTab,{execute:()=>{const e=a.currentWidget;if(!e){return}return Promise.all((0,C.toArray)((0,C.map)(e.selectedItems(),(e=>r.execute("docmanager:open-browser-tab",{path:e.path})))))},icon:_.addIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Open in New Browser Tab"),mnemonic:0})}};const M={id:"@jupyterlab/filebrowser-extension:file-upload-status",autoStart:true,requires:[u.IFileBrowserFactory,y.ITranslator],optional:[g.IStatusBar],activate:(e,t,o,r)=>{if(!r){return}const n=new u.FileUploadStatus({tracker:t.tracker,translator:o});r.registerStatusItem("@jupyterlab/filebrowser-extension:file-upload-status",{item:n,align:"middle",isActive:()=>!!n.model&&n.model.items.length>0,activeStateChanged:n.model.stateChanged})}};const R={id:"@jupyterlab/filebrowser-extension:open-url",autoStart:true,requires:[u.IFileBrowserFactory,y.ITranslator],optional:[a.ICommandPalette],activate:(e,t,o,r)=>{const{commands:n}=e;const i=o.load("jupyterlab");const{defaultBrowser:c}=t;const l=P.openUrl;n.addCommand(l,{label:e=>e.url?i.__("Open %1",e.url):i.__("Open from URL…"),caption:e=>e.url?i.__("Open %1",e.url):i.__("Open from URL"),execute:async e=>{var t,o,r;let l=(t=e===null||e===void 0?void 0:e.url)!==null&&t!==void 0?t:"";if(!l){l=(o=(await a.InputDialog.getText({label:i.__("URL"),placeholder:"https://example.com/path/to/file",title:i.__("Open URL"),okLabel:i.__("Open")})).value)!==null&&o!==void 0?o:undefined}if(!l){return}let d="";let u;try{const e=await fetch(l);u=await e.blob();d=(r=e.headers.get("Content-Type"))!==null&&r!==void 0?r:""}catch(m){if(m.response&&m.response.status!==200){m.message=i.__("Could not open URL: %1",l)}return(0,a.showErrorMessage)(i.__("Cannot fetch"),m)}try{const e=s.PathExt.basename(l);const t=new File([u],e,{type:d});const o=await c.model.upload(t);return n.execute("docmanager:open",{path:o.path})}catch(p){return(0,a.showErrorMessage)(i._p("showErrorMessage","Upload Error"),p)}}});if(r){r.addItem({command:l,category:i.__("File Operations")})}}};function U(e,t,o,r,n){const i=o.load("jupyterlab");const{docRegistry:c,commands:l}=e;const{defaultBrowser:d,tracker:u}=t;l.addCommand(P.del,{execute:()=>{const e=u.currentWidget;if(e){return e.delete()}},icon:_.closeIcon.bindprops({stylesheet:"menuItem"}),label:i.__("Delete"),mnemonic:0});l.addCommand(P.copy,{execute:()=>{const e=u.currentWidget;if(e){return e.copy()}},icon:_.copyIcon.bindprops({stylesheet:"menuItem"}),label:i.__("Copy"),mnemonic:0});l.addCommand(P.cut,{execute:()=>{const e=u.currentWidget;if(e){return e.cut()}},icon:_.cutIcon.bindprops({stylesheet:"menuItem"}),label:i.__("Cut")});l.addCommand(P.duplicate,{execute:()=>{const e=u.currentWidget;if(e){return e.duplicate()}},icon:_.copyIcon.bindprops({stylesheet:"menuItem"}),label:i.__("Duplicate")});l.addCommand(P.goToPath,{execute:async e=>{var r;const n=e.path||"";const a=!((r=e===null||e===void 0?void 0:e.dontShowBrowser)!==null&&r!==void 0?r:false);try{const e=await E.navigateToPath(n,t,o);if(e.type!=="directory"&&a){const e=E.getBrowserForPath(n,t);if(e){e.clearSelectedItems();const t=n.split("/");const o=t[t.length-1];if(o){await e.selectItemByName(o)}}}}catch(i){console.warn(`${P.goToPath} failed to go to: ${n}`,i)}if(a){return l.execute(P.showBrowser,{path:n})}}});l.addCommand(P.goUp,{label:"go up",execute:async()=>{const e=E.getBrowserForPath("",t);if(!e){return}const{model:o}=e;await o.restored;if(o.path===o.rootPath){return}try{await o.cd("..")}catch(r){console.warn(`${P.goUp} failed to go to parent directory of ${o.path}`,r)}}});l.addCommand(P.openPath,{label:e=>e.path?i.__("Open %1",e.path):i.__("Open from Path…"),caption:e=>e.path?i.__("Open %1",e.path):i.__("Open from path"),execute:async e=>{var o;let r;if(e===null||e===void 0?void 0:e.path){r=e.path}else{r=(o=(await a.InputDialog.getText({label:i.__("Path"),placeholder:"/path/relative/to/jlab/root",title:i.__("Open Path"),okLabel:i.__("Open")})).value)!==null&&o!==void 0?o:undefined}if(!r){return}try{const o=r!=="/"&&r.endsWith("/");if(o){r=r.slice(0,r.length-1)}const n=E.getBrowserForPath(r,t);const{services:a}=n.model.manager;const i=await a.contents.get(r,{content:false});if(o&&i.type!=="directory"){throw new Error(`Path ${r}/ is not a directory`)}await l.execute(P.goToPath,{path:r,dontShowBrowser:e.dontShowBrowser});if(i.type==="directory"){return}return l.execute("docmanager:open",{path:r})}catch(n){if(n.response&&n.response.status===404){n.message=i.__("Could not find path: %1",r)}return(0,a.showErrorMessage)(i.__("Cannot open"),n)}}});if(n){n.addItem({command:P.openPath,category:i.__("File Operations")})}l.addCommand(P.open,{execute:e=>{const t=e["factory"]||void 0;const o=u.currentWidget;if(!o){return}const{contents:r}=o.model.manager.services;return Promise.all((0,C.toArray)((0,C.map)(o.selectedItems(),(e=>{if(e.type==="directory"){const t=r.localPath(e.path);return o.model.cd(`/${t}`)}return l.execute("docmanager:open",{factory:t,path:e.path})}))))},icon:e=>{var t;const o=e["factory"]||void 0;if(o){const e=c.getFileType(o);return(t=e===null||e===void 0?void 0:e.icon)===null||t===void 0?void 0:t.bindprops({stylesheet:"menuItem"})}else{return _.folderIcon.bindprops({stylesheet:"menuItem"})}},label:e=>e["label"]||e["factory"]||i.__("Open"),mnemonic:0});l.addCommand(P.paste,{execute:()=>{const e=u.currentWidget;if(e){return e.paste()}},icon:_.pasteIcon.bindprops({stylesheet:"menuItem"}),label:i.__("Paste"),mnemonic:0});l.addCommand(P.createNewDirectory,{execute:()=>{const e=u.currentWidget;if(e){return e.createNewDirectory()}},icon:_.newFolderIcon.bindprops({stylesheet:"menuItem"}),label:i.__("New Folder")});l.addCommand(P.createNewFile,{execute:()=>{const e=u.currentWidget;if(e){return e.createNewFile({ext:"txt"})}},icon:_.textEditorIcon.bindprops({stylesheet:"menuItem"}),label:i.__("New File")});l.addCommand(P.createNewMarkdownFile,{execute:()=>{const e=u.currentWidget;if(e){return e.createNewFile({ext:"md"})}},icon:_.markdownIcon.bindprops({stylesheet:"menuItem"}),label:i.__("New Markdown File")});l.addCommand(P.refresh,{execute:e=>{const t=u.currentWidget;if(t){return t.model.refresh()}},icon:_.refreshIcon.bindprops({stylesheet:"menuItem"}),caption:i.__("Refresh the file browser."),label:i.__("Refresh File List")});l.addCommand(P.rename,{execute:e=>{const t=u.currentWidget;if(t){return t.rename()}},icon:_.editIcon.bindprops({stylesheet:"menuItem"}),label:i.__("Rename"),mnemonic:0});l.addCommand(P.copyPath,{execute:()=>{const e=u.currentWidget;if(!e){return}const t=e.selectedItems().next();if(!t){return}a.Clipboard.copyToSystem(t.path)},isVisible:()=>!!u.currentWidget&&u.currentWidget.selectedItems().next!==undefined,icon:_.fileIcon.bindprops({stylesheet:"menuItem"}),label:i.__("Copy Path")});l.addCommand(P.shutdown,{execute:()=>{const e=u.currentWidget;if(e){return e.shutdownKernels()}},icon:_.stopIcon.bindprops({stylesheet:"menuItem"}),label:i.__("Shut Down Kernel")});l.addCommand(P.toggleBrowser,{execute:()=>{if(d.isHidden){return l.execute(P.showBrowser,void 0)}return l.execute(P.hideBrowser,void 0)}});l.addCommand(P.createLauncher,{label:i.__("New Launcher"),icon:e=>e.toolbar?_.addIcon:undefined,execute:e=>{if(l.hasCommand("launcher:create")){return E.createLauncher(l,d,e)}}});if(r){l.addCommand(P.toggleNavigateToCurrentDirectory,{label:i.__("Show Active File in File Browser"),isToggled:()=>d.navigateToCurrentDirectory,execute:()=>{const e=!d.navigateToCurrentDirectory;const t="navigateToCurrentDirectory";return r.set("@jupyterlab/filebrowser-extension:browser",t,e).catch((e=>{console.error(`Failed to set navigateToCurrentDirectory setting`)}))}})}l.addCommand(P.toggleLastModified,{label:i.__("Show Last Modified Column"),isToggled:()=>d.showLastModifiedColumn,execute:()=>{const e=!d.showLastModifiedColumn;const t="showLastModifiedColumn";if(r){return r.set("@jupyterlab/filebrowser-extension:browser",t,e).catch((e=>{console.error(`Failed to set showLastModifiedColumn setting`)}))}}});l.addCommand(P.toggleHiddenFiles,{label:i.__("Show Hidden Files"),isToggled:()=>d.showHiddenFiles,isVisible:()=>s.PageConfig.getOption("allow_hidden_files")==="true",execute:()=>{const e=!d.showHiddenFiles;const t="showHiddenFiles";if(r){return r.set("@jupyterlab/filebrowser-extension:browser",t,e).catch((e=>{console.error(`Failed to set showHiddenFiles setting`)}))}}});l.addCommand(P.search,{label:i.__("Search on File Names"),execute:()=>alert("search")});if(n){n.addItem({command:P.toggleNavigateToCurrentDirectory,category:i.__("File Operations")})}}var E;(function(e){function t(e,t,o){const{model:r}=t;return e.execute("launcher:create",Object.assign({cwd:r.path},o)).then((e=>{r.pathChanged.connect((()=>{if(e.content){e.content.cwd=r.path}}),e);return e}))}e.createLauncher=t;function o(e,t){const{defaultBrowser:o,tracker:r}=t;const n=o.model.manager.services.contents.driveName(e);if(n){const t=r.find((e=>e.model.driveName===n));if(!t){console.warn(`${P.goToPath} failed to find filebrowser for path: ${e}`);return}return t}return o}e.getBrowserForPath=o;async function r(t,o,r){const n=r.load("jupyterlab");const a=e.getBrowserForPath(t,o);if(!a){throw new Error(n.__("No browser for path"))}const{services:i}=a.model.manager;const c=i.contents.localPath(t);await i.ready;const l=await i.contents.get(t,{content:false});const{model:d}=a;await d.restored;if(l.type==="directory"){await d.cd(`/${c}`)}else{await d.cd(`/${s.PathExt.dirname(c)}`)}return l}e.navigateToPath=r;async function n(e,t,o,r){const n="jp-mod-restoring";e.addClass(n);if(!o){await e.model.restore(e.id);await e.model.refresh();e.removeClass(n);return}const a=async()=>{o.routed.disconnect(a);const i=await(r===null||r===void 0?void 0:r.paths);if((i===null||i===void 0?void 0:i.file)||(i===null||i===void 0?void 0:i.browser)){await e.model.restore(e.id,false);if(i.file){await t.execute(P.openPath,{path:i.file,dontShowBrowser:true})}if(i.browser){await t.execute(P.openPath,{path:i.browser,dontShowBrowser:true})}}else{await e.model.restore(e.id);await e.model.refresh()}e.removeClass(n)};o.routed.connect(a)}e.restoreBrowser=n})(E||(E={}));const H=[W,k,D,M,L,j,O,N,R];const $=H;(function(e){let t;(function(e){function t(e,t){var o;const r=e.preferredWidgetFactories(t.path).map((e=>e.name));const n=(o=e.getWidgetFactory("notebook"))===null||o===void 0?void 0:o.name;if(n&&t.type==="notebook"&&r.indexOf(n)===-1){r.unshift(n)}return r}e.getFactories=t;function o(e){const t=e.next();if(!t){return new Set}const o=new Set(t);return(0,C.reduce)(e,((e,t)=>new Set(t.filter((t=>e.has(t))))),o)}e.intersection=o})(t=e.OpenWith||(e.OpenWith={}))})(E||(E={}))}}]);
//# sourceMappingURL=8831.f405f8cf2f1bb8a974ac.js.map?v=f405f8cf2f1bb8a974ac