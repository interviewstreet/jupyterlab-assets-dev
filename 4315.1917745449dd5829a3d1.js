"use strict";(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[4315,5606],{74315:(t,e,i)=>{i.r(e);i.d(e,{IImageTracker:()=>r,ImageViewer:()=>l,ImageViewerFactory:()=>d});var s=i(55172);const r=new s.Token("@jupyterlab/imageviewer:IImageTracker",`A widget tracker for images.\n  Use this if you want to be able to iterate over and interact with images\n  viewed by the application.`);var a=i(78098);var o=i(87447);var n=i(35627);var c=i(65178);const h="jp-ImageViewer";class l extends c.Widget{constructor(t){super();this._scale=1;this._matrix=[1,0,0,1];this._colorinversion=0;this._ready=new s.PromiseDelegate;this.context=t;this.node.tabIndex=0;this.addClass(h);this._img=document.createElement("img");this.node.appendChild(this._img);this._onTitleChanged();t.pathChanged.connect(this._onTitleChanged,this);void t.ready.then((()=>{if(this.isDisposed){return}const e=t.contentsModel;this._mimeType=e.mimetype;this._render();t.model.contentChanged.connect(this.update,this);t.fileChanged.connect(this.update,this);this._ready.resolve(void 0)}))}[o.Printing.symbol](){return()=>o.Printing.printWidget(this)}get ready(){return this._ready.promise}get scale(){return this._scale}set scale(t){if(t===this._scale){return}this._scale=t;this._updateStyle()}get colorinversion(){return this._colorinversion}set colorinversion(t){if(t===this._colorinversion){return}this._colorinversion=t;this._updateStyle()}dispose(){if(this._img.src){URL.revokeObjectURL(this._img.src||"")}super.dispose()}resetRotationFlip(){this._matrix=[1,0,0,1];this._updateStyle()}rotateCounterclockwise(){this._matrix=_.prod(this._matrix,_.rotateCounterclockwiseMatrix);this._updateStyle()}rotateClockwise(){this._matrix=_.prod(this._matrix,_.rotateClockwiseMatrix);this._updateStyle()}flipHorizontal(){this._matrix=_.prod(this._matrix,_.flipHMatrix);this._updateStyle()}flipVertical(){this._matrix=_.prod(this._matrix,_.flipVMatrix);this._updateStyle()}onUpdateRequest(t){if(this.isDisposed||!this.context.isReady){return}this._render()}onActivateRequest(t){this.node.focus()}_onTitleChanged(){this.title.label=a.PathExt.basename(this.context.localPath)}_render(){const t=this.context;const e=t.contentsModel;if(!e){return}const i=this._img.src||"";let s=t.model.toString();if(e.format==="base64"){this._img.src=`data:${this._mimeType};base64,${s}`}else{const t=new Blob([s],{type:this._mimeType});this._img.src=URL.createObjectURL(t)}URL.revokeObjectURL(i)}_updateStyle(){const[t,e,i,s]=this._matrix;const[r,a]=_.prodVec(this._matrix,[1,1]);const o=`matrix(${t}, ${e}, ${i}, ${s}, 0, 0) translate(${r<0?-100:0}%, ${a<0?-100:0}%) `;this._img.style.transform=`scale(${this._scale}) ${o}`;this._img.style.filter=`invert(${this._colorinversion})`}}class d extends n.ABCWidgetFactory{createNewWidget(t){const e=new l(t);const i=new n.DocumentWidget({content:e,context:t});return i}}var _;(function(t){function e([t,e,i,s],[r,a,o,n]){return[t*r+e*o,t*a+e*n,i*r+s*o,i*a+s*n]}t.prod=e;function i([t,e,i,s],[r,a]){return[t*r+e*a,i*r+s*a]}t.prodVec=i;t.rotateClockwiseMatrix=[0,1,-1,0];t.rotateCounterclockwiseMatrix=[0,-1,1,0];t.flipHMatrix=[-1,0,0,1];t.flipVMatrix=[1,0,0,-1]})(_||(_={}))}}]);
//# sourceMappingURL=4315.1917745449dd5829a3d1.js.map?v=1917745449dd5829a3d1