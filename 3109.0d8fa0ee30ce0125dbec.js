(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[3109],{3109:(e,n,t)=>{"use strict";t.r(n);t.d(n,{default:()=>F});var a=t(10890);var o=t.n(a);var i=t(67616);var r=t.n(i);var s=t(41994);var c=t.n(s);var d=t(72842);var l=t.n(d);var u=t(95990);var g=t.n(u);var v=t(66853);var b=t.n(v);var p=t(66426);var m=t.n(p);var f=t(70865);var h=t.n(f);var I=t(28871);var C=t.n(I);var y=t(76463);var D=t.n(y);var _=t(18241);var S=t.n(_);var w=t(21464);var x=t.n(w);var k=t(95994);var E=t.n(k);var T=t(70278);var O=t.n(T);const R={id:"@jupyterlab/debugger-extension:consoles",autoStart:true,requires:[p.IDebugger,u.IConsoleTracker],optional:[a.ILabShell],activate:(e,n,t,a)=>{const o=new p.Debugger.Handler({type:"console",shell:e.shell,service:n});const i=async n=>{const{sessionContext:t}=n;await t.ready;await o.updateContext(n,t);e.commands.notifyCommandChanged()};if(a){a.currentChanged.connect(((e,n)=>{const t=n.newValue;if(t instanceof u.ConsolePanel){void i(t)}}))}else{t.currentChanged.connect(((e,n)=>{if(n){void i(n)}}))}}};const V={id:"@jupyterlab/debugger-extension:files",autoStart:true,requires:[p.IDebugger,I.IEditorTracker],optional:[a.ILabShell],activate:(e,n,t,a)=>{const o=new p.Debugger.Handler({type:"file",shell:e.shell,service:n});const i={};const r=async n=>{const t=e.serviceManager.sessions;try{const a=await t.findByPath(n.context.path);if(!a){return}let r=i[a.id];if(!r){r=t.connectTo({model:a});i[a.id]=r}await o.update(n,r);e.commands.notifyCommandChanged()}catch(a){return}};if(a){a.currentChanged.connect(((e,n)=>{const t=n.newValue;if(t instanceof f.DocumentWidget){const{content:e}=t;if(e instanceof I.FileEditor){void r(t)}}}))}else{t.currentChanged.connect(((e,n)=>{if(n){void r(n)}}))}}};const j={id:"@jupyterlab/debugger-extension:notebooks",autoStart:true,requires:[p.IDebugger,_.INotebookTracker,T.ITranslator],optional:[a.ILabShell,i.ICommandPalette],provides:p.IDebuggerHandler,activate:(e,n,t,a,o,r)=>{const s=new p.Debugger.Handler({type:"notebook",shell:e.shell,service:n});const c=a.load("jupyterlab");e.commands.addCommand(p.Debugger.CommandIDs.restartDebug,{label:c.__("Restart Kernel and Debug…"),caption:c.__("Restart Kernel and Debug…"),isEnabled:()=>n.isStarted,execute:async()=>{const e=n.getDebuggerState();await n.stop();const a=t.currentWidget;if(!a){return}const{content:o,sessionContext:r}=a;const c=await i.sessionContextDialogs.restart(r);if(!c){return}await n.restoreDebuggerState(e);await s.updateWidget(a,r.session);await _.NotebookActions.runAll(o,r)}});const d=async n=>{if(n){const{sessionContext:e}=n;await e.ready;await s.updateContext(n,e)}e.commands.notifyCommandChanged()};if(o){o.currentChanged.connect(((e,n)=>{const t=n.newValue;if(t instanceof _.NotebookPanel){void d(t)}}))}else{t.currentChanged.connect(((e,n)=>{if(n){void d(n)}}))}if(r){r.addItem({category:"Notebook Operations",command:p.Debugger.CommandIDs.restartDebug})}return s}};const M={id:"@jupyterlab/debugger-extension:service",autoStart:true,provides:p.IDebugger,requires:[p.IDebuggerConfig],optional:[p.IDebuggerSources],activate:(e,n,t)=>new p.Debugger.Service({config:n,debuggerSources:t,specsManager:e.serviceManager.kernelspecs})};const L={id:"@jupyterlab/debugger-extension:config",provides:p.IDebuggerConfig,autoStart:true,activate:()=>new p.Debugger.Config};const P={id:"@jupyterlab/debugger-extension:sources",autoStart:true,provides:p.IDebuggerSources,requires:[p.IDebuggerConfig,s.IEditorServices],optional:[_.INotebookTracker,u.IConsoleTracker,I.IEditorTracker],activate:(e,n,t,a,o,i)=>new p.Debugger.Sources({config:n,shell:e.shell,editorServices:t,notebookTracker:a,consoleTracker:o,editorTracker:i})};const W={id:"@jupyterlab/debugger-extension:variables",autoStart:true,requires:[p.IDebugger,p.IDebuggerHandler,T.ITranslator],optional:[i.IThemeManager,w.IRenderMimeRegistry],activate:(e,n,t,a,o,r)=>{const s=a.load("jupyterlab");const{commands:c,shell:d}=e;const l=new i.WidgetTracker({namespace:"debugger/inspect-variable"});const u=new i.WidgetTracker({namespace:"debugger/render-variable"});const g=p.Debugger.CommandIDs;c.addCommand(g.inspectVariable,{label:s.__("Inspect Variable"),caption:s.__("Inspect Variable"),isEnabled:e=>{var t,a,o,i;return!!((t=n.session)===null||t===void 0?void 0:t.isStarted)&&((i=(a=e.variableReference)!==null&&a!==void 0?a:(o=n.model.variables.selectedVariable)===null||o===void 0?void 0:o.variablesReference)!==null&&i!==void 0?i:0)>0},execute:async e=>{var t,a,r,s;let{variableReference:u,name:g}=e;if(!u){u=(t=n.model.variables.selectedVariable)===null||t===void 0?void 0:t.variablesReference}if(!g){g=(a=n.model.variables.selectedVariable)===null||a===void 0?void 0:a.name}const v=`jp-debugger-variable-${g}`;if(!g||!u||l.find((e=>e.id===v))){return}const b=await n.inspectVariable(u);if(!b||b.length===0){return}const m=n.model.variables;const f=new i.MainAreaWidget({content:new p.Debugger.VariablesGrid({model:m,commands:c,scopes:[{name:g,variables:b}],themeManager:o})});f.addClass("jp-DebuggerVariables");f.id=v;f.title.icon=p.Debugger.Icons.variableIcon;f.title.label=`${(s=(r=n.session)===null||r===void 0?void 0:r.connection)===null||s===void 0?void 0:s.name} - ${g}`;void l.add(f);const h=()=>{f.dispose();m.changed.disconnect(h)};m.changed.connect(h);d.add(f,"main",{mode:l.currentWidget?"split-right":"split-bottom",activate:false})}});c.addCommand(g.renderMimeVariable,{label:s.__("Render Variable"),caption:s.__("Render variable according to its mime type"),isEnabled:()=>{var e;return!!((e=n.session)===null||e===void 0?void 0:e.isStarted)},isVisible:()=>n.model.hasRichVariableRendering&&(r!==null||t.activeWidget instanceof _.NotebookPanel),execute:e=>{var o,i,s,c,l,g,v,b;let{name:m,frameId:f}=e;if(!m){m=(o=n.model.variables.selectedVariable)===null||o===void 0?void 0:o.name}if(!f){f=(i=n.model.callstack.frame)===null||i===void 0?void 0:i.id}const h=t.activeWidget;let I=h instanceof _.NotebookPanel?h.content.rendermime:r;if(!I){return}const C=`jp-debugger-variable-mime-${m}-${(c=(s=n.session)===null||s===void 0?void 0:s.connection)===null||c===void 0?void 0:c.path.replace("/","-")}`;if(!m||u.find((e=>e.id===C))||!f&&n.hasStoppedThreads()){return}const y=n.model.variables;const D=new p.Debugger.VariableRenderer({dataLoader:()=>n.inspectRichVariable(m,f),rendermime:I,translator:a});D.addClass("jp-DebuggerRichVariable");D.id=C;D.title.icon=p.Debugger.Icons.variableIcon;D.title.label=`${m} - ${(g=(l=n.session)===null||l===void 0?void 0:l.connection)===null||g===void 0?void 0:g.name}`;D.title.caption=`${m} - ${(b=(v=n.session)===null||v===void 0?void 0:v.connection)===null||b===void 0?void 0:b.path}`;void u.add(D);const S=()=>{D.dispose();y.changed.disconnect(w);h===null||h===void 0?void 0:h.disposed.disconnect(S)};const w=()=>{if(t.activeWidget===h){void D.refresh()}};D.disposed.connect(S);y.changed.connect(w);h===null||h===void 0?void 0:h.disposed.connect(S);d.add(D,"main",{mode:u.currentWidget?"split-right":"split-bottom",activate:false})}})}};const N={id:"@jupyterlab/debugger-extension:sidebar",provides:p.IDebuggerSidebar,requires:[p.IDebugger,s.IEditorServices,T.ITranslator],optional:[i.IThemeManager,k.ISettingRegistry],autoStart:true,activate:async(e,n,t,a,o,i)=>{const{commands:r}=e;const s=p.Debugger.CommandIDs;const c={registry:r,continue:s.debugContinue,terminate:s.terminate,next:s.next,stepIn:s.stepIn,stepOut:s.stepOut,evaluate:s.evaluate};const d={registry:r,pause:s.pause};const l=new p.Debugger.Sidebar({service:n,callstackCommands:c,breakpointsCommands:d,editorServices:t,themeManager:o,translator:a});if(i){const e=await i.load(q.id);const t=()=>{var t,a,o,i;const r=e.get("variableFilters").composite;const s=(i=(o=(a=(t=n.session)===null||t===void 0?void 0:t.connection)===null||a===void 0?void 0:a.kernel)===null||o===void 0?void 0:o.name)!==null&&i!==void 0?i:"";if(s&&r[s]){l.variables.filter=new Set(r[s])}const c=e.get("defaultKernelSourcesFilter").composite;l.kernelSources.filter=c};t();e.changed.connect(t);n.sessionChanged.connect(t)}return l}};const q={id:"@jupyterlab/debugger-extension:main",requires:[p.IDebugger,p.IDebuggerSidebar,s.IEditorServices,T.ITranslator],optional:[i.ICommandPalette,p.IDebuggerSources,a.ILabShell,a.ILayoutRestorer,y.ILoggerRegistry],autoStart:true,activate:async(e,n,t,a,o,i,r,s,c,l)=>{var u;const g=o.load("jupyterlab");const{commands:b,shell:m,serviceManager:f}=e;const{kernelspecs:h}=f;const I=p.Debugger.CommandIDs;const C=v.PageConfig.getOption("alwaysShowDebuggerExtension").toLowerCase()==="true";if(!C){await h.ready;const e=(u=h.specs)===null||u===void 0?void 0:u.kernelspecs;if(!e){return}const n=Object.keys(e).some((n=>{var t,a,o;return!!((o=(a=(t=e[n])===null||t===void 0?void 0:t.metadata)===null||a===void 0?void 0:a["debugger"])!==null&&o!==void 0?o:false)}));if(!n){return}}const y=async()=>{var e,t,o;const i=(t=(e=n.session)===null||e===void 0?void 0:e.connection)===null||t===void 0?void 0:t.kernel;if(!i){return""}const r=(await i.info).language_info;const s=r.name;const c=(o=a===null||a===void 0?void 0:a.mimeTypeService.getMimeTypeByLanguage({name:s}))!==null&&o!==void 0?o:"";return c};const D=new w.RenderMimeRegistry({initialFactories:w.standardRendererFactories});b.addCommand(I.evaluate,{label:g.__("Evaluate Code"),caption:g.__("Evaluate Code"),icon:p.Debugger.Icons.evaluateIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{var e,t,a;const o=await y();const i=await p.Debugger.Dialogs.getCode({title:g.__("Evaluate Code"),okLabel:g.__("Evaluate"),cancelLabel:g.__("Cancel"),mimeType:o,rendermime:D});const r=i.value;if(!i.button.accept||!r){return}const s=await n.evaluate(r);if(s){const o=s.result;const i=(t=(e=n===null||n===void 0?void 0:n.session)===null||e===void 0?void 0:e.connection)===null||t===void 0?void 0:t.path;const r=i?(a=l===null||l===void 0?void 0:l.getLogger)===null||a===void 0?void 0:a.call(l,i):undefined;if(r){r.log({type:"text",data:o,level:r.level})}else{console.debug(o)}}}});b.addCommand(I.debugContinue,{label:g.__("Continue"),caption:g.__("Continue"),icon:p.Debugger.Icons.continueIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.continue();b.notifyCommandChanged()}});b.addCommand(I.terminate,{label:g.__("Terminate"),caption:g.__("Terminate"),icon:p.Debugger.Icons.terminateIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.restart();b.notifyCommandChanged()}});b.addCommand(I.next,{label:g.__("Next"),caption:g.__("Next"),icon:p.Debugger.Icons.stepOverIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.next()}});b.addCommand(I.stepIn,{label:g.__("Step In"),caption:g.__("Step In"),icon:p.Debugger.Icons.stepIntoIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.stepIn()}});b.addCommand(I.stepOut,{label:g.__("Step Out"),caption:g.__("Step Out"),icon:p.Debugger.Icons.stepOutIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.stepOut()}});b.addCommand(I.pause,{label:g.__("Enable / Disable pausing on exceptions"),caption:()=>n.isStarted?n.pauseOnExceptionsIsValid()?n.isPausingOnExceptions?g.__("Disable pausing on exceptions"):g.__("Enable pausing on exceptions"):g.__("Kernel does not support pausing on exceptions."):g.__("Enable / Disable pausing on exceptions"),className:"jp-PauseOnExceptions",icon:p.Debugger.Icons.pauseOnExceptionsIcon,isToggled:()=>n.isPausingOnExceptions,isEnabled:()=>n.pauseOnExceptionsIsValid(),execute:async()=>{await n.pauseOnExceptions(!n.isPausingOnExceptions);b.notifyCommandChanged()}});n.eventMessage.connect(((e,n)=>{b.notifyCommandChanged();if(s&&n.event==="initialized"){s.activateById(t.id)}}));n.sessionChanged.connect((e=>{b.notifyCommandChanged()}));if(c){c.add(t,"debugger-sidebar")}t.node.setAttribute("role","region");t.node.setAttribute("aria-label",g.__("Debugger section"));m.add(t,"right");if(i){const e=g.__("Debugger");[I.debugContinue,I.terminate,I.next,I.stepIn,I.stepOut,I.evaluate,I.pause].forEach((n=>{i.addItem({command:n,category:e})}))}if(r){const{model:e}=n;const t=new p.Debugger.ReadOnlyEditorFactory({editorServices:a});const o=(e,t)=>{var a,o,i,s,c,d,l,u,g;r.find({focus:true,kernel:(s=(i=(o=(a=n.session)===null||a===void 0?void 0:a.connection)===null||o===void 0?void 0:o.kernel)===null||i===void 0?void 0:i.name)!==null&&s!==void 0?s:"",path:(l=(d=(c=n.session)===null||c===void 0?void 0:c.connection)===null||d===void 0?void 0:d.path)!==null&&l!==void 0?l:"",source:(g=(u=t===null||t===void 0?void 0:t.source)===null||u===void 0?void 0:u.path)!==null&&g!==void 0?g:""}).forEach((e=>{requestAnimationFrame((()=>{p.Debugger.EditorHandler.showCurrentLine(e,t.line)}))}))};const i=(e,n,t)=>{if(!n){return}s(null,n,t)};const s=(e,a,o)=>{var i,s,c,l,u,g,b;if(!a){return}const{content:m,mimeType:f,path:h}=a;const I=r.find({focus:true,kernel:(l=(c=(s=(i=n.session)===null||i===void 0?void 0:i.connection)===null||s===void 0?void 0:s.kernel)===null||c===void 0?void 0:c.name)!==null&&l!==void 0?l:"",path:(b=(g=(u=n.session)===null||u===void 0?void 0:u.connection)===null||g===void 0?void 0:g.path)!==null&&b!==void 0?b:"",source:h});if(I.length>0){if(o&&typeof o.line!=="undefined"){I.forEach((e=>{if(e instanceof d.CodeMirrorEditor){e.scrollIntoViewCentered({line:o.line-1,ch:o.column||0})}else{e.revealPosition({line:o.line-1,column:o.column||0})}}))}return}const C=t.createNewEditor({content:m,mimeType:f,path:h});const y=C.editor;const D=new p.Debugger.EditorHandler({debuggerService:n,editor:y,path:h});C.disposed.connect((()=>D.dispose()));r.open({label:v.PathExt.basename(h),caption:h,editorWrapper:C});const _=n.model.callstack.frame;if(_){p.Debugger.EditorHandler.showCurrentLine(y,_.line)}};e.callstack.currentFrameChanged.connect(o);e.sources.currentSourceOpened.connect(s);e.kernelSources.kernelSourceOpened.connect(i);e.breakpoints.clicked.connect((async(e,t)=>{var a;const o=(a=t.source)===null||a===void 0?void 0:a.path;const i=await n.getSource({sourceReference:0,path:o});s(null,i,t)}))}}};const $=[M,R,V,j,W,N,q,P,L];const F=$}}]);
//# sourceMappingURL=3109.0d8fa0ee30ce0125dbec.js.map?v=0d8fa0ee30ce0125dbec